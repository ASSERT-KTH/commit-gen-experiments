BLEU SCORE: 0.049900497019368314

TEST MSG: Adding example that shows how to pass objects via ids
GENERATED MSG: Added new example showing how background threads work .

TEST DIFF (one line): diff - - git a / examples / threadExample / src / main / AndroidManifest . xml b / examples / threadExample / src / main / AndroidManifest . xml <nl> index 2ec0c77 . . 3f54c69 100644 <nl> - - - a / examples / threadExample / src / main / AndroidManifest . xml <nl> + + + b / examples / threadExample / src / main / AndroidManifest . xml <nl> @ @ - 1 , 22 + 1 , 32 @ @ <nl> < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> - < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> - package = " io . realm . examples . threads " > <nl> + < manifest package = " io . realm . examples . threads " <nl> + xmlns : android = " http : / / schemas . android . com / apk / res / android " > <nl> <nl> + < uses - permission android : name = " android . permission . WAKE _ LOCK " / > <nl> + <nl> < application <nl> + android : name = " . MyApplication " <nl> android : allowBackup = " true " <nl> android : icon = " @ drawable / ic _ launcher " <nl> android : label = " @ string / app _ name " <nl> - android : name = " . MyApplication " <nl> - android : theme = " @ style / AppTheme " > <nl> + android : theme = " @ style / AppTheme " > <nl> < activity <nl> android : name = " . ThreadExampleActivity " <nl> - android : label = " @ string / app _ name " > <nl> + android : label = " @ string / app _ name " > <nl> < intent - filter > <nl> - < action android : name = " android . intent . action . MAIN " / > <nl> + < action android : name = " android . intent . action . MAIN " / > <nl> <nl> - < category android : name = " android . intent . category . LAUNCHER " / > <nl> + < category android : name = " android . intent . category . LAUNCHER " / > <nl> < / intent - filter > <nl> < / activity > <nl> + < activity <nl> + android : name = " . ReceivingActivity " <nl> + android : label = " @ string / title _ activity _ receiving " > <nl> + < / activity > <nl> + < service android : name = " . ReceivingService " <nl> + android : exported = " false " / > <nl> + < receiver android : name = " . WakefulReceivingBroadcastReceiver " / > <nl> + < service android : name = " . WakefulReceivingService " / > <nl> < / application > <nl> <nl> - < / manifest > <nl> + < / manifest > <nl> \ No newline at end of file <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / PassingObjectsFragment . java b / examples / threadExample / src / main / java / io / realm / examples / threads / PassingObjectsFragment . java <nl> new file mode 100644 <nl> index 0000000 . . 8ce4838 <nl> - - - / dev / null <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / PassingObjectsFragment . java <nl> @ @ - 0 , 0 + 1 , 118 @ @ <nl> + / * <nl> + * Copyright 2015 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . threads ; <nl> + <nl> + <nl> + import android . content . Intent ; <nl> + import android . os . Bundle ; <nl> + import android . support . annotation . Nullable ; <nl> + import android . support . v4 . app . Fragment ; <nl> + import android . view . LayoutInflater ; <nl> + import android . view . View ; <nl> + import android . view . ViewGroup ; <nl> + import android . widget . TextView ; <nl> + <nl> + import java . util . UUID ; <nl> + <nl> + import io . realm . Realm ; <nl> + import io . realm . examples . threads . model . Person ; <nl> + <nl> + public class PassingObjectsFragment extends Fragment { <nl> + <nl> + private TextView textContent ; <nl> + <nl> + private Realm realm ; <nl> + private Person person ; <nl> + <nl> + @ Nullable <nl> + @ Override <nl> + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { <nl> + View view = inflater . inflate ( R . layout . fragment _ passing _ objects , container , false ) ; <nl> + textContent = ( TextView ) view . findViewById ( R . id . text _ content ) ; <nl> + <nl> + setListeners ( view ) ; <nl> + return view ; <nl> + } <nl> + <nl> + / * * <nl> + * Sets the click listeners on the three buttons . <nl> + * <nl> + * RealmObjects are thread confined , therefore they cannot be passed through an intent . We <nl> + * recommend using an object identifier and passing that value through the intent . The <nl> + * receiving Android component will then obtain that value , open the Realm and query for <nl> + * that object . <nl> + * <nl> + * Below , each { @ link android . view . View . OnClickListener } builds an { @ link Intent } that <nl> + * accepts the { @ link Person # getId ( ) } value as a string extra . This is the value that will <nl> + * be retrieved in the receiving Android components ( { @ link ReceivingActivity } , <nl> + * { @ link ReceivingService } and { @ link WakefulReceivingBroadcastReceiver } . <nl> + * <nl> + * @ param view The view where the buttons are located . <nl> + * / <nl> + private void setListeners ( View view ) { <nl> + view . findViewById ( R . id . start _ activity ) . setOnClickListener ( new View . OnClickListener ( ) { <nl> + @ Override <nl> + public void onClick ( View v ) { <nl> + Intent intent = new Intent ( getActivity ( ) , ReceivingActivity . class ) ; <nl> + intent . putExtra ( " person _ id " , person . getId ( ) ) ; <nl> + startActivity ( intent ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + view . findViewById ( R . id . start _ intent _ service ) . setOnClickListener ( new View . OnClickListener ( ) { <nl> + @ Override <nl> + public void onClick ( View v ) { <nl> + Intent intent = new Intent ( getActivity ( ) , ReceivingService . class ) ; <nl> + intent . putExtra ( " person _ id " , person . getId ( ) ) ; <nl> + getActivity ( ) . startService ( intent ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + view . findViewById ( R . id . start _ receiver ) . setOnClickListener ( new View . OnClickListener ( ) { <nl> + @ Override <nl> + public void onClick ( View v ) { <nl> + Intent intent = new Intent ( getActivity ( ) , WakefulReceivingBroadcastReceiver . class ) ; <nl> + intent . putExtra ( " person _ id " , person . getId ( ) ) ; <nl> + getActivity ( ) . sendBroadcast ( intent ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onActivityCreated ( Bundle savedInstanceState ) { <nl> + super . onActivityCreated ( savedInstanceState ) ; <nl> + <nl> + realm = Realm . getDefaultInstance ( ) ; <nl> + realm . beginTransaction ( ) ; <nl> + person = realm . createObject ( Person . class ) ; <nl> + person . setName ( " Jane " ) ; <nl> + person . setAge ( 42 ) ; <nl> + person . setId ( UUID . randomUUID ( ) . toString ( ) ) ; <nl> + realm . commitTransaction ( ) ; <nl> + <nl> + textContent . setText ( person . toString ( ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onDestroy ( ) { <nl> + super . onDestroy ( ) ; <nl> + / / Clear out all Person instances . <nl> + realm . clear ( Person . class ) ; <nl> + realm . close ( ) ; <nl> + } <nl> + } <nl> + <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingActivity . java b / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingActivity . java <nl> new file mode 100644 <nl> index 0000000 . . 5e2c6fa <nl> - - - / dev / null <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingActivity . java <nl> @ @ - 0 , 0 + 1 , 51 @ @ <nl> + / * <nl> + * Copyright 2015 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . threads ; <nl> + <nl> + import android . os . Bundle ; <nl> + import android . support . v7 . app . ActionBarActivity ; <nl> + import android . widget . TextView ; <nl> + <nl> + import io . realm . Realm ; <nl> + import io . realm . examples . threads . model . Person ; <nl> + <nl> + public class ReceivingActivity extends ActionBarActivity { <nl> + <nl> + private Realm realm ; <nl> + <nl> + @ Override <nl> + protected void onCreate ( Bundle savedInstanceState ) { <nl> + super . onCreate ( savedInstanceState ) ; <nl> + setContentView ( R . layout . activity _ receiving ) ; <nl> + <nl> + realm = Realm . getDefaultInstance ( ) ; <nl> + <nl> + if ( getIntent ( ) ! = null ) { <nl> + String personId = getIntent ( ) . getStringExtra ( " person _ id " ) ; <nl> + if ( personId ! = null ) { <nl> + Person person = realm . where ( Person . class ) . equalTo ( " id " , personId ) . findFirst ( ) ; <nl> + ( ( TextView ) findViewById ( R . id . received _ content ) ) . setText ( String . format ( " Received person _ id and loaded : % s " , person . toString ( ) ) ) ; <nl> + } <nl> + } <nl> + } <nl> + <nl> + @ Override <nl> + protected void onDestroy ( ) { <nl> + super . onDestroy ( ) ; <nl> + realm . close ( ) ; <nl> + } <nl> + } <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingService . java b / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingService . java <nl> new file mode 100644 <nl> index 0000000 . . 53f5ae4 <nl> - - - / dev / null <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingService . java <nl> @ @ - 0 , 0 + 1 , 49 @ @ <nl> + / * <nl> + * Copyright 2015 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . threads ; <nl> + <nl> + import android . app . IntentService ; <nl> + import android . content . Intent ; <nl> + import android . os . Handler ; <nl> + import android . widget . Toast ; <nl> + <nl> + import io . realm . Realm ; <nl> + import io . realm . examples . threads . model . Person ; <nl> + <nl> + public class ReceivingService extends IntentService { <nl> + <nl> + public ReceivingService ( ) { <nl> + super ( " ReceivingService " ) ; <nl> + } <nl> + <nl> + @ Override <nl> + protected void onHandleIntent ( Intent intent ) { <nl> + if ( intent . getExtras ( ) ! = null ) { <nl> + String personId = intent . getStringExtra ( " person _ id " ) ; <nl> + Realm realm = Realm . getDefaultInstance ( ) ; <nl> + Person person = realm . where ( Person . class ) . equalTo ( " id " , personId ) . findFirst ( ) ; <nl> + final String output = person . toString ( ) ; <nl> + new Handler ( getMainLooper ( ) ) . post ( new Runnable ( ) { <nl> + @ Override <nl> + public void run ( ) { <nl> + Toast . makeText ( getApplicationContext ( ) , " Loaded Person from intent service : " + output , Toast . LENGTH _ LONG ) . show ( ) ; <nl> + } <nl> + } ) ; <nl> + realm . close ( ) ; <nl> + } <nl> + } <nl> + } <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / ThreadExampleActivity . java b / examples / threadExample / src / main / java / io / realm / examples / threads / ThreadExampleActivity . java <nl> index 775a697 . . c3774ac 100644 <nl> - - - a / examples / threadExample / src / main / java / io / realm / examples / threads / ThreadExampleActivity . java <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / ThreadExampleActivity . java <nl> @ @ - 87 , 13 + 87 , 14 @ @ public class ThreadExampleActivity extends ActionBarActivity implements android . <nl> case 0 : return new ThreadFragment ( ) ; <nl> case 1 : return new AsyncTaskFragment ( ) ; <nl> case 2 : return new AsyncQueryFragment ( ) ; <nl> + case 3 : return new PassingObjectsFragment ( ) ; <nl> default : return null ; <nl> } <nl> } <nl> <nl> @ Override <nl> public int getCount ( ) { <nl> - return 3 ; <nl> + return 4 ; <nl> } <nl> <nl> @ Override <nl> @ @ - 103 , 6 + 104 , 7 @ @ public class ThreadExampleActivity extends ActionBarActivity implements android . <nl> case 0 : return getString ( R . string . title _ section1 ) . toUpperCase ( l ) ; <nl> case 1 : return getString ( R . string . title _ section2 ) . toUpperCase ( l ) ; <nl> case 2 : return getString ( R . string . title _ section3 ) . toUpperCase ( l ) ; <nl> + case 3 : return getString ( R . string . title _ section4 ) . toUpperCase ( l ) ; <nl> default : return null ; <nl> } <nl> } <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingBroadcastReceiver . java b / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingBroadcastReceiver . java <nl> new file mode 100644 <nl> index 0000000 . . 1c96463 <nl> - - - / dev / null <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingBroadcastReceiver . java <nl> @ @ - 0 , 0 + 1 , 32 @ @ <nl> + / * <nl> + * Copyright 2015 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . threads ; <nl> + <nl> + import android . content . Context ; <nl> + import android . content . Intent ; <nl> + import android . support . v4 . content . WakefulBroadcastReceiver ; <nl> + <nl> + public class WakefulReceivingBroadcastReceiver extends WakefulBroadcastReceiver { <nl> + @ Override <nl> + public void onReceive ( Context context , Intent intent ) { <nl> + / / Do not do work in onReceive as it can cause an ANR . Perform work in a <nl> + / / service as to avoid the ANR . <nl> + Intent serviceIntent = new Intent ( context , WakefulReceivingService . class ) ; <nl> + serviceIntent . putExtra ( " person _ id " , intent . getStringExtra ( " person _ id " ) ) ; <nl> + startWakefulService ( context , serviceIntent ) ; <nl> + } <nl> + } <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingService . java b / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingService . java <nl> new file mode 100644 <nl> index 0000000 . . 22f60d4 <nl> - - - / dev / null <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingService . java <nl> @ @ - 0 , 0 + 1 , 53 @ @ <nl> + / * <nl> + * Copyright 2015 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . threads ; <nl> + <nl> + import android . app . IntentService ; <nl> + import android . content . Intent ; <nl> + import android . os . Handler ; <nl> + import android . support . v4 . content . WakefulBroadcastReceiver ; <nl> + import android . widget . Toast ; <nl> + <nl> + import io . realm . Realm ; <nl> + import io . realm . examples . threads . model . Person ; <nl> + <nl> + public class WakefulReceivingService extends IntentService { <nl> + <nl> + public WakefulReceivingService ( ) { <nl> + super ( " WakefulReceivingService " ) ; <nl> + } <nl> + <nl> + @ Override <nl> + protected void onHandleIntent ( Intent intent ) { <nl> + if ( intent . getExtras ( ) ! = null ) { <nl> + String personId = intent . getStringExtra ( " person _ id " ) ; <nl> + Realm realm = Realm . getDefaultInstance ( ) ; <nl> + Person person = realm . where ( Person . class ) . equalTo ( " id " , personId ) . findFirst ( ) ; <nl> + final String output = person . toString ( ) ; <nl> + new Handler ( getMainLooper ( ) ) . post ( new Runnable ( ) { <nl> + @ Override <nl> + public void run ( ) { <nl> + Toast . makeText ( getApplicationContext ( ) , " Loaded Person from broadcast - receiver - > intent - service : " + output , Toast . LENGTH _ LONG ) . show ( ) ; <nl> + } <nl> + } ) ; <nl> + realm . close ( ) ; <nl> + } <nl> + <nl> + / / All the work is done , release the wake locks / etc <nl> + WakefulBroadcastReceiver . completeWakefulIntent ( intent ) ; <nl> + } <nl> + } <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / model / Person . java b / examples / threadExample / src / main / java / io / realm / examples / threads / model / Person . java <nl> new file mode 100644 <nl> index 0000000 . . 7793d89 <nl> - - - / dev / null <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / model / Person . java <nl> @ @ - 0 , 0 + 1 , 53 @ @ <nl> + / * <nl> + * Copyright 2015 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . threads . model ; <nl> + <nl> + import io . realm . RealmObject ; <nl> + import io . realm . annotations . PrimaryKey ; <nl> + <nl> + public class Person extends RealmObject { <nl> + <nl> + @ PrimaryKey <nl> + private String id ; <nl> + private String name ; <nl> + private int age ; <nl> + <nl> + <nl> + public String getId ( ) { <nl> + return id ; <nl> + } <nl> + <nl> + public void setId ( String id ) { <nl> + this . id = id ; <nl> + } <nl> + <nl> + public String getName ( ) { <nl> + return name ; <nl> + } <nl> + <nl> + public void setName ( String name ) { <nl> + this . name = name ; <nl> + } <nl> + <nl> + public int getAge ( ) { <nl> + return age ; <nl> + } <nl> + <nl> + public void setAge ( int age ) { <nl> + this . age = age ; <nl> + } <nl> + } <nl> diff - - git a / examples / threadExample / src / main / res / layout / activity _ receiving . xml b / examples / threadExample / src / main / res / layout / activity _ receiving . xml <nl> new file mode 100644 <nl> index 0000000 . . 17e6a13 <nl> - - - / dev / null <nl> + + + b / examples / threadExample / src / main / res / layout / activity _ receiving . xml <nl> @ @ - 0 , 0 + 1 , 20 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < RelativeLayout <nl> + xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + xmlns : tools = " http : / / schemas . android . com / tools " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " match _ parent " <nl> + android : background = " @ color / screen _ background " <nl> + android : paddingBottom = " @ dimen / activity _ vertical _ margin " <nl> + android : paddingLeft = " @ dimen / activity _ horizontal _ margin " <nl> + android : paddingRight = " @ dimen / activity _ horizontal _ margin " <nl> + android : paddingTop = " @ dimen / activity _ vertical _ margin " <nl> + tools : context = " io . realm . examples . threads . ReceivingActivity " > <nl> + <nl> + < TextView <nl> + android : id = " @ + id / received _ content " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " wrap _ content " <nl> + android : textColor = " @ android : color / white " / > <nl> + <nl> + < / RelativeLayout > <nl> diff - - git a / examples / threadExample / src / main / res / layout / fragment _ async _ query . xml b / examples / threadExample / src / main / res / layout / fragment _ async _ query . xml <nl> index 027bcd9 . . f695941 100644 <nl> - - - a / examples / threadExample / src / main / res / layout / fragment _ async _ query . xml <nl> + + + b / examples / threadExample / src / main / res / layout / fragment _ async _ query . xml <nl> @ @ - 2 , 7 + 2 , 7 @ @ <nl> xmlns : tools = " http : / / schemas . android . com / tools " <nl> android : layout _ width = " match _ parent " <nl> android : layout _ height = " match _ parent " <nl> - android : background = " @ color / fragment _ background " <nl> + android : background = " @ color / screen _ background " <nl> android : orientation = " vertical " <nl> android : paddingBottom = " @ dimen / activity _ vertical _ margin " <nl> android : paddingLeft = " @ dimen / activity _ horizontal _ margin " <nl> diff - - git a / examples / threadExample / src / main / res / layout / fragment _ asynctask . xml b / examples / threadExample / src / main / res / layout / fragment _ asynctask . xml <nl> index ce8dd87 . . 7e8ef20 100644 <nl> - - - a / examples / threadExample / src / main / res / layout / fragment _ asynctask . xml <nl> + + + b / examples / threadExample / src / main / res / layout / fragment _ asynctask . xml <nl> @ @ - 2 , 7 + 2 , 7 @ @ <nl> xmlns : tools = " http : / / schemas . android . com / tools " <nl> android : layout _ width = " match _ parent " <nl> android : layout _ height = " match _ parent " <nl> - android : background = " @ color / fragment _ background " <nl> + android : background = " @ color / screen _ background " <nl> android : orientation = " vertical " <nl> android : paddingBottom = " @ dimen / activity _ vertical _ margin " <nl> android : paddingLeft = " @ dimen / activity _ horizontal _ margin " <nl> diff - - git a / examples / threadExample / src / main / res / layout / fragment _ passing _ objects . xml b / examples / threadExample / src / main / res / layout / fragment _ passing _ objects . xml <nl> new file mode 100644 <nl> index 0000000 . . b92612d <nl> - - - / dev / null <nl> + + + b / examples / threadExample / src / main / res / layout / fragment _ passing _ objects . xml <nl> @ @ - 0 , 0 + 1 , 33 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < LinearLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " match _ parent " <nl> + android : layout _ margin = " @ dimen / activity _ horizontal _ margin " <nl> + android : background = " @ color / screen _ background " <nl> + android : orientation = " vertical " > <nl> + <nl> + < TextView <nl> + android : id = " @ + id / text _ content " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " wrap _ content " <nl> + android : textColor = " @ android : color / white " / > <nl> + <nl> + < Button <nl> + android : id = " @ + id / start _ activity " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " wrap _ content " <nl> + android : text = " @ string / start _ activity " / > <nl> + <nl> + < Button <nl> + android : id = " @ + id / start _ intent _ service " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " wrap _ content " <nl> + android : text = " @ string / start _ intent _ service " / > <nl> + <nl> + < Button <nl> + android : id = " @ + id / start _ receiver " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " wrap _ content " <nl> + android : text = " @ string / start _ receiver " / > <nl> + <nl> + < / LinearLayout > <nl> \ No newline at end of file <nl> diff - - git a / examples / threadExample / src / main / res / layout / fragment _ thread . xml b / examples / threadExample / src / main / res / layout / fragment _ thread . xml <nl> index ae8b310 . . b065c2f 100644 <nl> - - - a / examples / threadExample / src / main / res / layout / fragment _ thread . xml <nl> + + + b / examples / threadExample / src / main / res / layout / fragment _ thread . xml <nl> @ @ - 2 , 7 + 2 , 7 @ @ <nl> xmlns : tools = " http : / / schemas . android . com / tools " <nl> android : layout _ width = " match _ parent " <nl> android : layout _ height = " match _ parent " <nl> - android : background = " @ color / fragment _ background " <nl> + android : background = " @ color / screen _ background " <nl> tools : context = " . MainActivity $ PlaceholderFragment " > <nl> <nl> < io . realm . examples . threads . widget . DotsView <nl> diff - - git a / examples / threadExample / src / main / res / values / colors . xml b / examples / threadExample / src / main / res / values / colors . xml <nl> index fed8363 . . 9d34e34 100644 <nl> - - - a / examples / threadExample / src / main / res / values / colors . xml <nl> + + + b / examples / threadExample / src / main / res / values / colors . xml <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> < resources > <nl> - < color name = " fragment _ background " > # 333333 < / color > <nl> + < color name = " screen _ background " > # 333333 < / color > <nl> < color name = " realm _ red " > # f0727d < / color > <nl> < color name = " realm _ blue " > # 428bca < / color > <nl> < / resources > <nl> \ No newline at end of file <nl> diff - - git a / examples / threadExample / src / main / res / values / dimens . xml b / examples / threadExample / src / main / res / values / dimens . xml <nl> index 47c8224 . . 812cb7b 100644 <nl> - - - a / examples / threadExample / src / main / res / values / dimens . xml <nl> + + + b / examples / threadExample / src / main / res / values / dimens . xml <nl> @ @ - 2 , 4 + 2 , 5 @ @ <nl> < ! - - Default screen margins , per the Android Design guidelines . - - > <nl> < dimen name = " activity _ horizontal _ margin " > 16dp < / dimen > <nl> < dimen name = " activity _ vertical _ margin " > 16dp < / dimen > <nl> + < dimen name = " fab _ margin " > 16dp < / dimen > <nl> < / resources > <nl> diff - - git a / examples / threadExample / src / main / res / values / strings . xml b / examples / threadExample / src / main / res / values / strings . xml <nl> index d822b7e . . bf54734 100644 <nl> - - - a / examples / threadExample / src / main / res / values / strings . xml <nl> + + + b / examples / threadExample / src / main / res / values / strings . xml <nl> @ @ - 9 , 5 + 9 , 10 @ @ <nl> < string name = " add _ dot " > Add blue dot < / string > <nl> < string name = " clear _ dots " > Clear dots < / string > <nl> < string name = " translate " > Translate Dots < / string > <nl> + < string name = " start _ activity " > Passing to Activity < / string > <nl> + < string name = " title _ activity _ receiving " > Receiving Activity < / string > <nl> + < string name = " title _ section4 " > Object Passing < / string > <nl> + < string name = " start _ intent _ service " > Passing to Intent Service < / string > <nl> + < string name = " start _ receiver " > Passing To Receiver < / string > <nl> <nl> < / resources >
NEAREST DIFF (one line): diff - - git a / examples / threadexample / . gitignore b / examples / threadexample / . gitignore <nl> new file mode 100644 <nl> index 0000000 . . 796b96d <nl> - - - / dev / null <nl> + + + b / examples / threadexample / . gitignore <nl> @ @ - 0 , 0 + 1 @ @ <nl> + / build <nl> diff - - git a / examples / threadexample / build . gradle b / examples / threadexample / build . gradle <nl> new file mode 100644 <nl> index 0000000 . . 1b6d599 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / build . gradle <nl> @ @ - 0 , 0 + 1 , 29 @ @ <nl> + apply plugin : ' com . android . application ' <nl> + <nl> + android { <nl> + compileSdkVersion 21 <nl> + buildToolsVersion " 21 . 1 . 1 " <nl> + <nl> + defaultConfig { <nl> + applicationId " io . realm . examples . threads " <nl> + minSdkVersion 15 <nl> + targetSdkVersion 21 <nl> + versionCode 1 <nl> + versionName " 1 . 0 " <nl> + } <nl> + buildTypes { <nl> + release { <nl> + minifyEnabled false <nl> + proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> + } <nl> + } <nl> + } <nl> + <nl> + tasks . preBuild { <nl> + dependsOn " : realm : androidJar " <nl> + } <nl> + <nl> + dependencies { <nl> + compile ' com . android . support : appcompat - v7 : 21 . 0 . + ' <nl> + compile files ( " . . / . . / realm / build / libs / realm - $ { version } . jar " ) <nl> + } <nl> diff - - git a / examples / threadexample / proguard - rules . pro b / examples / threadexample / proguard - rules . pro <nl> new file mode 100644 <nl> index 0000000 . . a965f92 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / proguard - rules . pro <nl> @ @ - 0 , 0 + 1 , 17 @ @ <nl> + # Add project specific ProGuard rules here . <nl> + # By default , the flags in this file are appended to flags specified <nl> + # in / usr / local / opt / android - sdk / tools / proguard / proguard - android . txt <nl> + # You can edit the include path and order by changing the proguardFiles <nl> + # directive in build . gradle . <nl> + # <nl> + # For more details , see <nl> + # http : / / developer . android . com / guide / developing / tools / proguard . html <nl> + <nl> + # Add any project specific keep options here : <nl> + <nl> + # If your project uses WebView with JS , uncomment the following <nl> + # and specify the fully qualified class name to the JavaScript interface <nl> + # class : <nl> + # - keepclassmembers class fqcn . of . javascript . interface . for . webview { <nl> + # public * ; <nl> + # } <nl> diff - - git a / examples / threadexample / src / main / AndroidManifest . xml b / examples / threadexample / src / main / AndroidManifest . xml <nl> new file mode 100644 <nl> index 0000000 . . f966b2e <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / AndroidManifest . xml <nl> @ @ - 0 , 0 + 1 , 21 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + package = " io . realm . myapplication " > <nl> + <nl> + < application <nl> + android : allowBackup = " true " <nl> + android : icon = " @ drawable / ic _ launcher " <nl> + android : label = " @ string / app _ name " <nl> + android : theme = " @ style / AppTheme " > <nl> + < activity <nl> + android : name = " io . realm . threadexample . ThreadExampleActivity " <nl> + android : label = " @ string / app _ name " > <nl> + < intent - filter > <nl> + < action android : name = " android . intent . action . MAIN " / > <nl> + <nl> + < category android : name = " android . intent . category . LAUNCHER " / > <nl> + < / intent - filter > <nl> + < / activity > <nl> + < / application > <nl> + <nl> + < / manifest > <nl> diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / AsyncTaskFragment . java b / examples / threadexample / src / main / java / io / realm / threadexample / AsyncTaskFragment . java <nl> new file mode 100644 <nl> index 0000000 . . 8a894dd <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / java / io / realm / threadexample / AsyncTaskFragment . java <nl> @ @ - 0 , 0 + 1 , 46 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . threadexample ; <nl> + <nl> + import android . os . Bundle ; <nl> + import android . support . v4 . app . Fragment ; <nl> + import android . view . LayoutInflater ; <nl> + import android . view . View ; <nl> + import android . view . ViewGroup ; <nl> + <nl> + import io . realm . myapplication . R ; <nl> + <nl> + / * * <nl> + * This fragment demonstrates how Realm can work with AsyncTasks . <nl> + * / <nl> + public class AsyncTaskFragment extends Fragment { <nl> + <nl> + public static AsyncTaskFragment newInstance ( int sectionNumber ) { <nl> + AsyncTaskFragment fragment = new AsyncTaskFragment ( ) ; <nl> + Bundle args = new Bundle ( ) ; <nl> + args . putInt ( ThreadExampleActivity . ARG _ SECTION _ NUMBER , sectionNumber ) ; <nl> + fragment . setArguments ( args ) ; <nl> + return fragment ; <nl> + } <nl> + <nl> + <nl> + @ Override <nl> + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { <nl> + View rootView = inflater . inflate ( R . layout . fragment _ asynctask , container , false ) ; <nl> + return rootView ; <nl> + } <nl> + } <nl> diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / ThreadExampleActivity . java b / examples / threadexample / src / main / java / io / realm / threadexample / ThreadExampleActivity . java <nl> new file mode 100644 <nl> index 0000000 . . 03fcd1c <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / java / io / realm / threadexample / ThreadExampleActivity . java <nl> @ @ - 0 , 0 + 1 , 118 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . threadexample ; <nl> + <nl> + import android . os . Bundle ; <nl> + import android . support . v4 . app . Fragment ; <nl> + import android . support . v4 . app . FragmentManager ; <nl> + import android . support . v4 . app . FragmentPagerAdapter ; <nl> + import android . support . v4 . app . FragmentTransaction ; <nl> + import android . support . v4 . view . ViewPager ; <nl> + import android . support . v7 . app . ActionBar ; <nl> + import android . support . v7 . app . ActionBarActivity ; <nl> + <nl> + import java . util . Locale ; <nl> + <nl> + import io . realm . myapplication . R ; <nl> + <nl> + <nl> + public class ThreadExampleActivity extends ActionBarActivity implements android . support . v7 . app . ActionBar . TabListener { <nl> + <nl> + public static final String ARG _ SECTION _ NUMBER = " arg . section _ number " ; <nl> + <nl> + private SectionsPagerAdapter pageAdapter ; <nl> + private ViewPager viewPager ; <nl> + <nl> + @ Override <nl> + protected void onCreate ( Bundle savedInstanceState ) { <nl> + super . onCreate ( savedInstanceState ) ; <nl> + setContentView ( R . layout . activity _ main ) ; <nl> + <nl> + / / Set up the action bar . <nl> + final android . support . v7 . app . ActionBar actionBar = getSupportActionBar ( ) ; <nl> + actionBar . setNavigationMode ( android . support . v7 . app . ActionBar . NAVIGATION _ MODE _ TABS ) ; <nl> + <nl> + pageAdapter = new SectionsPagerAdapter ( getSupportFragmentManager ( ) ) ; <nl> + viewPager = ( ViewPager ) findViewById ( R . id . pager ) ; <nl> + viewPager . setAdapter ( pageAdapter ) ; <nl> + <nl> + viewPager . setOnPageChangeListener ( new ViewPager . SimpleOnPageChangeListener ( ) { <nl> + @ Override <nl> + public void onPageSelected ( int position ) { <nl> + actionBar . setSelectedNavigationItem ( position ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + for ( int i = 0 ; i < pageAdapter . getCount ( ) ; i + + ) { <nl> + getSupportActionBar ( ) . addTab ( getSupportActionBar ( ) . newTab ( ) <nl> + . setText ( pageAdapter . getPageTitle ( i ) ) <nl> + . setTabListener ( this ) ) ; <nl> + } <nl> + } <nl> + <nl> + @ Override <nl> + protected void onDestroy ( ) { <nl> + super . onDestroy ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onTabSelected ( ActionBar . Tab tab , FragmentTransaction fragmentTransaction ) { <nl> + viewPager . setCurrentItem ( tab . getPosition ( ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onTabUnselected ( ActionBar . Tab tab , FragmentTransaction fragmentTransaction ) { <nl> + <nl> + } <nl> + <nl> + @ Override <nl> + public void onTabReselected ( ActionBar . Tab tab , FragmentTransaction fragmentTransaction ) { <nl> + <nl> + } <nl> + <nl> + <nl> + public class SectionsPagerAdapter extends FragmentPagerAdapter { <nl> + <nl> + public SectionsPagerAdapter ( FragmentManager fm ) { <nl> + super ( fm ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public Fragment getItem ( int position ) { <nl> + switch ( position ) { <nl> + case 0 : return new ThreadFragment ( ) ; <nl> + case 1 : return new AsyncTaskFragment ( ) ; <nl> + default : return null ; <nl> + } <nl> + } <nl> + <nl> + @ Override <nl> + public int getCount ( ) { <nl> + return 2 ; <nl> + } <nl> + <nl> + @ Override <nl> + public CharSequence getPageTitle ( int position ) { <nl> + Locale l = Locale . getDefault ( ) ; <nl> + switch ( position ) { <nl> + case 0 : return getString ( R . string . title _ section1 ) . toUpperCase ( l ) ; <nl> + case 1 : return getString ( R . string . title _ section2 ) . toUpperCase ( l ) ; <nl> + default : return null ; <nl> + } <nl> + } <nl> + } <nl> + } <nl> \ No newline at end of file <nl> diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / ThreadFragment . java b / examples / threadexample / src / main / java / io / realm / threadexample / ThreadFragment . java <nl> new file mode 100644 <nl> index 0000000 . . e579fe6 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / java / io / realm / threadexample / ThreadFragment . java <nl> @ @ - 0 , 0 + 1 , 165 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . threadexample ; <nl> + <nl> + import android . app . Activity ; <nl> + import android . os . Bundle ; <nl> + import android . support . v4 . app . Fragment ; <nl> + import android . view . LayoutInflater ; <nl> + import android . view . Menu ; <nl> + import android . view . MenuInflater ; <nl> + import android . view . MenuItem ; <nl> + import android . view . View ; <nl> + import android . view . ViewGroup ; <nl> + <nl> + import java . util . Random ; <nl> + <nl> + import io . realm . Realm ; <nl> + import io . realm . RealmChangeListener ; <nl> + import io . realm . myapplication . R ; <nl> + import io . realm . threadexample . models . Point ; <nl> + import io . realm . threadexample . widgets . DotsView ; <nl> + <nl> + / * * <nl> + * This fragment demonstrates how Realm can interact with a background thread . <nl> + * / <nl> + public class ThreadFragment extends Fragment { <nl> + <nl> + private Realm realm ; <nl> + private Random random = new Random ( ) ; <nl> + private Thread backgroundThread ; <nl> + private DotsView dotsView ; <nl> + <nl> + / / Realm change listener that refreshes the UI when there is changes to Realm . <nl> + private RealmChangeListener realmListener = new RealmChangeListener ( ) { <nl> + @ Override <nl> + public void onChange ( ) { <nl> + dotsView . invalidate ( ) ; <nl> + } <nl> + } ; <nl> + <nl> + @ Override <nl> + public void onCreate ( Bundle savedInstanceState ) { <nl> + super . onCreate ( savedInstanceState ) ; <nl> + setHasOptionsMenu ( true ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onAttach ( Activity activity ) { <nl> + super . onAttach ( activity ) ; <nl> + realm = Realm . getInstance ( getActivity ( ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { <nl> + View rootView = inflater . inflate ( R . layout . fragment _ thread , container , false ) ; <nl> + dotsView = ( DotsView ) rootView . findViewById ( R . id . dots ) ; <nl> + <nl> + / / Create a RealmQuery on the UI thread and send the results to the custom view . The <nl> + / / RealmResults will automatically be updated whenever new data is either added or removed . <nl> + / / We still need to invalidate the UI to show the changes however . See the RealmChangeListener . <nl> + / / <nl> + / / Note also that currently the query gets updated by rerunning it on the thread it was <nl> + / / created . This can negatively effect framerates if it is a complicated query or a very <nl> + / / large dataset . <nl> + dotsView . setRealmResults ( realm . allObjects ( Point . class ) ) ; <nl> + <nl> + return rootView ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { <nl> + super . onCreateOptionsMenu ( menu , inflater ) ; <nl> + inflater . inflate ( R . menu . menu _ backgroundthread , menu ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public boolean onOptionsItemSelected ( MenuItem item ) { <nl> + <nl> + switch ( item . getItemId ( ) ) { <nl> + case R . id . action _ add _ dot : <nl> + realm . beginTransaction ( ) ; <nl> + Point point = realm . createObject ( Point . class ) ; <nl> + point . setX ( random . nextInt ( 100 ) ) ; <nl> + point . setY ( random . nextInt ( 100 ) ) ; <nl> + point . setColor ( getResources ( ) . getColor ( R . color . realm _ blue ) ) ; <nl> + realm . commitTransaction ( ) ; <nl> + return true ; <nl> + <nl> + case R . id . action _ clear : <nl> + realm . beginTransaction ( ) ; <nl> + realm . clear ( Point . class ) ; <nl> + realm . commitTransaction ( ) ; <nl> + return true ; <nl> + <nl> + default : <nl> + return super . onOptionsItemSelected ( item ) ; <nl> + } <nl> + } <nl> + <nl> + @ Override <nl> + public void onResume ( ) { <nl> + super . onResume ( ) ; <nl> + <nl> + / / Enable UI refresh while the fragment is active . <nl> + realm . addChangeListener ( realmListener ) ; <nl> + <nl> + / / Create background thread that add new dots every 0 . 5 second . <nl> + backgroundThread = new Thread ( new Runnable ( ) { <nl> + <nl> + @ Override <nl> + public void run ( ) { <nl> + / / Realm instances cannot be shared between threads , so we need to create a new <nl> + / / instance on the background thread . <nl> + Realm realm = Realm . getInstance ( getActivity ( ) , false ) ; <nl> + while ( ! backgroundThread . isInterrupted ( ) ) { <nl> + try { <nl> + realm . beginTransaction ( ) ; <nl> + Point point = realm . createObject ( Point . class ) ; <nl> + point . setX ( random . nextInt ( 100 ) ) ; <nl> + point . setY ( random . nextInt ( 100 ) ) ; <nl> + point . setColor ( getResources ( ) . getColor ( R . color . realm _ red ) ) ; <nl> + realm . commitTransaction ( ) ; <nl> + <nl> + Thread . sleep ( 500 ) ; <nl> + } catch ( InterruptedException e ) { <nl> + e . printStackTrace ( ) ; <nl> + } <nl> + } <nl> + <nl> + realm . close ( ) ; <nl> + } <nl> + } ) ; <nl> + backgroundThread . start ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onPause ( ) { <nl> + super . onPause ( ) ; <nl> + <nl> + / / Disable UI refresh while the fragment is no longer active . <nl> + realm . addChangeListener ( realmListener ) ; <nl> + backgroundThread . interrupt ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onDestroy ( ) { <nl> + super . onDestroy ( ) ; <nl> + / / Remember to close the Realm instance when done with it . <nl> + realm . close ( ) ; <nl> + } <nl> + } <nl> diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / models / Point . java b / examples / threadexample / src / main / java / io / realm / threadexample / models / Point . java <nl> new file mode 100644 <nl> index 0000000 . . 48fe132 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / java / io / realm / threadexample / models / Point . java <nl> @ @ - 0 , 0 + 1 , 43 @ @ <nl> + package io . realm . threadexample . models ; <nl> + <nl> + import io . realm . RealmObject ; <nl> + <nl> + public class Point extends RealmObject { <nl> + <nl> + private int x ; <nl> + private int y ; <nl> + private int color ; <nl> + private long timestamp ; <nl> + <nl> + public int getX ( ) { <nl> + return x ; <nl> + } <nl> + <nl> + public void setX ( int x ) { <nl> + this . x = x ; <nl> + } <nl> + <nl> + public int getY ( ) { <nl> + return y ; <nl> + } <nl> + <nl> + public void setY ( int y ) { <nl> + this . y = y ; <nl> + } <nl> + <nl> + public int getColor ( ) { <nl> + return color ; <nl> + } <nl> + <nl> + public void setColor ( int color ) { <nl> + this . color = color ; <nl> + } <nl> + <nl> + public long getTimestamp ( ) { <nl> + return timestamp ; <nl> + } <nl> + <nl> + public void setTimestamp ( long timestamp ) { <nl> + this . timestamp = timestamp ; <nl> + } <nl> + } <nl> diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / widgets / DotsView . java b / examples / threadexample / src / main / java / io / realm / threadexample / widgets / DotsView . java <nl> new file mode 100644 <nl> index 0000000 . . 6a48a9f <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / java / io / realm / threadexample / widgets / DotsView . java <nl> @ @ - 0 , 0 + 1 , 70 @ @ <nl> + package io . realm . threadexample . widgets ; <nl> + <nl> + import android . content . Context ; <nl> + import android . graphics . Canvas ; <nl> + import android . graphics . Color ; <nl> + import android . graphics . Paint ; <nl> + import android . util . AttributeSet ; <nl> + import android . view . View ; <nl> + <nl> + import io . realm . RealmResults ; <nl> + import io . realm . threadexample . models . Point ; <nl> + <nl> + / * * <nl> + * Custom view that plot ( x , y ) coordinates from a RealmQuery <nl> + * / <nl> + public class DotsView extends View { <nl> + <nl> + / / RealmResults will automatically be up to date . <nl> + private RealmResults < Point > results ; <nl> + <nl> + private Paint circlePaint ; <nl> + private float circleRadius ; <nl> + private float pixelsPrWidth ; <nl> + private float pixelsPrHeight ; <nl> + <nl> + <nl> + public DotsView ( Context context ) { <nl> + super ( context ) ; <nl> + init ( ) ; <nl> + } <nl> + <nl> + public DotsView ( Context context , AttributeSet attrs ) { <nl> + super ( context , attrs ) ; <nl> + init ( ) ; <nl> + } <nl> + <nl> + public DotsView ( Context context , AttributeSet attrs , int defStyleAttr ) { <nl> + super ( context , attrs , defStyleAttr ) ; <nl> + init ( ) ; <nl> + } <nl> + <nl> + private void init ( ) { <nl> + circlePaint = new Paint ( Paint . ANTI _ ALIAS _ FLAG ) ; <nl> + circlePaint . setStyle ( Paint . Style . FILL ) ; <nl> + circlePaint . setColor ( Color . RED ) ; <nl> + circleRadius = 10 ; <nl> + } <nl> + <nl> + public void setRealmResults ( RealmResults results ) { <nl> + this . results = results ; <nl> + invalidate ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + protected void onSizeChanged ( int w , int h , int oldw , int oldh ) { <nl> + super . onSizeChanged ( w , h , oldw , oldh ) ; <nl> + pixelsPrWidth = w / 100f ; <nl> + pixelsPrHeight = h / 100f ; <nl> + } <nl> + <nl> + @ Override <nl> + protected void onDraw ( Canvas canvas ) { <nl> + super . onDraw ( canvas ) ; <nl> + canvas . drawColor ( Color . TRANSPARENT ) ; <nl> + for ( Point point : results ) { <nl> + circlePaint . setColor ( point . getColor ( ) ) ; <nl> + canvas . drawCircle ( point . getX ( ) * pixelsPrWidth , point . getY ( ) * pixelsPrHeight , circleRadius , circlePaint ) ; <nl> + } <nl> + } <nl> + } <nl> diff - - git a / examples / threadexample / src / main / res / drawable - xxhdpi / ic _ launcher . png b / examples / threadexample / src / main / res / drawable - xxhdpi / ic _ launcher . png <nl> new file mode 100644 <nl> index 0000000 . . 4330211 <nl> Binary files / dev / null and b / examples / threadexample / src / main / res / drawable - xxhdpi / ic _ launcher . png differ <nl> diff - - git a / examples / threadexample / src / main / res / layout / activity _ main . xml b / examples / threadexample / src / main / res / layout / activity _ main . xml <nl> new file mode 100644 <nl> index 0000000 . . 0cfa754 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / layout / activity _ main . xml <nl> @ @ - 0 , 0 + 1 , 22 @ @ <nl> + < ! - - <nl> + ~ Copyright 2014 Realm Inc . <nl> + ~ <nl> + ~ Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + ~ you may not use this file except in compliance with the License . <nl> + ~ You may obtain a copy of the License at <nl> + ~ <nl> + ~ http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + ~ <nl> + ~ Unless required by applicable law or agreed to in writing , software <nl> + ~ distributed under the License is distributed on an " AS IS " BASIS , <nl> + ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + ~ See the License for the specific language governing permissions and <nl> + ~ limitations under the License . <nl> + - - > <nl> + <nl> + < android . support . v4 . view . ViewPager xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + xmlns : tools = " http : / / schemas . android . com / tools " <nl> + android : id = " @ + id / pager " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " match _ parent " <nl> + tools : context = " . ThreadExampleActivity " / > <nl> diff - - git a / examples / threadexample / src / main / res / layout / fragment _ asynctask . xml b / examples / threadexample / src / main / res / layout / fragment _ asynctask . xml <nl> new file mode 100644 <nl> index 0000000 . . 5e7ef68 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / layout / fragment _ asynctask . xml <nl> @ @ - 0 , 0 + 1 , 29 @ @ <nl> + < ! - - <nl> + ~ Copyright 2014 Realm Inc . <nl> + ~ <nl> + ~ Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + ~ you may not use this file except in compliance with the License . <nl> + ~ You may obtain a copy of the License at <nl> + ~ <nl> + ~ http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + ~ <nl> + ~ Unless required by applicable law or agreed to in writing , software <nl> + ~ distributed under the License is distributed on an " AS IS " BASIS , <nl> + ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + ~ See the License for the specific language governing permissions and <nl> + ~ limitations under the License . <nl> + - - > <nl> + <nl> + < RelativeLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + xmlns : tools = " http : / / schemas . android . com / tools " android : layout _ width = " match _ parent " <nl> + android : layout _ height = " match _ parent " android : paddingLeft = " @ dimen / activity _ horizontal _ margin " <nl> + android : paddingRight = " @ dimen / activity _ horizontal _ margin " <nl> + android : paddingTop = " @ dimen / activity _ vertical _ margin " <nl> + android : paddingBottom = " @ dimen / activity _ vertical _ margin " <nl> + android : background = " @ color / fragment _ background " <nl> + tools : context = " . MainActivity $ PlaceholderFragment " > <nl> + <nl> + < TextView android : id = " @ + id / section _ label " android : layout _ width = " wrap _ content " <nl> + android : layout _ height = " wrap _ content " / > <nl> + <nl> + < / RelativeLayout > <nl> diff - - git a / examples / threadexample / src / main / res / layout / fragment _ thread . xml b / examples / threadexample / src / main / res / layout / fragment _ thread . xml <nl> new file mode 100644 <nl> index 0000000 . . 522ba2c <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / layout / fragment _ thread . xml <nl> @ @ - 0 , 0 + 1 , 29 @ @ <nl> + < ! - - <nl> + ~ Copyright 2014 Realm Inc . <nl> + ~ <nl> + ~ Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + ~ you may not use this file except in compliance with the License . <nl> + ~ You may obtain a copy of the License at <nl> + ~ <nl> + ~ http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + ~ <nl> + ~ Unless required by applicable law or agreed to in writing , software <nl> + ~ distributed under the License is distributed on an " AS IS " BASIS , <nl> + ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + ~ See the License for the specific language governing permissions and <nl> + ~ limitations under the License . <nl> + - - > <nl> + <nl> + < RelativeLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + xmlns : tools = " http : / / schemas . android . com / tools " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " match _ parent " <nl> + android : background = " @ color / fragment _ background " <nl> + tools : context = " . MainActivity $ PlaceholderFragment " > <nl> + <nl> + < io . realm . threadexample . widgets . DotsView <nl> + android : id = " @ + id / dots " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " match _ parent " / > <nl> + <nl> + < / RelativeLayout > <nl> diff - - git a / examples / threadexample / src / main / res / menu / menu _ backgroundthread . xml b / examples / threadexample / src / main / res / menu / menu _ backgroundthread . xml <nl> new file mode 100644 <nl> index 0000000 . . e3708ee <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / menu / menu _ backgroundthread . xml <nl> @ @ - 0 , 0 + 1 , 32 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > < ! - - <nl> + ~ Copyright 2014 Realm Inc . <nl> + ~ <nl> + ~ Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + ~ you may not use this file except in compliance with the License . <nl> + ~ You may obtain a copy of the License at <nl> + ~ <nl> + ~ http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + ~ <nl> + ~ Unless required by applicable law or agreed to in writing , software <nl> + ~ distributed under the License is distributed on an " AS IS " BASIS , <nl> + ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + ~ See the License for the specific language governing permissions and <nl> + ~ limitations under the License . <nl> + - - > <nl> + <nl> + < menu xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + xmlns : app = " http : / / schemas . android . com / apk / res - auto " > <nl> + <nl> + < item <nl> + android : id = " @ + id / action _ add _ dot " <nl> + android : title = " @ string / add _ dot " <nl> + android : icon = " @ android : drawable / ic _ menu _ add " <nl> + app : showAsAction = " always " / > <nl> + <nl> + < item <nl> + android : id = " @ + id / action _ clear " <nl> + android : title = " @ string / clear _ dots " <nl> + android : icon = " @ android : drawable / ic _ menu _ delete " <nl> + app : showAsAction = " always " / > <nl> + <nl> + < / menu > <nl> \ No newline at end of file <nl> diff - - git a / examples / threadexample / src / main / res / values - w820dp / dimens . xml b / examples / threadexample / src / main / res / values - w820dp / dimens . xml <nl> new file mode 100644 <nl> index 0000000 . . 63fc816 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / values - w820dp / dimens . xml <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + < resources > <nl> + < ! - - Example customization of dimensions originally defined in res / values / dimens . xml <nl> + ( such as screen margins ) for screens with more than 820dp of available width . This <nl> + would include 7 " and 10 " devices in landscape ( ~ 960dp and ~ 1280dp respectively ) . - - > <nl> + < dimen name = " activity _ horizontal _ margin " > 64dp < / dimen > <nl> + < / resources > <nl> diff - - git a / examples / threadexample / src / main / res / values / colors . xml b / examples / threadexample / src / main / res / values / colors . xml <nl> new file mode 100644 <nl> index 0000000 . . fed8363 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / values / colors . xml <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < resources > <nl> + < color name = " fragment _ background " > # 333333 < / color > <nl> + < color name = " realm _ red " > # f0727d < / color > <nl> + < color name = " realm _ blue " > # 428bca < / color > <nl> + < / resources > <nl> \ No newline at end of file <nl> diff - - git a / examples / threadexample / src / main / res / values / dimens . xml b / examples / threadexample / src / main / res / values / dimens . xml <nl> new file mode 100644 <nl> index 0000000 . . 47c8224 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / values / dimens . xml <nl> @ @ - 0 , 0 + 1 , 5 @ @ <nl> + < resources > <nl> + < ! - - Default screen margins , per the Android Design guidelines . - - > <nl> + < dimen name = " activity _ horizontal _ margin " > 16dp < / dimen > <nl> + < dimen name = " activity _ vertical _ margin " > 16dp < / dimen > <nl> + < / resources > <nl> diff - - git a / examples / threadexample / src / main / res / values / strings . xml b / examples / threadexample / src / main / res / values / strings . xml <nl> new file mode 100644 <nl> index 0000000 . . 21288be <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / values / strings . xml <nl> @ @ - 0 , 0 + 1 , 11 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < resources > <nl> + <nl> + < string name = " app _ name " > Thread example < / string > <nl> + < string name = " action _ settings " > Settings < / string > <nl> + < string name = " title _ section1 " > Threads < / string > <nl> + < string name = " title _ section2 " > AsyncTask < / string > <nl> + < string name = " add _ dot " > Add dot < / string > <nl> + < string name = " clear _ dots " > Clear dots < / string > <nl> + <nl> + < / resources > <nl> diff - - git a / examples / threadexample / src / main / res / values / styles . xml b / examples / threadexample / src / main / res / values / styles . xml <nl> new file mode 100644 <nl> index 0000000 . . 766ab99 <nl> - - - / dev / null <nl> + + + b / examples / threadexample / src / main / res / values / styles . xml <nl> @ @ - 0 , 0 + 1 , 8 @ @ <nl> + < resources > <nl> + <nl> + < ! - - Base application theme . - - > <nl> + < style name = " AppTheme " parent = " Theme . AppCompat . Light . DarkActionBar " > <nl> + < ! - - Customize your theme here . - - > <nl> + < / style > <nl> + <nl> + < / resources > <nl> diff - - git a / settings . gradle b / settings . gradle <nl> index d7fde45 . . 9a97810 100644 <nl> - - - a / settings . gradle <nl> + + + b / settings . gradle <nl> @ @ - 2 , 7 + 2 , 13 @ @ <nl> include ' realm ' <nl> <nl> / / Example projects <nl> - include ' : introExample ' , ' : gridViewExample ' , ' : concurrencyExample ' , ' : encryptionExample ' , ' : migrationExample ' , ' : adapterExample ' <nl> + include ' : introExample ' , <nl> + ' : gridViewExample ' , <nl> + ' : concurrencyExample ' , <nl> + ' : encryptionExample ' , <nl> + ' : migrationExample ' , <nl> + ' : adapterExample ' , <nl> + ' : threadExample ' <nl> <nl> project ( ' : introExample ' ) . projectDir = new File ( ' examples / introExample ' ) <nl> project ( ' : gridViewExample ' ) . projectDir = new File ( ' examples / gridViewExample ' ) <nl> @ @ - 10 , 6 + 16 , 7 @ @ project ( ' : concurrencyExample ' ) . projectDir = new File ( ' examples / concurrencyExampl <nl> project ( ' : encryptionExample ' ) . projectDir = new File ( ' examples / encryptionExample ' ) <nl> project ( ' : migrationExample ' ) . projectDir = new File ( ' examples / migrationExample ' ) <nl> project ( ' : adapterExample ' ) . projectDir = new File ( ' examples / adapterExample ' ) <nl> + project ( ' : threadExample ' ) . projectDir = new File ( ' examples / threadExample ' ) <nl> <nl> / / Experimental projects <nl> include ' : pathExperiment '

TEST DIFF:
diff - - git a / examples / threadExample / src / main / AndroidManifest . xml b / examples / threadExample / src / main / AndroidManifest . xml 
 index 2ec0c77 . . 3f54c69 100644 
 - - - a / examples / threadExample / src / main / AndroidManifest . xml 
 + + + b / examples / threadExample / src / main / AndroidManifest . xml 
 @ @ - 1 , 22 + 1 , 32 @ @ 
 < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 - < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 - package = " io . realm . examples . threads " > 
 + < manifest package = " io . realm . examples . threads " 
 + xmlns : android = " http : / / schemas . android . com / apk / res / android " > 
 
 + < uses - permission android : name = " android . permission . WAKE _ LOCK " / > 
 + 
 < application 
 + android : name = " . MyApplication " 
 android : allowBackup = " true " 
 android : icon = " @ drawable / ic _ launcher " 
 android : label = " @ string / app _ name " 
 - android : name = " . MyApplication " 
 - android : theme = " @ style / AppTheme " > 
 + android : theme = " @ style / AppTheme " > 
 < activity 
 android : name = " . ThreadExampleActivity " 
 - android : label = " @ string / app _ name " > 
 + android : label = " @ string / app _ name " > 
 < intent - filter > 
 - < action android : name = " android . intent . action . MAIN " / > 
 + < action android : name = " android . intent . action . MAIN " / > 
 
 - < category android : name = " android . intent . category . LAUNCHER " / > 
 + < category android : name = " android . intent . category . LAUNCHER " / > 
 < / intent - filter > 
 < / activity > 
 + < activity 
 + android : name = " . ReceivingActivity " 
 + android : label = " @ string / title _ activity _ receiving " > 
 + < / activity > 
 + < service android : name = " . ReceivingService " 
 + android : exported = " false " / > 
 + < receiver android : name = " . WakefulReceivingBroadcastReceiver " / > 
 + < service android : name = " . WakefulReceivingService " / > 
 < / application > 
 
 - < / manifest > 
 + < / manifest > 
 \ No newline at end of file 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / PassingObjectsFragment . java b / examples / threadExample / src / main / java / io / realm / examples / threads / PassingObjectsFragment . java 
 new file mode 100644 
 index 0000000 . . 8ce4838 
 - - - / dev / null 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / PassingObjectsFragment . java 
 @ @ - 0 , 0 + 1 , 118 @ @ 
 + / * 
 + * Copyright 2015 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . threads ; 
 + 
 + 
 + import android . content . Intent ; 
 + import android . os . Bundle ; 
 + import android . support . annotation . Nullable ; 
 + import android . support . v4 . app . Fragment ; 
 + import android . view . LayoutInflater ; 
 + import android . view . View ; 
 + import android . view . ViewGroup ; 
 + import android . widget . TextView ; 
 + 
 + import java . util . UUID ; 
 + 
 + import io . realm . Realm ; 
 + import io . realm . examples . threads . model . Person ; 
 + 
 + public class PassingObjectsFragment extends Fragment { 
 + 
 + private TextView textContent ; 
 + 
 + private Realm realm ; 
 + private Person person ; 
 + 
 + @ Nullable 
 + @ Override 
 + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 + View view = inflater . inflate ( R . layout . fragment _ passing _ objects , container , false ) ; 
 + textContent = ( TextView ) view . findViewById ( R . id . text _ content ) ; 
 + 
 + setListeners ( view ) ; 
 + return view ; 
 + } 
 + 
 + / * * 
 + * Sets the click listeners on the three buttons . 
 + * 
 + * RealmObjects are thread confined , therefore they cannot be passed through an intent . We 
 + * recommend using an object identifier and passing that value through the intent . The 
 + * receiving Android component will then obtain that value , open the Realm and query for 
 + * that object . 
 + * 
 + * Below , each { @ link android . view . View . OnClickListener } builds an { @ link Intent } that 
 + * accepts the { @ link Person # getId ( ) } value as a string extra . This is the value that will 
 + * be retrieved in the receiving Android components ( { @ link ReceivingActivity } , 
 + * { @ link ReceivingService } and { @ link WakefulReceivingBroadcastReceiver } . 
 + * 
 + * @ param view The view where the buttons are located . 
 + * / 
 + private void setListeners ( View view ) { 
 + view . findViewById ( R . id . start _ activity ) . setOnClickListener ( new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + Intent intent = new Intent ( getActivity ( ) , ReceivingActivity . class ) ; 
 + intent . putExtra ( " person _ id " , person . getId ( ) ) ; 
 + startActivity ( intent ) ; 
 + } 
 + } ) ; 
 + 
 + view . findViewById ( R . id . start _ intent _ service ) . setOnClickListener ( new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + Intent intent = new Intent ( getActivity ( ) , ReceivingService . class ) ; 
 + intent . putExtra ( " person _ id " , person . getId ( ) ) ; 
 + getActivity ( ) . startService ( intent ) ; 
 + } 
 + } ) ; 
 + 
 + view . findViewById ( R . id . start _ receiver ) . setOnClickListener ( new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + Intent intent = new Intent ( getActivity ( ) , WakefulReceivingBroadcastReceiver . class ) ; 
 + intent . putExtra ( " person _ id " , person . getId ( ) ) ; 
 + getActivity ( ) . sendBroadcast ( intent ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Override 
 + public void onActivityCreated ( Bundle savedInstanceState ) { 
 + super . onActivityCreated ( savedInstanceState ) ; 
 + 
 + realm = Realm . getDefaultInstance ( ) ; 
 + realm . beginTransaction ( ) ; 
 + person = realm . createObject ( Person . class ) ; 
 + person . setName ( " Jane " ) ; 
 + person . setAge ( 42 ) ; 
 + person . setId ( UUID . randomUUID ( ) . toString ( ) ) ; 
 + realm . commitTransaction ( ) ; 
 + 
 + textContent . setText ( person . toString ( ) ) ; 
 + } 
 + 
 + @ Override 
 + public void onDestroy ( ) { 
 + super . onDestroy ( ) ; 
 + / / Clear out all Person instances . 
 + realm . clear ( Person . class ) ; 
 + realm . close ( ) ; 
 + } 
 + } 
 + 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingActivity . java b / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingActivity . java 
 new file mode 100644 
 index 0000000 . . 5e2c6fa 
 - - - / dev / null 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingActivity . java 
 @ @ - 0 , 0 + 1 , 51 @ @ 
 + / * 
 + * Copyright 2015 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . threads ; 
 + 
 + import android . os . Bundle ; 
 + import android . support . v7 . app . ActionBarActivity ; 
 + import android . widget . TextView ; 
 + 
 + import io . realm . Realm ; 
 + import io . realm . examples . threads . model . Person ; 
 + 
 + public class ReceivingActivity extends ActionBarActivity { 
 + 
 + private Realm realm ; 
 + 
 + @ Override 
 + protected void onCreate ( Bundle savedInstanceState ) { 
 + super . onCreate ( savedInstanceState ) ; 
 + setContentView ( R . layout . activity _ receiving ) ; 
 + 
 + realm = Realm . getDefaultInstance ( ) ; 
 + 
 + if ( getIntent ( ) ! = null ) { 
 + String personId = getIntent ( ) . getStringExtra ( " person _ id " ) ; 
 + if ( personId ! = null ) { 
 + Person person = realm . where ( Person . class ) . equalTo ( " id " , personId ) . findFirst ( ) ; 
 + ( ( TextView ) findViewById ( R . id . received _ content ) ) . setText ( String . format ( " Received person _ id and loaded : % s " , person . toString ( ) ) ) ; 
 + } 
 + } 
 + } 
 + 
 + @ Override 
 + protected void onDestroy ( ) { 
 + super . onDestroy ( ) ; 
 + realm . close ( ) ; 
 + } 
 + } 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingService . java b / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingService . java 
 new file mode 100644 
 index 0000000 . . 53f5ae4 
 - - - / dev / null 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / ReceivingService . java 
 @ @ - 0 , 0 + 1 , 49 @ @ 
 + / * 
 + * Copyright 2015 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . threads ; 
 + 
 + import android . app . IntentService ; 
 + import android . content . Intent ; 
 + import android . os . Handler ; 
 + import android . widget . Toast ; 
 + 
 + import io . realm . Realm ; 
 + import io . realm . examples . threads . model . Person ; 
 + 
 + public class ReceivingService extends IntentService { 
 + 
 + public ReceivingService ( ) { 
 + super ( " ReceivingService " ) ; 
 + } 
 + 
 + @ Override 
 + protected void onHandleIntent ( Intent intent ) { 
 + if ( intent . getExtras ( ) ! = null ) { 
 + String personId = intent . getStringExtra ( " person _ id " ) ; 
 + Realm realm = Realm . getDefaultInstance ( ) ; 
 + Person person = realm . where ( Person . class ) . equalTo ( " id " , personId ) . findFirst ( ) ; 
 + final String output = person . toString ( ) ; 
 + new Handler ( getMainLooper ( ) ) . post ( new Runnable ( ) { 
 + @ Override 
 + public void run ( ) { 
 + Toast . makeText ( getApplicationContext ( ) , " Loaded Person from intent service : " + output , Toast . LENGTH _ LONG ) . show ( ) ; 
 + } 
 + } ) ; 
 + realm . close ( ) ; 
 + } 
 + } 
 + } 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / ThreadExampleActivity . java b / examples / threadExample / src / main / java / io / realm / examples / threads / ThreadExampleActivity . java 
 index 775a697 . . c3774ac 100644 
 - - - a / examples / threadExample / src / main / java / io / realm / examples / threads / ThreadExampleActivity . java 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / ThreadExampleActivity . java 
 @ @ - 87 , 13 + 87 , 14 @ @ public class ThreadExampleActivity extends ActionBarActivity implements android . 
 case 0 : return new ThreadFragment ( ) ; 
 case 1 : return new AsyncTaskFragment ( ) ; 
 case 2 : return new AsyncQueryFragment ( ) ; 
 + case 3 : return new PassingObjectsFragment ( ) ; 
 default : return null ; 
 } 
 } 
 
 @ Override 
 public int getCount ( ) { 
 - return 3 ; 
 + return 4 ; 
 } 
 
 @ Override 
 @ @ - 103 , 6 + 104 , 7 @ @ public class ThreadExampleActivity extends ActionBarActivity implements android . 
 case 0 : return getString ( R . string . title _ section1 ) . toUpperCase ( l ) ; 
 case 1 : return getString ( R . string . title _ section2 ) . toUpperCase ( l ) ; 
 case 2 : return getString ( R . string . title _ section3 ) . toUpperCase ( l ) ; 
 + case 3 : return getString ( R . string . title _ section4 ) . toUpperCase ( l ) ; 
 default : return null ; 
 } 
 } 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingBroadcastReceiver . java b / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingBroadcastReceiver . java 
 new file mode 100644 
 index 0000000 . . 1c96463 
 - - - / dev / null 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingBroadcastReceiver . java 
 @ @ - 0 , 0 + 1 , 32 @ @ 
 + / * 
 + * Copyright 2015 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . threads ; 
 + 
 + import android . content . Context ; 
 + import android . content . Intent ; 
 + import android . support . v4 . content . WakefulBroadcastReceiver ; 
 + 
 + public class WakefulReceivingBroadcastReceiver extends WakefulBroadcastReceiver { 
 + @ Override 
 + public void onReceive ( Context context , Intent intent ) { 
 + / / Do not do work in onReceive as it can cause an ANR . Perform work in a 
 + / / service as to avoid the ANR . 
 + Intent serviceIntent = new Intent ( context , WakefulReceivingService . class ) ; 
 + serviceIntent . putExtra ( " person _ id " , intent . getStringExtra ( " person _ id " ) ) ; 
 + startWakefulService ( context , serviceIntent ) ; 
 + } 
 + } 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingService . java b / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingService . java 
 new file mode 100644 
 index 0000000 . . 22f60d4 
 - - - / dev / null 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / WakefulReceivingService . java 
 @ @ - 0 , 0 + 1 , 53 @ @ 
 + / * 
 + * Copyright 2015 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . threads ; 
 + 
 + import android . app . IntentService ; 
 + import android . content . Intent ; 
 + import android . os . Handler ; 
 + import android . support . v4 . content . WakefulBroadcastReceiver ; 
 + import android . widget . Toast ; 
 + 
 + import io . realm . Realm ; 
 + import io . realm . examples . threads . model . Person ; 
 + 
 + public class WakefulReceivingService extends IntentService { 
 + 
 + public WakefulReceivingService ( ) { 
 + super ( " WakefulReceivingService " ) ; 
 + } 
 + 
 + @ Override 
 + protected void onHandleIntent ( Intent intent ) { 
 + if ( intent . getExtras ( ) ! = null ) { 
 + String personId = intent . getStringExtra ( " person _ id " ) ; 
 + Realm realm = Realm . getDefaultInstance ( ) ; 
 + Person person = realm . where ( Person . class ) . equalTo ( " id " , personId ) . findFirst ( ) ; 
 + final String output = person . toString ( ) ; 
 + new Handler ( getMainLooper ( ) ) . post ( new Runnable ( ) { 
 + @ Override 
 + public void run ( ) { 
 + Toast . makeText ( getApplicationContext ( ) , " Loaded Person from broadcast - receiver - > intent - service : " + output , Toast . LENGTH _ LONG ) . show ( ) ; 
 + } 
 + } ) ; 
 + realm . close ( ) ; 
 + } 
 + 
 + / / All the work is done , release the wake locks / etc 
 + WakefulBroadcastReceiver . completeWakefulIntent ( intent ) ; 
 + } 
 + } 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / model / Person . java b / examples / threadExample / src / main / java / io / realm / examples / threads / model / Person . java 
 new file mode 100644 
 index 0000000 . . 7793d89 
 - - - / dev / null 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / model / Person . java 
 @ @ - 0 , 0 + 1 , 53 @ @ 
 + / * 
 + * Copyright 2015 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . threads . model ; 
 + 
 + import io . realm . RealmObject ; 
 + import io . realm . annotations . PrimaryKey ; 
 + 
 + public class Person extends RealmObject { 
 + 
 + @ PrimaryKey 
 + private String id ; 
 + private String name ; 
 + private int age ; 
 + 
 + 
 + public String getId ( ) { 
 + return id ; 
 + } 
 + 
 + public void setId ( String id ) { 
 + this . id = id ; 
 + } 
 + 
 + public String getName ( ) { 
 + return name ; 
 + } 
 + 
 + public void setName ( String name ) { 
 + this . name = name ; 
 + } 
 + 
 + public int getAge ( ) { 
 + return age ; 
 + } 
 + 
 + public void setAge ( int age ) { 
 + this . age = age ; 
 + } 
 + } 
 diff - - git a / examples / threadExample / src / main / res / layout / activity _ receiving . xml b / examples / threadExample / src / main / res / layout / activity _ receiving . xml 
 new file mode 100644 
 index 0000000 . . 17e6a13 
 - - - / dev / null 
 + + + b / examples / threadExample / src / main / res / layout / activity _ receiving . xml 
 @ @ - 0 , 0 + 1 , 20 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < RelativeLayout 
 + xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + xmlns : tools = " http : / / schemas . android . com / tools " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " match _ parent " 
 + android : background = " @ color / screen _ background " 
 + android : paddingBottom = " @ dimen / activity _ vertical _ margin " 
 + android : paddingLeft = " @ dimen / activity _ horizontal _ margin " 
 + android : paddingRight = " @ dimen / activity _ horizontal _ margin " 
 + android : paddingTop = " @ dimen / activity _ vertical _ margin " 
 + tools : context = " io . realm . examples . threads . ReceivingActivity " > 
 + 
 + < TextView 
 + android : id = " @ + id / received _ content " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " wrap _ content " 
 + android : textColor = " @ android : color / white " / > 
 + 
 + < / RelativeLayout > 
 diff - - git a / examples / threadExample / src / main / res / layout / fragment _ async _ query . xml b / examples / threadExample / src / main / res / layout / fragment _ async _ query . xml 
 index 027bcd9 . . f695941 100644 
 - - - a / examples / threadExample / src / main / res / layout / fragment _ async _ query . xml 
 + + + b / examples / threadExample / src / main / res / layout / fragment _ async _ query . xml 
 @ @ - 2 , 7 + 2 , 7 @ @ 
 xmlns : tools = " http : / / schemas . android . com / tools " 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " match _ parent " 
 - android : background = " @ color / fragment _ background " 
 + android : background = " @ color / screen _ background " 
 android : orientation = " vertical " 
 android : paddingBottom = " @ dimen / activity _ vertical _ margin " 
 android : paddingLeft = " @ dimen / activity _ horizontal _ margin " 
 diff - - git a / examples / threadExample / src / main / res / layout / fragment _ asynctask . xml b / examples / threadExample / src / main / res / layout / fragment _ asynctask . xml 
 index ce8dd87 . . 7e8ef20 100644 
 - - - a / examples / threadExample / src / main / res / layout / fragment _ asynctask . xml 
 + + + b / examples / threadExample / src / main / res / layout / fragment _ asynctask . xml 
 @ @ - 2 , 7 + 2 , 7 @ @ 
 xmlns : tools = " http : / / schemas . android . com / tools " 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " match _ parent " 
 - android : background = " @ color / fragment _ background " 
 + android : background = " @ color / screen _ background " 
 android : orientation = " vertical " 
 android : paddingBottom = " @ dimen / activity _ vertical _ margin " 
 android : paddingLeft = " @ dimen / activity _ horizontal _ margin " 
 diff - - git a / examples / threadExample / src / main / res / layout / fragment _ passing _ objects . xml b / examples / threadExample / src / main / res / layout / fragment _ passing _ objects . xml 
 new file mode 100644 
 index 0000000 . . b92612d 
 - - - / dev / null 
 + + + b / examples / threadExample / src / main / res / layout / fragment _ passing _ objects . xml 
 @ @ - 0 , 0 + 1 , 33 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < LinearLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " match _ parent " 
 + android : layout _ margin = " @ dimen / activity _ horizontal _ margin " 
 + android : background = " @ color / screen _ background " 
 + android : orientation = " vertical " > 
 + 
 + < TextView 
 + android : id = " @ + id / text _ content " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " wrap _ content " 
 + android : textColor = " @ android : color / white " / > 
 + 
 + < Button 
 + android : id = " @ + id / start _ activity " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " wrap _ content " 
 + android : text = " @ string / start _ activity " / > 
 + 
 + < Button 
 + android : id = " @ + id / start _ intent _ service " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " wrap _ content " 
 + android : text = " @ string / start _ intent _ service " / > 
 + 
 + < Button 
 + android : id = " @ + id / start _ receiver " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " wrap _ content " 
 + android : text = " @ string / start _ receiver " / > 
 + 
 + < / LinearLayout > 
 \ No newline at end of file 
 diff - - git a / examples / threadExample / src / main / res / layout / fragment _ thread . xml b / examples / threadExample / src / main / res / layout / fragment _ thread . xml 
 index ae8b310 . . b065c2f 100644 
 - - - a / examples / threadExample / src / main / res / layout / fragment _ thread . xml 
 + + + b / examples / threadExample / src / main / res / layout / fragment _ thread . xml 
 @ @ - 2 , 7 + 2 , 7 @ @ 
 xmlns : tools = " http : / / schemas . android . com / tools " 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " match _ parent " 
 - android : background = " @ color / fragment _ background " 
 + android : background = " @ color / screen _ background " 
 tools : context = " . MainActivity $ PlaceholderFragment " > 
 
 < io . realm . examples . threads . widget . DotsView 
 diff - - git a / examples / threadExample / src / main / res / values / colors . xml b / examples / threadExample / src / main / res / values / colors . xml 
 index fed8363 . . 9d34e34 100644 
 - - - a / examples / threadExample / src / main / res / values / colors . xml 
 + + + b / examples / threadExample / src / main / res / values / colors . xml 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 < resources > 
 - < color name = " fragment _ background " > # 333333 < / color > 
 + < color name = " screen _ background " > # 333333 < / color > 
 < color name = " realm _ red " > # f0727d < / color > 
 < color name = " realm _ blue " > # 428bca < / color > 
 < / resources > 
 \ No newline at end of file 
 diff - - git a / examples / threadExample / src / main / res / values / dimens . xml b / examples / threadExample / src / main / res / values / dimens . xml 
 index 47c8224 . . 812cb7b 100644 
 - - - a / examples / threadExample / src / main / res / values / dimens . xml 
 + + + b / examples / threadExample / src / main / res / values / dimens . xml 
 @ @ - 2 , 4 + 2 , 5 @ @ 
 < ! - - Default screen margins , per the Android Design guidelines . - - > 
 < dimen name = " activity _ horizontal _ margin " > 16dp < / dimen > 
 < dimen name = " activity _ vertical _ margin " > 16dp < / dimen > 
 + < dimen name = " fab _ margin " > 16dp < / dimen > 
 < / resources > 
 diff - - git a / examples / threadExample / src / main / res / values / strings . xml b / examples / threadExample / src / main / res / values / strings . xml 
 index d822b7e . . bf54734 100644 
 - - - a / examples / threadExample / src / main / res / values / strings . xml 
 + + + b / examples / threadExample / src / main / res / values / strings . xml 
 @ @ - 9 , 5 + 9 , 10 @ @ 
 < string name = " add _ dot " > Add blue dot < / string > 
 < string name = " clear _ dots " > Clear dots < / string > 
 < string name = " translate " > Translate Dots < / string > 
 + < string name = " start _ activity " > Passing to Activity < / string > 
 + < string name = " title _ activity _ receiving " > Receiving Activity < / string > 
 + < string name = " title _ section4 " > Object Passing < / string > 
 + < string name = " start _ intent _ service " > Passing to Intent Service < / string > 
 + < string name = " start _ receiver " > Passing To Receiver < / string > 
 
 < / resources >

NEAREST DIFF:
diff - - git a / examples / threadexample / . gitignore b / examples / threadexample / . gitignore 
 new file mode 100644 
 index 0000000 . . 796b96d 
 - - - / dev / null 
 + + + b / examples / threadexample / . gitignore 
 @ @ - 0 , 0 + 1 @ @ 
 + / build 
 diff - - git a / examples / threadexample / build . gradle b / examples / threadexample / build . gradle 
 new file mode 100644 
 index 0000000 . . 1b6d599 
 - - - / dev / null 
 + + + b / examples / threadexample / build . gradle 
 @ @ - 0 , 0 + 1 , 29 @ @ 
 + apply plugin : ' com . android . application ' 
 + 
 + android { 
 + compileSdkVersion 21 
 + buildToolsVersion " 21 . 1 . 1 " 
 + 
 + defaultConfig { 
 + applicationId " io . realm . examples . threads " 
 + minSdkVersion 15 
 + targetSdkVersion 21 
 + versionCode 1 
 + versionName " 1 . 0 " 
 + } 
 + buildTypes { 
 + release { 
 + minifyEnabled false 
 + proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 + } 
 + } 
 + } 
 + 
 + tasks . preBuild { 
 + dependsOn " : realm : androidJar " 
 + } 
 + 
 + dependencies { 
 + compile ' com . android . support : appcompat - v7 : 21 . 0 . + ' 
 + compile files ( " . . / . . / realm / build / libs / realm - $ { version } . jar " ) 
 + } 
 diff - - git a / examples / threadexample / proguard - rules . pro b / examples / threadexample / proguard - rules . pro 
 new file mode 100644 
 index 0000000 . . a965f92 
 - - - / dev / null 
 + + + b / examples / threadexample / proguard - rules . pro 
 @ @ - 0 , 0 + 1 , 17 @ @ 
 + # Add project specific ProGuard rules here . 
 + # By default , the flags in this file are appended to flags specified 
 + # in / usr / local / opt / android - sdk / tools / proguard / proguard - android . txt 
 + # You can edit the include path and order by changing the proguardFiles 
 + # directive in build . gradle . 
 + # 
 + # For more details , see 
 + # http : / / developer . android . com / guide / developing / tools / proguard . html 
 + 
 + # Add any project specific keep options here : 
 + 
 + # If your project uses WebView with JS , uncomment the following 
 + # and specify the fully qualified class name to the JavaScript interface 
 + # class : 
 + # - keepclassmembers class fqcn . of . javascript . interface . for . webview { 
 + # public * ; 
 + # } 
 diff - - git a / examples / threadexample / src / main / AndroidManifest . xml b / examples / threadexample / src / main / AndroidManifest . xml 
 new file mode 100644 
 index 0000000 . . f966b2e 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / AndroidManifest . xml 
 @ @ - 0 , 0 + 1 , 21 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + package = " io . realm . myapplication " > 
 + 
 + < application 
 + android : allowBackup = " true " 
 + android : icon = " @ drawable / ic _ launcher " 
 + android : label = " @ string / app _ name " 
 + android : theme = " @ style / AppTheme " > 
 + < activity 
 + android : name = " io . realm . threadexample . ThreadExampleActivity " 
 + android : label = " @ string / app _ name " > 
 + < intent - filter > 
 + < action android : name = " android . intent . action . MAIN " / > 
 + 
 + < category android : name = " android . intent . category . LAUNCHER " / > 
 + < / intent - filter > 
 + < / activity > 
 + < / application > 
 + 
 + < / manifest > 
 diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / AsyncTaskFragment . java b / examples / threadexample / src / main / java / io / realm / threadexample / AsyncTaskFragment . java 
 new file mode 100644 
 index 0000000 . . 8a894dd 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / java / io / realm / threadexample / AsyncTaskFragment . java 
 @ @ - 0 , 0 + 1 , 46 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . threadexample ; 
 + 
 + import android . os . Bundle ; 
 + import android . support . v4 . app . Fragment ; 
 + import android . view . LayoutInflater ; 
 + import android . view . View ; 
 + import android . view . ViewGroup ; 
 + 
 + import io . realm . myapplication . R ; 
 + 
 + / * * 
 + * This fragment demonstrates how Realm can work with AsyncTasks . 
 + * / 
 + public class AsyncTaskFragment extends Fragment { 
 + 
 + public static AsyncTaskFragment newInstance ( int sectionNumber ) { 
 + AsyncTaskFragment fragment = new AsyncTaskFragment ( ) ; 
 + Bundle args = new Bundle ( ) ; 
 + args . putInt ( ThreadExampleActivity . ARG _ SECTION _ NUMBER , sectionNumber ) ; 
 + fragment . setArguments ( args ) ; 
 + return fragment ; 
 + } 
 + 
 + 
 + @ Override 
 + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 + View rootView = inflater . inflate ( R . layout . fragment _ asynctask , container , false ) ; 
 + return rootView ; 
 + } 
 + } 
 diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / ThreadExampleActivity . java b / examples / threadexample / src / main / java / io / realm / threadexample / ThreadExampleActivity . java 
 new file mode 100644 
 index 0000000 . . 03fcd1c 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / java / io / realm / threadexample / ThreadExampleActivity . java 
 @ @ - 0 , 0 + 1 , 118 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . threadexample ; 
 + 
 + import android . os . Bundle ; 
 + import android . support . v4 . app . Fragment ; 
 + import android . support . v4 . app . FragmentManager ; 
 + import android . support . v4 . app . FragmentPagerAdapter ; 
 + import android . support . v4 . app . FragmentTransaction ; 
 + import android . support . v4 . view . ViewPager ; 
 + import android . support . v7 . app . ActionBar ; 
 + import android . support . v7 . app . ActionBarActivity ; 
 + 
 + import java . util . Locale ; 
 + 
 + import io . realm . myapplication . R ; 
 + 
 + 
 + public class ThreadExampleActivity extends ActionBarActivity implements android . support . v7 . app . ActionBar . TabListener { 
 + 
 + public static final String ARG _ SECTION _ NUMBER = " arg . section _ number " ; 
 + 
 + private SectionsPagerAdapter pageAdapter ; 
 + private ViewPager viewPager ; 
 + 
 + @ Override 
 + protected void onCreate ( Bundle savedInstanceState ) { 
 + super . onCreate ( savedInstanceState ) ; 
 + setContentView ( R . layout . activity _ main ) ; 
 + 
 + / / Set up the action bar . 
 + final android . support . v7 . app . ActionBar actionBar = getSupportActionBar ( ) ; 
 + actionBar . setNavigationMode ( android . support . v7 . app . ActionBar . NAVIGATION _ MODE _ TABS ) ; 
 + 
 + pageAdapter = new SectionsPagerAdapter ( getSupportFragmentManager ( ) ) ; 
 + viewPager = ( ViewPager ) findViewById ( R . id . pager ) ; 
 + viewPager . setAdapter ( pageAdapter ) ; 
 + 
 + viewPager . setOnPageChangeListener ( new ViewPager . SimpleOnPageChangeListener ( ) { 
 + @ Override 
 + public void onPageSelected ( int position ) { 
 + actionBar . setSelectedNavigationItem ( position ) ; 
 + } 
 + } ) ; 
 + 
 + for ( int i = 0 ; i < pageAdapter . getCount ( ) ; i + + ) { 
 + getSupportActionBar ( ) . addTab ( getSupportActionBar ( ) . newTab ( ) 
 + . setText ( pageAdapter . getPageTitle ( i ) ) 
 + . setTabListener ( this ) ) ; 
 + } 
 + } 
 + 
 + @ Override 
 + protected void onDestroy ( ) { 
 + super . onDestroy ( ) ; 
 + } 
 + 
 + @ Override 
 + public void onTabSelected ( ActionBar . Tab tab , FragmentTransaction fragmentTransaction ) { 
 + viewPager . setCurrentItem ( tab . getPosition ( ) ) ; 
 + } 
 + 
 + @ Override 
 + public void onTabUnselected ( ActionBar . Tab tab , FragmentTransaction fragmentTransaction ) { 
 + 
 + } 
 + 
 + @ Override 
 + public void onTabReselected ( ActionBar . Tab tab , FragmentTransaction fragmentTransaction ) { 
 + 
 + } 
 + 
 + 
 + public class SectionsPagerAdapter extends FragmentPagerAdapter { 
 + 
 + public SectionsPagerAdapter ( FragmentManager fm ) { 
 + super ( fm ) ; 
 + } 
 + 
 + @ Override 
 + public Fragment getItem ( int position ) { 
 + switch ( position ) { 
 + case 0 : return new ThreadFragment ( ) ; 
 + case 1 : return new AsyncTaskFragment ( ) ; 
 + default : return null ; 
 + } 
 + } 
 + 
 + @ Override 
 + public int getCount ( ) { 
 + return 2 ; 
 + } 
 + 
 + @ Override 
 + public CharSequence getPageTitle ( int position ) { 
 + Locale l = Locale . getDefault ( ) ; 
 + switch ( position ) { 
 + case 0 : return getString ( R . string . title _ section1 ) . toUpperCase ( l ) ; 
 + case 1 : return getString ( R . string . title _ section2 ) . toUpperCase ( l ) ; 
 + default : return null ; 
 + } 
 + } 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / ThreadFragment . java b / examples / threadexample / src / main / java / io / realm / threadexample / ThreadFragment . java 
 new file mode 100644 
 index 0000000 . . e579fe6 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / java / io / realm / threadexample / ThreadFragment . java 
 @ @ - 0 , 0 + 1 , 165 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . threadexample ; 
 + 
 + import android . app . Activity ; 
 + import android . os . Bundle ; 
 + import android . support . v4 . app . Fragment ; 
 + import android . view . LayoutInflater ; 
 + import android . view . Menu ; 
 + import android . view . MenuInflater ; 
 + import android . view . MenuItem ; 
 + import android . view . View ; 
 + import android . view . ViewGroup ; 
 + 
 + import java . util . Random ; 
 + 
 + import io . realm . Realm ; 
 + import io . realm . RealmChangeListener ; 
 + import io . realm . myapplication . R ; 
 + import io . realm . threadexample . models . Point ; 
 + import io . realm . threadexample . widgets . DotsView ; 
 + 
 + / * * 
 + * This fragment demonstrates how Realm can interact with a background thread . 
 + * / 
 + public class ThreadFragment extends Fragment { 
 + 
 + private Realm realm ; 
 + private Random random = new Random ( ) ; 
 + private Thread backgroundThread ; 
 + private DotsView dotsView ; 
 + 
 + / / Realm change listener that refreshes the UI when there is changes to Realm . 
 + private RealmChangeListener realmListener = new RealmChangeListener ( ) { 
 + @ Override 
 + public void onChange ( ) { 
 + dotsView . invalidate ( ) ; 
 + } 
 + } ; 
 + 
 + @ Override 
 + public void onCreate ( Bundle savedInstanceState ) { 
 + super . onCreate ( savedInstanceState ) ; 
 + setHasOptionsMenu ( true ) ; 
 + } 
 + 
 + @ Override 
 + public void onAttach ( Activity activity ) { 
 + super . onAttach ( activity ) ; 
 + realm = Realm . getInstance ( getActivity ( ) ) ; 
 + } 
 + 
 + @ Override 
 + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 + View rootView = inflater . inflate ( R . layout . fragment _ thread , container , false ) ; 
 + dotsView = ( DotsView ) rootView . findViewById ( R . id . dots ) ; 
 + 
 + / / Create a RealmQuery on the UI thread and send the results to the custom view . The 
 + / / RealmResults will automatically be updated whenever new data is either added or removed . 
 + / / We still need to invalidate the UI to show the changes however . See the RealmChangeListener . 
 + / / 
 + / / Note also that currently the query gets updated by rerunning it on the thread it was 
 + / / created . This can negatively effect framerates if it is a complicated query or a very 
 + / / large dataset . 
 + dotsView . setRealmResults ( realm . allObjects ( Point . class ) ) ; 
 + 
 + return rootView ; 
 + } 
 + 
 + @ Override 
 + public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { 
 + super . onCreateOptionsMenu ( menu , inflater ) ; 
 + inflater . inflate ( R . menu . menu _ backgroundthread , menu ) ; 
 + } 
 + 
 + @ Override 
 + public boolean onOptionsItemSelected ( MenuItem item ) { 
 + 
 + switch ( item . getItemId ( ) ) { 
 + case R . id . action _ add _ dot : 
 + realm . beginTransaction ( ) ; 
 + Point point = realm . createObject ( Point . class ) ; 
 + point . setX ( random . nextInt ( 100 ) ) ; 
 + point . setY ( random . nextInt ( 100 ) ) ; 
 + point . setColor ( getResources ( ) . getColor ( R . color . realm _ blue ) ) ; 
 + realm . commitTransaction ( ) ; 
 + return true ; 
 + 
 + case R . id . action _ clear : 
 + realm . beginTransaction ( ) ; 
 + realm . clear ( Point . class ) ; 
 + realm . commitTransaction ( ) ; 
 + return true ; 
 + 
 + default : 
 + return super . onOptionsItemSelected ( item ) ; 
 + } 
 + } 
 + 
 + @ Override 
 + public void onResume ( ) { 
 + super . onResume ( ) ; 
 + 
 + / / Enable UI refresh while the fragment is active . 
 + realm . addChangeListener ( realmListener ) ; 
 + 
 + / / Create background thread that add new dots every 0 . 5 second . 
 + backgroundThread = new Thread ( new Runnable ( ) { 
 + 
 + @ Override 
 + public void run ( ) { 
 + / / Realm instances cannot be shared between threads , so we need to create a new 
 + / / instance on the background thread . 
 + Realm realm = Realm . getInstance ( getActivity ( ) , false ) ; 
 + while ( ! backgroundThread . isInterrupted ( ) ) { 
 + try { 
 + realm . beginTransaction ( ) ; 
 + Point point = realm . createObject ( Point . class ) ; 
 + point . setX ( random . nextInt ( 100 ) ) ; 
 + point . setY ( random . nextInt ( 100 ) ) ; 
 + point . setColor ( getResources ( ) . getColor ( R . color . realm _ red ) ) ; 
 + realm . commitTransaction ( ) ; 
 + 
 + Thread . sleep ( 500 ) ; 
 + } catch ( InterruptedException e ) { 
 + e . printStackTrace ( ) ; 
 + } 
 + } 
 + 
 + realm . close ( ) ; 
 + } 
 + } ) ; 
 + backgroundThread . start ( ) ; 
 + } 
 + 
 + @ Override 
 + public void onPause ( ) { 
 + super . onPause ( ) ; 
 + 
 + / / Disable UI refresh while the fragment is no longer active . 
 + realm . addChangeListener ( realmListener ) ; 
 + backgroundThread . interrupt ( ) ; 
 + } 
 + 
 + @ Override 
 + public void onDestroy ( ) { 
 + super . onDestroy ( ) ; 
 + / / Remember to close the Realm instance when done with it . 
 + realm . close ( ) ; 
 + } 
 + } 
 diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / models / Point . java b / examples / threadexample / src / main / java / io / realm / threadexample / models / Point . java 
 new file mode 100644 
 index 0000000 . . 48fe132 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / java / io / realm / threadexample / models / Point . java 
 @ @ - 0 , 0 + 1 , 43 @ @ 
 + package io . realm . threadexample . models ; 
 + 
 + import io . realm . RealmObject ; 
 + 
 + public class Point extends RealmObject { 
 + 
 + private int x ; 
 + private int y ; 
 + private int color ; 
 + private long timestamp ; 
 + 
 + public int getX ( ) { 
 + return x ; 
 + } 
 + 
 + public void setX ( int x ) { 
 + this . x = x ; 
 + } 
 + 
 + public int getY ( ) { 
 + return y ; 
 + } 
 + 
 + public void setY ( int y ) { 
 + this . y = y ; 
 + } 
 + 
 + public int getColor ( ) { 
 + return color ; 
 + } 
 + 
 + public void setColor ( int color ) { 
 + this . color = color ; 
 + } 
 + 
 + public long getTimestamp ( ) { 
 + return timestamp ; 
 + } 
 + 
 + public void setTimestamp ( long timestamp ) { 
 + this . timestamp = timestamp ; 
 + } 
 + } 
 diff - - git a / examples / threadexample / src / main / java / io / realm / threadexample / widgets / DotsView . java b / examples / threadexample / src / main / java / io / realm / threadexample / widgets / DotsView . java 
 new file mode 100644 
 index 0000000 . . 6a48a9f 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / java / io / realm / threadexample / widgets / DotsView . java 
 @ @ - 0 , 0 + 1 , 70 @ @ 
 + package io . realm . threadexample . widgets ; 
 + 
 + import android . content . Context ; 
 + import android . graphics . Canvas ; 
 + import android . graphics . Color ; 
 + import android . graphics . Paint ; 
 + import android . util . AttributeSet ; 
 + import android . view . View ; 
 + 
 + import io . realm . RealmResults ; 
 + import io . realm . threadexample . models . Point ; 
 + 
 + / * * 
 + * Custom view that plot ( x , y ) coordinates from a RealmQuery 
 + * / 
 + public class DotsView extends View { 
 + 
 + / / RealmResults will automatically be up to date . 
 + private RealmResults < Point > results ; 
 + 
 + private Paint circlePaint ; 
 + private float circleRadius ; 
 + private float pixelsPrWidth ; 
 + private float pixelsPrHeight ; 
 + 
 + 
 + public DotsView ( Context context ) { 
 + super ( context ) ; 
 + init ( ) ; 
 + } 
 + 
 + public DotsView ( Context context , AttributeSet attrs ) { 
 + super ( context , attrs ) ; 
 + init ( ) ; 
 + } 
 + 
 + public DotsView ( Context context , AttributeSet attrs , int defStyleAttr ) { 
 + super ( context , attrs , defStyleAttr ) ; 
 + init ( ) ; 
 + } 
 + 
 + private void init ( ) { 
 + circlePaint = new Paint ( Paint . ANTI _ ALIAS _ FLAG ) ; 
 + circlePaint . setStyle ( Paint . Style . FILL ) ; 
 + circlePaint . setColor ( Color . RED ) ; 
 + circleRadius = 10 ; 
 + } 
 + 
 + public void setRealmResults ( RealmResults results ) { 
 + this . results = results ; 
 + invalidate ( ) ; 
 + } 
 + 
 + @ Override 
 + protected void onSizeChanged ( int w , int h , int oldw , int oldh ) { 
 + super . onSizeChanged ( w , h , oldw , oldh ) ; 
 + pixelsPrWidth = w / 100f ; 
 + pixelsPrHeight = h / 100f ; 
 + } 
 + 
 + @ Override 
 + protected void onDraw ( Canvas canvas ) { 
 + super . onDraw ( canvas ) ; 
 + canvas . drawColor ( Color . TRANSPARENT ) ; 
 + for ( Point point : results ) { 
 + circlePaint . setColor ( point . getColor ( ) ) ; 
 + canvas . drawCircle ( point . getX ( ) * pixelsPrWidth , point . getY ( ) * pixelsPrHeight , circleRadius , circlePaint ) ; 
 + } 
 + } 
 + } 
 diff - - git a / examples / threadexample / src / main / res / drawable - xxhdpi / ic _ launcher . png b / examples / threadexample / src / main / res / drawable - xxhdpi / ic _ launcher . png 
 new file mode 100644 
 index 0000000 . . 4330211 
 Binary files / dev / null and b / examples / threadexample / src / main / res / drawable - xxhdpi / ic _ launcher . png differ 
 diff - - git a / examples / threadexample / src / main / res / layout / activity _ main . xml b / examples / threadexample / src / main / res / layout / activity _ main . xml 
 new file mode 100644 
 index 0000000 . . 0cfa754 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / layout / activity _ main . xml 
 @ @ - 0 , 0 + 1 , 22 @ @ 
 + < ! - - 
 + ~ Copyright 2014 Realm Inc . 
 + ~ 
 + ~ Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + ~ you may not use this file except in compliance with the License . 
 + ~ You may obtain a copy of the License at 
 + ~ 
 + ~ http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + ~ 
 + ~ Unless required by applicable law or agreed to in writing , software 
 + ~ distributed under the License is distributed on an " AS IS " BASIS , 
 + ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + ~ See the License for the specific language governing permissions and 
 + ~ limitations under the License . 
 + - - > 
 + 
 + < android . support . v4 . view . ViewPager xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + xmlns : tools = " http : / / schemas . android . com / tools " 
 + android : id = " @ + id / pager " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " match _ parent " 
 + tools : context = " . ThreadExampleActivity " / > 
 diff - - git a / examples / threadexample / src / main / res / layout / fragment _ asynctask . xml b / examples / threadexample / src / main / res / layout / fragment _ asynctask . xml 
 new file mode 100644 
 index 0000000 . . 5e7ef68 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / layout / fragment _ asynctask . xml 
 @ @ - 0 , 0 + 1 , 29 @ @ 
 + < ! - - 
 + ~ Copyright 2014 Realm Inc . 
 + ~ 
 + ~ Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + ~ you may not use this file except in compliance with the License . 
 + ~ You may obtain a copy of the License at 
 + ~ 
 + ~ http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + ~ 
 + ~ Unless required by applicable law or agreed to in writing , software 
 + ~ distributed under the License is distributed on an " AS IS " BASIS , 
 + ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + ~ See the License for the specific language governing permissions and 
 + ~ limitations under the License . 
 + - - > 
 + 
 + < RelativeLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + xmlns : tools = " http : / / schemas . android . com / tools " android : layout _ width = " match _ parent " 
 + android : layout _ height = " match _ parent " android : paddingLeft = " @ dimen / activity _ horizontal _ margin " 
 + android : paddingRight = " @ dimen / activity _ horizontal _ margin " 
 + android : paddingTop = " @ dimen / activity _ vertical _ margin " 
 + android : paddingBottom = " @ dimen / activity _ vertical _ margin " 
 + android : background = " @ color / fragment _ background " 
 + tools : context = " . MainActivity $ PlaceholderFragment " > 
 + 
 + < TextView android : id = " @ + id / section _ label " android : layout _ width = " wrap _ content " 
 + android : layout _ height = " wrap _ content " / > 
 + 
 + < / RelativeLayout > 
 diff - - git a / examples / threadexample / src / main / res / layout / fragment _ thread . xml b / examples / threadexample / src / main / res / layout / fragment _ thread . xml 
 new file mode 100644 
 index 0000000 . . 522ba2c 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / layout / fragment _ thread . xml 
 @ @ - 0 , 0 + 1 , 29 @ @ 
 + < ! - - 
 + ~ Copyright 2014 Realm Inc . 
 + ~ 
 + ~ Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + ~ you may not use this file except in compliance with the License . 
 + ~ You may obtain a copy of the License at 
 + ~ 
 + ~ http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + ~ 
 + ~ Unless required by applicable law or agreed to in writing , software 
 + ~ distributed under the License is distributed on an " AS IS " BASIS , 
 + ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + ~ See the License for the specific language governing permissions and 
 + ~ limitations under the License . 
 + - - > 
 + 
 + < RelativeLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + xmlns : tools = " http : / / schemas . android . com / tools " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " match _ parent " 
 + android : background = " @ color / fragment _ background " 
 + tools : context = " . MainActivity $ PlaceholderFragment " > 
 + 
 + < io . realm . threadexample . widgets . DotsView 
 + android : id = " @ + id / dots " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " match _ parent " / > 
 + 
 + < / RelativeLayout > 
 diff - - git a / examples / threadexample / src / main / res / menu / menu _ backgroundthread . xml b / examples / threadexample / src / main / res / menu / menu _ backgroundthread . xml 
 new file mode 100644 
 index 0000000 . . e3708ee 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / menu / menu _ backgroundthread . xml 
 @ @ - 0 , 0 + 1 , 32 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > < ! - - 
 + ~ Copyright 2014 Realm Inc . 
 + ~ 
 + ~ Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + ~ you may not use this file except in compliance with the License . 
 + ~ You may obtain a copy of the License at 
 + ~ 
 + ~ http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + ~ 
 + ~ Unless required by applicable law or agreed to in writing , software 
 + ~ distributed under the License is distributed on an " AS IS " BASIS , 
 + ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + ~ See the License for the specific language governing permissions and 
 + ~ limitations under the License . 
 + - - > 
 + 
 + < menu xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + xmlns : app = " http : / / schemas . android . com / apk / res - auto " > 
 + 
 + < item 
 + android : id = " @ + id / action _ add _ dot " 
 + android : title = " @ string / add _ dot " 
 + android : icon = " @ android : drawable / ic _ menu _ add " 
 + app : showAsAction = " always " / > 
 + 
 + < item 
 + android : id = " @ + id / action _ clear " 
 + android : title = " @ string / clear _ dots " 
 + android : icon = " @ android : drawable / ic _ menu _ delete " 
 + app : showAsAction = " always " / > 
 + 
 + < / menu > 
 \ No newline at end of file 
 diff - - git a / examples / threadexample / src / main / res / values - w820dp / dimens . xml b / examples / threadexample / src / main / res / values - w820dp / dimens . xml 
 new file mode 100644 
 index 0000000 . . 63fc816 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / values - w820dp / dimens . xml 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + < resources > 
 + < ! - - Example customization of dimensions originally defined in res / values / dimens . xml 
 + ( such as screen margins ) for screens with more than 820dp of available width . This 
 + would include 7 " and 10 " devices in landscape ( ~ 960dp and ~ 1280dp respectively ) . - - > 
 + < dimen name = " activity _ horizontal _ margin " > 64dp < / dimen > 
 + < / resources > 
 diff - - git a / examples / threadexample / src / main / res / values / colors . xml b / examples / threadexample / src / main / res / values / colors . xml 
 new file mode 100644 
 index 0000000 . . fed8363 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / values / colors . xml 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < resources > 
 + < color name = " fragment _ background " > # 333333 < / color > 
 + < color name = " realm _ red " > # f0727d < / color > 
 + < color name = " realm _ blue " > # 428bca < / color > 
 + < / resources > 
 \ No newline at end of file 
 diff - - git a / examples / threadexample / src / main / res / values / dimens . xml b / examples / threadexample / src / main / res / values / dimens . xml 
 new file mode 100644 
 index 0000000 . . 47c8224 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / values / dimens . xml 
 @ @ - 0 , 0 + 1 , 5 @ @ 
 + < resources > 
 + < ! - - Default screen margins , per the Android Design guidelines . - - > 
 + < dimen name = " activity _ horizontal _ margin " > 16dp < / dimen > 
 + < dimen name = " activity _ vertical _ margin " > 16dp < / dimen > 
 + < / resources > 
 diff - - git a / examples / threadexample / src / main / res / values / strings . xml b / examples / threadexample / src / main / res / values / strings . xml 
 new file mode 100644 
 index 0000000 . . 21288be 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / values / strings . xml 
 @ @ - 0 , 0 + 1 , 11 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < resources > 
 + 
 + < string name = " app _ name " > Thread example < / string > 
 + < string name = " action _ settings " > Settings < / string > 
 + < string name = " title _ section1 " > Threads < / string > 
 + < string name = " title _ section2 " > AsyncTask < / string > 
 + < string name = " add _ dot " > Add dot < / string > 
 + < string name = " clear _ dots " > Clear dots < / string > 
 + 
 + < / resources > 
 diff - - git a / examples / threadexample / src / main / res / values / styles . xml b / examples / threadexample / src / main / res / values / styles . xml 
 new file mode 100644 
 index 0000000 . . 766ab99 
 - - - / dev / null 
 + + + b / examples / threadexample / src / main / res / values / styles . xml 
 @ @ - 0 , 0 + 1 , 8 @ @ 
 + < resources > 
 + 
 + < ! - - Base application theme . - - > 
 + < style name = " AppTheme " parent = " Theme . AppCompat . Light . DarkActionBar " > 
 + < ! - - Customize your theme here . - - > 
 + < / style > 
 + 
 + < / resources > 
 diff - - git a / settings . gradle b / settings . gradle 
 index d7fde45 . . 9a97810 100644 
 - - - a / settings . gradle 
 + + + b / settings . gradle 
 @ @ - 2 , 7 + 2 , 13 @ @ 
 include ' realm ' 
 
 / / Example projects 
 - include ' : introExample ' , ' : gridViewExample ' , ' : concurrencyExample ' , ' : encryptionExample ' , ' : migrationExample ' , ' : adapterExample ' 
 + include ' : introExample ' , 
 + ' : gridViewExample ' , 
 + ' : concurrencyExample ' , 
 + ' : encryptionExample ' , 
 + ' : migrationExample ' , 
 + ' : adapterExample ' , 
 + ' : threadExample ' 
 
 project ( ' : introExample ' ) . projectDir = new File ( ' examples / introExample ' ) 
 project ( ' : gridViewExample ' ) . projectDir = new File ( ' examples / gridViewExample ' ) 
 @ @ - 10 , 6 + 16 , 7 @ @ project ( ' : concurrencyExample ' ) . projectDir = new File ( ' examples / concurrencyExampl 
 project ( ' : encryptionExample ' ) . projectDir = new File ( ' examples / encryptionExample ' ) 
 project ( ' : migrationExample ' ) . projectDir = new File ( ' examples / migrationExample ' ) 
 project ( ' : adapterExample ' ) . projectDir = new File ( ' examples / adapterExample ' ) 
 + project ( ' : threadExample ' ) . projectDir = new File ( ' examples / threadExample ' ) 
 
 / / Experimental projects 
 include ' : pathExperiment '
