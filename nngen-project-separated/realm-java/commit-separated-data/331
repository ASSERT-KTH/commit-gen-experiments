BLEU SCORE: 0.026279617104084448

TEST MSG: update to Core 2 . 6 . 0 & Sync 1 . 5 . 2
GENERATED MSG: Compacting encrypted Realms is working .

TEST DIFF (one line): diff - - git a / CHANGELOG . md b / CHANGELOG . md <nl> index 9b4f92a . . 7f5f32b 100644 <nl> - - - a / CHANGELOG . md <nl> + + + b / CHANGELOG . md <nl> @ @ - 1 , 3 + 1 , 9 @ @ <nl> + # # 3 . 1 . 3 <nl> + <nl> + # # # Internal <nl> + <nl> + * Upgraded to Realm Sync 1 . 5 . 2 . <nl> + <nl> # # 3 . 1 . 2 ( 2017 - 04 - 12 ) <nl> <nl> # # # Bug Fixes <nl> diff - - git a / dependencies . list b / dependencies . list <nl> index 408853f . . 9d4d440 100644 <nl> - - - a / dependencies . list <nl> + + + b / dependencies . list <nl> @ @ - 1 , 7 + 1 , 7 @ @ <nl> # Realm Sync Core release used by Realm Java <nl> # https : / / github . com / realm / realm - sync / releases <nl> - REALM _ SYNC _ VERSION = 1 . 5 . 0 <nl> - REALM _ SYNC _ SHA256 = 2da0de557182e7d717d74808bf6d3f1e5f18d5c082744d29b96dca80555733a7 <nl> + REALM _ SYNC _ VERSION = 1 . 5 . 2 <nl> + REALM _ SYNC _ SHA256 = e7a0134b5b69c5a571e3f49901bb8d8ca634b166873c5a422909e7d2016a00e7 <nl> <nl> # Object Server Release used by Integration tests <nl> # ` realm ` is stable releases , ` realm - testing ` is developer builds . <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> index ca9baad . . bfa10d3 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> @ @ - 17 , 7 + 17 , 7 @ @ <nl> # include " io _ realm _ internal _ TableQuery . h " <nl> <nl> # include < realm . hpp > <nl> - # include < realm / group _ shared . hpp > <nl> + # include < realm / query _ expression . hpp > <nl> <nl> # include < shared _ realm . hpp > <nl> # include < object _ store . hpp > <nl> diff - - git a / realm / realm - library / src / main / cpp / util . hpp b / realm / realm - library / src / main / cpp / util . hpp <nl> index c0ec632 . . 11d6a91 100644 <nl> - - - a / realm / realm - library / src / main / cpp / util . hpp <nl> + + + b / realm / realm - library / src / main / cpp / util . hpp <nl> @ @ - 29 , 7 + 29 , 6 @ @ <nl> # include < realm . hpp > <nl> # include < realm / lang _ bind _ helper . hpp > <nl> # include < realm / timestamp . hpp > <nl> - # include < realm / util / meta . hpp > <nl> # include < realm / util / safe _ int _ ops . hpp > <nl> <nl> # include < util / format . hpp >
NEAREST DIFF (one line): diff - - git a / CHANGELOG . md b / CHANGELOG . md <nl> index 4627bcd . . cdede1b 100644 <nl> - - - a / CHANGELOG . md <nl> + + + b / CHANGELOG . md <nl> @ @ - 1 , 3 + 1 , 9 @ @ <nl> + # # 2 . 0 . 1 <nl> + <nl> + # # # Enhancement <nl> + <nl> + * ` Realm . compactRealm ( ) ` works for encrypted Realms . <nl> + <nl> # # 2 . 0 . 0 <nl> <nl> This release introduces support for the Realm Mobile Platform ! <nl> diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RealmTests . java b / realm / realm - library / src / androidTest / java / io / realm / RealmTests . java <nl> index a920574 . . fa5f8f6 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / RealmTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / RealmTests . java <nl> @ @ - 982 , 27 + 982 , 26 @ @ public class RealmTests { <nl> RealmConfiguration realmConfig = configFactory . createConfiguration ( " enc . realm " , TestHelper . getRandomKey ( ) ) ; <nl> Realm realm = Realm . getInstance ( realmConfig ) ; <nl> realm . close ( ) ; <nl> - / / TODO : remove try / catch block when compacting encrypted Realms is supported <nl> - try { <nl> - assertTrue ( Realm . compactRealm ( realmConfig ) ) ; <nl> - fail ( ) ; <nl> - } catch ( IllegalArgumentException expected ) { <nl> - } <nl> + assertTrue ( Realm . compactRealm ( realmConfig ) ) ; <nl> + realm = Realm . getInstance ( realmConfig ) ; <nl> + assertFalse ( realm . isClosed ( ) ) ; <nl> + assertTrue ( realm . isEmpty ( ) ) ; <nl> + realm . close ( ) ; <nl> } <nl> <nl> @ Test <nl> public void compactRealm _ encryptedPopulatedRealm ( ) { <nl> + final int DATA _ SIZE = 100 ; <nl> RealmConfiguration realmConfig = configFactory . createConfiguration ( " enc . realm " , TestHelper . getRandomKey ( ) ) ; <nl> Realm realm = Realm . getInstance ( realmConfig ) ; <nl> <nl> - populateTestRealm ( realm , 100 ) ; <nl> + populateTestRealm ( realm , DATA _ SIZE ) ; <nl> + realm . close ( ) ; <nl> + assertTrue ( Realm . compactRealm ( realmConfig ) ) ; <nl> + realm = Realm . getInstance ( realmConfig ) ; <nl> + assertFalse ( realm . isClosed ( ) ) ; <nl> + assertEquals ( DATA _ SIZE , realm . where ( AllTypes . class ) . count ( ) ) ; <nl> realm . close ( ) ; <nl> - / / TODO : remove try / catch block when compacting encrypted Realms is supported <nl> - try { <nl> - assertTrue ( Realm . compactRealm ( realmConfig ) ) ; <nl> - fail ( ) ; <nl> - } catch ( IllegalArgumentException expected ) { <nl> - } <nl> } <nl> <nl> @ Test <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / BaseRealm . java b / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> index cc1d89d . . d3dc068 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> @ @ - 583 , 10 + 583 , 6 @ @ abstract class BaseRealm implements Closeable { <nl> * @ return { @ code true } if compaction succeeded , { @ code false } otherwise . <nl> * / <nl> static boolean compactRealm ( final RealmConfiguration configuration ) { <nl> - / / https : / / github . com / realm / realm - java / issues / 1033 <nl> - if ( configuration . getEncryptionKey ( ) ! = null ) { <nl> - throw new IllegalArgumentException ( " Cannot currently compact an encrypted Realm . " ) ; <nl> - } <nl> SharedRealm sharedRealm = SharedRealm . getInstance ( configuration ) ; <nl> Boolean result = sharedRealm . compact ( ) ; <nl> sharedRealm . close ( ) ;

TEST DIFF:
diff - - git a / CHANGELOG . md b / CHANGELOG . md 
 index 9b4f92a . . 7f5f32b 100644 
 - - - a / CHANGELOG . md 
 + + + b / CHANGELOG . md 
 @ @ - 1 , 3 + 1 , 9 @ @ 
 + # # 3 . 1 . 3 
 + 
 + # # # Internal 
 + 
 + * Upgraded to Realm Sync 1 . 5 . 2 . 
 + 
 # # 3 . 1 . 2 ( 2017 - 04 - 12 ) 
 
 # # # Bug Fixes 
 diff - - git a / dependencies . list b / dependencies . list 
 index 408853f . . 9d4d440 100644 
 - - - a / dependencies . list 
 + + + b / dependencies . list 
 @ @ - 1 , 7 + 1 , 7 @ @ 
 # Realm Sync Core release used by Realm Java 
 # https : / / github . com / realm / realm - sync / releases 
 - REALM _ SYNC _ VERSION = 1 . 5 . 0 
 - REALM _ SYNC _ SHA256 = 2da0de557182e7d717d74808bf6d3f1e5f18d5c082744d29b96dca80555733a7 
 + REALM _ SYNC _ VERSION = 1 . 5 . 2 
 + REALM _ SYNC _ SHA256 = e7a0134b5b69c5a571e3f49901bb8d8ca634b166873c5a422909e7d2016a00e7 
 
 # Object Server Release used by Integration tests 
 # ` realm ` is stable releases , ` realm - testing ` is developer builds . 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 index ca9baad . . bfa10d3 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 @ @ - 17 , 7 + 17 , 7 @ @ 
 # include " io _ realm _ internal _ TableQuery . h " 
 
 # include < realm . hpp > 
 - # include < realm / group _ shared . hpp > 
 + # include < realm / query _ expression . hpp > 
 
 # include < shared _ realm . hpp > 
 # include < object _ store . hpp > 
 diff - - git a / realm / realm - library / src / main / cpp / util . hpp b / realm / realm - library / src / main / cpp / util . hpp 
 index c0ec632 . . 11d6a91 100644 
 - - - a / realm / realm - library / src / main / cpp / util . hpp 
 + + + b / realm / realm - library / src / main / cpp / util . hpp 
 @ @ - 29 , 7 + 29 , 6 @ @ 
 # include < realm . hpp > 
 # include < realm / lang _ bind _ helper . hpp > 
 # include < realm / timestamp . hpp > 
 - # include < realm / util / meta . hpp > 
 # include < realm / util / safe _ int _ ops . hpp > 
 
 # include < util / format . hpp >

NEAREST DIFF:
diff - - git a / CHANGELOG . md b / CHANGELOG . md 
 index 4627bcd . . cdede1b 100644 
 - - - a / CHANGELOG . md 
 + + + b / CHANGELOG . md 
 @ @ - 1 , 3 + 1 , 9 @ @ 
 + # # 2 . 0 . 1 
 + 
 + # # # Enhancement 
 + 
 + * ` Realm . compactRealm ( ) ` works for encrypted Realms . 
 + 
 # # 2 . 0 . 0 
 
 This release introduces support for the Realm Mobile Platform ! 
 diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RealmTests . java b / realm / realm - library / src / androidTest / java / io / realm / RealmTests . java 
 index a920574 . . fa5f8f6 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / RealmTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / RealmTests . java 
 @ @ - 982 , 27 + 982 , 26 @ @ public class RealmTests { 
 RealmConfiguration realmConfig = configFactory . createConfiguration ( " enc . realm " , TestHelper . getRandomKey ( ) ) ; 
 Realm realm = Realm . getInstance ( realmConfig ) ; 
 realm . close ( ) ; 
 - / / TODO : remove try / catch block when compacting encrypted Realms is supported 
 - try { 
 - assertTrue ( Realm . compactRealm ( realmConfig ) ) ; 
 - fail ( ) ; 
 - } catch ( IllegalArgumentException expected ) { 
 - } 
 + assertTrue ( Realm . compactRealm ( realmConfig ) ) ; 
 + realm = Realm . getInstance ( realmConfig ) ; 
 + assertFalse ( realm . isClosed ( ) ) ; 
 + assertTrue ( realm . isEmpty ( ) ) ; 
 + realm . close ( ) ; 
 } 
 
 @ Test 
 public void compactRealm _ encryptedPopulatedRealm ( ) { 
 + final int DATA _ SIZE = 100 ; 
 RealmConfiguration realmConfig = configFactory . createConfiguration ( " enc . realm " , TestHelper . getRandomKey ( ) ) ; 
 Realm realm = Realm . getInstance ( realmConfig ) ; 
 
 - populateTestRealm ( realm , 100 ) ; 
 + populateTestRealm ( realm , DATA _ SIZE ) ; 
 + realm . close ( ) ; 
 + assertTrue ( Realm . compactRealm ( realmConfig ) ) ; 
 + realm = Realm . getInstance ( realmConfig ) ; 
 + assertFalse ( realm . isClosed ( ) ) ; 
 + assertEquals ( DATA _ SIZE , realm . where ( AllTypes . class ) . count ( ) ) ; 
 realm . close ( ) ; 
 - / / TODO : remove try / catch block when compacting encrypted Realms is supported 
 - try { 
 - assertTrue ( Realm . compactRealm ( realmConfig ) ) ; 
 - fail ( ) ; 
 - } catch ( IllegalArgumentException expected ) { 
 - } 
 } 
 
 @ Test 
 diff - - git a / realm / realm - library / src / main / java / io / realm / BaseRealm . java b / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 index cc1d89d . . d3dc068 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 @ @ - 583 , 10 + 583 , 6 @ @ abstract class BaseRealm implements Closeable { 
 * @ return { @ code true } if compaction succeeded , { @ code false } otherwise . 
 * / 
 static boolean compactRealm ( final RealmConfiguration configuration ) { 
 - / / https : / / github . com / realm / realm - java / issues / 1033 
 - if ( configuration . getEncryptionKey ( ) ! = null ) { 
 - throw new IllegalArgumentException ( " Cannot currently compact an encrypted Realm . " ) ; 
 - } 
 SharedRealm sharedRealm = SharedRealm . getInstance ( configuration ) ; 
 Boolean result = sharedRealm . compact ( ) ; 
 sharedRealm . close ( ) ;
