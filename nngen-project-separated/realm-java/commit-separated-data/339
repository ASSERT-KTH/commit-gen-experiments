BLEU SCORE: 0.05341087579952926

TEST MSG: protect OsRealmObjectSchema from double free
GENERATED MSG: remove unused swapPointer method

TEST DIFF (one line): diff - - git a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> index 1375b5d . . e23f72e 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> @ @ - 19 , 7 + 19 , 7 @ @ import java . util . LinkedHashSet ; <nl> import java . util . Set ; <nl> <nl> class OsRealmObjectSchema extends RealmObjectSchema { <nl> - private final long nativePtr ; <nl> + private long nativePtr ; <nl> <nl> / * * <nl> * Creates a schema object using object store . This constructor is intended to be used by <nl> @ @ - 38 , 7 + 38 , 10 @ @ class OsRealmObjectSchema extends RealmObjectSchema { <nl> <nl> @ Override <nl> public void close ( ) { <nl> - nativeClose ( nativePtr ) ; <nl> + if ( nativePtr ! = 0L ) { <nl> + nativeClose ( nativePtr ) ; <nl> + nativePtr = 0L ; <nl> + } <nl> } <nl> <nl> @ Override
NEAREST DIFF (one line): diff - - git a / realm / src / main / java / io / realm / internal / Table . java b / realm / src / main / java / io / realm / internal / Table . java <nl> index 9d4cb7d . . be2e818 100644 <nl> - - - a / realm / src / main / java / io / realm / internal / Table . java <nl> + + + b / realm / src / main / java / io / realm / internal / Table . java <nl> @ @ - 116 , 19 + 116 , 6 @ @ public class Table implements TableOrView , TableSchema , Closeable { <nl> } <nl> } <nl> <nl> - @ Override <nl> - public void swapPointer ( long newTableViewPointer ) { <nl> - if ( nativePtr ! = 0 ) { <nl> - nativeClose ( nativePtr ) ; <nl> - <nl> - if ( DEBUG ) { <nl> - System . err . println ( " = = = = TableView CLOSE , ptr = " + nativePtr ) ; <nl> - } <nl> - nativePtr = 0 ; <nl> - } <nl> - nativePtr = newTableViewPointer ; <nl> - } <nl> - <nl> protected static native void nativeClose ( long nativeTablePtr ) ; <nl> <nl> @ Override <nl> diff - - git a / realm / src / main / java / io / realm / internal / TableOrView . java b / realm / src / main / java / io / realm / internal / TableOrView . java <nl> index 6276168 . . 4d73211 100644 <nl> - - - a / realm / src / main / java / io / realm / internal / TableOrView . java <nl> + + + b / realm / src / main / java / io / realm / internal / TableOrView . java <nl> @ @ - 37 , 12 + 37 , 6 @ @ public interface TableOrView { <nl> void close ( ) ; <nl> <nl> / * * <nl> - * Replace the existing pointer with the new table view <nl> - * @ param newTableViewPointer native pointer a table view <nl> - * / <nl> - void swapPointer ( long newTableViewPointer ) ; <nl> - <nl> - / * * <nl> * Returns the number of entries of the table / view . <nl> * <nl> * @ return <nl> diff - - git a / realm / src / main / java / io / realm / internal / TableView . java b / realm / src / main / java / io / realm / internal / TableView . java <nl> index 7da13bc . . 94fef87 100644 <nl> - - - a / realm / src / main / java / io / realm / internal / TableView . java <nl> + + + b / realm / src / main / java / io / realm / internal / TableView . java <nl> @ @ - 120 , 19 + 120 , 6 @ @ public class TableView implements TableOrView , Closeable { <nl> } <nl> <nl> @ Override <nl> - public void swapPointer ( long newTableViewPointer ) { <nl> - if ( nativePtr ! = 0 ) { <nl> - nativeClose ( nativePtr ) ; <nl> - <nl> - if ( DEBUG ) { <nl> - System . err . println ( " = = = = TableView CLOSE , ptr = " + nativePtr ) ; <nl> - } <nl> - nativePtr = 0 ; <nl> - } <nl> - nativePtr = newTableViewPointer ; <nl> - } <nl> - <nl> - @ Override <nl> protected void finalize ( ) { <nl> synchronized ( context ) { <nl> if ( nativePtr ! = 0 ) {

TEST DIFF:
diff - - git a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 index 1375b5d . . e23f72e 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 + + + b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 @ @ - 19 , 7 + 19 , 7 @ @ import java . util . LinkedHashSet ; 
 import java . util . Set ; 
 
 class OsRealmObjectSchema extends RealmObjectSchema { 
 - private final long nativePtr ; 
 + private long nativePtr ; 
 
 / * * 
 * Creates a schema object using object store . This constructor is intended to be used by 
 @ @ - 38 , 7 + 38 , 10 @ @ class OsRealmObjectSchema extends RealmObjectSchema { 
 
 @ Override 
 public void close ( ) { 
 - nativeClose ( nativePtr ) ; 
 + if ( nativePtr ! = 0L ) { 
 + nativeClose ( nativePtr ) ; 
 + nativePtr = 0L ; 
 + } 
 } 
 
 @ Override

NEAREST DIFF:
diff - - git a / realm / src / main / java / io / realm / internal / Table . java b / realm / src / main / java / io / realm / internal / Table . java 
 index 9d4cb7d . . be2e818 100644 
 - - - a / realm / src / main / java / io / realm / internal / Table . java 
 + + + b / realm / src / main / java / io / realm / internal / Table . java 
 @ @ - 116 , 19 + 116 , 6 @ @ public class Table implements TableOrView , TableSchema , Closeable { 
 } 
 } 
 
 - @ Override 
 - public void swapPointer ( long newTableViewPointer ) { 
 - if ( nativePtr ! = 0 ) { 
 - nativeClose ( nativePtr ) ; 
 - 
 - if ( DEBUG ) { 
 - System . err . println ( " = = = = TableView CLOSE , ptr = " + nativePtr ) ; 
 - } 
 - nativePtr = 0 ; 
 - } 
 - nativePtr = newTableViewPointer ; 
 - } 
 - 
 protected static native void nativeClose ( long nativeTablePtr ) ; 
 
 @ Override 
 diff - - git a / realm / src / main / java / io / realm / internal / TableOrView . java b / realm / src / main / java / io / realm / internal / TableOrView . java 
 index 6276168 . . 4d73211 100644 
 - - - a / realm / src / main / java / io / realm / internal / TableOrView . java 
 + + + b / realm / src / main / java / io / realm / internal / TableOrView . java 
 @ @ - 37 , 12 + 37 , 6 @ @ public interface TableOrView { 
 void close ( ) ; 
 
 / * * 
 - * Replace the existing pointer with the new table view 
 - * @ param newTableViewPointer native pointer a table view 
 - * / 
 - void swapPointer ( long newTableViewPointer ) ; 
 - 
 - / * * 
 * Returns the number of entries of the table / view . 
 * 
 * @ return 
 diff - - git a / realm / src / main / java / io / realm / internal / TableView . java b / realm / src / main / java / io / realm / internal / TableView . java 
 index 7da13bc . . 94fef87 100644 
 - - - a / realm / src / main / java / io / realm / internal / TableView . java 
 + + + b / realm / src / main / java / io / realm / internal / TableView . java 
 @ @ - 120 , 19 + 120 , 6 @ @ public class TableView implements TableOrView , Closeable { 
 } 
 
 @ Override 
 - public void swapPointer ( long newTableViewPointer ) { 
 - if ( nativePtr ! = 0 ) { 
 - nativeClose ( nativePtr ) ; 
 - 
 - if ( DEBUG ) { 
 - System . err . println ( " = = = = TableView CLOSE , ptr = " + nativePtr ) ; 
 - } 
 - nativePtr = 0 ; 
 - } 
 - nativePtr = newTableViewPointer ; 
 - } 
 - 
 - @ Override 
 protected void finalize ( ) { 
 synchronized ( context ) { 
 if ( nativePtr ! = 0 ) {
