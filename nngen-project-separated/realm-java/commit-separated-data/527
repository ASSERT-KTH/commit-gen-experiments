BLEU SCORE: 0.024367494694068095

TEST MSG: Upgrade to latest version of ObjectStore including Sync
GENERATED MSG: Removing FIXMEs and create them as Github issues .

TEST DIFF (one line): diff - - git a / realm / realm - library / src / main / cpp / CMakeLists . txt b / realm / realm - library / src / main / cpp / CMakeLists . txt <nl> index 8d9ce2b . . 544b5a5 100644 <nl> - - - a / realm / realm - library / src / main / cpp / CMakeLists . txt <nl> + + + b / realm / realm - library / src / main / cpp / CMakeLists . txt <nl> @ @ - 118 , 9 + 118 , 9 @ @ endif ( ) <nl> # ' best . m _ nanoseconds ' was declared here <nl> set ( WARNING _ CXX _ FLAGS " - Wall - Wextra - pedantic - Wno - long - long - Wno - variadic - macros \ <nl> - Wno - missing - field - initializers - Wmissing - declarations - Wno - error = uninitialized - Wno - error = maybe - uninitialized " ) <nl> - set ( REALM _ COMMON _ CXX _ FLAGS " - DREALM _ ANDROID - DREALM _ HAVE _ CONFIG - DPIC - pthread - fvisibility = hidden - std = c + + 14 - fsigned - char " ) <nl> + set ( REALM _ COMMON _ CXX _ FLAGS " - DREALM _ ANDROID - DREALM _ HAVE _ CONFIG - DREALM _ HAVE _ EPOLL - DPIC - pthread - fvisibility = hidden - std = c + + 14 - fsigned - char " ) <nl> if ( build _ SYNC ) <nl> - set ( REALM _ COMMON _ CXX _ FLAGS " $ { REALM _ COMMON _ CXX _ FLAGS } - DREALM _ SYNC " ) <nl> + set ( REALM _ COMMON _ CXX _ FLAGS " $ { REALM _ COMMON _ CXX _ FLAGS } - DREALM _ ENABLE _ SYNC " ) <nl> endif ( ) <nl> # There might be an issue with - Os of ndk gcc 4 . 9 . It will hang the encryption related tests . <nl> # And this issue doesn ' t seem to impact the core compiling . <nl> @ @ - 151 , 24 + 151 , 15 @ @ endif ( ) <nl> <nl> # Object Store source files <nl> file ( GLOB objectstore _ SRC <nl> - " object - store / src / collection _ notifications . cpp " <nl> - " object - store / src / object _ schema . cpp " <nl> - " object - store / src / object _ store . cpp " <nl> - " object - store / src / schema . cpp " <nl> - " object - store / src / index _ set . cpp " <nl> - " object - store / src / shared _ realm . cpp " <nl> - " object - store / src / impl / realm _ coordinator . cpp " <nl> - " object - store / src / impl / collection _ notifier . cpp " <nl> - " object - store / src / impl / collection _ change _ builder . cpp " <nl> - " object - store / src / impl / transact _ log _ handler . cpp " <nl> - " object - store / src / impl / weak _ realm _ notifier . cpp " <nl> - " object - store / src / impl / android / * . cpp " <nl> + " object - store / src / * . cpp " <nl> + " object - store / src / impl / * . cpp " <nl> + " object - store / src / impl / epoll / * . cpp " <nl> " object - store / src / util / * . cpp " ) <nl> + <nl> # Sync needed Object Store files <nl> if ( build _ SYNC ) <nl> file ( GLOB objectstore _ sync _ SRC <nl> - " object - store / src / sync _ manager . cpp " <nl> - " object - store / src / sync _ session . cpp " ) <nl> + " object - store / src / sync / * . cpp " ) <nl> endif ( ) <nl> <nl> add _ library ( realm - jni SHARED $ { jni _ SRC } $ { objectstore _ SRC } $ { objectstore _ sync _ SRC } ) <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp b / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp <nl> index 98649ca . . 9c6f199 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp <nl> @ @ - 43 , 7 + 43 , 7 @ @ Java _ io _ realm _ RealmSchema _ nativeCreateFromList ( JNIEnv * env , jclass , jlongArray o <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> - Java _ io _ realm _ RealmSchema _ nativeClose ( JNIEnv * env , jclass , jlong nativePtr ) { <nl> + Java _ io _ realm _ RealmSchema _ nativeClose ( JNIEnv * , jclass , jlong nativePtr ) { <nl> TR _ ENTER _ PTR ( nativePtr ) <nl> Schema * schema = reinterpret _ cast < Schema * > ( nativePtr ) ; <nl> delete schema ; <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp <nl> index 5207907 . . a704145 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp <nl> @ @ - 223 , 7 + 223 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ LinkView _ nativeRemoveAllTargetRows <nl> } <nl> <nl> JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ LinkView _ nativeGetTargetTable <nl> - ( JNIEnv * env , jobject , jlong nativeLinkViewPtr ) <nl> + ( JNIEnv * , jobject , jlong nativeLinkViewPtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativeLinkViewPtr ) <nl> <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> index 6d200de . . a1d1910 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> @ @ - 1 , 14 + 1 , 14 @ @ <nl> - # include < object - store / src / sync _ manager . hpp > <nl> # include " io _ realm _ internal _ SharedRealm . h " <nl> + # ifdef REALM _ ENABLE _ SYNC <nl> + # include " object - store / src / sync / sync _ manager . hpp " <nl> + # include " object - store / src / sync / sync _ config . hpp " <nl> + # endif <nl> <nl> # include " object _ store . hpp " <nl> # include " shared _ realm . hpp " <nl> <nl> # include " java _ binding _ context . hpp " <nl> # include " util . hpp " <nl> - # ifdef REALM _ SYNC <nl> - # include " sync _ config . hpp " <nl> - # endif <nl> <nl> using namespace realm ; <nl> using namespace realm : : _ impl ; <nl> @ @ - 53 , 11 + 53 , 14 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstri <nl> config - > cache = cache ; <nl> config - > disable _ format _ upgrade = disable _ format _ upgrade ; <nl> config - > automatic _ change _ notifications = auto _ change _ notification ; <nl> - # ifdef REALM _ SYNC <nl> + # ifdef REALM _ ENABLE _ SYNC <nl> if ( sync _ server _ url ) { <nl> JStringAccessor url ( env , sync _ server _ url ) ; <nl> JStringAccessor token ( env , sync _ user _ token ) ; <nl> - config - > sync _ config = std : : make _ shared < SyncConfig > ( token , url , nullptr , SyncSessionStopPolicy : : Immediately ) ; <nl> + / / FIXME : Ignore User token for now . Will be fixed when moving to OS <nl> + / / For now the Java session takes care of users <nl> + config - > sync _ config = std : : make _ shared < SyncConfig > ( nullptr , url , SyncSessionStopPolicy : : Immediately , <nl> + nullptr , nullptr ) ; <nl> / / FIXME : Sync session is handled by java now . Remove this when adapt to OS sync implementation . <nl> config - > sync _ config - > create _ session = false ; <nl> } <nl> @ @ - 69 , 7 + 72 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstri <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> - Java _ io _ realm _ internal _ SharedRealm _ nativeCloseConfig ( JNIEnv * env , jclass , jlong config _ ptr ) <nl> + Java _ io _ realm _ internal _ SharedRealm _ nativeCloseConfig ( JNIEnv * , jclass , jlong config _ ptr ) <nl> { <nl> TR _ ENTER _ PTR ( config _ ptr ) <nl> <nl> @ @ - 94 , 7 + 97 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetSharedRealm ( JNIEnv * env , jclass , jlo <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> - Java _ io _ realm _ internal _ SharedRealm _ nativeCloseSharedRealm ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) <nl> + Java _ io _ realm _ internal _ SharedRealm _ nativeCloseSharedRealm ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) <nl> { <nl> TR _ ENTER _ PTR ( shared _ realm _ ptr ) <nl> <nl> @ @ - 137 , 7 + 140 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCancelTransaction ( JNIEnv * env , jclass , <nl> <nl> <nl> JNIEXPORT jboolean JNICALL <nl> - Java _ io _ realm _ internal _ SharedRealm _ nativeIsInTransaction ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) <nl> + Java _ io _ realm _ internal _ SharedRealm _ nativeIsInTransaction ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) <nl> { <nl> TR _ ENTER _ PTR ( shared _ realm _ ptr ) <nl> <nl> @ @ - 254 , 7 + 257 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersionID ( JNIEnv * env , jclass , jlong <nl> } <nl> <nl> JNIEXPORT jboolean JNICALL <nl> - Java _ io _ realm _ internal _ SharedRealm _ nativeIsClosed ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) <nl> + Java _ io _ realm _ internal _ SharedRealm _ nativeIsClosed ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) <nl> { <nl> TR _ ENTER _ PTR ( shared _ realm _ ptr ) <nl> <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ Table . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ Table . cpp <nl> index 6d1aac6 . . 0981f9f 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ Table . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ Table . cpp <nl> @ @ - 1406 , 7 + 1406 , 7 @ @ JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ Table _ nativeIsValid ( <nl> } <nl> <nl> JNIEXPORT void JNICALL Java _ io _ realm _ internal _ Table _ nativeClose ( <nl> - JNIEnv * env , jclass , jlong nativeTablePtr ) <nl> + JNIEnv * , jclass , jlong nativeTablePtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativeTablePtr ) <nl> LangBindHelper : : unbind _ table _ ptr ( TBL ( nativeTablePtr ) ) ; <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> index b5e89f1 . . 35c1600 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> @ @ - 46 , 7 + 46 , 7 @ @ const char * ERR _ IMPORT _ CLOSED _ REALM = " Can not import results from a closed Real <nl> const char * ERR _ SORT _ NOT _ SUPPORTED = " Sort is not supported on binary data , object references and RealmList " ; <nl> / / - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <nl> <nl> - JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeClose ( JNIEnv * env , jclass , jlong nativeQueryPtr ) { <nl> + JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeClose ( JNIEnv * , jclass , jlong nativeQueryPtr ) { <nl> TR _ ENTER _ PTR ( nativeQueryPtr ) <nl> delete Q ( nativeQueryPtr ) ; <nl> } <nl> @ @ - 1766 , 7 + 1766 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeHandoverQuery <nl> <nl> <nl> JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeCloseQueryHandover <nl> - ( JNIEnv * env , jclass , jlong nativeHandoverQuery ) <nl> + ( JNIEnv * , jclass , jlong nativeHandoverQuery ) <nl> { <nl> TR _ ENTER _ PTR ( nativeHandoverQuery ) <nl> delete HO ( Query , nativeHandoverQuery ) ; <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp <nl> index 6ee249c . . 9e8465c 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp <nl> @ @ - 20 , 7 + 20 , 7 @ @ <nl> using namespace realm ; <nl> <nl> JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnCount <nl> - ( JNIEnv * env , jobject , jlong nativeRowPtr ) <nl> + ( JNIEnv * , jobject , jlong nativeRowPtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> if ( ! ROW ( nativeRowPtr ) - > is _ attached ( ) ) <nl> @ @ - 57 , 7 + 57 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnIndex <nl> } <nl> <nl> JNIEXPORT jint JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnType <nl> - ( JNIEnv * env , jobject , jlong nativeRowPtr , jlong columnIndex ) <nl> + ( JNIEnv * , jobject , jlong nativeRowPtr , jlong columnIndex ) <nl> { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> return static _ cast < jint > ( ROW ( nativeRowPtr ) - > get _ column _ type ( S ( columnIndex ) ) ) ; / / noexcept <nl> @ @ - 329 , 14 + 329 , 14 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeNullifyLink <nl> } <nl> <nl> JNIEXPORT void JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeClose <nl> - ( JNIEnv * env , jclass , jlong nativeRowPtr ) <nl> + ( JNIEnv * , jclass , jlong nativeRowPtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> delete ROW ( nativeRowPtr ) ; <nl> } <nl> <nl> JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeIsAttached <nl> - ( JNIEnv * env , jobject , jlong nativeRowPtr ) <nl> + ( JNIEnv * , jobject , jlong nativeRowPtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> return ROW ( nativeRowPtr ) - > is _ attached ( ) ; <nl> @ @ - 350 , 7 + 350 , 7 @ @ JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeHasColumn <nl> } <nl> <nl> JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeIsNull <nl> - ( JNIEnv * env , jobject , jlong nativeRowPtr , jlong columnIndex ) { <nl> + ( JNIEnv * , jobject , jlong nativeRowPtr , jlong columnIndex ) { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> return ROW ( nativeRowPtr ) - > is _ null ( columnIndex ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / cpp / object - store b / realm / realm - library / src / main / cpp / object - store <nl> index bafafb1 . . 094cbdd 160000 <nl> - - - a / realm / realm - library / src / main / cpp / object - store <nl> + + + b / realm / realm - library / src / main / cpp / object - store <nl> @ @ - 1 + 1 @ @ <nl> - Subproject commit bafafb1464494d0a731a036399aa5c944d92a5bf <nl> + Subproject commit 094cbdd336462fa40ade11536497022f7722ca24 <nl> diff - - git a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> index 1253f53 . . 75d7a38 100644 <nl> - - - a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> + + + b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> @ @ - 24 , 7 + 24 , 7 @ @ <nl> # include < realm / sync / client . hpp > <nl> # include < realm / util / logger . hpp > <nl> # include < object - store / src / impl / realm _ coordinator . hpp > <nl> - # include < object - store / src / sync _ manager . hpp > <nl> + # include < object - store / src / sync / sync _ manager . hpp > <nl> <nl> # include " util . hpp " <nl>
NEAREST DIFF (one line): diff - - git a / realm / config / findbugs / findbugs - filter . xml b / realm / config / findbugs / findbugs - filter . xml <nl> index 2911aec . . e2c1a8b 100644 <nl> - - - a / realm / config / findbugs / findbugs - filter . xml <nl> + + + b / realm / config / findbugs / findbugs - filter . xml <nl> @ @ - 32 , 6 + 32 , 11 @ @ <nl> < Field name = " APP _ ID " / > <nl> < Bug pattern = " MS _ SHOULD _ BE _ FINAL " / > <nl> < / Match > <nl> + < Match > <nl> + < Class name = " io . realm . SyncManager " / > <nl> + < Field name = " APP _ ID " / > <nl> + < Bug pattern = " MS _ CANNOT _ BE _ FINAL " / > <nl> + < / Match > <nl> <nl> < ! - - Unit tests - - > <nl> < Match > <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> index 00c0b93 . . 1792920 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> @ @ - 154 , 8 + 154 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersion ( JNIEnv * env , jclass , jlong s <nl> return static _ cast < jlong > ( ObjectStore : : get _ schema _ version ( shared _ realm - > read _ group ( ) ) ) ; <nl> } CATCH _ STD ( ) <nl> <nl> - / / FIXME : Use constant value <nl> - return - 1 ; <nl> + return static _ cast < jlong > ( ObjectStore : : NotVersioned ) ; <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> diff - - git a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> index 7d9d824 . . d066d36 100644 <nl> - - - a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> + + + b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> @ @ - 30 , 14 + 30 , 13 @ @ <nl> <nl> <nl> / / Wrapper class for realm : : Session . This allows us to manage the C + + session and callback lifecycle correctly . <nl> - / / TODO Use OS SyncSession instead <nl> + / / TODO Use OS SyncSession instead - https : / / github . com / realm / realm - java - private / issues / 123 <nl> class JniSession { <nl> <nl> public : <nl> JniSession ( ) = delete ; <nl> JniSession ( JNIEnv * env , std : : string local _ realm _ path , jobject java _ session _ obj ) <nl> { <nl> - / / FIXME : This doesn ' t look good . Temp solution before moving to OS sync . <nl> extern std : : unique _ ptr < realm : : sync : : Client > sync _ client ; <nl> / / Get the coordinator for the given path , or null if there is none <nl> m _ sync _ session = new realm : : sync : : Session ( * sync _ client , local _ realm _ path ) ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java b / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java <nl> index b3f881b . . 8e2ddc2 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java <nl> @ @ - 28 , 7 + 28 , 6 @ @ import io . realm . log . RealmLog ; <nl> / * * <nl> * Implementation of { @ link RealmNotifier } for Android based on { @ link Handler } . <nl> * / <nl> - / / FIXME : Please move me to the io . realm . internal when HandlerController is there . <nl> class AndroidNotifier implements RealmNotifier { <nl> private Handler handler ; <nl> <nl> @ @ - 66 , 7 + 65 , 7 @ @ class AndroidNotifier implements RealmNotifier { <nl> <nl> / / This is called by OS when other thread / process changes the Realm . <nl> / / This is getting called on the same thread which created the Realm . <nl> - / / FIXME : The whole calling routine is twisted and needs to be rewritten in the near future . <nl> + / / https : / / github . com / realm / realm - java - private / issues / 127 <nl> / / | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | <nl> / / | Thread A | Thread B | Daemon Thread | <nl> / / | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / BaseRealm . java b / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> index 2836c6c . . e4b8fae 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> @ @ - 61 , 7 + 61 , 7 @ @ public abstract class BaseRealm implements Closeable { <nl> " Changing Realm data can only be done from inside a transaction . " ; <nl> <nl> / / Thread pool for all async operations ( Query & transaction ) <nl> - public volatile static Context applicationContext ; / / FIXME Make package protected once all sync code moves to io . realm <nl> + public volatile static Context applicationContext ; <nl> <nl> / / Thread pool for all async operations ( Query & transaction ) <nl> static final RealmThreadPoolExecutor asyncTaskExecutor = RealmThreadPoolExecutor . newDefaultExecutor ( ) ; <nl> @ @ - 583 , 7 + 583 , 7 @ @ public abstract class BaseRealm implements Closeable { <nl> * @ return { @ code true } if compaction succeeded , { @ code false } otherwise . <nl> * / <nl> static boolean compactRealm ( final RealmConfiguration configuration ) { <nl> - / / FIXME : Move this check to OS ? <nl> + / / https : / / github . com / realm / realm - java / issues / 1033 <nl> if ( configuration . getEncryptionKey ( ) ! = null ) { <nl> throw new IllegalArgumentException ( " Cannot currently compact an encrypted Realm . " ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java b / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java <nl> index cc2809d . . e2733a7 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java <nl> @ @ - 16 , 7 + 16 , 6 @ @ <nl> <nl> package io . realm ; <nl> <nl> - import java . util . concurrent . ExecutorService ; <nl> import java . util . concurrent . Future ; <nl> import java . util . concurrent . ThreadPoolExecutor ; <nl> <nl> @ @ - 32 , 7 + 31 , 6 @ @ public final class RealmAsyncTask { <nl> private final ThreadPoolExecutor service ; <nl> private volatile boolean isCancelled = false ; <nl> <nl> - / / FIXME This shouldn ' t be public <nl> public RealmAsyncTask ( Future < ? > pendingTask , ThreadPoolExecutor service ) { <nl> this . pendingTask = pendingTask ; <nl> this . service = service ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java <nl> index 8c7e6b0 . . 9e92389 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java <nl> @ @ - 154 , 7 + 154 , 6 @ @ public final class RealmObjectSchema { <nl> realm . checkNotInSync ( ) ; / / renaming a table is not permitted <nl> checkEmpty ( className ) ; <nl> String internalTableName = Table . TABLE _ PREFIX + className ; <nl> - / / FIXME : when core implements class name length check , please remove . <nl> if ( internalTableName . length ( ) > Table . TABLE _ MAX _ LENGTH ) { <nl> throw new IllegalArgumentException ( " Class name is to long . Limit is 56 characters : \ ' " + className + " \ ' ( " + Integer . toString ( className . length ( ) ) + " ) " ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / SyncManager . java b / realm / realm - library / src / main / java / io / realm / SyncManager . java <nl> index 41d8ca5 . . ca496ef 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / SyncManager . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / SyncManager . java <nl> @ @ - 226 , 7 + 226 , 6 @ @ public final class SyncManager { <nl> * Sets the log level for the underlying <nl> * @ param logLevel <nl> * / <nl> - / / FIXME Remove from the public API . This is controlled by Logger # minimumNativeLogLevel <nl> public static void setLogLevel ( int logLevel ) { <nl> nativeSetSyncClientLogLevel ( logLevel ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java b / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java <nl> index d1cdd84 . . 3218dc7 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java <nl> @ @ - 68 , 12 + 68 , 12 @ @ public class OkHttpAuthenticationServer implements AuthenticationServer { <nl> <nl> @ Override <nl> public RefreshResponse refresh ( String token , URL authenticationUrl ) { <nl> - throw new UnsupportedOperationException ( " FIXME " ) ; <nl> + throw new UnsupportedOperationException ( " Not yet implemented " ) ; <nl> } <nl> <nl> @ Override <nl> public LogoutResponse logout ( User user , URL authenticationUrl ) { <nl> - throw new UnsupportedOperationException ( " FIXME " ) ; <nl> + throw new UnsupportedOperationException ( " Not yet implemented " ) ; <nl> } <nl> <nl> private AuthenticateResponse authenticate ( URL authenticationUrl , String requestBody ) throws Exception { <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java b / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java <nl> index 0c88d0b . . 2455972 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java <nl> @ @ - 22 , 7 + 22 , 6 @ @ import okhttp3 . Response ; <nl> public class RefreshResponse extends AuthServerResponse { <nl> <nl> public RefreshResponse ( Response response ) { <nl> - / / FIXME Parse refresh result <nl> } <nl> <nl> public Token getRefreshToken ( ) { <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / log / RealmLog . java b / realm / realm - library / src / main / java / io / realm / log / RealmLog . java <nl> index 6389196 . . f831732 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / log / RealmLog . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / log / RealmLog . java <nl> @ @ - 21 , 8 + 21 , 6 @ @ import java . util . List ; <nl> <nl> import io . realm . internal . Keep ; <nl> import io . realm . internal . Util ; <nl> - import io . realm . SyncManager ; <nl> - import io . realm . internal . ObjectServerFacade ; <nl> <nl> / * * <nl> * Global logger used by all Realm components . <nl> @ @ - 59 , 7 + 57 , 6 @ @ public final class RealmLog { <nl> <nl> private static void setMinimumNativeDebugLevel ( int nativeDebugLevel ) { <nl> minimumNativeLogLevel = nativeDebugLevel ; <nl> - / / FIXME : Use same log level setting for normal Realm and Sync Realm . <nl> Util . setDebugLevel ( nativeDebugLevel ) ; / / Log level for Realm Core <nl> } <nl>

TEST DIFF:
diff - - git a / realm / realm - library / src / main / cpp / CMakeLists . txt b / realm / realm - library / src / main / cpp / CMakeLists . txt 
 index 8d9ce2b . . 544b5a5 100644 
 - - - a / realm / realm - library / src / main / cpp / CMakeLists . txt 
 + + + b / realm / realm - library / src / main / cpp / CMakeLists . txt 
 @ @ - 118 , 9 + 118 , 9 @ @ endif ( ) 
 # ' best . m _ nanoseconds ' was declared here 
 set ( WARNING _ CXX _ FLAGS " - Wall - Wextra - pedantic - Wno - long - long - Wno - variadic - macros \ 
 - Wno - missing - field - initializers - Wmissing - declarations - Wno - error = uninitialized - Wno - error = maybe - uninitialized " ) 
 - set ( REALM _ COMMON _ CXX _ FLAGS " - DREALM _ ANDROID - DREALM _ HAVE _ CONFIG - DPIC - pthread - fvisibility = hidden - std = c + + 14 - fsigned - char " ) 
 + set ( REALM _ COMMON _ CXX _ FLAGS " - DREALM _ ANDROID - DREALM _ HAVE _ CONFIG - DREALM _ HAVE _ EPOLL - DPIC - pthread - fvisibility = hidden - std = c + + 14 - fsigned - char " ) 
 if ( build _ SYNC ) 
 - set ( REALM _ COMMON _ CXX _ FLAGS " $ { REALM _ COMMON _ CXX _ FLAGS } - DREALM _ SYNC " ) 
 + set ( REALM _ COMMON _ CXX _ FLAGS " $ { REALM _ COMMON _ CXX _ FLAGS } - DREALM _ ENABLE _ SYNC " ) 
 endif ( ) 
 # There might be an issue with - Os of ndk gcc 4 . 9 . It will hang the encryption related tests . 
 # And this issue doesn ' t seem to impact the core compiling . 
 @ @ - 151 , 24 + 151 , 15 @ @ endif ( ) 
 
 # Object Store source files 
 file ( GLOB objectstore _ SRC 
 - " object - store / src / collection _ notifications . cpp " 
 - " object - store / src / object _ schema . cpp " 
 - " object - store / src / object _ store . cpp " 
 - " object - store / src / schema . cpp " 
 - " object - store / src / index _ set . cpp " 
 - " object - store / src / shared _ realm . cpp " 
 - " object - store / src / impl / realm _ coordinator . cpp " 
 - " object - store / src / impl / collection _ notifier . cpp " 
 - " object - store / src / impl / collection _ change _ builder . cpp " 
 - " object - store / src / impl / transact _ log _ handler . cpp " 
 - " object - store / src / impl / weak _ realm _ notifier . cpp " 
 - " object - store / src / impl / android / * . cpp " 
 + " object - store / src / * . cpp " 
 + " object - store / src / impl / * . cpp " 
 + " object - store / src / impl / epoll / * . cpp " 
 " object - store / src / util / * . cpp " ) 
 + 
 # Sync needed Object Store files 
 if ( build _ SYNC ) 
 file ( GLOB objectstore _ sync _ SRC 
 - " object - store / src / sync _ manager . cpp " 
 - " object - store / src / sync _ session . cpp " ) 
 + " object - store / src / sync / * . cpp " ) 
 endif ( ) 
 
 add _ library ( realm - jni SHARED $ { jni _ SRC } $ { objectstore _ SRC } $ { objectstore _ sync _ SRC } ) 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp b / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp 
 index 98649ca . . 9c6f199 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp 
 @ @ - 43 , 7 + 43 , 7 @ @ Java _ io _ realm _ RealmSchema _ nativeCreateFromList ( JNIEnv * env , jclass , jlongArray o 
 } 
 
 JNIEXPORT void JNICALL 
 - Java _ io _ realm _ RealmSchema _ nativeClose ( JNIEnv * env , jclass , jlong nativePtr ) { 
 + Java _ io _ realm _ RealmSchema _ nativeClose ( JNIEnv * , jclass , jlong nativePtr ) { 
 TR _ ENTER _ PTR ( nativePtr ) 
 Schema * schema = reinterpret _ cast < Schema * > ( nativePtr ) ; 
 delete schema ; 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp 
 index 5207907 . . a704145 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp 
 @ @ - 223 , 7 + 223 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ LinkView _ nativeRemoveAllTargetRows 
 } 
 
 JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ LinkView _ nativeGetTargetTable 
 - ( JNIEnv * env , jobject , jlong nativeLinkViewPtr ) 
 + ( JNIEnv * , jobject , jlong nativeLinkViewPtr ) 
 { 
 TR _ ENTER _ PTR ( nativeLinkViewPtr ) 
 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 index 6d200de . . a1d1910 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 @ @ - 1 , 14 + 1 , 14 @ @ 
 - # include < object - store / src / sync _ manager . hpp > 
 # include " io _ realm _ internal _ SharedRealm . h " 
 + # ifdef REALM _ ENABLE _ SYNC 
 + # include " object - store / src / sync / sync _ manager . hpp " 
 + # include " object - store / src / sync / sync _ config . hpp " 
 + # endif 
 
 # include " object _ store . hpp " 
 # include " shared _ realm . hpp " 
 
 # include " java _ binding _ context . hpp " 
 # include " util . hpp " 
 - # ifdef REALM _ SYNC 
 - # include " sync _ config . hpp " 
 - # endif 
 
 using namespace realm ; 
 using namespace realm : : _ impl ; 
 @ @ - 53 , 11 + 53 , 14 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstri 
 config - > cache = cache ; 
 config - > disable _ format _ upgrade = disable _ format _ upgrade ; 
 config - > automatic _ change _ notifications = auto _ change _ notification ; 
 - # ifdef REALM _ SYNC 
 + # ifdef REALM _ ENABLE _ SYNC 
 if ( sync _ server _ url ) { 
 JStringAccessor url ( env , sync _ server _ url ) ; 
 JStringAccessor token ( env , sync _ user _ token ) ; 
 - config - > sync _ config = std : : make _ shared < SyncConfig > ( token , url , nullptr , SyncSessionStopPolicy : : Immediately ) ; 
 + / / FIXME : Ignore User token for now . Will be fixed when moving to OS 
 + / / For now the Java session takes care of users 
 + config - > sync _ config = std : : make _ shared < SyncConfig > ( nullptr , url , SyncSessionStopPolicy : : Immediately , 
 + nullptr , nullptr ) ; 
 / / FIXME : Sync session is handled by java now . Remove this when adapt to OS sync implementation . 
 config - > sync _ config - > create _ session = false ; 
 } 
 @ @ - 69 , 7 + 72 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstri 
 } 
 
 JNIEXPORT void JNICALL 
 - Java _ io _ realm _ internal _ SharedRealm _ nativeCloseConfig ( JNIEnv * env , jclass , jlong config _ ptr ) 
 + Java _ io _ realm _ internal _ SharedRealm _ nativeCloseConfig ( JNIEnv * , jclass , jlong config _ ptr ) 
 { 
 TR _ ENTER _ PTR ( config _ ptr ) 
 
 @ @ - 94 , 7 + 97 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetSharedRealm ( JNIEnv * env , jclass , jlo 
 } 
 
 JNIEXPORT void JNICALL 
 - Java _ io _ realm _ internal _ SharedRealm _ nativeCloseSharedRealm ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) 
 + Java _ io _ realm _ internal _ SharedRealm _ nativeCloseSharedRealm ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) 
 { 
 TR _ ENTER _ PTR ( shared _ realm _ ptr ) 
 
 @ @ - 137 , 7 + 140 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCancelTransaction ( JNIEnv * env , jclass , 
 
 
 JNIEXPORT jboolean JNICALL 
 - Java _ io _ realm _ internal _ SharedRealm _ nativeIsInTransaction ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) 
 + Java _ io _ realm _ internal _ SharedRealm _ nativeIsInTransaction ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) 
 { 
 TR _ ENTER _ PTR ( shared _ realm _ ptr ) 
 
 @ @ - 254 , 7 + 257 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersionID ( JNIEnv * env , jclass , jlong 
 } 
 
 JNIEXPORT jboolean JNICALL 
 - Java _ io _ realm _ internal _ SharedRealm _ nativeIsClosed ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) 
 + Java _ io _ realm _ internal _ SharedRealm _ nativeIsClosed ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) 
 { 
 TR _ ENTER _ PTR ( shared _ realm _ ptr ) 
 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ Table . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ Table . cpp 
 index 6d1aac6 . . 0981f9f 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ Table . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ Table . cpp 
 @ @ - 1406 , 7 + 1406 , 7 @ @ JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ Table _ nativeIsValid ( 
 } 
 
 JNIEXPORT void JNICALL Java _ io _ realm _ internal _ Table _ nativeClose ( 
 - JNIEnv * env , jclass , jlong nativeTablePtr ) 
 + JNIEnv * , jclass , jlong nativeTablePtr ) 
 { 
 TR _ ENTER _ PTR ( nativeTablePtr ) 
 LangBindHelper : : unbind _ table _ ptr ( TBL ( nativeTablePtr ) ) ; 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 index b5e89f1 . . 35c1600 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 @ @ - 46 , 7 + 46 , 7 @ @ const char * ERR _ IMPORT _ CLOSED _ REALM = " Can not import results from a closed Real 
 const char * ERR _ SORT _ NOT _ SUPPORTED = " Sort is not supported on binary data , object references and RealmList " ; 
 / / - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
 
 - JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeClose ( JNIEnv * env , jclass , jlong nativeQueryPtr ) { 
 + JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeClose ( JNIEnv * , jclass , jlong nativeQueryPtr ) { 
 TR _ ENTER _ PTR ( nativeQueryPtr ) 
 delete Q ( nativeQueryPtr ) ; 
 } 
 @ @ - 1766 , 7 + 1766 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeHandoverQuery 
 
 
 JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeCloseQueryHandover 
 - ( JNIEnv * env , jclass , jlong nativeHandoverQuery ) 
 + ( JNIEnv * , jclass , jlong nativeHandoverQuery ) 
 { 
 TR _ ENTER _ PTR ( nativeHandoverQuery ) 
 delete HO ( Query , nativeHandoverQuery ) ; 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp 
 index 6ee249c . . 9e8465c 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp 
 @ @ - 20 , 7 + 20 , 7 @ @ 
 using namespace realm ; 
 
 JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnCount 
 - ( JNIEnv * env , jobject , jlong nativeRowPtr ) 
 + ( JNIEnv * , jobject , jlong nativeRowPtr ) 
 { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 if ( ! ROW ( nativeRowPtr ) - > is _ attached ( ) ) 
 @ @ - 57 , 7 + 57 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnIndex 
 } 
 
 JNIEXPORT jint JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnType 
 - ( JNIEnv * env , jobject , jlong nativeRowPtr , jlong columnIndex ) 
 + ( JNIEnv * , jobject , jlong nativeRowPtr , jlong columnIndex ) 
 { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 return static _ cast < jint > ( ROW ( nativeRowPtr ) - > get _ column _ type ( S ( columnIndex ) ) ) ; / / noexcept 
 @ @ - 329 , 14 + 329 , 14 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeNullifyLink 
 } 
 
 JNIEXPORT void JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeClose 
 - ( JNIEnv * env , jclass , jlong nativeRowPtr ) 
 + ( JNIEnv * , jclass , jlong nativeRowPtr ) 
 { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 delete ROW ( nativeRowPtr ) ; 
 } 
 
 JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeIsAttached 
 - ( JNIEnv * env , jobject , jlong nativeRowPtr ) 
 + ( JNIEnv * , jobject , jlong nativeRowPtr ) 
 { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 return ROW ( nativeRowPtr ) - > is _ attached ( ) ; 
 @ @ - 350 , 7 + 350 , 7 @ @ JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeHasColumn 
 } 
 
 JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeIsNull 
 - ( JNIEnv * env , jobject , jlong nativeRowPtr , jlong columnIndex ) { 
 + ( JNIEnv * , jobject , jlong nativeRowPtr , jlong columnIndex ) { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 return ROW ( nativeRowPtr ) - > is _ null ( columnIndex ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / cpp / object - store b / realm / realm - library / src / main / cpp / object - store 
 index bafafb1 . . 094cbdd 160000 
 - - - a / realm / realm - library / src / main / cpp / object - store 
 + + + b / realm / realm - library / src / main / cpp / object - store 
 @ @ - 1 + 1 @ @ 
 - Subproject commit bafafb1464494d0a731a036399aa5c944d92a5bf 
 + Subproject commit 094cbdd336462fa40ade11536497022f7722ca24 
 diff - - git a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 index 1253f53 . . 75d7a38 100644 
 - - - a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 + + + b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 @ @ - 24 , 7 + 24 , 7 @ @ 
 # include < realm / sync / client . hpp > 
 # include < realm / util / logger . hpp > 
 # include < object - store / src / impl / realm _ coordinator . hpp > 
 - # include < object - store / src / sync _ manager . hpp > 
 + # include < object - store / src / sync / sync _ manager . hpp > 
 
 # include " util . hpp " 


NEAREST DIFF:
diff - - git a / realm / config / findbugs / findbugs - filter . xml b / realm / config / findbugs / findbugs - filter . xml 
 index 2911aec . . e2c1a8b 100644 
 - - - a / realm / config / findbugs / findbugs - filter . xml 
 + + + b / realm / config / findbugs / findbugs - filter . xml 
 @ @ - 32 , 6 + 32 , 11 @ @ 
 < Field name = " APP _ ID " / > 
 < Bug pattern = " MS _ SHOULD _ BE _ FINAL " / > 
 < / Match > 
 + < Match > 
 + < Class name = " io . realm . SyncManager " / > 
 + < Field name = " APP _ ID " / > 
 + < Bug pattern = " MS _ CANNOT _ BE _ FINAL " / > 
 + < / Match > 
 
 < ! - - Unit tests - - > 
 < Match > 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 index 00c0b93 . . 1792920 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 @ @ - 154 , 8 + 154 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersion ( JNIEnv * env , jclass , jlong s 
 return static _ cast < jlong > ( ObjectStore : : get _ schema _ version ( shared _ realm - > read _ group ( ) ) ) ; 
 } CATCH _ STD ( ) 
 
 - / / FIXME : Use constant value 
 - return - 1 ; 
 + return static _ cast < jlong > ( ObjectStore : : NotVersioned ) ; 
 } 
 
 JNIEXPORT void JNICALL 
 diff - - git a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 index 7d9d824 . . d066d36 100644 
 - - - a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 + + + b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 @ @ - 30 , 14 + 30 , 13 @ @ 
 
 
 / / Wrapper class for realm : : Session . This allows us to manage the C + + session and callback lifecycle correctly . 
 - / / TODO Use OS SyncSession instead 
 + / / TODO Use OS SyncSession instead - https : / / github . com / realm / realm - java - private / issues / 123 
 class JniSession { 
 
 public : 
 JniSession ( ) = delete ; 
 JniSession ( JNIEnv * env , std : : string local _ realm _ path , jobject java _ session _ obj ) 
 { 
 - / / FIXME : This doesn ' t look good . Temp solution before moving to OS sync . 
 extern std : : unique _ ptr < realm : : sync : : Client > sync _ client ; 
 / / Get the coordinator for the given path , or null if there is none 
 m _ sync _ session = new realm : : sync : : Session ( * sync _ client , local _ realm _ path ) ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java b / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java 
 index b3f881b . . 8e2ddc2 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java 
 + + + b / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java 
 @ @ - 28 , 7 + 28 , 6 @ @ import io . realm . log . RealmLog ; 
 / * * 
 * Implementation of { @ link RealmNotifier } for Android based on { @ link Handler } . 
 * / 
 - / / FIXME : Please move me to the io . realm . internal when HandlerController is there . 
 class AndroidNotifier implements RealmNotifier { 
 private Handler handler ; 
 
 @ @ - 66 , 7 + 65 , 7 @ @ class AndroidNotifier implements RealmNotifier { 
 
 / / This is called by OS when other thread / process changes the Realm . 
 / / This is getting called on the same thread which created the Realm . 
 - / / FIXME : The whole calling routine is twisted and needs to be rewritten in the near future . 
 + / / https : / / github . com / realm / realm - java - private / issues / 127 
 / / | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | 
 / / | Thread A | Thread B | Daemon Thread | 
 / / | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | 
 diff - - git a / realm / realm - library / src / main / java / io / realm / BaseRealm . java b / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 index 2836c6c . . e4b8fae 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 @ @ - 61 , 7 + 61 , 7 @ @ public abstract class BaseRealm implements Closeable { 
 " Changing Realm data can only be done from inside a transaction . " ; 
 
 / / Thread pool for all async operations ( Query & transaction ) 
 - public volatile static Context applicationContext ; / / FIXME Make package protected once all sync code moves to io . realm 
 + public volatile static Context applicationContext ; 
 
 / / Thread pool for all async operations ( Query & transaction ) 
 static final RealmThreadPoolExecutor asyncTaskExecutor = RealmThreadPoolExecutor . newDefaultExecutor ( ) ; 
 @ @ - 583 , 7 + 583 , 7 @ @ public abstract class BaseRealm implements Closeable { 
 * @ return { @ code true } if compaction succeeded , { @ code false } otherwise . 
 * / 
 static boolean compactRealm ( final RealmConfiguration configuration ) { 
 - / / FIXME : Move this check to OS ? 
 + / / https : / / github . com / realm / realm - java / issues / 1033 
 if ( configuration . getEncryptionKey ( ) ! = null ) { 
 throw new IllegalArgumentException ( " Cannot currently compact an encrypted Realm . " ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java b / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java 
 index cc2809d . . e2733a7 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java 
 @ @ - 16 , 7 + 16 , 6 @ @ 
 
 package io . realm ; 
 
 - import java . util . concurrent . ExecutorService ; 
 import java . util . concurrent . Future ; 
 import java . util . concurrent . ThreadPoolExecutor ; 
 
 @ @ - 32 , 7 + 31 , 6 @ @ public final class RealmAsyncTask { 
 private final ThreadPoolExecutor service ; 
 private volatile boolean isCancelled = false ; 
 
 - / / FIXME This shouldn ' t be public 
 public RealmAsyncTask ( Future < ? > pendingTask , ThreadPoolExecutor service ) { 
 this . pendingTask = pendingTask ; 
 this . service = service ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java 
 index 8c7e6b0 . . 9e92389 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java 
 @ @ - 154 , 7 + 154 , 6 @ @ public final class RealmObjectSchema { 
 realm . checkNotInSync ( ) ; / / renaming a table is not permitted 
 checkEmpty ( className ) ; 
 String internalTableName = Table . TABLE _ PREFIX + className ; 
 - / / FIXME : when core implements class name length check , please remove . 
 if ( internalTableName . length ( ) > Table . TABLE _ MAX _ LENGTH ) { 
 throw new IllegalArgumentException ( " Class name is to long . Limit is 56 characters : \ ' " + className + " \ ' ( " + Integer . toString ( className . length ( ) ) + " ) " ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / SyncManager . java b / realm / realm - library / src / main / java / io / realm / SyncManager . java 
 index 41d8ca5 . . ca496ef 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / SyncManager . java 
 + + + b / realm / realm - library / src / main / java / io / realm / SyncManager . java 
 @ @ - 226 , 7 + 226 , 6 @ @ public final class SyncManager { 
 * Sets the log level for the underlying 
 * @ param logLevel 
 * / 
 - / / FIXME Remove from the public API . This is controlled by Logger # minimumNativeLogLevel 
 public static void setLogLevel ( int logLevel ) { 
 nativeSetSyncClientLogLevel ( logLevel ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java b / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java 
 index d1cdd84 . . 3218dc7 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java 
 @ @ - 68 , 12 + 68 , 12 @ @ public class OkHttpAuthenticationServer implements AuthenticationServer { 
 
 @ Override 
 public RefreshResponse refresh ( String token , URL authenticationUrl ) { 
 - throw new UnsupportedOperationException ( " FIXME " ) ; 
 + throw new UnsupportedOperationException ( " Not yet implemented " ) ; 
 } 
 
 @ Override 
 public LogoutResponse logout ( User user , URL authenticationUrl ) { 
 - throw new UnsupportedOperationException ( " FIXME " ) ; 
 + throw new UnsupportedOperationException ( " Not yet implemented " ) ; 
 } 
 
 private AuthenticateResponse authenticate ( URL authenticationUrl , String requestBody ) throws Exception { 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java b / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java 
 index 0c88d0b . . 2455972 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java 
 @ @ - 22 , 7 + 22 , 6 @ @ import okhttp3 . Response ; 
 public class RefreshResponse extends AuthServerResponse { 
 
 public RefreshResponse ( Response response ) { 
 - / / FIXME Parse refresh result 
 } 
 
 public Token getRefreshToken ( ) { 
 diff - - git a / realm / realm - library / src / main / java / io / realm / log / RealmLog . java b / realm / realm - library / src / main / java / io / realm / log / RealmLog . java 
 index 6389196 . . f831732 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / log / RealmLog . java 
 + + + b / realm / realm - library / src / main / java / io / realm / log / RealmLog . java 
 @ @ - 21 , 8 + 21 , 6 @ @ import java . util . List ; 
 
 import io . realm . internal . Keep ; 
 import io . realm . internal . Util ; 
 - import io . realm . SyncManager ; 
 - import io . realm . internal . ObjectServerFacade ; 
 
 / * * 
 * Global logger used by all Realm components . 
 @ @ - 59 , 7 + 57 , 6 @ @ public final class RealmLog { 
 
 private static void setMinimumNativeDebugLevel ( int nativeDebugLevel ) { 
 minimumNativeLogLevel = nativeDebugLevel ; 
 - / / FIXME : Use same log level setting for normal Realm and Sync Realm . 
 Util . setDebugLevel ( nativeDebugLevel ) ; / / Log level for Realm Core 
 } 

