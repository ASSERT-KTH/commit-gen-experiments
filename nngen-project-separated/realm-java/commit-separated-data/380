BLEU SCORE: 0.2259005009024612

TEST MSG: stabilize flaky test
GENERATED MSG: Remove realmListenerAddedAfterCommit

TEST DIFF (one line): diff - - git a / realm / realm - library / src / androidTest / java / io / realm / TypeBasedNotificationsTests . java b / realm / realm - library / src / androidTest / java / io / realm / TypeBasedNotificationsTests . java <nl> index 54fb152 . . a5ddaaf 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / TypeBasedNotificationsTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / TypeBasedNotificationsTests . java <nl> @ @ - 1053 , 23 + 1053 , 24 @ @ public class TypeBasedNotificationsTests { <nl> public void multiple _ callbacks _ should _ be _ invoked _ realmresults _ async ( ) { <nl> final int NUMBER _ OF _ LISTENERS = 7 ; <nl> final Realm realm = looperThread . realm ; <nl> + <nl> + realm . beginTransaction ( ) ; <nl> + Dog akamaru = realm . createObject ( Dog . class ) ; <nl> + realm . commitTransaction ( ) ; <nl> + <nl> realm . addChangeListener ( new RealmChangeListener < Realm > ( ) { <nl> @ Override <nl> public void onChange ( Realm object ) { <nl> - looperThread . postRunnable ( new Runnable ( ) { <nl> + looperThread . postRunnableDelayed ( new Runnable ( ) { <nl> @ Override <nl> public void run ( ) { <nl> assertEquals ( NUMBER _ OF _ LISTENERS , typebasedCommitInvocations . get ( ) ) ; <nl> looperThread . testComplete ( ) ; <nl> } <nl> - } ) ; <nl> + } , 100L / * wait for listeners in RealmResults . Next run loop is not enough . * / ) ; <nl> } <nl> } ) ; <nl> <nl> - realm . beginTransaction ( ) ; <nl> - Dog akamaru = realm . createObject ( Dog . class ) ; <nl> - realm . commitTransaction ( ) ; <nl> - <nl> RealmResults < Dog > dogs = realm . where ( Dog . class ) . findAllAsync ( ) ; <nl> assertTrue ( dogs . load ( ) ) ; <nl>
NEAREST DIFF (one line): diff - - git a / realm / realm - library / src / androidTest / java / io / realm / NotificationsTest . java b / realm / realm - library / src / androidTest / java / io / realm / NotificationsTest . java <nl> index 315fdfb . . 49a4539 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / NotificationsTest . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / NotificationsTest . java <nl> @ @ - 797 , 21 + 797 , 6 @ @ public class NotificationsTest { <nl> <nl> @ Test <nl> @ RunTestInLooperThread <nl> - public void realmListenerAddedAfterCommit ( ) { <nl> - Realm realm = looperThread . realm ; <nl> - realm . beginTransaction ( ) ; <nl> - realm . commitTransaction ( ) ; <nl> - <nl> - realm . addChangeListener ( new RealmChangeListener < Realm > ( ) { <nl> - @ Override <nl> - public void onChange ( Realm object ) { <nl> - looperThread . testComplete ( ) ; <nl> - } <nl> - } ) ; <nl> - } <nl> - <nl> - @ Test <nl> - @ RunTestInLooperThread <nl> public void realmResultsListenerAddedAfterCommit ( ) { <nl> Realm realm = looperThread . realm ; <nl> RealmResults < AllTypes > results = realm . where ( AllTypes . class ) . findAll ( ) ;

TEST DIFF:
diff - - git a / realm / realm - library / src / androidTest / java / io / realm / TypeBasedNotificationsTests . java b / realm / realm - library / src / androidTest / java / io / realm / TypeBasedNotificationsTests . java 
 index 54fb152 . . a5ddaaf 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / TypeBasedNotificationsTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / TypeBasedNotificationsTests . java 
 @ @ - 1053 , 23 + 1053 , 24 @ @ public class TypeBasedNotificationsTests { 
 public void multiple _ callbacks _ should _ be _ invoked _ realmresults _ async ( ) { 
 final int NUMBER _ OF _ LISTENERS = 7 ; 
 final Realm realm = looperThread . realm ; 
 + 
 + realm . beginTransaction ( ) ; 
 + Dog akamaru = realm . createObject ( Dog . class ) ; 
 + realm . commitTransaction ( ) ; 
 + 
 realm . addChangeListener ( new RealmChangeListener < Realm > ( ) { 
 @ Override 
 public void onChange ( Realm object ) { 
 - looperThread . postRunnable ( new Runnable ( ) { 
 + looperThread . postRunnableDelayed ( new Runnable ( ) { 
 @ Override 
 public void run ( ) { 
 assertEquals ( NUMBER _ OF _ LISTENERS , typebasedCommitInvocations . get ( ) ) ; 
 looperThread . testComplete ( ) ; 
 } 
 - } ) ; 
 + } , 100L / * wait for listeners in RealmResults . Next run loop is not enough . * / ) ; 
 } 
 } ) ; 
 
 - realm . beginTransaction ( ) ; 
 - Dog akamaru = realm . createObject ( Dog . class ) ; 
 - realm . commitTransaction ( ) ; 
 - 
 RealmResults < Dog > dogs = realm . where ( Dog . class ) . findAllAsync ( ) ; 
 assertTrue ( dogs . load ( ) ) ; 


NEAREST DIFF:
diff - - git a / realm / realm - library / src / androidTest / java / io / realm / NotificationsTest . java b / realm / realm - library / src / androidTest / java / io / realm / NotificationsTest . java 
 index 315fdfb . . 49a4539 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / NotificationsTest . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / NotificationsTest . java 
 @ @ - 797 , 21 + 797 , 6 @ @ public class NotificationsTest { 
 
 @ Test 
 @ RunTestInLooperThread 
 - public void realmListenerAddedAfterCommit ( ) { 
 - Realm realm = looperThread . realm ; 
 - realm . beginTransaction ( ) ; 
 - realm . commitTransaction ( ) ; 
 - 
 - realm . addChangeListener ( new RealmChangeListener < Realm > ( ) { 
 - @ Override 
 - public void onChange ( Realm object ) { 
 - looperThread . testComplete ( ) ; 
 - } 
 - } ) ; 
 - } 
 - 
 - @ Test 
 - @ RunTestInLooperThread 
 public void realmResultsListenerAddedAfterCommit ( ) { 
 Realm realm = looperThread . realm ; 
 RealmResults < AllTypes > results = realm . where ( AllTypes . class ) . findAll ( ) ;
