BLEU SCORE: 0.027611988917697356

TEST MSG: Enable work - around for failing permission tests
GENERATED MSG: Disabling sync / compact combo

TEST DIFF (one line): diff - - git a / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java b / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java <nl> index 70e76c7 . . dce0526 100644 <nl> - - - a / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java <nl> + + + b / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java <nl> @ @ - 1205 , 11 + 1205 , 24 @ @ public class PermissionManagerTests extends StandardIntegrationTest { <nl> * states and fail if neither of these can be verified . <nl> * / <nl> private void assertInitialPermissions ( RealmResults < Permission > permissions ) { <nl> - assertEquals ( " Could not find _ _ permissions Realm " , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ permission " ) . count ( ) ) ; <nl> - assertEquals ( " Could not find _ _ management Realm " , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ management " ) . count ( ) ) ; <nl> + assertGreaterThan ( " Unexpected count ( ) for _ _ permission Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 0 , permissions . where ( ) . endsWith ( " path " , " _ _ permission " ) . count ( ) ) ; <nl> + assertGreaterThan ( " Unexpected count ( ) for _ _ management Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 0 , permissions . where ( ) . endsWith ( " path " , " _ _ management " ) . count ( ) ) ; <nl> + / / FIXME : Enable these again when https : / / github . com / realm / ros / issues / 549 is fixed <nl> + / / assertEquals ( " Unexpected count ( ) for _ _ permission Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ permission " ) . count ( ) ) ; <nl> + / / assertEquals ( " Unexpected count ( ) for _ _ management Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ management " ) . count ( ) ) ; <nl> } <nl> <nl> private void assertInitialDefaultPermissions ( RealmResults < Permission > permissions ) { <nl> - assertEquals ( " Could not find _ _ wildcardpermissions Realm " , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ wildcardpermissions " ) . count ( ) ) ; <nl> + assertGreaterThan ( " Unexpected count ( ) for _ _ wildcardpermissions Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 0 , permissions . where ( ) . endsWith ( " path " , " _ _ wildcardpermissions " ) . count ( ) ) ; <nl> + <nl> + / / FIXME : Enable these again when https : / / github . com / realm / ros / issues / 549 is fixed <nl> + / / assertEquals ( " Unexpected count ( ) for _ _ wildcardpermissions Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ wildcardpermissions " ) . count ( ) ) ; <nl> + } <nl> + <nl> + private void assertGreaterThan ( String error , int base , long count ) { <nl> + if ( count < = base ) { <nl> + throw new AssertionError ( error ) ; <nl> + } <nl> } <nl> + <nl> }
NEAREST DIFF (one line): diff - - git a / CHANGELOG . md b / CHANGELOG . md <nl> index 58be2af . . afd128c 100644 <nl> - - - a / CHANGELOG . md <nl> + + + b / CHANGELOG . md <nl> @ @ - 1 , 5 + 1 , 9 @ @ <nl> # # 2 . 2 . 2 <nl> <nl> + # # # Object Server API Changes ( In Beta ) <nl> + <nl> + * Disabled ` Realm . compactRealm ( ) ` when sync is enabled as it might corrupt the Realm ( https : / / github . com / realm / realm - core / issues / 2345 ) . <nl> + <nl> # # # Enhancements <nl> <nl> * All major public classes are now non - final . This is mostly a compromise to <nl> diff - - git a / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java b / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java <nl> index 17b734f . . 938fe33 100644 <nl> - - - a / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java <nl> + + + b / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java <nl> @ @ - 401 , 4 + 401 , 14 @ @ public class SyncConfigurationTests { <nl> String configStr = config . toString ( ) ; <nl> assertTrue ( configStr ! = null & & ! configStr . isEmpty ( ) ) ; <nl> } <nl> + <nl> + / / FIXME : This test can be removed when https : / / github . com / realm / realm - core / issues / 2345 is resolved <nl> + @ Test ( expected = UnsupportedOperationException . class ) <nl> + public void compact _ NotAllowed ( ) { <nl> + SyncUser user = createTestUser ( ) ; <nl> + String url = " realm : / / objectserver . realm . io / default " ; <nl> + SyncConfiguration config = new SyncConfiguration . Builder ( user , url ) . build ( ) ; <nl> + <nl> + Realm . compactRealm ( config ) ; <nl> + } <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / Realm . java b / realm / realm - library / src / main / java / io / realm / Realm . java <nl> index f74055d . . 81c4bde 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / Realm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / Realm . java <nl> @ @ - 1555 , 10 + 1555 , 13 @ @ public class Realm extends BaseRealm { <nl> * <nl> * @ param configuration a { @ link RealmConfiguration } pointing to a Realm file . <nl> * @ return { @ code true } if successful , { @ code false } if any file operation failed . <nl> - * @ throws IllegalArgumentException if the realm file is encrypted . Compacting an encrypted Realm file is not <nl> - * supported yet . <nl> + * @ throws UnsupportedOperationException if Realm is synchronized . <nl> * / <nl> public static boolean compactRealm ( RealmConfiguration configuration ) { <nl> + / / FIXME : remove this restriction when https : / / github . com / realm / realm - core / issues / 2345 is resolved <nl> + if ( configuration . isSyncConfiguration ( ) ) { <nl> + throw new UnsupportedOperationException ( " Compacting is not supported yet on synced Realms . See https : / / github . com / realm / realm - core / issues / 2345 " ) ; <nl> + } <nl> return BaseRealm . compactRealm ( configuration ) ; <nl> } <nl>

TEST DIFF:
diff - - git a / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java b / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java 
 index 70e76c7 . . dce0526 100644 
 - - - a / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java 
 + + + b / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java 
 @ @ - 1205 , 11 + 1205 , 24 @ @ public class PermissionManagerTests extends StandardIntegrationTest { 
 * states and fail if neither of these can be verified . 
 * / 
 private void assertInitialPermissions ( RealmResults < Permission > permissions ) { 
 - assertEquals ( " Could not find _ _ permissions Realm " , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ permission " ) . count ( ) ) ; 
 - assertEquals ( " Could not find _ _ management Realm " , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ management " ) . count ( ) ) ; 
 + assertGreaterThan ( " Unexpected count ( ) for _ _ permission Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 0 , permissions . where ( ) . endsWith ( " path " , " _ _ permission " ) . count ( ) ) ; 
 + assertGreaterThan ( " Unexpected count ( ) for _ _ management Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 0 , permissions . where ( ) . endsWith ( " path " , " _ _ management " ) . count ( ) ) ; 
 + / / FIXME : Enable these again when https : / / github . com / realm / ros / issues / 549 is fixed 
 + / / assertEquals ( " Unexpected count ( ) for _ _ permission Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ permission " ) . count ( ) ) ; 
 + / / assertEquals ( " Unexpected count ( ) for _ _ management Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ management " ) . count ( ) ) ; 
 } 
 
 private void assertInitialDefaultPermissions ( RealmResults < Permission > permissions ) { 
 - assertEquals ( " Could not find _ _ wildcardpermissions Realm " , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ wildcardpermissions " ) . count ( ) ) ; 
 + assertGreaterThan ( " Unexpected count ( ) for _ _ wildcardpermissions Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 0 , permissions . where ( ) . endsWith ( " path " , " _ _ wildcardpermissions " ) . count ( ) ) ; 
 + 
 + / / FIXME : Enable these again when https : / / github . com / realm / ros / issues / 549 is fixed 
 + / / assertEquals ( " Unexpected count ( ) for _ _ wildcardpermissions Realm : " + Arrays . toString ( permissions . toArray ( ) ) , 1 , permissions . where ( ) . endsWith ( " path " , " _ _ wildcardpermissions " ) . count ( ) ) ; 
 + } 
 + 
 + private void assertGreaterThan ( String error , int base , long count ) { 
 + if ( count < = base ) { 
 + throw new AssertionError ( error ) ; 
 + } 
 } 
 + 
 }

NEAREST DIFF:
diff - - git a / CHANGELOG . md b / CHANGELOG . md 
 index 58be2af . . afd128c 100644 
 - - - a / CHANGELOG . md 
 + + + b / CHANGELOG . md 
 @ @ - 1 , 5 + 1 , 9 @ @ 
 # # 2 . 2 . 2 
 
 + # # # Object Server API Changes ( In Beta ) 
 + 
 + * Disabled ` Realm . compactRealm ( ) ` when sync is enabled as it might corrupt the Realm ( https : / / github . com / realm / realm - core / issues / 2345 ) . 
 + 
 # # # Enhancements 
 
 * All major public classes are now non - final . This is mostly a compromise to 
 diff - - git a / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java b / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java 
 index 17b734f . . 938fe33 100644 
 - - - a / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java 
 + + + b / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java 
 @ @ - 401 , 4 + 401 , 14 @ @ public class SyncConfigurationTests { 
 String configStr = config . toString ( ) ; 
 assertTrue ( configStr ! = null & & ! configStr . isEmpty ( ) ) ; 
 } 
 + 
 + / / FIXME : This test can be removed when https : / / github . com / realm / realm - core / issues / 2345 is resolved 
 + @ Test ( expected = UnsupportedOperationException . class ) 
 + public void compact _ NotAllowed ( ) { 
 + SyncUser user = createTestUser ( ) ; 
 + String url = " realm : / / objectserver . realm . io / default " ; 
 + SyncConfiguration config = new SyncConfiguration . Builder ( user , url ) . build ( ) ; 
 + 
 + Realm . compactRealm ( config ) ; 
 + } 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / Realm . java b / realm / realm - library / src / main / java / io / realm / Realm . java 
 index f74055d . . 81c4bde 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / Realm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / Realm . java 
 @ @ - 1555 , 10 + 1555 , 13 @ @ public class Realm extends BaseRealm { 
 * 
 * @ param configuration a { @ link RealmConfiguration } pointing to a Realm file . 
 * @ return { @ code true } if successful , { @ code false } if any file operation failed . 
 - * @ throws IllegalArgumentException if the realm file is encrypted . Compacting an encrypted Realm file is not 
 - * supported yet . 
 + * @ throws UnsupportedOperationException if Realm is synchronized . 
 * / 
 public static boolean compactRealm ( RealmConfiguration configuration ) { 
 + / / FIXME : remove this restriction when https : / / github . com / realm / realm - core / issues / 2345 is resolved 
 + if ( configuration . isSyncConfiguration ( ) ) { 
 + throw new UnsupportedOperationException ( " Compacting is not supported yet on synced Realms . See https : / / github . com / realm / realm - core / issues / 2345 " ) ; 
 + } 
 return BaseRealm . compactRealm ( configuration ) ; 
 } 

