BLEU SCORE: 0.00915781944436709

TEST MSG: Add dropdown
GENERATED MSG: Added example project + unit tests for ignored properties .

TEST DIFF (one line): diff - - git a / examples / newsreaderExample / src / debug / AndroidManifest . xml b / examples / newsreaderExample / src / debug / AndroidManifest . xml <nl> new file mode 100644 <nl> index 0000000 . . d044658 <nl> - - - / dev / null <nl> + + + b / examples / newsreaderExample / src / debug / AndroidManifest . xml <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < manifest package = " io . realm . examples . newsreader " <nl> + xmlns : android = " http : / / schemas . android . com / apk / res / android " > <nl> + <nl> + < application android : name = " . DebugNewsReaderApplication " / > <nl> + < / manifest > <nl> diff - - git a / examples / newsreaderExample / src / debug / java / AndroidManifest . xml b / examples / newsreaderExample / src / debug / java / AndroidManifest . xml <nl> deleted file mode 100644 <nl> index d044658 . . 0000000 <nl> - - - a / examples / newsreaderExample / src / debug / java / AndroidManifest . xml <nl> + + + / dev / null <nl> @ @ - 1 , 6 + 0 , 0 @ @ <nl> - < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> - < manifest package = " io . realm . examples . newsreader " <nl> - xmlns : android = " http : / / schemas . android . com / apk / res / android " > <nl> - <nl> - < application android : name = " . DebugNewsReaderApplication " / > <nl> - < / manifest > <nl> diff - - git a / examples / newsreaderExample / src / main / AndroidManifest . xml b / examples / newsreaderExample / src / main / AndroidManifest . xml <nl> index 342ec43 . . c45071e 100644 <nl> - - - a / examples / newsreaderExample / src / main / AndroidManifest . xml <nl> + + + b / examples / newsreaderExample / src / main / AndroidManifest . xml <nl> @ @ - 9 , 7 + 9 , 6 @ @ <nl> android : icon = " @ mipmap / ic _ launcher " <nl> android : label = " @ string / app _ name " <nl> android : supportsRtl = " true " <nl> - android : name = " . NewsReaderApplication " <nl> android : theme = " @ style / AppTheme . NoActionBar " > <nl> < activity <nl> android : name = " . ui . main . MainActivity " <nl> diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Model . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Model . java <nl> index 18e465e . . bb92937 100644 <nl> - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Model . java <nl> + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Model . java <nl> @ @ - 16 , 8 + 16 , 14 @ @ <nl> <nl> package io . realm . examples . newsreader . model ; <nl> <nl> + import android . support . annotation . NonNull ; <nl> import android . text . TextUtils ; <nl> <nl> + import java . util . HashMap ; <nl> + import java . util . List ; <nl> + import java . util . Map ; <nl> + import java . util . Set ; <nl> + <nl> import io . realm . RealmResults ; <nl> import io . realm . examples . newsreader . model . entity . NYTimesStory ; <nl> import rx . Observable ; <nl> @ @ - 28 , 8 + 34 , 34 @ @ import rx . functions . Func1 ; <nl> * / <nl> public class Model { <nl> <nl> + / * * <nl> + * Map between section titles and their NYTimes API keys <nl> + * / <nl> + private static final Map < String , String > sections ; <nl> + static { <nl> + sections = new HashMap < > ( ) ; <nl> + sections . put ( " Home " , " home " ) ; <nl> + sections . put ( " World " , " world " ) ; <nl> + sections . put ( " National " , " national " ) ; <nl> + sections . put ( " Politics " , " politics " ) ; <nl> + sections . put ( " NY Region " , " nyregion " ) ; <nl> + sections . put ( " Business " , " business " ) ; <nl> + sections . put ( " Opinion " , " opinion " ) ; <nl> + sections . put ( " Technology " , " technology " ) ; <nl> + sections . put ( " Science " , " science " ) ; <nl> + sections . put ( " Health " , " health " ) ; <nl> + sections . put ( " Sports " , " sports " ) ; <nl> + sections . put ( " Arts " , " arts " ) ; <nl> + sections . put ( " Fashion " , " fashion " ) ; <nl> + sections . put ( " Dining " , " dining " ) ; <nl> + sections . put ( " Travel " , " travel " ) ; <nl> + sections . put ( " Magazine " , " magazine " ) ; <nl> + sections . put ( " Real Estate " , " realestate " ) ; <nl> + } <nl> + <nl> private static Model instance = null ; <nl> private final Repository repository ; <nl> + private String selectedSection ; <nl> <nl> / / This could be replaced by Dependency Injection for easier testing <nl> public static synchronized Model getInstance ( ) { <nl> @ @ - 42 , 6 + 74 , 7 @ @ public class Model { <nl> <nl> private Model ( Repository repository ) { <nl> this . repository = repository ; <nl> + this . selectedSection = " home " ; <nl> } <nl> <nl> / * * <nl> @ @ - 91 , 6 + 124 , 17 @ @ public class Model { <nl> } ) ; <nl> } <nl> <nl> + / * * <nl> + * Returns all sections available <nl> + * / <nl> + public Map < String , String > getSections ( ) { <nl> + return sections ; <nl> + } <nl> + <nl> + public void selectSection ( @ NonNull String key ) { <nl> + selectedSection = key ; <nl> + repository . loadNewsFeed ( selectedSection ) ; <nl> + } <nl> <nl> @ Override <nl> protected void finalize ( ) throws Throwable { <nl> diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Repository . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Repository . java <nl> index ebaa6fa . . 5d992d8 100644 <nl> - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Repository . java <nl> + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Repository . java <nl> @ @ - 89 , 6 + 89 , 10 @ @ public class Repository implements Closeable { <nl> } ) ; <nl> } <nl> <nl> + public void loadNewsFeed ( String section ) { <nl> + <nl> + } <nl> + <nl> private long timeSinceLastNetworkRequest ( ) { <nl> return TimeUnit . SECONDS . convert ( System . currentTimeMillis ( ) - lastNetworkRequest , TimeUnit . MILLISECONDS ) ; <nl> } <nl> @ @ - 133 , 4 + 137 , 5 @ @ public class Repository implements Closeable { <nl> public void close ( ) { <nl> realm . close ( ) ; <nl> } <nl> + <nl> } <nl> diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / network / NYTimesDataLoader . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / network / NYTimesDataLoader . java <nl> index 43654e6 . . e3fe89a 100644 <nl> - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / network / NYTimesDataLoader . java <nl> + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / network / NYTimesDataLoader . java <nl> @ @ - 40 , 7 + 40 , 7 @ @ import timber . log . Timber ; <nl> * / <nl> public class NYTimesDataLoader { <nl> <nl> - String [ ] nytSections = new String [ ] { <nl> + String [ ] nytSections = { <nl> " home " , <nl> " world " , <nl> " national " , <nl> @ @ - 62 , 7 + 62 , 7 @ @ public class NYTimesDataLoader { <nl> <nl> private NYTimesService nyTimesService ; <nl> private SimpleDateFormat inputDateFormat = new SimpleDateFormat ( " yyyy - MM - d ' T ' HH : mm : ssZZZZZ " , Locale . US ) ; <nl> - private SimpleDateFormat outputDateFormat = new SimpleDateFormat ( " MM - dd - yyyy " , Locale . US ) ; <nl> + private SimpleDateFormat outputDateFormat = new SimpleDateFormat ( " MM - dd - yyyy " , Locale . US ) ; <nl> private String apiKey ; <nl> private Realm realm ; <nl> private BehaviorSubject < Boolean > networkInUse ; <nl> diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainActivity . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainActivity . java <nl> index a95cece . . 7992eca 100644 <nl> - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainActivity . java <nl> + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainActivity . java <nl> @ @ - 27 , 7 + 27 , 7 @ @ import android . view . ViewGroup ; <nl> import android . widget . AdapterView ; <nl> import android . widget . ArrayAdapter ; <nl> import android . widget . ListView ; <nl> - import android . widget . ProgressBar ; <nl> + import android . widget . Spinner ; <nl> import android . widget . TextView ; <nl> <nl> import java . util . List ; <nl> @ @ - 44 , 8 + 44 , 10 @ @ public class MainActivity extends AppCompatActivity { <nl> @ Bind ( R . id . refresh _ view ) SwipeRefreshLayout refreshView ; <nl> @ Bind ( R . id . list _ view ) ListView listView ; <nl> @ Bind ( R . id . progressbar ) MaterialProgressBar progressBar ; <nl> + @ Bind ( R . id . spinner ) Spinner spinner ; <nl> <nl> MainPresenter presenter = new MainPresenter ( this , Model . getInstance ( ) ) ; <nl> + private Toolbar toolbar ; <nl> private ArrayAdapter < NYTimesStory > adapter ; <nl> <nl> @ Override <nl> @ @ - 54 , 10 + 56 , 10 @ @ public class MainActivity extends AppCompatActivity { <nl> <nl> / / Setup initial views <nl> setContentView ( R . layout . activity _ main ) ; <nl> - <nl> ButterKnife . bind ( this ) ; <nl> - Toolbar toolbar = ( Toolbar ) findViewById ( R . id . toolbar ) ; <nl> + toolbar = ( Toolbar ) findViewById ( R . id . toolbar ) ; <nl> setSupportActionBar ( toolbar ) ; <nl> + getSupportActionBar ( ) . setDisplayShowTitleEnabled ( false ) ; <nl> <nl> adapter = null ; <nl> listView . setOnItemClickListener ( new AdapterView . OnItemClickListener ( ) { <nl> @ @ - 80 , 6 + 82 , 27 @ @ public class MainActivity extends AppCompatActivity { <nl> presenter . onCreate ( ) ; <nl> } <nl> <nl> + / * * <nl> + * Setup the toolbar spinner with the available sections <nl> + * @ param sections <nl> + * / <nl> + public void configureToolbar ( List < String > sections ) { <nl> + String [ ] sectionList = sections . toArray ( new String [ sections . size ( ) ] ) ; <nl> + final ArrayAdapter adapter = new ArrayAdapter < CharSequence > ( getApplicationContext ( ) , android . R . layout . simple _ spinner _ dropdown _ item , sectionList ) ; <nl> + spinner . setAdapter ( adapter ) ; <nl> + spinner . setOnItemSelectedListener ( new AdapterView . OnItemSelectedListener ( ) { <nl> + @ Override <nl> + public void onItemSelected ( AdapterView < ? > parent , View view , int position , long id ) { <nl> + presenter . categorySelected ( ( String ) adapter . getItem ( position ) ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onNothingSelected ( AdapterView < ? > parent ) { <nl> + <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> @ Override <nl> protected void onResume ( ) { <nl> super . onResume ( ) ; <nl> diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainPresenter . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainPresenter . java <nl> index 28d4347 . . bece8bc 100644 <nl> - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainPresenter . java <nl> + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainPresenter . java <nl> @ @ - 17 , 8 + 17 , 15 @ @ <nl> package io . realm . examples . newsreader . ui . main ; <nl> <nl> import android . content . Intent ; <nl> + import android . support . annotation . NonNull ; <nl> <nl> + import java . util . ArrayList ; <nl> + import java . util . Arrays ; <nl> + import java . util . Collection ; <nl> + import java . util . Collections ; <nl> + import java . util . Comparator ; <nl> import java . util . List ; <nl> + import java . util . Map ; <nl> <nl> import io . realm . examples . newsreader . model . Model ; <nl> import io . realm . examples . newsreader . model . entity . NYTimesStory ; <nl> @ @ - 37 , 6 + 44 , 7 @ @ public class MainPresenter implements Presenter { <nl> private final Model model ; <nl> private List < NYTimesStory > storiesData ; <nl> private CompositeSubscription subscriptions ; <nl> + private Map < String , String > sections ; <nl> <nl> public MainPresenter ( MainActivity mainActivity , Model model ) { <nl> this . view = mainActivity ; <nl> @ @ - 45 , 7 + 53 , 20 @ @ public class MainPresenter implements Presenter { <nl> <nl> @ Override <nl> public void onCreate ( ) { <nl> - / / Do nothing <nl> + sections = model . getSections ( ) ; <nl> + <nl> + / / Sort sections alphabetically , but always have Home at the top <nl> + List < String > sectionList = new ArrayList < > ( sections . keySet ( ) ) ; <nl> + Collections . sort ( sectionList , new Comparator < String > ( ) { <nl> + @ Override <nl> + public int compare ( String lhs , String rhs ) { <nl> + if ( lhs . equals ( " Home " ) ) return - 1 ; <nl> + if ( rhs . equals ( " Home " ) ) return 1 ; <nl> + return lhs . compareToIgnoreCase ( rhs ) ; <nl> + } <nl> + } ) ; <nl> + view . configureToolbar ( sectionList ) ; <nl> + categorySelected ( sectionList . get ( 0 ) ) ; <nl> } <nl> <nl> @ Override <nl> @ @ - 89 , 4 + 110 , 9 @ @ public class MainPresenter implements Presenter { <nl> Intent intent = DetailsActivity . getIntent ( view , storiesData . get ( position ) ) ; <nl> view . startActivity ( intent ) ; <nl> } <nl> + <nl> + public void categorySelected ( @ NonNull String categoryLabel ) { <nl> + String key = sections . get ( categoryLabel ) ; <nl> + model . selectSection ( key ) ; <nl> + } <nl> } <nl> diff - - git a / examples / newsreaderExample / src / main / res / layout / activity _ main . xml b / examples / newsreaderExample / src / main / res / layout / activity _ main . xml <nl> index eea1138 . . fa54dd9 100644 <nl> - - - a / examples / newsreaderExample / src / main / res / layout / activity _ main . xml <nl> + + + b / examples / newsreaderExample / src / main / res / layout / activity _ main . xml <nl> @ @ - 18 , 7 + 18 , 15 @ @ <nl> android : layout _ width = " match _ parent " <nl> android : layout _ height = " ? attr / actionBarSize " <nl> android : background = " ? attr / colorPrimary " <nl> - app : popupTheme = " @ style / AppTheme . PopupOverlay " / > <nl> + app : popupTheme = " @ style / AppTheme . PopupOverlay " > <nl> + <nl> + < Spinner <nl> + android : id = " @ + id / spinner " <nl> + <nl> + android : layout _ width = " wrap _ content " <nl> + android : layout _ height = " wrap _ content " / > <nl> + <nl> + < / android . support . v7 . widget . Toolbar > <nl> <nl> < me . zhanghai . android . materialprogressbar . MaterialProgressBar <nl> android : id = " @ + id / progressbar " <nl> diff - - git a / examples / newsreaderExample / src / main / res / layout / spinner _ dropdown _ item . xml b / examples / newsreaderExample / src / main / res / layout / spinner _ dropdown _ item . xml <nl> new file mode 100644 <nl> index 0000000 . . 814c750 <nl> - - - / dev / null <nl> + + + b / examples / newsreaderExample / src / main / res / layout / spinner _ dropdown _ item . xml <nl> @ @ - 0 , 0 + 1 , 8 @ @ <nl> + < CheckedTextView xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + android : id = " @ android : id / text1 " <nl> + style = " ? android : attr / spinnerDropDownItemStyle " <nl> + android : singleLine = " true " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " ? android : attr / listPreferredItemHeight " <nl> + android : ellipsize = " marquee " <nl> + android : textColor = " ? android : attr / textColorSecondary " / > <nl> diff - - git a / examples / newsreaderExample / src / main / res / values / colors . xml b / examples / newsreaderExample / src / main / res / values / colors . xml <nl> index 3ab3e9c . . 90781a8 100644 <nl> - - - a / examples / newsreaderExample / src / main / res / values / colors . xml <nl> + + + b / examples / newsreaderExample / src / main / res / values / colors . xml <nl> @ @ - 3 , 4 + 3 , 5 @ @ <nl> < color name = " colorPrimary " > # 3F51B5 < / color > <nl> < color name = " colorPrimaryDark " > # 303F9F < / color > <nl> < color name = " colorAccent " > # FF4081 < / color > <nl> + < color name = " white " > # ffffff < / color > <nl> < / resources >
NEAREST DIFF (one line): diff - - git a / . gitignore b / . gitignore <nl> index acec2b9 . . 5af6c9c 100644 <nl> - - - a / . gitignore <nl> + + + b / . gitignore <nl> @ @ - 22 , 6 + 22 , 7 @ @ core - * <nl> * / . DS _ Store <nl> <nl> # JNI libs <nl> + realm _ version _ check . timestamp <nl> / realm / src / main / jniLibs <nl> <nl> # Build artifacts <nl> @ @ - 44 , 3 + 45 , 4 @ @ distribution / version . txt <nl> distribution / RealmGridViewExample / app / src <nl> distribution / RealmIntroExample / app / src <nl> distribution / RealmMigrationExample / app / src <nl> + <nl> diff - - git a / examples / jsonImportExample / . gitignore b / examples / jsonImportExample / . gitignore <nl> new file mode 100644 <nl> index 0000000 . . 796b96d <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / . gitignore <nl> @ @ - 0 , 0 + 1 @ @ <nl> + / build <nl> diff - - git a / examples / jsonImportExample / build . gradle b / examples / jsonImportExample / build . gradle <nl> new file mode 100644 <nl> index 0000000 . . 1f5f413 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / build . gradle <nl> @ @ - 0 , 0 + 1 , 28 @ @ <nl> + apply plugin : ' com . android . application ' <nl> + <nl> + android { <nl> + compileSdkVersion 19 <nl> + buildToolsVersion " 20 . 0 . 0 " <nl> + defaultConfig { <nl> + applicationId ' io . realm . examples . jsonimport ' <nl> + minSdkVersion 15 <nl> + targetSdkVersion 19 <nl> + versionCode 1 <nl> + versionName " 1 . 0 " <nl> + } <nl> + buildTypes { <nl> + release { <nl> + runProguard false <nl> + } <nl> + } <nl> + productFlavors { <nl> + } <nl> + } <nl> + <nl> + tasks . preBuild { <nl> + dependsOn " : realm : androidJar " <nl> + } <nl> + <nl> + dependencies { <nl> + compile files ( " . . / . . / realm / build / libs / realm - $ { version } . jar " ) <nl> + } <nl> diff - - git a / examples / jsonImportExample / proguard - rules . pro b / examples / jsonImportExample / proguard - rules . pro <nl> new file mode 100644 <nl> index 0000000 . . 200fdff <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / proguard - rules . pro <nl> @ @ - 0 , 0 + 1 , 17 @ @ <nl> + # Add project specific ProGuard rules here . <nl> + # By default , the flags in this file are appended to flags specified <nl> + # in / usr / local / Cellar / android - sdk / 22 . 6 . 2 / tools / proguard / proguard - android . txt <nl> + # You can edit the include path and order by changing the proguardFiles <nl> + # directive in build . gradle . <nl> + # <nl> + # For more details , see <nl> + # http : / / developer . android . com / guide / developing / tools / proguard . html <nl> + <nl> + # Add any project specific keep options here : <nl> + <nl> + # If your project uses WebView with JS , uncomment the following <nl> + # and specify the fully qualified class name to the JavaScript interface <nl> + # class : <nl> + # - keepclassmembers class fqcn . of . javascript . interface . for . webview { <nl> + # public * ; <nl> + # } <nl> diff - - git a / examples / jsonImportExample / src / main / AndroidManifest . xml b / examples / jsonImportExample / src / main / AndroidManifest . xml <nl> new file mode 100644 <nl> index 0000000 . . e561523 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / AndroidManifest . xml <nl> @ @ - 0 , 0 + 1 , 21 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + package = " io . realm . examples . realmgridview " > <nl> + <nl> + < application <nl> + android : allowBackup = " true " <nl> + android : icon = " @ drawable / ic _ launcher " <nl> + android : label = " @ string / app _ name " <nl> + android : theme = " @ style / AppTheme " > <nl> + < activity <nl> + android : name = " . RealmJsonExampleActivity " <nl> + android : configChanges = " keyboard | screenSize | orientation " <nl> + android : label = " @ string / app _ name " > <nl> + < intent - filter > <nl> + < action android : name = " android . intent . action . MAIN " / > <nl> + < category android : name = " android . intent . category . LAUNCHER " / > <nl> + < / intent - filter > <nl> + < / activity > <nl> + < / application > <nl> + <nl> + < / manifest > <nl> diff - - git a / examples / jsonImportExample / src / main / assets / cities . json b / examples / jsonImportExample / src / main / assets / cities . json <nl> new file mode 100644 <nl> index 0000000 . . db4e522 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / assets / cities . json <nl> @ @ - 0 , 0 + 1 , 64 @ @ <nl> + [ <nl> + { " name " : " Barcelona " , <nl> + " votes " : 23 } , <nl> + <nl> + { " name " : " San Francisco " , <nl> + " votes " : 21 } , <nl> + <nl> + { " name " : " Venice " , <nl> + " votes " : 19 } , <nl> + <nl> + { " name " : " Melbourne " , <nl> + " votes " : 18 } , <nl> + <nl> + { " name " : " Paris " , <nl> + " votes " : 17 } , <nl> + <nl> + { " name " : " Seville " , <nl> + " votes " : 14 } , <nl> + <nl> + { " name " : " Sydney " , <nl> + " votes " : 12 } , <nl> + <nl> + { " name " : " New York " , <nl> + " votes " : 11 } , <nl> + <nl> + { " name " : " Krakow " , <nl> + " votes " : 9 } , <nl> + <nl> + { " name " : " Peoria " , <nl> + " votes " : 72 } , <nl> + <nl> + { " name " : " Springfield " , <nl> + " votes " : 88 } , <nl> + <nl> + { " name " : " Kansas City " , <nl> + " votes " : 100 } , <nl> + <nl> + { " name " : " Tokyo " , <nl> + " votes " : 20 } , <nl> + <nl> + { " name " : " Boise " , <nl> + " votes " : 17 } , <nl> + <nl> + { " name " : " Los Angeles " , <nl> + " votes " : 14 } , <nl> + <nl> + { " name " : " Newark " , <nl> + " votes " : 12 } , <nl> + <nl> + { " name " : " Chicago " , <nl> + " votes " : 11 } , <nl> + <nl> + { " name " : " Detroit " , <nl> + " votes " : 91 } , <nl> + <nl> + { " name " : " Florence " , <nl> + " votes " : 4 } , <nl> + <nl> + { " name " : " Madrid " , <nl> + " votes " : 1 } , <nl> + <nl> + { " name " : " London " , <nl> + " votes " : 9 } <nl> + ] <nl> \ No newline at end of file <nl> diff - - git a / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / City . java b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / City . java <nl> new file mode 100644 <nl> index 0000000 . . f0aec3c <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / City . java <nl> @ @ - 0 , 0 + 1 , 42 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . realmgridview ; <nl> + <nl> + import io . realm . RealmObject ; <nl> + <nl> + public class City extends RealmObject { <nl> + <nl> + private String name ; <nl> + private long votes ; <nl> + <nl> + public String getName ( ) { <nl> + return name ; <nl> + } <nl> + <nl> + public void setName ( String name ) { <nl> + this . name = name ; <nl> + } <nl> + <nl> + public long getVotes ( ) { <nl> + return votes ; <nl> + } <nl> + <nl> + public void setVotes ( long votes ) { <nl> + this . votes = votes ; <nl> + } <nl> + <nl> + } <nl> diff - - git a / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / CityAdapter . java b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / CityAdapter . java <nl> new file mode 100644 <nl> index 0000000 . . 1b5050a <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / CityAdapter . java <nl> @ @ - 0 , 0 + 1 , 86 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . realmgridview ; <nl> + <nl> + import android . content . Context ; <nl> + import android . view . LayoutInflater ; <nl> + import android . view . View ; <nl> + import android . view . ViewGroup ; <nl> + import android . widget . BaseAdapter ; <nl> + import android . widget . TextView ; <nl> + <nl> + import java . util . List ; <nl> + <nl> + / / This adapter is strictly to interface with the GridView and doesn ' t <nl> + / / particular show much interesting Realm functionality . <nl> + <nl> + / / Alternatively from this example , <nl> + / / a developer could update the getView ( ) to pull items from the Realm . <nl> + <nl> + public class CityAdapter extends BaseAdapter { <nl> + <nl> + public static final String TAG = RealmJsonExampleActivity . class . getName ( ) ; <nl> + <nl> + private LayoutInflater inflater ; <nl> + <nl> + private List < City > cities = null ; <nl> + <nl> + public CityAdapter ( Context context ) { <nl> + inflater = ( LayoutInflater ) context . getSystemService ( Context . LAYOUT _ INFLATER _ SERVICE ) ; <nl> + } <nl> + <nl> + public void setData ( List < City > details ) { <nl> + this . cities = details ; <nl> + } <nl> + <nl> + @ Override <nl> + public int getCount ( ) { <nl> + if ( cities = = null ) { <nl> + return 0 ; <nl> + } <nl> + return cities . size ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public Object getItem ( int position ) { <nl> + if ( cities = = null | | cities . get ( position ) = = null ) { <nl> + return null ; <nl> + } <nl> + return cities . get ( position ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public long getItemId ( int i ) { <nl> + return i ; <nl> + } <nl> + <nl> + @ Override <nl> + public View getView ( int position , View currentView , ViewGroup parent ) { <nl> + if ( currentView = = null ) { <nl> + currentView = inflater . inflate ( R . layout . city _ listitem , parent , false ) ; <nl> + } <nl> + <nl> + City city = cities . get ( position ) ; <nl> + <nl> + if ( city ! = null ) { <nl> + ( ( TextView ) currentView . findViewById ( R . id . name ) ) . setText ( city . getName ( ) ) ; <nl> + ( ( TextView ) currentView . findViewById ( R . id . votes ) ) . setText ( Long . toString ( city . getVotes ( ) ) ) ; <nl> + } <nl> + <nl> + return currentView ; <nl> + } <nl> + } <nl> diff - - git a / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / RealmJsonExampleActivity . java b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / RealmJsonExampleActivity . java <nl> new file mode 100644 <nl> index 0000000 . . 214d436 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / RealmJsonExampleActivity . java <nl> @ @ - 0 , 0 + 1 , 90 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . realmgridview ; <nl> + <nl> + import android . app . Activity ; <nl> + import android . os . Bundle ; <nl> + import android . widget . GridView ; <nl> + <nl> + import java . io . IOException ; <nl> + import java . io . InputStream ; <nl> + import java . util . List ; <nl> + <nl> + import io . realm . Realm ; <nl> + <nl> + public class RealmJsonExampleActivity extends Activity { <nl> + <nl> + public static final String TAG = RealmJsonExampleActivity . class . getName ( ) ; <nl> + <nl> + private GridView mGridView ; <nl> + private CityAdapter mAdapter ; <nl> + <nl> + @ Override <nl> + protected void onCreate ( Bundle savedInstanceState ) { <nl> + super . onCreate ( savedInstanceState ) ; <nl> + setContentView ( R . layout . activity _ realm _ example ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onResume ( ) { <nl> + super . onResume ( ) ; <nl> + <nl> + / / Load from file " cities . json " first time <nl> + if ( mAdapter = = null ) { <nl> + List < City > cities = loadCities ( ) ; <nl> + <nl> + / / This is the GridView adapter <nl> + mAdapter = new CityAdapter ( this ) ; <nl> + mAdapter . setData ( cities ) ; <nl> + <nl> + / / This is the GridView which will display the list of cities <nl> + mGridView = ( GridView ) findViewById ( R . id . cities _ list ) ; <nl> + mGridView . setAdapter ( mAdapter ) ; <nl> + mAdapter . notifyDataSetChanged ( ) ; <nl> + mGridView . invalidate ( ) ; <nl> + } <nl> + } <nl> + <nl> + public List < City > loadCities ( ) { <nl> + <nl> + / / In this case we ' re loading from local assets . <nl> + / / NOTE : could alternatively easily load from network <nl> + InputStream stream = null ; <nl> + try { <nl> + stream = getAssets ( ) . open ( " cities . json " ) ; <nl> + } catch ( IOException e ) { <nl> + return null ; <nl> + } <nl> + <nl> + Realm . deleteRealmFile ( this ) ; <nl> + <nl> + / / Store the retrieved items to the Realm <nl> + Realm realm = Realm . getInstance ( this ) ; <nl> + <nl> + / / Open a transaction to store items into the realm <nl> + try { <nl> + realm . beginTransaction ( ) ; <nl> + realm . createAllFromJson ( City . class , stream ) ; <nl> + realm . commitTransaction ( ) ; <nl> + stream . close ( ) ; <nl> + } catch ( IOException e ) { <nl> + / / Ignore <nl> + } <nl> + <nl> + return realm . allObjects ( City . class ) ; <nl> + } <nl> + } <nl> diff - - git a / examples / jsonImportExample / src / main / res / drawable - hdpi / ic _ launcher . png b / examples / jsonImportExample / src / main / res / drawable - hdpi / ic _ launcher . png <nl> new file mode 100644 <nl> index 0000000 . . 96a442e <nl> Binary files / dev / null and b / examples / jsonImportExample / src / main / res / drawable - hdpi / ic _ launcher . png differ <nl> diff - - git a / examples / jsonImportExample / src / main / res / drawable - mdpi / ic _ launcher . png b / examples / jsonImportExample / src / main / res / drawable - mdpi / ic _ launcher . png <nl> new file mode 100644 <nl> index 0000000 . . 359047d <nl> Binary files / dev / null and b / examples / jsonImportExample / src / main / res / drawable - mdpi / ic _ launcher . png differ <nl> diff - - git a / examples / jsonImportExample / src / main / res / drawable - xhdpi / ic _ launcher . png b / examples / jsonImportExample / src / main / res / drawable - xhdpi / ic _ launcher . png <nl> new file mode 100644 <nl> index 0000000 . . 71c6d76 <nl> Binary files / dev / null and b / examples / jsonImportExample / src / main / res / drawable - xhdpi / ic _ launcher . png differ <nl> diff - - git a / examples / jsonImportExample / src / main / res / drawable - xxhdpi / ic _ launcher . png b / examples / jsonImportExample / src / main / res / drawable - xxhdpi / ic _ launcher . png <nl> new file mode 100644 <nl> index 0000000 . . 4df1894 <nl> Binary files / dev / null and b / examples / jsonImportExample / src / main / res / drawable - xxhdpi / ic _ launcher . png differ <nl> diff - - git a / examples / jsonImportExample / src / main / res / layout / activity _ realm _ example . xml b / examples / jsonImportExample / src / main / res / layout / activity _ realm _ example . xml <nl> new file mode 100644 <nl> index 0000000 . . a1a15a1 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / res / layout / activity _ realm _ example . xml <nl> @ @ - 0 , 0 + 1 , 25 @ @ <nl> + < LinearLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + xmlns : tools = " http : / / schemas . android . com / tools " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " match _ parent " <nl> + android : orientation = " vertical " <nl> + android : paddingBottom = " @ dimen / activity _ vertical _ margin " <nl> + android : paddingLeft = " @ dimen / activity _ horizontal _ margin " <nl> + android : paddingRight = " @ dimen / activity _ horizontal _ margin " <nl> + android : paddingTop = " @ dimen / activity _ vertical _ margin " <nl> + tools : context = " . RealmGridLayoutActivity " > <nl> + <nl> + < TextView <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " wrap _ content " <nl> + android : gravity = " center _ horizontal " <nl> + android : text = " My Favorite City " <nl> + android : textSize = " 18sp " / > <nl> + <nl> + < GridView <nl> + android : id = " @ + id / cities _ list " <nl> + android : listSelector = " @ android : color / transparent " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " wrap _ content " <nl> + android : numColumns = " 2 " / > <nl> + < / LinearLayout > <nl> diff - - git a / examples / jsonImportExample / src / main / res / layout / city _ listitem . xml b / examples / jsonImportExample / src / main / res / layout / city _ listitem . xml <nl> new file mode 100755 <nl> index 0000000 . . 84a41ed <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / res / layout / city _ listitem . xml <nl> @ @ - 0 , 0 + 1 , 21 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < LinearLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + android : layout _ width = " match _ parent " <nl> + android : layout _ height = " wrap _ content " <nl> + android : gravity = " center " <nl> + android : orientation = " horizontal " > <nl> + <nl> + < TextView <nl> + android : id = " @ + id / name " <nl> + android : layout _ width = " wrap _ content " <nl> + android : layout _ height = " wrap _ content " <nl> + android : layout _ margin = " 5dp " <nl> + android : textColor = " @ android : color / black " / > <nl> + <nl> + < TextView <nl> + android : id = " @ + id / votes " <nl> + android : layout _ width = " wrap _ content " <nl> + android : layout _ height = " wrap _ content " <nl> + android : layout _ margin = " 5dp " <nl> + android : textColor = " @ android : color / black " / > <nl> + < / LinearLayout > <nl> diff - - git a / examples / jsonImportExample / src / main / res / menu / options _ menu . xml b / examples / jsonImportExample / src / main / res / menu / options _ menu . xml <nl> new file mode 100644 <nl> index 0000000 . . c713700 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / res / menu / options _ menu . xml <nl> @ @ - 0 , 0 + 1 , 11 @ @ <nl> + < menu xmlns : android = " http : / / schemas . android . com / apk / res / android " <nl> + xmlns : tools = " http : / / schemas . android . com / tools " <nl> + tools : context = " . RealmGridLayoutActivity " > <nl> + <nl> + < item <nl> + android : id = " @ + id / action _ reload " <nl> + android : orderInCategory = " 100 " <nl> + android : showAsAction = " never " <nl> + android : title = " @ string / action _ reset " / > <nl> + <nl> + < / menu > <nl> diff - - git a / examples / jsonImportExample / src / main / res / values - w820dp / dimens . xml b / examples / jsonImportExample / src / main / res / values - w820dp / dimens . xml <nl> new file mode 100644 <nl> index 0000000 . . 63fc816 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / res / values - w820dp / dimens . xml <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + < resources > <nl> + < ! - - Example customization of dimensions originally defined in res / values / dimens . xml <nl> + ( such as screen margins ) for screens with more than 820dp of available width . This <nl> + would include 7 " and 10 " devices in landscape ( ~ 960dp and ~ 1280dp respectively ) . - - > <nl> + < dimen name = " activity _ horizontal _ margin " > 64dp < / dimen > <nl> + < / resources > <nl> diff - - git a / examples / jsonImportExample / src / main / res / values / dimens . xml b / examples / jsonImportExample / src / main / res / values / dimens . xml <nl> new file mode 100644 <nl> index 0000000 . . 47c8224 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / res / values / dimens . xml <nl> @ @ - 0 , 0 + 1 , 5 @ @ <nl> + < resources > <nl> + < ! - - Default screen margins , per the Android Design guidelines . - - > <nl> + < dimen name = " activity _ horizontal _ margin " > 16dp < / dimen > <nl> + < dimen name = " activity _ vertical _ margin " > 16dp < / dimen > <nl> + < / resources > <nl> diff - - git a / examples / jsonImportExample / src / main / res / values / strings . xml b / examples / jsonImportExample / src / main / res / values / strings . xml <nl> new file mode 100644 <nl> index 0000000 . . 5e6e5ad <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / res / values / strings . xml <nl> @ @ - 0 , 0 + 1 , 7 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < resources > <nl> + <nl> + < string name = " app _ name " > Realm Example < / string > <nl> + < string name = " action _ reset " > Reset < / string > <nl> + <nl> + < / resources > <nl> diff - - git a / examples / jsonImportExample / src / main / res / values / styles . xml b / examples / jsonImportExample / src / main / res / values / styles . xml <nl> new file mode 100644 <nl> index 0000000 . . ff6c9d2 <nl> - - - / dev / null <nl> + + + b / examples / jsonImportExample / src / main / res / values / styles . xml <nl> @ @ - 0 , 0 + 1 , 8 @ @ <nl> + < resources > <nl> + <nl> + < ! - - Base application theme . - - > <nl> + < style name = " AppTheme " parent = " android : Theme . Holo . Light . DarkActionBar " > <nl> + < ! - - Customize your theme here . - - > <nl> + < / style > <nl> + <nl> + < / resources > <nl> diff - - git a / realm / src / androidTest / java / io / realm / RealmJsonTest . java b / realm / src / androidTest / java / io / realm / RealmJsonTest . java <nl> index e11d2ed . . 73df5e4 100644 <nl> - - - a / realm / src / androidTest / java / io / realm / RealmJsonTest . java <nl> + + + b / realm / src / androidTest / java / io / realm / RealmJsonTest . java <nl> @ @ - 13 , 6 + 13 , 7 @ @ import java . io . InputStream ; <nl> import java . util . Date ; <nl> <nl> import io . realm . entities . AllTypes ; <nl> + import io . realm . entities . AnnotationTypes ; <nl> import io . realm . entities . Dog ; <nl> <nl> import static io . realm . internal . test . ExtraTests . assertArrayEquals ; <nl> @ @ - 23 , 11 + 24 , 11 @ @ public class RealmJsonTest extends AndroidTestCase { <nl> <nl> @ Override <nl> protected void setUp ( ) throws Exception { <nl> - Realm . deleteRealmFile ( getContext ( ) ) ; <nl> testRealm = Realm . getInstance ( getContext ( ) ) ; <nl> testRealm . beginTransaction ( ) ; <nl> testRealm . clear ( AllTypes . class ) ; <nl> testRealm . clear ( Dog . class ) ; <nl> + testRealm . clear ( AnnotationTypes . class ) ; <nl> testRealm . commitTransaction ( ) ; <nl> } <nl> <nl> @ @ - 225 , 6 + 226 , 21 @ @ public class RealmJsonTest extends AndroidTestCase { <nl> assertEquals ( new Date ( 0 ) , obj . getColumnDate ( ) ) ; <nl> } <nl> <nl> + public void testImportJson _ respectIgnoredFields ( ) throws JSONException { <nl> + JSONObject json = new JSONObject ( ) ; <nl> + json . put ( " indexString " , " Foo " ) ; <nl> + json . put ( " notIndexString " , " Bar " ) ; <nl> + json . put ( " ignoreString " , " Baz " ) ; <nl> + <nl> + testRealm . beginTransaction ( ) ; <nl> + testRealm . createFromJson ( AnnotationTypes . class , json ) ; <nl> + testRealm . commitTransaction ( ) ; <nl> + <nl> + AnnotationTypes annotationsObject = testRealm . allObjects ( AnnotationTypes . class ) . first ( ) ; <nl> + assertEquals ( " Foo " , annotationsObject . getIndexString ( ) ) ; <nl> + assertEquals ( null , annotationsObject . getIgnoreString ( ) ) ; <nl> + } <nl> + <nl> public void testImportStream _ null ( ) throws IOException { <nl> testRealm . createAllFromJson ( AllTypes . class , ( InputStream ) null ) ; <nl> assertEquals ( 0 , testRealm . allObjects ( AllTypes . class ) . size ( ) ) ; <nl> @ @ - 335 , 5 + 351 , 4 @ @ public class RealmJsonTest extends AndroidTestCase { <nl> assertNull ( obj . getColumnRealmObject ( ) ) ; <nl> assertEquals ( 0 , obj . getColumnRealmList ( ) . size ( ) ) ; <nl> } <nl> - <nl> } <nl> diff - - git a / settings . gradle b / settings . gradle <nl> index a276484 . . 1ce1a8d 100644 <nl> - - - a / settings . gradle <nl> + + + b / settings . gradle <nl> @ @ - 1 , 4 + 1 , 4 @ @ <nl> - include ' : realm ' , ' : introExample ' , ' : gridViewExample ' , ' : concurrencyExample ' , ' : encryptionExample ' , ' : migrationExample ' <nl> + include ' : realm ' , ' : introExample ' , ' : gridViewExample ' , ' : concurrencyExample ' , ' : encryptionExample ' , ' : migrationExample ' , ' : jsonImportExample ' <nl> include ' : realm - annotations - processor ' <nl> include ' : performance ' <nl> project ( ' : performance ' ) . projectDir = new File ( ' examples / performance ' ) <nl> @ @ - 9 , 3 + 9 , 4 @ @ project ( ' : gridViewExample ' ) . projectDir = new File ( ' examples / gridViewExample ' ) <nl> project ( ' : concurrencyExample ' ) . projectDir = new File ( ' examples / concurrencyExample ' ) <nl> project ( ' : encryptionExample ' ) . projectDir = new File ( ' examples / encryptionExample ' ) <nl> project ( ' : migrationExample ' ) . projectDir = new File ( ' examples / migrationExample ' ) <nl> + project ( ' : jsonImportExample ' ) . projectDir = new File ( ' examples / jsonImportExample ' )

TEST DIFF:
diff - - git a / examples / newsreaderExample / src / debug / AndroidManifest . xml b / examples / newsreaderExample / src / debug / AndroidManifest . xml 
 new file mode 100644 
 index 0000000 . . d044658 
 - - - / dev / null 
 + + + b / examples / newsreaderExample / src / debug / AndroidManifest . xml 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < manifest package = " io . realm . examples . newsreader " 
 + xmlns : android = " http : / / schemas . android . com / apk / res / android " > 
 + 
 + < application android : name = " . DebugNewsReaderApplication " / > 
 + < / manifest > 
 diff - - git a / examples / newsreaderExample / src / debug / java / AndroidManifest . xml b / examples / newsreaderExample / src / debug / java / AndroidManifest . xml 
 deleted file mode 100644 
 index d044658 . . 0000000 
 - - - a / examples / newsreaderExample / src / debug / java / AndroidManifest . xml 
 + + + / dev / null 
 @ @ - 1 , 6 + 0 , 0 @ @ 
 - < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 - < manifest package = " io . realm . examples . newsreader " 
 - xmlns : android = " http : / / schemas . android . com / apk / res / android " > 
 - 
 - < application android : name = " . DebugNewsReaderApplication " / > 
 - < / manifest > 
 diff - - git a / examples / newsreaderExample / src / main / AndroidManifest . xml b / examples / newsreaderExample / src / main / AndroidManifest . xml 
 index 342ec43 . . c45071e 100644 
 - - - a / examples / newsreaderExample / src / main / AndroidManifest . xml 
 + + + b / examples / newsreaderExample / src / main / AndroidManifest . xml 
 @ @ - 9 , 7 + 9 , 6 @ @ 
 android : icon = " @ mipmap / ic _ launcher " 
 android : label = " @ string / app _ name " 
 android : supportsRtl = " true " 
 - android : name = " . NewsReaderApplication " 
 android : theme = " @ style / AppTheme . NoActionBar " > 
 < activity 
 android : name = " . ui . main . MainActivity " 
 diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Model . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Model . java 
 index 18e465e . . bb92937 100644 
 - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Model . java 
 + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Model . java 
 @ @ - 16 , 8 + 16 , 14 @ @ 
 
 package io . realm . examples . newsreader . model ; 
 
 + import android . support . annotation . NonNull ; 
 import android . text . TextUtils ; 
 
 + import java . util . HashMap ; 
 + import java . util . List ; 
 + import java . util . Map ; 
 + import java . util . Set ; 
 + 
 import io . realm . RealmResults ; 
 import io . realm . examples . newsreader . model . entity . NYTimesStory ; 
 import rx . Observable ; 
 @ @ - 28 , 8 + 34 , 34 @ @ import rx . functions . Func1 ; 
 * / 
 public class Model { 
 
 + / * * 
 + * Map between section titles and their NYTimes API keys 
 + * / 
 + private static final Map < String , String > sections ; 
 + static { 
 + sections = new HashMap < > ( ) ; 
 + sections . put ( " Home " , " home " ) ; 
 + sections . put ( " World " , " world " ) ; 
 + sections . put ( " National " , " national " ) ; 
 + sections . put ( " Politics " , " politics " ) ; 
 + sections . put ( " NY Region " , " nyregion " ) ; 
 + sections . put ( " Business " , " business " ) ; 
 + sections . put ( " Opinion " , " opinion " ) ; 
 + sections . put ( " Technology " , " technology " ) ; 
 + sections . put ( " Science " , " science " ) ; 
 + sections . put ( " Health " , " health " ) ; 
 + sections . put ( " Sports " , " sports " ) ; 
 + sections . put ( " Arts " , " arts " ) ; 
 + sections . put ( " Fashion " , " fashion " ) ; 
 + sections . put ( " Dining " , " dining " ) ; 
 + sections . put ( " Travel " , " travel " ) ; 
 + sections . put ( " Magazine " , " magazine " ) ; 
 + sections . put ( " Real Estate " , " realestate " ) ; 
 + } 
 + 
 private static Model instance = null ; 
 private final Repository repository ; 
 + private String selectedSection ; 
 
 / / This could be replaced by Dependency Injection for easier testing 
 public static synchronized Model getInstance ( ) { 
 @ @ - 42 , 6 + 74 , 7 @ @ public class Model { 
 
 private Model ( Repository repository ) { 
 this . repository = repository ; 
 + this . selectedSection = " home " ; 
 } 
 
 / * * 
 @ @ - 91 , 6 + 124 , 17 @ @ public class Model { 
 } ) ; 
 } 
 
 + / * * 
 + * Returns all sections available 
 + * / 
 + public Map < String , String > getSections ( ) { 
 + return sections ; 
 + } 
 + 
 + public void selectSection ( @ NonNull String key ) { 
 + selectedSection = key ; 
 + repository . loadNewsFeed ( selectedSection ) ; 
 + } 
 
 @ Override 
 protected void finalize ( ) throws Throwable { 
 diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Repository . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Repository . java 
 index ebaa6fa . . 5d992d8 100644 
 - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Repository . java 
 + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / Repository . java 
 @ @ - 89 , 6 + 89 , 10 @ @ public class Repository implements Closeable { 
 } ) ; 
 } 
 
 + public void loadNewsFeed ( String section ) { 
 + 
 + } 
 + 
 private long timeSinceLastNetworkRequest ( ) { 
 return TimeUnit . SECONDS . convert ( System . currentTimeMillis ( ) - lastNetworkRequest , TimeUnit . MILLISECONDS ) ; 
 } 
 @ @ - 133 , 4 + 137 , 5 @ @ public class Repository implements Closeable { 
 public void close ( ) { 
 realm . close ( ) ; 
 } 
 + 
 } 
 diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / network / NYTimesDataLoader . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / network / NYTimesDataLoader . java 
 index 43654e6 . . e3fe89a 100644 
 - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / network / NYTimesDataLoader . java 
 + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / model / network / NYTimesDataLoader . java 
 @ @ - 40 , 7 + 40 , 7 @ @ import timber . log . Timber ; 
 * / 
 public class NYTimesDataLoader { 
 
 - String [ ] nytSections = new String [ ] { 
 + String [ ] nytSections = { 
 " home " , 
 " world " , 
 " national " , 
 @ @ - 62 , 7 + 62 , 7 @ @ public class NYTimesDataLoader { 
 
 private NYTimesService nyTimesService ; 
 private SimpleDateFormat inputDateFormat = new SimpleDateFormat ( " yyyy - MM - d ' T ' HH : mm : ssZZZZZ " , Locale . US ) ; 
 - private SimpleDateFormat outputDateFormat = new SimpleDateFormat ( " MM - dd - yyyy " , Locale . US ) ; 
 + private SimpleDateFormat outputDateFormat = new SimpleDateFormat ( " MM - dd - yyyy " , Locale . US ) ; 
 private String apiKey ; 
 private Realm realm ; 
 private BehaviorSubject < Boolean > networkInUse ; 
 diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainActivity . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainActivity . java 
 index a95cece . . 7992eca 100644 
 - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainActivity . java 
 + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainActivity . java 
 @ @ - 27 , 7 + 27 , 7 @ @ import android . view . ViewGroup ; 
 import android . widget . AdapterView ; 
 import android . widget . ArrayAdapter ; 
 import android . widget . ListView ; 
 - import android . widget . ProgressBar ; 
 + import android . widget . Spinner ; 
 import android . widget . TextView ; 
 
 import java . util . List ; 
 @ @ - 44 , 8 + 44 , 10 @ @ public class MainActivity extends AppCompatActivity { 
 @ Bind ( R . id . refresh _ view ) SwipeRefreshLayout refreshView ; 
 @ Bind ( R . id . list _ view ) ListView listView ; 
 @ Bind ( R . id . progressbar ) MaterialProgressBar progressBar ; 
 + @ Bind ( R . id . spinner ) Spinner spinner ; 
 
 MainPresenter presenter = new MainPresenter ( this , Model . getInstance ( ) ) ; 
 + private Toolbar toolbar ; 
 private ArrayAdapter < NYTimesStory > adapter ; 
 
 @ Override 
 @ @ - 54 , 10 + 56 , 10 @ @ public class MainActivity extends AppCompatActivity { 
 
 / / Setup initial views 
 setContentView ( R . layout . activity _ main ) ; 
 - 
 ButterKnife . bind ( this ) ; 
 - Toolbar toolbar = ( Toolbar ) findViewById ( R . id . toolbar ) ; 
 + toolbar = ( Toolbar ) findViewById ( R . id . toolbar ) ; 
 setSupportActionBar ( toolbar ) ; 
 + getSupportActionBar ( ) . setDisplayShowTitleEnabled ( false ) ; 
 
 adapter = null ; 
 listView . setOnItemClickListener ( new AdapterView . OnItemClickListener ( ) { 
 @ @ - 80 , 6 + 82 , 27 @ @ public class MainActivity extends AppCompatActivity { 
 presenter . onCreate ( ) ; 
 } 
 
 + / * * 
 + * Setup the toolbar spinner with the available sections 
 + * @ param sections 
 + * / 
 + public void configureToolbar ( List < String > sections ) { 
 + String [ ] sectionList = sections . toArray ( new String [ sections . size ( ) ] ) ; 
 + final ArrayAdapter adapter = new ArrayAdapter < CharSequence > ( getApplicationContext ( ) , android . R . layout . simple _ spinner _ dropdown _ item , sectionList ) ; 
 + spinner . setAdapter ( adapter ) ; 
 + spinner . setOnItemSelectedListener ( new AdapterView . OnItemSelectedListener ( ) { 
 + @ Override 
 + public void onItemSelected ( AdapterView < ? > parent , View view , int position , long id ) { 
 + presenter . categorySelected ( ( String ) adapter . getItem ( position ) ) ; 
 + } 
 + 
 + @ Override 
 + public void onNothingSelected ( AdapterView < ? > parent ) { 
 + 
 + } 
 + } ) ; 
 + } 
 + 
 @ Override 
 protected void onResume ( ) { 
 super . onResume ( ) ; 
 diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainPresenter . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainPresenter . java 
 index 28d4347 . . bece8bc 100644 
 - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainPresenter . java 
 + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / ui / main / MainPresenter . java 
 @ @ - 17 , 8 + 17 , 15 @ @ 
 package io . realm . examples . newsreader . ui . main ; 
 
 import android . content . Intent ; 
 + import android . support . annotation . NonNull ; 
 
 + import java . util . ArrayList ; 
 + import java . util . Arrays ; 
 + import java . util . Collection ; 
 + import java . util . Collections ; 
 + import java . util . Comparator ; 
 import java . util . List ; 
 + import java . util . Map ; 
 
 import io . realm . examples . newsreader . model . Model ; 
 import io . realm . examples . newsreader . model . entity . NYTimesStory ; 
 @ @ - 37 , 6 + 44 , 7 @ @ public class MainPresenter implements Presenter { 
 private final Model model ; 
 private List < NYTimesStory > storiesData ; 
 private CompositeSubscription subscriptions ; 
 + private Map < String , String > sections ; 
 
 public MainPresenter ( MainActivity mainActivity , Model model ) { 
 this . view = mainActivity ; 
 @ @ - 45 , 7 + 53 , 20 @ @ public class MainPresenter implements Presenter { 
 
 @ Override 
 public void onCreate ( ) { 
 - / / Do nothing 
 + sections = model . getSections ( ) ; 
 + 
 + / / Sort sections alphabetically , but always have Home at the top 
 + List < String > sectionList = new ArrayList < > ( sections . keySet ( ) ) ; 
 + Collections . sort ( sectionList , new Comparator < String > ( ) { 
 + @ Override 
 + public int compare ( String lhs , String rhs ) { 
 + if ( lhs . equals ( " Home " ) ) return - 1 ; 
 + if ( rhs . equals ( " Home " ) ) return 1 ; 
 + return lhs . compareToIgnoreCase ( rhs ) ; 
 + } 
 + } ) ; 
 + view . configureToolbar ( sectionList ) ; 
 + categorySelected ( sectionList . get ( 0 ) ) ; 
 } 
 
 @ Override 
 @ @ - 89 , 4 + 110 , 9 @ @ public class MainPresenter implements Presenter { 
 Intent intent = DetailsActivity . getIntent ( view , storiesData . get ( position ) ) ; 
 view . startActivity ( intent ) ; 
 } 
 + 
 + public void categorySelected ( @ NonNull String categoryLabel ) { 
 + String key = sections . get ( categoryLabel ) ; 
 + model . selectSection ( key ) ; 
 + } 
 } 
 diff - - git a / examples / newsreaderExample / src / main / res / layout / activity _ main . xml b / examples / newsreaderExample / src / main / res / layout / activity _ main . xml 
 index eea1138 . . fa54dd9 100644 
 - - - a / examples / newsreaderExample / src / main / res / layout / activity _ main . xml 
 + + + b / examples / newsreaderExample / src / main / res / layout / activity _ main . xml 
 @ @ - 18 , 7 + 18 , 15 @ @ 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " ? attr / actionBarSize " 
 android : background = " ? attr / colorPrimary " 
 - app : popupTheme = " @ style / AppTheme . PopupOverlay " / > 
 + app : popupTheme = " @ style / AppTheme . PopupOverlay " > 
 + 
 + < Spinner 
 + android : id = " @ + id / spinner " 
 + 
 + android : layout _ width = " wrap _ content " 
 + android : layout _ height = " wrap _ content " / > 
 + 
 + < / android . support . v7 . widget . Toolbar > 
 
 < me . zhanghai . android . materialprogressbar . MaterialProgressBar 
 android : id = " @ + id / progressbar " 
 diff - - git a / examples / newsreaderExample / src / main / res / layout / spinner _ dropdown _ item . xml b / examples / newsreaderExample / src / main / res / layout / spinner _ dropdown _ item . xml 
 new file mode 100644 
 index 0000000 . . 814c750 
 - - - / dev / null 
 + + + b / examples / newsreaderExample / src / main / res / layout / spinner _ dropdown _ item . xml 
 @ @ - 0 , 0 + 1 , 8 @ @ 
 + < CheckedTextView xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + android : id = " @ android : id / text1 " 
 + style = " ? android : attr / spinnerDropDownItemStyle " 
 + android : singleLine = " true " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " ? android : attr / listPreferredItemHeight " 
 + android : ellipsize = " marquee " 
 + android : textColor = " ? android : attr / textColorSecondary " / > 
 diff - - git a / examples / newsreaderExample / src / main / res / values / colors . xml b / examples / newsreaderExample / src / main / res / values / colors . xml 
 index 3ab3e9c . . 90781a8 100644 
 - - - a / examples / newsreaderExample / src / main / res / values / colors . xml 
 + + + b / examples / newsreaderExample / src / main / res / values / colors . xml 
 @ @ - 3 , 4 + 3 , 5 @ @ 
 < color name = " colorPrimary " > # 3F51B5 < / color > 
 < color name = " colorPrimaryDark " > # 303F9F < / color > 
 < color name = " colorAccent " > # FF4081 < / color > 
 + < color name = " white " > # ffffff < / color > 
 < / resources >

NEAREST DIFF:
diff - - git a / . gitignore b / . gitignore 
 index acec2b9 . . 5af6c9c 100644 
 - - - a / . gitignore 
 + + + b / . gitignore 
 @ @ - 22 , 6 + 22 , 7 @ @ core - * 
 * / . DS _ Store 
 
 # JNI libs 
 + realm _ version _ check . timestamp 
 / realm / src / main / jniLibs 
 
 # Build artifacts 
 @ @ - 44 , 3 + 45 , 4 @ @ distribution / version . txt 
 distribution / RealmGridViewExample / app / src 
 distribution / RealmIntroExample / app / src 
 distribution / RealmMigrationExample / app / src 
 + 
 diff - - git a / examples / jsonImportExample / . gitignore b / examples / jsonImportExample / . gitignore 
 new file mode 100644 
 index 0000000 . . 796b96d 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / . gitignore 
 @ @ - 0 , 0 + 1 @ @ 
 + / build 
 diff - - git a / examples / jsonImportExample / build . gradle b / examples / jsonImportExample / build . gradle 
 new file mode 100644 
 index 0000000 . . 1f5f413 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / build . gradle 
 @ @ - 0 , 0 + 1 , 28 @ @ 
 + apply plugin : ' com . android . application ' 
 + 
 + android { 
 + compileSdkVersion 19 
 + buildToolsVersion " 20 . 0 . 0 " 
 + defaultConfig { 
 + applicationId ' io . realm . examples . jsonimport ' 
 + minSdkVersion 15 
 + targetSdkVersion 19 
 + versionCode 1 
 + versionName " 1 . 0 " 
 + } 
 + buildTypes { 
 + release { 
 + runProguard false 
 + } 
 + } 
 + productFlavors { 
 + } 
 + } 
 + 
 + tasks . preBuild { 
 + dependsOn " : realm : androidJar " 
 + } 
 + 
 + dependencies { 
 + compile files ( " . . / . . / realm / build / libs / realm - $ { version } . jar " ) 
 + } 
 diff - - git a / examples / jsonImportExample / proguard - rules . pro b / examples / jsonImportExample / proguard - rules . pro 
 new file mode 100644 
 index 0000000 . . 200fdff 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / proguard - rules . pro 
 @ @ - 0 , 0 + 1 , 17 @ @ 
 + # Add project specific ProGuard rules here . 
 + # By default , the flags in this file are appended to flags specified 
 + # in / usr / local / Cellar / android - sdk / 22 . 6 . 2 / tools / proguard / proguard - android . txt 
 + # You can edit the include path and order by changing the proguardFiles 
 + # directive in build . gradle . 
 + # 
 + # For more details , see 
 + # http : / / developer . android . com / guide / developing / tools / proguard . html 
 + 
 + # Add any project specific keep options here : 
 + 
 + # If your project uses WebView with JS , uncomment the following 
 + # and specify the fully qualified class name to the JavaScript interface 
 + # class : 
 + # - keepclassmembers class fqcn . of . javascript . interface . for . webview { 
 + # public * ; 
 + # } 
 diff - - git a / examples / jsonImportExample / src / main / AndroidManifest . xml b / examples / jsonImportExample / src / main / AndroidManifest . xml 
 new file mode 100644 
 index 0000000 . . e561523 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / AndroidManifest . xml 
 @ @ - 0 , 0 + 1 , 21 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + package = " io . realm . examples . realmgridview " > 
 + 
 + < application 
 + android : allowBackup = " true " 
 + android : icon = " @ drawable / ic _ launcher " 
 + android : label = " @ string / app _ name " 
 + android : theme = " @ style / AppTheme " > 
 + < activity 
 + android : name = " . RealmJsonExampleActivity " 
 + android : configChanges = " keyboard | screenSize | orientation " 
 + android : label = " @ string / app _ name " > 
 + < intent - filter > 
 + < action android : name = " android . intent . action . MAIN " / > 
 + < category android : name = " android . intent . category . LAUNCHER " / > 
 + < / intent - filter > 
 + < / activity > 
 + < / application > 
 + 
 + < / manifest > 
 diff - - git a / examples / jsonImportExample / src / main / assets / cities . json b / examples / jsonImportExample / src / main / assets / cities . json 
 new file mode 100644 
 index 0000000 . . db4e522 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / assets / cities . json 
 @ @ - 0 , 0 + 1 , 64 @ @ 
 + [ 
 + { " name " : " Barcelona " , 
 + " votes " : 23 } , 
 + 
 + { " name " : " San Francisco " , 
 + " votes " : 21 } , 
 + 
 + { " name " : " Venice " , 
 + " votes " : 19 } , 
 + 
 + { " name " : " Melbourne " , 
 + " votes " : 18 } , 
 + 
 + { " name " : " Paris " , 
 + " votes " : 17 } , 
 + 
 + { " name " : " Seville " , 
 + " votes " : 14 } , 
 + 
 + { " name " : " Sydney " , 
 + " votes " : 12 } , 
 + 
 + { " name " : " New York " , 
 + " votes " : 11 } , 
 + 
 + { " name " : " Krakow " , 
 + " votes " : 9 } , 
 + 
 + { " name " : " Peoria " , 
 + " votes " : 72 } , 
 + 
 + { " name " : " Springfield " , 
 + " votes " : 88 } , 
 + 
 + { " name " : " Kansas City " , 
 + " votes " : 100 } , 
 + 
 + { " name " : " Tokyo " , 
 + " votes " : 20 } , 
 + 
 + { " name " : " Boise " , 
 + " votes " : 17 } , 
 + 
 + { " name " : " Los Angeles " , 
 + " votes " : 14 } , 
 + 
 + { " name " : " Newark " , 
 + " votes " : 12 } , 
 + 
 + { " name " : " Chicago " , 
 + " votes " : 11 } , 
 + 
 + { " name " : " Detroit " , 
 + " votes " : 91 } , 
 + 
 + { " name " : " Florence " , 
 + " votes " : 4 } , 
 + 
 + { " name " : " Madrid " , 
 + " votes " : 1 } , 
 + 
 + { " name " : " London " , 
 + " votes " : 9 } 
 + ] 
 \ No newline at end of file 
 diff - - git a / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / City . java b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / City . java 
 new file mode 100644 
 index 0000000 . . f0aec3c 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / City . java 
 @ @ - 0 , 0 + 1 , 42 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . realmgridview ; 
 + 
 + import io . realm . RealmObject ; 
 + 
 + public class City extends RealmObject { 
 + 
 + private String name ; 
 + private long votes ; 
 + 
 + public String getName ( ) { 
 + return name ; 
 + } 
 + 
 + public void setName ( String name ) { 
 + this . name = name ; 
 + } 
 + 
 + public long getVotes ( ) { 
 + return votes ; 
 + } 
 + 
 + public void setVotes ( long votes ) { 
 + this . votes = votes ; 
 + } 
 + 
 + } 
 diff - - git a / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / CityAdapter . java b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / CityAdapter . java 
 new file mode 100644 
 index 0000000 . . 1b5050a 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / CityAdapter . java 
 @ @ - 0 , 0 + 1 , 86 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . realmgridview ; 
 + 
 + import android . content . Context ; 
 + import android . view . LayoutInflater ; 
 + import android . view . View ; 
 + import android . view . ViewGroup ; 
 + import android . widget . BaseAdapter ; 
 + import android . widget . TextView ; 
 + 
 + import java . util . List ; 
 + 
 + / / This adapter is strictly to interface with the GridView and doesn ' t 
 + / / particular show much interesting Realm functionality . 
 + 
 + / / Alternatively from this example , 
 + / / a developer could update the getView ( ) to pull items from the Realm . 
 + 
 + public class CityAdapter extends BaseAdapter { 
 + 
 + public static final String TAG = RealmJsonExampleActivity . class . getName ( ) ; 
 + 
 + private LayoutInflater inflater ; 
 + 
 + private List < City > cities = null ; 
 + 
 + public CityAdapter ( Context context ) { 
 + inflater = ( LayoutInflater ) context . getSystemService ( Context . LAYOUT _ INFLATER _ SERVICE ) ; 
 + } 
 + 
 + public void setData ( List < City > details ) { 
 + this . cities = details ; 
 + } 
 + 
 + @ Override 
 + public int getCount ( ) { 
 + if ( cities = = null ) { 
 + return 0 ; 
 + } 
 + return cities . size ( ) ; 
 + } 
 + 
 + @ Override 
 + public Object getItem ( int position ) { 
 + if ( cities = = null | | cities . get ( position ) = = null ) { 
 + return null ; 
 + } 
 + return cities . get ( position ) ; 
 + } 
 + 
 + @ Override 
 + public long getItemId ( int i ) { 
 + return i ; 
 + } 
 + 
 + @ Override 
 + public View getView ( int position , View currentView , ViewGroup parent ) { 
 + if ( currentView = = null ) { 
 + currentView = inflater . inflate ( R . layout . city _ listitem , parent , false ) ; 
 + } 
 + 
 + City city = cities . get ( position ) ; 
 + 
 + if ( city ! = null ) { 
 + ( ( TextView ) currentView . findViewById ( R . id . name ) ) . setText ( city . getName ( ) ) ; 
 + ( ( TextView ) currentView . findViewById ( R . id . votes ) ) . setText ( Long . toString ( city . getVotes ( ) ) ) ; 
 + } 
 + 
 + return currentView ; 
 + } 
 + } 
 diff - - git a / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / RealmJsonExampleActivity . java b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / RealmJsonExampleActivity . java 
 new file mode 100644 
 index 0000000 . . 214d436 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / java / io / realm / examples / realmgridview / RealmJsonExampleActivity . java 
 @ @ - 0 , 0 + 1 , 90 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . realmgridview ; 
 + 
 + import android . app . Activity ; 
 + import android . os . Bundle ; 
 + import android . widget . GridView ; 
 + 
 + import java . io . IOException ; 
 + import java . io . InputStream ; 
 + import java . util . List ; 
 + 
 + import io . realm . Realm ; 
 + 
 + public class RealmJsonExampleActivity extends Activity { 
 + 
 + public static final String TAG = RealmJsonExampleActivity . class . getName ( ) ; 
 + 
 + private GridView mGridView ; 
 + private CityAdapter mAdapter ; 
 + 
 + @ Override 
 + protected void onCreate ( Bundle savedInstanceState ) { 
 + super . onCreate ( savedInstanceState ) ; 
 + setContentView ( R . layout . activity _ realm _ example ) ; 
 + } 
 + 
 + @ Override 
 + public void onResume ( ) { 
 + super . onResume ( ) ; 
 + 
 + / / Load from file " cities . json " first time 
 + if ( mAdapter = = null ) { 
 + List < City > cities = loadCities ( ) ; 
 + 
 + / / This is the GridView adapter 
 + mAdapter = new CityAdapter ( this ) ; 
 + mAdapter . setData ( cities ) ; 
 + 
 + / / This is the GridView which will display the list of cities 
 + mGridView = ( GridView ) findViewById ( R . id . cities _ list ) ; 
 + mGridView . setAdapter ( mAdapter ) ; 
 + mAdapter . notifyDataSetChanged ( ) ; 
 + mGridView . invalidate ( ) ; 
 + } 
 + } 
 + 
 + public List < City > loadCities ( ) { 
 + 
 + / / In this case we ' re loading from local assets . 
 + / / NOTE : could alternatively easily load from network 
 + InputStream stream = null ; 
 + try { 
 + stream = getAssets ( ) . open ( " cities . json " ) ; 
 + } catch ( IOException e ) { 
 + return null ; 
 + } 
 + 
 + Realm . deleteRealmFile ( this ) ; 
 + 
 + / / Store the retrieved items to the Realm 
 + Realm realm = Realm . getInstance ( this ) ; 
 + 
 + / / Open a transaction to store items into the realm 
 + try { 
 + realm . beginTransaction ( ) ; 
 + realm . createAllFromJson ( City . class , stream ) ; 
 + realm . commitTransaction ( ) ; 
 + stream . close ( ) ; 
 + } catch ( IOException e ) { 
 + / / Ignore 
 + } 
 + 
 + return realm . allObjects ( City . class ) ; 
 + } 
 + } 
 diff - - git a / examples / jsonImportExample / src / main / res / drawable - hdpi / ic _ launcher . png b / examples / jsonImportExample / src / main / res / drawable - hdpi / ic _ launcher . png 
 new file mode 100644 
 index 0000000 . . 96a442e 
 Binary files / dev / null and b / examples / jsonImportExample / src / main / res / drawable - hdpi / ic _ launcher . png differ 
 diff - - git a / examples / jsonImportExample / src / main / res / drawable - mdpi / ic _ launcher . png b / examples / jsonImportExample / src / main / res / drawable - mdpi / ic _ launcher . png 
 new file mode 100644 
 index 0000000 . . 359047d 
 Binary files / dev / null and b / examples / jsonImportExample / src / main / res / drawable - mdpi / ic _ launcher . png differ 
 diff - - git a / examples / jsonImportExample / src / main / res / drawable - xhdpi / ic _ launcher . png b / examples / jsonImportExample / src / main / res / drawable - xhdpi / ic _ launcher . png 
 new file mode 100644 
 index 0000000 . . 71c6d76 
 Binary files / dev / null and b / examples / jsonImportExample / src / main / res / drawable - xhdpi / ic _ launcher . png differ 
 diff - - git a / examples / jsonImportExample / src / main / res / drawable - xxhdpi / ic _ launcher . png b / examples / jsonImportExample / src / main / res / drawable - xxhdpi / ic _ launcher . png 
 new file mode 100644 
 index 0000000 . . 4df1894 
 Binary files / dev / null and b / examples / jsonImportExample / src / main / res / drawable - xxhdpi / ic _ launcher . png differ 
 diff - - git a / examples / jsonImportExample / src / main / res / layout / activity _ realm _ example . xml b / examples / jsonImportExample / src / main / res / layout / activity _ realm _ example . xml 
 new file mode 100644 
 index 0000000 . . a1a15a1 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / res / layout / activity _ realm _ example . xml 
 @ @ - 0 , 0 + 1 , 25 @ @ 
 + < LinearLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + xmlns : tools = " http : / / schemas . android . com / tools " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " match _ parent " 
 + android : orientation = " vertical " 
 + android : paddingBottom = " @ dimen / activity _ vertical _ margin " 
 + android : paddingLeft = " @ dimen / activity _ horizontal _ margin " 
 + android : paddingRight = " @ dimen / activity _ horizontal _ margin " 
 + android : paddingTop = " @ dimen / activity _ vertical _ margin " 
 + tools : context = " . RealmGridLayoutActivity " > 
 + 
 + < TextView 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " wrap _ content " 
 + android : gravity = " center _ horizontal " 
 + android : text = " My Favorite City " 
 + android : textSize = " 18sp " / > 
 + 
 + < GridView 
 + android : id = " @ + id / cities _ list " 
 + android : listSelector = " @ android : color / transparent " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " wrap _ content " 
 + android : numColumns = " 2 " / > 
 + < / LinearLayout > 
 diff - - git a / examples / jsonImportExample / src / main / res / layout / city _ listitem . xml b / examples / jsonImportExample / src / main / res / layout / city _ listitem . xml 
 new file mode 100755 
 index 0000000 . . 84a41ed 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / res / layout / city _ listitem . xml 
 @ @ - 0 , 0 + 1 , 21 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < LinearLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " wrap _ content " 
 + android : gravity = " center " 
 + android : orientation = " horizontal " > 
 + 
 + < TextView 
 + android : id = " @ + id / name " 
 + android : layout _ width = " wrap _ content " 
 + android : layout _ height = " wrap _ content " 
 + android : layout _ margin = " 5dp " 
 + android : textColor = " @ android : color / black " / > 
 + 
 + < TextView 
 + android : id = " @ + id / votes " 
 + android : layout _ width = " wrap _ content " 
 + android : layout _ height = " wrap _ content " 
 + android : layout _ margin = " 5dp " 
 + android : textColor = " @ android : color / black " / > 
 + < / LinearLayout > 
 diff - - git a / examples / jsonImportExample / src / main / res / menu / options _ menu . xml b / examples / jsonImportExample / src / main / res / menu / options _ menu . xml 
 new file mode 100644 
 index 0000000 . . c713700 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / res / menu / options _ menu . xml 
 @ @ - 0 , 0 + 1 , 11 @ @ 
 + < menu xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + xmlns : tools = " http : / / schemas . android . com / tools " 
 + tools : context = " . RealmGridLayoutActivity " > 
 + 
 + < item 
 + android : id = " @ + id / action _ reload " 
 + android : orderInCategory = " 100 " 
 + android : showAsAction = " never " 
 + android : title = " @ string / action _ reset " / > 
 + 
 + < / menu > 
 diff - - git a / examples / jsonImportExample / src / main / res / values - w820dp / dimens . xml b / examples / jsonImportExample / src / main / res / values - w820dp / dimens . xml 
 new file mode 100644 
 index 0000000 . . 63fc816 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / res / values - w820dp / dimens . xml 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + < resources > 
 + < ! - - Example customization of dimensions originally defined in res / values / dimens . xml 
 + ( such as screen margins ) for screens with more than 820dp of available width . This 
 + would include 7 " and 10 " devices in landscape ( ~ 960dp and ~ 1280dp respectively ) . - - > 
 + < dimen name = " activity _ horizontal _ margin " > 64dp < / dimen > 
 + < / resources > 
 diff - - git a / examples / jsonImportExample / src / main / res / values / dimens . xml b / examples / jsonImportExample / src / main / res / values / dimens . xml 
 new file mode 100644 
 index 0000000 . . 47c8224 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / res / values / dimens . xml 
 @ @ - 0 , 0 + 1 , 5 @ @ 
 + < resources > 
 + < ! - - Default screen margins , per the Android Design guidelines . - - > 
 + < dimen name = " activity _ horizontal _ margin " > 16dp < / dimen > 
 + < dimen name = " activity _ vertical _ margin " > 16dp < / dimen > 
 + < / resources > 
 diff - - git a / examples / jsonImportExample / src / main / res / values / strings . xml b / examples / jsonImportExample / src / main / res / values / strings . xml 
 new file mode 100644 
 index 0000000 . . 5e6e5ad 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / res / values / strings . xml 
 @ @ - 0 , 0 + 1 , 7 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < resources > 
 + 
 + < string name = " app _ name " > Realm Example < / string > 
 + < string name = " action _ reset " > Reset < / string > 
 + 
 + < / resources > 
 diff - - git a / examples / jsonImportExample / src / main / res / values / styles . xml b / examples / jsonImportExample / src / main / res / values / styles . xml 
 new file mode 100644 
 index 0000000 . . ff6c9d2 
 - - - / dev / null 
 + + + b / examples / jsonImportExample / src / main / res / values / styles . xml 
 @ @ - 0 , 0 + 1 , 8 @ @ 
 + < resources > 
 + 
 + < ! - - Base application theme . - - > 
 + < style name = " AppTheme " parent = " android : Theme . Holo . Light . DarkActionBar " > 
 + < ! - - Customize your theme here . - - > 
 + < / style > 
 + 
 + < / resources > 
 diff - - git a / realm / src / androidTest / java / io / realm / RealmJsonTest . java b / realm / src / androidTest / java / io / realm / RealmJsonTest . java 
 index e11d2ed . . 73df5e4 100644 
 - - - a / realm / src / androidTest / java / io / realm / RealmJsonTest . java 
 + + + b / realm / src / androidTest / java / io / realm / RealmJsonTest . java 
 @ @ - 13 , 6 + 13 , 7 @ @ import java . io . InputStream ; 
 import java . util . Date ; 
 
 import io . realm . entities . AllTypes ; 
 + import io . realm . entities . AnnotationTypes ; 
 import io . realm . entities . Dog ; 
 
 import static io . realm . internal . test . ExtraTests . assertArrayEquals ; 
 @ @ - 23 , 11 + 24 , 11 @ @ public class RealmJsonTest extends AndroidTestCase { 
 
 @ Override 
 protected void setUp ( ) throws Exception { 
 - Realm . deleteRealmFile ( getContext ( ) ) ; 
 testRealm = Realm . getInstance ( getContext ( ) ) ; 
 testRealm . beginTransaction ( ) ; 
 testRealm . clear ( AllTypes . class ) ; 
 testRealm . clear ( Dog . class ) ; 
 + testRealm . clear ( AnnotationTypes . class ) ; 
 testRealm . commitTransaction ( ) ; 
 } 
 
 @ @ - 225 , 6 + 226 , 21 @ @ public class RealmJsonTest extends AndroidTestCase { 
 assertEquals ( new Date ( 0 ) , obj . getColumnDate ( ) ) ; 
 } 
 
 + public void testImportJson _ respectIgnoredFields ( ) throws JSONException { 
 + JSONObject json = new JSONObject ( ) ; 
 + json . put ( " indexString " , " Foo " ) ; 
 + json . put ( " notIndexString " , " Bar " ) ; 
 + json . put ( " ignoreString " , " Baz " ) ; 
 + 
 + testRealm . beginTransaction ( ) ; 
 + testRealm . createFromJson ( AnnotationTypes . class , json ) ; 
 + testRealm . commitTransaction ( ) ; 
 + 
 + AnnotationTypes annotationsObject = testRealm . allObjects ( AnnotationTypes . class ) . first ( ) ; 
 + assertEquals ( " Foo " , annotationsObject . getIndexString ( ) ) ; 
 + assertEquals ( null , annotationsObject . getIgnoreString ( ) ) ; 
 + } 
 + 
 public void testImportStream _ null ( ) throws IOException { 
 testRealm . createAllFromJson ( AllTypes . class , ( InputStream ) null ) ; 
 assertEquals ( 0 , testRealm . allObjects ( AllTypes . class ) . size ( ) ) ; 
 @ @ - 335 , 5 + 351 , 4 @ @ public class RealmJsonTest extends AndroidTestCase { 
 assertNull ( obj . getColumnRealmObject ( ) ) ; 
 assertEquals ( 0 , obj . getColumnRealmList ( ) . size ( ) ) ; 
 } 
 - 
 } 
 diff - - git a / settings . gradle b / settings . gradle 
 index a276484 . . 1ce1a8d 100644 
 - - - a / settings . gradle 
 + + + b / settings . gradle 
 @ @ - 1 , 4 + 1 , 4 @ @ 
 - include ' : realm ' , ' : introExample ' , ' : gridViewExample ' , ' : concurrencyExample ' , ' : encryptionExample ' , ' : migrationExample ' 
 + include ' : realm ' , ' : introExample ' , ' : gridViewExample ' , ' : concurrencyExample ' , ' : encryptionExample ' , ' : migrationExample ' , ' : jsonImportExample ' 
 include ' : realm - annotations - processor ' 
 include ' : performance ' 
 project ( ' : performance ' ) . projectDir = new File ( ' examples / performance ' ) 
 @ @ - 9 , 3 + 9 , 4 @ @ project ( ' : gridViewExample ' ) . projectDir = new File ( ' examples / gridViewExample ' ) 
 project ( ' : concurrencyExample ' ) . projectDir = new File ( ' examples / concurrencyExample ' ) 
 project ( ' : encryptionExample ' ) . projectDir = new File ( ' examples / encryptionExample ' ) 
 project ( ' : migrationExample ' ) . projectDir = new File ( ' examples / migrationExample ' ) 
 + project ( ' : jsonImportExample ' ) . projectDir = new File ( ' examples / jsonImportExample ' )
