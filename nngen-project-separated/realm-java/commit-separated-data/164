BLEU SCORE: 0.07270717733704592

TEST MSG: Update ROS integration test server to alpha . 46
GENERATED MSG: Upgrade to ROS - 2 . 0 . 0 - alpha . 35

TEST DIFF (one line): diff - - git a / dependencies . list b / dependencies . list <nl> index c7acfe2 . . 3a595eb 100644 <nl> - - - a / dependencies . list <nl> + + + b / dependencies . list <nl> @ @ - 5 , 4 + 5 , 4 @ @ REALM _ SYNC _ SHA256 = 3a558b10ecab3e8dbf6cbceae7fe40af38ad8d8467ddd1fe036ce92c1e7810 <nl> <nl> # Object Server Release used by Integration tests . Installed using NPM . <nl> # Use ` npm view realm - object - server versions ` to get a list of available versions . <nl> - REALM _ OBJECT _ SERVER _ DE _ VERSION = 2 . 0 . 0 - alpha . 44 <nl> + REALM _ OBJECT _ SERVER _ DE _ VERSION = 2 . 0 . 0 - alpha . 46 <nl> diff - - git a / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java b / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java <nl> index 5d5b06f . . 070f9fa 100644 <nl> - - - a / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java <nl> + + + b / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java <nl> @ @ - 649 , 7 + 649 , 6 @ @ public class PermissionManagerTests extends StandardIntegrationTest { <nl> <nl> @ Test <nl> @ RunTestInLooperThread ( emulateMainThread = true ) <nl> - @ Ignore ( " See https : / / github . com / realm / ros / issues / 429 " ) <nl> public void applyPermissions _ wrongUrlFails ( ) { <nl> String wrongUrl = createRemoteRealm ( user , " test " ) + " - notexisting " ; <nl> <nl> @ @ - 670 , 7 + 669 , 8 @ @ public class PermissionManagerTests extends StandardIntegrationTest { <nl> <nl> @ Override <nl> public void onError ( ObjectServerError error ) { <nl> - assertEquals ( ErrorCode . ACCESS _ DENIED , error . getErrorCode ( ) ) ; <nl> + / / FIXME : Should be 614 , see https : / / github . com / realm / ros / issues / 429 <nl> + assertEquals ( ErrorCode . INVALID _ PARAMETERS , error . getErrorCode ( ) ) ; <nl> looperThread . testComplete ( ) ; <nl> } <nl> } ) ;
NEAREST DIFF (one line): diff - - git a / dependencies . list b / dependencies . list <nl> index 91cfac3 . . 0025e7c 100644 <nl> - - - a / dependencies . list <nl> + + + b / dependencies . list <nl> @ @ - 5 , 4 + 5 , 4 @ @ REALM _ SYNC _ SHA256 = 5e09e54e68e78683e006898f5a703f80e0ee49492fb0f9dc2384fcbbb9f02f <nl> <nl> # Object Server Release used by Integration tests . Installed using NPM . <nl> # Use ` npm view realm - object - server versions ` to get a list of available versions . <nl> - REALM _ OBJECT _ SERVER _ DE _ VERSION = 2 . 0 . 0 - alpha . 34 <nl> + REALM _ OBJECT _ SERVER _ DE _ VERSION = 2 . 0 . 0 - alpha . 35 <nl> diff - - git a / realm / realm - library / src / objectServer / java / io / realm / internal / network / ChangePasswordRequest . java b / realm / realm - library / src / objectServer / java / io / realm / internal / network / ChangePasswordRequest . java <nl> index 6ca1f3a . . 827ec07 100644 <nl> - - - a / realm / realm - library / src / objectServer / java / io / realm / internal / network / ChangePasswordRequest . java <nl> + + + b / realm / realm - library / src / objectServer / java / io / realm / internal / network / ChangePasswordRequest . java <nl> @ @ - 56 , 9 + 56 , 9 @ @ public class ChangePasswordRequest { <nl> public String toJson ( ) { <nl> try { <nl> JSONObject request = new JSONObject ( ) ; <nl> - request . put ( " newPassword " , newPassword ) ; <nl> + request . put ( " new _ password " , newPassword ) ; <nl> if ( userID ! = null ) { <nl> - request . put ( " userId " , userID ) ; <nl> + request . put ( " user _ id " , userID ) ; <nl> } <nl> return request . toString ( ) ; <nl> } catch ( JSONException e ) { <nl> diff - - git a / realm / realm - library / src / objectServer / java / io / realm / internal / network / LookupUserIdResponse . java b / realm / realm - library / src / objectServer / java / io / realm / internal / network / LookupUserIdResponse . java <nl> index eb60bd4 . . a9d93d7 100644 <nl> - - - a / realm / realm - library / src / objectServer / java / io / realm / internal / network / LookupUserIdResponse . java <nl> + + + b / realm / realm - library / src / objectServer / java / io / realm / internal / network / LookupUserIdResponse . java <nl> @ @ - 34 , 8 + 34 , 8 @ @ import okhttp3 . Response ; <nl> * / <nl> public class LookupUserIdResponse extends AuthServerResponse { <nl> <nl> - private static final String JSON _ FIELD _ USER _ ID = " userId " ; <nl> - private static final String JSON _ FIELD _ USER _ IS _ ADMIN = " isAdmin " ; <nl> + private static final String JSON _ FIELD _ USER _ ID = " user _ id " ; <nl> + private static final String JSON _ FIELD _ USER _ IS _ ADMIN = " is _ admin " ; <nl> private static final String JSON _ FIELD _ METADATA = " metadata " ; <nl> <nl> private final String userId ; <nl> diff - - git a / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / AuthTests . java b / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / AuthTests . java <nl> index e14a262 . . 256df2f 100644 <nl> - - - a / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / AuthTests . java <nl> + + + b / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / AuthTests . java <nl> @ @ - 185 , 6 + 185 , 7 @ @ public class AuthTests extends StandardIntegrationTest { <nl> } <nl> <nl> @ Test <nl> + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 335 " ) <nl> public void changePassword ( ) { <nl> String username = UUID . randomUUID ( ) . toString ( ) ; <nl> String originalPassword = " password " ; <nl> @ @ - 204 , 6 + 205 , 7 @ @ public class AuthTests extends StandardIntegrationTest { <nl> } <nl> <nl> @ Test <nl> + @ Ignore ( " See https : / / github . com / realm / ros / issues / 335 " ) <nl> public void changePassword _ using _ admin ( ) { <nl> String username = UUID . randomUUID ( ) . toString ( ) ; <nl> String originalPassword = " password " ; <nl> @ @ - 231 , 6 + 233 , 7 @ @ public class AuthTests extends StandardIntegrationTest { <nl> <nl> @ Test <nl> @ RunTestInLooperThread <nl> + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 335 " ) <nl> public void changePassword _ using _ admin _ async ( ) { <nl> final String username = UUID . randomUUID ( ) . toString ( ) ; <nl> final String originalPassword = " password " ; <nl> @ @ - 595 , 6 + 598 , 7 @ @ public class AuthTests extends StandardIntegrationTest { <nl> } <nl> <nl> @ Test <nl> + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 333 " ) <nl> public void retrieve ( ) { <nl> final SyncUser adminUser = UserFactory . createAdminUser ( Constants . AUTH _ URL ) ; <nl> <nl> @ @ - 618 , 6 + 622 , 7 @ @ public class AuthTests extends StandardIntegrationTest { <nl> / / retrieving a logged out user <nl> @ Test <nl> @ RunTestInLooperThread <nl> + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 333 " ) <nl> public void retrieve _ logout ( ) { <nl> final SyncUser adminUser = UserFactory . createAdminUser ( Constants . AUTH _ URL ) ; <nl> <nl> @ @ - 685 , 6 + 690 , 7 @ @ public class AuthTests extends StandardIntegrationTest { <nl> } <nl> <nl> @ Test <nl> + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 333 " ) <nl> public void retrieve _ notAdmin ( ) { <nl> final String username1 = UUID . randomUUID ( ) . toString ( ) ; <nl> final String password1 = " password " ; <nl> @ @ - 708 , 6 + 714 , 7 @ @ public class AuthTests extends StandardIntegrationTest { <nl> <nl> @ Test <nl> @ RunTestInLooperThread <nl> + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 333 " ) <nl> public void retrieve _ async ( ) { <nl> final String username = UUID . randomUUID ( ) . toString ( ) ; <nl> final String password = " password " ; <nl> diff - - git a / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / utils / UserFactory . java b / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / utils / UserFactory . java <nl> index beb5c0c . . a669b7d 100644 <nl> - - - a / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / utils / UserFactory . java <nl> + + + b / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / utils / UserFactory . java <nl> @ @ - 92 , 23 + 92 , 7 @ @ public class UserFactory { <nl> / / ` admin ` required as user identifier to be granted admin rights . <nl> / / ROS 2 . 0 comes with a default admin user named " realm - admin " with password " " . <nl> SyncCredentials credentials = SyncCredentials . usernamePassword ( " realm - admin " , " " , false ) ; <nl> - int attempts = 3 ; <nl> - while ( attempts > 0 ) { <nl> - attempts - - ; <nl> - try { <nl> - return SyncUser . login ( credentials , authUrl ) ; <nl> - } catch ( ObjectServerError e ) { <nl> - / / ROS default admin user might not be created yet , we need to retry . <nl> - / / Remove this work - around when https : / / github . com / realm / ros / issues / 282 <nl> - / / is fixed . <nl> - if ( e . getErrorCode ( ) ! = ErrorCode . INVALID _ CREDENTIALS ) { <nl> - throw e ; <nl> - } <nl> - SystemClock . sleep ( 1000 ) ; <nl> - } <nl> - } <nl> - <nl> - throw new IllegalStateException ( " Could not login ' realm - admin ' " ) ; <nl> + return SyncUser . login ( credentials , authUrl ) ; <nl> } <nl> <nl> / / Since we don ' t have a reliable way to reset the sync server and client , just use a new user factory for every <nl> @ @ - 165 , 8 + 149 , 10 @ @ public class UserFactory { <nl> for ( SyncUser user : users . values ( ) ) { <nl> user . logout ( ) ; <nl> } <nl> - SystemClock . sleep ( 2000 ) ; / / Remove when https : / / github . com / realm / ros / issues / 304 is fixed <nl> + / / FIXME https : / / github . com / realm / ros / issues / 338 <nl> + SystemClock . sleep ( 2000 ) ; <nl> allUsersLoggedOut . countDown ( ) ; <nl> + <nl> } <nl> } ) ; <nl> TestHelper . awaitOrFail ( allUsersLoggedOut ) ;

TEST DIFF:
diff - - git a / dependencies . list b / dependencies . list 
 index c7acfe2 . . 3a595eb 100644 
 - - - a / dependencies . list 
 + + + b / dependencies . list 
 @ @ - 5 , 4 + 5 , 4 @ @ REALM _ SYNC _ SHA256 = 3a558b10ecab3e8dbf6cbceae7fe40af38ad8d8467ddd1fe036ce92c1e7810 
 
 # Object Server Release used by Integration tests . Installed using NPM . 
 # Use ` npm view realm - object - server versions ` to get a list of available versions . 
 - REALM _ OBJECT _ SERVER _ DE _ VERSION = 2 . 0 . 0 - alpha . 44 
 + REALM _ OBJECT _ SERVER _ DE _ VERSION = 2 . 0 . 0 - alpha . 46 
 diff - - git a / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java b / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java 
 index 5d5b06f . . 070f9fa 100644 
 - - - a / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java 
 + + + b / realm / realm - library / src / syncIntegrationTest / java / io / realm / PermissionManagerTests . java 
 @ @ - 649 , 7 + 649 , 6 @ @ public class PermissionManagerTests extends StandardIntegrationTest { 
 
 @ Test 
 @ RunTestInLooperThread ( emulateMainThread = true ) 
 - @ Ignore ( " See https : / / github . com / realm / ros / issues / 429 " ) 
 public void applyPermissions _ wrongUrlFails ( ) { 
 String wrongUrl = createRemoteRealm ( user , " test " ) + " - notexisting " ; 
 
 @ @ - 670 , 7 + 669 , 8 @ @ public class PermissionManagerTests extends StandardIntegrationTest { 
 
 @ Override 
 public void onError ( ObjectServerError error ) { 
 - assertEquals ( ErrorCode . ACCESS _ DENIED , error . getErrorCode ( ) ) ; 
 + / / FIXME : Should be 614 , see https : / / github . com / realm / ros / issues / 429 
 + assertEquals ( ErrorCode . INVALID _ PARAMETERS , error . getErrorCode ( ) ) ; 
 looperThread . testComplete ( ) ; 
 } 
 } ) ;

NEAREST DIFF:
diff - - git a / dependencies . list b / dependencies . list 
 index 91cfac3 . . 0025e7c 100644 
 - - - a / dependencies . list 
 + + + b / dependencies . list 
 @ @ - 5 , 4 + 5 , 4 @ @ REALM _ SYNC _ SHA256 = 5e09e54e68e78683e006898f5a703f80e0ee49492fb0f9dc2384fcbbb9f02f 
 
 # Object Server Release used by Integration tests . Installed using NPM . 
 # Use ` npm view realm - object - server versions ` to get a list of available versions . 
 - REALM _ OBJECT _ SERVER _ DE _ VERSION = 2 . 0 . 0 - alpha . 34 
 + REALM _ OBJECT _ SERVER _ DE _ VERSION = 2 . 0 . 0 - alpha . 35 
 diff - - git a / realm / realm - library / src / objectServer / java / io / realm / internal / network / ChangePasswordRequest . java b / realm / realm - library / src / objectServer / java / io / realm / internal / network / ChangePasswordRequest . java 
 index 6ca1f3a . . 827ec07 100644 
 - - - a / realm / realm - library / src / objectServer / java / io / realm / internal / network / ChangePasswordRequest . java 
 + + + b / realm / realm - library / src / objectServer / java / io / realm / internal / network / ChangePasswordRequest . java 
 @ @ - 56 , 9 + 56 , 9 @ @ public class ChangePasswordRequest { 
 public String toJson ( ) { 
 try { 
 JSONObject request = new JSONObject ( ) ; 
 - request . put ( " newPassword " , newPassword ) ; 
 + request . put ( " new _ password " , newPassword ) ; 
 if ( userID ! = null ) { 
 - request . put ( " userId " , userID ) ; 
 + request . put ( " user _ id " , userID ) ; 
 } 
 return request . toString ( ) ; 
 } catch ( JSONException e ) { 
 diff - - git a / realm / realm - library / src / objectServer / java / io / realm / internal / network / LookupUserIdResponse . java b / realm / realm - library / src / objectServer / java / io / realm / internal / network / LookupUserIdResponse . java 
 index eb60bd4 . . a9d93d7 100644 
 - - - a / realm / realm - library / src / objectServer / java / io / realm / internal / network / LookupUserIdResponse . java 
 + + + b / realm / realm - library / src / objectServer / java / io / realm / internal / network / LookupUserIdResponse . java 
 @ @ - 34 , 8 + 34 , 8 @ @ import okhttp3 . Response ; 
 * / 
 public class LookupUserIdResponse extends AuthServerResponse { 
 
 - private static final String JSON _ FIELD _ USER _ ID = " userId " ; 
 - private static final String JSON _ FIELD _ USER _ IS _ ADMIN = " isAdmin " ; 
 + private static final String JSON _ FIELD _ USER _ ID = " user _ id " ; 
 + private static final String JSON _ FIELD _ USER _ IS _ ADMIN = " is _ admin " ; 
 private static final String JSON _ FIELD _ METADATA = " metadata " ; 
 
 private final String userId ; 
 diff - - git a / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / AuthTests . java b / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / AuthTests . java 
 index e14a262 . . 256df2f 100644 
 - - - a / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / AuthTests . java 
 + + + b / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / AuthTests . java 
 @ @ - 185 , 6 + 185 , 7 @ @ public class AuthTests extends StandardIntegrationTest { 
 } 
 
 @ Test 
 + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 335 " ) 
 public void changePassword ( ) { 
 String username = UUID . randomUUID ( ) . toString ( ) ; 
 String originalPassword = " password " ; 
 @ @ - 204 , 6 + 205 , 7 @ @ public class AuthTests extends StandardIntegrationTest { 
 } 
 
 @ Test 
 + @ Ignore ( " See https : / / github . com / realm / ros / issues / 335 " ) 
 public void changePassword _ using _ admin ( ) { 
 String username = UUID . randomUUID ( ) . toString ( ) ; 
 String originalPassword = " password " ; 
 @ @ - 231 , 6 + 233 , 7 @ @ public class AuthTests extends StandardIntegrationTest { 
 
 @ Test 
 @ RunTestInLooperThread 
 + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 335 " ) 
 public void changePassword _ using _ admin _ async ( ) { 
 final String username = UUID . randomUUID ( ) . toString ( ) ; 
 final String originalPassword = " password " ; 
 @ @ - 595 , 6 + 598 , 7 @ @ public class AuthTests extends StandardIntegrationTest { 
 } 
 
 @ Test 
 + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 333 " ) 
 public void retrieve ( ) { 
 final SyncUser adminUser = UserFactory . createAdminUser ( Constants . AUTH _ URL ) ; 
 
 @ @ - 618 , 6 + 622 , 7 @ @ public class AuthTests extends StandardIntegrationTest { 
 / / retrieving a logged out user 
 @ Test 
 @ RunTestInLooperThread 
 + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 333 " ) 
 public void retrieve _ logout ( ) { 
 final SyncUser adminUser = UserFactory . createAdminUser ( Constants . AUTH _ URL ) ; 
 
 @ @ - 685 , 6 + 690 , 7 @ @ public class AuthTests extends StandardIntegrationTest { 
 } 
 
 @ Test 
 + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 333 " ) 
 public void retrieve _ notAdmin ( ) { 
 final String username1 = UUID . randomUUID ( ) . toString ( ) ; 
 final String password1 = " password " ; 
 @ @ - 708 , 6 + 714 , 7 @ @ public class AuthTests extends StandardIntegrationTest { 
 
 @ Test 
 @ RunTestInLooperThread 
 + @ Ignore ( " Wait for https : / / github . com / realm / ros / issues / 333 " ) 
 public void retrieve _ async ( ) { 
 final String username = UUID . randomUUID ( ) . toString ( ) ; 
 final String password = " password " ; 
 diff - - git a / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / utils / UserFactory . java b / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / utils / UserFactory . java 
 index beb5c0c . . a669b7d 100644 
 - - - a / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / utils / UserFactory . java 
 + + + b / realm / realm - library / src / syncIntegrationTest / java / io / realm / objectserver / utils / UserFactory . java 
 @ @ - 92 , 23 + 92 , 7 @ @ public class UserFactory { 
 / / ` admin ` required as user identifier to be granted admin rights . 
 / / ROS 2 . 0 comes with a default admin user named " realm - admin " with password " " . 
 SyncCredentials credentials = SyncCredentials . usernamePassword ( " realm - admin " , " " , false ) ; 
 - int attempts = 3 ; 
 - while ( attempts > 0 ) { 
 - attempts - - ; 
 - try { 
 - return SyncUser . login ( credentials , authUrl ) ; 
 - } catch ( ObjectServerError e ) { 
 - / / ROS default admin user might not be created yet , we need to retry . 
 - / / Remove this work - around when https : / / github . com / realm / ros / issues / 282 
 - / / is fixed . 
 - if ( e . getErrorCode ( ) ! = ErrorCode . INVALID _ CREDENTIALS ) { 
 - throw e ; 
 - } 
 - SystemClock . sleep ( 1000 ) ; 
 - } 
 - } 
 - 
 - throw new IllegalStateException ( " Could not login ' realm - admin ' " ) ; 
 + return SyncUser . login ( credentials , authUrl ) ; 
 } 
 
 / / Since we don ' t have a reliable way to reset the sync server and client , just use a new user factory for every 
 @ @ - 165 , 8 + 149 , 10 @ @ public class UserFactory { 
 for ( SyncUser user : users . values ( ) ) { 
 user . logout ( ) ; 
 } 
 - SystemClock . sleep ( 2000 ) ; / / Remove when https : / / github . com / realm / ros / issues / 304 is fixed 
 + / / FIXME https : / / github . com / realm / ros / issues / 338 
 + SystemClock . sleep ( 2000 ) ; 
 allUsersLoggedOut . countDown ( ) ; 
 + 
 } 
 } ) ; 
 TestHelper . awaitOrFail ( allUsersLoggedOut ) ;
