BLEU SCORE: 0.029381754016308166

TEST MSG: small code style fix
GENERATED MSG: deleting a handover TableView to avoid memory leaks

TEST DIFF (one line): diff - - git a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> index bfbe404 . . 81f6691 100644 <nl> - - - a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> + + + b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> @ @ - 949 , 7 + 949 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllWithHando <nl> TR _ ENTER ( ) <nl> try { <nl> std : : unique _ ptr < Query > query = getHandoverQuery ( bgSharedGroupPtr , replicationPtr , queryPtr ) ; <nl> - TableRef table = query - > get _ table ( ) ; <nl> + TableRef table = query - > get _ table ( ) ; <nl> if ( ! QUERY _ VALID ( env , query . get ( ) ) | | <nl> ! ROW _ INDEXES _ VALID ( env , table . get ( ) , start , end , limit ) ) { <nl> return 0 ; <nl> @ @ - 974 , 7 + 974 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllSortedWit <nl> std : : unique _ ptr < Query > query = getHandoverQuery ( bgSharedGroupPtr , replicationPtr , queryPtr ) ; <nl> TableRef table = query - > get _ table ( ) ; <nl> <nl> - if ( ! QUERY _ VALID ( env , query . get ( ) ) | | ! ROW _ INDEXES _ VALID ( env , table . get ( ) , start , end , limit ) ) { <nl> + if ( ! ( QUERY _ VALID ( env , query . get ( ) ) & & ROW _ INDEXES _ VALID ( env , table . get ( ) , start , end , limit ) ) ) { <nl> return 0 ; <nl> } <nl> <nl> @ @ - 1073 , 13 + 1073 , 10 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllMultiSort <nl> / / handover the result <nl> std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( bgSharedGroupPtr ) - > export _ for _ handover ( tableView , MutableSourcePayload : : Move ) ; <nl> return reinterpret _ cast < jlong > ( handover . release ( ) ) ; <nl> - <nl> } CATCH _ STD ( ) <nl> return 0 ; <nl> } <nl> <nl> - <nl> - <nl> / / Integer Aggregates <nl> <nl> JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeSumInt (
NEAREST DIFF (one line): diff - - git a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> index 58e920e . . 0a715d5 100644 <nl> - - - a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> + + + b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> @ @ - 889 , 11 + 889 , 13 @ @ std : : unique _ ptr < Query > getHandoverQuery ( jlong bgSharedGroupPtr , jlong replicati <nl> return query ; <nl> } <nl> <nl> + / / queryPtr would be owned and released by this function <nl> JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindWithHandover ( <nl> JNIEnv * env , jobject , jlong bgSharedGroupPtr , jlong replicationPtr , jlong queryPtr , jlong fromTableRow ) <nl> { <nl> TR _ ENTER ( ) <nl> try { <nl> + <nl> std : : unique _ ptr < Query > query = getHandoverQuery ( bgSharedGroupPtr , replicationPtr , queryPtr ) ; <nl> Table * table = query - > get _ table ( ) . get ( ) ; <nl> <nl> @ @ - 940 , 6 + 942 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAll ( <nl> return - 1 ; <nl> } <nl> <nl> + / / queryPtr would be owned and released by this function <nl> JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllWithHandover <nl> ( JNIEnv * env , jobject , jlong bgSharedGroupPtr , jlong replicationPtr , jlong queryPtr , jlong start , jlong end , jlong limit ) <nl> { <nl> @ @ - 957 , 8 + 960 , 9 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllWithHando <nl> TableView * tableView = new TableView ( query - > find _ all ( S ( start ) , S ( end ) , S ( limit ) ) ) ; <nl> <nl> / / handover the result <nl> - std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( <nl> + std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( <nl> bgSharedGroupPtr ) - > export _ for _ handover ( * tableView , MutableSourcePayload : : Move ) ; <nl> + delete tableView ; <nl> return reinterpret _ cast < jlong > ( handover . release ( ) ) ; <nl> } CATCH _ STD ( ) <nl> return 0 ; <nl> @ @ - 1001 , 6 + 1005 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllSortedWit <nl> <nl> / / handover the result <nl> std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( bgSharedGroupPtr ) - > export _ for _ handover ( * tableView , MutableSourcePayload : : Move ) ; <nl> + delete tableView ; <nl> return reinterpret _ cast < jlong > ( handover . release ( ) ) ; <nl> } CATCH _ STD ( ) <nl> return 0 ; <nl> @ @ - 1070 , 6 + 1075 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllMultiSort <nl> <nl> / / handover the result <nl> std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( bgSharedGroupPtr ) - > export _ for _ handover ( * tableView , MutableSourcePayload : : Move ) ; <nl> + delete tableView ; <nl> return reinterpret _ cast < jlong > ( handover . release ( ) ) ; <nl> <nl> } CATCH _ STD ( ) <nl> @ @ - 1466 , 6 + 1472 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeIsNull ( <nl> RELEASE _ ARRAY ( ) <nl> } <nl> <nl> + / / handoverPtr will be released in this function <nl> JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeImportHandoverTableViewIntoSharedGroup <nl> ( JNIEnv * env , jobject , jlong handoverPtr , jlong callerSharedGrpPtr ) <nl> {

TEST DIFF:
diff - - git a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 index bfbe404 . . 81f6691 100644 
 - - - a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 + + + b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 @ @ - 949 , 7 + 949 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllWithHando 
 TR _ ENTER ( ) 
 try { 
 std : : unique _ ptr < Query > query = getHandoverQuery ( bgSharedGroupPtr , replicationPtr , queryPtr ) ; 
 - TableRef table = query - > get _ table ( ) ; 
 + TableRef table = query - > get _ table ( ) ; 
 if ( ! QUERY _ VALID ( env , query . get ( ) ) | | 
 ! ROW _ INDEXES _ VALID ( env , table . get ( ) , start , end , limit ) ) { 
 return 0 ; 
 @ @ - 974 , 7 + 974 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllSortedWit 
 std : : unique _ ptr < Query > query = getHandoverQuery ( bgSharedGroupPtr , replicationPtr , queryPtr ) ; 
 TableRef table = query - > get _ table ( ) ; 
 
 - if ( ! QUERY _ VALID ( env , query . get ( ) ) | | ! ROW _ INDEXES _ VALID ( env , table . get ( ) , start , end , limit ) ) { 
 + if ( ! ( QUERY _ VALID ( env , query . get ( ) ) & & ROW _ INDEXES _ VALID ( env , table . get ( ) , start , end , limit ) ) ) { 
 return 0 ; 
 } 
 
 @ @ - 1073 , 13 + 1073 , 10 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllMultiSort 
 / / handover the result 
 std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( bgSharedGroupPtr ) - > export _ for _ handover ( tableView , MutableSourcePayload : : Move ) ; 
 return reinterpret _ cast < jlong > ( handover . release ( ) ) ; 
 - 
 } CATCH _ STD ( ) 
 return 0 ; 
 } 
 
 - 
 - 
 / / Integer Aggregates 
 
 JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeSumInt (

NEAREST DIFF:
diff - - git a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 index 58e920e . . 0a715d5 100644 
 - - - a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 + + + b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 @ @ - 889 , 11 + 889 , 13 @ @ std : : unique _ ptr < Query > getHandoverQuery ( jlong bgSharedGroupPtr , jlong replicati 
 return query ; 
 } 
 
 + / / queryPtr would be owned and released by this function 
 JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindWithHandover ( 
 JNIEnv * env , jobject , jlong bgSharedGroupPtr , jlong replicationPtr , jlong queryPtr , jlong fromTableRow ) 
 { 
 TR _ ENTER ( ) 
 try { 
 + 
 std : : unique _ ptr < Query > query = getHandoverQuery ( bgSharedGroupPtr , replicationPtr , queryPtr ) ; 
 Table * table = query - > get _ table ( ) . get ( ) ; 
 
 @ @ - 940 , 6 + 942 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAll ( 
 return - 1 ; 
 } 
 
 + / / queryPtr would be owned and released by this function 
 JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllWithHandover 
 ( JNIEnv * env , jobject , jlong bgSharedGroupPtr , jlong replicationPtr , jlong queryPtr , jlong start , jlong end , jlong limit ) 
 { 
 @ @ - 957 , 8 + 960 , 9 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllWithHando 
 TableView * tableView = new TableView ( query - > find _ all ( S ( start ) , S ( end ) , S ( limit ) ) ) ; 
 
 / / handover the result 
 - std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( 
 + std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( 
 bgSharedGroupPtr ) - > export _ for _ handover ( * tableView , MutableSourcePayload : : Move ) ; 
 + delete tableView ; 
 return reinterpret _ cast < jlong > ( handover . release ( ) ) ; 
 } CATCH _ STD ( ) 
 return 0 ; 
 @ @ - 1001 , 6 + 1005 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllSortedWit 
 
 / / handover the result 
 std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( bgSharedGroupPtr ) - > export _ for _ handover ( * tableView , MutableSourcePayload : : Move ) ; 
 + delete tableView ; 
 return reinterpret _ cast < jlong > ( handover . release ( ) ) ; 
 } CATCH _ STD ( ) 
 return 0 ; 
 @ @ - 1070 , 6 + 1075 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindAllMultiSort 
 
 / / handover the result 
 std : : unique _ ptr < SharedGroup : : Handover < TableView > > handover = SG ( bgSharedGroupPtr ) - > export _ for _ handover ( * tableView , MutableSourcePayload : : Move ) ; 
 + delete tableView ; 
 return reinterpret _ cast < jlong > ( handover . release ( ) ) ; 
 
 } CATCH _ STD ( ) 
 @ @ - 1466 , 6 + 1472 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeIsNull ( 
 RELEASE _ ARRAY ( ) 
 } 
 
 + / / handoverPtr will be released in this function 
 JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeImportHandoverTableViewIntoSharedGroup 
 ( JNIEnv * env , jobject , jlong handoverPtr , jlong callerSharedGrpPtr ) 
 {
