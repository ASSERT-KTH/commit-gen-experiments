BLEU SCORE: 0.11598118436136108

TEST MSG: Add release date
GENERATED MSG: Disabling sync / compact combo

TEST DIFF (one line): diff - - git a / CHANGELOG . md b / CHANGELOG . md <nl> index d8b9721 . . 8983a73 100644 <nl> - - - a / CHANGELOG . md <nl> + + + b / CHANGELOG . md <nl> @ @ - 15 , 15 + 15 , 15 @ @ <nl> * None <nl> <nl> <nl> - # # 5 . 8 . 0 ( YYYY - MM - DD ) <nl> + # # 5 . 8 . 0 ( 2018 - 11 - 06 ) <nl> <nl> This release also contains all changes from 5 . 8 . 0 - BETA1 and 5 . 8 . 0 - BETA2 . <nl> <nl> # # # Enhancements <nl> * [ ObjectServer ] Added Subscription class available to Query - based Realms . This exposes a Subscription more directly . This class is in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) . <nl> - * [ ObjectServer ] Added ` Realm . getSubscriptions ( ) ` , ` Realm . getSubscriptions ( String pattern ) ` and ` Realm . getSubscription ` to make it easier to find existing subscriptions . These API ' s are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) <nl> - * [ ObjectServer ] Added ` RealmQuery . subscribe ( ) ` and ` RealmQuery . subscribe ( String name ) ` to subscribe immediately inside a transaction . These API ' s are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) <nl> - * [ ObjectServer ] Added support for subscribing directly inside ` SyncConfiguration . initialData ( ) ` . This can be coupled with ` SyncConfiguration . waitForInitialRemoteData ( ) ` in order to block a Realm from opening until the initial subscriptions are ready and have downloaded data . This API are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) <nl> + * [ ObjectServer ] Added ` Realm . getSubscriptions ( ) ` , ` Realm . getSubscriptions ( String pattern ) ` and ` Realm . getSubscription ` to make it easier to find existing subscriptions . These API ' s are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) <nl> + * [ ObjectServer ] Added ` RealmQuery . subscribe ( ) ` and ` RealmQuery . subscribe ( String name ) ` to subscribe immediately inside a transaction . These API ' s are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) <nl> + * [ ObjectServer ] Added support for subscribing directly inside ` SyncConfiguration . initialData ( ) ` . This can be coupled with ` SyncConfiguration . waitForInitialRemoteData ( ) ` in order to block a Realm from opening until the initial subscriptions are ready and have downloaded data . This API are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) <nl> * [ ObjectServer ] Improved performance when merging changes from the server . <nl> * [ ObjectServer ] Added support for timeouts when uploading or downloading data manually using ` SyncSession . downloadAllServerChanges ( long timeout , TimeUnit unit ) ` and ` SyncSession . uploadAllLocalChanges ( long timeout , TimeUnit unit ) ` . [ # 6073 ] ( https : / / github . com / realm / realm - java / pull / 6073 ) <nl> * [ ObjectServer ] Added support for timing out when downloading initial data for synchronized Realms using ` SyncConfiguration . waitForInitialRemoteData ( long timeout , TimeUnit unit ) ` . [ # 6247 ] ( https : / / github . com / realm / realm - java / issues / 6247 )
NEAREST DIFF (one line): diff - - git a / CHANGELOG . md b / CHANGELOG . md <nl> index 58be2af . . afd128c 100644 <nl> - - - a / CHANGELOG . md <nl> + + + b / CHANGELOG . md <nl> @ @ - 1 , 5 + 1 , 9 @ @ <nl> # # 2 . 2 . 2 <nl> <nl> + # # # Object Server API Changes ( In Beta ) <nl> + <nl> + * Disabled ` Realm . compactRealm ( ) ` when sync is enabled as it might corrupt the Realm ( https : / / github . com / realm / realm - core / issues / 2345 ) . <nl> + <nl> # # # Enhancements <nl> <nl> * All major public classes are now non - final . This is mostly a compromise to <nl> diff - - git a / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java b / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java <nl> index 17b734f . . 938fe33 100644 <nl> - - - a / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java <nl> + + + b / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java <nl> @ @ - 401 , 4 + 401 , 14 @ @ public class SyncConfigurationTests { <nl> String configStr = config . toString ( ) ; <nl> assertTrue ( configStr ! = null & & ! configStr . isEmpty ( ) ) ; <nl> } <nl> + <nl> + / / FIXME : This test can be removed when https : / / github . com / realm / realm - core / issues / 2345 is resolved <nl> + @ Test ( expected = UnsupportedOperationException . class ) <nl> + public void compact _ NotAllowed ( ) { <nl> + SyncUser user = createTestUser ( ) ; <nl> + String url = " realm : / / objectserver . realm . io / default " ; <nl> + SyncConfiguration config = new SyncConfiguration . Builder ( user , url ) . build ( ) ; <nl> + <nl> + Realm . compactRealm ( config ) ; <nl> + } <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / Realm . java b / realm / realm - library / src / main / java / io / realm / Realm . java <nl> index f74055d . . 81c4bde 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / Realm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / Realm . java <nl> @ @ - 1555 , 10 + 1555 , 13 @ @ public class Realm extends BaseRealm { <nl> * <nl> * @ param configuration a { @ link RealmConfiguration } pointing to a Realm file . <nl> * @ return { @ code true } if successful , { @ code false } if any file operation failed . <nl> - * @ throws IllegalArgumentException if the realm file is encrypted . Compacting an encrypted Realm file is not <nl> - * supported yet . <nl> + * @ throws UnsupportedOperationException if Realm is synchronized . <nl> * / <nl> public static boolean compactRealm ( RealmConfiguration configuration ) { <nl> + / / FIXME : remove this restriction when https : / / github . com / realm / realm - core / issues / 2345 is resolved <nl> + if ( configuration . isSyncConfiguration ( ) ) { <nl> + throw new UnsupportedOperationException ( " Compacting is not supported yet on synced Realms . See https : / / github . com / realm / realm - core / issues / 2345 " ) ; <nl> + } <nl> return BaseRealm . compactRealm ( configuration ) ; <nl> } <nl>

TEST DIFF:
diff - - git a / CHANGELOG . md b / CHANGELOG . md 
 index d8b9721 . . 8983a73 100644 
 - - - a / CHANGELOG . md 
 + + + b / CHANGELOG . md 
 @ @ - 15 , 15 + 15 , 15 @ @ 
 * None 
 
 
 - # # 5 . 8 . 0 ( YYYY - MM - DD ) 
 + # # 5 . 8 . 0 ( 2018 - 11 - 06 ) 
 
 This release also contains all changes from 5 . 8 . 0 - BETA1 and 5 . 8 . 0 - BETA2 . 
 
 # # # Enhancements 
 * [ ObjectServer ] Added Subscription class available to Query - based Realms . This exposes a Subscription more directly . This class is in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) . 
 - * [ ObjectServer ] Added ` Realm . getSubscriptions ( ) ` , ` Realm . getSubscriptions ( String pattern ) ` and ` Realm . getSubscription ` to make it easier to find existing subscriptions . These API ' s are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) 
 - * [ ObjectServer ] Added ` RealmQuery . subscribe ( ) ` and ` RealmQuery . subscribe ( String name ) ` to subscribe immediately inside a transaction . These API ' s are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) 
 - * [ ObjectServer ] Added support for subscribing directly inside ` SyncConfiguration . initialData ( ) ` . This can be coupled with ` SyncConfiguration . waitForInitialRemoteData ( ) ` in order to block a Realm from opening until the initial subscriptions are ready and have downloaded data . This API are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) 
 + * [ ObjectServer ] Added ` Realm . getSubscriptions ( ) ` , ` Realm . getSubscriptions ( String pattern ) ` and ` Realm . getSubscription ` to make it easier to find existing subscriptions . These API ' s are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) 
 + * [ ObjectServer ] Added ` RealmQuery . subscribe ( ) ` and ` RealmQuery . subscribe ( String name ) ` to subscribe immediately inside a transaction . These API ' s are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) 
 + * [ ObjectServer ] Added support for subscribing directly inside ` SyncConfiguration . initialData ( ) ` . This can be coupled with ` SyncConfiguration . waitForInitialRemoteData ( ) ` in order to block a Realm from opening until the initial subscriptions are ready and have downloaded data . This API are in beta . [ # 6231 ] ( https : / / github . com / realm / realm - java / pull / 6231 ) 
 * [ ObjectServer ] Improved performance when merging changes from the server . 
 * [ ObjectServer ] Added support for timeouts when uploading or downloading data manually using ` SyncSession . downloadAllServerChanges ( long timeout , TimeUnit unit ) ` and ` SyncSession . uploadAllLocalChanges ( long timeout , TimeUnit unit ) ` . [ # 6073 ] ( https : / / github . com / realm / realm - java / pull / 6073 ) 
 * [ ObjectServer ] Added support for timing out when downloading initial data for synchronized Realms using ` SyncConfiguration . waitForInitialRemoteData ( long timeout , TimeUnit unit ) ` . [ # 6247 ] ( https : / / github . com / realm / realm - java / issues / 6247 )

NEAREST DIFF:
diff - - git a / CHANGELOG . md b / CHANGELOG . md 
 index 58be2af . . afd128c 100644 
 - - - a / CHANGELOG . md 
 + + + b / CHANGELOG . md 
 @ @ - 1 , 5 + 1 , 9 @ @ 
 # # 2 . 2 . 2 
 
 + # # # Object Server API Changes ( In Beta ) 
 + 
 + * Disabled ` Realm . compactRealm ( ) ` when sync is enabled as it might corrupt the Realm ( https : / / github . com / realm / realm - core / issues / 2345 ) . 
 + 
 # # # Enhancements 
 
 * All major public classes are now non - final . This is mostly a compromise to 
 diff - - git a / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java b / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java 
 index 17b734f . . 938fe33 100644 
 - - - a / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java 
 + + + b / realm / realm - library / src / androidTestObjectServer / java / io / realm / SyncConfigurationTests . java 
 @ @ - 401 , 4 + 401 , 14 @ @ public class SyncConfigurationTests { 
 String configStr = config . toString ( ) ; 
 assertTrue ( configStr ! = null & & ! configStr . isEmpty ( ) ) ; 
 } 
 + 
 + / / FIXME : This test can be removed when https : / / github . com / realm / realm - core / issues / 2345 is resolved 
 + @ Test ( expected = UnsupportedOperationException . class ) 
 + public void compact _ NotAllowed ( ) { 
 + SyncUser user = createTestUser ( ) ; 
 + String url = " realm : / / objectserver . realm . io / default " ; 
 + SyncConfiguration config = new SyncConfiguration . Builder ( user , url ) . build ( ) ; 
 + 
 + Realm . compactRealm ( config ) ; 
 + } 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / Realm . java b / realm / realm - library / src / main / java / io / realm / Realm . java 
 index f74055d . . 81c4bde 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / Realm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / Realm . java 
 @ @ - 1555 , 10 + 1555 , 13 @ @ public class Realm extends BaseRealm { 
 * 
 * @ param configuration a { @ link RealmConfiguration } pointing to a Realm file . 
 * @ return { @ code true } if successful , { @ code false } if any file operation failed . 
 - * @ throws IllegalArgumentException if the realm file is encrypted . Compacting an encrypted Realm file is not 
 - * supported yet . 
 + * @ throws UnsupportedOperationException if Realm is synchronized . 
 * / 
 public static boolean compactRealm ( RealmConfiguration configuration ) { 
 + / / FIXME : remove this restriction when https : / / github . com / realm / realm - core / issues / 2345 is resolved 
 + if ( configuration . isSyncConfiguration ( ) ) { 
 + throw new UnsupportedOperationException ( " Compacting is not supported yet on synced Realms . See https : / / github . com / realm / realm - core / issues / 2345 " ) ; 
 + } 
 return BaseRealm . compactRealm ( configuration ) ; 
 } 

