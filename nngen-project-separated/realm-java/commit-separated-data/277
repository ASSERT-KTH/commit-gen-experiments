BLEU SCORE: 0.07986788803078405

TEST MSG: migrate deprecated roboelectric ActivityController
GENERATED MSG: Cleanup examples .

TEST DIFF (one line): diff - - git a / examples / unitTestExample / src / test / java / io / realm / examples / unittesting / ExampleActivityTest . java b / examples / unitTestExample / src / test / java / io / realm / examples / unittesting / ExampleActivityTest . java <nl> index d2467a2 . . d4a035c 100644 <nl> - - - a / examples / unitTestExample / src / test / java / io / realm / examples / unittesting / ExampleActivityTest . java <nl> + + + b / examples / unitTestExample / src / test / java / io / realm / examples / unittesting / ExampleActivityTest . java <nl> @ @ - 179 , 16 + 179 , 14 @ @ public class ExampleActivityTest <nl> } <nl> <nl> <nl> - @ Ignore ( " FIXME : Some problems mocking OKHttp " ) <nl> @ Test <nl> public void shouldBeAbleToAccessActivityAndVerifyRealmInteractions ( ) { <nl> doCallRealMethod ( ) . when ( mockRealm ) . executeTransaction ( Mockito . any ( Realm . Transaction . class ) ) ; <nl> <nl> / / Create activity <nl> - ActivityController < ExampleActivity > controller = Robolectric . buildActivity ( ExampleActivity . class ) . setup ( ) ; <nl> - ExampleActivity activity = controller . get ( ) ; <nl> + 	 ExampleActivity activity = Robolectric . buildActivity ( ExampleActivity . class ) . create ( ) . start ( ) . resume ( ) . visible ( ) . get ( ) ; <nl> <nl> - assertThat ( activity . getTitle ( ) . toString ( ) , is ( " Unit Test Example " ) ) ; <nl> + 	 assertThat ( activity . getTitle ( ) . toString ( ) , is ( " Unit Test Example " ) ) ; <nl> <nl> / / Verify that two Realm . getInstance ( ) calls took place . <nl> verifyStatic ( times ( 2 ) ) ; <nl> @ @ - 214 , 7 + 212 , 7 @ @ public class ExampleActivityTest <nl> verify ( mockRealm , times ( 2 ) ) . delete ( Person . class ) ; <nl> <nl> / / Call the destroy method so we can verify that the . close ( ) method was called ( below ) <nl> - controller . destroy ( ) ; <nl> + activity . onDestroy ( ) ; <nl> <nl> / / Verify that the realm got closed 2 separate times . Once in the AsyncTask , once <nl> / / in onDestroy <nl> @ @ - 225 , 15 + 223 , 13 @ @ public class ExampleActivityTest <nl> * Have to verify the transaction execution in a different test because <nl> * of a problem with Powermock : https : / / github . com / jayway / powermock / issues / 649 <nl> * / <nl> - @ Ignore ( " FIXME : Some problems mocking OKHttp " ) <nl> @ Test <nl> public void shouldBeAbleToVerifyTransactionCalls ( ) { <nl> <nl> / / Create activity <nl> - ActivityController < ExampleActivity > controller = Robolectric . buildActivity ( ExampleActivity . class ) . setup ( ) ; <nl> - ExampleActivity activity = controller . get ( ) ; <nl> + 	 ExampleActivity activity = Robolectric . buildActivity ( ExampleActivity . class ) . create ( ) . start ( ) . resume ( ) . visible ( ) . get ( ) ; <nl> <nl> - assertThat ( activity . getTitle ( ) . toString ( ) , is ( " Unit Test Example " ) ) ; <nl> + 	 assertThat ( activity . getTitle ( ) . toString ( ) , is ( " Unit Test Example " ) ) ; <nl> <nl> / / Verify that two Realm . getInstance ( ) calls took place . <nl> verifyStatic ( times ( 2 ) ) ; <nl> @ @ - 251 , 7 + 247 , 7 @ @ public class ExampleActivityTest <nl> verify ( mockRealm , times ( 5 ) ) . executeTransaction ( Mockito . any ( Realm . Transaction . class ) ) ; <nl> <nl> / / Call the destroy method so we can verify that the . close ( ) method was called ( below ) <nl> - controller . destroy ( ) ; <nl> + 	 activity . onDestroy ( ) ; <nl> <nl> / / Verify that the realm got closed 2 separate times . Once in the AsyncTask , once <nl> / / in onDestroy
NEAREST DIFF (one line): diff - - git a / examples / concurrencyExample / src / main / AndroidManifest . xml b / examples / concurrencyExample / src / main / AndroidManifest . xml <nl> index 2a1322c . . 95caacb 100644 <nl> - - - a / examples / concurrencyExample / src / main / AndroidManifest . xml <nl> + + + b / examples / concurrencyExample / src / main / AndroidManifest . xml <nl> @ @ - 9 , 7 + 9 , 7 @ @ <nl> android : theme = " @ style / AppTheme " > <nl> <nl> < activity <nl> - android : name = " . ConcurrencyExampleaActivity " <nl> + android : name = " . ConcurrencyExampleActivity " <nl> android : configChanges = " keyboardHidden | orientation | screenSize " <nl> android : label = " @ string / app _ name " > <nl> < intent - filter > <nl> diff - - git a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java <nl> new file mode 100644 <nl> index 0000000 . . d5f5cf5 <nl> - - - / dev / null <nl> + + + b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java <nl> @ @ - 0 , 0 + 1 , 163 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . concurrency ; <nl> + <nl> + import android . app . Activity ; <nl> + import android . content . Intent ; <nl> + import android . os . Bundle ; <nl> + import android . util . Log ; <nl> + import android . view . View ; <nl> + import android . widget . RadioGroup ; <nl> + import android . widget . TextView ; <nl> + <nl> + import io . realm . Realm ; <nl> + import io . realm . RealmList ; <nl> + import io . realm . examples . concurrency . model . Cat ; <nl> + import io . realm . examples . concurrency . model . Dog ; <nl> + import io . realm . examples . concurrency . model . Person ; <nl> + import io . realm . examples . concurrency . services . SpawningService ; <nl> + import io . realm . examples . concurrency . services . TransactionService ; <nl> + <nl> + public class ConcurrencyExampleActivity extends Activity implements View . OnClickListener { <nl> + <nl> + @ SuppressWarnings ( " UnusedDeclaration " ) <nl> + public static final String TAG = ConcurrencyExampleActivity . class . getName ( ) ; <nl> + <nl> + private Realm realm ; <nl> + <nl> + @ Override <nl> + protected void onCreate ( Bundle savedInstanceState ) { <nl> + super . onCreate ( savedInstanceState ) ; <nl> + setContentView ( R . layout . activity _ realm _ example ) ; <nl> + <nl> + findViewById ( R . id . insert _ record _ button ) . setOnClickListener ( this ) ; <nl> + findViewById ( R . id . quit _ button ) . setOnClickListener ( new View . OnClickListener ( ) { <nl> + @ Override <nl> + public void onClick ( View view ) { <nl> + stopTests ( ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + / / Reset the realm data before starting the tests <nl> + Realm . deleteRealmFile ( this ) ; <nl> + <nl> + / / Acquire a realm object <nl> + realm = Realm . getInstance ( this ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onResume ( ) { <nl> + super . onResume ( ) ; <nl> + startTests ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onStop ( ) { <nl> + super . onStop ( ) ; <nl> + stopTests ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + protected void onDestroy ( ) { <nl> + super . onDestroy ( ) ; <nl> + realm . close ( ) ; / / Remember to close Realm when done . <nl> + } <nl> + <nl> + private void startTests ( ) { <nl> + startSpawnTests ( ) ; <nl> + / / Alternatively can use transaction tests here . . . <nl> + / / startTransactionTests ( ) ; <nl> + } <nl> + <nl> + private void stopTests ( ) { <nl> + stopSpawnTests ( ) ; <nl> + / / Alternatively can use transaction tests here . . . <nl> + / / stopTransactionTests ( ) ; <nl> + } <nl> + <nl> + / / Using the screen form the user can inject into the Realm <nl> + / / even if other threads are creating transactions . <nl> + @ Override <nl> + public void onClick ( View v ) { <nl> + String personName = ( ( TextView ) findViewById ( R . id . name ) ) . getText ( ) . toString ( ) ; <nl> + String personAge = ( ( TextView ) findViewById ( R . id . age ) ) . getText ( ) . toString ( ) ; <nl> + String petName = ( ( TextView ) findViewById ( R . id . pets _ name ) ) . getText ( ) . toString ( ) ; <nl> + <nl> + Integer parseAge ; <nl> + try { <nl> + parseAge = Integer . parseInt ( personAge ) ; <nl> + } catch ( NumberFormatException ignored ) { <nl> + Log . d ( TAG , " Age for a person invalid " ) ; <nl> + return ; <nl> + } <nl> + <nl> + realm . beginTransaction ( ) ; <nl> + Person person = realm . createObject ( Person . class ) ; <nl> + person . setName ( personName ) ; <nl> + person . setAge ( parseAge ) ; <nl> + <nl> + int checkedId = ( ( RadioGroup ) findViewById ( R . id . petType ) ) . getCheckedRadioButtonId ( ) ; <nl> + if ( checkedId = = R . id . hasCat ) { <nl> + Cat cat = realm . createObject ( Cat . class ) ; <nl> + cat . setName ( petName ) ; <nl> + RealmList < Cat > cats = person . getCats ( ) ; <nl> + cats . add ( cat ) ; <nl> + } else if ( checkedId = = R . id . hasDog ) { <nl> + Dog dog = realm . createObject ( Dog . class ) ; <nl> + dog . setName ( petName ) ; <nl> + person . setDog ( dog ) ; <nl> + } <nl> + <nl> + realm . commitTransaction ( ) ; <nl> + <nl> + } <nl> + <nl> + / / The transaction tests are one IntentService running multiple Writes <nl> + / / to a Realm in either a multiple transaction or single transaction loop <nl> + private void startTransactionTests ( ) { <nl> + Intent serviceIntent = new Intent ( this , TransactionService . class ) ; <nl> + serviceIntent . putExtra ( TransactionService . REALM _ TESTTYPE _ EXTRA , <nl> + TransactionService . TestType . MANY _ TRANSACTIONS ) ; <nl> + serviceIntent . putExtra ( TransactionService . ITERATION _ COUNT , 10000000 ) ; <nl> + this . startService ( serviceIntent ) ; <nl> + } <nl> + <nl> + private void stopTransactionTests ( ) { <nl> + Intent serviceIntent = new Intent ( this , TransactionService . class ) ; <nl> + this . stopService ( serviceIntent ) ; <nl> + } <nl> + <nl> + / / The Spawned tests create multiple threads of type Reader or Writer <nl> + / / which loop for a specified count <nl> + private void startSpawnTests ( ) { <nl> + Intent serviceIntent = new Intent ( this , SpawningService . class ) ; <nl> + serviceIntent . putExtra ( SpawningService . REALM _ INSERT _ COUNT _ EXTRA , 10000000 ) ; <nl> + serviceIntent . putExtra ( SpawningService . REALM _ READ _ COUNT _ EXTRA , 10000000 ) ; <nl> + this . startService ( serviceIntent ) ; <nl> + } <nl> + <nl> + private void stopSpawnTests ( ) { <nl> + Intent serviceIntent = new Intent ( this , SpawningService . class ) ; <nl> + this . stopService ( serviceIntent ) ; <nl> + } <nl> + <nl> + @ SuppressWarnings ( " UnusedDeclaration " ) <nl> + private void restartTests ( ) { <nl> + stopTransactionTests ( ) ; <nl> + startTransactionTests ( ) ; <nl> + } <nl> + } <nl> diff - - git a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java <nl> deleted file mode 100644 <nl> index 2fdb867 . . 0000000 <nl> - - - a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java <nl> + + + / dev / null <nl> @ @ - 1 , 163 + 0 , 0 @ @ <nl> - / * <nl> - * Copyright 2014 Realm Inc . <nl> - * <nl> - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> - * you may not use this file except in compliance with the License . <nl> - * You may obtain a copy of the License at <nl> - * <nl> - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> - * <nl> - * Unless required by applicable law or agreed to in writing , software <nl> - * distributed under the License is distributed on an " AS IS " BASIS , <nl> - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> - * See the License for the specific language governing permissions and <nl> - * limitations under the License . <nl> - * / <nl> - <nl> - package io . realm . examples . concurrency ; <nl> - <nl> - import android . app . Activity ; <nl> - import android . content . Intent ; <nl> - import android . os . Bundle ; <nl> - import android . util . Log ; <nl> - import android . view . View ; <nl> - import android . widget . RadioGroup ; <nl> - import android . widget . TextView ; <nl> - <nl> - import io . realm . Realm ; <nl> - import io . realm . RealmList ; <nl> - import io . realm . examples . concurrency . model . Cat ; <nl> - import io . realm . examples . concurrency . model . Dog ; <nl> - import io . realm . examples . concurrency . model . Person ; <nl> - import io . realm . examples . concurrency . services . SpawningService ; <nl> - import io . realm . examples . concurrency . services . TransactionService ; <nl> - <nl> - public class ConcurrencyExampleaActivity extends Activity implements View . OnClickListener { <nl> - <nl> - @ SuppressWarnings ( " UnusedDeclaration " ) <nl> - public static final String TAG = ConcurrencyExampleaActivity . class . getName ( ) ; <nl> - <nl> - private Realm realm ; <nl> - <nl> - @ Override <nl> - protected void onCreate ( Bundle savedInstanceState ) { <nl> - super . onCreate ( savedInstanceState ) ; <nl> - setContentView ( R . layout . activity _ realm _ example ) ; <nl> - <nl> - findViewById ( R . id . insert _ record _ button ) . setOnClickListener ( this ) ; <nl> - findViewById ( R . id . quit _ button ) . setOnClickListener ( new View . OnClickListener ( ) { <nl> - @ Override <nl> - public void onClick ( View view ) { <nl> - stopTests ( ) ; <nl> - } <nl> - } ) ; <nl> - <nl> - / / Reset the realm data before starting the tests <nl> - Realm . deleteRealmFile ( this ) ; <nl> - <nl> - / / Acquire a realm object <nl> - realm = Realm . getInstance ( this ) ; <nl> - } <nl> - <nl> - @ Override <nl> - public void onResume ( ) { <nl> - super . onResume ( ) ; <nl> - startTests ( ) ; <nl> - } <nl> - <nl> - @ Override <nl> - public void onStop ( ) { <nl> - super . onStop ( ) ; <nl> - stopTests ( ) ; <nl> - } <nl> - <nl> - @ Override <nl> - protected void onDestroy ( ) { <nl> - super . onDestroy ( ) ; <nl> - realm . close ( ) ; / / Remember to close Realm when done . <nl> - } <nl> - <nl> - private void startTests ( ) { <nl> - startSpawnTests ( ) ; <nl> - / / Alternatively can use transaction tests here . . . <nl> - / / startTransactionTests ( ) ; <nl> - } <nl> - <nl> - private void stopTests ( ) { <nl> - stopSpawnTests ( ) ; <nl> - / / Alternatively can use transaction tests here . . . <nl> - / / stopTransactionTests ( ) ; <nl> - } <nl> - <nl> - / / Using the screen form the user can inject into the Realm <nl> - / / even if other threads are creating transactions . <nl> - @ Override <nl> - public void onClick ( View v ) { <nl> - String personName = ( ( TextView ) findViewById ( R . id . name ) ) . getText ( ) . toString ( ) ; <nl> - String personAge = ( ( TextView ) findViewById ( R . id . age ) ) . getText ( ) . toString ( ) ; <nl> - String petName = ( ( TextView ) findViewById ( R . id . pets _ name ) ) . getText ( ) . toString ( ) ; <nl> - <nl> - Integer parseAge ; <nl> - try { <nl> - parseAge = Integer . parseInt ( personAge ) ; <nl> - } catch ( NumberFormatException ignored ) { <nl> - Log . d ( TAG , " Age for a person invalid " ) ; <nl> - return ; <nl> - } <nl> - <nl> - realm . beginTransaction ( ) ; <nl> - Person person = realm . createObject ( Person . class ) ; <nl> - person . setName ( personName ) ; <nl> - person . setAge ( parseAge ) ; <nl> - <nl> - int checkedId = ( ( RadioGroup ) findViewById ( R . id . petType ) ) . getCheckedRadioButtonId ( ) ; <nl> - if ( checkedId = = R . id . hasCat ) { <nl> - Cat cat = realm . createObject ( Cat . class ) ; <nl> - cat . setName ( petName ) ; <nl> - RealmList < Cat > cats = person . getCats ( ) ; <nl> - cats . add ( cat ) ; <nl> - } else if ( checkedId = = R . id . hasDog ) { <nl> - Dog dog = realm . createObject ( Dog . class ) ; <nl> - dog . setName ( petName ) ; <nl> - person . setDog ( dog ) ; <nl> - } <nl> - <nl> - realm . commitTransaction ( ) ; <nl> - <nl> - } <nl> - <nl> - / / The transaction tests are one IntentService running multiple Writes <nl> - / / to a Realm in either a multiple transaction or single transaction loop <nl> - private void startTransactionTests ( ) { <nl> - Intent serviceIntent = new Intent ( this , TransactionService . class ) ; <nl> - serviceIntent . putExtra ( TransactionService . REALM _ TESTTYPE _ EXTRA , <nl> - TransactionService . TestType . MANY _ TRANSACTIONS ) ; <nl> - serviceIntent . putExtra ( TransactionService . ITERATION _ COUNT , 10000000 ) ; <nl> - this . startService ( serviceIntent ) ; <nl> - } <nl> - <nl> - private void stopTransactionTests ( ) { <nl> - Intent serviceIntent = new Intent ( this , TransactionService . class ) ; <nl> - this . stopService ( serviceIntent ) ; <nl> - } <nl> - <nl> - / / The Spawned tests create multiple threads of type Reader or Writer <nl> - / / which loop for a specified count <nl> - private void startSpawnTests ( ) { <nl> - Intent serviceIntent = new Intent ( this , SpawningService . class ) ; <nl> - serviceIntent . putExtra ( SpawningService . REALM _ INSERT _ COUNT _ EXTRA , 10000000 ) ; <nl> - serviceIntent . putExtra ( SpawningService . REALM _ READ _ COUNT _ EXTRA , 10000000 ) ; <nl> - this . startService ( serviceIntent ) ; <nl> - } <nl> - <nl> - private void stopSpawnTests ( ) { <nl> - Intent serviceIntent = new Intent ( this , SpawningService . class ) ; <nl> - this . stopService ( serviceIntent ) ; <nl> - } <nl> - <nl> - @ SuppressWarnings ( " UnusedDeclaration " ) <nl> - private void restartTests ( ) { <nl> - stopTransactionTests ( ) ; <nl> - startTransactionTests ( ) ; <nl> - } <nl> - } <nl> diff - - git a / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java b / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java <nl> index 2d9ba42 . . cea77fb 100644 <nl> - - - a / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java <nl> + + + b / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java <nl> @ @ - 31 , 7 + 31 , 6 @ @ import javax . crypto . spec . SecretKeySpec ; <nl> import javax . security . auth . x500 . X500Principal ; <nl> <nl> import io . realm . Realm ; <nl> - import io . realm . internal . IOException ; <nl> <nl> public class EncryptionExampleActivity extends Activity { <nl> <nl> @ @ - 47 , 15 + 46 , 10 @ @ public class EncryptionExampleActivity extends Activity { <nl> / / Throws UnsupportedOperator if not using a copy of Realm with encryption enabled <nl> try { <nl> realm = Realm . getInstance ( this , getKey ( ) ) ; <nl> - } catch ( io . realm . internal . IOException e ) { <nl> - e . printStackTrace ( ) ; <nl> - return ; <nl> - } catch ( java . io . IOException ie ) { <nl> - ie . printStackTrace ( ) ; <nl> - return ; <nl> } catch ( GeneralSecurityException e ) { <nl> e . printStackTrace ( ) ; <nl> - return ; <nl> + } catch ( IOException e ) { <nl> + e . printStackTrace ( ) ; <nl> } <nl> <nl> / / Everything continues to work as normal except for that the file is encrypted on disk <nl> diff - - git a / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java b / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java <nl> index 1550b7b . . 02c4947 100644 <nl> - - - a / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java <nl> + + + b / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java <nl> @ @ - 52 , 7 + 52 , 7 @ @ public class GridViewExampleActivity extends Activity implements AdapterView . OnI <nl> / / Clear the realm from last time <nl> Realm . deleteRealmFile ( this ) ; <nl> <nl> - / / Create a new instance empty instance of Realm <nl> + / / Create a new empty instance of Realm <nl> realm = Realm . getInstance ( this ) ; <nl> } <nl> <nl> diff - - git a / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java b / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java <nl> index d8166f3 . . e772d42 100644 <nl> - - - a / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java <nl> + + + b / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java <nl> @ @ - 63 , 23 + 63 , 25 @ @ public class MigrationExampleActivity extends Activity { <nl> Log . i ( TAG , " Excellent ! This is expected . " ) ; <nl> } <nl> <nl> + Realm realm ; <nl> + <nl> / / So you migrate your data <nl> Realm . migrateRealmAtPath ( path1 , new Migration ( ) ) ; <nl> - Realm realm1 = Realm . getInstance ( this , " default1 " ) ; <nl> - showStatus ( realm1 ) ; <nl> - realm1 . close ( ) ; <nl> + realm = Realm . getInstance ( this , " default1 " ) ; <nl> + showStatus ( realm ) ; <nl> + realm . close ( ) ; <nl> <nl> / / Another migration test <nl> Realm . migrateRealmAtPath ( path2 , new Migration ( ) ) ; <nl> - Realm realm2 = Realm . getInstance ( this , " default2 " ) ; <nl> - showStatus ( realm2 ) ; <nl> - realm2 . close ( ) ; <nl> + realm = Realm . getInstance ( this , " default2 " ) ; <nl> + showStatus ( realm ) ; <nl> + realm . close ( ) ; <nl> <nl> / / and a third : <nl> Realm . migrateRealmAtPath ( path3 , new Migration ( ) ) ; <nl> - Realm realm3 = Realm . getInstance ( this , " default0 " ) ; <nl> - showStatus ( realm3 ) ; <nl> - realm3 . close ( ) ; <nl> + realm = Realm . getInstance ( this , " default3 " ) ; <nl> + showStatus ( realm ) ; <nl> + realm . close ( ) ; <nl> } <nl> <nl> private String copyBundledRealmFile ( InputStream inputStream , String outFileName ) {

TEST DIFF:
diff - - git a / examples / unitTestExample / src / test / java / io / realm / examples / unittesting / ExampleActivityTest . java b / examples / unitTestExample / src / test / java / io / realm / examples / unittesting / ExampleActivityTest . java 
 index d2467a2 . . d4a035c 100644 
 - - - a / examples / unitTestExample / src / test / java / io / realm / examples / unittesting / ExampleActivityTest . java 
 + + + b / examples / unitTestExample / src / test / java / io / realm / examples / unittesting / ExampleActivityTest . java 
 @ @ - 179 , 16 + 179 , 14 @ @ public class ExampleActivityTest 
 } 
 
 
 - @ Ignore ( " FIXME : Some problems mocking OKHttp " ) 
 @ Test 
 public void shouldBeAbleToAccessActivityAndVerifyRealmInteractions ( ) { 
 doCallRealMethod ( ) . when ( mockRealm ) . executeTransaction ( Mockito . any ( Realm . Transaction . class ) ) ; 
 
 / / Create activity 
 - ActivityController < ExampleActivity > controller = Robolectric . buildActivity ( ExampleActivity . class ) . setup ( ) ; 
 - ExampleActivity activity = controller . get ( ) ; 
 + 	 ExampleActivity activity = Robolectric . buildActivity ( ExampleActivity . class ) . create ( ) . start ( ) . resume ( ) . visible ( ) . get ( ) ; 
 
 - assertThat ( activity . getTitle ( ) . toString ( ) , is ( " Unit Test Example " ) ) ; 
 + 	 assertThat ( activity . getTitle ( ) . toString ( ) , is ( " Unit Test Example " ) ) ; 
 
 / / Verify that two Realm . getInstance ( ) calls took place . 
 verifyStatic ( times ( 2 ) ) ; 
 @ @ - 214 , 7 + 212 , 7 @ @ public class ExampleActivityTest 
 verify ( mockRealm , times ( 2 ) ) . delete ( Person . class ) ; 
 
 / / Call the destroy method so we can verify that the . close ( ) method was called ( below ) 
 - controller . destroy ( ) ; 
 + activity . onDestroy ( ) ; 
 
 / / Verify that the realm got closed 2 separate times . Once in the AsyncTask , once 
 / / in onDestroy 
 @ @ - 225 , 15 + 223 , 13 @ @ public class ExampleActivityTest 
 * Have to verify the transaction execution in a different test because 
 * of a problem with Powermock : https : / / github . com / jayway / powermock / issues / 649 
 * / 
 - @ Ignore ( " FIXME : Some problems mocking OKHttp " ) 
 @ Test 
 public void shouldBeAbleToVerifyTransactionCalls ( ) { 
 
 / / Create activity 
 - ActivityController < ExampleActivity > controller = Robolectric . buildActivity ( ExampleActivity . class ) . setup ( ) ; 
 - ExampleActivity activity = controller . get ( ) ; 
 + 	 ExampleActivity activity = Robolectric . buildActivity ( ExampleActivity . class ) . create ( ) . start ( ) . resume ( ) . visible ( ) . get ( ) ; 
 
 - assertThat ( activity . getTitle ( ) . toString ( ) , is ( " Unit Test Example " ) ) ; 
 + 	 assertThat ( activity . getTitle ( ) . toString ( ) , is ( " Unit Test Example " ) ) ; 
 
 / / Verify that two Realm . getInstance ( ) calls took place . 
 verifyStatic ( times ( 2 ) ) ; 
 @ @ - 251 , 7 + 247 , 7 @ @ public class ExampleActivityTest 
 verify ( mockRealm , times ( 5 ) ) . executeTransaction ( Mockito . any ( Realm . Transaction . class ) ) ; 
 
 / / Call the destroy method so we can verify that the . close ( ) method was called ( below ) 
 - controller . destroy ( ) ; 
 + 	 activity . onDestroy ( ) ; 
 
 / / Verify that the realm got closed 2 separate times . Once in the AsyncTask , once 
 / / in onDestroy

NEAREST DIFF:
diff - - git a / examples / concurrencyExample / src / main / AndroidManifest . xml b / examples / concurrencyExample / src / main / AndroidManifest . xml 
 index 2a1322c . . 95caacb 100644 
 - - - a / examples / concurrencyExample / src / main / AndroidManifest . xml 
 + + + b / examples / concurrencyExample / src / main / AndroidManifest . xml 
 @ @ - 9 , 7 + 9 , 7 @ @ 
 android : theme = " @ style / AppTheme " > 
 
 < activity 
 - android : name = " . ConcurrencyExampleaActivity " 
 + android : name = " . ConcurrencyExampleActivity " 
 android : configChanges = " keyboardHidden | orientation | screenSize " 
 android : label = " @ string / app _ name " > 
 < intent - filter > 
 diff - - git a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java 
 new file mode 100644 
 index 0000000 . . d5f5cf5 
 - - - / dev / null 
 + + + b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java 
 @ @ - 0 , 0 + 1 , 163 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . concurrency ; 
 + 
 + import android . app . Activity ; 
 + import android . content . Intent ; 
 + import android . os . Bundle ; 
 + import android . util . Log ; 
 + import android . view . View ; 
 + import android . widget . RadioGroup ; 
 + import android . widget . TextView ; 
 + 
 + import io . realm . Realm ; 
 + import io . realm . RealmList ; 
 + import io . realm . examples . concurrency . model . Cat ; 
 + import io . realm . examples . concurrency . model . Dog ; 
 + import io . realm . examples . concurrency . model . Person ; 
 + import io . realm . examples . concurrency . services . SpawningService ; 
 + import io . realm . examples . concurrency . services . TransactionService ; 
 + 
 + public class ConcurrencyExampleActivity extends Activity implements View . OnClickListener { 
 + 
 + @ SuppressWarnings ( " UnusedDeclaration " ) 
 + public static final String TAG = ConcurrencyExampleActivity . class . getName ( ) ; 
 + 
 + private Realm realm ; 
 + 
 + @ Override 
 + protected void onCreate ( Bundle savedInstanceState ) { 
 + super . onCreate ( savedInstanceState ) ; 
 + setContentView ( R . layout . activity _ realm _ example ) ; 
 + 
 + findViewById ( R . id . insert _ record _ button ) . setOnClickListener ( this ) ; 
 + findViewById ( R . id . quit _ button ) . setOnClickListener ( new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View view ) { 
 + stopTests ( ) ; 
 + } 
 + } ) ; 
 + 
 + / / Reset the realm data before starting the tests 
 + Realm . deleteRealmFile ( this ) ; 
 + 
 + / / Acquire a realm object 
 + realm = Realm . getInstance ( this ) ; 
 + } 
 + 
 + @ Override 
 + public void onResume ( ) { 
 + super . onResume ( ) ; 
 + startTests ( ) ; 
 + } 
 + 
 + @ Override 
 + public void onStop ( ) { 
 + super . onStop ( ) ; 
 + stopTests ( ) ; 
 + } 
 + 
 + @ Override 
 + protected void onDestroy ( ) { 
 + super . onDestroy ( ) ; 
 + realm . close ( ) ; / / Remember to close Realm when done . 
 + } 
 + 
 + private void startTests ( ) { 
 + startSpawnTests ( ) ; 
 + / / Alternatively can use transaction tests here . . . 
 + / / startTransactionTests ( ) ; 
 + } 
 + 
 + private void stopTests ( ) { 
 + stopSpawnTests ( ) ; 
 + / / Alternatively can use transaction tests here . . . 
 + / / stopTransactionTests ( ) ; 
 + } 
 + 
 + / / Using the screen form the user can inject into the Realm 
 + / / even if other threads are creating transactions . 
 + @ Override 
 + public void onClick ( View v ) { 
 + String personName = ( ( TextView ) findViewById ( R . id . name ) ) . getText ( ) . toString ( ) ; 
 + String personAge = ( ( TextView ) findViewById ( R . id . age ) ) . getText ( ) . toString ( ) ; 
 + String petName = ( ( TextView ) findViewById ( R . id . pets _ name ) ) . getText ( ) . toString ( ) ; 
 + 
 + Integer parseAge ; 
 + try { 
 + parseAge = Integer . parseInt ( personAge ) ; 
 + } catch ( NumberFormatException ignored ) { 
 + Log . d ( TAG , " Age for a person invalid " ) ; 
 + return ; 
 + } 
 + 
 + realm . beginTransaction ( ) ; 
 + Person person = realm . createObject ( Person . class ) ; 
 + person . setName ( personName ) ; 
 + person . setAge ( parseAge ) ; 
 + 
 + int checkedId = ( ( RadioGroup ) findViewById ( R . id . petType ) ) . getCheckedRadioButtonId ( ) ; 
 + if ( checkedId = = R . id . hasCat ) { 
 + Cat cat = realm . createObject ( Cat . class ) ; 
 + cat . setName ( petName ) ; 
 + RealmList < Cat > cats = person . getCats ( ) ; 
 + cats . add ( cat ) ; 
 + } else if ( checkedId = = R . id . hasDog ) { 
 + Dog dog = realm . createObject ( Dog . class ) ; 
 + dog . setName ( petName ) ; 
 + person . setDog ( dog ) ; 
 + } 
 + 
 + realm . commitTransaction ( ) ; 
 + 
 + } 
 + 
 + / / The transaction tests are one IntentService running multiple Writes 
 + / / to a Realm in either a multiple transaction or single transaction loop 
 + private void startTransactionTests ( ) { 
 + Intent serviceIntent = new Intent ( this , TransactionService . class ) ; 
 + serviceIntent . putExtra ( TransactionService . REALM _ TESTTYPE _ EXTRA , 
 + TransactionService . TestType . MANY _ TRANSACTIONS ) ; 
 + serviceIntent . putExtra ( TransactionService . ITERATION _ COUNT , 10000000 ) ; 
 + this . startService ( serviceIntent ) ; 
 + } 
 + 
 + private void stopTransactionTests ( ) { 
 + Intent serviceIntent = new Intent ( this , TransactionService . class ) ; 
 + this . stopService ( serviceIntent ) ; 
 + } 
 + 
 + / / The Spawned tests create multiple threads of type Reader or Writer 
 + / / which loop for a specified count 
 + private void startSpawnTests ( ) { 
 + Intent serviceIntent = new Intent ( this , SpawningService . class ) ; 
 + serviceIntent . putExtra ( SpawningService . REALM _ INSERT _ COUNT _ EXTRA , 10000000 ) ; 
 + serviceIntent . putExtra ( SpawningService . REALM _ READ _ COUNT _ EXTRA , 10000000 ) ; 
 + this . startService ( serviceIntent ) ; 
 + } 
 + 
 + private void stopSpawnTests ( ) { 
 + Intent serviceIntent = new Intent ( this , SpawningService . class ) ; 
 + this . stopService ( serviceIntent ) ; 
 + } 
 + 
 + @ SuppressWarnings ( " UnusedDeclaration " ) 
 + private void restartTests ( ) { 
 + stopTransactionTests ( ) ; 
 + startTransactionTests ( ) ; 
 + } 
 + } 
 diff - - git a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java 
 deleted file mode 100644 
 index 2fdb867 . . 0000000 
 - - - a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java 
 + + + / dev / null 
 @ @ - 1 , 163 + 0 , 0 @ @ 
 - / * 
 - * Copyright 2014 Realm Inc . 
 - * 
 - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 - * you may not use this file except in compliance with the License . 
 - * You may obtain a copy of the License at 
 - * 
 - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 - * 
 - * Unless required by applicable law or agreed to in writing , software 
 - * distributed under the License is distributed on an " AS IS " BASIS , 
 - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 - * See the License for the specific language governing permissions and 
 - * limitations under the License . 
 - * / 
 - 
 - package io . realm . examples . concurrency ; 
 - 
 - import android . app . Activity ; 
 - import android . content . Intent ; 
 - import android . os . Bundle ; 
 - import android . util . Log ; 
 - import android . view . View ; 
 - import android . widget . RadioGroup ; 
 - import android . widget . TextView ; 
 - 
 - import io . realm . Realm ; 
 - import io . realm . RealmList ; 
 - import io . realm . examples . concurrency . model . Cat ; 
 - import io . realm . examples . concurrency . model . Dog ; 
 - import io . realm . examples . concurrency . model . Person ; 
 - import io . realm . examples . concurrency . services . SpawningService ; 
 - import io . realm . examples . concurrency . services . TransactionService ; 
 - 
 - public class ConcurrencyExampleaActivity extends Activity implements View . OnClickListener { 
 - 
 - @ SuppressWarnings ( " UnusedDeclaration " ) 
 - public static final String TAG = ConcurrencyExampleaActivity . class . getName ( ) ; 
 - 
 - private Realm realm ; 
 - 
 - @ Override 
 - protected void onCreate ( Bundle savedInstanceState ) { 
 - super . onCreate ( savedInstanceState ) ; 
 - setContentView ( R . layout . activity _ realm _ example ) ; 
 - 
 - findViewById ( R . id . insert _ record _ button ) . setOnClickListener ( this ) ; 
 - findViewById ( R . id . quit _ button ) . setOnClickListener ( new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View view ) { 
 - stopTests ( ) ; 
 - } 
 - } ) ; 
 - 
 - / / Reset the realm data before starting the tests 
 - Realm . deleteRealmFile ( this ) ; 
 - 
 - / / Acquire a realm object 
 - realm = Realm . getInstance ( this ) ; 
 - } 
 - 
 - @ Override 
 - public void onResume ( ) { 
 - super . onResume ( ) ; 
 - startTests ( ) ; 
 - } 
 - 
 - @ Override 
 - public void onStop ( ) { 
 - super . onStop ( ) ; 
 - stopTests ( ) ; 
 - } 
 - 
 - @ Override 
 - protected void onDestroy ( ) { 
 - super . onDestroy ( ) ; 
 - realm . close ( ) ; / / Remember to close Realm when done . 
 - } 
 - 
 - private void startTests ( ) { 
 - startSpawnTests ( ) ; 
 - / / Alternatively can use transaction tests here . . . 
 - / / startTransactionTests ( ) ; 
 - } 
 - 
 - private void stopTests ( ) { 
 - stopSpawnTests ( ) ; 
 - / / Alternatively can use transaction tests here . . . 
 - / / stopTransactionTests ( ) ; 
 - } 
 - 
 - / / Using the screen form the user can inject into the Realm 
 - / / even if other threads are creating transactions . 
 - @ Override 
 - public void onClick ( View v ) { 
 - String personName = ( ( TextView ) findViewById ( R . id . name ) ) . getText ( ) . toString ( ) ; 
 - String personAge = ( ( TextView ) findViewById ( R . id . age ) ) . getText ( ) . toString ( ) ; 
 - String petName = ( ( TextView ) findViewById ( R . id . pets _ name ) ) . getText ( ) . toString ( ) ; 
 - 
 - Integer parseAge ; 
 - try { 
 - parseAge = Integer . parseInt ( personAge ) ; 
 - } catch ( NumberFormatException ignored ) { 
 - Log . d ( TAG , " Age for a person invalid " ) ; 
 - return ; 
 - } 
 - 
 - realm . beginTransaction ( ) ; 
 - Person person = realm . createObject ( Person . class ) ; 
 - person . setName ( personName ) ; 
 - person . setAge ( parseAge ) ; 
 - 
 - int checkedId = ( ( RadioGroup ) findViewById ( R . id . petType ) ) . getCheckedRadioButtonId ( ) ; 
 - if ( checkedId = = R . id . hasCat ) { 
 - Cat cat = realm . createObject ( Cat . class ) ; 
 - cat . setName ( petName ) ; 
 - RealmList < Cat > cats = person . getCats ( ) ; 
 - cats . add ( cat ) ; 
 - } else if ( checkedId = = R . id . hasDog ) { 
 - Dog dog = realm . createObject ( Dog . class ) ; 
 - dog . setName ( petName ) ; 
 - person . setDog ( dog ) ; 
 - } 
 - 
 - realm . commitTransaction ( ) ; 
 - 
 - } 
 - 
 - / / The transaction tests are one IntentService running multiple Writes 
 - / / to a Realm in either a multiple transaction or single transaction loop 
 - private void startTransactionTests ( ) { 
 - Intent serviceIntent = new Intent ( this , TransactionService . class ) ; 
 - serviceIntent . putExtra ( TransactionService . REALM _ TESTTYPE _ EXTRA , 
 - TransactionService . TestType . MANY _ TRANSACTIONS ) ; 
 - serviceIntent . putExtra ( TransactionService . ITERATION _ COUNT , 10000000 ) ; 
 - this . startService ( serviceIntent ) ; 
 - } 
 - 
 - private void stopTransactionTests ( ) { 
 - Intent serviceIntent = new Intent ( this , TransactionService . class ) ; 
 - this . stopService ( serviceIntent ) ; 
 - } 
 - 
 - / / The Spawned tests create multiple threads of type Reader or Writer 
 - / / which loop for a specified count 
 - private void startSpawnTests ( ) { 
 - Intent serviceIntent = new Intent ( this , SpawningService . class ) ; 
 - serviceIntent . putExtra ( SpawningService . REALM _ INSERT _ COUNT _ EXTRA , 10000000 ) ; 
 - serviceIntent . putExtra ( SpawningService . REALM _ READ _ COUNT _ EXTRA , 10000000 ) ; 
 - this . startService ( serviceIntent ) ; 
 - } 
 - 
 - private void stopSpawnTests ( ) { 
 - Intent serviceIntent = new Intent ( this , SpawningService . class ) ; 
 - this . stopService ( serviceIntent ) ; 
 - } 
 - 
 - @ SuppressWarnings ( " UnusedDeclaration " ) 
 - private void restartTests ( ) { 
 - stopTransactionTests ( ) ; 
 - startTransactionTests ( ) ; 
 - } 
 - } 
 diff - - git a / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java b / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java 
 index 2d9ba42 . . cea77fb 100644 
 - - - a / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java 
 + + + b / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java 
 @ @ - 31 , 7 + 31 , 6 @ @ import javax . crypto . spec . SecretKeySpec ; 
 import javax . security . auth . x500 . X500Principal ; 
 
 import io . realm . Realm ; 
 - import io . realm . internal . IOException ; 
 
 public class EncryptionExampleActivity extends Activity { 
 
 @ @ - 47 , 15 + 46 , 10 @ @ public class EncryptionExampleActivity extends Activity { 
 / / Throws UnsupportedOperator if not using a copy of Realm with encryption enabled 
 try { 
 realm = Realm . getInstance ( this , getKey ( ) ) ; 
 - } catch ( io . realm . internal . IOException e ) { 
 - e . printStackTrace ( ) ; 
 - return ; 
 - } catch ( java . io . IOException ie ) { 
 - ie . printStackTrace ( ) ; 
 - return ; 
 } catch ( GeneralSecurityException e ) { 
 e . printStackTrace ( ) ; 
 - return ; 
 + } catch ( IOException e ) { 
 + e . printStackTrace ( ) ; 
 } 
 
 / / Everything continues to work as normal except for that the file is encrypted on disk 
 diff - - git a / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java b / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java 
 index 1550b7b . . 02c4947 100644 
 - - - a / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java 
 + + + b / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java 
 @ @ - 52 , 7 + 52 , 7 @ @ public class GridViewExampleActivity extends Activity implements AdapterView . OnI 
 / / Clear the realm from last time 
 Realm . deleteRealmFile ( this ) ; 
 
 - / / Create a new instance empty instance of Realm 
 + / / Create a new empty instance of Realm 
 realm = Realm . getInstance ( this ) ; 
 } 
 
 diff - - git a / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java b / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java 
 index d8166f3 . . e772d42 100644 
 - - - a / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java 
 + + + b / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java 
 @ @ - 63 , 23 + 63 , 25 @ @ public class MigrationExampleActivity extends Activity { 
 Log . i ( TAG , " Excellent ! This is expected . " ) ; 
 } 
 
 + Realm realm ; 
 + 
 / / So you migrate your data 
 Realm . migrateRealmAtPath ( path1 , new Migration ( ) ) ; 
 - Realm realm1 = Realm . getInstance ( this , " default1 " ) ; 
 - showStatus ( realm1 ) ; 
 - realm1 . close ( ) ; 
 + realm = Realm . getInstance ( this , " default1 " ) ; 
 + showStatus ( realm ) ; 
 + realm . close ( ) ; 
 
 / / Another migration test 
 Realm . migrateRealmAtPath ( path2 , new Migration ( ) ) ; 
 - Realm realm2 = Realm . getInstance ( this , " default2 " ) ; 
 - showStatus ( realm2 ) ; 
 - realm2 . close ( ) ; 
 + realm = Realm . getInstance ( this , " default2 " ) ; 
 + showStatus ( realm ) ; 
 + realm . close ( ) ; 
 
 / / and a third : 
 Realm . migrateRealmAtPath ( path3 , new Migration ( ) ) ; 
 - Realm realm3 = Realm . getInstance ( this , " default0 " ) ; 
 - showStatus ( realm3 ) ; 
 - realm3 . close ( ) ; 
 + realm = Realm . getInstance ( this , " default3 " ) ; 
 + showStatus ( realm ) ; 
 + realm . close ( ) ; 
 } 
 
 private String copyBundledRealmFile ( InputStream inputStream , String outFileName ) {
