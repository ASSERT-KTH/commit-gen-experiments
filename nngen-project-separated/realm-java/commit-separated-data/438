BLEU SCORE: 0.3032653298563167

TEST MSG: Typo fix
GENERATED MSG: Add unsubscribe test

TEST DIFF (one line): diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> index 42d989d . . afd0b47 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> @ @ - 387 , 9 + 387 , 9 @ @ public class RxJavaTests { <nl> subscribedNotified . set ( true ) ; <nl> } <nl> } ) ; <nl> - assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListnersListSize ( ) ) ; <nl> + assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListenersListSize ( ) ) ; <nl> subscription . unsubscribe ( ) ; <nl> - assertEquals ( 0 , realm . sharedRealm . realmNotifier . getListnersListSize ( ) ) ; <nl> + assertEquals ( 0 , realm . sharedRealm . realmNotifier . getListenersListSize ( ) ) ; <nl> } <nl> <nl> @ Test <nl> @ @ - 405 , 7 + 405 , 7 @ @ public class RxJavaTests { <nl> } <nl> } ) ; <nl> assertTrue ( subscribedNotified . get ( ) ) ; <nl> - assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListnersListSize ( ) ) ; <nl> + assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListenersListSize ( ) ) ; <nl> new Thread ( new Runnable ( ) { <nl> @ Override <nl> public void run ( ) { <nl> @ @ - 419 , 7 + 419 , 7 @ @ public class RxJavaTests { <nl> } <nl> } ) . start ( ) ; <nl> TestHelper . awaitOrFail ( unsubscribeCompleted ) ; <nl> - assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListnersListSize ( ) ) ; <nl> + assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListenersListSize ( ) ) ; <nl> / / We cannot call subscription . unsubscribe ( ) again , so manually close the extra Realm instance opened by <nl> / / the Observable . <nl> realm . close ( ) ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / RealmNotifier . java b / realm / realm - library / src / main / java / io / realm / internal / RealmNotifier . java <nl> index 3e5d823 . . eda0e87 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / RealmNotifier . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / RealmNotifier . java <nl> @ @ - 140 , 7 + 140 , 7 @ @ public abstract class RealmNotifier implements Closeable { <nl> * / <nl> public abstract void post ( Runnable runnable ) ; <nl> <nl> - public int getListnersListSize ( ) { <nl> + public int getListenersListSize ( ) { <nl> return realmObserverPairs . size ( ) ; <nl> } <nl> }
NEAREST DIFF (one line): diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> index 6acd7df . . e493313 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> @ @ - 6 , 6 + 6 , 7 @ @ import java . util . concurrent . atomic . AtomicBoolean ; <nl> import java . util . concurrent . atomic . AtomicInteger ; <nl> <nl> import io . realm . entities . AllTypes ; <nl> + import rx . Subscription ; <nl> import rx . functions . Action1 ; <nl> <nl> public class RxJavaTests extends AndroidTestCase { <nl> @ @ - 219 , 4 + 220 , 18 @ @ public class RxJavaTests extends AndroidTestCase { <nl> dynamicRealm . close ( ) ; <nl> } <nl> <nl> + public void testUnsubscribe ( ) { <nl> + final AtomicBoolean subscribedNotified = new AtomicBoolean ( false ) ; <nl> + Subscription subscription = realm . asObservable ( ) . subscribe ( new Action1 < Realm > ( ) { <nl> + @ Override <nl> + public void call ( Realm rxRealm ) { <nl> + assertTrue ( rxRealm = = realm ) ; <nl> + subscribedNotified . set ( true ) ; <nl> + } <nl> + } ) ; <nl> + assertEquals ( 1 , realm . handlerController . changeListeners . size ( ) ) ; <nl> + subscription . unsubscribe ( ) ; <nl> + assertEquals ( 0 , realm . handlerController . changeListeners . size ( ) ) ; <nl> + } <nl> + <nl> }

TEST DIFF:
diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 index 42d989d . . afd0b47 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 @ @ - 387 , 9 + 387 , 9 @ @ public class RxJavaTests { 
 subscribedNotified . set ( true ) ; 
 } 
 } ) ; 
 - assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListnersListSize ( ) ) ; 
 + assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListenersListSize ( ) ) ; 
 subscription . unsubscribe ( ) ; 
 - assertEquals ( 0 , realm . sharedRealm . realmNotifier . getListnersListSize ( ) ) ; 
 + assertEquals ( 0 , realm . sharedRealm . realmNotifier . getListenersListSize ( ) ) ; 
 } 
 
 @ Test 
 @ @ - 405 , 7 + 405 , 7 @ @ public class RxJavaTests { 
 } 
 } ) ; 
 assertTrue ( subscribedNotified . get ( ) ) ; 
 - assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListnersListSize ( ) ) ; 
 + assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListenersListSize ( ) ) ; 
 new Thread ( new Runnable ( ) { 
 @ Override 
 public void run ( ) { 
 @ @ - 419 , 7 + 419 , 7 @ @ public class RxJavaTests { 
 } 
 } ) . start ( ) ; 
 TestHelper . awaitOrFail ( unsubscribeCompleted ) ; 
 - assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListnersListSize ( ) ) ; 
 + assertEquals ( 1 , realm . sharedRealm . realmNotifier . getListenersListSize ( ) ) ; 
 / / We cannot call subscription . unsubscribe ( ) again , so manually close the extra Realm instance opened by 
 / / the Observable . 
 realm . close ( ) ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / RealmNotifier . java b / realm / realm - library / src / main / java / io / realm / internal / RealmNotifier . java 
 index 3e5d823 . . eda0e87 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / RealmNotifier . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / RealmNotifier . java 
 @ @ - 140 , 7 + 140 , 7 @ @ public abstract class RealmNotifier implements Closeable { 
 * / 
 public abstract void post ( Runnable runnable ) ; 
 
 - public int getListnersListSize ( ) { 
 + public int getListenersListSize ( ) { 
 return realmObserverPairs . size ( ) ; 
 } 
 }

NEAREST DIFF:
diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 index 6acd7df . . e493313 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 @ @ - 6 , 6 + 6 , 7 @ @ import java . util . concurrent . atomic . AtomicBoolean ; 
 import java . util . concurrent . atomic . AtomicInteger ; 
 
 import io . realm . entities . AllTypes ; 
 + import rx . Subscription ; 
 import rx . functions . Action1 ; 
 
 public class RxJavaTests extends AndroidTestCase { 
 @ @ - 219 , 4 + 220 , 18 @ @ public class RxJavaTests extends AndroidTestCase { 
 dynamicRealm . close ( ) ; 
 } 
 
 + public void testUnsubscribe ( ) { 
 + final AtomicBoolean subscribedNotified = new AtomicBoolean ( false ) ; 
 + Subscription subscription = realm . asObservable ( ) . subscribe ( new Action1 < Realm > ( ) { 
 + @ Override 
 + public void call ( Realm rxRealm ) { 
 + assertTrue ( rxRealm = = realm ) ; 
 + subscribedNotified . set ( true ) ; 
 + } 
 + } ) ; 
 + assertEquals ( 1 , realm . handlerController . changeListeners . size ( ) ) ; 
 + subscription . unsubscribe ( ) ; 
 + assertEquals ( 0 , realm . handlerController . changeListeners . size ( ) ) ; 
 + } 
 + 
 }
