BLEU SCORE: 0.005774363155184915

TEST MSG: Remove observable interfaces
GENERATED MSG: Create RxJava factory interface , and add it to RealmConfiguration . Reworded Javadoc .

TEST DIFF (one line): diff - - git a / realm / realm - library / src / main / java / io / realm / DynamicRealm . java b / realm / realm - library / src / main / java / io / realm / DynamicRealm . java <nl> index 86c894c . . 852ef13 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / DynamicRealm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / DynamicRealm . java <nl> @ @ - 42 , 7 + 42 , 7 @ @ import rx . Observable ; <nl> * @ see Realm <nl> * @ see RealmSchema <nl> * / <nl> - public class DynamicRealm extends BaseRealm implements RealmObservable < DynamicRealm > { <nl> + public class DynamicRealm extends BaseRealm { <nl> <nl> private DynamicRealm ( RealmConfiguration configuration ) { <nl> super ( configuration ) ; <nl> @ @ - 134 , 23 + 134 , 28 @ @ public class DynamicRealm extends BaseRealm implements RealmObservable < DynamicRe <nl> * @ see # removeAllChangeListeners ( ) <nl> * @ see # waitForChange ( ) <nl> * / <nl> - @ Override <nl> public void addChangeListener ( RealmChangeListener < DynamicRealm > listener ) { <nl> super . addListener ( listener ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes the specified change listener . <nl> + * <nl> + * @ param listener the change listener to be removed . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> public void removeChangeListener ( RealmChangeListener < DynamicRealm > listener ) { <nl> super . removeListener ( listener ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes all user - defined change listeners . <nl> + * <nl> + * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> public void removeAllChangeListeners ( ) { <nl> super . removeAllListeners ( ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / Realm . java b / realm / realm - library / src / main / java / io / realm / Realm . java <nl> index 746dfb8 . . dc69b85 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / Realm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / Realm . java <nl> @ @ - 124 , 7 + 124 , 7 @ @ import rx . Observable ; <nl> * @ see < a href = " http : / / en . wikipedia . org / wiki / ACID " > ACID < / a > <nl> * @ see < a href = " https : / / github . com / realm / realm - java / tree / master / examples " > Examples using Realm < / a > <nl> * / <nl> - public class Realm extends BaseRealm implements RealmObservable < Realm > { <nl> + public class Realm extends BaseRealm { <nl> <nl> public static final String DEFAULT _ REALM _ NAME = RealmConfiguration . DEFAULT _ REALM _ NAME ; <nl> <nl> @ @ - 1281 , 23 + 1281 , 28 @ @ public class Realm extends BaseRealm implements RealmObservable < Realm > { <nl> * @ see # removeChangeListener ( RealmChangeListener ) <nl> * @ see # removeAllChangeListeners ( ) <nl> * / <nl> - @ Override <nl> public void addChangeListener ( RealmChangeListener < Realm > listener ) { <nl> super . addListener ( listener ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes the specified change listener . <nl> + * <nl> + * @ param listener the change listener to be removed . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> public void removeChangeListener ( RealmChangeListener < Realm > listener ) { <nl> super . removeListener ( listener ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes all user - defined change listeners . <nl> + * <nl> + * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> public void removeAllChangeListeners ( ) { <nl> super . removeAllListeners ( ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmCollectionObservable . java b / realm / realm - library / src / main / java / io / realm / RealmCollectionObservable . java <nl> deleted file mode 100644 <nl> index dcb8a5b . . 0000000 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmCollectionObservable . java <nl> + + + / dev / null <nl> @ @ - 1 , 50 + 0 , 0 @ @ <nl> - / * <nl> - * Copyright 2017 Realm Inc . <nl> - * <nl> - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> - * you may not use this file except in compliance with the License . <nl> - * You may obtain a copy of the License at <nl> - * <nl> - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> - * <nl> - * Unless required by applicable law or agreed to in writing , software <nl> - * distributed under the License is distributed on an " AS IS " BASIS , <nl> - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> - * See the License for the specific language governing permissions and <nl> - * limitations under the License . <nl> - * / <nl> - <nl> - package io . realm ; <nl> - <nl> - / * * <nl> - * A collection class implementing this interface is capable of reporting fine - grained notifications about how the <nl> - * collection is changed . It will report insertions , deletions and changes , but not < i > how < / i > an individual element <nl> - * changed . When a change is detected all registered listeners will be triggered . <nl> - * < p > <nl> - * This is often useful when updating UI elements , e . g . { @ code RecyclerView . Adapter } can provide nicer animations and <nl> - * work more effectively if it knows exactly which elements changed . <nl> - * @ see RealmObservable for information about more coarse - grained notifications . <nl> - * @ see < a href = " https : / / realm . io / docs / java / latest / # adapters " > Android Adapters < / a > <nl> - * / <nl> - public interface RealmCollectionObservable < T , S extends OrderedRealmCollectionChangeListener > <nl> - extends RealmObservable < T > { <nl> - / * * <nl> - * Adds a change listener to this { @ link OrderedRealmCollection } . <nl> - * <nl> - * @ param listener the change listener to be notified . <nl> - * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> - * @ throws IllegalStateException if you try to add a listener from a non - Looper or <nl> - * { @ link android . app . IntentService } thread . <nl> - * / <nl> - void addChangeListener ( S listener ) ; <nl> - <nl> - / * * <nl> - * Removes the specified change listener . <nl> - * <nl> - * @ param listener the change listener to be removed . <nl> - * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> - * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . <nl> - * @ see io . realm . RealmChangeListener <nl> - * / <nl> - void removeChangeListener ( S listener ) ; <nl> - } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmList . java b / realm / realm - library / src / main / java / io / realm / RealmList . java <nl> index 3d0c9ff . . eb6c7bd 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmList . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmList . java <nl> @ @ - 49 , 9 + 49 , 7 @ @ import io . realm . internal . RealmObjectProxy ; <nl> * @ param < E > the class of objects in list . <nl> * / <nl> <nl> - public class RealmList < E extends RealmModel > extends AbstractList < E > <nl> - implements OrderedRealmCollection < E > , <nl> - RealmCollectionObservable < RealmList < E > , OrderedRealmCollectionChangeListener < RealmList < E > > > { <nl> + public class RealmList < E extends RealmModel > extends AbstractList < E > implements OrderedRealmCollection < E > { <nl> <nl> private static final String ONLY _ IN _ MANAGED _ MODE _ MESSAGE = " This method is only available in managed mode " ; <nl> private static final String NULL _ OBJECTS _ NOT _ ALLOWED _ MESSAGE = " RealmList does not accept null values " ; <nl> @ @ - 851 , 45 + 849 , 63 @ @ public class RealmList < E extends RealmModel > extends AbstractList < E > <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Adds a change listener to this { @ link RealmList } . <nl> + * <nl> + * @ param listener the change listener to be notified . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to add a listener from a non - Looper or <nl> + * { @ link android . app . IntentService } thread . <nl> * / <nl> - @ Override <nl> public void addChangeListener ( OrderedRealmCollectionChangeListener < RealmList < E > > listener ) { <nl> checkForAddRemoveListener ( listener , true ) ; <nl> collection . addListener ( this , listener ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes the specified change listener . <nl> + * <nl> + * @ param listener the change listener to be removed . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> public void removeChangeListener ( OrderedRealmCollectionChangeListener < RealmList < E > > listener ) { <nl> checkForAddRemoveListener ( listener , true ) ; <nl> collection . removeListener ( this , listener ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Adds a change listener to this { @ link RealmList } . <nl> + * <nl> + * @ param listener the change listener to be notified . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to add a listener from a non - Looper or <nl> + * { @ link android . app . IntentService } thread . <nl> * / <nl> - @ Override <nl> public void addChangeListener ( RealmChangeListener < RealmList < E > > listener ) { <nl> checkForAddRemoveListener ( listener , true ) ; <nl> collection . addListener ( this , listener ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes the specified change listener . <nl> + * <nl> + * @ param listener the change listener to be removed . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> public void removeChangeListener ( RealmChangeListener < RealmList < E > > listener ) { <nl> checkForAddRemoveListener ( listener , true ) ; <nl> collection . removeListener ( this , listener ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes all user - defined change listeners . <nl> + * <nl> + * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> public void removeAllChangeListeners ( ) { <nl> checkForAddRemoveListener ( null , false ) ; <nl> collection . removeAllListeners ( ) ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmObservable . java b / realm / realm - library / src / main / java / io / realm / RealmObservable . java <nl> deleted file mode 100644 <nl> index 6d9e619 . . 0000000 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmObservable . java <nl> + + + / dev / null <nl> @ @ - 1 , 55 + 0 , 0 @ @ <nl> - / * <nl> - * Copyright 2017 Realm Inc . <nl> - * <nl> - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> - * you may not use this file except in compliance with the License . <nl> - * You may obtain a copy of the License at <nl> - * <nl> - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> - * <nl> - * Unless required by applicable law or agreed to in writing , software <nl> - * distributed under the License is distributed on an " AS IS " BASIS , <nl> - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> - * See the License for the specific language governing permissions and <nl> - * limitations under the License . <nl> - * / <nl> - <nl> - package io . realm ; <nl> - <nl> - / * * <nl> - * A class implementing this interface is capable of reporting when the data stored by the class have changed . When that <nl> - * happens all registered { @ link RealmChangeListener } ' s will be triggered . <nl> - * < p > <nl> - * This class will only report that < i > something < / i > changed , not what changed . <nl> - * @ see RealmCollectionObservable for information about more fine - grained collection notifications . <nl> - * / <nl> - public interface RealmObservable < T > { <nl> - / * * <nl> - * Adds a change listener to this { @ link RealmResults } , { @ link RealmList } , { @ link Realm } , { @ link DynamicRealm } or <nl> - * { @ link RealmObject } . <nl> - * <nl> - * @ param listener the change listener to be notified . <nl> - * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> - * @ throws IllegalStateException if you try to add a listener from a non - Looper or <nl> - * { @ link android . app . IntentService } thread . <nl> - * / <nl> - void addChangeListener ( RealmChangeListener < T > listener ) ; <nl> - <nl> - / * * <nl> - * Removes the specified change listener . <nl> - * <nl> - * @ param listener the change listener to be removed . <nl> - * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> - * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . <nl> - * @ see io . realm . RealmChangeListener <nl> - * / <nl> - void removeChangeListener ( RealmChangeListener < T > listener ) ; <nl> - <nl> - / * * <nl> - * Removes all user - defined change listeners . <nl> - * <nl> - * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . <nl> - * @ see io . realm . RealmChangeListener <nl> - * / <nl> - void removeAllChangeListeners ( ) ; <nl> - } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmResults . java b / realm / realm - library / src / main / java / io / realm / RealmResults . java <nl> index d16810c . . bdd4e1a 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmResults . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmResults . java <nl> @ @ - 49 , 8 + 49 , 7 @ @ import rx . Observable ; <nl> * @ see RealmQuery # findAll ( ) <nl> * @ see Realm # executeTransaction ( Realm . Transaction ) <nl> * / <nl> - public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionImpl < E > <nl> - implements RealmCollectionObservable < RealmResults < E > , OrderedRealmCollectionChangeListener < RealmResults < E > > > { <nl> + public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionImpl < E > { <nl> <nl> RealmResults ( BaseRealm realm , Collection collection , Class < E > clazz ) { <nl> super ( realm , collection , clazz ) ; <nl> @ @ - 106 , 15 + 105 , 26 @ @ public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionIm <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Adds a change listener to this { @ link RealmResults } . <nl> + * <nl> + * @ param listener the change listener to be notified . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to add a listener from a non - Looper or <nl> + * { @ link android . app . IntentService } thread . <nl> * / <nl> - @ Override <nl> public void addChangeListener ( RealmChangeListener < RealmResults < E > > listener ) { <nl> checkForAddRemoveListener ( listener , true ) ; <nl> collection . addListener ( this , listener ) ; <nl> } <nl> <nl> - @ Override <nl> + / * * <nl> + * Adds a change listener to this { @ link RealmResults } . <nl> + * <nl> + * @ param listener the change listener to be notified . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to add a listener from a non - Looper or <nl> + * { @ link android . app . IntentService } thread . <nl> + * / <nl> public void addChangeListener ( OrderedRealmCollectionChangeListener < RealmResults < E > > listener ) { <nl> checkForAddRemoveListener ( listener , true ) ; <nl> collection . addListener ( this , listener ) ; <nl> @ @ - 129 , 9 + 139 , 11 @ @ public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionIm <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes all user - defined change listeners . <nl> + * <nl> + * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> public void removeAllChangeListeners ( ) { <nl> checkForAddRemoveListener ( null , false ) ; <nl> collection . removeAllListeners ( ) ; <nl> @ @ - 140 , 21 + 152 , 33 @ @ public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionIm <nl> / * * <nl> * Use { @ link # removeAllChangeListeners ( ) } instead . <nl> * / <nl> + @ SuppressWarnings ( " unused " ) <nl> @ Deprecated <nl> public void removeChangeListeners ( ) { <nl> removeAllChangeListeners ( ) ; <nl> } <nl> <nl> / * * <nl> - * { @ inheritDoc } <nl> + * Removes the specified change listener . <nl> + * <nl> + * @ param listener the change listener to be removed . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> * / <nl> - @ Override <nl> - public void removeChangeListener ( RealmChangeListener listener ) { <nl> + public void removeChangeListener ( RealmChangeListener < RealmResults < E > > listener ) { <nl> checkForAddRemoveListener ( listener , true ) ; <nl> collection . removeListener ( this , listener ) ; <nl> } <nl> <nl> - @ Override <nl> + / * * <nl> + * Removes the specified change listener . <nl> + * <nl> + * @ param listener the change listener to be removed . <nl> + * @ throws IllegalArgumentException if the change listener is { @ code null } . <nl> + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . <nl> + * @ see io . realm . RealmChangeListener <nl> + * / <nl> public void removeChangeListener ( OrderedRealmCollectionChangeListener < RealmResults < E > > listener ) { <nl> checkForAddRemoveListener ( listener , true ) ; <nl> collection . removeListener ( this , listener ) ;
NEAREST DIFF (one line): diff - - git a / realm / realm - library / src / main / java / io / realm / BaseRealm . java b / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> index 5869db2 . . f11d3fa 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> @ @ - 44 , 13 + 44 , 14 @ @ import io . realm . internal . android . DebugAndroidLogger ; <nl> import io . realm . internal . android . ReleaseAndroidLogger ; <nl> import io . realm . internal . async . RealmThreadPoolExecutor ; <nl> import io . realm . internal . log . RealmLog ; <nl> + import rx . Observable ; <nl> <nl> / * * <nl> * Base class for all Realm instances . <nl> * <nl> * @ see io . realm . Realm <nl> * / <nl> - abstract class BaseRealm implements Closeable { <nl> + abstract class BaseRealm < E extends BaseRealm > implements Closeable { <nl> protected static final long UNVERSIONED = - 1 ; <nl> private static final String INCORRECT _ THREAD _ CLOSE _ MESSAGE = " Realm access from incorrect thread . Realm instance can only be closed on the thread it was created . " ; <nl> private static final String INCORRECT _ THREAD _ MESSAGE = " Realm access from incorrect thread . Realm objects can only be accessed on the thread they were created . " ; <nl> @ @ - 179 , 6 + 180 , 19 @ @ abstract class BaseRealm implements Closeable { <nl> } <nl> } <nl> <nl> + / * * <nl> + * Returns an Rx Observable that monitors changes to this realm . It will output the last state when <nl> + * subscribed to . <nl> + * <nl> + * @ return RxJava Observable <nl> + * @ throws UnsupportedOperationException if the required RxJava framework is not on the classpath . <nl> + * @ see < a href = " " > RxJava and Realm < / a > <nl> + * / <nl> + @ SuppressWarnings ( " unchecked " ) <nl> + public Observable < E > observable ( ) { <nl> + return ( Observable < E > ) configuration . getRxFactory ( ) . from ( this ) ; <nl> + } <nl> + <nl> void setHandler ( Handler handler ) { <nl> / / remove the old one <nl> handlers . remove ( this . handler ) ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / Realm . java b / realm / realm - library / src / main / java / io / realm / Realm . java <nl> index 94faa6c . . 0026c7c 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / Realm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / Realm . java <nl> @ @ - 110 , 7 + 110 , 7 @ @ import io . realm . internal . log . RealmLog ; <nl> * @ see < a href = " http : / / en . wikipedia . org / wiki / ACID " > ACID < / a > <nl> * @ see < a href = " https : / / github . com / realm / realm - java / tree / master / examples " > Examples using Realm < / a > <nl> * / <nl> - public final class Realm extends BaseRealm { <nl> + public final class Realm extends BaseRealm < Realm > { <nl> <nl> public static final String DEFAULT _ REALM _ NAME = RealmConfiguration . DEFAULT _ REALM _ NAME ; <nl> <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java b / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java <nl> index 02b20df . . 47221ff 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java <nl> @ @ - 77 , 6 + 77 , 7 @ @ public class RealmConfiguration { <nl> private final boolean deleteRealmIfMigrationNeeded ; <nl> private final SharedGroup . Durability durability ; <nl> private final RealmProxyMediator schemaMediator ; <nl> + private final RxJavaFactory rxObservableFactory ; <nl> <nl> private RealmConfiguration ( Builder builder ) { <nl> this . realmFolder = builder . folder ; <nl> @ @ - 88 , 6 + 89 , 7 @ @ public class RealmConfiguration { <nl> this . migration = builder . migration ; <nl> this . durability = builder . durability ; <nl> this . schemaMediator = createSchemaMediator ( builder ) ; <nl> + this . rxObservableFactory = new RxJavaFactory ( ) ; <nl> } <nl> <nl> public File getRealmFolder ( ) { <nl> @ @ - 126 , 6 + 128 , 10 @ @ public class RealmConfiguration { <nl> return canonicalPath ; <nl> } <nl> <nl> + RxObservableFactory getRxFactory ( ) { <nl> + return rxObservableFactory ; <nl> + } <nl> + <nl> @ Override <nl> public boolean equals ( Object obj ) { <nl> if ( this = = obj ) return true ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmObject . java b / realm / realm - library / src / main / java / io / realm / RealmObject . java <nl> index 2de77d6 . . 65b88ff 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmObject . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmObject . java <nl> @ @ - 26 , 7 + 26 , 6 @ @ import io . realm . internal . Row ; <nl> import io . realm . internal . Table ; <nl> import io . realm . internal . TableQuery ; <nl> import io . realm . internal . log . RealmLog ; <nl> - import io . realm . rx . RxObservableFactory ; <nl> import rx . Observable ; <nl> <nl> / * * <nl> @ @ - 272 , 15 + 271 , 16 @ @ public abstract class RealmObject < E extends RealmObject > { <nl> } <nl> <nl> / * * <nl> - * Returns an RxJava Observable that monitors changes to this object . It will output the last known object when <nl> + * Returns an Rx Observable that monitors changes to this RealmObject . It will output the object when <nl> * subscribed to . <nl> * <nl> * @ return RxJava Observable <nl> - * @ throws UnsupportedOperationException if RxJava is not present . See XXX for more details . <nl> + * @ throws UnsupportedOperationException if the required RxJava framework is not on the classpath . <nl> + * @ see < a href = " " > RxJava and Realm < / a > <nl> * / <nl> + @ SuppressWarnings ( " unchecked " ) <nl> public Observable < E > observable ( ) { <nl> - / / noinspection unchecked <nl> - return RxObservableFactory . from ( ( E ) this ) ; <nl> + return realm . configuration . getRxFactory ( ) . from ( ( E ) this ) ; <nl> } <nl> <nl> / * * <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmResults . java b / realm / realm - library / src / main / java / io / realm / RealmResults . java <nl> index 8726922 . . 8cd91f7 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmResults . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmResults . java <nl> @ @ - 34 , 7 + 34 , 6 @ @ import io . realm . internal . TableOrView ; <nl> import io . realm . internal . TableQuery ; <nl> import io . realm . internal . TableView ; <nl> import io . realm . internal . log . RealmLog ; <nl> - import io . realm . rx . RxObservableFactory ; <nl> import rx . Observable ; <nl> <nl> / * * <nl> @ @ - 811 , 15 + 810 , 15 @ @ public final class RealmResults < E extends RealmObject > extends AbstractList < E > { <nl> } <nl> <nl> / * * <nl> - * Returns an RxJava Observable that monitors changes to this object . It will output the last known object when <nl> + * Returns an Rx Observable that monitors changes to this RealmResults . It will output the last results when <nl> * subscribed to . <nl> * <nl> * @ return RxJava Observable <nl> - * @ throws UnsupportedOperationException if RxJava is not present . See XXX for more details . <nl> + * @ throws UnsupportedOperationException if the required RxJava framework is not on the classpath . <nl> + * @ see < a href = " " > RxJava and Realm < / a > <nl> * / <nl> public Observable < RealmResults < E > > observable ( ) { <nl> - / / noinspection unchecked <nl> - return RxObservableFactory . from ( this ) ; <nl> + return realm . configuration . getRxFactory ( ) . from ( this ) ; <nl> } <nl> <nl> / * * <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RxJavaFactory . java b / realm / realm - library / src / main / java / io / realm / RxJavaFactory . java <nl> new file mode 100644 <nl> index 0000000 . . 06402e2 <nl> - - - / dev / null <nl> + + + b / realm / realm - library / src / main / java / io / realm / RxJavaFactory . java <nl> @ @ - 0 , 0 + 1 , 134 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm ; <nl> + <nl> + import rx . Observable ; <nl> + import rx . Subscriber ; <nl> + import rx . functions . Action0 ; <nl> + import rx . subscriptions . Subscriptions ; <nl> + <nl> + / * * <nl> + * Factory class for creating Observables for RxJava ( < = 1 . 0 . 15 ) . <nl> + * TODO Test compatibility with RxJava2 / RxMobile <nl> + * / <nl> + public class RxJavaFactory implements RxObservableFactory { <nl> + <nl> + private boolean rxJavaAvailble ; <nl> + <nl> + public RxJavaFactory ( ) { <nl> + try { <nl> + Class . forName ( " rx . Observable " ) ; <nl> + rxJavaAvailble = true ; <nl> + } catch ( ClassNotFoundException ignore ) { <nl> + rxJavaAvailble = false ; <nl> + } <nl> + } <nl> + <nl> + @ Override <nl> + public < E extends BaseRealm > Observable < E > from ( final E realm ) { <nl> + checkRxJavaAvailable ( ) ; <nl> + return Observable . create ( new Observable . OnSubscribe < E > ( ) { <nl> + @ Override <nl> + public void call ( final Subscriber < ? super E > subscriber ) { <nl> + final RealmChangeListener listener = new RealmChangeListener ( ) { <nl> + @ Override <nl> + public void onChange ( ) { <nl> + subscriber . onNext ( realm ) ; <nl> + } <nl> + } ; <nl> + realm . addChangeListener ( listener ) ; <nl> + subscriber . add ( Subscriptions . create ( new Action0 ( ) { <nl> + @ Override <nl> + public void call ( ) { <nl> + realm . removeChangeListener ( listener ) ; <nl> + } <nl> + } ) ) ; <nl> + <nl> + / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest <nl> + / / value . <nl> + subscriber . onNext ( realm ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public < E extends RealmObject < E > > Observable < RealmResults < E > > from ( final RealmResults < E > results ) { <nl> + checkRxJavaAvailable ( ) ; <nl> + return Observable . create ( new Observable . OnSubscribe < RealmResults < E > > ( ) { <nl> + @ Override <nl> + public void call ( final Subscriber < ? super RealmResults < E > > subscriber ) { <nl> + final RealmChangeListener listener = new RealmChangeListener ( ) { <nl> + @ Override <nl> + public void onChange ( ) { <nl> + subscriber . onNext ( results ) ; <nl> + } <nl> + } ; <nl> + results . addChangeListener ( listener ) ; <nl> + subscriber . add ( Subscriptions . create ( new Action0 ( ) { <nl> + @ Override <nl> + public void call ( ) { <nl> + results . removeChangeListener ( listener ) ; <nl> + } <nl> + } ) ) ; <nl> + <nl> + / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest <nl> + / / value . <nl> + subscriber . onNext ( results ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public < E extends RealmObject < E > > Observable < RealmList < E > > from ( RealmList < E > list ) { <nl> + checkRxJavaAvailable ( ) ; <nl> + throw new RuntimeException ( " RealmList does not support change listeners yet , so cannot create an Observable " ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public < E extends RealmObject < E > > Observable < E > from ( final E object ) { <nl> + checkRxJavaAvailable ( ) ; <nl> + return Observable . create ( new Observable . OnSubscribe < E > ( ) { <nl> + @ Override <nl> + public void call ( final Subscriber < ? super E > subscriber ) { <nl> + final RealmChangeListener listener = new RealmChangeListener ( ) { <nl> + @ Override <nl> + public void onChange ( ) { <nl> + subscriber . onNext ( object ) ; <nl> + } <nl> + } ; <nl> + object . addChangeListener ( listener ) ; <nl> + subscriber . add ( Subscriptions . create ( new Action0 ( ) { <nl> + @ Override <nl> + public void call ( ) { <nl> + object . removeChangeListener ( listener ) ; <nl> + } <nl> + } ) ) ; <nl> + <nl> + / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest <nl> + / / value . <nl> + subscriber . onNext ( object ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> + private void checkRxJavaAvailable ( ) { <nl> + if ( rxJavaAvailble ) { <nl> + throw new IllegalStateException ( " RxJava seems to be missing from the classpath . " + <nl> + " Remember to add it as a compile dependency . See XXX for more details . " ) ; <nl> + } <nl> + } <nl> + } <nl> \ No newline at end of file <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RxObservableFactory . java b / realm / realm - library / src / main / java / io / realm / RxObservableFactory . java <nl> new file mode 100644 <nl> index 0000000 . . 0977392 <nl> - - - / dev / null <nl> + + + b / realm / realm - library / src / main / java / io / realm / RxObservableFactory . java <nl> @ @ - 0 , 0 + 1 , 53 @ @ <nl> + package io . realm ; <nl> + <nl> + import rx . Observable ; <nl> + <nl> + / * * <nl> + * Factory interface for creating Rx Observables from Realm classes . <nl> + * / <nl> + public interface RxObservableFactory { <nl> + <nl> + / * * <nl> + * Creates an Observable for a Realm . It should emit the initial state of the Realm when subscribed to and on each <nl> + * update to the Realm . <nl> + * <nl> + * Realm observables are effectively hot observables as Realms auto - update . <nl> + * <nl> + * @ param realm RealmResults to listen to changes for . <nl> + * / <nl> + < E extends BaseRealm > Observable < E > from ( E realm ) ; <nl> + <nl> + / * * <nl> + * Creates an Observable for a RealmResults . It should emit the initial results when subscribed to and on each <nl> + * update to the results . <nl> + * <nl> + * RealmResults observables are effectively hot observables as RealmObjects auto - update . <nl> + * <nl> + * @ param results RealmResults to listen to changes for . <nl> + * @ param < E > Type of RealmObject <nl> + * / <nl> + < E extends RealmObject < E > > Observable < RealmResults < E > > from ( RealmResults < E > results ) ; <nl> + <nl> + / * * <nl> + * Creates an Observable for a RealmList . It should emit the initial list when subscribed to and on each <nl> + * update to the list . <nl> + * <nl> + * RealmList observables are effectively hot observables as RealmLists auto - update . <nl> + * <nl> + * @ param list RealmObject to listen to changes for . <nl> + * @ param < E > Type of RealmObject <nl> + * / <nl> + < E extends RealmObject < E > > Observable < RealmList < E > > from ( RealmList < E > list ) ; <nl> + <nl> + <nl> + / * * <nl> + * Creates an Observable for a RealmObject . It should emit the initial object when subscribed to and on each update <nl> + * to the object . <nl> + * <nl> + * RealmObject observables are effectively hot observables as RealmObjects auto - update . <nl> + * <nl> + * @ param object RealmObject to listen to changes for . <nl> + * @ param < E > Type of RealmObject <nl> + * / <nl> + < E extends RealmObject < E > > Observable < E > from ( E object ) ; <nl> + } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / rx / RxObservableFactory . java b / realm / realm - library / src / main / java / io / realm / rx / RxObservableFactory . java <nl> deleted file mode 100644 <nl> index b5e7da5 . . 0000000 <nl> - - - a / realm / realm - library / src / main / java / io / realm / rx / RxObservableFactory . java <nl> + + + / dev / null <nl> @ @ - 1 , 114 + 0 , 0 @ @ <nl> - / * <nl> - * Copyright 2014 Realm Inc . <nl> - * <nl> - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> - * you may not use this file except in compliance with the License . <nl> - * You may obtain a copy of the License at <nl> - * <nl> - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> - * <nl> - * Unless required by applicable law or agreed to in writing , software <nl> - * distributed under the License is distributed on an " AS IS " BASIS , <nl> - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> - * See the License for the specific language governing permissions and <nl> - * limitations under the License . <nl> - * / <nl> - <nl> - package io . realm . rx ; <nl> - <nl> - import io . realm . RealmChangeListener ; <nl> - import io . realm . RealmList ; <nl> - import io . realm . RealmObject ; <nl> - import io . realm . RealmResults ; <nl> - import rx . Observable ; <nl> - import rx . Subscriber ; <nl> - import rx . functions . Action0 ; <nl> - import rx . subjects . BehaviorSubject ; <nl> - import rx . subscriptions . Subscriptions ; <nl> - <nl> - / / TODO Would it be better ( = more efficient ) to try to reuse RealmChangeListeners across observables ? <nl> - / / TODO Extract factory interface <nl> - / / TODO Convert this class to non - static . Add Configuration option for injecting factory instances , RealmConfiguration is kinda meh . <nl> - public class RxObservableFactory { <nl> - <nl> - / * * <nl> - * Creates an Observable for a RealmObject . It will emit the initial object when subscribed to and on each update <nl> - * to the object . <nl> - * <nl> - * RealmObject observables are effectively hot observables as RealmObjects auto - update . <nl> - * <nl> - * @ param object RealmObject to listen to changes for . <nl> - * @ param < E > Type of RealmObject <nl> - * / <nl> - public static < E extends RealmObject > Observable < E > from ( final E object ) { <nl> - return Observable . create ( new Observable . OnSubscribe < E > ( ) { <nl> - @ Override <nl> - public void call ( final Subscriber < ? super E > subscriber ) { <nl> - final RealmChangeListener listener = new RealmChangeListener ( ) { <nl> - @ Override <nl> - public void onChange ( ) { <nl> - subscriber . onNext ( object ) ; <nl> - } <nl> - } ; <nl> - object . addChangeListener ( listener ) ; <nl> - subscriber . add ( Subscriptions . create ( new Action0 ( ) { <nl> - @ Override <nl> - public void call ( ) { <nl> - object . removeChangeListener ( listener ) ; <nl> - } <nl> - } ) ) ; <nl> - <nl> - / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest <nl> - / / value . This mimics a BehaviorSubject . <nl> - subscriber . onNext ( object ) ; <nl> - } <nl> - } ) ; <nl> - } <nl> - <nl> - / * * <nl> - * Creates an Observable for a RealmResults . It will emit the initial results when subscribed to and on each <nl> - * update to the results . <nl> - * <nl> - * RealmResults observables are effectively hot observables as RealmObjects auto - update . <nl> - * <nl> - * @ param results RealmResults to listen to changes for . <nl> - * @ param < E > Type of RealmObject <nl> - * / <nl> - public static < E extends RealmObject > Observable < RealmResults < E > > from ( final RealmResults < E > results ) { <nl> - return Observable . create ( new Observable . OnSubscribe < RealmResults < E > > ( ) { <nl> - @ Override <nl> - public void call ( final Subscriber < ? super RealmResults < E > > subscriber ) { <nl> - final RealmChangeListener listener = new RealmChangeListener ( ) { <nl> - @ Override <nl> - public void onChange ( ) { <nl> - subscriber . onNext ( results ) ; <nl> - } <nl> - } ; <nl> - results . addChangeListener ( listener ) ; <nl> - subscriber . add ( Subscriptions . create ( new Action0 ( ) { <nl> - @ Override <nl> - public void call ( ) { <nl> - results . removeChangeListener ( listener ) ; <nl> - } <nl> - } ) ) ; <nl> - <nl> - / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest <nl> - / / value . This mimics a BehaviorSubject . <nl> - subscriber . onNext ( results ) ; <nl> - } <nl> - } ) ; <nl> - } <nl> - <nl> - / * * <nl> - * Creates an Observable for a RealmResults . It will emit the initial list when subscribed to and on each <nl> - * update to the list . <nl> - * <nl> - * @ param list RealmObject to listen to changes for . <nl> - * @ param < E > Type of RealmObject <nl> - * / <nl> - public static < E extends RealmObject > Observable < RealmList < E > > from ( final RealmList < E > list ) { <nl> - final BehaviorSubject < RealmList < E > > subject = BehaviorSubject . create ( list ) ; <nl> - / / TODO Need to add ChangeListener to RealmList . Require fine - grained notifications . <nl> - throw new RuntimeException ( " Not supported yet " ) ; <nl> - } <nl> - }

TEST DIFF:
diff - - git a / realm / realm - library / src / main / java / io / realm / DynamicRealm . java b / realm / realm - library / src / main / java / io / realm / DynamicRealm . java 
 index 86c894c . . 852ef13 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / DynamicRealm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / DynamicRealm . java 
 @ @ - 42 , 7 + 42 , 7 @ @ import rx . Observable ; 
 * @ see Realm 
 * @ see RealmSchema 
 * / 
 - public class DynamicRealm extends BaseRealm implements RealmObservable < DynamicRealm > { 
 + public class DynamicRealm extends BaseRealm { 
 
 private DynamicRealm ( RealmConfiguration configuration ) { 
 super ( configuration ) ; 
 @ @ - 134 , 23 + 134 , 28 @ @ public class DynamicRealm extends BaseRealm implements RealmObservable < DynamicRe 
 * @ see # removeAllChangeListeners ( ) 
 * @ see # waitForChange ( ) 
 * / 
 - @ Override 
 public void addChangeListener ( RealmChangeListener < DynamicRealm > listener ) { 
 super . addListener ( listener ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes the specified change listener . 
 + * 
 + * @ param listener the change listener to be removed . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 public void removeChangeListener ( RealmChangeListener < DynamicRealm > listener ) { 
 super . removeListener ( listener ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes all user - defined change listeners . 
 + * 
 + * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 public void removeAllChangeListeners ( ) { 
 super . removeAllListeners ( ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / Realm . java b / realm / realm - library / src / main / java / io / realm / Realm . java 
 index 746dfb8 . . dc69b85 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / Realm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / Realm . java 
 @ @ - 124 , 7 + 124 , 7 @ @ import rx . Observable ; 
 * @ see < a href = " http : / / en . wikipedia . org / wiki / ACID " > ACID < / a > 
 * @ see < a href = " https : / / github . com / realm / realm - java / tree / master / examples " > Examples using Realm < / a > 
 * / 
 - public class Realm extends BaseRealm implements RealmObservable < Realm > { 
 + public class Realm extends BaseRealm { 
 
 public static final String DEFAULT _ REALM _ NAME = RealmConfiguration . DEFAULT _ REALM _ NAME ; 
 
 @ @ - 1281 , 23 + 1281 , 28 @ @ public class Realm extends BaseRealm implements RealmObservable < Realm > { 
 * @ see # removeChangeListener ( RealmChangeListener ) 
 * @ see # removeAllChangeListeners ( ) 
 * / 
 - @ Override 
 public void addChangeListener ( RealmChangeListener < Realm > listener ) { 
 super . addListener ( listener ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes the specified change listener . 
 + * 
 + * @ param listener the change listener to be removed . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 public void removeChangeListener ( RealmChangeListener < Realm > listener ) { 
 super . removeListener ( listener ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes all user - defined change listeners . 
 + * 
 + * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 public void removeAllChangeListeners ( ) { 
 super . removeAllListeners ( ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmCollectionObservable . java b / realm / realm - library / src / main / java / io / realm / RealmCollectionObservable . java 
 deleted file mode 100644 
 index dcb8a5b . . 0000000 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmCollectionObservable . java 
 + + + / dev / null 
 @ @ - 1 , 50 + 0 , 0 @ @ 
 - / * 
 - * Copyright 2017 Realm Inc . 
 - * 
 - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 - * you may not use this file except in compliance with the License . 
 - * You may obtain a copy of the License at 
 - * 
 - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 - * 
 - * Unless required by applicable law or agreed to in writing , software 
 - * distributed under the License is distributed on an " AS IS " BASIS , 
 - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 - * See the License for the specific language governing permissions and 
 - * limitations under the License . 
 - * / 
 - 
 - package io . realm ; 
 - 
 - / * * 
 - * A collection class implementing this interface is capable of reporting fine - grained notifications about how the 
 - * collection is changed . It will report insertions , deletions and changes , but not < i > how < / i > an individual element 
 - * changed . When a change is detected all registered listeners will be triggered . 
 - * < p > 
 - * This is often useful when updating UI elements , e . g . { @ code RecyclerView . Adapter } can provide nicer animations and 
 - * work more effectively if it knows exactly which elements changed . 
 - * @ see RealmObservable for information about more coarse - grained notifications . 
 - * @ see < a href = " https : / / realm . io / docs / java / latest / # adapters " > Android Adapters < / a > 
 - * / 
 - public interface RealmCollectionObservable < T , S extends OrderedRealmCollectionChangeListener > 
 - extends RealmObservable < T > { 
 - / * * 
 - * Adds a change listener to this { @ link OrderedRealmCollection } . 
 - * 
 - * @ param listener the change listener to be notified . 
 - * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 - * @ throws IllegalStateException if you try to add a listener from a non - Looper or 
 - * { @ link android . app . IntentService } thread . 
 - * / 
 - void addChangeListener ( S listener ) ; 
 - 
 - / * * 
 - * Removes the specified change listener . 
 - * 
 - * @ param listener the change listener to be removed . 
 - * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 - * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . 
 - * @ see io . realm . RealmChangeListener 
 - * / 
 - void removeChangeListener ( S listener ) ; 
 - } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmList . java b / realm / realm - library / src / main / java / io / realm / RealmList . java 
 index 3d0c9ff . . eb6c7bd 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmList . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmList . java 
 @ @ - 49 , 9 + 49 , 7 @ @ import io . realm . internal . RealmObjectProxy ; 
 * @ param < E > the class of objects in list . 
 * / 
 
 - public class RealmList < E extends RealmModel > extends AbstractList < E > 
 - implements OrderedRealmCollection < E > , 
 - RealmCollectionObservable < RealmList < E > , OrderedRealmCollectionChangeListener < RealmList < E > > > { 
 + public class RealmList < E extends RealmModel > extends AbstractList < E > implements OrderedRealmCollection < E > { 
 
 private static final String ONLY _ IN _ MANAGED _ MODE _ MESSAGE = " This method is only available in managed mode " ; 
 private static final String NULL _ OBJECTS _ NOT _ ALLOWED _ MESSAGE = " RealmList does not accept null values " ; 
 @ @ - 851 , 45 + 849 , 63 @ @ public class RealmList < E extends RealmModel > extends AbstractList < E > 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Adds a change listener to this { @ link RealmList } . 
 + * 
 + * @ param listener the change listener to be notified . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to add a listener from a non - Looper or 
 + * { @ link android . app . IntentService } thread . 
 * / 
 - @ Override 
 public void addChangeListener ( OrderedRealmCollectionChangeListener < RealmList < E > > listener ) { 
 checkForAddRemoveListener ( listener , true ) ; 
 collection . addListener ( this , listener ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes the specified change listener . 
 + * 
 + * @ param listener the change listener to be removed . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 public void removeChangeListener ( OrderedRealmCollectionChangeListener < RealmList < E > > listener ) { 
 checkForAddRemoveListener ( listener , true ) ; 
 collection . removeListener ( this , listener ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Adds a change listener to this { @ link RealmList } . 
 + * 
 + * @ param listener the change listener to be notified . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to add a listener from a non - Looper or 
 + * { @ link android . app . IntentService } thread . 
 * / 
 - @ Override 
 public void addChangeListener ( RealmChangeListener < RealmList < E > > listener ) { 
 checkForAddRemoveListener ( listener , true ) ; 
 collection . addListener ( this , listener ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes the specified change listener . 
 + * 
 + * @ param listener the change listener to be removed . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 public void removeChangeListener ( RealmChangeListener < RealmList < E > > listener ) { 
 checkForAddRemoveListener ( listener , true ) ; 
 collection . removeListener ( this , listener ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes all user - defined change listeners . 
 + * 
 + * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 public void removeAllChangeListeners ( ) { 
 checkForAddRemoveListener ( null , false ) ; 
 collection . removeAllListeners ( ) ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmObservable . java b / realm / realm - library / src / main / java / io / realm / RealmObservable . java 
 deleted file mode 100644 
 index 6d9e619 . . 0000000 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmObservable . java 
 + + + / dev / null 
 @ @ - 1 , 55 + 0 , 0 @ @ 
 - / * 
 - * Copyright 2017 Realm Inc . 
 - * 
 - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 - * you may not use this file except in compliance with the License . 
 - * You may obtain a copy of the License at 
 - * 
 - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 - * 
 - * Unless required by applicable law or agreed to in writing , software 
 - * distributed under the License is distributed on an " AS IS " BASIS , 
 - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 - * See the License for the specific language governing permissions and 
 - * limitations under the License . 
 - * / 
 - 
 - package io . realm ; 
 - 
 - / * * 
 - * A class implementing this interface is capable of reporting when the data stored by the class have changed . When that 
 - * happens all registered { @ link RealmChangeListener } ' s will be triggered . 
 - * < p > 
 - * This class will only report that < i > something < / i > changed , not what changed . 
 - * @ see RealmCollectionObservable for information about more fine - grained collection notifications . 
 - * / 
 - public interface RealmObservable < T > { 
 - / * * 
 - * Adds a change listener to this { @ link RealmResults } , { @ link RealmList } , { @ link Realm } , { @ link DynamicRealm } or 
 - * { @ link RealmObject } . 
 - * 
 - * @ param listener the change listener to be notified . 
 - * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 - * @ throws IllegalStateException if you try to add a listener from a non - Looper or 
 - * { @ link android . app . IntentService } thread . 
 - * / 
 - void addChangeListener ( RealmChangeListener < T > listener ) ; 
 - 
 - / * * 
 - * Removes the specified change listener . 
 - * 
 - * @ param listener the change listener to be removed . 
 - * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 - * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . 
 - * @ see io . realm . RealmChangeListener 
 - * / 
 - void removeChangeListener ( RealmChangeListener < T > listener ) ; 
 - 
 - / * * 
 - * Removes all user - defined change listeners . 
 - * 
 - * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . 
 - * @ see io . realm . RealmChangeListener 
 - * / 
 - void removeAllChangeListeners ( ) ; 
 - } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmResults . java b / realm / realm - library / src / main / java / io / realm / RealmResults . java 
 index d16810c . . bdd4e1a 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmResults . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmResults . java 
 @ @ - 49 , 8 + 49 , 7 @ @ import rx . Observable ; 
 * @ see RealmQuery # findAll ( ) 
 * @ see Realm # executeTransaction ( Realm . Transaction ) 
 * / 
 - public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionImpl < E > 
 - implements RealmCollectionObservable < RealmResults < E > , OrderedRealmCollectionChangeListener < RealmResults < E > > > { 
 + public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionImpl < E > { 
 
 RealmResults ( BaseRealm realm , Collection collection , Class < E > clazz ) { 
 super ( realm , collection , clazz ) ; 
 @ @ - 106 , 15 + 105 , 26 @ @ public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionIm 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Adds a change listener to this { @ link RealmResults } . 
 + * 
 + * @ param listener the change listener to be notified . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to add a listener from a non - Looper or 
 + * { @ link android . app . IntentService } thread . 
 * / 
 - @ Override 
 public void addChangeListener ( RealmChangeListener < RealmResults < E > > listener ) { 
 checkForAddRemoveListener ( listener , true ) ; 
 collection . addListener ( this , listener ) ; 
 } 
 
 - @ Override 
 + / * * 
 + * Adds a change listener to this { @ link RealmResults } . 
 + * 
 + * @ param listener the change listener to be notified . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to add a listener from a non - Looper or 
 + * { @ link android . app . IntentService } thread . 
 + * / 
 public void addChangeListener ( OrderedRealmCollectionChangeListener < RealmResults < E > > listener ) { 
 checkForAddRemoveListener ( listener , true ) ; 
 collection . addListener ( this , listener ) ; 
 @ @ - 129 , 9 + 139 , 11 @ @ public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionIm 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes all user - defined change listeners . 
 + * 
 + * @ throws IllegalStateException if you try to remove listeners from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 public void removeAllChangeListeners ( ) { 
 checkForAddRemoveListener ( null , false ) ; 
 collection . removeAllListeners ( ) ; 
 @ @ - 140 , 21 + 152 , 33 @ @ public class RealmResults < E extends RealmModel > extends OrderedRealmCollectionIm 
 / * * 
 * Use { @ link # removeAllChangeListeners ( ) } instead . 
 * / 
 + @ SuppressWarnings ( " unused " ) 
 @ Deprecated 
 public void removeChangeListeners ( ) { 
 removeAllChangeListeners ( ) ; 
 } 
 
 / * * 
 - * { @ inheritDoc } 
 + * Removes the specified change listener . 
 + * 
 + * @ param listener the change listener to be removed . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 * / 
 - @ Override 
 - public void removeChangeListener ( RealmChangeListener listener ) { 
 + public void removeChangeListener ( RealmChangeListener < RealmResults < E > > listener ) { 
 checkForAddRemoveListener ( listener , true ) ; 
 collection . removeListener ( this , listener ) ; 
 } 
 
 - @ Override 
 + / * * 
 + * Removes the specified change listener . 
 + * 
 + * @ param listener the change listener to be removed . 
 + * @ throws IllegalArgumentException if the change listener is { @ code null } . 
 + * @ throws IllegalStateException if you try to remove a listener from a non - Looper Thread . 
 + * @ see io . realm . RealmChangeListener 
 + * / 
 public void removeChangeListener ( OrderedRealmCollectionChangeListener < RealmResults < E > > listener ) { 
 checkForAddRemoveListener ( listener , true ) ; 
 collection . removeListener ( this , listener ) ;

NEAREST DIFF:
diff - - git a / realm / realm - library / src / main / java / io / realm / BaseRealm . java b / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 index 5869db2 . . f11d3fa 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 @ @ - 44 , 13 + 44 , 14 @ @ import io . realm . internal . android . DebugAndroidLogger ; 
 import io . realm . internal . android . ReleaseAndroidLogger ; 
 import io . realm . internal . async . RealmThreadPoolExecutor ; 
 import io . realm . internal . log . RealmLog ; 
 + import rx . Observable ; 
 
 / * * 
 * Base class for all Realm instances . 
 * 
 * @ see io . realm . Realm 
 * / 
 - abstract class BaseRealm implements Closeable { 
 + abstract class BaseRealm < E extends BaseRealm > implements Closeable { 
 protected static final long UNVERSIONED = - 1 ; 
 private static final String INCORRECT _ THREAD _ CLOSE _ MESSAGE = " Realm access from incorrect thread . Realm instance can only be closed on the thread it was created . " ; 
 private static final String INCORRECT _ THREAD _ MESSAGE = " Realm access from incorrect thread . Realm objects can only be accessed on the thread they were created . " ; 
 @ @ - 179 , 6 + 180 , 19 @ @ abstract class BaseRealm implements Closeable { 
 } 
 } 
 
 + / * * 
 + * Returns an Rx Observable that monitors changes to this realm . It will output the last state when 
 + * subscribed to . 
 + * 
 + * @ return RxJava Observable 
 + * @ throws UnsupportedOperationException if the required RxJava framework is not on the classpath . 
 + * @ see < a href = " " > RxJava and Realm < / a > 
 + * / 
 + @ SuppressWarnings ( " unchecked " ) 
 + public Observable < E > observable ( ) { 
 + return ( Observable < E > ) configuration . getRxFactory ( ) . from ( this ) ; 
 + } 
 + 
 void setHandler ( Handler handler ) { 
 / / remove the old one 
 handlers . remove ( this . handler ) ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / Realm . java b / realm / realm - library / src / main / java / io / realm / Realm . java 
 index 94faa6c . . 0026c7c 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / Realm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / Realm . java 
 @ @ - 110 , 7 + 110 , 7 @ @ import io . realm . internal . log . RealmLog ; 
 * @ see < a href = " http : / / en . wikipedia . org / wiki / ACID " > ACID < / a > 
 * @ see < a href = " https : / / github . com / realm / realm - java / tree / master / examples " > Examples using Realm < / a > 
 * / 
 - public final class Realm extends BaseRealm { 
 + public final class Realm extends BaseRealm < Realm > { 
 
 public static final String DEFAULT _ REALM _ NAME = RealmConfiguration . DEFAULT _ REALM _ NAME ; 
 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java b / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java 
 index 02b20df . . 47221ff 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java 
 @ @ - 77 , 6 + 77 , 7 @ @ public class RealmConfiguration { 
 private final boolean deleteRealmIfMigrationNeeded ; 
 private final SharedGroup . Durability durability ; 
 private final RealmProxyMediator schemaMediator ; 
 + private final RxJavaFactory rxObservableFactory ; 
 
 private RealmConfiguration ( Builder builder ) { 
 this . realmFolder = builder . folder ; 
 @ @ - 88 , 6 + 89 , 7 @ @ public class RealmConfiguration { 
 this . migration = builder . migration ; 
 this . durability = builder . durability ; 
 this . schemaMediator = createSchemaMediator ( builder ) ; 
 + this . rxObservableFactory = new RxJavaFactory ( ) ; 
 } 
 
 public File getRealmFolder ( ) { 
 @ @ - 126 , 6 + 128 , 10 @ @ public class RealmConfiguration { 
 return canonicalPath ; 
 } 
 
 + RxObservableFactory getRxFactory ( ) { 
 + return rxObservableFactory ; 
 + } 
 + 
 @ Override 
 public boolean equals ( Object obj ) { 
 if ( this = = obj ) return true ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmObject . java b / realm / realm - library / src / main / java / io / realm / RealmObject . java 
 index 2de77d6 . . 65b88ff 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmObject . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmObject . java 
 @ @ - 26 , 7 + 26 , 6 @ @ import io . realm . internal . Row ; 
 import io . realm . internal . Table ; 
 import io . realm . internal . TableQuery ; 
 import io . realm . internal . log . RealmLog ; 
 - import io . realm . rx . RxObservableFactory ; 
 import rx . Observable ; 
 
 / * * 
 @ @ - 272 , 15 + 271 , 16 @ @ public abstract class RealmObject < E extends RealmObject > { 
 } 
 
 / * * 
 - * Returns an RxJava Observable that monitors changes to this object . It will output the last known object when 
 + * Returns an Rx Observable that monitors changes to this RealmObject . It will output the object when 
 * subscribed to . 
 * 
 * @ return RxJava Observable 
 - * @ throws UnsupportedOperationException if RxJava is not present . See XXX for more details . 
 + * @ throws UnsupportedOperationException if the required RxJava framework is not on the classpath . 
 + * @ see < a href = " " > RxJava and Realm < / a > 
 * / 
 + @ SuppressWarnings ( " unchecked " ) 
 public Observable < E > observable ( ) { 
 - / / noinspection unchecked 
 - return RxObservableFactory . from ( ( E ) this ) ; 
 + return realm . configuration . getRxFactory ( ) . from ( ( E ) this ) ; 
 } 
 
 / * * 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmResults . java b / realm / realm - library / src / main / java / io / realm / RealmResults . java 
 index 8726922 . . 8cd91f7 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmResults . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmResults . java 
 @ @ - 34 , 7 + 34 , 6 @ @ import io . realm . internal . TableOrView ; 
 import io . realm . internal . TableQuery ; 
 import io . realm . internal . TableView ; 
 import io . realm . internal . log . RealmLog ; 
 - import io . realm . rx . RxObservableFactory ; 
 import rx . Observable ; 
 
 / * * 
 @ @ - 811 , 15 + 810 , 15 @ @ public final class RealmResults < E extends RealmObject > extends AbstractList < E > { 
 } 
 
 / * * 
 - * Returns an RxJava Observable that monitors changes to this object . It will output the last known object when 
 + * Returns an Rx Observable that monitors changes to this RealmResults . It will output the last results when 
 * subscribed to . 
 * 
 * @ return RxJava Observable 
 - * @ throws UnsupportedOperationException if RxJava is not present . See XXX for more details . 
 + * @ throws UnsupportedOperationException if the required RxJava framework is not on the classpath . 
 + * @ see < a href = " " > RxJava and Realm < / a > 
 * / 
 public Observable < RealmResults < E > > observable ( ) { 
 - / / noinspection unchecked 
 - return RxObservableFactory . from ( this ) ; 
 + return realm . configuration . getRxFactory ( ) . from ( this ) ; 
 } 
 
 / * * 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RxJavaFactory . java b / realm / realm - library / src / main / java / io / realm / RxJavaFactory . java 
 new file mode 100644 
 index 0000000 . . 06402e2 
 - - - / dev / null 
 + + + b / realm / realm - library / src / main / java / io / realm / RxJavaFactory . java 
 @ @ - 0 , 0 + 1 , 134 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm ; 
 + 
 + import rx . Observable ; 
 + import rx . Subscriber ; 
 + import rx . functions . Action0 ; 
 + import rx . subscriptions . Subscriptions ; 
 + 
 + / * * 
 + * Factory class for creating Observables for RxJava ( < = 1 . 0 . 15 ) . 
 + * TODO Test compatibility with RxJava2 / RxMobile 
 + * / 
 + public class RxJavaFactory implements RxObservableFactory { 
 + 
 + private boolean rxJavaAvailble ; 
 + 
 + public RxJavaFactory ( ) { 
 + try { 
 + Class . forName ( " rx . Observable " ) ; 
 + rxJavaAvailble = true ; 
 + } catch ( ClassNotFoundException ignore ) { 
 + rxJavaAvailble = false ; 
 + } 
 + } 
 + 
 + @ Override 
 + public < E extends BaseRealm > Observable < E > from ( final E realm ) { 
 + checkRxJavaAvailable ( ) ; 
 + return Observable . create ( new Observable . OnSubscribe < E > ( ) { 
 + @ Override 
 + public void call ( final Subscriber < ? super E > subscriber ) { 
 + final RealmChangeListener listener = new RealmChangeListener ( ) { 
 + @ Override 
 + public void onChange ( ) { 
 + subscriber . onNext ( realm ) ; 
 + } 
 + } ; 
 + realm . addChangeListener ( listener ) ; 
 + subscriber . add ( Subscriptions . create ( new Action0 ( ) { 
 + @ Override 
 + public void call ( ) { 
 + realm . removeChangeListener ( listener ) ; 
 + } 
 + } ) ) ; 
 + 
 + / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest 
 + / / value . 
 + subscriber . onNext ( realm ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Override 
 + public < E extends RealmObject < E > > Observable < RealmResults < E > > from ( final RealmResults < E > results ) { 
 + checkRxJavaAvailable ( ) ; 
 + return Observable . create ( new Observable . OnSubscribe < RealmResults < E > > ( ) { 
 + @ Override 
 + public void call ( final Subscriber < ? super RealmResults < E > > subscriber ) { 
 + final RealmChangeListener listener = new RealmChangeListener ( ) { 
 + @ Override 
 + public void onChange ( ) { 
 + subscriber . onNext ( results ) ; 
 + } 
 + } ; 
 + results . addChangeListener ( listener ) ; 
 + subscriber . add ( Subscriptions . create ( new Action0 ( ) { 
 + @ Override 
 + public void call ( ) { 
 + results . removeChangeListener ( listener ) ; 
 + } 
 + } ) ) ; 
 + 
 + / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest 
 + / / value . 
 + subscriber . onNext ( results ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Override 
 + public < E extends RealmObject < E > > Observable < RealmList < E > > from ( RealmList < E > list ) { 
 + checkRxJavaAvailable ( ) ; 
 + throw new RuntimeException ( " RealmList does not support change listeners yet , so cannot create an Observable " ) ; 
 + } 
 + 
 + @ Override 
 + public < E extends RealmObject < E > > Observable < E > from ( final E object ) { 
 + checkRxJavaAvailable ( ) ; 
 + return Observable . create ( new Observable . OnSubscribe < E > ( ) { 
 + @ Override 
 + public void call ( final Subscriber < ? super E > subscriber ) { 
 + final RealmChangeListener listener = new RealmChangeListener ( ) { 
 + @ Override 
 + public void onChange ( ) { 
 + subscriber . onNext ( object ) ; 
 + } 
 + } ; 
 + object . addChangeListener ( listener ) ; 
 + subscriber . add ( Subscriptions . create ( new Action0 ( ) { 
 + @ Override 
 + public void call ( ) { 
 + object . removeChangeListener ( listener ) ; 
 + } 
 + } ) ) ; 
 + 
 + / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest 
 + / / value . 
 + subscriber . onNext ( object ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + private void checkRxJavaAvailable ( ) { 
 + if ( rxJavaAvailble ) { 
 + throw new IllegalStateException ( " RxJava seems to be missing from the classpath . " + 
 + " Remember to add it as a compile dependency . See XXX for more details . " ) ; 
 + } 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RxObservableFactory . java b / realm / realm - library / src / main / java / io / realm / RxObservableFactory . java 
 new file mode 100644 
 index 0000000 . . 0977392 
 - - - / dev / null 
 + + + b / realm / realm - library / src / main / java / io / realm / RxObservableFactory . java 
 @ @ - 0 , 0 + 1 , 53 @ @ 
 + package io . realm ; 
 + 
 + import rx . Observable ; 
 + 
 + / * * 
 + * Factory interface for creating Rx Observables from Realm classes . 
 + * / 
 + public interface RxObservableFactory { 
 + 
 + / * * 
 + * Creates an Observable for a Realm . It should emit the initial state of the Realm when subscribed to and on each 
 + * update to the Realm . 
 + * 
 + * Realm observables are effectively hot observables as Realms auto - update . 
 + * 
 + * @ param realm RealmResults to listen to changes for . 
 + * / 
 + < E extends BaseRealm > Observable < E > from ( E realm ) ; 
 + 
 + / * * 
 + * Creates an Observable for a RealmResults . It should emit the initial results when subscribed to and on each 
 + * update to the results . 
 + * 
 + * RealmResults observables are effectively hot observables as RealmObjects auto - update . 
 + * 
 + * @ param results RealmResults to listen to changes for . 
 + * @ param < E > Type of RealmObject 
 + * / 
 + < E extends RealmObject < E > > Observable < RealmResults < E > > from ( RealmResults < E > results ) ; 
 + 
 + / * * 
 + * Creates an Observable for a RealmList . It should emit the initial list when subscribed to and on each 
 + * update to the list . 
 + * 
 + * RealmList observables are effectively hot observables as RealmLists auto - update . 
 + * 
 + * @ param list RealmObject to listen to changes for . 
 + * @ param < E > Type of RealmObject 
 + * / 
 + < E extends RealmObject < E > > Observable < RealmList < E > > from ( RealmList < E > list ) ; 
 + 
 + 
 + / * * 
 + * Creates an Observable for a RealmObject . It should emit the initial object when subscribed to and on each update 
 + * to the object . 
 + * 
 + * RealmObject observables are effectively hot observables as RealmObjects auto - update . 
 + * 
 + * @ param object RealmObject to listen to changes for . 
 + * @ param < E > Type of RealmObject 
 + * / 
 + < E extends RealmObject < E > > Observable < E > from ( E object ) ; 
 + } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / rx / RxObservableFactory . java b / realm / realm - library / src / main / java / io / realm / rx / RxObservableFactory . java 
 deleted file mode 100644 
 index b5e7da5 . . 0000000 
 - - - a / realm / realm - library / src / main / java / io / realm / rx / RxObservableFactory . java 
 + + + / dev / null 
 @ @ - 1 , 114 + 0 , 0 @ @ 
 - / * 
 - * Copyright 2014 Realm Inc . 
 - * 
 - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 - * you may not use this file except in compliance with the License . 
 - * You may obtain a copy of the License at 
 - * 
 - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 - * 
 - * Unless required by applicable law or agreed to in writing , software 
 - * distributed under the License is distributed on an " AS IS " BASIS , 
 - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 - * See the License for the specific language governing permissions and 
 - * limitations under the License . 
 - * / 
 - 
 - package io . realm . rx ; 
 - 
 - import io . realm . RealmChangeListener ; 
 - import io . realm . RealmList ; 
 - import io . realm . RealmObject ; 
 - import io . realm . RealmResults ; 
 - import rx . Observable ; 
 - import rx . Subscriber ; 
 - import rx . functions . Action0 ; 
 - import rx . subjects . BehaviorSubject ; 
 - import rx . subscriptions . Subscriptions ; 
 - 
 - / / TODO Would it be better ( = more efficient ) to try to reuse RealmChangeListeners across observables ? 
 - / / TODO Extract factory interface 
 - / / TODO Convert this class to non - static . Add Configuration option for injecting factory instances , RealmConfiguration is kinda meh . 
 - public class RxObservableFactory { 
 - 
 - / * * 
 - * Creates an Observable for a RealmObject . It will emit the initial object when subscribed to and on each update 
 - * to the object . 
 - * 
 - * RealmObject observables are effectively hot observables as RealmObjects auto - update . 
 - * 
 - * @ param object RealmObject to listen to changes for . 
 - * @ param < E > Type of RealmObject 
 - * / 
 - public static < E extends RealmObject > Observable < E > from ( final E object ) { 
 - return Observable . create ( new Observable . OnSubscribe < E > ( ) { 
 - @ Override 
 - public void call ( final Subscriber < ? super E > subscriber ) { 
 - final RealmChangeListener listener = new RealmChangeListener ( ) { 
 - @ Override 
 - public void onChange ( ) { 
 - subscriber . onNext ( object ) ; 
 - } 
 - } ; 
 - object . addChangeListener ( listener ) ; 
 - subscriber . add ( Subscriptions . create ( new Action0 ( ) { 
 - @ Override 
 - public void call ( ) { 
 - object . removeChangeListener ( listener ) ; 
 - } 
 - } ) ) ; 
 - 
 - / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest 
 - / / value . This mimics a BehaviorSubject . 
 - subscriber . onNext ( object ) ; 
 - } 
 - } ) ; 
 - } 
 - 
 - / * * 
 - * Creates an Observable for a RealmResults . It will emit the initial results when subscribed to and on each 
 - * update to the results . 
 - * 
 - * RealmResults observables are effectively hot observables as RealmObjects auto - update . 
 - * 
 - * @ param results RealmResults to listen to changes for . 
 - * @ param < E > Type of RealmObject 
 - * / 
 - public static < E extends RealmObject > Observable < RealmResults < E > > from ( final RealmResults < E > results ) { 
 - return Observable . create ( new Observable . OnSubscribe < RealmResults < E > > ( ) { 
 - @ Override 
 - public void call ( final Subscriber < ? super RealmResults < E > > subscriber ) { 
 - final RealmChangeListener listener = new RealmChangeListener ( ) { 
 - @ Override 
 - public void onChange ( ) { 
 - subscriber . onNext ( results ) ; 
 - } 
 - } ; 
 - results . addChangeListener ( listener ) ; 
 - subscriber . add ( Subscriptions . create ( new Action0 ( ) { 
 - @ Override 
 - public void call ( ) { 
 - results . removeChangeListener ( listener ) ; 
 - } 
 - } ) ) ; 
 - 
 - / / Immediately call onNext with the current value as due to Realms auto - update it will be the latest 
 - / / value . This mimics a BehaviorSubject . 
 - subscriber . onNext ( results ) ; 
 - } 
 - } ) ; 
 - } 
 - 
 - / * * 
 - * Creates an Observable for a RealmResults . It will emit the initial list when subscribed to and on each 
 - * update to the list . 
 - * 
 - * @ param list RealmObject to listen to changes for . 
 - * @ param < E > Type of RealmObject 
 - * / 
 - public static < E extends RealmObject > Observable < RealmList < E > > from ( final RealmList < E > list ) { 
 - final BehaviorSubject < RealmList < E > > subject = BehaviorSubject . create ( list ) ; 
 - / / TODO Need to add ChangeListener to RealmList . Require fine - grained notifications . 
 - throw new RuntimeException ( " Not supported yet " ) ; 
 - } 
 - }
