BLEU SCORE: 0.04923026124015933

TEST MSG: Enable - Werror and fix warnings
GENERATED MSG: Removing FIXMEs and create them as Github issues .

TEST DIFF (one line): diff - - git a / realm / realm - library / src / main / cpp / CMakeLists . txt b / realm / realm - library / src / main / cpp / CMakeLists . txt <nl> index 6adbe71 . . 95bfdd8 100644 <nl> - - - a / realm / realm - library / src / main / cpp / CMakeLists . txt <nl> + + + b / realm / realm - library / src / main / cpp / CMakeLists . txt <nl> @ @ - 116 , 8 + 116 , 10 @ @ endif ( ) <nl> # d . init ( ValueBase : : m _ from _ link _ list , ValueBase : : m _ values , D { } ) ; <nl> # FIXME maybe - uninitialized is reported by table _ view . cpp : 272 : 15 : <nl> # ' best . m _ nanoseconds ' was declared here <nl> - set ( WARNING _ CXX _ FLAGS " - Wall - Wextra - pedantic - Wno - long - long - Wno - variadic - macros \ <nl> - - Wno - missing - field - initializers - Wmissing - declarations - Wno - error = uninitialized - Wno - error = maybe - uninitialized " ) <nl> + # - Wno - missing - field - initializers disable in object store as well . <nl> + set ( WARNING _ CXX _ FLAGS " - Werror - Wall - Wextra - pedantic - Wmissing - declarations \ <nl> + - Wempty - body - Wparentheses - Wunknown - pragmas - Wunreachable - code \ <nl> + - Wno - missing - field - initializers - Wno - maybe - uninitialized - Wno - uninitialized " ) <nl> set ( REALM _ COMMON _ CXX _ FLAGS " - DREALM _ ANDROID - DREALM _ HAVE _ CONFIG - DPIC - pthread - fvisibility = hidden - std = c + + 14 - fsigned - char " ) <nl> if ( build _ SYNC ) <nl> set ( REALM _ COMMON _ CXX _ FLAGS " $ { REALM _ COMMON _ CXX _ FLAGS } - DREALM _ ENABLE _ SYNC = 1 " ) <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp b / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp <nl> index 98649ca . . 9c6f199 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp <nl> @ @ - 43 , 7 + 43 , 7 @ @ Java _ io _ realm _ RealmSchema _ nativeCreateFromList ( JNIEnv * env , jclass , jlongArray o <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> - Java _ io _ realm _ RealmSchema _ nativeClose ( JNIEnv * env , jclass , jlong nativePtr ) { <nl> + Java _ io _ realm _ RealmSchema _ nativeClose ( JNIEnv * , jclass , jlong nativePtr ) { <nl> TR _ ENTER _ PTR ( nativePtr ) <nl> Schema * schema = reinterpret _ cast < Schema * > ( nativePtr ) ; <nl> delete schema ; <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ SyncManager . cpp b / realm / realm - library / src / main / cpp / io _ realm _ SyncManager . cpp <nl> index 433e443 . . 17406c0 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ SyncManager . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ SyncManager . cpp <nl> @ @ - 39 , 7 + 39 , 7 @ @ using namespace realm : : jni _ util ; <nl> std : : unique _ ptr < Client > sync _ client ; <nl> <nl> JNIEXPORT void JNICALL Java _ io _ realm _ SyncManager _ nativeInitializeSyncClient <nl> - ( JNIEnv * env , jclass sync _ manager _ class ) <nl> + ( JNIEnv * env , jclass ) <nl> { <nl> TR _ ENTER ( ) <nl> if ( sync _ client ) return ; <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp <nl> index faf2325 . . 119cdf3 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp <nl> @ @ - 218 , 7 + 218 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ LinkView _ nativeRemoveAllTargetRows <nl> } <nl> <nl> JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ LinkView _ nativeGetTargetTable <nl> - ( JNIEnv * env , jobject , jlong nativeLinkViewPtr ) <nl> + ( JNIEnv * , jobject , jlong nativeLinkViewPtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativeLinkViewPtr ) <nl> <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> index 644a952 . . 641ab05 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> @ @ - 1 , 5 + 1 , 7 @ @ <nl> # include " io _ realm _ internal _ SharedRealm . h " <nl> <nl> + # include < realm / util / features . h > <nl> + <nl> # include " object _ store . hpp " <nl> # include " shared _ realm . hpp " <nl> <nl> @ @ - 37 , 7 + 39 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeInit ( JNIEnv * env , jclass , jstring tempo <nl> JNIEXPORT jlong JNICALL <nl> Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstring realm _ path , jbyteArray key , <nl> jbyte schema _ mode , jboolean in _ memory , jboolean cache , jboolean disable _ format _ upgrade , <nl> - jboolean auto _ change _ notification , jstring sync _ server _ url , jstring sync _ user _ token ) <nl> + jboolean auto _ change _ notification , REALM _ UNUSED jstring sync _ server _ url , jstring / * sync _ user _ token * / ) <nl> { <nl> TR _ ENTER ( ) <nl> <nl> @ @ - 52 , 11 + 54 , 9 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstri <nl> config - > cache = cache ; <nl> config - > disable _ format _ upgrade = disable _ format _ upgrade ; <nl> config - > automatic _ change _ notifications = auto _ change _ notification ; <nl> - # if REALM _ ENABLE _ SYNC <nl> if ( sync _ server _ url ) { <nl> config - > force _ sync _ history = true ; <nl> } <nl> - # endif <nl> return reinterpret _ cast < jlong > ( config ) ; <nl> } CATCH _ STD ( ) <nl> <nl> @ @ - 64 , 7 + 64 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstri <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> - Java _ io _ realm _ internal _ SharedRealm _ nativeCloseConfig ( JNIEnv * env , jclass , jlong config _ ptr ) <nl> + Java _ io _ realm _ internal _ SharedRealm _ nativeCloseConfig ( JNIEnv * , jclass , jlong config _ ptr ) <nl> { <nl> TR _ ENTER _ PTR ( config _ ptr ) <nl> <nl> @ @ - 89 , 7 + 89 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetSharedRealm ( JNIEnv * env , jclass , jlo <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> - Java _ io _ realm _ internal _ SharedRealm _ nativeCloseSharedRealm ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) <nl> + Java _ io _ realm _ internal _ SharedRealm _ nativeCloseSharedRealm ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) <nl> { <nl> TR _ ENTER _ PTR ( shared _ realm _ ptr ) <nl> <nl> @ @ - 132 , 7 + 132 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCancelTransaction ( JNIEnv * env , jclass , <nl> <nl> <nl> JNIEXPORT jboolean JNICALL <nl> - Java _ io _ realm _ internal _ SharedRealm _ nativeIsInTransaction ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) <nl> + Java _ io _ realm _ internal _ SharedRealm _ nativeIsInTransaction ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) <nl> { <nl> TR _ ENTER _ PTR ( shared _ realm _ ptr ) <nl> <nl> @ @ - 162 , 6 + 162 , 8 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersion ( JNIEnv * env , jclass , jlong s <nl> try { <nl> return static _ cast < jlong > ( ObjectStore : : get _ schema _ version ( shared _ realm - > read _ group ( ) ) ) ; <nl> } CATCH _ STD ( ) <nl> + <nl> + return static _ cast < jlong > ( ObjectStore : : NotVersioned ) ; <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> @ @ - 249 , 7 + 251 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersionID ( JNIEnv * env , jclass , jlong <nl> } <nl> <nl> JNIEXPORT jboolean JNICALL <nl> - Java _ io _ realm _ internal _ SharedRealm _ nativeIsClosed ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) <nl> + Java _ io _ realm _ internal _ SharedRealm _ nativeIsClosed ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) <nl> { <nl> TR _ ENTER _ PTR ( shared _ realm _ ptr ) <nl> <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> index ad1f395 . . 82516b7 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp <nl> @ @ - 1765 , 7 + 1765 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeHandoverQuery <nl> <nl> <nl> JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeCloseQueryHandover <nl> - ( JNIEnv * env , jclass , jlong nativeHandoverQuery ) <nl> + ( JNIEnv * , jclass , jlong nativeHandoverQuery ) <nl> { <nl> TR _ ENTER _ PTR ( nativeHandoverQuery ) <nl> delete HO ( Query , nativeHandoverQuery ) ; <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp <nl> index 8039c5a . . b55fdc6 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp <nl> @ @ - 22 , 7 + 22 , 7 @ @ using namespace realm ; <nl> static void finalize _ unchecked _ row ( jlong ptr ) ; <nl> <nl> JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnCount <nl> - ( JNIEnv * env , jobject , jlong nativeRowPtr ) <nl> + ( JNIEnv * , jobject , jlong nativeRowPtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> if ( ! ROW ( nativeRowPtr ) - > is _ attached ( ) ) <nl> @ @ - 59 , 7 + 59 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnIndex <nl> } <nl> <nl> JNIEXPORT jint JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnType <nl> - ( JNIEnv * env , jobject , jlong nativeRowPtr , jlong columnIndex ) <nl> + ( JNIEnv * , jobject , jlong nativeRowPtr , jlong columnIndex ) <nl> { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> return static _ cast < jint > ( ROW ( nativeRowPtr ) - > get _ column _ type ( S ( columnIndex ) ) ) ; / / noexcept <nl> @ @ - 331 , 7 + 331 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeNullifyLink <nl> } <nl> <nl> JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeIsAttached <nl> - ( JNIEnv * env , jobject , jlong nativeRowPtr ) <nl> + ( JNIEnv * , jobject , jlong nativeRowPtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> return ROW ( nativeRowPtr ) - > is _ attached ( ) ; <nl> @ @ - 345 , 7 + 345 , 7 @ @ JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeHasColumn <nl> } <nl> <nl> JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeIsNull <nl> - ( JNIEnv * env , jobject , jlong nativeRowPtr , jlong columnIndex ) { <nl> + ( JNIEnv * , jobject , jlong nativeRowPtr , jlong columnIndex ) { <nl> TR _ ENTER _ PTR ( nativeRowPtr ) <nl> return ROW ( nativeRowPtr ) - > is _ null ( columnIndex ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ objectserver _ ObjectServerSession . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ objectserver _ ObjectServerSession . cpp <nl> index cbd02f0 . . 0caa7ac 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ objectserver _ ObjectServerSession . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ objectserver _ ObjectServerSession . cpp <nl> @ @ - 70 , 7 + 70 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ objectserver _ ObjectServerSession _ n <nl> <nl> <nl> JNIEXPORT void JNICALL Java _ io _ realm _ internal _ objectserver _ ObjectServerSession _ nativeUnbind <nl> - ( JNIEnv * env , jobject , jlong sessionPointer ) <nl> + ( JNIEnv * , jobject , jlong sessionPointer ) <nl> { <nl> TR _ ENTER ( ) <nl> JniSession * session = SS ( sessionPointer ) ; <nl> diff - - git a / realm / realm - library / src / main / cpp / jni _ util / log . cpp b / realm / realm - library / src / main / cpp / jni _ util / log . cpp <nl> index 2e9ed01 . . d4dfbef 100644 <nl> - - - a / realm / realm - library / src / main / cpp / jni _ util / log . cpp <nl> + + + b / realm / realm - library / src / main / cpp / jni _ util / log . cpp <nl> @ @ - 168 , 7 + 168 , 7 @ @ void Log : : log ( Level level , const char * tag , jthrowable throwable , const char * me <nl> void CoreLoggerBridge : : do _ log ( realm : : util : : Logger : : Level level , std : : string msg ) <nl> { <nl> / / Ignore the level threshold from the root logger . <nl> - Log : : Level jni _ level ; <nl> + Log : : Level jni _ level = Log : : all ; / / Initial value to suppress the false positive compile warning . <nl> switch ( level ) { <nl> case Level : : trace : jni _ level = Log : : trace ; break ; <nl> case Level : : debug : / / Fall through . Map to same level debug . <nl> diff - - git a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> index ab7a9f7 . . bf079cb 100644 <nl> - - - a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> + + + b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> @ @ - 77 , 7 + 77 , 6 @ @ public : <nl> auto session _ ref = weak _ session _ ref . lock ( ) ; <nl> if ( session _ ref ) { <nl> session _ ref . get ( ) - > call _ with _ local _ ref ( [ & ] ( JNIEnv * local _ env , jobject obj ) { <nl> - jclass java _ session _ class = local _ env - > GetObjectClass ( obj ) ; <nl> static realm : : jni _ util : : JavaMethod notify _ error _ handler ( <nl> local _ env , obj , " notifySessionError " , " ( ILjava / lang / String ; ) V " ) ; <nl> local _ env - > CallVoidMethod ( <nl> diff - - git a / realm / realm - library / src / main / cpp / util . cpp b / realm / realm - library / src / main / cpp / util . cpp <nl> index 97c62dd . . 135d3e5 100644 <nl> - - - a / realm / realm - library / src / main / cpp / util . cpp <nl> + + + b / realm / realm - library / src / main / cpp / util . cpp <nl> @ @ - 164 , 11 + 164 , 14 @ @ void ThrowRealmFileException ( JNIEnv * env , const std : : string & message , realm : : Rea <nl> <nl> jmethodID constructor = env - > GetMethodID ( cls , " < init > " , " ( BLjava / lang / String ; ) V " ) ; <nl> / / Initial value to suppress gcc warning . <nl> - jbyte kind _ code ; <nl> + jbyte kind _ code = - 1 ; / / To suppress compile warning . <nl> switch ( kind ) { <nl> case realm : : RealmFileException : : Kind : : AccessError : <nl> kind _ code = io _ realm _ internal _ SharedRealm _ FILE _ EXCEPTION _ KIND _ ACCESS _ ERROR ; <nl> break ; <nl> + case realm : : RealmFileException : : Kind : : BadHistoryError : <nl> + kind _ code = io _ realm _ internal _ SharedRealm _ FILE _ EXCEPTION _ KIND _ BAD _ HISTORY ; <nl> + break ; <nl> case realm : : RealmFileException : : Kind : : PermissionDenied : <nl> kind _ code = io _ realm _ internal _ SharedRealm _ FILE _ EXCEPTION _ KIND _ PERMISSION _ DENIED ; <nl> break ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / exceptions / RealmFileException . java b / realm / realm - library / src / main / java / io / realm / exceptions / RealmFileException . java <nl> index 07b63b3 . . e4bca48 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / exceptions / RealmFileException . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / exceptions / RealmFileException . java <nl> @ @ - 33 , 6 + 33 , 10 @ @ public class RealmFileException extends RuntimeException { <nl> * / <nl> ACCESS _ ERROR , <nl> / * * <nl> + * Thrown if the history type of the on - disk Realm is unexpected or incompatible . <nl> + * / <nl> + BAD _ HISTORY , <nl> + / * * <nl> * Thrown if the user does not have permission to open or create the specified file in the specified access <nl> * mode when the Realm is opened . <nl> * / <nl> @ @ - 70 , 6 + 74 , 8 @ @ public class RealmFileException extends RuntimeException { <nl> return INCOMPATIBLE _ LOCK _ FILE ; <nl> case SharedRealm . FILE _ EXCEPTION _ KIND _ FORMAT _ UPGRADE _ REQUIRED : <nl> return FORMAT _ UPGRADE _ REQUIRED ; <nl> + case SharedRealm . FILE _ EXCEPTION _ KIND _ BAD _ HISTORY : <nl> + return BAD _ HISTORY ; <nl> default : <nl> throw new RuntimeException ( " Unknown value for RealmFileException kind . " ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / SharedRealm . java b / realm / realm - library / src / main / java / io / realm / internal / SharedRealm . java <nl> index e7ad6c0 . . 356460a 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / SharedRealm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / SharedRealm . java <nl> @ @ - 27 , 11 + 27 , 12 @ @ public final class SharedRealm implements Closeable { <nl> <nl> / / Const value for RealmFileException conversion <nl> public static final byte FILE _ EXCEPTION _ KIND _ ACCESS _ ERROR = 0 ; <nl> - public static final byte FILE _ EXCEPTION _ KIND _ PERMISSION _ DENIED = 1 ; <nl> - public static final byte FILE _ EXCEPTION _ KIND _ EXISTS = 2 ; <nl> - public static final byte FILE _ EXCEPTION _ KIND _ NOT _ FOUND = 3 ; <nl> - public static final byte FILE _ EXCEPTION _ KIND _ INCOMPATIBLE _ LOCK _ FILE = 4 ; <nl> - public static final byte FILE _ EXCEPTION _ KIND _ FORMAT _ UPGRADE _ REQUIRED = 5 ; <nl> + public static final byte FILE _ EXCEPTION _ KIND _ BAD _ HISTORY = 1 ; <nl> + public static final byte FILE _ EXCEPTION _ KIND _ PERMISSION _ DENIED = 2 ; <nl> + public static final byte FILE _ EXCEPTION _ KIND _ EXISTS = 3 ; <nl> + public static final byte FILE _ EXCEPTION _ KIND _ NOT _ FOUND = 4 ; <nl> + public static final byte FILE _ EXCEPTION _ KIND _ INCOMPATIBLE _ LOCK _ FILE = 5 ; <nl> + public static final byte FILE _ EXCEPTION _ KIND _ FORMAT _ UPGRADE _ REQUIRED = 6 ; <nl> <nl> public static void initialize ( File tempDirectory ) { <nl> if ( SharedRealm . temporaryDirectory ! = null ) {
NEAREST DIFF (one line): diff - - git a / realm / config / findbugs / findbugs - filter . xml b / realm / config / findbugs / findbugs - filter . xml <nl> index 2911aec . . e2c1a8b 100644 <nl> - - - a / realm / config / findbugs / findbugs - filter . xml <nl> + + + b / realm / config / findbugs / findbugs - filter . xml <nl> @ @ - 32 , 6 + 32 , 11 @ @ <nl> < Field name = " APP _ ID " / > <nl> < Bug pattern = " MS _ SHOULD _ BE _ FINAL " / > <nl> < / Match > <nl> + < Match > <nl> + < Class name = " io . realm . SyncManager " / > <nl> + < Field name = " APP _ ID " / > <nl> + < Bug pattern = " MS _ CANNOT _ BE _ FINAL " / > <nl> + < / Match > <nl> <nl> < ! - - Unit tests - - > <nl> < Match > <nl> diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> index 00c0b93 . . 1792920 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp <nl> @ @ - 154 , 8 + 154 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersion ( JNIEnv * env , jclass , jlong s <nl> return static _ cast < jlong > ( ObjectStore : : get _ schema _ version ( shared _ realm - > read _ group ( ) ) ) ; <nl> } CATCH _ STD ( ) <nl> <nl> - / / FIXME : Use constant value <nl> - return - 1 ; <nl> + return static _ cast < jlong > ( ObjectStore : : NotVersioned ) ; <nl> } <nl> <nl> JNIEXPORT void JNICALL <nl> diff - - git a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> index 7d9d824 . . d066d36 100644 <nl> - - - a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> + + + b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp <nl> @ @ - 30 , 14 + 30 , 13 @ @ <nl> <nl> <nl> / / Wrapper class for realm : : Session . This allows us to manage the C + + session and callback lifecycle correctly . <nl> - / / TODO Use OS SyncSession instead <nl> + / / TODO Use OS SyncSession instead - https : / / github . com / realm / realm - java - private / issues / 123 <nl> class JniSession { <nl> <nl> public : <nl> JniSession ( ) = delete ; <nl> JniSession ( JNIEnv * env , std : : string local _ realm _ path , jobject java _ session _ obj ) <nl> { <nl> - / / FIXME : This doesn ' t look good . Temp solution before moving to OS sync . <nl> extern std : : unique _ ptr < realm : : sync : : Client > sync _ client ; <nl> / / Get the coordinator for the given path , or null if there is none <nl> m _ sync _ session = new realm : : sync : : Session ( * sync _ client , local _ realm _ path ) ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java b / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java <nl> index b3f881b . . 8e2ddc2 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java <nl> @ @ - 28 , 7 + 28 , 6 @ @ import io . realm . log . RealmLog ; <nl> / * * <nl> * Implementation of { @ link RealmNotifier } for Android based on { @ link Handler } . <nl> * / <nl> - / / FIXME : Please move me to the io . realm . internal when HandlerController is there . <nl> class AndroidNotifier implements RealmNotifier { <nl> private Handler handler ; <nl> <nl> @ @ - 66 , 7 + 65 , 7 @ @ class AndroidNotifier implements RealmNotifier { <nl> <nl> / / This is called by OS when other thread / process changes the Realm . <nl> / / This is getting called on the same thread which created the Realm . <nl> - / / FIXME : The whole calling routine is twisted and needs to be rewritten in the near future . <nl> + / / https : / / github . com / realm / realm - java - private / issues / 127 <nl> / / | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | <nl> / / | Thread A | Thread B | Daemon Thread | <nl> / / | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / BaseRealm . java b / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> index 2836c6c . . e4b8fae 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / BaseRealm . java <nl> @ @ - 61 , 7 + 61 , 7 @ @ public abstract class BaseRealm implements Closeable { <nl> " Changing Realm data can only be done from inside a transaction . " ; <nl> <nl> / / Thread pool for all async operations ( Query & transaction ) <nl> - public volatile static Context applicationContext ; / / FIXME Make package protected once all sync code moves to io . realm <nl> + public volatile static Context applicationContext ; <nl> <nl> / / Thread pool for all async operations ( Query & transaction ) <nl> static final RealmThreadPoolExecutor asyncTaskExecutor = RealmThreadPoolExecutor . newDefaultExecutor ( ) ; <nl> @ @ - 583 , 7 + 583 , 7 @ @ public abstract class BaseRealm implements Closeable { <nl> * @ return { @ code true } if compaction succeeded , { @ code false } otherwise . <nl> * / <nl> static boolean compactRealm ( final RealmConfiguration configuration ) { <nl> - / / FIXME : Move this check to OS ? <nl> + / / https : / / github . com / realm / realm - java / issues / 1033 <nl> if ( configuration . getEncryptionKey ( ) ! = null ) { <nl> throw new IllegalArgumentException ( " Cannot currently compact an encrypted Realm . " ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java b / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java <nl> index cc2809d . . e2733a7 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java <nl> @ @ - 16 , 7 + 16 , 6 @ @ <nl> <nl> package io . realm ; <nl> <nl> - import java . util . concurrent . ExecutorService ; <nl> import java . util . concurrent . Future ; <nl> import java . util . concurrent . ThreadPoolExecutor ; <nl> <nl> @ @ - 32 , 7 + 31 , 6 @ @ public final class RealmAsyncTask { <nl> private final ThreadPoolExecutor service ; <nl> private volatile boolean isCancelled = false ; <nl> <nl> - / / FIXME This shouldn ' t be public <nl> public RealmAsyncTask ( Future < ? > pendingTask , ThreadPoolExecutor service ) { <nl> this . pendingTask = pendingTask ; <nl> this . service = service ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java <nl> index 8c7e6b0 . . 9e92389 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java <nl> @ @ - 154 , 7 + 154 , 6 @ @ public final class RealmObjectSchema { <nl> realm . checkNotInSync ( ) ; / / renaming a table is not permitted <nl> checkEmpty ( className ) ; <nl> String internalTableName = Table . TABLE _ PREFIX + className ; <nl> - / / FIXME : when core implements class name length check , please remove . <nl> if ( internalTableName . length ( ) > Table . TABLE _ MAX _ LENGTH ) { <nl> throw new IllegalArgumentException ( " Class name is to long . Limit is 56 characters : \ ' " + className + " \ ' ( " + Integer . toString ( className . length ( ) ) + " ) " ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / SyncManager . java b / realm / realm - library / src / main / java / io / realm / SyncManager . java <nl> index 41d8ca5 . . ca496ef 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / SyncManager . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / SyncManager . java <nl> @ @ - 226 , 7 + 226 , 6 @ @ public final class SyncManager { <nl> * Sets the log level for the underlying <nl> * @ param logLevel <nl> * / <nl> - / / FIXME Remove from the public API . This is controlled by Logger # minimumNativeLogLevel <nl> public static void setLogLevel ( int logLevel ) { <nl> nativeSetSyncClientLogLevel ( logLevel ) ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java b / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java <nl> index d1cdd84 . . 3218dc7 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java <nl> @ @ - 68 , 12 + 68 , 12 @ @ public class OkHttpAuthenticationServer implements AuthenticationServer { <nl> <nl> @ Override <nl> public RefreshResponse refresh ( String token , URL authenticationUrl ) { <nl> - throw new UnsupportedOperationException ( " FIXME " ) ; <nl> + throw new UnsupportedOperationException ( " Not yet implemented " ) ; <nl> } <nl> <nl> @ Override <nl> public LogoutResponse logout ( User user , URL authenticationUrl ) { <nl> - throw new UnsupportedOperationException ( " FIXME " ) ; <nl> + throw new UnsupportedOperationException ( " Not yet implemented " ) ; <nl> } <nl> <nl> private AuthenticateResponse authenticate ( URL authenticationUrl , String requestBody ) throws Exception { <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java b / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java <nl> index 0c88d0b . . 2455972 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java <nl> @ @ - 22 , 7 + 22 , 6 @ @ import okhttp3 . Response ; <nl> public class RefreshResponse extends AuthServerResponse { <nl> <nl> public RefreshResponse ( Response response ) { <nl> - / / FIXME Parse refresh result <nl> } <nl> <nl> public Token getRefreshToken ( ) { <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / log / RealmLog . java b / realm / realm - library / src / main / java / io / realm / log / RealmLog . java <nl> index 6389196 . . f831732 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / log / RealmLog . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / log / RealmLog . java <nl> @ @ - 21 , 8 + 21 , 6 @ @ import java . util . List ; <nl> <nl> import io . realm . internal . Keep ; <nl> import io . realm . internal . Util ; <nl> - import io . realm . SyncManager ; <nl> - import io . realm . internal . ObjectServerFacade ; <nl> <nl> / * * <nl> * Global logger used by all Realm components . <nl> @ @ - 59 , 7 + 57 , 6 @ @ public final class RealmLog { <nl> <nl> private static void setMinimumNativeDebugLevel ( int nativeDebugLevel ) { <nl> minimumNativeLogLevel = nativeDebugLevel ; <nl> - / / FIXME : Use same log level setting for normal Realm and Sync Realm . <nl> Util . setDebugLevel ( nativeDebugLevel ) ; / / Log level for Realm Core <nl> } <nl>

TEST DIFF:
diff - - git a / realm / realm - library / src / main / cpp / CMakeLists . txt b / realm / realm - library / src / main / cpp / CMakeLists . txt 
 index 6adbe71 . . 95bfdd8 100644 
 - - - a / realm / realm - library / src / main / cpp / CMakeLists . txt 
 + + + b / realm / realm - library / src / main / cpp / CMakeLists . txt 
 @ @ - 116 , 8 + 116 , 10 @ @ endif ( ) 
 # d . init ( ValueBase : : m _ from _ link _ list , ValueBase : : m _ values , D { } ) ; 
 # FIXME maybe - uninitialized is reported by table _ view . cpp : 272 : 15 : 
 # ' best . m _ nanoseconds ' was declared here 
 - set ( WARNING _ CXX _ FLAGS " - Wall - Wextra - pedantic - Wno - long - long - Wno - variadic - macros \ 
 - - Wno - missing - field - initializers - Wmissing - declarations - Wno - error = uninitialized - Wno - error = maybe - uninitialized " ) 
 + # - Wno - missing - field - initializers disable in object store as well . 
 + set ( WARNING _ CXX _ FLAGS " - Werror - Wall - Wextra - pedantic - Wmissing - declarations \ 
 + - Wempty - body - Wparentheses - Wunknown - pragmas - Wunreachable - code \ 
 + - Wno - missing - field - initializers - Wno - maybe - uninitialized - Wno - uninitialized " ) 
 set ( REALM _ COMMON _ CXX _ FLAGS " - DREALM _ ANDROID - DREALM _ HAVE _ CONFIG - DPIC - pthread - fvisibility = hidden - std = c + + 14 - fsigned - char " ) 
 if ( build _ SYNC ) 
 set ( REALM _ COMMON _ CXX _ FLAGS " $ { REALM _ COMMON _ CXX _ FLAGS } - DREALM _ ENABLE _ SYNC = 1 " ) 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp b / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp 
 index 98649ca . . 9c6f199 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ RealmSchema . cpp 
 @ @ - 43 , 7 + 43 , 7 @ @ Java _ io _ realm _ RealmSchema _ nativeCreateFromList ( JNIEnv * env , jclass , jlongArray o 
 } 
 
 JNIEXPORT void JNICALL 
 - Java _ io _ realm _ RealmSchema _ nativeClose ( JNIEnv * env , jclass , jlong nativePtr ) { 
 + Java _ io _ realm _ RealmSchema _ nativeClose ( JNIEnv * , jclass , jlong nativePtr ) { 
 TR _ ENTER _ PTR ( nativePtr ) 
 Schema * schema = reinterpret _ cast < Schema * > ( nativePtr ) ; 
 delete schema ; 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ SyncManager . cpp b / realm / realm - library / src / main / cpp / io _ realm _ SyncManager . cpp 
 index 433e443 . . 17406c0 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ SyncManager . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ SyncManager . cpp 
 @ @ - 39 , 7 + 39 , 7 @ @ using namespace realm : : jni _ util ; 
 std : : unique _ ptr < Client > sync _ client ; 
 
 JNIEXPORT void JNICALL Java _ io _ realm _ SyncManager _ nativeInitializeSyncClient 
 - ( JNIEnv * env , jclass sync _ manager _ class ) 
 + ( JNIEnv * env , jclass ) 
 { 
 TR _ ENTER ( ) 
 if ( sync _ client ) return ; 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp 
 index faf2325 . . 119cdf3 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ LinkView . cpp 
 @ @ - 218 , 7 + 218 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ LinkView _ nativeRemoveAllTargetRows 
 } 
 
 JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ LinkView _ nativeGetTargetTable 
 - ( JNIEnv * env , jobject , jlong nativeLinkViewPtr ) 
 + ( JNIEnv * , jobject , jlong nativeLinkViewPtr ) 
 { 
 TR _ ENTER _ PTR ( nativeLinkViewPtr ) 
 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 index 644a952 . . 641ab05 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 @ @ - 1 , 5 + 1 , 7 @ @ 
 # include " io _ realm _ internal _ SharedRealm . h " 
 
 + # include < realm / util / features . h > 
 + 
 # include " object _ store . hpp " 
 # include " shared _ realm . hpp " 
 
 @ @ - 37 , 7 + 39 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeInit ( JNIEnv * env , jclass , jstring tempo 
 JNIEXPORT jlong JNICALL 
 Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstring realm _ path , jbyteArray key , 
 jbyte schema _ mode , jboolean in _ memory , jboolean cache , jboolean disable _ format _ upgrade , 
 - jboolean auto _ change _ notification , jstring sync _ server _ url , jstring sync _ user _ token ) 
 + jboolean auto _ change _ notification , REALM _ UNUSED jstring sync _ server _ url , jstring / * sync _ user _ token * / ) 
 { 
 TR _ ENTER ( ) 
 
 @ @ - 52 , 11 + 54 , 9 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstri 
 config - > cache = cache ; 
 config - > disable _ format _ upgrade = disable _ format _ upgrade ; 
 config - > automatic _ change _ notifications = auto _ change _ notification ; 
 - # if REALM _ ENABLE _ SYNC 
 if ( sync _ server _ url ) { 
 config - > force _ sync _ history = true ; 
 } 
 - # endif 
 return reinterpret _ cast < jlong > ( config ) ; 
 } CATCH _ STD ( ) 
 
 @ @ - 64 , 7 + 64 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCreateConfig ( JNIEnv * env , jclass , jstri 
 } 
 
 JNIEXPORT void JNICALL 
 - Java _ io _ realm _ internal _ SharedRealm _ nativeCloseConfig ( JNIEnv * env , jclass , jlong config _ ptr ) 
 + Java _ io _ realm _ internal _ SharedRealm _ nativeCloseConfig ( JNIEnv * , jclass , jlong config _ ptr ) 
 { 
 TR _ ENTER _ PTR ( config _ ptr ) 
 
 @ @ - 89 , 7 + 89 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetSharedRealm ( JNIEnv * env , jclass , jlo 
 } 
 
 JNIEXPORT void JNICALL 
 - Java _ io _ realm _ internal _ SharedRealm _ nativeCloseSharedRealm ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) 
 + Java _ io _ realm _ internal _ SharedRealm _ nativeCloseSharedRealm ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) 
 { 
 TR _ ENTER _ PTR ( shared _ realm _ ptr ) 
 
 @ @ - 132 , 7 + 132 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeCancelTransaction ( JNIEnv * env , jclass , 
 
 
 JNIEXPORT jboolean JNICALL 
 - Java _ io _ realm _ internal _ SharedRealm _ nativeIsInTransaction ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) 
 + Java _ io _ realm _ internal _ SharedRealm _ nativeIsInTransaction ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) 
 { 
 TR _ ENTER _ PTR ( shared _ realm _ ptr ) 
 
 @ @ - 162 , 6 + 162 , 8 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersion ( JNIEnv * env , jclass , jlong s 
 try { 
 return static _ cast < jlong > ( ObjectStore : : get _ schema _ version ( shared _ realm - > read _ group ( ) ) ) ; 
 } CATCH _ STD ( ) 
 + 
 + return static _ cast < jlong > ( ObjectStore : : NotVersioned ) ; 
 } 
 
 JNIEXPORT void JNICALL 
 @ @ - 249 , 7 + 251 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersionID ( JNIEnv * env , jclass , jlong 
 } 
 
 JNIEXPORT jboolean JNICALL 
 - Java _ io _ realm _ internal _ SharedRealm _ nativeIsClosed ( JNIEnv * env , jclass , jlong shared _ realm _ ptr ) 
 + Java _ io _ realm _ internal _ SharedRealm _ nativeIsClosed ( JNIEnv * , jclass , jlong shared _ realm _ ptr ) 
 { 
 TR _ ENTER _ PTR ( shared _ realm _ ptr ) 
 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 index ad1f395 . . 82516b7 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ TableQuery . cpp 
 @ @ - 1765 , 7 + 1765 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeHandoverQuery 
 
 
 JNIEXPORT void JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeCloseQueryHandover 
 - ( JNIEnv * env , jclass , jlong nativeHandoverQuery ) 
 + ( JNIEnv * , jclass , jlong nativeHandoverQuery ) 
 { 
 TR _ ENTER _ PTR ( nativeHandoverQuery ) 
 delete HO ( Query , nativeHandoverQuery ) ; 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp 
 index 8039c5a . . b55fdc6 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ UncheckedRow . cpp 
 @ @ - 22 , 7 + 22 , 7 @ @ using namespace realm ; 
 static void finalize _ unchecked _ row ( jlong ptr ) ; 
 
 JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnCount 
 - ( JNIEnv * env , jobject , jlong nativeRowPtr ) 
 + ( JNIEnv * , jobject , jlong nativeRowPtr ) 
 { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 if ( ! ROW ( nativeRowPtr ) - > is _ attached ( ) ) 
 @ @ - 59 , 7 + 59 , 7 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnIndex 
 } 
 
 JNIEXPORT jint JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeGetColumnType 
 - ( JNIEnv * env , jobject , jlong nativeRowPtr , jlong columnIndex ) 
 + ( JNIEnv * , jobject , jlong nativeRowPtr , jlong columnIndex ) 
 { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 return static _ cast < jint > ( ROW ( nativeRowPtr ) - > get _ column _ type ( S ( columnIndex ) ) ) ; / / noexcept 
 @ @ - 331 , 7 + 331 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeNullifyLink 
 } 
 
 JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeIsAttached 
 - ( JNIEnv * env , jobject , jlong nativeRowPtr ) 
 + ( JNIEnv * , jobject , jlong nativeRowPtr ) 
 { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 return ROW ( nativeRowPtr ) - > is _ attached ( ) ; 
 @ @ - 345 , 7 + 345 , 7 @ @ JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeHasColumn 
 } 
 
 JNIEXPORT jboolean JNICALL Java _ io _ realm _ internal _ UncheckedRow _ nativeIsNull 
 - ( JNIEnv * env , jobject , jlong nativeRowPtr , jlong columnIndex ) { 
 + ( JNIEnv * , jobject , jlong nativeRowPtr , jlong columnIndex ) { 
 TR _ ENTER _ PTR ( nativeRowPtr ) 
 return ROW ( nativeRowPtr ) - > is _ null ( columnIndex ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ objectserver _ ObjectServerSession . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ objectserver _ ObjectServerSession . cpp 
 index cbd02f0 . . 0caa7ac 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ objectserver _ ObjectServerSession . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ objectserver _ ObjectServerSession . cpp 
 @ @ - 70 , 7 + 70 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ objectserver _ ObjectServerSession _ n 
 
 
 JNIEXPORT void JNICALL Java _ io _ realm _ internal _ objectserver _ ObjectServerSession _ nativeUnbind 
 - ( JNIEnv * env , jobject , jlong sessionPointer ) 
 + ( JNIEnv * , jobject , jlong sessionPointer ) 
 { 
 TR _ ENTER ( ) 
 JniSession * session = SS ( sessionPointer ) ; 
 diff - - git a / realm / realm - library / src / main / cpp / jni _ util / log . cpp b / realm / realm - library / src / main / cpp / jni _ util / log . cpp 
 index 2e9ed01 . . d4dfbef 100644 
 - - - a / realm / realm - library / src / main / cpp / jni _ util / log . cpp 
 + + + b / realm / realm - library / src / main / cpp / jni _ util / log . cpp 
 @ @ - 168 , 7 + 168 , 7 @ @ void Log : : log ( Level level , const char * tag , jthrowable throwable , const char * me 
 void CoreLoggerBridge : : do _ log ( realm : : util : : Logger : : Level level , std : : string msg ) 
 { 
 / / Ignore the level threshold from the root logger . 
 - Log : : Level jni _ level ; 
 + Log : : Level jni _ level = Log : : all ; / / Initial value to suppress the false positive compile warning . 
 switch ( level ) { 
 case Level : : trace : jni _ level = Log : : trace ; break ; 
 case Level : : debug : / / Fall through . Map to same level debug . 
 diff - - git a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 index ab7a9f7 . . bf079cb 100644 
 - - - a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 + + + b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 @ @ - 77 , 7 + 77 , 6 @ @ public : 
 auto session _ ref = weak _ session _ ref . lock ( ) ; 
 if ( session _ ref ) { 
 session _ ref . get ( ) - > call _ with _ local _ ref ( [ & ] ( JNIEnv * local _ env , jobject obj ) { 
 - jclass java _ session _ class = local _ env - > GetObjectClass ( obj ) ; 
 static realm : : jni _ util : : JavaMethod notify _ error _ handler ( 
 local _ env , obj , " notifySessionError " , " ( ILjava / lang / String ; ) V " ) ; 
 local _ env - > CallVoidMethod ( 
 diff - - git a / realm / realm - library / src / main / cpp / util . cpp b / realm / realm - library / src / main / cpp / util . cpp 
 index 97c62dd . . 135d3e5 100644 
 - - - a / realm / realm - library / src / main / cpp / util . cpp 
 + + + b / realm / realm - library / src / main / cpp / util . cpp 
 @ @ - 164 , 11 + 164 , 14 @ @ void ThrowRealmFileException ( JNIEnv * env , const std : : string & message , realm : : Rea 
 
 jmethodID constructor = env - > GetMethodID ( cls , " < init > " , " ( BLjava / lang / String ; ) V " ) ; 
 / / Initial value to suppress gcc warning . 
 - jbyte kind _ code ; 
 + jbyte kind _ code = - 1 ; / / To suppress compile warning . 
 switch ( kind ) { 
 case realm : : RealmFileException : : Kind : : AccessError : 
 kind _ code = io _ realm _ internal _ SharedRealm _ FILE _ EXCEPTION _ KIND _ ACCESS _ ERROR ; 
 break ; 
 + case realm : : RealmFileException : : Kind : : BadHistoryError : 
 + kind _ code = io _ realm _ internal _ SharedRealm _ FILE _ EXCEPTION _ KIND _ BAD _ HISTORY ; 
 + break ; 
 case realm : : RealmFileException : : Kind : : PermissionDenied : 
 kind _ code = io _ realm _ internal _ SharedRealm _ FILE _ EXCEPTION _ KIND _ PERMISSION _ DENIED ; 
 break ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / exceptions / RealmFileException . java b / realm / realm - library / src / main / java / io / realm / exceptions / RealmFileException . java 
 index 07b63b3 . . e4bca48 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / exceptions / RealmFileException . java 
 + + + b / realm / realm - library / src / main / java / io / realm / exceptions / RealmFileException . java 
 @ @ - 33 , 6 + 33 , 10 @ @ public class RealmFileException extends RuntimeException { 
 * / 
 ACCESS _ ERROR , 
 / * * 
 + * Thrown if the history type of the on - disk Realm is unexpected or incompatible . 
 + * / 
 + BAD _ HISTORY , 
 + / * * 
 * Thrown if the user does not have permission to open or create the specified file in the specified access 
 * mode when the Realm is opened . 
 * / 
 @ @ - 70 , 6 + 74 , 8 @ @ public class RealmFileException extends RuntimeException { 
 return INCOMPATIBLE _ LOCK _ FILE ; 
 case SharedRealm . FILE _ EXCEPTION _ KIND _ FORMAT _ UPGRADE _ REQUIRED : 
 return FORMAT _ UPGRADE _ REQUIRED ; 
 + case SharedRealm . FILE _ EXCEPTION _ KIND _ BAD _ HISTORY : 
 + return BAD _ HISTORY ; 
 default : 
 throw new RuntimeException ( " Unknown value for RealmFileException kind . " ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / SharedRealm . java b / realm / realm - library / src / main / java / io / realm / internal / SharedRealm . java 
 index e7ad6c0 . . 356460a 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / SharedRealm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / SharedRealm . java 
 @ @ - 27 , 11 + 27 , 12 @ @ public final class SharedRealm implements Closeable { 
 
 / / Const value for RealmFileException conversion 
 public static final byte FILE _ EXCEPTION _ KIND _ ACCESS _ ERROR = 0 ; 
 - public static final byte FILE _ EXCEPTION _ KIND _ PERMISSION _ DENIED = 1 ; 
 - public static final byte FILE _ EXCEPTION _ KIND _ EXISTS = 2 ; 
 - public static final byte FILE _ EXCEPTION _ KIND _ NOT _ FOUND = 3 ; 
 - public static final byte FILE _ EXCEPTION _ KIND _ INCOMPATIBLE _ LOCK _ FILE = 4 ; 
 - public static final byte FILE _ EXCEPTION _ KIND _ FORMAT _ UPGRADE _ REQUIRED = 5 ; 
 + public static final byte FILE _ EXCEPTION _ KIND _ BAD _ HISTORY = 1 ; 
 + public static final byte FILE _ EXCEPTION _ KIND _ PERMISSION _ DENIED = 2 ; 
 + public static final byte FILE _ EXCEPTION _ KIND _ EXISTS = 3 ; 
 + public static final byte FILE _ EXCEPTION _ KIND _ NOT _ FOUND = 4 ; 
 + public static final byte FILE _ EXCEPTION _ KIND _ INCOMPATIBLE _ LOCK _ FILE = 5 ; 
 + public static final byte FILE _ EXCEPTION _ KIND _ FORMAT _ UPGRADE _ REQUIRED = 6 ; 
 
 public static void initialize ( File tempDirectory ) { 
 if ( SharedRealm . temporaryDirectory ! = null ) {

NEAREST DIFF:
diff - - git a / realm / config / findbugs / findbugs - filter . xml b / realm / config / findbugs / findbugs - filter . xml 
 index 2911aec . . e2c1a8b 100644 
 - - - a / realm / config / findbugs / findbugs - filter . xml 
 + + + b / realm / config / findbugs / findbugs - filter . xml 
 @ @ - 32 , 6 + 32 , 11 @ @ 
 < Field name = " APP _ ID " / > 
 < Bug pattern = " MS _ SHOULD _ BE _ FINAL " / > 
 < / Match > 
 + < Match > 
 + < Class name = " io . realm . SyncManager " / > 
 + < Field name = " APP _ ID " / > 
 + < Bug pattern = " MS _ CANNOT _ BE _ FINAL " / > 
 + < / Match > 
 
 < ! - - Unit tests - - > 
 < Match > 
 diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 index 00c0b93 . . 1792920 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ internal _ SharedRealm . cpp 
 @ @ - 154 , 8 + 154 , 7 @ @ Java _ io _ realm _ internal _ SharedRealm _ nativeGetVersion ( JNIEnv * env , jclass , jlong s 
 return static _ cast < jlong > ( ObjectStore : : get _ schema _ version ( shared _ realm - > read _ group ( ) ) ) ; 
 } CATCH _ STD ( ) 
 
 - / / FIXME : Use constant value 
 - return - 1 ; 
 + return static _ cast < jlong > ( ObjectStore : : NotVersioned ) ; 
 } 
 
 JNIEXPORT void JNICALL 
 diff - - git a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 index 7d9d824 . . d066d36 100644 
 - - - a / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 + + + b / realm / realm - library / src / main / cpp / objectserver _ shared . hpp 
 @ @ - 30 , 14 + 30 , 13 @ @ 
 
 
 / / Wrapper class for realm : : Session . This allows us to manage the C + + session and callback lifecycle correctly . 
 - / / TODO Use OS SyncSession instead 
 + / / TODO Use OS SyncSession instead - https : / / github . com / realm / realm - java - private / issues / 123 
 class JniSession { 
 
 public : 
 JniSession ( ) = delete ; 
 JniSession ( JNIEnv * env , std : : string local _ realm _ path , jobject java _ session _ obj ) 
 { 
 - / / FIXME : This doesn ' t look good . Temp solution before moving to OS sync . 
 extern std : : unique _ ptr < realm : : sync : : Client > sync _ client ; 
 / / Get the coordinator for the given path , or null if there is none 
 m _ sync _ session = new realm : : sync : : Session ( * sync _ client , local _ realm _ path ) ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java b / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java 
 index b3f881b . . 8e2ddc2 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java 
 + + + b / realm / realm - library / src / main / java / io / realm / AndroidNotifier . java 
 @ @ - 28 , 7 + 28 , 6 @ @ import io . realm . log . RealmLog ; 
 / * * 
 * Implementation of { @ link RealmNotifier } for Android based on { @ link Handler } . 
 * / 
 - / / FIXME : Please move me to the io . realm . internal when HandlerController is there . 
 class AndroidNotifier implements RealmNotifier { 
 private Handler handler ; 
 
 @ @ - 66 , 7 + 65 , 7 @ @ class AndroidNotifier implements RealmNotifier { 
 
 / / This is called by OS when other thread / process changes the Realm . 
 / / This is getting called on the same thread which created the Realm . 
 - / / FIXME : The whole calling routine is twisted and needs to be rewritten in the near future . 
 + / / https : / / github . com / realm / realm - java - private / issues / 127 
 / / | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | 
 / / | Thread A | Thread B | Daemon Thread | 
 / / | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | 
 diff - - git a / realm / realm - library / src / main / java / io / realm / BaseRealm . java b / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 index 2836c6c . . e4b8fae 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / BaseRealm . java 
 @ @ - 61 , 7 + 61 , 7 @ @ public abstract class BaseRealm implements Closeable { 
 " Changing Realm data can only be done from inside a transaction . " ; 
 
 / / Thread pool for all async operations ( Query & transaction ) 
 - public volatile static Context applicationContext ; / / FIXME Make package protected once all sync code moves to io . realm 
 + public volatile static Context applicationContext ; 
 
 / / Thread pool for all async operations ( Query & transaction ) 
 static final RealmThreadPoolExecutor asyncTaskExecutor = RealmThreadPoolExecutor . newDefaultExecutor ( ) ; 
 @ @ - 583 , 7 + 583 , 7 @ @ public abstract class BaseRealm implements Closeable { 
 * @ return { @ code true } if compaction succeeded , { @ code false } otherwise . 
 * / 
 static boolean compactRealm ( final RealmConfiguration configuration ) { 
 - / / FIXME : Move this check to OS ? 
 + / / https : / / github . com / realm / realm - java / issues / 1033 
 if ( configuration . getEncryptionKey ( ) ! = null ) { 
 throw new IllegalArgumentException ( " Cannot currently compact an encrypted Realm . " ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java b / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java 
 index cc2809d . . e2733a7 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmAsyncTask . java 
 @ @ - 16 , 7 + 16 , 6 @ @ 
 
 package io . realm ; 
 
 - import java . util . concurrent . ExecutorService ; 
 import java . util . concurrent . Future ; 
 import java . util . concurrent . ThreadPoolExecutor ; 
 
 @ @ - 32 , 7 + 31 , 6 @ @ public final class RealmAsyncTask { 
 private final ThreadPoolExecutor service ; 
 private volatile boolean isCancelled = false ; 
 
 - / / FIXME This shouldn ' t be public 
 public RealmAsyncTask ( Future < ? > pendingTask , ThreadPoolExecutor service ) { 
 this . pendingTask = pendingTask ; 
 this . service = service ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java 
 index 8c7e6b0 . . 9e92389 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmObjectSchema . java 
 @ @ - 154 , 7 + 154 , 6 @ @ public final class RealmObjectSchema { 
 realm . checkNotInSync ( ) ; / / renaming a table is not permitted 
 checkEmpty ( className ) ; 
 String internalTableName = Table . TABLE _ PREFIX + className ; 
 - / / FIXME : when core implements class name length check , please remove . 
 if ( internalTableName . length ( ) > Table . TABLE _ MAX _ LENGTH ) { 
 throw new IllegalArgumentException ( " Class name is to long . Limit is 56 characters : \ ' " + className + " \ ' ( " + Integer . toString ( className . length ( ) ) + " ) " ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / SyncManager . java b / realm / realm - library / src / main / java / io / realm / SyncManager . java 
 index 41d8ca5 . . ca496ef 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / SyncManager . java 
 + + + b / realm / realm - library / src / main / java / io / realm / SyncManager . java 
 @ @ - 226 , 7 + 226 , 6 @ @ public final class SyncManager { 
 * Sets the log level for the underlying 
 * @ param logLevel 
 * / 
 - / / FIXME Remove from the public API . This is controlled by Logger # minimumNativeLogLevel 
 public static void setLogLevel ( int logLevel ) { 
 nativeSetSyncClientLogLevel ( logLevel ) ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java b / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java 
 index d1cdd84 . . 3218dc7 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / network / OkHttpAuthenticationServer . java 
 @ @ - 68 , 12 + 68 , 12 @ @ public class OkHttpAuthenticationServer implements AuthenticationServer { 
 
 @ Override 
 public RefreshResponse refresh ( String token , URL authenticationUrl ) { 
 - throw new UnsupportedOperationException ( " FIXME " ) ; 
 + throw new UnsupportedOperationException ( " Not yet implemented " ) ; 
 } 
 
 @ Override 
 public LogoutResponse logout ( User user , URL authenticationUrl ) { 
 - throw new UnsupportedOperationException ( " FIXME " ) ; 
 + throw new UnsupportedOperationException ( " Not yet implemented " ) ; 
 } 
 
 private AuthenticateResponse authenticate ( URL authenticationUrl , String requestBody ) throws Exception { 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java b / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java 
 index 0c88d0b . . 2455972 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / network / RefreshResponse . java 
 @ @ - 22 , 7 + 22 , 6 @ @ import okhttp3 . Response ; 
 public class RefreshResponse extends AuthServerResponse { 
 
 public RefreshResponse ( Response response ) { 
 - / / FIXME Parse refresh result 
 } 
 
 public Token getRefreshToken ( ) { 
 diff - - git a / realm / realm - library / src / main / java / io / realm / log / RealmLog . java b / realm / realm - library / src / main / java / io / realm / log / RealmLog . java 
 index 6389196 . . f831732 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / log / RealmLog . java 
 + + + b / realm / realm - library / src / main / java / io / realm / log / RealmLog . java 
 @ @ - 21 , 8 + 21 , 6 @ @ import java . util . List ; 
 
 import io . realm . internal . Keep ; 
 import io . realm . internal . Util ; 
 - import io . realm . SyncManager ; 
 - import io . realm . internal . ObjectServerFacade ; 
 
 / * * 
 * Global logger used by all Realm components . 
 @ @ - 59 , 7 + 57 , 6 @ @ public final class RealmLog { 
 
 private static void setMinimumNativeDebugLevel ( int nativeDebugLevel ) { 
 minimumNativeLogLevel = nativeDebugLevel ; 
 - / / FIXME : Use same log level setting for normal Realm and Sync Realm . 
 Util . setDebugLevel ( nativeDebugLevel ) ; / / Log level for Realm Core 
 } 

