BLEU SCORE: 0.024455939372403628

TEST MSG: reflect hash code of rxObservableFactory in RealmConfiguration . hashCode ( ) . This fixes # 2420
GENERATED MSG: Fixed last tests .

TEST DIFF (one line): diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RealmConfigurationTests . java b / realm / realm - library / src / androidTest / java / io / realm / RealmConfigurationTests . java <nl> index 14aa14b . . 780834a 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / RealmConfigurationTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / RealmConfigurationTests . java <nl> @ @ - 43 , 11 + 43 , 13 @ @ import io . realm . exceptions . RealmMigrationNeededException ; <nl> import io . realm . internal . modules . CompositeMediator ; <nl> import io . realm . internal . modules . FilterableMediator ; <nl> import io . realm . rule . TestRealmConfigurationFactory ; <nl> + import io . realm . rx . RealmObservableFactory ; <nl> import io . realm . rx . RxObservableFactory ; <nl> import rx . Observable ; <nl> <nl> import static org . junit . Assert . assertEquals ; <nl> import static org . junit . Assert . assertFalse ; <nl> + import static org . junit . Assert . assertNotEquals ; <nl> import static org . junit . Assert . assertNotNull ; <nl> import static org . junit . Assert . assertNotSame ; <nl> import static org . junit . Assert . assertTrue ; <nl> @ @ - 395 , 6 + 397 , 23 @ @ public class RealmConfigurationTests { <nl> } <nl> <nl> @ Test <nl> + public void hashCode _ withDifferentRxObservableFactory ( ) { <nl> + RealmConfiguration config1 = new RealmConfiguration . Builder ( configFactory . getRoot ( ) ) <nl> + . rxFactory ( new RealmObservableFactory ( ) ) <nl> + . build ( ) ; <nl> + RealmConfiguration config2 = new RealmConfiguration . Builder ( configFactory . getRoot ( ) ) <nl> + . rxFactory ( new RealmObservableFactory ( ) { <nl> + @ Override <nl> + public int hashCode ( ) { <nl> + return super . hashCode ( ) + 1 ; <nl> + } <nl> + } ) <nl> + . build ( ) ; <nl> + <nl> + assertNotEquals ( config1 . hashCode ( ) , config2 . hashCode ( ) ) ; <nl> + } <nl> + <nl> + @ Test <nl> public void equals _ configurationsReturnCachedRealm ( ) { <nl> Realm realm1 = Realm . getInstance ( new RealmConfiguration . Builder ( configFactory . getRoot ( ) ) . build ( ) ) ; <nl> Realm realm2 = Realm . getInstance ( new RealmConfiguration . Builder ( configFactory . getRoot ( ) ) . build ( ) ) ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java b / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java <nl> index af941ac . . bb4fd8c 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java <nl> @ @ - 199 , 6 + 199 , 7 @ @ public class RealmConfiguration { <nl> result = 31 * result + ( deleteRealmIfMigrationNeeded ? 1 : 0 ) ; <nl> result = 31 * result + schemaMediator . hashCode ( ) ; <nl> result = 31 * result + durability . hashCode ( ) ; <nl> + result = 31 * result + ( rxObservableFactory ! = null ? rxObservableFactory . hashCode ( ) : 0 ) ; <nl> <nl> return result ; <nl> }
NEAREST DIFF (one line): diff - - git a / realm / src / androidTest / java / io / realm / tests / api / RealmTest . java b / realm / src / androidTest / java / io / realm / tests / api / RealmTest . java <nl> index 2954bd2 . . dd1d323 100644 <nl> - - - a / realm / src / androidTest / java / io / realm / tests / api / RealmTest . java <nl> + + + b / realm / src / androidTest / java / io / realm / tests / api / RealmTest . java <nl> @ @ - 16 , 6 + 16 , 9 @ @ <nl> <nl> package io . realm . tests . api ; <nl> <nl> + import android . content . Context ; <nl> + <nl> + import java . io . File ; <nl> import java . io . IOException ; <nl> <nl> import io . realm . Realm ; <nl> @ @ - 46 , 30 + 49 , 22 @ @ public class RealmTest extends RealmSetupTests { <nl> } <nl> } <nl> <nl> - public void testShouldFailCreateRealmWithNullDir ( ) { <nl> + public void testShouldNotFailCreateRealmWithNullDir ( ) { <nl> setupSharedGroup ( ) ; <nl> <nl> - try { <nl> - Realm realm = new Realm ( null ) ; <nl> - fail ( " Expected IOException " ) ; <nl> - } catch ( IOException ioe ) { <nl> - / / Expected exception <nl> - } catch ( Exception ex ) { <nl> - fail ( " Unexpected exception : " + ex . getMessage ( ) ) ; <nl> - } <nl> + File f = null ; <nl> + Realm realm = new Realm ( f ) ; <nl> } <nl> <nl> - public void testShouldFailWithNullFileName ( ) { <nl> + public void testShouldNotFailCreateRealmWithNullContext ( ) { <nl> setupSharedGroup ( ) ; <nl> + Context c = null ; <nl> + Realm realm = new Realm ( c ) ; <nl> + } <nl> <nl> - try { <nl> - Realm realm = new Realm ( getContext ( ) . getFilesDir ( ) , null ) ; <nl> - fail ( " Expected Exception " ) ; <nl> - } catch ( Exception ex ) { <nl> - if ( ! ( ex instanceof IOException ) ) { <nl> - fail ( " Unexpected exception : " + ex . getMessage ( ) ) ; <nl> - } <nl> - } <nl> + public void testShouldNotFailWithNullFileName ( ) { <nl> + setupSharedGroup ( ) ; <nl> + Realm realm = new Realm ( getContext ( ) . getFilesDir ( ) , null ) ; <nl> } <nl> <nl> <nl> diff - - git a / realm / src / main / java / io / realm / Realm . java b / realm / src / main / java / io / realm / Realm . java <nl> index ccce5d2 . . cc7719c 100644 <nl> - - - a / realm / src / main / java / io / realm / Realm . java <nl> + + + b / realm / src / main / java / io / realm / Realm . java <nl> @ @ - 19 , 7 + 19 , 6 @ @ package io . realm ; <nl> import android . content . Context ; <nl> <nl> import java . io . File ; <nl> - import java . io . IOException ; <nl> import java . lang . reflect . Constructor ; <nl> import java . lang . reflect . InvocationTargetException ; <nl> import java . lang . reflect . Method ; <nl> @ @ - 71 , 7 + 70 , 7 @ @ public class Realm { <nl> init ( ) ; <nl> } <nl> <nl> - public Realm ( File writeablePath ) throws IOException { <nl> + public Realm ( File writeablePath ) { <nl> this ( writeablePath , " default . realm " ) ; <nl> } <nl>

TEST DIFF:
diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RealmConfigurationTests . java b / realm / realm - library / src / androidTest / java / io / realm / RealmConfigurationTests . java 
 index 14aa14b . . 780834a 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / RealmConfigurationTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / RealmConfigurationTests . java 
 @ @ - 43 , 11 + 43 , 13 @ @ import io . realm . exceptions . RealmMigrationNeededException ; 
 import io . realm . internal . modules . CompositeMediator ; 
 import io . realm . internal . modules . FilterableMediator ; 
 import io . realm . rule . TestRealmConfigurationFactory ; 
 + import io . realm . rx . RealmObservableFactory ; 
 import io . realm . rx . RxObservableFactory ; 
 import rx . Observable ; 
 
 import static org . junit . Assert . assertEquals ; 
 import static org . junit . Assert . assertFalse ; 
 + import static org . junit . Assert . assertNotEquals ; 
 import static org . junit . Assert . assertNotNull ; 
 import static org . junit . Assert . assertNotSame ; 
 import static org . junit . Assert . assertTrue ; 
 @ @ - 395 , 6 + 397 , 23 @ @ public class RealmConfigurationTests { 
 } 
 
 @ Test 
 + public void hashCode _ withDifferentRxObservableFactory ( ) { 
 + RealmConfiguration config1 = new RealmConfiguration . Builder ( configFactory . getRoot ( ) ) 
 + . rxFactory ( new RealmObservableFactory ( ) ) 
 + . build ( ) ; 
 + RealmConfiguration config2 = new RealmConfiguration . Builder ( configFactory . getRoot ( ) ) 
 + . rxFactory ( new RealmObservableFactory ( ) { 
 + @ Override 
 + public int hashCode ( ) { 
 + return super . hashCode ( ) + 1 ; 
 + } 
 + } ) 
 + . build ( ) ; 
 + 
 + assertNotEquals ( config1 . hashCode ( ) , config2 . hashCode ( ) ) ; 
 + } 
 + 
 + @ Test 
 public void equals _ configurationsReturnCachedRealm ( ) { 
 Realm realm1 = Realm . getInstance ( new RealmConfiguration . Builder ( configFactory . getRoot ( ) ) . build ( ) ) ; 
 Realm realm2 = Realm . getInstance ( new RealmConfiguration . Builder ( configFactory . getRoot ( ) ) . build ( ) ) ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java b / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java 
 index af941ac . . bb4fd8c 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java 
 + + + b / realm / realm - library / src / main / java / io / realm / RealmConfiguration . java 
 @ @ - 199 , 6 + 199 , 7 @ @ public class RealmConfiguration { 
 result = 31 * result + ( deleteRealmIfMigrationNeeded ? 1 : 0 ) ; 
 result = 31 * result + schemaMediator . hashCode ( ) ; 
 result = 31 * result + durability . hashCode ( ) ; 
 + result = 31 * result + ( rxObservableFactory ! = null ? rxObservableFactory . hashCode ( ) : 0 ) ; 
 
 return result ; 
 }

NEAREST DIFF:
diff - - git a / realm / src / androidTest / java / io / realm / tests / api / RealmTest . java b / realm / src / androidTest / java / io / realm / tests / api / RealmTest . java 
 index 2954bd2 . . dd1d323 100644 
 - - - a / realm / src / androidTest / java / io / realm / tests / api / RealmTest . java 
 + + + b / realm / src / androidTest / java / io / realm / tests / api / RealmTest . java 
 @ @ - 16 , 6 + 16 , 9 @ @ 
 
 package io . realm . tests . api ; 
 
 + import android . content . Context ; 
 + 
 + import java . io . File ; 
 import java . io . IOException ; 
 
 import io . realm . Realm ; 
 @ @ - 46 , 30 + 49 , 22 @ @ public class RealmTest extends RealmSetupTests { 
 } 
 } 
 
 - public void testShouldFailCreateRealmWithNullDir ( ) { 
 + public void testShouldNotFailCreateRealmWithNullDir ( ) { 
 setupSharedGroup ( ) ; 
 
 - try { 
 - Realm realm = new Realm ( null ) ; 
 - fail ( " Expected IOException " ) ; 
 - } catch ( IOException ioe ) { 
 - / / Expected exception 
 - } catch ( Exception ex ) { 
 - fail ( " Unexpected exception : " + ex . getMessage ( ) ) ; 
 - } 
 + File f = null ; 
 + Realm realm = new Realm ( f ) ; 
 } 
 
 - public void testShouldFailWithNullFileName ( ) { 
 + public void testShouldNotFailCreateRealmWithNullContext ( ) { 
 setupSharedGroup ( ) ; 
 + Context c = null ; 
 + Realm realm = new Realm ( c ) ; 
 + } 
 
 - try { 
 - Realm realm = new Realm ( getContext ( ) . getFilesDir ( ) , null ) ; 
 - fail ( " Expected Exception " ) ; 
 - } catch ( Exception ex ) { 
 - if ( ! ( ex instanceof IOException ) ) { 
 - fail ( " Unexpected exception : " + ex . getMessage ( ) ) ; 
 - } 
 - } 
 + public void testShouldNotFailWithNullFileName ( ) { 
 + setupSharedGroup ( ) ; 
 + Realm realm = new Realm ( getContext ( ) . getFilesDir ( ) , null ) ; 
 } 
 
 
 diff - - git a / realm / src / main / java / io / realm / Realm . java b / realm / src / main / java / io / realm / Realm . java 
 index ccce5d2 . . cc7719c 100644 
 - - - a / realm / src / main / java / io / realm / Realm . java 
 + + + b / realm / src / main / java / io / realm / Realm . java 
 @ @ - 19 , 7 + 19 , 6 @ @ package io . realm ; 
 import android . content . Context ; 
 
 import java . io . File ; 
 - import java . io . IOException ; 
 import java . lang . reflect . Constructor ; 
 import java . lang . reflect . InvocationTargetException ; 
 import java . lang . reflect . Method ; 
 @ @ - 71 , 7 + 70 , 7 @ @ public class Realm { 
 init ( ) ; 
 } 
 
 - public Realm ( File writeablePath ) throws IOException { 
 + public Realm ( File writeablePath ) { 
 this ( writeablePath , " default . realm " ) ; 
 } 

