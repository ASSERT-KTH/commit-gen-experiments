BLEU SCORE: 0.05341087579952926

TEST MSG: Added build variant logging .
GENERATED MSG: update PR as per review

TEST DIFF (one line): diff - - git a / examples / newsreaderExample / build . gradle b / examples / newsreaderExample / build . gradle <nl> index c99b594 . . 021e3dd 100644 <nl> - - - a / examples / newsreaderExample / build . gradle <nl> + + + b / examples / newsreaderExample / build . gradle <nl> @ @ - 41 , 7 + 41 , 7 @ @ dependencies { <nl> compile ' com . squareup . retrofit : retrofit : 2 . 0 . 0 - beta2 ' <nl> compile ' com . squareup . retrofit : converter - jackson : 2 . 0 . 0 - beta2 ' <nl> compile ' com . squareup . retrofit : adapter - rxjava : 2 . 0 . 0 - beta2 ' <nl> - compile ' com . jakewharton . timber : timber : 3 . 0 . 1 ' <nl> + compile ' com . jakewharton . timber : timber : 4 . 1 . 0 ' <nl> compile ' com . jakewharton : butterknife : 7 . 0 . 1 ' <nl> compile ' me . zhanghai . android . materialprogressbar : library : 1 . 1 . 4 ' <nl> } <nl> diff - - git a / examples / newsreaderExample / src / debug / java / AndroidManifest . xml b / examples / newsreaderExample / src / debug / java / AndroidManifest . xml <nl> new file mode 100644 <nl> index 0000000 . . d044658 <nl> - - - / dev / null <nl> + + + b / examples / newsreaderExample / src / debug / java / AndroidManifest . xml <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < manifest package = " io . realm . examples . newsreader " <nl> + xmlns : android = " http : / / schemas . android . com / apk / res / android " > <nl> + <nl> + < application android : name = " . DebugNewsReaderApplication " / > <nl> + < / manifest > <nl> diff - - git a / examples / newsreaderExample / src / debug / java / io / realm / examples / newsreader / DebugNewsReaderApplication . java b / examples / newsreaderExample / src / debug / java / io / realm / examples / newsreader / DebugNewsReaderApplication . java <nl> new file mode 100644 <nl> index 0000000 . . 3f130d1 <nl> - - - / dev / null <nl> + + + b / examples / newsreaderExample / src / debug / java / io / realm / examples / newsreader / DebugNewsReaderApplication . java <nl> @ @ - 0 , 0 + 1 , 13 @ @ <nl> + package io . realm . examples . newsreader ; <nl> + <nl> + import timber . log . Timber ; <nl> + <nl> + / * * <nl> + * Debug specific application setup . <nl> + * / <nl> + public class DebugNewsReaderApplication extends NewsReaderApplication { <nl> + @ Override <nl> + protected void initializeTimber ( ) { <nl> + Timber . plant ( new Timber . DebugTree ( ) ) ; <nl> + } <nl> + } <nl> diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / NewsReaderApplication . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / NewsReaderApplication . java <nl> index 63dd053 . . 933a0d4 100644 <nl> - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / NewsReaderApplication . java <nl> + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / NewsReaderApplication . java <nl> @ @ - 25 , 7 + 25 , 7 @ @ import rx . plugins . RxJavaErrorHandler ; <nl> import rx . plugins . RxJavaPlugins ; <nl> import timber . log . Timber ; <nl> <nl> - public class NewsReaderApplication extends Application { <nl> + public abstract class NewsReaderApplication extends Application { <nl> <nl> private static Context context ; <nl> <nl> @ @ - 34 , 8 + 34 , 7 @ @ public class NewsReaderApplication extends Application { <nl> super . onCreate ( ) ; <nl> context = this ; <nl> <nl> - / / Logging and error handling from RxJava <nl> - Timber . plant ( new Timber . DebugTree ( ) ) ; <nl> + initializeTimber ( ) ; <nl> RxJavaPlugins . getInstance ( ) . registerErrorHandler ( new RxJavaErrorHandler ( ) { <nl> @ Override <nl> public void handleError ( Throwable e ) { <nl> @ @ - 49 , 6 + 48 , 11 @ @ public class NewsReaderApplication extends Application { <nl> Realm . setDefaultConfiguration ( realmConfig ) ; <nl> } <nl> <nl> + / * * <nl> + * Initialize Timer logging <nl> + * / <nl> + protected abstract void initializeTimber ( ) ; <nl> + <nl> public static Context getContext ( ) { <nl> return context ; <nl> } <nl> diff - - git a / examples / newsreaderExample / src / release / AndroidManifest . xml b / examples / newsreaderExample / src / release / AndroidManifest . xml <nl> new file mode 100644 <nl> index 0000000 . . d044658 <nl> - - - / dev / null <nl> + + + b / examples / newsreaderExample / src / release / AndroidManifest . xml <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > <nl> + < manifest package = " io . realm . examples . newsreader " <nl> + xmlns : android = " http : / / schemas . android . com / apk / res / android " > <nl> + <nl> + < application android : name = " . DebugNewsReaderApplication " / > <nl> + < / manifest > <nl> diff - - git a / examples / newsreaderExample / src / release / java / io / realm / examples / newsreader / ReleaseNewsReaderApplication . java b / examples / newsreaderExample / src / release / java / io / realm / examples / newsreader / ReleaseNewsReaderApplication . java <nl> new file mode 100644 <nl> index 0000000 . . f835d1a <nl> - - - / dev / null <nl> + + + b / examples / newsreaderExample / src / release / java / io / realm / examples / newsreader / ReleaseNewsReaderApplication . java <nl> @ @ - 0 , 0 + 1 , 11 @ @ <nl> + package io . realm . examples . newsreader ; <nl> + <nl> + / * * <nl> + * Release specific application setup . <nl> + * / <nl> + public class ReleaseNewsReaderApplication extends NewsReaderApplication { <nl> + @ Override <nl> + protected void initializeTimber ( ) { <nl> + / / No logging in Release mode . <nl> + } <nl> + }
NEAREST DIFF (one line): diff - - git a / changelog . txt b / changelog . txt <nl> index 5c4a126 . . 6560af9 100644 <nl> - - - a / changelog . txt <nl> + + + b / changelog . txt <nl> @ @ - 1 , 9 + 1 , 9 @ @ <nl> 0 . 82 <nl> - * Support async queries & transaction <nl> + * Support async queries & transactions . <nl> * Trying to access a deleted Realm object throw throws a proper IllegalStateException . <nl> * Added in - memory Realm support . <nl> * Closing realm on another thread different from where it was created now throws an exception . <nl> - * @ Index annotation can also be applied to byte / short / int / long / boolean / Date <nl> + * @ Index annotation can also be applied to byte / short / int / long / boolean / Date . <nl> now . <nl> <nl> 0 . 81 . 1 <nl> diff - - git a / examples / threadExample / build . gradle b / examples / threadExample / build . gradle <nl> index babcdcd . . a064db9 100644 <nl> - - - a / examples / threadExample / build . gradle <nl> + + + b / examples / threadExample / build . gradle <nl> @ @ - 30 , 5 + 30 , 4 @ @ tasks . preBuild { <nl> dependencies { <nl> compile ' com . android . support : appcompat - v7 : 21 . 0 . + ' <nl> compile files ( " . . / . . / realm / build / libs / realm - $ { version } . jar " ) <nl> - compile ' com . squareup . leakcanary : leakcanary - android : 1 . 3 . 1 ' <nl> } <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / AsyncQueryFragment . java b / examples / threadExample / src / main / java / io / realm / examples / threads / AsyncQueryFragment . java <nl> index 231a58d . . 3657e46 100644 <nl> - - - a / examples / threadExample / src / main / java / io / realm / examples / threads / AsyncQueryFragment . java <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / AsyncQueryFragment . java <nl> @ @ - 18 , 19 + 18 , 15 @ @ package io . realm . examples . threads ; <nl> <nl> import android . content . Context ; <nl> import android . os . Bundle ; <nl> - import android . os . SystemClock ; <nl> import android . support . v4 . app . Fragment ; <nl> import android . view . LayoutInflater ; <nl> import android . view . View ; <nl> import android . view . ViewGroup ; <nl> import android . widget . BaseAdapter ; <nl> - import android . widget . Button ; <nl> import android . widget . ListView ; <nl> import android . widget . TextView ; <nl> import android . widget . Toast ; <nl> <nl> - import com . squareup . leakcanary . RefWatcher ; <nl> - <nl> import java . util . Collections ; <nl> import java . util . List ; <nl> <nl> @ @ - 78 , 13 + 74 , 6 @ @ public class AsyncQueryFragment extends Fragment implements View . OnClickListener <nl> } <nl> <nl> @ Override <nl> - public void onDestroy ( ) { <nl> - super . onDestroy ( ) ; <nl> - RefWatcher refWatcher = MyApplication . getRefWatcher ( getActivity ( ) ) ; <nl> - refWatcher . watch ( this ) ; <nl> - } <nl> - <nl> - @ Override <nl> public void onClick ( View view ) { <nl> switch ( view . getId ( ) ) { <nl> case R . id . start _ button : { <nl> @ @ - 118 , 6 + 107 , 8 @ @ public class AsyncQueryFragment extends Fragment implements View . OnClickListener <nl> public void execute ( Realm realm ) { <nl> / / query for all points <nl> RealmResults < Dot > dots = realm . where ( Dot . class ) . findAll ( ) ; <nl> + <nl> + / / Iterating backwards to avoid https : / / github . com / realm / realm - java / issues / 640 <nl> for ( int i = dots . size ( ) - 1 ; i > = 0 ; i - - ) { <nl> Dot dot = dots . get ( i ) ; <nl> if ( dot . isValid ( ) ) { <nl> @ @ - 126 , 7 + 117 , 6 @ @ public class AsyncQueryFragment extends Fragment implements View . OnClickListener <nl> dot . setX ( y ) ; <nl> dot . setY ( x ) ; <nl> } <nl> - SystemClock . sleep ( 60 ) ; <nl> } <nl> } <nl> } , new Realm . Transaction . Callback ( ) { <nl> diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / MyApplication . java b / examples / threadExample / src / main / java / io / realm / examples / threads / MyApplication . java <nl> index 3363272 . . 7ced58b 100644 <nl> - - - a / examples / threadExample / src / main / java / io / realm / examples / threads / MyApplication . java <nl> + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / MyApplication . java <nl> @ @ - 17 , 16 + 17 , 11 @ @ <nl> package io . realm . examples . threads ; <nl> <nl> import android . app . Application ; <nl> - import android . content . Context ; <nl> - <nl> - import com . squareup . leakcanary . LeakCanary ; <nl> - import com . squareup . leakcanary . RefWatcher ; <nl> <nl> import io . realm . Realm ; <nl> import io . realm . RealmConfiguration ; <nl> <nl> public class MyApplication extends Application { <nl> - private RefWatcher refWatcher ; <nl> <nl> @ Override <nl> public void onCreate ( ) { <nl> @ @ - 36 , 12 + 31 , 5 @ @ public class MyApplication extends Application { <nl> RealmConfiguration realmConfiguration = new RealmConfiguration . Builder ( this ) . build ( ) ; <nl> Realm . deleteRealm ( realmConfiguration ) ; / / Clean slate <nl> Realm . setDefaultConfiguration ( realmConfiguration ) ; / / Make this Realm the default <nl> - <nl> - refWatcher = LeakCanary . install ( this ) ; <nl> - } <nl> - <nl> - public static RefWatcher getRefWatcher ( Context context ) { <nl> - MyApplication application = ( MyApplication ) context . getApplicationContext ( ) ; <nl> - return application . refWatcher ; <nl> } <nl> } <nl> diff - - git a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> index af196e0 . . bed6e19 100644 <nl> - - - a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> + + + b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp <nl> @ @ - 891 , 11 + 891 , 12 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindWithHandover <nl> <nl> if ( ! QUERY _ VALID ( env , pQuery . get ( ) ) ) <nl> return - 1 ; <nl> + <nl> / / It ' s valid to go 1 past the end index <nl> if ( ( fromTableRow < 0 ) | | ( S ( fromTableRow ) > pTable - > size ( ) ) ) { <nl> - / / below check will fail with appropriate exception <nl> - ( void ) ROW _ INDEX _ VALID ( env , pTable , fromTableRow ) ; <nl> - return - 1 ; <nl> + / / below check will fail with appropriate exception <nl> + ( void ) ROW _ INDEX _ VALID ( env , pTable , fromTableRow ) ; <nl> + return - 1 ; <nl> } <nl> <nl> size _ t r = pQuery - > find ( S ( fromTableRow ) ) ; <nl> diff - - git a / realm / src / main / java / io / realm / RealmQuery . java b / realm / src / main / java / io / realm / RealmQuery . java <nl> index 06a2808 . . 548c335 100644 <nl> - - - a / realm / src / main / java / io / realm / RealmQuery . java <nl> + + + b / realm / src / main / java / io / realm / RealmQuery . java <nl> @ @ - 1886 , 6 + 1886 , 7 @ @ public class RealmQuery < E extends RealmObject > { <nl> * to deliver result or error to a { @ link io . realm . RealmResults . QueryCallback } or <nl> * a { @ link io . realm . RealmObject . QueryCallback } <nl> * / <nl> + / / this handler is private & lives within the scope of the retained RealmQuery instance only <nl> @ SuppressLint ( " HandlerLeak " ) <nl> private class EventHandler extends Handler { <nl> private final static int FIND _ FIRST _ QUERY = 1 ;

TEST DIFF:
diff - - git a / examples / newsreaderExample / build . gradle b / examples / newsreaderExample / build . gradle 
 index c99b594 . . 021e3dd 100644 
 - - - a / examples / newsreaderExample / build . gradle 
 + + + b / examples / newsreaderExample / build . gradle 
 @ @ - 41 , 7 + 41 , 7 @ @ dependencies { 
 compile ' com . squareup . retrofit : retrofit : 2 . 0 . 0 - beta2 ' 
 compile ' com . squareup . retrofit : converter - jackson : 2 . 0 . 0 - beta2 ' 
 compile ' com . squareup . retrofit : adapter - rxjava : 2 . 0 . 0 - beta2 ' 
 - compile ' com . jakewharton . timber : timber : 3 . 0 . 1 ' 
 + compile ' com . jakewharton . timber : timber : 4 . 1 . 0 ' 
 compile ' com . jakewharton : butterknife : 7 . 0 . 1 ' 
 compile ' me . zhanghai . android . materialprogressbar : library : 1 . 1 . 4 ' 
 } 
 diff - - git a / examples / newsreaderExample / src / debug / java / AndroidManifest . xml b / examples / newsreaderExample / src / debug / java / AndroidManifest . xml 
 new file mode 100644 
 index 0000000 . . d044658 
 - - - / dev / null 
 + + + b / examples / newsreaderExample / src / debug / java / AndroidManifest . xml 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < manifest package = " io . realm . examples . newsreader " 
 + xmlns : android = " http : / / schemas . android . com / apk / res / android " > 
 + 
 + < application android : name = " . DebugNewsReaderApplication " / > 
 + < / manifest > 
 diff - - git a / examples / newsreaderExample / src / debug / java / io / realm / examples / newsreader / DebugNewsReaderApplication . java b / examples / newsreaderExample / src / debug / java / io / realm / examples / newsreader / DebugNewsReaderApplication . java 
 new file mode 100644 
 index 0000000 . . 3f130d1 
 - - - / dev / null 
 + + + b / examples / newsreaderExample / src / debug / java / io / realm / examples / newsreader / DebugNewsReaderApplication . java 
 @ @ - 0 , 0 + 1 , 13 @ @ 
 + package io . realm . examples . newsreader ; 
 + 
 + import timber . log . Timber ; 
 + 
 + / * * 
 + * Debug specific application setup . 
 + * / 
 + public class DebugNewsReaderApplication extends NewsReaderApplication { 
 + @ Override 
 + protected void initializeTimber ( ) { 
 + Timber . plant ( new Timber . DebugTree ( ) ) ; 
 + } 
 + } 
 diff - - git a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / NewsReaderApplication . java b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / NewsReaderApplication . java 
 index 63dd053 . . 933a0d4 100644 
 - - - a / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / NewsReaderApplication . java 
 + + + b / examples / newsreaderExample / src / main / java / io / realm / examples / newsreader / NewsReaderApplication . java 
 @ @ - 25 , 7 + 25 , 7 @ @ import rx . plugins . RxJavaErrorHandler ; 
 import rx . plugins . RxJavaPlugins ; 
 import timber . log . Timber ; 
 
 - public class NewsReaderApplication extends Application { 
 + public abstract class NewsReaderApplication extends Application { 
 
 private static Context context ; 
 
 @ @ - 34 , 8 + 34 , 7 @ @ public class NewsReaderApplication extends Application { 
 super . onCreate ( ) ; 
 context = this ; 
 
 - / / Logging and error handling from RxJava 
 - Timber . plant ( new Timber . DebugTree ( ) ) ; 
 + initializeTimber ( ) ; 
 RxJavaPlugins . getInstance ( ) . registerErrorHandler ( new RxJavaErrorHandler ( ) { 
 @ Override 
 public void handleError ( Throwable e ) { 
 @ @ - 49 , 6 + 48 , 11 @ @ public class NewsReaderApplication extends Application { 
 Realm . setDefaultConfiguration ( realmConfig ) ; 
 } 
 
 + / * * 
 + * Initialize Timer logging 
 + * / 
 + protected abstract void initializeTimber ( ) ; 
 + 
 public static Context getContext ( ) { 
 return context ; 
 } 
 diff - - git a / examples / newsreaderExample / src / release / AndroidManifest . xml b / examples / newsreaderExample / src / release / AndroidManifest . xml 
 new file mode 100644 
 index 0000000 . . d044658 
 - - - / dev / null 
 + + + b / examples / newsreaderExample / src / release / AndroidManifest . xml 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < manifest package = " io . realm . examples . newsreader " 
 + xmlns : android = " http : / / schemas . android . com / apk / res / android " > 
 + 
 + < application android : name = " . DebugNewsReaderApplication " / > 
 + < / manifest > 
 diff - - git a / examples / newsreaderExample / src / release / java / io / realm / examples / newsreader / ReleaseNewsReaderApplication . java b / examples / newsreaderExample / src / release / java / io / realm / examples / newsreader / ReleaseNewsReaderApplication . java 
 new file mode 100644 
 index 0000000 . . f835d1a 
 - - - / dev / null 
 + + + b / examples / newsreaderExample / src / release / java / io / realm / examples / newsreader / ReleaseNewsReaderApplication . java 
 @ @ - 0 , 0 + 1 , 11 @ @ 
 + package io . realm . examples . newsreader ; 
 + 
 + / * * 
 + * Release specific application setup . 
 + * / 
 + public class ReleaseNewsReaderApplication extends NewsReaderApplication { 
 + @ Override 
 + protected void initializeTimber ( ) { 
 + / / No logging in Release mode . 
 + } 
 + }

NEAREST DIFF:
diff - - git a / changelog . txt b / changelog . txt 
 index 5c4a126 . . 6560af9 100644 
 - - - a / changelog . txt 
 + + + b / changelog . txt 
 @ @ - 1 , 9 + 1 , 9 @ @ 
 0 . 82 
 - * Support async queries & transaction 
 + * Support async queries & transactions . 
 * Trying to access a deleted Realm object throw throws a proper IllegalStateException . 
 * Added in - memory Realm support . 
 * Closing realm on another thread different from where it was created now throws an exception . 
 - * @ Index annotation can also be applied to byte / short / int / long / boolean / Date 
 + * @ Index annotation can also be applied to byte / short / int / long / boolean / Date . 
 now . 
 
 0 . 81 . 1 
 diff - - git a / examples / threadExample / build . gradle b / examples / threadExample / build . gradle 
 index babcdcd . . a064db9 100644 
 - - - a / examples / threadExample / build . gradle 
 + + + b / examples / threadExample / build . gradle 
 @ @ - 30 , 5 + 30 , 4 @ @ tasks . preBuild { 
 dependencies { 
 compile ' com . android . support : appcompat - v7 : 21 . 0 . + ' 
 compile files ( " . . / . . / realm / build / libs / realm - $ { version } . jar " ) 
 - compile ' com . squareup . leakcanary : leakcanary - android : 1 . 3 . 1 ' 
 } 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / AsyncQueryFragment . java b / examples / threadExample / src / main / java / io / realm / examples / threads / AsyncQueryFragment . java 
 index 231a58d . . 3657e46 100644 
 - - - a / examples / threadExample / src / main / java / io / realm / examples / threads / AsyncQueryFragment . java 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / AsyncQueryFragment . java 
 @ @ - 18 , 19 + 18 , 15 @ @ package io . realm . examples . threads ; 
 
 import android . content . Context ; 
 import android . os . Bundle ; 
 - import android . os . SystemClock ; 
 import android . support . v4 . app . Fragment ; 
 import android . view . LayoutInflater ; 
 import android . view . View ; 
 import android . view . ViewGroup ; 
 import android . widget . BaseAdapter ; 
 - import android . widget . Button ; 
 import android . widget . ListView ; 
 import android . widget . TextView ; 
 import android . widget . Toast ; 
 
 - import com . squareup . leakcanary . RefWatcher ; 
 - 
 import java . util . Collections ; 
 import java . util . List ; 
 
 @ @ - 78 , 13 + 74 , 6 @ @ public class AsyncQueryFragment extends Fragment implements View . OnClickListener 
 } 
 
 @ Override 
 - public void onDestroy ( ) { 
 - super . onDestroy ( ) ; 
 - RefWatcher refWatcher = MyApplication . getRefWatcher ( getActivity ( ) ) ; 
 - refWatcher . watch ( this ) ; 
 - } 
 - 
 - @ Override 
 public void onClick ( View view ) { 
 switch ( view . getId ( ) ) { 
 case R . id . start _ button : { 
 @ @ - 118 , 6 + 107 , 8 @ @ public class AsyncQueryFragment extends Fragment implements View . OnClickListener 
 public void execute ( Realm realm ) { 
 / / query for all points 
 RealmResults < Dot > dots = realm . where ( Dot . class ) . findAll ( ) ; 
 + 
 + / / Iterating backwards to avoid https : / / github . com / realm / realm - java / issues / 640 
 for ( int i = dots . size ( ) - 1 ; i > = 0 ; i - - ) { 
 Dot dot = dots . get ( i ) ; 
 if ( dot . isValid ( ) ) { 
 @ @ - 126 , 7 + 117 , 6 @ @ public class AsyncQueryFragment extends Fragment implements View . OnClickListener 
 dot . setX ( y ) ; 
 dot . setY ( x ) ; 
 } 
 - SystemClock . sleep ( 60 ) ; 
 } 
 } 
 } , new Realm . Transaction . Callback ( ) { 
 diff - - git a / examples / threadExample / src / main / java / io / realm / examples / threads / MyApplication . java b / examples / threadExample / src / main / java / io / realm / examples / threads / MyApplication . java 
 index 3363272 . . 7ced58b 100644 
 - - - a / examples / threadExample / src / main / java / io / realm / examples / threads / MyApplication . java 
 + + + b / examples / threadExample / src / main / java / io / realm / examples / threads / MyApplication . java 
 @ @ - 17 , 16 + 17 , 11 @ @ 
 package io . realm . examples . threads ; 
 
 import android . app . Application ; 
 - import android . content . Context ; 
 - 
 - import com . squareup . leakcanary . LeakCanary ; 
 - import com . squareup . leakcanary . RefWatcher ; 
 
 import io . realm . Realm ; 
 import io . realm . RealmConfiguration ; 
 
 public class MyApplication extends Application { 
 - private RefWatcher refWatcher ; 
 
 @ Override 
 public void onCreate ( ) { 
 @ @ - 36 , 12 + 31 , 5 @ @ public class MyApplication extends Application { 
 RealmConfiguration realmConfiguration = new RealmConfiguration . Builder ( this ) . build ( ) ; 
 Realm . deleteRealm ( realmConfiguration ) ; / / Clean slate 
 Realm . setDefaultConfiguration ( realmConfiguration ) ; / / Make this Realm the default 
 - 
 - refWatcher = LeakCanary . install ( this ) ; 
 - } 
 - 
 - public static RefWatcher getRefWatcher ( Context context ) { 
 - MyApplication application = ( MyApplication ) context . getApplicationContext ( ) ; 
 - return application . refWatcher ; 
 } 
 } 
 diff - - git a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 index af196e0 . . bed6e19 100644 
 - - - a / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 + + + b / realm - jni / src / io _ realm _ internal _ TableQuery . cpp 
 @ @ - 891 , 11 + 891 , 12 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ TableQuery _ nativeFindWithHandover 
 
 if ( ! QUERY _ VALID ( env , pQuery . get ( ) ) ) 
 return - 1 ; 
 + 
 / / It ' s valid to go 1 past the end index 
 if ( ( fromTableRow < 0 ) | | ( S ( fromTableRow ) > pTable - > size ( ) ) ) { 
 - / / below check will fail with appropriate exception 
 - ( void ) ROW _ INDEX _ VALID ( env , pTable , fromTableRow ) ; 
 - return - 1 ; 
 + / / below check will fail with appropriate exception 
 + ( void ) ROW _ INDEX _ VALID ( env , pTable , fromTableRow ) ; 
 + return - 1 ; 
 } 
 
 size _ t r = pQuery - > find ( S ( fromTableRow ) ) ; 
 diff - - git a / realm / src / main / java / io / realm / RealmQuery . java b / realm / src / main / java / io / realm / RealmQuery . java 
 index 06a2808 . . 548c335 100644 
 - - - a / realm / src / main / java / io / realm / RealmQuery . java 
 + + + b / realm / src / main / java / io / realm / RealmQuery . java 
 @ @ - 1886 , 6 + 1886 , 7 @ @ public class RealmQuery < E extends RealmObject > { 
 * to deliver result or error to a { @ link io . realm . RealmResults . QueryCallback } or 
 * a { @ link io . realm . RealmObject . QueryCallback } 
 * / 
 + / / this handler is private & lives within the scope of the retained RealmQuery instance only 
 @ SuppressLint ( " HandlerLeak " ) 
 private class EventHandler extends Handler { 
 private final static int FIND _ FIRST _ QUERY = 1 ;
