BLEU SCORE: 0.024893534183931972

TEST MSG: optimize imports
GENERATED MSG: Added unit test for primary key migration .

TEST DIFF (one line): diff - - git a / realm / realm - library / src / androidTest / java / io / realm / OrderedRealmCollectionTests . java b / realm / realm - library / src / androidTest / java / io / realm / OrderedRealmCollectionTests . java <nl> index a6a5107 . . 778d6b7 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / OrderedRealmCollectionTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / OrderedRealmCollectionTests . java <nl> @ @ - 34 , 7 + 34 , 6 @ @ import io . realm . entities . AllJavaTypes ; <nl> import io . realm . rule . TestRealmConfigurationFactory ; <nl> <nl> import static org . junit . Assert . assertEquals ; <nl> - import static org . junit . Assert . assertNull ; <nl> import static org . junit . Assert . fail ; <nl> <nl> / * * <nl> diff - - git a / realm / realm - library / src / androidTest / java / io / realm / TestHelper . java b / realm / realm - library / src / androidTest / java / io / realm / TestHelper . java <nl> index 4064191 . . 9ae0ccd 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / TestHelper . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / TestHelper . java <nl> @ @ - 33 , 7 + 33 , 6 @ @ import java . io . UnsupportedEncodingException ; <nl> import java . lang . reflect . Constructor ; <nl> import java . lang . reflect . Field ; <nl> import java . lang . reflect . InvocationTargetException ; <nl> - import java . lang . reflect . Modifier ; <nl> import java . nio . charset . Charset ; <nl> import java . security . MessageDigest ; <nl> import java . security . NoSuchAlgorithmException ; <nl> @ @ - 43 , 8 + 42 , 8 @ @ import java . util . concurrent . CountDownLatch ; <nl> import java . util . concurrent . ExecutorService ; <nl> import java . util . concurrent . TimeUnit ; <nl> <nl> - import io . realm . entities . AnnotationIndexTypes ; <nl> import io . realm . entities . AllTypes ; <nl> + import io . realm . entities . AnnotationIndexTypes ; <nl> import io . realm . entities . NullTypes ; <nl> import io . realm . entities . StringOnly ; <nl> import io . realm . internal . Table ; <nl> diff - - git a / realm / realm - library / src / androidTest / java / io / realm / UnManagedOrderedRealmCollectionTests . java b / realm / realm - library / src / androidTest / java / io / realm / UnManagedOrderedRealmCollectionTests . java <nl> index a22da03 . . d2d2bc4 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / UnManagedOrderedRealmCollectionTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / UnManagedOrderedRealmCollectionTests . java <nl> @ @ - 23 , 16 + 23 , 13 @ @ import org . junit . Test ; <nl> import org . junit . runner . RunWith ; <nl> import org . junit . runners . Parameterized ; <nl> <nl> - import java . util . ArrayList ; <nl> import java . util . Arrays ; <nl> import java . util . List ; <nl> <nl> import io . realm . entities . AllJavaTypes ; <nl> import io . realm . rule . TestRealmConfigurationFactory ; <nl> <nl> - import static org . junit . Assert . assertEquals ; <nl> import static org . junit . Assert . assertFalse ; <nl> - import static org . junit . Assert . assertNull ; <nl> import static org . junit . Assert . assertTrue ; <nl> import static org . junit . Assert . fail ; <nl> <nl> diff - - git a / realm / realm - library / src / androidTest / java / io / realm / UnManagedRealmCollectionTests . java b / realm / realm - library / src / androidTest / java / io / realm / UnManagedRealmCollectionTests . java <nl> index 60efe58 . . 70f6aab 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / UnManagedRealmCollectionTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / UnManagedRealmCollectionTests . java <nl> @ @ - 25 , 17 + 25 , 12 @ @ import org . junit . runners . Parameterized ; <nl> <nl> import java . util . ArrayList ; <nl> import java . util . Arrays ; <nl> - import java . util . Collection ; <nl> import java . util . List ; <nl> <nl> import io . realm . entities . AllJavaTypes ; <nl> - import io . realm . entities . Dog ; <nl> - import io . realm . entities . Owner ; <nl> import io . realm . rule . TestRealmConfigurationFactory ; <nl> <nl> - import static org . junit . Assert . assertEquals ; <nl> import static org . junit . Assert . assertFalse ; <nl> - import static org . junit . Assert . assertNull ; <nl> import static org . junit . Assert . assertTrue ; <nl> import static org . junit . Assert . fail ; <nl> <nl> diff - - git a / realm / realm - library / src / androidTest / java / io / realm / entities / ConflictingFieldName . java b / realm / realm - library / src / androidTest / java / io / realm / entities / ConflictingFieldName . java <nl> index 478c47c . . 8592877 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / entities / ConflictingFieldName . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / entities / ConflictingFieldName . java <nl> @ @ - 18 , 9 + 18 , 6 @ @ package io . realm . entities ; <nl> <nl> import io . realm . RealmObject ; <nl> <nl> - <nl> - import io . realm . RealmObject ; <nl> - <nl> public class ConflictingFieldName extends RealmObject { <nl> private String realm ; <nl> private String row ; <nl> diff - - git a / realm / realm - library / src / androidTest / java / io / realm / entities / RealmAdapter . java b / realm / realm - library / src / androidTest / java / io / realm / entities / RealmAdapter . java <nl> index bc638a8 . . 35bc61c 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / entities / RealmAdapter . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / entities / RealmAdapter . java <nl> @ @ - 22 , 8 + 22 , 8 @ @ import android . view . ViewGroup ; <nl> import android . widget . ListAdapter ; <nl> import android . widget . TextView ; <nl> <nl> - import io . realm . RealmBaseAdapter ; <nl> import io . realm . OrderedRealmCollection ; <nl> + import io . realm . RealmBaseAdapter ; <nl> import io . realm . RealmResults ; <nl> <nl> public class RealmAdapter extends RealmBaseAdapter < AllTypes > implements ListAdapter { <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / DynamicRealm . java b / realm / realm - library / src / main / java / io / realm / DynamicRealm . java <nl> index 78a06f7 . . 85401c8 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / DynamicRealm . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / DynamicRealm . java <nl> @ @ - 22 , 8 + 22 , 8 @ @ import io . realm . exceptions . RealmException ; <nl> import io . realm . exceptions . RealmIOException ; <nl> import io . realm . internal . Table ; <nl> import io . realm . internal . TableView ; <nl> - import rx . Observable ; <nl> import io . realm . internal . log . RealmLog ; <nl> + import rx . Observable ; <nl> <nl> / * * <nl> * DynamicRealm is a dynamic variant of { @ link io . realm . Realm } . This means that all access to data and / or queries are <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / LinkView . java b / realm / realm - library / src / main / java / io / realm / internal / LinkView . java <nl> index 0981ff0 . . 3e6869f 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / LinkView . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / LinkView . java <nl> @ @ - 16 , 8 + 16 , 6 @ @ <nl> <nl> package io . realm . internal ; <nl> <nl> - import java . lang . ref . ReferenceQueue ; <nl> - <nl> import io . realm . RealmFieldType ; <nl> <nl> / * * <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / RealmCore . java b / realm / realm - library / src / main / java / io / realm / internal / RealmCore . java <nl> index 670184b . . 8a5376b 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / RealmCore . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / RealmCore . java <nl> @ @ - 18 , 12 + 18 , 12 @ @ package io . realm . internal ; <nl> <nl> import android . content . Context ; <nl> <nl> - import io . realm . internal . android . ReLinker ; <nl> - <nl> import java . io . File ; <nl> import java . lang . reflect . Field ; <nl> import java . util . Locale ; <nl> <nl> + import io . realm . internal . android . ReLinker ; <nl> + <nl> / * * <nl> * Utility methods for Realm Core . <nl> * / <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / UncheckedRow . java b / realm / realm - library / src / main / java / io / realm / internal / UncheckedRow . java <nl> index 00ed391 . . d12ef09 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / UncheckedRow . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / UncheckedRow . java <nl> @ @ - 16 , 7 + 16 , 6 @ @ <nl> <nl> package io . realm . internal ; <nl> <nl> - import java . lang . ref . ReferenceQueue ; <nl> import java . util . Date ; <nl> <nl> import io . realm . RealmFieldType ; <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / internal / android / ISO8601Utils . java b / realm / realm - library / src / main / java / io / realm / internal / android / ISO8601Utils . java <nl> index e10abbe . . bfdd9bb 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / internal / android / ISO8601Utils . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / internal / android / ISO8601Utils . java <nl> @ @ - 19 , 7 + 19 , 10 @ @ package io . realm . internal . android ; <nl> <nl> import java . text . ParseException ; <nl> import java . text . ParsePosition ; <nl> - import java . util . * ; <nl> + import java . util . Calendar ; <nl> + import java . util . Date ; <nl> + import java . util . GregorianCalendar ; <nl> + import java . util . TimeZone ; <nl> <nl> / * * <nl> * Utilities methods for manipulating dates in iso8601 format . This is much much faster and GC friendly than using SimpleDateFormat so
NEAREST DIFF (one line): diff - - git a / realm - jni / src / io _ realm _ internal _ table . cpp b / realm - jni / src / io _ realm _ internal _ table . cpp <nl> index 6b25e5e . . 8a6a61b 100644 <nl> - - - a / realm - jni / src / io _ realm _ internal _ table . cpp <nl> + + + b / realm - jni / src / io _ realm _ internal _ table . cpp <nl> @ @ - 1485 , 7 + 1485 , 8 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ Table _ nativeSetPrimaryKey ( <nl> return 0 ; <nl> } <nl> <nl> - / / Fix bug https : / / github . com / realm / realm - java / issues / 1059 <nl> + / / Fix wrong primary key table created on Realm - Android 0 . 80 . 1 and below <nl> + / / https : / / github . com / realm / realm - java / issues / 1059 <nl> JNIEXPORT void JNICALL Java _ io _ realm _ internal _ Table _ nativeMigratePrimaryKeyTableIfNeeded <nl> ( JNIEnv * env , jobject , jlong groupNativePtr , jlong privateKeyTableNativePtr ) <nl> { <nl> @ @ - 1495 , 7 + 1496 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ Table _ nativeMigratePrimaryKeyTable <nl> StringData tmp _ col _ name = StringData ( " tmp _ field _ name " ) ; <nl> std : : size _ t tmp _ col _ ndx = pk _ table - > add _ column ( DataType ( type _ String ) , tmp _ col _ name ) ; <nl> <nl> - / / Create tmp string column with proper data <nl> + / / Create tmp string column with field name instead of column index <nl> int rows = pk _ table - > size ( ) ; <nl> for ( int row _ ndx = 0 ; row _ ndx < rows ; row _ ndx + + ) { <nl> StringData table _ name = pk _ table - > get _ string ( io _ realm _ internal _ Table _ PRIMARY _ KEY _ CLASS _ COLUMN _ INDEX , row _ ndx ) ; <nl> @ @ - 1505 , 6 + 1506 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ Table _ nativeMigratePrimaryKeyTable <nl> } <nl> <nl> / / Delete old int column , and rename tmp column to same name <nl> + / / Index should match as we control creation of table <nl> pk _ table - > remove _ column ( io _ realm _ internal _ Table _ PRIMARY _ KEY _ FIELD _ COLUMN _ INDEX ) ; <nl> pk _ table - > rename _ column ( pk _ table - > get _ column _ index ( tmp _ col _ name ) , StringData ( " pk _ property " ) ) ; <nl> } <nl> diff - - git a / realm / src / androidTest / assets / 080 _ annotationtypes . realm b / realm / src / androidTest / assets / 080 _ annotationtypes . realm <nl> new file mode 100644 <nl> index 0000000 . . 1252c79 <nl> Binary files / dev / null and b / realm / src / androidTest / assets / 080 _ annotationtypes . realm differ <nl> diff - - git a / realm / src / androidTest / java / io / realm / RealmTest . java b / realm / src / androidTest / java / io / realm / RealmTest . java <nl> index a301ee1 . . 881612c 100644 <nl> - - - a / realm / src / androidTest / java / io / realm / RealmTest . java <nl> + + + b / realm / src / androidTest / java / io / realm / RealmTest . java <nl> @ @ - 34 , 7 + 34 , 6 @ @ import java . util . concurrent . Future ; <nl> <nl> import io . realm . entities . AllTypes ; <nl> import io . realm . entities . AllTypesPrimaryKey ; <nl> - import io . realm . entities . AnnotationTypes ; <nl> import io . realm . entities . Cat ; <nl> import io . realm . entities . CyclicType ; <nl> import io . realm . entities . CyclicTypePrimaryKey ; <nl> diff - - git a / realm / src / androidTest / java / io / realm / internal / JNITransactions . java b / realm / src / androidTest / java / io / realm / internal / JNITransactions . java <nl> index b6ab857 . . 72027ce 100644 <nl> - - - a / realm / src / androidTest / java / io / realm / internal / JNITransactions . java <nl> + + + b / realm / src / androidTest / java / io / realm / internal / JNITransactions . java <nl> @ @ - 8 , 6 + 8 , 7 @ @ import java . io . IOException ; <nl> import java . util . Arrays ; <nl> import java . util . Date ; <nl> <nl> + import io . realm . Realm ; <nl> import io . realm . TestHelper ; <nl> import io . realm . exceptions . RealmException ; <nl> <nl> @ @ - 379 , 13 + 380 , 11 @ @ public class JNITransactions extends AndroidTestCase { <nl> } <nl> <nl> public void testPrimaryKeyTableMigration ( ) throws IOException { <nl> - TestHelper . copyRealmFromAssets ( getContext ( ) , " wrong _ primarykey _ table . realm " , " default . realm " ) ; <nl> - String realmPath = new File ( getContext ( ) . getFilesDir ( ) , " default . realm " ) . getAbsolutePath ( ) ; <nl> - SharedGroup db = new SharedGroup ( realmPath , SharedGroup . Durability . FULL , null ) ; <nl> - ImplicitTransaction transaction = db . beginImplicitTransaction ( ) ; <nl> - Table table = transaction . getTable ( " pk " ) ; <nl> - assertEquals ( 2 , table . getColumnCount ( ) ) ; <nl> - assertEquals ( ColumnType . STRING , table . getColumnType ( 0 ) ) ; <nl> - assertEquals ( ColumnType . STRING , table . getColumnType ( 1 ) ) ; <nl> + TestHelper . copyRealmFromAssets ( getContext ( ) , " 080 _ annotationtypes . realm " , " default . realm " ) ; <nl> + SharedGroup db = new SharedGroup ( new File ( getContext ( ) . getFilesDir ( ) , Realm . DEFAULT _ REALM _ NAME ) . getAbsolutePath ( ) , SharedGroup . Durability . FULL , null ) ; <nl> + ImplicitTransaction tr = db . beginImplicitTransaction ( ) ; <nl> + Table t = tr . getTable ( " class _ AnnotationTypes " ) ; <nl> + assertTrue ( t . hasPrimaryKey ( ) ) ; <nl> + db . close ( ) ; <nl> } <nl> } <nl> diff - - git a / realm / src / main / java / io / realm / Realm . java b / realm / src / main / java / io / realm / Realm . java <nl> index 2eefcb8 . . 25adc38 100644 <nl> - - - a / realm / src / main / java / io / realm / Realm . java <nl> + + + b / realm / src / main / java / io / realm / Realm . java <nl> @ @ - 25 , 7 + 25 , 6 @ @ import android . os . Looper ; <nl> import android . os . Message ; <nl> import android . util . JsonReader ; <nl> <nl> - import org . jetbrains . annotations . NotNull ; <nl> import org . json . JSONArray ; <nl> import org . json . JSONException ; <nl> import org . json . JSONObject ;

TEST DIFF:
diff - - git a / realm / realm - library / src / androidTest / java / io / realm / OrderedRealmCollectionTests . java b / realm / realm - library / src / androidTest / java / io / realm / OrderedRealmCollectionTests . java 
 index a6a5107 . . 778d6b7 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / OrderedRealmCollectionTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / OrderedRealmCollectionTests . java 
 @ @ - 34 , 7 + 34 , 6 @ @ import io . realm . entities . AllJavaTypes ; 
 import io . realm . rule . TestRealmConfigurationFactory ; 
 
 import static org . junit . Assert . assertEquals ; 
 - import static org . junit . Assert . assertNull ; 
 import static org . junit . Assert . fail ; 
 
 / * * 
 diff - - git a / realm / realm - library / src / androidTest / java / io / realm / TestHelper . java b / realm / realm - library / src / androidTest / java / io / realm / TestHelper . java 
 index 4064191 . . 9ae0ccd 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / TestHelper . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / TestHelper . java 
 @ @ - 33 , 7 + 33 , 6 @ @ import java . io . UnsupportedEncodingException ; 
 import java . lang . reflect . Constructor ; 
 import java . lang . reflect . Field ; 
 import java . lang . reflect . InvocationTargetException ; 
 - import java . lang . reflect . Modifier ; 
 import java . nio . charset . Charset ; 
 import java . security . MessageDigest ; 
 import java . security . NoSuchAlgorithmException ; 
 @ @ - 43 , 8 + 42 , 8 @ @ import java . util . concurrent . CountDownLatch ; 
 import java . util . concurrent . ExecutorService ; 
 import java . util . concurrent . TimeUnit ; 
 
 - import io . realm . entities . AnnotationIndexTypes ; 
 import io . realm . entities . AllTypes ; 
 + import io . realm . entities . AnnotationIndexTypes ; 
 import io . realm . entities . NullTypes ; 
 import io . realm . entities . StringOnly ; 
 import io . realm . internal . Table ; 
 diff - - git a / realm / realm - library / src / androidTest / java / io / realm / UnManagedOrderedRealmCollectionTests . java b / realm / realm - library / src / androidTest / java / io / realm / UnManagedOrderedRealmCollectionTests . java 
 index a22da03 . . d2d2bc4 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / UnManagedOrderedRealmCollectionTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / UnManagedOrderedRealmCollectionTests . java 
 @ @ - 23 , 16 + 23 , 13 @ @ import org . junit . Test ; 
 import org . junit . runner . RunWith ; 
 import org . junit . runners . Parameterized ; 
 
 - import java . util . ArrayList ; 
 import java . util . Arrays ; 
 import java . util . List ; 
 
 import io . realm . entities . AllJavaTypes ; 
 import io . realm . rule . TestRealmConfigurationFactory ; 
 
 - import static org . junit . Assert . assertEquals ; 
 import static org . junit . Assert . assertFalse ; 
 - import static org . junit . Assert . assertNull ; 
 import static org . junit . Assert . assertTrue ; 
 import static org . junit . Assert . fail ; 
 
 diff - - git a / realm / realm - library / src / androidTest / java / io / realm / UnManagedRealmCollectionTests . java b / realm / realm - library / src / androidTest / java / io / realm / UnManagedRealmCollectionTests . java 
 index 60efe58 . . 70f6aab 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / UnManagedRealmCollectionTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / UnManagedRealmCollectionTests . java 
 @ @ - 25 , 17 + 25 , 12 @ @ import org . junit . runners . Parameterized ; 
 
 import java . util . ArrayList ; 
 import java . util . Arrays ; 
 - import java . util . Collection ; 
 import java . util . List ; 
 
 import io . realm . entities . AllJavaTypes ; 
 - import io . realm . entities . Dog ; 
 - import io . realm . entities . Owner ; 
 import io . realm . rule . TestRealmConfigurationFactory ; 
 
 - import static org . junit . Assert . assertEquals ; 
 import static org . junit . Assert . assertFalse ; 
 - import static org . junit . Assert . assertNull ; 
 import static org . junit . Assert . assertTrue ; 
 import static org . junit . Assert . fail ; 
 
 diff - - git a / realm / realm - library / src / androidTest / java / io / realm / entities / ConflictingFieldName . java b / realm / realm - library / src / androidTest / java / io / realm / entities / ConflictingFieldName . java 
 index 478c47c . . 8592877 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / entities / ConflictingFieldName . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / entities / ConflictingFieldName . java 
 @ @ - 18 , 9 + 18 , 6 @ @ package io . realm . entities ; 
 
 import io . realm . RealmObject ; 
 
 - 
 - import io . realm . RealmObject ; 
 - 
 public class ConflictingFieldName extends RealmObject { 
 private String realm ; 
 private String row ; 
 diff - - git a / realm / realm - library / src / androidTest / java / io / realm / entities / RealmAdapter . java b / realm / realm - library / src / androidTest / java / io / realm / entities / RealmAdapter . java 
 index bc638a8 . . 35bc61c 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / entities / RealmAdapter . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / entities / RealmAdapter . java 
 @ @ - 22 , 8 + 22 , 8 @ @ import android . view . ViewGroup ; 
 import android . widget . ListAdapter ; 
 import android . widget . TextView ; 
 
 - import io . realm . RealmBaseAdapter ; 
 import io . realm . OrderedRealmCollection ; 
 + import io . realm . RealmBaseAdapter ; 
 import io . realm . RealmResults ; 
 
 public class RealmAdapter extends RealmBaseAdapter < AllTypes > implements ListAdapter { 
 diff - - git a / realm / realm - library / src / main / java / io / realm / DynamicRealm . java b / realm / realm - library / src / main / java / io / realm / DynamicRealm . java 
 index 78a06f7 . . 85401c8 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / DynamicRealm . java 
 + + + b / realm / realm - library / src / main / java / io / realm / DynamicRealm . java 
 @ @ - 22 , 8 + 22 , 8 @ @ import io . realm . exceptions . RealmException ; 
 import io . realm . exceptions . RealmIOException ; 
 import io . realm . internal . Table ; 
 import io . realm . internal . TableView ; 
 - import rx . Observable ; 
 import io . realm . internal . log . RealmLog ; 
 + import rx . Observable ; 
 
 / * * 
 * DynamicRealm is a dynamic variant of { @ link io . realm . Realm } . This means that all access to data and / or queries are 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / LinkView . java b / realm / realm - library / src / main / java / io / realm / internal / LinkView . java 
 index 0981ff0 . . 3e6869f 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / LinkView . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / LinkView . java 
 @ @ - 16 , 8 + 16 , 6 @ @ 
 
 package io . realm . internal ; 
 
 - import java . lang . ref . ReferenceQueue ; 
 - 
 import io . realm . RealmFieldType ; 
 
 / * * 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / RealmCore . java b / realm / realm - library / src / main / java / io / realm / internal / RealmCore . java 
 index 670184b . . 8a5376b 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / RealmCore . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / RealmCore . java 
 @ @ - 18 , 12 + 18 , 12 @ @ package io . realm . internal ; 
 
 import android . content . Context ; 
 
 - import io . realm . internal . android . ReLinker ; 
 - 
 import java . io . File ; 
 import java . lang . reflect . Field ; 
 import java . util . Locale ; 
 
 + import io . realm . internal . android . ReLinker ; 
 + 
 / * * 
 * Utility methods for Realm Core . 
 * / 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / UncheckedRow . java b / realm / realm - library / src / main / java / io / realm / internal / UncheckedRow . java 
 index 00ed391 . . d12ef09 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / UncheckedRow . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / UncheckedRow . java 
 @ @ - 16 , 7 + 16 , 6 @ @ 
 
 package io . realm . internal ; 
 
 - import java . lang . ref . ReferenceQueue ; 
 import java . util . Date ; 
 
 import io . realm . RealmFieldType ; 
 diff - - git a / realm / realm - library / src / main / java / io / realm / internal / android / ISO8601Utils . java b / realm / realm - library / src / main / java / io / realm / internal / android / ISO8601Utils . java 
 index e10abbe . . bfdd9bb 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / internal / android / ISO8601Utils . java 
 + + + b / realm / realm - library / src / main / java / io / realm / internal / android / ISO8601Utils . java 
 @ @ - 19 , 7 + 19 , 10 @ @ package io . realm . internal . android ; 
 
 import java . text . ParseException ; 
 import java . text . ParsePosition ; 
 - import java . util . * ; 
 + import java . util . Calendar ; 
 + import java . util . Date ; 
 + import java . util . GregorianCalendar ; 
 + import java . util . TimeZone ; 
 
 / * * 
 * Utilities methods for manipulating dates in iso8601 format . This is much much faster and GC friendly than using SimpleDateFormat so

NEAREST DIFF:
diff - - git a / realm - jni / src / io _ realm _ internal _ table . cpp b / realm - jni / src / io _ realm _ internal _ table . cpp 
 index 6b25e5e . . 8a6a61b 100644 
 - - - a / realm - jni / src / io _ realm _ internal _ table . cpp 
 + + + b / realm - jni / src / io _ realm _ internal _ table . cpp 
 @ @ - 1485 , 7 + 1485 , 8 @ @ JNIEXPORT jlong JNICALL Java _ io _ realm _ internal _ Table _ nativeSetPrimaryKey ( 
 return 0 ; 
 } 
 
 - / / Fix bug https : / / github . com / realm / realm - java / issues / 1059 
 + / / Fix wrong primary key table created on Realm - Android 0 . 80 . 1 and below 
 + / / https : / / github . com / realm / realm - java / issues / 1059 
 JNIEXPORT void JNICALL Java _ io _ realm _ internal _ Table _ nativeMigratePrimaryKeyTableIfNeeded 
 ( JNIEnv * env , jobject , jlong groupNativePtr , jlong privateKeyTableNativePtr ) 
 { 
 @ @ - 1495 , 7 + 1496 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ Table _ nativeMigratePrimaryKeyTable 
 StringData tmp _ col _ name = StringData ( " tmp _ field _ name " ) ; 
 std : : size _ t tmp _ col _ ndx = pk _ table - > add _ column ( DataType ( type _ String ) , tmp _ col _ name ) ; 
 
 - / / Create tmp string column with proper data 
 + / / Create tmp string column with field name instead of column index 
 int rows = pk _ table - > size ( ) ; 
 for ( int row _ ndx = 0 ; row _ ndx < rows ; row _ ndx + + ) { 
 StringData table _ name = pk _ table - > get _ string ( io _ realm _ internal _ Table _ PRIMARY _ KEY _ CLASS _ COLUMN _ INDEX , row _ ndx ) ; 
 @ @ - 1505 , 6 + 1506 , 7 @ @ JNIEXPORT void JNICALL Java _ io _ realm _ internal _ Table _ nativeMigratePrimaryKeyTable 
 } 
 
 / / Delete old int column , and rename tmp column to same name 
 + / / Index should match as we control creation of table 
 pk _ table - > remove _ column ( io _ realm _ internal _ Table _ PRIMARY _ KEY _ FIELD _ COLUMN _ INDEX ) ; 
 pk _ table - > rename _ column ( pk _ table - > get _ column _ index ( tmp _ col _ name ) , StringData ( " pk _ property " ) ) ; 
 } 
 diff - - git a / realm / src / androidTest / assets / 080 _ annotationtypes . realm b / realm / src / androidTest / assets / 080 _ annotationtypes . realm 
 new file mode 100644 
 index 0000000 . . 1252c79 
 Binary files / dev / null and b / realm / src / androidTest / assets / 080 _ annotationtypes . realm differ 
 diff - - git a / realm / src / androidTest / java / io / realm / RealmTest . java b / realm / src / androidTest / java / io / realm / RealmTest . java 
 index a301ee1 . . 881612c 100644 
 - - - a / realm / src / androidTest / java / io / realm / RealmTest . java 
 + + + b / realm / src / androidTest / java / io / realm / RealmTest . java 
 @ @ - 34 , 7 + 34 , 6 @ @ import java . util . concurrent . Future ; 
 
 import io . realm . entities . AllTypes ; 
 import io . realm . entities . AllTypesPrimaryKey ; 
 - import io . realm . entities . AnnotationTypes ; 
 import io . realm . entities . Cat ; 
 import io . realm . entities . CyclicType ; 
 import io . realm . entities . CyclicTypePrimaryKey ; 
 diff - - git a / realm / src / androidTest / java / io / realm / internal / JNITransactions . java b / realm / src / androidTest / java / io / realm / internal / JNITransactions . java 
 index b6ab857 . . 72027ce 100644 
 - - - a / realm / src / androidTest / java / io / realm / internal / JNITransactions . java 
 + + + b / realm / src / androidTest / java / io / realm / internal / JNITransactions . java 
 @ @ - 8 , 6 + 8 , 7 @ @ import java . io . IOException ; 
 import java . util . Arrays ; 
 import java . util . Date ; 
 
 + import io . realm . Realm ; 
 import io . realm . TestHelper ; 
 import io . realm . exceptions . RealmException ; 
 
 @ @ - 379 , 13 + 380 , 11 @ @ public class JNITransactions extends AndroidTestCase { 
 } 
 
 public void testPrimaryKeyTableMigration ( ) throws IOException { 
 - TestHelper . copyRealmFromAssets ( getContext ( ) , " wrong _ primarykey _ table . realm " , " default . realm " ) ; 
 - String realmPath = new File ( getContext ( ) . getFilesDir ( ) , " default . realm " ) . getAbsolutePath ( ) ; 
 - SharedGroup db = new SharedGroup ( realmPath , SharedGroup . Durability . FULL , null ) ; 
 - ImplicitTransaction transaction = db . beginImplicitTransaction ( ) ; 
 - Table table = transaction . getTable ( " pk " ) ; 
 - assertEquals ( 2 , table . getColumnCount ( ) ) ; 
 - assertEquals ( ColumnType . STRING , table . getColumnType ( 0 ) ) ; 
 - assertEquals ( ColumnType . STRING , table . getColumnType ( 1 ) ) ; 
 + TestHelper . copyRealmFromAssets ( getContext ( ) , " 080 _ annotationtypes . realm " , " default . realm " ) ; 
 + SharedGroup db = new SharedGroup ( new File ( getContext ( ) . getFilesDir ( ) , Realm . DEFAULT _ REALM _ NAME ) . getAbsolutePath ( ) , SharedGroup . Durability . FULL , null ) ; 
 + ImplicitTransaction tr = db . beginImplicitTransaction ( ) ; 
 + Table t = tr . getTable ( " class _ AnnotationTypes " ) ; 
 + assertTrue ( t . hasPrimaryKey ( ) ) ; 
 + db . close ( ) ; 
 } 
 } 
 diff - - git a / realm / src / main / java / io / realm / Realm . java b / realm / src / main / java / io / realm / Realm . java 
 index 2eefcb8 . . 25adc38 100644 
 - - - a / realm / src / main / java / io / realm / Realm . java 
 + + + b / realm / src / main / java / io / realm / Realm . java 
 @ @ - 25 , 7 + 25 , 6 @ @ import android . os . Looper ; 
 import android . os . Message ; 
 import android . util . JsonReader ; 
 
 - import org . jetbrains . annotations . NotNull ; 
 import org . json . JSONArray ; 
 import org . json . JSONException ; 
 import org . json . JSONObject ;
