BLEU SCORE: 0.2136435031981171

TEST MSG: More documentation + examples .
GENERATED MSG: Cleanup examples .

TEST DIFF (one line): diff - - git a / examples / rxJavaExample / README . md b / examples / rxJavaExample / README . md <nl> index 1eba1a8 . . 3f33bfa 100644 <nl> - - - a / examples / rxJavaExample / README . md <nl> + + + b / examples / rxJavaExample / README . md <nl> @ @ - 1 , 9 + 1 , 17 @ @ <nl> # Examples combining RxJava and Realm <nl> <nl> + # Things to keep in mind <nl> <nl> + - Observables might have a default Scheduler they operate on that is <nl> + different than the one the RealmObject was created on . <nl> + <nl> + - RealmObjects auto - update . Observables that operate on multiple " versions " <nl> + will most likely not work as expected . <nl> <nl> + - Retrofit automatically offload to a worker thread . <nl> <nl> + - Use Realm async API instead of subscribeOn to offload Realm work . <nl> <nl> <nl> - # # Resources <nl> + # # Resources ( TODO ) <nl> - http : / / www . grahamlea . com / 2014 / 07 / rxjava - threading - examples / <nl> \ No newline at end of file <nl> diff - - git a / examples / rxJavaExample / src / main / AndroidManifest . xml b / examples / rxJavaExample / src / main / AndroidManifest . xml <nl> index 5f6b10c . . 5029512 100644 <nl> - - - a / examples / rxJavaExample / src / main / AndroidManifest . xml <nl> + + + b / examples / rxJavaExample / src / main / AndroidManifest . xml <nl> @ @ - 21 , 6 + 21 , 7 @ @ <nl> < activity android : name = " . animation . AnimationActivity " / > <nl> < activity android : name = " . retrofit . RetrofitExample " / > <nl> < activity android : name = " . throttle . ThrottleSearchActivity " / > <nl> + < activity android : name = " . gotchas . GotchasActivity " / > <nl> < / application > <nl> <nl> < / manifest > <nl> diff - - git a / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / MainActivity . java b / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / MainActivity . java <nl> index a4dbe89 . . 33c7cc4 100644 <nl> - - - a / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / MainActivity . java <nl> + + + b / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / MainActivity . java <nl> @ @ - 27 , 6 + 27 , 7 @ @ import java . util . Map ; <nl> import java . util . TreeMap ; <nl> <nl> import io . realm . examples . rxjava . animation . AnimationActivity ; <nl> + import io . realm . examples . rxjava . gotchas . GotchasActivity ; <nl> import io . realm . examples . rxjava . retrofit . RetrofitExample ; <nl> import io . realm . examples . rxjava . throttle . ThrottleSearchActivity ; <nl> <nl> @ @ - 37 , 6 + 38 , 7 @ @ public class MainActivity extends Activity { <nl> put ( " Animation " , AnimationActivity . class ) ; <nl> put ( " Throttle search " , ThrottleSearchActivity . class ) ; <nl> put ( " Network " , RetrofitExample . class ) ; <nl> + put ( " Working with Realm " , GotchasActivity . class ) ; <nl> } } ; <nl> <nl> @ Override <nl> diff - - git a / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / gotchas / GotchasActivity . java b / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / gotchas / GotchasActivity . java <nl> index 3b69a4f . . 81e46a6 100644 <nl> - - - a / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / gotchas / GotchasActivity . java <nl> + + + b / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / gotchas / GotchasActivity . java <nl> @ @ - 23 , 18 + 23 , 17 @ @ import android . os . Bundle ; <nl> import android . view . ViewGroup ; <nl> import android . widget . TextView ; <nl> <nl> - import java . util . concurrent . TimeUnit ; <nl> + import java . util . Random ; <nl> <nl> import io . realm . Realm ; <nl> + import io . realm . RealmChangeListener ; <nl> import io . realm . RealmResults ; <nl> import io . realm . examples . rxjava . R ; <nl> import io . realm . examples . rxjava . common . model . Person ; <nl> - import rx . Observable ; <nl> import rx . Subscription ; <nl> - import rx . android . schedulers . AndroidSchedulers ; <nl> import rx . functions . Action1 ; <nl> import rx . functions . Func1 ; <nl> - import rx . functions . Func2 ; <nl> + import rx . subscriptions . CompositeSubscription ; <nl> <nl> public class GotchasActivity extends Activity { <nl> <nl> @ @ - 55 , 13 + 54 , 62 @ @ public class GotchasActivity extends Activity { <nl> @ Override <nl> protected void onResume ( ) { <nl> super . onResume ( ) ; <nl> + final RealmResults < Person > results = realm . where ( Person . class ) . findAllSorted ( " name " ) ; <nl> + / / distinct ( ) and distinctUntilChanged ( ) uses standard equals , with older objects stored in a HashMap . <nl> + / / Realm objects auto - update which means the objects stored will also auto - update . <nl> + / / This makes comparing against older objects impossible ( even if the new object has changed ) because the <nl> + / / cached object will also have changed . <nl> + / / ` freeze ( ) ` will solve this , as we then also compare against a certain point in time . <nl> + / / Until then , use specific keySelector function instead . <nl> + Subscription distinctItemTest = results . get ( 0 ) . observable ( ) <nl> + . distinct ( ) <nl> + . subscribe ( new Action1 < Person > ( ) { <nl> + @ Override <nl> + public void call ( Person p ) { <nl> + showStatus ( " This is called once : " + p . getName ( ) ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + Subscription distinctKeySelectorItemTest = results . get ( 0 ) . observable ( ) <nl> + . distinct ( new Func1 < Person , String > ( ) { <nl> + @ Override <nl> + public String call ( Person p ) { <nl> + return p . getName ( ) ; <nl> + } <nl> + } ) <nl> + . subscribe ( new Action1 < Person > ( ) { <nl> + @ Override <nl> + public void call ( Person p ) { <nl> + showStatus ( " This is called twice : " + p . getName ( ) ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + <nl> + / / Trigger updates <nl> + / / FIXME : Changelisteners doesn ' t seem to trigger correctly . <nl> + / / Investigate https : / / github . com / realm / realm - java / issues / 1676 further <nl> + realm . executeTransaction ( new Realm . Transaction ( ) { <nl> + @ Override <nl> + public void execute ( Realm realm ) { <nl> + realm . beginTransaction ( ) ; <nl> + realm . allObjectsSorted ( Person . class , " name " , true ) . get ( 0 ) . setName ( " Foo " + new Random ( ) . nextInt ( 100 ) ) ; <nl> + realm . commitTransaction ( ) ; <nl> + } <nl> + } , null ) ; <nl> <nl> / / Objects are auto - updatable ( not immutable ) <nl> / / TODO Test : <nl> / / ReplaySubject <nl> / / buffer <nl> / / cache ( ) <nl> - / / distinctUntilChanged <nl> + <nl> + subscription = new CompositeSubscription ( distinctItemTest , distinctKeySelectorItemTest ) ; <nl> + } <nl> + <nl> + private void showStatus ( String message ) { <nl> + TextView v = new TextView ( this ) ; <nl> + v . setText ( message ) ; <nl> + container . addView ( v ) ; <nl> } <nl> <nl> @ Override <nl> diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> index 585046a . . 12a0c4a 100644 <nl> - - - a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> + + + b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java <nl> @ @ - 3 , 6 + 3 , 7 @ @ package io . realm ; <nl> import android . test . AndroidTestCase ; <nl> <nl> import java . util . concurrent . atomic . AtomicBoolean ; <nl> + import java . util . concurrent . atomic . AtomicInteger ; <nl> <nl> import io . realm . entities . AllTypes ; <nl> import rx . functions . Action1 ; <nl> @ @ - 66 , 4 + 67 , 45 @ @ public class RxJavaTests extends AndroidTestCase { <nl> assertTrue ( subscribedNotified . get ( ) ) ; <nl> } <nl> <nl> + public void testObjectEmittedOnUpdate ( ) { <nl> + final AtomicInteger subscriberCalled = new AtomicInteger ( 0 ) ; <nl> + <nl> + realm . beginTransaction ( ) ; <nl> + final AllTypes obj = realm . createObject ( AllTypes . class ) ; <nl> + realm . commitTransaction ( ) ; <nl> + <nl> + obj . observable ( ) . subscribe ( new Action1 < AllTypes > ( ) { <nl> + @ Override <nl> + public void call ( AllTypes rxObject ) { <nl> + subscriberCalled . addAndGet ( 1 ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + realm . beginTransaction ( ) ; <nl> + obj . setColumnLong ( 1 ) ; <nl> + realm . commitTransaction ( ) ; <nl> + <nl> + assertEquals ( 2 , subscriberCalled . get ( ) ) ; <nl> + } <nl> + <nl> + public void testResultsEmittedOnUpdate ( ) { <nl> + final AtomicInteger subscriberCalled = new AtomicInteger ( 0 ) ; <nl> + <nl> + realm . beginTransaction ( ) ; <nl> + RealmResults < AllTypes > results = realm . allObjects ( AllTypes . class ) ; <nl> + realm . commitTransaction ( ) ; <nl> + <nl> + results . observable ( ) . subscribe ( new Action1 < RealmResults < AllTypes > > ( ) { <nl> + @ Override <nl> + public void call ( RealmResults < AllTypes > allTypes ) { <nl> + subscriberCalled . addAndGet ( 1 ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + realm . beginTransaction ( ) ; <nl> + realm . createObject ( AllTypes . class ) ; <nl> + realm . commitTransaction ( ) ; <nl> + <nl> + assertEquals ( 2 , subscriberCalled . get ( ) ) ; <nl> + } <nl> }
NEAREST DIFF (one line): diff - - git a / examples / concurrencyExample / src / main / AndroidManifest . xml b / examples / concurrencyExample / src / main / AndroidManifest . xml <nl> index 2a1322c . . 95caacb 100644 <nl> - - - a / examples / concurrencyExample / src / main / AndroidManifest . xml <nl> + + + b / examples / concurrencyExample / src / main / AndroidManifest . xml <nl> @ @ - 9 , 7 + 9 , 7 @ @ <nl> android : theme = " @ style / AppTheme " > <nl> <nl> < activity <nl> - android : name = " . ConcurrencyExampleaActivity " <nl> + android : name = " . ConcurrencyExampleActivity " <nl> android : configChanges = " keyboardHidden | orientation | screenSize " <nl> android : label = " @ string / app _ name " > <nl> < intent - filter > <nl> diff - - git a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java <nl> new file mode 100644 <nl> index 0000000 . . d5f5cf5 <nl> - - - / dev / null <nl> + + + b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java <nl> @ @ - 0 , 0 + 1 , 163 @ @ <nl> + / * <nl> + * Copyright 2014 Realm Inc . <nl> + * <nl> + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> + * you may not use this file except in compliance with the License . <nl> + * You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + <nl> + package io . realm . examples . concurrency ; <nl> + <nl> + import android . app . Activity ; <nl> + import android . content . Intent ; <nl> + import android . os . Bundle ; <nl> + import android . util . Log ; <nl> + import android . view . View ; <nl> + import android . widget . RadioGroup ; <nl> + import android . widget . TextView ; <nl> + <nl> + import io . realm . Realm ; <nl> + import io . realm . RealmList ; <nl> + import io . realm . examples . concurrency . model . Cat ; <nl> + import io . realm . examples . concurrency . model . Dog ; <nl> + import io . realm . examples . concurrency . model . Person ; <nl> + import io . realm . examples . concurrency . services . SpawningService ; <nl> + import io . realm . examples . concurrency . services . TransactionService ; <nl> + <nl> + public class ConcurrencyExampleActivity extends Activity implements View . OnClickListener { <nl> + <nl> + @ SuppressWarnings ( " UnusedDeclaration " ) <nl> + public static final String TAG = ConcurrencyExampleActivity . class . getName ( ) ; <nl> + <nl> + private Realm realm ; <nl> + <nl> + @ Override <nl> + protected void onCreate ( Bundle savedInstanceState ) { <nl> + super . onCreate ( savedInstanceState ) ; <nl> + setContentView ( R . layout . activity _ realm _ example ) ; <nl> + <nl> + findViewById ( R . id . insert _ record _ button ) . setOnClickListener ( this ) ; <nl> + findViewById ( R . id . quit _ button ) . setOnClickListener ( new View . OnClickListener ( ) { <nl> + @ Override <nl> + public void onClick ( View view ) { <nl> + stopTests ( ) ; <nl> + } <nl> + } ) ; <nl> + <nl> + / / Reset the realm data before starting the tests <nl> + Realm . deleteRealmFile ( this ) ; <nl> + <nl> + / / Acquire a realm object <nl> + realm = Realm . getInstance ( this ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onResume ( ) { <nl> + super . onResume ( ) ; <nl> + startTests ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onStop ( ) { <nl> + super . onStop ( ) ; <nl> + stopTests ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + protected void onDestroy ( ) { <nl> + super . onDestroy ( ) ; <nl> + realm . close ( ) ; / / Remember to close Realm when done . <nl> + } <nl> + <nl> + private void startTests ( ) { <nl> + startSpawnTests ( ) ; <nl> + / / Alternatively can use transaction tests here . . . <nl> + / / startTransactionTests ( ) ; <nl> + } <nl> + <nl> + private void stopTests ( ) { <nl> + stopSpawnTests ( ) ; <nl> + / / Alternatively can use transaction tests here . . . <nl> + / / stopTransactionTests ( ) ; <nl> + } <nl> + <nl> + / / Using the screen form the user can inject into the Realm <nl> + / / even if other threads are creating transactions . <nl> + @ Override <nl> + public void onClick ( View v ) { <nl> + String personName = ( ( TextView ) findViewById ( R . id . name ) ) . getText ( ) . toString ( ) ; <nl> + String personAge = ( ( TextView ) findViewById ( R . id . age ) ) . getText ( ) . toString ( ) ; <nl> + String petName = ( ( TextView ) findViewById ( R . id . pets _ name ) ) . getText ( ) . toString ( ) ; <nl> + <nl> + Integer parseAge ; <nl> + try { <nl> + parseAge = Integer . parseInt ( personAge ) ; <nl> + } catch ( NumberFormatException ignored ) { <nl> + Log . d ( TAG , " Age for a person invalid " ) ; <nl> + return ; <nl> + } <nl> + <nl> + realm . beginTransaction ( ) ; <nl> + Person person = realm . createObject ( Person . class ) ; <nl> + person . setName ( personName ) ; <nl> + person . setAge ( parseAge ) ; <nl> + <nl> + int checkedId = ( ( RadioGroup ) findViewById ( R . id . petType ) ) . getCheckedRadioButtonId ( ) ; <nl> + if ( checkedId = = R . id . hasCat ) { <nl> + Cat cat = realm . createObject ( Cat . class ) ; <nl> + cat . setName ( petName ) ; <nl> + RealmList < Cat > cats = person . getCats ( ) ; <nl> + cats . add ( cat ) ; <nl> + } else if ( checkedId = = R . id . hasDog ) { <nl> + Dog dog = realm . createObject ( Dog . class ) ; <nl> + dog . setName ( petName ) ; <nl> + person . setDog ( dog ) ; <nl> + } <nl> + <nl> + realm . commitTransaction ( ) ; <nl> + <nl> + } <nl> + <nl> + / / The transaction tests are one IntentService running multiple Writes <nl> + / / to a Realm in either a multiple transaction or single transaction loop <nl> + private void startTransactionTests ( ) { <nl> + Intent serviceIntent = new Intent ( this , TransactionService . class ) ; <nl> + serviceIntent . putExtra ( TransactionService . REALM _ TESTTYPE _ EXTRA , <nl> + TransactionService . TestType . MANY _ TRANSACTIONS ) ; <nl> + serviceIntent . putExtra ( TransactionService . ITERATION _ COUNT , 10000000 ) ; <nl> + this . startService ( serviceIntent ) ; <nl> + } <nl> + <nl> + private void stopTransactionTests ( ) { <nl> + Intent serviceIntent = new Intent ( this , TransactionService . class ) ; <nl> + this . stopService ( serviceIntent ) ; <nl> + } <nl> + <nl> + / / The Spawned tests create multiple threads of type Reader or Writer <nl> + / / which loop for a specified count <nl> + private void startSpawnTests ( ) { <nl> + Intent serviceIntent = new Intent ( this , SpawningService . class ) ; <nl> + serviceIntent . putExtra ( SpawningService . REALM _ INSERT _ COUNT _ EXTRA , 10000000 ) ; <nl> + serviceIntent . putExtra ( SpawningService . REALM _ READ _ COUNT _ EXTRA , 10000000 ) ; <nl> + this . startService ( serviceIntent ) ; <nl> + } <nl> + <nl> + private void stopSpawnTests ( ) { <nl> + Intent serviceIntent = new Intent ( this , SpawningService . class ) ; <nl> + this . stopService ( serviceIntent ) ; <nl> + } <nl> + <nl> + @ SuppressWarnings ( " UnusedDeclaration " ) <nl> + private void restartTests ( ) { <nl> + stopTransactionTests ( ) ; <nl> + startTransactionTests ( ) ; <nl> + } <nl> + } <nl> diff - - git a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java <nl> deleted file mode 100644 <nl> index 2fdb867 . . 0000000 <nl> - - - a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java <nl> + + + / dev / null <nl> @ @ - 1 , 163 + 0 , 0 @ @ <nl> - / * <nl> - * Copyright 2014 Realm Inc . <nl> - * <nl> - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; <nl> - * you may not use this file except in compliance with the License . <nl> - * You may obtain a copy of the License at <nl> - * <nl> - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> - * <nl> - * Unless required by applicable law or agreed to in writing , software <nl> - * distributed under the License is distributed on an " AS IS " BASIS , <nl> - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> - * See the License for the specific language governing permissions and <nl> - * limitations under the License . <nl> - * / <nl> - <nl> - package io . realm . examples . concurrency ; <nl> - <nl> - import android . app . Activity ; <nl> - import android . content . Intent ; <nl> - import android . os . Bundle ; <nl> - import android . util . Log ; <nl> - import android . view . View ; <nl> - import android . widget . RadioGroup ; <nl> - import android . widget . TextView ; <nl> - <nl> - import io . realm . Realm ; <nl> - import io . realm . RealmList ; <nl> - import io . realm . examples . concurrency . model . Cat ; <nl> - import io . realm . examples . concurrency . model . Dog ; <nl> - import io . realm . examples . concurrency . model . Person ; <nl> - import io . realm . examples . concurrency . services . SpawningService ; <nl> - import io . realm . examples . concurrency . services . TransactionService ; <nl> - <nl> - public class ConcurrencyExampleaActivity extends Activity implements View . OnClickListener { <nl> - <nl> - @ SuppressWarnings ( " UnusedDeclaration " ) <nl> - public static final String TAG = ConcurrencyExampleaActivity . class . getName ( ) ; <nl> - <nl> - private Realm realm ; <nl> - <nl> - @ Override <nl> - protected void onCreate ( Bundle savedInstanceState ) { <nl> - super . onCreate ( savedInstanceState ) ; <nl> - setContentView ( R . layout . activity _ realm _ example ) ; <nl> - <nl> - findViewById ( R . id . insert _ record _ button ) . setOnClickListener ( this ) ; <nl> - findViewById ( R . id . quit _ button ) . setOnClickListener ( new View . OnClickListener ( ) { <nl> - @ Override <nl> - public void onClick ( View view ) { <nl> - stopTests ( ) ; <nl> - } <nl> - } ) ; <nl> - <nl> - / / Reset the realm data before starting the tests <nl> - Realm . deleteRealmFile ( this ) ; <nl> - <nl> - / / Acquire a realm object <nl> - realm = Realm . getInstance ( this ) ; <nl> - } <nl> - <nl> - @ Override <nl> - public void onResume ( ) { <nl> - super . onResume ( ) ; <nl> - startTests ( ) ; <nl> - } <nl> - <nl> - @ Override <nl> - public void onStop ( ) { <nl> - super . onStop ( ) ; <nl> - stopTests ( ) ; <nl> - } <nl> - <nl> - @ Override <nl> - protected void onDestroy ( ) { <nl> - super . onDestroy ( ) ; <nl> - realm . close ( ) ; / / Remember to close Realm when done . <nl> - } <nl> - <nl> - private void startTests ( ) { <nl> - startSpawnTests ( ) ; <nl> - / / Alternatively can use transaction tests here . . . <nl> - / / startTransactionTests ( ) ; <nl> - } <nl> - <nl> - private void stopTests ( ) { <nl> - stopSpawnTests ( ) ; <nl> - / / Alternatively can use transaction tests here . . . <nl> - / / stopTransactionTests ( ) ; <nl> - } <nl> - <nl> - / / Using the screen form the user can inject into the Realm <nl> - / / even if other threads are creating transactions . <nl> - @ Override <nl> - public void onClick ( View v ) { <nl> - String personName = ( ( TextView ) findViewById ( R . id . name ) ) . getText ( ) . toString ( ) ; <nl> - String personAge = ( ( TextView ) findViewById ( R . id . age ) ) . getText ( ) . toString ( ) ; <nl> - String petName = ( ( TextView ) findViewById ( R . id . pets _ name ) ) . getText ( ) . toString ( ) ; <nl> - <nl> - Integer parseAge ; <nl> - try { <nl> - parseAge = Integer . parseInt ( personAge ) ; <nl> - } catch ( NumberFormatException ignored ) { <nl> - Log . d ( TAG , " Age for a person invalid " ) ; <nl> - return ; <nl> - } <nl> - <nl> - realm . beginTransaction ( ) ; <nl> - Person person = realm . createObject ( Person . class ) ; <nl> - person . setName ( personName ) ; <nl> - person . setAge ( parseAge ) ; <nl> - <nl> - int checkedId = ( ( RadioGroup ) findViewById ( R . id . petType ) ) . getCheckedRadioButtonId ( ) ; <nl> - if ( checkedId = = R . id . hasCat ) { <nl> - Cat cat = realm . createObject ( Cat . class ) ; <nl> - cat . setName ( petName ) ; <nl> - RealmList < Cat > cats = person . getCats ( ) ; <nl> - cats . add ( cat ) ; <nl> - } else if ( checkedId = = R . id . hasDog ) { <nl> - Dog dog = realm . createObject ( Dog . class ) ; <nl> - dog . setName ( petName ) ; <nl> - person . setDog ( dog ) ; <nl> - } <nl> - <nl> - realm . commitTransaction ( ) ; <nl> - <nl> - } <nl> - <nl> - / / The transaction tests are one IntentService running multiple Writes <nl> - / / to a Realm in either a multiple transaction or single transaction loop <nl> - private void startTransactionTests ( ) { <nl> - Intent serviceIntent = new Intent ( this , TransactionService . class ) ; <nl> - serviceIntent . putExtra ( TransactionService . REALM _ TESTTYPE _ EXTRA , <nl> - TransactionService . TestType . MANY _ TRANSACTIONS ) ; <nl> - serviceIntent . putExtra ( TransactionService . ITERATION _ COUNT , 10000000 ) ; <nl> - this . startService ( serviceIntent ) ; <nl> - } <nl> - <nl> - private void stopTransactionTests ( ) { <nl> - Intent serviceIntent = new Intent ( this , TransactionService . class ) ; <nl> - this . stopService ( serviceIntent ) ; <nl> - } <nl> - <nl> - / / The Spawned tests create multiple threads of type Reader or Writer <nl> - / / which loop for a specified count <nl> - private void startSpawnTests ( ) { <nl> - Intent serviceIntent = new Intent ( this , SpawningService . class ) ; <nl> - serviceIntent . putExtra ( SpawningService . REALM _ INSERT _ COUNT _ EXTRA , 10000000 ) ; <nl> - serviceIntent . putExtra ( SpawningService . REALM _ READ _ COUNT _ EXTRA , 10000000 ) ; <nl> - this . startService ( serviceIntent ) ; <nl> - } <nl> - <nl> - private void stopSpawnTests ( ) { <nl> - Intent serviceIntent = new Intent ( this , SpawningService . class ) ; <nl> - this . stopService ( serviceIntent ) ; <nl> - } <nl> - <nl> - @ SuppressWarnings ( " UnusedDeclaration " ) <nl> - private void restartTests ( ) { <nl> - stopTransactionTests ( ) ; <nl> - startTransactionTests ( ) ; <nl> - } <nl> - } <nl> diff - - git a / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java b / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java <nl> index 2d9ba42 . . cea77fb 100644 <nl> - - - a / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java <nl> + + + b / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java <nl> @ @ - 31 , 7 + 31 , 6 @ @ import javax . crypto . spec . SecretKeySpec ; <nl> import javax . security . auth . x500 . X500Principal ; <nl> <nl> import io . realm . Realm ; <nl> - import io . realm . internal . IOException ; <nl> <nl> public class EncryptionExampleActivity extends Activity { <nl> <nl> @ @ - 47 , 15 + 46 , 10 @ @ public class EncryptionExampleActivity extends Activity { <nl> / / Throws UnsupportedOperator if not using a copy of Realm with encryption enabled <nl> try { <nl> realm = Realm . getInstance ( this , getKey ( ) ) ; <nl> - } catch ( io . realm . internal . IOException e ) { <nl> - e . printStackTrace ( ) ; <nl> - return ; <nl> - } catch ( java . io . IOException ie ) { <nl> - ie . printStackTrace ( ) ; <nl> - return ; <nl> } catch ( GeneralSecurityException e ) { <nl> e . printStackTrace ( ) ; <nl> - return ; <nl> + } catch ( IOException e ) { <nl> + e . printStackTrace ( ) ; <nl> } <nl> <nl> / / Everything continues to work as normal except for that the file is encrypted on disk <nl> diff - - git a / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java b / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java <nl> index 1550b7b . . 02c4947 100644 <nl> - - - a / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java <nl> + + + b / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java <nl> @ @ - 52 , 7 + 52 , 7 @ @ public class GridViewExampleActivity extends Activity implements AdapterView . OnI <nl> / / Clear the realm from last time <nl> Realm . deleteRealmFile ( this ) ; <nl> <nl> - / / Create a new instance empty instance of Realm <nl> + / / Create a new empty instance of Realm <nl> realm = Realm . getInstance ( this ) ; <nl> } <nl> <nl> diff - - git a / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java b / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java <nl> index d8166f3 . . e772d42 100644 <nl> - - - a / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java <nl> + + + b / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java <nl> @ @ - 63 , 23 + 63 , 25 @ @ public class MigrationExampleActivity extends Activity { <nl> Log . i ( TAG , " Excellent ! This is expected . " ) ; <nl> } <nl> <nl> + Realm realm ; <nl> + <nl> / / So you migrate your data <nl> Realm . migrateRealmAtPath ( path1 , new Migration ( ) ) ; <nl> - Realm realm1 = Realm . getInstance ( this , " default1 " ) ; <nl> - showStatus ( realm1 ) ; <nl> - realm1 . close ( ) ; <nl> + realm = Realm . getInstance ( this , " default1 " ) ; <nl> + showStatus ( realm ) ; <nl> + realm . close ( ) ; <nl> <nl> / / Another migration test <nl> Realm . migrateRealmAtPath ( path2 , new Migration ( ) ) ; <nl> - Realm realm2 = Realm . getInstance ( this , " default2 " ) ; <nl> - showStatus ( realm2 ) ; <nl> - realm2 . close ( ) ; <nl> + realm = Realm . getInstance ( this , " default2 " ) ; <nl> + showStatus ( realm ) ; <nl> + realm . close ( ) ; <nl> <nl> / / and a third : <nl> Realm . migrateRealmAtPath ( path3 , new Migration ( ) ) ; <nl> - Realm realm3 = Realm . getInstance ( this , " default0 " ) ; <nl> - showStatus ( realm3 ) ; <nl> - realm3 . close ( ) ; <nl> + realm = Realm . getInstance ( this , " default3 " ) ; <nl> + showStatus ( realm ) ; <nl> + realm . close ( ) ; <nl> } <nl> <nl> private String copyBundledRealmFile ( InputStream inputStream , String outFileName ) {

TEST DIFF:
diff - - git a / examples / rxJavaExample / README . md b / examples / rxJavaExample / README . md 
 index 1eba1a8 . . 3f33bfa 100644 
 - - - a / examples / rxJavaExample / README . md 
 + + + b / examples / rxJavaExample / README . md 
 @ @ - 1 , 9 + 1 , 17 @ @ 
 # Examples combining RxJava and Realm 
 
 + # Things to keep in mind 
 
 + - Observables might have a default Scheduler they operate on that is 
 + different than the one the RealmObject was created on . 
 + 
 + - RealmObjects auto - update . Observables that operate on multiple " versions " 
 + will most likely not work as expected . 
 
 + - Retrofit automatically offload to a worker thread . 
 
 + - Use Realm async API instead of subscribeOn to offload Realm work . 
 
 
 - # # Resources 
 + # # Resources ( TODO ) 
 - http : / / www . grahamlea . com / 2014 / 07 / rxjava - threading - examples / 
 \ No newline at end of file 
 diff - - git a / examples / rxJavaExample / src / main / AndroidManifest . xml b / examples / rxJavaExample / src / main / AndroidManifest . xml 
 index 5f6b10c . . 5029512 100644 
 - - - a / examples / rxJavaExample / src / main / AndroidManifest . xml 
 + + + b / examples / rxJavaExample / src / main / AndroidManifest . xml 
 @ @ - 21 , 6 + 21 , 7 @ @ 
 < activity android : name = " . animation . AnimationActivity " / > 
 < activity android : name = " . retrofit . RetrofitExample " / > 
 < activity android : name = " . throttle . ThrottleSearchActivity " / > 
 + < activity android : name = " . gotchas . GotchasActivity " / > 
 < / application > 
 
 < / manifest > 
 diff - - git a / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / MainActivity . java b / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / MainActivity . java 
 index a4dbe89 . . 33c7cc4 100644 
 - - - a / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / MainActivity . java 
 + + + b / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / MainActivity . java 
 @ @ - 27 , 6 + 27 , 7 @ @ import java . util . Map ; 
 import java . util . TreeMap ; 
 
 import io . realm . examples . rxjava . animation . AnimationActivity ; 
 + import io . realm . examples . rxjava . gotchas . GotchasActivity ; 
 import io . realm . examples . rxjava . retrofit . RetrofitExample ; 
 import io . realm . examples . rxjava . throttle . ThrottleSearchActivity ; 
 
 @ @ - 37 , 6 + 38 , 7 @ @ public class MainActivity extends Activity { 
 put ( " Animation " , AnimationActivity . class ) ; 
 put ( " Throttle search " , ThrottleSearchActivity . class ) ; 
 put ( " Network " , RetrofitExample . class ) ; 
 + put ( " Working with Realm " , GotchasActivity . class ) ; 
 } } ; 
 
 @ Override 
 diff - - git a / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / gotchas / GotchasActivity . java b / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / gotchas / GotchasActivity . java 
 index 3b69a4f . . 81e46a6 100644 
 - - - a / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / gotchas / GotchasActivity . java 
 + + + b / examples / rxJavaExample / src / main / java / io / realm / examples / rxjava / gotchas / GotchasActivity . java 
 @ @ - 23 , 18 + 23 , 17 @ @ import android . os . Bundle ; 
 import android . view . ViewGroup ; 
 import android . widget . TextView ; 
 
 - import java . util . concurrent . TimeUnit ; 
 + import java . util . Random ; 
 
 import io . realm . Realm ; 
 + import io . realm . RealmChangeListener ; 
 import io . realm . RealmResults ; 
 import io . realm . examples . rxjava . R ; 
 import io . realm . examples . rxjava . common . model . Person ; 
 - import rx . Observable ; 
 import rx . Subscription ; 
 - import rx . android . schedulers . AndroidSchedulers ; 
 import rx . functions . Action1 ; 
 import rx . functions . Func1 ; 
 - import rx . functions . Func2 ; 
 + import rx . subscriptions . CompositeSubscription ; 
 
 public class GotchasActivity extends Activity { 
 
 @ @ - 55 , 13 + 54 , 62 @ @ public class GotchasActivity extends Activity { 
 @ Override 
 protected void onResume ( ) { 
 super . onResume ( ) ; 
 + final RealmResults < Person > results = realm . where ( Person . class ) . findAllSorted ( " name " ) ; 
 + / / distinct ( ) and distinctUntilChanged ( ) uses standard equals , with older objects stored in a HashMap . 
 + / / Realm objects auto - update which means the objects stored will also auto - update . 
 + / / This makes comparing against older objects impossible ( even if the new object has changed ) because the 
 + / / cached object will also have changed . 
 + / / ` freeze ( ) ` will solve this , as we then also compare against a certain point in time . 
 + / / Until then , use specific keySelector function instead . 
 + Subscription distinctItemTest = results . get ( 0 ) . observable ( ) 
 + . distinct ( ) 
 + . subscribe ( new Action1 < Person > ( ) { 
 + @ Override 
 + public void call ( Person p ) { 
 + showStatus ( " This is called once : " + p . getName ( ) ) ; 
 + } 
 + } ) ; 
 + 
 + Subscription distinctKeySelectorItemTest = results . get ( 0 ) . observable ( ) 
 + . distinct ( new Func1 < Person , String > ( ) { 
 + @ Override 
 + public String call ( Person p ) { 
 + return p . getName ( ) ; 
 + } 
 + } ) 
 + . subscribe ( new Action1 < Person > ( ) { 
 + @ Override 
 + public void call ( Person p ) { 
 + showStatus ( " This is called twice : " + p . getName ( ) ) ; 
 + } 
 + } ) ; 
 + 
 + 
 + / / Trigger updates 
 + / / FIXME : Changelisteners doesn ' t seem to trigger correctly . 
 + / / Investigate https : / / github . com / realm / realm - java / issues / 1676 further 
 + realm . executeTransaction ( new Realm . Transaction ( ) { 
 + @ Override 
 + public void execute ( Realm realm ) { 
 + realm . beginTransaction ( ) ; 
 + realm . allObjectsSorted ( Person . class , " name " , true ) . get ( 0 ) . setName ( " Foo " + new Random ( ) . nextInt ( 100 ) ) ; 
 + realm . commitTransaction ( ) ; 
 + } 
 + } , null ) ; 
 
 / / Objects are auto - updatable ( not immutable ) 
 / / TODO Test : 
 / / ReplaySubject 
 / / buffer 
 / / cache ( ) 
 - / / distinctUntilChanged 
 + 
 + subscription = new CompositeSubscription ( distinctItemTest , distinctKeySelectorItemTest ) ; 
 + } 
 + 
 + private void showStatus ( String message ) { 
 + TextView v = new TextView ( this ) ; 
 + v . setText ( message ) ; 
 + container . addView ( v ) ; 
 } 
 
 @ Override 
 diff - - git a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 index 585046a . . 12a0c4a 100644 
 - - - a / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 + + + b / realm / realm - library / src / androidTest / java / io / realm / RxJavaTests . java 
 @ @ - 3 , 6 + 3 , 7 @ @ package io . realm ; 
 import android . test . AndroidTestCase ; 
 
 import java . util . concurrent . atomic . AtomicBoolean ; 
 + import java . util . concurrent . atomic . AtomicInteger ; 
 
 import io . realm . entities . AllTypes ; 
 import rx . functions . Action1 ; 
 @ @ - 66 , 4 + 67 , 45 @ @ public class RxJavaTests extends AndroidTestCase { 
 assertTrue ( subscribedNotified . get ( ) ) ; 
 } 
 
 + public void testObjectEmittedOnUpdate ( ) { 
 + final AtomicInteger subscriberCalled = new AtomicInteger ( 0 ) ; 
 + 
 + realm . beginTransaction ( ) ; 
 + final AllTypes obj = realm . createObject ( AllTypes . class ) ; 
 + realm . commitTransaction ( ) ; 
 + 
 + obj . observable ( ) . subscribe ( new Action1 < AllTypes > ( ) { 
 + @ Override 
 + public void call ( AllTypes rxObject ) { 
 + subscriberCalled . addAndGet ( 1 ) ; 
 + } 
 + } ) ; 
 + 
 + realm . beginTransaction ( ) ; 
 + obj . setColumnLong ( 1 ) ; 
 + realm . commitTransaction ( ) ; 
 + 
 + assertEquals ( 2 , subscriberCalled . get ( ) ) ; 
 + } 
 + 
 + public void testResultsEmittedOnUpdate ( ) { 
 + final AtomicInteger subscriberCalled = new AtomicInteger ( 0 ) ; 
 + 
 + realm . beginTransaction ( ) ; 
 + RealmResults < AllTypes > results = realm . allObjects ( AllTypes . class ) ; 
 + realm . commitTransaction ( ) ; 
 + 
 + results . observable ( ) . subscribe ( new Action1 < RealmResults < AllTypes > > ( ) { 
 + @ Override 
 + public void call ( RealmResults < AllTypes > allTypes ) { 
 + subscriberCalled . addAndGet ( 1 ) ; 
 + } 
 + } ) ; 
 + 
 + realm . beginTransaction ( ) ; 
 + realm . createObject ( AllTypes . class ) ; 
 + realm . commitTransaction ( ) ; 
 + 
 + assertEquals ( 2 , subscriberCalled . get ( ) ) ; 
 + } 
 }

NEAREST DIFF:
diff - - git a / examples / concurrencyExample / src / main / AndroidManifest . xml b / examples / concurrencyExample / src / main / AndroidManifest . xml 
 index 2a1322c . . 95caacb 100644 
 - - - a / examples / concurrencyExample / src / main / AndroidManifest . xml 
 + + + b / examples / concurrencyExample / src / main / AndroidManifest . xml 
 @ @ - 9 , 7 + 9 , 7 @ @ 
 android : theme = " @ style / AppTheme " > 
 
 < activity 
 - android : name = " . ConcurrencyExampleaActivity " 
 + android : name = " . ConcurrencyExampleActivity " 
 android : configChanges = " keyboardHidden | orientation | screenSize " 
 android : label = " @ string / app _ name " > 
 < intent - filter > 
 diff - - git a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java 
 new file mode 100644 
 index 0000000 . . d5f5cf5 
 - - - / dev / null 
 + + + b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleActivity . java 
 @ @ - 0 , 0 + 1 , 163 @ @ 
 + / * 
 + * Copyright 2014 Realm Inc . 
 + * 
 + * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 + * you may not use this file except in compliance with the License . 
 + * You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + 
 + package io . realm . examples . concurrency ; 
 + 
 + import android . app . Activity ; 
 + import android . content . Intent ; 
 + import android . os . Bundle ; 
 + import android . util . Log ; 
 + import android . view . View ; 
 + import android . widget . RadioGroup ; 
 + import android . widget . TextView ; 
 + 
 + import io . realm . Realm ; 
 + import io . realm . RealmList ; 
 + import io . realm . examples . concurrency . model . Cat ; 
 + import io . realm . examples . concurrency . model . Dog ; 
 + import io . realm . examples . concurrency . model . Person ; 
 + import io . realm . examples . concurrency . services . SpawningService ; 
 + import io . realm . examples . concurrency . services . TransactionService ; 
 + 
 + public class ConcurrencyExampleActivity extends Activity implements View . OnClickListener { 
 + 
 + @ SuppressWarnings ( " UnusedDeclaration " ) 
 + public static final String TAG = ConcurrencyExampleActivity . class . getName ( ) ; 
 + 
 + private Realm realm ; 
 + 
 + @ Override 
 + protected void onCreate ( Bundle savedInstanceState ) { 
 + super . onCreate ( savedInstanceState ) ; 
 + setContentView ( R . layout . activity _ realm _ example ) ; 
 + 
 + findViewById ( R . id . insert _ record _ button ) . setOnClickListener ( this ) ; 
 + findViewById ( R . id . quit _ button ) . setOnClickListener ( new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View view ) { 
 + stopTests ( ) ; 
 + } 
 + } ) ; 
 + 
 + / / Reset the realm data before starting the tests 
 + Realm . deleteRealmFile ( this ) ; 
 + 
 + / / Acquire a realm object 
 + realm = Realm . getInstance ( this ) ; 
 + } 
 + 
 + @ Override 
 + public void onResume ( ) { 
 + super . onResume ( ) ; 
 + startTests ( ) ; 
 + } 
 + 
 + @ Override 
 + public void onStop ( ) { 
 + super . onStop ( ) ; 
 + stopTests ( ) ; 
 + } 
 + 
 + @ Override 
 + protected void onDestroy ( ) { 
 + super . onDestroy ( ) ; 
 + realm . close ( ) ; / / Remember to close Realm when done . 
 + } 
 + 
 + private void startTests ( ) { 
 + startSpawnTests ( ) ; 
 + / / Alternatively can use transaction tests here . . . 
 + / / startTransactionTests ( ) ; 
 + } 
 + 
 + private void stopTests ( ) { 
 + stopSpawnTests ( ) ; 
 + / / Alternatively can use transaction tests here . . . 
 + / / stopTransactionTests ( ) ; 
 + } 
 + 
 + / / Using the screen form the user can inject into the Realm 
 + / / even if other threads are creating transactions . 
 + @ Override 
 + public void onClick ( View v ) { 
 + String personName = ( ( TextView ) findViewById ( R . id . name ) ) . getText ( ) . toString ( ) ; 
 + String personAge = ( ( TextView ) findViewById ( R . id . age ) ) . getText ( ) . toString ( ) ; 
 + String petName = ( ( TextView ) findViewById ( R . id . pets _ name ) ) . getText ( ) . toString ( ) ; 
 + 
 + Integer parseAge ; 
 + try { 
 + parseAge = Integer . parseInt ( personAge ) ; 
 + } catch ( NumberFormatException ignored ) { 
 + Log . d ( TAG , " Age for a person invalid " ) ; 
 + return ; 
 + } 
 + 
 + realm . beginTransaction ( ) ; 
 + Person person = realm . createObject ( Person . class ) ; 
 + person . setName ( personName ) ; 
 + person . setAge ( parseAge ) ; 
 + 
 + int checkedId = ( ( RadioGroup ) findViewById ( R . id . petType ) ) . getCheckedRadioButtonId ( ) ; 
 + if ( checkedId = = R . id . hasCat ) { 
 + Cat cat = realm . createObject ( Cat . class ) ; 
 + cat . setName ( petName ) ; 
 + RealmList < Cat > cats = person . getCats ( ) ; 
 + cats . add ( cat ) ; 
 + } else if ( checkedId = = R . id . hasDog ) { 
 + Dog dog = realm . createObject ( Dog . class ) ; 
 + dog . setName ( petName ) ; 
 + person . setDog ( dog ) ; 
 + } 
 + 
 + realm . commitTransaction ( ) ; 
 + 
 + } 
 + 
 + / / The transaction tests are one IntentService running multiple Writes 
 + / / to a Realm in either a multiple transaction or single transaction loop 
 + private void startTransactionTests ( ) { 
 + Intent serviceIntent = new Intent ( this , TransactionService . class ) ; 
 + serviceIntent . putExtra ( TransactionService . REALM _ TESTTYPE _ EXTRA , 
 + TransactionService . TestType . MANY _ TRANSACTIONS ) ; 
 + serviceIntent . putExtra ( TransactionService . ITERATION _ COUNT , 10000000 ) ; 
 + this . startService ( serviceIntent ) ; 
 + } 
 + 
 + private void stopTransactionTests ( ) { 
 + Intent serviceIntent = new Intent ( this , TransactionService . class ) ; 
 + this . stopService ( serviceIntent ) ; 
 + } 
 + 
 + / / The Spawned tests create multiple threads of type Reader or Writer 
 + / / which loop for a specified count 
 + private void startSpawnTests ( ) { 
 + Intent serviceIntent = new Intent ( this , SpawningService . class ) ; 
 + serviceIntent . putExtra ( SpawningService . REALM _ INSERT _ COUNT _ EXTRA , 10000000 ) ; 
 + serviceIntent . putExtra ( SpawningService . REALM _ READ _ COUNT _ EXTRA , 10000000 ) ; 
 + this . startService ( serviceIntent ) ; 
 + } 
 + 
 + private void stopSpawnTests ( ) { 
 + Intent serviceIntent = new Intent ( this , SpawningService . class ) ; 
 + this . stopService ( serviceIntent ) ; 
 + } 
 + 
 + @ SuppressWarnings ( " UnusedDeclaration " ) 
 + private void restartTests ( ) { 
 + stopTransactionTests ( ) ; 
 + startTransactionTests ( ) ; 
 + } 
 + } 
 diff - - git a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java b / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java 
 deleted file mode 100644 
 index 2fdb867 . . 0000000 
 - - - a / examples / concurrencyExample / src / main / java / io / realm / examples / concurrency / ConcurrencyExampleaActivity . java 
 + + + / dev / null 
 @ @ - 1 , 163 + 0 , 0 @ @ 
 - / * 
 - * Copyright 2014 Realm Inc . 
 - * 
 - * Licensed under the Apache License , Version 2 . 0 ( the " License " ) ; 
 - * you may not use this file except in compliance with the License . 
 - * You may obtain a copy of the License at 
 - * 
 - * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 - * 
 - * Unless required by applicable law or agreed to in writing , software 
 - * distributed under the License is distributed on an " AS IS " BASIS , 
 - * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 - * See the License for the specific language governing permissions and 
 - * limitations under the License . 
 - * / 
 - 
 - package io . realm . examples . concurrency ; 
 - 
 - import android . app . Activity ; 
 - import android . content . Intent ; 
 - import android . os . Bundle ; 
 - import android . util . Log ; 
 - import android . view . View ; 
 - import android . widget . RadioGroup ; 
 - import android . widget . TextView ; 
 - 
 - import io . realm . Realm ; 
 - import io . realm . RealmList ; 
 - import io . realm . examples . concurrency . model . Cat ; 
 - import io . realm . examples . concurrency . model . Dog ; 
 - import io . realm . examples . concurrency . model . Person ; 
 - import io . realm . examples . concurrency . services . SpawningService ; 
 - import io . realm . examples . concurrency . services . TransactionService ; 
 - 
 - public class ConcurrencyExampleaActivity extends Activity implements View . OnClickListener { 
 - 
 - @ SuppressWarnings ( " UnusedDeclaration " ) 
 - public static final String TAG = ConcurrencyExampleaActivity . class . getName ( ) ; 
 - 
 - private Realm realm ; 
 - 
 - @ Override 
 - protected void onCreate ( Bundle savedInstanceState ) { 
 - super . onCreate ( savedInstanceState ) ; 
 - setContentView ( R . layout . activity _ realm _ example ) ; 
 - 
 - findViewById ( R . id . insert _ record _ button ) . setOnClickListener ( this ) ; 
 - findViewById ( R . id . quit _ button ) . setOnClickListener ( new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View view ) { 
 - stopTests ( ) ; 
 - } 
 - } ) ; 
 - 
 - / / Reset the realm data before starting the tests 
 - Realm . deleteRealmFile ( this ) ; 
 - 
 - / / Acquire a realm object 
 - realm = Realm . getInstance ( this ) ; 
 - } 
 - 
 - @ Override 
 - public void onResume ( ) { 
 - super . onResume ( ) ; 
 - startTests ( ) ; 
 - } 
 - 
 - @ Override 
 - public void onStop ( ) { 
 - super . onStop ( ) ; 
 - stopTests ( ) ; 
 - } 
 - 
 - @ Override 
 - protected void onDestroy ( ) { 
 - super . onDestroy ( ) ; 
 - realm . close ( ) ; / / Remember to close Realm when done . 
 - } 
 - 
 - private void startTests ( ) { 
 - startSpawnTests ( ) ; 
 - / / Alternatively can use transaction tests here . . . 
 - / / startTransactionTests ( ) ; 
 - } 
 - 
 - private void stopTests ( ) { 
 - stopSpawnTests ( ) ; 
 - / / Alternatively can use transaction tests here . . . 
 - / / stopTransactionTests ( ) ; 
 - } 
 - 
 - / / Using the screen form the user can inject into the Realm 
 - / / even if other threads are creating transactions . 
 - @ Override 
 - public void onClick ( View v ) { 
 - String personName = ( ( TextView ) findViewById ( R . id . name ) ) . getText ( ) . toString ( ) ; 
 - String personAge = ( ( TextView ) findViewById ( R . id . age ) ) . getText ( ) . toString ( ) ; 
 - String petName = ( ( TextView ) findViewById ( R . id . pets _ name ) ) . getText ( ) . toString ( ) ; 
 - 
 - Integer parseAge ; 
 - try { 
 - parseAge = Integer . parseInt ( personAge ) ; 
 - } catch ( NumberFormatException ignored ) { 
 - Log . d ( TAG , " Age for a person invalid " ) ; 
 - return ; 
 - } 
 - 
 - realm . beginTransaction ( ) ; 
 - Person person = realm . createObject ( Person . class ) ; 
 - person . setName ( personName ) ; 
 - person . setAge ( parseAge ) ; 
 - 
 - int checkedId = ( ( RadioGroup ) findViewById ( R . id . petType ) ) . getCheckedRadioButtonId ( ) ; 
 - if ( checkedId = = R . id . hasCat ) { 
 - Cat cat = realm . createObject ( Cat . class ) ; 
 - cat . setName ( petName ) ; 
 - RealmList < Cat > cats = person . getCats ( ) ; 
 - cats . add ( cat ) ; 
 - } else if ( checkedId = = R . id . hasDog ) { 
 - Dog dog = realm . createObject ( Dog . class ) ; 
 - dog . setName ( petName ) ; 
 - person . setDog ( dog ) ; 
 - } 
 - 
 - realm . commitTransaction ( ) ; 
 - 
 - } 
 - 
 - / / The transaction tests are one IntentService running multiple Writes 
 - / / to a Realm in either a multiple transaction or single transaction loop 
 - private void startTransactionTests ( ) { 
 - Intent serviceIntent = new Intent ( this , TransactionService . class ) ; 
 - serviceIntent . putExtra ( TransactionService . REALM _ TESTTYPE _ EXTRA , 
 - TransactionService . TestType . MANY _ TRANSACTIONS ) ; 
 - serviceIntent . putExtra ( TransactionService . ITERATION _ COUNT , 10000000 ) ; 
 - this . startService ( serviceIntent ) ; 
 - } 
 - 
 - private void stopTransactionTests ( ) { 
 - Intent serviceIntent = new Intent ( this , TransactionService . class ) ; 
 - this . stopService ( serviceIntent ) ; 
 - } 
 - 
 - / / The Spawned tests create multiple threads of type Reader or Writer 
 - / / which loop for a specified count 
 - private void startSpawnTests ( ) { 
 - Intent serviceIntent = new Intent ( this , SpawningService . class ) ; 
 - serviceIntent . putExtra ( SpawningService . REALM _ INSERT _ COUNT _ EXTRA , 10000000 ) ; 
 - serviceIntent . putExtra ( SpawningService . REALM _ READ _ COUNT _ EXTRA , 10000000 ) ; 
 - this . startService ( serviceIntent ) ; 
 - } 
 - 
 - private void stopSpawnTests ( ) { 
 - Intent serviceIntent = new Intent ( this , SpawningService . class ) ; 
 - this . stopService ( serviceIntent ) ; 
 - } 
 - 
 - @ SuppressWarnings ( " UnusedDeclaration " ) 
 - private void restartTests ( ) { 
 - stopTransactionTests ( ) ; 
 - startTransactionTests ( ) ; 
 - } 
 - } 
 diff - - git a / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java b / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java 
 index 2d9ba42 . . cea77fb 100644 
 - - - a / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java 
 + + + b / examples / encryptionExample / src / main / java / io / realm / examples / encryptionexample / EncryptionExampleActivity . java 
 @ @ - 31 , 7 + 31 , 6 @ @ import javax . crypto . spec . SecretKeySpec ; 
 import javax . security . auth . x500 . X500Principal ; 
 
 import io . realm . Realm ; 
 - import io . realm . internal . IOException ; 
 
 public class EncryptionExampleActivity extends Activity { 
 
 @ @ - 47 , 15 + 46 , 10 @ @ public class EncryptionExampleActivity extends Activity { 
 / / Throws UnsupportedOperator if not using a copy of Realm with encryption enabled 
 try { 
 realm = Realm . getInstance ( this , getKey ( ) ) ; 
 - } catch ( io . realm . internal . IOException e ) { 
 - e . printStackTrace ( ) ; 
 - return ; 
 - } catch ( java . io . IOException ie ) { 
 - ie . printStackTrace ( ) ; 
 - return ; 
 } catch ( GeneralSecurityException e ) { 
 e . printStackTrace ( ) ; 
 - return ; 
 + } catch ( IOException e ) { 
 + e . printStackTrace ( ) ; 
 } 
 
 / / Everything continues to work as normal except for that the file is encrypted on disk 
 diff - - git a / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java b / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java 
 index 1550b7b . . 02c4947 100644 
 - - - a / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java 
 + + + b / examples / gridViewExample / src / main / java / io / realm / examples / realmgridview / GridViewExampleActivity . java 
 @ @ - 52 , 7 + 52 , 7 @ @ public class GridViewExampleActivity extends Activity implements AdapterView . OnI 
 / / Clear the realm from last time 
 Realm . deleteRealmFile ( this ) ; 
 
 - / / Create a new instance empty instance of Realm 
 + / / Create a new empty instance of Realm 
 realm = Realm . getInstance ( this ) ; 
 } 
 
 diff - - git a / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java b / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java 
 index d8166f3 . . e772d42 100644 
 - - - a / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java 
 + + + b / examples / migrationExample / src / main / java / io / realm / examples / realmmigrationexample / MigrationExampleActivity . java 
 @ @ - 63 , 23 + 63 , 25 @ @ public class MigrationExampleActivity extends Activity { 
 Log . i ( TAG , " Excellent ! This is expected . " ) ; 
 } 
 
 + Realm realm ; 
 + 
 / / So you migrate your data 
 Realm . migrateRealmAtPath ( path1 , new Migration ( ) ) ; 
 - Realm realm1 = Realm . getInstance ( this , " default1 " ) ; 
 - showStatus ( realm1 ) ; 
 - realm1 . close ( ) ; 
 + realm = Realm . getInstance ( this , " default1 " ) ; 
 + showStatus ( realm ) ; 
 + realm . close ( ) ; 
 
 / / Another migration test 
 Realm . migrateRealmAtPath ( path2 , new Migration ( ) ) ; 
 - Realm realm2 = Realm . getInstance ( this , " default2 " ) ; 
 - showStatus ( realm2 ) ; 
 - realm2 . close ( ) ; 
 + realm = Realm . getInstance ( this , " default2 " ) ; 
 + showStatus ( realm ) ; 
 + realm . close ( ) ; 
 
 / / and a third : 
 Realm . migrateRealmAtPath ( path3 , new Migration ( ) ) ; 
 - Realm realm3 = Realm . getInstance ( this , " default0 " ) ; 
 - showStatus ( realm3 ) ; 
 - realm3 . close ( ) ; 
 + realm = Realm . getInstance ( this , " default3 " ) ; 
 + showStatus ( realm ) ; 
 + realm . close ( ) ; 
 } 
 
 private String copyBundledRealmFile ( InputStream inputStream , String outFileName ) {
