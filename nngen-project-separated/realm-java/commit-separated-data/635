BLEU SCORE: 0.05341087579952926

TEST MSG: Kg / support mix lang
GENERATED MSG: fix Kotlin project detection

TEST DIFF (one line): diff - - git a / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy b / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy <nl> index 2c50852 . . 0ca9c0c 100644 <nl> - - - a / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy <nl> + + + b / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy <nl> @ @ - 40 , 11 + 40 , 12 @ @ class Realm implements Plugin < Project > { <nl> throw new GradleException ( ' Realm gradle plugin only supports android gradle plugin 1 . 5 . 0 or later . ' ) <nl> } <nl> <nl> - def isKotlinProject = project . plugins . find { <nl> - it . getClass ( ) . name = = ' org . jetbrains . kotlin . gradle . plugin . KotlinAndroidPluginWrapper ' <nl> - } <nl> + def usesKotlinPlugin = project . plugins . findPlugin ( ' kotlin - android ' ) ! = null <nl> + def usesAptPlugin = project . plugins . findPlugin ( ' com . neenbedankt . android - apt ' ) ! = null <nl> + <nl> + def isKaptProject = usesKotlinPlugin & & ! usesAptPlugin <nl> <nl> - if ( ! isKotlinProject ) { <nl> + if ( ! isKaptProject ) { <nl> project . plugins . apply ( AndroidAptPlugin ) <nl> } <nl> <nl> @ @ - 53 , 7 + 54 , 7 @ @ class Realm implements Plugin < Project > { <nl> project . repositories . add ( project . getRepositories ( ) . jcenter ( ) ) <nl> project . dependencies . add ( " compile " , " io . realm : realm - android - library : $ { Version . VERSION } " ) <nl> project . dependencies . add ( " compile " , " io . realm : realm - annotations : $ { Version . VERSION } " ) <nl> - if ( isKotlinProject ) { <nl> + if ( isKaptProject ) { <nl> project . dependencies . add ( " kapt " , " io . realm : realm - annotations : $ { Version . VERSION } " ) <nl> project . dependencies . add ( " kapt " , " io . realm : realm - annotations - processor : $ { Version . VERSION } " ) <nl> } else {
NEAREST DIFF (one line): diff - - git a / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy b / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy <nl> index 8002b0a . . 9c0c910 100644 <nl> - - - a / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy <nl> + + + b / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy <nl> @ @ - 23 , 7 + 23 , 7 @ @ import io . realm . transformer . RealmTransformer <nl> import org . gradle . api . GradleException <nl> import org . gradle . api . Plugin <nl> import org . gradle . api . Project <nl> - import org . jetbrains . kotlin . gradle . plugin . KotlinAndroidPlugin <nl> + import org . jetbrains . kotlin . gradle . plugin . KotlinAndroidPluginWrapper <nl> <nl> class Realm implements Plugin < Project > { <nl> <nl> @ @ - 36 , 9 + 36 , 11 @ @ class Realm implements Plugin < Project > { <nl> throw new GradleException ( " ' com . android . application ' or ' com . android . library ' plugin required . " ) <nl> } <nl> <nl> - def isKotlinProject = project . plugins . withType ( KotlinAndroidPlugin ) <nl> + def isKotlinProject = project . plugins . withType ( KotlinAndroidPluginWrapper ) <nl> <nl> - project . plugins . apply ( AndroidAptPlugin ) <nl> + if ( ! isKotlinProject ) { <nl> + project . plugins . apply ( AndroidAptPlugin ) <nl> + } <nl> <nl> project . android . registerTransform ( new RealmTransformer ( ) ) <nl> project . repositories . add ( project . getRepositories ( ) . jcenter ( ) ) <nl> @ @ - 46 , 8 + 48 , 8 @ @ class Realm implements Plugin < Project > { <nl> project . dependencies . add ( " compile " , " io . realm : realm - android - library : $ { Version . VERSION } " ) <nl> project . dependencies . add ( " compile " , " io . realm : realm - annotations : $ { Version . VERSION } " ) <nl> if ( isKotlinProject ) { <nl> - project . dependencies . add ( " kapt " , " io . realm : realm - annotations - processor : $ { Version . VERSION } " ) <nl> project . dependencies . add ( " kapt " , " io . realm : realm - annotations : $ { Version . VERSION } " ) <nl> + project . dependencies . add ( " kapt " , " io . realm : realm - annotations - processor : $ { Version . VERSION } " ) <nl> } else { <nl> project . dependencies . add ( " apt " , " io . realm : realm - annotations : $ { Version . VERSION } " ) <nl> project . dependencies . add ( " apt " , " io . realm : realm - annotations - processor : $ { Version . VERSION } " )

TEST DIFF:
diff - - git a / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy b / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy 
 index 2c50852 . . 0ca9c0c 100644 
 - - - a / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy 
 + + + b / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy 
 @ @ - 40 , 11 + 40 , 12 @ @ class Realm implements Plugin < Project > { 
 throw new GradleException ( ' Realm gradle plugin only supports android gradle plugin 1 . 5 . 0 or later . ' ) 
 } 
 
 - def isKotlinProject = project . plugins . find { 
 - it . getClass ( ) . name = = ' org . jetbrains . kotlin . gradle . plugin . KotlinAndroidPluginWrapper ' 
 - } 
 + def usesKotlinPlugin = project . plugins . findPlugin ( ' kotlin - android ' ) ! = null 
 + def usesAptPlugin = project . plugins . findPlugin ( ' com . neenbedankt . android - apt ' ) ! = null 
 + 
 + def isKaptProject = usesKotlinPlugin & & ! usesAptPlugin 
 
 - if ( ! isKotlinProject ) { 
 + if ( ! isKaptProject ) { 
 project . plugins . apply ( AndroidAptPlugin ) 
 } 
 
 @ @ - 53 , 7 + 54 , 7 @ @ class Realm implements Plugin < Project > { 
 project . repositories . add ( project . getRepositories ( ) . jcenter ( ) ) 
 project . dependencies . add ( " compile " , " io . realm : realm - android - library : $ { Version . VERSION } " ) 
 project . dependencies . add ( " compile " , " io . realm : realm - annotations : $ { Version . VERSION } " ) 
 - if ( isKotlinProject ) { 
 + if ( isKaptProject ) { 
 project . dependencies . add ( " kapt " , " io . realm : realm - annotations : $ { Version . VERSION } " ) 
 project . dependencies . add ( " kapt " , " io . realm : realm - annotations - processor : $ { Version . VERSION } " ) 
 } else {

NEAREST DIFF:
diff - - git a / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy b / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy 
 index 8002b0a . . 9c0c910 100644 
 - - - a / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy 
 + + + b / gradle - plugin / src / main / groovy / io / realm / gradle / Realm . groovy 
 @ @ - 23 , 7 + 23 , 7 @ @ import io . realm . transformer . RealmTransformer 
 import org . gradle . api . GradleException 
 import org . gradle . api . Plugin 
 import org . gradle . api . Project 
 - import org . jetbrains . kotlin . gradle . plugin . KotlinAndroidPlugin 
 + import org . jetbrains . kotlin . gradle . plugin . KotlinAndroidPluginWrapper 
 
 class Realm implements Plugin < Project > { 
 
 @ @ - 36 , 9 + 36 , 11 @ @ class Realm implements Plugin < Project > { 
 throw new GradleException ( " ' com . android . application ' or ' com . android . library ' plugin required . " ) 
 } 
 
 - def isKotlinProject = project . plugins . withType ( KotlinAndroidPlugin ) 
 + def isKotlinProject = project . plugins . withType ( KotlinAndroidPluginWrapper ) 
 
 - project . plugins . apply ( AndroidAptPlugin ) 
 + if ( ! isKotlinProject ) { 
 + project . plugins . apply ( AndroidAptPlugin ) 
 + } 
 
 project . android . registerTransform ( new RealmTransformer ( ) ) 
 project . repositories . add ( project . getRepositories ( ) . jcenter ( ) ) 
 @ @ - 46 , 8 + 48 , 8 @ @ class Realm implements Plugin < Project > { 
 project . dependencies . add ( " compile " , " io . realm : realm - android - library : $ { Version . VERSION } " ) 
 project . dependencies . add ( " compile " , " io . realm : realm - annotations : $ { Version . VERSION } " ) 
 if ( isKotlinProject ) { 
 - project . dependencies . add ( " kapt " , " io . realm : realm - annotations - processor : $ { Version . VERSION } " ) 
 project . dependencies . add ( " kapt " , " io . realm : realm - annotations : $ { Version . VERSION } " ) 
 + project . dependencies . add ( " kapt " , " io . realm : realm - annotations - processor : $ { Version . VERSION } " ) 
 } else { 
 project . dependencies . add ( " apt " , " io . realm : realm - annotations : $ { Version . VERSION } " ) 
 project . dependencies . add ( " apt " , " io . realm : realm - annotations - processor : $ { Version . VERSION } " )
