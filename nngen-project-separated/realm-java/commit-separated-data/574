BLEU SCORE: 0.07545383788761362

TEST MSG: Add support for ccache
GENERATED MSG: Add migration example template to distribution folder

TEST DIFF (one line): diff - - git a / Dockerfile b / Dockerfile <nl> index b607664 . . a632ba6 100644 <nl> - - - a / Dockerfile <nl> + + + b / Dockerfile <nl> @ @ - 13 , 18 + 13 , 29 @ @ ENV ANDROID _ HOME / opt / android - sdk - linux <nl> ENV ANDROID _ NDK _ HOME / opt / android - ndk <nl> ENV PATH $ { PATH } : $ { ANDROID _ HOME } / tools : $ { ANDROID _ HOME } / platform - tools <nl> ENV PATH $ { PATH } : $ { NDK _ HOME } <nl> + ENV NDK _ CCACHE / usr / bin / ccache <nl> <nl> - # Install the JDK <nl> - # We are going to need some 32 bit binaries because aapt requires it <nl> - # file is need by the script that creates NDK toolchains <nl> + # The 32 bit binaries because aapt requires it <nl> + # ` file ` is need by the script that creates NDK toolchains <nl> + # Keep the packages in alphabetical order to make it easy to avoid duplication <nl> RUN DEBIAN _ FRONTEND = noninteractive dpkg - - add - architecture i386 \ <nl> & & apt - get update - qq \ <nl> - & & apt - get install - y file git curl wget zip unzip \ <nl> - bsdmainutils \ <nl> - build - essential \ <nl> - openjdk - 8 - jdk - headless \ <nl> - libc6 : i386 libstdc + + 6 : i386 libgcc1 : i386 libncurses5 : i386 libz1 : i386 \ <nl> - s3cmd \ <nl> + & & apt - get install - y bsdmainutils \ <nl> + build - essential \ <nl> + ccache \ <nl> + curl \ <nl> + file \ <nl> + git \ <nl> + libc6 : i386 \ <nl> + libgcc1 : i386 \ <nl> + libncurses5 : i386 \ <nl> + libstdc + + 6 : i386 \ <nl> + libz1 : i386 \ <nl> + openjdk - 8 - jdk - headless \ <nl> + s3cmd \ <nl> + unzip \ <nl> + wget \ <nl> + zip \ <nl> & & apt - get clean <nl> <nl> # Install the Android SDK <nl> diff - - git a / Jenkinsfile b / Jenkinsfile <nl> index 7b511a2 . . 5ae8ce9 100644 <nl> - - - a / Jenkinsfile <nl> + + + b / Jenkinsfile <nl> @ @ - 22 , 7 + 22 , 7 @ @ try { <nl> <nl> stage ' Docker build ' <nl> def buildEnv = docker . build ' realm - java : snapshot ' <nl> - buildEnv . inside ( " - e HOME = / tmp - e _ JAVA _ OPTIONS = - Duser . home = / tmp - - privileged - v / dev / bus / usb : / dev / bus / usb - v $ { env . HOME } / gradle - cache : / tmp / . gradle - v $ { env . HOME } / . android : / tmp / . android " ) { <nl> + buildEnv . inside ( " - e HOME = / tmp - e _ JAVA _ OPTIONS = - Duser . home = / tmp - - privileged - v / dev / bus / usb : / dev / bus / usb - v $ { env . HOME } / gradle - cache : / tmp / . gradle - v $ { env . HOME } / . android : / tmp / . android - v $ { env . HOME } / ccache : / tmp / . ccache " ) { <nl> stage ' JVM tests ' <nl> try { <nl> withCredentials ( [ [ $ class : ' FileBinding ' , credentialsId : ' c0cc8f9e - c3f1 - 4e22 - b22f - 6568392e26ae ' , variable : ' S3CFG ' ] ] ) {
NEAREST DIFF (one line): diff - - git a / distribution / RealmMigrationExample / . gitignore b / distribution / RealmMigrationExample / . gitignore <nl> new file mode 100644 <nl> index 0000000 . . afbdab3 <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / . gitignore <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + . gradle <nl> + / local . properties <nl> + / . idea / workspace . xml <nl> + / . idea / libraries <nl> + . DS _ Store <nl> + / build <nl> diff - - git a / distribution / RealmMigrationExample / app / . gitignore b / distribution / RealmMigrationExample / app / . gitignore <nl> new file mode 100644 <nl> index 0000000 . . 796b96d <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / app / . gitignore <nl> @ @ - 0 , 0 + 1 @ @ <nl> + / build <nl> diff - - git a / distribution / RealmMigrationExample / app / build . gradle b / distribution / RealmMigrationExample / app / build . gradle <nl> new file mode 100644 <nl> index 0000000 . . 7e1688f <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / app / build . gradle <nl> @ @ - 0 , 0 + 1 , 26 @ @ <nl> + apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - apt ' <nl> + <nl> + android { <nl> + compileSdkVersion 20 <nl> + buildToolsVersion " 20 . 0 . 0 " <nl> + <nl> + defaultConfig { <nl> + applicationId " io . realm . examples . realmmigrationexample " <nl> + minSdkVersion 14 <nl> + targetSdkVersion 20 <nl> + versionCode 1 <nl> + versionName " 1 . 0 " <nl> + } <nl> + buildTypes { <nl> + release { <nl> + runProguard false <nl> + proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> + } <nl> + } <nl> + } <nl> + <nl> + dependencies { <nl> + apt fileTree ( dir : ' libs ' , include : [ ' * . jar ' ] ) <nl> + compile project ( ' : realm ' ) <nl> + } <nl> \ No newline at end of file <nl> diff - - git a / distribution / RealmMigrationExample / app / proguard - rules . pro b / distribution / RealmMigrationExample / app / proguard - rules . pro <nl> new file mode 100644 <nl> index 0000000 . . bb65c6f <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / app / proguard - rules . pro <nl> @ @ - 0 , 0 + 1 , 17 @ @ <nl> + # Add project specific ProGuard rules here . <nl> + # By default , the flags in this file are appended to flags specified <nl> + # in / Applications / Android Studio . app / sdk / tools / proguard / proguard - android . txt <nl> + # You can edit the include path and order by changing the proguardFiles <nl> + # directive in build . gradle . <nl> + # <nl> + # For more details , see <nl> + # http : / / developer . android . com / guide / developing / tools / proguard . html <nl> + <nl> + # Add any project specific keep options here : <nl> + <nl> + # If your project uses WebView with JS , uncomment the following <nl> + # and specify the fully qualified class name to the JavaScript interface <nl> + # class : <nl> + # - keepclassmembers class fqcn . of . javascript . interface . for . webview { <nl> + # public * ; <nl> + # } <nl> diff - - git a / distribution / RealmMigrationExample / build . gradle b / distribution / RealmMigrationExample / build . gradle <nl> new file mode 100644 <nl> index 0000000 . . 3842102 <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / build . gradle <nl> @ @ - 0 , 0 + 1 , 20 @ @ <nl> + / / Top - level build file where you can add configuration options common to all sub - projects / modules . <nl> + <nl> + buildscript { <nl> + repositories { <nl> + jcenter ( ) <nl> + } <nl> + dependencies { <nl> + classpath ' com . android . tools . build : gradle : 0 . 12 . 2 ' <nl> + classpath ' com . neenbedankt . gradle . plugins : android - apt : 1 . 3 ' <nl> + <nl> + / / NOTE : Do not place your application dependencies here ; they belong <nl> + / / in the individual module build . gradle files <nl> + } <nl> + } <nl> + <nl> + allprojects { <nl> + repositories { <nl> + jcenter ( ) <nl> + } <nl> + } <nl> diff - - git a / distribution / RealmMigrationExample / gradle . properties b / distribution / RealmMigrationExample / gradle . properties <nl> new file mode 100644 <nl> index 0000000 . . 5d08ba7 <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / gradle . properties <nl> @ @ - 0 , 0 + 1 , 18 @ @ <nl> + # Project - wide Gradle settings . <nl> + <nl> + # IDE ( e . g . Android Studio ) users : <nl> + # Settings specified in this file will override any Gradle settings <nl> + # configured through the IDE . <nl> + <nl> + # For more details on how to configure your build environment visit <nl> + # http : / / www . gradle . org / docs / current / userguide / build _ environment . html <nl> + <nl> + # Specifies the JVM arguments used for the daemon process . <nl> + # The setting is particularly useful for tweaking memory settings . <nl> + # Default value : - Xmx10248m - XX : MaxPermSize = 256m <nl> + # org . gradle . jvmargs = - Xmx2048m - XX : MaxPermSize = 512m - XX : + HeapDumpOnOutOfMemoryError - Dfile . encoding = UTF - 8 <nl> + <nl> + # When configured , Gradle will run in incubating parallel mode . <nl> + # This option should only be used with decoupled projects . More details , visit <nl> + # http : / / www . gradle . org / docs / current / userguide / multi _ project _ builds . html # sec : decoupled _ projects <nl> + # org . gradle . parallel = true <nl> \ No newline at end of file <nl> diff - - git a / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . jar b / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . jar <nl> new file mode 100644 <nl> index 0000000 . . 8c0fb64 <nl> Binary files / dev / null and b / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . jar differ <nl> diff - - git a / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . properties b / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . properties <nl> new file mode 100644 <nl> index 0000000 . . 1e61d1f <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . properties <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + # Wed Apr 10 15 : 27 : 10 PDT 2013 <nl> + distributionBase = GRADLE _ USER _ HOME <nl> + distributionPath = wrapper / dists <nl> + zipStoreBase = GRADLE _ USER _ HOME <nl> + zipStorePath = wrapper / dists <nl> + distributionUrl = http \ : / / services . gradle . org / distributions / gradle - 1 . 12 - all . zip <nl> diff - - git a / distribution / RealmMigrationExample / gradlew b / distribution / RealmMigrationExample / gradlew <nl> new file mode 100755 <nl> index 0000000 . . 91a7e26 <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / gradlew <nl> @ @ - 0 , 0 + 1 , 164 @ @ <nl> + # ! / usr / bin / env bash <nl> + <nl> + # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # <nl> + # # <nl> + # # Gradle start up script for UN * X <nl> + # # <nl> + # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # <nl> + <nl> + # Add default JVM options here . You can also use JAVA _ OPTS and GRADLE _ OPTS to pass JVM options to this script . <nl> + DEFAULT _ JVM _ OPTS = " " <nl> + <nl> + APP _ NAME = " Gradle " <nl> + APP _ BASE _ NAME = ` basename " $ 0 " ` <nl> + <nl> + # Use the maximum available , or set MAX _ FD ! = - 1 to use that value . <nl> + MAX _ FD = " maximum " <nl> + <nl> + warn ( ) { <nl> + echo " $ * " <nl> + } <nl> + <nl> + die ( ) { <nl> + echo <nl> + echo " $ * " <nl> + echo <nl> + exit 1 <nl> + } <nl> + <nl> + # OS specific support ( must be ' true ' or ' false ' ) . <nl> + cygwin = false <nl> + msys = false <nl> + darwin = false <nl> + case " ` uname ` " in <nl> + CYGWIN * ) <nl> + cygwin = true <nl> + ; ; <nl> + Darwin * ) <nl> + darwin = true <nl> + ; ; <nl> + MINGW * ) <nl> + msys = true <nl> + ; ; <nl> + esac <nl> + <nl> + # For Cygwin , ensure paths are in UNIX format before anything is touched . <nl> + if $ cygwin ; then <nl> + [ - n " $ JAVA _ HOME " ] & & JAVA _ HOME = ` cygpath - - unix " $ JAVA _ HOME " ` <nl> + fi <nl> + <nl> + # Attempt to set APP _ HOME <nl> + # Resolve links : $ 0 may be a link <nl> + PRG = " $ 0 " <nl> + # Need this for relative symlinks . <nl> + while [ - h " $ PRG " ] ; do <nl> + ls = ` ls - ld " $ PRG " ` <nl> + link = ` expr " $ ls " : ' . * - > \ ( . * \ ) $ ' ` <nl> + if expr " $ link " : ' / . * ' > / dev / null ; then <nl> + PRG = " $ link " <nl> + else <nl> + PRG = ` dirname " $ PRG " ` " / $ link " <nl> + fi <nl> + done <nl> + SAVED = " ` pwd ` " <nl> + cd " ` dirname \ " $ PRG \ " ` / " > & - <nl> + APP _ HOME = " ` pwd - P ` " <nl> + cd " $ SAVED " > & - <nl> + <nl> + CLASSPATH = $ APP _ HOME / gradle / wrapper / gradle - wrapper . jar <nl> + <nl> + # Determine the Java command to use to start the JVM . <nl> + if [ - n " $ JAVA _ HOME " ] ; then <nl> + if [ - x " $ JAVA _ HOME / jre / sh / java " ] ; then <nl> + # IBM ' s JDK on AIX uses strange locations for the executables <nl> + JAVACMD = " $ JAVA _ HOME / jre / sh / java " <nl> + else <nl> + JAVACMD = " $ JAVA _ HOME / bin / java " <nl> + fi <nl> + if [ ! - x " $ JAVACMD " ] ; then <nl> + die " ERROR : JAVA _ HOME is set to an invalid directory : $ JAVA _ HOME <nl> + <nl> + Please set the JAVA _ HOME variable in your environment to match the <nl> + location of your Java installation . " <nl> + fi <nl> + else <nl> + JAVACMD = " java " <nl> + which java > / dev / null 2 > & 1 | | die " ERROR : JAVA _ HOME is not set and no ' java ' command could be found in your PATH . <nl> + <nl> + Please set the JAVA _ HOME variable in your environment to match the <nl> + location of your Java installation . " <nl> + fi <nl> + <nl> + # Increase the maximum file descriptors if we can . <nl> + if [ " $ cygwin " = " false " - a " $ darwin " = " false " ] ; then <nl> + MAX _ FD _ LIMIT = ` ulimit - H - n ` <nl> + if [ $ ? - eq 0 ] ; then <nl> + if [ " $ MAX _ FD " = " maximum " - o " $ MAX _ FD " = " max " ] ; then <nl> + MAX _ FD = " $ MAX _ FD _ LIMIT " <nl> + fi <nl> + ulimit - n $ MAX _ FD <nl> + if [ $ ? - ne 0 ] ; then <nl> + warn " Could not set maximum file descriptor limit : $ MAX _ FD " <nl> + fi <nl> + else <nl> + warn " Could not query maximum file descriptor limit : $ MAX _ FD _ LIMIT " <nl> + fi <nl> + fi <nl> + <nl> + # For Darwin , add options to specify how the application appears in the dock <nl> + if $ darwin ; then <nl> + GRADLE _ OPTS = " $ GRADLE _ OPTS \ " - Xdock : name = $ APP _ NAME \ " \ " - Xdock : icon = $ APP _ HOME / media / gradle . icns \ " " <nl> + fi <nl> + <nl> + # For Cygwin , switch paths to Windows format before running java <nl> + if $ cygwin ; then <nl> + APP _ HOME = ` cygpath - - path - - mixed " $ APP _ HOME " ` <nl> + CLASSPATH = ` cygpath - - path - - mixed " $ CLASSPATH " ` <nl> + <nl> + # We build the pattern for arguments to be converted via cygpath <nl> + ROOTDIRSRAW = ` find - L / - maxdepth 1 - mindepth 1 - type d 2 > / dev / null ` <nl> + SEP = " " <nl> + for dir in $ ROOTDIRSRAW ; do <nl> + ROOTDIRS = " $ ROOTDIRS $ SEP $ dir " <nl> + SEP = " | " <nl> + done <nl> + OURCYGPATTERN = " ( ^ ( $ ROOTDIRS ) ) " <nl> + # Add a user - defined pattern to the cygpath arguments <nl> + if [ " $ GRADLE _ CYGPATTERN " ! = " " ] ; then <nl> + OURCYGPATTERN = " $ OURCYGPATTERN | ( $ GRADLE _ CYGPATTERN ) " <nl> + fi <nl> + # Now convert the arguments - kludge to limit ourselves to / bin / sh <nl> + i = 0 <nl> + for arg in " $ @ " ; do <nl> + CHECK = ` echo " $ arg " | egrep - c " $ OURCYGPATTERN " - ` <nl> + CHECK2 = ` echo " $ arg " | egrep - c " ^ - " ` # # # Determine if an option <nl> + <nl> + if [ $ CHECK - ne 0 ] & & [ $ CHECK2 - eq 0 ] ; then # # # Added a condition <nl> + eval ` echo args $ i ` = ` cygpath - - path - - ignore - - mixed " $ arg " ` <nl> + else <nl> + eval ` echo args $ i ` = " \ " $ arg \ " " <nl> + fi <nl> + i = $ ( ( i + 1 ) ) <nl> + done <nl> + case $ i in <nl> + ( 0 ) set - - ; ; <nl> + ( 1 ) set - - " $ args0 " ; ; <nl> + ( 2 ) set - - " $ args0 " " $ args1 " ; ; <nl> + ( 3 ) set - - " $ args0 " " $ args1 " " $ args2 " ; ; <nl> + ( 4 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " ; ; <nl> + ( 5 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " ; ; <nl> + ( 6 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " " $ args5 " ; ; <nl> + ( 7 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " " $ args5 " " $ args6 " ; ; <nl> + ( 8 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " " $ args5 " " $ args6 " " $ args7 " ; ; <nl> + ( 9 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " " $ args5 " " $ args6 " " $ args7 " " $ args8 " ; ; <nl> + esac <nl> + fi <nl> + <nl> + # Split up the JVM _ OPTS And GRADLE _ OPTS values into an array , following the shell quoting and substitution rules <nl> + function splitJvmOpts ( ) { <nl> + JVM _ OPTS = ( " $ @ " ) <nl> + } <nl> + eval splitJvmOpts $ DEFAULT _ JVM _ OPTS $ JAVA _ OPTS $ GRADLE _ OPTS <nl> + JVM _ OPTS [ $ { # JVM _ OPTS [ * ] } ] = " - Dorg . gradle . appname = $ APP _ BASE _ NAME " <nl> + <nl> + exec " $ JAVACMD " " $ { JVM _ OPTS [ @ ] } " - classpath " $ CLASSPATH " org . gradle . wrapper . GradleWrapperMain " $ @ " <nl> diff - - git a / distribution / RealmMigrationExample / gradlew . bat b / distribution / RealmMigrationExample / gradlew . bat <nl> new file mode 100644 <nl> index 0000000 . . aec9973 <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / gradlew . bat <nl> @ @ - 0 , 0 + 1 , 90 @ @ <nl> + @ if " % DEBUG % " = = " " @ echo off <nl> + @ rem # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # <nl> + @ rem <nl> + @ rem Gradle startup script for Windows <nl> + @ rem <nl> + @ rem # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # <nl> + <nl> + @ rem Set local scope for the variables with windows NT shell <nl> + if " % OS % " = = " Windows _ NT " setlocal <nl> + <nl> + @ rem Add default JVM options here . You can also use JAVA _ OPTS and GRADLE _ OPTS to pass JVM options to this script . <nl> + set DEFAULT _ JVM _ OPTS = <nl> + <nl> + set DIRNAME = % ~ dp0 <nl> + if " % DIRNAME % " = = " " set DIRNAME = . <nl> + set APP _ BASE _ NAME = % ~ n0 <nl> + set APP _ HOME = % DIRNAME % <nl> + <nl> + @ rem Find java . exe <nl> + if defined JAVA _ HOME goto findJavaFromJavaHome <nl> + <nl> + set JAVA _ EXE = java . exe <nl> + % JAVA _ EXE % - version > NUL 2 > & 1 <nl> + if " % ERRORLEVEL % " = = " 0 " goto init <nl> + <nl> + echo . <nl> + echo ERROR : JAVA _ HOME is not set and no ' java ' command could be found in your PATH . <nl> + echo . <nl> + echo Please set the JAVA _ HOME variable in your environment to match the <nl> + echo location of your Java installation . <nl> + <nl> + goto fail <nl> + <nl> + : findJavaFromJavaHome <nl> + set JAVA _ HOME = % JAVA _ HOME : " = % <nl> + set JAVA _ EXE = % JAVA _ HOME % / bin / java . exe <nl> + <nl> + if exist " % JAVA _ EXE % " goto init <nl> + <nl> + echo . <nl> + echo ERROR : JAVA _ HOME is set to an invalid directory : % JAVA _ HOME % <nl> + echo . <nl> + echo Please set the JAVA _ HOME variable in your environment to match the <nl> + echo location of your Java installation . <nl> + <nl> + goto fail <nl> + <nl> + : init <nl> + @ rem Get command - line arguments , handling Windowz variants <nl> + <nl> + if not " % OS % " = = " Windows _ NT " goto win9xME _ args <nl> + if " % @ eval [ 2 + 2 ] " = = " 4 " goto 4NT _ args <nl> + <nl> + : win9xME _ args <nl> + @ rem Slurp the command line arguments . <nl> + set CMD _ LINE _ ARGS = <nl> + set _ SKIP = 2 <nl> + <nl> + : win9xME _ args _ slurp <nl> + if " x % ~ 1 " = = " x " goto execute <nl> + <nl> + set CMD _ LINE _ ARGS = % * <nl> + goto execute <nl> + <nl> + : 4NT _ args <nl> + @ rem Get arguments from the 4NT Shell from JP Software <nl> + set CMD _ LINE _ ARGS = % $ <nl> + <nl> + : execute <nl> + @ rem Setup the command line <nl> + <nl> + set CLASSPATH = % APP _ HOME % \ gradle \ wrapper \ gradle - wrapper . jar <nl> + <nl> + @ rem Execute Gradle <nl> + " % JAVA _ EXE % " % DEFAULT _ JVM _ OPTS % % JAVA _ OPTS % % GRADLE _ OPTS % " - Dorg . gradle . appname = % APP _ BASE _ NAME % " - classpath " % CLASSPATH % " org . gradle . wrapper . GradleWrapperMain % CMD _ LINE _ ARGS % <nl> + <nl> + : end <nl> + @ rem End local scope for the variables with windows NT shell <nl> + if " % ERRORLEVEL % " = = " 0 " goto mainEnd <nl> + <nl> + : fail <nl> + rem Set variable GRADLE _ EXIT _ CONSOLE if you need the _ script _ return code instead of <nl> + rem the _ cmd . exe / c _ return code ! <nl> + if not " " = = " % GRADLE _ EXIT _ CONSOLE % " exit 1 <nl> + exit / b 1 <nl> + <nl> + : mainEnd <nl> + if " % OS % " = = " Windows _ NT " endlocal <nl> + <nl> + : omega <nl> diff - - git a / distribution / RealmMigrationExample / settings . gradle b / distribution / RealmMigrationExample / settings . gradle <nl> new file mode 100644 <nl> index 0000000 . . 2077877 <nl> - - - / dev / null <nl> + + + b / distribution / RealmMigrationExample / settings . gradle <nl> @ @ - 0 , 0 + 1 , 2 @ @ <nl> + include ' : app ' <nl> + include ' : realm '

TEST DIFF:
diff - - git a / Dockerfile b / Dockerfile 
 index b607664 . . a632ba6 100644 
 - - - a / Dockerfile 
 + + + b / Dockerfile 
 @ @ - 13 , 18 + 13 , 29 @ @ ENV ANDROID _ HOME / opt / android - sdk - linux 
 ENV ANDROID _ NDK _ HOME / opt / android - ndk 
 ENV PATH $ { PATH } : $ { ANDROID _ HOME } / tools : $ { ANDROID _ HOME } / platform - tools 
 ENV PATH $ { PATH } : $ { NDK _ HOME } 
 + ENV NDK _ CCACHE / usr / bin / ccache 
 
 - # Install the JDK 
 - # We are going to need some 32 bit binaries because aapt requires it 
 - # file is need by the script that creates NDK toolchains 
 + # The 32 bit binaries because aapt requires it 
 + # ` file ` is need by the script that creates NDK toolchains 
 + # Keep the packages in alphabetical order to make it easy to avoid duplication 
 RUN DEBIAN _ FRONTEND = noninteractive dpkg - - add - architecture i386 \ 
 & & apt - get update - qq \ 
 - & & apt - get install - y file git curl wget zip unzip \ 
 - bsdmainutils \ 
 - build - essential \ 
 - openjdk - 8 - jdk - headless \ 
 - libc6 : i386 libstdc + + 6 : i386 libgcc1 : i386 libncurses5 : i386 libz1 : i386 \ 
 - s3cmd \ 
 + & & apt - get install - y bsdmainutils \ 
 + build - essential \ 
 + ccache \ 
 + curl \ 
 + file \ 
 + git \ 
 + libc6 : i386 \ 
 + libgcc1 : i386 \ 
 + libncurses5 : i386 \ 
 + libstdc + + 6 : i386 \ 
 + libz1 : i386 \ 
 + openjdk - 8 - jdk - headless \ 
 + s3cmd \ 
 + unzip \ 
 + wget \ 
 + zip \ 
 & & apt - get clean 
 
 # Install the Android SDK 
 diff - - git a / Jenkinsfile b / Jenkinsfile 
 index 7b511a2 . . 5ae8ce9 100644 
 - - - a / Jenkinsfile 
 + + + b / Jenkinsfile 
 @ @ - 22 , 7 + 22 , 7 @ @ try { 
 
 stage ' Docker build ' 
 def buildEnv = docker . build ' realm - java : snapshot ' 
 - buildEnv . inside ( " - e HOME = / tmp - e _ JAVA _ OPTIONS = - Duser . home = / tmp - - privileged - v / dev / bus / usb : / dev / bus / usb - v $ { env . HOME } / gradle - cache : / tmp / . gradle - v $ { env . HOME } / . android : / tmp / . android " ) { 
 + buildEnv . inside ( " - e HOME = / tmp - e _ JAVA _ OPTIONS = - Duser . home = / tmp - - privileged - v / dev / bus / usb : / dev / bus / usb - v $ { env . HOME } / gradle - cache : / tmp / . gradle - v $ { env . HOME } / . android : / tmp / . android - v $ { env . HOME } / ccache : / tmp / . ccache " ) { 
 stage ' JVM tests ' 
 try { 
 withCredentials ( [ [ $ class : ' FileBinding ' , credentialsId : ' c0cc8f9e - c3f1 - 4e22 - b22f - 6568392e26ae ' , variable : ' S3CFG ' ] ] ) {

NEAREST DIFF:
diff - - git a / distribution / RealmMigrationExample / . gitignore b / distribution / RealmMigrationExample / . gitignore 
 new file mode 100644 
 index 0000000 . . afbdab3 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / . gitignore 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + . gradle 
 + / local . properties 
 + / . idea / workspace . xml 
 + / . idea / libraries 
 + . DS _ Store 
 + / build 
 diff - - git a / distribution / RealmMigrationExample / app / . gitignore b / distribution / RealmMigrationExample / app / . gitignore 
 new file mode 100644 
 index 0000000 . . 796b96d 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / app / . gitignore 
 @ @ - 0 , 0 + 1 @ @ 
 + / build 
 diff - - git a / distribution / RealmMigrationExample / app / build . gradle b / distribution / RealmMigrationExample / app / build . gradle 
 new file mode 100644 
 index 0000000 . . 7e1688f 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / app / build . gradle 
 @ @ - 0 , 0 + 1 , 26 @ @ 
 + apply plugin : ' com . android . application ' 
 + apply plugin : ' android - apt ' 
 + 
 + android { 
 + compileSdkVersion 20 
 + buildToolsVersion " 20 . 0 . 0 " 
 + 
 + defaultConfig { 
 + applicationId " io . realm . examples . realmmigrationexample " 
 + minSdkVersion 14 
 + targetSdkVersion 20 
 + versionCode 1 
 + versionName " 1 . 0 " 
 + } 
 + buildTypes { 
 + release { 
 + runProguard false 
 + proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 + } 
 + } 
 + } 
 + 
 + dependencies { 
 + apt fileTree ( dir : ' libs ' , include : [ ' * . jar ' ] ) 
 + compile project ( ' : realm ' ) 
 + } 
 \ No newline at end of file 
 diff - - git a / distribution / RealmMigrationExample / app / proguard - rules . pro b / distribution / RealmMigrationExample / app / proguard - rules . pro 
 new file mode 100644 
 index 0000000 . . bb65c6f 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / app / proguard - rules . pro 
 @ @ - 0 , 0 + 1 , 17 @ @ 
 + # Add project specific ProGuard rules here . 
 + # By default , the flags in this file are appended to flags specified 
 + # in / Applications / Android Studio . app / sdk / tools / proguard / proguard - android . txt 
 + # You can edit the include path and order by changing the proguardFiles 
 + # directive in build . gradle . 
 + # 
 + # For more details , see 
 + # http : / / developer . android . com / guide / developing / tools / proguard . html 
 + 
 + # Add any project specific keep options here : 
 + 
 + # If your project uses WebView with JS , uncomment the following 
 + # and specify the fully qualified class name to the JavaScript interface 
 + # class : 
 + # - keepclassmembers class fqcn . of . javascript . interface . for . webview { 
 + # public * ; 
 + # } 
 diff - - git a / distribution / RealmMigrationExample / build . gradle b / distribution / RealmMigrationExample / build . gradle 
 new file mode 100644 
 index 0000000 . . 3842102 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / build . gradle 
 @ @ - 0 , 0 + 1 , 20 @ @ 
 + / / Top - level build file where you can add configuration options common to all sub - projects / modules . 
 + 
 + buildscript { 
 + repositories { 
 + jcenter ( ) 
 + } 
 + dependencies { 
 + classpath ' com . android . tools . build : gradle : 0 . 12 . 2 ' 
 + classpath ' com . neenbedankt . gradle . plugins : android - apt : 1 . 3 ' 
 + 
 + / / NOTE : Do not place your application dependencies here ; they belong 
 + / / in the individual module build . gradle files 
 + } 
 + } 
 + 
 + allprojects { 
 + repositories { 
 + jcenter ( ) 
 + } 
 + } 
 diff - - git a / distribution / RealmMigrationExample / gradle . properties b / distribution / RealmMigrationExample / gradle . properties 
 new file mode 100644 
 index 0000000 . . 5d08ba7 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / gradle . properties 
 @ @ - 0 , 0 + 1 , 18 @ @ 
 + # Project - wide Gradle settings . 
 + 
 + # IDE ( e . g . Android Studio ) users : 
 + # Settings specified in this file will override any Gradle settings 
 + # configured through the IDE . 
 + 
 + # For more details on how to configure your build environment visit 
 + # http : / / www . gradle . org / docs / current / userguide / build _ environment . html 
 + 
 + # Specifies the JVM arguments used for the daemon process . 
 + # The setting is particularly useful for tweaking memory settings . 
 + # Default value : - Xmx10248m - XX : MaxPermSize = 256m 
 + # org . gradle . jvmargs = - Xmx2048m - XX : MaxPermSize = 512m - XX : + HeapDumpOnOutOfMemoryError - Dfile . encoding = UTF - 8 
 + 
 + # When configured , Gradle will run in incubating parallel mode . 
 + # This option should only be used with decoupled projects . More details , visit 
 + # http : / / www . gradle . org / docs / current / userguide / multi _ project _ builds . html # sec : decoupled _ projects 
 + # org . gradle . parallel = true 
 \ No newline at end of file 
 diff - - git a / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . jar b / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . jar 
 new file mode 100644 
 index 0000000 . . 8c0fb64 
 Binary files / dev / null and b / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . jar differ 
 diff - - git a / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . properties b / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . properties 
 new file mode 100644 
 index 0000000 . . 1e61d1f 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / gradle / wrapper / gradle - wrapper . properties 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + # Wed Apr 10 15 : 27 : 10 PDT 2013 
 + distributionBase = GRADLE _ USER _ HOME 
 + distributionPath = wrapper / dists 
 + zipStoreBase = GRADLE _ USER _ HOME 
 + zipStorePath = wrapper / dists 
 + distributionUrl = http \ : / / services . gradle . org / distributions / gradle - 1 . 12 - all . zip 
 diff - - git a / distribution / RealmMigrationExample / gradlew b / distribution / RealmMigrationExample / gradlew 
 new file mode 100755 
 index 0000000 . . 91a7e26 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / gradlew 
 @ @ - 0 , 0 + 1 , 164 @ @ 
 + # ! / usr / bin / env bash 
 + 
 + # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
 + # # 
 + # # Gradle start up script for UN * X 
 + # # 
 + # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
 + 
 + # Add default JVM options here . You can also use JAVA _ OPTS and GRADLE _ OPTS to pass JVM options to this script . 
 + DEFAULT _ JVM _ OPTS = " " 
 + 
 + APP _ NAME = " Gradle " 
 + APP _ BASE _ NAME = ` basename " $ 0 " ` 
 + 
 + # Use the maximum available , or set MAX _ FD ! = - 1 to use that value . 
 + MAX _ FD = " maximum " 
 + 
 + warn ( ) { 
 + echo " $ * " 
 + } 
 + 
 + die ( ) { 
 + echo 
 + echo " $ * " 
 + echo 
 + exit 1 
 + } 
 + 
 + # OS specific support ( must be ' true ' or ' false ' ) . 
 + cygwin = false 
 + msys = false 
 + darwin = false 
 + case " ` uname ` " in 
 + CYGWIN * ) 
 + cygwin = true 
 + ; ; 
 + Darwin * ) 
 + darwin = true 
 + ; ; 
 + MINGW * ) 
 + msys = true 
 + ; ; 
 + esac 
 + 
 + # For Cygwin , ensure paths are in UNIX format before anything is touched . 
 + if $ cygwin ; then 
 + [ - n " $ JAVA _ HOME " ] & & JAVA _ HOME = ` cygpath - - unix " $ JAVA _ HOME " ` 
 + fi 
 + 
 + # Attempt to set APP _ HOME 
 + # Resolve links : $ 0 may be a link 
 + PRG = " $ 0 " 
 + # Need this for relative symlinks . 
 + while [ - h " $ PRG " ] ; do 
 + ls = ` ls - ld " $ PRG " ` 
 + link = ` expr " $ ls " : ' . * - > \ ( . * \ ) $ ' ` 
 + if expr " $ link " : ' / . * ' > / dev / null ; then 
 + PRG = " $ link " 
 + else 
 + PRG = ` dirname " $ PRG " ` " / $ link " 
 + fi 
 + done 
 + SAVED = " ` pwd ` " 
 + cd " ` dirname \ " $ PRG \ " ` / " > & - 
 + APP _ HOME = " ` pwd - P ` " 
 + cd " $ SAVED " > & - 
 + 
 + CLASSPATH = $ APP _ HOME / gradle / wrapper / gradle - wrapper . jar 
 + 
 + # Determine the Java command to use to start the JVM . 
 + if [ - n " $ JAVA _ HOME " ] ; then 
 + if [ - x " $ JAVA _ HOME / jre / sh / java " ] ; then 
 + # IBM ' s JDK on AIX uses strange locations for the executables 
 + JAVACMD = " $ JAVA _ HOME / jre / sh / java " 
 + else 
 + JAVACMD = " $ JAVA _ HOME / bin / java " 
 + fi 
 + if [ ! - x " $ JAVACMD " ] ; then 
 + die " ERROR : JAVA _ HOME is set to an invalid directory : $ JAVA _ HOME 
 + 
 + Please set the JAVA _ HOME variable in your environment to match the 
 + location of your Java installation . " 
 + fi 
 + else 
 + JAVACMD = " java " 
 + which java > / dev / null 2 > & 1 | | die " ERROR : JAVA _ HOME is not set and no ' java ' command could be found in your PATH . 
 + 
 + Please set the JAVA _ HOME variable in your environment to match the 
 + location of your Java installation . " 
 + fi 
 + 
 + # Increase the maximum file descriptors if we can . 
 + if [ " $ cygwin " = " false " - a " $ darwin " = " false " ] ; then 
 + MAX _ FD _ LIMIT = ` ulimit - H - n ` 
 + if [ $ ? - eq 0 ] ; then 
 + if [ " $ MAX _ FD " = " maximum " - o " $ MAX _ FD " = " max " ] ; then 
 + MAX _ FD = " $ MAX _ FD _ LIMIT " 
 + fi 
 + ulimit - n $ MAX _ FD 
 + if [ $ ? - ne 0 ] ; then 
 + warn " Could not set maximum file descriptor limit : $ MAX _ FD " 
 + fi 
 + else 
 + warn " Could not query maximum file descriptor limit : $ MAX _ FD _ LIMIT " 
 + fi 
 + fi 
 + 
 + # For Darwin , add options to specify how the application appears in the dock 
 + if $ darwin ; then 
 + GRADLE _ OPTS = " $ GRADLE _ OPTS \ " - Xdock : name = $ APP _ NAME \ " \ " - Xdock : icon = $ APP _ HOME / media / gradle . icns \ " " 
 + fi 
 + 
 + # For Cygwin , switch paths to Windows format before running java 
 + if $ cygwin ; then 
 + APP _ HOME = ` cygpath - - path - - mixed " $ APP _ HOME " ` 
 + CLASSPATH = ` cygpath - - path - - mixed " $ CLASSPATH " ` 
 + 
 + # We build the pattern for arguments to be converted via cygpath 
 + ROOTDIRSRAW = ` find - L / - maxdepth 1 - mindepth 1 - type d 2 > / dev / null ` 
 + SEP = " " 
 + for dir in $ ROOTDIRSRAW ; do 
 + ROOTDIRS = " $ ROOTDIRS $ SEP $ dir " 
 + SEP = " | " 
 + done 
 + OURCYGPATTERN = " ( ^ ( $ ROOTDIRS ) ) " 
 + # Add a user - defined pattern to the cygpath arguments 
 + if [ " $ GRADLE _ CYGPATTERN " ! = " " ] ; then 
 + OURCYGPATTERN = " $ OURCYGPATTERN | ( $ GRADLE _ CYGPATTERN ) " 
 + fi 
 + # Now convert the arguments - kludge to limit ourselves to / bin / sh 
 + i = 0 
 + for arg in " $ @ " ; do 
 + CHECK = ` echo " $ arg " | egrep - c " $ OURCYGPATTERN " - ` 
 + CHECK2 = ` echo " $ arg " | egrep - c " ^ - " ` # # # Determine if an option 
 + 
 + if [ $ CHECK - ne 0 ] & & [ $ CHECK2 - eq 0 ] ; then # # # Added a condition 
 + eval ` echo args $ i ` = ` cygpath - - path - - ignore - - mixed " $ arg " ` 
 + else 
 + eval ` echo args $ i ` = " \ " $ arg \ " " 
 + fi 
 + i = $ ( ( i + 1 ) ) 
 + done 
 + case $ i in 
 + ( 0 ) set - - ; ; 
 + ( 1 ) set - - " $ args0 " ; ; 
 + ( 2 ) set - - " $ args0 " " $ args1 " ; ; 
 + ( 3 ) set - - " $ args0 " " $ args1 " " $ args2 " ; ; 
 + ( 4 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " ; ; 
 + ( 5 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " ; ; 
 + ( 6 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " " $ args5 " ; ; 
 + ( 7 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " " $ args5 " " $ args6 " ; ; 
 + ( 8 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " " $ args5 " " $ args6 " " $ args7 " ; ; 
 + ( 9 ) set - - " $ args0 " " $ args1 " " $ args2 " " $ args3 " " $ args4 " " $ args5 " " $ args6 " " $ args7 " " $ args8 " ; ; 
 + esac 
 + fi 
 + 
 + # Split up the JVM _ OPTS And GRADLE _ OPTS values into an array , following the shell quoting and substitution rules 
 + function splitJvmOpts ( ) { 
 + JVM _ OPTS = ( " $ @ " ) 
 + } 
 + eval splitJvmOpts $ DEFAULT _ JVM _ OPTS $ JAVA _ OPTS $ GRADLE _ OPTS 
 + JVM _ OPTS [ $ { # JVM _ OPTS [ * ] } ] = " - Dorg . gradle . appname = $ APP _ BASE _ NAME " 
 + 
 + exec " $ JAVACMD " " $ { JVM _ OPTS [ @ ] } " - classpath " $ CLASSPATH " org . gradle . wrapper . GradleWrapperMain " $ @ " 
 diff - - git a / distribution / RealmMigrationExample / gradlew . bat b / distribution / RealmMigrationExample / gradlew . bat 
 new file mode 100644 
 index 0000000 . . aec9973 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / gradlew . bat 
 @ @ - 0 , 0 + 1 , 90 @ @ 
 + @ if " % DEBUG % " = = " " @ echo off 
 + @ rem # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
 + @ rem 
 + @ rem Gradle startup script for Windows 
 + @ rem 
 + @ rem # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
 + 
 + @ rem Set local scope for the variables with windows NT shell 
 + if " % OS % " = = " Windows _ NT " setlocal 
 + 
 + @ rem Add default JVM options here . You can also use JAVA _ OPTS and GRADLE _ OPTS to pass JVM options to this script . 
 + set DEFAULT _ JVM _ OPTS = 
 + 
 + set DIRNAME = % ~ dp0 
 + if " % DIRNAME % " = = " " set DIRNAME = . 
 + set APP _ BASE _ NAME = % ~ n0 
 + set APP _ HOME = % DIRNAME % 
 + 
 + @ rem Find java . exe 
 + if defined JAVA _ HOME goto findJavaFromJavaHome 
 + 
 + set JAVA _ EXE = java . exe 
 + % JAVA _ EXE % - version > NUL 2 > & 1 
 + if " % ERRORLEVEL % " = = " 0 " goto init 
 + 
 + echo . 
 + echo ERROR : JAVA _ HOME is not set and no ' java ' command could be found in your PATH . 
 + echo . 
 + echo Please set the JAVA _ HOME variable in your environment to match the 
 + echo location of your Java installation . 
 + 
 + goto fail 
 + 
 + : findJavaFromJavaHome 
 + set JAVA _ HOME = % JAVA _ HOME : " = % 
 + set JAVA _ EXE = % JAVA _ HOME % / bin / java . exe 
 + 
 + if exist " % JAVA _ EXE % " goto init 
 + 
 + echo . 
 + echo ERROR : JAVA _ HOME is set to an invalid directory : % JAVA _ HOME % 
 + echo . 
 + echo Please set the JAVA _ HOME variable in your environment to match the 
 + echo location of your Java installation . 
 + 
 + goto fail 
 + 
 + : init 
 + @ rem Get command - line arguments , handling Windowz variants 
 + 
 + if not " % OS % " = = " Windows _ NT " goto win9xME _ args 
 + if " % @ eval [ 2 + 2 ] " = = " 4 " goto 4NT _ args 
 + 
 + : win9xME _ args 
 + @ rem Slurp the command line arguments . 
 + set CMD _ LINE _ ARGS = 
 + set _ SKIP = 2 
 + 
 + : win9xME _ args _ slurp 
 + if " x % ~ 1 " = = " x " goto execute 
 + 
 + set CMD _ LINE _ ARGS = % * 
 + goto execute 
 + 
 + : 4NT _ args 
 + @ rem Get arguments from the 4NT Shell from JP Software 
 + set CMD _ LINE _ ARGS = % $ 
 + 
 + : execute 
 + @ rem Setup the command line 
 + 
 + set CLASSPATH = % APP _ HOME % \ gradle \ wrapper \ gradle - wrapper . jar 
 + 
 + @ rem Execute Gradle 
 + " % JAVA _ EXE % " % DEFAULT _ JVM _ OPTS % % JAVA _ OPTS % % GRADLE _ OPTS % " - Dorg . gradle . appname = % APP _ BASE _ NAME % " - classpath " % CLASSPATH % " org . gradle . wrapper . GradleWrapperMain % CMD _ LINE _ ARGS % 
 + 
 + : end 
 + @ rem End local scope for the variables with windows NT shell 
 + if " % ERRORLEVEL % " = = " 0 " goto mainEnd 
 + 
 + : fail 
 + rem Set variable GRADLE _ EXIT _ CONSOLE if you need the _ script _ return code instead of 
 + rem the _ cmd . exe / c _ return code ! 
 + if not " " = = " % GRADLE _ EXIT _ CONSOLE % " exit 1 
 + exit / b 1 
 + 
 + : mainEnd 
 + if " % OS % " = = " Windows _ NT " endlocal 
 + 
 + : omega 
 diff - - git a / distribution / RealmMigrationExample / settings . gradle b / distribution / RealmMigrationExample / settings . gradle 
 new file mode 100644 
 index 0000000 . . 2077877 
 - - - / dev / null 
 + + + b / distribution / RealmMigrationExample / settings . gradle 
 @ @ - 0 , 0 + 1 , 2 @ @ 
 + include ' : app ' 
 + include ' : realm '
