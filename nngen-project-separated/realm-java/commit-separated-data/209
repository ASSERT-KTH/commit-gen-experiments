BLEU SCORE: 0.07809849842300641

TEST MSG: Update Gradle plugins to the latest version
GENERATED MSG: Implement the release process in Gradle

TEST DIFF (one line): diff - - git a / examples / build . gradle b / examples / build . gradle <nl> index 3822790 . . fdb3747 100644 <nl> - - - a / examples / build . gradle <nl> + + + b / examples / build . gradle <nl> @ @ - 24 , 8 + 24 , 8 @ @ allprojects { <nl> } <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 3 . 0 . 0 - alpha4 ' <nl> - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' <nl> - classpath ' com . novoda : gradle - android - command - plugin : 1 . 5 . 0 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 7 . 1 ' <nl> + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' <nl> classpath " io . realm : realm - gradle - plugin : $ { currentVersion } " <nl> } <nl> } <nl> diff - - git a / examples / encryptionExample / build . gradle b / examples / encryptionExample / build . gradle <nl> index c58427e . . d8729bb 100644 <nl> - - - a / examples / encryptionExample / build . gradle <nl> + + + b / examples / encryptionExample / build . gradle <nl> @ @ - 23 , 6 + 23 , 6 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> diff - - git a / examples / gridViewExample / build . gradle b / examples / gridViewExample / build . gradle <nl> index 8d45e3a . . d5462a0 100644 <nl> - - - a / examples / gridViewExample / build . gradle <nl> + + + b / examples / gridViewExample / build . gradle <nl> @ @ - 22 , 7 + 22 , 7 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> <nl> splits { <nl> diff - - git a / examples / introExample / build . gradle b / examples / introExample / build . gradle <nl> index 6559bb3 . . 3b6de30 100644 <nl> - - - a / examples / introExample / build . gradle <nl> + + + b / examples / introExample / build . gradle <nl> @ @ - 24 , 6 + 24 , 6 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> diff - - git a / examples / jsonExample / build . gradle b / examples / jsonExample / build . gradle <nl> index cdd8b8a . . 5dc86a7 100644 <nl> - - - a / examples / jsonExample / build . gradle <nl> + + + b / examples / jsonExample / build . gradle <nl> @ @ - 23 , 7 + 23 , 7 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> <nl> diff - - git a / examples / kotlinExample / build . gradle b / examples / kotlinExample / build . gradle <nl> index 878e159 . . 773812b 100644 <nl> - - - a / examples / kotlinExample / build . gradle <nl> + + + b / examples / kotlinExample / build . gradle <nl> @ @ - 36 , 7 + 36 , 7 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> <nl> sourceSets { <nl> diff - - git a / examples / migrationExample / build . gradle b / examples / migrationExample / build . gradle <nl> index 800fa0e . . 0339504 100644 <nl> - - - a / examples / migrationExample / build . gradle <nl> + + + b / examples / migrationExample / build . gradle <nl> @ @ - 19 , 6 + 19 , 6 @ @ android { <nl> } <nl> } <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> diff - - git a / examples / moduleExample / app / build . gradle b / examples / moduleExample / app / build . gradle <nl> index fe9fbaf . . 3288225 100644 <nl> - - - a / examples / moduleExample / app / build . gradle <nl> + + + b / examples / moduleExample / app / build . gradle <nl> @ @ - 32 , 7 + 32 , 7 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> <nl> diff - - git a / examples / newsreaderExample / build . gradle b / examples / newsreaderExample / build . gradle <nl> index 6e08119 . . cb19345 100644 <nl> - - - a / examples / newsreaderExample / build . gradle <nl> + + + b / examples / newsreaderExample / build . gradle <nl> @ @ - 19 , 7 + 19 , 7 @ @ android { <nl> } <nl> } <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> lintOptions { <nl> disable ' InvalidPackage ' <nl> diff - - git a / examples / objectServerExample / build . gradle b / examples / objectServerExample / build . gradle <nl> index f16e3db . . 6f274d4 100644 <nl> - - - a / examples / objectServerExample / build . gradle <nl> + + + b / examples / objectServerExample / build . gradle <nl> @ @ - 51 , 7 + 51 , 7 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> <nl> diff - - git a / examples / rxJavaExample / build . gradle b / examples / rxJavaExample / build . gradle <nl> index 21c4723 . . d628950 100644 <nl> - - - a / examples / rxJavaExample / build . gradle <nl> + + + b / examples / rxJavaExample / build . gradle <nl> @ @ - 24 , 7 + 24 , 7 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> <nl> diff - - git a / examples / secureTokenAndroidKeyStore / build . gradle b / examples / secureTokenAndroidKeyStore / build . gradle <nl> index 2059678 . . d44f5bb 100644 <nl> - - - a / examples / secureTokenAndroidKeyStore / build . gradle <nl> + + + b / examples / secureTokenAndroidKeyStore / build . gradle <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - command ' <nl> apply plugin : ' realm - android ' <nl> <nl> android { <nl> @ @ - 21 , 6 + 22 , 9 @ @ android { <nl> proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> } <nl> } <nl> + command { <nl> + monkey . events 2000 <nl> + } <nl> } <nl> <nl> dependencies { <nl> diff - - git a / examples / threadExample / build . gradle b / examples / threadExample / build . gradle <nl> index 5ebeb26 . . d04750c 100644 <nl> - - - a / examples / threadExample / build . gradle <nl> + + + b / examples / threadExample / build . gradle <nl> @ @ - 19 , 7 + 19 , 7 @ @ android { <nl> } <nl> } <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> <nl> diff - - git a / examples / unitTestExample / build . gradle b / examples / unitTestExample / build . gradle <nl> index 2270fa1 . . 6891e4b 100644 <nl> - - - a / examples / unitTestExample / build . gradle <nl> + + + b / examples / unitTestExample / build . gradle <nl> @ @ - 24 , 7 + 24 , 7 @ @ android { <nl> } <nl> <nl> command { <nl> - events 2000 <nl> + monkey . events 2000 <nl> } <nl> } <nl> <nl> diff - - git a / gradle - plugin / build . gradle b / gradle - plugin / build . gradle <nl> index 9457281 . . 24cedb3 100644 <nl> - - - a / gradle - plugin / build . gradle <nl> + + + b / gradle - plugin / build . gradle <nl> @ @ - 3 , 8 + 3 , 8 @ @ buildscript { <nl> jcenter ( ) <nl> } <nl> dependencies { <nl> - classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 3 . 1 . 1 ' <nl> - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' <nl> + classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 5 . 2 ' <nl> + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' <nl> } <nl> } <nl> <nl> diff - - git a / realm - annotations / build . gradle b / realm - annotations / build . gradle <nl> index 40213eb . . f97d389 100644 <nl> - - - a / realm - annotations / build . gradle <nl> + + + b / realm - annotations / build . gradle <nl> @ @ - 3 , 8 + 3 , 8 @ @ buildscript { <nl> jcenter ( ) <nl> } <nl> dependencies { <nl> - classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 3 . 1 . 1 ' <nl> - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' <nl> + classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 5 . 2 ' <nl> + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' <nl> } <nl> } <nl> <nl> diff - - git a / realm - transformer / build . gradle b / realm - transformer / build . gradle <nl> index 1c9eeff . . a10ba1e 100644 <nl> - - - a / realm - transformer / build . gradle <nl> + + + b / realm - transformer / build . gradle <nl> @ @ - 3 , 8 + 3 , 8 @ @ buildscript { <nl> jcenter ( ) <nl> } <nl> dependencies { <nl> - classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 3 . 1 . 1 ' <nl> - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' <nl> + classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 5 . 2 ' <nl> + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' <nl> } <nl> } <nl> <nl> diff - - git a / realm / build . gradle b / realm / build . gradle <nl> index 6dc878c . . af2c445 100644 <nl> - - - a / realm / build . gradle <nl> + + + b / realm / build . gradle <nl> @ @ - 10 , 15 + 10 , 15 @ @ buildscript { <nl> <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 3 . 0 . 0 - alpha4 ' <nl> - classpath ' de . undercouch : gradle - download - task : 3 . 1 . 1 ' <nl> + classpath ' de . undercouch : gradle - download - task : 3 . 2 . 0 ' <nl> classpath ' com . github . dcendents : android - maven - gradle - plugin : 1 . 5 ' <nl> - classpath ' com . novoda : gradle - android - command - plugin : 1 . 5 . 0 ' <nl> - classpath ' com . github . skhatri : gradle - s3 - plugin : 1 . 0 . 2 ' <nl> - classpath ' org . kt3k . gradle . plugin : coveralls - gradle - plugin : 2 . 4 . 0 ' <nl> - classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 0 . 1 ' <nl> - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 7 . 1 ' <nl> + classpath ' com . github . skhatri : gradle - s3 - plugin : 1 . 0 . 4 ' <nl> + classpath ' org . kt3k . gradle . plugin : coveralls - gradle - plugin : 2 . 8 . 1 ' <nl> + classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 5 . 2 ' <nl> + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' <nl> classpath " io . realm : realm - transformer : $ { file ( ' . . / version . txt ' ) . text . trim ( ) } " <nl> - classpath ' net . ltgt . gradle : gradle - errorprone - plugin : 0 . 0 . 10 ' <nl> + classpath ' net . ltgt . gradle : gradle - errorprone - plugin : 0 . 0 . 11 ' <nl> classpath " org . jetbrains . kotlin : kotlin - gradle - plugin : $ kotlin _ version " <nl> } <nl> }
NEAREST DIFF (one line): diff - - git a / build . gradle b / build . gradle <nl> index 05c1bdf . . f19347a 100644 <nl> - - - a / build . gradle <nl> + + + b / build . gradle <nl> @ @ - 9 , 6 + 9 , 7 @ @ buildscript { <nl> classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 0 . 5 ' / / Version 0 . 6 seems to require gradle 2 . 0 + <nl> classpath ' com . jakewharton . sdkmanager : gradle - plugin : 0 . 12 . 0 ' <nl> classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' <nl> + classpath ' com . github . skhatri : gradle - s3 - plugin : 1 . 0 . 0 ' <nl> } <nl> } <nl> <nl> diff - - git a / distribution / RealmAdapterExample / build . gradle b / distribution / RealmAdapterExample / build . gradle <nl> index 2027f3b . . 61fd77e 100644 <nl> - - - a / distribution / RealmAdapterExample / build . gradle <nl> + + + b / distribution / RealmAdapterExample / build . gradle <nl> @ @ - 6 , 6 + 6 , 7 @ @ buildscript { <nl> } <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' <nl> } <nl> } <nl> <nl> diff - - git a / distribution / RealmEncryptionExample / build . gradle b / distribution / RealmEncryptionExample / build . gradle <nl> index 2027f3b . . 61fd77e 100644 <nl> - - - a / distribution / RealmEncryptionExample / build . gradle <nl> + + + b / distribution / RealmEncryptionExample / build . gradle <nl> @ @ - 6 , 6 + 6 , 7 @ @ buildscript { <nl> } <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' <nl> } <nl> } <nl> <nl> diff - - git a / distribution / RealmGridViewExample / build . gradle b / distribution / RealmGridViewExample / build . gradle <nl> index 2027f3b . . 61fd77e 100644 <nl> - - - a / distribution / RealmGridViewExample / build . gradle <nl> + + + b / distribution / RealmGridViewExample / build . gradle <nl> @ @ - 6 , 6 + 6 , 7 @ @ buildscript { <nl> } <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' <nl> } <nl> } <nl> <nl> diff - - git a / distribution / RealmIntroExample / build . gradle b / distribution / RealmIntroExample / build . gradle <nl> index 2027f3b . . 61fd77e 100644 <nl> - - - a / distribution / RealmIntroExample / build . gradle <nl> + + + b / distribution / RealmIntroExample / build . gradle <nl> @ @ - 6 , 6 + 6 , 7 @ @ buildscript { <nl> } <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' <nl> } <nl> } <nl> <nl> diff - - git a / distribution / RealmJsonExample / build . gradle b / distribution / RealmJsonExample / build . gradle <nl> index 2027f3b . . 61fd77e 100644 <nl> - - - a / distribution / RealmJsonExample / build . gradle <nl> + + + b / distribution / RealmJsonExample / build . gradle <nl> @ @ - 6 , 6 + 6 , 7 @ @ buildscript { <nl> } <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' <nl> } <nl> } <nl> <nl> diff - - git a / distribution / RealmMigrationExample / build . gradle b / distribution / RealmMigrationExample / build . gradle <nl> index 2027f3b . . 61fd77e 100644 <nl> - - - a / distribution / RealmMigrationExample / build . gradle <nl> + + + b / distribution / RealmMigrationExample / build . gradle <nl> @ @ - 6 , 6 + 6 , 7 @ @ buildscript { <nl> } <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' <nl> } <nl> } <nl> <nl> diff - - git a / distribution / RealmThreadExample / build . gradle b / distribution / RealmThreadExample / build . gradle <nl> index b9ed604 . . ae2ac55 100644 <nl> - - - a / distribution / RealmThreadExample / build . gradle <nl> + + + b / distribution / RealmThreadExample / build . gradle <nl> @ @ - 22 , 6 + 22 , 7 @ @ buildscript { <nl> } <nl> dependencies { <nl> classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' <nl> + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' <nl> } <nl> } <nl> <nl> diff - - git a / realm / build . gradle b / realm / build . gradle <nl> index daec63d . . 37d00f9 100644 <nl> - - - a / realm / build . gradle <nl> + + + b / realm / build . gradle <nl> @ @ - 23 , 8 + 23 , 8 @ @ android { <nl> / / } <nl> / / } <nl> <nl> - <nl> } <nl> + <nl> dependencies { <nl> compile ' com . intellij : annotations : + @ jar ' <nl> compile files ( " . . / realm - annotations / build / libs / realm - annotations - $ { version } . jar " ) <nl> @ @ - 39 , 7 + 39 , 7 @ @ android . libraryVariants . all { variant - > <nl> return ; / / Skip debug builds . <nl> } <nl> <nl> - task ( " javadoc $ { variant . name . capitalize ( ) } " , type : Javadoc ) { <nl> + def javadocTask = task ( " javadoc $ { variant . name . capitalize ( ) } " , type : Javadoc ) { <nl> description " Generates Javadoc for $ variant . name . " <nl> group ' Docs ' <nl> source = variant . javaCompile . source <nl> @ @ - 55 , 11 + 55 , 11 @ @ android . libraryVariants . all { variant - > <nl> description " Bundles Javadoc into zip for $ variant . name . " <nl> group ' Docs ' <nl> classifier = " javadoc " <nl> - from tasks [ " javadoc $ { variant . name . capitalize ( ) } " ] <nl> + from javadocTask <nl> } <nl> } <nl> <nl> - task androidJar ( type : Jar , dependsOn : [ ' assemble ' , ' bundleJavadocRelease ' ] ) { <nl> + task androidJar ( type : Jar , dependsOn : [ ' assemble ' ] ) { <nl> group ' Build ' <nl> description ' Generates a jar file continaining Realm and its annotation processor ' <nl> from zipTree ( ' build / intermediates / bundles / release / classes . jar ' ) <nl> @ @ - 156 , 10 + 156 , 8 @ @ task compileAnnotations ( type : GradleBuild ) { <nl> tasks = [ ' assemble ' ] <nl> } <nl> <nl> - tasks . preBuild { <nl> - dependsOn compileJni <nl> - dependsOn compileAnnotations <nl> - dependsOn buildApt <nl> + project . afterEvaluate { <nl> + preBuild . dependsOn ( [ ' compileJni ' , ' compileAnnotations ' , ' buildApt ' ] ) <nl> } <nl> <nl> def examples = [ <nl> @ @ - 187 , 7 + 185 , 7 @ @ task generateDistributionExamplesBuildFiles < < { <nl> } <nl> } <nl> <nl> - task populateDistributionFolder ( dependsOn : ' androidJar ' ) < < { <nl> + task populateDistributionFolder ( dependsOn : [ ' androidJar ' , ' bundleJavadocRelease ' ] ) < < { <nl> copy { <nl> from ' . . / changelog . txt ' <nl> from " build / libs / realm - $ { version } . jar " <nl> @ @ - 242 , 3 + 240 , 56 @ @ task createDistributionPackage ( type : Zip ) { <nl> destinationDir = new File ( " $ { rootDir } " ) <nl> archiveName = " realm - java - $ { version } . zip " <nl> } <nl> + <nl> + examples . each ( ) { src , dest - > <nl> + task " distributionMonkey $ { dest } " ( type : GradleBuild ) { <nl> + dependsOn createDistributionFolder <nl> + dependsOn bintrayUpload <nl> + dir = file ( " $ { rootDir } / distribution / $ { dest } " ) <nl> + tasks = [ ' monkeyRelease ' ] <nl> + } <nl> + } <nl> + <nl> + import com . github . skhatri . s3aws . plugin . S3UploadTask <nl> + <nl> + / / This is an ugly hack because we have two links to the latest version . <nl> + / / The right solution here would be to contribute a change to the S3 Gradle plugin <nl> + / / to allow link to be a list of strings . <nl> + [ ' java ' , ' android ' ] . each ( ) { link - > <nl> + task " upload $ { link . capitalize ( ) } DistributionPackage " ( type : S3UploadTask ) { <nl> + examples . each { src , dest - > <nl> + dependsOn " distributionMonkey $ { dest } " <nl> + } <nl> + bucket = ' static . realm . io ' <nl> + file = " $ { rootDir } / realm - java - $ { version } . zip " <nl> + key = ' downloads / java / realm - java - $ { version } . zip ' <nl> + link = " downloads / $ { link } / latest " <nl> + } <nl> + } <nl> + <nl> + task uploadUpdateVersion ( type : S3UploadTask ) { <nl> + [ ' java ' , ' android ' ] . each ( ) { link - > <nl> + dependsOn " upload $ { link . capitalize ( ) } DistributionPackage " <nl> + } <nl> + bucket = ' static . realm . io ' <nl> + file = " $ { rootDir } / version . txt " <nl> + key = ' downloads / update / java ' <nl> + } <nl> + <nl> + task tagRepo ( type : Exec ) { <nl> + dependsOn uploadUpdateVersion <nl> + workingDir rootDir <nl> + commandLine ' git ' , ' tag ' , ' - a ' , " v $ { version } " , ' - m ' , " v $ { version } " <nl> + } <nl> + <nl> + task pushTag ( type : Exec ) { <nl> + dependsOn tagRepo <nl> + workingDir rootDir <nl> + commandLine ' git ' , ' push ' , ' - - tags ' <nl> + } <nl> + <nl> + task release { <nl> + group ' Release ' <nl> + description ' Release realm - java ' <nl> + dependsOn pushTag <nl> + } <nl> \ No newline at end of file <nl> diff - - git a / tools / templates / RealmAdapterExample / build . gradle b / tools / templates / RealmAdapterExample / build . gradle <nl> index dd153d1 . . db868bf 100644 <nl> - - - a / tools / templates / RealmAdapterExample / build . gradle <nl> + + + b / tools / templates / RealmAdapterExample / build . gradle <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - command ' <nl> <nl> android { <nl> compileSdkVersion 20 <nl> @ @ - 17 , 6 + 18 , 10 @ @ android { <nl> proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> } <nl> } <nl> + <nl> + command { <nl> + events 2000 <nl> + } <nl> } <nl> <nl> dependencies { <nl> diff - - git a / tools / templates / RealmEncryptionExample / build . gradle b / tools / templates / RealmEncryptionExample / build . gradle <nl> index e9efbce . . 98cc353 100644 <nl> - - - a / tools / templates / RealmEncryptionExample / build . gradle <nl> + + + b / tools / templates / RealmEncryptionExample / build . gradle <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - command ' <nl> <nl> android { <nl> compileSdkVersion 20 <nl> @ @ - 17 , 6 + 18 , 9 @ @ android { <nl> proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> } <nl> } <nl> + command { <nl> + events 2000 <nl> + } <nl> } <nl> <nl> dependencies { <nl> diff - - git a / tools / templates / RealmGridViewExample / build . gradle b / tools / templates / RealmGridViewExample / build . gradle <nl> index be0a2b2 . . 7dbaa96 100644 <nl> - - - a / tools / templates / RealmGridViewExample / build . gradle <nl> + + + b / tools / templates / RealmGridViewExample / build . gradle <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - command ' <nl> <nl> android { <nl> compileSdkVersion 20 <nl> @ @ - 17 , 6 + 18 , 9 @ @ android { <nl> proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> } <nl> } <nl> + command { <nl> + events 2000 <nl> + } <nl> } <nl> <nl> dependencies { <nl> diff - - git a / tools / templates / RealmIntroExample / build . gradle b / tools / templates / RealmIntroExample / build . gradle <nl> index c0b929f . . 80b5cf8 100644 <nl> - - - a / tools / templates / RealmIntroExample / build . gradle <nl> + + + b / tools / templates / RealmIntroExample / build . gradle <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - command ' <nl> <nl> android { <nl> compileSdkVersion 20 <nl> @ @ - 17 , 6 + 18 , 9 @ @ android { <nl> proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> } <nl> } <nl> + command { <nl> + events 2000 <nl> + } <nl> } <nl> <nl> dependencies { <nl> diff - - git a / tools / templates / RealmJsonExample / build . gradle b / tools / templates / RealmJsonExample / build . gradle <nl> index f4d5be7 . . c7818f7 100644 <nl> - - - a / tools / templates / RealmJsonExample / build . gradle <nl> + + + b / tools / templates / RealmJsonExample / build . gradle <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - command ' <nl> <nl> android { <nl> compileSdkVersion 20 <nl> @ @ - 17 , 6 + 18 , 9 @ @ android { <nl> proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> } <nl> } <nl> + command { <nl> + events 2000 <nl> + } <nl> } <nl> <nl> dependencies { <nl> diff - - git a / tools / templates / RealmMigrationExample / build . gradle b / tools / templates / RealmMigrationExample / build . gradle <nl> index b84d005 . . 4c89033 100644 <nl> - - - a / tools / templates / RealmMigrationExample / build . gradle <nl> + + + b / tools / templates / RealmMigrationExample / build . gradle <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - command ' <nl> <nl> android { <nl> compileSdkVersion 20 <nl> @ @ - 17 , 6 + 18 , 9 @ @ android { <nl> proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> } <nl> } <nl> + command { <nl> + events 2000 <nl> + } <nl> } <nl> <nl> dependencies { <nl> diff - - git a / tools / templates / RealmThreadExample / build . gradle b / tools / templates / RealmThreadExample / build . gradle <nl> index 6c75572 . . e2c0a19 100644 <nl> - - - a / tools / templates / RealmThreadExample / build . gradle <nl> + + + b / tools / templates / RealmThreadExample / build . gradle <nl> @ @ - 15 , 6 + 15 , 7 @ @ <nl> * / <nl> <nl> apply plugin : ' com . android . application ' <nl> + apply plugin : ' android - command ' <nl> <nl> android { <nl> compileSdkVersion 21 <nl> @ @ - 33 , 6 + 34 , 9 @ @ android { <nl> proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' <nl> } <nl> } <nl> + command { <nl> + events 2000 <nl> + } <nl> } <nl> <nl> dependencies {

TEST DIFF:
diff - - git a / examples / build . gradle b / examples / build . gradle 
 index 3822790 . . fdb3747 100644 
 - - - a / examples / build . gradle 
 + + + b / examples / build . gradle 
 @ @ - 24 , 8 + 24 , 8 @ @ allprojects { 
 } 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 3 . 0 . 0 - alpha4 ' 
 - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' 
 - classpath ' com . novoda : gradle - android - command - plugin : 1 . 5 . 0 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 7 . 1 ' 
 + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' 
 classpath " io . realm : realm - gradle - plugin : $ { currentVersion } " 
 } 
 } 
 diff - - git a / examples / encryptionExample / build . gradle b / examples / encryptionExample / build . gradle 
 index c58427e . . d8729bb 100644 
 - - - a / examples / encryptionExample / build . gradle 
 + + + b / examples / encryptionExample / build . gradle 
 @ @ - 23 , 6 + 23 , 6 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 diff - - git a / examples / gridViewExample / build . gradle b / examples / gridViewExample / build . gradle 
 index 8d45e3a . . d5462a0 100644 
 - - - a / examples / gridViewExample / build . gradle 
 + + + b / examples / gridViewExample / build . gradle 
 @ @ - 22 , 7 + 22 , 7 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 
 splits { 
 diff - - git a / examples / introExample / build . gradle b / examples / introExample / build . gradle 
 index 6559bb3 . . 3b6de30 100644 
 - - - a / examples / introExample / build . gradle 
 + + + b / examples / introExample / build . gradle 
 @ @ - 24 , 6 + 24 , 6 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 diff - - git a / examples / jsonExample / build . gradle b / examples / jsonExample / build . gradle 
 index cdd8b8a . . 5dc86a7 100644 
 - - - a / examples / jsonExample / build . gradle 
 + + + b / examples / jsonExample / build . gradle 
 @ @ - 23 , 7 + 23 , 7 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 
 diff - - git a / examples / kotlinExample / build . gradle b / examples / kotlinExample / build . gradle 
 index 878e159 . . 773812b 100644 
 - - - a / examples / kotlinExample / build . gradle 
 + + + b / examples / kotlinExample / build . gradle 
 @ @ - 36 , 7 + 36 , 7 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 
 sourceSets { 
 diff - - git a / examples / migrationExample / build . gradle b / examples / migrationExample / build . gradle 
 index 800fa0e . . 0339504 100644 
 - - - a / examples / migrationExample / build . gradle 
 + + + b / examples / migrationExample / build . gradle 
 @ @ - 19 , 6 + 19 , 6 @ @ android { 
 } 
 } 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 diff - - git a / examples / moduleExample / app / build . gradle b / examples / moduleExample / app / build . gradle 
 index fe9fbaf . . 3288225 100644 
 - - - a / examples / moduleExample / app / build . gradle 
 + + + b / examples / moduleExample / app / build . gradle 
 @ @ - 32 , 7 + 32 , 7 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 
 diff - - git a / examples / newsreaderExample / build . gradle b / examples / newsreaderExample / build . gradle 
 index 6e08119 . . cb19345 100644 
 - - - a / examples / newsreaderExample / build . gradle 
 + + + b / examples / newsreaderExample / build . gradle 
 @ @ - 19 , 7 + 19 , 7 @ @ android { 
 } 
 } 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 lintOptions { 
 disable ' InvalidPackage ' 
 diff - - git a / examples / objectServerExample / build . gradle b / examples / objectServerExample / build . gradle 
 index f16e3db . . 6f274d4 100644 
 - - - a / examples / objectServerExample / build . gradle 
 + + + b / examples / objectServerExample / build . gradle 
 @ @ - 51 , 7 + 51 , 7 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 
 diff - - git a / examples / rxJavaExample / build . gradle b / examples / rxJavaExample / build . gradle 
 index 21c4723 . . d628950 100644 
 - - - a / examples / rxJavaExample / build . gradle 
 + + + b / examples / rxJavaExample / build . gradle 
 @ @ - 24 , 7 + 24 , 7 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 
 diff - - git a / examples / secureTokenAndroidKeyStore / build . gradle b / examples / secureTokenAndroidKeyStore / build . gradle 
 index 2059678 . . d44f5bb 100644 
 - - - a / examples / secureTokenAndroidKeyStore / build . gradle 
 + + + b / examples / secureTokenAndroidKeyStore / build . gradle 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 apply plugin : ' com . android . application ' 
 + apply plugin : ' android - command ' 
 apply plugin : ' realm - android ' 
 
 android { 
 @ @ - 21 , 6 + 22 , 9 @ @ android { 
 proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 } 
 } 
 + command { 
 + monkey . events 2000 
 + } 
 } 
 
 dependencies { 
 diff - - git a / examples / threadExample / build . gradle b / examples / threadExample / build . gradle 
 index 5ebeb26 . . d04750c 100644 
 - - - a / examples / threadExample / build . gradle 
 + + + b / examples / threadExample / build . gradle 
 @ @ - 19 , 7 + 19 , 7 @ @ android { 
 } 
 } 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 
 diff - - git a / examples / unitTestExample / build . gradle b / examples / unitTestExample / build . gradle 
 index 2270fa1 . . 6891e4b 100644 
 - - - a / examples / unitTestExample / build . gradle 
 + + + b / examples / unitTestExample / build . gradle 
 @ @ - 24 , 7 + 24 , 7 @ @ android { 
 } 
 
 command { 
 - events 2000 
 + monkey . events 2000 
 } 
 } 
 
 diff - - git a / gradle - plugin / build . gradle b / gradle - plugin / build . gradle 
 index 9457281 . . 24cedb3 100644 
 - - - a / gradle - plugin / build . gradle 
 + + + b / gradle - plugin / build . gradle 
 @ @ - 3 , 8 + 3 , 8 @ @ buildscript { 
 jcenter ( ) 
 } 
 dependencies { 
 - classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 3 . 1 . 1 ' 
 - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' 
 + classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 5 . 2 ' 
 + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' 
 } 
 } 
 
 diff - - git a / realm - annotations / build . gradle b / realm - annotations / build . gradle 
 index 40213eb . . f97d389 100644 
 - - - a / realm - annotations / build . gradle 
 + + + b / realm - annotations / build . gradle 
 @ @ - 3 , 8 + 3 , 8 @ @ buildscript { 
 jcenter ( ) 
 } 
 dependencies { 
 - classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 3 . 1 . 1 ' 
 - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' 
 + classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 5 . 2 ' 
 + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' 
 } 
 } 
 
 diff - - git a / realm - transformer / build . gradle b / realm - transformer / build . gradle 
 index 1c9eeff . . a10ba1e 100644 
 - - - a / realm - transformer / build . gradle 
 + + + b / realm - transformer / build . gradle 
 @ @ - 3 , 8 + 3 , 8 @ @ buildscript { 
 jcenter ( ) 
 } 
 dependencies { 
 - classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 3 . 1 . 1 ' 
 - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' 
 + classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 5 . 2 ' 
 + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' 
 } 
 } 
 
 diff - - git a / realm / build . gradle b / realm / build . gradle 
 index 6dc878c . . af2c445 100644 
 - - - a / realm / build . gradle 
 + + + b / realm / build . gradle 
 @ @ - 10 , 15 + 10 , 15 @ @ buildscript { 
 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 3 . 0 . 0 - alpha4 ' 
 - classpath ' de . undercouch : gradle - download - task : 3 . 1 . 1 ' 
 + classpath ' de . undercouch : gradle - download - task : 3 . 2 . 0 ' 
 classpath ' com . github . dcendents : android - maven - gradle - plugin : 1 . 5 ' 
 - classpath ' com . novoda : gradle - android - command - plugin : 1 . 5 . 0 ' 
 - classpath ' com . github . skhatri : gradle - s3 - plugin : 1 . 0 . 2 ' 
 - classpath ' org . kt3k . gradle . plugin : coveralls - gradle - plugin : 2 . 4 . 0 ' 
 - classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 0 . 1 ' 
 - classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 6 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 7 . 1 ' 
 + classpath ' com . github . skhatri : gradle - s3 - plugin : 1 . 0 . 4 ' 
 + classpath ' org . kt3k . gradle . plugin : coveralls - gradle - plugin : 2 . 8 . 1 ' 
 + classpath ' org . jfrog . buildinfo : build - info - extractor - gradle : 4 . 5 . 2 ' 
 + classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 1 . 7 . 3 ' 
 classpath " io . realm : realm - transformer : $ { file ( ' . . / version . txt ' ) . text . trim ( ) } " 
 - classpath ' net . ltgt . gradle : gradle - errorprone - plugin : 0 . 0 . 10 ' 
 + classpath ' net . ltgt . gradle : gradle - errorprone - plugin : 0 . 0 . 11 ' 
 classpath " org . jetbrains . kotlin : kotlin - gradle - plugin : $ kotlin _ version " 
 } 
 }

NEAREST DIFF:
diff - - git a / build . gradle b / build . gradle 
 index 05c1bdf . . f19347a 100644 
 - - - a / build . gradle 
 + + + b / build . gradle 
 @ @ - 9 , 6 + 9 , 7 @ @ buildscript { 
 classpath ' com . jfrog . bintray . gradle : gradle - bintray - plugin : 0 . 5 ' / / Version 0 . 6 seems to require gradle 2 . 0 + 
 classpath ' com . jakewharton . sdkmanager : gradle - plugin : 0 . 12 . 0 ' 
 classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' 
 + classpath ' com . github . skhatri : gradle - s3 - plugin : 1 . 0 . 0 ' 
 } 
 } 
 
 diff - - git a / distribution / RealmAdapterExample / build . gradle b / distribution / RealmAdapterExample / build . gradle 
 index 2027f3b . . 61fd77e 100644 
 - - - a / distribution / RealmAdapterExample / build . gradle 
 + + + b / distribution / RealmAdapterExample / build . gradle 
 @ @ - 6 , 6 + 6 , 7 @ @ buildscript { 
 } 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' 
 } 
 } 
 
 diff - - git a / distribution / RealmEncryptionExample / build . gradle b / distribution / RealmEncryptionExample / build . gradle 
 index 2027f3b . . 61fd77e 100644 
 - - - a / distribution / RealmEncryptionExample / build . gradle 
 + + + b / distribution / RealmEncryptionExample / build . gradle 
 @ @ - 6 , 6 + 6 , 7 @ @ buildscript { 
 } 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' 
 } 
 } 
 
 diff - - git a / distribution / RealmGridViewExample / build . gradle b / distribution / RealmGridViewExample / build . gradle 
 index 2027f3b . . 61fd77e 100644 
 - - - a / distribution / RealmGridViewExample / build . gradle 
 + + + b / distribution / RealmGridViewExample / build . gradle 
 @ @ - 6 , 6 + 6 , 7 @ @ buildscript { 
 } 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' 
 } 
 } 
 
 diff - - git a / distribution / RealmIntroExample / build . gradle b / distribution / RealmIntroExample / build . gradle 
 index 2027f3b . . 61fd77e 100644 
 - - - a / distribution / RealmIntroExample / build . gradle 
 + + + b / distribution / RealmIntroExample / build . gradle 
 @ @ - 6 , 6 + 6 , 7 @ @ buildscript { 
 } 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' 
 } 
 } 
 
 diff - - git a / distribution / RealmJsonExample / build . gradle b / distribution / RealmJsonExample / build . gradle 
 index 2027f3b . . 61fd77e 100644 
 - - - a / distribution / RealmJsonExample / build . gradle 
 + + + b / distribution / RealmJsonExample / build . gradle 
 @ @ - 6 , 6 + 6 , 7 @ @ buildscript { 
 } 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' 
 } 
 } 
 
 diff - - git a / distribution / RealmMigrationExample / build . gradle b / distribution / RealmMigrationExample / build . gradle 
 index 2027f3b . . 61fd77e 100644 
 - - - a / distribution / RealmMigrationExample / build . gradle 
 + + + b / distribution / RealmMigrationExample / build . gradle 
 @ @ - 6 , 6 + 6 , 7 @ @ buildscript { 
 } 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' 
 } 
 } 
 
 diff - - git a / distribution / RealmThreadExample / build . gradle b / distribution / RealmThreadExample / build . gradle 
 index b9ed604 . . ae2ac55 100644 
 - - - a / distribution / RealmThreadExample / build . gradle 
 + + + b / distribution / RealmThreadExample / build . gradle 
 @ @ - 22 , 6 + 22 , 7 @ @ buildscript { 
 } 
 dependencies { 
 classpath ' com . android . tools . build : gradle : 1 . 0 . 0 ' 
 + classpath ' com . novoda : gradle - android - command - plugin : 1 . 3 . 0 ' 
 } 
 } 
 
 diff - - git a / realm / build . gradle b / realm / build . gradle 
 index daec63d . . 37d00f9 100644 
 - - - a / realm / build . gradle 
 + + + b / realm / build . gradle 
 @ @ - 23 , 8 + 23 , 8 @ @ android { 
 / / } 
 / / } 
 
 - 
 } 
 + 
 dependencies { 
 compile ' com . intellij : annotations : + @ jar ' 
 compile files ( " . . / realm - annotations / build / libs / realm - annotations - $ { version } . jar " ) 
 @ @ - 39 , 7 + 39 , 7 @ @ android . libraryVariants . all { variant - > 
 return ; / / Skip debug builds . 
 } 
 
 - task ( " javadoc $ { variant . name . capitalize ( ) } " , type : Javadoc ) { 
 + def javadocTask = task ( " javadoc $ { variant . name . capitalize ( ) } " , type : Javadoc ) { 
 description " Generates Javadoc for $ variant . name . " 
 group ' Docs ' 
 source = variant . javaCompile . source 
 @ @ - 55 , 11 + 55 , 11 @ @ android . libraryVariants . all { variant - > 
 description " Bundles Javadoc into zip for $ variant . name . " 
 group ' Docs ' 
 classifier = " javadoc " 
 - from tasks [ " javadoc $ { variant . name . capitalize ( ) } " ] 
 + from javadocTask 
 } 
 } 
 
 - task androidJar ( type : Jar , dependsOn : [ ' assemble ' , ' bundleJavadocRelease ' ] ) { 
 + task androidJar ( type : Jar , dependsOn : [ ' assemble ' ] ) { 
 group ' Build ' 
 description ' Generates a jar file continaining Realm and its annotation processor ' 
 from zipTree ( ' build / intermediates / bundles / release / classes . jar ' ) 
 @ @ - 156 , 10 + 156 , 8 @ @ task compileAnnotations ( type : GradleBuild ) { 
 tasks = [ ' assemble ' ] 
 } 
 
 - tasks . preBuild { 
 - dependsOn compileJni 
 - dependsOn compileAnnotations 
 - dependsOn buildApt 
 + project . afterEvaluate { 
 + preBuild . dependsOn ( [ ' compileJni ' , ' compileAnnotations ' , ' buildApt ' ] ) 
 } 
 
 def examples = [ 
 @ @ - 187 , 7 + 185 , 7 @ @ task generateDistributionExamplesBuildFiles < < { 
 } 
 } 
 
 - task populateDistributionFolder ( dependsOn : ' androidJar ' ) < < { 
 + task populateDistributionFolder ( dependsOn : [ ' androidJar ' , ' bundleJavadocRelease ' ] ) < < { 
 copy { 
 from ' . . / changelog . txt ' 
 from " build / libs / realm - $ { version } . jar " 
 @ @ - 242 , 3 + 240 , 56 @ @ task createDistributionPackage ( type : Zip ) { 
 destinationDir = new File ( " $ { rootDir } " ) 
 archiveName = " realm - java - $ { version } . zip " 
 } 
 + 
 + examples . each ( ) { src , dest - > 
 + task " distributionMonkey $ { dest } " ( type : GradleBuild ) { 
 + dependsOn createDistributionFolder 
 + dependsOn bintrayUpload 
 + dir = file ( " $ { rootDir } / distribution / $ { dest } " ) 
 + tasks = [ ' monkeyRelease ' ] 
 + } 
 + } 
 + 
 + import com . github . skhatri . s3aws . plugin . S3UploadTask 
 + 
 + / / This is an ugly hack because we have two links to the latest version . 
 + / / The right solution here would be to contribute a change to the S3 Gradle plugin 
 + / / to allow link to be a list of strings . 
 + [ ' java ' , ' android ' ] . each ( ) { link - > 
 + task " upload $ { link . capitalize ( ) } DistributionPackage " ( type : S3UploadTask ) { 
 + examples . each { src , dest - > 
 + dependsOn " distributionMonkey $ { dest } " 
 + } 
 + bucket = ' static . realm . io ' 
 + file = " $ { rootDir } / realm - java - $ { version } . zip " 
 + key = ' downloads / java / realm - java - $ { version } . zip ' 
 + link = " downloads / $ { link } / latest " 
 + } 
 + } 
 + 
 + task uploadUpdateVersion ( type : S3UploadTask ) { 
 + [ ' java ' , ' android ' ] . each ( ) { link - > 
 + dependsOn " upload $ { link . capitalize ( ) } DistributionPackage " 
 + } 
 + bucket = ' static . realm . io ' 
 + file = " $ { rootDir } / version . txt " 
 + key = ' downloads / update / java ' 
 + } 
 + 
 + task tagRepo ( type : Exec ) { 
 + dependsOn uploadUpdateVersion 
 + workingDir rootDir 
 + commandLine ' git ' , ' tag ' , ' - a ' , " v $ { version } " , ' - m ' , " v $ { version } " 
 + } 
 + 
 + task pushTag ( type : Exec ) { 
 + dependsOn tagRepo 
 + workingDir rootDir 
 + commandLine ' git ' , ' push ' , ' - - tags ' 
 + } 
 + 
 + task release { 
 + group ' Release ' 
 + description ' Release realm - java ' 
 + dependsOn pushTag 
 + } 
 \ No newline at end of file 
 diff - - git a / tools / templates / RealmAdapterExample / build . gradle b / tools / templates / RealmAdapterExample / build . gradle 
 index dd153d1 . . db868bf 100644 
 - - - a / tools / templates / RealmAdapterExample / build . gradle 
 + + + b / tools / templates / RealmAdapterExample / build . gradle 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 apply plugin : ' com . android . application ' 
 + apply plugin : ' android - command ' 
 
 android { 
 compileSdkVersion 20 
 @ @ - 17 , 6 + 18 , 10 @ @ android { 
 proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 } 
 } 
 + 
 + command { 
 + events 2000 
 + } 
 } 
 
 dependencies { 
 diff - - git a / tools / templates / RealmEncryptionExample / build . gradle b / tools / templates / RealmEncryptionExample / build . gradle 
 index e9efbce . . 98cc353 100644 
 - - - a / tools / templates / RealmEncryptionExample / build . gradle 
 + + + b / tools / templates / RealmEncryptionExample / build . gradle 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 apply plugin : ' com . android . application ' 
 + apply plugin : ' android - command ' 
 
 android { 
 compileSdkVersion 20 
 @ @ - 17 , 6 + 18 , 9 @ @ android { 
 proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 } 
 } 
 + command { 
 + events 2000 
 + } 
 } 
 
 dependencies { 
 diff - - git a / tools / templates / RealmGridViewExample / build . gradle b / tools / templates / RealmGridViewExample / build . gradle 
 index be0a2b2 . . 7dbaa96 100644 
 - - - a / tools / templates / RealmGridViewExample / build . gradle 
 + + + b / tools / templates / RealmGridViewExample / build . gradle 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 apply plugin : ' com . android . application ' 
 + apply plugin : ' android - command ' 
 
 android { 
 compileSdkVersion 20 
 @ @ - 17 , 6 + 18 , 9 @ @ android { 
 proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 } 
 } 
 + command { 
 + events 2000 
 + } 
 } 
 
 dependencies { 
 diff - - git a / tools / templates / RealmIntroExample / build . gradle b / tools / templates / RealmIntroExample / build . gradle 
 index c0b929f . . 80b5cf8 100644 
 - - - a / tools / templates / RealmIntroExample / build . gradle 
 + + + b / tools / templates / RealmIntroExample / build . gradle 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 apply plugin : ' com . android . application ' 
 + apply plugin : ' android - command ' 
 
 android { 
 compileSdkVersion 20 
 @ @ - 17 , 6 + 18 , 9 @ @ android { 
 proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 } 
 } 
 + command { 
 + events 2000 
 + } 
 } 
 
 dependencies { 
 diff - - git a / tools / templates / RealmJsonExample / build . gradle b / tools / templates / RealmJsonExample / build . gradle 
 index f4d5be7 . . c7818f7 100644 
 - - - a / tools / templates / RealmJsonExample / build . gradle 
 + + + b / tools / templates / RealmJsonExample / build . gradle 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 apply plugin : ' com . android . application ' 
 + apply plugin : ' android - command ' 
 
 android { 
 compileSdkVersion 20 
 @ @ - 17 , 6 + 18 , 9 @ @ android { 
 proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 } 
 } 
 + command { 
 + events 2000 
 + } 
 } 
 
 dependencies { 
 diff - - git a / tools / templates / RealmMigrationExample / build . gradle b / tools / templates / RealmMigrationExample / build . gradle 
 index b84d005 . . 4c89033 100644 
 - - - a / tools / templates / RealmMigrationExample / build . gradle 
 + + + b / tools / templates / RealmMigrationExample / build . gradle 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 apply plugin : ' com . android . application ' 
 + apply plugin : ' android - command ' 
 
 android { 
 compileSdkVersion 20 
 @ @ - 17 , 6 + 18 , 9 @ @ android { 
 proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 } 
 } 
 + command { 
 + events 2000 
 + } 
 } 
 
 dependencies { 
 diff - - git a / tools / templates / RealmThreadExample / build . gradle b / tools / templates / RealmThreadExample / build . gradle 
 index 6c75572 . . e2c0a19 100644 
 - - - a / tools / templates / RealmThreadExample / build . gradle 
 + + + b / tools / templates / RealmThreadExample / build . gradle 
 @ @ - 15 , 6 + 15 , 7 @ @ 
 * / 
 
 apply plugin : ' com . android . application ' 
 + apply plugin : ' android - command ' 
 
 android { 
 compileSdkVersion 21 
 @ @ - 33 , 6 + 34 , 9 @ @ android { 
 proguardFiles getDefaultProguardFile ( ' proguard - android . txt ' ) , ' proguard - rules . pro ' 
 } 
 } 
 + command { 
 + events 2000 
 + } 
 } 
 
 dependencies {
