BLEU SCORE: 0.03057230827292727

TEST MSG: removed unnecessary code
GENERATED MSG: directly copy Property object instead of copy then move

TEST DIFF (one line): diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp b / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp <nl> index 62ef7b0 . . c3a954c 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp <nl> @ @ - 75 , 27 + 75 , 3 @ @ JNIEXPORT jstring JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeGetClassName ( J <nl> <nl> return nullptr ; <nl> } <nl> - <nl> - JNIEXPORT jlongArray JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeCopyProperties ( JNIEnv * env , jclass , jlong nativePtr ) <nl> - { <nl> - TR _ ENTER _ PTR ( nativePtr ) <nl> - try { <nl> - ObjectSchema * object _ schema = reinterpret _ cast < ObjectSchema * > ( nativePtr ) ; <nl> - size _ t size = object _ schema - > persisted _ properties . size ( ) ; <nl> - jlongArray native _ ptr _ array = env - > NewLongArray ( static _ cast < jsize > ( size ) ) ; <nl> - jlong * tmp = new jlong [ size ] ; <nl> - auto it = object _ schema - > persisted _ properties . begin ( ) ; <nl> - size _ t index = 0 ; <nl> - while ( it ! = object _ schema - > persisted _ properties . end ( ) ) { <nl> - tmp [ index ] = reinterpret _ cast < jlong > ( new Property ( * it / * do not move * / ) ) ; <nl> - + + index ; <nl> - + + it ; <nl> - } <nl> - env - > SetLongArrayRegion ( native _ ptr _ array , 0 , static _ cast < jsize > ( size ) , tmp ) ; <nl> - delete tmp ; <nl> - return native _ ptr _ array ; <nl> - } <nl> - CATCH _ STD ( ) <nl> - <nl> - return nullptr ; <nl> - } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> index 4a729e3 . . 1375b5d 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> @ @ - 38 , 10 + 38 , 6 @ @ class OsRealmObjectSchema extends RealmObjectSchema { <nl> <nl> @ Override <nl> public void close ( ) { <nl> - Set < Property > properties = copyProperties ( ) ; <nl> - for ( Property property : properties ) { <nl> - property . close ( ) ; <nl> - } <nl> nativeClose ( nativePtr ) ; <nl> } <nl> <nl> @ @ - 191 , 21 + 187 , 10 @ @ class OsRealmObjectSchema extends RealmObjectSchema { <nl> return nativePtr ; <nl> } <nl> <nl> - private Set < Property > copyProperties ( ) { <nl> - long [ ] ptrs = nativeCopyProperties ( nativePtr ) ; <nl> - Set < Property > properties = new LinkedHashSet < > ( ptrs . length ) ; <nl> - for ( int i = 0 ; i < ptrs . length ; i + + ) { <nl> - properties . add ( new Property ( ptrs [ i ] ) ) ; <nl> - } <nl> - return properties ; <nl> - } <nl> - <nl> static native long nativeCreateRealmObjectSchema ( String className ) ; <nl> <nl> static native void nativeAddProperty ( long nativePtr , long nativePropertyPtr ) ; <nl> <nl> - static native long [ ] nativeCopyProperties ( long nativePtr ) ; <nl> - <nl> static native void nativeClose ( long nativePtr ) ; <nl> <nl> static native String nativeGetClassName ( long nativePtr ) ;
NEAREST DIFF (one line): diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp b / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp <nl> index bbbcbe2 . . 62ef7b0 100644 <nl> - - - a / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp <nl> + + + b / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp <nl> @ @ - 76 , 7 + 76 , 7 @ @ JNIEXPORT jstring JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeGetClassName ( J <nl> return nullptr ; <nl> } <nl> <nl> - JNIEXPORT jlongArray JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeGetProperties ( JNIEnv * env , jclass , jlong nativePtr ) <nl> + JNIEXPORT jlongArray JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeCopyProperties ( JNIEnv * env , jclass , jlong nativePtr ) <nl> { <nl> TR _ ENTER _ PTR ( nativePtr ) <nl> try { <nl> @ @ - 87 , 8 + 87 , 7 @ @ JNIEXPORT jlongArray JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeGetProperti <nl> auto it = object _ schema - > persisted _ properties . begin ( ) ; <nl> size _ t index = 0 ; <nl> while ( it ! = object _ schema - > persisted _ properties . end ( ) ) { <nl> - Property property = * it ; <nl> - tmp [ index ] = reinterpret _ cast < jlong > ( new Property ( std : : move ( property ) ) ) ; <nl> + tmp [ index ] = reinterpret _ cast < jlong > ( new Property ( * it / * do not move * / ) ) ; <nl> + + index ; <nl> + + it ; <nl> } <nl> diff - - git a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> index 4cce7b0 . . 4a729e3 100644 <nl> - - - a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> + + + b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java <nl> @ @ - 38 , 7 + 38 , 7 @ @ class OsRealmObjectSchema extends RealmObjectSchema { <nl> <nl> @ Override <nl> public void close ( ) { <nl> - Set < Property > properties = getProperties ( ) ; <nl> + Set < Property > properties = copyProperties ( ) ; <nl> for ( Property property : properties ) { <nl> property . close ( ) ; <nl> } <nl> @ @ - 191 , 8 + 191 , 8 @ @ class OsRealmObjectSchema extends RealmObjectSchema { <nl> return nativePtr ; <nl> } <nl> <nl> - private Set < Property > getProperties ( ) { <nl> - long [ ] ptrs = nativeGetProperties ( nativePtr ) ; <nl> + private Set < Property > copyProperties ( ) { <nl> + long [ ] ptrs = nativeCopyProperties ( nativePtr ) ; <nl> Set < Property > properties = new LinkedHashSet < > ( ptrs . length ) ; <nl> for ( int i = 0 ; i < ptrs . length ; i + + ) { <nl> properties . add ( new Property ( ptrs [ i ] ) ) ; <nl> @ @ - 204 , 7 + 204 , 7 @ @ class OsRealmObjectSchema extends RealmObjectSchema { <nl> <nl> static native void nativeAddProperty ( long nativePtr , long nativePropertyPtr ) ; <nl> <nl> - static native long [ ] nativeGetProperties ( long nativePtr ) ; <nl> + static native long [ ] nativeCopyProperties ( long nativePtr ) ; <nl> <nl> static native void nativeClose ( long nativePtr ) ; <nl>

TEST DIFF:
diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp b / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp 
 index 62ef7b0 . . c3a954c 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp 
 @ @ - 75 , 27 + 75 , 3 @ @ JNIEXPORT jstring JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeGetClassName ( J 
 
 return nullptr ; 
 } 
 - 
 - JNIEXPORT jlongArray JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeCopyProperties ( JNIEnv * env , jclass , jlong nativePtr ) 
 - { 
 - TR _ ENTER _ PTR ( nativePtr ) 
 - try { 
 - ObjectSchema * object _ schema = reinterpret _ cast < ObjectSchema * > ( nativePtr ) ; 
 - size _ t size = object _ schema - > persisted _ properties . size ( ) ; 
 - jlongArray native _ ptr _ array = env - > NewLongArray ( static _ cast < jsize > ( size ) ) ; 
 - jlong * tmp = new jlong [ size ] ; 
 - auto it = object _ schema - > persisted _ properties . begin ( ) ; 
 - size _ t index = 0 ; 
 - while ( it ! = object _ schema - > persisted _ properties . end ( ) ) { 
 - tmp [ index ] = reinterpret _ cast < jlong > ( new Property ( * it / * do not move * / ) ) ; 
 - + + index ; 
 - + + it ; 
 - } 
 - env - > SetLongArrayRegion ( native _ ptr _ array , 0 , static _ cast < jsize > ( size ) , tmp ) ; 
 - delete tmp ; 
 - return native _ ptr _ array ; 
 - } 
 - CATCH _ STD ( ) 
 - 
 - return nullptr ; 
 - } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 index 4a729e3 . . 1375b5d 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 + + + b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 @ @ - 38 , 10 + 38 , 6 @ @ class OsRealmObjectSchema extends RealmObjectSchema { 
 
 @ Override 
 public void close ( ) { 
 - Set < Property > properties = copyProperties ( ) ; 
 - for ( Property property : properties ) { 
 - property . close ( ) ; 
 - } 
 nativeClose ( nativePtr ) ; 
 } 
 
 @ @ - 191 , 21 + 187 , 10 @ @ class OsRealmObjectSchema extends RealmObjectSchema { 
 return nativePtr ; 
 } 
 
 - private Set < Property > copyProperties ( ) { 
 - long [ ] ptrs = nativeCopyProperties ( nativePtr ) ; 
 - Set < Property > properties = new LinkedHashSet < > ( ptrs . length ) ; 
 - for ( int i = 0 ; i < ptrs . length ; i + + ) { 
 - properties . add ( new Property ( ptrs [ i ] ) ) ; 
 - } 
 - return properties ; 
 - } 
 - 
 static native long nativeCreateRealmObjectSchema ( String className ) ; 
 
 static native void nativeAddProperty ( long nativePtr , long nativePropertyPtr ) ; 
 
 - static native long [ ] nativeCopyProperties ( long nativePtr ) ; 
 - 
 static native void nativeClose ( long nativePtr ) ; 
 
 static native String nativeGetClassName ( long nativePtr ) ;

NEAREST DIFF:
diff - - git a / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp b / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp 
 index bbbcbe2 . . 62ef7b0 100644 
 - - - a / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp 
 + + + b / realm / realm - library / src / main / cpp / io _ realm _ OsRealmObjectSchema . cpp 
 @ @ - 76 , 7 + 76 , 7 @ @ JNIEXPORT jstring JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeGetClassName ( J 
 return nullptr ; 
 } 
 
 - JNIEXPORT jlongArray JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeGetProperties ( JNIEnv * env , jclass , jlong nativePtr ) 
 + JNIEXPORT jlongArray JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeCopyProperties ( JNIEnv * env , jclass , jlong nativePtr ) 
 { 
 TR _ ENTER _ PTR ( nativePtr ) 
 try { 
 @ @ - 87 , 8 + 87 , 7 @ @ JNIEXPORT jlongArray JNICALL Java _ io _ realm _ OsRealmObjectSchema _ nativeGetProperti 
 auto it = object _ schema - > persisted _ properties . begin ( ) ; 
 size _ t index = 0 ; 
 while ( it ! = object _ schema - > persisted _ properties . end ( ) ) { 
 - Property property = * it ; 
 - tmp [ index ] = reinterpret _ cast < jlong > ( new Property ( std : : move ( property ) ) ) ; 
 + tmp [ index ] = reinterpret _ cast < jlong > ( new Property ( * it / * do not move * / ) ) ; 
 + + index ; 
 + + it ; 
 } 
 diff - - git a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 index 4cce7b0 . . 4a729e3 100644 
 - - - a / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 + + + b / realm / realm - library / src / main / java / io / realm / OsRealmObjectSchema . java 
 @ @ - 38 , 7 + 38 , 7 @ @ class OsRealmObjectSchema extends RealmObjectSchema { 
 
 @ Override 
 public void close ( ) { 
 - Set < Property > properties = getProperties ( ) ; 
 + Set < Property > properties = copyProperties ( ) ; 
 for ( Property property : properties ) { 
 property . close ( ) ; 
 } 
 @ @ - 191 , 8 + 191 , 8 @ @ class OsRealmObjectSchema extends RealmObjectSchema { 
 return nativePtr ; 
 } 
 
 - private Set < Property > getProperties ( ) { 
 - long [ ] ptrs = nativeGetProperties ( nativePtr ) ; 
 + private Set < Property > copyProperties ( ) { 
 + long [ ] ptrs = nativeCopyProperties ( nativePtr ) ; 
 Set < Property > properties = new LinkedHashSet < > ( ptrs . length ) ; 
 for ( int i = 0 ; i < ptrs . length ; i + + ) { 
 properties . add ( new Property ( ptrs [ i ] ) ) ; 
 @ @ - 204 , 7 + 204 , 7 @ @ class OsRealmObjectSchema extends RealmObjectSchema { 
 
 static native void nativeAddProperty ( long nativePtr , long nativePropertyPtr ) ; 
 
 - static native long [ ] nativeGetProperties ( long nativePtr ) ; 
 + static native long [ ] nativeCopyProperties ( long nativePtr ) ; 
 
 static native void nativeClose ( long nativePtr ) ; 

