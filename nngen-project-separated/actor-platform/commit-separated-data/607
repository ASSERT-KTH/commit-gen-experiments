BLEU SCORE: 0.11390778025531022

TEST MSG: refactor ( server ) : dont report about successful google push delivery
GENERATED MSG: fix ( server : push ) : fixed successful delivery report

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > index 9845158 . . f0b2157 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > @ @ - 88 , 17 + 88 , 15 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { < nl > case Xor . Right ( json ) ⇒ < nl > json . asObject match { < nl > case Some ( obj ) ⇒ < nl > - obj ( " error " ) flatMap ( _ . asString ) match { < nl > - case Some ( " InvalidRegistration " ) ⇒ < nl > + obj ( " error " ) flatMap ( _ . asString ) foreach { < nl > + case " InvalidRegistration " ⇒ < nl > log . warning ( " Invalid registration , deleting " ) < nl > remove ( delivery . m . to ) < nl > - case Some ( " NotRegistered " ) ⇒ < nl > + case " NotRegistered " ⇒ < nl > log . warning ( " Token is not registered , deleting " ) < nl > remove ( delivery . m . to ) < nl > - case Some ( other ) ⇒ < nl > + case other ⇒ < nl > log . warning ( " Error in GCM response : { } " , other ) < nl > - case None ⇒ < nl > - log . debug ( " Delivered successfully " ) < nl > } < nl > case None ⇒ < nl > log . error ( " Expected JSON Object but got : { } " , json )
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > index 62c59a6 . . 6283f80 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > @ @ - 88 , 7 + 88 , 7 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { < nl > case Xor . Right ( json ) ⇒ < nl > json . asObject match { < nl > case Some ( obj ) ⇒ < nl > - obj ( " error " ) map ( _ . asString ) foreach { < nl > + obj ( " error " ) flatMap ( _ . asString ) match { < nl > case Some ( " InvalidRegistration " ) ⇒ < nl > log . warning ( " Invalid registration , deleting " ) < nl > remove ( delivery . m . to )

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 index 9845158 . . f0b2157 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 @ @ - 88 , 17 + 88 , 15 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { 
 case Xor . Right ( json ) ⇒ 
 json . asObject match { 
 case Some ( obj ) ⇒ 
 - obj ( " error " ) flatMap ( _ . asString ) match { 
 - case Some ( " InvalidRegistration " ) ⇒ 
 + obj ( " error " ) flatMap ( _ . asString ) foreach { 
 + case " InvalidRegistration " ⇒ 
 log . warning ( " Invalid registration , deleting " ) 
 remove ( delivery . m . to ) 
 - case Some ( " NotRegistered " ) ⇒ 
 + case " NotRegistered " ⇒ 
 log . warning ( " Token is not registered , deleting " ) 
 remove ( delivery . m . to ) 
 - case Some ( other ) ⇒ 
 + case other ⇒ 
 log . warning ( " Error in GCM response : { } " , other ) 
 - case None ⇒ 
 - log . debug ( " Delivered successfully " ) 
 } 
 case None ⇒ 
 log . error ( " Expected JSON Object but got : { } " , json )

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 index 62c59a6 . . 6283f80 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 @ @ - 88 , 7 + 88 , 7 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { 
 case Xor . Right ( json ) ⇒ 
 json . asObject match { 
 case Some ( obj ) ⇒ 
 - obj ( " error " ) map ( _ . asString ) foreach { 
 + obj ( " error " ) flatMap ( _ . asString ) match { 
 case Some ( " InvalidRegistration " ) ⇒ 
 log . warning ( " Invalid registration , deleting " ) 
 remove ( delivery . m . to )
