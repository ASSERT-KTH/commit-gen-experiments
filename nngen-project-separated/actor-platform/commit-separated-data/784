BLEU SCORE: 0.5031747626530138

TEST MSG: fix ( server : webrtc ) : fixed call ending if one participant left
GENERATED MSG: fix ( server : webrtc ) : end call if one device left

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala < nl > index 87c256b . . 5096cc9 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala < nl > @ @ - 128 , 7 + 128 , 7 @ @ private trait Members { < nl > val ringing = members . values . filter ( _ . state = = MemberStates . Ringing ) < nl > val joined = members . values . filter ( _ . isJoined ) < nl > < nl > - joined . isEmpty & & ringing . isEmpty < nl > + joined . size < = 1 & & ringing . isEmpty < nl > } < nl > }
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala < nl > index 4db9bdf . . 5870282 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala < nl > @ @ - 281 , 6 + 281 , 7 @ @ private final class WebrtcCallActor extends ActorStashing with ActorLogging { < nl > putParticipant ( userId , ApiCallMemberState . ENDED ) < nl > broadcastSyncedSet ( ) < nl > } < nl > + if ( devices . size = = 1 ) end ( ) < nl > case EventBus . Disposed ( _ ) ⇒ < nl > end ( ) < nl > deleteSyncedSet ( )

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala 
 index 87c256b . . 5096cc9 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala 
 @ @ - 128 , 7 + 128 , 7 @ @ private trait Members { 
 val ringing = members . values . filter ( _ . state = = MemberStates . Ringing ) 
 val joined = members . values . filter ( _ . isJoined ) 
 
 - joined . isEmpty & & ringing . isEmpty 
 + joined . size < = 1 & & ringing . isEmpty 
 } 
 }

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala 
 index 4db9bdf . . 5870282 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / webrtc / WebrtcCallActor . scala 
 @ @ - 281 , 6 + 281 , 7 @ @ private final class WebrtcCallActor extends ActorStashing with ActorLogging { 
 putParticipant ( userId , ApiCallMemberState . ENDED ) 
 broadcastSyncedSet ( ) 
 } 
 + if ( devices . size = = 1 ) end ( ) 
 case EventBus . Disposed ( _ ) ⇒ 
 end ( ) 
 deleteSyncedSet ( )
