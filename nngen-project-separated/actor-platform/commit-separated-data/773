BLEU SCORE: 0.09578464408619825

TEST MSG: fix ( server : sequence ) : put current user to difference
GENERATED MSG: refactor ( server ) : reformat

TEST DIFF (one line): diff - - git a / actor - server / actor - rpc - api / src / main / scala / im / actor / server / api / rpc / service / sequence / SequenceServiceImpl . scala b / actor - server / actor - rpc - api / src / main / scala / im / actor / server / api / rpc / service / sequence / SequenceServiceImpl . scala < nl > index 28c523d . . fe3ebbf 100644 < nl > - - - a / actor - server / actor - rpc - api / src / main / scala / im / actor / server / api / rpc / service / sequence / SequenceServiceImpl . scala < nl > + + + b / actor - server / actor - rpc - api / src / main / scala / im / actor / server / api / rpc / service / sequence / SequenceServiceImpl . scala < nl > @ @ - 69 , 7 + 69 , 7 @ @ final class SequenceServiceImpl ( config : SequenceServiceConfig ) ( < nl > / / FIXME : would new updates between getSeqState and getDifference break client state ? < nl > ( updates , needMore ) ← seqUpdExt . getDifference ( client . userId , seq + seqDelta , client . authSid , maxDifferenceSize ) < nl > ( diffUpdates , userIds , groupIds ) = extractDiff ( updates ) < nl > - ( users , groups ) ← getUsersGroups ( userIds , groupIds , optimizations ) < nl > + ( users , groups ) ← getUsersGroups ( userIds + client . userId , groupIds , optimizations ) < nl > < nl > ( userRefs , groupRefs ) ← getRefs ( userIds , groupIds , optimizations , client ) < nl > } yield {
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / group / GroupProcessor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / group / GroupProcessor . scala < nl > index 95a9db6 . . b8158b2 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / group / GroupProcessor . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / group / GroupProcessor . scala < nl > @ @ - 93 , 8 + 93 , 8 @ @ object GroupProcessor { < nl > 21009 → classOf [ GroupQueries . IsPublic ] , < nl > 21010 → classOf [ GroupQueries . IsPublicResponse ] , < nl > 21011 → classOf [ GroupQueries . GetIntegrationTokenInternal ] , < nl > - 21012 - > classOf [ GroupQueries . GetAccessHash ] , < nl > - 21013 - > classOf [ GroupQueries . GetAccessHashResponse ] , < nl > + 21012 → classOf [ GroupQueries . GetAccessHash ] , < nl > + 21013 → classOf [ GroupQueries . GetAccessHashResponse ] , < nl > < nl > 22003 → classOf [ GroupEvents . UserInvited ] , < nl > 22004 → classOf [ GroupEvents . UserJoined ] ,

TEST DIFF:
diff - - git a / actor - server / actor - rpc - api / src / main / scala / im / actor / server / api / rpc / service / sequence / SequenceServiceImpl . scala b / actor - server / actor - rpc - api / src / main / scala / im / actor / server / api / rpc / service / sequence / SequenceServiceImpl . scala 
 index 28c523d . . fe3ebbf 100644 
 - - - a / actor - server / actor - rpc - api / src / main / scala / im / actor / server / api / rpc / service / sequence / SequenceServiceImpl . scala 
 + + + b / actor - server / actor - rpc - api / src / main / scala / im / actor / server / api / rpc / service / sequence / SequenceServiceImpl . scala 
 @ @ - 69 , 7 + 69 , 7 @ @ final class SequenceServiceImpl ( config : SequenceServiceConfig ) ( 
 / / FIXME : would new updates between getSeqState and getDifference break client state ? 
 ( updates , needMore ) ← seqUpdExt . getDifference ( client . userId , seq + seqDelta , client . authSid , maxDifferenceSize ) 
 ( diffUpdates , userIds , groupIds ) = extractDiff ( updates ) 
 - ( users , groups ) ← getUsersGroups ( userIds , groupIds , optimizations ) 
 + ( users , groups ) ← getUsersGroups ( userIds + client . userId , groupIds , optimizations ) 
 
 ( userRefs , groupRefs ) ← getRefs ( userIds , groupIds , optimizations , client ) 
 } yield {

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / group / GroupProcessor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / group / GroupProcessor . scala 
 index 95a9db6 . . b8158b2 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / group / GroupProcessor . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / group / GroupProcessor . scala 
 @ @ - 93 , 8 + 93 , 8 @ @ object GroupProcessor { 
 21009 → classOf [ GroupQueries . IsPublic ] , 
 21010 → classOf [ GroupQueries . IsPublicResponse ] , 
 21011 → classOf [ GroupQueries . GetIntegrationTokenInternal ] , 
 - 21012 - > classOf [ GroupQueries . GetAccessHash ] , 
 - 21013 - > classOf [ GroupQueries . GetAccessHashResponse ] , 
 + 21012 → classOf [ GroupQueries . GetAccessHash ] , 
 + 21013 → classOf [ GroupQueries . GetAccessHashResponse ] , 
 
 22003 → classOf [ GroupEvents . UserInvited ] , 
 22004 → classOf [ GroupEvents . UserJoined ] ,
