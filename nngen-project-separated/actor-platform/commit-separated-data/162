BLEU SCORE: 0.020980574531482755

TEST MSG: feat ( android ) : members fragment load all members
GENERATED MSG: Merge commit ' 38f34b306a02a3f49f7f937eb5d33aacab3a4e26 ' into calls / v2

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > index 17182b0 . . 9cedd34 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > @ @ - 275 , 7 + 275 , 7 @ @ public class GroupInfoFragment extends BaseFragment { < nl > / / Members < nl > / / < nl > < nl > - groupUserAdapter = new MembersAdapter ( getActivity ( ) ) ; < nl > + groupUserAdapter = new MembersAdapter ( getActivity ( ) , getArguments ( ) . getInt ( " groupId " ) ) ; < nl > bind ( groupVM . getIsAsyncMembers ( ) , groupVM . getMembers ( ) , ( isAsyncMembers , valueModel , memberList , valueModel2 ) - > { < nl > if ( isAsyncMembers ) { < nl > groupUserAdapter . setMembers ( new ArrayList < > ( ) ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / MembersFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / MembersFragment . java < nl > index 8e47223 . . f767550 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / MembersFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / MembersFragment . java < nl > @ @ - 13 , 6 + 13 , 7 @ @ import im . actor . core . entity . GroupMember ; < nl > import im . actor . sdk . R ; < nl > import im . actor . sdk . controllers . BaseFragment ; < nl > import im . actor . sdk . controllers . group . view . MembersAdapter ; < nl > + import im . actor . sdk . view . adapters . RecyclerListView ; < nl > < nl > import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > < nl > @ @ - 26 , 12 + 27 , 6 @ @ public class MembersFragment extends BaseFragment { < nl > return res ; < nl > } < nl > < nl > - private static final int LIMIT = 20 ; < nl > - < nl > - private int groupId ; < nl > - private boolean isInitiallyLoaded ; < nl > - private byte [ ] nextMembers ; < nl > - private ArrayList < Integer > members = new ArrayList < > ( ) ; < nl > private MembersAdapter adapter ; < nl > < nl > public MembersFragment ( ) { < nl > @ @ - 41 , 20 + 36 , 13 @ @ public class MembersFragment extends BaseFragment { < nl > setShowHome ( true ) ; < nl > } < nl > < nl > - @ Override < nl > - public void onCreate ( Bundle saveInstance ) { < nl > - super . onCreate ( saveInstance ) ; < nl > - < nl > - groupId = getArguments ( ) . getInt ( " groupId " ) ; < nl > - } < nl > - < nl > @ Nullable < nl > @ Override < nl > public View onCreateView ( LayoutInflater inflater , @ Nullable ViewGroup container , @ Nullable Bundle savedInstanceState ) { < nl > View res = inflater . inflate ( R . layout . fragment _ members , container , false ) ; < nl > - adapter = new MembersAdapter ( getContext ( ) ) ; < nl > + adapter = new MembersAdapter ( getContext ( ) , getArguments ( ) . getInt ( " groupId " ) ) ; < nl > < nl > - ( ( ListView ) res . findViewById ( R . id . items ) ) . setAdapter ( adapter ) ; < nl > + ( ( RecyclerListView ) res . findViewById ( R . id . items ) ) . setAdapter ( adapter ) ; < nl > < nl > return res ; < nl > } < nl > @ @ - 62 , 17 + 50 , 6 @ @ public class MembersFragment extends BaseFragment { < nl > @ Override < nl > public void onResume ( ) { < nl > super . onResume ( ) ; < nl > - if ( ! isInitiallyLoaded ) { < nl > - wrap ( messenger ( ) . loadMembers ( groupId , LIMIT , nextMembers ) ) . then ( groupMembersSlice - > { < nl > - isInitiallyLoaded = true ; < nl > - members . addAll ( groupMembersSlice . getUids ( ) ) ; < nl > - nextMembers = groupMembersSlice . getNext ( ) ; < nl > - ArrayList < GroupMember > nMembers = new ArrayList < > ( ) ; < nl > - for ( Integer uid : members ) { < nl > - nMembers . add ( new GroupMember ( uid , 0 , 0 , false ) ) ; < nl > - } < nl > - adapter . setMembers ( nMembers , false ) ; < nl > - } ) ; < nl > - } < nl > + adapter . initLoad ( ) ; < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java < nl > index 6697651 . . 013996b 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java < nl > @ @ - 6 , 9 + 6 , 9 @ @ import android . view . View ; < nl > import android . view . ViewGroup ; < nl > import android . widget . TextView ; < nl > < nl > + import java . util . ArrayList ; < nl > import java . util . Arrays ; < nl > import java . util . Collection ; < nl > - import java . util . Comparator ; < nl > < nl > import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . R ; < nl > @ @ - 20 , 15 + 20 , 21 @ @ import im . actor . sdk . view . adapters . ViewHolder ; < nl > import im . actor . core . entity . GroupMember ; < nl > import im . actor . core . viewmodel . UserVM ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > import static im . actor . sdk . util . ActorSDKMessenger . users ; < nl > < nl > public class MembersAdapter extends HolderAdapter < GroupMember > { < nl > < nl > - private GroupMember [ ] members = new GroupMember [ 0 ] ; < nl > + public static final int LOAD _ GAP = 10 ; < nl > + private static final int LIMIT = 20 ; < nl > + private ArrayList < GroupMember > members = new ArrayList < GroupMember > ( ) ; < nl > private ActorBinder BINDER = new ActorBinder ( ) ; < nl > + private boolean loadInProgress = false ; < nl > + private boolean loaddedToEnd = false ; < nl > < nl > - public MembersAdapter ( Context context ) { < nl > + public MembersAdapter ( Context context , int groupId ) { < nl > super ( context ) ; < nl > + this . groupId = groupId ; < nl > } < nl > < nl > public void setMembers ( Collection < GroupMember > members ) { < nl > @ @ - 36 , 9 + 42 , 9 @ @ public class MembersAdapter extends HolderAdapter < GroupMember > { < nl > } < nl > < nl > public void setMembers ( Collection < GroupMember > members , boolean sort ) { < nl > - this . members = members . toArray ( new GroupMember [ members . size ( ) ] ) ; < nl > if ( sort ) { < nl > - Arrays . sort ( this . members , ( a , b ) - > { < nl > + GroupMember [ ] membersArray = members . toArray ( new GroupMember [ members . size ( ) ] ) ; < nl > + Arrays . sort ( membersArray , ( a , b ) - > { < nl > if ( a . isAdministrator ( ) & & ! b . isAdministrator ( ) ) { < nl > return - 1 ; < nl > } < nl > @ @ - 49 , 23 + 55 , 65 @ @ public class MembersAdapter extends HolderAdapter < GroupMember > { < nl > String bn = users ( ) . get ( b . getInviterUid ( ) ) . getName ( ) . get ( ) ; < nl > return an . compareTo ( bn ) ; < nl > } ) ; < nl > + this . members . addAll ( Arrays . asList ( membersArray ) ) ; < nl > + } else { < nl > + this . members . addAll ( members ) ; < nl > + } < nl > + notifyDataSetChanged ( ) ; < nl > + } < nl > + < nl > + @ Override < nl > + protected void onBindViewHolder ( ViewHolder < GroupMember > holder , GroupMember obj , int position , Context context ) { < nl > + super . onBindViewHolder ( holder , obj , position , context ) ; < nl > + if ( position > = getCount ( ) - LOAD _ GAP ) { < nl > + loadMore ( ) ; < nl > + } < nl > + < nl > + } < nl > + < nl > + private int groupId ; < nl > + private boolean isInitiallyLoaded ; < nl > + private byte [ ] nextMembers ; < nl > + private ArrayList < Integer > rawMembers = new ArrayList < > ( ) ; < nl > + < nl > + public void initLoad ( ) { < nl > + if ( ! isInitiallyLoaded ) { < nl > + loadMore ( ) ; < nl > + } < nl > + } < nl > + < nl > + private void loadMore ( ) { < nl > + if ( ! loadInProgress & & ! loaddedToEnd ) { < nl > + loadInProgress = true ; < nl > + messenger ( ) . loadMembers ( groupId , LIMIT , nextMembers ) . then ( groupMembersSlice - > { < nl > + isInitiallyLoaded = true ; < nl > + rawMembers . clear ( ) ; < nl > + rawMembers . addAll ( groupMembersSlice . getUids ( ) ) ; < nl > + nextMembers = groupMembersSlice . getNext ( ) ; < nl > + loaddedToEnd = nextMembers = = null ; < nl > + ArrayList < GroupMember > nMembers = new ArrayList < > ( ) ; < nl > + for ( Integer uid : rawMembers ) { < nl > + nMembers . add ( new GroupMember ( uid , 0 , 0 , false ) ) ; < nl > + } < nl > + loadInProgress = false ; < nl > + setMembers ( nMembers , false ) ; < nl > + } ) ; < nl > } < nl > - notifyDataSetInvalidated ( ) ; < nl > } < nl > < nl > @ Override < nl > public int getCount ( ) { < nl > - return members . length ; < nl > + return members . size ( ) ; < nl > } < nl > < nl > @ Override < nl > public GroupMember getItem ( int position ) { < nl > - return members [ position ] ; < nl > + return members . get ( position ) ; < nl > } < nl > < nl > @ Override < nl > public long getItemId ( int position ) { < nl > - return members [ position ] . getUid ( ) ; < nl > + return members . get ( position ) . getUid ( ) ; < nl > } < nl > < nl > @ Override < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ members . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ members . xml < nl > index 745d3b0 . . dc3773c 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ members . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ members . xml < nl > @ @ - 3 , 7 + 3 , 7 @ @ < nl > android : layout _ width = " match _ parent " < nl > android : layout _ height = " match _ parent " > < nl > < nl > - < ListView < nl > + < im . actor . sdk . view . adapters . RecyclerListView < nl > android : id = " @ + id / items " < nl > android : layout _ width = " match _ parent " < nl > android : layout _ height = " match _ parent " / > < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / PeerSearchEntity . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / PeerSearchEntity . java < nl > index 53e6fed . . 91ab8db 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / PeerSearchEntity . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / PeerSearchEntity . java < nl > @ @ - 3 , 55 + 3 , 18 @ @ package im . actor . core . entity ; < nl > public class PeerSearchEntity { < nl > < nl > private Peer peer ; < nl > - private String title ; < nl > - private String description ; < nl > - private Integer membersCount ; < nl > - private Long date ; < nl > - private Integer creatorUid ; < nl > - private Boolean isPublic ; < nl > - private Boolean isJoined ; < nl > + private String optMatchString ; < nl > < nl > - public PeerSearchEntity ( Peer peer , String title , String description , Integer membersCount , < nl > - Long date , Integer creatorUid , Boolean isPublic , Boolean isJoined ) { < nl > + public PeerSearchEntity ( Peer peer , String optMatchString ) { < nl > this . peer = peer ; < nl > - this . title = title ; < nl > - this . description = description ; < nl > - this . membersCount = membersCount ; < nl > - this . date = date ; < nl > - this . creatorUid = creatorUid ; < nl > - this . isPublic = isPublic ; < nl > - this . isJoined = isJoined ; < nl > + this . optMatchString = optMatchString ; < nl > } < nl > < nl > public Peer getPeer ( ) { < nl > return peer ; < nl > } < nl > < nl > - public String getTitle ( ) { < nl > - return title ; < nl > - } < nl > - < nl > - public String getDescription ( ) { < nl > - return description ; < nl > - } < nl > - < nl > - public Integer getMembersCount ( ) { < nl > - return membersCount ; < nl > - } < nl > - < nl > - public Long getDate ( ) { < nl > - return date ; < nl > - } < nl > - < nl > - public Integer getCreatorUid ( ) { < nl > - return creatorUid ; < nl > - } < nl > - < nl > - public Boolean isPublic ( ) { < nl > - return isPublic ; < nl > - } < nl > - < nl > - public Boolean isJoined ( ) { < nl > - return isJoined ; < nl > + public String getOptMatchString ( ) { < nl > + return optMatchString ; < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java < nl > index face319 . . d0d11c3 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java < nl > @ @ - 119 , 9 + 119 , 7 @ @ public class SearchModule extends AbsModule { < nl > responsePeerSearch . getGroups ( ) ) ) < nl > . map ( responsePeerSearch1 - > < nl > ManagedList . of ( responsePeerSearch1 . getSearchResults ( ) ) < nl > - . map ( r - > new PeerSearchEntity ( convert ( r . getPeer ( ) ) , r . getTitle ( ) , < nl > - r . getDescription ( ) , r . getMembersCount ( ) , r . getDateCreated ( ) , < nl > - r . getCreator ( ) , r . isPublic ( ) , r . isJoined ( ) ) ) ) ; < nl > + . map ( r - > new PeerSearchEntity ( convert ( r . getPeer ( ) ) , r . getOptMatchString ( ) ) ) ) ; < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / AudioActorEx . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / AudioActorEx . java < nl > index 1a5bdbd . . ab63452 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / AudioActorEx . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / AudioActorEx . java < nl > @ @ - 33 , 7 + 33 , 7 @ @ public class AudioActorEx extends AndroidPlayerActor { < nl > < nl > mplayer = new MediaPlayer ( ) ; < nl > mplayer . setAudioStreamType ( AudioManager . STREAM _ VOICE _ CALL ) ; < nl > - / / mplayer . setDataSource ( context , Uri . parse ( " android . resource : / / " + context . getPackageName ( ) + " / " + R . raw . tone ) ) ; < nl > + mplayer . setDataSource ( context , Uri . parse ( " android . resource : / / " + context . getPackageName ( ) + " / " + R . raw . tone ) ) ; < nl > mplayer . prepare ( ) ; < nl > mplayer . setLooping ( true ) ; < nl > mplayer . start ( ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java < nl > index dc07f04 . . fa9298f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java < nl > @ @ - 64 , 7 + 64 , 6 @ @ public class CallFragment extends BaseFragment { < nl > private Vibrator v ; < nl > private View answerContainer ; < nl > private Ringtone ringtone ; < nl > - private ActorRef toneActor ; < nl > private CallVM call ; < nl > private ActorRef timer ; < nl > private TextView timerTV ; < nl > @ @ - 160 , 7 + 159 , 7 @ @ public class CallFragment extends BaseFragment { < nl > initIncoming ( ) ; < nl > break ; < nl > case CALLING _ OUTGOING : < nl > - / / onConnecting ( ) ; < nl > + onConnecting ( ) ; < nl > break ; < nl > } < nl > } < nl > @ @ - 237 , 7 + 236 , 7 @ @ public class CallFragment extends BaseFragment { < nl > < nl > private void onAnswer ( ) { < nl > < nl > - / / onConnecting ( ) ; < nl > + onConnecting ( ) ; < nl > answerContainer . setVisibility ( View . INVISIBLE ) ; < nl > if ( ringtone ! = null ) { < nl > ringtone . stop ( ) ; < nl > @ @ - 261 , 64 + 260 , 6 @ @ public class CallFragment extends BaseFragment { < nl > < nl > < nl > public void onConnecting ( ) { < nl > - if ( toneActor = = null ) { < nl > - toneActor = ActorSystem . system ( ) . actorOf ( Props . create ( new ActorCreator ( ) { < nl > - @ Override < nl > - public AudioActorEx create ( ) { < nl > - return new AudioActorEx ( getActivity ( ) , new AudioPlayerActor . AudioPlayerCallback ( ) { < nl > - @ Override < nl > - public void onStart ( String fileName ) { < nl > - < nl > - } < nl > - < nl > - @ Override < nl > - public void onStop ( String fileName ) { < nl > - < nl > - } < nl > - < nl > - @ Override < nl > - public void onPause ( String fileName , float progress ) { < nl > - < nl > - } < nl > - < nl > - @ Override < nl > - public void onProgress ( String fileName , float progress ) { < nl > - < nl > - } < nl > - < nl > - @ Override < nl > - public void onError ( String fileName ) { < nl > - < nl > - } < nl > - } ) ; < nl > - } < nl > - } ) , " actor / android _ tone " ) ; < nl > - } < nl > - < nl > - toneActor . send ( new AndroidPlayerActor . Play ( " " ) ) ; < nl > - < nl > - < nl > - vibrate = true ; < nl > - new Thread ( new Runnable ( ) { < nl > - @ Override < nl > - public void run ( ) { < nl > - while ( vibrate ) { < nl > - try { < nl > - v . vibrate ( 10 ) ; < nl > - Thread . sleep ( 5 ) ; < nl > - v . vibrate ( 10 ) ; < nl > - Thread . sleep ( 200 ) ; < nl > - v . vibrate ( 10 ) ; < nl > - Thread . sleep ( 5 ) ; < nl > - v . vibrate ( 10 ) ; < nl > - Thread . sleep ( 600 ) ; < nl > - } catch ( InterruptedException e ) { < nl > - e . printStackTrace ( ) ; < nl > - } < nl > - } < nl > - } < nl > - } ) . start ( ) ; < nl > - < nl > powerManager = ( PowerManager ) getActivity ( ) . getSystemService ( Context . POWER _ SERVICE ) ; < nl > wakeLock = powerManager . newWakeLock ( field , getActivity ( ) . getLocalClassName ( ) ) ; < nl > < nl > @ @ - 329 , 9 + 270 , 6 @ @ public class CallFragment extends BaseFragment { < nl > < nl > < nl > public void onConnected ( ) { < nl > - if ( toneActor ! = null ) { < nl > - toneActor . send ( new AndroidPlayerActor . Stop ( ) ) ; < nl > - } < nl > vibrate = false ; < nl > v . cancel ( ) ; < nl > v . vibrate ( 200 ) ; < nl > @ @ - 339 , 9 + 277 , 6 @ @ public class CallFragment extends BaseFragment { < nl > } < nl > < nl > public void onCallEnd ( ) { < nl > - if ( toneActor ! = null ) { < nl > - toneActor . send ( new AndroidPlayerActor . Stop ( ) ) ; < nl > - } < nl > vibrate = false ; < nl > if ( ringtone ! = null ) { < nl > ringtone . stop ( ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / core / AndroidCallProvider . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / core / AndroidCallProvider . java < nl > index 09a946c . . 661e59e 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / core / AndroidCallProvider . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / core / AndroidCallProvider . java < nl > @ @ - 5 , 12 + 5 , 21 @ @ import android . content . Intent ; < nl > < nl > import im . actor . core . providers . CallsProvider ; < nl > import im . actor . core . viewmodel . CallState ; < nl > + import im . actor . runtime . actors . ActorCreator ; < nl > + import im . actor . runtime . actors . ActorRef ; < nl > + import im . actor . runtime . actors . ActorSystem ; < nl > + import im . actor . runtime . actors . Props ; < nl > import im . actor . sdk . ActorSDK ; < nl > + import im . actor . sdk . controllers . calls . AudioActorEx ; < nl > import im . actor . sdk . controllers . calls . CallActivity ; < nl > + import im . actor . sdk . core . audio . AndroidPlayerActor ; < nl > + import im . actor . sdk . core . audio . AudioPlayerActor ; < nl > < nl > import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > < nl > public class AndroidCallProvider implements CallsProvider { < nl > + private ActorRef toneActor ; < nl > + < nl > < nl > @ Override < nl > public void onCallStart ( long callId ) { < nl > @ @ - 29 , 16 + 38 , 52 @ @ public class AndroidCallProvider implements CallsProvider { < nl > < nl > @ Override < nl > public void onCallEnd ( long callId ) { < nl > - messenger ( ) . getCall ( callId ) . getState ( ) . change ( CallState . ENDED ) ; < nl > + < nl > } < nl > < nl > @ Override < nl > public void startOutgoingBeep ( ) { < nl > - / / TODO : Implement < nl > + if ( toneActor = = null ) { < nl > + toneActor = ActorSystem . system ( ) . actorOf ( Props . create ( new ActorCreator ( ) { < nl > + @ Override < nl > + public AudioActorEx create ( ) { < nl > + return new AudioActorEx ( messenger ( ) . getContext ( ) , new AudioPlayerActor . AudioPlayerCallback ( ) { < nl > + @ Override < nl > + public void onStart ( String fileName ) { < nl > + < nl > + } < nl > + < nl > + @ Override < nl > + public void onStop ( String fileName ) { < nl > + < nl > + } < nl > + < nl > + @ Override < nl > + public void onPause ( String fileName , float progress ) { < nl > + < nl > + } < nl > + < nl > + @ Override < nl > + public void onProgress ( String fileName , float progress ) { < nl > + < nl > + } < nl > + < nl > + @ Override < nl > + public void onError ( String fileName ) { < nl > + < nl > + } < nl > + } ) ; < nl > + } < nl > + } ) , " actor / android _ tone " ) ; < nl > + } < nl > + < nl > + toneActor . send ( new AndroidPlayerActor . Play ( " " ) ) ; < nl > } < nl > < nl > @ Override < nl > public void stopOutgoingBeep ( ) { < nl > - / / TODO : Implement < nl > + if ( toneActor ! = null ) { < nl > + toneActor . send ( new AudioActorEx . Stop ( ) ) ; < nl > + } < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / raw / tone . wav b / actor - sdk / sdk - core - android / android - sdk / src / main / res / raw / tone . wav < nl > new file mode 100644 < nl > index 0000000 . . 65f98cb < nl > Binary files / dev / null and b / actor - sdk / sdk - core - android / android - sdk / src / main / res / raw / tone . wav differ

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 index 17182b0 . . 9cedd34 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 @ @ - 275 , 7 + 275 , 7 @ @ public class GroupInfoFragment extends BaseFragment { 
 / / Members 
 / / 
 
 - groupUserAdapter = new MembersAdapter ( getActivity ( ) ) ; 
 + groupUserAdapter = new MembersAdapter ( getActivity ( ) , getArguments ( ) . getInt ( " groupId " ) ) ; 
 bind ( groupVM . getIsAsyncMembers ( ) , groupVM . getMembers ( ) , ( isAsyncMembers , valueModel , memberList , valueModel2 ) - > { 
 if ( isAsyncMembers ) { 
 groupUserAdapter . setMembers ( new ArrayList < > ( ) ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / MembersFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / MembersFragment . java 
 index 8e47223 . . f767550 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / MembersFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / MembersFragment . java 
 @ @ - 13 , 6 + 13 , 7 @ @ import im . actor . core . entity . GroupMember ; 
 import im . actor . sdk . R ; 
 import im . actor . sdk . controllers . BaseFragment ; 
 import im . actor . sdk . controllers . group . view . MembersAdapter ; 
 + import im . actor . sdk . view . adapters . RecyclerListView ; 
 
 import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 
 @ @ - 26 , 12 + 27 , 6 @ @ public class MembersFragment extends BaseFragment { 
 return res ; 
 } 
 
 - private static final int LIMIT = 20 ; 
 - 
 - private int groupId ; 
 - private boolean isInitiallyLoaded ; 
 - private byte [ ] nextMembers ; 
 - private ArrayList < Integer > members = new ArrayList < > ( ) ; 
 private MembersAdapter adapter ; 
 
 public MembersFragment ( ) { 
 @ @ - 41 , 20 + 36 , 13 @ @ public class MembersFragment extends BaseFragment { 
 setShowHome ( true ) ; 
 } 
 
 - @ Override 
 - public void onCreate ( Bundle saveInstance ) { 
 - super . onCreate ( saveInstance ) ; 
 - 
 - groupId = getArguments ( ) . getInt ( " groupId " ) ; 
 - } 
 - 
 @ Nullable 
 @ Override 
 public View onCreateView ( LayoutInflater inflater , @ Nullable ViewGroup container , @ Nullable Bundle savedInstanceState ) { 
 View res = inflater . inflate ( R . layout . fragment _ members , container , false ) ; 
 - adapter = new MembersAdapter ( getContext ( ) ) ; 
 + adapter = new MembersAdapter ( getContext ( ) , getArguments ( ) . getInt ( " groupId " ) ) ; 
 
 - ( ( ListView ) res . findViewById ( R . id . items ) ) . setAdapter ( adapter ) ; 
 + ( ( RecyclerListView ) res . findViewById ( R . id . items ) ) . setAdapter ( adapter ) ; 
 
 return res ; 
 } 
 @ @ - 62 , 17 + 50 , 6 @ @ public class MembersFragment extends BaseFragment { 
 @ Override 
 public void onResume ( ) { 
 super . onResume ( ) ; 
 - if ( ! isInitiallyLoaded ) { 
 - wrap ( messenger ( ) . loadMembers ( groupId , LIMIT , nextMembers ) ) . then ( groupMembersSlice - > { 
 - isInitiallyLoaded = true ; 
 - members . addAll ( groupMembersSlice . getUids ( ) ) ; 
 - nextMembers = groupMembersSlice . getNext ( ) ; 
 - ArrayList < GroupMember > nMembers = new ArrayList < > ( ) ; 
 - for ( Integer uid : members ) { 
 - nMembers . add ( new GroupMember ( uid , 0 , 0 , false ) ) ; 
 - } 
 - adapter . setMembers ( nMembers , false ) ; 
 - } ) ; 
 - } 
 + adapter . initLoad ( ) ; 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java 
 index 6697651 . . 013996b 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java 
 @ @ - 6 , 9 + 6 , 9 @ @ import android . view . View ; 
 import android . view . ViewGroup ; 
 import android . widget . TextView ; 
 
 + import java . util . ArrayList ; 
 import java . util . Arrays ; 
 import java . util . Collection ; 
 - import java . util . Comparator ; 
 
 import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . R ; 
 @ @ - 20 , 15 + 20 , 21 @ @ import im . actor . sdk . view . adapters . ViewHolder ; 
 import im . actor . core . entity . GroupMember ; 
 import im . actor . core . viewmodel . UserVM ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 import static im . actor . sdk . util . ActorSDKMessenger . users ; 
 
 public class MembersAdapter extends HolderAdapter < GroupMember > { 
 
 - private GroupMember [ ] members = new GroupMember [ 0 ] ; 
 + public static final int LOAD _ GAP = 10 ; 
 + private static final int LIMIT = 20 ; 
 + private ArrayList < GroupMember > members = new ArrayList < GroupMember > ( ) ; 
 private ActorBinder BINDER = new ActorBinder ( ) ; 
 + private boolean loadInProgress = false ; 
 + private boolean loaddedToEnd = false ; 
 
 - public MembersAdapter ( Context context ) { 
 + public MembersAdapter ( Context context , int groupId ) { 
 super ( context ) ; 
 + this . groupId = groupId ; 
 } 
 
 public void setMembers ( Collection < GroupMember > members ) { 
 @ @ - 36 , 9 + 42 , 9 @ @ public class MembersAdapter extends HolderAdapter < GroupMember > { 
 } 
 
 public void setMembers ( Collection < GroupMember > members , boolean sort ) { 
 - this . members = members . toArray ( new GroupMember [ members . size ( ) ] ) ; 
 if ( sort ) { 
 - Arrays . sort ( this . members , ( a , b ) - > { 
 + GroupMember [ ] membersArray = members . toArray ( new GroupMember [ members . size ( ) ] ) ; 
 + Arrays . sort ( membersArray , ( a , b ) - > { 
 if ( a . isAdministrator ( ) & & ! b . isAdministrator ( ) ) { 
 return - 1 ; 
 } 
 @ @ - 49 , 23 + 55 , 65 @ @ public class MembersAdapter extends HolderAdapter < GroupMember > { 
 String bn = users ( ) . get ( b . getInviterUid ( ) ) . getName ( ) . get ( ) ; 
 return an . compareTo ( bn ) ; 
 } ) ; 
 + this . members . addAll ( Arrays . asList ( membersArray ) ) ; 
 + } else { 
 + this . members . addAll ( members ) ; 
 + } 
 + notifyDataSetChanged ( ) ; 
 + } 
 + 
 + @ Override 
 + protected void onBindViewHolder ( ViewHolder < GroupMember > holder , GroupMember obj , int position , Context context ) { 
 + super . onBindViewHolder ( holder , obj , position , context ) ; 
 + if ( position > = getCount ( ) - LOAD _ GAP ) { 
 + loadMore ( ) ; 
 + } 
 + 
 + } 
 + 
 + private int groupId ; 
 + private boolean isInitiallyLoaded ; 
 + private byte [ ] nextMembers ; 
 + private ArrayList < Integer > rawMembers = new ArrayList < > ( ) ; 
 + 
 + public void initLoad ( ) { 
 + if ( ! isInitiallyLoaded ) { 
 + loadMore ( ) ; 
 + } 
 + } 
 + 
 + private void loadMore ( ) { 
 + if ( ! loadInProgress & & ! loaddedToEnd ) { 
 + loadInProgress = true ; 
 + messenger ( ) . loadMembers ( groupId , LIMIT , nextMembers ) . then ( groupMembersSlice - > { 
 + isInitiallyLoaded = true ; 
 + rawMembers . clear ( ) ; 
 + rawMembers . addAll ( groupMembersSlice . getUids ( ) ) ; 
 + nextMembers = groupMembersSlice . getNext ( ) ; 
 + loaddedToEnd = nextMembers = = null ; 
 + ArrayList < GroupMember > nMembers = new ArrayList < > ( ) ; 
 + for ( Integer uid : rawMembers ) { 
 + nMembers . add ( new GroupMember ( uid , 0 , 0 , false ) ) ; 
 + } 
 + loadInProgress = false ; 
 + setMembers ( nMembers , false ) ; 
 + } ) ; 
 } 
 - notifyDataSetInvalidated ( ) ; 
 } 
 
 @ Override 
 public int getCount ( ) { 
 - return members . length ; 
 + return members . size ( ) ; 
 } 
 
 @ Override 
 public GroupMember getItem ( int position ) { 
 - return members [ position ] ; 
 + return members . get ( position ) ; 
 } 
 
 @ Override 
 public long getItemId ( int position ) { 
 - return members [ position ] . getUid ( ) ; 
 + return members . get ( position ) . getUid ( ) ; 
 } 
 
 @ Override 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ members . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ members . xml 
 index 745d3b0 . . dc3773c 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ members . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ members . xml 
 @ @ - 3 , 7 + 3 , 7 @ @ 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " match _ parent " > 
 
 - < ListView 
 + < im . actor . sdk . view . adapters . RecyclerListView 
 android : id = " @ + id / items " 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " match _ parent " / > 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / PeerSearchEntity . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / PeerSearchEntity . java 
 index 53e6fed . . 91ab8db 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / PeerSearchEntity . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / PeerSearchEntity . java 
 @ @ - 3 , 55 + 3 , 18 @ @ package im . actor . core . entity ; 
 public class PeerSearchEntity { 
 
 private Peer peer ; 
 - private String title ; 
 - private String description ; 
 - private Integer membersCount ; 
 - private Long date ; 
 - private Integer creatorUid ; 
 - private Boolean isPublic ; 
 - private Boolean isJoined ; 
 + private String optMatchString ; 
 
 - public PeerSearchEntity ( Peer peer , String title , String description , Integer membersCount , 
 - Long date , Integer creatorUid , Boolean isPublic , Boolean isJoined ) { 
 + public PeerSearchEntity ( Peer peer , String optMatchString ) { 
 this . peer = peer ; 
 - this . title = title ; 
 - this . description = description ; 
 - this . membersCount = membersCount ; 
 - this . date = date ; 
 - this . creatorUid = creatorUid ; 
 - this . isPublic = isPublic ; 
 - this . isJoined = isJoined ; 
 + this . optMatchString = optMatchString ; 
 } 
 
 public Peer getPeer ( ) { 
 return peer ; 
 } 
 
 - public String getTitle ( ) { 
 - return title ; 
 - } 
 - 
 - public String getDescription ( ) { 
 - return description ; 
 - } 
 - 
 - public Integer getMembersCount ( ) { 
 - return membersCount ; 
 - } 
 - 
 - public Long getDate ( ) { 
 - return date ; 
 - } 
 - 
 - public Integer getCreatorUid ( ) { 
 - return creatorUid ; 
 - } 
 - 
 - public Boolean isPublic ( ) { 
 - return isPublic ; 
 - } 
 - 
 - public Boolean isJoined ( ) { 
 - return isJoined ; 
 + public String getOptMatchString ( ) { 
 + return optMatchString ; 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java 
 index face319 . . d0d11c3 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java 
 @ @ - 119 , 9 + 119 , 7 @ @ public class SearchModule extends AbsModule { 
 responsePeerSearch . getGroups ( ) ) ) 
 . map ( responsePeerSearch1 - > 
 ManagedList . of ( responsePeerSearch1 . getSearchResults ( ) ) 
 - . map ( r - > new PeerSearchEntity ( convert ( r . getPeer ( ) ) , r . getTitle ( ) , 
 - r . getDescription ( ) , r . getMembersCount ( ) , r . getDateCreated ( ) , 
 - r . getCreator ( ) , r . isPublic ( ) , r . isJoined ( ) ) ) ) ; 
 + . map ( r - > new PeerSearchEntity ( convert ( r . getPeer ( ) ) , r . getOptMatchString ( ) ) ) ) ; 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / AudioActorEx . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / AudioActorEx . java 
 index 1a5bdbd . . ab63452 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / AudioActorEx . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / AudioActorEx . java 
 @ @ - 33 , 7 + 33 , 7 @ @ public class AudioActorEx extends AndroidPlayerActor { 
 
 mplayer = new MediaPlayer ( ) ; 
 mplayer . setAudioStreamType ( AudioManager . STREAM _ VOICE _ CALL ) ; 
 - / / mplayer . setDataSource ( context , Uri . parse ( " android . resource : / / " + context . getPackageName ( ) + " / " + R . raw . tone ) ) ; 
 + mplayer . setDataSource ( context , Uri . parse ( " android . resource : / / " + context . getPackageName ( ) + " / " + R . raw . tone ) ) ; 
 mplayer . prepare ( ) ; 
 mplayer . setLooping ( true ) ; 
 mplayer . start ( ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java 
 index dc07f04 . . fa9298f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java 
 @ @ - 64 , 7 + 64 , 6 @ @ public class CallFragment extends BaseFragment { 
 private Vibrator v ; 
 private View answerContainer ; 
 private Ringtone ringtone ; 
 - private ActorRef toneActor ; 
 private CallVM call ; 
 private ActorRef timer ; 
 private TextView timerTV ; 
 @ @ - 160 , 7 + 159 , 7 @ @ public class CallFragment extends BaseFragment { 
 initIncoming ( ) ; 
 break ; 
 case CALLING _ OUTGOING : 
 - / / onConnecting ( ) ; 
 + onConnecting ( ) ; 
 break ; 
 } 
 } 
 @ @ - 237 , 7 + 236 , 7 @ @ public class CallFragment extends BaseFragment { 
 
 private void onAnswer ( ) { 
 
 - / / onConnecting ( ) ; 
 + onConnecting ( ) ; 
 answerContainer . setVisibility ( View . INVISIBLE ) ; 
 if ( ringtone ! = null ) { 
 ringtone . stop ( ) ; 
 @ @ - 261 , 64 + 260 , 6 @ @ public class CallFragment extends BaseFragment { 
 
 
 public void onConnecting ( ) { 
 - if ( toneActor = = null ) { 
 - toneActor = ActorSystem . system ( ) . actorOf ( Props . create ( new ActorCreator ( ) { 
 - @ Override 
 - public AudioActorEx create ( ) { 
 - return new AudioActorEx ( getActivity ( ) , new AudioPlayerActor . AudioPlayerCallback ( ) { 
 - @ Override 
 - public void onStart ( String fileName ) { 
 - 
 - } 
 - 
 - @ Override 
 - public void onStop ( String fileName ) { 
 - 
 - } 
 - 
 - @ Override 
 - public void onPause ( String fileName , float progress ) { 
 - 
 - } 
 - 
 - @ Override 
 - public void onProgress ( String fileName , float progress ) { 
 - 
 - } 
 - 
 - @ Override 
 - public void onError ( String fileName ) { 
 - 
 - } 
 - } ) ; 
 - } 
 - } ) , " actor / android _ tone " ) ; 
 - } 
 - 
 - toneActor . send ( new AndroidPlayerActor . Play ( " " ) ) ; 
 - 
 - 
 - vibrate = true ; 
 - new Thread ( new Runnable ( ) { 
 - @ Override 
 - public void run ( ) { 
 - while ( vibrate ) { 
 - try { 
 - v . vibrate ( 10 ) ; 
 - Thread . sleep ( 5 ) ; 
 - v . vibrate ( 10 ) ; 
 - Thread . sleep ( 200 ) ; 
 - v . vibrate ( 10 ) ; 
 - Thread . sleep ( 5 ) ; 
 - v . vibrate ( 10 ) ; 
 - Thread . sleep ( 600 ) ; 
 - } catch ( InterruptedException e ) { 
 - e . printStackTrace ( ) ; 
 - } 
 - } 
 - } 
 - } ) . start ( ) ; 
 - 
 powerManager = ( PowerManager ) getActivity ( ) . getSystemService ( Context . POWER _ SERVICE ) ; 
 wakeLock = powerManager . newWakeLock ( field , getActivity ( ) . getLocalClassName ( ) ) ; 
 
 @ @ - 329 , 9 + 270 , 6 @ @ public class CallFragment extends BaseFragment { 
 
 
 public void onConnected ( ) { 
 - if ( toneActor ! = null ) { 
 - toneActor . send ( new AndroidPlayerActor . Stop ( ) ) ; 
 - } 
 vibrate = false ; 
 v . cancel ( ) ; 
 v . vibrate ( 200 ) ; 
 @ @ - 339 , 9 + 277 , 6 @ @ public class CallFragment extends BaseFragment { 
 } 
 
 public void onCallEnd ( ) { 
 - if ( toneActor ! = null ) { 
 - toneActor . send ( new AndroidPlayerActor . Stop ( ) ) ; 
 - } 
 vibrate = false ; 
 if ( ringtone ! = null ) { 
 ringtone . stop ( ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / core / AndroidCallProvider . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / core / AndroidCallProvider . java 
 index 09a946c . . 661e59e 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / core / AndroidCallProvider . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / core / AndroidCallProvider . java 
 @ @ - 5 , 12 + 5 , 21 @ @ import android . content . Intent ; 
 
 import im . actor . core . providers . CallsProvider ; 
 import im . actor . core . viewmodel . CallState ; 
 + import im . actor . runtime . actors . ActorCreator ; 
 + import im . actor . runtime . actors . ActorRef ; 
 + import im . actor . runtime . actors . ActorSystem ; 
 + import im . actor . runtime . actors . Props ; 
 import im . actor . sdk . ActorSDK ; 
 + import im . actor . sdk . controllers . calls . AudioActorEx ; 
 import im . actor . sdk . controllers . calls . CallActivity ; 
 + import im . actor . sdk . core . audio . AndroidPlayerActor ; 
 + import im . actor . sdk . core . audio . AudioPlayerActor ; 
 
 import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 
 public class AndroidCallProvider implements CallsProvider { 
 + private ActorRef toneActor ; 
 + 
 
 @ Override 
 public void onCallStart ( long callId ) { 
 @ @ - 29 , 16 + 38 , 52 @ @ public class AndroidCallProvider implements CallsProvider { 
 
 @ Override 
 public void onCallEnd ( long callId ) { 
 - messenger ( ) . getCall ( callId ) . getState ( ) . change ( CallState . ENDED ) ; 
 + 
 } 
 
 @ Override 
 public void startOutgoingBeep ( ) { 
 - / / TODO : Implement 
 + if ( toneActor = = null ) { 
 + toneActor = ActorSystem . system ( ) . actorOf ( Props . create ( new ActorCreator ( ) { 
 + @ Override 
 + public AudioActorEx create ( ) { 
 + return new AudioActorEx ( messenger ( ) . getContext ( ) , new AudioPlayerActor . AudioPlayerCallback ( ) { 
 + @ Override 
 + public void onStart ( String fileName ) { 
 + 
 + } 
 + 
 + @ Override 
 + public void onStop ( String fileName ) { 
 + 
 + } 
 + 
 + @ Override 
 + public void onPause ( String fileName , float progress ) { 
 + 
 + } 
 + 
 + @ Override 
 + public void onProgress ( String fileName , float progress ) { 
 + 
 + } 
 + 
 + @ Override 
 + public void onError ( String fileName ) { 
 + 
 + } 
 + } ) ; 
 + } 
 + } ) , " actor / android _ tone " ) ; 
 + } 
 + 
 + toneActor . send ( new AndroidPlayerActor . Play ( " " ) ) ; 
 } 
 
 @ Override 
 public void stopOutgoingBeep ( ) { 
 - / / TODO : Implement 
 + if ( toneActor ! = null ) { 
 + toneActor . send ( new AudioActorEx . Stop ( ) ) ; 
 + } 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / raw / tone . wav b / actor - sdk / sdk - core - android / android - sdk / src / main / res / raw / tone . wav 
 new file mode 100644 
 index 0000000 . . 65f98cb 
 Binary files / dev / null and b / actor - sdk / sdk - core - android / android - sdk / src / main / res / raw / tone . wav differ
