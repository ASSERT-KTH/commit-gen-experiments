BLEU SCORE: 0.0741367008365338

TEST MSG: feat ( android ) : Working Actor Push
GENERATED MSG: fix ( core ) : Fix crash on receiving updates before auth

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / push / ActorPushService . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / push / ActorPushService . java < nl > index 4ef5c96 . . 1999906 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / push / ActorPushService . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / push / ActorPushService . java < nl > @ @ - 315 , 7 + 315 , 7 @ @ public class ActorPushService extends Service implements MqttCallback { < nl > < nl > @ Override < nl > public int onStartCommand ( Intent intent , int flags , int startId ) { < nl > - if ( intent . hasExtra ( " mqtt _ urls " ) < nl > + if ( intent ! = null & & intent . hasExtra ( " mqtt _ urls " ) < nl > & & intent . hasExtra ( " mqtt _ topic " ) < nl > & & intent . hasExtra ( " mqtt _ username " ) < nl > & & intent . hasExtra ( " mqtt _ password " ) ) { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / receivers / SDKPushReceiver . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / receivers / SDKPushReceiver . java < nl > index 10e012e . . da52c28 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / receivers / SDKPushReceiver . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / receivers / SDKPushReceiver . java < nl > @ @ - 1 , 13 + 1 , 19 @ @ < nl > package im . actor . sdk . receivers ; < nl > < nl > - import android . util . Log ; < nl > - < nl > + import im . actor . runtime . json . JSONObject ; < nl > + import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . push . ActorPushReceiver ; < nl > < nl > public class SDKPushReceiver extends ActorPushReceiver { < nl > < nl > @ Override < nl > public void onPushReceived ( String payload ) { < nl > - Log . d ( " TestPushReceiver " , " On push received : " + payload ) ; < nl > + try { < nl > + JSONObject object = new JSONObject ( payload ) ; < nl > + int seq = object . getJSONObject ( " data " ) . getInt ( " seq " ) ; < nl > + ActorSDK . sharedActor ( ) . getMessenger ( ) . onPushReceived ( seq ) ; < nl > + } catch ( Exception e ) { < nl > + e . printStackTrace ( ) ; < nl > + } < nl > } < nl > } < nl > \ No newline at end of file
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > index 593095a . . ab9a17a 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > @ @ - 8 , 6 + 8 , 9 @ @ import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; < nl > import im . actor . sdk . intents . ActorIntent ; < nl > < nl > + / * * < nl > + * SDK Delegate . Used for delegating some work to < nl > + * / < nl > public interface ActorSDKDelegate { < nl > < nl > / * * < nl > @ @ - 31 , 19 + 34 , 34 @ @ public interface ActorSDKDelegate { < nl > * / < nl > ActorIntent getStartIntent ( ) ; < nl > < nl > + / * * < nl > + * If not null returned , overrides settings activity intent < nl > + * < nl > + * @ return Actor Intent < nl > + * / < nl > + ActorIntent getSettingsIntent ( ) ; < nl > + < nl > + @ Deprecated < nl > AuthState getAuthStartState ( ) ; < nl > < nl > + @ Deprecated < nl > BaseAuthFragment getSignFragment ( ) ; < nl > < nl > + @ Deprecated < nl > View getBeforeNickSettingsView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getAfterPhoneSettingsView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getSettingsTopView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getSettingsBottomView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > ActorSettingsCategory [ ] getBeforeSettingsCategories ( ) ; < nl > < nl > + @ Deprecated < nl > ActorSettingsCategory [ ] getAfterSettingsCategories ( ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > index 68ec210 . . 9741d06 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > @ @ - 61 , 6 + 61 , 11 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { < nl > return null ; < nl > } < nl > < nl > + @ Override < nl > + public ActorIntent getSettingsIntent ( ) { < nl > + return null ; < nl > + } < nl > + < nl > / / < nl > / / Hacking settings activity < nl > / / < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > index bbb081d . . 2518330 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > @ @ - 113 , 7 + 113 , 9 @ @ public class ApiModule extends AbsModule implements BusSubscriber { < nl > < nl > @ Override < nl > public void onUpdateReceived ( Object obj ) { < nl > - context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; < nl > + if ( context ( ) . getUpdatesModule ( ) ! = null ) { < nl > + context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; < nl > + } < nl > } < nl > < nl > @ Override

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / push / ActorPushService . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / push / ActorPushService . java 
 index 4ef5c96 . . 1999906 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / push / ActorPushService . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / push / ActorPushService . java 
 @ @ - 315 , 7 + 315 , 7 @ @ public class ActorPushService extends Service implements MqttCallback { 
 
 @ Override 
 public int onStartCommand ( Intent intent , int flags , int startId ) { 
 - if ( intent . hasExtra ( " mqtt _ urls " ) 
 + if ( intent ! = null & & intent . hasExtra ( " mqtt _ urls " ) 
 & & intent . hasExtra ( " mqtt _ topic " ) 
 & & intent . hasExtra ( " mqtt _ username " ) 
 & & intent . hasExtra ( " mqtt _ password " ) ) { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / receivers / SDKPushReceiver . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / receivers / SDKPushReceiver . java 
 index 10e012e . . da52c28 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / receivers / SDKPushReceiver . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / receivers / SDKPushReceiver . java 
 @ @ - 1 , 13 + 1 , 19 @ @ 
 package im . actor . sdk . receivers ; 
 
 - import android . util . Log ; 
 - 
 + import im . actor . runtime . json . JSONObject ; 
 + import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . push . ActorPushReceiver ; 
 
 public class SDKPushReceiver extends ActorPushReceiver { 
 
 @ Override 
 public void onPushReceived ( String payload ) { 
 - Log . d ( " TestPushReceiver " , " On push received : " + payload ) ; 
 + try { 
 + JSONObject object = new JSONObject ( payload ) ; 
 + int seq = object . getJSONObject ( " data " ) . getInt ( " seq " ) ; 
 + ActorSDK . sharedActor ( ) . getMessenger ( ) . onPushReceived ( seq ) ; 
 + } catch ( Exception e ) { 
 + e . printStackTrace ( ) ; 
 + } 
 } 
 } 
 \ No newline at end of file

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 index 593095a . . ab9a17a 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 @ @ - 8 , 6 + 8 , 9 @ @ import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; 
 import im . actor . sdk . intents . ActorIntent ; 
 
 + / * * 
 + * SDK Delegate . Used for delegating some work to 
 + * / 
 public interface ActorSDKDelegate { 
 
 / * * 
 @ @ - 31 , 19 + 34 , 34 @ @ public interface ActorSDKDelegate { 
 * / 
 ActorIntent getStartIntent ( ) ; 
 
 + / * * 
 + * If not null returned , overrides settings activity intent 
 + * 
 + * @ return Actor Intent 
 + * / 
 + ActorIntent getSettingsIntent ( ) ; 
 + 
 + @ Deprecated 
 AuthState getAuthStartState ( ) ; 
 
 + @ Deprecated 
 BaseAuthFragment getSignFragment ( ) ; 
 
 + @ Deprecated 
 View getBeforeNickSettingsView ( Context context ) ; 
 
 + @ Deprecated 
 View getAfterPhoneSettingsView ( Context context ) ; 
 
 + @ Deprecated 
 View getSettingsTopView ( Context context ) ; 
 
 + @ Deprecated 
 View getSettingsBottomView ( Context context ) ; 
 
 + @ Deprecated 
 ActorSettingsCategory [ ] getBeforeSettingsCategories ( ) ; 
 
 + @ Deprecated 
 ActorSettingsCategory [ ] getAfterSettingsCategories ( ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 index 68ec210 . . 9741d06 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 @ @ - 61 , 6 + 61 , 11 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { 
 return null ; 
 } 
 
 + @ Override 
 + public ActorIntent getSettingsIntent ( ) { 
 + return null ; 
 + } 
 + 
 / / 
 / / Hacking settings activity 
 / / 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 index bbb081d . . 2518330 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 @ @ - 113 , 7 + 113 , 9 @ @ public class ApiModule extends AbsModule implements BusSubscriber { 
 
 @ Override 
 public void onUpdateReceived ( Object obj ) { 
 - context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; 
 + if ( context ( ) . getUpdatesModule ( ) ! = null ) { 
 + context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; 
 + } 
 } 
 
 @ Override
