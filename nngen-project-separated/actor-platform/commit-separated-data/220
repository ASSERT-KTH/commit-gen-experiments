BLEU SCORE: 0.21386638885976572

TEST MSG: feat ( iOS ) : Checkmark on selected wallpaper
GENERATED MSG: fix + chore ( iOS ) : save background and some chore

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift < nl > index cac4fb8 . . acfb072 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift < nl > @ @ - 194 , 7 + 194 , 6 @ @ public class AAThumbnailView : UIView , UICollectionViewDelegate , UICollectionView < nl > } else { < nl > cell . isCheckSelected = false < nl > cell . imgSelected . image = UIImage . bundled ( " ImageSelectedOff " ) < nl > - < nl > } < nl > < nl > cell . backgroundColor = UIColor . whiteColor ( ) < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > index b1c63ef . . 1d7b8bb 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > @ @ - 167 , 7 + 167 , 7 @ @ public class AASettingsViewController : AAContentTableController { < nl > cell . wallpapperDidTap = { [ unowned self ] ( name ) - > ( ) in < nl > self . presentViewController ( AAWallpapperPreviewController ( imageName : name ) , animated : true , completion : nil ) < nl > } < nl > - < nl > + cell . bind ( ) < nl > } < nl > < nl > r . selectAction = { ( ) - > Bool in < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperPreviewCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperPreviewCell . swift < nl > index 23f1077 . . d8212e0 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperPreviewCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperPreviewCell . swift < nl > @ @ - 7 , 6 + 7 , 7 @ @ import Foundation < nl > class AAWallpapperPreviewCell : UICollectionViewCell { < nl > < nl > private let imageView = UIImageView ( ) < nl > + private let imageIcon = UIImageView ( ) < nl > < nl > override init ( frame : CGRect ) { < nl > super . init ( frame : frame ) < nl > @ @ - 14 , 7 + 15 , 19 @ @ class AAWallpapperPreviewCell : UICollectionViewCell { < nl > imageView . contentMode = . ScaleAspectFill < nl > imageView . clipsToBounds = true < nl > < nl > + imageIcon . image = UIImage . bundled ( " ImageSelectedOn " ) < nl > + < nl > + / / if self . selectedAssets . contains ( photoModel ) { < nl > + / / cell . isCheckSelected = true < nl > + / / cell . imgSelected . image = UIImage . bundled ( " ImageSelectedOn " ) < nl > + / / < nl > + / / } else { < nl > + / / cell . isCheckSelected = false < nl > + / / cell . imgSelected . image = UIImage . bundled ( " ImageSelectedOff " ) < nl > + / / } < nl > + < nl > self . contentView . addSubview ( imageView ) < nl > + self . contentView . addSubview ( imageIcon ) < nl > } < nl > < nl > required init ? ( coder aDecoder : NSCoder ) { < nl > @ @ - 23 , 11 + 36 , 13 @ @ class AAWallpapperPreviewCell : UICollectionViewCell { < nl > < nl > func bind ( index : Int ) { < nl > imageView . image = UIImage . bundled ( " bg _ \ ( index + 1 ) . jpg " ) < nl > + imageIcon . hidden = ActorSDK . sharedActor ( ) . messenger . getSelectedWallpaper ( ) = = " local : bg _ \ ( index + 1 ) . jpg " < nl > } < nl > < nl > override func layoutSubviews ( ) { < nl > super . layoutSubviews ( ) < nl > < nl > imageView . frame = contentView . bounds < nl > + imageIcon . frame = CGRectMake ( contentView . width - 32 , contentView . height - 32 , 26 , 26 ) < nl > } < nl > } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperSettingsCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperSettingsCell . swift < nl > index 799db52 . . 920bb79 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperSettingsCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperSettingsCell . swift < nl > @ @ - 8 , 8 + 8 , 11 @ @ import YYImage < nl > public class AAWallpapperSettingsCell : AATableViewCell { < nl > < nl > private let wallpapper1 = UIImageView ( ) < nl > + private let wallpapper1Icon = UIImageView ( ) < nl > private let wallpapper2 = UIImageView ( ) < nl > + private let wallpapper2Icon = UIImageView ( ) < nl > private let wallpapper3 = UIImageView ( ) < nl > + private let wallpapper3Icon = UIImageView ( ) < nl > private let label = UILabel ( ) < nl > private let disclose = UIImageView ( ) < nl > < nl > @ @ - 22 , 16 + 25 , 19 @ @ public class AAWallpapperSettingsCell : AATableViewCell { < nl > wallpapper1 . contentMode = . ScaleAspectFill < nl > wallpapper1 . image = UIImage . bundled ( " bg _ 1 _ preview . jpg " ) ! < nl > wallpapper1 . viewDidTap = { [ unowned self ] ( ) - > ( ) in self . wallpapperDidTap ? ( name : " bg _ 1 . jpg " ) } < nl > + wallpapper1Icon . image = UIImage . bundled ( " ImageSelectedOn " ) < nl > < nl > wallpapper2 . clipsToBounds = true < nl > wallpapper2 . contentMode = . ScaleAspectFill < nl > wallpapper2 . image = UIImage . bundled ( " bg _ 2 _ preview . jpg " ) ! < nl > wallpapper2 . viewDidTap = { [ unowned self ] ( ) - > ( ) in self . wallpapperDidTap ? ( name : " bg _ 2 . jpg " ) } < nl > + wallpapper2Icon . image = UIImage . bundled ( " ImageSelectedOn " ) < nl > < nl > wallpapper3 . clipsToBounds = true < nl > wallpapper3 . contentMode = . ScaleAspectFill < nl > wallpapper3 . image = UIImage . bundled ( " bg _ 3 _ preview . jpg " ) ! < nl > wallpapper3 . viewDidTap = { [ unowned self ] ( ) - > ( ) in self . wallpapperDidTap ? ( name : " bg _ 3 . jpg " ) } < nl > + wallpapper3Icon . image = UIImage . bundled ( " ImageSelectedOn " ) < nl > < nl > label . font = UIFont . systemFontOfSize ( 17 ) < nl > label . textColor = appStyle . cellTextColor < nl > @ @ - 39 , 8 + 45 , 11 @ @ public class AAWallpapperSettingsCell : AATableViewCell { < nl > disclose . image = UIImage . bundled ( " ios _ disclose " ) < nl > < nl > self . contentView . addSubview ( wallpapper1 ) < nl > + self . wallpapper1 . addSubview ( wallpapper1Icon ) < nl > self . contentView . addSubview ( wallpapper2 ) < nl > + self . wallpapper2 . addSubview ( wallpapper2Icon ) < nl > self . contentView . addSubview ( wallpapper3 ) < nl > + self . wallpapper3 . addSubview ( wallpapper3Icon ) < nl > self . contentView . addSubview ( label ) < nl > self . contentView . addSubview ( disclose ) < nl > < nl > @ @ - 66 , 8 + 75 , 18 @ @ public class AAWallpapperSettingsCell : AATableViewCell { < nl > wallpapper2 . frame = CGRectMake ( padding * 2 + wWidth , wPadding , wWidth , wHeight ) < nl > wallpapper3 . frame = CGRectMake ( padding * 3 + wWidth * 2 , wPadding , wWidth , wHeight ) < nl > < nl > + wallpapper1Icon . frame = CGRectMake ( wWidth - 32 , wHeight - 32 , 26 , 26 ) < nl > + wallpapper2Icon . frame = CGRectMake ( wWidth - 32 , wHeight - 32 , 26 , 26 ) < nl > + wallpapper3Icon . frame = CGRectMake ( wWidth - 32 , wHeight - 32 , 26 , 26 ) < nl > + < nl > label . frame = CGRectMake ( padding , 0 , width - padding * 2 , 44 ) < nl > < nl > disclose . frame = CGRectMake ( width - 13 - 10 , 15 , 13 , 14 ) < nl > } < nl > + < nl > + public func bind ( ) { < nl > + wallpapper1Icon . hidden = ActorSDK . sharedActor ( ) . messenger . getSelectedWallpaper ( ) ! = " local : bg _ 1 . jpg " < nl > + wallpapper2Icon . hidden = ActorSDK . sharedActor ( ) . messenger . getSelectedWallpaper ( ) ! = " local : bg _ 2 . jpg " < nl > + wallpapper3Icon . hidden = ActorSDK . sharedActor ( ) . messenger . getSelectedWallpaper ( ) ! = " local : bg _ 3 . jpg " < nl > + } < nl > } < nl > \ No newline at end of file
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift < nl > index b53f1bf . . 7a03ef1 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift < nl > @ @ - 161 , 8 + 161 , 6 @ @ class AAThumbnailView : UIView , UICollectionViewDelegate , UICollectionViewDataSou < nl > } < nl > < nl > func collectionView ( collectionView : UICollectionView , numberOfItemsInSection section : Int ) - > Int { < nl > - print ( " ASSSEEETS = = = \ ( self . assets . count ) " ) < nl > - < nl > return self . assets . count < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAWallpapperPreviewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAWallpapperPreviewController . swift < nl > index 3463b55 . . 9007bfe 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAWallpapperPreviewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAWallpapperPreviewController . swift < nl > @ @ - 85 , 12 + 85 , 13 @ @ public class AAWallpapperPreviewController : AAViewController { < nl > < nl > } else { < nl > dispatchBackground ( { ( ) - > Void in < nl > - let descriptor = " / tmp / " + NSUUID ( ) . UUIDString < nl > - let path = CocoaFiles . pathFromDescriptor ( descriptor ) ; < nl > + < nl > + let descriptor = " / tmp / customWallpaperImage " < nl > + let path = CocoaFiles . pathFromDescriptor ( descriptor ) < nl > < nl > UIImageJPEGRepresentation ( self . selectedImage , 1 . 00 ) ! . writeToFile ( path , atomically : true ) < nl > < nl > - Actor . changeSelectedWallpaper ( " file : \ ( path ) " ) < nl > + Actor . changeSelectedWallpaper ( " file : \ ( descriptor ) " ) < nl > } ) < nl > < nl > } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > index 18f6929 . . bf7e724 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > @ @ - 63 , 7 + 63 , 8 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > if bg . startsWith ( " local : " ) { < nl > backgroundView . image = UIImage . bundled ( bg . skip ( 6 ) ) < nl > } else { < nl > - backgroundView . image = UIImage ( contentsOfFile : bg . skip ( 5 ) ) < nl > + let path = CocoaFiles . pathFromDescriptor ( bg . skip ( 5 ) ) < nl > + backgroundView . image = UIImage ( contentsOfFile : path ) < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Group / AAGroupViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Group / AAGroupViewController . swift < nl > index 1f3bfe8 . . fc43d91 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Group / AAGroupViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Group / AAGroupViewController . swift < nl > @ @ - 312 , 6 + 312 , 7 @ @ public class AAGroupViewController : AAContentTableController { < nl > self . memberRows . data = v . toArray ( ) . toSwiftArray ( ) < nl > self . memberRows . data . sortInPlace ( self . membersSort ) < nl > self . memberRows . reload ( ) < nl > + < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsWallpapersController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsWallpapersController . swift < nl > index fdb7280 . . 5d7fb9f 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsWallpapersController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsWallpapersController . swift < nl > @ @ - 45 , 6 + 45 , 27 @ @ class AASettingsWallpapersController : AATableViewController { < nl > return 1 < nl > } < nl > < nl > + override func tableView ( tableView : UITableView , cellForRowAtIndexPath indexPath : NSIndexPath ) - > UITableViewCell { < nl > + if indexPath . section = = 0 { < nl > + return photosLibrary ( indexPath ) < nl > + } else { < nl > + return wallpapersCell ( indexPath ) < nl > + } < nl > + } < nl > + < nl > + func tableView ( tableView : UITableView , didSelectRowAtIndexPath indexPath : NSIndexPath ) { < nl > + / / < nl > + self . tableView . deselectRowAtIndexPath ( indexPath , animated : true ) < nl > + < nl > + if indexPath . section = = 0 { < nl > + < nl > + self . pickImage ( . PhotoLibrary ) < nl > + < nl > + } < nl > + < nl > + } < nl > + < nl > + < nl > func tableView ( tableView : UITableView , titleForHeaderInSection section : Int ) - > String ? { < nl > return nil < nl > } < nl > @ @ - 61 , 6 + 82 , 9 @ @ class AASettingsWallpapersController : AATableViewController { < nl > } < nl > } < nl > < nl > + / / MARK : - < nl > + / / MARK : Create cells < nl > + < nl > private func photosLibrary ( indexPath : NSIndexPath ) - > AACommonCell { < nl > let cell = AACommonCell ( ) < nl > < nl > @ @ - 81 , 26 + 105 , 8 @ @ class AASettingsWallpapersController : AATableViewController { < nl > return cell < nl > } < nl > < nl > - < nl > - override func tableView ( tableView : UITableView , cellForRowAtIndexPath indexPath : NSIndexPath ) - > UITableViewCell { < nl > - if indexPath . section = = 0 { < nl > - return photosLibrary ( indexPath ) < nl > - } else { < nl > - return wallpapersCell ( indexPath ) < nl > - } < nl > - } < nl > - < nl > - func tableView ( tableView : UITableView , didSelectRowAtIndexPath indexPath : NSIndexPath ) { < nl > - / / < nl > - self . tableView . deselectRowAtIndexPath ( indexPath , animated : true ) < nl > - < nl > - if indexPath . section = = 0 { < nl > - < nl > - self . pickImage ( . PhotoLibrary ) < nl > - < nl > - } < nl > - < nl > - } < nl > + / / MARK : - < nl > + / / MARK : Picker delegate < nl > < nl > override func imagePickerController ( picker : UIImagePickerController , didFinishPickingImage image : UIImage , editingInfo : [ String : AnyObject ] ? ) { < nl > < nl > @ @ - 120 , 7 + 126 , 8 @ @ class AASettingsWallpapersController : AATableViewController { < nl > picker . dismissViewControllerAnimated ( true , completion : nil ) < nl > } < nl > < nl > - / / Image picking < nl > + / / MARK : - < nl > + / / MARK : Image picking < nl > < nl > func pickImage ( source : UIImagePickerControllerSourceType ) { < nl > let pickerController = AAImagePickerController ( )

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift 
 index cac4fb8 . . acfb072 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift 
 @ @ - 194 , 7 + 194 , 6 @ @ public class AAThumbnailView : UIView , UICollectionViewDelegate , UICollectionView 
 } else { 
 cell . isCheckSelected = false 
 cell . imgSelected . image = UIImage . bundled ( " ImageSelectedOff " ) 
 - 
 } 
 
 cell . backgroundColor = UIColor . whiteColor ( ) 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 index b1c63ef . . 1d7b8bb 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 @ @ - 167 , 7 + 167 , 7 @ @ public class AASettingsViewController : AAContentTableController { 
 cell . wallpapperDidTap = { [ unowned self ] ( name ) - > ( ) in 
 self . presentViewController ( AAWallpapperPreviewController ( imageName : name ) , animated : true , completion : nil ) 
 } 
 - 
 + cell . bind ( ) 
 } 
 
 r . selectAction = { ( ) - > Bool in 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperPreviewCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperPreviewCell . swift 
 index 23f1077 . . d8212e0 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperPreviewCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperPreviewCell . swift 
 @ @ - 7 , 6 + 7 , 7 @ @ import Foundation 
 class AAWallpapperPreviewCell : UICollectionViewCell { 
 
 private let imageView = UIImageView ( ) 
 + private let imageIcon = UIImageView ( ) 
 
 override init ( frame : CGRect ) { 
 super . init ( frame : frame ) 
 @ @ - 14 , 7 + 15 , 19 @ @ class AAWallpapperPreviewCell : UICollectionViewCell { 
 imageView . contentMode = . ScaleAspectFill 
 imageView . clipsToBounds = true 
 
 + imageIcon . image = UIImage . bundled ( " ImageSelectedOn " ) 
 + 
 + / / if self . selectedAssets . contains ( photoModel ) { 
 + / / cell . isCheckSelected = true 
 + / / cell . imgSelected . image = UIImage . bundled ( " ImageSelectedOn " ) 
 + / / 
 + / / } else { 
 + / / cell . isCheckSelected = false 
 + / / cell . imgSelected . image = UIImage . bundled ( " ImageSelectedOff " ) 
 + / / } 
 + 
 self . contentView . addSubview ( imageView ) 
 + self . contentView . addSubview ( imageIcon ) 
 } 
 
 required init ? ( coder aDecoder : NSCoder ) { 
 @ @ - 23 , 11 + 36 , 13 @ @ class AAWallpapperPreviewCell : UICollectionViewCell { 
 
 func bind ( index : Int ) { 
 imageView . image = UIImage . bundled ( " bg _ \ ( index + 1 ) . jpg " ) 
 + imageIcon . hidden = ActorSDK . sharedActor ( ) . messenger . getSelectedWallpaper ( ) = = " local : bg _ \ ( index + 1 ) . jpg " 
 } 
 
 override func layoutSubviews ( ) { 
 super . layoutSubviews ( ) 
 
 imageView . frame = contentView . bounds 
 + imageIcon . frame = CGRectMake ( contentView . width - 32 , contentView . height - 32 , 26 , 26 ) 
 } 
 } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperSettingsCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperSettingsCell . swift 
 index 799db52 . . 920bb79 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperSettingsCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / Cells / AAWallpapperSettingsCell . swift 
 @ @ - 8 , 8 + 8 , 11 @ @ import YYImage 
 public class AAWallpapperSettingsCell : AATableViewCell { 
 
 private let wallpapper1 = UIImageView ( ) 
 + private let wallpapper1Icon = UIImageView ( ) 
 private let wallpapper2 = UIImageView ( ) 
 + private let wallpapper2Icon = UIImageView ( ) 
 private let wallpapper3 = UIImageView ( ) 
 + private let wallpapper3Icon = UIImageView ( ) 
 private let label = UILabel ( ) 
 private let disclose = UIImageView ( ) 
 
 @ @ - 22 , 16 + 25 , 19 @ @ public class AAWallpapperSettingsCell : AATableViewCell { 
 wallpapper1 . contentMode = . ScaleAspectFill 
 wallpapper1 . image = UIImage . bundled ( " bg _ 1 _ preview . jpg " ) ! 
 wallpapper1 . viewDidTap = { [ unowned self ] ( ) - > ( ) in self . wallpapperDidTap ? ( name : " bg _ 1 . jpg " ) } 
 + wallpapper1Icon . image = UIImage . bundled ( " ImageSelectedOn " ) 
 
 wallpapper2 . clipsToBounds = true 
 wallpapper2 . contentMode = . ScaleAspectFill 
 wallpapper2 . image = UIImage . bundled ( " bg _ 2 _ preview . jpg " ) ! 
 wallpapper2 . viewDidTap = { [ unowned self ] ( ) - > ( ) in self . wallpapperDidTap ? ( name : " bg _ 2 . jpg " ) } 
 + wallpapper2Icon . image = UIImage . bundled ( " ImageSelectedOn " ) 
 
 wallpapper3 . clipsToBounds = true 
 wallpapper3 . contentMode = . ScaleAspectFill 
 wallpapper3 . image = UIImage . bundled ( " bg _ 3 _ preview . jpg " ) ! 
 wallpapper3 . viewDidTap = { [ unowned self ] ( ) - > ( ) in self . wallpapperDidTap ? ( name : " bg _ 3 . jpg " ) } 
 + wallpapper3Icon . image = UIImage . bundled ( " ImageSelectedOn " ) 
 
 label . font = UIFont . systemFontOfSize ( 17 ) 
 label . textColor = appStyle . cellTextColor 
 @ @ - 39 , 8 + 45 , 11 @ @ public class AAWallpapperSettingsCell : AATableViewCell { 
 disclose . image = UIImage . bundled ( " ios _ disclose " ) 
 
 self . contentView . addSubview ( wallpapper1 ) 
 + self . wallpapper1 . addSubview ( wallpapper1Icon ) 
 self . contentView . addSubview ( wallpapper2 ) 
 + self . wallpapper2 . addSubview ( wallpapper2Icon ) 
 self . contentView . addSubview ( wallpapper3 ) 
 + self . wallpapper3 . addSubview ( wallpapper3Icon ) 
 self . contentView . addSubview ( label ) 
 self . contentView . addSubview ( disclose ) 
 
 @ @ - 66 , 8 + 75 , 18 @ @ public class AAWallpapperSettingsCell : AATableViewCell { 
 wallpapper2 . frame = CGRectMake ( padding * 2 + wWidth , wPadding , wWidth , wHeight ) 
 wallpapper3 . frame = CGRectMake ( padding * 3 + wWidth * 2 , wPadding , wWidth , wHeight ) 
 
 + wallpapper1Icon . frame = CGRectMake ( wWidth - 32 , wHeight - 32 , 26 , 26 ) 
 + wallpapper2Icon . frame = CGRectMake ( wWidth - 32 , wHeight - 32 , 26 , 26 ) 
 + wallpapper3Icon . frame = CGRectMake ( wWidth - 32 , wHeight - 32 , 26 , 26 ) 
 + 
 label . frame = CGRectMake ( padding , 0 , width - padding * 2 , 44 ) 
 
 disclose . frame = CGRectMake ( width - 13 - 10 , 15 , 13 , 14 ) 
 } 
 + 
 + public func bind ( ) { 
 + wallpapper1Icon . hidden = ActorSDK . sharedActor ( ) . messenger . getSelectedWallpaper ( ) ! = " local : bg _ 1 . jpg " 
 + wallpapper2Icon . hidden = ActorSDK . sharedActor ( ) . messenger . getSelectedWallpaper ( ) ! = " local : bg _ 2 . jpg " 
 + wallpapper3Icon . hidden = ActorSDK . sharedActor ( ) . messenger . getSelectedWallpaper ( ) ! = " local : bg _ 3 . jpg " 
 + } 
 } 
 \ No newline at end of file

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift 
 index b53f1bf . . 7a03ef1 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAThumbnailView . swift 
 @ @ - 161 , 8 + 161 , 6 @ @ class AAThumbnailView : UIView , UICollectionViewDelegate , UICollectionViewDataSou 
 } 
 
 func collectionView ( collectionView : UICollectionView , numberOfItemsInSection section : Int ) - > Int { 
 - print ( " ASSSEEETS = = = \ ( self . assets . count ) " ) 
 - 
 return self . assets . count 
 } 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAWallpapperPreviewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAWallpapperPreviewController . swift 
 index 3463b55 . . 9007bfe 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAWallpapperPreviewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAWallpapperPreviewController . swift 
 @ @ - 85 , 12 + 85 , 13 @ @ public class AAWallpapperPreviewController : AAViewController { 
 
 } else { 
 dispatchBackground ( { ( ) - > Void in 
 - let descriptor = " / tmp / " + NSUUID ( ) . UUIDString 
 - let path = CocoaFiles . pathFromDescriptor ( descriptor ) ; 
 + 
 + let descriptor = " / tmp / customWallpaperImage " 
 + let path = CocoaFiles . pathFromDescriptor ( descriptor ) 
 
 UIImageJPEGRepresentation ( self . selectedImage , 1 . 00 ) ! . writeToFile ( path , atomically : true ) 
 
 - Actor . changeSelectedWallpaper ( " file : \ ( path ) " ) 
 + Actor . changeSelectedWallpaper ( " file : \ ( descriptor ) " ) 
 } ) 
 
 } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 index 18f6929 . . bf7e724 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 @ @ - 63 , 7 + 63 , 8 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 if bg . startsWith ( " local : " ) { 
 backgroundView . image = UIImage . bundled ( bg . skip ( 6 ) ) 
 } else { 
 - backgroundView . image = UIImage ( contentsOfFile : bg . skip ( 5 ) ) 
 + let path = CocoaFiles . pathFromDescriptor ( bg . skip ( 5 ) ) 
 + backgroundView . image = UIImage ( contentsOfFile : path ) 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Group / AAGroupViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Group / AAGroupViewController . swift 
 index 1f3bfe8 . . fc43d91 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Group / AAGroupViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Group / AAGroupViewController . swift 
 @ @ - 312 , 6 + 312 , 7 @ @ public class AAGroupViewController : AAContentTableController { 
 self . memberRows . data = v . toArray ( ) . toSwiftArray ( ) 
 self . memberRows . data . sortInPlace ( self . membersSort ) 
 self . memberRows . reload ( ) 
 + 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsWallpapersController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsWallpapersController . swift 
 index fdb7280 . . 5d7fb9f 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsWallpapersController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsWallpapersController . swift 
 @ @ - 45 , 6 + 45 , 27 @ @ class AASettingsWallpapersController : AATableViewController { 
 return 1 
 } 
 
 + override func tableView ( tableView : UITableView , cellForRowAtIndexPath indexPath : NSIndexPath ) - > UITableViewCell { 
 + if indexPath . section = = 0 { 
 + return photosLibrary ( indexPath ) 
 + } else { 
 + return wallpapersCell ( indexPath ) 
 + } 
 + } 
 + 
 + func tableView ( tableView : UITableView , didSelectRowAtIndexPath indexPath : NSIndexPath ) { 
 + / / 
 + self . tableView . deselectRowAtIndexPath ( indexPath , animated : true ) 
 + 
 + if indexPath . section = = 0 { 
 + 
 + self . pickImage ( . PhotoLibrary ) 
 + 
 + } 
 + 
 + } 
 + 
 + 
 func tableView ( tableView : UITableView , titleForHeaderInSection section : Int ) - > String ? { 
 return nil 
 } 
 @ @ - 61 , 6 + 82 , 9 @ @ class AASettingsWallpapersController : AATableViewController { 
 } 
 } 
 
 + / / MARK : - 
 + / / MARK : Create cells 
 + 
 private func photosLibrary ( indexPath : NSIndexPath ) - > AACommonCell { 
 let cell = AACommonCell ( ) 
 
 @ @ - 81 , 26 + 105 , 8 @ @ class AASettingsWallpapersController : AATableViewController { 
 return cell 
 } 
 
 - 
 - override func tableView ( tableView : UITableView , cellForRowAtIndexPath indexPath : NSIndexPath ) - > UITableViewCell { 
 - if indexPath . section = = 0 { 
 - return photosLibrary ( indexPath ) 
 - } else { 
 - return wallpapersCell ( indexPath ) 
 - } 
 - } 
 - 
 - func tableView ( tableView : UITableView , didSelectRowAtIndexPath indexPath : NSIndexPath ) { 
 - / / 
 - self . tableView . deselectRowAtIndexPath ( indexPath , animated : true ) 
 - 
 - if indexPath . section = = 0 { 
 - 
 - self . pickImage ( . PhotoLibrary ) 
 - 
 - } 
 - 
 - } 
 + / / MARK : - 
 + / / MARK : Picker delegate 
 
 override func imagePickerController ( picker : UIImagePickerController , didFinishPickingImage image : UIImage , editingInfo : [ String : AnyObject ] ? ) { 
 
 @ @ - 120 , 7 + 126 , 8 @ @ class AASettingsWallpapersController : AATableViewController { 
 picker . dismissViewControllerAnimated ( true , completion : nil ) 
 } 
 
 - / / Image picking 
 + / / MARK : - 
 + / / MARK : Image picking 
 
 func pickImage ( source : UIImagePickerControllerSourceType ) { 
 let pickerController = AAImagePickerController ( )
