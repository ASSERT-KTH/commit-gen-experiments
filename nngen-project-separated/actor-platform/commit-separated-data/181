BLEU SCORE: 0.355433394487517

TEST MSG: feat ( android ) : Implemented channel and group creation
GENERATED MSG: feat ( android ) : add global section to chats search

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / ComposeFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / ComposeFragment . java < nl > index c116e82 . . 58b0245 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / ComposeFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / ComposeFragment . java < nl > @ @ - 23 , 7 + 23 , 15 @ @ public class ComposeFragment extends BaseContactFragment { < nl > < nl > addFooterOrHeaderAction ( ActorSDK . sharedActor ( ) . style . getActionShareColor ( ) , < nl > R . drawable . ic _ group _ white _ 24dp , R . string . main _ fab _ new _ group , false , ( ) - > { < nl > - startActivity ( new Intent ( getActivity ( ) , CreateGroupActivity . class ) ) ; < nl > + startActivity ( new Intent ( getActivity ( ) , CreateGroupActivity . class ) < nl > + . putExtra ( CreateGroupActivity . EXTRA _ IS _ CHANNEL , false ) ) ; < nl > + getActivity ( ) . finish ( ) ; < nl > + } , true ) ; < nl > + < nl > + addFooterOrHeaderAction ( ActorSDK . sharedActor ( ) . style . getActionShareColor ( ) , < nl > + R . drawable . ic _ megaphone _ 18dp _ black , R . string . main _ fab _ new _ channel , false , ( ) - > { < nl > + startActivity ( new Intent ( getActivity ( ) , CreateGroupActivity . class ) < nl > + . putExtra ( CreateGroupActivity . EXTRA _ IS _ CHANNEL , true ) ) ; < nl > getActivity ( ) . finish ( ) ; < nl > } , true ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / CreateGroupActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / CreateGroupActivity . java < nl > index 11e80ed . . 2cbca1b 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / CreateGroupActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / CreateGroupActivity . java < nl > @ @ - 7 , 12 + 7 , 15 @ @ import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > < nl > public class CreateGroupActivity extends BaseFragmentActivity { < nl > < nl > + public static String EXTRA _ IS _ CHANNEL = " is _ channel " ; < nl > + < nl > @ Override < nl > protected void onCreate ( Bundle savedInstanceState ) { < nl > super . onCreate ( savedInstanceState ) ; < nl > < nl > if ( savedInstanceState = = null ) { < nl > - showFragment ( new GroupNameFragment ( ) , false , false ) ; < nl > + showFragment ( new GroupNameFragment ( getIntent ( ) . getBooleanExtra ( EXTRA _ IS _ CHANNEL , false ) ) , < nl > + false , false ) ; < nl > } < nl > } < nl > } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / GroupNameFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / GroupNameFragment . java < nl > index 874554f . . b53759d 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / GroupNameFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / GroupNameFragment . java < nl > @ @ - 33 , 6 + 33 , 8 @ @ public class GroupNameFragment extends BaseFragment { < nl > < nl > private static final int REQUEST _ AVATAR = 1 ; < nl > < nl > + private boolean isChannel ; < nl > + < nl > private EditText groupName ; < nl > private AvatarView avatarView ; < nl > < nl > @ @ - 42 , 17 + 44 , 43 @ @ public class GroupNameFragment extends BaseFragment { < nl > < nl > public GroupNameFragment ( ) { < nl > setRootFragment ( true ) ; < nl > - setTitle ( R . string . create _ group _ title ) ; < nl > setHomeAsUp ( true ) ; < nl > } < nl > < nl > + public GroupNameFragment ( boolean isChannel ) { < nl > + this ( ) ; < nl > + Bundle args = new Bundle ( ) ; < nl > + args . putBoolean ( " isChannel " , isChannel ) ; < nl > + setArguments ( args ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public void onCreate ( Bundle saveInstance ) { < nl > + super . onCreate ( saveInstance ) ; < nl > + this . isChannel = getArguments ( ) . getBoolean ( " isChannel " ) ; < nl > + < nl > + if ( isChannel ) { < nl > + setTitle ( R . string . create _ channel _ title ) ; < nl > + } else { < nl > + setTitle ( R . string . create _ group _ title ) ; < nl > + } < nl > + } < nl > + < nl > @ Override < nl > public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > helper = new KeyboardHelper ( getActivity ( ) ) ; < nl > < nl > View res = inflater . inflate ( R . layout . fragment _ create _ group _ name , container , false ) ; < nl > res . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > - ( ( TextView ) res . findViewById ( R . id . create _ group _ hint ) ) . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; < nl > + < nl > + TextView hintTextView = ( TextView ) res . findViewById ( R . id . create _ group _ hint ) ; < nl > + hintTextView . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; < nl > + if ( isChannel ) { < nl > + hintTextView . setText ( R . string . create _ channel _ hint ) ; < nl > + } else { < nl > + hintTextView . setText ( R . string . create _ group _ hint ) ; < nl > + } < nl > + < nl > groupName = ( EditText ) res . findViewById ( R . id . groupTitle ) ; < nl > groupName . setOnEditorActionListener ( ( v , actionId , event ) - > { < nl > if ( actionId = = EditorInfo . IME _ ACTION _ NEXT ) { < nl > @ @ - 61 , 6 + 89 , 11 @ @ public class GroupNameFragment extends BaseFragment { < nl > } < nl > return false ; < nl > } ) ; < nl > + if ( isChannel ) { < nl > + groupName . setHint ( R . string . create _ channel _ name _ hint ) ; < nl > + } else { < nl > + groupName . setHint ( R . string . create _ group _ name _ hint ) ; < nl > + } < nl > groupName . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextPrimaryColor ( ) ) ; < nl > groupName . setHintTextColor ( ActorSDK . sharedActor ( ) . style . getTextHintColor ( ) ) ; < nl > < nl > @ @ - 102 , 11 + 135 , 15 @ @ public class GroupNameFragment extends BaseFragment { < nl > private void next ( ) { < nl > String title = groupName . getText ( ) . toString ( ) . trim ( ) ; < nl > if ( title . length ( ) > 0 ) { < nl > - / / ( ( CreateGroupActivity ) getActivity ( ) ) . showNextFragment ( < nl > - / / GroupUsersFragment . create ( groupName . getText ( ) . toString ( ) . trim ( ) , avatarPath ) , false , true ) ; < nl > - messenger ( ) . createChannel ( groupName . getText ( ) . toString ( ) . trim ( ) , avatarPath ) . then ( gid - > { < nl > - getActivity ( ) . finish ( ) ; < nl > - } ) ; < nl > + if ( isChannel ) { < nl > + execute ( messenger ( ) . createChannel ( groupName . getText ( ) . toString ( ) . trim ( ) , avatarPath ) . then ( gid - > { < nl > + startActivity ( Intents . openGroupDialog ( gid , false , getActivity ( ) ) ) ; < nl > + getActivity ( ) . finish ( ) ; < nl > + } ) ) ; < nl > + } else { < nl > + ( ( CreateGroupActivity ) getActivity ( ) ) . showNextFragment ( < nl > + GroupUsersFragment . create ( groupName . getText ( ) . toString ( ) . trim ( ) , avatarPath ) , false , true ) ; < nl > + } < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > index c1d0a42 . . f068022 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > @ @ - 158 , 6 + 158 , 7 @ @ < nl > < nl > < string name = " main _ fab _ compose " > Compose < / string > < nl > < string name = " main _ fab _ new _ group " > Create group < / string > < nl > + < string name = " main _ fab _ new _ channel " > Create channel < / string > < nl > < string name = " main _ fab _ join _ public _ group " > Join public group < / string > < nl > < string name = " main _ fab _ add _ contact " > Add contact < / string > < nl > < nl > @ @ - 391 , 6 + 392 , 11 @ @ < nl > < string name = " create _ group _ search _ hint " > Search by name < / string > < nl > < string name = " create _ group _ done " > Done < / string > < nl > < nl > + < ! - - Create Channel - - > < nl > + < string name = " create _ channel _ title " > Create channel < / string > < nl > + < string name = " create _ channel _ name _ hint " > Name the channel < / string > < nl > + < string name = " create _ channel _ hint " > Enter channel name and set optional channel picture < / string > < nl > + < nl > < ! - - Group add - - > < nl > < string name = " group _ add _ title " > Add member < / string >
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / root / MainPhoneController . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / root / MainPhoneController . java < nl > index 4b06243 . . 3990dcd 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / root / MainPhoneController . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / root / MainPhoneController . java < nl > @ @ - 21 , 17 + 21 , 23 @ @ import android . view . Menu ; < nl > import android . view . MenuItem ; < nl > import android . view . View ; < nl > import android . view . ViewGroup ; < nl > + import android . widget . EditText ; < nl > import android . widget . FrameLayout ; < nl > + import android . widget . LinearLayout ; < nl > + import android . widget . ListView ; < nl > import android . widget . TextView ; < nl > < nl > import com . getbase . floatingactionbutton . FloatingActionButton ; < nl > < nl > + import java . lang . reflect . Field ; < nl > import java . util . ArrayList ; < nl > < nl > import im . actor . core . entity . Contact ; < nl > import im . actor . core . entity . Dialog ; < nl > + import im . actor . core . entity . Peer ; < nl > import im . actor . core . entity . SearchEntity ; < nl > import im . actor . core . viewmodel . CommandCallback ; < nl > + import im . actor . core . viewmodel . UserVM ; < nl > import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . ActorStyle ; < nl > import im . actor . sdk . controllers . activity . ActorMainActivity ; < nl > @ @ - 46 , 6 + 52 , 7 @ @ import im . actor . sdk . controllers . contacts . ContactsFragment ; < nl > import im . actor . sdk . controllers . dialogs . DialogsFragment ; < nl > import im . actor . sdk . controllers . fragment . help . HelpActivity ; < nl > import im . actor . sdk . controllers . fragment . main . SearchAdapter ; < nl > + import im . actor . sdk . controllers . fragment . main . SearchHolder ; < nl > import im . actor . sdk . util . Screen ; < nl > import im . actor . sdk . util . Fonts ; < nl > import im . actor . sdk . view . adapters . FragmentNoMenuStatePagerAdapter ; < nl > @ @ - 85 , 6 + 92 , 10 @ @ public class MainPhoneController extends MainBaseController { < nl > private byte [ ] docContent = null ; < nl > private String joinGroupUrl ; < nl > < nl > + SearchHolder footerSearchHolder ; < nl > + private String searchQuery ; < nl > + private LinearLayout footer ; < nl > + < nl > public MainPhoneController ( ActorMainActivity mainActivity ) { < nl > super ( mainActivity ) ; < nl > } < nl > @ @ - 433 , 12 + 444 , 40 @ @ public class MainPhoneController extends MainBaseController { < nl > < nl > @ Override < nl > public boolean onQueryTextChange ( String s ) { < nl > + searchQuery = s . trim ( ) ; < nl > + < nl > if ( isSearchVisible ) { < nl > if ( s . trim ( ) . length ( ) > 0 ) { < nl > + String activeSearchQuery = searchQuery ; < nl > searchDisplay . initSearch ( s . trim ( ) . toLowerCase ( ) , false ) ; < nl > searchAdapter . setQuery ( s . trim ( ) . toLowerCase ( ) ) ; < nl > + messenger ( ) . findUsers ( s ) . start ( new CommandCallback < UserVM [ ] > ( ) { < nl > + @ Override < nl > + public void onResult ( UserVM [ ] res ) { < nl > + int footerVisability = footer . getVisibility ( ) ; < nl > + if ( searchQuery . equals ( activeSearchQuery ) ) { < nl > + if ( res . length > 0 ) { < nl > + UserVM u = res [ 0 ] ; < nl > + footerSearchHolder . bind ( new SearchEntity ( Peer . user ( u . getId ( ) ) , 0 , u . getAvatar ( ) . get ( ) , u . getName ( ) . get ( ) ) , activeSearchQuery , true ) ; < nl > + showView ( footer ) ; < nl > + } else { < nl > + goneView ( footer ) ; < nl > + } < nl > + } < nl > + if ( footerVisability ! = footer . getVisibility ( ) ) { < nl > + onSearchChanged ( ) ; < nl > + } < nl > + } < nl > + < nl > + @ Override < nl > + public void onError ( Exception e ) { < nl > + < nl > + } < nl > + } ) ; < nl > } else { < nl > searchDisplay . initEmpty ( ) ; < nl > + goneView ( footer ) ; < nl > + < nl > } < nl > } < nl > return false ; < nl > @ @ - 488 , 6 + 527 , 51 @ @ public class MainPhoneController extends MainBaseController { < nl > header . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > recyclerAdapter . addHeaderView ( header ) ; < nl > < nl > + TextView footerTitle = new TextView ( getActivity ( ) ) ; < nl > + footerTitle . setText ( R . string . main _ search _ global _ header ) ; < nl > + footerTitle . setTextSize ( 16 ) ; < nl > + footerTitle . setPadding ( Screen . dp ( 12 ) , Screen . dp ( 8 ) , 0 , Screen . dp ( 8 ) ) ; < nl > + footerTitle . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) ) ; < nl > + footerTitle . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; < nl > + < nl > + footerSearchHolder = new SearchHolder ( getActivity ( ) , new OnItemClickedListener < SearchEntity > ( ) { < nl > + @ Override < nl > + public void onClicked ( SearchEntity item ) { < nl > + int peerId = item . getPeer ( ) . getPeerId ( ) ; < nl > + getActivity ( ) . execute ( messenger ( ) . addContact ( peerId ) , R . string . progress _ common , new CommandCallback < Boolean > ( ) { < nl > + @ Override < nl > + public void onResult ( Boolean res2 ) { < nl > + startActivity ( Intents . openPrivateDialog ( peerId , < nl > + true , < nl > + getActivity ( ) ) ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public void onError ( Exception e ) { < nl > + startActivity ( Intents . openPrivateDialog ( peerId , < nl > + true , < nl > + getActivity ( ) ) ) ; < nl > + } < nl > + } ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public boolean onLongClicked ( SearchEntity item ) { < nl > + return false ; < nl > + } < nl > + } ) ; < nl > + View footerGlobalSearchView = footerSearchHolder . itemView ; < nl > + < nl > + footer = new LinearLayout ( getActivity ( ) ) ; < nl > + footer . setOrientation ( LinearLayout . VERTICAL ) ; < nl > + LinearLayout . LayoutParams params = new LinearLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , ViewGroup . LayoutParams . WRAP _ CONTENT ) ; < nl > + footer . addView ( footerTitle , params ) ; < nl > + footer . addView ( footerGlobalSearchView , params ) ; < nl > + < nl > + footer . setVisibility ( View . GONE ) ; < nl > + < nl > + recyclerAdapter . addFooterView ( footer ) ; < nl > + < nl > searchList . setAdapter ( recyclerAdapter ) ; < nl > searchDisplay . addListener ( searchListener ) ; < nl > onHideToolbarCustomView ( ) ; < nl > @ @ - 503 , 7 + 587 , 7 @ @ public class MainPhoneController extends MainBaseController { < nl > goneView ( searchEmptyView ) ; < nl > } else { < nl > goneView ( searchHintView ) ; < nl > - if ( searchDisplay . getSize ( ) = = 0 ) { < nl > + if ( searchDisplay . getSize ( ) = = 0 & & footer . getVisibility ( ) ! = View . VISIBLE ) { < nl > showView ( searchEmptyView ) ; < nl > } else { < nl > goneView ( searchEmptyView ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml < nl > index 1ccdeb1 . . 6299a50 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml < nl > @ @ - 145 , 6 + 145 , 7 @ @ < nl > < nl > < ! - - Main - - > < nl > < string name = " main _ search _ hint " > Н а ч н и т е н а б и р а т ь д л я п о и с к а < / string > < nl > + < string name = " main _ search _ global _ header " > О б щ и й п о и с к < / string > < nl > < string name = " main _ search _ empty " > Н и ч е г о н е н а й д е н о < / string > < nl > < string name = " main _ menu _ help " > П о м о щ ь < / string > < nl > < string name = " main _ menu _ search " > П о и с к < / string > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / styles . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / styles . xml < nl > index 5a2d9f7 . . 1e719fb 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / styles . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / styles . xml < nl > @ @ - 12 , 7 + 12 , 7 @ @ < nl > < nl > < item name = " colorPrimary " > @ color / primary < / item > < nl > < item name = " colorPrimaryDark " > @ color / primary _ hovered < / item > < nl > - < item name = " colorAccent " > @ color / primary < / item > < nl > + < item name = " colorAccent " > @ color / primary _ hovered < / item > < nl > < nl > < item name = " android : colorPrimary " > @ color / primary < / item > < nl > < item name = " android : colorPrimaryDark " > @ color / primary _ hovered < / item > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > index a1d731b . . 8df3083 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > @ @ - 149 , 6 + 149 , 7 @ @ < nl > < nl > < ! - - Main - - > < nl > < string name = " main _ search _ hint " > Type something to search < / string > < nl > + < string name = " main _ search _ global _ header " > Global search < / string > < nl > < string name = " main _ search _ empty " > Nothing found < / string > < nl > < string name = " main _ menu _ help " > Help < / string > < nl > < string name = " main _ menu _ search " > Search < / string >

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / ComposeFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / ComposeFragment . java 
 index c116e82 . . 58b0245 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / ComposeFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / ComposeFragment . java 
 @ @ - 23 , 7 + 23 , 15 @ @ public class ComposeFragment extends BaseContactFragment { 
 
 addFooterOrHeaderAction ( ActorSDK . sharedActor ( ) . style . getActionShareColor ( ) , 
 R . drawable . ic _ group _ white _ 24dp , R . string . main _ fab _ new _ group , false , ( ) - > { 
 - startActivity ( new Intent ( getActivity ( ) , CreateGroupActivity . class ) ) ; 
 + startActivity ( new Intent ( getActivity ( ) , CreateGroupActivity . class ) 
 + . putExtra ( CreateGroupActivity . EXTRA _ IS _ CHANNEL , false ) ) ; 
 + getActivity ( ) . finish ( ) ; 
 + } , true ) ; 
 + 
 + addFooterOrHeaderAction ( ActorSDK . sharedActor ( ) . style . getActionShareColor ( ) , 
 + R . drawable . ic _ megaphone _ 18dp _ black , R . string . main _ fab _ new _ channel , false , ( ) - > { 
 + startActivity ( new Intent ( getActivity ( ) , CreateGroupActivity . class ) 
 + . putExtra ( CreateGroupActivity . EXTRA _ IS _ CHANNEL , true ) ) ; 
 getActivity ( ) . finish ( ) ; 
 } , true ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / CreateGroupActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / CreateGroupActivity . java 
 index 11e80ed . . 2cbca1b 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / CreateGroupActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / CreateGroupActivity . java 
 @ @ - 7 , 12 + 7 , 15 @ @ import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 
 public class CreateGroupActivity extends BaseFragmentActivity { 
 
 + public static String EXTRA _ IS _ CHANNEL = " is _ channel " ; 
 + 
 @ Override 
 protected void onCreate ( Bundle savedInstanceState ) { 
 super . onCreate ( savedInstanceState ) ; 
 
 if ( savedInstanceState = = null ) { 
 - showFragment ( new GroupNameFragment ( ) , false , false ) ; 
 + showFragment ( new GroupNameFragment ( getIntent ( ) . getBooleanExtra ( EXTRA _ IS _ CHANNEL , false ) ) , 
 + false , false ) ; 
 } 
 } 
 } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / GroupNameFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / GroupNameFragment . java 
 index 874554f . . b53759d 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / GroupNameFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / compose / GroupNameFragment . java 
 @ @ - 33 , 6 + 33 , 8 @ @ public class GroupNameFragment extends BaseFragment { 
 
 private static final int REQUEST _ AVATAR = 1 ; 
 
 + private boolean isChannel ; 
 + 
 private EditText groupName ; 
 private AvatarView avatarView ; 
 
 @ @ - 42 , 17 + 44 , 43 @ @ public class GroupNameFragment extends BaseFragment { 
 
 public GroupNameFragment ( ) { 
 setRootFragment ( true ) ; 
 - setTitle ( R . string . create _ group _ title ) ; 
 setHomeAsUp ( true ) ; 
 } 
 
 + public GroupNameFragment ( boolean isChannel ) { 
 + this ( ) ; 
 + Bundle args = new Bundle ( ) ; 
 + args . putBoolean ( " isChannel " , isChannel ) ; 
 + setArguments ( args ) ; 
 + } 
 + 
 + @ Override 
 + public void onCreate ( Bundle saveInstance ) { 
 + super . onCreate ( saveInstance ) ; 
 + this . isChannel = getArguments ( ) . getBoolean ( " isChannel " ) ; 
 + 
 + if ( isChannel ) { 
 + setTitle ( R . string . create _ channel _ title ) ; 
 + } else { 
 + setTitle ( R . string . create _ group _ title ) ; 
 + } 
 + } 
 + 
 @ Override 
 public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 helper = new KeyboardHelper ( getActivity ( ) ) ; 
 
 View res = inflater . inflate ( R . layout . fragment _ create _ group _ name , container , false ) ; 
 res . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 - ( ( TextView ) res . findViewById ( R . id . create _ group _ hint ) ) . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; 
 + 
 + TextView hintTextView = ( TextView ) res . findViewById ( R . id . create _ group _ hint ) ; 
 + hintTextView . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; 
 + if ( isChannel ) { 
 + hintTextView . setText ( R . string . create _ channel _ hint ) ; 
 + } else { 
 + hintTextView . setText ( R . string . create _ group _ hint ) ; 
 + } 
 + 
 groupName = ( EditText ) res . findViewById ( R . id . groupTitle ) ; 
 groupName . setOnEditorActionListener ( ( v , actionId , event ) - > { 
 if ( actionId = = EditorInfo . IME _ ACTION _ NEXT ) { 
 @ @ - 61 , 6 + 89 , 11 @ @ public class GroupNameFragment extends BaseFragment { 
 } 
 return false ; 
 } ) ; 
 + if ( isChannel ) { 
 + groupName . setHint ( R . string . create _ channel _ name _ hint ) ; 
 + } else { 
 + groupName . setHint ( R . string . create _ group _ name _ hint ) ; 
 + } 
 groupName . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextPrimaryColor ( ) ) ; 
 groupName . setHintTextColor ( ActorSDK . sharedActor ( ) . style . getTextHintColor ( ) ) ; 
 
 @ @ - 102 , 11 + 135 , 15 @ @ public class GroupNameFragment extends BaseFragment { 
 private void next ( ) { 
 String title = groupName . getText ( ) . toString ( ) . trim ( ) ; 
 if ( title . length ( ) > 0 ) { 
 - / / ( ( CreateGroupActivity ) getActivity ( ) ) . showNextFragment ( 
 - / / GroupUsersFragment . create ( groupName . getText ( ) . toString ( ) . trim ( ) , avatarPath ) , false , true ) ; 
 - messenger ( ) . createChannel ( groupName . getText ( ) . toString ( ) . trim ( ) , avatarPath ) . then ( gid - > { 
 - getActivity ( ) . finish ( ) ; 
 - } ) ; 
 + if ( isChannel ) { 
 + execute ( messenger ( ) . createChannel ( groupName . getText ( ) . toString ( ) . trim ( ) , avatarPath ) . then ( gid - > { 
 + startActivity ( Intents . openGroupDialog ( gid , false , getActivity ( ) ) ) ; 
 + getActivity ( ) . finish ( ) ; 
 + } ) ) ; 
 + } else { 
 + ( ( CreateGroupActivity ) getActivity ( ) ) . showNextFragment ( 
 + GroupUsersFragment . create ( groupName . getText ( ) . toString ( ) . trim ( ) , avatarPath ) , false , true ) ; 
 + } 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 index c1d0a42 . . f068022 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 @ @ - 158 , 6 + 158 , 7 @ @ 
 
 < string name = " main _ fab _ compose " > Compose < / string > 
 < string name = " main _ fab _ new _ group " > Create group < / string > 
 + < string name = " main _ fab _ new _ channel " > Create channel < / string > 
 < string name = " main _ fab _ join _ public _ group " > Join public group < / string > 
 < string name = " main _ fab _ add _ contact " > Add contact < / string > 
 
 @ @ - 391 , 6 + 392 , 11 @ @ 
 < string name = " create _ group _ search _ hint " > Search by name < / string > 
 < string name = " create _ group _ done " > Done < / string > 
 
 + < ! - - Create Channel - - > 
 + < string name = " create _ channel _ title " > Create channel < / string > 
 + < string name = " create _ channel _ name _ hint " > Name the channel < / string > 
 + < string name = " create _ channel _ hint " > Enter channel name and set optional channel picture < / string > 
 + 
 < ! - - Group add - - > 
 < string name = " group _ add _ title " > Add member < / string >

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / root / MainPhoneController . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / root / MainPhoneController . java 
 index 4b06243 . . 3990dcd 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / root / MainPhoneController . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / root / MainPhoneController . java 
 @ @ - 21 , 17 + 21 , 23 @ @ import android . view . Menu ; 
 import android . view . MenuItem ; 
 import android . view . View ; 
 import android . view . ViewGroup ; 
 + import android . widget . EditText ; 
 import android . widget . FrameLayout ; 
 + import android . widget . LinearLayout ; 
 + import android . widget . ListView ; 
 import android . widget . TextView ; 
 
 import com . getbase . floatingactionbutton . FloatingActionButton ; 
 
 + import java . lang . reflect . Field ; 
 import java . util . ArrayList ; 
 
 import im . actor . core . entity . Contact ; 
 import im . actor . core . entity . Dialog ; 
 + import im . actor . core . entity . Peer ; 
 import im . actor . core . entity . SearchEntity ; 
 import im . actor . core . viewmodel . CommandCallback ; 
 + import im . actor . core . viewmodel . UserVM ; 
 import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . ActorStyle ; 
 import im . actor . sdk . controllers . activity . ActorMainActivity ; 
 @ @ - 46 , 6 + 52 , 7 @ @ import im . actor . sdk . controllers . contacts . ContactsFragment ; 
 import im . actor . sdk . controllers . dialogs . DialogsFragment ; 
 import im . actor . sdk . controllers . fragment . help . HelpActivity ; 
 import im . actor . sdk . controllers . fragment . main . SearchAdapter ; 
 + import im . actor . sdk . controllers . fragment . main . SearchHolder ; 
 import im . actor . sdk . util . Screen ; 
 import im . actor . sdk . util . Fonts ; 
 import im . actor . sdk . view . adapters . FragmentNoMenuStatePagerAdapter ; 
 @ @ - 85 , 6 + 92 , 10 @ @ public class MainPhoneController extends MainBaseController { 
 private byte [ ] docContent = null ; 
 private String joinGroupUrl ; 
 
 + SearchHolder footerSearchHolder ; 
 + private String searchQuery ; 
 + private LinearLayout footer ; 
 + 
 public MainPhoneController ( ActorMainActivity mainActivity ) { 
 super ( mainActivity ) ; 
 } 
 @ @ - 433 , 12 + 444 , 40 @ @ public class MainPhoneController extends MainBaseController { 
 
 @ Override 
 public boolean onQueryTextChange ( String s ) { 
 + searchQuery = s . trim ( ) ; 
 + 
 if ( isSearchVisible ) { 
 if ( s . trim ( ) . length ( ) > 0 ) { 
 + String activeSearchQuery = searchQuery ; 
 searchDisplay . initSearch ( s . trim ( ) . toLowerCase ( ) , false ) ; 
 searchAdapter . setQuery ( s . trim ( ) . toLowerCase ( ) ) ; 
 + messenger ( ) . findUsers ( s ) . start ( new CommandCallback < UserVM [ ] > ( ) { 
 + @ Override 
 + public void onResult ( UserVM [ ] res ) { 
 + int footerVisability = footer . getVisibility ( ) ; 
 + if ( searchQuery . equals ( activeSearchQuery ) ) { 
 + if ( res . length > 0 ) { 
 + UserVM u = res [ 0 ] ; 
 + footerSearchHolder . bind ( new SearchEntity ( Peer . user ( u . getId ( ) ) , 0 , u . getAvatar ( ) . get ( ) , u . getName ( ) . get ( ) ) , activeSearchQuery , true ) ; 
 + showView ( footer ) ; 
 + } else { 
 + goneView ( footer ) ; 
 + } 
 + } 
 + if ( footerVisability ! = footer . getVisibility ( ) ) { 
 + onSearchChanged ( ) ; 
 + } 
 + } 
 + 
 + @ Override 
 + public void onError ( Exception e ) { 
 + 
 + } 
 + } ) ; 
 } else { 
 searchDisplay . initEmpty ( ) ; 
 + goneView ( footer ) ; 
 + 
 } 
 } 
 return false ; 
 @ @ - 488 , 6 + 527 , 51 @ @ public class MainPhoneController extends MainBaseController { 
 header . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 recyclerAdapter . addHeaderView ( header ) ; 
 
 + TextView footerTitle = new TextView ( getActivity ( ) ) ; 
 + footerTitle . setText ( R . string . main _ search _ global _ header ) ; 
 + footerTitle . setTextSize ( 16 ) ; 
 + footerTitle . setPadding ( Screen . dp ( 12 ) , Screen . dp ( 8 ) , 0 , Screen . dp ( 8 ) ) ; 
 + footerTitle . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) ) ; 
 + footerTitle . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; 
 + 
 + footerSearchHolder = new SearchHolder ( getActivity ( ) , new OnItemClickedListener < SearchEntity > ( ) { 
 + @ Override 
 + public void onClicked ( SearchEntity item ) { 
 + int peerId = item . getPeer ( ) . getPeerId ( ) ; 
 + getActivity ( ) . execute ( messenger ( ) . addContact ( peerId ) , R . string . progress _ common , new CommandCallback < Boolean > ( ) { 
 + @ Override 
 + public void onResult ( Boolean res2 ) { 
 + startActivity ( Intents . openPrivateDialog ( peerId , 
 + true , 
 + getActivity ( ) ) ) ; 
 + } 
 + 
 + @ Override 
 + public void onError ( Exception e ) { 
 + startActivity ( Intents . openPrivateDialog ( peerId , 
 + true , 
 + getActivity ( ) ) ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Override 
 + public boolean onLongClicked ( SearchEntity item ) { 
 + return false ; 
 + } 
 + } ) ; 
 + View footerGlobalSearchView = footerSearchHolder . itemView ; 
 + 
 + footer = new LinearLayout ( getActivity ( ) ) ; 
 + footer . setOrientation ( LinearLayout . VERTICAL ) ; 
 + LinearLayout . LayoutParams params = new LinearLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , ViewGroup . LayoutParams . WRAP _ CONTENT ) ; 
 + footer . addView ( footerTitle , params ) ; 
 + footer . addView ( footerGlobalSearchView , params ) ; 
 + 
 + footer . setVisibility ( View . GONE ) ; 
 + 
 + recyclerAdapter . addFooterView ( footer ) ; 
 + 
 searchList . setAdapter ( recyclerAdapter ) ; 
 searchDisplay . addListener ( searchListener ) ; 
 onHideToolbarCustomView ( ) ; 
 @ @ - 503 , 7 + 587 , 7 @ @ public class MainPhoneController extends MainBaseController { 
 goneView ( searchEmptyView ) ; 
 } else { 
 goneView ( searchHintView ) ; 
 - if ( searchDisplay . getSize ( ) = = 0 ) { 
 + if ( searchDisplay . getSize ( ) = = 0 & & footer . getVisibility ( ) ! = View . VISIBLE ) { 
 showView ( searchEmptyView ) ; 
 } else { 
 goneView ( searchEmptyView ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml 
 index 1ccdeb1 . . 6299a50 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml 
 @ @ - 145 , 6 + 145 , 7 @ @ 
 
 < ! - - Main - - > 
 < string name = " main _ search _ hint " > Н а ч н и т е н а б и р а т ь д л я п о и с к а < / string > 
 + < string name = " main _ search _ global _ header " > О б щ и й п о и с к < / string > 
 < string name = " main _ search _ empty " > Н и ч е г о н е н а й д е н о < / string > 
 < string name = " main _ menu _ help " > П о м о щ ь < / string > 
 < string name = " main _ menu _ search " > П о и с к < / string > 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / styles . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / styles . xml 
 index 5a2d9f7 . . 1e719fb 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / styles . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / styles . xml 
 @ @ - 12 , 7 + 12 , 7 @ @ 
 
 < item name = " colorPrimary " > @ color / primary < / item > 
 < item name = " colorPrimaryDark " > @ color / primary _ hovered < / item > 
 - < item name = " colorAccent " > @ color / primary < / item > 
 + < item name = " colorAccent " > @ color / primary _ hovered < / item > 
 
 < item name = " android : colorPrimary " > @ color / primary < / item > 
 < item name = " android : colorPrimaryDark " > @ color / primary _ hovered < / item > 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 index a1d731b . . 8df3083 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 @ @ - 149 , 6 + 149 , 7 @ @ 
 
 < ! - - Main - - > 
 < string name = " main _ search _ hint " > Type something to search < / string > 
 + < string name = " main _ search _ global _ header " > Global search < / string > 
 < string name = " main _ search _ empty " > Nothing found < / string > 
 < string name = " main _ menu _ help " > Help < / string > 
 < string name = " main _ menu _ search " > Search < / string >
