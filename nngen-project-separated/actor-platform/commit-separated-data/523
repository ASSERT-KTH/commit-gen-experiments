BLEU SCORE: 0.0734705312597788

TEST MSG: chore ( android : ui ) improve binding of user about & nick
GENERATED MSG: feat ( android ) : profile email contact records

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / profile / ProfileFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / profile / ProfileFragment . java < nl > index 3cd82d9 . . 9e18b54 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / profile / ProfileFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / profile / ProfileFragment . java < nl > @ @ - 64 , 7 + 64 , 7 @ @ public class ProfileFragment extends BaseFragment { < nl > private AvatarView avatarView ; < nl > < nl > @ Override < nl > - public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > + public View onCreateView ( final LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > < nl > final UserVM user = users ( ) . get ( getArguments ( ) . getInt ( EXTRA _ UID ) ) ; < nl > ArrayList < UserPhone > phones = user . getPhones ( ) . get ( ) ; < nl > @ @ - 211 , 7 + 211 , 7 @ @ public class ProfileFragment extends BaseFragment { < nl > / / Contact Information < nl > / / < nl > < nl > - LinearLayout contactsContainer = ( LinearLayout ) res . findViewById ( R . id . contactsContainer ) ; < nl > + final LinearLayout contactsContainer = ( LinearLayout ) res . findViewById ( R . id . contactsContainer ) ; < nl > boolean isFirstContact = true ; < nl > < nl > / / < nl > @ @ - 362 , 43 + 362 , 61 @ @ public class ProfileFragment extends BaseFragment { < nl > / / < nl > / / Username < nl > / / < nl > + final boolean finalIsFirstContact = isFirstContact ; < nl > + bind ( user . getNick ( ) , new ValueChangedListener < String > ( ) { < nl > + private View userNameRecord ; < nl > < nl > - if ( userName ! = null ) { < nl > - View view = buildRecord ( getString ( R . string . nickname ) , " @ " + userName , < nl > - R . drawable . ic _ import _ contacts _ black _ 24dp , < nl > - isFirstContact , < nl > - true , < nl > - inflater , contactsContainer ) ; < nl > - TextView userNameTextView = ( TextView ) view . findViewById ( R . id . value ) ; < nl > - bind ( userNameTextView , user . getNick ( ) ) ; < nl > + @ Override < nl > + public void onChanged ( final String newUserName , Value < String > valueModel ) { < nl > + if ( newUserName ! = null & & newUserName . length ( ) > 0 ) { < nl > + if ( userNameRecord = = null ) { < nl > + userNameRecord = buildRecord ( getString ( R . string . nickname ) , " @ " + newUserName , < nl > + R . drawable . ic _ import _ contacts _ black _ 24dp , < nl > + finalIsFirstContact , < nl > + true , < nl > + inflater , contactsContainer ) ; < nl > + } else { < nl > + ( ( TextView ) userNameRecord . findViewById ( R . id . value ) ) . setText ( newUserName ) ; < nl > + } < nl > < nl > - view . setOnLongClickListener ( new View . OnLongClickListener ( ) { < nl > - @ Override < nl > - public boolean onLongClick ( View v ) { < nl > - ClipboardManager clipboard = ( ClipboardManager ) getActivity ( ) . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; < nl > - ClipData clip = ClipData . newPlainText ( " Nickname " , userName ) ; < nl > - clipboard . setPrimaryClip ( clip ) ; < nl > - Snackbar . make ( res , R . string . toast _ nickname _ copied , Snackbar . LENGTH _ SHORT ) < nl > - . show ( ) ; < nl > - return true ; < nl > + < nl > + userNameRecord . setOnLongClickListener ( new View . OnLongClickListener ( ) { < nl > + @ Override < nl > + public boolean onLongClick ( View v ) { < nl > + ClipboardManager clipboard = ( ClipboardManager ) getActivity ( ) . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; < nl > + ClipData clip = ClipData . newPlainText ( " Nickname " , newUserName ) ; < nl > + clipboard . setPrimaryClip ( clip ) ; < nl > + Snackbar . make ( res , R . string . toast _ nickname _ copied , Snackbar . LENGTH _ SHORT ) < nl > + . show ( ) ; < nl > + return true ; < nl > + } < nl > + } ) ; < nl > } < nl > - } ) ; < nl > - } < nl > + } < nl > + } ) ; < nl > < nl > / / < nl > / / About < nl > / / < nl > < nl > - if ( about ! = null ) { < nl > - View view = buildRecordBig ( about , < nl > - R . drawable . ic _ info _ outline _ black _ 24dp , < nl > - true , < nl > - true , < nl > - inflater , contactsContainer ) ; < nl > - TextView aboutTextView = ( TextView ) view . findViewById ( R . id . value ) ; < nl > - bind ( aboutTextView , user . getAbout ( ) ) ; < nl > + bind ( user . getAbout ( ) , new ValueChangedListener < String > ( ) { < nl > + private View userAboutRecord ; < nl > < nl > - } < nl > + @ Override < nl > + public void onChanged ( final String newUserAbout , Value < String > valueModel ) { < nl > + if ( newUserAbout ! = null & & newUserAbout . length ( ) > 0 ) { < nl > + if ( userAboutRecord = = null ) { < nl > + userAboutRecord = buildRecordBig ( newUserAbout , < nl > + R . drawable . ic _ info _ outline _ black _ 24dp , < nl > + true , < nl > + true , < nl > + inflater , contactsContainer ) ; < nl > + } else { < nl > + ( ( TextView ) userAboutRecord . findViewById ( R . id . value ) ) . setText ( newUserAbout ) ; < nl > + } < nl > + } < nl > + } < nl > + } ) ; < nl > < nl > < nl > / /
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java < nl > index 8eba614 . . 44575fa 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java < nl > @ @ - 32 , 6 + 32 , 10 @ @ import com . google . i18n . phonenumbers . Phonenumber ; < nl > < nl > import java . util . ArrayList ; < nl > < nl > + import im . actor . core . viewmodel . UserEmail ; < nl > + import im . actor . core . viewmodel . generics . ArrayListUserEmail ; < nl > + import im . actor . runtime . mvvm . Value ; < nl > + import im . actor . runtime . mvvm . ValueChangedListener ; < nl > import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . ActorStyle ; < nl > import im . actor . sdk . R ; < nl > @ @ - 55 , 6 + 59 , 8 @ @ public class ProfileFragment extends BaseFragment { < nl > private static final String EXTRA _ UID = " uid " ; < nl > private int baseColor ; < nl > private CoverAvatarView avatarView ; < nl > + private boolean noEmails = false ; < nl > + private boolean noPhones = false ; < nl > < nl > public ProfileFragment ( ) { < nl > } < nl > @ @ - 96 , 10 + 102 , 11 @ @ public class ProfileFragment extends BaseFragment { < nl > aboutTitle . setEllipsize ( TextUtils . TruncateAt . END ) ; < nl > TextView aboutValue = ( TextView ) about . findViewById ( R . id . value ) ; < nl > aboutValue . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > - ( ( TintImageView ) about . findViewById ( R . id . recordIcon ) ) . setTint ( ActorSDK . sharedActor ( ) . style . getProfilleIconColor ( ) ) ; < nl > + TintImageView tintImageView = ( TintImageView ) about . findViewById ( R . id . recordIcon ) ; < nl > + tintImageView . setTint ( style . getRecordIconTintColor ( ) ) ; < nl > + tintImageView . setResource ( R . drawable . ic _ editor _ format _ quote _ 36dp ) ; < nl > if ( aboutText ! = null & & ! aboutText . isEmpty ( ) ) { < nl > aboutVivisbe = true ; < nl > - about . findViewById ( R . id . recordIcon ) . setVisibility ( View . INVISIBLE ) ; < nl > ( ( TextView ) about . findViewById ( R . id . value ) ) . setText ( getString ( R . string . about _ user ) ) ; < nl > about . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > @ @ - 125 , 8 + 132 , 9 @ @ public class ProfileFragment extends BaseFragment { < nl > nickValue . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > TextView nickTitle = ( TextView ) recordView . findViewById ( R . id . title ) ; < nl > nickTitle . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > - TintImageView tintImageView = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; < nl > - tintImageView . setVisibility ( View . INVISIBLE ) ; < nl > + TintImageView nickIcon = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; < nl > + nickIcon . setTint ( style . getRecordIconTintColor ( ) ) ; < nl > + nickIcon . setResource ( R . drawable . ic _ star _ white _ 36dp ) ; < nl > String value = " @ " . concat ( nick ) ; < nl > String title = getString ( R . string . nickname ) ; < nl > recordView . findViewById ( R . id . divider ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > @ @ - 138 , 33 + 146 , 29 @ @ public class ProfileFragment extends BaseFragment { < nl > } < nl > < nl > LinearLayout contactsContainer = ( LinearLayout ) res . findViewById ( R . id . phoneContainer ) ; < nl > - View abovephonesDivider = null ; < nl > + View aboveContactsDivider = null ; < nl > if ( aboutVivisbe ) { < nl > - abovephonesDivider = about . findViewById ( R . id . divider ) ; < nl > + aboveContactsDivider = about . findViewById ( R . id . divider ) ; < nl > } else if ( nickVisible ) { < nl > - abovephonesDivider = nickContainer . findViewById ( R . id . divider ) ; < nl > + aboveContactsDivider = nickContainer . findViewById ( R . id . divider ) ; < nl > < nl > } < nl > + < nl > if ( user . getPhones ( ) . get ( ) . size ( ) = = 0 ) { < nl > - contactsContainer . setVisibility ( View . GONE ) ; < nl > - if ( abovephonesDivider ! = null ) { < nl > - abovephonesDivider . setVisibility ( View . GONE ) ; < nl > - } else { < nl > - res . findViewById ( R . id . phoneDivider ) . setVisibility ( View . GONE ) ; < nl > - } < nl > + noPhones = true ; < nl > } else { < nl > contactsContainer . setVisibility ( View . VISIBLE ) ; < nl > ArrayList < UserPhone > phones = user . getPhones ( ) . get ( ) ; < nl > for ( int i = 0 ; i < phones . size ( ) ; i + + ) { < nl > final UserPhone record = phones . get ( i ) ; < nl > View recordView = inflater . inflate ( R . layout . contact _ record , contactsContainer , false ) ; < nl > - TintImageView tintImageView = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; < nl > - tintImageView . setTint ( style . getRecordIconTintColor ( ) ) ; < nl > + TintImageView phoneIcon = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; < nl > + phoneIcon . setTint ( style . getRecordIconTintColor ( ) ) ; < nl > if ( i = = 0 ) { < nl > - tintImageView . setResource ( R . drawable . ic _ call _ white _ 36dp ) ; < nl > - tintImageView . setVisibility ( View . VISIBLE ) ; < nl > + phoneIcon . setResource ( R . drawable . ic _ call _ white _ 36dp ) ; < nl > + phoneIcon . setVisibility ( View . VISIBLE ) ; < nl > } else { < nl > - tintImageView . setVisibility ( View . INVISIBLE ) ; < nl > + phoneIcon . setVisibility ( View . INVISIBLE ) ; < nl > } < nl > View divider = recordView . findViewById ( R . id . divider ) ; < nl > divider . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > @ @ - 246 , 6 + 250 , 91 @ @ public class ProfileFragment extends BaseFragment { < nl > } < nl > } < nl > < nl > + if ( user . getEmails ( ) . get ( ) . size ( ) = = 0 ) { < nl > + noEmails = true ; < nl > + } else { < nl > + ArrayList < UserEmail > emails = user . getEmails ( ) . get ( ) ; < nl > + < nl > + contactsContainer . setVisibility ( View . VISIBLE ) ; < nl > + for ( int i = 0 ; i < emails . size ( ) ; i + + ) { < nl > + final UserEmail record = emails . get ( i ) ; < nl > + View recordView = inflater . inflate ( R . layout . contact _ record , contactsContainer , false ) ; < nl > + TintImageView emailIcon = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; < nl > + emailIcon . setTint ( ActorSDK . sharedActor ( ) . style . getSettingsCategoryTextColor ( ) ) ; < nl > + if ( i = = 0 ) { < nl > + emailIcon . setResource ( R . drawable . ic _ email _ white _ 36dp ) ; < nl > + emailIcon . setVisibility ( View . VISIBLE ) ; < nl > + } else { < nl > + emailIcon . setVisibility ( View . INVISIBLE ) ; < nl > + } < nl > + < nl > + View divider = recordView . findViewById ( R . id . divider ) ; < nl > + if ( i ! = emails . size ( ) - 1 ) { < nl > + divider . setVisibility ( View . VISIBLE ) ; < nl > + } else { < nl > + divider . setVisibility ( View . GONE ) ; < nl > + } < nl > + divider . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > + < nl > + final String email = record . getEmail ( ) ; < nl > + < nl > + TextView value = ( TextView ) recordView . findViewById ( R . id . value ) ; < nl > + value . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > + value . setText ( email ) ; < nl > + TextView title = ( TextView ) recordView . findViewById ( R . id . title ) ; < nl > + title . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > + title . setText ( record . getTitle ( ) ) ; < nl > + contactsContainer . addView ( recordView , new LinearLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , < nl > + Screen . dp ( 72 ) ) ) ; < nl > + < nl > + recordView . setOnClickListener ( new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > + new AlertDialog . Builder ( getActivity ( ) ) < nl > + . setItems ( new CharSequence [ ] { < nl > + getString ( R . string . email _ menu _ email ) . replace ( " { 0 } " , email ) , < nl > + getString ( R . string . phone _ menu _ copy ) < nl > + } , new DialogInterface . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( DialogInterface dialog , int which ) { < nl > + if ( which = = 0 ) { < nl > + startActivity ( new Intent ( Intent . ACTION _ SENDTO , Uri . fromParts ( " mailto " , record . getEmail ( ) , null ) ) ) ; < nl > + } else if ( which = = 1 ) { < nl > + ClipboardManager clipboard = < nl > + ( ClipboardManager ) getActivity ( ) < nl > + . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; < nl > + ClipData clip = ClipData . newPlainText ( " Email " , email ) ; < nl > + clipboard . setPrimaryClip ( clip ) ; < nl > + Toast . makeText ( getActivity ( ) , R . string . toast _ email _ copied , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + } < nl > + } < nl > + } ) < nl > + . show ( ) < nl > + . setCanceledOnTouchOutside ( true ) ; < nl > + } < nl > + } ) ; < nl > + recordView . setOnLongClickListener ( new View . OnLongClickListener ( ) { < nl > + @ Override < nl > + public boolean onLongClick ( View v ) { < nl > + ClipboardManager clipboard = ( ClipboardManager ) getActivity ( ) . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; < nl > + ClipData clip = ClipData . newPlainText ( " Email " , " + " + record . getEmail ( ) ) ; < nl > + clipboard . setPrimaryClip ( clip ) ; < nl > + Toast . makeText ( getActivity ( ) , R . string . toast _ email _ copied , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + return true ; < nl > + } < nl > + } ) ; < nl > + } < nl > + } < nl > + < nl > + if ( noEmails & & noPhones ) { < nl > + contactsContainer . setVisibility ( View . GONE ) ; < nl > + if ( aboveContactsDivider ! = null ) { < nl > + aboveContactsDivider . setVisibility ( View . GONE ) ; < nl > + } else { < nl > + res . findViewById ( R . id . phoneDivider ) . setVisibility ( View . GONE ) ; < nl > + } < nl > + } < nl > + < nl > < nl > FloatingActionButton fab = ( FloatingActionButton ) res . findViewById ( R . id . profileAction ) ; < nl > fab . setColorNormal ( ActorSDK . sharedActor ( ) . style . getFabColor ( ) ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > index c1a8f9b . . b9dc756 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > @ @ - 32 , 8 + 32 , 10 @ @ import com . google . i18n . phonenumbers . PhoneNumberUtil ; < nl > import com . google . i18n . phonenumbers . Phonenumber ; < nl > < nl > import im . actor . core . viewmodel . CommandCallback ; < nl > + import im . actor . core . viewmodel . UserEmail ; < nl > import im . actor . core . viewmodel . UserPhone ; < nl > import im . actor . core . viewmodel . UserVM ; < nl > + import im . actor . core . viewmodel . generics . ArrayListUserEmail ; < nl > import im . actor . core . viewmodel . generics . ArrayListUserPhone ; < nl > import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . ActorStyle ; < nl > @ @ - 60 , 6 + 62 , 8 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > private CoverAvatarView avatarView ; < nl > SharedPreferences shp ; < nl > SharedPreferences . Editor ed ; < nl > + private boolean noPhones = false ; < nl > + private boolean noEmails = false ; < nl > < nl > @ Override < nl > public View onCreateView ( final LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > @ @ - 101 , 8 + 105 , 10 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > public void onChanged ( final String val , Value < String > Value ) { < nl > final View recordView = inflater . inflate ( R . layout . contact _ record , nickContainer , false ) ; < nl > recordView . findViewById ( R . id . divider ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > - TintImageView tintImageView = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; < nl > - tintImageView . setVisibility ( View . INVISIBLE ) ; < nl > + TintImageView nickIcon = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; < nl > + nickIcon . setTint ( ActorSDK . sharedActor ( ) . style . getSettingsCategoryTextColor ( ) ) ; < nl > + nickIcon . setResource ( R . drawable . ic _ star _ white _ 36dp ) ; < nl > + < nl > String value = ( val ! = null & & ! val . isEmpty ( ) ) ? val : getString ( R . string . nickname _ empty ) ; < nl > String title = getString ( R . string . nickname ) ; < nl > < nl > @ @ - 126 , 7 + 132 , 9 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > } ) ; < nl > < nl > final TextView aboutTitle = ( TextView ) about . findViewById ( R . id . value ) ; < nl > - about . findViewById ( R . id . recordIcon ) . setVisibility ( View . INVISIBLE ) ; < nl > + TintImageView aboutIcon = ( TintImageView ) about . findViewById ( R . id . recordIcon ) ; < nl > + aboutIcon . setTint ( ActorSDK . sharedActor ( ) . style . getSettingsCategoryTextColor ( ) ) ; < nl > + aboutIcon . setResource ( R . drawable . ic _ editor _ format _ quote _ 36dp ) ; < nl > TextView aboutValue = ( TextView ) about . findViewById ( R . id . title ) ; < nl > aboutTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > aboutValue . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > @ @ - 155 , 8 + 163 , 7 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > @ Override < nl > public void onChanged ( ArrayListUserPhone val , Value < ArrayListUserPhone > Value ) { < nl > if ( val . size ( ) = = 0 ) { < nl > - contactsContainer . setVisibility ( View . GONE ) ; < nl > - about . findViewById ( R . id . divider ) . setVisibility ( View . INVISIBLE ) ; < nl > + noPhones = true ; < nl > } else { < nl > contactsContainer . setVisibility ( View . VISIBLE ) ; < nl > for ( int i = 0 ; i < val . size ( ) ; i + + ) { < nl > @ @ - 172 , 10 + 179 , 10 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > } < nl > < nl > View divider = recordView . findViewById ( R . id . divider ) ; < nl > - if ( i ! = val . size ( ) - 1 ) { < nl > - divider . setVisibility ( View . VISIBLE ) ; < nl > - } else { < nl > + if ( i = = val . size ( ) - 1 & & ( userModel . getEmails ( ) . get ( ) = = null | | userModel . getEmails ( ) . get ( ) . isEmpty ( ) ) ) { < nl > divider . setVisibility ( View . GONE ) ; < nl > + } else { < nl > + divider . setVisibility ( View . VISIBLE ) ; < nl > } < nl > divider . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > < nl > @ @ - 251 , 6 + 258 , 90 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > } < nl > } ) ; < nl > < nl > + bind ( userModel . getEmails ( ) , new ValueChangedListener < ArrayListUserEmail > ( ) { < nl > + @ Override < nl > + public void onChanged ( ArrayListUserEmail val , Value < ArrayListUserEmail > Value ) { < nl > + if ( val . size ( ) = = 0 ) { < nl > + noEmails = true ; < nl > + } else { < nl > + contactsContainer . setVisibility ( View . VISIBLE ) ; < nl > + for ( int i = 0 ; i < val . size ( ) ; i + + ) { < nl > + final UserEmail record = val . get ( i ) ; < nl > + View recordView = inflater . inflate ( R . layout . contact _ record , contactsContainer , false ) ; < nl > + TintImageView tintImageView = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; < nl > + tintImageView . setTint ( ActorSDK . sharedActor ( ) . style . getSettingsCategoryTextColor ( ) ) ; < nl > + if ( i = = 0 ) { < nl > + tintImageView . setResource ( R . drawable . ic _ email _ white _ 36dp ) ; < nl > + tintImageView . setVisibility ( View . VISIBLE ) ; < nl > + } else { < nl > + tintImageView . setVisibility ( View . INVISIBLE ) ; < nl > + } < nl > + < nl > + View divider = recordView . findViewById ( R . id . divider ) ; < nl > + if ( i ! = val . size ( ) - 1 ) { < nl > + divider . setVisibility ( View . VISIBLE ) ; < nl > + } else { < nl > + divider . setVisibility ( View . GONE ) ; < nl > + } < nl > + divider . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > + < nl > + final String email = record . getEmail ( ) ; < nl > + < nl > + TextView value = ( TextView ) recordView . findViewById ( R . id . value ) ; < nl > + value . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > + value . setText ( email ) ; < nl > + TextView title = ( TextView ) recordView . findViewById ( R . id . title ) ; < nl > + title . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > + title . setText ( record . getTitle ( ) ) ; < nl > + contactsContainer . addView ( recordView , new LinearLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , < nl > + Screen . dp ( 72 ) ) ) ; < nl > + < nl > + recordView . setOnClickListener ( new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > + new AlertDialog . Builder ( getActivity ( ) ) < nl > + . setItems ( new CharSequence [ ] { < nl > + getString ( R . string . email _ menu _ email ) . replace ( " { 0 } " , email ) , < nl > + getString ( R . string . phone _ menu _ copy ) < nl > + } , new DialogInterface . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( DialogInterface dialog , int which ) { < nl > + if ( which = = 0 ) { < nl > + startActivity ( new Intent ( Intent . ACTION _ SENDTO , Uri . fromParts ( " mailto " , record . getEmail ( ) , null ) ) ) ; < nl > + } else if ( which = = 1 ) { < nl > + ClipboardManager clipboard = < nl > + ( ClipboardManager ) getActivity ( ) < nl > + . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; < nl > + ClipData clip = ClipData . newPlainText ( " Email " , email ) ; < nl > + clipboard . setPrimaryClip ( clip ) ; < nl > + Toast . makeText ( getActivity ( ) , R . string . toast _ email _ copied , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + } < nl > + } < nl > + } ) < nl > + . show ( ) < nl > + . setCanceledOnTouchOutside ( true ) ; < nl > + } < nl > + } ) ; < nl > + recordView . setOnLongClickListener ( new View . OnLongClickListener ( ) { < nl > + @ Override < nl > + public boolean onLongClick ( View v ) { < nl > + ClipboardManager clipboard = ( ClipboardManager ) getActivity ( ) . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; < nl > + ClipData clip = ClipData . newPlainText ( " Email " , " + " + record . getEmail ( ) ) ; < nl > + clipboard . setPrimaryClip ( clip ) ; < nl > + Toast . makeText ( getActivity ( ) , R . string . toast _ email _ copied , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + return true ; < nl > + } < nl > + } ) ; < nl > + } < nl > + } < nl > + } < nl > + } ) ; < nl > + < nl > + if ( noEmails & & noPhones ) { < nl > + contactsContainer . setVisibility ( View . GONE ) ; < nl > + about . findViewById ( R . id . divider ) . setVisibility ( View . INVISIBLE ) ; < nl > + } < nl > + < nl > view . findViewById ( R . id . chatSettings ) . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml < nl > index 47788a4 . . 431df18 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml < nl > @ @ - 22 , 6 + 22 , 7 @ @ < nl > < nl > < string name = " toast _ no _ sdcard " > Н е т SD - к а р т ы < / string > < nl > < string name = " toast _ phone _ copied " > Т е л е ф о н с к о п и р о в а н в б у ф е р о б м е н а < / string > < nl > + < string name = " toast _ email _ copied " > Email с к о п и р о в а н в б у ф е р о б м е н а < / string > < nl > < string name = " toast _ messages _ copied " > С о о б щ е н и я с к о п и р о в а н ы в б у ф е р о б м е н а < / string > < nl > < string name = " toast _ unable _ kick " > Н е в о з м о ж н о и с к л ю ч и т ь у ч а с т н и к а и з г р у п п ы < / string > < nl > < string name = " toast _ unable _ add " > Н е в о з м о ж н о д о б а в и т ь п о л ь з о в а т е л я в г р у п п у < / string > < nl > @ @ - 157 , 6 + 158 , 7 @ @ < nl > < nl > < ! - - Profile controls - - > < nl > < string name = " phone _ menu _ call " > П о з в о н и т ь { 0 } < / string > < nl > + < string name = " email _ menu _ email " > О т п р а в и т ь п и с ь м о { 0 } < / string > < nl > < string name = " phone _ menu _ sms " > SMS { 0 } < / string > < nl > < string name = " phone _ menu _ share " > О т п р а в и т ь { 0 } < / string > < nl > < string name = " phone _ menu _ copy " > С к о п и р о в а т ь < / string > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > index e2eb6a3 . . 5bee5e7 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml < nl > @ @ - 22 , 6 + 22 , 7 @ @ < nl > < nl > < string name = " toast _ no _ sdcard " > No SD Card < / string > < nl > < string name = " toast _ phone _ copied " > Phone number copied to pastebin < / string > < nl > + < string name = " toast _ email _ copied " > Email copied to pastebin < / string > < nl > < string name = " toast _ messages _ copied " > Messages copied to pastebin < / string > < nl > < string name = " toast _ unable _ kick " > Unable to remove member from group < / string > < nl > < string name = " toast _ unable _ add " > Unable to add user to group < / string > < nl > @ @ - 161 , 6 + 162 , 7 @ @ < nl > < nl > < ! - - Profile controls - - > < nl > < string name = " phone _ menu _ call " > Call { 0 } < / string > < nl > + < string name = " email _ menu _ email " > Email { 0 } < / string > < nl > < string name = " phone _ menu _ sms " > SMS { 0 } < / string > < nl > < string name = " phone _ menu _ share " > Share { 0 } < / string > < nl > < string name = " phone _ menu _ copy " > Copy < / string >

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / profile / ProfileFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / profile / ProfileFragment . java 
 index 3cd82d9 . . 9e18b54 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / profile / ProfileFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / profile / ProfileFragment . java 
 @ @ - 64 , 7 + 64 , 7 @ @ public class ProfileFragment extends BaseFragment { 
 private AvatarView avatarView ; 
 
 @ Override 
 - public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 + public View onCreateView ( final LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 
 final UserVM user = users ( ) . get ( getArguments ( ) . getInt ( EXTRA _ UID ) ) ; 
 ArrayList < UserPhone > phones = user . getPhones ( ) . get ( ) ; 
 @ @ - 211 , 7 + 211 , 7 @ @ public class ProfileFragment extends BaseFragment { 
 / / Contact Information 
 / / 
 
 - LinearLayout contactsContainer = ( LinearLayout ) res . findViewById ( R . id . contactsContainer ) ; 
 + final LinearLayout contactsContainer = ( LinearLayout ) res . findViewById ( R . id . contactsContainer ) ; 
 boolean isFirstContact = true ; 
 
 / / 
 @ @ - 362 , 43 + 362 , 61 @ @ public class ProfileFragment extends BaseFragment { 
 / / 
 / / Username 
 / / 
 + final boolean finalIsFirstContact = isFirstContact ; 
 + bind ( user . getNick ( ) , new ValueChangedListener < String > ( ) { 
 + private View userNameRecord ; 
 
 - if ( userName ! = null ) { 
 - View view = buildRecord ( getString ( R . string . nickname ) , " @ " + userName , 
 - R . drawable . ic _ import _ contacts _ black _ 24dp , 
 - isFirstContact , 
 - true , 
 - inflater , contactsContainer ) ; 
 - TextView userNameTextView = ( TextView ) view . findViewById ( R . id . value ) ; 
 - bind ( userNameTextView , user . getNick ( ) ) ; 
 + @ Override 
 + public void onChanged ( final String newUserName , Value < String > valueModel ) { 
 + if ( newUserName ! = null & & newUserName . length ( ) > 0 ) { 
 + if ( userNameRecord = = null ) { 
 + userNameRecord = buildRecord ( getString ( R . string . nickname ) , " @ " + newUserName , 
 + R . drawable . ic _ import _ contacts _ black _ 24dp , 
 + finalIsFirstContact , 
 + true , 
 + inflater , contactsContainer ) ; 
 + } else { 
 + ( ( TextView ) userNameRecord . findViewById ( R . id . value ) ) . setText ( newUserName ) ; 
 + } 
 
 - view . setOnLongClickListener ( new View . OnLongClickListener ( ) { 
 - @ Override 
 - public boolean onLongClick ( View v ) { 
 - ClipboardManager clipboard = ( ClipboardManager ) getActivity ( ) . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; 
 - ClipData clip = ClipData . newPlainText ( " Nickname " , userName ) ; 
 - clipboard . setPrimaryClip ( clip ) ; 
 - Snackbar . make ( res , R . string . toast _ nickname _ copied , Snackbar . LENGTH _ SHORT ) 
 - . show ( ) ; 
 - return true ; 
 + 
 + userNameRecord . setOnLongClickListener ( new View . OnLongClickListener ( ) { 
 + @ Override 
 + public boolean onLongClick ( View v ) { 
 + ClipboardManager clipboard = ( ClipboardManager ) getActivity ( ) . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; 
 + ClipData clip = ClipData . newPlainText ( " Nickname " , newUserName ) ; 
 + clipboard . setPrimaryClip ( clip ) ; 
 + Snackbar . make ( res , R . string . toast _ nickname _ copied , Snackbar . LENGTH _ SHORT ) 
 + . show ( ) ; 
 + return true ; 
 + } 
 + } ) ; 
 } 
 - } ) ; 
 - } 
 + } 
 + } ) ; 
 
 / / 
 / / About 
 / / 
 
 - if ( about ! = null ) { 
 - View view = buildRecordBig ( about , 
 - R . drawable . ic _ info _ outline _ black _ 24dp , 
 - true , 
 - true , 
 - inflater , contactsContainer ) ; 
 - TextView aboutTextView = ( TextView ) view . findViewById ( R . id . value ) ; 
 - bind ( aboutTextView , user . getAbout ( ) ) ; 
 + bind ( user . getAbout ( ) , new ValueChangedListener < String > ( ) { 
 + private View userAboutRecord ; 
 
 - } 
 + @ Override 
 + public void onChanged ( final String newUserAbout , Value < String > valueModel ) { 
 + if ( newUserAbout ! = null & & newUserAbout . length ( ) > 0 ) { 
 + if ( userAboutRecord = = null ) { 
 + userAboutRecord = buildRecordBig ( newUserAbout , 
 + R . drawable . ic _ info _ outline _ black _ 24dp , 
 + true , 
 + true , 
 + inflater , contactsContainer ) ; 
 + } else { 
 + ( ( TextView ) userAboutRecord . findViewById ( R . id . value ) ) . setText ( newUserAbout ) ; 
 + } 
 + } 
 + } 
 + } ) ; 
 
 
 / /

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java 
 index 8eba614 . . 44575fa 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java 
 @ @ - 32 , 6 + 32 , 10 @ @ import com . google . i18n . phonenumbers . Phonenumber ; 
 
 import java . util . ArrayList ; 
 
 + import im . actor . core . viewmodel . UserEmail ; 
 + import im . actor . core . viewmodel . generics . ArrayListUserEmail ; 
 + import im . actor . runtime . mvvm . Value ; 
 + import im . actor . runtime . mvvm . ValueChangedListener ; 
 import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . ActorStyle ; 
 import im . actor . sdk . R ; 
 @ @ - 55 , 6 + 59 , 8 @ @ public class ProfileFragment extends BaseFragment { 
 private static final String EXTRA _ UID = " uid " ; 
 private int baseColor ; 
 private CoverAvatarView avatarView ; 
 + private boolean noEmails = false ; 
 + private boolean noPhones = false ; 
 
 public ProfileFragment ( ) { 
 } 
 @ @ - 96 , 10 + 102 , 11 @ @ public class ProfileFragment extends BaseFragment { 
 aboutTitle . setEllipsize ( TextUtils . TruncateAt . END ) ; 
 TextView aboutValue = ( TextView ) about . findViewById ( R . id . value ) ; 
 aboutValue . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 - ( ( TintImageView ) about . findViewById ( R . id . recordIcon ) ) . setTint ( ActorSDK . sharedActor ( ) . style . getProfilleIconColor ( ) ) ; 
 + TintImageView tintImageView = ( TintImageView ) about . findViewById ( R . id . recordIcon ) ; 
 + tintImageView . setTint ( style . getRecordIconTintColor ( ) ) ; 
 + tintImageView . setResource ( R . drawable . ic _ editor _ format _ quote _ 36dp ) ; 
 if ( aboutText ! = null & & ! aboutText . isEmpty ( ) ) { 
 aboutVivisbe = true ; 
 - about . findViewById ( R . id . recordIcon ) . setVisibility ( View . INVISIBLE ) ; 
 ( ( TextView ) about . findViewById ( R . id . value ) ) . setText ( getString ( R . string . about _ user ) ) ; 
 about . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 @ @ - 125 , 8 + 132 , 9 @ @ public class ProfileFragment extends BaseFragment { 
 nickValue . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 TextView nickTitle = ( TextView ) recordView . findViewById ( R . id . title ) ; 
 nickTitle . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 - TintImageView tintImageView = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; 
 - tintImageView . setVisibility ( View . INVISIBLE ) ; 
 + TintImageView nickIcon = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; 
 + nickIcon . setTint ( style . getRecordIconTintColor ( ) ) ; 
 + nickIcon . setResource ( R . drawable . ic _ star _ white _ 36dp ) ; 
 String value = " @ " . concat ( nick ) ; 
 String title = getString ( R . string . nickname ) ; 
 recordView . findViewById ( R . id . divider ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 @ @ - 138 , 33 + 146 , 29 @ @ public class ProfileFragment extends BaseFragment { 
 } 
 
 LinearLayout contactsContainer = ( LinearLayout ) res . findViewById ( R . id . phoneContainer ) ; 
 - View abovephonesDivider = null ; 
 + View aboveContactsDivider = null ; 
 if ( aboutVivisbe ) { 
 - abovephonesDivider = about . findViewById ( R . id . divider ) ; 
 + aboveContactsDivider = about . findViewById ( R . id . divider ) ; 
 } else if ( nickVisible ) { 
 - abovephonesDivider = nickContainer . findViewById ( R . id . divider ) ; 
 + aboveContactsDivider = nickContainer . findViewById ( R . id . divider ) ; 
 
 } 
 + 
 if ( user . getPhones ( ) . get ( ) . size ( ) = = 0 ) { 
 - contactsContainer . setVisibility ( View . GONE ) ; 
 - if ( abovephonesDivider ! = null ) { 
 - abovephonesDivider . setVisibility ( View . GONE ) ; 
 - } else { 
 - res . findViewById ( R . id . phoneDivider ) . setVisibility ( View . GONE ) ; 
 - } 
 + noPhones = true ; 
 } else { 
 contactsContainer . setVisibility ( View . VISIBLE ) ; 
 ArrayList < UserPhone > phones = user . getPhones ( ) . get ( ) ; 
 for ( int i = 0 ; i < phones . size ( ) ; i + + ) { 
 final UserPhone record = phones . get ( i ) ; 
 View recordView = inflater . inflate ( R . layout . contact _ record , contactsContainer , false ) ; 
 - TintImageView tintImageView = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; 
 - tintImageView . setTint ( style . getRecordIconTintColor ( ) ) ; 
 + TintImageView phoneIcon = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; 
 + phoneIcon . setTint ( style . getRecordIconTintColor ( ) ) ; 
 if ( i = = 0 ) { 
 - tintImageView . setResource ( R . drawable . ic _ call _ white _ 36dp ) ; 
 - tintImageView . setVisibility ( View . VISIBLE ) ; 
 + phoneIcon . setResource ( R . drawable . ic _ call _ white _ 36dp ) ; 
 + phoneIcon . setVisibility ( View . VISIBLE ) ; 
 } else { 
 - tintImageView . setVisibility ( View . INVISIBLE ) ; 
 + phoneIcon . setVisibility ( View . INVISIBLE ) ; 
 } 
 View divider = recordView . findViewById ( R . id . divider ) ; 
 divider . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 @ @ - 246 , 6 + 250 , 91 @ @ public class ProfileFragment extends BaseFragment { 
 } 
 } 
 
 + if ( user . getEmails ( ) . get ( ) . size ( ) = = 0 ) { 
 + noEmails = true ; 
 + } else { 
 + ArrayList < UserEmail > emails = user . getEmails ( ) . get ( ) ; 
 + 
 + contactsContainer . setVisibility ( View . VISIBLE ) ; 
 + for ( int i = 0 ; i < emails . size ( ) ; i + + ) { 
 + final UserEmail record = emails . get ( i ) ; 
 + View recordView = inflater . inflate ( R . layout . contact _ record , contactsContainer , false ) ; 
 + TintImageView emailIcon = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; 
 + emailIcon . setTint ( ActorSDK . sharedActor ( ) . style . getSettingsCategoryTextColor ( ) ) ; 
 + if ( i = = 0 ) { 
 + emailIcon . setResource ( R . drawable . ic _ email _ white _ 36dp ) ; 
 + emailIcon . setVisibility ( View . VISIBLE ) ; 
 + } else { 
 + emailIcon . setVisibility ( View . INVISIBLE ) ; 
 + } 
 + 
 + View divider = recordView . findViewById ( R . id . divider ) ; 
 + if ( i ! = emails . size ( ) - 1 ) { 
 + divider . setVisibility ( View . VISIBLE ) ; 
 + } else { 
 + divider . setVisibility ( View . GONE ) ; 
 + } 
 + divider . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 + 
 + final String email = record . getEmail ( ) ; 
 + 
 + TextView value = ( TextView ) recordView . findViewById ( R . id . value ) ; 
 + value . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 + value . setText ( email ) ; 
 + TextView title = ( TextView ) recordView . findViewById ( R . id . title ) ; 
 + title . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 + title . setText ( record . getTitle ( ) ) ; 
 + contactsContainer . addView ( recordView , new LinearLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , 
 + Screen . dp ( 72 ) ) ) ; 
 + 
 + recordView . setOnClickListener ( new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + new AlertDialog . Builder ( getActivity ( ) ) 
 + . setItems ( new CharSequence [ ] { 
 + getString ( R . string . email _ menu _ email ) . replace ( " { 0 } " , email ) , 
 + getString ( R . string . phone _ menu _ copy ) 
 + } , new DialogInterface . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( DialogInterface dialog , int which ) { 
 + if ( which = = 0 ) { 
 + startActivity ( new Intent ( Intent . ACTION _ SENDTO , Uri . fromParts ( " mailto " , record . getEmail ( ) , null ) ) ) ; 
 + } else if ( which = = 1 ) { 
 + ClipboardManager clipboard = 
 + ( ClipboardManager ) getActivity ( ) 
 + . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; 
 + ClipData clip = ClipData . newPlainText ( " Email " , email ) ; 
 + clipboard . setPrimaryClip ( clip ) ; 
 + Toast . makeText ( getActivity ( ) , R . string . toast _ email _ copied , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + } 
 + } 
 + } ) 
 + . show ( ) 
 + . setCanceledOnTouchOutside ( true ) ; 
 + } 
 + } ) ; 
 + recordView . setOnLongClickListener ( new View . OnLongClickListener ( ) { 
 + @ Override 
 + public boolean onLongClick ( View v ) { 
 + ClipboardManager clipboard = ( ClipboardManager ) getActivity ( ) . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; 
 + ClipData clip = ClipData . newPlainText ( " Email " , " + " + record . getEmail ( ) ) ; 
 + clipboard . setPrimaryClip ( clip ) ; 
 + Toast . makeText ( getActivity ( ) , R . string . toast _ email _ copied , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + return true ; 
 + } 
 + } ) ; 
 + } 
 + } 
 + 
 + if ( noEmails & & noPhones ) { 
 + contactsContainer . setVisibility ( View . GONE ) ; 
 + if ( aboveContactsDivider ! = null ) { 
 + aboveContactsDivider . setVisibility ( View . GONE ) ; 
 + } else { 
 + res . findViewById ( R . id . phoneDivider ) . setVisibility ( View . GONE ) ; 
 + } 
 + } 
 + 
 
 FloatingActionButton fab = ( FloatingActionButton ) res . findViewById ( R . id . profileAction ) ; 
 fab . setColorNormal ( ActorSDK . sharedActor ( ) . style . getFabColor ( ) ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 index c1a8f9b . . b9dc756 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 @ @ - 32 , 8 + 32 , 10 @ @ import com . google . i18n . phonenumbers . PhoneNumberUtil ; 
 import com . google . i18n . phonenumbers . Phonenumber ; 
 
 import im . actor . core . viewmodel . CommandCallback ; 
 + import im . actor . core . viewmodel . UserEmail ; 
 import im . actor . core . viewmodel . UserPhone ; 
 import im . actor . core . viewmodel . UserVM ; 
 + import im . actor . core . viewmodel . generics . ArrayListUserEmail ; 
 import im . actor . core . viewmodel . generics . ArrayListUserPhone ; 
 import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . ActorStyle ; 
 @ @ - 60 , 6 + 62 , 8 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 private CoverAvatarView avatarView ; 
 SharedPreferences shp ; 
 SharedPreferences . Editor ed ; 
 + private boolean noPhones = false ; 
 + private boolean noEmails = false ; 
 
 @ Override 
 public View onCreateView ( final LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 @ @ - 101 , 8 + 105 , 10 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 public void onChanged ( final String val , Value < String > Value ) { 
 final View recordView = inflater . inflate ( R . layout . contact _ record , nickContainer , false ) ; 
 recordView . findViewById ( R . id . divider ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 - TintImageView tintImageView = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; 
 - tintImageView . setVisibility ( View . INVISIBLE ) ; 
 + TintImageView nickIcon = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; 
 + nickIcon . setTint ( ActorSDK . sharedActor ( ) . style . getSettingsCategoryTextColor ( ) ) ; 
 + nickIcon . setResource ( R . drawable . ic _ star _ white _ 36dp ) ; 
 + 
 String value = ( val ! = null & & ! val . isEmpty ( ) ) ? val : getString ( R . string . nickname _ empty ) ; 
 String title = getString ( R . string . nickname ) ; 
 
 @ @ - 126 , 7 + 132 , 9 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 } ) ; 
 
 final TextView aboutTitle = ( TextView ) about . findViewById ( R . id . value ) ; 
 - about . findViewById ( R . id . recordIcon ) . setVisibility ( View . INVISIBLE ) ; 
 + TintImageView aboutIcon = ( TintImageView ) about . findViewById ( R . id . recordIcon ) ; 
 + aboutIcon . setTint ( ActorSDK . sharedActor ( ) . style . getSettingsCategoryTextColor ( ) ) ; 
 + aboutIcon . setResource ( R . drawable . ic _ editor _ format _ quote _ 36dp ) ; 
 TextView aboutValue = ( TextView ) about . findViewById ( R . id . title ) ; 
 aboutTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 aboutValue . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 @ @ - 155 , 8 + 163 , 7 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 @ Override 
 public void onChanged ( ArrayListUserPhone val , Value < ArrayListUserPhone > Value ) { 
 if ( val . size ( ) = = 0 ) { 
 - contactsContainer . setVisibility ( View . GONE ) ; 
 - about . findViewById ( R . id . divider ) . setVisibility ( View . INVISIBLE ) ; 
 + noPhones = true ; 
 } else { 
 contactsContainer . setVisibility ( View . VISIBLE ) ; 
 for ( int i = 0 ; i < val . size ( ) ; i + + ) { 
 @ @ - 172 , 10 + 179 , 10 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 } 
 
 View divider = recordView . findViewById ( R . id . divider ) ; 
 - if ( i ! = val . size ( ) - 1 ) { 
 - divider . setVisibility ( View . VISIBLE ) ; 
 - } else { 
 + if ( i = = val . size ( ) - 1 & & ( userModel . getEmails ( ) . get ( ) = = null | | userModel . getEmails ( ) . get ( ) . isEmpty ( ) ) ) { 
 divider . setVisibility ( View . GONE ) ; 
 + } else { 
 + divider . setVisibility ( View . VISIBLE ) ; 
 } 
 divider . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 
 @ @ - 251 , 6 + 258 , 90 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 } 
 } ) ; 
 
 + bind ( userModel . getEmails ( ) , new ValueChangedListener < ArrayListUserEmail > ( ) { 
 + @ Override 
 + public void onChanged ( ArrayListUserEmail val , Value < ArrayListUserEmail > Value ) { 
 + if ( val . size ( ) = = 0 ) { 
 + noEmails = true ; 
 + } else { 
 + contactsContainer . setVisibility ( View . VISIBLE ) ; 
 + for ( int i = 0 ; i < val . size ( ) ; i + + ) { 
 + final UserEmail record = val . get ( i ) ; 
 + View recordView = inflater . inflate ( R . layout . contact _ record , contactsContainer , false ) ; 
 + TintImageView tintImageView = ( TintImageView ) recordView . findViewById ( R . id . recordIcon ) ; 
 + tintImageView . setTint ( ActorSDK . sharedActor ( ) . style . getSettingsCategoryTextColor ( ) ) ; 
 + if ( i = = 0 ) { 
 + tintImageView . setResource ( R . drawable . ic _ email _ white _ 36dp ) ; 
 + tintImageView . setVisibility ( View . VISIBLE ) ; 
 + } else { 
 + tintImageView . setVisibility ( View . INVISIBLE ) ; 
 + } 
 + 
 + View divider = recordView . findViewById ( R . id . divider ) ; 
 + if ( i ! = val . size ( ) - 1 ) { 
 + divider . setVisibility ( View . VISIBLE ) ; 
 + } else { 
 + divider . setVisibility ( View . GONE ) ; 
 + } 
 + divider . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 + 
 + final String email = record . getEmail ( ) ; 
 + 
 + TextView value = ( TextView ) recordView . findViewById ( R . id . value ) ; 
 + value . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 + value . setText ( email ) ; 
 + TextView title = ( TextView ) recordView . findViewById ( R . id . title ) ; 
 + title . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 + title . setText ( record . getTitle ( ) ) ; 
 + contactsContainer . addView ( recordView , new LinearLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , 
 + Screen . dp ( 72 ) ) ) ; 
 + 
 + recordView . setOnClickListener ( new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + new AlertDialog . Builder ( getActivity ( ) ) 
 + . setItems ( new CharSequence [ ] { 
 + getString ( R . string . email _ menu _ email ) . replace ( " { 0 } " , email ) , 
 + getString ( R . string . phone _ menu _ copy ) 
 + } , new DialogInterface . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( DialogInterface dialog , int which ) { 
 + if ( which = = 0 ) { 
 + startActivity ( new Intent ( Intent . ACTION _ SENDTO , Uri . fromParts ( " mailto " , record . getEmail ( ) , null ) ) ) ; 
 + } else if ( which = = 1 ) { 
 + ClipboardManager clipboard = 
 + ( ClipboardManager ) getActivity ( ) 
 + . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; 
 + ClipData clip = ClipData . newPlainText ( " Email " , email ) ; 
 + clipboard . setPrimaryClip ( clip ) ; 
 + Toast . makeText ( getActivity ( ) , R . string . toast _ email _ copied , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + } 
 + } 
 + } ) 
 + . show ( ) 
 + . setCanceledOnTouchOutside ( true ) ; 
 + } 
 + } ) ; 
 + recordView . setOnLongClickListener ( new View . OnLongClickListener ( ) { 
 + @ Override 
 + public boolean onLongClick ( View v ) { 
 + ClipboardManager clipboard = ( ClipboardManager ) getActivity ( ) . getSystemService ( Context . CLIPBOARD _ SERVICE ) ; 
 + ClipData clip = ClipData . newPlainText ( " Email " , " + " + record . getEmail ( ) ) ; 
 + clipboard . setPrimaryClip ( clip ) ; 
 + Toast . makeText ( getActivity ( ) , R . string . toast _ email _ copied , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + return true ; 
 + } 
 + } ) ; 
 + } 
 + } 
 + } 
 + } ) ; 
 + 
 + if ( noEmails & & noPhones ) { 
 + contactsContainer . setVisibility ( View . GONE ) ; 
 + about . findViewById ( R . id . divider ) . setVisibility ( View . INVISIBLE ) ; 
 + } 
 + 
 view . findViewById ( R . id . chatSettings ) . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml 
 index 47788a4 . . 431df18 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values - ru / ui _ text . xml 
 @ @ - 22 , 6 + 22 , 7 @ @ 
 
 < string name = " toast _ no _ sdcard " > Н е т SD - к а р т ы < / string > 
 < string name = " toast _ phone _ copied " > Т е л е ф о н с к о п и р о в а н в б у ф е р о б м е н а < / string > 
 + < string name = " toast _ email _ copied " > Email с к о п и р о в а н в б у ф е р о б м е н а < / string > 
 < string name = " toast _ messages _ copied " > С о о б щ е н и я с к о п и р о в а н ы в б у ф е р о б м е н а < / string > 
 < string name = " toast _ unable _ kick " > Н е в о з м о ж н о и с к л ю ч и т ь у ч а с т н и к а и з г р у п п ы < / string > 
 < string name = " toast _ unable _ add " > Н е в о з м о ж н о д о б а в и т ь п о л ь з о в а т е л я в г р у п п у < / string > 
 @ @ - 157 , 6 + 158 , 7 @ @ 
 
 < ! - - Profile controls - - > 
 < string name = " phone _ menu _ call " > П о з в о н и т ь { 0 } < / string > 
 + < string name = " email _ menu _ email " > О т п р а в и т ь п и с ь м о { 0 } < / string > 
 < string name = " phone _ menu _ sms " > SMS { 0 } < / string > 
 < string name = " phone _ menu _ share " > О т п р а в и т ь { 0 } < / string > 
 < string name = " phone _ menu _ copy " > С к о п и р о в а т ь < / string > 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 index e2eb6a3 . . 5bee5e7 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ui _ text . xml 
 @ @ - 22 , 6 + 22 , 7 @ @ 
 
 < string name = " toast _ no _ sdcard " > No SD Card < / string > 
 < string name = " toast _ phone _ copied " > Phone number copied to pastebin < / string > 
 + < string name = " toast _ email _ copied " > Email copied to pastebin < / string > 
 < string name = " toast _ messages _ copied " > Messages copied to pastebin < / string > 
 < string name = " toast _ unable _ kick " > Unable to remove member from group < / string > 
 < string name = " toast _ unable _ add " > Unable to add user to group < / string > 
 @ @ - 161 , 6 + 162 , 7 @ @ 
 
 < ! - - Profile controls - - > 
 < string name = " phone _ menu _ call " > Call { 0 } < / string > 
 + < string name = " email _ menu _ email " > Email { 0 } < / string > 
 < string name = " phone _ menu _ sms " > SMS { 0 } < / string > 
 < string name = " phone _ menu _ share " > Share { 0 } < / string > 
 < string name = " phone _ menu _ copy " > Copy < / string >
