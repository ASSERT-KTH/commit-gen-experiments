BLEU SCORE: 0.14458924666162856

TEST MSG: fix ( server : cqrs ) : call commit and applySnapshot from receiveRecover
GENERATED MSG: fix ( server ) : fix ProcessorState

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala < nl > index 824de99 . . dc2314d 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala < nl > @ @ - 106 , 9 + 106 , 9 @ @ abstract class Processor [ S < : ProcessorState [ S ] ] < nl > < nl > override final def receiveRecover = { < nl > case e : Event ⇒ < nl > - setState ( state . updated ( e ) ) < nl > + commit ( e ) < nl > case SnapshotOffer ( metadata , snapshot ) ⇒ < nl > - setState ( state . withSnapshot ( metadata , snapshot ) ) < nl > + applySnapshot ( metadata , snapshot ) < nl > case RecoveryCompleted ⇒ onRecoveryCompleted ( ) < nl > case SaveSnapshotFailure ( metadata , cause ) ⇒ < nl > log . error ( cause , " Failed to save snapshot , metadata : { } " , metadata )
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala < nl > index 311a0a1 . . 3f61fcb 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala < nl > @ @ - 20 , 6 + 20 , 8 @ @ import scala . util . { Failure , Success } < nl > case object EntityNotFound extends RuntimeException with NoStackTrace < nl > case object StopOffice < nl > < nl > + trait ProcessorState < nl > + < nl > trait Processor [ State , Event < : AnyRef ] extends PersistentActor with ActorFutures { < nl > < nl > case class UnstashAndWork ( evt : Event , state : State )

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala 
 index 824de99 . . dc2314d 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala 
 @ @ - 106 , 9 + 106 , 9 @ @ abstract class Processor [ S < : ProcessorState [ S ] ] 
 
 override final def receiveRecover = { 
 case e : Event ⇒ 
 - setState ( state . updated ( e ) ) 
 + commit ( e ) 
 case SnapshotOffer ( metadata , snapshot ) ⇒ 
 - setState ( state . withSnapshot ( metadata , snapshot ) ) 
 + applySnapshot ( metadata , snapshot ) 
 case RecoveryCompleted ⇒ onRecoveryCompleted ( ) 
 case SaveSnapshotFailure ( metadata , cause ) ⇒ 
 log . error ( cause , " Failed to save snapshot , metadata : { } " , metadata )

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala 
 index 311a0a1 . . 3f61fcb 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala 
 @ @ - 20 , 6 + 20 , 8 @ @ import scala . util . { Failure , Success } 
 case object EntityNotFound extends RuntimeException with NoStackTrace 
 case object StopOffice 
 
 + trait ProcessorState 
 + 
 trait Processor [ State , Event < : AnyRef ] extends PersistentActor with ActorFutures { 
 
 case class UnstashAndWork ( evt : Event , state : State )
