BLEU SCORE: 0.1092329990819115

TEST MSG: ref ( webrtc ) : Remove WebRTCLocalStream
GENERATED MSG: feat ( js ) : Enable stack trace logging

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorCore / Providers / CocoaWebRTCRuntime . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorCore / Providers / CocoaWebRTCRuntime . swift < nl > index 4bf7a9c . . fa428eb 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorCore / Providers / CocoaWebRTCRuntime . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorCore / Providers / CocoaWebRTCRuntime . swift < nl > @ @ - 21 , 7 + 21 , 7 @ @ class CocoaWebRTCRuntime : NSObject , ARWebRTCRuntime { < nl > } < nl > } < nl > < nl > - extension RTCAudioTrack : ARWebRTCLocalStream { < nl > + extension RTCAudioTrack : ARWebRTCMediaStream { < nl > < nl > } < nl > < nl > @ @ - 58 , 7 + 58 , 7 @ @ class CocoaWebRTCPeerConnection : NSObject , ARWebRTCPeerConnection , RTCPeerConnec < nl > peerConnection . addICECandidate ( RTCICECandidate ( mid : id _ , index : Int ( label ) , sdp : candidate ) ) < nl > } < nl > < nl > - func addOwnStream ( stream : ARWebRTCLocalStream ) { < nl > + func addOwnStream ( stream : ARWebRTCMediaStream ) { < nl > if let audio = stream as ? RTCAudioTrack { < nl > print ( " addOwnStream " ) < nl > let mediaStream = peerConnectionFactory . mediaStreamWithLabel ( " ARDAMSa0 " ) < nl > diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsWebRTCProvider . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsWebRTCProvider . java < nl > index 16b405a . . 873a8ab 100644 < nl > - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsWebRTCProvider . java < nl > + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsWebRTCProvider . java < nl > @ @ - 12 , 7 + 12 , 7 @ @ import im . actor . runtime . js . webrtc . PeerConnection ; < nl > import im . actor . runtime . promise . Promise ; < nl > import im . actor . runtime . promise . PromiseFunc ; < nl > import im . actor . runtime . promise . PromiseResolver ; < nl > - import im . actor . runtime . webrtc . WebRTCLocalStream ; < nl > + import im . actor . runtime . webrtc . WebRTCMediaStream ; < nl > import im . actor . runtime . webrtc . WebRTCPeerConnection ; < nl > < nl > public class JsWebRTCProvider implements WebRTCRuntime { < nl > @ @ - 30 , 10 + 30 , 10 @ @ public class JsWebRTCProvider implements WebRTCRuntime { < nl > < nl > @ NotNull < nl > @ Override < nl > - public Promise < WebRTCLocalStream > getUserAudio ( ) { < nl > - return new Promise < > ( new PromiseFunc < WebRTCLocalStream > ( ) { < nl > + public Promise < WebRTCMediaStream > getUserAudio ( ) { < nl > + return new Promise < > ( new PromiseFunc < WebRTCMediaStream > ( ) { < nl > @ Override < nl > - public void exec ( @ NotNull final PromiseResolver < WebRTCLocalStream > resolver ) { < nl > + public void exec ( @ NotNull final PromiseResolver < WebRTCMediaStream > resolver ) { < nl > JsStreaming . getUserAudio ( ) . then ( new Consumer < JsMediaStream > ( ) { < nl > @ Override < nl > public void apply ( JsMediaStream jsMediaStream ) { < nl > diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / JsMediaStream . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / JsMediaStream . java < nl > index e9e6f04 . . ff8ded5 100644 < nl > - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / JsMediaStream . java < nl > + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / JsMediaStream . java < nl > @ @ - 3 , 9 + 3 , 9 @ @ package im . actor . runtime . js . webrtc ; < nl > import com . google . gwt . core . client . JavaScriptObject ; < nl > import com . google . gwt . core . client . JsArray ; < nl > < nl > - import im . actor . runtime . webrtc . WebRTCLocalStream ; < nl > + import im . actor . runtime . webrtc . WebRTCMediaStream ; < nl > < nl > - public class JsMediaStream extends JavaScriptObject implements WebRTCLocalStream { < nl > + public class JsMediaStream extends JavaScriptObject implements WebRTCMediaStream { < nl > < nl > protected JsMediaStream ( ) { < nl > < nl > diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / PeerConnection . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / PeerConnection . java < nl > index 3bd1d08 . . 6be7fbd 100644 < nl > - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / PeerConnection . java < nl > + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / PeerConnection . java < nl > @ @ - 12 , 7 + 12 , 7 @ @ import im . actor . runtime . js . entity . JsClosureError ; < nl > import im . actor . runtime . promise . Promise ; < nl > import im . actor . runtime . promise . PromiseFunc ; < nl > import im . actor . runtime . promise . PromiseResolver ; < nl > - import im . actor . runtime . webrtc . WebRTCLocalStream ; < nl > + import im . actor . runtime . webrtc . WebRTCMediaStream ; < nl > import im . actor . runtime . webrtc . WebRTCPeerConnection ; < nl > import im . actor . runtime . webrtc . WebRTCPeerConnectionCallback ; < nl > import im . actor . runtime . webrtc . WebRTCSessionDescription ; < nl > @ @ - 64 , 7 + 64 , 7 @ @ public class PeerConnection implements WebRTCPeerConnection { < nl > } < nl > < nl > @ Override < nl > - public void addOwnStream ( @ NotNull WebRTCLocalStream stream ) { < nl > + public void addOwnStream ( @ NotNull WebRTCMediaStream stream ) { < nl > if ( stream instanceof JsMediaStream ) { < nl > peerConnection . addStream ( ( JsMediaStream ) stream ) ; < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java < nl > index f60dff5 . . cb3bc8f 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java < nl > + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java < nl > @ @ - 249 , 7 + 249 , 7 @ @ public class JsFacade implements Exportable { < nl > } < nl > } ) ; < nl > } catch ( Exception e ) { < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > im . actor . runtime . Runtime . postToMainThread ( new Runnable ( ) { < nl > @ Override < nl > public void run ( ) { < nl > diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / modules / JsFilesModule . java b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / modules / JsFilesModule . java < nl > index d47abf7 . . 109599c 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / modules / JsFilesModule . java < nl > + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / modules / JsFilesModule . java < nl > @ @ - 65 , 7 + 65 , 7 @ @ public class JsFilesModule extends AbsModule { < nl > try { < nl > return CachedFileUrl . fromBytes ( data ) ; < nl > } catch ( IOException e ) { < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > return null ; < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsLogProvider . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsLogProvider . java < nl > index ff0d4a0 . . 6672fe1 100644 < nl > - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsLogProvider . java < nl > + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsLogProvider . java < nl > @ @ - 25 , 7 + 25 , 12 @ @ public class JsLogProvider implements LogRuntime { < nl > < nl > @ Override < nl > public void e ( String tag , Throwable throwable ) { < nl > - error ( formatTime ( ) + " [ E ] " + tag + " : " + throwable ) ; < nl > + String stackTrace = " " ; < nl > + for ( StackTraceElement element : throwable . getStackTrace ( ) ) { < nl > + stackTrace + = element + " \ n " ; < nl > + } < nl > + < nl > + error ( formatTime ( ) + " [ E ] " + tag + " : " + throwable + " \ n " + stackTrace ) ; < nl > } < nl > < nl > @ Override < nl > diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsIndexStorage . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsIndexStorage . java < nl > index 27d0af1 . . e8f198d 100644 < nl > - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsIndexStorage . java < nl > + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsIndexStorage . java < nl > @ @ - 7 , 6 + 7 , 7 @ @ import java . util . HashSet ; < nl > import java . util . List ; < nl > import java . util . Set ; < nl > < nl > + import im . actor . runtime . Log ; < nl > import im . actor . runtime . bser . DataInput ; < nl > import im . actor . runtime . bser . DataOutput ; < nl > import im . actor . runtime . storage . IndexStorage ; < nl > @ @ - 16 , 6 + 17 , 8 @ @ import static im . actor . runtime . crypto . Base64Utils . toBase64 ; < nl > < nl > public class JsIndexStorage implements IndexStorage { < nl > < nl > + private static final String TAG = " JsIndexStorage " ; < nl > + < nl > private Storage storage ; < nl > private String prefix ; < nl > private Set < Item > items = new HashSet < Item > ( ) ; < nl > @ @ - 37 , 7 + 40 , 7 @ @ public class JsIndexStorage implements IndexStorage { < nl > } < nl > } < nl > } catch ( Exception e ) { < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsKeyValueStorage . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsKeyValueStorage . java < nl > index 8846506 . . d00ddb6 100644 < nl > - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsKeyValueStorage . java < nl > + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsKeyValueStorage . java < nl > @ @ - 10 , 6 + 10 , 7 @ @ import java . util . HashSet ; < nl > import java . util . List ; < nl > import java . util . Set ; < nl > < nl > + import im . actor . runtime . Log ; < nl > import im . actor . runtime . bser . DataInput ; < nl > import im . actor . runtime . bser . DataOutput ; < nl > import im . actor . runtime . storage . KeyValueRecord ; < nl > @ @ - 20 , 6 + 21 , 8 @ @ import static im . actor . runtime . crypto . Base64Utils . toBase64 ; < nl > < nl > public class JsKeyValueStorage implements KeyValueStorage { < nl > < nl > + private static final String TAG = " JsKeyValueStorage " ; < nl > + < nl > private Storage storage ; < nl > private String prefix ; < nl > private Set < Long > items = new HashSet < Long > ( ) ; < nl > @ @ - 39 , 7 + 42 , 7 @ @ public class JsKeyValueStorage implements KeyValueStorage { < nl > } < nl > } < nl > } catch ( Exception e ) { < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListEngine . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListEngine . java < nl > index fe4de7f . . 878ff80 100644 < nl > - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListEngine . java < nl > + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListEngine . java < nl > @ @ - 43 , 7 + 43 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List < nl > callback . onItemAddedOrUpdated ( item ) ; < nl > } catch ( Exception e ) { < nl > Log . d ( TAG , " Exception during update ( addOrUpdateItem ) " ) ; < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > < nl > @ @ - 65 , 7 + 65 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List < nl > callback . onItemsAddedOrUpdated ( items ) ; < nl > } catch ( Exception e ) { < nl > Log . d ( TAG , " Exception during update ( addOrUpdateItems ) " ) ; < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > } < nl > @ @ - 87 , 7 + 87 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List < nl > callback . onItemsReplaced ( items ) ; < nl > } catch ( Exception e ) { < nl > Log . d ( TAG , " Exception during update ( replaceItems ) " ) ; < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > } < nl > @ @ - 102 , 7 + 102 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List < nl > callback . onItemRemoved ( key ) ; < nl > } catch ( Exception e ) { < nl > Log . d ( TAG , " Exception during update ( removeItem ) " ) ; < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > } < nl > @ @ - 118 , 7 + 118 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List < nl > callback . onItemsRemoved ( keys ) ; < nl > } catch ( Exception e ) { < nl > Log . d ( TAG , " Exception during update ( removeItems ) " ) ; < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > } < nl > @ @ - 132 , 7 + 132 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List < nl > callback . onClear ( ) ; < nl > } catch ( Exception e ) { < nl > Log . d ( TAG , " Exception during update ( clear ) " ) ; < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > } < nl > @ @ - 150 , 7 + 150 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List < nl > return res ; < nl > } catch ( IOException e ) { < nl > Log . d ( " JsListEngine " , " Unable to decode : " + e . getMessage ( ) ) ; < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListStorage . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListStorage . java < nl > index 99a11a0 . . 06935e0 100644 < nl > - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListStorage . java < nl > + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListStorage . java < nl > @ @ - 11 , 6 + 11 , 7 @ @ import java . util . Collections ; < nl > import java . util . Comparator ; < nl > import java . util . List ; < nl > < nl > + import im . actor . runtime . Log ; < nl > import im . actor . runtime . bser . DataInput ; < nl > import im . actor . runtime . bser . DataOutput ; < nl > import im . actor . runtime . storage . ListEngineRecord ; < nl > @ @ - 21 , 6 + 22 , 8 @ @ import static im . actor . runtime . crypto . Base64Utils . toBase64 ; < nl > < nl > public class JsListStorage implements ListStorage { < nl > < nl > + private static final String TAG = " JsListStorage " ; < nl > + < nl > private final Storage storage ; < nl > private final String prefix ; < nl > private final ArrayList < Index > index = new ArrayList < Index > ( ) ; < nl > @ @ - 51 , 7 + 54 , 7 @ @ public class JsListStorage implements ListStorage { < nl > index . add ( new Index ( id , order ) ) ; < nl > } < nl > } catch ( Exception e ) { < nl > - e . printStackTrace ( ) ; < nl > + Log . e ( TAG , e ) ; < nl > } < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorCore / Providers / CocoaWebRTCRuntime . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorCore / Providers / CocoaWebRTCRuntime . swift 
 index 4bf7a9c . . fa428eb 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorCore / Providers / CocoaWebRTCRuntime . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorCore / Providers / CocoaWebRTCRuntime . swift 
 @ @ - 21 , 7 + 21 , 7 @ @ class CocoaWebRTCRuntime : NSObject , ARWebRTCRuntime { 
 } 
 } 
 
 - extension RTCAudioTrack : ARWebRTCLocalStream { 
 + extension RTCAudioTrack : ARWebRTCMediaStream { 
 
 } 
 
 @ @ - 58 , 7 + 58 , 7 @ @ class CocoaWebRTCPeerConnection : NSObject , ARWebRTCPeerConnection , RTCPeerConnec 
 peerConnection . addICECandidate ( RTCICECandidate ( mid : id _ , index : Int ( label ) , sdp : candidate ) ) 
 } 
 
 - func addOwnStream ( stream : ARWebRTCLocalStream ) { 
 + func addOwnStream ( stream : ARWebRTCMediaStream ) { 
 if let audio = stream as ? RTCAudioTrack { 
 print ( " addOwnStream " ) 
 let mediaStream = peerConnectionFactory . mediaStreamWithLabel ( " ARDAMSa0 " ) 
 diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsWebRTCProvider . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsWebRTCProvider . java 
 index 16b405a . . 873a8ab 100644 
 - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsWebRTCProvider . java 
 + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsWebRTCProvider . java 
 @ @ - 12 , 7 + 12 , 7 @ @ import im . actor . runtime . js . webrtc . PeerConnection ; 
 import im . actor . runtime . promise . Promise ; 
 import im . actor . runtime . promise . PromiseFunc ; 
 import im . actor . runtime . promise . PromiseResolver ; 
 - import im . actor . runtime . webrtc . WebRTCLocalStream ; 
 + import im . actor . runtime . webrtc . WebRTCMediaStream ; 
 import im . actor . runtime . webrtc . WebRTCPeerConnection ; 
 
 public class JsWebRTCProvider implements WebRTCRuntime { 
 @ @ - 30 , 10 + 30 , 10 @ @ public class JsWebRTCProvider implements WebRTCRuntime { 
 
 @ NotNull 
 @ Override 
 - public Promise < WebRTCLocalStream > getUserAudio ( ) { 
 - return new Promise < > ( new PromiseFunc < WebRTCLocalStream > ( ) { 
 + public Promise < WebRTCMediaStream > getUserAudio ( ) { 
 + return new Promise < > ( new PromiseFunc < WebRTCMediaStream > ( ) { 
 @ Override 
 - public void exec ( @ NotNull final PromiseResolver < WebRTCLocalStream > resolver ) { 
 + public void exec ( @ NotNull final PromiseResolver < WebRTCMediaStream > resolver ) { 
 JsStreaming . getUserAudio ( ) . then ( new Consumer < JsMediaStream > ( ) { 
 @ Override 
 public void apply ( JsMediaStream jsMediaStream ) { 
 diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / JsMediaStream . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / JsMediaStream . java 
 index e9e6f04 . . ff8ded5 100644 
 - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / JsMediaStream . java 
 + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / JsMediaStream . java 
 @ @ - 3 , 9 + 3 , 9 @ @ package im . actor . runtime . js . webrtc ; 
 import com . google . gwt . core . client . JavaScriptObject ; 
 import com . google . gwt . core . client . JsArray ; 
 
 - import im . actor . runtime . webrtc . WebRTCLocalStream ; 
 + import im . actor . runtime . webrtc . WebRTCMediaStream ; 
 
 - public class JsMediaStream extends JavaScriptObject implements WebRTCLocalStream { 
 + public class JsMediaStream extends JavaScriptObject implements WebRTCMediaStream { 
 
 protected JsMediaStream ( ) { 
 
 diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / PeerConnection . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / PeerConnection . java 
 index 3bd1d08 . . 6be7fbd 100644 
 - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / PeerConnection . java 
 + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / webrtc / PeerConnection . java 
 @ @ - 12 , 7 + 12 , 7 @ @ import im . actor . runtime . js . entity . JsClosureError ; 
 import im . actor . runtime . promise . Promise ; 
 import im . actor . runtime . promise . PromiseFunc ; 
 import im . actor . runtime . promise . PromiseResolver ; 
 - import im . actor . runtime . webrtc . WebRTCLocalStream ; 
 + import im . actor . runtime . webrtc . WebRTCMediaStream ; 
 import im . actor . runtime . webrtc . WebRTCPeerConnection ; 
 import im . actor . runtime . webrtc . WebRTCPeerConnectionCallback ; 
 import im . actor . runtime . webrtc . WebRTCSessionDescription ; 
 @ @ - 64 , 7 + 64 , 7 @ @ public class PeerConnection implements WebRTCPeerConnection { 
 } 
 
 @ Override 
 - public void addOwnStream ( @ NotNull WebRTCLocalStream stream ) { 
 + public void addOwnStream ( @ NotNull WebRTCMediaStream stream ) { 
 if ( stream instanceof JsMediaStream ) { 
 peerConnection . addStream ( ( JsMediaStream ) stream ) ; 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java 
 index f60dff5 . . cb3bc8f 100644 
 - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java 
 + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java 
 @ @ - 249 , 7 + 249 , 7 @ @ public class JsFacade implements Exportable { 
 } 
 } ) ; 
 } catch ( Exception e ) { 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 im . actor . runtime . Runtime . postToMainThread ( new Runnable ( ) { 
 @ Override 
 public void run ( ) { 
 diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / modules / JsFilesModule . java b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / modules / JsFilesModule . java 
 index d47abf7 . . 109599c 100644 
 - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / modules / JsFilesModule . java 
 + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / modules / JsFilesModule . java 
 @ @ - 65 , 7 + 65 , 7 @ @ public class JsFilesModule extends AbsModule { 
 try { 
 return CachedFileUrl . fromBytes ( data ) ; 
 } catch ( IOException e ) { 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 return null ; 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsLogProvider . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsLogProvider . java 
 index ff0d4a0 . . 6672fe1 100644 
 - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsLogProvider . java 
 + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / JsLogProvider . java 
 @ @ - 25 , 7 + 25 , 12 @ @ public class JsLogProvider implements LogRuntime { 
 
 @ Override 
 public void e ( String tag , Throwable throwable ) { 
 - error ( formatTime ( ) + " [ E ] " + tag + " : " + throwable ) ; 
 + String stackTrace = " " ; 
 + for ( StackTraceElement element : throwable . getStackTrace ( ) ) { 
 + stackTrace + = element + " \ n " ; 
 + } 
 + 
 + error ( formatTime ( ) + " [ E ] " + tag + " : " + throwable + " \ n " + stackTrace ) ; 
 } 
 
 @ Override 
 diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsIndexStorage . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsIndexStorage . java 
 index 27d0af1 . . e8f198d 100644 
 - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsIndexStorage . java 
 + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsIndexStorage . java 
 @ @ - 7 , 6 + 7 , 7 @ @ import java . util . HashSet ; 
 import java . util . List ; 
 import java . util . Set ; 
 
 + import im . actor . runtime . Log ; 
 import im . actor . runtime . bser . DataInput ; 
 import im . actor . runtime . bser . DataOutput ; 
 import im . actor . runtime . storage . IndexStorage ; 
 @ @ - 16 , 6 + 17 , 8 @ @ import static im . actor . runtime . crypto . Base64Utils . toBase64 ; 
 
 public class JsIndexStorage implements IndexStorage { 
 
 + private static final String TAG = " JsIndexStorage " ; 
 + 
 private Storage storage ; 
 private String prefix ; 
 private Set < Item > items = new HashSet < Item > ( ) ; 
 @ @ - 37 , 7 + 40 , 7 @ @ public class JsIndexStorage implements IndexStorage { 
 } 
 } 
 } catch ( Exception e ) { 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsKeyValueStorage . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsKeyValueStorage . java 
 index 8846506 . . d00ddb6 100644 
 - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsKeyValueStorage . java 
 + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsKeyValueStorage . java 
 @ @ - 10 , 6 + 10 , 7 @ @ import java . util . HashSet ; 
 import java . util . List ; 
 import java . util . Set ; 
 
 + import im . actor . runtime . Log ; 
 import im . actor . runtime . bser . DataInput ; 
 import im . actor . runtime . bser . DataOutput ; 
 import im . actor . runtime . storage . KeyValueRecord ; 
 @ @ - 20 , 6 + 21 , 8 @ @ import static im . actor . runtime . crypto . Base64Utils . toBase64 ; 
 
 public class JsKeyValueStorage implements KeyValueStorage { 
 
 + private static final String TAG = " JsKeyValueStorage " ; 
 + 
 private Storage storage ; 
 private String prefix ; 
 private Set < Long > items = new HashSet < Long > ( ) ; 
 @ @ - 39 , 7 + 42 , 7 @ @ public class JsKeyValueStorage implements KeyValueStorage { 
 } 
 } 
 } catch ( Exception e ) { 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListEngine . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListEngine . java 
 index fe4de7f . . 878ff80 100644 
 - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListEngine . java 
 + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListEngine . java 
 @ @ - 43 , 7 + 43 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List 
 callback . onItemAddedOrUpdated ( item ) ; 
 } catch ( Exception e ) { 
 Log . d ( TAG , " Exception during update ( addOrUpdateItem ) " ) ; 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 
 @ @ - 65 , 7 + 65 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List 
 callback . onItemsAddedOrUpdated ( items ) ; 
 } catch ( Exception e ) { 
 Log . d ( TAG , " Exception during update ( addOrUpdateItems ) " ) ; 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 } 
 @ @ - 87 , 7 + 87 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List 
 callback . onItemsReplaced ( items ) ; 
 } catch ( Exception e ) { 
 Log . d ( TAG , " Exception during update ( replaceItems ) " ) ; 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 } 
 @ @ - 102 , 7 + 102 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List 
 callback . onItemRemoved ( key ) ; 
 } catch ( Exception e ) { 
 Log . d ( TAG , " Exception during update ( removeItem ) " ) ; 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 } 
 @ @ - 118 , 7 + 118 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List 
 callback . onItemsRemoved ( keys ) ; 
 } catch ( Exception e ) { 
 Log . d ( TAG , " Exception during update ( removeItems ) " ) ; 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 } 
 @ @ - 132 , 7 + 132 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List 
 callback . onClear ( ) ; 
 } catch ( Exception e ) { 
 Log . d ( TAG , " Exception during update ( clear ) " ) ; 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 } 
 @ @ - 150 , 7 + 150 , 7 @ @ public class JsListEngine < T extends BserObject & ListEngineItem > implements List 
 return res ; 
 } catch ( IOException e ) { 
 Log . d ( " JsListEngine " , " Unable to decode : " + e . getMessage ( ) ) ; 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListStorage . java b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListStorage . java 
 index 99a11a0 . . 06935e0 100644 
 - - - a / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListStorage . java 
 + + + b / actor - sdk / sdk - core / runtime / runtime - js / src / main / java / im / actor / runtime / js / storage / JsListStorage . java 
 @ @ - 11 , 6 + 11 , 7 @ @ import java . util . Collections ; 
 import java . util . Comparator ; 
 import java . util . List ; 
 
 + import im . actor . runtime . Log ; 
 import im . actor . runtime . bser . DataInput ; 
 import im . actor . runtime . bser . DataOutput ; 
 import im . actor . runtime . storage . ListEngineRecord ; 
 @ @ - 21 , 6 + 22 , 8 @ @ import static im . actor . runtime . crypto . Base64Utils . toBase64 ; 
 
 public class JsListStorage implements ListStorage { 
 
 + private static final String TAG = " JsListStorage " ; 
 + 
 private final Storage storage ; 
 private final String prefix ; 
 private final ArrayList < Index > index = new ArrayList < Index > ( ) ; 
 @ @ - 51 , 7 + 54 , 7 @ @ public class JsListStorage implements ListStorage { 
 index . add ( new Index ( id , order ) ) ; 
 } 
 } catch ( Exception e ) { 
 - e . printStackTrace ( ) ; 
 + Log . e ( TAG , e ) ; 
 } 
 }
