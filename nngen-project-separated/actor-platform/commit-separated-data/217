BLEU SCORE: 0.21200626759025185

TEST MSG: fix ( android ) : fix compile errors , default hackable share
GENERATED MSG: feat ( android ) : sync wallpapers

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > index 212fb87 . . 6b5273b 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > @ @ - 1 , 12 + 1 , 10 @ @ < nl > package im . actor ; < nl > < nl > - import android . content . Context ; < nl > import android . os . Bundle ; < nl > import android . view . LayoutInflater ; < nl > import android . view . View ; < nl > import android . view . ViewGroup ; < nl > import android . widget . CheckBox ; < nl > - import android . widget . LinearLayout ; < nl > import android . widget . Toast ; < nl > < nl > import java . util . ArrayList ; < nl > @ @ - 17 , 17 + 15 , 12 @ @ import im . actor . sdk . ActorSDKApplication ; < nl > import im . actor . sdk . ActorStyle ; < nl > import im . actor . sdk . BaseActorSDKDelegate ; < nl > import im . actor . sdk . controllers . conversation . ShareMenuField ; < nl > - import im . actor . sdk . controllers . group . GroupInfoFragment ; < nl > - import im . actor . sdk . controllers . profile . ProfileFragment ; < nl > import im . actor . sdk . controllers . settings . ActorSettingsCategories ; < nl > import im . actor . sdk . controllers . settings . ActorSettingsCategory ; < nl > import im . actor . sdk . controllers . settings . ActorSettingsField ; < nl > - import im . actor . sdk . controllers . settings . BaseActorProfileActivity ; < nl > import im . actor . sdk . controllers . settings . BaseActorSettingsActivity ; < nl > import im . actor . sdk . controllers . settings . BaseActorSettingsFragment ; < nl > - import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; < nl > import im . actor . sdk . intents . ActorIntentFragmentActivity ; < nl > - import im . actor . sdk . util . Screen ; < nl > < nl > public class Application extends ActorSDKApplication { < nl > < nl > @ @ - 82 , 8 + 75 , 7 @ @ public class Application extends ActorSDKApplication { < nl > < nl > / / < nl > @ Override < nl > - public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { < nl > - ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; < nl > + public void addCustomShareMenuFields ( ArrayList < ShareMenuField > shareMenuFields ) { < nl > shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > @ @ - 108 , 7 + 100 , 6 @ @ public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { < nl > Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > } < nl > } ) ) ; < nl > - return shareMenuFields ; < nl > } < nl > < nl > / / @ Override < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > index f9eb81d . . ca73df8 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > @ @ - 193 , 5 + 193 , 5 @ @ public interface ActorSDKDelegate { < nl > * / < nl > void onShareMenuCreated ( TableLayout shareMenu ) ; < nl > < nl > - ArrayList < ShareMenuField > addCustomShareMenuFields ( ) ; < nl > + void addCustomShareMenuFields ( ArrayList < ShareMenuField > menuFields ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > index 3adac8b . . f696d9b 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > @ @ - 218 , 8 + 218 , 7 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { < nl > } < nl > < nl > @ Override < nl > - public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { < nl > - return null ; < nl > + public void addCustomShareMenuFields ( ArrayList < ShareMenuField > menuFields ) { < nl > } < nl > < nl > / / < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index 3b01739 . . 5da8f33 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 434 , 10 + 434 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ video ) , R . id . share _ video , R . drawable . share _ video _ selector , shareMenuOCL ) ) ; < nl > menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ contact ) , R . id . share _ contact , R . drawable . share _ contact _ selector , shareMenuOCL ) ) ; < nl > < nl > - ArrayList < ShareMenuField > customMenuFields = ActorSDK . sharedActor ( ) . getDelegate ( ) . addCustomShareMenuFields ( ) ; < nl > - if ( customMenuFields ! = null ) { < nl > - menuFields . addAll ( customMenuFields ) ; < nl > - } < nl > + ActorSDK . sharedActor ( ) . getDelegate ( ) . addCustomShareMenuFields ( menuFields ) ; < nl > < nl > if ( menuFields . size ( ) % 2 ! = 0 ) { < nl > menuFields . add ( new ShareMenuField ( R . drawable . attach _ hide2 , < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java < nl > index ff9c942 . . 306f3dd 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java < nl > @ @ - 47 , 4 + 47 , 28 @ @ public class ShareMenuField { < nl > public View . OnClickListener getOnClickListener ( ) { < nl > return onClickListener ; < nl > } < nl > + < nl > + public void setIcon ( int icon ) { < nl > + this . icon = icon ; < nl > + } < nl > + < nl > + public void setColor ( int color ) { < nl > + this . color = color ; < nl > + } < nl > + < nl > + public void setSelector ( int selector ) { < nl > + this . selector = selector ; < nl > + } < nl > + < nl > + public void setId ( int id ) { < nl > + this . id = id ; < nl > + } < nl > + < nl > + public void setTitle ( String title ) { < nl > + this . title = title ; < nl > + } < nl > + < nl > + public void setOnClickListener ( View . OnClickListener onClickListener ) { < nl > + this . onClickListener = onClickListener ; < nl > + } < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java < nl > index 9e9b475 . . b3c644a 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java < nl > @ @ - 10 , 6 + 10 , 8 @ @ import android . view . View ; < nl > import im . actor . sdk . R ; < nl > import im . actor . sdk . view . BackgroundPreviewView ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > + < nl > public class ChatBackgroundView extends View { < nl > < nl > private Drawable background ; < nl > @ @ - 37 , 7 + 39 , 7 @ @ public class ChatBackgroundView extends View { < nl > public void bind ( ) { < nl > if ( background = = null ) { < nl > shp = getContext ( ) . getSharedPreferences ( " wallpaper " , Context . MODE _ PRIVATE ) ; < nl > - background = getResources ( ) . getDrawable ( BackgroundPreviewView . getBackground ( shp . getInt ( " wallpaper " , 0 ) ) ) ; < nl > + background = getResources ( ) . getDrawable ( BackgroundPreviewView . getBackground ( BackgroundPreviewView . getBackgroundIdByUri ( messenger ( ) . getSelectedWallpaper ( ) , getContext ( ) , shp . getInt ( " wallpaper " , 0 ) ) ) ) ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > index b9dc756 . . 8b58e0f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > @ @ - 152 , 8 + 152 , 10 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > @ Override < nl > public void onChanged ( String val , Value < String > valueModel ) { < nl > if ( val ! = null & & ! val . isEmpty ( ) ) { < nl > + aboutTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > aboutTitle . setText ( val ) ; < nl > } else { < nl > + aboutTitle . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > aboutTitle . setText ( getString ( R . string . edit _ about _ edittext _ hint ) ) ; < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java < nl > index 3734eb7 . . f4a5ff7 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java < nl > @ @ - 18 , 6 + 18 , 8 @ @ import im . actor . sdk . controllers . fragment . BaseFragment ; < nl > import im . actor . sdk . util . Screen ; < nl > import im . actor . sdk . view . BackgroundPreviewView ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > + < nl > public class PickWallpaperFragment extends BaseFragment { < nl > < nl > private ChatBackgroundView wallpaper ; < nl > @ @ - 40 , 7 + 42 , 7 @ @ public class PickWallpaperFragment extends BaseFragment { < nl > ed = shp . edit ( ) ; < nl > selectedWallpaper = getArguments ( ) . getInt ( " EXTRA _ ID " ) ; < nl > if ( selectedWallpaper = = - 1 ) { < nl > - selectedWallpaper = shp . getInt ( " wallpaper " , 0 ) ; < nl > + selectedWallpaper = BackgroundPreviewView . getBackgroundIdByUri ( messenger ( ) . getSelectedWallpaper ( ) , getContext ( ) , shp . getInt ( " wallpaper " , 0 ) ) ; < nl > } < nl > View res = inflater . inflate ( R . layout . fragment _ pick _ wallpaper , container , false ) ; < nl > < nl > @ @ - 61 , 6 + 63 , 7 @ @ public class PickWallpaperFragment extends BaseFragment { < nl > res . findViewById ( R . id . ok ) . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > + messenger ( ) . changeSelectedWallpaper ( " local : " . concat ( getResources ( ) . getResourceEntryName ( BackgroundPreviewView . getBackground ( selectedWallpaper ) ) ) ) ; < nl > ed . putInt ( " wallpaper " , selectedWallpaper ) ; < nl > ed . commit ( ) ; < nl > getActivity ( ) . finish ( ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java < nl > index 31078d6 . . 9822568 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java < nl > @ @ - 78 , 6 + 78 , 20 @ @ public class BackgroundPreviewView extends SimpleDraweeView { < nl > } < nl > } < nl > < nl > + public static int getBackgroundIdByUri ( String uri , Context context , int def ) { < nl > + if ( uri ! = null & & uri . startsWith ( " local : " ) ) { < nl > + String fileName = uri . replace ( " local : " , " " ) ; < nl > + int fileId = context . getResources ( ) . getIdentifier ( fileName , " drawable " , context . getPackageName ( ) ) ; < nl > + for ( int i = 0 ; i < BACKGROUNDS . length ; i + + ) { < nl > + if ( BACKGROUNDS [ i ] = = fileId ) { < nl > + return i ; < nl > + } < nl > + } < nl > + < nl > + } < nl > + return def ; < nl > + } < nl > + < nl > public static int getSize ( ) { < nl > return BACKGROUNDS . length ; < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 index 212fb87 . . 6b5273b 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 @ @ - 1 , 12 + 1 , 10 @ @ 
 package im . actor ; 
 
 - import android . content . Context ; 
 import android . os . Bundle ; 
 import android . view . LayoutInflater ; 
 import android . view . View ; 
 import android . view . ViewGroup ; 
 import android . widget . CheckBox ; 
 - import android . widget . LinearLayout ; 
 import android . widget . Toast ; 
 
 import java . util . ArrayList ; 
 @ @ - 17 , 17 + 15 , 12 @ @ import im . actor . sdk . ActorSDKApplication ; 
 import im . actor . sdk . ActorStyle ; 
 import im . actor . sdk . BaseActorSDKDelegate ; 
 import im . actor . sdk . controllers . conversation . ShareMenuField ; 
 - import im . actor . sdk . controllers . group . GroupInfoFragment ; 
 - import im . actor . sdk . controllers . profile . ProfileFragment ; 
 import im . actor . sdk . controllers . settings . ActorSettingsCategories ; 
 import im . actor . sdk . controllers . settings . ActorSettingsCategory ; 
 import im . actor . sdk . controllers . settings . ActorSettingsField ; 
 - import im . actor . sdk . controllers . settings . BaseActorProfileActivity ; 
 import im . actor . sdk . controllers . settings . BaseActorSettingsActivity ; 
 import im . actor . sdk . controllers . settings . BaseActorSettingsFragment ; 
 - import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; 
 import im . actor . sdk . intents . ActorIntentFragmentActivity ; 
 - import im . actor . sdk . util . Screen ; 
 
 public class Application extends ActorSDKApplication { 
 
 @ @ - 82 , 8 + 75 , 7 @ @ public class Application extends ActorSDKApplication { 
 
 / / 
 @ Override 
 - public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { 
 - ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; 
 + public void addCustomShareMenuFields ( ArrayList < ShareMenuField > shareMenuFields ) { 
 shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 @ @ - 108 , 7 + 100 , 6 @ @ public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { 
 Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 } 
 } ) ) ; 
 - return shareMenuFields ; 
 } 
 
 / / @ Override 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 index f9eb81d . . ca73df8 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 @ @ - 193 , 5 + 193 , 5 @ @ public interface ActorSDKDelegate { 
 * / 
 void onShareMenuCreated ( TableLayout shareMenu ) ; 
 
 - ArrayList < ShareMenuField > addCustomShareMenuFields ( ) ; 
 + void addCustomShareMenuFields ( ArrayList < ShareMenuField > menuFields ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 index 3adac8b . . f696d9b 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 @ @ - 218 , 8 + 218 , 7 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { 
 } 
 
 @ Override 
 - public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { 
 - return null ; 
 + public void addCustomShareMenuFields ( ArrayList < ShareMenuField > menuFields ) { 
 } 
 
 / / 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index 3b01739 . . 5da8f33 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 434 , 10 + 434 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { 
 menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ video ) , R . id . share _ video , R . drawable . share _ video _ selector , shareMenuOCL ) ) ; 
 menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ contact ) , R . id . share _ contact , R . drawable . share _ contact _ selector , shareMenuOCL ) ) ; 
 
 - ArrayList < ShareMenuField > customMenuFields = ActorSDK . sharedActor ( ) . getDelegate ( ) . addCustomShareMenuFields ( ) ; 
 - if ( customMenuFields ! = null ) { 
 - menuFields . addAll ( customMenuFields ) ; 
 - } 
 + ActorSDK . sharedActor ( ) . getDelegate ( ) . addCustomShareMenuFields ( menuFields ) ; 
 
 if ( menuFields . size ( ) % 2 ! = 0 ) { 
 menuFields . add ( new ShareMenuField ( R . drawable . attach _ hide2 , 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java 
 index ff9c942 . . 306f3dd 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java 
 @ @ - 47 , 4 + 47 , 28 @ @ public class ShareMenuField { 
 public View . OnClickListener getOnClickListener ( ) { 
 return onClickListener ; 
 } 
 + 
 + public void setIcon ( int icon ) { 
 + this . icon = icon ; 
 + } 
 + 
 + public void setColor ( int color ) { 
 + this . color = color ; 
 + } 
 + 
 + public void setSelector ( int selector ) { 
 + this . selector = selector ; 
 + } 
 + 
 + public void setId ( int id ) { 
 + this . id = id ; 
 + } 
 + 
 + public void setTitle ( String title ) { 
 + this . title = title ; 
 + } 
 + 
 + public void setOnClickListener ( View . OnClickListener onClickListener ) { 
 + this . onClickListener = onClickListener ; 
 + } 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java 
 index 9e9b475 . . b3c644a 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java 
 @ @ - 10 , 6 + 10 , 8 @ @ import android . view . View ; 
 import im . actor . sdk . R ; 
 import im . actor . sdk . view . BackgroundPreviewView ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 + 
 public class ChatBackgroundView extends View { 
 
 private Drawable background ; 
 @ @ - 37 , 7 + 39 , 7 @ @ public class ChatBackgroundView extends View { 
 public void bind ( ) { 
 if ( background = = null ) { 
 shp = getContext ( ) . getSharedPreferences ( " wallpaper " , Context . MODE _ PRIVATE ) ; 
 - background = getResources ( ) . getDrawable ( BackgroundPreviewView . getBackground ( shp . getInt ( " wallpaper " , 0 ) ) ) ; 
 + background = getResources ( ) . getDrawable ( BackgroundPreviewView . getBackground ( BackgroundPreviewView . getBackgroundIdByUri ( messenger ( ) . getSelectedWallpaper ( ) , getContext ( ) , shp . getInt ( " wallpaper " , 0 ) ) ) ) ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 index b9dc756 . . 8b58e0f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 @ @ - 152 , 8 + 152 , 10 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 @ Override 
 public void onChanged ( String val , Value < String > valueModel ) { 
 if ( val ! = null & & ! val . isEmpty ( ) ) { 
 + aboutTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 aboutTitle . setText ( val ) ; 
 } else { 
 + aboutTitle . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 aboutTitle . setText ( getString ( R . string . edit _ about _ edittext _ hint ) ) ; 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java 
 index 3734eb7 . . f4a5ff7 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java 
 @ @ - 18 , 6 + 18 , 8 @ @ import im . actor . sdk . controllers . fragment . BaseFragment ; 
 import im . actor . sdk . util . Screen ; 
 import im . actor . sdk . view . BackgroundPreviewView ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 + 
 public class PickWallpaperFragment extends BaseFragment { 
 
 private ChatBackgroundView wallpaper ; 
 @ @ - 40 , 7 + 42 , 7 @ @ public class PickWallpaperFragment extends BaseFragment { 
 ed = shp . edit ( ) ; 
 selectedWallpaper = getArguments ( ) . getInt ( " EXTRA _ ID " ) ; 
 if ( selectedWallpaper = = - 1 ) { 
 - selectedWallpaper = shp . getInt ( " wallpaper " , 0 ) ; 
 + selectedWallpaper = BackgroundPreviewView . getBackgroundIdByUri ( messenger ( ) . getSelectedWallpaper ( ) , getContext ( ) , shp . getInt ( " wallpaper " , 0 ) ) ; 
 } 
 View res = inflater . inflate ( R . layout . fragment _ pick _ wallpaper , container , false ) ; 
 
 @ @ - 61 , 6 + 63 , 7 @ @ public class PickWallpaperFragment extends BaseFragment { 
 res . findViewById ( R . id . ok ) . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 + messenger ( ) . changeSelectedWallpaper ( " local : " . concat ( getResources ( ) . getResourceEntryName ( BackgroundPreviewView . getBackground ( selectedWallpaper ) ) ) ) ; 
 ed . putInt ( " wallpaper " , selectedWallpaper ) ; 
 ed . commit ( ) ; 
 getActivity ( ) . finish ( ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java 
 index 31078d6 . . 9822568 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java 
 @ @ - 78 , 6 + 78 , 20 @ @ public class BackgroundPreviewView extends SimpleDraweeView { 
 } 
 } 
 
 + public static int getBackgroundIdByUri ( String uri , Context context , int def ) { 
 + if ( uri ! = null & & uri . startsWith ( " local : " ) ) { 
 + String fileName = uri . replace ( " local : " , " " ) ; 
 + int fileId = context . getResources ( ) . getIdentifier ( fileName , " drawable " , context . getPackageName ( ) ) ; 
 + for ( int i = 0 ; i < BACKGROUNDS . length ; i + + ) { 
 + if ( BACKGROUNDS [ i ] = = fileId ) { 
 + return i ; 
 + } 
 + } 
 + 
 + } 
 + return def ; 
 + } 
 + 
 public static int getSize ( ) { 
 return BACKGROUNDS . length ; 
 }
