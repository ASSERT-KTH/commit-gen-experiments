BLEU SCORE: 0.1598921499894403

TEST MSG: fix + clean ( iOS ) : clean some unused code + fix small bug in voice notes
GENERATED MSG: fix ( iOS ) : small pause / play voice fix

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorApp / Supporting Files / Info . plist b / actor - sdk / sdk - core - ios / ActorApp / Supporting Files / Info . plist < nl > index 3dd4f5d . . dfd1bdd 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorApp / Supporting Files / Info . plist 	 < nl > + + + b / actor - sdk / sdk - core - ios / ActorApp / Supporting Files / Info . plist 	 < nl > @ @ - 34 , 7 + 34 , 7 @ @ < nl > 	 	 < / dict > < nl > 	 < / array > < nl > 	 < key > CFBundleVersion < / key > < nl > - 	 < string > 426 < / string > < nl > + 	 < string > 438 < / string > < nl > 	 < key > Fabric < / key > < nl > 	 < dict > < nl > 	 	 < key > APIKey < / key > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > index 692d99e . . 479dfba 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > @ @ - 379 , 17 + 379 , 28 @ @ public class AAConversationContentController : SLKTextViewController , ARDisplayLi < nl > self . voicePlayer = AAModernConversationAudioPlayer ( filePath : path ) < nl > self . voiceContext = self . voicePlayer . inlineMediaContext ( ) < nl > < nl > - < nl > self . voicePlayer ? . play ( ) < nl > < nl > self . currentAudioFileId = fileId < nl > < nl > } else { < nl > < nl > - if self . voicePlayer ? . isPaused ( ) = = false { < nl > - self . voicePlayer ? . pause ( ) < nl > - } else { < nl > + < nl > + if ( position = = 0 . 0 | | position = = 0 ) { < nl > + < nl > + self . voicePlayer = AAModernConversationAudioPlayer ( filePath : path ) < nl > + self . voiceContext = self . voicePlayer . inlineMediaContext ( ) < nl > + < nl > self . voicePlayer ? . play ( ) < nl > + < nl > + } else { < nl > + < nl > + if self . voicePlayer ? . isPaused ( ) = = false { < nl > + self . voicePlayer ? . pause ( ) < nl > + } else { < nl > + self . voicePlayer ? . play ( ) < nl > + } < nl > + < nl > } < nl > < nl > } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > index c75df24 . . 4f37fa3 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > @ @ - 292 , 15 + 292 , 7 @ @ public class AABubbleVoiceCell : AABubbleBaseFileCell , AAModernConversationAudioPl < nl > < nl > let fileID = fileSource . getFileReference ( ) . getFileId ( ) < nl > < nl > - if let progressVoice = self . controller . voicesCache [ fileID ] { < nl > - if progressVoice > 0 . 0 { < nl > - self . controller . playVoiceFromPath ( path , fileId : fileID , position : progressVoice ) < nl > - } else { < nl > - self . controller . playVoiceFromPath ( path , fileId : fileID , position : 0 . 0 ) < nl > - } < nl > - } else { < nl > - self . controller . playVoiceFromPath ( path , fileId : fileID , position : 0 . 0 ) < nl > - } < nl > + self . controller . playVoiceFromPath ( path , fileId : fileID , position : self . soundProgressSlider . value ) < nl > < nl > self . playPauseButton . setImage ( UIImage . bundled ( " aa _ pauserecordbutton " ) , forState : UIControlState . Normal ) < nl > < nl > @ @ - 328 , 16 + 320 , 7 @ @ public class AABubbleVoiceCell : AABubbleBaseFileCell , AAModernConversationAudioPl < nl > if let fileSource = content . getSource ( ) as ? ACFileRemoteSource { < nl > let fileID = fileSource . getFileReference ( ) . getFileId ( ) < nl > < nl > - if let progressVoice = self . controller . voicesCache [ fileID ] { < nl > - if progressVoice > 0 . 0 { < nl > - self . controller . playVoiceFromPath ( path , fileId : fileID , position : progressVoice ) < nl > - } else { < nl > - self . controller . playVoiceFromPath ( path , fileId : fileID , position : 0 . 0 ) < nl > - } < nl > - } else { < nl > - self . controller . playVoiceFromPath ( path , fileId : fileID , position : 0 . 0 ) < nl > - } < nl > - < nl > + self . controller . playVoiceFromPath ( path , fileId : fileID , position : self . soundProgressSlider . value ) < nl > < nl > self . playPauseButton . setImage ( UIImage . bundled ( " aa _ pauserecordbutton " ) , forState : UIControlState . Normal )
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > index 6ce5e8c . . 692d99e 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > @ @ - 370 , 17 + 370 , 20 @ @ public class AAConversationContentController : SLKTextViewController , ARDisplayLi < nl > func playVoiceFromPath ( path : String , fileId : jlong , position : Float ) { < nl > < nl > if ( self . currentAudioFileId ! = fileId ) { < nl > - self . currentAudioFileId = fileId < nl > < nl > self . voicePlayer ? . stop ( ) < nl > self . voicePlayer ? . audioPlayerStopAndFinish ( ) < nl > < nl > + self . voicesCache [ self . currentAudioFileId ] = 0 . 0 < nl > + < nl > self . voicePlayer = AAModernConversationAudioPlayer ( filePath : path ) < nl > self . voiceContext = self . voicePlayer . inlineMediaContext ( ) < nl > < nl > < nl > self . voicePlayer ? . play ( ) < nl > < nl > + self . currentAudioFileId = fileId < nl > + < nl > } else { < nl > < nl > if self . voicePlayer ? . isPaused ( ) = = false { < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > index 7677fd4 . . c75df24 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > @ @ - 361 , 10 + 361 , 11 @ @ public class AABubbleVoiceCell : AABubbleBaseFileCell , AAModernConversationAudioPl < nl > public func audioPlayerDidFinish ( ) { < nl > < nl > dispatchOnUi { ( ) - > Void in < nl > + < nl > self . playPauseButton . setImage ( UIImage . bundled ( " aa _ playrecordbutton " ) , forState : UIControlState . Normal ) < nl > self . soundProgressSlider . value = 0 . 0 < nl > - self . controller . currentAudioFileId = 0 < nl > self . controller . voicesCache [ ( self . bindedMessage ? . rid ) ! ] = 0 . 0 < nl > + < nl > } < nl > < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorApp / Supporting Files / Info . plist b / actor - sdk / sdk - core - ios / ActorApp / Supporting Files / Info . plist 
 index 3dd4f5d . . dfd1bdd 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorApp / Supporting Files / Info . plist 	 
 + + + b / actor - sdk / sdk - core - ios / ActorApp / Supporting Files / Info . plist 	 
 @ @ - 34 , 7 + 34 , 7 @ @ 
 	 	 < / dict > 
 	 < / array > 
 	 < key > CFBundleVersion < / key > 
 - 	 < string > 426 < / string > 
 + 	 < string > 438 < / string > 
 	 < key > Fabric < / key > 
 	 < dict > 
 	 	 < key > APIKey < / key > 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 index 692d99e . . 479dfba 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 @ @ - 379 , 17 + 379 , 28 @ @ public class AAConversationContentController : SLKTextViewController , ARDisplayLi 
 self . voicePlayer = AAModernConversationAudioPlayer ( filePath : path ) 
 self . voiceContext = self . voicePlayer . inlineMediaContext ( ) 
 
 - 
 self . voicePlayer ? . play ( ) 
 
 self . currentAudioFileId = fileId 
 
 } else { 
 
 - if self . voicePlayer ? . isPaused ( ) = = false { 
 - self . voicePlayer ? . pause ( ) 
 - } else { 
 + 
 + if ( position = = 0 . 0 | | position = = 0 ) { 
 + 
 + self . voicePlayer = AAModernConversationAudioPlayer ( filePath : path ) 
 + self . voiceContext = self . voicePlayer . inlineMediaContext ( ) 
 + 
 self . voicePlayer ? . play ( ) 
 + 
 + } else { 
 + 
 + if self . voicePlayer ? . isPaused ( ) = = false { 
 + self . voicePlayer ? . pause ( ) 
 + } else { 
 + self . voicePlayer ? . play ( ) 
 + } 
 + 
 } 
 
 } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 index c75df24 . . 4f37fa3 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 @ @ - 292 , 15 + 292 , 7 @ @ public class AABubbleVoiceCell : AABubbleBaseFileCell , AAModernConversationAudioPl 
 
 let fileID = fileSource . getFileReference ( ) . getFileId ( ) 
 
 - if let progressVoice = self . controller . voicesCache [ fileID ] { 
 - if progressVoice > 0 . 0 { 
 - self . controller . playVoiceFromPath ( path , fileId : fileID , position : progressVoice ) 
 - } else { 
 - self . controller . playVoiceFromPath ( path , fileId : fileID , position : 0 . 0 ) 
 - } 
 - } else { 
 - self . controller . playVoiceFromPath ( path , fileId : fileID , position : 0 . 0 ) 
 - } 
 + self . controller . playVoiceFromPath ( path , fileId : fileID , position : self . soundProgressSlider . value ) 
 
 self . playPauseButton . setImage ( UIImage . bundled ( " aa _ pauserecordbutton " ) , forState : UIControlState . Normal ) 
 
 @ @ - 328 , 16 + 320 , 7 @ @ public class AABubbleVoiceCell : AABubbleBaseFileCell , AAModernConversationAudioPl 
 if let fileSource = content . getSource ( ) as ? ACFileRemoteSource { 
 let fileID = fileSource . getFileReference ( ) . getFileId ( ) 
 
 - if let progressVoice = self . controller . voicesCache [ fileID ] { 
 - if progressVoice > 0 . 0 { 
 - self . controller . playVoiceFromPath ( path , fileId : fileID , position : progressVoice ) 
 - } else { 
 - self . controller . playVoiceFromPath ( path , fileId : fileID , position : 0 . 0 ) 
 - } 
 - } else { 
 - self . controller . playVoiceFromPath ( path , fileId : fileID , position : 0 . 0 ) 
 - } 
 - 
 + self . controller . playVoiceFromPath ( path , fileId : fileID , position : self . soundProgressSlider . value ) 
 
 self . playPauseButton . setImage ( UIImage . bundled ( " aa _ pauserecordbutton " ) , forState : UIControlState . Normal )

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 index 6ce5e8c . . 692d99e 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 @ @ - 370 , 17 + 370 , 20 @ @ public class AAConversationContentController : SLKTextViewController , ARDisplayLi 
 func playVoiceFromPath ( path : String , fileId : jlong , position : Float ) { 
 
 if ( self . currentAudioFileId ! = fileId ) { 
 - self . currentAudioFileId = fileId 
 
 self . voicePlayer ? . stop ( ) 
 self . voicePlayer ? . audioPlayerStopAndFinish ( ) 
 
 + self . voicesCache [ self . currentAudioFileId ] = 0 . 0 
 + 
 self . voicePlayer = AAModernConversationAudioPlayer ( filePath : path ) 
 self . voiceContext = self . voicePlayer . inlineMediaContext ( ) 
 
 
 self . voicePlayer ? . play ( ) 
 
 + self . currentAudioFileId = fileId 
 + 
 } else { 
 
 if self . voicePlayer ? . isPaused ( ) = = false { 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 index 7677fd4 . . c75df24 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 @ @ - 361 , 10 + 361 , 11 @ @ public class AABubbleVoiceCell : AABubbleBaseFileCell , AAModernConversationAudioPl 
 public func audioPlayerDidFinish ( ) { 
 
 dispatchOnUi { ( ) - > Void in 
 + 
 self . playPauseButton . setImage ( UIImage . bundled ( " aa _ playrecordbutton " ) , forState : UIControlState . Normal ) 
 self . soundProgressSlider . value = 0 . 0 
 - self . controller . currentAudioFileId = 0 
 self . controller . voicesCache [ ( self . bindedMessage ? . rid ) ! ] = 0 . 0 
 + 
 } 
 
 }
