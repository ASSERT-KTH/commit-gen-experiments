BLEU SCORE: 0.23462350320528

TEST MSG: fix ( android ) : fix custom share menu backward compatibility
GENERATED MSG: design ( android ) : hide send on record

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > index 7de8c79 . . a64e8f5 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > @ @ - 75 , 18 + 75 , 18 @ @ public class Application extends ActorSDKApplication { < nl > / / return null ; < nl > / / } < nl > < nl > - < nl > - @ Override < nl > - public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { < nl > - ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; < nl > - shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > - } < nl > - } ) ) ; < nl > - return shareMenuFields ; < nl > - } < nl > + / / < nl > + / / @ Override < nl > + / / public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { < nl > + / / ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; < nl > + / / shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > + / / @ Override < nl > + / / public void onClick ( View v ) { < nl > + / / Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > + / / } < nl > + / / } ) ) ; < nl > + / / return shareMenuFields ; < nl > + / / } < nl > < nl > / / @ Override < nl > / / public BaseGroupInfoActivity getGroupInfoIntent ( int gid ) { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index 0faa460 . . 2fc0b6f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 359 , 6 + 359 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > < nl > final TextView contactText = ( TextView ) findViewById ( R . id . contact _ text ) ; < nl > final ImageView shareContact = ( ImageView ) findViewById ( R . id . share _ contact ) ; < nl > + shareContact . setBackgroundDrawable ( ShareMenuButtonFactory . get ( 0xff3ec2fa , this ) ) ; < nl > + ; < nl > findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; < nl > < nl > View . OnClickListener shareMenuOCL = new View . OnClickListener ( ) { < nl > @ @ - 489 , 14 + 491 , 11 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > first = ! first ; < nl > } < nl > < nl > - if ( menuIconToChange instanceof ImageView ) { < nl > - menuIconToChange . setTag ( R . id . icon , ( ( ImageView ) menuIconToChange ) . getDrawable ( ) ) ; < nl > - } < nl > - menuIconToChange . setTag ( R . id . background , menuIconToChange . getBackground ( ) ) ; < nl > - menuTitleToChange . setTag ( menuTitleToChange . getText ( ) . toString ( ) ) ; < nl > } < nl > < nl > - < nl > + menuIconToChange . setTag ( R . id . icon , ( ( ImageView ) menuIconToChange ) . getDrawable ( ) ) ; < nl > + menuIconToChange . setTag ( R . id . background , menuIconToChange . getBackground ( ) ) ; < nl > + menuTitleToChange . setTag ( menuTitleToChange . getText ( ) . toString ( ) ) ; < nl > < nl > handleIntent ( ) ; < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > index d4304f4 . . a52f56d 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > @ @ - 151 , 14 + 151 , 16 @ @ < nl > < nl > < FrameLayout < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " > < nl > + android : layout _ height = " @ dimen / share _ btn _ size " < nl > + android : padding = " 5dp " > < nl > < nl > < ImageView < nl > + android : scaleType = " centerInside " < nl > android : clickable = " true " < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ contact " < nl > - android : background = " @ drawable / share _ contact _ selector " / > < nl > + android : layout _ width = " match _ parent " < nl > + android : layout _ height = " match _ parent " < nl > + android : src = " @ drawable / ic _ person _ white _ 36dp " < nl > + android : id = " @ + id / share _ contact " / > < nl > < nl > < nl > < / FrameLayout >
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java < nl > index 3921a86 . . 40655d5 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java < nl > @ @ - 9 , 6 + 9 , 7 @ @ import android . view . KeyEvent ; < nl > import android . view . View ; < nl > import android . view . inputmethod . EditorInfo ; < nl > import android . widget . EditText ; < nl > + import android . widget . FrameLayout ; < nl > import android . widget . ImageButton ; < nl > import android . widget . ImageView ; < nl > import android . widget . TextView ; < nl > @ @ - 45 , 6 + 46 , 8 @ @ public abstract class ActorEditTextActivity extends BaseActivity { < nl > < nl > / / Emoji keyboard < nl > protected EmojiKeyboard emojiKeyboard ; < nl > + protected ImageView emojiButton ; < nl > + protected FrameLayout sendContainer ; < nl > < nl > @ Override < nl > protected void onCreate ( Bundle savedInstanceState ) { < nl > @ @ - 142 , 7 + 145 , 7 @ @ public abstract class ActorEditTextActivity extends BaseActivity { < nl > ( ( TextView ) removedFromGroup . findViewById ( R . id . kicked _ text ) ) . setTextColor ( ActorSDK . sharedActor ( ) . style . getMainColor ( ) ) ; < nl > < nl > / / Emoji keyboard < nl > - final ImageView emojiButton = ( ImageView ) findViewById ( R . id . ib _ emoji ) ; < nl > + emojiButton = ( ImageView ) findViewById ( R . id . ib _ emoji ) ; < nl > emojiKeyboard = new EmojiKeyboard ( this ) ; < nl > emojiKeyboard . setKeyboardStatusListener ( new KeyboardStatusListener ( ) { < nl > < nl > @ @ - 164 , 6 + 167 , 8 @ @ public abstract class ActorEditTextActivity extends BaseActivity { < nl > } < nl > } ) ; < nl > < nl > + sendContainer = ( FrameLayout ) findViewById ( R . id . sendContainer ) ; < nl > + < nl > / / Keyboard helper for show / hide keyboard < nl > keyboardUtils = new KeyboardHelper ( this ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index daef4dd . . feb19ae 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 1189 , 6 + 1189 , 11 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } < nl > isAudioVisible = true ; < nl > < nl > + hideView ( attachButton ) ; < nl > + hideView ( messageEditText ) ; < nl > + hideView ( emojiButton ) ; < nl > + hideView ( sendContainer ) ; < nl > + < nl > audioFile = ActorSDK . sharedActor ( ) . getMessenger ( ) . getInternalTempFile ( " voice _ msg " , " opus " ) ; < nl > < nl > long id = VoiceCaptureActor . LAST _ ID . incrementAndGet ( ) ; < nl > @ @ - 1219 , 6 + 1224 , 12 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > return ; < nl > } < nl > isAudioVisible = false ; < nl > + < nl > + showView ( attachButton ) ; < nl > + showView ( messageEditText ) ; < nl > + showView ( emojiButton ) ; < nl > + showView ( sendContainer ) ; < nl > + < nl > voiceRecordActor . send ( new VoiceCaptureActor . Stop ( cancel ) ) ; < nl > TranslateAnimation animation = new TranslateAnimation ( 0 , Screen . getWidth ( ) , 0 , 0 ) ; < nl > animation . setDuration ( 160 ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > index c42a626 . . d87dd13 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > @ @ - 314 , 6 + 314 , 12 @ @ < nl > android : background = " @ drawable / selector _ flat " / > < nl > < / FrameLayout > < nl > < nl > + < FrameLayout < nl > + android : layout _ width = " 0dp " < nl > + android : layout _ height = " 0dp " < nl > + android : id = " @ + id / sendContainer " < nl > + android : visibility = " gone " / > < nl > + < nl > < nl > < FrameLayout < nl > android : layout _ width = " 56dp "

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 index 7de8c79 . . a64e8f5 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 @ @ - 75 , 18 + 75 , 18 @ @ public class Application extends ActorSDKApplication { 
 / / return null ; 
 / / } 
 
 - 
 - @ Override 
 - public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { 
 - ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; 
 - shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 - } 
 - } ) ) ; 
 - return shareMenuFields ; 
 - } 
 + / / 
 + / / @ Override 
 + / / public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { 
 + / / ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; 
 + / / shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { 
 + / / @ Override 
 + / / public void onClick ( View v ) { 
 + / / Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 + / / } 
 + / / } ) ) ; 
 + / / return shareMenuFields ; 
 + / / } 
 
 / / @ Override 
 / / public BaseGroupInfoActivity getGroupInfoIntent ( int gid ) { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index 0faa460 . . 2fc0b6f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 359 , 6 + 359 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { 
 
 final TextView contactText = ( TextView ) findViewById ( R . id . contact _ text ) ; 
 final ImageView shareContact = ( ImageView ) findViewById ( R . id . share _ contact ) ; 
 + shareContact . setBackgroundDrawable ( ShareMenuButtonFactory . get ( 0xff3ec2fa , this ) ) ; 
 + ; 
 findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; 
 
 View . OnClickListener shareMenuOCL = new View . OnClickListener ( ) { 
 @ @ - 489 , 14 + 491 , 11 @ @ public class ChatActivity extends ActorEditTextActivity { 
 first = ! first ; 
 } 
 
 - if ( menuIconToChange instanceof ImageView ) { 
 - menuIconToChange . setTag ( R . id . icon , ( ( ImageView ) menuIconToChange ) . getDrawable ( ) ) ; 
 - } 
 - menuIconToChange . setTag ( R . id . background , menuIconToChange . getBackground ( ) ) ; 
 - menuTitleToChange . setTag ( menuTitleToChange . getText ( ) . toString ( ) ) ; 
 } 
 
 - 
 + menuIconToChange . setTag ( R . id . icon , ( ( ImageView ) menuIconToChange ) . getDrawable ( ) ) ; 
 + menuIconToChange . setTag ( R . id . background , menuIconToChange . getBackground ( ) ) ; 
 + menuTitleToChange . setTag ( menuTitleToChange . getText ( ) . toString ( ) ) ; 
 
 handleIntent ( ) ; 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 index d4304f4 . . a52f56d 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 @ @ - 151 , 14 + 151 , 16 @ @ 
 
 < FrameLayout 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " > 
 + android : layout _ height = " @ dimen / share _ btn _ size " 
 + android : padding = " 5dp " > 
 
 < ImageView 
 + android : scaleType = " centerInside " 
 android : clickable = " true " 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ contact " 
 - android : background = " @ drawable / share _ contact _ selector " / > 
 + android : layout _ width = " match _ parent " 
 + android : layout _ height = " match _ parent " 
 + android : src = " @ drawable / ic _ person _ white _ 36dp " 
 + android : id = " @ + id / share _ contact " / > 
 
 
 < / FrameLayout >

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java 
 index 3921a86 . . 40655d5 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java 
 @ @ - 9 , 6 + 9 , 7 @ @ import android . view . KeyEvent ; 
 import android . view . View ; 
 import android . view . inputmethod . EditorInfo ; 
 import android . widget . EditText ; 
 + import android . widget . FrameLayout ; 
 import android . widget . ImageButton ; 
 import android . widget . ImageView ; 
 import android . widget . TextView ; 
 @ @ - 45 , 6 + 46 , 8 @ @ public abstract class ActorEditTextActivity extends BaseActivity { 
 
 / / Emoji keyboard 
 protected EmojiKeyboard emojiKeyboard ; 
 + protected ImageView emojiButton ; 
 + protected FrameLayout sendContainer ; 
 
 @ Override 
 protected void onCreate ( Bundle savedInstanceState ) { 
 @ @ - 142 , 7 + 145 , 7 @ @ public abstract class ActorEditTextActivity extends BaseActivity { 
 ( ( TextView ) removedFromGroup . findViewById ( R . id . kicked _ text ) ) . setTextColor ( ActorSDK . sharedActor ( ) . style . getMainColor ( ) ) ; 
 
 / / Emoji keyboard 
 - final ImageView emojiButton = ( ImageView ) findViewById ( R . id . ib _ emoji ) ; 
 + emojiButton = ( ImageView ) findViewById ( R . id . ib _ emoji ) ; 
 emojiKeyboard = new EmojiKeyboard ( this ) ; 
 emojiKeyboard . setKeyboardStatusListener ( new KeyboardStatusListener ( ) { 
 
 @ @ - 164 , 6 + 167 , 8 @ @ public abstract class ActorEditTextActivity extends BaseActivity { 
 } 
 } ) ; 
 
 + sendContainer = ( FrameLayout ) findViewById ( R . id . sendContainer ) ; 
 + 
 / / Keyboard helper for show / hide keyboard 
 keyboardUtils = new KeyboardHelper ( this ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index daef4dd . . feb19ae 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 1189 , 6 + 1189 , 11 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } 
 isAudioVisible = true ; 
 
 + hideView ( attachButton ) ; 
 + hideView ( messageEditText ) ; 
 + hideView ( emojiButton ) ; 
 + hideView ( sendContainer ) ; 
 + 
 audioFile = ActorSDK . sharedActor ( ) . getMessenger ( ) . getInternalTempFile ( " voice _ msg " , " opus " ) ; 
 
 long id = VoiceCaptureActor . LAST _ ID . incrementAndGet ( ) ; 
 @ @ - 1219 , 6 + 1224 , 12 @ @ public class ChatActivity extends ActorEditTextActivity { 
 return ; 
 } 
 isAudioVisible = false ; 
 + 
 + showView ( attachButton ) ; 
 + showView ( messageEditText ) ; 
 + showView ( emojiButton ) ; 
 + showView ( sendContainer ) ; 
 + 
 voiceRecordActor . send ( new VoiceCaptureActor . Stop ( cancel ) ) ; 
 TranslateAnimation animation = new TranslateAnimation ( 0 , Screen . getWidth ( ) , 0 , 0 ) ; 
 animation . setDuration ( 160 ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 index c42a626 . . d87dd13 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 @ @ - 314 , 6 + 314 , 12 @ @ 
 android : background = " @ drawable / selector _ flat " / > 
 < / FrameLayout > 
 
 + < FrameLayout 
 + android : layout _ width = " 0dp " 
 + android : layout _ height = " 0dp " 
 + android : id = " @ + id / sendContainer " 
 + android : visibility = " gone " / > 
 + 
 
 < FrameLayout 
 android : layout _ width = " 56dp "
