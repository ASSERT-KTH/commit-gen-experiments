BLEU SCORE: 0.4026190971287384

TEST MSG: fix ( android ) : search results loadRequiredPeers
GENERATED MSG: fix ( android ) : request full user in settings

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java < nl > index 879d4a1 . . eea5c58 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java < nl > @ @ - 171 , 14 + 171 , 15 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { < nl > Avatar avatar = null ; < nl > if ( res . size ( ) > 0 ) { < nl > peer = res . get ( 0 ) . getPeer ( ) ; < nl > - < nl > + name = res . get ( 0 ) . getOptMatchString ( ) ; < nl > + if ( name = = null ) { < nl > + return ; < nl > + } < nl > if ( peer . getPeerType ( ) = = PeerType . PRIVATE ) { < nl > UserVM userVM = users ( ) . get ( peer . getPeerId ( ) ) ; < nl > - name = userVM . getName ( ) . getName ( ) ; < nl > avatar = userVM . getAvatar ( ) . get ( ) ; < nl > } else if ( peer . getPeerType ( ) = = PeerType . GROUP ) { < nl > GroupVM groupVM = groups ( ) . get ( peer . getPeerId ( ) ) ; < nl > - name = groupVM . getName ( ) . getName ( ) ; < nl > avatar = groupVM . getAvatar ( ) . get ( ) ; < nl > } else { < nl > return ; < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java < nl > index 2497c4e . . 5dff5fe 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java < nl > @ @ - 127 , 6 + 127 , 8 @ @ public class SearchModule extends AbsModule { < nl > updates ( ) . applyRelatedData ( < nl > responsePeerSearch . getUsers ( ) , < nl > responsePeerSearch . getGroups ( ) ) ) < nl > + . chain ( responsePeerSearch2 - > < nl > + updates ( ) . loadRequiredPeers ( responsePeerSearch2 . getUserPeers ( ) , responsePeerSearch2 . getGroupPeers ( ) ) ) < nl > . map ( responsePeerSearch1 - > < nl > ManagedList . of ( responsePeerSearch1 . getSearchResults ( ) ) < nl > . map ( r - > new PeerSearchEntity ( convert ( r . getPeer ( ) ) , r . getOptMatchString ( ) ) ) ) ;
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > index 861b3be . . f52f13c 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > @ @ - 73 , 6 + 73 , 7 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > < nl > @ Override < nl > public View onCreateView ( final LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > + messenger ( ) . onUserVisible ( myUid ( ) ) ; < nl > View view = inflater . inflate ( R . layout . fragment _ settings , container , false ) ; < nl > < nl > shp = getActivity ( ) . getSharedPreferences ( " wallpaper " , Context . MODE _ PRIVATE ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / actor _ activity _ main . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / actor _ activity _ main . xml < nl > index 62455f0 . . 4567da4 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / actor _ activity _ main . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / actor _ activity _ main . xml < nl > @ @ - 16 , 7 + 16 , 7 @ @ < nl > android : layout _ height = " wrap _ content " < nl > android : background = " ? attr / colorPrimary " < nl > android : minHeight = " 56dp " < nl > - app : popupTheme = " @ style / ThemeOverlay . AppCompat . Dark . ActionBar " < nl > + app : popupTheme = " @ style / ThemeOverlay . AppCompat . Light " < nl > app : theme = " @ style / ThemeOverlay . AppCompat . Dark . ActionBar " / > < nl > < nl > < FrameLayout < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / users / router / UserRouter . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / users / router / UserRouter . java < nl > index 2085594 . . 6ac30a9 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / users / router / UserRouter . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / users / router / UserRouter . java < nl > @ @ - 196 , 7 + 196 , 7 @ @ public class UserRouter extends ModuleActor { < nl > return users ( ) . getValueAsync ( uid ) < nl > . fallback ( u - > null ) < nl > . flatMap ( u - > { < nl > - / / Ignore if name not changed < nl > + / / Ignore if about not changed < nl > if ( u ! = null & & u . isHaveExtension ( ) & & ! equalsE ( u . getAbout ( ) , about ) ) { < nl > < nl > / / Changing about information

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java 
 index 879d4a1 . . eea5c58 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java 
 @ @ - 171 , 14 + 171 , 15 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { 
 Avatar avatar = null ; 
 if ( res . size ( ) > 0 ) { 
 peer = res . get ( 0 ) . getPeer ( ) ; 
 - 
 + name = res . get ( 0 ) . getOptMatchString ( ) ; 
 + if ( name = = null ) { 
 + return ; 
 + } 
 if ( peer . getPeerType ( ) = = PeerType . PRIVATE ) { 
 UserVM userVM = users ( ) . get ( peer . getPeerId ( ) ) ; 
 - name = userVM . getName ( ) . getName ( ) ; 
 avatar = userVM . getAvatar ( ) . get ( ) ; 
 } else if ( peer . getPeerType ( ) = = PeerType . GROUP ) { 
 GroupVM groupVM = groups ( ) . get ( peer . getPeerId ( ) ) ; 
 - name = groupVM . getName ( ) . getName ( ) ; 
 avatar = groupVM . getAvatar ( ) . get ( ) ; 
 } else { 
 return ; 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java 
 index 2497c4e . . 5dff5fe 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / search / SearchModule . java 
 @ @ - 127 , 6 + 127 , 8 @ @ public class SearchModule extends AbsModule { 
 updates ( ) . applyRelatedData ( 
 responsePeerSearch . getUsers ( ) , 
 responsePeerSearch . getGroups ( ) ) ) 
 + . chain ( responsePeerSearch2 - > 
 + updates ( ) . loadRequiredPeers ( responsePeerSearch2 . getUserPeers ( ) , responsePeerSearch2 . getGroupPeers ( ) ) ) 
 . map ( responsePeerSearch1 - > 
 ManagedList . of ( responsePeerSearch1 . getSearchResults ( ) ) 
 . map ( r - > new PeerSearchEntity ( convert ( r . getPeer ( ) ) , r . getOptMatchString ( ) ) ) ) ;

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 index 861b3be . . f52f13c 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 @ @ - 73 , 6 + 73 , 7 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 
 @ Override 
 public View onCreateView ( final LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 + messenger ( ) . onUserVisible ( myUid ( ) ) ; 
 View view = inflater . inflate ( R . layout . fragment _ settings , container , false ) ; 
 
 shp = getActivity ( ) . getSharedPreferences ( " wallpaper " , Context . MODE _ PRIVATE ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / actor _ activity _ main . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / actor _ activity _ main . xml 
 index 62455f0 . . 4567da4 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / actor _ activity _ main . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / actor _ activity _ main . xml 
 @ @ - 16 , 7 + 16 , 7 @ @ 
 android : layout _ height = " wrap _ content " 
 android : background = " ? attr / colorPrimary " 
 android : minHeight = " 56dp " 
 - app : popupTheme = " @ style / ThemeOverlay . AppCompat . Dark . ActionBar " 
 + app : popupTheme = " @ style / ThemeOverlay . AppCompat . Light " 
 app : theme = " @ style / ThemeOverlay . AppCompat . Dark . ActionBar " / > 
 
 < FrameLayout 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / users / router / UserRouter . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / users / router / UserRouter . java 
 index 2085594 . . 6ac30a9 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / users / router / UserRouter . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / users / router / UserRouter . java 
 @ @ - 196 , 7 + 196 , 7 @ @ public class UserRouter extends ModuleActor { 
 return users ( ) . getValueAsync ( uid ) 
 . fallback ( u - > null ) 
 . flatMap ( u - > { 
 - / / Ignore if name not changed 
 + / / Ignore if about not changed 
 if ( u ! = null & & u . isHaveExtension ( ) & & ! equalsE ( u . getAbout ( ) , about ) ) { 
 
 / / Changing about information
