BLEU SCORE: 0.19640732545025652

TEST MSG: fix ( server : core ) : dialog list sort
GENERATED MSG: perf ( server : messaging ) : persistAllAsync in DialogRoot

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > index b5e40dd . . fabe68b 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > @ @ - 287 , 7 + 287 , 7 @ @ private class DialogRoot ( val userId : Int , extensions : Seq [ ApiExtension ] ) < nl > case ( ( di1 , name1 ) , ( di2 , name2 ) ) ⇒ < nl > if ( di1 . getPeer . typ . isGroup & & di2 . getPeer . typ . isPrivate ) true < nl > else if ( di1 . getPeer . typ . isPrivate & & di2 . getPeer . typ . isGroup ) false < nl > - else name1 . headOption . getOrElse ( ' ' ) < name2 . headOption . getOrElse ( ' ' ) < nl > + else name1 < name2 < nl > } . map ( _ . _ 1 ) < nl > }
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > index 1f43c7c . . 3c87d65 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > @ @ - 141 , 7 + 141 , 7 @ @ private class DialogRoot ( val userId : Int , extensions : Seq [ ApiExtension ] ) < nl > List ( Created ( now , peerOpt ) ) < nl > } < nl > < nl > - persistAll ( events ) ( e ⇒ commit ( e ) ) < nl > + persistAllAsync ( events ) ( e ⇒ commit ( e ) ) < nl > < nl > deferAsync ( ( ) ) { _ ⇒ < nl > handleDialogCommand ( dc )

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 index b5e40dd . . fabe68b 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 @ @ - 287 , 7 + 287 , 7 @ @ private class DialogRoot ( val userId : Int , extensions : Seq [ ApiExtension ] ) 
 case ( ( di1 , name1 ) , ( di2 , name2 ) ) ⇒ 
 if ( di1 . getPeer . typ . isGroup & & di2 . getPeer . typ . isPrivate ) true 
 else if ( di1 . getPeer . typ . isPrivate & & di2 . getPeer . typ . isGroup ) false 
 - else name1 . headOption . getOrElse ( ' ' ) < name2 . headOption . getOrElse ( ' ' ) 
 + else name1 < name2 
 } . map ( _ . _ 1 ) 
 }

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 index 1f43c7c . . 3c87d65 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 @ @ - 141 , 7 + 141 , 7 @ @ private class DialogRoot ( val userId : Int , extensions : Seq [ ApiExtension ] ) 
 List ( Created ( now , peerOpt ) ) 
 } 
 
 - persistAll ( events ) ( e ⇒ commit ( e ) ) 
 + persistAllAsync ( events ) ( e ⇒ commit ( e ) ) 
 
 deferAsync ( ( ) ) { _ ⇒ 
 handleDialogCommand ( dc )
