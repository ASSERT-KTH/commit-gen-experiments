BLEU SCORE: 0.2626909894424158

TEST MSG: fix ( android ) : recover HolderAdapter unbind on moveToScratchHeap
GENERATED MSG: feat ( android ) : sync wallpapers

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / PickCountryFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / PickCountryFragment . java < nl > index ef1d81a . . 0a92ba4 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / PickCountryFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / PickCountryFragment . java < nl > @ @ - 110 , 7 + 110 , 7 @ @ public class PickCountryFragment extends BaseFragment { < nl > } < nl > < nl > @ Override < nl > - public void unbind ( ) { < nl > + public void unbind ( boolean full ) { < nl > name . setText ( " " ) ; < nl > code . setText ( " " ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java < nl > index 53ef09f . . 18de53e 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java < nl > @ @ - 648 , 8 + 648 , 10 @ @ public class CallFragment extends BaseFragment { < nl > < nl > < nl > @ Override < nl > - public void unbind ( ) { < nl > - avatarView . unbind ( ) ; < nl > + public void unbind ( boolean full ) { < nl > + if ( full ) { < nl > + avatarView . unbind ( ) ; < nl > + } < nl > } < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / botcommands / CommandsAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / botcommands / CommandsAdapter . java < nl > index cbbf46f . . 7f81031 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / botcommands / CommandsAdapter . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / botcommands / CommandsAdapter . java < nl > @ @ - 124 , 8 + 124 , 10 @ @ public class CommandsAdapter extends HolderAdapter < BotCommand > { < nl > } < nl > < nl > @ Override < nl > - public void unbind ( ) { < nl > - avatarView . unbind ( ) ; < nl > + public void unbind ( boolean full ) { < nl > + if ( full ) { < nl > + avatarView . unbind ( ) ; < nl > + } < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java < nl > index 40de074 . . f657bde 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java < nl > @ @ - 120 , 8 + 120 , 10 @ @ public class MentionsAdapter extends HolderAdapter < MentionFilterResult > { < nl > < nl > < nl > @ Override < nl > - public void unbind ( ) { < nl > - avatarView . unbind ( ) ; < nl > + public void unbind ( boolean full ) { < nl > + if ( full ) { < nl > + avatarView . unbind ( ) ; < nl > + } < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java < nl > index 6335007 . . aa1111e 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java < nl > @ @ - 98 , 12 + 98 , 15 @ @ public class MembersAdapter extends HolderAdapter < GroupMember > { < nl > } < nl > < nl > @ Override < nl > - public void unbind ( ) { < nl > - avatarView . unbind ( ) ; < nl > + public void unbind ( boolean full ) { < nl > + if ( full ) { < nl > + avatarView . unbind ( ) ; < nl > + } < nl > if ( onlineBinding ! = null ) { < nl > BINDER . unbind ( onlineBinding ) ; < nl > } < nl > } < nl > + < nl > } < nl > < nl > @ Override < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / HolderAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / HolderAdapter . java < nl > index c1784dc . . e69471f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / HolderAdapter . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / HolderAdapter . java < nl > @ @ - 42 , 14 + 42 , 14 @ @ public abstract class HolderAdapter < V > extends BaseAdapter { < nl > } < nl > < nl > public void onMovedToScrapHeap ( View view ) { < nl > - / / if ( view . getTag ( ) instanceof ViewHolder ) { < nl > - / / ( ( ViewHolder ) view . getTag ( ) ) . unbind ( ) ; < nl > - / / } < nl > + if ( view . getTag ( ) instanceof ViewHolder ) { < nl > + ( ( ViewHolder ) view . getTag ( ) ) . unbind ( false ) ; < nl > + } < nl > } < nl > < nl > public void dispose ( ) { < nl > for ( ViewHolder holder : holders ) { < nl > - holder . unbind ( ) ; < nl > + holder . unbind ( true ) ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / ViewHolder . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / ViewHolder . java < nl > index 3b279b8 . . ed08f7f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / ViewHolder . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / ViewHolder . java < nl > @ @ - 23 , 7 + 23 , 7 @ @ public abstract class ViewHolder < T > { < nl > < nl > public abstract void bind ( T data , int position , Context context ) ; < nl > < nl > - public void unbind ( ) { < nl > + public void unbind ( boolean full ) { < nl > < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java < nl > index 9e9b475 . . b3c644a 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java < nl > @ @ - 10 , 6 + 10 , 8 @ @ import android . view . View ; < nl > import im . actor . sdk . R ; < nl > import im . actor . sdk . view . BackgroundPreviewView ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > + < nl > public class ChatBackgroundView extends View { < nl > < nl > private Drawable background ; < nl > @ @ - 37 , 7 + 39 , 7 @ @ public class ChatBackgroundView extends View { < nl > public void bind ( ) { < nl > if ( background = = null ) { < nl > shp = getContext ( ) . getSharedPreferences ( " wallpaper " , Context . MODE _ PRIVATE ) ; < nl > - background = getResources ( ) . getDrawable ( BackgroundPreviewView . getBackground ( shp . getInt ( " wallpaper " , 0 ) ) ) ; < nl > + background = getResources ( ) . getDrawable ( BackgroundPreviewView . getBackground ( BackgroundPreviewView . getBackgroundIdByUri ( messenger ( ) . getSelectedWallpaper ( ) , getContext ( ) , shp . getInt ( " wallpaper " , 0 ) ) ) ) ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > index b9dc756 . . 8b58e0f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java < nl > @ @ - 152 , 8 + 152 , 10 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > @ Override < nl > public void onChanged ( String val , Value < String > valueModel ) { < nl > if ( val ! = null & & ! val . isEmpty ( ) ) { < nl > + aboutTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > aboutTitle . setText ( val ) ; < nl > } else { < nl > + aboutTitle . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > aboutTitle . setText ( getString ( R . string . edit _ about _ edittext _ hint ) ) ; < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java < nl > index 3734eb7 . . f4a5ff7 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java < nl > @ @ - 18 , 6 + 18 , 8 @ @ import im . actor . sdk . controllers . fragment . BaseFragment ; < nl > import im . actor . sdk . util . Screen ; < nl > import im . actor . sdk . view . BackgroundPreviewView ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > + < nl > public class PickWallpaperFragment extends BaseFragment { < nl > < nl > private ChatBackgroundView wallpaper ; < nl > @ @ - 40 , 7 + 42 , 7 @ @ public class PickWallpaperFragment extends BaseFragment { < nl > ed = shp . edit ( ) ; < nl > selectedWallpaper = getArguments ( ) . getInt ( " EXTRA _ ID " ) ; < nl > if ( selectedWallpaper = = - 1 ) { < nl > - selectedWallpaper = shp . getInt ( " wallpaper " , 0 ) ; < nl > + selectedWallpaper = BackgroundPreviewView . getBackgroundIdByUri ( messenger ( ) . getSelectedWallpaper ( ) , getContext ( ) , shp . getInt ( " wallpaper " , 0 ) ) ; < nl > } < nl > View res = inflater . inflate ( R . layout . fragment _ pick _ wallpaper , container , false ) ; < nl > < nl > @ @ - 61 , 6 + 63 , 7 @ @ public class PickWallpaperFragment extends BaseFragment { < nl > res . findViewById ( R . id . ok ) . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > + messenger ( ) . changeSelectedWallpaper ( " local : " . concat ( getResources ( ) . getResourceEntryName ( BackgroundPreviewView . getBackground ( selectedWallpaper ) ) ) ) ; < nl > ed . putInt ( " wallpaper " , selectedWallpaper ) ; < nl > ed . commit ( ) ; < nl > getActivity ( ) . finish ( ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java < nl > index 31078d6 . . 9822568 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java < nl > @ @ - 78 , 6 + 78 , 20 @ @ public class BackgroundPreviewView extends SimpleDraweeView { < nl > } < nl > } < nl > < nl > + public static int getBackgroundIdByUri ( String uri , Context context , int def ) { < nl > + if ( uri ! = null & & uri . startsWith ( " local : " ) ) { < nl > + String fileName = uri . replace ( " local : " , " " ) ; < nl > + int fileId = context . getResources ( ) . getIdentifier ( fileName , " drawable " , context . getPackageName ( ) ) ; < nl > + for ( int i = 0 ; i < BACKGROUNDS . length ; i + + ) { < nl > + if ( BACKGROUNDS [ i ] = = fileId ) { < nl > + return i ; < nl > + } < nl > + } < nl > + < nl > + } < nl > + return def ; < nl > + } < nl > + < nl > public static int getSize ( ) { < nl > return BACKGROUNDS . length ; < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / PickCountryFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / PickCountryFragment . java 
 index ef1d81a . . 0a92ba4 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / PickCountryFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / PickCountryFragment . java 
 @ @ - 110 , 7 + 110 , 7 @ @ public class PickCountryFragment extends BaseFragment { 
 } 
 
 @ Override 
 - public void unbind ( ) { 
 + public void unbind ( boolean full ) { 
 name . setText ( " " ) ; 
 code . setText ( " " ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java 
 index 53ef09f . . 18de53e 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / calls / CallFragment . java 
 @ @ - 648 , 8 + 648 , 10 @ @ public class CallFragment extends BaseFragment { 
 
 
 @ Override 
 - public void unbind ( ) { 
 - avatarView . unbind ( ) ; 
 + public void unbind ( boolean full ) { 
 + if ( full ) { 
 + avatarView . unbind ( ) ; 
 + } 
 } 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / botcommands / CommandsAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / botcommands / CommandsAdapter . java 
 index cbbf46f . . 7f81031 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / botcommands / CommandsAdapter . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / botcommands / CommandsAdapter . java 
 @ @ - 124 , 8 + 124 , 10 @ @ public class CommandsAdapter extends HolderAdapter < BotCommand > { 
 } 
 
 @ Override 
 - public void unbind ( ) { 
 - avatarView . unbind ( ) ; 
 + public void unbind ( boolean full ) { 
 + if ( full ) { 
 + avatarView . unbind ( ) ; 
 + } 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java 
 index 40de074 . . f657bde 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java 
 @ @ - 120 , 8 + 120 , 10 @ @ public class MentionsAdapter extends HolderAdapter < MentionFilterResult > { 
 
 
 @ Override 
 - public void unbind ( ) { 
 - avatarView . unbind ( ) ; 
 + public void unbind ( boolean full ) { 
 + if ( full ) { 
 + avatarView . unbind ( ) ; 
 + } 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java 
 index 6335007 . . aa1111e 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / view / MembersAdapter . java 
 @ @ - 98 , 12 + 98 , 15 @ @ public class MembersAdapter extends HolderAdapter < GroupMember > { 
 } 
 
 @ Override 
 - public void unbind ( ) { 
 - avatarView . unbind ( ) ; 
 + public void unbind ( boolean full ) { 
 + if ( full ) { 
 + avatarView . unbind ( ) ; 
 + } 
 if ( onlineBinding ! = null ) { 
 BINDER . unbind ( onlineBinding ) ; 
 } 
 } 
 + 
 } 
 
 @ Override 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / HolderAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / HolderAdapter . java 
 index c1784dc . . e69471f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / HolderAdapter . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / HolderAdapter . java 
 @ @ - 42 , 14 + 42 , 14 @ @ public abstract class HolderAdapter < V > extends BaseAdapter { 
 } 
 
 public void onMovedToScrapHeap ( View view ) { 
 - / / if ( view . getTag ( ) instanceof ViewHolder ) { 
 - / / ( ( ViewHolder ) view . getTag ( ) ) . unbind ( ) ; 
 - / / } 
 + if ( view . getTag ( ) instanceof ViewHolder ) { 
 + ( ( ViewHolder ) view . getTag ( ) ) . unbind ( false ) ; 
 + } 
 } 
 
 public void dispose ( ) { 
 for ( ViewHolder holder : holders ) { 
 - holder . unbind ( ) ; 
 + holder . unbind ( true ) ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / ViewHolder . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / ViewHolder . java 
 index 3b279b8 . . ed08f7f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / ViewHolder . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / ViewHolder . java 
 @ @ - 23 , 7 + 23 , 7 @ @ public abstract class ViewHolder < T > { 
 
 public abstract void bind ( T data , int position , Context context ) ; 
 
 - public void unbind ( ) { 
 + public void unbind ( boolean full ) { 
 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java 
 index 9e9b475 . . b3c644a 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / ChatBackgroundView . java 
 @ @ - 10 , 6 + 10 , 8 @ @ import android . view . View ; 
 import im . actor . sdk . R ; 
 import im . actor . sdk . view . BackgroundPreviewView ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 + 
 public class ChatBackgroundView extends View { 
 
 private Drawable background ; 
 @ @ - 37 , 7 + 39 , 7 @ @ public class ChatBackgroundView extends View { 
 public void bind ( ) { 
 if ( background = = null ) { 
 shp = getContext ( ) . getSharedPreferences ( " wallpaper " , Context . MODE _ PRIVATE ) ; 
 - background = getResources ( ) . getDrawable ( BackgroundPreviewView . getBackground ( shp . getInt ( " wallpaper " , 0 ) ) ) ; 
 + background = getResources ( ) . getDrawable ( BackgroundPreviewView . getBackground ( BackgroundPreviewView . getBackgroundIdByUri ( messenger ( ) . getSelectedWallpaper ( ) , getContext ( ) , shp . getInt ( " wallpaper " , 0 ) ) ) ) ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 index b9dc756 . . 8b58e0f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorSettingsFragment . java 
 @ @ - 152 , 8 + 152 , 10 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 @ Override 
 public void onChanged ( String val , Value < String > valueModel ) { 
 if ( val ! = null & & ! val . isEmpty ( ) ) { 
 + aboutTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 aboutTitle . setText ( val ) ; 
 } else { 
 + aboutTitle . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 aboutTitle . setText ( getString ( R . string . edit _ about _ edittext _ hint ) ) ; 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java 
 index 3734eb7 . . f4a5ff7 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / PickWallpaperFragment . java 
 @ @ - 18 , 6 + 18 , 8 @ @ import im . actor . sdk . controllers . fragment . BaseFragment ; 
 import im . actor . sdk . util . Screen ; 
 import im . actor . sdk . view . BackgroundPreviewView ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 + 
 public class PickWallpaperFragment extends BaseFragment { 
 
 private ChatBackgroundView wallpaper ; 
 @ @ - 40 , 7 + 42 , 7 @ @ public class PickWallpaperFragment extends BaseFragment { 
 ed = shp . edit ( ) ; 
 selectedWallpaper = getArguments ( ) . getInt ( " EXTRA _ ID " ) ; 
 if ( selectedWallpaper = = - 1 ) { 
 - selectedWallpaper = shp . getInt ( " wallpaper " , 0 ) ; 
 + selectedWallpaper = BackgroundPreviewView . getBackgroundIdByUri ( messenger ( ) . getSelectedWallpaper ( ) , getContext ( ) , shp . getInt ( " wallpaper " , 0 ) ) ; 
 } 
 View res = inflater . inflate ( R . layout . fragment _ pick _ wallpaper , container , false ) ; 
 
 @ @ - 61 , 6 + 63 , 7 @ @ public class PickWallpaperFragment extends BaseFragment { 
 res . findViewById ( R . id . ok ) . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 + messenger ( ) . changeSelectedWallpaper ( " local : " . concat ( getResources ( ) . getResourceEntryName ( BackgroundPreviewView . getBackground ( selectedWallpaper ) ) ) ) ; 
 ed . putInt ( " wallpaper " , selectedWallpaper ) ; 
 ed . commit ( ) ; 
 getActivity ( ) . finish ( ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java 
 index 31078d6 . . 9822568 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / BackgroundPreviewView . java 
 @ @ - 78 , 6 + 78 , 20 @ @ public class BackgroundPreviewView extends SimpleDraweeView { 
 } 
 } 
 
 + public static int getBackgroundIdByUri ( String uri , Context context , int def ) { 
 + if ( uri ! = null & & uri . startsWith ( " local : " ) ) { 
 + String fileName = uri . replace ( " local : " , " " ) ; 
 + int fileId = context . getResources ( ) . getIdentifier ( fileName , " drawable " , context . getPackageName ( ) ) ; 
 + for ( int i = 0 ; i < BACKGROUNDS . length ; i + + ) { 
 + if ( BACKGROUNDS [ i ] = = fileId ) { 
 + return i ; 
 + } 
 + } 
 + 
 + } 
 + return def ; 
 + } 
 + 
 public static int getSize ( ) { 
 return BACKGROUNDS . length ; 
 }
