BLEU SCORE: 0.33180774028439425

TEST MSG: fix ( android ) : android - app sourceCompatibility 1 . 6
GENERATED MSG: fix ( android ) : move push from app to lib

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / build . gradle b / actor - sdk / sdk - core - android / android - app / build . gradle < nl > index d9efe94 . . acd3cd1 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / build . gradle < nl > + + + b / actor - sdk / sdk - core - android / android - app / build . gradle < nl > @ @ - 23 , 6 + 23 , 11 @ @ android { < nl > } < nl > } < nl > < nl > + compileOptions { < nl > + sourceCompatibility 1 . 6 < nl > + targetCompatibility 1 . 6 < nl > + } < nl > + < nl > lintOptions { < nl > abortOnError false < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / tc / TCActor . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / tc / TCActor . java < nl > index 66284ce . . 2b01e78 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / tc / TCActor . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / tc / TCActor . java < nl > @ @ - 30 , 8 + 30 , 8 @ @ public class TCActor extends Actor { < nl > private String url ; < nl > < nl > public TCActor ( String url ) { < nl > - this . reidMap = new HashMap < > ( ) ; < nl > - this . peerMap = new HashMap < > ( ) ; < nl > + this . reidMap = new HashMap < Integer , HashSet < Long > > ( ) ; < nl > + this . peerMap = new HashMap < Integer , Peer > ( ) ; < nl > this . url = url ; < nl > } < nl > < nl > @ @ - 55 , 7 + 55 , 7 @ @ public class TCActor extends Actor { < nl > if ( reidMap . get ( id ) ! = null ) { < nl > reidMap . get ( id ) . add ( rid ) ; < nl > } else { < nl > - HashSet < Long > rids = new HashSet < > ( ) ; < nl > + HashSet < Long > rids = new HashSet < Long > ( ) ; < nl > rids . add ( rid ) ; < nl > reidMap . put ( id , rids ) ; < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / build . gradle b / actor - sdk / sdk - core - android / android - app / build . gradle < nl > index 46f0a0d . . c992f0f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / build . gradle < nl > + + + b / actor - sdk / sdk - core - android / android - app / build . gradle < nl > @ @ - 31 , 6 + 31 , 6 @ @ android { < nl > dependencies { < nl > compile fileTree ( dir : ' libs ' , include : [ ' * . jar ' ] ) < nl > compile project ( ' : actor - sdk : sdk - core - android : android - sdk ' ) < nl > - compile ' com . google . android . gms : play - services - gcm : 7 . 5 . 0 ' < nl > + compile project ( ' : actor - sdk : sdk - core - android : android - google - push ' ) < nl > < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / AndroidManifest . xml b / actor - sdk / sdk - core - android / android - app / src / main / AndroidManifest . xml < nl > index 5e3c3b1 . . 1efb5ab 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / AndroidManifest . xml < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / AndroidManifest . xml < nl > @ @ - 2 , 14 + 2 , 6 @ @ < nl > < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " < nl > package = " im . actor " > < nl > < nl > - < permission < nl > - android : name = " $ { applicationId } . permission . C2D _ MESSAGE " < nl > - android : protectionLevel = " signature " / > < nl > - < nl > - < uses - permission android : name = " $ { applicationId } . permission . C2D _ MESSAGE " / > < nl > - < uses - permission android : name = " com . google . android . c2dm . permission . RECEIVE " / > < nl > - < nl > - < nl > < application < nl > android : name = " . Application " < nl > android : allowBackup = " true " < nl > @ @ - 34 , 15 + 26 , 6 @ @ < nl > android : theme = " @ style / NoBarActivityTheme " < nl > android : windowSoftInputMode = " adjustNothing " / > < nl > < nl > - < receiver < nl > - android : name = " im . actor . PushReceiver " < nl > - android : permission = " com . google . android . c2dm . permission . SEND " > < nl > - < intent - filter > < nl > - < action android : name = " com . google . android . c2dm . intent . RECEIVE " / > < nl > - < nl > - < category android : name = " $ { applicationId } " / > < nl > - < / intent - filter > < nl > - < / receiver > < nl > < nl > < / application > < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushManager . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushManager . java < nl > deleted file mode 100644 < nl > index c547bed . . 0000000 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushManager . java < nl > + + + / dev / null < nl > @ @ - 1 , 26 + 0 , 0 @ @ < nl > - package im . actor ; < nl > - < nl > - import android . content . Context ; < nl > - < nl > - import com . google . android . gms . gcm . GoogleCloudMessaging ; < nl > - < nl > - import java . io . IOException ; < nl > - < nl > - import im . actor . runtime . Log ; < nl > - import im . actor . sdk . ActorSDK ; < nl > - import im . actor . sdk . core . ActorPushManager ; < nl > - < nl > - public class PushManager extends ActorPushManager { < nl > - @ Override < nl > - public String tryRegisterPush ( Context context ) { < nl > - GoogleCloudMessaging cloudMessaging = GoogleCloudMessaging . getInstance ( context ) ; < nl > - Log . d ( " Actor GCM " , " Requesting push token iteration . . . " ) ; < nl > - try { < nl > - return cloudMessaging . register ( " " + ActorSDK . sharedActor ( ) . getPushId ( ) ) ; < nl > - } catch ( IOException e ) { < nl > - e . printStackTrace ( ) ; < nl > - return null ; < nl > - } < nl > - < nl > - } < nl > - } < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushReceiver . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushReceiver . java < nl > deleted file mode 100644 < nl > index 13a1316 . . 0000000 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushReceiver . java < nl > + + + / dev / null < nl > @ @ - 1 , 34 + 0 , 0 @ @ < nl > - package im . actor ; < nl > - < nl > - import android . app . Activity ; < nl > - import android . content . Context ; < nl > - import android . content . Intent ; < nl > - import android . os . Bundle ; < nl > - < nl > - import com . google . android . gms . gcm . GoogleCloudMessaging ; < nl > - < nl > - import im . actor . runtime . Log ; < nl > - import im . actor . sdk . core . ActorPushReceiver ; < nl > - < nl > - public class PushReceiver extends ActorPushReceiver { < nl > - < nl > - private static final String TAG = " ActorPushReceiver " ; < nl > - < nl > - @ Override < nl > - public void onReceive ( Context context , Intent intent ) { < nl > - GoogleCloudMessaging gcm = GoogleCloudMessaging . getInstance ( context ) ; < nl > - Bundle extras = intent . getExtras ( ) ; < nl > - String messageType = gcm . getMessageType ( intent ) ; < nl > - if ( ! extras . isEmpty ( ) ) { < nl > - if ( GoogleCloudMessaging . MESSAGE _ TYPE _ MESSAGE . equals ( messageType ) ) { < nl > - if ( extras . containsKey ( " seq " ) ) { < nl > - int seq = Integer . parseInt ( extras . getString ( " seq " ) ) ; < nl > - onSeqReceived ( seq ) ; < nl > - setResultCode ( Activity . RESULT _ OK ) ; < nl > - Log . d ( TAG , " Push received " ) ; < nl > - } < nl > - } < nl > - } < nl > - completeWakefulIntent ( intent ) ; < nl > - } < nl > - } < nl > diff - - git a / actor - sdk / sdk - core - android / android - google - push / . gitignore b / actor - sdk / sdk - core - android / android - google - push / . gitignore < nl > new file mode 100644 < nl > index 0000000 . . 796b96d < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - google - push / . gitignore < nl > @ @ - 0 , 0 + 1 @ @ < nl > + / build < nl > diff - - git a / actor - sdk / sdk - core - android / android - google - push / build . gradle b / actor - sdk / sdk - core - android / android - google - push / build . gradle < nl > new file mode 100644 < nl > index 0000000 . . 6aa7f64 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - google - push / build . gradle < nl > @ @ - 0 , 0 + 1 , 33 @ @ < nl > + buildscript { < nl > + dependencies { < nl > + classpath ' com . android . tools . build : gradle : 1 . 3 . 0 ' < nl > + classpath ' com . github . dcendents : android - maven - plugin : 1 . 2 ' < nl > + classpath " io . codearte . gradle . nexus : gradle - nexus - staging - plugin : 0 . 5 . 3 " < nl > + } < nl > + } < nl > + < nl > + < nl > + apply plugin : ' com . android . library ' < nl > + < nl > + android { < nl > + compileSdkVersion 23 < nl > + buildToolsVersion " 23 . 0 . 1 " < nl > + < nl > + defaultConfig { < nl > + minSdkVersion 15 < nl > + targetSdkVersion 23 < nl > + versionCode 1 < nl > + versionName " 1 . 0 " < nl > + } < nl > + buildTypes { < nl > + release { < nl > + minifyEnabled false < nl > + } < nl > + } < nl > + } < nl > + < nl > + dependencies { < nl > + compile ' com . android . support : appcompat - v7 : 23 . 1 . 0 ' < nl > + compile project ( ' : actor - sdk : sdk - core - android : android - sdk ' ) < nl > + compile ' com . google . android . gms : play - services - gcm : 7 . 5 . 0 ' < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - google - push / src / main / AndroidManifest . xml b / actor - sdk / sdk - core - android / android - google - push / src / main / AndroidManifest . xml < nl > new file mode 100644 < nl > index 0000000 . . 9bd6c06 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - google - push / src / main / AndroidManifest . xml < nl > @ @ - 0 , 0 + 1 , 27 @ @ < nl > + < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " < nl > + package = " im . actor . push . gcm " > < nl > + < nl > + < permission < nl > + android : name = " $ { applicationId } . permission . C2D _ MESSAGE " < nl > + android : protectionLevel = " signature " / > < nl > + < nl > + < uses - permission android : name = " $ { applicationId } . permission . C2D _ MESSAGE " / > < nl > + < uses - permission android : name = " com . google . android . c2dm . permission . RECEIVE " / > < nl > + < nl > + < application < nl > + android : allowBackup = " true " < nl > + android : label = " @ string / app _ name " < nl > + android : supportsRtl = " true " > < nl > + < receiver < nl > + android : name = " im . actor . push . PushReceiver " < nl > + android : permission = " com . google . android . c2dm . permission . SEND " > < nl > + < intent - filter > < nl > + < action android : name = " com . google . android . c2dm . intent . RECEIVE " / > < nl > + < nl > + < category android : name = " $ { applicationId } " / > < nl > + < / intent - filter > < nl > + < / receiver > < nl > + < nl > + < / application > < nl > + < nl > + < / manifest > < nl > diff - - git a / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushManager . java b / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushManager . java < nl > new file mode 100644 < nl > index 0000000 . . 0aa7127 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushManager . java < nl > @ @ - 0 , 0 + 1 , 26 @ @ < nl > + package im . actor . push ; < nl > + < nl > + import android . content . Context ; < nl > + < nl > + import com . google . android . gms . gcm . GoogleCloudMessaging ; < nl > + < nl > + import java . io . IOException ; < nl > + < nl > + import im . actor . runtime . Log ; < nl > + import im . actor . sdk . ActorSDK ; < nl > + import im . actor . sdk . core . ActorPushManager ; < nl > + < nl > + public class PushManager extends ActorPushManager { < nl > + @ Override < nl > + public String tryRegisterPush ( Context context ) { < nl > + GoogleCloudMessaging cloudMessaging = GoogleCloudMessaging . getInstance ( context ) ; < nl > + Log . d ( " Actor GCM " , " Requesting push token iteration . . . " ) ; < nl > + try { < nl > + return cloudMessaging . register ( " " + ActorSDK . sharedActor ( ) . getPushId ( ) ) ; < nl > + } catch ( IOException e ) { < nl > + e . printStackTrace ( ) ; < nl > + return null ; < nl > + } < nl > + < nl > + } < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushReceiver . java b / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushReceiver . java < nl > new file mode 100644 < nl > index 0000000 . . 0384bd8 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushReceiver . java < nl > @ @ - 0 , 0 + 1 , 35 @ @ < nl > + package im . actor . push ; < nl > + < nl > + import android . app . Activity ; < nl > + import android . content . Context ; < nl > + import android . content . Intent ; < nl > + import android . os . Bundle ; < nl > + import android . support . v4 . content . WakefulBroadcastReceiver ; < nl > + < nl > + import com . google . android . gms . gcm . GoogleCloudMessaging ; < nl > + < nl > + import im . actor . runtime . Log ; < nl > + import im . actor . sdk . core . ActorPushReceiver ; < nl > + < nl > + public class PushReceiver extends ActorPushReceiver { < nl > + < nl > + private static final String TAG = " ActorPushReceiver " ; < nl > + < nl > + @ Override < nl > + public void onReceive ( Context context , Intent intent ) { < nl > + GoogleCloudMessaging gcm = GoogleCloudMessaging . getInstance ( context ) ; < nl > + Bundle extras = intent . getExtras ( ) ; < nl > + String messageType = gcm . getMessageType ( intent ) ; < nl > + if ( ! extras . isEmpty ( ) ) { < nl > + if ( GoogleCloudMessaging . MESSAGE _ TYPE _ MESSAGE . equals ( messageType ) ) { < nl > + if ( extras . containsKey ( " seq " ) ) { < nl > + int seq = Integer . parseInt ( extras . getString ( " seq " ) ) ; < nl > + onSeqReceived ( seq ) ; < nl > + setResultCode ( Activity . RESULT _ OK ) ; < nl > + Log . d ( TAG , " Push received " ) ; < nl > + } < nl > + } < nl > + } < nl > + WakefulBroadcastReceiver . completeWakefulIntent ( intent ) ; < nl > + } < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - google - push / src / main / res / values / strings . xml b / actor - sdk / sdk - core - android / android - google - push / src / main / res / values / strings . xml < nl > new file mode 100644 < nl > index 0000000 . . a4a4d41 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - google - push / src / main / res / values / strings . xml < nl > @ @ - 0 , 0 + 1 , 3 @ @ < nl > + < resources > < nl > + < string name = " app _ name " > andorid - google - push < / string > < nl > + < / resources > < nl > diff - - git a / settings . gradle b / settings . gradle < nl > index 25ad353 . . b6f53ba 100644 < nl > - - - a / settings . gradle < nl > + + + b / settings . gradle < nl > @ @ - 22 , 6 + 22 , 9 @ @ include " : actor - sdk : sdk - api : api - codegen " < nl > include " : actor - sdk : sdk - core - android : android - app " < nl > include " : actor - sdk : sdk - core - android : android - sdk " < nl > < nl > + / / Google push for Android SDk < nl > + include " : actor - sdk : sdk - core - android : android - google - push " < nl > + < nl > / / < nl > / / SDK iOS < nl > / /

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / build . gradle b / actor - sdk / sdk - core - android / android - app / build . gradle 
 index d9efe94 . . acd3cd1 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / build . gradle 
 + + + b / actor - sdk / sdk - core - android / android - app / build . gradle 
 @ @ - 23 , 6 + 23 , 11 @ @ android { 
 } 
 } 
 
 + compileOptions { 
 + sourceCompatibility 1 . 6 
 + targetCompatibility 1 . 6 
 + } 
 + 
 lintOptions { 
 abortOnError false 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / tc / TCActor . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / tc / TCActor . java 
 index 66284ce . . 2b01e78 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / tc / TCActor . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / tc / TCActor . java 
 @ @ - 30 , 8 + 30 , 8 @ @ public class TCActor extends Actor { 
 private String url ; 
 
 public TCActor ( String url ) { 
 - this . reidMap = new HashMap < > ( ) ; 
 - this . peerMap = new HashMap < > ( ) ; 
 + this . reidMap = new HashMap < Integer , HashSet < Long > > ( ) ; 
 + this . peerMap = new HashMap < Integer , Peer > ( ) ; 
 this . url = url ; 
 } 
 
 @ @ - 55 , 7 + 55 , 7 @ @ public class TCActor extends Actor { 
 if ( reidMap . get ( id ) ! = null ) { 
 reidMap . get ( id ) . add ( rid ) ; 
 } else { 
 - HashSet < Long > rids = new HashSet < > ( ) ; 
 + HashSet < Long > rids = new HashSet < Long > ( ) ; 
 rids . add ( rid ) ; 
 reidMap . put ( id , rids ) ; 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / build . gradle b / actor - sdk / sdk - core - android / android - app / build . gradle 
 index 46f0a0d . . c992f0f 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / build . gradle 
 + + + b / actor - sdk / sdk - core - android / android - app / build . gradle 
 @ @ - 31 , 6 + 31 , 6 @ @ android { 
 dependencies { 
 compile fileTree ( dir : ' libs ' , include : [ ' * . jar ' ] ) 
 compile project ( ' : actor - sdk : sdk - core - android : android - sdk ' ) 
 - compile ' com . google . android . gms : play - services - gcm : 7 . 5 . 0 ' 
 + compile project ( ' : actor - sdk : sdk - core - android : android - google - push ' ) 
 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / AndroidManifest . xml b / actor - sdk / sdk - core - android / android - app / src / main / AndroidManifest . xml 
 index 5e3c3b1 . . 1efb5ab 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / AndroidManifest . xml 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / AndroidManifest . xml 
 @ @ - 2 , 14 + 2 , 6 @ @ 
 < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 package = " im . actor " > 
 
 - < permission 
 - android : name = " $ { applicationId } . permission . C2D _ MESSAGE " 
 - android : protectionLevel = " signature " / > 
 - 
 - < uses - permission android : name = " $ { applicationId } . permission . C2D _ MESSAGE " / > 
 - < uses - permission android : name = " com . google . android . c2dm . permission . RECEIVE " / > 
 - 
 - 
 < application 
 android : name = " . Application " 
 android : allowBackup = " true " 
 @ @ - 34 , 15 + 26 , 6 @ @ 
 android : theme = " @ style / NoBarActivityTheme " 
 android : windowSoftInputMode = " adjustNothing " / > 
 
 - < receiver 
 - android : name = " im . actor . PushReceiver " 
 - android : permission = " com . google . android . c2dm . permission . SEND " > 
 - < intent - filter > 
 - < action android : name = " com . google . android . c2dm . intent . RECEIVE " / > 
 - 
 - < category android : name = " $ { applicationId } " / > 
 - < / intent - filter > 
 - < / receiver > 
 
 < / application > 
 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushManager . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushManager . java 
 deleted file mode 100644 
 index c547bed . . 0000000 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushManager . java 
 + + + / dev / null 
 @ @ - 1 , 26 + 0 , 0 @ @ 
 - package im . actor ; 
 - 
 - import android . content . Context ; 
 - 
 - import com . google . android . gms . gcm . GoogleCloudMessaging ; 
 - 
 - import java . io . IOException ; 
 - 
 - import im . actor . runtime . Log ; 
 - import im . actor . sdk . ActorSDK ; 
 - import im . actor . sdk . core . ActorPushManager ; 
 - 
 - public class PushManager extends ActorPushManager { 
 - @ Override 
 - public String tryRegisterPush ( Context context ) { 
 - GoogleCloudMessaging cloudMessaging = GoogleCloudMessaging . getInstance ( context ) ; 
 - Log . d ( " Actor GCM " , " Requesting push token iteration . . . " ) ; 
 - try { 
 - return cloudMessaging . register ( " " + ActorSDK . sharedActor ( ) . getPushId ( ) ) ; 
 - } catch ( IOException e ) { 
 - e . printStackTrace ( ) ; 
 - return null ; 
 - } 
 - 
 - } 
 - } 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushReceiver . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushReceiver . java 
 deleted file mode 100644 
 index 13a1316 . . 0000000 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / PushReceiver . java 
 + + + / dev / null 
 @ @ - 1 , 34 + 0 , 0 @ @ 
 - package im . actor ; 
 - 
 - import android . app . Activity ; 
 - import android . content . Context ; 
 - import android . content . Intent ; 
 - import android . os . Bundle ; 
 - 
 - import com . google . android . gms . gcm . GoogleCloudMessaging ; 
 - 
 - import im . actor . runtime . Log ; 
 - import im . actor . sdk . core . ActorPushReceiver ; 
 - 
 - public class PushReceiver extends ActorPushReceiver { 
 - 
 - private static final String TAG = " ActorPushReceiver " ; 
 - 
 - @ Override 
 - public void onReceive ( Context context , Intent intent ) { 
 - GoogleCloudMessaging gcm = GoogleCloudMessaging . getInstance ( context ) ; 
 - Bundle extras = intent . getExtras ( ) ; 
 - String messageType = gcm . getMessageType ( intent ) ; 
 - if ( ! extras . isEmpty ( ) ) { 
 - if ( GoogleCloudMessaging . MESSAGE _ TYPE _ MESSAGE . equals ( messageType ) ) { 
 - if ( extras . containsKey ( " seq " ) ) { 
 - int seq = Integer . parseInt ( extras . getString ( " seq " ) ) ; 
 - onSeqReceived ( seq ) ; 
 - setResultCode ( Activity . RESULT _ OK ) ; 
 - Log . d ( TAG , " Push received " ) ; 
 - } 
 - } 
 - } 
 - completeWakefulIntent ( intent ) ; 
 - } 
 - } 
 diff - - git a / actor - sdk / sdk - core - android / android - google - push / . gitignore b / actor - sdk / sdk - core - android / android - google - push / . gitignore 
 new file mode 100644 
 index 0000000 . . 796b96d 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - google - push / . gitignore 
 @ @ - 0 , 0 + 1 @ @ 
 + / build 
 diff - - git a / actor - sdk / sdk - core - android / android - google - push / build . gradle b / actor - sdk / sdk - core - android / android - google - push / build . gradle 
 new file mode 100644 
 index 0000000 . . 6aa7f64 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - google - push / build . gradle 
 @ @ - 0 , 0 + 1 , 33 @ @ 
 + buildscript { 
 + dependencies { 
 + classpath ' com . android . tools . build : gradle : 1 . 3 . 0 ' 
 + classpath ' com . github . dcendents : android - maven - plugin : 1 . 2 ' 
 + classpath " io . codearte . gradle . nexus : gradle - nexus - staging - plugin : 0 . 5 . 3 " 
 + } 
 + } 
 + 
 + 
 + apply plugin : ' com . android . library ' 
 + 
 + android { 
 + compileSdkVersion 23 
 + buildToolsVersion " 23 . 0 . 1 " 
 + 
 + defaultConfig { 
 + minSdkVersion 15 
 + targetSdkVersion 23 
 + versionCode 1 
 + versionName " 1 . 0 " 
 + } 
 + buildTypes { 
 + release { 
 + minifyEnabled false 
 + } 
 + } 
 + } 
 + 
 + dependencies { 
 + compile ' com . android . support : appcompat - v7 : 23 . 1 . 0 ' 
 + compile project ( ' : actor - sdk : sdk - core - android : android - sdk ' ) 
 + compile ' com . google . android . gms : play - services - gcm : 7 . 5 . 0 ' 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - google - push / src / main / AndroidManifest . xml b / actor - sdk / sdk - core - android / android - google - push / src / main / AndroidManifest . xml 
 new file mode 100644 
 index 0000000 . . 9bd6c06 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - google - push / src / main / AndroidManifest . xml 
 @ @ - 0 , 0 + 1 , 27 @ @ 
 + < manifest xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + package = " im . actor . push . gcm " > 
 + 
 + < permission 
 + android : name = " $ { applicationId } . permission . C2D _ MESSAGE " 
 + android : protectionLevel = " signature " / > 
 + 
 + < uses - permission android : name = " $ { applicationId } . permission . C2D _ MESSAGE " / > 
 + < uses - permission android : name = " com . google . android . c2dm . permission . RECEIVE " / > 
 + 
 + < application 
 + android : allowBackup = " true " 
 + android : label = " @ string / app _ name " 
 + android : supportsRtl = " true " > 
 + < receiver 
 + android : name = " im . actor . push . PushReceiver " 
 + android : permission = " com . google . android . c2dm . permission . SEND " > 
 + < intent - filter > 
 + < action android : name = " com . google . android . c2dm . intent . RECEIVE " / > 
 + 
 + < category android : name = " $ { applicationId } " / > 
 + < / intent - filter > 
 + < / receiver > 
 + 
 + < / application > 
 + 
 + < / manifest > 
 diff - - git a / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushManager . java b / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushManager . java 
 new file mode 100644 
 index 0000000 . . 0aa7127 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushManager . java 
 @ @ - 0 , 0 + 1 , 26 @ @ 
 + package im . actor . push ; 
 + 
 + import android . content . Context ; 
 + 
 + import com . google . android . gms . gcm . GoogleCloudMessaging ; 
 + 
 + import java . io . IOException ; 
 + 
 + import im . actor . runtime . Log ; 
 + import im . actor . sdk . ActorSDK ; 
 + import im . actor . sdk . core . ActorPushManager ; 
 + 
 + public class PushManager extends ActorPushManager { 
 + @ Override 
 + public String tryRegisterPush ( Context context ) { 
 + GoogleCloudMessaging cloudMessaging = GoogleCloudMessaging . getInstance ( context ) ; 
 + Log . d ( " Actor GCM " , " Requesting push token iteration . . . " ) ; 
 + try { 
 + return cloudMessaging . register ( " " + ActorSDK . sharedActor ( ) . getPushId ( ) ) ; 
 + } catch ( IOException e ) { 
 + e . printStackTrace ( ) ; 
 + return null ; 
 + } 
 + 
 + } 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushReceiver . java b / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushReceiver . java 
 new file mode 100644 
 index 0000000 . . 0384bd8 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - google - push / src / main / java / im / actor / push / PushReceiver . java 
 @ @ - 0 , 0 + 1 , 35 @ @ 
 + package im . actor . push ; 
 + 
 + import android . app . Activity ; 
 + import android . content . Context ; 
 + import android . content . Intent ; 
 + import android . os . Bundle ; 
 + import android . support . v4 . content . WakefulBroadcastReceiver ; 
 + 
 + import com . google . android . gms . gcm . GoogleCloudMessaging ; 
 + 
 + import im . actor . runtime . Log ; 
 + import im . actor . sdk . core . ActorPushReceiver ; 
 + 
 + public class PushReceiver extends ActorPushReceiver { 
 + 
 + private static final String TAG = " ActorPushReceiver " ; 
 + 
 + @ Override 
 + public void onReceive ( Context context , Intent intent ) { 
 + GoogleCloudMessaging gcm = GoogleCloudMessaging . getInstance ( context ) ; 
 + Bundle extras = intent . getExtras ( ) ; 
 + String messageType = gcm . getMessageType ( intent ) ; 
 + if ( ! extras . isEmpty ( ) ) { 
 + if ( GoogleCloudMessaging . MESSAGE _ TYPE _ MESSAGE . equals ( messageType ) ) { 
 + if ( extras . containsKey ( " seq " ) ) { 
 + int seq = Integer . parseInt ( extras . getString ( " seq " ) ) ; 
 + onSeqReceived ( seq ) ; 
 + setResultCode ( Activity . RESULT _ OK ) ; 
 + Log . d ( TAG , " Push received " ) ; 
 + } 
 + } 
 + } 
 + WakefulBroadcastReceiver . completeWakefulIntent ( intent ) ; 
 + } 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - google - push / src / main / res / values / strings . xml b / actor - sdk / sdk - core - android / android - google - push / src / main / res / values / strings . xml 
 new file mode 100644 
 index 0000000 . . a4a4d41 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - google - push / src / main / res / values / strings . xml 
 @ @ - 0 , 0 + 1 , 3 @ @ 
 + < resources > 
 + < string name = " app _ name " > andorid - google - push < / string > 
 + < / resources > 
 diff - - git a / settings . gradle b / settings . gradle 
 index 25ad353 . . b6f53ba 100644 
 - - - a / settings . gradle 
 + + + b / settings . gradle 
 @ @ - 22 , 6 + 22 , 9 @ @ include " : actor - sdk : sdk - api : api - codegen " 
 include " : actor - sdk : sdk - core - android : android - app " 
 include " : actor - sdk : sdk - core - android : android - sdk " 
 
 + / / Google push for Android SDk 
 + include " : actor - sdk : sdk - core - android : android - google - push " 
 + 
 / / 
 / / SDK iOS 
 / /
