BLEU SCORE: 0.0741367008365338

TEST MSG: feat ( webrtc ) : Codec parameters optimization
GENERATED MSG: fix ( core ) : user from dialog not found in users

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / calls / PeerConnectionActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / calls / PeerConnectionActor . java < nl > index 1facad3 . . c462ec7 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / calls / PeerConnectionActor . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / calls / PeerConnectionActor . java < nl > @ @ - 287 , 13 + 287 , 17 @ @ public class PeerConnectionActor extends ModuleActor { < nl > for ( SDPMedia m : sdpScheme . getMediaLevel ( ) ) { < nl > < nl > / / Disabling media streams < nl > - m . setMode ( SDPMediaMode . INACTIVE ) ; < nl > + / / m . setMode ( SDPMediaMode . INACTIVE ) ; < nl > < nl > / / Optimizing opus < nl > if ( " audio " . equals ( m . getType ( ) ) ) { < nl > for ( SDPCodec codec : m . getCodecs ( ) ) { < nl > if ( " opus " . equals ( codec . getName ( ) ) ) { < nl > - < nl > + codec . getFormat ( ) . put ( " maxcodedaudiobandwidth " , " 16000 " ) ; < nl > + codec . getFormat ( ) . put ( " maxaveragebitrate " , " 20000 " ) ; < nl > + codec . getFormat ( ) . put ( " stereo " , " 0 " ) ; < nl > + codec . getFormat ( ) . put ( " useinbandfec " , " 1 " ) ; < nl > + codec . getFormat ( ) . put ( " usedtx " , " 1 " ) ; < nl > } < nl > } < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / StickersModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / StickersModule . java < nl > index bd83c77 . . e8e50c4 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / StickersModule . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / StickersModule . java < nl > @ @ - 100 , 7 + 100 , 6 @ @ public class StickersModule extends AbsModule { < nl > < nl > vms . removeAll ( remove ) ; < nl > } catch ( Exception e ) { < nl > - e . printStackTrace ( ) ; < nl > } < nl > return vms ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / DialogsActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / DialogsActor . java < nl > index b77ac37 . . fdeca48 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / DialogsActor . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / DialogsActor . java < nl > @ @ - 298 , 9 + 298 , 15 @ @ public class DialogsActor extends ModuleActor { < nl > switch ( peer . getPeerType ( ) ) { < nl > case PRIVATE : < nl > User u = getUser ( peer . getPeerId ( ) ) ; < nl > + if ( u = = null ) { < nl > + return null ; < nl > + } < nl > return new PeerDesc ( u . getName ( ) , u . getAvatar ( ) ) ; < nl > case GROUP : < nl > Group g = getGroup ( peer . getPeerId ( ) ) ; < nl > + if ( g = = null ) { < nl > + return null ; < nl > + } < nl > return new PeerDesc ( g . getTitle ( ) , g . getAvatar ( ) ) ; < nl > default : < nl > return null ; < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / GroupedDialogsActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / GroupedDialogsActor . java < nl > index 2350be1 . . b92cf4d 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / GroupedDialogsActor . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / GroupedDialogsActor . java < nl > @ @ - 127 , 10 + 127 , 16 @ @ public class GroupedDialogsActor extends ModuleActor { < nl > Avatar avatar ; < nl > if ( p . getPeerType ( ) = = PeerType . GROUP ) { < nl > Group group = getGroup ( p . getPeerId ( ) ) ; < nl > + if ( group = = null ) { < nl > + continue ; < nl > + } < nl > title = group . getTitle ( ) ; < nl > avatar = group . getAvatar ( ) ; < nl > } else if ( p . getPeerType ( ) = = PeerType . PRIVATE ) { < nl > User user = getUser ( p . getPeerId ( ) ) ; < nl > + if ( user = = null ) { < nl > + continue ; < nl > + } < nl > title = user . getName ( ) ; < nl > avatar = user . getAvatar ( ) ; < nl > } else { < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / util / ActorTrace . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / util / ActorTrace . java < nl > index 1afd14b . . 2b7a6cf 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / util / ActorTrace . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / util / ActorTrace . java < nl > @ @ - 47 , 6 + 47 , 7 @ @ public class ActorTrace implements TraceInterface { < nl > @ Override < nl > public void onActorDie ( ActorRef ref , Envelope envelope , Exception e ) { < nl > Log . w ( TAG , " Die ( " + ref . getPath ( ) + " ) by " + envelope . getMessage ( ) ) ; < nl > - Log . e ( TAG , e ) ; < nl > + / / Log . e ( TAG , e ) ; < nl > + e . printStackTrace ( ) ; < nl > } < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / calls / PeerConnectionActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / calls / PeerConnectionActor . java 
 index 1facad3 . . c462ec7 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / calls / PeerConnectionActor . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / calls / PeerConnectionActor . java 
 @ @ - 287 , 13 + 287 , 17 @ @ public class PeerConnectionActor extends ModuleActor { 
 for ( SDPMedia m : sdpScheme . getMediaLevel ( ) ) { 
 
 / / Disabling media streams 
 - m . setMode ( SDPMediaMode . INACTIVE ) ; 
 + / / m . setMode ( SDPMediaMode . INACTIVE ) ; 
 
 / / Optimizing opus 
 if ( " audio " . equals ( m . getType ( ) ) ) { 
 for ( SDPCodec codec : m . getCodecs ( ) ) { 
 if ( " opus " . equals ( codec . getName ( ) ) ) { 
 - 
 + codec . getFormat ( ) . put ( " maxcodedaudiobandwidth " , " 16000 " ) ; 
 + codec . getFormat ( ) . put ( " maxaveragebitrate " , " 20000 " ) ; 
 + codec . getFormat ( ) . put ( " stereo " , " 0 " ) ; 
 + codec . getFormat ( ) . put ( " useinbandfec " , " 1 " ) ; 
 + codec . getFormat ( ) . put ( " usedtx " , " 1 " ) ; 
 } 
 } 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / StickersModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / StickersModule . java 
 index bd83c77 . . e8e50c4 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / StickersModule . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / StickersModule . java 
 @ @ - 100 , 7 + 100 , 6 @ @ public class StickersModule extends AbsModule { 
 
 vms . removeAll ( remove ) ; 
 } catch ( Exception e ) { 
 - e . printStackTrace ( ) ; 
 } 
 return vms ; 
 } 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / DialogsActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / DialogsActor . java 
 index b77ac37 . . fdeca48 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / DialogsActor . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / DialogsActor . java 
 @ @ - 298 , 9 + 298 , 15 @ @ public class DialogsActor extends ModuleActor { 
 switch ( peer . getPeerType ( ) ) { 
 case PRIVATE : 
 User u = getUser ( peer . getPeerId ( ) ) ; 
 + if ( u = = null ) { 
 + return null ; 
 + } 
 return new PeerDesc ( u . getName ( ) , u . getAvatar ( ) ) ; 
 case GROUP : 
 Group g = getGroup ( peer . getPeerId ( ) ) ; 
 + if ( g = = null ) { 
 + return null ; 
 + } 
 return new PeerDesc ( g . getTitle ( ) , g . getAvatar ( ) ) ; 
 default : 
 return null ; 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / GroupedDialogsActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / GroupedDialogsActor . java 
 index 2350be1 . . b92cf4d 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / GroupedDialogsActor . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / internal / messages / GroupedDialogsActor . java 
 @ @ - 127 , 10 + 127 , 16 @ @ public class GroupedDialogsActor extends ModuleActor { 
 Avatar avatar ; 
 if ( p . getPeerType ( ) = = PeerType . GROUP ) { 
 Group group = getGroup ( p . getPeerId ( ) ) ; 
 + if ( group = = null ) { 
 + continue ; 
 + } 
 title = group . getTitle ( ) ; 
 avatar = group . getAvatar ( ) ; 
 } else if ( p . getPeerType ( ) = = PeerType . PRIVATE ) { 
 User user = getUser ( p . getPeerId ( ) ) ; 
 + if ( user = = null ) { 
 + continue ; 
 + } 
 title = user . getName ( ) ; 
 avatar = user . getAvatar ( ) ; 
 } else { 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / util / ActorTrace . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / util / ActorTrace . java 
 index 1afd14b . . 2b7a6cf 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / util / ActorTrace . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / util / ActorTrace . java 
 @ @ - 47 , 6 + 47 , 7 @ @ public class ActorTrace implements TraceInterface { 
 @ Override 
 public void onActorDie ( ActorRef ref , Envelope envelope , Exception e ) { 
 Log . w ( TAG , " Die ( " + ref . getPath ( ) + " ) by " + envelope . getMessage ( ) ) ; 
 - Log . e ( TAG , e ) ; 
 + / / Log . e ( TAG , e ) ; 
 + e . printStackTrace ( ) ; 
 } 
 }
