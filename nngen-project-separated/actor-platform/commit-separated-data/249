BLEU SCORE: 0.23462350320528

TEST MSG: fix ( android ) : fix custom share menu selectors colors
GENERATED MSG: feat ( android ) : toolBar and fab styling over sdk

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > index 702f6f7 . . 7de8c79 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > @ @ - 79 , 7 + 79 , 7 @ @ public class Application extends ActorSDKApplication { < nl > @ Override < nl > public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { < nl > ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; < nl > - shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getMainColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > @ @ - 88 , 16 + 88 , 6 @ @ public class Application extends ActorSDKApplication { < nl > return shareMenuFields ; < nl > } < nl > < nl > - @ Override < nl > - public BaseActorProfileActivity getProfileIntent ( int uid ) { < nl > - return new BaseActorProfileActivity ( ) { < nl > - @ Override < nl > - public ProfileFragment getProfileFragment ( int uid ) { < nl > - return ProfileFragmentEx . create ( uid ) ; < nl > - } < nl > - } ; < nl > - } < nl > - < nl > / / @ Override < nl > / / public BaseGroupInfoActivity getGroupInfoIntent ( int gid ) { < nl > / / return new BaseGroupInfoActivity ( ) { < nl > @ @ - 203 , 43 + 193 , 4 @ @ public class Application extends ActorSDKApplication { < nl > / / } < nl > } < nl > < nl > - public static class ProfileFragmentEx extends ProfileFragment { < nl > - < nl > - public static ProfileFragment create ( int uid ) { < nl > - Bundle bundle = new Bundle ( ) ; < nl > - bundle . putInt ( EXTRA _ UID , uid ) ; < nl > - ProfileFragment res = new ProfileFragmentEx ( ) ; < nl > - res . setArguments ( bundle ) ; < nl > - return res ; < nl > - } < nl > - < nl > - < nl > - @ Override < nl > - public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > - View view = super . onCreateView ( inflater , container , savedInstanceState ) ; < nl > - view . findViewById ( R . id . docsContainer ) . setVisibility ( View . VISIBLE ) ; < nl > - view . findViewById ( R . id . sharedContainer ) . setVisibility ( View . VISIBLE ) ; < nl > - return view ; < nl > - } < nl > - } < nl > - < nl > - / / public static class GroupInfoEx extends GroupInfoFragment { < nl > - / / < nl > - / / public static GroupInfoFragment create ( int chatId ) { < nl > - / / Bundle bundle = new Bundle ( ) ; < nl > - / / bundle . putInt ( EXTRA _ CHAT _ ID , chatId ) ; < nl > - / / GroupInfoFragment res = new GroupInfoEx ( ) ; < nl > - / / res . setArguments ( bundle ) ; < nl > - / / return res ; < nl > - / / } < nl > - / / < nl > - / / < nl > - / / @ Override < nl > - / / public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > - / / View view = super . onCreateView ( inflater , container , savedInstanceState ) ; < nl > - / / header . findViewById ( R . id . docsContainer ) . setVisibility ( View . VISIBLE ) ; < nl > - / / header . findViewById ( R . id . sharedContainer ) . setVisibility ( View . VISIBLE ) ; < nl > - / / return view ; < nl > - / / } < nl > - / / } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index b77ffde . . 6d9056f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 89 , 6 + 89 , 7 @ @ import im . actor . sdk . intents . ActorIntent ; < nl > import im . actor . sdk . util . Randoms ; < nl > import im . actor . sdk . util . Screen ; < nl > import im . actor . core . utils . GalleryScannerActor ; < nl > + import im . actor . sdk . view . SelectorFactory ; < nl > import im . actor . sdk . view . ShareMenuButtonFactory ; < nl > import im . actor . sdk . view . TintDrawable ; < nl > import im . actor . sdk . view . adapters . HolderAdapter ; < nl > @ @ - 438 , 8 + 439 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > if ( customFields ! = null & & customFields . size ( ) > 0 ) { < nl > if ( customFields . size ( ) % 2 ! = 0 ) { < nl > customFields . add ( new ShareMenuField ( R . drawable . attach _ hide2 , < nl > - / / ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , < nl > - Color . RED , < nl > + ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , < nl > " " , < nl > new View . OnClickListener ( ) { < nl > @ Override < nl > @ @ - 465 , 11 + 465 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > < nl > ImageView icon = ( ImageView ) shareItem . findViewById ( R . id . icon ) ; < nl > icon . setClickable ( true ) ; < nl > - if ( Build . VERSION . SDK _ INT > = Build . VERSION _ CODES . JELLY _ BEAN ) { < nl > - icon . setBackground ( ShareMenuButtonFactory . get ( f . getColor ( ) , this ) ) ; < nl > - } else { < nl > - icon . setBackgroundDrawable ( ShareMenuButtonFactory . get ( f . getColor ( ) , this ) ) ; < nl > - } < nl > + icon . setBackgroundDrawable ( ShareMenuButtonFactory . get ( f . getColor ( ) , this ) ) ; < nl > + < nl > icon . setImageResource ( f . getIcon ( ) ) ; < nl > < nl > View . OnClickListener l = new View . OnClickListener ( ) { < nl > @ @ - 530 , 7 + 527 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > LinearLayoutManager layoutManager = new LinearLayoutManager ( this , LinearLayoutManager . HORIZONTAL , false ) ; < nl > fastShare . setAdapter ( fastShareAdapter ) ; < nl > fastShare . setLayoutManager ( layoutManager ) ; < nl > - StateListDrawable background = ShareMenuButtonFactory . get ( ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , ChatActivity . this ) ; < nl > + StateListDrawable background = ShareMenuButtonFactory . get ( ActorSDK . sharedActor ( ) . style . getMainColor ( ) , ChatActivity . this ) ; < nl > < nl > fastShareAdapter . getSelectedVM ( ) . subscribe ( new ValueChangedListener < Set < String > > ( ) { < nl > @ Override < nl > @ @ - 538 , 9 + 535 , 10 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > if ( val . size ( ) > 0 ) { < nl > menuIconToChange . setBackgroundDrawable ( background ) ; < nl > menuIconToChange . setImageResource ( R . drawable . conv _ send ) ; < nl > - menuIconToChange . setColorFilter ( 0xffffffff , PorterDuff . Mode . MULTIPLY ) ; < nl > + menuIconToChange . setColorFilter ( 0xffffffff , PorterDuff . Mode . SRC _ IN ) ; < nl > menuTitleToChange . setText ( getString ( R . string . chat _ doc _ send ) + " ( " + val . size ( ) + " ) " ) ; < nl > menuIconToChange . setOnClickListener ( shareSendOcl ) ; < nl > + menuIconToChange . setPadding ( Screen . dp ( 10 ) , 0 , Screen . dp ( 5 ) , 0 ) ; < nl > } else { < nl > < nl > menuIconToChange . setBackgroundDrawable ( ( Drawable ) menuIconToChange . getTag ( R . id . background ) ) ; < nl > @ @ - 548 , 6 + 546 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > menuIconToChange . setColorFilter ( null ) ; < nl > menuIconToChange . setOnClickListener ( defaultSendOcl ) ; < nl > menuTitleToChange . setText ( ( String ) menuTitleToChange . getTag ( ) ) ; < nl > + menuIconToChange . setPadding ( 0 , 0 , 0 , 0 ) ; < nl > } < nl > } < nl > } ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / SelectorFactory . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / SelectorFactory . java < nl > index d70cf27 . . 2f06ba6 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / SelectorFactory . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / SelectorFactory . java < nl > @ @ - 1 , 6 + 1 , 7 @ @ < nl > package im . actor . sdk . view ; < nl > < nl > import android . content . Context ; < nl > + import android . graphics . drawable . ColorDrawable ; < nl > import android . graphics . drawable . GradientDrawable ; < nl > import android . graphics . drawable . StateListDrawable ; < nl > import android . util . StateSet ; < nl > @ @ - 10 , 9 + 11 , 9 @ @ import im . actor . sdk . R ; < nl > < nl > public class SelectorFactory { < nl > public static StateListDrawable get ( int color , Context context ) { < nl > - GradientDrawable bg = ( GradientDrawable ) context . getResources ( ) . getDrawable ( R . drawable . btn _ bg ) ; < nl > + ColorDrawable bg = ( ColorDrawable ) context . getResources ( ) . getDrawable ( R . drawable . btn _ bg ) ; < nl > bg . setColor ( color ) ; < nl > - GradientDrawable bgPressed = ( GradientDrawable ) context . getResources ( ) . getDrawable ( R . drawable . btn _ bg _ pressed ) ; < nl > + ColorDrawable bgPressed = ( ColorDrawable ) context . getResources ( ) . getDrawable ( R . drawable . btn _ bg _ pressed ) ; < nl > bgPressed . setColor ( ActorStyle . getDarkenArgb ( color , 0 . 95 ) ) ; < nl > StateListDrawable states = new StateListDrawable ( ) ; < nl > states . addState ( new int [ ] { android . R . attr . state _ pressed } , < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / ShareMenuButtonFactory . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / ShareMenuButtonFactory . java < nl > index b7d1e79 . . 43bc5f2 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / ShareMenuButtonFactory . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / ShareMenuButtonFactory . java < nl > @ @ - 4 , 20 + 4 , 21 @ @ import android . content . Context ; < nl > import android . graphics . PorterDuff ; < nl > import android . graphics . PorterDuffColorFilter ; < nl > import android . graphics . drawable . GradientDrawable ; < nl > + import android . graphics . drawable . ShapeDrawable ; < nl > import android . graphics . drawable . StateListDrawable ; < nl > + import android . graphics . drawable . shapes . OvalShape ; < nl > import android . util . StateSet ; < nl > < nl > + import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . ActorStyle ; < nl > import im . actor . sdk . R ; < nl > < nl > public class ShareMenuButtonFactory { < nl > public static StateListDrawable get ( int color , Context context ) { < nl > - GradientDrawable bg = ( GradientDrawable ) context . getResources ( ) . getDrawable ( R . drawable . circle _ btn _ bg ) ; < nl > - bg . setColorFilter ( new PorterDuffColorFilter ( color , PorterDuff . Mode . MULTIPLY ) ) ; < nl > - bg . setColor ( color ) ; < nl > - GradientDrawable bgPressed = ( GradientDrawable ) context . getResources ( ) . getDrawable ( R . drawable . circle _ btn _ bg ) ; < nl > - bgPressed . setColorFilter ( new PorterDuffColorFilter ( ActorStyle . getDarkenArgb ( color , 0 . 95 ) , PorterDuff . Mode . MULTIPLY ) ) ; < nl > - bgPressed . setColor ( ActorStyle . getDarkenArgb ( color , 0 . 95 ) ) ; < nl > + ShapeDrawable bg = new ShapeDrawable ( new OvalShape ( ) ) ; < nl > + bg . getPaint ( ) . setColor ( color ) ; < nl > + ShapeDrawable bgPressed = new ShapeDrawable ( new OvalShape ( ) ) ; < nl > + bgPressed . getPaint ( ) . setColor ( ActorStyle . getDarkenArgb ( color , 0 . 95 ) ) ; < nl > StateListDrawable states = new StateListDrawable ( ) ; < nl > states . addState ( new int [ ] { android . R . attr . state _ pressed } , < nl > bgPressed ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / circle _ btn _ bg . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / circle _ btn _ bg . xml < nl > deleted file mode 100644 < nl > index 0ce85d8 . . 0000000 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / circle _ btn _ bg . xml < nl > + + + / dev / null < nl > @ @ - 1 , 3 + 0 , 0 @ @ < nl > - < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > < nl > - < shape xmlns : android = " http : / / schemas . android . com / apk / res / android " < nl > - android : shape = " oval " > < / shape > < nl > \ No newline at end of file
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > index de6c01a . . 39c7816 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > @ @ - 10 , 6 + 10 , 7 @ @ import android . widget . Toast ; < nl > < nl > import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . BaseActorSDKDelegate ; < nl > + import im . actor . sdk . Style ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsField ; < nl > < nl > @ @ - 23 , 6 + 24 , 13 @ @ public class Application extends android . app . Application { < nl > ActorSDK . sharedActor ( ) . setDelegate ( new ActorSDKDelegate ( ) ) ; < nl > ActorSDK . sharedActor ( ) . setPushId ( 209133700967L ) ; < nl > ActorSDK . sharedActor ( ) . createActor ( this ) ; < nl > + < nl > + Style style = ActorSDK . sharedActor ( ) . style ; < nl > + style . toolBarColor = getResources ( ) . getColor ( R . color . accent ) ; < nl > + style . fabColor = getResources ( ) . getColor ( R . color . accent ) ; < nl > + style . fabColorPressed = getResources ( ) . getColor ( R . color . accent _ pressed ) ; < nl > + < nl > + < nl > } < nl > < nl > private class ActorSDKDelegate extends BaseActorSDKDelegate { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > index 674fae4 . . f7a3f92 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > @ @ - 32 , 29 + 32 , 33 @ @ public class ActorSDK { < nl > < nl > < nl > private static volatile ActorSDK sdk = new ActorSDK ( ) ; < nl > - / * * < nl > - * Application Context < nl > - * / < nl > - private Application application ; < nl > + / / < nl > + / / Style < nl > + / / < nl > + public Style style = new Style ( ) ; < nl > < nl > < nl > / / < nl > / / SDK Objects < nl > / / < nl > / * * < nl > - * Actor Messenger instance < nl > + * Application Context < nl > * / < nl > - private AndroidMessenger messenger ; < nl > + private Application application ; < nl > / * * < nl > - * Server Endpoints < nl > + * Actor Messenger instance < nl > * / < nl > - private List < String > endpoints = new ArrayList < String > ( ) ; < nl > + private AndroidMessenger messenger ; < nl > < nl > < nl > / / < nl > / / SDK Config < nl > / / < nl > / * * < nl > + * Server Endpoints < nl > + * / < nl > + private List < String > endpoints = new ArrayList < String > ( ) ; < nl > + / * * < nl > * API App Id < nl > * / < nl > private int apiAppId = 1 ; < nl > @ @ - 66 , 7 + 70 , 6 @ @ public class ActorSDK { < nl > * Push Registration Id < nl > * / < nl > private long pushId = 0 ; < nl > - < nl > / * * < nl > * Is Keeping app alive enabled < nl > * / < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / Style . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / Style . java < nl > new file mode 100644 < nl > index 0000000 . . 608678d < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / Style . java < nl > @ @ - 0 , 0 + 1 , 7 @ @ < nl > + package im . actor . sdk ; < nl > + < nl > + public class Style { < nl > + public int toolBarColor = 0 ; < nl > + public int fabColor = 0 ; < nl > + public int fabColorPressed = 0 ; < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java < nl > index 1a5ddd1 . . 4da1359 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java < nl > @ @ - 1 , 6 + 1 , 7 @ @ < nl > package im . actor . sdk . controllers . activity ; < nl > < nl > import android . app . ProgressDialog ; < nl > + import android . graphics . drawable . ColorDrawable ; < nl > import android . os . Bundle ; < nl > import android . support . v7 . app . ActionBar ; < nl > import android . support . v7 . app . AppCompatActivity ; < nl > @ @ - 12 , 6 + 13 , 7 @ @ import im . actor . core . viewmodel . Command ; < nl > import im . actor . core . viewmodel . CommandCallback ; < nl > import im . actor . core . viewmodel . GroupVM ; < nl > import im . actor . core . viewmodel . UserVM ; < nl > + import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . R ; < nl > import im . actor . sdk . controllers . fragment . ActorBinder ; < nl > import im . actor . sdk . view . avatar . AvatarView ; < nl > @ @ - 31 , 6 + 33 , 10 @ @ public class BaseActivity extends AppCompatActivity { < nl > super . onCreate ( savedInstanceState ) ; < nl > onCreateToolbar ( ) ; < nl > notifyOnResume ( ) ; < nl > + < nl > + if ( getSupportActionBar ( ) ! = null & & ActorSDK . sharedActor ( ) . style . toolBarColor ! = 0 ) { < nl > + getSupportActionBar ( ) . setBackgroundDrawable ( new ColorDrawable ( ActorSDK . sharedActor ( ) . style . toolBarColor ) ) ; < nl > + } < nl > } < nl > < nl > protected void onCreateToolbar ( ) { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseFragmentActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseFragmentActivity . java < nl > index 081a3ef . . b86af95 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseFragmentActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseFragmentActivity . java < nl > @ @ - 7 , 6 + 7 , 7 @ @ import android . support . v4 . app . Fragment ; < nl > import android . support . v4 . app . FragmentTransaction ; < nl > import android . view . MenuItem ; < nl > < nl > + import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . R ; < nl > < nl > / * * < nl > @ @ - 21 , 6 + 22 , 11 @ @ public class BaseFragmentActivity extends BaseActivity { < nl > getSupportActionBar ( ) . setDisplayHomeAsUpEnabled ( true ) ; < nl > getSupportActionBar ( ) . setDisplayShowTitleEnabled ( true ) ; < nl > getSupportActionBar ( ) . setDisplayShowCustomEnabled ( false ) ; < nl > + < nl > + if ( ActorSDK . sharedActor ( ) . style . toolBarColor ! = 0 ) { < nl > + getSupportActionBar ( ) . setBackgroundDrawable ( new ColorDrawable ( ActorSDK . sharedActor ( ) . style . toolBarColor ) ) ; < nl > + } < nl > + < nl > setContentView ( R . layout . activity _ base _ fragment ) ; < nl > getWindow ( ) . setBackgroundDrawable ( new ColorDrawable ( Color . TRANSPARENT ) ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / controllers / MainPhoneController . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / controllers / MainPhoneController . java < nl > index 14012c8 . . e61f85b 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / controllers / MainPhoneController . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / controllers / MainPhoneController . java < nl > @ @ - 2 , 6 + 2 , 7 @ @ package im . actor . sdk . controllers . activity . controllers ; < nl > < nl > import android . content . Context ; < nl > import android . content . Intent ; < nl > + import android . graphics . drawable . ColorDrawable ; < nl > import android . net . Uri ; < nl > import android . os . Bundle ; < nl > import android . support . v4 . app . Fragment ; < nl > @ @ - 20 , 10 + 21 , 14 @ @ import android . view . ViewGroup ; < nl > import android . widget . FrameLayout ; < nl > import android . widget . TextView ; < nl > < nl > + import com . getbase . floatingactionbutton . FloatingActionButton ; < nl > + < nl > import java . util . ArrayList ; < nl > < nl > import im . actor . core . entity . Dialog ; < nl > import im . actor . core . entity . SearchEntity ; < nl > + import im . actor . sdk . ActorSDK ; < nl > + import im . actor . sdk . Style ; < nl > import im . actor . sdk . controllers . activity . ActorMainActivity ; < nl > import im . actor . runtime . generic . mvvm . BindedDisplayList ; < nl > import im . actor . runtime . generic . mvvm . DisplayList ; < nl > @ @ - 62 , 15 + 67 , 14 @ @ public class MainPhoneController extends MainBaseController { < nl > private View searchHintView ; < nl > < nl > private boolean isSearchVisible = false ; < nl > + private SearchAdapter searchAdapter ; < nl > + private BindedDisplayList < SearchEntity > searchDisplay ; < nl > private final DisplayList . Listener searchListener = new DisplayList . Listener ( ) { < nl > @ Override < nl > public void onCollectionChanged ( ) { < nl > onSearchChanged ( ) ; < nl > } < nl > } ; < nl > - private SearchAdapter searchAdapter ; < nl > - private BindedDisplayList < SearchEntity > searchDisplay ; < nl > - < nl > private SearchView searchView ; < nl > private MenuItem searchMenu ; < nl > < nl > @ @ - 80 , 7 + 84 , 7 @ @ public class MainPhoneController extends MainBaseController { < nl > private View emptyContactsView ; < nl > < nl > private View fabContent ; < nl > - private View fabRoot ; < nl > + private com . getbase . floatingactionbutton . FloatingActionButton fabRoot ; < nl > < nl > private boolean isFabVisible = false ; < nl > < nl > @ @ - 168 , 8 + 172 , 13 @ @ public class MainPhoneController extends MainBaseController { < nl > isFabVisible = false ; < nl > < nl > fabContent = findViewById ( R . id . fabContainer ) ; < nl > - fabRoot = findViewById ( R . id . rootFab ) ; < nl > - < nl > + fabRoot = ( FloatingActionButton ) findViewById ( R . id . rootFab ) ; < nl > + if ( ActorSDK . sharedActor ( ) . style . fabColor ! = 0 ) { < nl > + fabRoot . setColorNormal ( ActorSDK . sharedActor ( ) . style . fabColor ) ; < nl > + } < nl > + if ( ActorSDK . sharedActor ( ) . style . fabColorPressed ! = 0 ) { < nl > + fabRoot . setColorPressed ( ActorSDK . sharedActor ( ) . style . fabColorPressed ) ; < nl > + } < nl > fabRoot . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > @ @ - 229 , 7 + 238 , 16 @ @ public class MainPhoneController extends MainBaseController { < nl > } < nl > } ) ; < nl > < nl > - findViewById ( R . id . composeContainer ) . setOnClickListener ( new View . OnClickListener ( ) { < nl > + Style style = ActorSDK . sharedActor ( ) . style ; < nl > + < nl > + com . getbase . floatingactionbutton . FloatingActionButton fabCompose = ( FloatingActionButton ) findViewById ( R . id . composeContainer ) ; < nl > + if ( style . fabColor ! = 0 ) { < nl > + fabCompose . setColorNormal ( style . fabColor ) ; < nl > + } < nl > + if ( style . fabColorPressed ! = 0 ) { < nl > + fabCompose . setColorPressed ( style . fabColorPressed ) ; < nl > + } < nl > + fabCompose . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > goneFab ( ) ; < nl > @ @ - 237 , 7 + 255 , 14 @ @ public class MainPhoneController extends MainBaseController { < nl > } < nl > } ) ; < nl > < nl > - findViewById ( R . id . createGroupContainer ) . setOnClickListener ( new View . OnClickListener ( ) { < nl > + com . getbase . floatingactionbutton . FloatingActionButton fabCreateGroup = ( FloatingActionButton ) findViewById ( R . id . createGroupContainer ) ; < nl > + if ( style . fabColor ! = 0 ) { < nl > + fabCreateGroup . setColorNormal ( style . fabColor ) ; < nl > + } < nl > + if ( style . fabColorPressed ! = 0 ) { < nl > + fabCreateGroup . setColorPressed ( style . fabColorPressed ) ; < nl > + } < nl > + fabCreateGroup . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > goneFab ( ) ; < nl > @ @ - 245 , 7 + 270 , 14 @ @ public class MainPhoneController extends MainBaseController { < nl > } < nl > } ) ; < nl > < nl > - findViewById ( R . id . addContactContainer ) . setOnClickListener ( new View . OnClickListener ( ) { < nl > + com . getbase . floatingactionbutton . FloatingActionButton fabAddContact = ( FloatingActionButton ) findViewById ( R . id . addContactContainer ) ; < nl > + if ( style . fabColor ! = 0 ) { < nl > + fabAddContact . setColorNormal ( style . fabColor ) ; < nl > + } < nl > + if ( style . fabColorPressed ! = 0 ) { < nl > + fabAddContact . setColorPressed ( style . fabColorPressed ) ; < nl > + } < nl > + fabAddContact . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > goneFab ( ) ; < nl > @ @ - 253 , 6 + 285 , 7 @ @ public class MainPhoneController extends MainBaseController { < nl > } < nl > } ) ; < nl > < nl > + < nl > findViewById ( R . id . addContactButton ) . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > @ @ - 280 , 13 + 313 , 17 @ @ public class MainPhoneController extends MainBaseController { < nl > ab . setDisplayShowHomeEnabled ( false ) ; < nl > ab . setDisplayShowTitleEnabled ( false ) ; < nl > < nl > + if ( ActorSDK . sharedActor ( ) . style . toolBarColor ! = 0 ) { < nl > + ab . setBackgroundDrawable ( new ColorDrawable ( ActorSDK . sharedActor ( ) . style . toolBarColor ) ) ; < nl > + } < nl > + < nl > FrameLayout tabsContainer = new FrameLayout ( getActivity ( ) ) ; < nl > barTabs = new PagerSlidingTabStrip ( getActivity ( ) ) ; < nl > barTabs . setTabBackground ( R . drawable . selector _ bar ) ; < nl > / / barTabs . setIndicatorColorResource ( R . color . main _ tab _ selected ) ; < nl > barTabs . setIndicatorHeight ( Screen . dp ( 2 ) ) ; < nl > < nl > - barTabs . setDividerColorResource ( R . color . primary ) ; < nl > + barTabs . setDividerColorResource ( android . R . color . transparent ) ; < nl > / / barTabs . setTextColorResource ( R . color . main _ tab _ text ) ; < nl > barTabs . setTextSize ( Screen . dp ( 14 ) ) ; < nl > barTabs . setUnderlineHeight ( 0 ) ;

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 index 702f6f7 . . 7de8c79 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 @ @ - 79 , 7 + 79 , 7 @ @ public class Application extends ActorSDKApplication { 
 @ Override 
 public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { 
 ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; 
 - shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getMainColor ( ) , " lol " , new View . OnClickListener ( ) { 
 + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 @ @ - 88 , 16 + 88 , 6 @ @ public class Application extends ActorSDKApplication { 
 return shareMenuFields ; 
 } 
 
 - @ Override 
 - public BaseActorProfileActivity getProfileIntent ( int uid ) { 
 - return new BaseActorProfileActivity ( ) { 
 - @ Override 
 - public ProfileFragment getProfileFragment ( int uid ) { 
 - return ProfileFragmentEx . create ( uid ) ; 
 - } 
 - } ; 
 - } 
 - 
 / / @ Override 
 / / public BaseGroupInfoActivity getGroupInfoIntent ( int gid ) { 
 / / return new BaseGroupInfoActivity ( ) { 
 @ @ - 203 , 43 + 193 , 4 @ @ public class Application extends ActorSDKApplication { 
 / / } 
 } 
 
 - public static class ProfileFragmentEx extends ProfileFragment { 
 - 
 - public static ProfileFragment create ( int uid ) { 
 - Bundle bundle = new Bundle ( ) ; 
 - bundle . putInt ( EXTRA _ UID , uid ) ; 
 - ProfileFragment res = new ProfileFragmentEx ( ) ; 
 - res . setArguments ( bundle ) ; 
 - return res ; 
 - } 
 - 
 - 
 - @ Override 
 - public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 - View view = super . onCreateView ( inflater , container , savedInstanceState ) ; 
 - view . findViewById ( R . id . docsContainer ) . setVisibility ( View . VISIBLE ) ; 
 - view . findViewById ( R . id . sharedContainer ) . setVisibility ( View . VISIBLE ) ; 
 - return view ; 
 - } 
 - } 
 - 
 - / / public static class GroupInfoEx extends GroupInfoFragment { 
 - / / 
 - / / public static GroupInfoFragment create ( int chatId ) { 
 - / / Bundle bundle = new Bundle ( ) ; 
 - / / bundle . putInt ( EXTRA _ CHAT _ ID , chatId ) ; 
 - / / GroupInfoFragment res = new GroupInfoEx ( ) ; 
 - / / res . setArguments ( bundle ) ; 
 - / / return res ; 
 - / / } 
 - / / 
 - / / 
 - / / @ Override 
 - / / public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 - / / View view = super . onCreateView ( inflater , container , savedInstanceState ) ; 
 - / / header . findViewById ( R . id . docsContainer ) . setVisibility ( View . VISIBLE ) ; 
 - / / header . findViewById ( R . id . sharedContainer ) . setVisibility ( View . VISIBLE ) ; 
 - / / return view ; 
 - / / } 
 - / / } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index b77ffde . . 6d9056f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 89 , 6 + 89 , 7 @ @ import im . actor . sdk . intents . ActorIntent ; 
 import im . actor . sdk . util . Randoms ; 
 import im . actor . sdk . util . Screen ; 
 import im . actor . core . utils . GalleryScannerActor ; 
 + import im . actor . sdk . view . SelectorFactory ; 
 import im . actor . sdk . view . ShareMenuButtonFactory ; 
 import im . actor . sdk . view . TintDrawable ; 
 import im . actor . sdk . view . adapters . HolderAdapter ; 
 @ @ - 438 , 8 + 439 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { 
 if ( customFields ! = null & & customFields . size ( ) > 0 ) { 
 if ( customFields . size ( ) % 2 ! = 0 ) { 
 customFields . add ( new ShareMenuField ( R . drawable . attach _ hide2 , 
 - / / ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , 
 - Color . RED , 
 + ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , 
 " " , 
 new View . OnClickListener ( ) { 
 @ Override 
 @ @ - 465 , 11 + 465 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { 
 
 ImageView icon = ( ImageView ) shareItem . findViewById ( R . id . icon ) ; 
 icon . setClickable ( true ) ; 
 - if ( Build . VERSION . SDK _ INT > = Build . VERSION _ CODES . JELLY _ BEAN ) { 
 - icon . setBackground ( ShareMenuButtonFactory . get ( f . getColor ( ) , this ) ) ; 
 - } else { 
 - icon . setBackgroundDrawable ( ShareMenuButtonFactory . get ( f . getColor ( ) , this ) ) ; 
 - } 
 + icon . setBackgroundDrawable ( ShareMenuButtonFactory . get ( f . getColor ( ) , this ) ) ; 
 + 
 icon . setImageResource ( f . getIcon ( ) ) ; 
 
 View . OnClickListener l = new View . OnClickListener ( ) { 
 @ @ - 530 , 7 + 527 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { 
 LinearLayoutManager layoutManager = new LinearLayoutManager ( this , LinearLayoutManager . HORIZONTAL , false ) ; 
 fastShare . setAdapter ( fastShareAdapter ) ; 
 fastShare . setLayoutManager ( layoutManager ) ; 
 - StateListDrawable background = ShareMenuButtonFactory . get ( ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , ChatActivity . this ) ; 
 + StateListDrawable background = ShareMenuButtonFactory . get ( ActorSDK . sharedActor ( ) . style . getMainColor ( ) , ChatActivity . this ) ; 
 
 fastShareAdapter . getSelectedVM ( ) . subscribe ( new ValueChangedListener < Set < String > > ( ) { 
 @ Override 
 @ @ - 538 , 9 + 535 , 10 @ @ public class ChatActivity extends ActorEditTextActivity { 
 if ( val . size ( ) > 0 ) { 
 menuIconToChange . setBackgroundDrawable ( background ) ; 
 menuIconToChange . setImageResource ( R . drawable . conv _ send ) ; 
 - menuIconToChange . setColorFilter ( 0xffffffff , PorterDuff . Mode . MULTIPLY ) ; 
 + menuIconToChange . setColorFilter ( 0xffffffff , PorterDuff . Mode . SRC _ IN ) ; 
 menuTitleToChange . setText ( getString ( R . string . chat _ doc _ send ) + " ( " + val . size ( ) + " ) " ) ; 
 menuIconToChange . setOnClickListener ( shareSendOcl ) ; 
 + menuIconToChange . setPadding ( Screen . dp ( 10 ) , 0 , Screen . dp ( 5 ) , 0 ) ; 
 } else { 
 
 menuIconToChange . setBackgroundDrawable ( ( Drawable ) menuIconToChange . getTag ( R . id . background ) ) ; 
 @ @ - 548 , 6 + 546 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { 
 menuIconToChange . setColorFilter ( null ) ; 
 menuIconToChange . setOnClickListener ( defaultSendOcl ) ; 
 menuTitleToChange . setText ( ( String ) menuTitleToChange . getTag ( ) ) ; 
 + menuIconToChange . setPadding ( 0 , 0 , 0 , 0 ) ; 
 } 
 } 
 } ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / SelectorFactory . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / SelectorFactory . java 
 index d70cf27 . . 2f06ba6 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / SelectorFactory . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / SelectorFactory . java 
 @ @ - 1 , 6 + 1 , 7 @ @ 
 package im . actor . sdk . view ; 
 
 import android . content . Context ; 
 + import android . graphics . drawable . ColorDrawable ; 
 import android . graphics . drawable . GradientDrawable ; 
 import android . graphics . drawable . StateListDrawable ; 
 import android . util . StateSet ; 
 @ @ - 10 , 9 + 11 , 9 @ @ import im . actor . sdk . R ; 
 
 public class SelectorFactory { 
 public static StateListDrawable get ( int color , Context context ) { 
 - GradientDrawable bg = ( GradientDrawable ) context . getResources ( ) . getDrawable ( R . drawable . btn _ bg ) ; 
 + ColorDrawable bg = ( ColorDrawable ) context . getResources ( ) . getDrawable ( R . drawable . btn _ bg ) ; 
 bg . setColor ( color ) ; 
 - GradientDrawable bgPressed = ( GradientDrawable ) context . getResources ( ) . getDrawable ( R . drawable . btn _ bg _ pressed ) ; 
 + ColorDrawable bgPressed = ( ColorDrawable ) context . getResources ( ) . getDrawable ( R . drawable . btn _ bg _ pressed ) ; 
 bgPressed . setColor ( ActorStyle . getDarkenArgb ( color , 0 . 95 ) ) ; 
 StateListDrawable states = new StateListDrawable ( ) ; 
 states . addState ( new int [ ] { android . R . attr . state _ pressed } , 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / ShareMenuButtonFactory . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / ShareMenuButtonFactory . java 
 index b7d1e79 . . 43bc5f2 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / ShareMenuButtonFactory . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / ShareMenuButtonFactory . java 
 @ @ - 4 , 20 + 4 , 21 @ @ import android . content . Context ; 
 import android . graphics . PorterDuff ; 
 import android . graphics . PorterDuffColorFilter ; 
 import android . graphics . drawable . GradientDrawable ; 
 + import android . graphics . drawable . ShapeDrawable ; 
 import android . graphics . drawable . StateListDrawable ; 
 + import android . graphics . drawable . shapes . OvalShape ; 
 import android . util . StateSet ; 
 
 + import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . ActorStyle ; 
 import im . actor . sdk . R ; 
 
 public class ShareMenuButtonFactory { 
 public static StateListDrawable get ( int color , Context context ) { 
 - GradientDrawable bg = ( GradientDrawable ) context . getResources ( ) . getDrawable ( R . drawable . circle _ btn _ bg ) ; 
 - bg . setColorFilter ( new PorterDuffColorFilter ( color , PorterDuff . Mode . MULTIPLY ) ) ; 
 - bg . setColor ( color ) ; 
 - GradientDrawable bgPressed = ( GradientDrawable ) context . getResources ( ) . getDrawable ( R . drawable . circle _ btn _ bg ) ; 
 - bgPressed . setColorFilter ( new PorterDuffColorFilter ( ActorStyle . getDarkenArgb ( color , 0 . 95 ) , PorterDuff . Mode . MULTIPLY ) ) ; 
 - bgPressed . setColor ( ActorStyle . getDarkenArgb ( color , 0 . 95 ) ) ; 
 + ShapeDrawable bg = new ShapeDrawable ( new OvalShape ( ) ) ; 
 + bg . getPaint ( ) . setColor ( color ) ; 
 + ShapeDrawable bgPressed = new ShapeDrawable ( new OvalShape ( ) ) ; 
 + bgPressed . getPaint ( ) . setColor ( ActorStyle . getDarkenArgb ( color , 0 . 95 ) ) ; 
 StateListDrawable states = new StateListDrawable ( ) ; 
 states . addState ( new int [ ] { android . R . attr . state _ pressed } , 
 bgPressed ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / circle _ btn _ bg . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / circle _ btn _ bg . xml 
 deleted file mode 100644 
 index 0ce85d8 . . 0000000 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / circle _ btn _ bg . xml 
 + + + / dev / null 
 @ @ - 1 , 3 + 0 , 0 @ @ 
 - < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 - < shape xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 - android : shape = " oval " > < / shape > 
 \ No newline at end of file

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 index de6c01a . . 39c7816 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 @ @ - 10 , 6 + 10 , 7 @ @ import android . widget . Toast ; 
 
 import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . BaseActorSDKDelegate ; 
 + import im . actor . sdk . Style ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsField ; 
 
 @ @ - 23 , 6 + 24 , 13 @ @ public class Application extends android . app . Application { 
 ActorSDK . sharedActor ( ) . setDelegate ( new ActorSDKDelegate ( ) ) ; 
 ActorSDK . sharedActor ( ) . setPushId ( 209133700967L ) ; 
 ActorSDK . sharedActor ( ) . createActor ( this ) ; 
 + 
 + Style style = ActorSDK . sharedActor ( ) . style ; 
 + style . toolBarColor = getResources ( ) . getColor ( R . color . accent ) ; 
 + style . fabColor = getResources ( ) . getColor ( R . color . accent ) ; 
 + style . fabColorPressed = getResources ( ) . getColor ( R . color . accent _ pressed ) ; 
 + 
 + 
 } 
 
 private class ActorSDKDelegate extends BaseActorSDKDelegate { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 index 674fae4 . . f7a3f92 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 @ @ - 32 , 29 + 32 , 33 @ @ public class ActorSDK { 
 
 
 private static volatile ActorSDK sdk = new ActorSDK ( ) ; 
 - / * * 
 - * Application Context 
 - * / 
 - private Application application ; 
 + / / 
 + / / Style 
 + / / 
 + public Style style = new Style ( ) ; 
 
 
 / / 
 / / SDK Objects 
 / / 
 / * * 
 - * Actor Messenger instance 
 + * Application Context 
 * / 
 - private AndroidMessenger messenger ; 
 + private Application application ; 
 / * * 
 - * Server Endpoints 
 + * Actor Messenger instance 
 * / 
 - private List < String > endpoints = new ArrayList < String > ( ) ; 
 + private AndroidMessenger messenger ; 
 
 
 / / 
 / / SDK Config 
 / / 
 / * * 
 + * Server Endpoints 
 + * / 
 + private List < String > endpoints = new ArrayList < String > ( ) ; 
 + / * * 
 * API App Id 
 * / 
 private int apiAppId = 1 ; 
 @ @ - 66 , 7 + 70 , 6 @ @ public class ActorSDK { 
 * Push Registration Id 
 * / 
 private long pushId = 0 ; 
 - 
 / * * 
 * Is Keeping app alive enabled 
 * / 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / Style . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / Style . java 
 new file mode 100644 
 index 0000000 . . 608678d 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / Style . java 
 @ @ - 0 , 0 + 1 , 7 @ @ 
 + package im . actor . sdk ; 
 + 
 + public class Style { 
 + public int toolBarColor = 0 ; 
 + public int fabColor = 0 ; 
 + public int fabColorPressed = 0 ; 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java 
 index 1a5ddd1 . . 4da1359 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java 
 @ @ - 1 , 6 + 1 , 7 @ @ 
 package im . actor . sdk . controllers . activity ; 
 
 import android . app . ProgressDialog ; 
 + import android . graphics . drawable . ColorDrawable ; 
 import android . os . Bundle ; 
 import android . support . v7 . app . ActionBar ; 
 import android . support . v7 . app . AppCompatActivity ; 
 @ @ - 12 , 6 + 13 , 7 @ @ import im . actor . core . viewmodel . Command ; 
 import im . actor . core . viewmodel . CommandCallback ; 
 import im . actor . core . viewmodel . GroupVM ; 
 import im . actor . core . viewmodel . UserVM ; 
 + import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . R ; 
 import im . actor . sdk . controllers . fragment . ActorBinder ; 
 import im . actor . sdk . view . avatar . AvatarView ; 
 @ @ - 31 , 6 + 33 , 10 @ @ public class BaseActivity extends AppCompatActivity { 
 super . onCreate ( savedInstanceState ) ; 
 onCreateToolbar ( ) ; 
 notifyOnResume ( ) ; 
 + 
 + if ( getSupportActionBar ( ) ! = null & & ActorSDK . sharedActor ( ) . style . toolBarColor ! = 0 ) { 
 + getSupportActionBar ( ) . setBackgroundDrawable ( new ColorDrawable ( ActorSDK . sharedActor ( ) . style . toolBarColor ) ) ; 
 + } 
 } 
 
 protected void onCreateToolbar ( ) { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseFragmentActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseFragmentActivity . java 
 index 081a3ef . . b86af95 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseFragmentActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseFragmentActivity . java 
 @ @ - 7 , 6 + 7 , 7 @ @ import android . support . v4 . app . Fragment ; 
 import android . support . v4 . app . FragmentTransaction ; 
 import android . view . MenuItem ; 
 
 + import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . R ; 
 
 / * * 
 @ @ - 21 , 6 + 22 , 11 @ @ public class BaseFragmentActivity extends BaseActivity { 
 getSupportActionBar ( ) . setDisplayHomeAsUpEnabled ( true ) ; 
 getSupportActionBar ( ) . setDisplayShowTitleEnabled ( true ) ; 
 getSupportActionBar ( ) . setDisplayShowCustomEnabled ( false ) ; 
 + 
 + if ( ActorSDK . sharedActor ( ) . style . toolBarColor ! = 0 ) { 
 + getSupportActionBar ( ) . setBackgroundDrawable ( new ColorDrawable ( ActorSDK . sharedActor ( ) . style . toolBarColor ) ) ; 
 + } 
 + 
 setContentView ( R . layout . activity _ base _ fragment ) ; 
 getWindow ( ) . setBackgroundDrawable ( new ColorDrawable ( Color . TRANSPARENT ) ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / controllers / MainPhoneController . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / controllers / MainPhoneController . java 
 index 14012c8 . . e61f85b 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / controllers / MainPhoneController . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / controllers / MainPhoneController . java 
 @ @ - 2 , 6 + 2 , 7 @ @ package im . actor . sdk . controllers . activity . controllers ; 
 
 import android . content . Context ; 
 import android . content . Intent ; 
 + import android . graphics . drawable . ColorDrawable ; 
 import android . net . Uri ; 
 import android . os . Bundle ; 
 import android . support . v4 . app . Fragment ; 
 @ @ - 20 , 10 + 21 , 14 @ @ import android . view . ViewGroup ; 
 import android . widget . FrameLayout ; 
 import android . widget . TextView ; 
 
 + import com . getbase . floatingactionbutton . FloatingActionButton ; 
 + 
 import java . util . ArrayList ; 
 
 import im . actor . core . entity . Dialog ; 
 import im . actor . core . entity . SearchEntity ; 
 + import im . actor . sdk . ActorSDK ; 
 + import im . actor . sdk . Style ; 
 import im . actor . sdk . controllers . activity . ActorMainActivity ; 
 import im . actor . runtime . generic . mvvm . BindedDisplayList ; 
 import im . actor . runtime . generic . mvvm . DisplayList ; 
 @ @ - 62 , 15 + 67 , 14 @ @ public class MainPhoneController extends MainBaseController { 
 private View searchHintView ; 
 
 private boolean isSearchVisible = false ; 
 + private SearchAdapter searchAdapter ; 
 + private BindedDisplayList < SearchEntity > searchDisplay ; 
 private final DisplayList . Listener searchListener = new DisplayList . Listener ( ) { 
 @ Override 
 public void onCollectionChanged ( ) { 
 onSearchChanged ( ) ; 
 } 
 } ; 
 - private SearchAdapter searchAdapter ; 
 - private BindedDisplayList < SearchEntity > searchDisplay ; 
 - 
 private SearchView searchView ; 
 private MenuItem searchMenu ; 
 
 @ @ - 80 , 7 + 84 , 7 @ @ public class MainPhoneController extends MainBaseController { 
 private View emptyContactsView ; 
 
 private View fabContent ; 
 - private View fabRoot ; 
 + private com . getbase . floatingactionbutton . FloatingActionButton fabRoot ; 
 
 private boolean isFabVisible = false ; 
 
 @ @ - 168 , 8 + 172 , 13 @ @ public class MainPhoneController extends MainBaseController { 
 isFabVisible = false ; 
 
 fabContent = findViewById ( R . id . fabContainer ) ; 
 - fabRoot = findViewById ( R . id . rootFab ) ; 
 - 
 + fabRoot = ( FloatingActionButton ) findViewById ( R . id . rootFab ) ; 
 + if ( ActorSDK . sharedActor ( ) . style . fabColor ! = 0 ) { 
 + fabRoot . setColorNormal ( ActorSDK . sharedActor ( ) . style . fabColor ) ; 
 + } 
 + if ( ActorSDK . sharedActor ( ) . style . fabColorPressed ! = 0 ) { 
 + fabRoot . setColorPressed ( ActorSDK . sharedActor ( ) . style . fabColorPressed ) ; 
 + } 
 fabRoot . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 @ @ - 229 , 7 + 238 , 16 @ @ public class MainPhoneController extends MainBaseController { 
 } 
 } ) ; 
 
 - findViewById ( R . id . composeContainer ) . setOnClickListener ( new View . OnClickListener ( ) { 
 + Style style = ActorSDK . sharedActor ( ) . style ; 
 + 
 + com . getbase . floatingactionbutton . FloatingActionButton fabCompose = ( FloatingActionButton ) findViewById ( R . id . composeContainer ) ; 
 + if ( style . fabColor ! = 0 ) { 
 + fabCompose . setColorNormal ( style . fabColor ) ; 
 + } 
 + if ( style . fabColorPressed ! = 0 ) { 
 + fabCompose . setColorPressed ( style . fabColorPressed ) ; 
 + } 
 + fabCompose . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 goneFab ( ) ; 
 @ @ - 237 , 7 + 255 , 14 @ @ public class MainPhoneController extends MainBaseController { 
 } 
 } ) ; 
 
 - findViewById ( R . id . createGroupContainer ) . setOnClickListener ( new View . OnClickListener ( ) { 
 + com . getbase . floatingactionbutton . FloatingActionButton fabCreateGroup = ( FloatingActionButton ) findViewById ( R . id . createGroupContainer ) ; 
 + if ( style . fabColor ! = 0 ) { 
 + fabCreateGroup . setColorNormal ( style . fabColor ) ; 
 + } 
 + if ( style . fabColorPressed ! = 0 ) { 
 + fabCreateGroup . setColorPressed ( style . fabColorPressed ) ; 
 + } 
 + fabCreateGroup . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 goneFab ( ) ; 
 @ @ - 245 , 7 + 270 , 14 @ @ public class MainPhoneController extends MainBaseController { 
 } 
 } ) ; 
 
 - findViewById ( R . id . addContactContainer ) . setOnClickListener ( new View . OnClickListener ( ) { 
 + com . getbase . floatingactionbutton . FloatingActionButton fabAddContact = ( FloatingActionButton ) findViewById ( R . id . addContactContainer ) ; 
 + if ( style . fabColor ! = 0 ) { 
 + fabAddContact . setColorNormal ( style . fabColor ) ; 
 + } 
 + if ( style . fabColorPressed ! = 0 ) { 
 + fabAddContact . setColorPressed ( style . fabColorPressed ) ; 
 + } 
 + fabAddContact . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 goneFab ( ) ; 
 @ @ - 253 , 6 + 285 , 7 @ @ public class MainPhoneController extends MainBaseController { 
 } 
 } ) ; 
 
 + 
 findViewById ( R . id . addContactButton ) . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 @ @ - 280 , 13 + 313 , 17 @ @ public class MainPhoneController extends MainBaseController { 
 ab . setDisplayShowHomeEnabled ( false ) ; 
 ab . setDisplayShowTitleEnabled ( false ) ; 
 
 + if ( ActorSDK . sharedActor ( ) . style . toolBarColor ! = 0 ) { 
 + ab . setBackgroundDrawable ( new ColorDrawable ( ActorSDK . sharedActor ( ) . style . toolBarColor ) ) ; 
 + } 
 + 
 FrameLayout tabsContainer = new FrameLayout ( getActivity ( ) ) ; 
 barTabs = new PagerSlidingTabStrip ( getActivity ( ) ) ; 
 barTabs . setTabBackground ( R . drawable . selector _ bar ) ; 
 / / barTabs . setIndicatorColorResource ( R . color . main _ tab _ selected ) ; 
 barTabs . setIndicatorHeight ( Screen . dp ( 2 ) ) ; 
 
 - barTabs . setDividerColorResource ( R . color . primary ) ; 
 + barTabs . setDividerColorResource ( android . R . color . transparent ) ; 
 / / barTabs . setTextColorResource ( R . color . main _ tab _ text ) ; 
 barTabs . setTextSize ( Screen . dp ( 14 ) ) ; 
 barTabs . setUnderlineHeight ( 0 ) ;
