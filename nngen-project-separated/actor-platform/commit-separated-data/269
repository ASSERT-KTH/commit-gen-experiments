BLEU SCORE: 0.23462350320527994

TEST MSG: feat ( iOS ) : Minor improvements on media bubble date indicator
GENERATED MSG: fix ( iOS ) : fix date background in media cell

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > index a4117b9 . . 9e7ad25 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > @ @ - 353 , 7 + 353 , 7 @ @ public class ActorStyle { < nl > public var chatTextDateInColor = UIColor ( rgb : 0x979797 ) < nl > < nl > public var chatMediaDateColor = UIColor . whiteColor ( ) < nl > - public var chatMediaDateBgColor = UIColor ( rgb : 0x2D394A , alpha : 0 . 54 ) < nl > + public var chatMediaDateBgColor = UIColor . blackColor ( ) . alpha ( 0 . 4 ) < nl > < nl > / / Bubble Colors < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > index 10cabef . . 17d0ddf 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > @ @ - 36 , 7 + 36 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > < nl > preview . autoPlayAnimatedImage = true < nl > < nl > - timeBg . image = ActorSDK . sharedActor ( ) . style . statusBackgroundImage < nl > + timeBg . image = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatMediaDateBgColor , radius : 10 ) < nl > < nl > timeLabel . font = UIFont . italicSystemFontOfSize ( 11 ) < nl > timeLabel . textColor = appStyle . chatMediaDateColor < nl > @ @ - 53 , 7 + 53 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > < nl > preview . addGestureRecognizer ( UITapGestureRecognizer ( target : self , action : # selector ( AABubbleMediaCell . mediaDidTap ) ) ) < nl > preview . userInteractionEnabled = true < nl > - contentInsets = UIEdgeInsets ( top : 1 , left : 1 , bottom : 1 , right : 1 ) < nl > + contentInsets = UIEdgeInsets ( top : 2 , left : 2 , bottom : 2 , right : 2 ) < nl > < nl > playView . userInteractionEnabled = false < nl > } < nl > @ @ - 368 , 13 + 368 , 13 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > let timeWidth = ( isOut ? 23 : 0 ) + timeLabel . bounds . width < nl > let timeHeight : CGFloat = 20 < nl > < nl > - timeLabel . frame = CGRectMake ( preview . frame . maxX - timeWidth - 18 , preview . frame . maxY - timeHeight - 6 , timeLabel . frame . width , timeHeight ) < nl > + timeLabel . frame = CGRectMake ( preview . frame . maxX - timeWidth - 8 , preview . frame . maxY - timeHeight - 4 , timeLabel . frame . width , timeHeight ) < nl > < nl > if ( isOut ) { < nl > statusView . frame = CGRectMake ( timeLabel . frame . maxX , timeLabel . frame . minY , 23 , timeHeight ) < nl > } < nl > < nl > - timeBg . frame = CGRectMake ( timeLabel . frame . minX - 4 , timeLabel . frame . minY - 1 , timeWidth + 8 , timeHeight + 2 ) < nl > + timeBg . frame = CGRectMake ( timeLabel . frame . minX - 6 , timeLabel . frame . minY , timeWidth + 10 , timeHeight ) < nl > } < nl > < nl > / / Photo preview < nl > @ @ - 421 , 7 + 421 , 7 @ @ public class MediaCellLayout : AACellLayout { < nl > self . fastThumb = fastThumb ? . getImage ( ) . toNSData ( ) < nl > < nl > / / Creating layout < nl > - super . init ( height : self . screenSize . height + 2 , date : date , key : " media " , layouter : layouter ) < nl > + super . init ( height : self . screenSize . height + 4 , date : date , key : " media " , layouter : layouter ) < nl > } < nl > < nl > / * *
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > index 59d23d1 . . 1327b5d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > @ @ - 377 , 6 + 377 , 11 @ @ public class ActorStyle { < nl > public var chatIconWarring = UIImage . templated ( " msg _ warring " ) < nl > public var chatIconClock = UIImage . templated ( " msg _ clock " ) < nl > < nl > + < nl > + < nl > + < nl > + < nl > + < nl > private var _ chatStatusActive : UIColor ? < nl > public var chatStatusActive : UIColor { < nl > get { return _ chatStatusActive ! = nil ? _ chatStatusActive ! : vcTintColor } < nl > @ @ - 587 , 6 + 592 , 24 @ @ public class ActorStyle { < nl > set ( v ) { _ dialogStatusError = v } < nl > } < nl > < nl > + private var _ statusBackgroundIcon : UIImage ? < nl > + public var statusBackgroundImage : UIImage { < nl > + get { < nl > + if ( _ statusBackgroundIcon = = nil ) { < nl > + < nl > + let statusImage : UIImage = ( UIImage . bundled ( " bubble _ service _ bg " ) ? . imageWithColor ( UIColor . blackColor ( ) . colorWithAlphaComponent ( 0 . 7 ) ) . imageWithRenderingMode ( UIImageRenderingMode . AlwaysOriginal ) ) ! < nl > + < nl > + let center : CGPoint = CGPointMake ( statusImage . size . width / 2 . 0 , statusImage . size . height / 2 . 0 ) ; < nl > + let capInsets : UIEdgeInsets = UIEdgeInsetsMake ( center . y , center . x , center . y , center . x ) ; < nl > + < nl > + _ statusBackgroundIcon = statusImage . resizableImageWithCapInsets ( capInsets , resizingMode : UIImageResizingMode . Stretch ) < nl > + return _ statusBackgroundIcon ! < nl > + } else { < nl > + return _ statusBackgroundIcon ! < nl > + } < nl > + } < nl > + } < nl > + < nl > / / < nl > / / Contacts styles < nl > / / < nl > @ @ - 684 , 6 + 707 , 18 @ @ public class ActorStyle { < nl > set ( v ) { _ vcStarInfoTextColor = v } < nl > } < nl > public var _ vcStarInfoTextColor : UIColor ? < nl > + < nl > + / / < nl > + / / Settings VC < nl > + / / < nl > + < nl > + public var vcSettingsContactsHeaderTextColor : UIColor { < nl > + get { return _ vcSettingsContactsHeaderTextColor ! = nil ? _ vcSettingsContactsHeaderTextColor ! : vcTextColor } < nl > + set ( v ) { _ vcSettingsContactsHeaderTextColor = v } < nl > + } < nl > + public var _ vcSettingsContactsHeaderTextColor : UIColor ? < nl > + < nl > + < nl > } < nl > < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > index 75f1d53 . . 33fc49f 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > @ @ - 81 , 7 + 81 , 9 @ @ public class AABubbleCell : UICollectionViewCell { < nl > / / Cached Date bubble images < nl > / / < nl > < nl > - private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) < nl > + / / private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) < nl > + < nl > + private static var dateBgImage = ActorSDK . sharedActor ( ) . style . statusBackgroundImage < nl > < nl > / / MARK : - < nl > / / MARK : Public vars < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > index 0e04191 . . 29cf826 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > @ @ - 27 , 8 + 27 , 10 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > public init ( frame : CGRect ) { < nl > super . init ( frame : frame , isFullSize : false ) < nl > < nl > - timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) < nl > - < nl > + / / timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) < nl > + < nl > + timeBg . image = ActorSDK . sharedActor ( ) . style . statusBackgroundImage < nl > + < nl > timeLabel . font = UIFont . italicSystemFontOfSize ( 11 ) < nl > timeLabel . textColor = appStyle . chatMediaDateColor < nl > < nl > @ @ - 285 , 7 + 287 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > statusView . frame = CGRectMake ( timeLabel . frame . maxX , timeLabel . frame . minY , 23 , timeHeight ) < nl > } < nl > < nl > - timeBg . frame = CGRectMake ( timeLabel . frame . minX - 3 , timeLabel . frame . minY - 1 , timeWidth + 6 , timeHeight + 2 ) < nl > + timeBg . frame = CGRectMake ( timeLabel . frame . minX - 4 , timeLabel . frame . minY - 1 , timeWidth + 8 , timeHeight + 2 ) < nl > } < nl > < nl > / / Photo preview < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > index 6b6ac11 . . 95d8f0d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > @ @ - 117 , 6 + 117 , 25 @ @ public extension UIImage { < nl > UIGraphicsEndImageContext ( ) < nl > return image ; < nl > } < nl > + < nl > + func imageWithColor ( color1 : UIColor ) - > UIImage { < nl > + UIGraphicsBeginImageContextWithOptions ( self . size , false , self . scale ) < nl > + < nl > + let context = UIGraphicsGetCurrentContext ( ) < nl > + CGContextTranslateCTM ( context , 0 , self . size . height ) < nl > + CGContextScaleCTM ( context , 1 . 0 , - 1 . 0 ) ; < nl > + CGContextSetBlendMode ( context , CGBlendMode . Normal ) < nl > + < nl > + let rect = CGRectMake ( 0 , 0 , self . size . width , self . size . height ) as CGRect < nl > + CGContextClipToMask ( context , rect , self . CGImage ) < nl > + color1 . setFill ( ) < nl > + CGContextFillRect ( context , rect ) < nl > + < nl > + let newImage = UIGraphicsGetImageFromCurrentImageContext ( ) as UIImage < nl > + UIGraphicsEndImageContext ( ) < nl > + < nl > + return newImage < nl > + } < nl > } < nl > < nl > public class Imaging {

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 index a4117b9 . . 9e7ad25 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 @ @ - 353 , 7 + 353 , 7 @ @ public class ActorStyle { 
 public var chatTextDateInColor = UIColor ( rgb : 0x979797 ) 
 
 public var chatMediaDateColor = UIColor . whiteColor ( ) 
 - public var chatMediaDateBgColor = UIColor ( rgb : 0x2D394A , alpha : 0 . 54 ) 
 + public var chatMediaDateBgColor = UIColor . blackColor ( ) . alpha ( 0 . 4 ) 
 
 / / Bubble Colors 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 index 10cabef . . 17d0ddf 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 @ @ - 36 , 7 + 36 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 
 preview . autoPlayAnimatedImage = true 
 
 - timeBg . image = ActorSDK . sharedActor ( ) . style . statusBackgroundImage 
 + timeBg . image = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatMediaDateBgColor , radius : 10 ) 
 
 timeLabel . font = UIFont . italicSystemFontOfSize ( 11 ) 
 timeLabel . textColor = appStyle . chatMediaDateColor 
 @ @ - 53 , 7 + 53 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 
 preview . addGestureRecognizer ( UITapGestureRecognizer ( target : self , action : # selector ( AABubbleMediaCell . mediaDidTap ) ) ) 
 preview . userInteractionEnabled = true 
 - contentInsets = UIEdgeInsets ( top : 1 , left : 1 , bottom : 1 , right : 1 ) 
 + contentInsets = UIEdgeInsets ( top : 2 , left : 2 , bottom : 2 , right : 2 ) 
 
 playView . userInteractionEnabled = false 
 } 
 @ @ - 368 , 13 + 368 , 13 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 let timeWidth = ( isOut ? 23 : 0 ) + timeLabel . bounds . width 
 let timeHeight : CGFloat = 20 
 
 - timeLabel . frame = CGRectMake ( preview . frame . maxX - timeWidth - 18 , preview . frame . maxY - timeHeight - 6 , timeLabel . frame . width , timeHeight ) 
 + timeLabel . frame = CGRectMake ( preview . frame . maxX - timeWidth - 8 , preview . frame . maxY - timeHeight - 4 , timeLabel . frame . width , timeHeight ) 
 
 if ( isOut ) { 
 statusView . frame = CGRectMake ( timeLabel . frame . maxX , timeLabel . frame . minY , 23 , timeHeight ) 
 } 
 
 - timeBg . frame = CGRectMake ( timeLabel . frame . minX - 4 , timeLabel . frame . minY - 1 , timeWidth + 8 , timeHeight + 2 ) 
 + timeBg . frame = CGRectMake ( timeLabel . frame . minX - 6 , timeLabel . frame . minY , timeWidth + 10 , timeHeight ) 
 } 
 
 / / Photo preview 
 @ @ - 421 , 7 + 421 , 7 @ @ public class MediaCellLayout : AACellLayout { 
 self . fastThumb = fastThumb ? . getImage ( ) . toNSData ( ) 
 
 / / Creating layout 
 - super . init ( height : self . screenSize . height + 2 , date : date , key : " media " , layouter : layouter ) 
 + super . init ( height : self . screenSize . height + 4 , date : date , key : " media " , layouter : layouter ) 
 } 
 
 / * *

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 index 59d23d1 . . 1327b5d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 @ @ - 377 , 6 + 377 , 11 @ @ public class ActorStyle { 
 public var chatIconWarring = UIImage . templated ( " msg _ warring " ) 
 public var chatIconClock = UIImage . templated ( " msg _ clock " ) 
 
 + 
 + 
 + 
 + 
 + 
 private var _ chatStatusActive : UIColor ? 
 public var chatStatusActive : UIColor { 
 get { return _ chatStatusActive ! = nil ? _ chatStatusActive ! : vcTintColor } 
 @ @ - 587 , 6 + 592 , 24 @ @ public class ActorStyle { 
 set ( v ) { _ dialogStatusError = v } 
 } 
 
 + private var _ statusBackgroundIcon : UIImage ? 
 + public var statusBackgroundImage : UIImage { 
 + get { 
 + if ( _ statusBackgroundIcon = = nil ) { 
 + 
 + let statusImage : UIImage = ( UIImage . bundled ( " bubble _ service _ bg " ) ? . imageWithColor ( UIColor . blackColor ( ) . colorWithAlphaComponent ( 0 . 7 ) ) . imageWithRenderingMode ( UIImageRenderingMode . AlwaysOriginal ) ) ! 
 + 
 + let center : CGPoint = CGPointMake ( statusImage . size . width / 2 . 0 , statusImage . size . height / 2 . 0 ) ; 
 + let capInsets : UIEdgeInsets = UIEdgeInsetsMake ( center . y , center . x , center . y , center . x ) ; 
 + 
 + _ statusBackgroundIcon = statusImage . resizableImageWithCapInsets ( capInsets , resizingMode : UIImageResizingMode . Stretch ) 
 + return _ statusBackgroundIcon ! 
 + } else { 
 + return _ statusBackgroundIcon ! 
 + } 
 + } 
 + } 
 + 
 / / 
 / / Contacts styles 
 / / 
 @ @ - 684 , 6 + 707 , 18 @ @ public class ActorStyle { 
 set ( v ) { _ vcStarInfoTextColor = v } 
 } 
 public var _ vcStarInfoTextColor : UIColor ? 
 + 
 + / / 
 + / / Settings VC 
 + / / 
 + 
 + public var vcSettingsContactsHeaderTextColor : UIColor { 
 + get { return _ vcSettingsContactsHeaderTextColor ! = nil ? _ vcSettingsContactsHeaderTextColor ! : vcTextColor } 
 + set ( v ) { _ vcSettingsContactsHeaderTextColor = v } 
 + } 
 + public var _ vcSettingsContactsHeaderTextColor : UIColor ? 
 + 
 + 
 } 
 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 index 75f1d53 . . 33fc49f 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 @ @ - 81 , 7 + 81 , 9 @ @ public class AABubbleCell : UICollectionViewCell { 
 / / Cached Date bubble images 
 / / 
 
 - private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) 
 + / / private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) 
 + 
 + private static var dateBgImage = ActorSDK . sharedActor ( ) . style . statusBackgroundImage 
 
 / / MARK : - 
 / / MARK : Public vars 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 index 0e04191 . . 29cf826 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 @ @ - 27 , 8 + 27 , 10 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 public init ( frame : CGRect ) { 
 super . init ( frame : frame , isFullSize : false ) 
 
 - timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) 
 - 
 + / / timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) 
 + 
 + timeBg . image = ActorSDK . sharedActor ( ) . style . statusBackgroundImage 
 + 
 timeLabel . font = UIFont . italicSystemFontOfSize ( 11 ) 
 timeLabel . textColor = appStyle . chatMediaDateColor 
 
 @ @ - 285 , 7 + 287 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 statusView . frame = CGRectMake ( timeLabel . frame . maxX , timeLabel . frame . minY , 23 , timeHeight ) 
 } 
 
 - timeBg . frame = CGRectMake ( timeLabel . frame . minX - 3 , timeLabel . frame . minY - 1 , timeWidth + 6 , timeHeight + 2 ) 
 + timeBg . frame = CGRectMake ( timeLabel . frame . minX - 4 , timeLabel . frame . minY - 1 , timeWidth + 8 , timeHeight + 2 ) 
 } 
 
 / / Photo preview 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 index 6b6ac11 . . 95d8f0d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 @ @ - 117 , 6 + 117 , 25 @ @ public extension UIImage { 
 UIGraphicsEndImageContext ( ) 
 return image ; 
 } 
 + 
 + func imageWithColor ( color1 : UIColor ) - > UIImage { 
 + UIGraphicsBeginImageContextWithOptions ( self . size , false , self . scale ) 
 + 
 + let context = UIGraphicsGetCurrentContext ( ) 
 + CGContextTranslateCTM ( context , 0 , self . size . height ) 
 + CGContextScaleCTM ( context , 1 . 0 , - 1 . 0 ) ; 
 + CGContextSetBlendMode ( context , CGBlendMode . Normal ) 
 + 
 + let rect = CGRectMake ( 0 , 0 , self . size . width , self . size . height ) as CGRect 
 + CGContextClipToMask ( context , rect , self . CGImage ) 
 + color1 . setFill ( ) 
 + CGContextFillRect ( context , rect ) 
 + 
 + let newImage = UIGraphicsGetImageFromCurrentImageContext ( ) as UIImage 
 + UIGraphicsEndImageContext ( ) 
 + 
 + return newImage 
 + } 
 } 
 
 public class Imaging {
