BLEU SCORE: 0.2513293635022765

TEST MSG: fix ( android ) : recover settings / groupinfo menu
GENERATED MSG: feat ( android ) : profile / grouopInfo fragment in sdk

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java < nl > index 8edc540 . . 4907cd2 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java < nl > @ @ - 1 , 21 + 1 , 36 @ @ < nl > package im . actor . sdk . controllers . group ; < nl > < nl > + import android . app . AlertDialog ; < nl > + import android . content . DialogInterface ; < nl > + import android . content . Intent ; < nl > import android . graphics . Color ; < nl > import android . graphics . drawable . ColorDrawable ; < nl > import android . os . Bundle ; < nl > + import android . view . Menu ; < nl > + import android . view . MenuInflater ; < nl > + import android . view . MenuItem ; < nl > < nl > + import im . actor . core . viewmodel . GroupVM ; < nl > import im . actor . sdk . ActorSDK ; < nl > + import im . actor . sdk . R ; < nl > import im . actor . sdk . controllers . Intents ; < nl > import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > + import im . actor . sdk . controllers . fragment . preview . ViewAvatarActivity ; < nl > import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . groups ; < nl > + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > + < nl > public class GroupInfoActivity extends BaseFragmentActivity { < nl > < nl > + private GroupVM groupInfo ; < nl > + private int chatId ; < nl > + < nl > @ Override < nl > protected void onCreate ( Bundle savedInstanceState ) { < nl > super . onCreate ( savedInstanceState ) ; < nl > - int chatId = getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ; < nl > - < nl > + chatId = getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ; < nl > + groupInfo = groups ( ) . get ( chatId ) ; < nl > getSupportActionBar ( ) . setBackgroundDrawable ( new ColorDrawable ( Color . TRANSPARENT ) ) ; < nl > getSupportActionBar ( ) . setTitle ( null ) ; < nl > < nl > @ @ - 31 , 4 + 46 , 40 @ @ public class GroupInfoActivity extends BaseFragmentActivity { < nl > showFragment ( fragment , false , false ) ; < nl > } < nl > } < nl > + < nl > + @ Override < nl > + public boolean onCreateOptionsMenu ( Menu menu ) { < nl > + if ( groupInfo . isMember ( ) . get ( ) ) { < nl > + getMenuInflater ( ) . inflate ( R . menu . group _ info , menu ) ; < nl > + } < nl > + return true ; < nl > + } < nl > + < nl > + @ Override < nl > + public boolean onOptionsItemSelected ( MenuItem item ) { < nl > + if ( item . getItemId ( ) = = R . id . leaveGroup ) { < nl > + new AlertDialog . Builder ( this ) < nl > + . setMessage ( getString ( R . string . alert _ leave _ group _ message ) . replace ( " % 1 $ s " , < nl > + groupInfo . getName ( ) . get ( ) ) ) < nl > + . setPositiveButton ( R . string . alert _ leave _ group _ yes , new DialogInterface . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( DialogInterface dialog2 , int which ) { < nl > + execute ( messenger ( ) . leaveGroup ( chatId ) ) ; < nl > + } < nl > + } ) < nl > + . setNegativeButton ( R . string . dialog _ cancel , null ) < nl > + . show ( ) < nl > + . setCanceledOnTouchOutside ( true ) ; < nl > + < nl > + return true ; < nl > + } else if ( item . getItemId ( ) = = R . id . addMember ) { < nl > + startActivity ( new Intent ( this , AddMemberActivity . class ) < nl > + . putExtra ( " GROUP _ ID " , chatId ) ) ; < nl > + } else if ( item . getItemId ( ) = = R . id . editTitle ) { < nl > + startActivity ( Intents . editGroupTitle ( chatId , this ) ) ; < nl > + } else if ( item . getItemId ( ) = = R . id . changePhoto ) { < nl > + startActivity ( ViewAvatarActivity . viewGroupAvatar ( chatId , this ) ) ; < nl > + } < nl > + return super . onOptionsItemSelected ( item ) ; < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > index 0de3693 . . 2e0ef98 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > @ @ - 423 , 42 + 423 , 6 @ @ public class GroupInfoFragment extends BaseFragment { < nl > } < nl > < nl > @ Override < nl > - public void onCreateOptionsMenu ( Menu menu , MenuInflater menuInflater ) { < nl > - super . onCreateOptionsMenu ( menu , menuInflater ) ; < nl > - if ( groupInfo . isMember ( ) . get ( ) ) { < nl > - menuInflater . inflate ( R . menu . group _ info , menu ) ; < nl > - } < nl > - } < nl > - < nl > - @ Override < nl > - public boolean onOptionsItemSelected ( MenuItem item ) { < nl > - if ( item . getItemId ( ) = = R . id . leaveGroup ) { < nl > - new AlertDialog . Builder ( getActivity ( ) ) < nl > - . setMessage ( getString ( R . string . alert _ leave _ group _ message ) . replace ( " % 1 $ s " , < nl > - groupInfo . getName ( ) . get ( ) ) ) < nl > - . setPositiveButton ( R . string . alert _ leave _ group _ yes , new DialogInterface . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( DialogInterface dialog2 , int which ) { < nl > - execute ( messenger ( ) . leaveGroup ( chatId ) ) ; < nl > - } < nl > - } ) < nl > - . setNegativeButton ( R . string . dialog _ cancel , null ) < nl > - . show ( ) < nl > - . setCanceledOnTouchOutside ( true ) ; < nl > - < nl > - return true ; < nl > - } else if ( item . getItemId ( ) = = R . id . addMember ) { < nl > - startActivity ( new Intent ( getActivity ( ) , AddMemberActivity . class ) < nl > - . putExtra ( " GROUP _ ID " , chatId ) ) ; < nl > - } else if ( item . getItemId ( ) = = R . id . editTitle ) { < nl > - startActivity ( Intents . editGroupTitle ( chatId , getActivity ( ) ) ) ; < nl > - } else if ( item . getItemId ( ) = = R . id . changePhoto ) { < nl > - startActivity ( ViewAvatarActivity . viewGroupAvatar ( chatId , getActivity ( ) ) ) ; < nl > - } < nl > - return super . onOptionsItemSelected ( item ) ; < nl > - } < nl > - < nl > - @ Override < nl > public void onActivityResult ( int requestCode , int resultCode , Intent data ) { < nl > if ( resultCode = = Activity . RESULT _ OK & & requestCode = = 0 & & data ! = null & & data . hasExtra ( Intents . EXTRA _ UID ) ) { < nl > final UserVM userModel = users ( ) . get ( data . getIntExtra ( Intents . EXTRA _ UID , 0 ) ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > index 205eece . . 6e58250 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > @ @ - 599 , 7 + 599 , 7 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > } < nl > } ) ; < nl > < nl > - updateActionBar ( scrollView . getScrollY ( ) ) ; < nl > + / / updateActionBar ( scrollView . getScrollY ( ) ) ; < nl > < nl > return view ; < nl > } < nl > @ @ - 724 , 24 + 724 , 6 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > } < nl > } < nl > < nl > - @ Override < nl > - public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { < nl > - super . onCreateOptionsMenu ( menu , inflater ) ; < nl > - inflater . inflate ( R . menu . my _ profile , menu ) ; < nl > - } < nl > - < nl > - @ Override < nl > - public boolean onOptionsItemSelected ( MenuItem item ) { < nl > - if ( item . getItemId ( ) = = R . id . editProfile ) { < nl > - startActivity ( Intents . editMyName ( getActivity ( ) ) ) ; < nl > - return true ; < nl > - } else if ( item . getItemId ( ) = = R . id . changePhoto ) { < nl > - startActivity ( ViewAvatarActivity . viewAvatar ( myUid ( ) , getActivity ( ) ) ) ; < nl > - return true ; < nl > - } < nl > - < nl > - return super . onOptionsItemSelected ( item ) ; < nl > - } < nl > < nl > @ Override < nl > public View getBeforeNickSettingsView ( ) { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java < nl > index ab18972 . . a61a53f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java < nl > @ @ - 3 , 11 + 3 , 18 @ @ package im . actor . sdk . controllers . settings ; < nl > import android . graphics . Color ; < nl > import android . graphics . drawable . ColorDrawable ; < nl > import android . os . Bundle ; < nl > + import android . view . Menu ; < nl > + import android . view . MenuItem ; < nl > < nl > import im . actor . sdk . ActorSDK ; < nl > + import im . actor . sdk . R ; < nl > + import im . actor . sdk . controllers . Intents ; < nl > import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > + import im . actor . sdk . controllers . fragment . preview . ViewAvatarActivity ; < nl > import im . actor . sdk . intents . ActorIntent ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . myUid ; < nl > + < nl > public class MyProfileActivity extends BaseFragmentActivity { < nl > @ Override < nl > protected void onCreate ( Bundle savedInstanceState ) { < nl > @ @ - 33 , 4 + 40 , 23 @ @ public class MyProfileActivity extends BaseFragmentActivity { < nl > showFragment ( fragment , false , false ) ; < nl > } < nl > } < nl > + < nl > + @ Override < nl > + public boolean onCreateOptionsMenu ( Menu menu ) { < nl > + getMenuInflater ( ) . inflate ( R . menu . my _ profile , menu ) ; < nl > + return super . onCreateOptionsMenu ( menu ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public boolean onOptionsItemSelected ( MenuItem item ) { < nl > + if ( item . getItemId ( ) = = R . id . editProfile ) { < nl > + startActivity ( Intents . editMyName ( this ) ) ; < nl > + return true ; < nl > + } else if ( item . getItemId ( ) = = R . id . changePhoto ) { < nl > + startActivity ( ViewAvatarActivity . viewAvatar ( myUid ( ) , this ) ) ; < nl > + return true ; < nl > + } < nl > + < nl > + return super . onOptionsItemSelected ( item ) ; < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml < nl > index 95264da . . 3a58f6a 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml < nl > @ @ - 18 , 6 + 18 , 7 @ @ < nl > < LinearLayout < nl > android : layout _ width = " match _ parent " < nl > android : layout _ height = " wrap _ content " < nl > + android : focusableInTouchMode = " true " < nl > android : orientation = " vertical " > < nl > < nl > < FrameLayout
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > index d0a89e7 . . d7c4b62 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > @ @ - 1 , 6 + 1 , 8 @ @ < nl > package im . actor ; < nl > < nl > import android . graphics . Color ; < nl > + import android . os . Bundle ; < nl > + import android . view . LayoutInflater ; < nl > import android . view . View ; < nl > import android . view . ViewGroup ; < nl > import android . widget . CheckBox ; < nl > @ @ - 17 , 10 + 19 , 14 @ @ import im . actor . sdk . ActorStyle ; < nl > import im . actor . sdk . BaseActorSDKDelegate ; < nl > import im . actor . sdk . controllers . conversation . messages . BaseJsonHolder ; < nl > import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; < nl > + import im . actor . sdk . controllers . fragment . group . GroupInfoFragment ; < nl > + import im . actor . sdk . controllers . fragment . profile . ProfileFragment ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsField ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; < nl > import im . actor . sdk . controllers . fragment . settings . BaseActorSettingsActivity ; < nl > import im . actor . sdk . controllers . fragment . settings . BaseActorSettingsFragment ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseGroupInfoActivity ; < nl > import im . actor . sdk . intents . ActorIntentFragmentActivity ; < nl > import im . actor . tc . TCMessageHolder ; < nl > < nl > @ @ - 82 , 6 + 88 , 26 @ @ public class Application extends ActorSDKApplication { < nl > } < nl > < nl > @ Override < nl > + public BaseActorProfileActivity getProfileIntent ( ) { < nl > + return new BaseActorProfileActivity ( ) { < nl > + @ Override < nl > + public ProfileFragment getProfileFragment ( int uid ) { < nl > + return ProfileFragmentEx . create ( uid ) ; < nl > + } < nl > + } ; < nl > + } < nl > + < nl > + @ Override < nl > + public BaseGroupInfoActivity getGroupInfoIntent ( ) { < nl > + return new BaseGroupInfoActivity ( ) { < nl > + @ Override < nl > + public GroupInfoFragment getGroupInfoFragment ( int chatId ) { < nl > + return GroupInfoEx . create ( chatId ) ; < nl > + } < nl > + } ; < nl > + } < nl > + < nl > + @ Override < nl > public ActorIntentFragmentActivity getSettingsIntent ( ) { < nl > return new BaseActorSettingsActivity ( ) { < nl > @ Override < nl > @ @ - 164 , 4 + 190 , 44 @ @ public class Application extends ActorSDKApplication { < nl > } ; < nl > } < nl > } < nl > + < nl > + public static class ProfileFragmentEx extends ProfileFragment { < nl > + < nl > + public static ProfileFragment create ( int uid ) { < nl > + Bundle bundle = new Bundle ( ) ; < nl > + bundle . putInt ( EXTRA _ UID , uid ) ; < nl > + ProfileFragment res = new ProfileFragmentEx ( ) ; < nl > + res . setArguments ( bundle ) ; < nl > + return res ; < nl > + } < nl > + < nl > + < nl > + @ Override < nl > + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > + View view = super . onCreateView ( inflater , container , savedInstanceState ) ; < nl > + view . findViewById ( R . id . docsContainer ) . setVisibility ( View . VISIBLE ) ; < nl > + view . findViewById ( R . id . sharedContainer ) . setVisibility ( View . VISIBLE ) ; < nl > + return view ; < nl > + } < nl > + } < nl > + < nl > + public static class GroupInfoEx extends GroupInfoFragment { < nl > + < nl > + public static GroupInfoFragment create ( int chatId ) { < nl > + Bundle bundle = new Bundle ( ) ; < nl > + bundle . putInt ( EXTRA _ CHAT _ ID , chatId ) ; < nl > + GroupInfoFragment res = new GroupInfoEx ( ) ; < nl > + res . setArguments ( bundle ) ; < nl > + return res ; < nl > + } < nl > + < nl > + < nl > + @ Override < nl > + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > + View view = super . onCreateView ( inflater , container , savedInstanceState ) ; < nl > + header . findViewById ( R . id . docsContainer ) . setVisibility ( View . VISIBLE ) ; < nl > + header . findViewById ( R . id . sharedContainer ) . setVisibility ( View . VISIBLE ) ; < nl > + return view ; < nl > + } < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > index 3e881dc . . 658b26d 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > @ @ - 13 , 6 + 13 , 8 @ @ import im . actor . sdk . controllers . conversation . messages . MessageHolder ; < nl > import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; < nl > import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseGroupInfoActivity ; < nl > import im . actor . sdk . intents . ActorIntent ; < nl > import im . actor . sdk . intents . ActorIntentFragmentActivity ; < nl > < nl > @ @ - 50 , 6 + 52 , 20 @ @ public interface ActorSDKDelegate { < nl > ActorIntentFragmentActivity getSettingsIntent ( ) ; < nl > < nl > / * * < nl > + * If not null returned , overrides users profile activity intent < nl > + * < nl > + * @ return Actor Intent < nl > + * / < nl > + BaseActorProfileActivity getProfileIntent ( ) ; < nl > + < nl > + / * * < nl > + * If not null returned , overrides group info activity intent < nl > + * < nl > + * @ return Actor Intent < nl > + * / < nl > + BaseGroupInfoActivity getGroupInfoIntent ( ) ; < nl > + < nl > + / * * < nl > * If not null returned , overrides settings activity intent < nl > * < nl > * @ return Actor Intent < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > index e6094fc . . 3274a45 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > @ @ - 14 , 6 + 14 , 8 @ @ import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; < nl > import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; < nl > import im . actor . sdk . controllers . fragment . auth . SignPhoneFragment ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseGroupInfoActivity ; < nl > import im . actor . sdk . intents . ActorIntent ; < nl > import im . actor . sdk . intents . ActorIntentFragmentActivity ; < nl > < nl > @ @ - 75 , 6 + 77 , 16 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { < nl > } < nl > < nl > @ Override < nl > + public BaseActorProfileActivity getProfileIntent ( ) { < nl > + return null ; < nl > + } < nl > + < nl > + @ Override < nl > + public BaseGroupInfoActivity getGroupInfoIntent ( ) { < nl > + return null ; < nl > + } < nl > + < nl > + @ Override < nl > public ActorIntentFragmentActivity getChatSettingsIntent ( ) { < nl > return null ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoActivity . java < nl > index b757104 . . 2f86386 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoActivity . java < nl > @ @ - 4 , 8 + 4 , 12 @ @ import android . graphics . Color ; < nl > import android . graphics . drawable . ColorDrawable ; < nl > import android . os . Bundle ; < nl > < nl > + import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . controllers . Intents ; < nl > import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > + import im . actor . sdk . controllers . fragment . profile . ProfileFragment ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseGroupInfoActivity ; < nl > < nl > public class GroupInfoActivity extends BaseFragmentActivity { < nl > < nl > @ @ - 18 , 7 + 22 , 15 @ @ public class GroupInfoActivity extends BaseFragmentActivity { < nl > getSupportActionBar ( ) . setTitle ( null ) ; < nl > < nl > if ( savedInstanceState = = null ) { < nl > - showFragment ( GroupInfoFragment . create ( chatId ) , false , false ) ; < nl > + GroupInfoFragment fragment ; < nl > + BaseGroupInfoActivity profileIntent = ActorSDK . sharedActor ( ) . getDelegate ( ) . getGroupInfoIntent ( ) ; < nl > + if ( profileIntent ! = null ) { < nl > + fragment = profileIntent . getGroupInfoFragment ( chatId ) ; < nl > + } else { < nl > + fragment = GroupInfoFragment . create ( chatId ) ; < nl > + } < nl > + < nl > + showFragment ( fragment , false , false ) ; < nl > } < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoFragment . java < nl > index 85047be . . 29533cc 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoFragment . java < nl > @ @ - 59 , 7 + 59 , 7 @ @ import static im . actor . sdk . util . ActorSDKMessenger . users ; < nl > < nl > public class GroupInfoFragment extends BaseFragment { < nl > < nl > - private static final String EXTRA _ CHAT _ ID = " chat _ id " ; < nl > + protected static final String EXTRA _ CHAT _ ID = " chat _ id " ; < nl > private String [ ] theme ; < nl > private String [ ] about ; < nl > private int chatId ; < nl > @ @ - 68 , 6 + 68 , 7 @ @ public class GroupInfoFragment extends BaseFragment { < nl > private MembersAdapter groupUserAdapter ; < nl > private CoverAvatarView avatarView ; < nl > private View notMemberView ; < nl > + protected View header ; < nl > < nl > public static GroupInfoFragment create ( int chatId ) { < nl > Bundle args = new Bundle ( ) ; < nl > @ @ - 100 , 7 + 101 , 7 @ @ public class GroupInfoFragment extends BaseFragment { < nl > listView = ( ListView ) res . findViewById ( R . id . groupList ) ; < nl > listView . setBackgroundColor ( style . getMainBackgroundColor ( ) ) ; < nl > < nl > - final View header = inflater . inflate ( R . layout . fragment _ group _ header , listView , false ) ; < nl > + header = inflater . inflate ( R . layout . fragment _ group _ header , listView , false ) ; < nl > header . setBackgroundColor ( style . getMainBackgroundColor ( ) ) ; < nl > < nl > / / Avatar < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileActivity . java < nl > index df963d4 . . db6d587 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileActivity . java < nl > @ @ - 9 , 12 + 9 , 16 @ @ import android . view . MenuItem ; < nl > import android . widget . Toast ; < nl > < nl > import im . actor . core . viewmodel . UserVM ; < nl > + import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . R ; < nl > import im . actor . sdk . controllers . Intents ; < nl > import im . actor . sdk . controllers . activity . ActorMainActivity ; < nl > import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > import im . actor . runtime . mvvm . ValueChangedListener ; < nl > import im . actor . runtime . mvvm . Value ; < nl > + import im . actor . sdk . controllers . fragment . settings . ActorSettingsFragment ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; < nl > + import im . actor . sdk . controllers . fragment . settings . BaseActorSettingsFragment ; < nl > < nl > import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > import static im . actor . sdk . util . ActorSDKMessenger . users ; < nl > @ @ - 46 , 7 + 50 , 15 @ @ public class ProfileActivity extends BaseFragmentActivity { < nl > } < nl > < nl > if ( savedInstanceState = = null ) { < nl > - showFragment ( ProfileFragment . create ( uid ) , false , false ) ; < nl > + ProfileFragment fragment ; < nl > + BaseActorProfileActivity profileIntent = ActorSDK . sharedActor ( ) . getDelegate ( ) . getProfileIntent ( ) ; < nl > + if ( profileIntent ! = null ) { < nl > + fragment = profileIntent . getProfileFragment ( uid ) ; < nl > + } else { < nl > + fragment = ProfileFragment . create ( uid ) ; < nl > + } < nl > + < nl > + showFragment ( fragment , false , false ) ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java < nl > index 1f1fbbf . . 544d81d 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java < nl > @ @ - 56 , 7 + 56 , 7 @ @ import static im . actor . sdk . util . ActorSDKMessenger . users ; < nl > < nl > public class ProfileFragment extends BaseFragment { < nl > < nl > - private static final String EXTRA _ UID = " uid " ; < nl > + public static final String EXTRA _ UID = " uid " ; < nl > private int baseColor ; < nl > private CoverAvatarView avatarView ; < nl > private boolean noEmails = false ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorProfileActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorProfileActivity . java < nl > new file mode 100644 < nl > index 0000000 . . 86cde4b < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorProfileActivity . java < nl > @ @ - 0 , 0 + 1 , 24 @ @ < nl > + package im . actor . sdk . controllers . fragment . settings ; < nl > + < nl > + import android . content . Intent ; < nl > + < nl > + import im . actor . sdk . controllers . fragment . profile . ProfileFragment ; < nl > + import im . actor . sdk . intents . ActorIntentFragmentActivity ; < nl > + < nl > + public abstract class BaseActorProfileActivity extends ActorIntentFragmentActivity { < nl > + public BaseActorProfileActivity ( Intent intent ) { < nl > + super ( intent ) ; < nl > + } < nl > + < nl > + public BaseActorProfileActivity ( Intent intent , BaseActorSettingsFragment fragment ) { < nl > + super ( intent , fragment ) ; < nl > + } < nl > + < nl > + public BaseActorProfileActivity ( ) { < nl > + super ( ) ; < nl > + } < nl > + < nl > + public ProfileFragment getProfileFragment ( int uid ) { < nl > + return ProfileFragment . create ( uid ) ; < nl > + } < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseGroupInfoActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseGroupInfoActivity . java < nl > new file mode 100644 < nl > index 0000000 . . a74cbbd < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseGroupInfoActivity . java < nl > @ @ - 0 , 0 + 1 , 25 @ @ < nl > + package im . actor . sdk . controllers . fragment . settings ; < nl > + < nl > + import android . content . Intent ; < nl > + < nl > + import im . actor . sdk . controllers . fragment . group . GroupInfoFragment ; < nl > + import im . actor . sdk . controllers . fragment . profile . ProfileFragment ; < nl > + import im . actor . sdk . intents . ActorIntentFragmentActivity ; < nl > + < nl > + public abstract class BaseGroupInfoActivity extends ActorIntentFragmentActivity { < nl > + public BaseGroupInfoActivity ( Intent intent ) { < nl > + super ( intent ) ; < nl > + } < nl > + < nl > + public BaseGroupInfoActivity ( Intent intent , BaseActorSettingsFragment fragment ) { < nl > + super ( intent , fragment ) ; < nl > + } < nl > + < nl > + public BaseGroupInfoActivity ( ) { < nl > + super ( ) ; < nl > + } < nl > + < nl > + public GroupInfoFragment getGroupInfoFragment ( int chatId ) { < nl > + return GroupInfoFragment . create ( chatId ) ; < nl > + } < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / adapter _ document . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / adapter _ document . xml < nl > index f9b6ba9 . . b40d263 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / adapter _ document . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / adapter _ document . xml < nl > @ @ - 113 , 6 + 113 , 33 @ @ < nl > android : scaleType = " center " < nl > android : src = " @ drawable / conv _ media _ docs _ more " / > < nl > < nl > + < LinearLayout < nl > + android : visibility = " invisible " < nl > + android : layout _ marginRight = " 5dp " < nl > + android : layout _ marginBottom = " 5dp " < nl > + android : layout _ width = " wrap _ content " < nl > + android : layout _ height = " wrap _ content " < nl > + android : layout _ gravity = " bottom | right " < nl > + android : baselineAligned = " false " < nl > + android : gravity = " center _ vertical " > < nl > + < nl > + < TextView < nl > + android : visibility = " gone " < nl > + android : id = " @ + id / time " < nl > + android : layout _ width = " wrap _ content " < nl > + android : layout _ height = " wrap _ content " < nl > + android : gravity = " center _ vertical " < nl > + android : includeFontPadding = " false " < nl > + android : textSize = " 13sp " / > < nl > + < nl > + < im . actor . sdk . view . TintImageView < nl > + android : visibility = " gone " < nl > + android : id = " @ + id / stateIcon " < nl > + android : layout _ width = " 16dp " < nl > + android : layout _ height = " 9dp " < nl > + android : layout _ marginLeft = " 2dp " / > < nl > + < / LinearLayout > < nl > + < nl > < / FrameLayout > < nl > < nl > < / LinearLayout >

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java 
 index 8edc540 . . 4907cd2 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java 
 @ @ - 1 , 21 + 1 , 36 @ @ 
 package im . actor . sdk . controllers . group ; 
 
 + import android . app . AlertDialog ; 
 + import android . content . DialogInterface ; 
 + import android . content . Intent ; 
 import android . graphics . Color ; 
 import android . graphics . drawable . ColorDrawable ; 
 import android . os . Bundle ; 
 + import android . view . Menu ; 
 + import android . view . MenuInflater ; 
 + import android . view . MenuItem ; 
 
 + import im . actor . core . viewmodel . GroupVM ; 
 import im . actor . sdk . ActorSDK ; 
 + import im . actor . sdk . R ; 
 import im . actor . sdk . controllers . Intents ; 
 import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 + import im . actor . sdk . controllers . fragment . preview . ViewAvatarActivity ; 
 import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . groups ; 
 + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 + 
 public class GroupInfoActivity extends BaseFragmentActivity { 
 
 + private GroupVM groupInfo ; 
 + private int chatId ; 
 + 
 @ Override 
 protected void onCreate ( Bundle savedInstanceState ) { 
 super . onCreate ( savedInstanceState ) ; 
 - int chatId = getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ; 
 - 
 + chatId = getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ; 
 + groupInfo = groups ( ) . get ( chatId ) ; 
 getSupportActionBar ( ) . setBackgroundDrawable ( new ColorDrawable ( Color . TRANSPARENT ) ) ; 
 getSupportActionBar ( ) . setTitle ( null ) ; 
 
 @ @ - 31 , 4 + 46 , 40 @ @ public class GroupInfoActivity extends BaseFragmentActivity { 
 showFragment ( fragment , false , false ) ; 
 } 
 } 
 + 
 + @ Override 
 + public boolean onCreateOptionsMenu ( Menu menu ) { 
 + if ( groupInfo . isMember ( ) . get ( ) ) { 
 + getMenuInflater ( ) . inflate ( R . menu . group _ info , menu ) ; 
 + } 
 + return true ; 
 + } 
 + 
 + @ Override 
 + public boolean onOptionsItemSelected ( MenuItem item ) { 
 + if ( item . getItemId ( ) = = R . id . leaveGroup ) { 
 + new AlertDialog . Builder ( this ) 
 + . setMessage ( getString ( R . string . alert _ leave _ group _ message ) . replace ( " % 1 $ s " , 
 + groupInfo . getName ( ) . get ( ) ) ) 
 + . setPositiveButton ( R . string . alert _ leave _ group _ yes , new DialogInterface . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( DialogInterface dialog2 , int which ) { 
 + execute ( messenger ( ) . leaveGroup ( chatId ) ) ; 
 + } 
 + } ) 
 + . setNegativeButton ( R . string . dialog _ cancel , null ) 
 + . show ( ) 
 + . setCanceledOnTouchOutside ( true ) ; 
 + 
 + return true ; 
 + } else if ( item . getItemId ( ) = = R . id . addMember ) { 
 + startActivity ( new Intent ( this , AddMemberActivity . class ) 
 + . putExtra ( " GROUP _ ID " , chatId ) ) ; 
 + } else if ( item . getItemId ( ) = = R . id . editTitle ) { 
 + startActivity ( Intents . editGroupTitle ( chatId , this ) ) ; 
 + } else if ( item . getItemId ( ) = = R . id . changePhoto ) { 
 + startActivity ( ViewAvatarActivity . viewGroupAvatar ( chatId , this ) ) ; 
 + } 
 + return super . onOptionsItemSelected ( item ) ; 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 index 0de3693 . . 2e0ef98 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 @ @ - 423 , 42 + 423 , 6 @ @ public class GroupInfoFragment extends BaseFragment { 
 } 
 
 @ Override 
 - public void onCreateOptionsMenu ( Menu menu , MenuInflater menuInflater ) { 
 - super . onCreateOptionsMenu ( menu , menuInflater ) ; 
 - if ( groupInfo . isMember ( ) . get ( ) ) { 
 - menuInflater . inflate ( R . menu . group _ info , menu ) ; 
 - } 
 - } 
 - 
 - @ Override 
 - public boolean onOptionsItemSelected ( MenuItem item ) { 
 - if ( item . getItemId ( ) = = R . id . leaveGroup ) { 
 - new AlertDialog . Builder ( getActivity ( ) ) 
 - . setMessage ( getString ( R . string . alert _ leave _ group _ message ) . replace ( " % 1 $ s " , 
 - groupInfo . getName ( ) . get ( ) ) ) 
 - . setPositiveButton ( R . string . alert _ leave _ group _ yes , new DialogInterface . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( DialogInterface dialog2 , int which ) { 
 - execute ( messenger ( ) . leaveGroup ( chatId ) ) ; 
 - } 
 - } ) 
 - . setNegativeButton ( R . string . dialog _ cancel , null ) 
 - . show ( ) 
 - . setCanceledOnTouchOutside ( true ) ; 
 - 
 - return true ; 
 - } else if ( item . getItemId ( ) = = R . id . addMember ) { 
 - startActivity ( new Intent ( getActivity ( ) , AddMemberActivity . class ) 
 - . putExtra ( " GROUP _ ID " , chatId ) ) ; 
 - } else if ( item . getItemId ( ) = = R . id . editTitle ) { 
 - startActivity ( Intents . editGroupTitle ( chatId , getActivity ( ) ) ) ; 
 - } else if ( item . getItemId ( ) = = R . id . changePhoto ) { 
 - startActivity ( ViewAvatarActivity . viewGroupAvatar ( chatId , getActivity ( ) ) ) ; 
 - } 
 - return super . onOptionsItemSelected ( item ) ; 
 - } 
 - 
 - @ Override 
 public void onActivityResult ( int requestCode , int resultCode , Intent data ) { 
 if ( resultCode = = Activity . RESULT _ OK & & requestCode = = 0 & & data ! = null & & data . hasExtra ( Intents . EXTRA _ UID ) ) { 
 final UserVM userModel = users ( ) . get ( data . getIntExtra ( Intents . EXTRA _ UID , 0 ) ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 index 205eece . . 6e58250 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 @ @ - 599 , 7 + 599 , 7 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 } 
 } ) ; 
 
 - updateActionBar ( scrollView . getScrollY ( ) ) ; 
 + / / updateActionBar ( scrollView . getScrollY ( ) ) ; 
 
 return view ; 
 } 
 @ @ - 724 , 24 + 724 , 6 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 } 
 } 
 
 - @ Override 
 - public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { 
 - super . onCreateOptionsMenu ( menu , inflater ) ; 
 - inflater . inflate ( R . menu . my _ profile , menu ) ; 
 - } 
 - 
 - @ Override 
 - public boolean onOptionsItemSelected ( MenuItem item ) { 
 - if ( item . getItemId ( ) = = R . id . editProfile ) { 
 - startActivity ( Intents . editMyName ( getActivity ( ) ) ) ; 
 - return true ; 
 - } else if ( item . getItemId ( ) = = R . id . changePhoto ) { 
 - startActivity ( ViewAvatarActivity . viewAvatar ( myUid ( ) , getActivity ( ) ) ) ; 
 - return true ; 
 - } 
 - 
 - return super . onOptionsItemSelected ( item ) ; 
 - } 
 
 @ Override 
 public View getBeforeNickSettingsView ( ) { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java 
 index ab18972 . . a61a53f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java 
 @ @ - 3 , 11 + 3 , 18 @ @ package im . actor . sdk . controllers . settings ; 
 import android . graphics . Color ; 
 import android . graphics . drawable . ColorDrawable ; 
 import android . os . Bundle ; 
 + import android . view . Menu ; 
 + import android . view . MenuItem ; 
 
 import im . actor . sdk . ActorSDK ; 
 + import im . actor . sdk . R ; 
 + import im . actor . sdk . controllers . Intents ; 
 import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 + import im . actor . sdk . controllers . fragment . preview . ViewAvatarActivity ; 
 import im . actor . sdk . intents . ActorIntent ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . myUid ; 
 + 
 public class MyProfileActivity extends BaseFragmentActivity { 
 @ Override 
 protected void onCreate ( Bundle savedInstanceState ) { 
 @ @ - 33 , 4 + 40 , 23 @ @ public class MyProfileActivity extends BaseFragmentActivity { 
 showFragment ( fragment , false , false ) ; 
 } 
 } 
 + 
 + @ Override 
 + public boolean onCreateOptionsMenu ( Menu menu ) { 
 + getMenuInflater ( ) . inflate ( R . menu . my _ profile , menu ) ; 
 + return super . onCreateOptionsMenu ( menu ) ; 
 + } 
 + 
 + @ Override 
 + public boolean onOptionsItemSelected ( MenuItem item ) { 
 + if ( item . getItemId ( ) = = R . id . editProfile ) { 
 + startActivity ( Intents . editMyName ( this ) ) ; 
 + return true ; 
 + } else if ( item . getItemId ( ) = = R . id . changePhoto ) { 
 + startActivity ( ViewAvatarActivity . viewAvatar ( myUid ( ) , this ) ) ; 
 + return true ; 
 + } 
 + 
 + return super . onOptionsItemSelected ( item ) ; 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml 
 index 95264da . . 3a58f6a 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml 
 @ @ - 18 , 6 + 18 , 7 @ @ 
 < LinearLayout 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " wrap _ content " 
 + android : focusableInTouchMode = " true " 
 android : orientation = " vertical " > 
 
 < FrameLayout

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 index d0a89e7 . . d7c4b62 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 @ @ - 1 , 6 + 1 , 8 @ @ 
 package im . actor ; 
 
 import android . graphics . Color ; 
 + import android . os . Bundle ; 
 + import android . view . LayoutInflater ; 
 import android . view . View ; 
 import android . view . ViewGroup ; 
 import android . widget . CheckBox ; 
 @ @ - 17 , 10 + 19 , 14 @ @ import im . actor . sdk . ActorStyle ; 
 import im . actor . sdk . BaseActorSDKDelegate ; 
 import im . actor . sdk . controllers . conversation . messages . BaseJsonHolder ; 
 import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; 
 + import im . actor . sdk . controllers . fragment . group . GroupInfoFragment ; 
 + import im . actor . sdk . controllers . fragment . profile . ProfileFragment ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsField ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; 
 import im . actor . sdk . controllers . fragment . settings . BaseActorSettingsActivity ; 
 import im . actor . sdk . controllers . fragment . settings . BaseActorSettingsFragment ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseGroupInfoActivity ; 
 import im . actor . sdk . intents . ActorIntentFragmentActivity ; 
 import im . actor . tc . TCMessageHolder ; 
 
 @ @ - 82 , 6 + 88 , 26 @ @ public class Application extends ActorSDKApplication { 
 } 
 
 @ Override 
 + public BaseActorProfileActivity getProfileIntent ( ) { 
 + return new BaseActorProfileActivity ( ) { 
 + @ Override 
 + public ProfileFragment getProfileFragment ( int uid ) { 
 + return ProfileFragmentEx . create ( uid ) ; 
 + } 
 + } ; 
 + } 
 + 
 + @ Override 
 + public BaseGroupInfoActivity getGroupInfoIntent ( ) { 
 + return new BaseGroupInfoActivity ( ) { 
 + @ Override 
 + public GroupInfoFragment getGroupInfoFragment ( int chatId ) { 
 + return GroupInfoEx . create ( chatId ) ; 
 + } 
 + } ; 
 + } 
 + 
 + @ Override 
 public ActorIntentFragmentActivity getSettingsIntent ( ) { 
 return new BaseActorSettingsActivity ( ) { 
 @ Override 
 @ @ - 164 , 4 + 190 , 44 @ @ public class Application extends ActorSDKApplication { 
 } ; 
 } 
 } 
 + 
 + public static class ProfileFragmentEx extends ProfileFragment { 
 + 
 + public static ProfileFragment create ( int uid ) { 
 + Bundle bundle = new Bundle ( ) ; 
 + bundle . putInt ( EXTRA _ UID , uid ) ; 
 + ProfileFragment res = new ProfileFragmentEx ( ) ; 
 + res . setArguments ( bundle ) ; 
 + return res ; 
 + } 
 + 
 + 
 + @ Override 
 + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 + View view = super . onCreateView ( inflater , container , savedInstanceState ) ; 
 + view . findViewById ( R . id . docsContainer ) . setVisibility ( View . VISIBLE ) ; 
 + view . findViewById ( R . id . sharedContainer ) . setVisibility ( View . VISIBLE ) ; 
 + return view ; 
 + } 
 + } 
 + 
 + public static class GroupInfoEx extends GroupInfoFragment { 
 + 
 + public static GroupInfoFragment create ( int chatId ) { 
 + Bundle bundle = new Bundle ( ) ; 
 + bundle . putInt ( EXTRA _ CHAT _ ID , chatId ) ; 
 + GroupInfoFragment res = new GroupInfoEx ( ) ; 
 + res . setArguments ( bundle ) ; 
 + return res ; 
 + } 
 + 
 + 
 + @ Override 
 + public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 + View view = super . onCreateView ( inflater , container , savedInstanceState ) ; 
 + header . findViewById ( R . id . docsContainer ) . setVisibility ( View . VISIBLE ) ; 
 + header . findViewById ( R . id . sharedContainer ) . setVisibility ( View . VISIBLE ) ; 
 + return view ; 
 + } 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 index 3e881dc . . 658b26d 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 @ @ - 13 , 6 + 13 , 8 @ @ import im . actor . sdk . controllers . conversation . messages . MessageHolder ; 
 import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; 
 import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseGroupInfoActivity ; 
 import im . actor . sdk . intents . ActorIntent ; 
 import im . actor . sdk . intents . ActorIntentFragmentActivity ; 
 
 @ @ - 50 , 6 + 52 , 20 @ @ public interface ActorSDKDelegate { 
 ActorIntentFragmentActivity getSettingsIntent ( ) ; 
 
 / * * 
 + * If not null returned , overrides users profile activity intent 
 + * 
 + * @ return Actor Intent 
 + * / 
 + BaseActorProfileActivity getProfileIntent ( ) ; 
 + 
 + / * * 
 + * If not null returned , overrides group info activity intent 
 + * 
 + * @ return Actor Intent 
 + * / 
 + BaseGroupInfoActivity getGroupInfoIntent ( ) ; 
 + 
 + / * * 
 * If not null returned , overrides settings activity intent 
 * 
 * @ return Actor Intent 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 index e6094fc . . 3274a45 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 @ @ - 14 , 6 + 14 , 8 @ @ import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; 
 import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; 
 import im . actor . sdk . controllers . fragment . auth . SignPhoneFragment ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseGroupInfoActivity ; 
 import im . actor . sdk . intents . ActorIntent ; 
 import im . actor . sdk . intents . ActorIntentFragmentActivity ; 
 
 @ @ - 75 , 6 + 77 , 16 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { 
 } 
 
 @ Override 
 + public BaseActorProfileActivity getProfileIntent ( ) { 
 + return null ; 
 + } 
 + 
 + @ Override 
 + public BaseGroupInfoActivity getGroupInfoIntent ( ) { 
 + return null ; 
 + } 
 + 
 + @ Override 
 public ActorIntentFragmentActivity getChatSettingsIntent ( ) { 
 return null ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoActivity . java 
 index b757104 . . 2f86386 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoActivity . java 
 @ @ - 4 , 8 + 4 , 12 @ @ import android . graphics . Color ; 
 import android . graphics . drawable . ColorDrawable ; 
 import android . os . Bundle ; 
 
 + import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . controllers . Intents ; 
 import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 + import im . actor . sdk . controllers . fragment . profile . ProfileFragment ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseGroupInfoActivity ; 
 
 public class GroupInfoActivity extends BaseFragmentActivity { 
 
 @ @ - 18 , 7 + 22 , 15 @ @ public class GroupInfoActivity extends BaseFragmentActivity { 
 getSupportActionBar ( ) . setTitle ( null ) ; 
 
 if ( savedInstanceState = = null ) { 
 - showFragment ( GroupInfoFragment . create ( chatId ) , false , false ) ; 
 + GroupInfoFragment fragment ; 
 + BaseGroupInfoActivity profileIntent = ActorSDK . sharedActor ( ) . getDelegate ( ) . getGroupInfoIntent ( ) ; 
 + if ( profileIntent ! = null ) { 
 + fragment = profileIntent . getGroupInfoFragment ( chatId ) ; 
 + } else { 
 + fragment = GroupInfoFragment . create ( chatId ) ; 
 + } 
 + 
 + showFragment ( fragment , false , false ) ; 
 } 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoFragment . java 
 index 85047be . . 29533cc 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / group / GroupInfoFragment . java 
 @ @ - 59 , 7 + 59 , 7 @ @ import static im . actor . sdk . util . ActorSDKMessenger . users ; 
 
 public class GroupInfoFragment extends BaseFragment { 
 
 - private static final String EXTRA _ CHAT _ ID = " chat _ id " ; 
 + protected static final String EXTRA _ CHAT _ ID = " chat _ id " ; 
 private String [ ] theme ; 
 private String [ ] about ; 
 private int chatId ; 
 @ @ - 68 , 6 + 68 , 7 @ @ public class GroupInfoFragment extends BaseFragment { 
 private MembersAdapter groupUserAdapter ; 
 private CoverAvatarView avatarView ; 
 private View notMemberView ; 
 + protected View header ; 
 
 public static GroupInfoFragment create ( int chatId ) { 
 Bundle args = new Bundle ( ) ; 
 @ @ - 100 , 7 + 101 , 7 @ @ public class GroupInfoFragment extends BaseFragment { 
 listView = ( ListView ) res . findViewById ( R . id . groupList ) ; 
 listView . setBackgroundColor ( style . getMainBackgroundColor ( ) ) ; 
 
 - final View header = inflater . inflate ( R . layout . fragment _ group _ header , listView , false ) ; 
 + header = inflater . inflate ( R . layout . fragment _ group _ header , listView , false ) ; 
 header . setBackgroundColor ( style . getMainBackgroundColor ( ) ) ; 
 
 / / Avatar 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileActivity . java 
 index df963d4 . . db6d587 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileActivity . java 
 @ @ - 9 , 12 + 9 , 16 @ @ import android . view . MenuItem ; 
 import android . widget . Toast ; 
 
 import im . actor . core . viewmodel . UserVM ; 
 + import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . R ; 
 import im . actor . sdk . controllers . Intents ; 
 import im . actor . sdk . controllers . activity . ActorMainActivity ; 
 import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 import im . actor . runtime . mvvm . ValueChangedListener ; 
 import im . actor . runtime . mvvm . Value ; 
 + import im . actor . sdk . controllers . fragment . settings . ActorSettingsFragment ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseActorProfileActivity ; 
 + import im . actor . sdk . controllers . fragment . settings . BaseActorSettingsFragment ; 
 
 import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 import static im . actor . sdk . util . ActorSDKMessenger . users ; 
 @ @ - 46 , 7 + 50 , 15 @ @ public class ProfileActivity extends BaseFragmentActivity { 
 } 
 
 if ( savedInstanceState = = null ) { 
 - showFragment ( ProfileFragment . create ( uid ) , false , false ) ; 
 + ProfileFragment fragment ; 
 + BaseActorProfileActivity profileIntent = ActorSDK . sharedActor ( ) . getDelegate ( ) . getProfileIntent ( ) ; 
 + if ( profileIntent ! = null ) { 
 + fragment = profileIntent . getProfileFragment ( uid ) ; 
 + } else { 
 + fragment = ProfileFragment . create ( uid ) ; 
 + } 
 + 
 + showFragment ( fragment , false , false ) ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java 
 index 1f1fbbf . . 544d81d 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / profile / ProfileFragment . java 
 @ @ - 56 , 7 + 56 , 7 @ @ import static im . actor . sdk . util . ActorSDKMessenger . users ; 
 
 public class ProfileFragment extends BaseFragment { 
 
 - private static final String EXTRA _ UID = " uid " ; 
 + public static final String EXTRA _ UID = " uid " ; 
 private int baseColor ; 
 private CoverAvatarView avatarView ; 
 private boolean noEmails = false ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorProfileActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorProfileActivity . java 
 new file mode 100644 
 index 0000000 . . 86cde4b 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseActorProfileActivity . java 
 @ @ - 0 , 0 + 1 , 24 @ @ 
 + package im . actor . sdk . controllers . fragment . settings ; 
 + 
 + import android . content . Intent ; 
 + 
 + import im . actor . sdk . controllers . fragment . profile . ProfileFragment ; 
 + import im . actor . sdk . intents . ActorIntentFragmentActivity ; 
 + 
 + public abstract class BaseActorProfileActivity extends ActorIntentFragmentActivity { 
 + public BaseActorProfileActivity ( Intent intent ) { 
 + super ( intent ) ; 
 + } 
 + 
 + public BaseActorProfileActivity ( Intent intent , BaseActorSettingsFragment fragment ) { 
 + super ( intent , fragment ) ; 
 + } 
 + 
 + public BaseActorProfileActivity ( ) { 
 + super ( ) ; 
 + } 
 + 
 + public ProfileFragment getProfileFragment ( int uid ) { 
 + return ProfileFragment . create ( uid ) ; 
 + } 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseGroupInfoActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseGroupInfoActivity . java 
 new file mode 100644 
 index 0000000 . . a74cbbd 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / settings / BaseGroupInfoActivity . java 
 @ @ - 0 , 0 + 1 , 25 @ @ 
 + package im . actor . sdk . controllers . fragment . settings ; 
 + 
 + import android . content . Intent ; 
 + 
 + import im . actor . sdk . controllers . fragment . group . GroupInfoFragment ; 
 + import im . actor . sdk . controllers . fragment . profile . ProfileFragment ; 
 + import im . actor . sdk . intents . ActorIntentFragmentActivity ; 
 + 
 + public abstract class BaseGroupInfoActivity extends ActorIntentFragmentActivity { 
 + public BaseGroupInfoActivity ( Intent intent ) { 
 + super ( intent ) ; 
 + } 
 + 
 + public BaseGroupInfoActivity ( Intent intent , BaseActorSettingsFragment fragment ) { 
 + super ( intent , fragment ) ; 
 + } 
 + 
 + public BaseGroupInfoActivity ( ) { 
 + super ( ) ; 
 + } 
 + 
 + public GroupInfoFragment getGroupInfoFragment ( int chatId ) { 
 + return GroupInfoFragment . create ( chatId ) ; 
 + } 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / adapter _ document . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / adapter _ document . xml 
 index f9b6ba9 . . b40d263 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / adapter _ document . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / adapter _ document . xml 
 @ @ - 113 , 6 + 113 , 33 @ @ 
 android : scaleType = " center " 
 android : src = " @ drawable / conv _ media _ docs _ more " / > 
 
 + < LinearLayout 
 + android : visibility = " invisible " 
 + android : layout _ marginRight = " 5dp " 
 + android : layout _ marginBottom = " 5dp " 
 + android : layout _ width = " wrap _ content " 
 + android : layout _ height = " wrap _ content " 
 + android : layout _ gravity = " bottom | right " 
 + android : baselineAligned = " false " 
 + android : gravity = " center _ vertical " > 
 + 
 + < TextView 
 + android : visibility = " gone " 
 + android : id = " @ + id / time " 
 + android : layout _ width = " wrap _ content " 
 + android : layout _ height = " wrap _ content " 
 + android : gravity = " center _ vertical " 
 + android : includeFontPadding = " false " 
 + android : textSize = " 13sp " / > 
 + 
 + < im . actor . sdk . view . TintImageView 
 + android : visibility = " gone " 
 + android : id = " @ + id / stateIcon " 
 + android : layout _ width = " 16dp " 
 + android : layout _ height = " 9dp " 
 + android : layout _ marginLeft = " 2dp " / > 
 + < / LinearLayout > 
 + 
 < / FrameLayout > 
 
 < / LinearLayout >
