BLEU SCORE: 0.17542198478193427

TEST MSG: fix ( server : cqrs ) : flush commitsNum on snapshot
GENERATED MSG: fix ( server ) : fix ProcessorState

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala < nl > index 2d2b249 . . 65f8781 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala < nl > @ @ - 41 , 6 + 41 , 7 @ @ trait IncrementalSnapshots [ S < : ProcessorState [ S ] ] extends ProcessorStateControl < nl > _ commitsNum + = 1 < nl > if ( _ commitsNum = = SnapshotCommitsThreshold ) { < nl > log . debug ( " Saving snapshot due to threshold hit " ) < nl > + _ commitsNum = 0 < nl > saveSnapshot ( state . snapshot ) < nl > } < nl > }
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala < nl > index 311a0a1 . . 3f61fcb 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala < nl > @ @ - 20 , 6 + 20 , 8 @ @ import scala . util . { Failure , Success } < nl > case object EntityNotFound extends RuntimeException with NoStackTrace < nl > case object StopOffice < nl > < nl > + trait ProcessorState < nl > + < nl > trait Processor [ State , Event < : AnyRef ] extends PersistentActor with ActorFutures { < nl > < nl > case class UnstashAndWork ( evt : Event , state : State )

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala 
 index 2d2b249 . . 65f8781 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / cqrs / Processor . scala 
 @ @ - 41 , 6 + 41 , 7 @ @ trait IncrementalSnapshots [ S < : ProcessorState [ S ] ] extends ProcessorStateControl 
 _ commitsNum + = 1 
 if ( _ commitsNum = = SnapshotCommitsThreshold ) { 
 log . debug ( " Saving snapshot due to threshold hit " ) 
 + _ commitsNum = 0 
 saveSnapshot ( state . snapshot ) 
 } 
 }

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala b / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala 
 index 311a0a1 . . 3f61fcb 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / office / Processor . scala 
 @ @ - 20 , 6 + 20 , 8 @ @ import scala . util . { Failure , Success } 
 case object EntityNotFound extends RuntimeException with NoStackTrace 
 case object StopOffice 
 
 + trait ProcessorState 
 + 
 trait Processor [ State , Event < : AnyRef ] extends PersistentActor with ActorFutures { 
 
 case class UnstashAndWork ( evt : Event , state : State )
