BLEU SCORE: 0.1777835117834348

TEST MSG: feat + fix ( iOS ) : Welcome screen + some new SDK Api
GENERATED MSG: wip ( iOS ) : Location picker

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorApp / AppDelegate . swift b / actor - sdk / sdk - core - ios / ActorApp / AppDelegate . swift < nl > index 56b461b . . bad7333 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorApp / AppDelegate . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorApp / AppDelegate . swift < nl > @ @ - 27 , 6 + 27 , 7 @ @ import ActorSDK < nl > < nl > / / Creating Actor < nl > ActorSDK . sharedActor ( ) . createActor ( ) < nl > + < nl > } < nl > < nl > public override func application ( application : UIApplication , didFinishLaunchingWithOptions launchOptions : [ NSObject : AnyObject ] ? ) - > Bool { < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > index 0081741 . . 5221704 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > @ @ - 211 , 6 + 211 , 7 @ @ < nl > 	 	 153F6B591C2B03E300C0B960 / * AAGarbageView . m in Sources * / = { isa = PBXBuildFile ; fileRef = 153F6B551C2B03E300C0B960 / * AAGarbageView . m * / ; } ; < nl > 	 	 153F6B5B1C2B109400C0B960 / * AABubbleVoiceCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 153F6B5A1C2B109400C0B960 / * AABubbleVoiceCell . swift * / ; } ; < nl > 	 	 153F6B5D1C2B3AC500C0B960 / * AABubbleStickerCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 153F6B5C1C2B3AC500C0B960 / * AABubbleStickerCell . swift * / ; } ; < nl > + 	 	 153F6B611C2BF8EC00C0B960 / * AAAuthWelcomeController . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 153F6B601C2BF8EC00C0B960 / * AAAuthWelcomeController . swift * / ; } ; < nl > 	 	 15D35F161C20185500E3717A / * diag _ range . c in Sources * / = { isa = PBXBuildFile ; fileRef = 15D35F0C1C20185500E3717A / * diag _ range . c * / ; } ; < nl > 	 	 15D35F171C20185500E3717A / * diag _ range . h in Headers * / = { isa = PBXBuildFile ; fileRef = 15D35F0D1C20185500E3717A / * diag _ range . h * / ; } ; < nl > 	 	 15D35F181C20185500E3717A / * opus _ header . c in Sources * / = { isa = PBXBuildFile ; fileRef = 15D35F0E1C20185500E3717A / * opus _ header . c * / ; } ; < nl > @ @ - 480 , 6 + 481 , 7 @ @ < nl > 	 	 153F6B551C2B03E300C0B960 / * AAGarbageView . m * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . objc ; path = AAGarbageView . m ; sourceTree = " < group > " ; } ; < nl > 	 	 153F6B5A1C2B109400C0B960 / * AABubbleVoiceCell . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AABubbleVoiceCell . swift ; sourceTree = " < group > " ; } ; < nl > 	 	 153F6B5C1C2B3AC500C0B960 / * AABubbleStickerCell . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AABubbleStickerCell . swift ; sourceTree = " < group > " ; } ; < nl > + 	 	 153F6B601C2BF8EC00C0B960 / * AAAuthWelcomeController . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; name = AAAuthWelcomeController . swift ; path = . . / AAAuthWelcomeController . swift ; sourceTree = " < group > " ; } ; < nl > 	 	 15D35F0C1C20185500E3717A / * diag _ range . c * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . c ; path = diag _ range . c ; sourceTree = " < group > " ; } ; < nl > 	 	 15D35F0D1C20185500E3717A / * diag _ range . h * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . h ; path = diag _ range . h ; sourceTree = " < group > " ; } ; < nl > 	 	 15D35F0E1C20185500E3717A / * opus _ header . c * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . c ; path = opus _ header . c ; sourceTree = " < group > " ; } ; < nl > @ @ - 795 , 6 + 797 , 7 @ @ < nl > 	 	 066A52601BC50E6B000E606E / * Auth * / = { < nl > 	 	 	 isa = PBXGroup ; < nl > 	 	 	 children = ( < nl > + 	 	 	 	 153F6B601C2BF8EC00C0B960 / * AAAuthWelcomeController . swift * / , < nl > 	 	 	 	 066A526E1BC51007000E606E / * Views * / , < nl > 	 	 	 	 066A526B1BC50E83000E606E / * Cells * / , < nl > 	 	 	 	 066A52611BC50E7B000E606E / * AAAuthCountriesViewController . swift * / , < nl > @ @ - 1536 , 6 + 1539 , 7 @ @ < nl > 	 	 	 	 066A518D1BC4C383000E606E / * CocoaStorageRuntime . swift in Sources * / , < nl > 	 	 	 	 066A52F01BC52B02000E606E / * AASettingsViewController . swift in Sources * / , < nl > 	 	 	 	 066A52741BC5101A000E606E / * ABPhoneField . m in Sources * / , < nl > + 	 	 	 	 153F6B611C2BF8EC00C0B960 / * AAAuthWelcomeController . swift in Sources * / , < nl > 	 	 	 	 152AA8A91C2989270030DEEE / * SLKTextInputbar . m in Sources * / , < nl > 	 	 	 	 066A53071BC53183000E606E / * AARecentViewController . swift in Sources * / , < nl > 	 	 	 	 06230F411BC95BD200A4807B / * RMPhoneFormat . m in Sources * / , < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Base . lproj / Localizable . strings b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Base . lproj / Localizable . strings < nl > index bc80e3a . . d9285ea 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Base . lproj / Localizable . strings < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Base . lproj / Localizable . strings < nl > @ @ - 2 , 6 + 2 , 16 @ @ < nl > / / Copyright ( C ) 2014 - 2015 Actor LLC . < https : / / actor . im > < nl > / / < nl > < nl > + < nl > + / * < nl > + * Auth Screen < nl > + * / < nl > + < nl > + " AuthMoreInfo " = " Free , fast and secure messaging . " ; < nl > + < nl > + " AuthStarButton " = " Start Messaging " ; < nl > + < nl > + < nl > / * < nl > * Main Screen < nl > * / < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / Contents . json < nl > new file mode 100644 < nl > index 0000000 . . da4a164 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / Contents . json < nl > @ @ - 0 , 0 + 1 , 6 @ @ < nl > + { < nl > + " info " : { < nl > + " version " : 1 , < nl > + " author " : " xcode " < nl > + } < nl > + } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / Contents . json < nl > new file mode 100644 < nl > index 0000000 . . 0e363c0 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / Contents . json < nl > @ @ - 0 , 0 + 1 , 22 @ @ < nl > + { < nl > + " images " : [ < nl > + { < nl > + " idiom " : " universal " , < nl > + " scale " : " 1x " < nl > + } , < nl > + { < nl > + " idiom " : " universal " , < nl > + " filename " : " OnboardNext @ 2x . png " , < nl > + " scale " : " 2x " < nl > + } , < nl > + { < nl > + " idiom " : " universal " , < nl > + " filename " : " OnboardNext @ 3x . png " , < nl > + " scale " : " 3x " < nl > + } < nl > + ] , < nl > + " info " : { < nl > + " version " : 1 , < nl > + " author " : " xcode " < nl > + } < nl > + } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 2x . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 2x . png < nl > new file mode 100644 < nl > index 0000000 . . 5969bb4 < nl > Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 2x . png differ < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 3x . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 3x . png < nl > new file mode 100644 < nl > index 0000000 . . 8ca3af7 < nl > Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 3x . png differ < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Actor _ Logo . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Actor _ Logo . png < nl > new file mode 100644 < nl > index 0000000 . . 79d0e30 < nl > Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Actor _ Logo . png differ < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Contents . json < nl > new file mode 100644 < nl > index 0000000 . . de9eda1 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Contents . json < nl > @ @ - 0 , 0 + 1 , 21 @ @ < nl > + { < nl > + " images " : [ < nl > + { < nl > + " idiom " : " universal " , < nl > + " scale " : " 1x " < nl > + } , < nl > + { < nl > + " idiom " : " universal " , < nl > + " filename " : " Actor _ Logo . png " , < nl > + " scale " : " 2x " < nl > + } , < nl > + { < nl > + " idiom " : " universal " , < nl > + " scale " : " 3x " < nl > + } < nl > + ] , < nl > + " info " : { < nl > + " version " : 1 , < nl > + " author " : " xcode " < nl > + } < nl > + } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / es . lproj / Localizable . strings b / actor - sdk / sdk - core - ios / ActorSDK / Resources / es . lproj / Localizable . strings < nl > index 3052a37 . . 962726d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Resources / es . lproj / Localizable . strings < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / es . lproj / Localizable . strings < nl > @ @ - 2 , 6 + 2 , 11 @ @ < nl > / / Copyright ( C ) 2014 - 2015 Actor LLC . < https : / / actor . im > < nl > / / < nl > < nl > + " AuthMoreInfo " = " Mensajer Ã­ a gratis , segura y veloz . " ; < nl > + < nl > + " AuthStarButton " = " Empieza a chatear " ; < nl > + < nl > + / / / < nl > < nl > " TabMessages " = " Mensajes " ; < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift < nl > index a8ddab8 . . 48928d3 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift < nl > @ @ - 63 , 6 + 63 , 9 @ @ public class ActorSDK { < nl > / / / App name in loc . strings < nl > public var appNameInLocStrings : String = " Actor " < nl > < nl > + / / / Use background on welcome screen < nl > + public var useBackgroundOnWelcomeScreen : Bool ? = false < nl > + < nl > / / / Support email < nl > public var supportEmail : String ? = nil < nl > < nl > @ @ - 328 , 7 + 331 , 8 @ @ public class ActorSDK { < nl > } else { < nl > var controller : UIViewController ! = delegate . actorControllerForAuthStart ( ) < nl > if controller = = nil { < nl > - controller = AAAuthNavigationController ( rootViewController : AAAuthPhoneViewController ( ) ) < nl > + / / controller = AAAuthNavigationController ( rootViewController : AAAuthPhoneViewController ( ) ) < nl > + controller = AAAuthNavigationController ( rootViewController : AAWelcomeController ( ) ) < nl > } < nl > window . rootViewController = controller ! < nl > } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > index ef904d0 . . bb57521 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > @ @ - 12 , 6 + 12 , 8 @ @ public class ActorStyle { < nl > < nl > / / / Is Application have dark theme . Default is false . < nl > public var isDarkApp = false < nl > + / / / Tint Color . Star button < nl > + public var vcStarButton = UIColor ( red : 75 / 255 . 0 , green : 110 / 255 . 0 , blue : 152 / 255 . 0 , alpha : 1 ) < nl > / / / Tint Color . Used for " Actions " . Default is sytem blue . < nl > public var vcTintColor = UIColor ( rgb : 0x5085CB ) < nl > / / / Color of desctructive actions . Default is red < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / AAAuthWelcomeController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / AAAuthWelcomeController . swift < nl > new file mode 100644 < nl > index 0000000 . . 279e972 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / AAAuthWelcomeController . swift < nl > @ @ - 0 , 0 + 1 , 113 @ @ < nl > + / / < nl > + / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > < nl > + / / < nl > + < nl > + import UIKit < nl > + < nl > + class AAWelcomeController : UIViewController { < nl > + < nl > + var backgroundImage : UIImageView ! < nl > + < nl > + var logoView : UIImageView ! < nl > + var appNameLabel : UILabel ! < nl > + var someInfoLabel : UILabel ! < nl > + < nl > + var doneButton : UIButton ! < nl > + < nl > + < nl > + override func loadView ( ) { < nl > + super . loadView ( ) < nl > + < nl > + self . backgroundImage = UIImageView ( ) < nl > + < nl > + self . logoView = UIImageView ( ) < nl > + self . appNameLabel = UILabel ( ) < nl > + self . someInfoLabel = UILabel ( ) < nl > + < nl > + self . doneButton = UIButton ( type : UIButtonType . System ) < nl > + < nl > + / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / < nl > + < nl > + let screenWidth = UIScreen . mainScreen ( ) . bounds . size . width < nl > + let screenHeight = UIScreen . mainScreen ( ) . bounds . size . height < nl > + < nl > + self . backgroundImage . frame = CGRectMake ( 0 , 0 , screenWidth , screenHeight ) < nl > + self . backgroundImage . backgroundColor = UIColor . whiteColor ( ) < nl > + < nl > + if ActorSDK . sharedActor ( ) . useBackgroundOnWelcomeScreen = = true { < nl > + < nl > + self . backgroundImage . image = UIImage . bundled ( " bg _ 1 " ) < nl > + < nl > + } < nl > + < nl > + self . logoView . frame = CGRectMake ( screenWidth / 2 - screenWidth / 4 , 80 , screenWidth / 2 , screenWidth / 2 ) < nl > + < nl > + self . logoView . image = UIImage . bundled ( " main _ logo " ) < nl > + < nl > + / / / < nl > + < nl > + self . appNameLabel . text = ActorSDK . sharedActor ( ) . appNameInLocStrings < nl > + self . appNameLabel . textAlignment = . Center < nl > + self . appNameLabel . backgroundColor = UIColor . clearColor ( ) < nl > + self . appNameLabel . font = UIFont ( name : " HelveticaNeue - Light " , size : 35 ) < nl > + < nl > + self . appNameLabel . frame = CGRectMake ( screenWidth / 2 - screenWidth / 4 , self . logoView . frame . maxY + 10 , screenWidth / 2 , 40 ) < nl > + < nl > + / / / < nl > + < nl > + self . someInfoLabel . text = AALocalized ( " AuthMoreInfo " ) < nl > + self . someInfoLabel . textAlignment = . Center < nl > + self . someInfoLabel . backgroundColor = UIColor . clearColor ( ) < nl > + self . someInfoLabel . font = UIFont ( name : " HelveticaNeue - Light " , size : 17 ) < nl > + self . someInfoLabel . numberOfLines = 0 < nl > + < nl > + self . someInfoLabel . frame = CGRectMake ( screenWidth / 2 - screenWidth / 4 - 25 , self . appNameLabel . frame . maxY + 5 , screenWidth / 2 + 50 , 60 ) < nl > + < nl > + / / / < nl > + < nl > + self . doneButton . setTitle ( AALocalized ( " AuthStarButton " ) , forState : UIControlState . Normal ) < nl > + self . doneButton . setTitleColor ( ActorSDK . sharedActor ( ) . style . vcStarButton , forState : UIControlState . Normal ) < nl > + self . doneButton . tintColor = ActorSDK . sharedActor ( ) . style . vcStarButton < nl > + self . doneButton . frame = CGRectMake ( screenWidth / 2 - screenWidth / 4 - 20 , screenHeight - 50 , screenWidth / 2 , 30 ) < nl > + < nl > + self . doneButton . titleLabel ! . font = UIFont ( name : " HelveticaNeue - Light " , size : 22 ) < nl > + < nl > + self . doneButton . setImage ( UIImage . bundled ( " OnboardNext " ) , forState : UIControlState . Normal ) < nl > + self . doneButton . imageEdgeInsets = UIEdgeInsetsMake ( 5 , screenWidth / 2 + 20 , 0 , 0 ) < nl > + < nl > + self . doneButton . addTarget ( self , action : " doneButtonAction " , forControlEvents : UIControlEvents . TouchUpInside ) < nl > + < nl > + < nl > + / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / < nl > + < nl > + self . view . addSubview ( self . backgroundImage ) < nl > + < nl > + self . view . addSubview ( self . logoView ) < nl > + self . view . addSubview ( self . appNameLabel ) < nl > + self . view . addSubview ( self . someInfoLabel ) < nl > + < nl > + self . view . addSubview ( self . doneButton ) < nl > + < nl > + < nl > + } < nl > + < nl > + override func viewDidLoad ( ) { < nl > + super . viewDidLoad ( ) < nl > + < nl > + / / Do any additional setup after loading the view . < nl > + } < nl > + < nl > + override func didReceiveMemoryWarning ( ) { < nl > + super . didReceiveMemoryWarning ( ) < nl > + / / Dispose of any resources that can be recreated . < nl > + } < nl > + < nl > + < nl > + func doneButtonAction ( ) { < nl > + < nl > + self . navigationController ? . pushViewController ( AAAuthPhoneViewController ( ) , animated : true ) < nl > + < nl > + } < nl > + < nl > + < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > index 4ab4cfe . . 90ceaca 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > @ @ - 74 , 11 + 74 , 16 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > < nl > < nl > / / right button < nl > - self . rightButton . tintColor = appStyle . chatSendColor < nl > - self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > - self . rightButton . enabled = true < nl > - self . rightButton . layoutIfNeeded ( ) < nl > + / / self . rightButton . tintColor = appStyle . chatSendColor < nl > + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > + / / self . rightButton . enabled = true < nl > + / / self . rightButton . layoutIfNeeded ( ) < nl > + < nl > + self . rightButton . setTitle ( AALocalized ( " ChatSend " ) , forState : UIControlState . Normal ) < nl > + self . rightButton . setTitleColor ( appStyle . chatSendColor , forState : UIControlState . Normal ) < nl > + self . rightButton . setTitleColor ( appStyle . chatSendDisabledColor , forState : UIControlState . Disabled ) < nl > + self . rightButton . setImage ( nil , forState : UIControlState . Normal ) < nl > < nl > / / < nl > < nl > @ @ - 349 , 23 + 354 , 23 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > < nl > } else { < nl > < nl > - if ( self . audioButton . hidden ) { < nl > - < nl > - self . rightButton . tintColor = appStyle . chatSendColor < nl > - self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > - self . rightButton . enabled = true < nl > - < nl > - } else { < nl > - < nl > - self . rightButton . tintColor = appStyle . chatSendColor < nl > - self . rightButton . setImage ( UIImage . tinted ( " aa _ keyboard " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > - self . rightButton . enabled = true < nl > - < nl > - } < nl > - < nl > - self . micOn = true < nl > + / / if ( self . audioButton . hidden ) { < nl > + / / < nl > + / / self . rightButton . tintColor = appStyle . chatSendColor < nl > + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > + / / self . rightButton . enabled = true < nl > + / / < nl > + / / } else { < nl > + / / < nl > + / / self . rightButton . tintColor = appStyle . chatSendColor < nl > + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ keyboard " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > + / / self . rightButton . enabled = true < nl > + / / < nl > + / / } < nl > + / / < nl > + / / self . micOn = true < nl > < nl > } < nl > < nl > @ @ - 387 , 32 + 392 , 32 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > < nl > } else { < nl > < nl > - if ( self . audioButton . hidden ) { < nl > - / / self . textView . resignFirstResponder ( ) < nl > - < nl > - self . rightButton . tintColor = appStyle . chatSendColor < nl > - self . rightButton . setImage ( UIImage . tinted ( " aa _ keyboard " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > - self . rightButton . enabled = true < nl > - < nl > - self . textInputbar . layoutIfNeeded ( ) < nl > - self . rightButton . layoutIfNeeded ( ) < nl > - < nl > - self . audioButton . frame = textView . frame < nl > - self . audioButton . hidden = false ; < nl > - < nl > - < nl > - } else { < nl > - self . audioButton . hidden = true ; < nl > - < nl > - self . rightButton . tintColor = appStyle . chatSendColor < nl > - self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > - self . rightButton . enabled = true < nl > - < nl > - self . textInputbar . layoutIfNeeded ( ) < nl > - self . rightButton . layoutIfNeeded ( ) < nl > - } < nl > + / / if ( self . audioButton . hidden ) { < nl > + / / / / self . textView . resignFirstResponder ( ) < nl > + / / < nl > + / / self . rightButton . tintColor = appStyle . chatSendColor < nl > + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ keyboard " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > + / / self . rightButton . enabled = true < nl > + / / < nl > + / / self . textInputbar . layoutIfNeeded ( ) < nl > + / / self . rightButton . layoutIfNeeded ( ) < nl > + / / < nl > + / / self . audioButton . frame = textView . frame < nl > + / / self . audioButton . hidden = false ; < nl > + / / < nl > + / / < nl > + / / } else { < nl > + / / self . audioButton . hidden = true ; < nl > + / / < nl > + / / self . rightButton . tintColor = appStyle . chatSendColor < nl > + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) < nl > + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) < nl > + / / self . rightButton . enabled = true < nl > + / / < nl > + / / self . textInputbar . layoutIfNeeded ( ) < nl > + / / self . rightButton . layoutIfNeeded ( ) < nl > + / / } < nl > < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > index f26bdd0 . . 5fc91d4 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > @ @ - 172 , 9 + 172 , 10 @ @ < nl > 	 	 06CE898A1BD8401C005A5530 / * Reachability . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06CE89891BD8401C005A5530 / * Reachability . swift * / ; } ; < nl > 	 	 06CE898C1BD841C9005A5530 / * SystemConfiguration . framework in Frameworks * / = { isa = PBXBuildFile ; fileRef = 06CE898B1BD841C9005A5530 / * SystemConfiguration . framework * / ; } ; < nl > 	 	 06CE89901BD84DF5005A5530 / * ActorSDKAnalytics . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / ; } ; < nl > - 	 	 06E7B2471C0F8D7A0090660C / * LocationPickerController . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2461C0F8D7A0090660C / * LocationPickerController . swift * / ; } ; < nl > + 	 	 06E7B2471C0F8D7A0090660C / * AALocationPickerController . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2461C0F8D7A0090660C / * AALocationPickerController . swift * / ; } ; < nl > 	 	 06E7B24A1C0F92140090660C / * AABubbleLocationCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2491C0F92140090660C / * AABubbleLocationCell . swift * / ; } ; < nl > 	 	 06E7B24C1C0FAB500090660C / * AAMapFastView . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B24B1C0FAB500090660C / * AAMapFastView . swift * / ; } ; < nl > + 	 	 06E7B2521C1345E70090660C / * AAMapPinPointView . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2511C1345E70090660C / * AAMapPinPointView . swift * / ; } ; < nl > 	 	 697B3A12994653F581459F63 / * Pods _ ActorSDK . framework in Frameworks * / = { isa = PBXBuildFile ; fileRef = 9A22DF21664BBB34087283F6 / * Pods _ ActorSDK . framework * / ; } ; < nl > / * End PBXBuildFile section * / < nl > < nl > @ @ - 350 , 9 + 351 , 10 @ @ < nl > 	 	 06CE89891BD8401C005A5530 / * Reachability . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = Reachability . swift ; sourceTree = " < group > " ; } ; < nl > 	 	 06CE898B1BD841C9005A5530 / * SystemConfiguration . framework * / = { isa = PBXFileReference ; lastKnownFileType = wrapper . framework ; name = SystemConfiguration . framework ; path = System / Library / Frameworks / SystemConfiguration . framework ; sourceTree = SDKROOT ; } ; < nl > 	 	 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = ActorSDKAnalytics . swift ; sourceTree = " < group > " ; } ; < nl > - 	 	 06E7B2461C0F8D7A0090660C / * LocationPickerController . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = LocationPickerController . swift ; sourceTree = " < group > " ; } ; < nl > + 	 	 06E7B2461C0F8D7A0090660C / * AALocationPickerController . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AALocationPickerController . swift ; sourceTree = " < group > " ; } ; < nl > 	 	 06E7B2491C0F92140090660C / * AABubbleLocationCell . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AABubbleLocationCell . swift ; sourceTree = " < group > " ; } ; < nl > 	 	 06E7B24B1C0FAB500090660C / * AAMapFastView . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AAMapFastView . swift ; sourceTree = " < group > " ; } ; < nl > + 	 	 06E7B2511C1345E70090660C / * AAMapPinPointView . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AAMapPinPointView . swift ; sourceTree = " < group > " ; } ; < nl > 	 	 22BAEA363892E475F59B7E9F / * Pods - ActorSDK . debug . xcconfig * / = { isa = PBXFileReference ; includeInIndex = 1 ; lastKnownFileType = text . xcconfig ; name = " Pods - ActorSDK . debug . xcconfig " ; path = " Pods / Target Support Files / Pods - ActorSDK / Pods - ActorSDK . debug . xcconfig " ; sourceTree = " < group > " ; } ; < nl > 	 	 333F91AE5263DD450666CC87 / * Pods - ActorSDK . release . xcconfig * / = { isa = PBXFileReference ; includeInIndex = 1 ; lastKnownFileType = text . xcconfig ; name = " Pods - ActorSDK . release . xcconfig " ; path = " Pods / Target Support Files / Pods - ActorSDK / Pods - ActorSDK . release . xcconfig " ; sourceTree = " < group > " ; } ; < nl > 	 	 9A22DF21664BBB34087283F6 / * Pods _ ActorSDK . framework * / = { isa = PBXFileReference ; explicitFileType = wrapper . framework ; includeInIndex = 0 ; path = Pods _ ActorSDK . framework ; sourceTree = BUILT _ PRODUCTS _ DIR ; } ; < nl > @ @ - 537 , 6 + 539 , 7 @ @ < nl > 	 	 	 	 066A52321BC4EEBA000E606E / * Cells * / , < nl > 	 	 	 	 066A52141BC4EE04000E606E / * AAAvatarView . swift * / , < nl > 	 	 	 	 06E7B24B1C0FAB500090660C / * AAMapFastView . swift * / , < nl > + 	 	 	 	 06E7B2511C1345E70090660C / * AAMapPinPointView . swift * / , < nl > 	 	 	 	 066A52461BC4EED5000E606E / * AAProgressView . swift * / , < nl > 	 	 	 	 066A523A1BC4EECD000E606E / * AABigPlaceholderView . swift * / , < nl > 	 	 	 	 066A523C1BC4EECD000E606E / * AATableViewHeader . swift * / , < nl > @ @ - 890 , 7 + 893 , 7 @ @ < nl > 	 	 06E7B2451C0F8D410090660C / * Location * / = { < nl > 	 	 	 isa = PBXGroup ; < nl > 	 	 	 children = ( < nl > - 	 	 	 	 06E7B2461C0F8D7A0090660C / * LocationPickerController . swift * / , < nl > + 	 	 	 	 06E7B2461C0F8D7A0090660C / * AALocationPickerController . swift * / , < nl > 	 	 	 ) ; < nl > 	 	 	 path = Location ; < nl > 	 	 	 sourceTree = " < group > " ; < nl > @ @ - 1124 , 7 + 1127 , 7 @ @ < nl > 	 	 	 	 066A53171BC533DD000E606E / * AABubbles . swift in Sources * / , < nl > 	 	 	 	 066A52081BC4E962000E606E / * Makefile in Sources * / , < nl > 	 	 	 	 066A53231BC533F5000E606E / * Caches . swift in Sources * / , < nl > - 	 	 	 	 06E7B2471C0F8D7A0090660C / * LocationPickerController . swift in Sources * / , < nl > + 	 	 	 	 06E7B2471C0F8D7A0090660C / * AALocationPickerController . swift in Sources * / , < nl > 	 	 	 	 066A52691BC50E7B000E606E / * AAAuthRegisterViewController . swift in Sources * / , < nl > 	 	 	 	 066A51501BC4BE06000E606E / * AARegex . swift in Sources * / , < nl > 	 	 	 	 06CE89901BD84DF5005A5530 / * ActorSDKAnalytics . swift in Sources * / , < nl > @ @ - 1171 , 6 + 1174 , 7 @ @ < nl > 	 	 	 	 066A52811BC51ED0000E606E / * AANoSelectionViewController . swift in Sources * / , < nl > 	 	 	 	 066A52281BC4EEAC000E606E / * AAManagedTableController . swift in Sources * / , < nl > 	 	 	 	 065975541BC7DF5100B8C7DF / * CocoaAssetsRuntime . swift in Sources * / , < nl > + 	 	 	 	 06E7B2521C1345E70090660C / * AAMapPinPointView . swift in Sources * / , < nl > 	 	 	 	 066A53121BC53317000E606E / * AAPhotoPreviewController . swift in Sources * / , < nl > 	 	 	 	 066A52391BC4EEBA000E606E / * AAEditCell . swift in Sources * / , < nl > 	 	 	 	 066A526D1BC50E8B000E606E / * AAAuthCountryCell . swift in Sources * / , < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPin . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPin . imageset / Contents . json < nl > index 3f92572 . . e9b740d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPin . imageset / Contents . json < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPin . imageset / Contents . json < nl > @ @ - 2 , 8 + 2 , 16 @ @ < nl > " images " : [ < nl > { < nl > " idiom " : " universal " , < nl > + " scale " : " 1x " < nl > + } , < nl > + { < nl > + " idiom " : " universal " , < nl > " filename " : " LocationPin @ 2x . png " , < nl > " scale " : " 2x " < nl > + } , < nl > + { < nl > + " idiom " : " universal " , < nl > + " scale " : " 3x " < nl > } < nl > ] , < nl > " info " : { < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / Contents . json < nl > new file mode 100644 < nl > index 0000000 . . 41ae8d7 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / Contents . json < nl > @ @ - 0 , 0 + 1 , 13 @ @ < nl > + { < nl > + " images " : [ < nl > + { < nl > + " idiom " : " universal " , < nl > + " filename " : " LocationPinPoint @ 2x . png " , < nl > + " scale " : " 2x " < nl > + } < nl > + ] , < nl > + " info " : { < nl > + " version " : 1 , < nl > + " author " : " xcode " < nl > + } < nl > + } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / LocationPinPoint @ 2x . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / LocationPinPoint @ 2x . png < nl > new file mode 100644 < nl > index 0000000 . . 7584de8 < nl > Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / LocationPinPoint @ 2x . png differ < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / Contents . json < nl > new file mode 100644 < nl > index 0000000 . . 0bd0b69 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / Contents . json < nl > @ @ - 0 , 0 + 1 , 13 @ @ < nl > + { < nl > + " images " : [ < nl > + { < nl > + " idiom " : " universal " , < nl > + " filename " : " LocationPinShadow @ 2x . png " , < nl > + " scale " : " 2x " < nl > + } < nl > + ] , < nl > + " info " : { < nl > + " version " : 1 , < nl > + " author " : " xcode " < nl > + } < nl > + } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / LocationPinShadow @ 2x . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / LocationPinShadow @ 2x . png < nl > new file mode 100644 < nl > index 0000000 . . 3bc04a4 < nl > Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / LocationPinShadow @ 2x . png differ < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleLocationCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleLocationCell . swift < nl > index 1c539ce . . 79edd4d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleLocationCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleLocationCell . swift < nl > @ @ - 119 , 11 + 119 , 12 @ @ public class AABubbleLocationCell : AABubbleCell { < nl > < nl > public override func layoutContent ( maxWidth : CGFloat , offsetX : CGFloat ) { < nl > let insets = fullContentInsets < nl > + let contentWidth = self . contentView . frame . width < nl > < nl > layoutBubble ( mapWidth , contentHeight : mapHeight ) < nl > < nl > if isOut { < nl > - map . frame = CGRectMake ( maxWidth - insets . right - mapWidth , insets . top , mapWidth , mapHeight ) < nl > + map . frame = CGRectMake ( contentWidth - insets . right - mapWidth , insets . top , mapWidth , mapHeight ) < nl > } else { < nl > map . frame = CGRectMake ( insets . left , insets . top , mapWidth , mapHeight ) < nl > } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > index 8d0cdcc . . 52a8665 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > @ @ - 6 , 7 + 6 , 7 @ @ import Foundation < nl > import UIKit < nl > import MobileCoreServices < nl > < nl > - class ConversationViewController : AAConversationContentController , UIDocumentMenuDelegate , UIDocumentPickerDelegate , UIImagePickerControllerDelegate , UINavigationControllerDelegate { < nl > + class ConversationViewController : AAConversationContentController , UIDocumentMenuDelegate , UIDocumentPickerDelegate , UIImagePickerControllerDelegate , UINavigationControllerDelegate , AALocationPickerControllerDelegate { < nl > < nl > / / Data binder < nl > private let binder = AABinder ( ) < nl > @ @ - 462 , 6 + 462 , 17 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > / / Location picking < nl > < nl > func pickLocation ( ) { < nl > - self . presentViewController ( AANavigationController ( rootViewController : AALocationPickerController ( ) ) , animated : true , completion : nil ) < nl > + let pickerController = AALocationPickerController ( ) < nl > + pickerController . delegate = self < nl > + self . presentViewController ( AANavigationController ( rootViewController : pickerController ) , animated : true , completion : nil ) < nl > + } < nl > + < nl > + func locationPickerDidCancelled ( controller : AALocationPickerController ) { < nl > + controller . dismissViewControllerAnimated ( true , completion : nil ) < nl > + } < nl > + < nl > + func locationPickerDidPicked ( controller : AALocationPickerController , latitude : Double , longitude : Double ) { < nl > + Actor . sendLocationWithPeer ( self . peer , withLongitude : JavaLangDouble ( double : longitude ) , withLatitude : JavaLangDouble ( double : latitude ) , withStreet : nil , withPlace : nil ) < nl > + controller . dismissViewControllerAnimated ( true , completion : nil ) < nl > } < nl > } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / AALocationPickerController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / AALocationPickerController . swift < nl > new file mode 100644 < nl > index 0000000 . . 4366550 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / AALocationPickerController . swift < nl > @ @ - 0 , 0 + 1 , 93 @ @ < nl > + / / < nl > + / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > < nl > + / / < nl > + < nl > + import Foundation < nl > + import MapKit < nl > + < nl > + public class AALocationPickerController : AAViewController , CLLocationManagerDelegate , MKMapViewDelegate { < nl > + < nl > + public var delegate : AALocationPickerControllerDelegate ? = nil < nl > + < nl > + private let locationManager = CLLocationManager ( ) < nl > + private let map = MKMapView ( ) < nl > + private let pinPoint = AAMapPinPointView ( ) < nl > + < nl > + override public func viewDidLoad ( ) { < nl > + super . viewDidLoad ( ) < nl > + < nl > + navigationItem . title = " Location " < nl > + navigationItem . leftBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationCancel " ) , style : . Plain , target : self , action : " cancellDidTap " ) < nl > + < nl > + updateAuthStatus ( CLLocationManager . authorizationStatus ( ) ) < nl > + < nl > + locationManager . delegate = self < nl > + < nl > + locationManager . requestWhenInUseAuthorization ( ) < nl > + locationManager . startUpdatingLocation ( ) < nl > + < nl > + map . showsUserLocation = true < nl > + map . delegate = self < nl > + < nl > + self . view . addSubview ( map ) < nl > + self . view . addSubview ( pinPoint ) < nl > + } < nl > + < nl > + public func mapView ( mapView : MKMapView , regionWillChangeAnimated animated : Bool ) { < nl > + pinPoint . risePin ( true , animated : animated ) < nl > + } < nl > + < nl > + public func mapView ( mapView : MKMapView , regionDidChangeAnimated animated : Bool ) { < nl > + pinPoint . risePin ( false , animated : animated ) < nl > + } < nl > + < nl > + func cancellDidTap ( ) { < nl > + delegate ? . locationPickerDidCancelled ( self ) < nl > + } < nl > + < nl > + func doneDidTap ( ) { < nl > + delegate ? . locationPickerDidPicked ( self , latitude : map . centerCoordinate . latitude , longitude : map . centerCoordinate . longitude ) < nl > + } < nl > + < nl > + func updateAuthStatus ( status : CLAuthorizationStatus ) { < nl > + if ( status = = CLAuthorizationStatus . Denied ) { < nl > + / / User explictly denied access to maps < nl > + showPlaceholderWithImage ( UIImage . bundled ( " " ) , title : " Enable location " , subtitle : " Enable location services in settings . " ) < nl > + map . hidden = true < nl > + navigationItem . rightBarButtonItem = nil < nl > + } else if ( status = = CLAuthorizationStatus . Restricted | | status = = CLAuthorizationStatus . NotDetermined ) { < nl > + / / App doesn ' t complete auth request < nl > + map . hidden = false < nl > + navigationItem . rightBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationDone " ) , style : . Done , target : self , action : " doneDidTap " ) < nl > + hidePlaceholder ( ) < nl > + } else { < nl > + / / Authorised < nl > + map . hidden = false < nl > + navigationItem . rightBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationDone " ) , style : . Done , target : self , action : " doneDidTap " ) < nl > + hidePlaceholder ( ) < nl > + } < nl > + } < nl > + < nl > + override public func viewDidLayoutSubviews ( ) { < nl > + super . viewDidLayoutSubviews ( ) < nl > + < nl > + map . frame = self . view . bounds < nl > + / / pinPoint . bounds = CGRectMake ( 0 , 0 , 100 , 100 ) < nl > + pinPoint . centerIn ( self . view . bounds ) < nl > + } < nl > + < nl > + public func locationManager ( manager : CLLocationManager , didChangeAuthorizationStatus status : CLAuthorizationStatus ) { < nl > + updateAuthStatus ( status ) < nl > + } < nl > + < nl > + public func locationManager ( manager : CLLocationManager , didUpdateLocations locations : [ CLLocation ] ) { < nl > + let location = locations . first ! < nl > + map . setRegion ( MKCoordinateRegion ( center : location . coordinate , span : MKCoordinateSpanMake ( 0 . 05 , 0 . 05 ) ) , animated : true ) < nl > + locationManager . stopUpdatingLocation ( ) < nl > + } < nl > + } < nl > + < nl > + public protocol AALocationPickerControllerDelegate { < nl > + func locationPickerDidPicked ( controller : AALocationPickerController , latitude : Double , longitude : Double ) < nl > + func locationPickerDidCancelled ( controller : AALocationPickerController ) < nl > + } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / LocationPickerController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / LocationPickerController . swift < nl > deleted file mode 100644 < nl > index f0771bb . . 0000000 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / LocationPickerController . swift < nl > + + + / dev / null < nl > @ @ - 1 , 41 + 0 , 0 @ @ < nl > - / / < nl > - / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > < nl > - / / < nl > - < nl > - import Foundation < nl > - import MapKit < nl > - < nl > - class AALocationPickerController : AAViewController { < nl > - < nl > - let locationManager = CLLocationManager ( ) < nl > - let map = MKMapView ( ) < nl > - < nl > - override func viewDidLoad ( ) { < nl > - super . viewDidLoad ( ) < nl > - < nl > - navigationItem . title = " Location " < nl > - navigationItem . leftBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationCancel " ) , style : . Plain , target : self , action : " cancellDidTap " ) < nl > - navigationItem . rightBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationDone " ) , style : . Done , target : self , action : " doneDidTap " ) < nl > - < nl > - locationManager . requestWhenInUseAuthorization ( ) < nl > - < nl > - map . showsUserLocation = true < nl > - map . userTrackingMode = MKUserTrackingMode . Follow < nl > - < nl > - self . view . addSubview ( map ) < nl > - } < nl > - < nl > - func cancellDidTap ( ) { < nl > - dismiss ( ) < nl > - } < nl > - < nl > - func doneDidTap ( ) { < nl > - dismiss ( ) < nl > - } < nl > - < nl > - override func viewDidLayoutSubviews ( ) { < nl > - super . viewDidLayoutSubviews ( ) < nl > - < nl > - map . frame = self . view . bounds < nl > - } < nl > - } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Views . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Views . swift < nl > index 3705da0 . . f2c6164 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Views . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Views . swift < nl > @ @ - 65 , 6 + 65 , 11 @ @ public extension UIView { < nl > public var right : CGFloat { get { return frame . maxX } } < nl > public var top : CGFloat { get { return frame . minY } } < nl > public var bottom : CGFloat { get { return frame . maxY } } < nl > + < nl > + public func centerIn ( rect : CGRect ) { < nl > + self . frame = CGRectMake ( ( rect . width - self . bounds . width ) / 2 , ( rect . height - self . bounds . height ) / 2 , < nl > + self . bounds . width , self . bounds . height ) < nl > + } < nl > } < nl > < nl > / / Text measuring < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / AAMapPinPointView . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / AAMapPinPointView . swift < nl > new file mode 100644 < nl > index 0000000 . . ff92ae3 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / AAMapPinPointView . swift < nl > @ @ - 0 , 0 + 1 , 41 @ @ < nl > + / / < nl > + / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > < nl > + / / < nl > + < nl > + import Foundation < nl > + < nl > + public class AAMapPinPointView : UIView { < nl > + < nl > + let pinView = UIImageView ( ) < nl > + let pinPointView = UIImageView ( ) < nl > + let pinShadowView = UIImageView ( ) < nl > + < nl > + public init ( ) { < nl > + super . init ( frame : CGRectMake ( 0 , 0 , 100 , 100 ) ) < nl > + < nl > + pinShadowView . frame = CGRectMake ( 43 , 47 , 32 , 39 ) < nl > + pinShadowView . alpha = 0 . 9 < nl > + pinShadowView . image = UIImage . bundled ( " LocationPinShadow . png " ) < nl > + addSubview ( pinShadowView ) < nl > + < nl > + pinPointView . frame = CGRectMake ( 100 / 2 - 2 , 100 - 18 . 5 , 3 . 5 , 1 . 5 ) < nl > + pinPointView . image = UIImage . bundled ( " LocationPinPoint . png " ) < nl > + addSubview ( pinPointView ) < nl > + < nl > + pinView . frame = CGRectMake ( 100 / 2 - 7 , 47 , 13 . 5 , 36 ) < nl > + pinView . image = UIImage . bundled ( " LocationPin . png " ) < nl > + addSubview ( pinView ) < nl > + } < nl > + < nl > + required public init ? ( coder aDecoder : NSCoder ) { < nl > + fatalError ( " init ( coder : ) has not been implemented " ) < nl > + } < nl > + < nl > + func risePin ( rised : Bool , animated : Bool ) { < nl > + if ( rised ) { < nl > + pinView . hidden = true < nl > + } else { < nl > + pinView . hidden = false < nl > + } < nl > + } < nl > + } < nl > \ No newline at end of file

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorApp / AppDelegate . swift b / actor - sdk / sdk - core - ios / ActorApp / AppDelegate . swift 
 index 56b461b . . bad7333 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorApp / AppDelegate . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorApp / AppDelegate . swift 
 @ @ - 27 , 6 + 27 , 7 @ @ import ActorSDK 
 
 / / Creating Actor 
 ActorSDK . sharedActor ( ) . createActor ( ) 
 + 
 } 
 
 public override func application ( application : UIApplication , didFinishLaunchingWithOptions launchOptions : [ NSObject : AnyObject ] ? ) - > Bool { 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 index 0081741 . . 5221704 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 @ @ - 211 , 6 + 211 , 7 @ @ 
 	 	 153F6B591C2B03E300C0B960 / * AAGarbageView . m in Sources * / = { isa = PBXBuildFile ; fileRef = 153F6B551C2B03E300C0B960 / * AAGarbageView . m * / ; } ; 
 	 	 153F6B5B1C2B109400C0B960 / * AABubbleVoiceCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 153F6B5A1C2B109400C0B960 / * AABubbleVoiceCell . swift * / ; } ; 
 	 	 153F6B5D1C2B3AC500C0B960 / * AABubbleStickerCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 153F6B5C1C2B3AC500C0B960 / * AABubbleStickerCell . swift * / ; } ; 
 + 	 	 153F6B611C2BF8EC00C0B960 / * AAAuthWelcomeController . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 153F6B601C2BF8EC00C0B960 / * AAAuthWelcomeController . swift * / ; } ; 
 	 	 15D35F161C20185500E3717A / * diag _ range . c in Sources * / = { isa = PBXBuildFile ; fileRef = 15D35F0C1C20185500E3717A / * diag _ range . c * / ; } ; 
 	 	 15D35F171C20185500E3717A / * diag _ range . h in Headers * / = { isa = PBXBuildFile ; fileRef = 15D35F0D1C20185500E3717A / * diag _ range . h * / ; } ; 
 	 	 15D35F181C20185500E3717A / * opus _ header . c in Sources * / = { isa = PBXBuildFile ; fileRef = 15D35F0E1C20185500E3717A / * opus _ header . c * / ; } ; 
 @ @ - 480 , 6 + 481 , 7 @ @ 
 	 	 153F6B551C2B03E300C0B960 / * AAGarbageView . m * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . objc ; path = AAGarbageView . m ; sourceTree = " < group > " ; } ; 
 	 	 153F6B5A1C2B109400C0B960 / * AABubbleVoiceCell . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AABubbleVoiceCell . swift ; sourceTree = " < group > " ; } ; 
 	 	 153F6B5C1C2B3AC500C0B960 / * AABubbleStickerCell . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AABubbleStickerCell . swift ; sourceTree = " < group > " ; } ; 
 + 	 	 153F6B601C2BF8EC00C0B960 / * AAAuthWelcomeController . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; name = AAAuthWelcomeController . swift ; path = . . / AAAuthWelcomeController . swift ; sourceTree = " < group > " ; } ; 
 	 	 15D35F0C1C20185500E3717A / * diag _ range . c * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . c ; path = diag _ range . c ; sourceTree = " < group > " ; } ; 
 	 	 15D35F0D1C20185500E3717A / * diag _ range . h * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . h ; path = diag _ range . h ; sourceTree = " < group > " ; } ; 
 	 	 15D35F0E1C20185500E3717A / * opus _ header . c * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . c ; path = opus _ header . c ; sourceTree = " < group > " ; } ; 
 @ @ - 795 , 6 + 797 , 7 @ @ 
 	 	 066A52601BC50E6B000E606E / * Auth * / = { 
 	 	 	 isa = PBXGroup ; 
 	 	 	 children = ( 
 + 	 	 	 	 153F6B601C2BF8EC00C0B960 / * AAAuthWelcomeController . swift * / , 
 	 	 	 	 066A526E1BC51007000E606E / * Views * / , 
 	 	 	 	 066A526B1BC50E83000E606E / * Cells * / , 
 	 	 	 	 066A52611BC50E7B000E606E / * AAAuthCountriesViewController . swift * / , 
 @ @ - 1536 , 6 + 1539 , 7 @ @ 
 	 	 	 	 066A518D1BC4C383000E606E / * CocoaStorageRuntime . swift in Sources * / , 
 	 	 	 	 066A52F01BC52B02000E606E / * AASettingsViewController . swift in Sources * / , 
 	 	 	 	 066A52741BC5101A000E606E / * ABPhoneField . m in Sources * / , 
 + 	 	 	 	 153F6B611C2BF8EC00C0B960 / * AAAuthWelcomeController . swift in Sources * / , 
 	 	 	 	 152AA8A91C2989270030DEEE / * SLKTextInputbar . m in Sources * / , 
 	 	 	 	 066A53071BC53183000E606E / * AARecentViewController . swift in Sources * / , 
 	 	 	 	 06230F411BC95BD200A4807B / * RMPhoneFormat . m in Sources * / , 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Base . lproj / Localizable . strings b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Base . lproj / Localizable . strings 
 index bc80e3a . . d9285ea 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Base . lproj / Localizable . strings 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Base . lproj / Localizable . strings 
 @ @ - 2 , 6 + 2 , 16 @ @ 
 / / Copyright ( C ) 2014 - 2015 Actor LLC . < https : / / actor . im > 
 / / 
 
 + 
 + / * 
 + * Auth Screen 
 + * / 
 + 
 + " AuthMoreInfo " = " Free , fast and secure messaging . " ; 
 + 
 + " AuthStarButton " = " Start Messaging " ; 
 + 
 + 
 / * 
 * Main Screen 
 * / 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / Contents . json 
 new file mode 100644 
 index 0000000 . . da4a164 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / Contents . json 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + { 
 + " info " : { 
 + " version " : 1 , 
 + " author " : " xcode " 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / Contents . json 
 new file mode 100644 
 index 0000000 . . 0e363c0 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / Contents . json 
 @ @ - 0 , 0 + 1 , 22 @ @ 
 + { 
 + " images " : [ 
 + { 
 + " idiom " : " universal " , 
 + " scale " : " 1x " 
 + } , 
 + { 
 + " idiom " : " universal " , 
 + " filename " : " OnboardNext @ 2x . png " , 
 + " scale " : " 2x " 
 + } , 
 + { 
 + " idiom " : " universal " , 
 + " filename " : " OnboardNext @ 3x . png " , 
 + " scale " : " 3x " 
 + } 
 + ] , 
 + " info " : { 
 + " version " : 1 , 
 + " author " : " xcode " 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 2x . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 2x . png 
 new file mode 100644 
 index 0000000 . . 5969bb4 
 Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 2x . png differ 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 3x . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 3x . png 
 new file mode 100644 
 index 0000000 . . 8ca3af7 
 Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / OnboardNext . imageset / OnboardNext @ 3x . png differ 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Actor _ Logo . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Actor _ Logo . png 
 new file mode 100644 
 index 0000000 . . 79d0e30 
 Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Actor _ Logo . png differ 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Contents . json 
 new file mode 100644 
 index 0000000 . . de9eda1 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / Auth / main _ logo . imageset / Contents . json 
 @ @ - 0 , 0 + 1 , 21 @ @ 
 + { 
 + " images " : [ 
 + { 
 + " idiom " : " universal " , 
 + " scale " : " 1x " 
 + } , 
 + { 
 + " idiom " : " universal " , 
 + " filename " : " Actor _ Logo . png " , 
 + " scale " : " 2x " 
 + } , 
 + { 
 + " idiom " : " universal " , 
 + " scale " : " 3x " 
 + } 
 + ] , 
 + " info " : { 
 + " version " : 1 , 
 + " author " : " xcode " 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / es . lproj / Localizable . strings b / actor - sdk / sdk - core - ios / ActorSDK / Resources / es . lproj / Localizable . strings 
 index 3052a37 . . 962726d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Resources / es . lproj / Localizable . strings 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / es . lproj / Localizable . strings 
 @ @ - 2 , 6 + 2 , 11 @ @ 
 / / Copyright ( C ) 2014 - 2015 Actor LLC . < https : / / actor . im > 
 / / 
 
 + " AuthMoreInfo " = " Mensajer Ã­ a gratis , segura y veloz . " ; 
 + 
 + " AuthStarButton " = " Empieza a chatear " ; 
 + 
 + / / / 
 
 " TabMessages " = " Mensajes " ; 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift 
 index a8ddab8 . . 48928d3 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift 
 @ @ - 63 , 6 + 63 , 9 @ @ public class ActorSDK { 
 / / / App name in loc . strings 
 public var appNameInLocStrings : String = " Actor " 
 
 + / / / Use background on welcome screen 
 + public var useBackgroundOnWelcomeScreen : Bool ? = false 
 + 
 / / / Support email 
 public var supportEmail : String ? = nil 
 
 @ @ - 328 , 7 + 331 , 8 @ @ public class ActorSDK { 
 } else { 
 var controller : UIViewController ! = delegate . actorControllerForAuthStart ( ) 
 if controller = = nil { 
 - controller = AAAuthNavigationController ( rootViewController : AAAuthPhoneViewController ( ) ) 
 + / / controller = AAAuthNavigationController ( rootViewController : AAAuthPhoneViewController ( ) ) 
 + controller = AAAuthNavigationController ( rootViewController : AAWelcomeController ( ) ) 
 } 
 window . rootViewController = controller ! 
 } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 index ef904d0 . . bb57521 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 @ @ - 12 , 6 + 12 , 8 @ @ public class ActorStyle { 
 
 / / / Is Application have dark theme . Default is false . 
 public var isDarkApp = false 
 + / / / Tint Color . Star button 
 + public var vcStarButton = UIColor ( red : 75 / 255 . 0 , green : 110 / 255 . 0 , blue : 152 / 255 . 0 , alpha : 1 ) 
 / / / Tint Color . Used for " Actions " . Default is sytem blue . 
 public var vcTintColor = UIColor ( rgb : 0x5085CB ) 
 / / / Color of desctructive actions . Default is red 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / AAAuthWelcomeController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / AAAuthWelcomeController . swift 
 new file mode 100644 
 index 0000000 . . 279e972 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / AAAuthWelcomeController . swift 
 @ @ - 0 , 0 + 1 , 113 @ @ 
 + / / 
 + / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > 
 + / / 
 + 
 + import UIKit 
 + 
 + class AAWelcomeController : UIViewController { 
 + 
 + var backgroundImage : UIImageView ! 
 + 
 + var logoView : UIImageView ! 
 + var appNameLabel : UILabel ! 
 + var someInfoLabel : UILabel ! 
 + 
 + var doneButton : UIButton ! 
 + 
 + 
 + override func loadView ( ) { 
 + super . loadView ( ) 
 + 
 + self . backgroundImage = UIImageView ( ) 
 + 
 + self . logoView = UIImageView ( ) 
 + self . appNameLabel = UILabel ( ) 
 + self . someInfoLabel = UILabel ( ) 
 + 
 + self . doneButton = UIButton ( type : UIButtonType . System ) 
 + 
 + / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
 + 
 + let screenWidth = UIScreen . mainScreen ( ) . bounds . size . width 
 + let screenHeight = UIScreen . mainScreen ( ) . bounds . size . height 
 + 
 + self . backgroundImage . frame = CGRectMake ( 0 , 0 , screenWidth , screenHeight ) 
 + self . backgroundImage . backgroundColor = UIColor . whiteColor ( ) 
 + 
 + if ActorSDK . sharedActor ( ) . useBackgroundOnWelcomeScreen = = true { 
 + 
 + self . backgroundImage . image = UIImage . bundled ( " bg _ 1 " ) 
 + 
 + } 
 + 
 + self . logoView . frame = CGRectMake ( screenWidth / 2 - screenWidth / 4 , 80 , screenWidth / 2 , screenWidth / 2 ) 
 + 
 + self . logoView . image = UIImage . bundled ( " main _ logo " ) 
 + 
 + / / / 
 + 
 + self . appNameLabel . text = ActorSDK . sharedActor ( ) . appNameInLocStrings 
 + self . appNameLabel . textAlignment = . Center 
 + self . appNameLabel . backgroundColor = UIColor . clearColor ( ) 
 + self . appNameLabel . font = UIFont ( name : " HelveticaNeue - Light " , size : 35 ) 
 + 
 + self . appNameLabel . frame = CGRectMake ( screenWidth / 2 - screenWidth / 4 , self . logoView . frame . maxY + 10 , screenWidth / 2 , 40 ) 
 + 
 + / / / 
 + 
 + self . someInfoLabel . text = AALocalized ( " AuthMoreInfo " ) 
 + self . someInfoLabel . textAlignment = . Center 
 + self . someInfoLabel . backgroundColor = UIColor . clearColor ( ) 
 + self . someInfoLabel . font = UIFont ( name : " HelveticaNeue - Light " , size : 17 ) 
 + self . someInfoLabel . numberOfLines = 0 
 + 
 + self . someInfoLabel . frame = CGRectMake ( screenWidth / 2 - screenWidth / 4 - 25 , self . appNameLabel . frame . maxY + 5 , screenWidth / 2 + 50 , 60 ) 
 + 
 + / / / 
 + 
 + self . doneButton . setTitle ( AALocalized ( " AuthStarButton " ) , forState : UIControlState . Normal ) 
 + self . doneButton . setTitleColor ( ActorSDK . sharedActor ( ) . style . vcStarButton , forState : UIControlState . Normal ) 
 + self . doneButton . tintColor = ActorSDK . sharedActor ( ) . style . vcStarButton 
 + self . doneButton . frame = CGRectMake ( screenWidth / 2 - screenWidth / 4 - 20 , screenHeight - 50 , screenWidth / 2 , 30 ) 
 + 
 + self . doneButton . titleLabel ! . font = UIFont ( name : " HelveticaNeue - Light " , size : 22 ) 
 + 
 + self . doneButton . setImage ( UIImage . bundled ( " OnboardNext " ) , forState : UIControlState . Normal ) 
 + self . doneButton . imageEdgeInsets = UIEdgeInsetsMake ( 5 , screenWidth / 2 + 20 , 0 , 0 ) 
 + 
 + self . doneButton . addTarget ( self , action : " doneButtonAction " , forControlEvents : UIControlEvents . TouchUpInside ) 
 + 
 + 
 + / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
 + 
 + self . view . addSubview ( self . backgroundImage ) 
 + 
 + self . view . addSubview ( self . logoView ) 
 + self . view . addSubview ( self . appNameLabel ) 
 + self . view . addSubview ( self . someInfoLabel ) 
 + 
 + self . view . addSubview ( self . doneButton ) 
 + 
 + 
 + } 
 + 
 + override func viewDidLoad ( ) { 
 + super . viewDidLoad ( ) 
 + 
 + / / Do any additional setup after loading the view . 
 + } 
 + 
 + override func didReceiveMemoryWarning ( ) { 
 + super . didReceiveMemoryWarning ( ) 
 + / / Dispose of any resources that can be recreated . 
 + } 
 + 
 + 
 + func doneButtonAction ( ) { 
 + 
 + self . navigationController ? . pushViewController ( AAAuthPhoneViewController ( ) , animated : true ) 
 + 
 + } 
 + 
 + 
 + } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 index 4ab4cfe . . 90ceaca 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 @ @ - 74 , 11 + 74 , 16 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 
 
 / / right button 
 - self . rightButton . tintColor = appStyle . chatSendColor 
 - self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 - self . rightButton . enabled = true 
 - self . rightButton . layoutIfNeeded ( ) 
 + / / self . rightButton . tintColor = appStyle . chatSendColor 
 + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 + / / self . rightButton . enabled = true 
 + / / self . rightButton . layoutIfNeeded ( ) 
 + 
 + self . rightButton . setTitle ( AALocalized ( " ChatSend " ) , forState : UIControlState . Normal ) 
 + self . rightButton . setTitleColor ( appStyle . chatSendColor , forState : UIControlState . Normal ) 
 + self . rightButton . setTitleColor ( appStyle . chatSendDisabledColor , forState : UIControlState . Disabled ) 
 + self . rightButton . setImage ( nil , forState : UIControlState . Normal ) 
 
 / / 
 
 @ @ - 349 , 23 + 354 , 23 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 
 } else { 
 
 - if ( self . audioButton . hidden ) { 
 - 
 - self . rightButton . tintColor = appStyle . chatSendColor 
 - self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 - self . rightButton . enabled = true 
 - 
 - } else { 
 - 
 - self . rightButton . tintColor = appStyle . chatSendColor 
 - self . rightButton . setImage ( UIImage . tinted ( " aa _ keyboard " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 - self . rightButton . enabled = true 
 - 
 - } 
 - 
 - self . micOn = true 
 + / / if ( self . audioButton . hidden ) { 
 + / / 
 + / / self . rightButton . tintColor = appStyle . chatSendColor 
 + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 + / / self . rightButton . enabled = true 
 + / / 
 + / / } else { 
 + / / 
 + / / self . rightButton . tintColor = appStyle . chatSendColor 
 + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ keyboard " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 + / / self . rightButton . enabled = true 
 + / / 
 + / / } 
 + / / 
 + / / self . micOn = true 
 
 } 
 
 @ @ - 387 , 32 + 392 , 32 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 
 } else { 
 
 - if ( self . audioButton . hidden ) { 
 - / / self . textView . resignFirstResponder ( ) 
 - 
 - self . rightButton . tintColor = appStyle . chatSendColor 
 - self . rightButton . setImage ( UIImage . tinted ( " aa _ keyboard " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 - self . rightButton . enabled = true 
 - 
 - self . textInputbar . layoutIfNeeded ( ) 
 - self . rightButton . layoutIfNeeded ( ) 
 - 
 - self . audioButton . frame = textView . frame 
 - self . audioButton . hidden = false ; 
 - 
 - 
 - } else { 
 - self . audioButton . hidden = true ; 
 - 
 - self . rightButton . tintColor = appStyle . chatSendColor 
 - self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 - self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 - self . rightButton . enabled = true 
 - 
 - self . textInputbar . layoutIfNeeded ( ) 
 - self . rightButton . layoutIfNeeded ( ) 
 - } 
 + / / if ( self . audioButton . hidden ) { 
 + / / / / self . textView . resignFirstResponder ( ) 
 + / / 
 + / / self . rightButton . tintColor = appStyle . chatSendColor 
 + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ keyboard " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 + / / self . rightButton . enabled = true 
 + / / 
 + / / self . textInputbar . layoutIfNeeded ( ) 
 + / / self . rightButton . layoutIfNeeded ( ) 
 + / / 
 + / / self . audioButton . frame = textView . frame 
 + / / self . audioButton . hidden = false ; 
 + / / 
 + / / 
 + / / } else { 
 + / / self . audioButton . hidden = true ; 
 + / / 
 + / / self . rightButton . tintColor = appStyle . chatSendColor 
 + / / self . rightButton . setImage ( UIImage . tinted ( " aa _ micbutton " , color : appStyle . chatAttachColor ) , forState : UIControlState . Normal ) 
 + / / self . rightButton . setTitle ( " " , forState : UIControlState . Normal ) 
 + / / self . rightButton . enabled = true 
 + / / 
 + / / self . textInputbar . layoutIfNeeded ( ) 
 + / / self . rightButton . layoutIfNeeded ( ) 
 + / / } 
 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 index f26bdd0 . . 5fc91d4 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 @ @ - 172 , 9 + 172 , 10 @ @ 
 	 	 06CE898A1BD8401C005A5530 / * Reachability . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06CE89891BD8401C005A5530 / * Reachability . swift * / ; } ; 
 	 	 06CE898C1BD841C9005A5530 / * SystemConfiguration . framework in Frameworks * / = { isa = PBXBuildFile ; fileRef = 06CE898B1BD841C9005A5530 / * SystemConfiguration . framework * / ; } ; 
 	 	 06CE89901BD84DF5005A5530 / * ActorSDKAnalytics . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / ; } ; 
 - 	 	 06E7B2471C0F8D7A0090660C / * LocationPickerController . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2461C0F8D7A0090660C / * LocationPickerController . swift * / ; } ; 
 + 	 	 06E7B2471C0F8D7A0090660C / * AALocationPickerController . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2461C0F8D7A0090660C / * AALocationPickerController . swift * / ; } ; 
 	 	 06E7B24A1C0F92140090660C / * AABubbleLocationCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2491C0F92140090660C / * AABubbleLocationCell . swift * / ; } ; 
 	 	 06E7B24C1C0FAB500090660C / * AAMapFastView . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B24B1C0FAB500090660C / * AAMapFastView . swift * / ; } ; 
 + 	 	 06E7B2521C1345E70090660C / * AAMapPinPointView . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2511C1345E70090660C / * AAMapPinPointView . swift * / ; } ; 
 	 	 697B3A12994653F581459F63 / * Pods _ ActorSDK . framework in Frameworks * / = { isa = PBXBuildFile ; fileRef = 9A22DF21664BBB34087283F6 / * Pods _ ActorSDK . framework * / ; } ; 
 / * End PBXBuildFile section * / 
 
 @ @ - 350 , 9 + 351 , 10 @ @ 
 	 	 06CE89891BD8401C005A5530 / * Reachability . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = Reachability . swift ; sourceTree = " < group > " ; } ; 
 	 	 06CE898B1BD841C9005A5530 / * SystemConfiguration . framework * / = { isa = PBXFileReference ; lastKnownFileType = wrapper . framework ; name = SystemConfiguration . framework ; path = System / Library / Frameworks / SystemConfiguration . framework ; sourceTree = SDKROOT ; } ; 
 	 	 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = ActorSDKAnalytics . swift ; sourceTree = " < group > " ; } ; 
 - 	 	 06E7B2461C0F8D7A0090660C / * LocationPickerController . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = LocationPickerController . swift ; sourceTree = " < group > " ; } ; 
 + 	 	 06E7B2461C0F8D7A0090660C / * AALocationPickerController . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AALocationPickerController . swift ; sourceTree = " < group > " ; } ; 
 	 	 06E7B2491C0F92140090660C / * AABubbleLocationCell . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AABubbleLocationCell . swift ; sourceTree = " < group > " ; } ; 
 	 	 06E7B24B1C0FAB500090660C / * AAMapFastView . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AAMapFastView . swift ; sourceTree = " < group > " ; } ; 
 + 	 	 06E7B2511C1345E70090660C / * AAMapPinPointView . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = AAMapPinPointView . swift ; sourceTree = " < group > " ; } ; 
 	 	 22BAEA363892E475F59B7E9F / * Pods - ActorSDK . debug . xcconfig * / = { isa = PBXFileReference ; includeInIndex = 1 ; lastKnownFileType = text . xcconfig ; name = " Pods - ActorSDK . debug . xcconfig " ; path = " Pods / Target Support Files / Pods - ActorSDK / Pods - ActorSDK . debug . xcconfig " ; sourceTree = " < group > " ; } ; 
 	 	 333F91AE5263DD450666CC87 / * Pods - ActorSDK . release . xcconfig * / = { isa = PBXFileReference ; includeInIndex = 1 ; lastKnownFileType = text . xcconfig ; name = " Pods - ActorSDK . release . xcconfig " ; path = " Pods / Target Support Files / Pods - ActorSDK / Pods - ActorSDK . release . xcconfig " ; sourceTree = " < group > " ; } ; 
 	 	 9A22DF21664BBB34087283F6 / * Pods _ ActorSDK . framework * / = { isa = PBXFileReference ; explicitFileType = wrapper . framework ; includeInIndex = 0 ; path = Pods _ ActorSDK . framework ; sourceTree = BUILT _ PRODUCTS _ DIR ; } ; 
 @ @ - 537 , 6 + 539 , 7 @ @ 
 	 	 	 	 066A52321BC4EEBA000E606E / * Cells * / , 
 	 	 	 	 066A52141BC4EE04000E606E / * AAAvatarView . swift * / , 
 	 	 	 	 06E7B24B1C0FAB500090660C / * AAMapFastView . swift * / , 
 + 	 	 	 	 06E7B2511C1345E70090660C / * AAMapPinPointView . swift * / , 
 	 	 	 	 066A52461BC4EED5000E606E / * AAProgressView . swift * / , 
 	 	 	 	 066A523A1BC4EECD000E606E / * AABigPlaceholderView . swift * / , 
 	 	 	 	 066A523C1BC4EECD000E606E / * AATableViewHeader . swift * / , 
 @ @ - 890 , 7 + 893 , 7 @ @ 
 	 	 06E7B2451C0F8D410090660C / * Location * / = { 
 	 	 	 isa = PBXGroup ; 
 	 	 	 children = ( 
 - 	 	 	 	 06E7B2461C0F8D7A0090660C / * LocationPickerController . swift * / , 
 + 	 	 	 	 06E7B2461C0F8D7A0090660C / * AALocationPickerController . swift * / , 
 	 	 	 ) ; 
 	 	 	 path = Location ; 
 	 	 	 sourceTree = " < group > " ; 
 @ @ - 1124 , 7 + 1127 , 7 @ @ 
 	 	 	 	 066A53171BC533DD000E606E / * AABubbles . swift in Sources * / , 
 	 	 	 	 066A52081BC4E962000E606E / * Makefile in Sources * / , 
 	 	 	 	 066A53231BC533F5000E606E / * Caches . swift in Sources * / , 
 - 	 	 	 	 06E7B2471C0F8D7A0090660C / * LocationPickerController . swift in Sources * / , 
 + 	 	 	 	 06E7B2471C0F8D7A0090660C / * AALocationPickerController . swift in Sources * / , 
 	 	 	 	 066A52691BC50E7B000E606E / * AAAuthRegisterViewController . swift in Sources * / , 
 	 	 	 	 066A51501BC4BE06000E606E / * AARegex . swift in Sources * / , 
 	 	 	 	 06CE89901BD84DF5005A5530 / * ActorSDKAnalytics . swift in Sources * / , 
 @ @ - 1171 , 6 + 1174 , 7 @ @ 
 	 	 	 	 066A52811BC51ED0000E606E / * AANoSelectionViewController . swift in Sources * / , 
 	 	 	 	 066A52281BC4EEAC000E606E / * AAManagedTableController . swift in Sources * / , 
 	 	 	 	 065975541BC7DF5100B8C7DF / * CocoaAssetsRuntime . swift in Sources * / , 
 + 	 	 	 	 06E7B2521C1345E70090660C / * AAMapPinPointView . swift in Sources * / , 
 	 	 	 	 066A53121BC53317000E606E / * AAPhotoPreviewController . swift in Sources * / , 
 	 	 	 	 066A52391BC4EEBA000E606E / * AAEditCell . swift in Sources * / , 
 	 	 	 	 066A526D1BC50E8B000E606E / * AAAuthCountryCell . swift in Sources * / , 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPin . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPin . imageset / Contents . json 
 index 3f92572 . . e9b740d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPin . imageset / Contents . json 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPin . imageset / Contents . json 
 @ @ - 2 , 8 + 2 , 16 @ @ 
 " images " : [ 
 { 
 " idiom " : " universal " , 
 + " scale " : " 1x " 
 + } , 
 + { 
 + " idiom " : " universal " , 
 " filename " : " LocationPin @ 2x . png " , 
 " scale " : " 2x " 
 + } , 
 + { 
 + " idiom " : " universal " , 
 + " scale " : " 3x " 
 } 
 ] , 
 " info " : { 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / Contents . json 
 new file mode 100644 
 index 0000000 . . 41ae8d7 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / Contents . json 
 @ @ - 0 , 0 + 1 , 13 @ @ 
 + { 
 + " images " : [ 
 + { 
 + " idiom " : " universal " , 
 + " filename " : " LocationPinPoint @ 2x . png " , 
 + " scale " : " 2x " 
 + } 
 + ] , 
 + " info " : { 
 + " version " : 1 , 
 + " author " : " xcode " 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / LocationPinPoint @ 2x . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / LocationPinPoint @ 2x . png 
 new file mode 100644 
 index 0000000 . . 7584de8 
 Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinPoint . imageset / LocationPinPoint @ 2x . png differ 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / Contents . json b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / Contents . json 
 new file mode 100644 
 index 0000000 . . 0bd0b69 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / Contents . json 
 @ @ - 0 , 0 + 1 , 13 @ @ 
 + { 
 + " images " : [ 
 + { 
 + " idiom " : " universal " , 
 + " filename " : " LocationPinShadow @ 2x . png " , 
 + " scale " : " 2x " 
 + } 
 + ] , 
 + " info " : { 
 + " version " : 1 , 
 + " author " : " xcode " 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / LocationPinShadow @ 2x . png b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / LocationPinShadow @ 2x . png 
 new file mode 100644 
 index 0000000 . . 3bc04a4 
 Binary files / dev / null and b / actor - sdk / sdk - core - ios / ActorSDK / Resources / Images . xcassets / LocationPinShadow . imageset / LocationPinShadow @ 2x . png differ 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleLocationCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleLocationCell . swift 
 index 1c539ce . . 79edd4d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleLocationCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleLocationCell . swift 
 @ @ - 119 , 11 + 119 , 12 @ @ public class AABubbleLocationCell : AABubbleCell { 
 
 public override func layoutContent ( maxWidth : CGFloat , offsetX : CGFloat ) { 
 let insets = fullContentInsets 
 + let contentWidth = self . contentView . frame . width 
 
 layoutBubble ( mapWidth , contentHeight : mapHeight ) 
 
 if isOut { 
 - map . frame = CGRectMake ( maxWidth - insets . right - mapWidth , insets . top , mapWidth , mapHeight ) 
 + map . frame = CGRectMake ( contentWidth - insets . right - mapWidth , insets . top , mapWidth , mapHeight ) 
 } else { 
 map . frame = CGRectMake ( insets . left , insets . top , mapWidth , mapHeight ) 
 } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 index 8d0cdcc . . 52a8665 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 @ @ - 6 , 7 + 6 , 7 @ @ import Foundation 
 import UIKit 
 import MobileCoreServices 
 
 - class ConversationViewController : AAConversationContentController , UIDocumentMenuDelegate , UIDocumentPickerDelegate , UIImagePickerControllerDelegate , UINavigationControllerDelegate { 
 + class ConversationViewController : AAConversationContentController , UIDocumentMenuDelegate , UIDocumentPickerDelegate , UIImagePickerControllerDelegate , UINavigationControllerDelegate , AALocationPickerControllerDelegate { 
 
 / / Data binder 
 private let binder = AABinder ( ) 
 @ @ - 462 , 6 + 462 , 17 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 / / Location picking 
 
 func pickLocation ( ) { 
 - self . presentViewController ( AANavigationController ( rootViewController : AALocationPickerController ( ) ) , animated : true , completion : nil ) 
 + let pickerController = AALocationPickerController ( ) 
 + pickerController . delegate = self 
 + self . presentViewController ( AANavigationController ( rootViewController : pickerController ) , animated : true , completion : nil ) 
 + } 
 + 
 + func locationPickerDidCancelled ( controller : AALocationPickerController ) { 
 + controller . dismissViewControllerAnimated ( true , completion : nil ) 
 + } 
 + 
 + func locationPickerDidPicked ( controller : AALocationPickerController , latitude : Double , longitude : Double ) { 
 + Actor . sendLocationWithPeer ( self . peer , withLongitude : JavaLangDouble ( double : longitude ) , withLatitude : JavaLangDouble ( double : latitude ) , withStreet : nil , withPlace : nil ) 
 + controller . dismissViewControllerAnimated ( true , completion : nil ) 
 } 
 } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / AALocationPickerController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / AALocationPickerController . swift 
 new file mode 100644 
 index 0000000 . . 4366550 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / AALocationPickerController . swift 
 @ @ - 0 , 0 + 1 , 93 @ @ 
 + / / 
 + / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > 
 + / / 
 + 
 + import Foundation 
 + import MapKit 
 + 
 + public class AALocationPickerController : AAViewController , CLLocationManagerDelegate , MKMapViewDelegate { 
 + 
 + public var delegate : AALocationPickerControllerDelegate ? = nil 
 + 
 + private let locationManager = CLLocationManager ( ) 
 + private let map = MKMapView ( ) 
 + private let pinPoint = AAMapPinPointView ( ) 
 + 
 + override public func viewDidLoad ( ) { 
 + super . viewDidLoad ( ) 
 + 
 + navigationItem . title = " Location " 
 + navigationItem . leftBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationCancel " ) , style : . Plain , target : self , action : " cancellDidTap " ) 
 + 
 + updateAuthStatus ( CLLocationManager . authorizationStatus ( ) ) 
 + 
 + locationManager . delegate = self 
 + 
 + locationManager . requestWhenInUseAuthorization ( ) 
 + locationManager . startUpdatingLocation ( ) 
 + 
 + map . showsUserLocation = true 
 + map . delegate = self 
 + 
 + self . view . addSubview ( map ) 
 + self . view . addSubview ( pinPoint ) 
 + } 
 + 
 + public func mapView ( mapView : MKMapView , regionWillChangeAnimated animated : Bool ) { 
 + pinPoint . risePin ( true , animated : animated ) 
 + } 
 + 
 + public func mapView ( mapView : MKMapView , regionDidChangeAnimated animated : Bool ) { 
 + pinPoint . risePin ( false , animated : animated ) 
 + } 
 + 
 + func cancellDidTap ( ) { 
 + delegate ? . locationPickerDidCancelled ( self ) 
 + } 
 + 
 + func doneDidTap ( ) { 
 + delegate ? . locationPickerDidPicked ( self , latitude : map . centerCoordinate . latitude , longitude : map . centerCoordinate . longitude ) 
 + } 
 + 
 + func updateAuthStatus ( status : CLAuthorizationStatus ) { 
 + if ( status = = CLAuthorizationStatus . Denied ) { 
 + / / User explictly denied access to maps 
 + showPlaceholderWithImage ( UIImage . bundled ( " " ) , title : " Enable location " , subtitle : " Enable location services in settings . " ) 
 + map . hidden = true 
 + navigationItem . rightBarButtonItem = nil 
 + } else if ( status = = CLAuthorizationStatus . Restricted | | status = = CLAuthorizationStatus . NotDetermined ) { 
 + / / App doesn ' t complete auth request 
 + map . hidden = false 
 + navigationItem . rightBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationDone " ) , style : . Done , target : self , action : " doneDidTap " ) 
 + hidePlaceholder ( ) 
 + } else { 
 + / / Authorised 
 + map . hidden = false 
 + navigationItem . rightBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationDone " ) , style : . Done , target : self , action : " doneDidTap " ) 
 + hidePlaceholder ( ) 
 + } 
 + } 
 + 
 + override public func viewDidLayoutSubviews ( ) { 
 + super . viewDidLayoutSubviews ( ) 
 + 
 + map . frame = self . view . bounds 
 + / / pinPoint . bounds = CGRectMake ( 0 , 0 , 100 , 100 ) 
 + pinPoint . centerIn ( self . view . bounds ) 
 + } 
 + 
 + public func locationManager ( manager : CLLocationManager , didChangeAuthorizationStatus status : CLAuthorizationStatus ) { 
 + updateAuthStatus ( status ) 
 + } 
 + 
 + public func locationManager ( manager : CLLocationManager , didUpdateLocations locations : [ CLLocation ] ) { 
 + let location = locations . first ! 
 + map . setRegion ( MKCoordinateRegion ( center : location . coordinate , span : MKCoordinateSpanMake ( 0 . 05 , 0 . 05 ) ) , animated : true ) 
 + locationManager . stopUpdatingLocation ( ) 
 + } 
 + } 
 + 
 + public protocol AALocationPickerControllerDelegate { 
 + func locationPickerDidPicked ( controller : AALocationPickerController , latitude : Double , longitude : Double ) 
 + func locationPickerDidCancelled ( controller : AALocationPickerController ) 
 + } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / LocationPickerController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / LocationPickerController . swift 
 deleted file mode 100644 
 index f0771bb . . 0000000 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Location / LocationPickerController . swift 
 + + + / dev / null 
 @ @ - 1 , 41 + 0 , 0 @ @ 
 - / / 
 - / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > 
 - / / 
 - 
 - import Foundation 
 - import MapKit 
 - 
 - class AALocationPickerController : AAViewController { 
 - 
 - let locationManager = CLLocationManager ( ) 
 - let map = MKMapView ( ) 
 - 
 - override func viewDidLoad ( ) { 
 - super . viewDidLoad ( ) 
 - 
 - navigationItem . title = " Location " 
 - navigationItem . leftBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationCancel " ) , style : . Plain , target : self , action : " cancellDidTap " ) 
 - navigationItem . rightBarButtonItem = UIBarButtonItem ( title : AALocalized ( " NavigationDone " ) , style : . Done , target : self , action : " doneDidTap " ) 
 - 
 - locationManager . requestWhenInUseAuthorization ( ) 
 - 
 - map . showsUserLocation = true 
 - map . userTrackingMode = MKUserTrackingMode . Follow 
 - 
 - self . view . addSubview ( map ) 
 - } 
 - 
 - func cancellDidTap ( ) { 
 - dismiss ( ) 
 - } 
 - 
 - func doneDidTap ( ) { 
 - dismiss ( ) 
 - } 
 - 
 - override func viewDidLayoutSubviews ( ) { 
 - super . viewDidLayoutSubviews ( ) 
 - 
 - map . frame = self . view . bounds 
 - } 
 - } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Views . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Views . swift 
 index 3705da0 . . f2c6164 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Views . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Views . swift 
 @ @ - 65 , 6 + 65 , 11 @ @ public extension UIView { 
 public var right : CGFloat { get { return frame . maxX } } 
 public var top : CGFloat { get { return frame . minY } } 
 public var bottom : CGFloat { get { return frame . maxY } } 
 + 
 + public func centerIn ( rect : CGRect ) { 
 + self . frame = CGRectMake ( ( rect . width - self . bounds . width ) / 2 , ( rect . height - self . bounds . height ) / 2 , 
 + self . bounds . width , self . bounds . height ) 
 + } 
 } 
 
 / / Text measuring 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / AAMapPinPointView . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / AAMapPinPointView . swift 
 new file mode 100644 
 index 0000000 . . ff92ae3 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / AAMapPinPointView . swift 
 @ @ - 0 , 0 + 1 , 41 @ @ 
 + / / 
 + / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > 
 + / / 
 + 
 + import Foundation 
 + 
 + public class AAMapPinPointView : UIView { 
 + 
 + let pinView = UIImageView ( ) 
 + let pinPointView = UIImageView ( ) 
 + let pinShadowView = UIImageView ( ) 
 + 
 + public init ( ) { 
 + super . init ( frame : CGRectMake ( 0 , 0 , 100 , 100 ) ) 
 + 
 + pinShadowView . frame = CGRectMake ( 43 , 47 , 32 , 39 ) 
 + pinShadowView . alpha = 0 . 9 
 + pinShadowView . image = UIImage . bundled ( " LocationPinShadow . png " ) 
 + addSubview ( pinShadowView ) 
 + 
 + pinPointView . frame = CGRectMake ( 100 / 2 - 2 , 100 - 18 . 5 , 3 . 5 , 1 . 5 ) 
 + pinPointView . image = UIImage . bundled ( " LocationPinPoint . png " ) 
 + addSubview ( pinPointView ) 
 + 
 + pinView . frame = CGRectMake ( 100 / 2 - 7 , 47 , 13 . 5 , 36 ) 
 + pinView . image = UIImage . bundled ( " LocationPin . png " ) 
 + addSubview ( pinView ) 
 + } 
 + 
 + required public init ? ( coder aDecoder : NSCoder ) { 
 + fatalError ( " init ( coder : ) has not been implemented " ) 
 + } 
 + 
 + func risePin ( rised : Bool , animated : Bool ) { 
 + if ( rised ) { 
 + pinView . hidden = true 
 + } else { 
 + pinView . hidden = false 
 + } 
 + } 
 + } 
 \ No newline at end of file
