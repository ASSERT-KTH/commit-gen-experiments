BLEU SCORE: 0.09977283359412498

TEST MSG: refactor ( server ) : reformat
GENERATED MSG: fix ( server : push ) : fixed successful delivery report

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > index 6283f80 . . 3161599 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > @ @ - 76 , 7 + 76 , 7 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { < nl > . mapAsync ( 1 ) { < nl > case ( Success ( resp ) , delivery ) ⇒ < nl > if ( resp . status = = StatusCodes . OK ) { < nl > - resp . entity . dataBytes . runFold ( ByteString . empty ) ( _ + + _ ) map ( bs = > Xor . Right ( bs → delivery ) ) < nl > + resp . entity . dataBytes . runFold ( ByteString . empty ) ( _ + + _ ) map ( bs ⇒ Xor . Right ( bs → delivery ) ) < nl > } else FastFuture . successful ( Xor . Left ( new RuntimeException ( s " Failed to deliver message , StatusCode was not OK : $ { resp . status } " ) ) ) < nl > case ( Failure ( e ) , delivery ) ⇒ < nl > FastFuture . successful ( Xor . Left ( e ) ) < nl > @ @ - 105 , 7 + 105 , 7 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { < nl > } < nl > case Xor . Left ( failure ) ⇒ log . error ( failure . underlying , " Failed to parse response " ) < nl > } < nl > - case Xor . Left ( e ) = > < nl > + case Xor . Left ( e ) ⇒ < nl > log . error ( e , " Failure " ) < nl > } onComplete { < nl > case Failure ( e ) ⇒ log . error ( e , " Failure in stream " )
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > index 62c59a6 . . 6283f80 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala < nl > @ @ - 88 , 7 + 88 , 7 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { < nl > case Xor . Right ( json ) ⇒ < nl > json . asObject match { < nl > case Some ( obj ) ⇒ < nl > - obj ( " error " ) map ( _ . asString ) foreach { < nl > + obj ( " error " ) flatMap ( _ . asString ) match { < nl > case Some ( " InvalidRegistration " ) ⇒ < nl > log . warning ( " Invalid registration , deleting " ) < nl > remove ( delivery . m . to )

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 index 6283f80 . . 3161599 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 @ @ - 76 , 7 + 76 , 7 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { 
 . mapAsync ( 1 ) { 
 case ( Success ( resp ) , delivery ) ⇒ 
 if ( resp . status = = StatusCodes . OK ) { 
 - resp . entity . dataBytes . runFold ( ByteString . empty ) ( _ + + _ ) map ( bs = > Xor . Right ( bs → delivery ) ) 
 + resp . entity . dataBytes . runFold ( ByteString . empty ) ( _ + + _ ) map ( bs ⇒ Xor . Right ( bs → delivery ) ) 
 } else FastFuture . successful ( Xor . Left ( new RuntimeException ( s " Failed to deliver message , StatusCode was not OK : $ { resp . status } " ) ) ) 
 case ( Failure ( e ) , delivery ) ⇒ 
 FastFuture . successful ( Xor . Left ( e ) ) 
 @ @ - 105 , 7 + 105 , 7 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { 
 } 
 case Xor . Left ( failure ) ⇒ log . error ( failure . underlying , " Failed to parse response " ) 
 } 
 - case Xor . Left ( e ) = > 
 + case Xor . Left ( e ) ⇒ 
 log . error ( e , " Failure " ) 
 } onComplete { 
 case Failure ( e ) ⇒ log . error ( e , " Failure in stream " )

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 index 62c59a6 . . 6283f80 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushExtension . scala 
 @ @ - 88 , 7 + 88 , 7 @ @ final class GooglePushExtension ( system : ActorSystem ) extends Extension { 
 case Xor . Right ( json ) ⇒ 
 json . asObject match { 
 case Some ( obj ) ⇒ 
 - obj ( " error " ) map ( _ . asString ) foreach { 
 + obj ( " error " ) flatMap ( _ . asString ) match { 
 case Some ( " InvalidRegistration " ) ⇒ 
 log . warning ( " Invalid registration , deleting " ) 
 remove ( delivery . m . to )
