BLEU SCORE: 0.32260135189272865

TEST MSG: design ( android ) : reorder attach menu
GENERATED MSG: feat ( android ) : fast share menu send

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index 17673ac . . 273f9fc 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 329 , 8 + 329 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } < nl > } ) ; < nl > < nl > - final TextView locationText = ( TextView ) findViewById ( R . id . location _ text ) ; < nl > - final View shareLocation = findViewById ( R . id . share _ location ) ; < nl > + final TextView contactText = ( TextView ) findViewById ( R . id . contact _ text ) ; < nl > + final View shareContact = findViewById ( R . id . share _ contact ) ; < nl > findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; < nl > / / try { < nl > / / ApplicationInfo app = ChatActivity . this . getPackageManager ( ) . getApplicationInfo ( ChatActivity . this . getPackageName ( ) , PackageManager . GET _ META _ DATA ) ; < nl > @ @ - 339 , 12 + 339 , 12 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > / / if ( bundle . containsKey ( " com . google . android . geo . API _ KEY " ) ) { < nl > / / shareLocation . setVisibility ( View . VISIBLE ) ; < nl > / / findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; < nl > - / / locationText . setVisibility ( View . VISIBLE ) ; < nl > + / / contactText . setVisibility ( View . VISIBLE ) ; < nl > / / < nl > / / } else { < nl > / / shareLocation . setVisibility ( View . GONE ) ; < nl > / / findViewById ( R . id . share _ hide ) . setVisibility ( View . VISIBLE ) ; < nl > - / / locationText . setVisibility ( View . INVISIBLE ) ; < nl > + / / contactText . setVisibility ( View . INVISIBLE ) ; < nl > / / Log . w ( " Actor - GoogleMaps " , " please , set up google map api key in AndroidManifest metadata to enable share locations " ) ; < nl > / / } < nl > / / } catch ( PackageManager . NameNotFoundException e ) { < nl > @ @ - 413 , 10 + 413 , 10 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > findViewById ( R . id . share _ gallery ) . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ video ) . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ camera ) . setOnClickListener ( shareMenuOCL ) ; < nl > - shareLocation . setOnClickListener ( shareMenuOCL ) ; < nl > + shareContact . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ file ) . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ hide ) . setOnClickListener ( shareMenuOCL ) ; < nl > - findViewById ( R . id . share _ contact ) . setOnClickListener ( shareMenuOCL ) ; < nl > + findViewById ( R . id . share _ location ) . setOnClickListener ( shareMenuOCL ) ; < nl > handleIntent ( ) ; < nl > < nl > final ImageButton shareMenuSend = ( ImageButton ) findViewById ( R . id . share _ send ) ; < nl > @ @ - 444 , 13 + 444 , 13 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > @ Override < nl > public void onChanged ( Set < String > val , Value < Set < String > > valueModel ) { < nl > if ( val . size ( ) > 0 ) { < nl > - shareLocation . setVisibility ( View . INVISIBLE ) ; < nl > + shareContact . setVisibility ( View . INVISIBLE ) ; < nl > shareMenuSend . setVisibility ( View . VISIBLE ) ; < nl > - locationText . setText ( getString ( R . string . chat _ doc _ send ) + " ( " + val . size ( ) + " ) " ) ; < nl > + contactText . setText ( getString ( R . string . chat _ doc _ send ) + " ( " + val . size ( ) + " ) " ) ; < nl > } else { < nl > - shareLocation . setVisibility ( View . VISIBLE ) ; < nl > + shareContact . setVisibility ( View . VISIBLE ) ; < nl > shareMenuSend . setVisibility ( View . INVISIBLE ) ; < nl > - locationText . setText ( getString ( R . string . share _ menu _ location ) ) ; < nl > + contactText . setText ( getString ( R . string . share _ menu _ contact ) ) ; < nl > } < nl > } < nl > } ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / BubbleContainer . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / BubbleContainer . java < nl > index c228431 . . 82c040d 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / BubbleContainer . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / BubbleContainer . java < nl > @ @ - 103 , 7 + 103 , 7 @ @ public class BubbleContainer extends ViewGroup { < nl > < nl > / / AVATAR < nl > avatarView = new AvatarViewWithOnline ( getContext ( ) ) ; < nl > - avatarView . init ( Screen . dp ( 42 ) , 12 ) ; < nl > + avatarView . init ( Screen . dp ( 42 ) , 24 ) ; < nl > addView ( avatarView , new MarginLayoutParams ( Screen . dp ( 42 ) , Screen . dp ( 42 ) ) ) ; < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > index 7c7230f . . 06314ad 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > @ @ - 113 , 57 + 113 , 60 @ @ < nl > < nl > < LinearLayout < nl > android : gravity = " center _ horizontal " < nl > - android : layout _ width = " wrap _ content " < nl > + android : layout _ width = " 0dp " < nl > + android : layout _ weight = " 1 " < nl > android : layout _ height = " wrap _ content " < nl > android : orientation = " vertical " > < nl > < nl > < Button < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ file " < nl > - android : background = " @ drawable / share _ file _ selector " / > < nl > + android : id = " @ + id / share _ camera " < nl > + android : background = " @ drawable / share _ camera _ selector " / > < nl > < nl > < TextView < nl > android : layout _ width = " wrap _ content " < nl > android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ file " / > < nl > - < nl > + android : text = " @ string / share _ menu _ camera " / > < nl > < / LinearLayout > < nl > < nl > < LinearLayout < nl > android : gravity = " center _ horizontal " < nl > - android : layout _ width = " wrap _ content " < nl > + android : layout _ width = " 0dp " < nl > + android : layout _ weight = " 1 " < nl > android : layout _ height = " wrap _ content " < nl > android : orientation = " vertical " > < nl > < nl > < Button < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ video " < nl > - android : background = " @ drawable / share _ video _ selector " / > < nl > + android : id = " @ + id / share _ gallery " < nl > + android : background = " @ drawable / share _ gallery _ selector " / > < nl > < nl > < TextView < nl > android : layout _ width = " wrap _ content " < nl > android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ video " / > < nl > + android : text = " @ string / share _ menu _ gallery " / > < nl > + < nl > < / LinearLayout > < nl > < nl > < LinearLayout < nl > + android : layout _ width = " 0dp " < nl > + android : layout _ weight = " 1 " < nl > android : gravity = " center _ horizontal " < nl > - android : layout _ width = " wrap _ content " < nl > android : layout _ height = " wrap _ content " < nl > android : orientation = " vertical " > < nl > < nl > < Button < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ contact " < nl > - android : background = " @ drawable / share _ contact _ selector " / > < nl > + android : id = " @ + id / share _ video " < nl > + android : background = " @ drawable / share _ video _ selector " / > < nl > < nl > < TextView < nl > android : layout _ width = " wrap _ content " < nl > android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ contact " / > < nl > + android : text = " @ string / share _ menu _ video " / > < nl > < / LinearLayout > < nl > < nl > < / TableRow > < nl > @ @ - 171 , 22 + 174 , 22 @ @ < nl > < TableRow > < nl > < nl > < LinearLayout < nl > - android : gravity = " center _ horizontal " < nl > android : layout _ width = " 0dp " < nl > android : layout _ weight = " 1 " < nl > + android : gravity = " center _ horizontal " < nl > android : layout _ height = " wrap _ content " < nl > android : orientation = " vertical " > < nl > < nl > < Button < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ gallery " < nl > - android : background = " @ drawable / share _ gallery _ selector " / > < nl > + android : id = " @ + id / share _ file " < nl > + android : background = " @ drawable / share _ file _ selector " / > < nl > < nl > < TextView < nl > android : layout _ width = " wrap _ content " < nl > android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ gallery " / > < nl > + android : text = " @ string / share _ menu _ file " / > < nl > < nl > < / LinearLayout > < nl > < nl > @ @ - 200 , 19 + 203 , 27 @ @ < nl > < Button < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ camera " < nl > - android : background = " @ drawable / share _ camera _ selector " / > < nl > + android : id = " @ + id / share _ location " < nl > + android : background = " @ drawable / share _ location _ selector " / > < nl > + < nl > + < ImageButton < nl > + android : layout _ width = " @ dimen / share _ btn _ size " < nl > + android : layout _ height = " @ dimen / share _ btn _ size " < nl > + android : id = " @ + id / share _ hide " < nl > + android : background = " @ drawable / share _ hide _ selector " < nl > + android : src = " @ drawable / attach _ hide2 " / > < nl > < nl > < TextView < nl > + android : id = " @ + id / location _ text " < nl > android : layout _ width = " wrap _ content " < nl > android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ camera " / > < nl > + android : text = " @ string / share _ menu _ location " / > < nl > < / LinearLayout > < nl > < nl > < LinearLayout < nl > - android : gravity = " center _ horizontal " < nl > android : layout _ width = " 0dp " < nl > android : layout _ weight = " 1 " < nl > + android : gravity = " center _ horizontal " < nl > android : layout _ height = " wrap _ content " < nl > android : orientation = " vertical " > < nl > < nl > @ @ - 223 , 8 + 234 , 9 @ @ < nl > < Button < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ location " < nl > - android : background = " @ drawable / share _ location _ selector " / > < nl > + android : id = " @ + id / share _ contact " < nl > + android : background = " @ drawable / share _ contact _ selector " / > < nl > + < nl > < nl > < ImageButton < nl > android : visibility = " invisible " < nl > @ @ - 237 , 22 + 249 , 14 @ @ < nl > android : src = " @ drawable / conv _ send " < nl > android : background = " @ drawable / share _ send _ selector " / > < nl > < nl > - < nl > < / FrameLayout > < nl > < nl > - < nl > - < ImageButton < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ hide " < nl > - android : background = " @ drawable / share _ hide _ selector " < nl > - android : src = " @ drawable / attach _ hide2 " / > < nl > - < nl > < TextView < nl > - android : id = " @ + id / location _ text " < nl > + android : id = " @ + id / contact _ text " < nl > android : layout _ width = " wrap _ content " < nl > android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ location " / > < nl > + android : text = " @ string / share _ menu _ contact " / > < nl > + < nl > < / LinearLayout > < nl > < nl > < / TableRow >
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index 458cd83 . . fdbfe89 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 10 , 6 + 10 , 7 @ @ import android . content . pm . ApplicationInfo ; < nl > import android . content . pm . PackageManager ; < nl > import android . content . res . Configuration ; < nl > import android . database . Cursor ; < nl > + import android . graphics . Color ; < nl > import android . graphics . PorterDuff ; < nl > import android . media . MediaScannerConnection ; < nl > import android . net . Uri ; < nl > @ @ - 37 , 7 + 38 , 9 @ @ import android . view . animation . AlphaAnimation ; < nl > import android . view . animation . Animation ; < nl > import android . view . animation . TranslateAnimation ; < nl > import android . widget . AdapterView ; < nl > + import android . widget . Button ; < nl > import android . widget . FrameLayout ; < nl > + import android . widget . ImageButton ; < nl > import android . widget . ImageView ; < nl > import android . widget . ListView ; < nl > import android . widget . TextView ; < nl > @ @ - 45 , 6 + 48 , 7 @ @ import android . widget . Toast ; < nl > < nl > import java . io . File ; < nl > import java . util . ArrayList ; < nl > + import java . util . Set ; < nl > < nl > import im . actor . core . api . rpc . ResponseSeqDate ; < nl > import im . actor . core . entity . MentionFilterResult ; < nl > @ @ - 314 , 19 + 318 , 21 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } < nl > } ) ; < nl > < nl > + final TextView locationText = ( TextView ) findViewById ( R . id . location _ text ) ; < nl > + final View shareLocation = findViewById ( R . id . share _ location ) ; < nl > try { < nl > ApplicationInfo app = ChatActivity . this . getPackageManager ( ) . getApplicationInfo ( ChatActivity . this . getPackageName ( ) , PackageManager . GET _ META _ DATA ) ; < nl > Bundle bundle = app . metaData ; < nl > < nl > if ( bundle . containsKey ( " com . google . android . geo . API _ KEY " ) ) { < nl > - findViewById ( R . id . share _ location ) . setVisibility ( View . VISIBLE ) ; < nl > + shareLocation . setVisibility ( View . VISIBLE ) ; < nl > findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; < nl > - findViewById ( R . id . location _ hide _ text ) . setVisibility ( View . VISIBLE ) ; < nl > + locationText . setVisibility ( View . VISIBLE ) ; < nl > < nl > } else { < nl > - findViewById ( R . id . share _ location ) . setVisibility ( View . GONE ) ; < nl > + shareLocation . setVisibility ( View . GONE ) ; < nl > findViewById ( R . id . share _ hide ) . setVisibility ( View . VISIBLE ) ; < nl > - findViewById ( R . id . location _ hide _ text ) . setVisibility ( View . INVISIBLE ) ; < nl > + locationText . setVisibility ( View . INVISIBLE ) ; < nl > Log . w ( " Actor - GoogleMaps " , " please , set up google map api key in AndroidManifest metadata to enable share locations " ) ; < nl > } < nl > } catch ( PackageManager . NameNotFoundException e ) { < nl > @ @ - 395 , 18 + 401 , 45 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > findViewById ( R . id . share _ gallery ) . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ video ) . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ camera ) . setOnClickListener ( shareMenuOCL ) ; < nl > - findViewById ( R . id . share _ location ) . setOnClickListener ( shareMenuOCL ) ; < nl > + shareLocation . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ file ) . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ hide ) . setOnClickListener ( shareMenuOCL ) ; < nl > findViewById ( R . id . share _ contact ) . setOnClickListener ( shareMenuOCL ) ; < nl > handleIntent ( ) ; < nl > < nl > RecyclerView fastShare = ( RecyclerView ) findViewById ( R . id . fast _ share ) ; < nl > - FastShareAdapter fastShareAdapter = new FastShareAdapter ( this ) ; < nl > + final FastShareAdapter fastShareAdapter = new FastShareAdapter ( this ) ; < nl > LinearLayoutManager layoutManager = new LinearLayoutManager ( this , LinearLayoutManager . HORIZONTAL , false ) ; < nl > fastShare . setAdapter ( fastShareAdapter ) ; < nl > fastShare . setLayoutManager ( layoutManager ) ; < nl > < nl > + final ImageButton shareMenuSend = ( ImageButton ) findViewById ( R . id . share _ send ) ; < nl > + shareMenuSend . setColorFilter ( Color . WHITE , PorterDuff . Mode . SRC _ IN ) ; < nl > + shareMenuSend . setOnClickListener ( new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > + Set < String > strings = fastShareAdapter . getSelectedVM ( ) . get ( ) ; < nl > + for ( String s : strings . toArray ( new String [ strings . size ( ) ] ) ) { < nl > + execute ( messenger ( ) . sendUri ( peer , Uri . fromFile ( new File ( s ) ) ) ) ; < nl > + } < nl > + fastShareAdapter . clearSelected ( ) ; < nl > + hideShare ( ) ; < nl > + } < nl > + } ) ; < nl > + fastShareAdapter . getSelectedVM ( ) . subscribe ( new ValueChangedListener < Set < String > > ( ) { < nl > + @ Override < nl > + public void onChanged ( Set < String > val , Value < Set < String > > valueModel ) { < nl > + if ( val . size ( ) > 0 ) { < nl > + shareLocation . setVisibility ( View . INVISIBLE ) ; < nl > + shareMenuSend . setVisibility ( View . VISIBLE ) ; < nl > + locationText . setText ( getString ( R . string . chat _ doc _ send ) + " ( " + val . size ( ) + " ) " ) ; < nl > + } else { < nl > + shareLocation . setVisibility ( View . VISIBLE ) ; < nl > + shareMenuSend . setVisibility ( View . INVISIBLE ) ; < nl > + locationText . setText ( getString ( R . string . share _ menu _ location ) ) ; < nl > + } < nl > + } < nl > + } ) ; < nl > } < nl > < nl > private void startCamera ( ) { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / FastShareAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / FastShareAdapter . java < nl > index a7cc631 . . 84bc441 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / FastShareAdapter . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / FastShareAdapter . java < nl > @ @ - 24 , 6 + 24 , 7 @ @ import java . util . Set ; < nl > < nl > import im . actor . runtime . mvvm . Value ; < nl > import im . actor . runtime . mvvm . ValueChangedListener ; < nl > + import im . actor . runtime . mvvm . ValueModel ; < nl > import im . actor . sdk . R ; < nl > import im . actor . sdk . util . Screen ; < nl > < nl > @ @ - 32 , 8 + 33 , 9 @ @ import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > public class FastShareAdapter extends RecyclerView . Adapter < FastShareAdapter . FastShareVH > { < nl > < nl > ArrayList < String > imagesPath = new ArrayList < > ( ) ; < nl > - Set < String > selected = new HashSet < > ( ) ; < nl > + Set < String > selected = new HashSet < String > ( ) ; < nl > Context context ; < nl > + private ValueModel < Set < String > > selectedVM ; < nl > < nl > public FastShareAdapter ( Context context ) { < nl > this . context = context ; < nl > @ @ - 45 , 6 + 47 , 7 @ @ public class FastShareAdapter extends RecyclerView . Adapter < FastShareAdapter . Fast < nl > notifyDataSetChanged ( ) ; < nl > } < nl > } ) ; < nl > + selectedVM = new ValueModel < Set < String > > ( " fast _ share . selected " , new HashSet < String > ( ) ) ; < nl > } < nl > < nl > protected View inflate ( int id , ViewGroup viewGroup ) { < nl > @ @ - 85 , 8 + 88 , 11 @ @ public class FastShareAdapter extends RecyclerView . Adapter < FastShareAdapter . Fast < nl > public void onCheckedChanged ( CompoundButton buttonView , boolean isChecked ) { < nl > if ( isChecked & & data ! = null ) { < nl > selected . add ( data ) ; < nl > + notifyVm ( ) ; < nl > } else { < nl > selected . remove ( data ) ; < nl > + notifyVm ( ) ; < nl > + < nl > } < nl > } < nl > } ) ; < nl > @ @ - 106 , 4 + 112 , 18 @ @ public class FastShareAdapter extends RecyclerView . Adapter < FastShareAdapter . Fast < nl > chb . setChecked ( selected . contains ( data ) ) ; < nl > } < nl > } < nl > + < nl > + public void notifyVm ( ) { < nl > + selectedVM . change ( new HashSet < String > ( selected ) ) ; < nl > + } < nl > + < nl > + public void clearSelected ( ) { < nl > + selected . clear ( ) ; < nl > + notifyVm ( ) ; < nl > + notifyDataSetChanged ( ) ; < nl > + } < nl > + < nl > + public ValueModel < Set < String > > getSelectedVM ( ) { < nl > + return selectedVM ; < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / share _ send _ selector . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / share _ send _ selector . xml < nl > new file mode 100644 < nl > index 0000000 . . 32c664b < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / share _ send _ selector . xml < nl > @ @ - 0 , 0 + 1 , 5 @ @ < nl > + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > < nl > + < selector xmlns : android = " http : / / schemas . android . com / apk / res / android " > < nl > + < item android : state _ pressed = " true " android : drawable = " @ drawable / attach _ send1 " / > < nl > + < item android : drawable = " @ drawable / attach _ send1 _ pressed " / > < nl > + < / selector > < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > index 029cf8f . . 9dc67c7 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > @ @ - 176 , 7 + 176 , 8 @ @ < nl > < nl > < LinearLayout < nl > android : gravity = " center _ horizontal " < nl > - android : layout _ width = " wrap _ content " < nl > + android : layout _ width = " 0dp " < nl > + android : layout _ weight = " 1 " < nl > android : layout _ height = " wrap _ content " < nl > android : orientation = " vertical " > < nl > < nl > @ @ - 195 , 7 + 196 , 8 @ @ < nl > < nl > < LinearLayout < nl > android : gravity = " center _ horizontal " < nl > - android : layout _ width = " wrap _ content " < nl > + android : layout _ width = " 0dp " < nl > + android : layout _ weight = " 1 " < nl > android : layout _ height = " wrap _ content " < nl > android : orientation = " vertical " > < nl > < nl > @ @ - 213 , 15 + 215 , 35 @ @ < nl > < nl > < LinearLayout < nl > android : gravity = " center _ horizontal " < nl > - android : layout _ width = " wrap _ content " < nl > + android : layout _ width = " 0dp " < nl > + android : layout _ weight = " 1 " < nl > android : layout _ height = " wrap _ content " < nl > android : orientation = " vertical " > < nl > < nl > - < Button < nl > + < FrameLayout < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ location " < nl > - android : background = " @ drawable / share _ location _ selector " / > < nl > + android : layout _ height = " @ dimen / share _ btn _ size " > < nl > + < nl > + < Button < nl > + android : layout _ width = " @ dimen / share _ btn _ size " < nl > + android : layout _ height = " @ dimen / share _ btn _ size " < nl > + android : id = " @ + id / share _ location " < nl > + android : background = " @ drawable / share _ location _ selector " / > < nl > + < nl > + < ImageButton < nl > + android : visibility = " invisible " < nl > + android : paddingLeft = " 10dp " < nl > + android : paddingRight = " 5dp " < nl > + android : scaleType = " fitCenter " < nl > + android : layout _ width = " @ dimen / share _ btn _ size " < nl > + android : layout _ height = " @ dimen / share _ btn _ size " < nl > + android : id = " @ + id / share _ send " < nl > + android : src = " @ drawable / conv _ send " < nl > + android : background = " @ drawable / share _ send _ selector " / > < nl > + < nl > + < nl > + < / FrameLayout > < nl > + < nl > < nl > < ImageButton < nl > android : layout _ width = " @ dimen / share _ btn _ size " < nl > @ @ - 231 , 7 + 253 , 7 @ @ < nl > android : src = " @ drawable / attach _ hide2 " / > < nl > < nl > < TextView < nl > - android : id = " @ + id / location _ hide _ text " < nl > + android : id = " @ + id / location _ text " < nl > android : layout _ width = " wrap _ content " < nl > android : layout _ height = " wrap _ content " < nl > android : text = " @ string / share _ menu _ location " / >

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index 17673ac . . 273f9fc 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 329 , 8 + 329 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } 
 } ) ; 
 
 - final TextView locationText = ( TextView ) findViewById ( R . id . location _ text ) ; 
 - final View shareLocation = findViewById ( R . id . share _ location ) ; 
 + final TextView contactText = ( TextView ) findViewById ( R . id . contact _ text ) ; 
 + final View shareContact = findViewById ( R . id . share _ contact ) ; 
 findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; 
 / / try { 
 / / ApplicationInfo app = ChatActivity . this . getPackageManager ( ) . getApplicationInfo ( ChatActivity . this . getPackageName ( ) , PackageManager . GET _ META _ DATA ) ; 
 @ @ - 339 , 12 + 339 , 12 @ @ public class ChatActivity extends ActorEditTextActivity { 
 / / if ( bundle . containsKey ( " com . google . android . geo . API _ KEY " ) ) { 
 / / shareLocation . setVisibility ( View . VISIBLE ) ; 
 / / findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; 
 - / / locationText . setVisibility ( View . VISIBLE ) ; 
 + / / contactText . setVisibility ( View . VISIBLE ) ; 
 / / 
 / / } else { 
 / / shareLocation . setVisibility ( View . GONE ) ; 
 / / findViewById ( R . id . share _ hide ) . setVisibility ( View . VISIBLE ) ; 
 - / / locationText . setVisibility ( View . INVISIBLE ) ; 
 + / / contactText . setVisibility ( View . INVISIBLE ) ; 
 / / Log . w ( " Actor - GoogleMaps " , " please , set up google map api key in AndroidManifest metadata to enable share locations " ) ; 
 / / } 
 / / } catch ( PackageManager . NameNotFoundException e ) { 
 @ @ - 413 , 10 + 413 , 10 @ @ public class ChatActivity extends ActorEditTextActivity { 
 findViewById ( R . id . share _ gallery ) . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ video ) . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ camera ) . setOnClickListener ( shareMenuOCL ) ; 
 - shareLocation . setOnClickListener ( shareMenuOCL ) ; 
 + shareContact . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ file ) . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ hide ) . setOnClickListener ( shareMenuOCL ) ; 
 - findViewById ( R . id . share _ contact ) . setOnClickListener ( shareMenuOCL ) ; 
 + findViewById ( R . id . share _ location ) . setOnClickListener ( shareMenuOCL ) ; 
 handleIntent ( ) ; 
 
 final ImageButton shareMenuSend = ( ImageButton ) findViewById ( R . id . share _ send ) ; 
 @ @ - 444 , 13 + 444 , 13 @ @ public class ChatActivity extends ActorEditTextActivity { 
 @ Override 
 public void onChanged ( Set < String > val , Value < Set < String > > valueModel ) { 
 if ( val . size ( ) > 0 ) { 
 - shareLocation . setVisibility ( View . INVISIBLE ) ; 
 + shareContact . setVisibility ( View . INVISIBLE ) ; 
 shareMenuSend . setVisibility ( View . VISIBLE ) ; 
 - locationText . setText ( getString ( R . string . chat _ doc _ send ) + " ( " + val . size ( ) + " ) " ) ; 
 + contactText . setText ( getString ( R . string . chat _ doc _ send ) + " ( " + val . size ( ) + " ) " ) ; 
 } else { 
 - shareLocation . setVisibility ( View . VISIBLE ) ; 
 + shareContact . setVisibility ( View . VISIBLE ) ; 
 shareMenuSend . setVisibility ( View . INVISIBLE ) ; 
 - locationText . setText ( getString ( R . string . share _ menu _ location ) ) ; 
 + contactText . setText ( getString ( R . string . share _ menu _ contact ) ) ; 
 } 
 } 
 } ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / BubbleContainer . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / BubbleContainer . java 
 index c228431 . . 82c040d 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / BubbleContainer . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / BubbleContainer . java 
 @ @ - 103 , 7 + 103 , 7 @ @ public class BubbleContainer extends ViewGroup { 
 
 / / AVATAR 
 avatarView = new AvatarViewWithOnline ( getContext ( ) ) ; 
 - avatarView . init ( Screen . dp ( 42 ) , 12 ) ; 
 + avatarView . init ( Screen . dp ( 42 ) , 24 ) ; 
 addView ( avatarView , new MarginLayoutParams ( Screen . dp ( 42 ) , Screen . dp ( 42 ) ) ) ; 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 index 7c7230f . . 06314ad 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 @ @ - 113 , 57 + 113 , 60 @ @ 
 
 < LinearLayout 
 android : gravity = " center _ horizontal " 
 - android : layout _ width = " wrap _ content " 
 + android : layout _ width = " 0dp " 
 + android : layout _ weight = " 1 " 
 android : layout _ height = " wrap _ content " 
 android : orientation = " vertical " > 
 
 < Button 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ file " 
 - android : background = " @ drawable / share _ file _ selector " / > 
 + android : id = " @ + id / share _ camera " 
 + android : background = " @ drawable / share _ camera _ selector " / > 
 
 < TextView 
 android : layout _ width = " wrap _ content " 
 android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ file " / > 
 - 
 + android : text = " @ string / share _ menu _ camera " / > 
 < / LinearLayout > 
 
 < LinearLayout 
 android : gravity = " center _ horizontal " 
 - android : layout _ width = " wrap _ content " 
 + android : layout _ width = " 0dp " 
 + android : layout _ weight = " 1 " 
 android : layout _ height = " wrap _ content " 
 android : orientation = " vertical " > 
 
 < Button 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ video " 
 - android : background = " @ drawable / share _ video _ selector " / > 
 + android : id = " @ + id / share _ gallery " 
 + android : background = " @ drawable / share _ gallery _ selector " / > 
 
 < TextView 
 android : layout _ width = " wrap _ content " 
 android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ video " / > 
 + android : text = " @ string / share _ menu _ gallery " / > 
 + 
 < / LinearLayout > 
 
 < LinearLayout 
 + android : layout _ width = " 0dp " 
 + android : layout _ weight = " 1 " 
 android : gravity = " center _ horizontal " 
 - android : layout _ width = " wrap _ content " 
 android : layout _ height = " wrap _ content " 
 android : orientation = " vertical " > 
 
 < Button 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ contact " 
 - android : background = " @ drawable / share _ contact _ selector " / > 
 + android : id = " @ + id / share _ video " 
 + android : background = " @ drawable / share _ video _ selector " / > 
 
 < TextView 
 android : layout _ width = " wrap _ content " 
 android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ contact " / > 
 + android : text = " @ string / share _ menu _ video " / > 
 < / LinearLayout > 
 
 < / TableRow > 
 @ @ - 171 , 22 + 174 , 22 @ @ 
 < TableRow > 
 
 < LinearLayout 
 - android : gravity = " center _ horizontal " 
 android : layout _ width = " 0dp " 
 android : layout _ weight = " 1 " 
 + android : gravity = " center _ horizontal " 
 android : layout _ height = " wrap _ content " 
 android : orientation = " vertical " > 
 
 < Button 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ gallery " 
 - android : background = " @ drawable / share _ gallery _ selector " / > 
 + android : id = " @ + id / share _ file " 
 + android : background = " @ drawable / share _ file _ selector " / > 
 
 < TextView 
 android : layout _ width = " wrap _ content " 
 android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ gallery " / > 
 + android : text = " @ string / share _ menu _ file " / > 
 
 < / LinearLayout > 
 
 @ @ - 200 , 19 + 203 , 27 @ @ 
 < Button 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ camera " 
 - android : background = " @ drawable / share _ camera _ selector " / > 
 + android : id = " @ + id / share _ location " 
 + android : background = " @ drawable / share _ location _ selector " / > 
 + 
 + < ImageButton 
 + android : layout _ width = " @ dimen / share _ btn _ size " 
 + android : layout _ height = " @ dimen / share _ btn _ size " 
 + android : id = " @ + id / share _ hide " 
 + android : background = " @ drawable / share _ hide _ selector " 
 + android : src = " @ drawable / attach _ hide2 " / > 
 
 < TextView 
 + android : id = " @ + id / location _ text " 
 android : layout _ width = " wrap _ content " 
 android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ camera " / > 
 + android : text = " @ string / share _ menu _ location " / > 
 < / LinearLayout > 
 
 < LinearLayout 
 - android : gravity = " center _ horizontal " 
 android : layout _ width = " 0dp " 
 android : layout _ weight = " 1 " 
 + android : gravity = " center _ horizontal " 
 android : layout _ height = " wrap _ content " 
 android : orientation = " vertical " > 
 
 @ @ - 223 , 8 + 234 , 9 @ @ 
 < Button 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ location " 
 - android : background = " @ drawable / share _ location _ selector " / > 
 + android : id = " @ + id / share _ contact " 
 + android : background = " @ drawable / share _ contact _ selector " / > 
 + 
 
 < ImageButton 
 android : visibility = " invisible " 
 @ @ - 237 , 22 + 249 , 14 @ @ 
 android : src = " @ drawable / conv _ send " 
 android : background = " @ drawable / share _ send _ selector " / > 
 
 - 
 < / FrameLayout > 
 
 - 
 - < ImageButton 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ hide " 
 - android : background = " @ drawable / share _ hide _ selector " 
 - android : src = " @ drawable / attach _ hide2 " / > 
 - 
 < TextView 
 - android : id = " @ + id / location _ text " 
 + android : id = " @ + id / contact _ text " 
 android : layout _ width = " wrap _ content " 
 android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ location " / > 
 + android : text = " @ string / share _ menu _ contact " / > 
 + 
 < / LinearLayout > 
 
 < / TableRow >

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index 458cd83 . . fdbfe89 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 10 , 6 + 10 , 7 @ @ import android . content . pm . ApplicationInfo ; 
 import android . content . pm . PackageManager ; 
 import android . content . res . Configuration ; 
 import android . database . Cursor ; 
 + import android . graphics . Color ; 
 import android . graphics . PorterDuff ; 
 import android . media . MediaScannerConnection ; 
 import android . net . Uri ; 
 @ @ - 37 , 7 + 38 , 9 @ @ import android . view . animation . AlphaAnimation ; 
 import android . view . animation . Animation ; 
 import android . view . animation . TranslateAnimation ; 
 import android . widget . AdapterView ; 
 + import android . widget . Button ; 
 import android . widget . FrameLayout ; 
 + import android . widget . ImageButton ; 
 import android . widget . ImageView ; 
 import android . widget . ListView ; 
 import android . widget . TextView ; 
 @ @ - 45 , 6 + 48 , 7 @ @ import android . widget . Toast ; 
 
 import java . io . File ; 
 import java . util . ArrayList ; 
 + import java . util . Set ; 
 
 import im . actor . core . api . rpc . ResponseSeqDate ; 
 import im . actor . core . entity . MentionFilterResult ; 
 @ @ - 314 , 19 + 318 , 21 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } 
 } ) ; 
 
 + final TextView locationText = ( TextView ) findViewById ( R . id . location _ text ) ; 
 + final View shareLocation = findViewById ( R . id . share _ location ) ; 
 try { 
 ApplicationInfo app = ChatActivity . this . getPackageManager ( ) . getApplicationInfo ( ChatActivity . this . getPackageName ( ) , PackageManager . GET _ META _ DATA ) ; 
 Bundle bundle = app . metaData ; 
 
 if ( bundle . containsKey ( " com . google . android . geo . API _ KEY " ) ) { 
 - findViewById ( R . id . share _ location ) . setVisibility ( View . VISIBLE ) ; 
 + shareLocation . setVisibility ( View . VISIBLE ) ; 
 findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; 
 - findViewById ( R . id . location _ hide _ text ) . setVisibility ( View . VISIBLE ) ; 
 + locationText . setVisibility ( View . VISIBLE ) ; 
 
 } else { 
 - findViewById ( R . id . share _ location ) . setVisibility ( View . GONE ) ; 
 + shareLocation . setVisibility ( View . GONE ) ; 
 findViewById ( R . id . share _ hide ) . setVisibility ( View . VISIBLE ) ; 
 - findViewById ( R . id . location _ hide _ text ) . setVisibility ( View . INVISIBLE ) ; 
 + locationText . setVisibility ( View . INVISIBLE ) ; 
 Log . w ( " Actor - GoogleMaps " , " please , set up google map api key in AndroidManifest metadata to enable share locations " ) ; 
 } 
 } catch ( PackageManager . NameNotFoundException e ) { 
 @ @ - 395 , 18 + 401 , 45 @ @ public class ChatActivity extends ActorEditTextActivity { 
 findViewById ( R . id . share _ gallery ) . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ video ) . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ camera ) . setOnClickListener ( shareMenuOCL ) ; 
 - findViewById ( R . id . share _ location ) . setOnClickListener ( shareMenuOCL ) ; 
 + shareLocation . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ file ) . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ hide ) . setOnClickListener ( shareMenuOCL ) ; 
 findViewById ( R . id . share _ contact ) . setOnClickListener ( shareMenuOCL ) ; 
 handleIntent ( ) ; 
 
 RecyclerView fastShare = ( RecyclerView ) findViewById ( R . id . fast _ share ) ; 
 - FastShareAdapter fastShareAdapter = new FastShareAdapter ( this ) ; 
 + final FastShareAdapter fastShareAdapter = new FastShareAdapter ( this ) ; 
 LinearLayoutManager layoutManager = new LinearLayoutManager ( this , LinearLayoutManager . HORIZONTAL , false ) ; 
 fastShare . setAdapter ( fastShareAdapter ) ; 
 fastShare . setLayoutManager ( layoutManager ) ; 
 
 + final ImageButton shareMenuSend = ( ImageButton ) findViewById ( R . id . share _ send ) ; 
 + shareMenuSend . setColorFilter ( Color . WHITE , PorterDuff . Mode . SRC _ IN ) ; 
 + shareMenuSend . setOnClickListener ( new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + Set < String > strings = fastShareAdapter . getSelectedVM ( ) . get ( ) ; 
 + for ( String s : strings . toArray ( new String [ strings . size ( ) ] ) ) { 
 + execute ( messenger ( ) . sendUri ( peer , Uri . fromFile ( new File ( s ) ) ) ) ; 
 + } 
 + fastShareAdapter . clearSelected ( ) ; 
 + hideShare ( ) ; 
 + } 
 + } ) ; 
 + fastShareAdapter . getSelectedVM ( ) . subscribe ( new ValueChangedListener < Set < String > > ( ) { 
 + @ Override 
 + public void onChanged ( Set < String > val , Value < Set < String > > valueModel ) { 
 + if ( val . size ( ) > 0 ) { 
 + shareLocation . setVisibility ( View . INVISIBLE ) ; 
 + shareMenuSend . setVisibility ( View . VISIBLE ) ; 
 + locationText . setText ( getString ( R . string . chat _ doc _ send ) + " ( " + val . size ( ) + " ) " ) ; 
 + } else { 
 + shareLocation . setVisibility ( View . VISIBLE ) ; 
 + shareMenuSend . setVisibility ( View . INVISIBLE ) ; 
 + locationText . setText ( getString ( R . string . share _ menu _ location ) ) ; 
 + } 
 + } 
 + } ) ; 
 } 
 
 private void startCamera ( ) { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / FastShareAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / FastShareAdapter . java 
 index a7cc631 . . 84bc441 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / FastShareAdapter . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / view / FastShareAdapter . java 
 @ @ - 24 , 6 + 24 , 7 @ @ import java . util . Set ; 
 
 import im . actor . runtime . mvvm . Value ; 
 import im . actor . runtime . mvvm . ValueChangedListener ; 
 + import im . actor . runtime . mvvm . ValueModel ; 
 import im . actor . sdk . R ; 
 import im . actor . sdk . util . Screen ; 
 
 @ @ - 32 , 8 + 33 , 9 @ @ import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 public class FastShareAdapter extends RecyclerView . Adapter < FastShareAdapter . FastShareVH > { 
 
 ArrayList < String > imagesPath = new ArrayList < > ( ) ; 
 - Set < String > selected = new HashSet < > ( ) ; 
 + Set < String > selected = new HashSet < String > ( ) ; 
 Context context ; 
 + private ValueModel < Set < String > > selectedVM ; 
 
 public FastShareAdapter ( Context context ) { 
 this . context = context ; 
 @ @ - 45 , 6 + 47 , 7 @ @ public class FastShareAdapter extends RecyclerView . Adapter < FastShareAdapter . Fast 
 notifyDataSetChanged ( ) ; 
 } 
 } ) ; 
 + selectedVM = new ValueModel < Set < String > > ( " fast _ share . selected " , new HashSet < String > ( ) ) ; 
 } 
 
 protected View inflate ( int id , ViewGroup viewGroup ) { 
 @ @ - 85 , 8 + 88 , 11 @ @ public class FastShareAdapter extends RecyclerView . Adapter < FastShareAdapter . Fast 
 public void onCheckedChanged ( CompoundButton buttonView , boolean isChecked ) { 
 if ( isChecked & & data ! = null ) { 
 selected . add ( data ) ; 
 + notifyVm ( ) ; 
 } else { 
 selected . remove ( data ) ; 
 + notifyVm ( ) ; 
 + 
 } 
 } 
 } ) ; 
 @ @ - 106 , 4 + 112 , 18 @ @ public class FastShareAdapter extends RecyclerView . Adapter < FastShareAdapter . Fast 
 chb . setChecked ( selected . contains ( data ) ) ; 
 } 
 } 
 + 
 + public void notifyVm ( ) { 
 + selectedVM . change ( new HashSet < String > ( selected ) ) ; 
 + } 
 + 
 + public void clearSelected ( ) { 
 + selected . clear ( ) ; 
 + notifyVm ( ) ; 
 + notifyDataSetChanged ( ) ; 
 + } 
 + 
 + public ValueModel < Set < String > > getSelectedVM ( ) { 
 + return selectedVM ; 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / share _ send _ selector . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / share _ send _ selector . xml 
 new file mode 100644 
 index 0000000 . . 32c664b 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / share _ send _ selector . xml 
 @ @ - 0 , 0 + 1 , 5 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < selector xmlns : android = " http : / / schemas . android . com / apk / res / android " > 
 + < item android : state _ pressed = " true " android : drawable = " @ drawable / attach _ send1 " / > 
 + < item android : drawable = " @ drawable / attach _ send1 _ pressed " / > 
 + < / selector > 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 index 029cf8f . . 9dc67c7 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 @ @ - 176 , 7 + 176 , 8 @ @ 
 
 < LinearLayout 
 android : gravity = " center _ horizontal " 
 - android : layout _ width = " wrap _ content " 
 + android : layout _ width = " 0dp " 
 + android : layout _ weight = " 1 " 
 android : layout _ height = " wrap _ content " 
 android : orientation = " vertical " > 
 
 @ @ - 195 , 7 + 196 , 8 @ @ 
 
 < LinearLayout 
 android : gravity = " center _ horizontal " 
 - android : layout _ width = " wrap _ content " 
 + android : layout _ width = " 0dp " 
 + android : layout _ weight = " 1 " 
 android : layout _ height = " wrap _ content " 
 android : orientation = " vertical " > 
 
 @ @ - 213 , 15 + 215 , 35 @ @ 
 
 < LinearLayout 
 android : gravity = " center _ horizontal " 
 - android : layout _ width = " wrap _ content " 
 + android : layout _ width = " 0dp " 
 + android : layout _ weight = " 1 " 
 android : layout _ height = " wrap _ content " 
 android : orientation = " vertical " > 
 
 - < Button 
 + < FrameLayout 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ location " 
 - android : background = " @ drawable / share _ location _ selector " / > 
 + android : layout _ height = " @ dimen / share _ btn _ size " > 
 + 
 + < Button 
 + android : layout _ width = " @ dimen / share _ btn _ size " 
 + android : layout _ height = " @ dimen / share _ btn _ size " 
 + android : id = " @ + id / share _ location " 
 + android : background = " @ drawable / share _ location _ selector " / > 
 + 
 + < ImageButton 
 + android : visibility = " invisible " 
 + android : paddingLeft = " 10dp " 
 + android : paddingRight = " 5dp " 
 + android : scaleType = " fitCenter " 
 + android : layout _ width = " @ dimen / share _ btn _ size " 
 + android : layout _ height = " @ dimen / share _ btn _ size " 
 + android : id = " @ + id / share _ send " 
 + android : src = " @ drawable / conv _ send " 
 + android : background = " @ drawable / share _ send _ selector " / > 
 + 
 + 
 + < / FrameLayout > 
 + 
 
 < ImageButton 
 android : layout _ width = " @ dimen / share _ btn _ size " 
 @ @ - 231 , 7 + 253 , 7 @ @ 
 android : src = " @ drawable / attach _ hide2 " / > 
 
 < TextView 
 - android : id = " @ + id / location _ hide _ text " 
 + android : id = " @ + id / location _ text " 
 android : layout _ width = " wrap _ content " 
 android : layout _ height = " wrap _ content " 
 android : text = " @ string / share _ menu _ location " / >
