BLEU SCORE: 0.17125081678676496

TEST MSG: chore ( android ) : hackable chat input fragment
GENERATED MSG: fix ( android ) : doc load percents color , emoji keyboard start page

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > index 00845b5 . . a1fff73 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > @ @ - 10 , 6 + 10 , 7 @ @ import im . actor . core . entity . Peer ; < nl > import im . actor . runtime . android . view . BindedViewHolder ; < nl > import im . actor . sdk . controllers . conversation . ChatFragment ; < nl > import im . actor . sdk . controllers . conversation . attach . AbsAttachFragment ; < nl > + import im . actor . sdk . controllers . conversation . inputbar . InputBarFragment ; < nl > import im . actor . sdk . controllers . conversation . messages . content . MessageHolder ; < nl > import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; < nl > import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; < nl > @ @ - 90 , 6 + 91 , 14 @ @ public interface ActorSDKDelegate { < nl > ChatFragment fragmentForChat ( Peer peer ) ; < nl > < nl > / * * < nl > + * If Not null returned , overrides chat input fragment < nl > + * < nl > + * @ return Custom chat input fragment < nl > + * / < nl > + @ Nullable < nl > + InputBarFragment fragmentForChatInput ( ) ; < nl > + < nl > + / * * < nl > * If Not null returned , overrides default toolbar ( no - ui ) fragment < nl > * < nl > * @ param peer peer < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > index 4a08bb9 . . 8bb53d4 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > @ @ - 11 , 6 + 11 , 7 @ @ import im . actor . core . entity . Peer ; < nl > import im . actor . runtime . android . view . BindedViewHolder ; < nl > import im . actor . sdk . controllers . conversation . ChatFragment ; < nl > import im . actor . sdk . controllers . conversation . attach . AbsAttachFragment ; < nl > + import im . actor . sdk . controllers . conversation . inputbar . InputBarFragment ; < nl > import im . actor . sdk . controllers . conversation . messages . content . MessageHolder ; < nl > import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; < nl > import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; < nl > @ @ - 69 , 6 + 70 , 12 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { < nl > < nl > @ Nullable < nl > @ Override < nl > + public InputBarFragment fragmentForChatInput ( ) { < nl > + return null ; < nl > + } < nl > + < nl > + @ Nullable < nl > + @ Override < nl > public Fragment fragmentForToolbar ( Peer peer ) { < nl > return null ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java < nl > index 63eb290 . . e41470f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java < nl > @ @ - 97 , 10 + 97 , 14 @ @ public class ChatFragment extends BaseFragment implements InputBarCallback , Mess < nl > if ( toolbarFragment = = null ) { < nl > toolbarFragment = new ChatToolbarFragment ( peer ) ; < nl > } < nl > + InputBarFragment inputBarFragment = ActorSDK . sharedActor ( ) . getDelegate ( ) . fragmentForChatInput ( ) ; < nl > + if ( inputBarFragment = = null ) { < nl > + inputBarFragment = new InputBarFragment ( ) ; < nl > + } < nl > getChildFragmentManager ( ) . beginTransaction ( ) < nl > . add ( toolbarFragment , " toolbar " ) < nl > . add ( R . id . messagesFragment , MessagesDefaultFragment . create ( peer ) ) < nl > - . add ( R . id . sendFragment , new InputBarFragment ( ) ) < nl > + . add ( R . id . sendFragment , inputBarFragment ) < nl > . add ( R . id . quoteFragment , new QuoteFragment ( ) ) < nl > . add ( R . id . emptyPlaceholder , new EmptyChatPlaceholder ( ) ) < nl > . add ( R . id . autocompleteContainer , new AutocompleteFragment ( peer ) )
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > index df016db . . eede092 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > @ @ - 4 , 6 + 4 , 8 @ @ import android . graphics . Color ; < nl > import android . view . View ; < nl > import android . widget . CheckBox ; < nl > < nl > + import java . util . ArrayList ; < nl > + < nl > import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . ActorSDKApplication ; < nl > import im . actor . sdk . ActorStyle ; < nl > @ @ - 23 , 6 + 25 , 11 @ @ public class Application extends ActorSDKApplication { < nl > ActorSDK . sharedActor ( ) . setDelegate ( new ActorSDKDelegate ( ) ) ; < nl > ActorSDK . sharedActor ( ) . setPushId ( 209133700967L ) ; < nl > < nl > + / / ArrayList < String > endpoints = new ArrayList < String > ( ) ; < nl > + / / endpoints . add ( " foo1 " ) ; < nl > + / / endpoints . add ( " foo2 " ) ; < nl > + / / ActorSDK . sharedActor ( ) . setEndpoints ( endpoints ) ; < nl > + < nl > ActorStyle style = ActorSDK . sharedActor ( ) . style ; < nl > style . setMainColor ( Color . parseColor ( " # 529a88 " ) ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / DocHolder . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / DocHolder . java < nl > index 822c736 . . 3b0d483 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / DocHolder . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / DocHolder . java < nl > @ @ - 140 , 7 + 140 , 7 @ @ public class DocHolder extends MessageHolder { < nl > progressView = ( CircularView ) itemView . findViewById ( R . id . progressView ) ; < nl > progressView . setColor ( ActorSDK . sharedActor ( ) . style . getMainColor ( ) ) ; < nl > progressValue = ( TextView ) itemView . findViewById ( R . id . progressValue ) ; < nl > - progressValue . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextPrimaryInvColor ( ) ) ; < nl > + progressValue . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; < nl > } < nl > < nl > @ Override < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / emoji / EmojiKeyboard . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / emoji / EmojiKeyboard . java < nl > index 5d6b852 . . 96d3b82 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / emoji / EmojiKeyboard . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / emoji / EmojiKeyboard . java < nl > @ @ - 34 , 6 + 34 , 7 @ @ import im . actor . sdk . view . emoji . keyboard . emoji . smiles . SmilePagerAdapter ; < nl > import im . actor . sdk . util . Screen ; < nl > import im . actor . sdk . view . MaterialInterpolator ; < nl > import im . actor . sdk . view . PagerSlidingTabStrip ; < nl > + import im . actor . sdk . view . emoji . smiles . SmilesPack ; < nl > < nl > public class EmojiKeyboard extends BaseKeyboard implements OnSmileClickListener , < nl > OnBackspaceClickListener { < nl > @ @ - 110 , 6 + 111 , 11 @ @ public class EmojiKeyboard extends BaseKeyboard implements OnSmileClickListener , < nl > / / emojiPagerIndicator . setViewPager ( emojiPager ) ; < nl > / / } < nl > / / } , BINDING _ DELAY ) ; < nl > + < nl > + if ( SmilesPack . getRecent ( ) . size ( ) = = 0 ) { < nl > + emojiPager . setCurrentItem ( 1 ) ; < nl > + } < nl > + < nl > return emojiPagerView ; < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 index 00845b5 . . a1fff73 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 @ @ - 10 , 6 + 10 , 7 @ @ import im . actor . core . entity . Peer ; 
 import im . actor . runtime . android . view . BindedViewHolder ; 
 import im . actor . sdk . controllers . conversation . ChatFragment ; 
 import im . actor . sdk . controllers . conversation . attach . AbsAttachFragment ; 
 + import im . actor . sdk . controllers . conversation . inputbar . InputBarFragment ; 
 import im . actor . sdk . controllers . conversation . messages . content . MessageHolder ; 
 import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; 
 import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; 
 @ @ - 90 , 6 + 91 , 14 @ @ public interface ActorSDKDelegate { 
 ChatFragment fragmentForChat ( Peer peer ) ; 
 
 / * * 
 + * If Not null returned , overrides chat input fragment 
 + * 
 + * @ return Custom chat input fragment 
 + * / 
 + @ Nullable 
 + InputBarFragment fragmentForChatInput ( ) ; 
 + 
 + / * * 
 * If Not null returned , overrides default toolbar ( no - ui ) fragment 
 * 
 * @ param peer peer 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 index 4a08bb9 . . 8bb53d4 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 @ @ - 11 , 6 + 11 , 7 @ @ import im . actor . core . entity . Peer ; 
 import im . actor . runtime . android . view . BindedViewHolder ; 
 import im . actor . sdk . controllers . conversation . ChatFragment ; 
 import im . actor . sdk . controllers . conversation . attach . AbsAttachFragment ; 
 + import im . actor . sdk . controllers . conversation . inputbar . InputBarFragment ; 
 import im . actor . sdk . controllers . conversation . messages . content . MessageHolder ; 
 import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; 
 import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; 
 @ @ - 69 , 6 + 70 , 12 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { 
 
 @ Nullable 
 @ Override 
 + public InputBarFragment fragmentForChatInput ( ) { 
 + return null ; 
 + } 
 + 
 + @ Nullable 
 + @ Override 
 public Fragment fragmentForToolbar ( Peer peer ) { 
 return null ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java 
 index 63eb290 . . e41470f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java 
 @ @ - 97 , 10 + 97 , 14 @ @ public class ChatFragment extends BaseFragment implements InputBarCallback , Mess 
 if ( toolbarFragment = = null ) { 
 toolbarFragment = new ChatToolbarFragment ( peer ) ; 
 } 
 + InputBarFragment inputBarFragment = ActorSDK . sharedActor ( ) . getDelegate ( ) . fragmentForChatInput ( ) ; 
 + if ( inputBarFragment = = null ) { 
 + inputBarFragment = new InputBarFragment ( ) ; 
 + } 
 getChildFragmentManager ( ) . beginTransaction ( ) 
 . add ( toolbarFragment , " toolbar " ) 
 . add ( R . id . messagesFragment , MessagesDefaultFragment . create ( peer ) ) 
 - . add ( R . id . sendFragment , new InputBarFragment ( ) ) 
 + . add ( R . id . sendFragment , inputBarFragment ) 
 . add ( R . id . quoteFragment , new QuoteFragment ( ) ) 
 . add ( R . id . emptyPlaceholder , new EmptyChatPlaceholder ( ) ) 
 . add ( R . id . autocompleteContainer , new AutocompleteFragment ( peer ) )

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 index df016db . . eede092 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 @ @ - 4 , 6 + 4 , 8 @ @ import android . graphics . Color ; 
 import android . view . View ; 
 import android . widget . CheckBox ; 
 
 + import java . util . ArrayList ; 
 + 
 import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . ActorSDKApplication ; 
 import im . actor . sdk . ActorStyle ; 
 @ @ - 23 , 6 + 25 , 11 @ @ public class Application extends ActorSDKApplication { 
 ActorSDK . sharedActor ( ) . setDelegate ( new ActorSDKDelegate ( ) ) ; 
 ActorSDK . sharedActor ( ) . setPushId ( 209133700967L ) ; 
 
 + / / ArrayList < String > endpoints = new ArrayList < String > ( ) ; 
 + / / endpoints . add ( " foo1 " ) ; 
 + / / endpoints . add ( " foo2 " ) ; 
 + / / ActorSDK . sharedActor ( ) . setEndpoints ( endpoints ) ; 
 + 
 ActorStyle style = ActorSDK . sharedActor ( ) . style ; 
 style . setMainColor ( Color . parseColor ( " # 529a88 " ) ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / DocHolder . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / DocHolder . java 
 index 822c736 . . 3b0d483 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / DocHolder . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / DocHolder . java 
 @ @ - 140 , 7 + 140 , 7 @ @ public class DocHolder extends MessageHolder { 
 progressView = ( CircularView ) itemView . findViewById ( R . id . progressView ) ; 
 progressView . setColor ( ActorSDK . sharedActor ( ) . style . getMainColor ( ) ) ; 
 progressValue = ( TextView ) itemView . findViewById ( R . id . progressValue ) ; 
 - progressValue . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextPrimaryInvColor ( ) ) ; 
 + progressValue . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; 
 } 
 
 @ Override 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / emoji / EmojiKeyboard . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / emoji / EmojiKeyboard . java 
 index 5d6b852 . . 96d3b82 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / emoji / EmojiKeyboard . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / emoji / EmojiKeyboard . java 
 @ @ - 34 , 6 + 34 , 7 @ @ import im . actor . sdk . view . emoji . keyboard . emoji . smiles . SmilePagerAdapter ; 
 import im . actor . sdk . util . Screen ; 
 import im . actor . sdk . view . MaterialInterpolator ; 
 import im . actor . sdk . view . PagerSlidingTabStrip ; 
 + import im . actor . sdk . view . emoji . smiles . SmilesPack ; 
 
 public class EmojiKeyboard extends BaseKeyboard implements OnSmileClickListener , 
 OnBackspaceClickListener { 
 @ @ - 110 , 6 + 111 , 11 @ @ public class EmojiKeyboard extends BaseKeyboard implements OnSmileClickListener , 
 / / emojiPagerIndicator . setViewPager ( emojiPager ) ; 
 / / } 
 / / } , BINDING _ DELAY ) ; 
 + 
 + if ( SmilesPack . getRecent ( ) . size ( ) = = 0 ) { 
 + emojiPager . setCurrentItem ( 1 ) ; 
 + } 
 + 
 return emojiPagerView ; 
 }
