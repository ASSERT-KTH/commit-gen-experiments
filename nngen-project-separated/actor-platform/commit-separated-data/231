BLEU SCORE: 0.2984745896009823

TEST MSG: ref ( android ) : Fixing paddings in DialogView
GENERATED MSG: feat ( android ) : Implement showing status changes

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java < nl > index 208a1e7 . . a425b8f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java < nl > @ @ - 46 , 8 + 46 , 6 @ @ import im . actor . sdk . view . TintDrawable ; < nl > import im . actor . sdk . view . emoji . SmileProcessor ; < nl > < nl > import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > - import static im . actor . sdk . util . ActorSDKMessenger . myUid ; < nl > - import static im . actor . sdk . util . ActorSDKMessenger . users ; < nl > import static im . actor . sdk . view . emoji . SmileProcessor . emoji ; < nl > < nl > public class DialogView extends ListItemBackgroundView < Dialog , DialogView . DialogLayout > { < nl > @ @ - 141 , 27 + 139 , 27 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog < nl > / / < nl > < nl > if ( layout . getTitleIcon ( ) ! = null ) { < nl > - layout . getTitleIcon ( ) . setBounds ( Screen . sp ( 72 ) , Screen . sp ( 16 ) , Screen . dp ( 72 + 16 ) , Screen . dp ( 16 + 10 ) ) ; < nl > + layout . getTitleIcon ( ) . setBounds ( Screen . sp ( 72 ) , Screen . sp ( 16 + 3 ) , Screen . dp ( 72 + 16 ) , Screen . dp ( 16 + 3 + 10 ) ) ; < nl > layout . getTitleIcon ( ) . draw ( canvas ) ; < nl > } < nl > < nl > canvas . save ( ) ; < nl > if ( layout . getTitleIcon ( ) = = null ) { < nl > - canvas . translate ( Screen . dp ( 72 ) , Screen . dp ( 12 ) ) ; < nl > + canvas . translate ( Screen . dp ( 72 ) , Screen . dp ( 14 ) ) ; < nl > } else { < nl > - canvas . translate ( Screen . dp ( 72 + 16 + 4 ) , Screen . dp ( 12 ) ) ; < nl > + canvas . translate ( Screen . dp ( 72 + 16 + 4 ) , Screen . dp ( 14 ) ) ; < nl > } < nl > layout . getTitleLayout ( ) . draw ( canvas ) ; < nl > canvas . restore ( ) ; < nl > < nl > if ( layout . getState ( ) ! = null ) { < nl > - int left = getWidth ( ) - Screen . dp ( 34 ) - layout . getDateWidth ( ) ; < nl > + int left = getWidth ( ) - Screen . dp ( 38 ) - layout . getDateWidth ( ) ; < nl > layout . getState ( ) . setBounds ( left , Screen . dp ( 18 ) , left + Screen . dp ( 16 ) , Screen . dp ( 18 + 9 ) ) ; < nl > layout . getState ( ) . draw ( canvas ) ; < nl > } < nl > < nl > if ( layout . getDate ( ) ! = null ) { < nl > - canvas . drawText ( layout . getDate ( ) , getWidth ( ) - Screen . dp ( 16 ) - layout . getDateWidth ( ) , Screen . dp ( 26 ) , datePaint ) ; < nl > + canvas . drawText ( layout . getDate ( ) , getWidth ( ) - Screen . dp ( 16 ) - layout . getDateWidth ( ) , Screen . dp ( 28 ) , datePaint ) ; < nl > } < nl > < nl > < nl > @ @ - 171 , 18 + 169 , 18 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog < nl > < nl > / / TODO : Implement Group Typing < nl > if ( isPrivateTyping ) { < nl > - canvas . drawText ( typingText , Screen . dp ( 72 ) , Screen . dp ( 60 ) , textActivePaint ) ; < nl > + canvas . drawText ( typingText , Screen . dp ( 72 ) , Screen . dp ( 54 ) , textActivePaint ) ; < nl > } else { < nl > if ( layout . getTextLayout ( ) ! = null ) { < nl > canvas . save ( ) ; < nl > - canvas . translate ( Screen . dp ( 72 ) , Screen . dp ( 42 ) ) ; < nl > + canvas . translate ( Screen . dp ( 72 ) , Screen . dp ( 40 ) ) ; < nl > layout . getTextLayout ( ) . draw ( canvas ) ; < nl > canvas . restore ( ) ; < nl > } < nl > < nl > if ( layout . getCounter ( ) ! = null ) { < nl > int left = getWidth ( ) - Screen . sp ( 12 ) - layout . getCounterWidth ( ) ; < nl > - int top = Screen . dp ( 39 ) ; < nl > + int top = Screen . dp ( 37 ) ; < nl > if ( Build . VERSION . SDK _ INT > = Build . VERSION _ CODES . LOLLIPOP ) { < nl > canvas . drawRoundRect ( left , top , left + layout . getCounterWidth ( ) , top + Screen . dp ( 22 ) , Screen . dp ( 11 ) , Screen . dp ( 11 ) , < nl > counterBgPaint ) ;
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java < nl > index 1f88f8a . . 208a1e7 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java < nl > @ @ - 46 , 6 + 46 , 7 @ @ import im . actor . sdk . view . TintDrawable ; < nl > import im . actor . sdk . view . emoji . SmileProcessor ; < nl > < nl > import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > + import static im . actor . sdk . util . ActorSDKMessenger . myUid ; < nl > import static im . actor . sdk . util . ActorSDKMessenger . users ; < nl > import static im . actor . sdk . view . emoji . SmileProcessor . emoji ; < nl > < nl > @ @ - 65 , 6 + 66 , 9 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog < nl > private static Paint fillPaint ; < nl > private static TextPaint avatarTextColor ; < nl > private static String typingText ; < nl > + private static Drawable stateSent ; < nl > + private static Drawable stateReceived ; < nl > + private static Drawable stateRead ; < nl > < nl > private long bindedId ; < nl > private DraweeHolder < GenericDraweeHierarchy > draweeHolder ; < nl > @ @ - 150 , 6 + 154 , 12 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog < nl > layout . getTitleLayout ( ) . draw ( canvas ) ; < nl > canvas . restore ( ) ; < nl > < nl > + if ( layout . getState ( ) ! = null ) { < nl > + int left = getWidth ( ) - Screen . dp ( 34 ) - layout . getDateWidth ( ) ; < nl > + layout . getState ( ) . setBounds ( left , Screen . dp ( 18 ) , left + Screen . dp ( 16 ) , Screen . dp ( 18 + 9 ) ) ; < nl > + layout . getState ( ) . draw ( canvas ) ; < nl > + } < nl > + < nl > if ( layout . getDate ( ) ! = null ) { < nl > canvas . drawText ( layout . getDate ( ) , getWidth ( ) - Screen . dp ( 16 ) - layout . getDateWidth ( ) , Screen . dp ( 26 ) , datePaint ) ; < nl > } < nl > @ @ - 258 , 7 + 268 , 14 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog < nl > avatarBorder . setStrokeWidth ( 1 ) ; < nl > avatarTextColor = createTextPaint ( Fonts . regular ( ) , 20 , Color . WHITE ) ; < nl > avatarTextColor . setTextAlign ( Paint . Align . CENTER ) ; < nl > - typingText = context . getResources ( ) . getString ( R . string . typing _ private ) ; < nl > + typingText = messenger ( ) . getFormatter ( ) . formatTyping ( ) ; < nl > + < nl > + stateSent = new TintDrawable ( context . getResources ( ) . getDrawable ( R . drawable . msg _ check _ 1 ) , < nl > + style . getDialogsStateSentColor ( ) ) ; < nl > + stateReceived = new TintDrawable ( context . getResources ( ) . getDrawable ( R . drawable . msg _ check _ 2 ) , < nl > + style . getDialogsStateDeliveredColor ( ) ) ; < nl > + stateRead = new TintDrawable ( context . getResources ( ) . getDrawable ( R . drawable . msg _ check _ 2 ) , < nl > + style . getDialogsStateReadColor ( ) ) ; < nl > } < nl > < nl > DialogLayout res = new DialogLayout ( ) ; < nl > @ @ - 316 , 6 + 333 , 17 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog < nl > maxTitleWidth - = Screen . dp ( 16 / * icon width * / + 4 / * padding * / ) ; < nl > } < nl > < nl > + if ( arg . getSenderId ( ) = = messenger ( ) . myUid ( ) ) { < nl > + if ( arg . isRead ( ) ) { < nl > + res . setState ( stateRead ) ; < nl > + } else if ( arg . isReceived ( ) ) { < nl > + res . setState ( stateReceived ) ; < nl > + } else { < nl > + res . setState ( stateSent ) ; < nl > + } < nl > + maxTitleWidth - = Screen . dp ( 20 ) ; < nl > + } < nl > + < nl > res . setTitleLayout ( singleLineText ( arg . getDialogTitle ( ) , titlePaint , maxTitleWidth ) ) ; < nl > < nl > / / Second Row < nl > @ @ - 337 , 7 + 365 , 7 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog < nl > if ( messenger ( ) . getFormatter ( ) . isLargeDialogMessage ( arg . getMessageType ( ) ) ) { < nl > res . setTextLayout ( singleLineText ( handleEmoji ( contentText ) , textActivePaint , maxWidth ) ) ; < nl > } else { < nl > - String senderName = users ( ) . get ( arg . getSenderId ( ) ) . getName ( ) . get ( ) + " : " ; < nl > + String senderName = messenger ( ) . getFormatter ( ) . formatPerformerName ( arg . getSenderId ( ) ) + " : " ; < nl > if ( arg . getMessageType ( ) = = ContentType . TEXT ) { < nl > SpannableStringBuilder builder = new SpannableStringBuilder ( ) ; < nl > builder . append ( senderName ) ; < nl > @ @ - 483 , 6 + 511 , 15 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog < nl > private Layout textLayout ; < nl > private String counter ; < nl > private int counterWidth ; < nl > + private Drawable state ; < nl > + < nl > + public Drawable getState ( ) { < nl > + return state ; < nl > + } < nl > + < nl > + public void setState ( Drawable state ) { < nl > + this . state = state ; < nl > + } < nl > < nl > public ImageRequest getImageRequest ( ) { < nl > return imageRequest ;

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java 
 index 208a1e7 . . a425b8f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java 
 @ @ - 46 , 8 + 46 , 6 @ @ import im . actor . sdk . view . TintDrawable ; 
 import im . actor . sdk . view . emoji . SmileProcessor ; 
 
 import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 - import static im . actor . sdk . util . ActorSDKMessenger . myUid ; 
 - import static im . actor . sdk . util . ActorSDKMessenger . users ; 
 import static im . actor . sdk . view . emoji . SmileProcessor . emoji ; 
 
 public class DialogView extends ListItemBackgroundView < Dialog , DialogView . DialogLayout > { 
 @ @ - 141 , 27 + 139 , 27 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog 
 / / 
 
 if ( layout . getTitleIcon ( ) ! = null ) { 
 - layout . getTitleIcon ( ) . setBounds ( Screen . sp ( 72 ) , Screen . sp ( 16 ) , Screen . dp ( 72 + 16 ) , Screen . dp ( 16 + 10 ) ) ; 
 + layout . getTitleIcon ( ) . setBounds ( Screen . sp ( 72 ) , Screen . sp ( 16 + 3 ) , Screen . dp ( 72 + 16 ) , Screen . dp ( 16 + 3 + 10 ) ) ; 
 layout . getTitleIcon ( ) . draw ( canvas ) ; 
 } 
 
 canvas . save ( ) ; 
 if ( layout . getTitleIcon ( ) = = null ) { 
 - canvas . translate ( Screen . dp ( 72 ) , Screen . dp ( 12 ) ) ; 
 + canvas . translate ( Screen . dp ( 72 ) , Screen . dp ( 14 ) ) ; 
 } else { 
 - canvas . translate ( Screen . dp ( 72 + 16 + 4 ) , Screen . dp ( 12 ) ) ; 
 + canvas . translate ( Screen . dp ( 72 + 16 + 4 ) , Screen . dp ( 14 ) ) ; 
 } 
 layout . getTitleLayout ( ) . draw ( canvas ) ; 
 canvas . restore ( ) ; 
 
 if ( layout . getState ( ) ! = null ) { 
 - int left = getWidth ( ) - Screen . dp ( 34 ) - layout . getDateWidth ( ) ; 
 + int left = getWidth ( ) - Screen . dp ( 38 ) - layout . getDateWidth ( ) ; 
 layout . getState ( ) . setBounds ( left , Screen . dp ( 18 ) , left + Screen . dp ( 16 ) , Screen . dp ( 18 + 9 ) ) ; 
 layout . getState ( ) . draw ( canvas ) ; 
 } 
 
 if ( layout . getDate ( ) ! = null ) { 
 - canvas . drawText ( layout . getDate ( ) , getWidth ( ) - Screen . dp ( 16 ) - layout . getDateWidth ( ) , Screen . dp ( 26 ) , datePaint ) ; 
 + canvas . drawText ( layout . getDate ( ) , getWidth ( ) - Screen . dp ( 16 ) - layout . getDateWidth ( ) , Screen . dp ( 28 ) , datePaint ) ; 
 } 
 
 
 @ @ - 171 , 18 + 169 , 18 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog 
 
 / / TODO : Implement Group Typing 
 if ( isPrivateTyping ) { 
 - canvas . drawText ( typingText , Screen . dp ( 72 ) , Screen . dp ( 60 ) , textActivePaint ) ; 
 + canvas . drawText ( typingText , Screen . dp ( 72 ) , Screen . dp ( 54 ) , textActivePaint ) ; 
 } else { 
 if ( layout . getTextLayout ( ) ! = null ) { 
 canvas . save ( ) ; 
 - canvas . translate ( Screen . dp ( 72 ) , Screen . dp ( 42 ) ) ; 
 + canvas . translate ( Screen . dp ( 72 ) , Screen . dp ( 40 ) ) ; 
 layout . getTextLayout ( ) . draw ( canvas ) ; 
 canvas . restore ( ) ; 
 } 
 
 if ( layout . getCounter ( ) ! = null ) { 
 int left = getWidth ( ) - Screen . sp ( 12 ) - layout . getCounterWidth ( ) ; 
 - int top = Screen . dp ( 39 ) ; 
 + int top = Screen . dp ( 37 ) ; 
 if ( Build . VERSION . SDK _ INT > = Build . VERSION _ CODES . LOLLIPOP ) { 
 canvas . drawRoundRect ( left , top , left + layout . getCounterWidth ( ) , top + Screen . dp ( 22 ) , Screen . dp ( 11 ) , Screen . dp ( 11 ) , 
 counterBgPaint ) ;

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java 
 index 1f88f8a . . 208a1e7 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / dialogs / view / DialogView . java 
 @ @ - 46 , 6 + 46 , 7 @ @ import im . actor . sdk . view . TintDrawable ; 
 import im . actor . sdk . view . emoji . SmileProcessor ; 
 
 import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 + import static im . actor . sdk . util . ActorSDKMessenger . myUid ; 
 import static im . actor . sdk . util . ActorSDKMessenger . users ; 
 import static im . actor . sdk . view . emoji . SmileProcessor . emoji ; 
 
 @ @ - 65 , 6 + 66 , 9 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog 
 private static Paint fillPaint ; 
 private static TextPaint avatarTextColor ; 
 private static String typingText ; 
 + private static Drawable stateSent ; 
 + private static Drawable stateReceived ; 
 + private static Drawable stateRead ; 
 
 private long bindedId ; 
 private DraweeHolder < GenericDraweeHierarchy > draweeHolder ; 
 @ @ - 150 , 6 + 154 , 12 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog 
 layout . getTitleLayout ( ) . draw ( canvas ) ; 
 canvas . restore ( ) ; 
 
 + if ( layout . getState ( ) ! = null ) { 
 + int left = getWidth ( ) - Screen . dp ( 34 ) - layout . getDateWidth ( ) ; 
 + layout . getState ( ) . setBounds ( left , Screen . dp ( 18 ) , left + Screen . dp ( 16 ) , Screen . dp ( 18 + 9 ) ) ; 
 + layout . getState ( ) . draw ( canvas ) ; 
 + } 
 + 
 if ( layout . getDate ( ) ! = null ) { 
 canvas . drawText ( layout . getDate ( ) , getWidth ( ) - Screen . dp ( 16 ) - layout . getDateWidth ( ) , Screen . dp ( 26 ) , datePaint ) ; 
 } 
 @ @ - 258 , 7 + 268 , 14 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog 
 avatarBorder . setStrokeWidth ( 1 ) ; 
 avatarTextColor = createTextPaint ( Fonts . regular ( ) , 20 , Color . WHITE ) ; 
 avatarTextColor . setTextAlign ( Paint . Align . CENTER ) ; 
 - typingText = context . getResources ( ) . getString ( R . string . typing _ private ) ; 
 + typingText = messenger ( ) . getFormatter ( ) . formatTyping ( ) ; 
 + 
 + stateSent = new TintDrawable ( context . getResources ( ) . getDrawable ( R . drawable . msg _ check _ 1 ) , 
 + style . getDialogsStateSentColor ( ) ) ; 
 + stateReceived = new TintDrawable ( context . getResources ( ) . getDrawable ( R . drawable . msg _ check _ 2 ) , 
 + style . getDialogsStateDeliveredColor ( ) ) ; 
 + stateRead = new TintDrawable ( context . getResources ( ) . getDrawable ( R . drawable . msg _ check _ 2 ) , 
 + style . getDialogsStateReadColor ( ) ) ; 
 } 
 
 DialogLayout res = new DialogLayout ( ) ; 
 @ @ - 316 , 6 + 333 , 17 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog 
 maxTitleWidth - = Screen . dp ( 16 / * icon width * / + 4 / * padding * / ) ; 
 } 
 
 + if ( arg . getSenderId ( ) = = messenger ( ) . myUid ( ) ) { 
 + if ( arg . isRead ( ) ) { 
 + res . setState ( stateRead ) ; 
 + } else if ( arg . isReceived ( ) ) { 
 + res . setState ( stateReceived ) ; 
 + } else { 
 + res . setState ( stateSent ) ; 
 + } 
 + maxTitleWidth - = Screen . dp ( 20 ) ; 
 + } 
 + 
 res . setTitleLayout ( singleLineText ( arg . getDialogTitle ( ) , titlePaint , maxTitleWidth ) ) ; 
 
 / / Second Row 
 @ @ - 337 , 7 + 365 , 7 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog 
 if ( messenger ( ) . getFormatter ( ) . isLargeDialogMessage ( arg . getMessageType ( ) ) ) { 
 res . setTextLayout ( singleLineText ( handleEmoji ( contentText ) , textActivePaint , maxWidth ) ) ; 
 } else { 
 - String senderName = users ( ) . get ( arg . getSenderId ( ) ) . getName ( ) . get ( ) + " : " ; 
 + String senderName = messenger ( ) . getFormatter ( ) . formatPerformerName ( arg . getSenderId ( ) ) + " : " ; 
 if ( arg . getMessageType ( ) = = ContentType . TEXT ) { 
 SpannableStringBuilder builder = new SpannableStringBuilder ( ) ; 
 builder . append ( senderName ) ; 
 @ @ - 483 , 6 + 511 , 15 @ @ public class DialogView extends ListItemBackgroundView < Dialog , DialogView . Dialog 
 private Layout textLayout ; 
 private String counter ; 
 private int counterWidth ; 
 + private Drawable state ; 
 + 
 + public Drawable getState ( ) { 
 + return state ; 
 + } 
 + 
 + public void setState ( Drawable state ) { 
 + this . state = state ; 
 + } 
 
 public ImageRequest getImageRequest ( ) { 
 return imageRequest ;
