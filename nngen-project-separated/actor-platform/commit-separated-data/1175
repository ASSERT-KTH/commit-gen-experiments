BLEU SCORE: 0.2626909894424158

TEST MSG: fix + chore ( iOS ) : clear some warnings
GENERATED MSG: feat ( iOS ) : Implemented analytics and fixed autocomplete

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > index 4f57fbf . . 57b3c32 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > @ @ - 177 , 7 + 177 , 6 @ @ < nl > 	 	 06E7B24C1C0FAB500090660C / * AAMapFastView . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B24B1C0FAB500090660C / * AAMapFastView . swift * / ; } ; < nl > 	 	 06E7B2521C1345E70090660C / * AAMapPinPointView . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2511C1345E70090660C / * AAMapPinPointView . swift * / ; } ; < nl > 	 	 06E7B2541C139B6F0090660C / * AABubbleContactCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2531C139B6F0090660C / * AABubbleContactCell . swift * / ; } ; < nl > - 	 	 152AA8A61C2989270030DEEE / * SLKInputAccessoryView . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA8921C2989270030DEEE / * SLKInputAccessoryView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 152AA8A71C2989270030DEEE / * SLKInputAccessoryView . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA8931C2989270030DEEE / * SLKInputAccessoryView . m * / ; } ; < nl > 	 	 152AA8A81C2989270030DEEE / * SLKTextInputbar . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA8941C2989270030DEEE / * SLKTextInputbar . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 152AA8A91C2989270030DEEE / * SLKTextInputbar . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA8951C2989270030DEEE / * SLKTextInputbar . m * / ; } ; < nl > @ @ - 191 , 7 + 190 , 6 @ @ < nl > 	 	 152AA8B11C2989270030DEEE / * SLKTypingIndicatorView . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA89D1C2989270030DEEE / * SLKTypingIndicatorView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 152AA8B21C2989270030DEEE / * SLKTypingIndicatorView . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA89E1C2989270030DEEE / * SLKTypingIndicatorView . m * / ; } ; < nl > 	 	 152AA8B31C2989270030DEEE / * SLKUIConstants . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA89F1C2989270030DEEE / * SLKUIConstants . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > - 	 	 152AA8B41C2989270030DEEE / * UIResponder + SLKAdditions . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA8A01C2989270030DEEE / * UIResponder + SLKAdditions . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 152AA8B51C2989270030DEEE / * UIResponder + SLKAdditions . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA8A11C2989270030DEEE / * UIResponder + SLKAdditions . m * / ; } ; < nl > 	 	 152AA8B61C2989270030DEEE / * UIScrollView + SLKAdditions . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA8A21C2989270030DEEE / * UIScrollView + SLKAdditions . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 152AA8B71C2989270030DEEE / * UIScrollView + SLKAdditions . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA8A31C2989270030DEEE / * UIScrollView + SLKAdditions . m * / ; } ; < nl > @ @ - 270 , 30 + 268 , 22 @ @ < nl > 	 	 BED5A1DA1C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape . png in Resources * / = { isa = PBXBuildFile ; fileRef = BED5A1D41C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape . png * / ; } ; < nl > 	 	 BED5A1DB1C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape @ 2x . png in Resources * / = { isa = PBXBuildFile ; fileRef = BED5A1D51C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape @ 2x . png * / ; } ; < nl > 	 	 BED5A1DC1C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape @ 3x . png in Resources * / = { isa = PBXBuildFile ; fileRef = BED5A1D61C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape @ 3x . png * / ; } ; < nl > - 	 	 BED5A1F01C48396A0045FDB0 / * NYTPhotoCaptionView . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1DE1C48396A0045FDB0 / * NYTPhotoCaptionView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A1F11C48396A0045FDB0 / * NYTPhotoCaptionView . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1DF1C48396A0045FDB0 / * NYTPhotoCaptionView . m * / ; } ; < nl > - 	 	 BED5A1F21C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E01C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A1F31C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E11C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . m * / ; } ; < nl > - 	 	 BED5A1F41C48396A0045FDB0 / * NYTPhotosDataSource . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E21C48396A0045FDB0 / * NYTPhotosDataSource . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A1F51C48396A0045FDB0 / * NYTPhotosDataSource . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E31C48396A0045FDB0 / * NYTPhotosDataSource . m * / ; } ; < nl > - 	 	 BED5A1F61C48396A0045FDB0 / * NYTPhotosOverlayView . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E41C48396A0045FDB0 / * NYTPhotosOverlayView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A1F71C48396A0045FDB0 / * NYTPhotosOverlayView . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E51C48396A0045FDB0 / * NYTPhotosOverlayView . m * / ; } ; < nl > 	 	 BED5A1F81C48396A0045FDB0 / * NYTPhotosViewController . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E61C48396A0045FDB0 / * NYTPhotosViewController . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A1F91C48396A0045FDB0 / * NYTPhotosViewController . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E71C48396A0045FDB0 / * NYTPhotosViewController . m * / ; } ; < nl > - 	 	 BED5A1FA1C48396A0045FDB0 / * NYTPhotoTransitionAnimator . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E81C48396A0045FDB0 / * NYTPhotoTransitionAnimator . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A1FB1C48396A0045FDB0 / * NYTPhotoTransitionAnimator . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E91C48396A0045FDB0 / * NYTPhotoTransitionAnimator . m * / ; } ; < nl > - 	 	 BED5A1FC1C48396A0045FDB0 / * NYTPhotoTransitionController . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1EA1C48396A0045FDB0 / * NYTPhotoTransitionController . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A1FD1C48396A0045FDB0 / * NYTPhotoTransitionController . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1EB1C48396A0045FDB0 / * NYTPhotoTransitionController . m * / ; } ; < nl > 	 	 BED5A1FE1C48396A0045FDB0 / * NYTPhotoViewController . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1EC1C48396A0045FDB0 / * NYTPhotoViewController . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A1FF1C48396A0045FDB0 / * NYTPhotoViewController . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1ED1C48396A0045FDB0 / * NYTPhotoViewController . m * / ; } ; < nl > - 	 	 BED5A2001C48396A0045FDB0 / * NYTScalingImageView . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1EE1C48396A0045FDB0 / * NYTScalingImageView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A2011C48396A0045FDB0 / * NYTScalingImageView . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1EF1C48396A0045FDB0 / * NYTScalingImageView . m * / ; } ; < nl > 	 	 BED5A2071C4839790045FDB0 / * NYTPhoto . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2031C4839790045FDB0 / * NYTPhoto . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > - 	 	 BED5A2081C4839790045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2041C4839790045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > - 	 	 BED5A2091C4839790045FDB0 / * NYTPhotoContainer . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2051C4839790045FDB0 / * NYTPhotoContainer . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > - 	 	 BED5A20A1C4839790045FDB0 / * NYTPhotosViewControllerDataSource . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2061C4839790045FDB0 / * NYTPhotosViewControllerDataSource . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > - 	 	 BED5A20E1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A20C1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BED5A20F1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A20D1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . m * / ; } ; < nl > + 	 	 BED5A2111C48413C0045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2041C4839790045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > + 	 	 BED5A2121C48413C0045FDB0 / * NYTPhotoContainer . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2051C4839790045FDB0 / * NYTPhotoContainer . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > + 	 	 BED5A2131C48413C0045FDB0 / * NYTPhotosViewControllerDataSource . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2061C4839790045FDB0 / * NYTPhotosViewControllerDataSource . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; < nl > 	 	 BEF11DB61C466D800076400A / * begin _ record . caf in Resources * / = { isa = PBXBuildFile ; fileRef = 153F6B3C1C2A9B1900C0B960 / * begin _ record . caf * / ; } ; < nl > 	 	 BEFE68D51C4657360001F2D6 / * AAThumbnailCollectionCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = BEFE68D41C4657360001F2D6 / * AAThumbnailCollectionCell . swift * / ; } ; < nl > / * End PBXBuildFile section * / < nl > @ @ - 1460 , 26 + 1450 , 16 @ @ < nl > 	 	 	 	 152AA8AA1C2989270030DEEE / * SLKTextView . h in Headers * / , < nl > 	 	 	 	 152AA8B01C2989270030DEEE / * SLKTypingIndicatorProtocol . h in Headers * / , < nl > 	 	 	 	 152AA8AC1C2989270030DEEE / * SLKTextView + SLKAdditions . h in Headers * / , < nl > - 	 	 	 	 152AA8A61C2989270030DEEE / * SLKInputAccessoryView . h in Headers * / , < nl > 	 	 	 	 152AA8AE1C2989270030DEEE / * SLKTextViewController . h in Headers * / , < nl > 	 	 	 	 152AA8B31C2989270030DEEE / * SLKUIConstants . h in Headers * / , < nl > 	 	 	 	 152AA8B61C2989270030DEEE / * UIScrollView + SLKAdditions . h in Headers * / , < nl > + 	 	 	 	 BED5A2111C48413C0045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h in Headers * / , < nl > + 	 	 	 	 BED5A2121C48413C0045FDB0 / * NYTPhotoContainer . h in Headers * / , < nl > + 	 	 	 	 BED5A2131C48413C0045FDB0 / * NYTPhotosViewControllerDataSource . h in Headers * / , < nl > 	 	 	 	 152AA8B81C2989270030DEEE / * UIView + SLKAdditions . h in Headers * / , < nl > - 	 	 	 	 152AA8B41C2989270030DEEE / * UIResponder + SLKAdditions . h in Headers * / , < nl > 	 	 	 	 BED5A1FE1C48396A0045FDB0 / * NYTPhotoViewController . h in Headers * / , < nl > 	 	 	 	 BED5A1F81C48396A0045FDB0 / * NYTPhotosViewController . h in Headers * / , < nl > - 	 	 	 	 BED5A2001C48396A0045FDB0 / * NYTScalingImageView . h in Headers * / , < nl > 	 	 	 	 BED5A2071C4839790045FDB0 / * NYTPhoto . h in Headers * / , < nl > - 	 	 	 	 BED5A1F21C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . h in Headers * / , < nl > - 	 	 	 	 BED5A20E1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . h in Headers * / , < nl > - 	 	 	 	 BED5A1F01C48396A0045FDB0 / * NYTPhotoCaptionView . h in Headers * / , < nl > - 	 	 	 	 BED5A1FA1C48396A0045FDB0 / * NYTPhotoTransitionAnimator . h in Headers * / , < nl > - 	 	 	 	 BED5A1F41C48396A0045FDB0 / * NYTPhotosDataSource . h in Headers * / , < nl > - 	 	 	 	 BED5A1F61C48396A0045FDB0 / * NYTPhotosOverlayView . h in Headers * / , < nl > - 	 	 	 	 BED5A2081C4839790045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h in Headers * / , < nl > - 	 	 	 	 BED5A2091C4839790045FDB0 / * NYTPhotoContainer . h in Headers * / , < nl > - 	 	 	 	 BED5A1FC1C48396A0045FDB0 / * NYTPhotoTransitionController . h in Headers * / , < nl > - 	 	 	 	 BED5A20A1C4839790045FDB0 / * NYTPhotosViewControllerDataSource . h in Headers * / , < nl > 	 	 	 	 15D35F571C20187E00E3717A / * AAAudioRecorder . h in Headers * / , < nl > 	 	 	 	 15D35F641C20187E00E3717A / * AAModernConversationAudioPlayerContext . h in Headers * / , < nl > 	 	 	 	 15D35F681C20187E00E3717A / * AAModernViewInlineMediaContext . h in Headers * / , < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . h b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . h < nl > index 4561cf6 . . 37b6056 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . h < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . h < nl > @ @ - 38 , 7 + 38 , 17 @ @ FOUNDATION _ EXPORT const unsigned char ActorSDKVersionString [ ] ; < nl > < nl > # import " NYTPhotosViewController . h " < nl > # import " NYTPhoto . h " < nl > + # import " NYTPhotoViewController . h " < nl > + # import " NYTPhotosViewControllerDataSource . h " < nl > + # import " NYTPhotoCaptionViewLayoutWidthHinting . h " < nl > < nl > # import " AAAudioRecorder . h " < nl > # import " AAAudioPlayer . h " < nl > - # import " AAModernConversationAudioPlayer . h " < nl > \ No newline at end of file < nl > + # import " AAModernConversationAudioPlayer . h " < nl > + < nl > + / / < nl > + < nl > + # import " CLTokenView . h " < nl > + < nl > + < nl > + < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > index ecb9d2b . . 4c8d83a 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > @ @ - 291 , 11 + 291 , 11 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > < nl > / / Photo preview < nl > < nl > - public func photosViewController ( photosViewController : NYTPhotosViewController ! , referenceViewForPhoto photo : NYTPhoto ! ) - > UIView ! { < nl > + public func photosViewController ( photosViewController : NYTPhotosViewController , referenceViewForPhoto photo : NYTPhoto ) - > UIView ? { < nl > return self . preview < nl > } < nl > < nl > - public func photosViewControllerWillDismiss ( photosViewController : NYTPhotosViewController ! ) { < nl > + public func photosViewControllerWillDismiss ( photosViewController : NYTPhotosViewController ) { < nl > / / ( UIApplication . sharedApplication ( ) . delegate as ! AppDelegate ) . showBadge ( ) < nl > UIApplication . sharedApplication ( ) . setStatusBarHidden ( false , withAnimation : UIStatusBarAnimation . Fade ) < nl > } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAPhotoPreviewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAPhotoPreviewController . swift < nl > index fdadcca . . 3d851d4 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAPhotoPreviewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAPhotoPreviewController . swift < nl > @ @ - 115 , 7 + 115 , 7 @ @ public class AAPhotoPreviewController : NYTPhotosViewController , NYTPhotosViewCon < nl > } < nl > } < nl > < nl > - public func photosViewController ( photosViewController : NYTPhotosViewController ! , referenceViewForPhoto photo : NYTPhoto ! ) - > UIView ! { < nl > + public func photosViewController ( photosViewController : NYTPhotosViewController , referenceViewForPhoto photo : NYTPhoto ) - > UIView ? { < nl > return self . fromView < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift < nl > index 60b7cf9 . . be197ca 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 	 < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 	 < nl > @ @ - 184 , 7 + 184 , 7 @ @ public class AAViewController : UIViewController , UINavigationControllerDelegate , < nl > navigationController ! . presentViewController ( UINavigationController ( rootViewController : cropController ) , animated : true , completion : nil ) < nl > } < nl > < nl > - public func imageCropViewController ( controller : RSKImageCropViewController ! , didCropImage croppedImage : UIImage ! , usingCropRect cropRect : CGRect ) { < nl > + public func imageCropViewController ( controller : RSKImageCropViewController , didCropImage croppedImage : UIImage , usingCropRect cropRect : CGRect ) { < nl > if ( pendingPickClosure ! = nil ) { < nl > pendingPickClosure ! ( image : croppedImage ) < nl > } < nl > @ @ - 192 , 7 + 192 , 7 @ @ public class AAViewController : UIViewController , UINavigationControllerDelegate , < nl > navigationController ! . dismissViewControllerAnimated ( true , completion : nil ) < nl > } < nl > < nl > - public func imageCropViewControllerDidCancelCrop ( controller : RSKImageCropViewController ! ) { < nl > + public func imageCropViewControllerDidCancelCrop ( controller : RSKImageCropViewController ) { < nl > pendingPickClosure = nil < nl > navigationController ! . dismissViewControllerAnimated ( true , completion : nil ) < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > index 6606a24 . . f6dbf3d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj < nl > @ @ - 173 , 6 + 173 , 7 @ @ < nl > 	 	 069CF4D31BCB909A00C66E12 / * CLTokenView . m in Sources * / = { isa = PBXBuildFile ; fileRef = 069CF4CB1BCB909A00C66E12 / * CLTokenView . m * / ; settings = { ASSET _ TAGS = ( ) ; } ; } ; < nl > 	 	 06CE898A1BD8401C005A5530 / * Reachability . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06CE89891BD8401C005A5530 / * Reachability . swift * / ; settings = { ASSET _ TAGS = ( ) ; } ; } ; < nl > 	 	 06CE898C1BD841C9005A5530 / * SystemConfiguration . framework in Frameworks * / = { isa = PBXBuildFile ; fileRef = 06CE898B1BD841C9005A5530 / * SystemConfiguration . framework * / ; } ; < nl > + 	 	 06CE89901BD84DF5005A5530 / * ActorSDKAnalytics . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / ; settings = { ASSET _ TAGS = ( ) ; } ; } ; < nl > / * End PBXBuildFile section * / < nl > < nl > / * Begin PBXFileReference section * / < nl > @ @ - 353 , 6 + 354 , 7 @ @ < nl > 	 	 069CF4CB1BCB909A00C66E12 / * CLTokenView . m * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . objc ; name = CLTokenView . m ; path = CLTokenInputView / CLTokenView . m ; sourceTree = " < group > " ; } ; < nl > 	 	 06CE89891BD8401C005A5530 / * Reachability . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = Reachability . swift ; sourceTree = " < group > " ; } ; < nl > 	 	 06CE898B1BD841C9005A5530 / * SystemConfiguration . framework * / = { isa = PBXFileReference ; lastKnownFileType = wrapper . framework ; name = SystemConfiguration . framework ; path = System / Library / Frameworks / SystemConfiguration . framework ; sourceTree = SDKROOT ; } ; < nl > + 	 	 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = ActorSDKAnalytics . swift ; sourceTree = " < group > " ; } ; < nl > 	 	 22BAEA363892E475F59B7E9F / * Pods - ActorSDK . debug . xcconfig * / = { isa = PBXFileReference ; includeInIndex = 1 ; lastKnownFileType = text . xcconfig ; name = " Pods - ActorSDK . debug . xcconfig " ; path = " Pods / Target Support Files / Pods - ActorSDK / Pods - ActorSDK . debug . xcconfig " ; sourceTree = " < group > " ; } ; < nl > 	 	 333F91AE5263DD450666CC87 / * Pods - ActorSDK . release . xcconfig * / = { isa = PBXFileReference ; includeInIndex = 1 ; lastKnownFileType = text . xcconfig ; name = " Pods - ActorSDK . release . xcconfig " ; path = " Pods / Target Support Files / Pods - ActorSDK / Pods - ActorSDK . release . xcconfig " ; sourceTree = " < group > " ; } ; < nl > 	 	 9A22DF21664BBB34087283F6 / * Pods _ ActorSDK . framework * / = { isa = PBXFileReference ; explicitFileType = wrapper . framework ; includeInIndex = 0 ; path = Pods _ ActorSDK . framework ; sourceTree = BUILT _ PRODUCTS _ DIR ; } ; < nl > @ @ - 860 , 6 + 862 , 7 @ @ < nl > 	 	 	 	 066A51201BC4B53C000E606E / * SwiftExtensions * / , < nl > 	 	 	 	 066A51571BC4C112000E606E / * Utils * / , < nl > 	 	 	 	 066A50E11BC4AF9F000E606E / * ActorSDK . swift * / , < nl > + 	 	 	 	 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / , < nl > 	 	 	 	 066A525B1BC502EB000E606E / * ActorSDKDelegate . swift * / , < nl > 	 	 	 	 066A53381BC5456B000E606E / * ActorStyle . swift * / , < nl > 	 	 	 	 066A525D1BC503BB000E606E / * ActorApplicationDelegate . swift * / , < nl > @ @ - 1122 , 6 + 1125 , 7 @ @ < nl > 	 	 	 	 066A53231BC533F5000E606E / * Caches . swift in Sources * / , < nl > 	 	 	 	 066A52691BC50E7B000E606E / * AAAuthRegisterViewController . swift in Sources * / , < nl > 	 	 	 	 066A51501BC4BE06000E606E / * AARegex . swift in Sources * / , < nl > + 	 	 	 	 06CE89901BD84DF5005A5530 / * ActorSDKAnalytics . swift in Sources * / , < nl > 	 	 	 	 069CF4D31BCB909A00C66E12 / * CLTokenView . m in Sources * / , < nl > 	 	 	 	 066A52F71BC52B13000E606E / * AAWallpapperPreviewCell . swift in Sources * / , < nl > 	 	 	 	 066A51541BC4BE95000E606E / * Images . swift in Sources * / , < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift < nl > index e9b66f6 . . e761de9 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift < nl > @ @ - 30 , 6 + 30 , 9 @ @ public class ActorSDK { < nl > / / / SDK Delegate < nl > public var delegate : ActorSDKDelegate = ActorSDKDelegateDefault ( ) < nl > < nl > + / / / SDK Analytics < nl > + public var analyticsDelegate : ActorSDKAnalytics ? < nl > + < nl > / / < nl > / / Configuration < nl > / / < nl > @ @ - 410 , 6 + 413 , 21 @ @ public class ActorSDK { < nl > } < nl > } < nl > < nl > + / / / Tracking page visible < nl > + func trackPageVisible ( page : ACPage ) { < nl > + analyticsDelegate ? . analyticsPageVisible ( page ) < nl > + } < nl > + < nl > + / / / Tracking page hidden < nl > + func trackPageHidden ( page : ACPage ) { < nl > + analyticsDelegate ? . analyticsPageHidden ( page ) < nl > + } < nl > + < nl > + / / / Tracking event < nl > + func trackEvent ( event : ACEvent ) { < nl > + analyticsDelegate ? . analyticsEvent ( event ) < nl > + } < nl > + < nl > / / < nl > / / File System < nl > / / < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDKAnalytics . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDKAnalytics . swift < nl > new file mode 100644 < nl > index 0000000 . . 3751467 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDKAnalytics . swift < nl > @ @ - 0 , 0 + 1 , 17 @ @ < nl > + / / < nl > + / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > < nl > + / / < nl > + < nl > + import Foundation < nl > + < nl > + public protocol ActorSDKAnalytics { < nl > + < nl > + / / / Called when page visible < nl > + func analyticsPageVisible ( page : ACPage ) < nl > + < nl > + / / / Called when page hidden < nl > + func analyticsPageHidden ( page : ACPage ) < nl > + < nl > + / / / Called when event occurs < nl > + func analyticsEvent ( event : ACEvent ) < nl > + } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > index 03ce9dc . . be20271 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > @ @ - 193 , 7 + 193 , 7 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > } < nl > < nl > Actor . onConversationOpenWithPeer ( peer ) < nl > - / / Analytics . trackPageVisible ( content ) < nl > + ActorSDK . sharedActor ( ) . trackPageVisible ( content ) < nl > } < nl > < nl > override func viewWillLayoutSubviews ( ) { < nl > @ @ - 222 , 7 + 222 , 7 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > super . viewWillDisappear ( animated ) < nl > < nl > Actor . onConversationClosedWithPeer ( peer ) < nl > - / / Analytics . trackPageHidden ( content ) < nl > + ActorSDK . sharedActor ( ) . trackPageHidden ( content ) < nl > < nl > if ! AADevice . isiPad { < nl > AANavigationBadge . hideBadge ( ) < nl > @ @ - 308 , 14 + 308 , 14 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > < nl > / / Completition < nl > < nl > - override func canShowAutoCompletion ( ) - > Bool { < nl > + override func didChangeAutoCompletionPrefix ( prefix : String ! , andWord word : String ! ) { < nl > if UInt ( self . peer . peerType . ordinal ( ) ) = = ACPeerType . GROUP . rawValue { < nl > - if self . foundPrefix = = " @ " { < nl > - < nl > + if prefix = = " @ " { < nl > + < nl > let oldCount = filteredMembers . count < nl > filteredMembers . removeAll ( keepCapacity : true ) < nl > < nl > - let res = Actor . findMentionsWithGid ( self . peer . peerId , withQuery : self . foundWord ) < nl > + let res = Actor . findMentionsWithGid ( self . peer . peerId , withQuery : word ) < nl > for index in 0 . . < res . size ( ) { < nl > filteredMembers . append ( res . getWithInt ( index ) as ! ACMentionFilterResult ) < nl > } < nl > @ @ - 324 , 13 + 324 , 16 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > self . autoCompletionView . reloadData ( ) < nl > } < nl > < nl > - return filteredMembers . count > 0 < nl > + dispatchOnUi { ( ) - > Void in < nl > + self . showAutoCompletionView ( self . filteredMembers . count > 0 ) < nl > + } < nl > + return < nl > } < nl > - < nl > - return false < nl > } < nl > < nl > - return false < nl > + dispatchOnUi { ( ) - > Void in < nl > + self . showAutoCompletionView ( false ) < nl > + } < nl > } < nl > < nl > override func tableView ( tableView : UITableView , numberOfRowsInSection section : Int ) - > Int { < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift < nl > index 16cc802 . . 60b7cf9 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 	 < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 	 < nl > @ @ - 148 , 7 + 148 , 7 @ @ public class AAViewController : UIViewController , UINavigationControllerDelegate , < nl > super . viewWillAppear ( animated ) < nl > < nl > if let c = content { < nl > - / / Analytics . trackPageVisible ( c ) < nl > + ActorSDK . sharedActor ( ) . trackPageVisible ( c ) < nl > } < nl > if let u = uid { < nl > Actor . onProfileOpenWithUid ( jint ( u ) ) < nl > @ @ - 159 , 7 + 159 , 7 @ @ public class AAViewController : UIViewController , UINavigationControllerDelegate , < nl > super . viewWillDisappear ( animated ) < nl > < nl > if let c = content { < nl > - / / Analytics . trackPageHidden ( c ) < nl > + ActorSDK . sharedActor ( ) . trackPageHidden ( c ) < nl > } < nl > if let u = uid { < nl > Actor . onProfileClosedWithUid ( jint ( u ) ) < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > index af64e43 . . f26c644 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > @ @ - 355 , 12 + 355 , 6 @ @ public class AASettingsViewController : AAContentTableController { < nl > ActorSDK . sharedActor ( ) . delegate . actorSettingsSupportDidCreated ( self , section : s ) < nl > } < nl > } < nl > - < nl > - public override func viewWillAppear ( animated : Bool ) { < nl > - super . viewWillAppear ( animated ) < nl > - < nl > - Actor . onProfileOpenWithUid ( jint ( uid ) ) < nl > - } < nl > < nl > public override func tableWillBind ( binder : AABinder ) { < nl > < nl > @ @ - 408 , 10 + 402 , 4 @ @ public class AASettingsViewController : AAContentTableController { < nl > self . emailCells . reload ( ) < nl > } ) < nl > } < nl > - < nl > - public override func viewWillDisappear ( animated : Bool ) { < nl > - super . viewWillDisappear ( animated ) < nl > - < nl > - Actor . onProfileClosedWithUid ( jint ( uid ) ) < nl > - } < nl > } < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / User / AAUserViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / User / AAUserViewController . swift < nl > index 15bcab8 . . 584a829 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / User / AAUserViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / User / AAUserViewController . swift < nl > @ @ - 226 , 12 + 226 , 6 @ @ class AAUserViewController : AAContentTableController { < nl > < nl > } < nl > < nl > - override func viewWillAppear ( animated : Bool ) { < nl > - super . viewWillAppear ( animated ) < nl > - < nl > - Actor . onProfileOpenWithUid ( jint ( uid ) ) < nl > - } < nl > - < nl > override func tableWillBind ( binder : AABinder ) { < nl > binder . bind ( user . getAvatarModel ( ) , closure : { ( value : ACAvatar ? ) - > ( ) in < nl > self . headerRow . reload ( ) < nl > @ @ - 251 , 10 + 245 , 4 @ @ class AAUserViewController : AAContentTableController { < nl > } ) < nl > } < nl > } < nl > - < nl > - override func viewWillDisappear ( animated : Bool ) { < nl > - super . viewWillDisappear ( animated ) < nl > - < nl > - Actor . onProfileOpenWithUid ( jint ( uid ) ) < nl > - } < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 index 4f57fbf . . 57b3c32 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 @ @ - 177 , 7 + 177 , 6 @ @ 
 	 	 06E7B24C1C0FAB500090660C / * AAMapFastView . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B24B1C0FAB500090660C / * AAMapFastView . swift * / ; } ; 
 	 	 06E7B2521C1345E70090660C / * AAMapPinPointView . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2511C1345E70090660C / * AAMapPinPointView . swift * / ; } ; 
 	 	 06E7B2541C139B6F0090660C / * AABubbleContactCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06E7B2531C139B6F0090660C / * AABubbleContactCell . swift * / ; } ; 
 - 	 	 152AA8A61C2989270030DEEE / * SLKInputAccessoryView . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA8921C2989270030DEEE / * SLKInputAccessoryView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 152AA8A71C2989270030DEEE / * SLKInputAccessoryView . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA8931C2989270030DEEE / * SLKInputAccessoryView . m * / ; } ; 
 	 	 152AA8A81C2989270030DEEE / * SLKTextInputbar . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA8941C2989270030DEEE / * SLKTextInputbar . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 152AA8A91C2989270030DEEE / * SLKTextInputbar . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA8951C2989270030DEEE / * SLKTextInputbar . m * / ; } ; 
 @ @ - 191 , 7 + 190 , 6 @ @ 
 	 	 152AA8B11C2989270030DEEE / * SLKTypingIndicatorView . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA89D1C2989270030DEEE / * SLKTypingIndicatorView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 152AA8B21C2989270030DEEE / * SLKTypingIndicatorView . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA89E1C2989270030DEEE / * SLKTypingIndicatorView . m * / ; } ; 
 	 	 152AA8B31C2989270030DEEE / * SLKUIConstants . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA89F1C2989270030DEEE / * SLKUIConstants . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 - 	 	 152AA8B41C2989270030DEEE / * UIResponder + SLKAdditions . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA8A01C2989270030DEEE / * UIResponder + SLKAdditions . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 152AA8B51C2989270030DEEE / * UIResponder + SLKAdditions . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA8A11C2989270030DEEE / * UIResponder + SLKAdditions . m * / ; } ; 
 	 	 152AA8B61C2989270030DEEE / * UIScrollView + SLKAdditions . h in Headers * / = { isa = PBXBuildFile ; fileRef = 152AA8A21C2989270030DEEE / * UIScrollView + SLKAdditions . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 152AA8B71C2989270030DEEE / * UIScrollView + SLKAdditions . m in Sources * / = { isa = PBXBuildFile ; fileRef = 152AA8A31C2989270030DEEE / * UIScrollView + SLKAdditions . m * / ; } ; 
 @ @ - 270 , 30 + 268 , 22 @ @ 
 	 	 BED5A1DA1C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape . png in Resources * / = { isa = PBXBuildFile ; fileRef = BED5A1D41C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape . png * / ; } ; 
 	 	 BED5A1DB1C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape @ 2x . png in Resources * / = { isa = PBXBuildFile ; fileRef = BED5A1D51C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape @ 2x . png * / ; } ; 
 	 	 BED5A1DC1C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape @ 3x . png in Resources * / = { isa = PBXBuildFile ; fileRef = BED5A1D61C4839590045FDB0 / * NYTPhotoViewerCloseButtonXLandscape @ 3x . png * / ; } ; 
 - 	 	 BED5A1F01C48396A0045FDB0 / * NYTPhotoCaptionView . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1DE1C48396A0045FDB0 / * NYTPhotoCaptionView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A1F11C48396A0045FDB0 / * NYTPhotoCaptionView . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1DF1C48396A0045FDB0 / * NYTPhotoCaptionView . m * / ; } ; 
 - 	 	 BED5A1F21C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E01C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A1F31C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E11C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . m * / ; } ; 
 - 	 	 BED5A1F41C48396A0045FDB0 / * NYTPhotosDataSource . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E21C48396A0045FDB0 / * NYTPhotosDataSource . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A1F51C48396A0045FDB0 / * NYTPhotosDataSource . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E31C48396A0045FDB0 / * NYTPhotosDataSource . m * / ; } ; 
 - 	 	 BED5A1F61C48396A0045FDB0 / * NYTPhotosOverlayView . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E41C48396A0045FDB0 / * NYTPhotosOverlayView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A1F71C48396A0045FDB0 / * NYTPhotosOverlayView . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E51C48396A0045FDB0 / * NYTPhotosOverlayView . m * / ; } ; 
 	 	 BED5A1F81C48396A0045FDB0 / * NYTPhotosViewController . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E61C48396A0045FDB0 / * NYTPhotosViewController . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A1F91C48396A0045FDB0 / * NYTPhotosViewController . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E71C48396A0045FDB0 / * NYTPhotosViewController . m * / ; } ; 
 - 	 	 BED5A1FA1C48396A0045FDB0 / * NYTPhotoTransitionAnimator . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1E81C48396A0045FDB0 / * NYTPhotoTransitionAnimator . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A1FB1C48396A0045FDB0 / * NYTPhotoTransitionAnimator . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1E91C48396A0045FDB0 / * NYTPhotoTransitionAnimator . m * / ; } ; 
 - 	 	 BED5A1FC1C48396A0045FDB0 / * NYTPhotoTransitionController . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1EA1C48396A0045FDB0 / * NYTPhotoTransitionController . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A1FD1C48396A0045FDB0 / * NYTPhotoTransitionController . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1EB1C48396A0045FDB0 / * NYTPhotoTransitionController . m * / ; } ; 
 	 	 BED5A1FE1C48396A0045FDB0 / * NYTPhotoViewController . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1EC1C48396A0045FDB0 / * NYTPhotoViewController . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A1FF1C48396A0045FDB0 / * NYTPhotoViewController . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1ED1C48396A0045FDB0 / * NYTPhotoViewController . m * / ; } ; 
 - 	 	 BED5A2001C48396A0045FDB0 / * NYTScalingImageView . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A1EE1C48396A0045FDB0 / * NYTScalingImageView . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A2011C48396A0045FDB0 / * NYTScalingImageView . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A1EF1C48396A0045FDB0 / * NYTScalingImageView . m * / ; } ; 
 	 	 BED5A2071C4839790045FDB0 / * NYTPhoto . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2031C4839790045FDB0 / * NYTPhoto . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 - 	 	 BED5A2081C4839790045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2041C4839790045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 - 	 	 BED5A2091C4839790045FDB0 / * NYTPhotoContainer . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2051C4839790045FDB0 / * NYTPhotoContainer . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 - 	 	 BED5A20A1C4839790045FDB0 / * NYTPhotosViewControllerDataSource . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2061C4839790045FDB0 / * NYTPhotosViewControllerDataSource . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 - 	 	 BED5A20E1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A20C1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BED5A20F1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . m in Sources * / = { isa = PBXBuildFile ; fileRef = BED5A20D1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . m * / ; } ; 
 + 	 	 BED5A2111C48413C0045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2041C4839790045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 + 	 	 BED5A2121C48413C0045FDB0 / * NYTPhotoContainer . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2051C4839790045FDB0 / * NYTPhotoContainer . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 + 	 	 BED5A2131C48413C0045FDB0 / * NYTPhotosViewControllerDataSource . h in Headers * / = { isa = PBXBuildFile ; fileRef = BED5A2061C4839790045FDB0 / * NYTPhotosViewControllerDataSource . h * / ; settings = { ATTRIBUTES = ( Public , ) ; } ; } ; 
 	 	 BEF11DB61C466D800076400A / * begin _ record . caf in Resources * / = { isa = PBXBuildFile ; fileRef = 153F6B3C1C2A9B1900C0B960 / * begin _ record . caf * / ; } ; 
 	 	 BEFE68D51C4657360001F2D6 / * AAThumbnailCollectionCell . swift in Sources * / = { isa = PBXBuildFile ; fileRef = BEFE68D41C4657360001F2D6 / * AAThumbnailCollectionCell . swift * / ; } ; 
 / * End PBXBuildFile section * / 
 @ @ - 1460 , 26 + 1450 , 16 @ @ 
 	 	 	 	 152AA8AA1C2989270030DEEE / * SLKTextView . h in Headers * / , 
 	 	 	 	 152AA8B01C2989270030DEEE / * SLKTypingIndicatorProtocol . h in Headers * / , 
 	 	 	 	 152AA8AC1C2989270030DEEE / * SLKTextView + SLKAdditions . h in Headers * / , 
 - 	 	 	 	 152AA8A61C2989270030DEEE / * SLKInputAccessoryView . h in Headers * / , 
 	 	 	 	 152AA8AE1C2989270030DEEE / * SLKTextViewController . h in Headers * / , 
 	 	 	 	 152AA8B31C2989270030DEEE / * SLKUIConstants . h in Headers * / , 
 	 	 	 	 152AA8B61C2989270030DEEE / * UIScrollView + SLKAdditions . h in Headers * / , 
 + 	 	 	 	 BED5A2111C48413C0045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h in Headers * / , 
 + 	 	 	 	 BED5A2121C48413C0045FDB0 / * NYTPhotoContainer . h in Headers * / , 
 + 	 	 	 	 BED5A2131C48413C0045FDB0 / * NYTPhotosViewControllerDataSource . h in Headers * / , 
 	 	 	 	 152AA8B81C2989270030DEEE / * UIView + SLKAdditions . h in Headers * / , 
 - 	 	 	 	 152AA8B41C2989270030DEEE / * UIResponder + SLKAdditions . h in Headers * / , 
 	 	 	 	 BED5A1FE1C48396A0045FDB0 / * NYTPhotoViewController . h in Headers * / , 
 	 	 	 	 BED5A1F81C48396A0045FDB0 / * NYTPhotosViewController . h in Headers * / , 
 - 	 	 	 	 BED5A2001C48396A0045FDB0 / * NYTScalingImageView . h in Headers * / , 
 	 	 	 	 BED5A2071C4839790045FDB0 / * NYTPhoto . h in Headers * / , 
 - 	 	 	 	 BED5A1F21C48396A0045FDB0 / * NYTPhotoDismissalInteractionController . h in Headers * / , 
 - 	 	 	 	 BED5A20E1C4839880045FDB0 / * NSBundle + NYTPhotoViewer . h in Headers * / , 
 - 	 	 	 	 BED5A1F01C48396A0045FDB0 / * NYTPhotoCaptionView . h in Headers * / , 
 - 	 	 	 	 BED5A1FA1C48396A0045FDB0 / * NYTPhotoTransitionAnimator . h in Headers * / , 
 - 	 	 	 	 BED5A1F41C48396A0045FDB0 / * NYTPhotosDataSource . h in Headers * / , 
 - 	 	 	 	 BED5A1F61C48396A0045FDB0 / * NYTPhotosOverlayView . h in Headers * / , 
 - 	 	 	 	 BED5A2081C4839790045FDB0 / * NYTPhotoCaptionViewLayoutWidthHinting . h in Headers * / , 
 - 	 	 	 	 BED5A2091C4839790045FDB0 / * NYTPhotoContainer . h in Headers * / , 
 - 	 	 	 	 BED5A1FC1C48396A0045FDB0 / * NYTPhotoTransitionController . h in Headers * / , 
 - 	 	 	 	 BED5A20A1C4839790045FDB0 / * NYTPhotosViewControllerDataSource . h in Headers * / , 
 	 	 	 	 15D35F571C20187E00E3717A / * AAAudioRecorder . h in Headers * / , 
 	 	 	 	 15D35F641C20187E00E3717A / * AAModernConversationAudioPlayerContext . h in Headers * / , 
 	 	 	 	 15D35F681C20187E00E3717A / * AAModernViewInlineMediaContext . h in Headers * / , 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . h b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . h 
 index 4561cf6 . . 37b6056 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . h 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . h 
 @ @ - 38 , 7 + 38 , 17 @ @ FOUNDATION _ EXPORT const unsigned char ActorSDKVersionString [ ] ; 
 
 # import " NYTPhotosViewController . h " 
 # import " NYTPhoto . h " 
 + # import " NYTPhotoViewController . h " 
 + # import " NYTPhotosViewControllerDataSource . h " 
 + # import " NYTPhotoCaptionViewLayoutWidthHinting . h " 
 
 # import " AAAudioRecorder . h " 
 # import " AAAudioPlayer . h " 
 - # import " AAModernConversationAudioPlayer . h " 
 \ No newline at end of file 
 + # import " AAModernConversationAudioPlayer . h " 
 + 
 + / / 
 + 
 + # import " CLTokenView . h " 
 + 
 + 
 + 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 index ecb9d2b . . 4c8d83a 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 @ @ - 291 , 11 + 291 , 11 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 
 / / Photo preview 
 
 - public func photosViewController ( photosViewController : NYTPhotosViewController ! , referenceViewForPhoto photo : NYTPhoto ! ) - > UIView ! { 
 + public func photosViewController ( photosViewController : NYTPhotosViewController , referenceViewForPhoto photo : NYTPhoto ) - > UIView ? { 
 return self . preview 
 } 
 
 - public func photosViewControllerWillDismiss ( photosViewController : NYTPhotosViewController ! ) { 
 + public func photosViewControllerWillDismiss ( photosViewController : NYTPhotosViewController ) { 
 / / ( UIApplication . sharedApplication ( ) . delegate as ! AppDelegate ) . showBadge ( ) 
 UIApplication . sharedApplication ( ) . setStatusBarHidden ( false , withAnimation : UIStatusBarAnimation . Fade ) 
 } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAPhotoPreviewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAPhotoPreviewController . swift 
 index fdadcca . . 3d851d4 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAPhotoPreviewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Previews / AAPhotoPreviewController . swift 
 @ @ - 115 , 7 + 115 , 7 @ @ public class AAPhotoPreviewController : NYTPhotosViewController , NYTPhotosViewCon 
 } 
 } 
 
 - public func photosViewController ( photosViewController : NYTPhotosViewController ! , referenceViewForPhoto photo : NYTPhoto ! ) - > UIView ! { 
 + public func photosViewController ( photosViewController : NYTPhotosViewController , referenceViewForPhoto photo : NYTPhoto ) - > UIView ? { 
 return self . fromView 
 } 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 
 index 60b7cf9 . . be197ca 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 	 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 	 
 @ @ - 184 , 7 + 184 , 7 @ @ public class AAViewController : UIViewController , UINavigationControllerDelegate , 
 navigationController ! . presentViewController ( UINavigationController ( rootViewController : cropController ) , animated : true , completion : nil ) 
 } 
 
 - public func imageCropViewController ( controller : RSKImageCropViewController ! , didCropImage croppedImage : UIImage ! , usingCropRect cropRect : CGRect ) { 
 + public func imageCropViewController ( controller : RSKImageCropViewController , didCropImage croppedImage : UIImage , usingCropRect cropRect : CGRect ) { 
 if ( pendingPickClosure ! = nil ) { 
 pendingPickClosure ! ( image : croppedImage ) 
 } 
 @ @ - 192 , 7 + 192 , 7 @ @ public class AAViewController : UIViewController , UINavigationControllerDelegate , 
 navigationController ! . dismissViewControllerAnimated ( true , completion : nil ) 
 } 
 
 - public func imageCropViewControllerDidCancelCrop ( controller : RSKImageCropViewController ! ) { 
 + public func imageCropViewControllerDidCancelCrop ( controller : RSKImageCropViewController ) { 
 pendingPickClosure = nil 
 navigationController ! . dismissViewControllerAnimated ( true , completion : nil ) 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 index 6606a24 . . f6dbf3d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK . xcodeproj / project . pbxproj 
 @ @ - 173 , 6 + 173 , 7 @ @ 
 	 	 069CF4D31BCB909A00C66E12 / * CLTokenView . m in Sources * / = { isa = PBXBuildFile ; fileRef = 069CF4CB1BCB909A00C66E12 / * CLTokenView . m * / ; settings = { ASSET _ TAGS = ( ) ; } ; } ; 
 	 	 06CE898A1BD8401C005A5530 / * Reachability . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06CE89891BD8401C005A5530 / * Reachability . swift * / ; settings = { ASSET _ TAGS = ( ) ; } ; } ; 
 	 	 06CE898C1BD841C9005A5530 / * SystemConfiguration . framework in Frameworks * / = { isa = PBXBuildFile ; fileRef = 06CE898B1BD841C9005A5530 / * SystemConfiguration . framework * / ; } ; 
 + 	 	 06CE89901BD84DF5005A5530 / * ActorSDKAnalytics . swift in Sources * / = { isa = PBXBuildFile ; fileRef = 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / ; settings = { ASSET _ TAGS = ( ) ; } ; } ; 
 / * End PBXBuildFile section * / 
 
 / * Begin PBXFileReference section * / 
 @ @ - 353 , 6 + 354 , 7 @ @ 
 	 	 069CF4CB1BCB909A00C66E12 / * CLTokenView . m * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . c . objc ; name = CLTokenView . m ; path = CLTokenInputView / CLTokenView . m ; sourceTree = " < group > " ; } ; 
 	 	 06CE89891BD8401C005A5530 / * Reachability . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = Reachability . swift ; sourceTree = " < group > " ; } ; 
 	 	 06CE898B1BD841C9005A5530 / * SystemConfiguration . framework * / = { isa = PBXFileReference ; lastKnownFileType = wrapper . framework ; name = SystemConfiguration . framework ; path = System / Library / Frameworks / SystemConfiguration . framework ; sourceTree = SDKROOT ; } ; 
 + 	 	 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / = { isa = PBXFileReference ; fileEncoding = 4 ; lastKnownFileType = sourcecode . swift ; path = ActorSDKAnalytics . swift ; sourceTree = " < group > " ; } ; 
 	 	 22BAEA363892E475F59B7E9F / * Pods - ActorSDK . debug . xcconfig * / = { isa = PBXFileReference ; includeInIndex = 1 ; lastKnownFileType = text . xcconfig ; name = " Pods - ActorSDK . debug . xcconfig " ; path = " Pods / Target Support Files / Pods - ActorSDK / Pods - ActorSDK . debug . xcconfig " ; sourceTree = " < group > " ; } ; 
 	 	 333F91AE5263DD450666CC87 / * Pods - ActorSDK . release . xcconfig * / = { isa = PBXFileReference ; includeInIndex = 1 ; lastKnownFileType = text . xcconfig ; name = " Pods - ActorSDK . release . xcconfig " ; path = " Pods / Target Support Files / Pods - ActorSDK / Pods - ActorSDK . release . xcconfig " ; sourceTree = " < group > " ; } ; 
 	 	 9A22DF21664BBB34087283F6 / * Pods _ ActorSDK . framework * / = { isa = PBXFileReference ; explicitFileType = wrapper . framework ; includeInIndex = 0 ; path = Pods _ ActorSDK . framework ; sourceTree = BUILT _ PRODUCTS _ DIR ; } ; 
 @ @ - 860 , 6 + 862 , 7 @ @ 
 	 	 	 	 066A51201BC4B53C000E606E / * SwiftExtensions * / , 
 	 	 	 	 066A51571BC4C112000E606E / * Utils * / , 
 	 	 	 	 066A50E11BC4AF9F000E606E / * ActorSDK . swift * / , 
 + 	 	 	 	 06CE898F1BD84DF5005A5530 / * ActorSDKAnalytics . swift * / , 
 	 	 	 	 066A525B1BC502EB000E606E / * ActorSDKDelegate . swift * / , 
 	 	 	 	 066A53381BC5456B000E606E / * ActorStyle . swift * / , 
 	 	 	 	 066A525D1BC503BB000E606E / * ActorApplicationDelegate . swift * / , 
 @ @ - 1122 , 6 + 1125 , 7 @ @ 
 	 	 	 	 066A53231BC533F5000E606E / * Caches . swift in Sources * / , 
 	 	 	 	 066A52691BC50E7B000E606E / * AAAuthRegisterViewController . swift in Sources * / , 
 	 	 	 	 066A51501BC4BE06000E606E / * AARegex . swift in Sources * / , 
 + 	 	 	 	 06CE89901BD84DF5005A5530 / * ActorSDKAnalytics . swift in Sources * / , 
 	 	 	 	 069CF4D31BCB909A00C66E12 / * CLTokenView . m in Sources * / , 
 	 	 	 	 066A52F71BC52B13000E606E / * AAWallpapperPreviewCell . swift in Sources * / , 
 	 	 	 	 066A51541BC4BE95000E606E / * Images . swift in Sources * / , 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift 
 index e9b66f6 . . e761de9 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDK . swift 
 @ @ - 30 , 6 + 30 , 9 @ @ public class ActorSDK { 
 / / / SDK Delegate 
 public var delegate : ActorSDKDelegate = ActorSDKDelegateDefault ( ) 
 
 + / / / SDK Analytics 
 + public var analyticsDelegate : ActorSDKAnalytics ? 
 + 
 / / 
 / / Configuration 
 / / 
 @ @ - 410 , 6 + 413 , 21 @ @ public class ActorSDK { 
 } 
 } 
 
 + / / / Tracking page visible 
 + func trackPageVisible ( page : ACPage ) { 
 + analyticsDelegate ? . analyticsPageVisible ( page ) 
 + } 
 + 
 + / / / Tracking page hidden 
 + func trackPageHidden ( page : ACPage ) { 
 + analyticsDelegate ? . analyticsPageHidden ( page ) 
 + } 
 + 
 + / / / Tracking event 
 + func trackEvent ( event : ACEvent ) { 
 + analyticsDelegate ? . analyticsEvent ( event ) 
 + } 
 + 
 / / 
 / / File System 
 / / 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDKAnalytics . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDKAnalytics . swift 
 new file mode 100644 
 index 0000000 . . 3751467 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorSDKAnalytics . swift 
 @ @ - 0 , 0 + 1 , 17 @ @ 
 + / / 
 + / / Copyright ( c ) 2014 - 2015 Actor LLC . < https : / / actor . im > 
 + / / 
 + 
 + import Foundation 
 + 
 + public protocol ActorSDKAnalytics { 
 + 
 + / / / Called when page visible 
 + func analyticsPageVisible ( page : ACPage ) 
 + 
 + / / / Called when page hidden 
 + func analyticsPageHidden ( page : ACPage ) 
 + 
 + / / / Called when event occurs 
 + func analyticsEvent ( event : ACEvent ) 
 + } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 index 03ce9dc . . be20271 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 @ @ - 193 , 7 + 193 , 7 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 } 
 
 Actor . onConversationOpenWithPeer ( peer ) 
 - / / Analytics . trackPageVisible ( content ) 
 + ActorSDK . sharedActor ( ) . trackPageVisible ( content ) 
 } 
 
 override func viewWillLayoutSubviews ( ) { 
 @ @ - 222 , 7 + 222 , 7 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 super . viewWillDisappear ( animated ) 
 
 Actor . onConversationClosedWithPeer ( peer ) 
 - / / Analytics . trackPageHidden ( content ) 
 + ActorSDK . sharedActor ( ) . trackPageHidden ( content ) 
 
 if ! AADevice . isiPad { 
 AANavigationBadge . hideBadge ( ) 
 @ @ - 308 , 14 + 308 , 14 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 
 / / Completition 
 
 - override func canShowAutoCompletion ( ) - > Bool { 
 + override func didChangeAutoCompletionPrefix ( prefix : String ! , andWord word : String ! ) { 
 if UInt ( self . peer . peerType . ordinal ( ) ) = = ACPeerType . GROUP . rawValue { 
 - if self . foundPrefix = = " @ " { 
 - 
 + if prefix = = " @ " { 
 + 
 let oldCount = filteredMembers . count 
 filteredMembers . removeAll ( keepCapacity : true ) 
 
 - let res = Actor . findMentionsWithGid ( self . peer . peerId , withQuery : self . foundWord ) 
 + let res = Actor . findMentionsWithGid ( self . peer . peerId , withQuery : word ) 
 for index in 0 . . < res . size ( ) { 
 filteredMembers . append ( res . getWithInt ( index ) as ! ACMentionFilterResult ) 
 } 
 @ @ - 324 , 13 + 324 , 16 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 self . autoCompletionView . reloadData ( ) 
 } 
 
 - return filteredMembers . count > 0 
 + dispatchOnUi { ( ) - > Void in 
 + self . showAutoCompletionView ( self . filteredMembers . count > 0 ) 
 + } 
 + return 
 } 
 - 
 - return false 
 } 
 
 - return false 
 + dispatchOnUi { ( ) - > Void in 
 + self . showAutoCompletionView ( false ) 
 + } 
 } 
 
 override func tableView ( tableView : UITableView , numberOfRowsInSection section : Int ) - > Int { 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 
 index 16cc802 . . 60b7cf9 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 	 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAViewController . swift 	 
 @ @ - 148 , 7 + 148 , 7 @ @ public class AAViewController : UIViewController , UINavigationControllerDelegate , 
 super . viewWillAppear ( animated ) 
 
 if let c = content { 
 - / / Analytics . trackPageVisible ( c ) 
 + ActorSDK . sharedActor ( ) . trackPageVisible ( c ) 
 } 
 if let u = uid { 
 Actor . onProfileOpenWithUid ( jint ( u ) ) 
 @ @ - 159 , 7 + 159 , 7 @ @ public class AAViewController : UIViewController , UINavigationControllerDelegate , 
 super . viewWillDisappear ( animated ) 
 
 if let c = content { 
 - / / Analytics . trackPageHidden ( c ) 
 + ActorSDK . sharedActor ( ) . trackPageHidden ( c ) 
 } 
 if let u = uid { 
 Actor . onProfileClosedWithUid ( jint ( u ) ) 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 index af64e43 . . f26c644 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 @ @ - 355 , 12 + 355 , 6 @ @ public class AASettingsViewController : AAContentTableController { 
 ActorSDK . sharedActor ( ) . delegate . actorSettingsSupportDidCreated ( self , section : s ) 
 } 
 } 
 - 
 - public override func viewWillAppear ( animated : Bool ) { 
 - super . viewWillAppear ( animated ) 
 - 
 - Actor . onProfileOpenWithUid ( jint ( uid ) ) 
 - } 
 
 public override func tableWillBind ( binder : AABinder ) { 
 
 @ @ - 408 , 10 + 402 , 4 @ @ public class AASettingsViewController : AAContentTableController { 
 self . emailCells . reload ( ) 
 } ) 
 } 
 - 
 - public override func viewWillDisappear ( animated : Bool ) { 
 - super . viewWillDisappear ( animated ) 
 - 
 - Actor . onProfileClosedWithUid ( jint ( uid ) ) 
 - } 
 } 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / User / AAUserViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / User / AAUserViewController . swift 
 index 15bcab8 . . 584a829 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / User / AAUserViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / User / AAUserViewController . swift 
 @ @ - 226 , 12 + 226 , 6 @ @ class AAUserViewController : AAContentTableController { 
 
 } 
 
 - override func viewWillAppear ( animated : Bool ) { 
 - super . viewWillAppear ( animated ) 
 - 
 - Actor . onProfileOpenWithUid ( jint ( uid ) ) 
 - } 
 - 
 override func tableWillBind ( binder : AABinder ) { 
 binder . bind ( user . getAvatarModel ( ) , closure : { ( value : ACAvatar ? ) - > ( ) in 
 self . headerRow . reload ( ) 
 @ @ - 251 , 10 + 245 , 4 @ @ class AAUserViewController : AAContentTableController { 
 } ) 
 } 
 } 
 - 
 - override func viewWillDisappear ( animated : Bool ) { 
 - super . viewWillDisappear ( animated ) 
 - 
 - Actor . onProfileOpenWithUid ( jint ( uid ) ) 
 - } 
 }
