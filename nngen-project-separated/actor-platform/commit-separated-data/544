BLEU SCORE: 0.24601372576927535

TEST MSG: fix ( android ) : remove colon from mention if it ' s not first
GENERATED MSG: fix ( android ) : crash when authActivity is invisible and state changed

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / SignInFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / SignInFragment . java < nl > index 6a13cbf . . fa05f3d 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / SignInFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / SignInFragment . java < nl > @ @ - 95 , 7 + 95 , 6 @ @ public class SignInFragment extends BaseAuthFragment { < nl > signIdEditText = ( EditText ) v . findViewById ( R . id . tv _ sign _ in ) ; < nl > signIdEditText . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > signIdEditText . setHighlightColor ( style . getMainColor ( ) ) ; < nl > - setSuggestedEmail ( signIdEditText ) ; < nl > < nl > signIdEditText . setOnEditorActionListener ( new TextView . OnEditorActionListener ( ) { < nl > @ Override < nl > @ @ - 111 , 6 + 110 , 7 @ @ public class SignInFragment extends BaseAuthFragment { < nl > int availableAuthType = ActorSDK . sharedActor ( ) . getAuthType ( ) ; < nl > if ( ( ( availableAuthType & AuthActivity . AUTH _ TYPE _ PHONE ) = = AuthActivity . AUTH _ TYPE _ PHONE ) & & ( ( availableAuthType & AuthActivity . AUTH _ TYPE _ EMAIL ) = = AuthActivity . AUTH _ TYPE _ EMAIL ) ) { < nl > / / both hints set phone + email by default < nl > + setSuggestedEmail ( signIdEditText ) ; < nl > } else if ( ( availableAuthType & AuthActivity . AUTH _ TYPE _ PHONE ) = = AuthActivity . AUTH _ TYPE _ PHONE ) { < nl > hint . setText ( getString ( R . string . sign _ in _ hint _ phone _ only ) ) ; < nl > signIdEditText . setHint ( getString ( R . string . sign _ in _ edit _ text _ hint _ phone _ only ) ) ; < nl > @ @ - 118 , 6 + 118 , 7 @ @ public class SignInFragment extends BaseAuthFragment { < nl > } else if ( ( availableAuthType & AuthActivity . AUTH _ TYPE _ EMAIL ) = = AuthActivity . AUTH _ TYPE _ EMAIL ) { < nl > hint . setText ( getString ( R . string . sign _ in _ hint _ email _ only ) ) ; < nl > signIdEditText . setHint ( getString ( R . string . sign _ in _ edit _ text _ hint _ email _ only ) ) ; < nl > + setSuggestedEmail ( signIdEditText ) ; < nl > } < nl > < nl > Button singUp = ( Button ) v . findViewById ( R . id . button _ sign _ up ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index 273f9fc . . 03d8610 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 1025 , 7 + 1025 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > < nl > if ( mentionStart ! = - 1 & & mentionStart + mentionSearchString . length ( ) + 1 < = messageEditText . getText ( ) . length ( ) ) { < nl > < nl > - String mentionString = origMention + " : " ; < nl > + String mentionString = origMention + ( mentionStart = = 0 ? " " : " : " ) ; < nl > < nl > Editable text = messageEditText . getText ( ) ; < nl > < nl > @ @ - 1067 , 7 + 1067 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > Editable text = messageEditText . getText ( ) ; < nl > if ( text . length ( ) > 0 & & text . charAt ( text . length ( ) - 1 ) ! = ' ' ) text . append ( " " ) ; < nl > < nl > - String mentionString = ( ( nick ! = null & & ! nick . isEmpty ( ) ) ? " @ " + nick : name ) + " : " ; < nl > + String mentionString = ( ( nick ! = null & & ! nick . isEmpty ( ) ) ? " @ " + nick : name ) + ( messageEditText . getText ( ) . length ( ) > 0 ? " " : " : " ) ; < nl > < nl > text . append ( mentionString ) ; < nl > messageEditText . requestFocus ( ) ;
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java < nl > index ac2062b . . 3ea1287 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java < nl > @ @ - 174 , 6 + 174 , 11 @ @ public class BaseActivity extends AppCompatActivity { < nl > messenger ( ) . onActivityClosed ( ) ; < nl > } < nl > < nl > + protected boolean getIsResumed ( ) < nl > + { < nl > + return isResumed ; < nl > + } < nl > + < nl > public < T > void execute ( Command < T > cmd , int title , final CommandCallback < T > callback ) { < nl > final ProgressDialog progressDialog = new ProgressDialog ( this ) ; < nl > progressDialog . setMessage ( getString ( title ) ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java < nl > index fbcb072 . . 790cf4e 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java < nl > @ @ - 70 , 6 + 70 , 8 @ @ public class AuthActivity extends BaseFragmentActivity { < nl > if ( messenger ( ) . getAuthState ( ) = = AuthState . LOGGED _ IN ) { < nl > finish ( ) ; < nl > } < nl > + < nl > + updateState ( ) ; < nl > } < nl > < nl > public void updateState ( ) { < nl > @ @ - 80 , 6 + 82 , 12 @ @ public class AuthActivity extends BaseFragmentActivity { < nl > if ( this . state ! = null & & this . state = = state ) { < nl > return ; < nl > } < nl > + < nl > + / / if we show the next fragment when app is in background and not visible , app crashes ! < nl > + / / e . g when the GSM data is off and after trying to send code we go to settings to turn on , app is going invisible and . . . < nl > + if ( state ! = AuthState . LOGGED _ IN & & getIsResumed ( ) = = false ) < nl > + return ; < nl > + < nl > this . state = state ; < nl > < nl > switch ( state ) {

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / SignInFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / SignInFragment . java 
 index 6a13cbf . . fa05f3d 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / SignInFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / SignInFragment . java 
 @ @ - 95 , 7 + 95 , 6 @ @ public class SignInFragment extends BaseAuthFragment { 
 signIdEditText = ( EditText ) v . findViewById ( R . id . tv _ sign _ in ) ; 
 signIdEditText . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 signIdEditText . setHighlightColor ( style . getMainColor ( ) ) ; 
 - setSuggestedEmail ( signIdEditText ) ; 
 
 signIdEditText . setOnEditorActionListener ( new TextView . OnEditorActionListener ( ) { 
 @ Override 
 @ @ - 111 , 6 + 110 , 7 @ @ public class SignInFragment extends BaseAuthFragment { 
 int availableAuthType = ActorSDK . sharedActor ( ) . getAuthType ( ) ; 
 if ( ( ( availableAuthType & AuthActivity . AUTH _ TYPE _ PHONE ) = = AuthActivity . AUTH _ TYPE _ PHONE ) & & ( ( availableAuthType & AuthActivity . AUTH _ TYPE _ EMAIL ) = = AuthActivity . AUTH _ TYPE _ EMAIL ) ) { 
 / / both hints set phone + email by default 
 + setSuggestedEmail ( signIdEditText ) ; 
 } else if ( ( availableAuthType & AuthActivity . AUTH _ TYPE _ PHONE ) = = AuthActivity . AUTH _ TYPE _ PHONE ) { 
 hint . setText ( getString ( R . string . sign _ in _ hint _ phone _ only ) ) ; 
 signIdEditText . setHint ( getString ( R . string . sign _ in _ edit _ text _ hint _ phone _ only ) ) ; 
 @ @ - 118 , 6 + 118 , 7 @ @ public class SignInFragment extends BaseAuthFragment { 
 } else if ( ( availableAuthType & AuthActivity . AUTH _ TYPE _ EMAIL ) = = AuthActivity . AUTH _ TYPE _ EMAIL ) { 
 hint . setText ( getString ( R . string . sign _ in _ hint _ email _ only ) ) ; 
 signIdEditText . setHint ( getString ( R . string . sign _ in _ edit _ text _ hint _ email _ only ) ) ; 
 + setSuggestedEmail ( signIdEditText ) ; 
 } 
 
 Button singUp = ( Button ) v . findViewById ( R . id . button _ sign _ up ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index 273f9fc . . 03d8610 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 1025 , 7 + 1025 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { 
 
 if ( mentionStart ! = - 1 & & mentionStart + mentionSearchString . length ( ) + 1 < = messageEditText . getText ( ) . length ( ) ) { 
 
 - String mentionString = origMention + " : " ; 
 + String mentionString = origMention + ( mentionStart = = 0 ? " " : " : " ) ; 
 
 Editable text = messageEditText . getText ( ) ; 
 
 @ @ - 1067 , 7 + 1067 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { 
 Editable text = messageEditText . getText ( ) ; 
 if ( text . length ( ) > 0 & & text . charAt ( text . length ( ) - 1 ) ! = ' ' ) text . append ( " " ) ; 
 
 - String mentionString = ( ( nick ! = null & & ! nick . isEmpty ( ) ) ? " @ " + nick : name ) + " : " ; 
 + String mentionString = ( ( nick ! = null & & ! nick . isEmpty ( ) ) ? " @ " + nick : name ) + ( messageEditText . getText ( ) . length ( ) > 0 ? " " : " : " ) ; 
 
 text . append ( mentionString ) ; 
 messageEditText . requestFocus ( ) ;

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java 
 index ac2062b . . 3ea1287 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / activity / BaseActivity . java 
 @ @ - 174 , 6 + 174 , 11 @ @ public class BaseActivity extends AppCompatActivity { 
 messenger ( ) . onActivityClosed ( ) ; 
 } 
 
 + protected boolean getIsResumed ( ) 
 + { 
 + return isResumed ; 
 + } 
 + 
 public < T > void execute ( Command < T > cmd , int title , final CommandCallback < T > callback ) { 
 final ProgressDialog progressDialog = new ProgressDialog ( this ) ; 
 progressDialog . setMessage ( getString ( title ) ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java 
 index fbcb072 . . 790cf4e 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java 
 @ @ - 70 , 6 + 70 , 8 @ @ public class AuthActivity extends BaseFragmentActivity { 
 if ( messenger ( ) . getAuthState ( ) = = AuthState . LOGGED _ IN ) { 
 finish ( ) ; 
 } 
 + 
 + updateState ( ) ; 
 } 
 
 public void updateState ( ) { 
 @ @ - 80 , 6 + 82 , 12 @ @ public class AuthActivity extends BaseFragmentActivity { 
 if ( this . state ! = null & & this . state = = state ) { 
 return ; 
 } 
 + 
 + / / if we show the next fragment when app is in background and not visible , app crashes ! 
 + / / e . g when the GSM data is off and after trying to send code we go to settings to turn on , app is going invisible and . . . 
 + if ( state ! = AuthState . LOGGED _ IN & & getIsResumed ( ) = = false ) 
 + return ; 
 + 
 this . state = state ; 
 
 switch ( state ) {
