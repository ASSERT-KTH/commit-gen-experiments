BLEU SCORE: 0.2560797001652275

TEST MSG: fix ( iOS ) : Fixing Managed Tables performance
GENERATED MSG: fix ( iOS ) : remove memory leaks form conv controller and attachment sheet

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / AADialogsListContentController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / AADialogsListContentController . swift < nl > index 04c4554 . . 85bd03f 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / AADialogsListContentController . swift 	 < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / AADialogsListContentController . swift 	 < nl > @ @ - 13 , 6 + 13 , 8 @ @ public class AADialogsListContentController : AAContentTableController , UISearchB < nl > < nl > public init ( ) { < nl > super . init ( style : . Plain ) < nl > + < nl > + unbindOnDissapear = true < nl > } < nl > < nl > public required init ( coder aDecoder : NSCoder ) { < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / Cells / AADialogCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / Cells / AADialogCell . swift < nl > index 43d85f2 . . eef09c7 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / Cells / AADialogCell . swift 	 < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / Cells / AADialogCell . swift 	 < nl > @ @ - 141 , 7 + 141 , 9 @ @ public class AADialogCell : AATableViewCell , AABindedCell { < nl > < nl > avatarView . frame = CGRectMake ( padding , padding , 48 , 48 ) < nl > < nl > - titleView . frame = CGRectMake ( leftPadding , 16 , width - leftPadding - / * paddingRight * / ( padding + 50 ) , 21 ) < nl > + UIView . performWithoutAnimation { < nl > + self . titleView . frame = CGRectMake ( leftPadding , 16 , width - leftPadding - / * paddingRight * / ( padding + 50 ) , 21 ) < nl > + } < nl > < nl > var messagePadding : CGFloat = 0 < nl > if ( ! self . statusView . hidden ) { < nl > @ @ - 159 , 7 + 161 , 9 @ @ public class AADialogCell : AATableViewCell , AABindedCell { < nl > unreadPadding = unreadW < nl > } < nl > < nl > - messageView . frame = CGRectMake ( leftPadding + messagePadding , 44 , width - leftPadding - / * paddingRight * / padding - messagePadding - unreadPadding , 18 ) < nl > + UIView . performWithoutAnimation { < nl > + self . messageView . frame = CGRectMake ( leftPadding + messagePadding , 44 , width - leftPadding - / * paddingRight * / padding - messagePadding - unreadPadding , 18 ) < nl > + } < nl > < nl > dateView . frame = CGRectMake ( width - / * width * / 60 - / * paddingRight * / padding , 18 , 60 , 18 ) < nl > } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAManagedTableController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAManagedTableController . swift < nl > index 3f18b55 . . 892a4f0 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAManagedTableController . swift 	 < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAManagedTableController . swift 	 < nl > @ @ - 89 , 10 + 89 , 14 @ @ public class AAManagedTableController : AAViewController { < nl > if ! isBinded { < nl > / / Binding rows < nl > m . bind ( binder ) < nl > + isBinded = true < nl > } < nl > < nl > / / Passing event to table < nl > m . controllerViewWillAppear ( animated ) < nl > + < nl > + / / Reloading data < nl > + tableView . reloadData ( ) < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedBindedCells . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedBindedCells . swift < nl > index fa8fc07 . . 3b11bee 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedBindedCells . swift 	 < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedBindedCells . swift 	 < nl > @ @ - 216 , 7 + 216 , 7 @ @ public class AABindedRows < BindCell where BindCell : UITableViewCell , BindCell : AA < nl > if animated { < nl > displayList . removeAppleListener ( self ) < nl > } else { < nl > - displayList . addListener ( self ) < nl > + displayList . removeListener ( self ) < nl > } < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > index 5a15add . . 8f60973 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > @ @ - 122 , 7 + 122 , 7 @ @ public class AABubbleCell : UICollectionViewCell { < nl > < nl > / / Binded data < nl > public var peer : ACPeer ! < nl > - public var controller : AAConversationContentController ! < nl > + public weak var controller : AAConversationContentController ! < nl > public var isGroup : Bool = false < nl > public var isFullSize : Bool ! < nl > public var bindedSetting : AACellSetting ? < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAConvActionSheet . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAConvActionSheet . swift < nl > index 58f4ec0 . . 5e4ce78 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAConvActionSheet . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAConvActionSheet . swift < nl > @ @ - 305 , 5 + 305 , 6 @ @ class AAConvActionSheet : UIView { < nl > } < nl > < nl > } < nl > + < nl > < nl > } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > index 8b6732b . . e1fe5cc 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift < nl > @ @ - 180 , 12 + 180 , 6 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > name : SLKKeyboardWillHideNotification , < nl > object : nil ) < nl > < nl > - } < nl > - < nl > - override func viewWillAppear ( animated : Bool ) { < nl > - super . viewWillAppear ( animated ) < nl > - < nl > - textView . text = Actor . loadDraftWithPeer ( peer ) < nl > < nl > / / Installing bindings < nl > if ( UInt ( peer . peerType . ordinal ( ) ) = = ACPeerType . PRIVATE . rawValue ) { < nl > @ @ - 240 , 7 + 234 , 7 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > } else { < nl > self . setTextInputbarHidden ( false , animated : false ) < nl > } < nl > - < nl > + < nl > if ( typingValue ! = nil & & typingValue ! . length ( ) > 0 ) { < nl > self . subtitleView . textColor = self . appStyle . navigationSubtitleActiveColor < nl > if ( typingValue ! . length ( ) = = 1 ) { < nl > @ @ - 268 , 6 + 262 , 19 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > < nl > Actor . onConversationOpenWithPeer ( peer ) < nl > ActorSDK . sharedActor ( ) . trackPageVisible ( content ) < nl > + < nl > + } < nl > + < nl > + override func viewWillAppear ( animated : Bool ) { < nl > + super . viewWillAppear ( animated ) < nl > + < nl > + < nl > + if textView . isFirstResponder ( ) = = false { < nl > + textView . resignFirstResponder ( ) < nl > + } < nl > + < nl > + textView . text = Actor . loadDraftWithPeer ( peer ) < nl > + < nl > } < nl > < nl > override func viewWillLayoutSubviews ( ) { < nl > @ @ - 320 , 6 + 327 , 9 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > < nl > / / Releasing bindings < nl > binder . unbindAll ( ) < nl > + < nl > + self . actionSheet . removeFromSuperview ( ) < nl > + self . actionSheet = nil < nl > } < nl > < nl > / / Chat avatar tap < nl > @ @ - 798 , 6 + 808 , 10 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen < nl > Actor . sendStickerWithPeer ( self . peer , withSticker : sticker ) < nl > < nl > } < nl > + < nl > + deinit { < nl > + print ( " conversation controller deinit ' ed " ) < nl > + } < nl > < nl > < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / AADialogsListContentController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / AADialogsListContentController . swift 
 index 04c4554 . . 85bd03f 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / AADialogsListContentController . swift 	 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / AADialogsListContentController . swift 	 
 @ @ - 13 , 6 + 13 , 8 @ @ public class AADialogsListContentController : AAContentTableController , UISearchB 
 
 public init ( ) { 
 super . init ( style : . Plain ) 
 + 
 + unbindOnDissapear = true 
 } 
 
 public required init ( coder aDecoder : NSCoder ) { 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / Cells / AADialogCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / Cells / AADialogCell . swift 
 index 43d85f2 . . eef09c7 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / Cells / AADialogCell . swift 	 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Dialogs List / Cells / AADialogCell . swift 	 
 @ @ - 141 , 7 + 141 , 9 @ @ public class AADialogCell : AATableViewCell , AABindedCell { 
 
 avatarView . frame = CGRectMake ( padding , padding , 48 , 48 ) 
 
 - titleView . frame = CGRectMake ( leftPadding , 16 , width - leftPadding - / * paddingRight * / ( padding + 50 ) , 21 ) 
 + UIView . performWithoutAnimation { 
 + self . titleView . frame = CGRectMake ( leftPadding , 16 , width - leftPadding - / * paddingRight * / ( padding + 50 ) , 21 ) 
 + } 
 
 var messagePadding : CGFloat = 0 
 if ( ! self . statusView . hidden ) { 
 @ @ - 159 , 7 + 161 , 9 @ @ public class AADialogCell : AATableViewCell , AABindedCell { 
 unreadPadding = unreadW 
 } 
 
 - messageView . frame = CGRectMake ( leftPadding + messagePadding , 44 , width - leftPadding - / * paddingRight * / padding - messagePadding - unreadPadding , 18 ) 
 + UIView . performWithoutAnimation { 
 + self . messageView . frame = CGRectMake ( leftPadding + messagePadding , 44 , width - leftPadding - / * paddingRight * / padding - messagePadding - unreadPadding , 18 ) 
 + } 
 
 dateView . frame = CGRectMake ( width - / * width * / 60 - / * paddingRight * / padding , 18 , 60 , 18 ) 
 } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAManagedTableController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAManagedTableController . swift 
 index 3f18b55 . . 892a4f0 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAManagedTableController . swift 	 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / AAManagedTableController . swift 	 
 @ @ - 89 , 10 + 89 , 14 @ @ public class AAManagedTableController : AAViewController { 
 if ! isBinded { 
 / / Binding rows 
 m . bind ( binder ) 
 + isBinded = true 
 } 
 
 / / Passing event to table 
 m . controllerViewWillAppear ( animated ) 
 + 
 + / / Reloading data 
 + tableView . reloadData ( ) 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedBindedCells . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedBindedCells . swift 
 index fa8fc07 . . 3b11bee 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedBindedCells . swift 	 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedBindedCells . swift 	 
 @ @ - 216 , 7 + 216 , 7 @ @ public class AABindedRows < BindCell where BindCell : UITableViewCell , BindCell : AA 
 if animated { 
 displayList . removeAppleListener ( self ) 
 } else { 
 - displayList . addListener ( self ) 
 + displayList . removeListener ( self ) 
 } 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 index 5a15add . . 8f60973 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 @ @ - 122 , 7 + 122 , 7 @ @ public class AABubbleCell : UICollectionViewCell { 
 
 / / Binded data 
 public var peer : ACPeer ! 
 - public var controller : AAConversationContentController ! 
 + public weak var controller : AAConversationContentController ! 
 public var isGroup : Bool = false 
 public var isFullSize : Bool ! 
 public var bindedSetting : AACellSetting ? 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAConvActionSheet . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAConvActionSheet . swift 
 index 58f4ec0 . . 5e4ce78 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAConvActionSheet . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Views / AAConvActionSheet . swift 
 @ @ - 305 , 5 + 305 , 6 @ @ class AAConvActionSheet : UIView { 
 } 
 
 } 
 + 
 
 } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 index 8b6732b . . e1fe5cc 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Conversation / ConversationViewController . swift 
 @ @ - 180 , 12 + 180 , 6 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 name : SLKKeyboardWillHideNotification , 
 object : nil ) 
 
 - } 
 - 
 - override func viewWillAppear ( animated : Bool ) { 
 - super . viewWillAppear ( animated ) 
 - 
 - textView . text = Actor . loadDraftWithPeer ( peer ) 
 
 / / Installing bindings 
 if ( UInt ( peer . peerType . ordinal ( ) ) = = ACPeerType . PRIVATE . rawValue ) { 
 @ @ - 240 , 7 + 234 , 7 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 } else { 
 self . setTextInputbarHidden ( false , animated : false ) 
 } 
 - 
 + 
 if ( typingValue ! = nil & & typingValue ! . length ( ) > 0 ) { 
 self . subtitleView . textColor = self . appStyle . navigationSubtitleActiveColor 
 if ( typingValue ! . length ( ) = = 1 ) { 
 @ @ - 268 , 6 + 262 , 19 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 
 Actor . onConversationOpenWithPeer ( peer ) 
 ActorSDK . sharedActor ( ) . trackPageVisible ( content ) 
 + 
 + } 
 + 
 + override func viewWillAppear ( animated : Bool ) { 
 + super . viewWillAppear ( animated ) 
 + 
 + 
 + if textView . isFirstResponder ( ) = = false { 
 + textView . resignFirstResponder ( ) 
 + } 
 + 
 + textView . text = Actor . loadDraftWithPeer ( peer ) 
 + 
 } 
 
 override func viewWillLayoutSubviews ( ) { 
 @ @ - 320 , 6 + 327 , 9 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 
 / / Releasing bindings 
 binder . unbindAll ( ) 
 + 
 + self . actionSheet . removeFromSuperview ( ) 
 + self . actionSheet = nil 
 } 
 
 / / Chat avatar tap 
 @ @ - 798 , 6 + 808 , 10 @ @ class ConversationViewController : AAConversationContentController , UIDocumentMen 
 Actor . sendStickerWithPeer ( self . peer , withSticker : sticker ) 
 
 } 
 + 
 + deinit { 
 + print ( " conversation controller deinit ' ed " ) 
 + } 
 
 
 }
