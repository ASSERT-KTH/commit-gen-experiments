BLEU SCORE: 0.38058030016749456

TEST MSG: fix ( server : session ) : decrease push buffer size on ack
GENERATED MSG: refactor ( server : session ) : log SeqUpdateTooLong

TEST DIFF (one line): diff - - git a / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala b / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala < nl > index 8c793e5 . . 54ce37f 100644 < nl > - - - a / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala < nl > + + + b / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala < nl > @ @ - 169 , 8 + 169 , 8 @ @ private [ session ] class ReSender ( authId : Long , sessionId : Long , firstMessageId : L < nl > messageIds foreach { messageId ⇒ < nl > getResendableItem ( messageId ) foreach { < nl > case ( item , scheduledResend ) ⇒ < nl > - if ( item . size < = MaxResendSize ) < nl > - resendBufferSize - = item . size < nl > + decreaseBufferSize ( item ) < nl > + < nl > scheduledResend . cancel ( ) < nl > < nl > item match {
NEAREST DIFF (one line): diff - - git a / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala b / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala < nl > index 7f0485c . . e9f8313 100644 < nl > - - - a / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala < nl > + + + b / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala < nl > @ @ - 250 , 6 + 250 , 8 @ @ private [ session ] class ReSender ( authId : Long , sessionId : Long , firstMessageId : L < nl > } < nl > < nl > private def clearPushBuffer ( ) : Unit = { < nl > + log . debug ( " Push buffer exceeded , clearing and sending SeqUpdateTooLong " ) < nl > + < nl > pushBuffer foreach { < nl > case ( messageId , ( pi : PushItem , resend ) ) ⇒ < nl > pushBuffer - = messageId

TEST DIFF:
diff - - git a / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala b / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala 
 index 8c793e5 . . 54ce37f 100644 
 - - - a / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala 
 + + + b / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala 
 @ @ - 169 , 8 + 169 , 8 @ @ private [ session ] class ReSender ( authId : Long , sessionId : Long , firstMessageId : L 
 messageIds foreach { messageId ⇒ 
 getResendableItem ( messageId ) foreach { 
 case ( item , scheduledResend ) ⇒ 
 - if ( item . size < = MaxResendSize ) 
 - resendBufferSize - = item . size 
 + decreaseBufferSize ( item ) 
 + 
 scheduledResend . cancel ( ) 
 
 item match {

NEAREST DIFF:
diff - - git a / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala b / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala 
 index 7f0485c . . e9f8313 100644 
 - - - a / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala 
 + + + b / actor - server / actor - session / src / main / scala / im / actor / server / session / Resender . scala 
 @ @ - 250 , 6 + 250 , 8 @ @ private [ session ] class ReSender ( authId : Long , sessionId : Long , firstMessageId : L 
 } 
 
 private def clearPushBuffer ( ) : Unit = { 
 + log . debug ( " Push buffer exceeded , clearing and sending SeqUpdateTooLong " ) 
 + 
 pushBuffer foreach { 
 case ( messageId , ( pi : PushItem , resend ) ) ⇒ 
 pushBuffer - = messageId
