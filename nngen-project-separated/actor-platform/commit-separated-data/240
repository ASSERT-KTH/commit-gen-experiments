BLEU SCORE: 0.2984745896009823

TEST MSG: wip ( android ) : Working on bottom navigation
GENERATED MSG: fix ( android ) : possible change avatar crash

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / CustomRootFragment . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / CustomRootFragment . java < nl > index 19a5c04 . . a178a89 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / CustomRootFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / CustomRootFragment . java < nl > @ @ - 39 , 6 + 39 , 7 @ @ public class CustomRootFragment extends BaseFragment implements GlobalSearchStat < nl > < nl > bottomBar = BottomBar . attach ( getActivity ( ) , savedInstanceState ) ; < nl > bottomBar . setItems ( < nl > + new BottomBarTab ( R . drawable . ic _ home _ black _ 24dp , " Home " ) , < nl > new BottomBarTab ( R . drawable . ic _ message _ black _ 24dp , " Recent " ) , < nl > new BottomBarTab ( R . drawable . ic _ contacts _ black _ 24dp , " Contacts " ) , < nl > new BottomBarTab ( R . drawable . ic _ settings _ black _ 24dp , " Settings " ) ) ; < nl > @ @ - 56 , 14 + 57 , 18 @ @ public class CustomRootFragment extends BaseFragment implements GlobalSearchStat < nl > public void onTabSelected ( int position ) { < nl > if ( position = = 0 ) { < nl > getChildFragmentManager ( ) . beginTransaction ( ) < nl > - . replace ( im . actor . sdk . R . id . content , buildDialogsFragment ( ) ) < nl > + . replace ( im . actor . sdk . R . id . content , new EmptyFragment ( ) ) < nl > . commit ( ) ; < nl > } else if ( position = = 1 ) { < nl > getChildFragmentManager ( ) . beginTransaction ( ) < nl > - . replace ( im . actor . sdk . R . id . content , new ContactsFragment ( ) ) < nl > + . replace ( im . actor . sdk . R . id . content , buildDialogsFragment ( ) ) < nl > . commit ( ) ; < nl > } else if ( position = = 2 ) { < nl > getChildFragmentManager ( ) . beginTransaction ( ) < nl > + . replace ( im . actor . sdk . R . id . content , new ContactsFragment ( ) ) < nl > + . commit ( ) ; < nl > + } else if ( position = = 3 ) { < nl > + getChildFragmentManager ( ) . beginTransaction ( ) < nl > . replace ( im . actor . sdk . R . id . content , new ActorSettingsFragment ( ) ) < nl > . commit ( ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / EmptyFragment . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / EmptyFragment . java < nl > new file mode 100644 < nl > index 0000000 . . 6c01718 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / EmptyFragment . java < nl > @ @ - 0 , 0 + 1 , 11 @ @ < nl > + package im . actor . fragments ; < nl > + < nl > + import android . os . Bundle ; < nl > + import android . support . annotation . Nullable ; < nl > + import android . view . View ; < nl > + < nl > + import im . actor . sdk . controllers . fragment . BaseFragment ; < nl > + < nl > + public class EmptyFragment extends BaseFragment { < nl > + < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - hdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - hdpi / ic _ home _ black _ 24dp . png < nl > new file mode 100644 < nl > index 0000000 . . d903c6c < nl > Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - hdpi / ic _ home _ black _ 24dp . png differ < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - mdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - mdpi / ic _ home _ black _ 24dp . png < nl > new file mode 100644 < nl > index 0000000 . . 0bd4ff9 < nl > Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - mdpi / ic _ home _ black _ 24dp . png differ < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xhdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xhdpi / ic _ home _ black _ 24dp . png < nl > new file mode 100644 < nl > index 0000000 . . 98421ec < nl > Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xhdpi / ic _ home _ black _ 24dp . png differ < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxhdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxhdpi / ic _ home _ black _ 24dp . png < nl > new file mode 100644 < nl > index 0000000 . . a160d36 < nl > Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxhdpi / ic _ home _ black _ 24dp . png differ < nl > diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxxhdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxxhdpi / ic _ home _ black _ 24dp . png < nl > new file mode 100644 < nl > index 0000000 . . 5df09b5 < nl > Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxxhdpi / ic _ home _ black _ 24dp . png differ
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / preview / ViewAvatarActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / preview / ViewAvatarActivity . java < nl > index 5bfac3b . . 94a0ecc 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / preview / ViewAvatarActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / preview / ViewAvatarActivity . java < nl > @ @ - 340 , 6 + 340 , 9 @ @ public class ViewAvatarActivity extends BaseActivity { < nl > . asSquare ( ) < nl > . start ( this ) ; < nl > } else if ( requestCode = = Crop . REQUEST _ CROP & & resultCode = = Activity . RESULT _ OK ) { < nl > + if ( avatarPath = = null ) { < nl > + return ; < nl > + } < nl > if ( peer . getPeerType ( ) = = PeerType . PRIVATE ) { < nl > if ( peer . getPeerId ( ) = = myUid ( ) ) { < nl > messenger ( ) . changeMyAvatar ( avatarPath ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / avatar / AvatarView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / avatar / AvatarView . java < nl > index 11a7d01 . . 4078927 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / avatar / AvatarView . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / avatar / AvatarView . java < nl > @ @ - 1 , 6 + 1 , 9 @ @ < nl > package im . actor . sdk . view . avatar ; < nl > < nl > import android . content . Context ; < nl > + import android . graphics . ColorFilter ; < nl > + import android . graphics . PorterDuff ; < nl > + import android . graphics . PorterDuffColorFilter ; < nl > import android . net . Uri ; < nl > import android . util . AttributeSet ; < nl > < nl > @ @ - 27 , 6 + 30 , 7 @ @ import im . actor . core . viewmodel . FileVMCallback ; < nl > import im . actor . core . viewmodel . GroupVM ; < nl > import im . actor . core . viewmodel . UserVM ; < nl > import im . actor . runtime . files . FileSystemReference ; < nl > + import im . actor . sdk . ActorSDK ; < nl > < nl > import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > < nl > @ @ - 65 , 7 + 69 , 8 @ @ public class AvatarView extends SimpleDraweeView { < nl > . setRoundingParams ( new RoundingParams ( ) < nl > . setRoundAsCircle ( true ) < nl > . setRoundingMethod ( RoundingParams . RoundingMethod . BITMAP _ ONLY ) ) < nl > - / / . setOverlay ( new AvatarBorderDrawable ( ) ) < nl > + / / . setActualImageColorFilter ( new PorterDuffColorFilter ( 0x19000000 , PorterDuff . Mode . MULTIPLY ) ) < nl > + / / . setOverlay ( new AvatarBorderDrawable ( ) ) < nl > . build ( ) ; < nl > setHierarchy ( hierarchy ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / avatar _ background . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / avatar _ background . xml < nl > new file mode 100644 < nl > index 0000000 . . 074b42b < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / avatar _ background . xml < nl > @ @ - 0 , 0 + 1 , 5 @ @ < nl > + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > < nl > + < shape xmlns : android = " http : / / schemas . android . com / apk / res / android " < nl > + android : shape = " oval " > < nl > + < solid android : color = " # 19000000 " / > < nl > + < / shape > < nl > \ No newline at end of file

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / CustomRootFragment . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / CustomRootFragment . java 
 index 19a5c04 . . a178a89 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / CustomRootFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / CustomRootFragment . java 
 @ @ - 39 , 6 + 39 , 7 @ @ public class CustomRootFragment extends BaseFragment implements GlobalSearchStat 
 
 bottomBar = BottomBar . attach ( getActivity ( ) , savedInstanceState ) ; 
 bottomBar . setItems ( 
 + new BottomBarTab ( R . drawable . ic _ home _ black _ 24dp , " Home " ) , 
 new BottomBarTab ( R . drawable . ic _ message _ black _ 24dp , " Recent " ) , 
 new BottomBarTab ( R . drawable . ic _ contacts _ black _ 24dp , " Contacts " ) , 
 new BottomBarTab ( R . drawable . ic _ settings _ black _ 24dp , " Settings " ) ) ; 
 @ @ - 56 , 14 + 57 , 18 @ @ public class CustomRootFragment extends BaseFragment implements GlobalSearchStat 
 public void onTabSelected ( int position ) { 
 if ( position = = 0 ) { 
 getChildFragmentManager ( ) . beginTransaction ( ) 
 - . replace ( im . actor . sdk . R . id . content , buildDialogsFragment ( ) ) 
 + . replace ( im . actor . sdk . R . id . content , new EmptyFragment ( ) ) 
 . commit ( ) ; 
 } else if ( position = = 1 ) { 
 getChildFragmentManager ( ) . beginTransaction ( ) 
 - . replace ( im . actor . sdk . R . id . content , new ContactsFragment ( ) ) 
 + . replace ( im . actor . sdk . R . id . content , buildDialogsFragment ( ) ) 
 . commit ( ) ; 
 } else if ( position = = 2 ) { 
 getChildFragmentManager ( ) . beginTransaction ( ) 
 + . replace ( im . actor . sdk . R . id . content , new ContactsFragment ( ) ) 
 + . commit ( ) ; 
 + } else if ( position = = 3 ) { 
 + getChildFragmentManager ( ) . beginTransaction ( ) 
 . replace ( im . actor . sdk . R . id . content , new ActorSettingsFragment ( ) ) 
 . commit ( ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / EmptyFragment . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / EmptyFragment . java 
 new file mode 100644 
 index 0000000 . . 6c01718 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / fragments / EmptyFragment . java 
 @ @ - 0 , 0 + 1 , 11 @ @ 
 + package im . actor . fragments ; 
 + 
 + import android . os . Bundle ; 
 + import android . support . annotation . Nullable ; 
 + import android . view . View ; 
 + 
 + import im . actor . sdk . controllers . fragment . BaseFragment ; 
 + 
 + public class EmptyFragment extends BaseFragment { 
 + 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - hdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - hdpi / ic _ home _ black _ 24dp . png 
 new file mode 100644 
 index 0000000 . . d903c6c 
 Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - hdpi / ic _ home _ black _ 24dp . png differ 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - mdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - mdpi / ic _ home _ black _ 24dp . png 
 new file mode 100644 
 index 0000000 . . 0bd4ff9 
 Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - mdpi / ic _ home _ black _ 24dp . png differ 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xhdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xhdpi / ic _ home _ black _ 24dp . png 
 new file mode 100644 
 index 0000000 . . 98421ec 
 Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xhdpi / ic _ home _ black _ 24dp . png differ 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxhdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxhdpi / ic _ home _ black _ 24dp . png 
 new file mode 100644 
 index 0000000 . . a160d36 
 Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxhdpi / ic _ home _ black _ 24dp . png differ 
 diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxxhdpi / ic _ home _ black _ 24dp . png b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxxhdpi / ic _ home _ black _ 24dp . png 
 new file mode 100644 
 index 0000000 . . 5df09b5 
 Binary files / dev / null and b / actor - sdk / sdk - core - android / android - app / src / main / res / drawable - xxxhdpi / ic _ home _ black _ 24dp . png differ

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / preview / ViewAvatarActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / preview / ViewAvatarActivity . java 
 index 5bfac3b . . 94a0ecc 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / preview / ViewAvatarActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / preview / ViewAvatarActivity . java 
 @ @ - 340 , 6 + 340 , 9 @ @ public class ViewAvatarActivity extends BaseActivity { 
 . asSquare ( ) 
 . start ( this ) ; 
 } else if ( requestCode = = Crop . REQUEST _ CROP & & resultCode = = Activity . RESULT _ OK ) { 
 + if ( avatarPath = = null ) { 
 + return ; 
 + } 
 if ( peer . getPeerType ( ) = = PeerType . PRIVATE ) { 
 if ( peer . getPeerId ( ) = = myUid ( ) ) { 
 messenger ( ) . changeMyAvatar ( avatarPath ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / avatar / AvatarView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / avatar / AvatarView . java 
 index 11a7d01 . . 4078927 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / avatar / AvatarView . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / avatar / AvatarView . java 
 @ @ - 1 , 6 + 1 , 9 @ @ 
 package im . actor . sdk . view . avatar ; 
 
 import android . content . Context ; 
 + import android . graphics . ColorFilter ; 
 + import android . graphics . PorterDuff ; 
 + import android . graphics . PorterDuffColorFilter ; 
 import android . net . Uri ; 
 import android . util . AttributeSet ; 
 
 @ @ - 27 , 6 + 30 , 7 @ @ import im . actor . core . viewmodel . FileVMCallback ; 
 import im . actor . core . viewmodel . GroupVM ; 
 import im . actor . core . viewmodel . UserVM ; 
 import im . actor . runtime . files . FileSystemReference ; 
 + import im . actor . sdk . ActorSDK ; 
 
 import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 
 @ @ - 65 , 7 + 69 , 8 @ @ public class AvatarView extends SimpleDraweeView { 
 . setRoundingParams ( new RoundingParams ( ) 
 . setRoundAsCircle ( true ) 
 . setRoundingMethod ( RoundingParams . RoundingMethod . BITMAP _ ONLY ) ) 
 - / / . setOverlay ( new AvatarBorderDrawable ( ) ) 
 + / / . setActualImageColorFilter ( new PorterDuffColorFilter ( 0x19000000 , PorterDuff . Mode . MULTIPLY ) ) 
 + / / . setOverlay ( new AvatarBorderDrawable ( ) ) 
 . build ( ) ; 
 setHierarchy ( hierarchy ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / avatar _ background . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / avatar _ background . xml 
 new file mode 100644 
 index 0000000 . . 074b42b 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / avatar _ background . xml 
 @ @ - 0 , 0 + 1 , 5 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < shape xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 + android : shape = " oval " > 
 + < solid android : color = " # 19000000 " / > 
 + < / shape > 
 \ No newline at end of file
