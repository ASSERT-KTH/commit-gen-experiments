BLEU SCORE: 0.10798033448421628

TEST MSG: feat ( core ) : Added TimeZone to User
GENERATED MSG: feat ( js ) : Timezone and locale support in JS

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / entity / JsUser . java b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / entity / JsUser . java < nl > index 9ab4fbf . . e111f77 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / entity / JsUser . java < nl > + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / entity / JsUser . java < nl > @ @ - 54 , 15 + 54 , 18 @ @ public class JsUser extends JavaScriptObject { < nl > fileUrl , bigFileUrl , < nl > Placeholders . getPlaceholder ( userVM . getId ( ) ) , < nl > userVM . isContact ( ) . get ( ) , userVM . isBot ( ) , < nl > - presenceString , isOnline , userVM . getIsBlocked ( ) . get ( ) , convertedPhones , convertedEmails ) ; < nl > + presenceString , isOnline , userVM . getIsBlocked ( ) . get ( ) , convertedPhones , convertedEmails , < nl > + userVM . getTimeZone ( ) . get ( ) ) ; < nl > } < nl > < nl > public static native JsUser create ( int id , String name , String nick , String about , < nl > String avatar , String bigAvatar , String placeholder , < nl > boolean isContact , boolean isBot , String presence , boolean isOnline , boolean isBlocked , JsArray < JsPhone > phones , < nl > - JsArray < JsEmail > emails ) / * - { < nl > + JsArray < JsEmail > emails , < nl > + String timeZone ) / * - { < nl > return { id : id , name : name , nick : nick , about : about , avatar : avatar , bigAvatar : bigAvatar , placeholder : placeholder , < nl > - isContact : isContact , isBot : isBot , presence : presence , isOnline : isOnline , isBlocked : isBlocked , phones : phones , emails : emails } ; < nl > + isContact : isContact , isBot : isBot , presence : presence , isOnline : isOnline , isBlocked : isBlocked , phones : phones , emails : emails , < nl > + timeZone : timeZone } ; < nl > } - * / ; < nl > < nl > protected JsUser ( ) { < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / User . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / User . java < nl > index 7e8f5ed . . a8f631c 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / User . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / User . java < nl > @ @ - 70 , 6 + 70 , 9 @ @ public class User extends WrapperExtEntity < ApiFullUser , ApiUser > implements KeyV < nl > private List < ContactRecord > records ; < nl > @ Property ( " readonly , nonatomic " ) < nl > private boolean isBlocked ; < nl > + @ Nullable < nl > + @ Property ( " readonly , nonatomic " ) < nl > + private String timeZone ; < nl > < nl > @ NotNull < nl > @ Property ( " readonly , nonatomic " ) < nl > @ @ - 156 , 6 + 159 , 11 @ @ public class User extends WrapperExtEntity < ApiFullUser , ApiUser > implements KeyV < nl > return isBlocked ; < nl > } < nl > < nl > + @ Nullable < nl > + public String getTimeZone ( ) { < nl > + return timeZone ; < nl > + } < nl > + < nl > public User editName ( @ NotNull String name ) { < nl > ApiUser w = getWrapped ( ) ; < nl > ApiUser res = new ApiUser ( < nl > @ @ - 414 , 6 + 422 , 7 @ @ public class User extends WrapperExtEntity < ApiFullUser , ApiUser > implements KeyV < nl > } else { < nl > this . isBlocked = false ; < nl > } < nl > + this . timeZone = ext . getTimeZone ( ) ; < nl > for ( ApiContactRecord record : ext . getContactInfo ( ) ) { < nl > if ( record . getType ( ) = = ApiContactType . PHONE ) { < nl > this . records . add ( new ContactRecord ( ContactRecordType . PHONE , record . getTypeSpec ( ) , " " + record . getLongValue ( ) , < nl > @ @ - 435 , 6 + 444 , 7 @ @ public class User extends WrapperExtEntity < ApiFullUser , ApiUser > implements KeyV < nl > this . haveExtension = false ; < nl > this . records = new ArrayList < > ( ) ; < nl > this . about = null ; < nl > + this . timeZone = null ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / UserVM . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / UserVM . java < nl > index a25760b . . 22051f0 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / UserVM . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / UserVM . java < nl > @ @ - 61 , 6 + 61 , 8 @ @ public class UserVM extends BaseValueModel < User > { < nl > @ NotNull < nl > private AvatarValueModel avatar ; < nl > @ NotNull < nl > + private StringValueModel timeZone ; < nl > + @ NotNull < nl > private Sex sex ; < nl > @ NotNull < nl > private BooleanValueModel isContact ; < nl > @ @ - 103 , 6 + 105 , 7 @ @ public class UserVM extends BaseValueModel < User > { < nl > avatar = new AvatarValueModel ( " user . " + id + " . avatar " , user . getAvatar ( ) ) ; < nl > isContact = new BooleanValueModel ( " user . " + id + " . contact " , modules . getContactsModule ( ) . isUserContact ( id ) ) ; < nl > isBlocked = new BooleanValueModel ( " user . " + id + " . blocked " , user . isBlocked ( ) ) ; < nl > + timeZone = new StringValueModel ( " user . " + id + " . time _ zone " , user . getTimeZone ( ) ) ; < nl > presence = new ValueModelUserPresence ( " user . " + id + " . presence " , new UserPresence ( UserPresence . State . UNKNOWN ) ) ; < nl > phones = new ValueModelUserPhone ( " user . " + id + " . phones " , buildPhones ( user . getRecords ( ) ) ) ; < nl > emails = new ValueModelUserEmail ( " user . " + id + " . emails " , buildEmails ( user . getRecords ( ) ) ) ; < nl > @ @ - 126 , 6 + 129 , 7 @ @ public class UserVM extends BaseValueModel < User > { < nl > isChanged | = localName . change ( rawObj . getLocalName ( ) ) ; < nl > isChanged | = serverName . change ( rawObj . getServerName ( ) ) ; < nl > isChanged | = nick . change ( rawObj . getNick ( ) ) ; < nl > + isChanged | = timeZone . change ( rawObj . getTimeZone ( ) ) ; < nl > isChanged | = about . change ( rawObj . getAbout ( ) ) ; < nl > isChanged | = avatar . change ( rawObj . getAvatar ( ) ) ; < nl > isChanged | = isBlocked . change ( rawObj . isBlocked ( ) ) ; < nl > @ @ - 305 , 6 + 309 , 17 @ @ public class UserVM extends BaseValueModel < User > { < nl > } < nl > < nl > / * * < nl > + * Get User ' s time zone < nl > + * < nl > + * @ return ValueModel of Time Zone < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " getTimeZoneModel " ) < nl > + public StringValueModel getTimeZone ( ) { < nl > + return timeZone ; < nl > + } < nl > + < nl > + / * * < nl > * Get User Contact records < nl > * < nl > * @ return ValueModel of ArrayList of ContactRecord
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / ActorCore . gwt . xml b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / ActorCore . gwt . xml < nl > index ac4f4b3 . . d09bd0b 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / ActorCore . gwt . xml < nl > + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / ActorCore . gwt . xml < nl > @ @ - 25 , 6 + 25 , 7 @ @ < nl > < extend - property name = " locale " values = " en " / > < nl > < extend - property name = " locale " values = " ru " / > < nl > < extend - property name = " locale " values = " cn " / > < nl > + < set - property - fallback name = " locale " value = " en " / > < nl > < nl > < ! - - Building single JS library - - > < nl > < add - linker name = " sso " / > < nl > diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java < nl > index 4b5bf28 . . a0f187f 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java < nl > + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java < nl > @ @ - 5 , 6 + 5 , 8 @ @ < nl > package im . actor . core . js ; < nl > < nl > import com . google . gwt . core . client . JsArray ; < nl > + import com . google . gwt . i18n . client . LocaleInfo ; < nl > + import com . google . gwt . i18n . client . TimeZone ; < nl > import com . google . gwt . user . client . Event ; < nl > < nl > import im . actor . core . * ; < nl > @ @ - 36 , 6 + 38 , 7 @ @ import org . timepedia . exporter . client . Export ; < nl > import org . timepedia . exporter . client . ExportPackage ; < nl > import org . timepedia . exporter . client . Exportable ; < nl > < nl > + import java . util . Date ; < nl > import java . util . List ; < nl > < nl > @ ExportPackage ( " actor " ) < nl > @ @ - 88 , 6 + 91 , 24 @ @ public class JsFacade implements Exportable { < nl > configuration . setPhoneBookProvider ( new JsPhoneBookProvider ( ) ) ; < nl > configuration . setNotificationProvider ( new JsNotificationsProvider ( ) ) ; < nl > < nl > + / / Setting locale < nl > + String locale = LocaleInfo . getCurrentLocale ( ) . getLocaleName ( ) ; < nl > + if ( locale . equals ( " default " ) ) { < nl > + Log . d ( TAG , " Default locale found " ) ; < nl > + configuration . addPreferredLanguage ( " en " ) ; < nl > + } else { < nl > + Log . d ( TAG , " Locale found : " + locale ) ; < nl > + configuration . addPreferredLanguage ( locale . toLowerCase ( ) ) ; < nl > + } < nl > + < nl > + / / Setting timezone < nl > + int offset = new Date ( ) . getTimezoneOffset ( ) ; < nl > + String timeZone = TimeZone . createTimeZone ( offset ) . getID ( ) ; < nl > + Log . d ( TAG , " TimeZone found : " + timeZone + " for delta " + offset ) ; < nl > + configuration . setTimeZone ( timeZone ) ; < nl > + < nl > + / / LocaleInfo . getCurrentLocale ( ) . getLocaleName ( ) < nl > + < nl > / / Is Web application < nl > configuration . setPlatformType ( PlatformType . WEB ) ; < nl > < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Configuration . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Configuration . java < nl > index 29d746f . . d63ac19 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Configuration . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Configuration . java < nl > @ @ - 29 , 6 + 29 , 9 @ @ public class Configuration { < nl > < nl > private PlatformType platformType ; < nl > < nl > + private String timeZone ; < nl > + private String [ ] preferredLanguages ; < nl > + < nl > private int minDelay ; < nl > < nl > private int maxDelay ; < nl > @ @ - 47 , 7 + 50 , 9 @ @ public class Configuration { < nl > int minDelay , < nl > int maxDelay , < nl > int maxFailureCount , < nl > - ConfigurationExtension [ ] extensions ) { < nl > + ConfigurationExtension [ ] extensions , < nl > + String timeZone , < nl > + String [ ] preferredLanguages ) { < nl > this . endpoints = endpoints ; < nl > this . phoneBookProvider = phoneBookProvider ; < nl > this . enableContactsLogging = enableContactsLogging ; < nl > @ @ - 61 , 6 + 66 , 8 @ @ public class Configuration { < nl > this . maxDelay = maxDelay ; < nl > this . maxFailureCount = maxFailureCount ; < nl > this . extensions = extensions ; < nl > + this . timeZone = timeZone ; < nl > + this . preferredLanguages = preferredLanguages ; < nl > } < nl > < nl > / * * < nl > @ @ - 179 , 4 + 186 , 22 @ @ public class Configuration { < nl > public int getMaxFailureCount ( ) { < nl > return maxFailureCount ; < nl > } < nl > + < nl > + / * * < nl > + * Get device time zone < nl > + * < nl > + * @ return device timezone in Tz - format < nl > + * / < nl > + public String getTimeZone ( ) { < nl > + return timeZone ; < nl > + } < nl > + < nl > + / * * < nl > + * Get preferred languages < nl > + * < nl > + * @ return preferred languages < nl > + * / < nl > + public String [ ] getPreferredLanguages ( ) { < nl > + return preferredLanguages ; < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / ConfigurationBuilder . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / ConfigurationBuilder . java < nl > index dff56cb . . 07ce24d 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / ConfigurationBuilder . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / ConfigurationBuilder . java < nl > @ @ - 38 , 6 + 38 , 9 @ @ public class ConfigurationBuilder { < nl > private int maxDelay = 15000 ; < nl > private int maxFailureCount = 50 ; < nl > < nl > + private String timeZone ; < nl > + private ArrayList < String > preferredLanguages = new ArrayList < String > ( ) ; < nl > + < nl > / * * < nl > * Set App Type < nl > * < nl > @ @ - 65 , 6 + 68 , 34 @ @ public class ConfigurationBuilder { < nl > } < nl > < nl > / * * < nl > + * Setting Device TimeZone < nl > + * < nl > + * @ param timeZone device time zone < nl > + * @ return this < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " setTimeZone : " ) < nl > + public ConfigurationBuilder setTimeZone ( String timeZone ) { < nl > + this . timeZone = timeZone ; < nl > + return this ; < nl > + } < nl > + < nl > + / * * < nl > + * Adding preferred language < nl > + * < nl > + * @ param language language code < nl > + * @ return this < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " addPreferredLanguage : " ) < nl > + public ConfigurationBuilder addPreferredLanguage ( String language ) { < nl > + if ( ! preferredLanguages . contains ( language ) ) { < nl > + preferredLanguages . add ( language ) ; < nl > + } < nl > + return this ; < nl > + } < nl > + < nl > + / * * < nl > * Set API Configuration < nl > * < nl > * @ param apiConfiguration API Configuration < nl > @ @ - 272 , 6 + 303 , 7 @ @ public class ConfigurationBuilder { < nl > apiConfiguration , enableContactsLogging , enableNetworkLogging , < nl > enableFilesLogging , deviceCategory , platformType , < nl > minDelay , maxDelay , maxFailureCount , < nl > - extensions . toArray ( new ConfigurationExtension [ extensions . size ( ) ] ) ) ; < nl > + extensions . toArray ( new ConfigurationExtension [ extensions . size ( ) ] ) , < nl > + timeZone , preferredLanguages . toArray ( new String [ preferredLanguages . size ( ) ] ) ) ; < nl > } < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / entity / JsUser . java b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / entity / JsUser . java 
 index 9ab4fbf . . e111f77 100644 
 - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / entity / JsUser . java 
 + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / entity / JsUser . java 
 @ @ - 54 , 15 + 54 , 18 @ @ public class JsUser extends JavaScriptObject { 
 fileUrl , bigFileUrl , 
 Placeholders . getPlaceholder ( userVM . getId ( ) ) , 
 userVM . isContact ( ) . get ( ) , userVM . isBot ( ) , 
 - presenceString , isOnline , userVM . getIsBlocked ( ) . get ( ) , convertedPhones , convertedEmails ) ; 
 + presenceString , isOnline , userVM . getIsBlocked ( ) . get ( ) , convertedPhones , convertedEmails , 
 + userVM . getTimeZone ( ) . get ( ) ) ; 
 } 
 
 public static native JsUser create ( int id , String name , String nick , String about , 
 String avatar , String bigAvatar , String placeholder , 
 boolean isContact , boolean isBot , String presence , boolean isOnline , boolean isBlocked , JsArray < JsPhone > phones , 
 - JsArray < JsEmail > emails ) / * - { 
 + JsArray < JsEmail > emails , 
 + String timeZone ) / * - { 
 return { id : id , name : name , nick : nick , about : about , avatar : avatar , bigAvatar : bigAvatar , placeholder : placeholder , 
 - isContact : isContact , isBot : isBot , presence : presence , isOnline : isOnline , isBlocked : isBlocked , phones : phones , emails : emails } ; 
 + isContact : isContact , isBot : isBot , presence : presence , isOnline : isOnline , isBlocked : isBlocked , phones : phones , emails : emails , 
 + timeZone : timeZone } ; 
 } - * / ; 
 
 protected JsUser ( ) { 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / User . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / User . java 
 index 7e8f5ed . . a8f631c 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / User . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / User . java 
 @ @ - 70 , 6 + 70 , 9 @ @ public class User extends WrapperExtEntity < ApiFullUser , ApiUser > implements KeyV 
 private List < ContactRecord > records ; 
 @ Property ( " readonly , nonatomic " ) 
 private boolean isBlocked ; 
 + @ Nullable 
 + @ Property ( " readonly , nonatomic " ) 
 + private String timeZone ; 
 
 @ NotNull 
 @ Property ( " readonly , nonatomic " ) 
 @ @ - 156 , 6 + 159 , 11 @ @ public class User extends WrapperExtEntity < ApiFullUser , ApiUser > implements KeyV 
 return isBlocked ; 
 } 
 
 + @ Nullable 
 + public String getTimeZone ( ) { 
 + return timeZone ; 
 + } 
 + 
 public User editName ( @ NotNull String name ) { 
 ApiUser w = getWrapped ( ) ; 
 ApiUser res = new ApiUser ( 
 @ @ - 414 , 6 + 422 , 7 @ @ public class User extends WrapperExtEntity < ApiFullUser , ApiUser > implements KeyV 
 } else { 
 this . isBlocked = false ; 
 } 
 + this . timeZone = ext . getTimeZone ( ) ; 
 for ( ApiContactRecord record : ext . getContactInfo ( ) ) { 
 if ( record . getType ( ) = = ApiContactType . PHONE ) { 
 this . records . add ( new ContactRecord ( ContactRecordType . PHONE , record . getTypeSpec ( ) , " " + record . getLongValue ( ) , 
 @ @ - 435 , 6 + 444 , 7 @ @ public class User extends WrapperExtEntity < ApiFullUser , ApiUser > implements KeyV 
 this . haveExtension = false ; 
 this . records = new ArrayList < > ( ) ; 
 this . about = null ; 
 + this . timeZone = null ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / UserVM . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / UserVM . java 
 index a25760b . . 22051f0 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / UserVM . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / UserVM . java 
 @ @ - 61 , 6 + 61 , 8 @ @ public class UserVM extends BaseValueModel < User > { 
 @ NotNull 
 private AvatarValueModel avatar ; 
 @ NotNull 
 + private StringValueModel timeZone ; 
 + @ NotNull 
 private Sex sex ; 
 @ NotNull 
 private BooleanValueModel isContact ; 
 @ @ - 103 , 6 + 105 , 7 @ @ public class UserVM extends BaseValueModel < User > { 
 avatar = new AvatarValueModel ( " user . " + id + " . avatar " , user . getAvatar ( ) ) ; 
 isContact = new BooleanValueModel ( " user . " + id + " . contact " , modules . getContactsModule ( ) . isUserContact ( id ) ) ; 
 isBlocked = new BooleanValueModel ( " user . " + id + " . blocked " , user . isBlocked ( ) ) ; 
 + timeZone = new StringValueModel ( " user . " + id + " . time _ zone " , user . getTimeZone ( ) ) ; 
 presence = new ValueModelUserPresence ( " user . " + id + " . presence " , new UserPresence ( UserPresence . State . UNKNOWN ) ) ; 
 phones = new ValueModelUserPhone ( " user . " + id + " . phones " , buildPhones ( user . getRecords ( ) ) ) ; 
 emails = new ValueModelUserEmail ( " user . " + id + " . emails " , buildEmails ( user . getRecords ( ) ) ) ; 
 @ @ - 126 , 6 + 129 , 7 @ @ public class UserVM extends BaseValueModel < User > { 
 isChanged | = localName . change ( rawObj . getLocalName ( ) ) ; 
 isChanged | = serverName . change ( rawObj . getServerName ( ) ) ; 
 isChanged | = nick . change ( rawObj . getNick ( ) ) ; 
 + isChanged | = timeZone . change ( rawObj . getTimeZone ( ) ) ; 
 isChanged | = about . change ( rawObj . getAbout ( ) ) ; 
 isChanged | = avatar . change ( rawObj . getAvatar ( ) ) ; 
 isChanged | = isBlocked . change ( rawObj . isBlocked ( ) ) ; 
 @ @ - 305 , 6 + 309 , 17 @ @ public class UserVM extends BaseValueModel < User > { 
 } 
 
 / * * 
 + * Get User ' s time zone 
 + * 
 + * @ return ValueModel of Time Zone 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " getTimeZoneModel " ) 
 + public StringValueModel getTimeZone ( ) { 
 + return timeZone ; 
 + } 
 + 
 + / * * 
 * Get User Contact records 
 * 
 * @ return ValueModel of ArrayList of ContactRecord

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / ActorCore . gwt . xml b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / ActorCore . gwt . xml 
 index ac4f4b3 . . d09bd0b 100644 
 - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / ActorCore . gwt . xml 
 + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / ActorCore . gwt . xml 
 @ @ - 25 , 6 + 25 , 7 @ @ 
 < extend - property name = " locale " values = " en " / > 
 < extend - property name = " locale " values = " ru " / > 
 < extend - property name = " locale " values = " cn " / > 
 + < set - property - fallback name = " locale " value = " en " / > 
 
 < ! - - Building single JS library - - > 
 < add - linker name = " sso " / > 
 diff - - git a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java 
 index 4b5bf28 . . a0f187f 100644 
 - - - a / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java 
 + + + b / actor - sdk / sdk - core / core / core - js / src / main / java / im / actor / core / js / JsFacade . java 
 @ @ - 5 , 6 + 5 , 8 @ @ 
 package im . actor . core . js ; 
 
 import com . google . gwt . core . client . JsArray ; 
 + import com . google . gwt . i18n . client . LocaleInfo ; 
 + import com . google . gwt . i18n . client . TimeZone ; 
 import com . google . gwt . user . client . Event ; 
 
 import im . actor . core . * ; 
 @ @ - 36 , 6 + 38 , 7 @ @ import org . timepedia . exporter . client . Export ; 
 import org . timepedia . exporter . client . ExportPackage ; 
 import org . timepedia . exporter . client . Exportable ; 
 
 + import java . util . Date ; 
 import java . util . List ; 
 
 @ ExportPackage ( " actor " ) 
 @ @ - 88 , 6 + 91 , 24 @ @ public class JsFacade implements Exportable { 
 configuration . setPhoneBookProvider ( new JsPhoneBookProvider ( ) ) ; 
 configuration . setNotificationProvider ( new JsNotificationsProvider ( ) ) ; 
 
 + / / Setting locale 
 + String locale = LocaleInfo . getCurrentLocale ( ) . getLocaleName ( ) ; 
 + if ( locale . equals ( " default " ) ) { 
 + Log . d ( TAG , " Default locale found " ) ; 
 + configuration . addPreferredLanguage ( " en " ) ; 
 + } else { 
 + Log . d ( TAG , " Locale found : " + locale ) ; 
 + configuration . addPreferredLanguage ( locale . toLowerCase ( ) ) ; 
 + } 
 + 
 + / / Setting timezone 
 + int offset = new Date ( ) . getTimezoneOffset ( ) ; 
 + String timeZone = TimeZone . createTimeZone ( offset ) . getID ( ) ; 
 + Log . d ( TAG , " TimeZone found : " + timeZone + " for delta " + offset ) ; 
 + configuration . setTimeZone ( timeZone ) ; 
 + 
 + / / LocaleInfo . getCurrentLocale ( ) . getLocaleName ( ) 
 + 
 / / Is Web application 
 configuration . setPlatformType ( PlatformType . WEB ) ; 
 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Configuration . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Configuration . java 
 index 29d746f . . d63ac19 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Configuration . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Configuration . java 
 @ @ - 29 , 6 + 29 , 9 @ @ public class Configuration { 
 
 private PlatformType platformType ; 
 
 + private String timeZone ; 
 + private String [ ] preferredLanguages ; 
 + 
 private int minDelay ; 
 
 private int maxDelay ; 
 @ @ - 47 , 7 + 50 , 9 @ @ public class Configuration { 
 int minDelay , 
 int maxDelay , 
 int maxFailureCount , 
 - ConfigurationExtension [ ] extensions ) { 
 + ConfigurationExtension [ ] extensions , 
 + String timeZone , 
 + String [ ] preferredLanguages ) { 
 this . endpoints = endpoints ; 
 this . phoneBookProvider = phoneBookProvider ; 
 this . enableContactsLogging = enableContactsLogging ; 
 @ @ - 61 , 6 + 66 , 8 @ @ public class Configuration { 
 this . maxDelay = maxDelay ; 
 this . maxFailureCount = maxFailureCount ; 
 this . extensions = extensions ; 
 + this . timeZone = timeZone ; 
 + this . preferredLanguages = preferredLanguages ; 
 } 
 
 / * * 
 @ @ - 179 , 4 + 186 , 22 @ @ public class Configuration { 
 public int getMaxFailureCount ( ) { 
 return maxFailureCount ; 
 } 
 + 
 + / * * 
 + * Get device time zone 
 + * 
 + * @ return device timezone in Tz - format 
 + * / 
 + public String getTimeZone ( ) { 
 + return timeZone ; 
 + } 
 + 
 + / * * 
 + * Get preferred languages 
 + * 
 + * @ return preferred languages 
 + * / 
 + public String [ ] getPreferredLanguages ( ) { 
 + return preferredLanguages ; 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / ConfigurationBuilder . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / ConfigurationBuilder . java 
 index dff56cb . . 07ce24d 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / ConfigurationBuilder . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / ConfigurationBuilder . java 
 @ @ - 38 , 6 + 38 , 9 @ @ public class ConfigurationBuilder { 
 private int maxDelay = 15000 ; 
 private int maxFailureCount = 50 ; 
 
 + private String timeZone ; 
 + private ArrayList < String > preferredLanguages = new ArrayList < String > ( ) ; 
 + 
 / * * 
 * Set App Type 
 * 
 @ @ - 65 , 6 + 68 , 34 @ @ public class ConfigurationBuilder { 
 } 
 
 / * * 
 + * Setting Device TimeZone 
 + * 
 + * @ param timeZone device time zone 
 + * @ return this 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " setTimeZone : " ) 
 + public ConfigurationBuilder setTimeZone ( String timeZone ) { 
 + this . timeZone = timeZone ; 
 + return this ; 
 + } 
 + 
 + / * * 
 + * Adding preferred language 
 + * 
 + * @ param language language code 
 + * @ return this 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " addPreferredLanguage : " ) 
 + public ConfigurationBuilder addPreferredLanguage ( String language ) { 
 + if ( ! preferredLanguages . contains ( language ) ) { 
 + preferredLanguages . add ( language ) ; 
 + } 
 + return this ; 
 + } 
 + 
 + / * * 
 * Set API Configuration 
 * 
 * @ param apiConfiguration API Configuration 
 @ @ - 272 , 6 + 303 , 7 @ @ public class ConfigurationBuilder { 
 apiConfiguration , enableContactsLogging , enableNetworkLogging , 
 enableFilesLogging , deviceCategory , platformType , 
 minDelay , maxDelay , maxFailureCount , 
 - extensions . toArray ( new ConfigurationExtension [ extensions . size ( ) ] ) ) ; 
 + extensions . toArray ( new ConfigurationExtension [ extensions . size ( ) ] ) , 
 + timeZone , preferredLanguages . toArray ( new String [ preferredLanguages . size ( ) ] ) ) ; 
 } 
 }
