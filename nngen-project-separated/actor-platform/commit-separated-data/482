BLEU SCORE: 0.3672056269893592

TEST MSG: fix ( android ) : keep auth validation code while retry
GENERATED MSG: fix ( android ) : auth result check state

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / AuthActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / AuthActivity . java < nl > index 686cfbe . . 4f9cada 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / AuthActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / AuthActivity . java < nl > @ @ - 72 , 7 + 72 , 6 @ @ public class AuthActivity extends BaseFragmentActivity { < nl > currentPhone = preferences . getLong ( " currentPhone " , 0 ) ; < nl > currentEmail = preferences . getString ( " currentEmail " ) ; < nl > transactionHash = preferences . getString ( " transactionHash " ) ; < nl > - currentCode = preferences . getString ( " currentCode " ) ; < nl > isRegistered = preferences . getBool ( " isRegistered " , false ) ; < nl > currentName = preferences . getString ( " currentName " ) ; < nl > signType = preferences . getInt ( " signType " , signType ) ; < nl > @ @ - 102 , 7 + 101 , 6 @ @ public class AuthActivity extends BaseFragmentActivity { < nl > preferences . putLong ( " currentPhone " , currentPhone ) ; < nl > preferences . putString ( " currentEmail " , currentEmail ) ; < nl > preferences . putString ( " transactionHash " , transactionHash ) ; < nl > - preferences . putString ( " currentCode " , currentCode ) ; < nl > preferences . putBool ( " isRegistered " , isRegistered ) ; < nl > preferences . putString ( " currentName " , currentName ) ; < nl > preferences . putInt ( " signType " , signType ) ; < nl > @ @ - 303 , 6 + 301 , 7 @ @ public class AuthActivity extends BaseFragmentActivity { < nl > canTryAgain = true ; < nl > } else { < nl > if ( " PHONE _ CODE _ EXPIRED " . equals ( re . getTag ( ) ) | | " EMAIL _ CODE _ EXPIRED " . equals ( re . getTag ( ) ) ) { < nl > + currentCode = " " ; < nl > message = getString ( R . string . auth _ error _ code _ expired ) ; < nl > canTryAgain = false ; < nl > } else if ( " PHONE _ CODE _ INVALID " . equals ( re . getTag ( ) ) | | " EMAIL _ CODE _ INVALID " . equals ( re . getTag ( ) ) ) { < nl > @ @ - 456 , 6 + 455 , 10 @ @ public class AuthActivity extends BaseFragmentActivity { < nl > } < nl > } < nl > < nl > + public String getCurrentCode ( ) { < nl > + return currentCode ; < nl > + } < nl > + < nl > public String getTransactionHash ( ) { < nl > return transactionHash ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / ValidateCodeFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / ValidateCodeFragment . java < nl > index 4543f34 . . 3891c77 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / ValidateCodeFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / ValidateCodeFragment . java < nl > @ @ - 83 , 9 + 83 , 9 @ @ public class ValidateCodeFragment extends BaseAuthFragment { < nl > < nl > @ Override < nl > public void onTextChanged ( CharSequence s , int start , int before , int count ) { < nl > - if ( s . length ( ) = = 6 ) { < nl > - sendCode ( ) ; < nl > - } < nl > + / / if ( s . length ( ) = = 6 ) { < nl > + / / sendCode ( ) ; < nl > + / / } < nl > } < nl > < nl > @ Override < nl > @ @ - 104 , 6 + 104 , 7 @ @ public class ValidateCodeFragment extends BaseAuthFragment { < nl > } < nl > } ) ; < nl > < nl > + codeEnterEditText . setText ( ( ( AuthActivity ) getActivity ( ) ) . getCurrentCode ( ) ) ; < nl > < nl > onClick ( v , R . id . button _ confirm _ sms _ code , new View . OnClickListener ( ) { < nl > @ Override
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java < nl > index 35428cb . . fbcb072 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java < nl > @ @ - 133 , 8 + 133 , 9 @ @ public class AuthActivity extends BaseFragmentActivity { < nl > command . start ( new CommandCallback < AuthState > ( ) { < nl > @ Override < nl > public void onResult ( final AuthState res ) { < nl > - dismissProgress ( ) ; < nl > - updateState ( res ) ; < nl > + if ( dismissProgress ( ) ) { < nl > + updateState ( res ) ; < nl > + } < nl > } < nl > < nl > @ Override < nl > @ @ - 228 , 11 + 229 , 13 @ @ public class AuthActivity extends BaseFragmentActivity { < nl > dismissAlert ( ) ; < nl > } < nl > < nl > - private void dismissProgress ( ) { < nl > + private boolean dismissProgress ( ) { < nl > if ( progressDialog ! = null ) { < nl > progressDialog . dismiss ( ) ; < nl > progressDialog = null ; < nl > + return true ; < nl > } < nl > + return false ; < nl > } < nl > < nl > private void dismissAlert ( ) {

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / AuthActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / AuthActivity . java 
 index 686cfbe . . 4f9cada 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / AuthActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / AuthActivity . java 
 @ @ - 72 , 7 + 72 , 6 @ @ public class AuthActivity extends BaseFragmentActivity { 
 currentPhone = preferences . getLong ( " currentPhone " , 0 ) ; 
 currentEmail = preferences . getString ( " currentEmail " ) ; 
 transactionHash = preferences . getString ( " transactionHash " ) ; 
 - currentCode = preferences . getString ( " currentCode " ) ; 
 isRegistered = preferences . getBool ( " isRegistered " , false ) ; 
 currentName = preferences . getString ( " currentName " ) ; 
 signType = preferences . getInt ( " signType " , signType ) ; 
 @ @ - 102 , 7 + 101 , 6 @ @ public class AuthActivity extends BaseFragmentActivity { 
 preferences . putLong ( " currentPhone " , currentPhone ) ; 
 preferences . putString ( " currentEmail " , currentEmail ) ; 
 preferences . putString ( " transactionHash " , transactionHash ) ; 
 - preferences . putString ( " currentCode " , currentCode ) ; 
 preferences . putBool ( " isRegistered " , isRegistered ) ; 
 preferences . putString ( " currentName " , currentName ) ; 
 preferences . putInt ( " signType " , signType ) ; 
 @ @ - 303 , 6 + 301 , 7 @ @ public class AuthActivity extends BaseFragmentActivity { 
 canTryAgain = true ; 
 } else { 
 if ( " PHONE _ CODE _ EXPIRED " . equals ( re . getTag ( ) ) | | " EMAIL _ CODE _ EXPIRED " . equals ( re . getTag ( ) ) ) { 
 + currentCode = " " ; 
 message = getString ( R . string . auth _ error _ code _ expired ) ; 
 canTryAgain = false ; 
 } else if ( " PHONE _ CODE _ INVALID " . equals ( re . getTag ( ) ) | | " EMAIL _ CODE _ INVALID " . equals ( re . getTag ( ) ) ) { 
 @ @ - 456 , 6 + 455 , 10 @ @ public class AuthActivity extends BaseFragmentActivity { 
 } 
 } 
 
 + public String getCurrentCode ( ) { 
 + return currentCode ; 
 + } 
 + 
 public String getTransactionHash ( ) { 
 return transactionHash ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / ValidateCodeFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / ValidateCodeFragment . java 
 index 4543f34 . . 3891c77 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / ValidateCodeFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / auth / ValidateCodeFragment . java 
 @ @ - 83 , 9 + 83 , 9 @ @ public class ValidateCodeFragment extends BaseAuthFragment { 
 
 @ Override 
 public void onTextChanged ( CharSequence s , int start , int before , int count ) { 
 - if ( s . length ( ) = = 6 ) { 
 - sendCode ( ) ; 
 - } 
 + / / if ( s . length ( ) = = 6 ) { 
 + / / sendCode ( ) ; 
 + / / } 
 } 
 
 @ Override 
 @ @ - 104 , 6 + 104 , 7 @ @ public class ValidateCodeFragment extends BaseAuthFragment { 
 } 
 } ) ; 
 
 + codeEnterEditText . setText ( ( ( AuthActivity ) getActivity ( ) ) . getCurrentCode ( ) ) ; 
 
 onClick ( v , R . id . button _ confirm _ sms _ code , new View . OnClickListener ( ) { 
 @ Override

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java 
 index 35428cb . . fbcb072 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / auth / AuthActivity . java 
 @ @ - 133 , 8 + 133 , 9 @ @ public class AuthActivity extends BaseFragmentActivity { 
 command . start ( new CommandCallback < AuthState > ( ) { 
 @ Override 
 public void onResult ( final AuthState res ) { 
 - dismissProgress ( ) ; 
 - updateState ( res ) ; 
 + if ( dismissProgress ( ) ) { 
 + updateState ( res ) ; 
 + } 
 } 
 
 @ Override 
 @ @ - 228 , 11 + 229 , 13 @ @ public class AuthActivity extends BaseFragmentActivity { 
 dismissAlert ( ) ; 
 } 
 
 - private void dismissProgress ( ) { 
 + private boolean dismissProgress ( ) { 
 if ( progressDialog ! = null ) { 
 progressDialog . dismiss ( ) ; 
 progressDialog = null ; 
 + return true ; 
 } 
 + return false ; 
 } 
 
 private void dismissAlert ( ) {
