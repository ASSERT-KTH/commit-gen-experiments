BLEU SCORE: 0.25476965408249014

TEST MSG: fix ( server : core ) : clarify notify method calls
GENERATED MSG: fix ( server : push ) : exclude auth sid of sender

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala < nl > index 60f2a82 . . f2dbc4c 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala < nl > @ @ - 107 , 7 + 107 , 7 @ @ final class ActorDelivery ( ) ( implicit val system : ActorSystem ) < nl > userExt . broadcastUserUpdate ( < nl > userId , < nl > update , < nl > - None , < nl > + pushText = None , < nl > isFat = false , < nl > reduceKey = Some ( s " receive _ $ { peer . toString } " ) , < nl > deliveryId = None < nl > @ @ - 128 , 7 + 128 , 6 @ @ final class ActorDelivery ( ) ( implicit val system : ActorSystem ) < nl > _ ← seqUpdatesExt . deliverSingleUpdate ( < nl > userId = readerUserId , < nl > update = UpdateMessageReadByMe ( peer . asStruct , date , Some ( unreadCount ) ) , < nl > - pushRules = PushRules ( ) , < nl > reduceKey = Some ( s " read _ by _ me _ $ { peer . toString } " ) < nl > ) < nl > } yield ( )
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala < nl > index 71c4080 . . b7d0db9 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala < nl > @ @ - 80 , 7 + 80 , 7 @ @ final class ActorDelivery ( ) ( implicit val system : ActorSystem ) < nl > userId = senderUserId , < nl > default = Some ( senderUpdate ) , < nl > custom = Map ( senderAuthSid → senderClientUpdate ) , < nl > - pushRules = PushRules ( isFat = isFat ) , < nl > + pushRules = PushRules ( isFat = isFat , excludeAuthSids = Seq ( senderAuthSid ) ) , < nl > deliveryId = s " msg _ $ { peer . toString } _ $ randomId " < nl > ) < nl > }

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala 
 index 60f2a82 . . f2dbc4c 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala 
 @ @ - 107 , 7 + 107 , 7 @ @ final class ActorDelivery ( ) ( implicit val system : ActorSystem ) 
 userExt . broadcastUserUpdate ( 
 userId , 
 update , 
 - None , 
 + pushText = None , 
 isFat = false , 
 reduceKey = Some ( s " receive _ $ { peer . toString } " ) , 
 deliveryId = None 
 @ @ - 128 , 7 + 128 , 6 @ @ final class ActorDelivery ( ) ( implicit val system : ActorSystem ) 
 _ ← seqUpdatesExt . deliverSingleUpdate ( 
 userId = readerUserId , 
 update = UpdateMessageReadByMe ( peer . asStruct , date , Some ( unreadCount ) ) , 
 - pushRules = PushRules ( ) , 
 reduceKey = Some ( s " read _ by _ me _ $ { peer . toString } " ) 
 ) 
 } yield ( )

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala 
 index 71c4080 . . b7d0db9 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / ActorDelivery . scala 
 @ @ - 80 , 7 + 80 , 7 @ @ final class ActorDelivery ( ) ( implicit val system : ActorSystem ) 
 userId = senderUserId , 
 default = Some ( senderUpdate ) , 
 custom = Map ( senderAuthSid → senderClientUpdate ) , 
 - pushRules = PushRules ( isFat = isFat ) , 
 + pushRules = PushRules ( isFat = isFat , excludeAuthSids = Seq ( senderAuthSid ) ) , 
 deliveryId = s " msg _ $ { peer . toString } _ $ randomId " 
 ) 
 }
