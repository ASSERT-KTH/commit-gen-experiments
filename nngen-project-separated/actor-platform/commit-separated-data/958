BLEU SCORE: 0.20969025558524573

TEST MSG: perf ( core ) : Better dispatcher configurations
GENERATED MSG: fix ( core ) : Fix crash on receiving updates before auth

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index b356e6c . . d61f933 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 240 , 7 + 240 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > audioTimer = ( TextView ) findViewById ( R . id . audioTimer ) ; < nl > audioSlide = findViewById ( R . id . audioSlide ) ; < nl > recordPoint = findViewById ( R . id . record _ point ) ; < nl > - ActorSystem . system ( ) . addDispatcher ( " voice _ capture _ dispatcher " ) ; < nl > + ActorSystem . system ( ) . addDispatcher ( " voice _ capture _ dispatcher " , 1 ) ; < nl > < nl > audioButton = ( ImageView ) findViewById ( R . id . record _ btn ) ; < nl > audioButton . setVisibility ( View . VISIBLE ) ; < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Messenger . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Messenger . java < nl > index f77c35a . . 1db8362 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Messenger . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Messenger . java < nl > @ @ - 91 , 8 + 91 , 9 @ @ public class Messenger { < nl > / / Actor system < nl > timing . section ( " Actors " ) ; < nl > ActorSystem . system ( ) . setTraceInterface ( new ActorTrace ( ) ) ; < nl > - ActorSystem . system ( ) . addDispatcher ( " network " ) ; < nl > - ActorSystem . system ( ) . addDispatcher ( " heavy " ) ; < nl > + ActorSystem . system ( ) . addDispatcher ( " network " , 2 ) ; < nl > + ActorSystem . system ( ) . addDispatcher ( " network _ manager " , 1 ) ; < nl > + ActorSystem . system ( ) . addDispatcher ( " heavy " , 2 ) ; < nl > ActorSystem . system ( ) . addDispatcher ( " updates " , 1 ) ; < nl > < nl > timing . section ( " Modules : Create " ) ; < nl > @ @ - 1010 , 6 + 1011 , 7 @ @ public class Messenger { < nl > < nl > / * * < nl > * Handle call in ui - < b > should < b / > be called , when receiving IncomingCallEvent < nl > + * < nl > * @ param callId < nl > * @ param callback < nl > * / < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / network / mtp / actors / ManagerActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / network / mtp / actors / ManagerActor . java < nl > index c4e55c3 . . 776596b 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / network / mtp / actors / ManagerActor . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / network / mtp / actors / ManagerActor . java < nl > @ @ - 55 , 7 + 55 , 7 @ @ public class ManagerActor extends Actor { < nl > public ManagerActor create ( ) { < nl > return new ManagerActor ( mtProto ) ; < nl > } < nl > - } ) . changeDispatcher ( " network " ) , mtProto . getActorPath ( ) + " / manager " ) ) ; < nl > + } ) . changeDispatcher ( " network _ manager " ) , mtProto . getActorPath ( ) + " / manager " ) ) ; < nl > } < nl > < nl > private static final AtomicIntegerCompat NEXT _ CONNECTION = im . actor . runtime . Runtime . createAtomicInt ( 1 ) ;
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > index 593095a . . ab9a17a 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > @ @ - 8 , 6 + 8 , 9 @ @ import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; < nl > import im . actor . sdk . intents . ActorIntent ; < nl > < nl > + / * * < nl > + * SDK Delegate . Used for delegating some work to < nl > + * / < nl > public interface ActorSDKDelegate { < nl > < nl > / * * < nl > @ @ - 31 , 19 + 34 , 34 @ @ public interface ActorSDKDelegate { < nl > * / < nl > ActorIntent getStartIntent ( ) ; < nl > < nl > + / * * < nl > + * If not null returned , overrides settings activity intent < nl > + * < nl > + * @ return Actor Intent < nl > + * / < nl > + ActorIntent getSettingsIntent ( ) ; < nl > + < nl > + @ Deprecated < nl > AuthState getAuthStartState ( ) ; < nl > < nl > + @ Deprecated < nl > BaseAuthFragment getSignFragment ( ) ; < nl > < nl > + @ Deprecated < nl > View getBeforeNickSettingsView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getAfterPhoneSettingsView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getSettingsTopView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getSettingsBottomView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > ActorSettingsCategory [ ] getBeforeSettingsCategories ( ) ; < nl > < nl > + @ Deprecated < nl > ActorSettingsCategory [ ] getAfterSettingsCategories ( ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > index 68ec210 . . 9741d06 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > @ @ - 61 , 6 + 61 , 11 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { < nl > return null ; < nl > } < nl > < nl > + @ Override < nl > + public ActorIntent getSettingsIntent ( ) { < nl > + return null ; < nl > + } < nl > + < nl > / / < nl > / / Hacking settings activity < nl > / / < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > index bbb081d . . 2518330 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > @ @ - 113 , 7 + 113 , 9 @ @ public class ApiModule extends AbsModule implements BusSubscriber { < nl > < nl > @ Override < nl > public void onUpdateReceived ( Object obj ) { < nl > - context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; < nl > + if ( context ( ) . getUpdatesModule ( ) ! = null ) { < nl > + context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; < nl > + } < nl > } < nl > < nl > @ Override

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index b356e6c . . d61f933 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 240 , 7 + 240 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { 
 audioTimer = ( TextView ) findViewById ( R . id . audioTimer ) ; 
 audioSlide = findViewById ( R . id . audioSlide ) ; 
 recordPoint = findViewById ( R . id . record _ point ) ; 
 - ActorSystem . system ( ) . addDispatcher ( " voice _ capture _ dispatcher " ) ; 
 + ActorSystem . system ( ) . addDispatcher ( " voice _ capture _ dispatcher " , 1 ) ; 
 
 audioButton = ( ImageView ) findViewById ( R . id . record _ btn ) ; 
 audioButton . setVisibility ( View . VISIBLE ) ; 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Messenger . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Messenger . java 
 index f77c35a . . 1db8362 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Messenger . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / Messenger . java 
 @ @ - 91 , 8 + 91 , 9 @ @ public class Messenger { 
 / / Actor system 
 timing . section ( " Actors " ) ; 
 ActorSystem . system ( ) . setTraceInterface ( new ActorTrace ( ) ) ; 
 - ActorSystem . system ( ) . addDispatcher ( " network " ) ; 
 - ActorSystem . system ( ) . addDispatcher ( " heavy " ) ; 
 + ActorSystem . system ( ) . addDispatcher ( " network " , 2 ) ; 
 + ActorSystem . system ( ) . addDispatcher ( " network _ manager " , 1 ) ; 
 + ActorSystem . system ( ) . addDispatcher ( " heavy " , 2 ) ; 
 ActorSystem . system ( ) . addDispatcher ( " updates " , 1 ) ; 
 
 timing . section ( " Modules : Create " ) ; 
 @ @ - 1010 , 6 + 1011 , 7 @ @ public class Messenger { 
 
 / * * 
 * Handle call in ui - < b > should < b / > be called , when receiving IncomingCallEvent 
 + * 
 * @ param callId 
 * @ param callback 
 * / 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / network / mtp / actors / ManagerActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / network / mtp / actors / ManagerActor . java 
 index c4e55c3 . . 776596b 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / network / mtp / actors / ManagerActor . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / network / mtp / actors / ManagerActor . java 
 @ @ - 55 , 7 + 55 , 7 @ @ public class ManagerActor extends Actor { 
 public ManagerActor create ( ) { 
 return new ManagerActor ( mtProto ) ; 
 } 
 - } ) . changeDispatcher ( " network " ) , mtProto . getActorPath ( ) + " / manager " ) ) ; 
 + } ) . changeDispatcher ( " network _ manager " ) , mtProto . getActorPath ( ) + " / manager " ) ) ; 
 } 
 
 private static final AtomicIntegerCompat NEXT _ CONNECTION = im . actor . runtime . Runtime . createAtomicInt ( 1 ) ;

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 index 593095a . . ab9a17a 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 @ @ - 8 , 6 + 8 , 9 @ @ import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; 
 import im . actor . sdk . intents . ActorIntent ; 
 
 + / * * 
 + * SDK Delegate . Used for delegating some work to 
 + * / 
 public interface ActorSDKDelegate { 
 
 / * * 
 @ @ - 31 , 19 + 34 , 34 @ @ public interface ActorSDKDelegate { 
 * / 
 ActorIntent getStartIntent ( ) ; 
 
 + / * * 
 + * If not null returned , overrides settings activity intent 
 + * 
 + * @ return Actor Intent 
 + * / 
 + ActorIntent getSettingsIntent ( ) ; 
 + 
 + @ Deprecated 
 AuthState getAuthStartState ( ) ; 
 
 + @ Deprecated 
 BaseAuthFragment getSignFragment ( ) ; 
 
 + @ Deprecated 
 View getBeforeNickSettingsView ( Context context ) ; 
 
 + @ Deprecated 
 View getAfterPhoneSettingsView ( Context context ) ; 
 
 + @ Deprecated 
 View getSettingsTopView ( Context context ) ; 
 
 + @ Deprecated 
 View getSettingsBottomView ( Context context ) ; 
 
 + @ Deprecated 
 ActorSettingsCategory [ ] getBeforeSettingsCategories ( ) ; 
 
 + @ Deprecated 
 ActorSettingsCategory [ ] getAfterSettingsCategories ( ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 index 68ec210 . . 9741d06 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 @ @ - 61 , 6 + 61 , 11 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { 
 return null ; 
 } 
 
 + @ Override 
 + public ActorIntent getSettingsIntent ( ) { 
 + return null ; 
 + } 
 + 
 / / 
 / / Hacking settings activity 
 / / 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 index bbb081d . . 2518330 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 @ @ - 113 , 7 + 113 , 9 @ @ public class ApiModule extends AbsModule implements BusSubscriber { 
 
 @ Override 
 public void onUpdateReceived ( Object obj ) { 
 - context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; 
 + if ( context ( ) . getUpdatesModule ( ) ! = null ) { 
 + context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; 
 + } 
 } 
 
 @ Override
