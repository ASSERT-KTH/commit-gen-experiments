BLEU SCORE: 0.317023313852343

TEST MSG: fix ( android ) : set fragment to list processor after recreate
GENERATED MSG: fix ( android ) : audio stop onPause

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java < nl > index 314344b . . 8b8ceac 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java < nl > @ @ - 267 , 4 + 267 , 8 @ @ public class ChatListProcessor implements ListProcessor < Message > { < nl > } < nl > return res ; < nl > } < nl > + < nl > + public void setFragment ( MessagesFragment fragment ) { < nl > + this . fragment = fragment ; < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / MessagesFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / MessagesFragment . java < nl > index 21da715 . . 09683ac 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / MessagesFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / MessagesFragment . java < nl > @ @ - 125 , 8 + 125 , 9 @ @ public class MessagesFragment extends DisplayListFragment < Message , MessageHolder < nl > BindedDisplayList < Message > res = messenger ( ) . getMessageDisplayList ( peer ) ; < nl > if ( res . getListProcessor ( ) = = null ) { < nl > res . setListProcessor ( new ChatListProcessor ( this ) ) ; < nl > + } else { < nl > + ( ( ChatListProcessor ) res . getListProcessor ( ) ) . setFragment ( this ) ; < nl > } < nl > - < nl > return res ; < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / media / DocumentsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / media / DocumentsFragment . java < nl > index 7f734d9 . . d555dbb 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / media / DocumentsFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / media / DocumentsFragment . java < nl > @ @ - 39 , 6 + 39 , 8 @ @ public class DocumentsFragment extends MessagesFragment { < nl > BindedDisplayList < Message > res = messenger ( ) . getDocsDisplayList ( peer ) ; < nl > if ( res . getListProcessor ( ) = = null ) { < nl > res . setListProcessor ( new ChatListProcessor ( this ) ) ; < nl > + } else { < nl > + ( ( ChatListProcessor ) res . getListProcessor ( ) ) . setFragment ( this ) ; < nl > } < nl > return res ; < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index 0aeccf1 . . 7b89f42 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 49 , 6 + 49 , 7 @ @ import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . R ; < nl > import im . actor . sdk . controllers . Intents ; < nl > import im . actor . sdk . controllers . conversation . mentions . MentionsAdapter ; < nl > + import im . actor . sdk . controllers . conversation . messages . AudioHolder ; < nl > import im . actor . sdk . controllers . conversation . messages . MessagesFragment ; < nl > import im . actor . sdk . core . audio . VoiceCaptureActor ; < nl > import im . actor . sdk . util . Randoms ; < nl > @ @ - 474 , 6 + 475 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > super . onPause ( ) ; < nl > < nl > voiceRecordActor . send ( PoisonPill . INSTANCE ) ; < nl > + AudioHolder . stopPlaying ( ) ; < nl > / / Saving draft < nl > messenger ( ) . saveDraft ( peer , messageEditText . getText ( ) . toString ( ) ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / AudioHolder . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / AudioHolder . java < nl > index aae668e . . d0caf8b 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / AudioHolder . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / AudioHolder . java < nl > @ @ - 385 , 4 + 385 , 9 @ @ public class AudioHolder extends MessageHolder { < nl > messageBubble . getBackground ( ) . setColorFilter ( null ) ; < nl > } < nl > < nl > + public static void stopPlaying ( ) { < nl > + if ( audioActor ! = null ) { < nl > + audioActor . send ( new AudioPlayerActor . Stop ( ) ) ; < nl > + } < nl > + } < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java 
 index 314344b . . 8b8ceac 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java 
 @ @ - 267 , 4 + 267 , 8 @ @ public class ChatListProcessor implements ListProcessor < Message > { 
 } 
 return res ; 
 } 
 + 
 + public void setFragment ( MessagesFragment fragment ) { 
 + this . fragment = fragment ; 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / MessagesFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / MessagesFragment . java 
 index 21da715 . . 09683ac 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / MessagesFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / MessagesFragment . java 
 @ @ - 125 , 8 + 125 , 9 @ @ public class MessagesFragment extends DisplayListFragment < Message , MessageHolder 
 BindedDisplayList < Message > res = messenger ( ) . getMessageDisplayList ( peer ) ; 
 if ( res . getListProcessor ( ) = = null ) { 
 res . setListProcessor ( new ChatListProcessor ( this ) ) ; 
 + } else { 
 + ( ( ChatListProcessor ) res . getListProcessor ( ) ) . setFragment ( this ) ; 
 } 
 - 
 return res ; 
 } 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / media / DocumentsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / media / DocumentsFragment . java 
 index 7f734d9 . . d555dbb 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / media / DocumentsFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / fragment / media / DocumentsFragment . java 
 @ @ - 39 , 6 + 39 , 8 @ @ public class DocumentsFragment extends MessagesFragment { 
 BindedDisplayList < Message > res = messenger ( ) . getDocsDisplayList ( peer ) ; 
 if ( res . getListProcessor ( ) = = null ) { 
 res . setListProcessor ( new ChatListProcessor ( this ) ) ; 
 + } else { 
 + ( ( ChatListProcessor ) res . getListProcessor ( ) ) . setFragment ( this ) ; 
 } 
 return res ; 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index 0aeccf1 . . 7b89f42 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 49 , 6 + 49 , 7 @ @ import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . R ; 
 import im . actor . sdk . controllers . Intents ; 
 import im . actor . sdk . controllers . conversation . mentions . MentionsAdapter ; 
 + import im . actor . sdk . controllers . conversation . messages . AudioHolder ; 
 import im . actor . sdk . controllers . conversation . messages . MessagesFragment ; 
 import im . actor . sdk . core . audio . VoiceCaptureActor ; 
 import im . actor . sdk . util . Randoms ; 
 @ @ - 474 , 6 + 475 , 7 @ @ public class ChatActivity extends ActorEditTextActivity { 
 super . onPause ( ) ; 
 
 voiceRecordActor . send ( PoisonPill . INSTANCE ) ; 
 + AudioHolder . stopPlaying ( ) ; 
 / / Saving draft 
 messenger ( ) . saveDraft ( peer , messageEditText . getText ( ) . toString ( ) ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / AudioHolder . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / AudioHolder . java 
 index aae668e . . d0caf8b 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / AudioHolder . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / AudioHolder . java 
 @ @ - 385 , 4 + 385 , 9 @ @ public class AudioHolder extends MessageHolder { 
 messageBubble . getBackground ( ) . setColorFilter ( null ) ; 
 } 
 
 + public static void stopPlaying ( ) { 
 + if ( audioActor ! = null ) { 
 + audioActor . send ( new AudioPlayerActor . Stop ( ) ) ; 
 + } 
 + } 
 }
