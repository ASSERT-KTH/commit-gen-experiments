BLEU SCORE: 0.10735252131161191

TEST MSG: fix ( ios ) : Fixing nil counter
GENERATED MSG: fix ( iOS ) : small pause / play voice fix

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AANavigationBadge . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AANavigationBadge . swift < nl > index 003e562 . . 751b164 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AANavigationBadge . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AANavigationBadge . swift < nl > @ @ - 36 , 7 + 36 , 12 @ @ class AANavigationBadge { < nl > < nl > / / Bind badge counter < nl > binder . bind ( Actor . getGlobalState ( ) . globalCounter , closure : { ( value : JavaLangInteger ? ) - > ( ) in < nl > - self . badgeCount = Int ( ( value ! ) . integerValue ) < nl > + if let v = value { < nl > + self . badgeCount = Int ( v . integerValue ) < nl > + } else { < nl > + self . badgeCount = 0 < nl > + } < nl > + < nl > badgeText . text = " \ ( self . badgeCount ) " < nl > if ( self . isBadgeVisible & & self . badgeCount > 0 ) { < nl > self . badgeView . showView ( )
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > index 6ce5e8c . . 692d99e 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift < nl > @ @ - 370 , 17 + 370 , 20 @ @ public class AAConversationContentController : SLKTextViewController , ARDisplayLi < nl > func playVoiceFromPath ( path : String , fileId : jlong , position : Float ) { < nl > < nl > if ( self . currentAudioFileId ! = fileId ) { < nl > - self . currentAudioFileId = fileId < nl > < nl > self . voicePlayer ? . stop ( ) < nl > self . voicePlayer ? . audioPlayerStopAndFinish ( ) < nl > < nl > + self . voicesCache [ self . currentAudioFileId ] = 0 . 0 < nl > + < nl > self . voicePlayer = AAModernConversationAudioPlayer ( filePath : path ) < nl > self . voiceContext = self . voicePlayer . inlineMediaContext ( ) < nl > < nl > < nl > self . voicePlayer ? . play ( ) < nl > < nl > + self . currentAudioFileId = fileId < nl > + < nl > } else { < nl > < nl > if self . voicePlayer ? . isPaused ( ) = = false { < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > index 7677fd4 . . c75df24 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift < nl > @ @ - 361 , 10 + 361 , 11 @ @ public class AABubbleVoiceCell : AABubbleBaseFileCell , AAModernConversationAudioPl < nl > public func audioPlayerDidFinish ( ) { < nl > < nl > dispatchOnUi { ( ) - > Void in < nl > + < nl > self . playPauseButton . setImage ( UIImage . bundled ( " aa _ playrecordbutton " ) , forState : UIControlState . Normal ) < nl > self . soundProgressSlider . value = 0 . 0 < nl > - self . controller . currentAudioFileId = 0 < nl > self . controller . voicesCache [ ( self . bindedMessage ? . rid ) ! ] = 0 . 0 < nl > + < nl > } < nl > < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AANavigationBadge . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AANavigationBadge . swift 
 index 003e562 . . 751b164 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AANavigationBadge . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AANavigationBadge . swift 
 @ @ - 36 , 7 + 36 , 12 @ @ class AANavigationBadge { 
 
 / / Bind badge counter 
 binder . bind ( Actor . getGlobalState ( ) . globalCounter , closure : { ( value : JavaLangInteger ? ) - > ( ) in 
 - self . badgeCount = Int ( ( value ! ) . integerValue ) 
 + if let v = value { 
 + self . badgeCount = Int ( v . integerValue ) 
 + } else { 
 + self . badgeCount = 0 
 + } 
 + 
 badgeText . text = " \ ( self . badgeCount ) " 
 if ( self . isBadgeVisible & & self . badgeCount > 0 ) { 
 self . badgeView . showView ( )

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 index 6ce5e8c . . 692d99e 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / AAConversationContentController . swift 
 @ @ - 370 , 17 + 370 , 20 @ @ public class AAConversationContentController : SLKTextViewController , ARDisplayLi 
 func playVoiceFromPath ( path : String , fileId : jlong , position : Float ) { 
 
 if ( self . currentAudioFileId ! = fileId ) { 
 - self . currentAudioFileId = fileId 
 
 self . voicePlayer ? . stop ( ) 
 self . voicePlayer ? . audioPlayerStopAndFinish ( ) 
 
 + self . voicesCache [ self . currentAudioFileId ] = 0 . 0 
 + 
 self . voicePlayer = AAModernConversationAudioPlayer ( filePath : path ) 
 self . voiceContext = self . voicePlayer . inlineMediaContext ( ) 
 
 
 self . voicePlayer ? . play ( ) 
 
 + self . currentAudioFileId = fileId 
 + 
 } else { 
 
 if self . voicePlayer ? . isPaused ( ) = = false { 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 index 7677fd4 . . c75df24 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleVoiceCell . swift 
 @ @ - 361 , 10 + 361 , 11 @ @ public class AABubbleVoiceCell : AABubbleBaseFileCell , AAModernConversationAudioPl 
 public func audioPlayerDidFinish ( ) { 
 
 dispatchOnUi { ( ) - > Void in 
 + 
 self . playPauseButton . setImage ( UIImage . bundled ( " aa _ playrecordbutton " ) , forState : UIControlState . Normal ) 
 self . soundProgressSlider . value = 0 . 0 
 - self . controller . currentAudioFileId = 0 
 self . controller . voicesCache [ ( self . bindedMessage ? . rid ) ! ] = 0 . 0 
 + 
 } 
 
 }
