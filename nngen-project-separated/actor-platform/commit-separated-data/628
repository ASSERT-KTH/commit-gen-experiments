BLEU SCORE: 0.2891784933232571

TEST MSG: fix ( android ) : remove new task flag for custom chrome tabs
GENERATED MSG: fix ( android ) : url without schema

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > index adf50a6 . . bd32c12 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > @ @ - 104 , 26 + 104 , 24 @ @ public class AndroidMarkdown { < nl > builder . setSpan ( new ClickableSpan ( ) { < nl > @ Override < nl > public void onClick ( View view ) { < nl > + Context ctx = view . getContext ( ) ; < nl > if ( url . getUrl ( ) . startsWith ( " send : " ) ) { < nl > - Context ctx = view . getContext ( ) ; < nl > if ( ctx instanceof ChatActivity ) { < nl > ActorSDK . sharedActor ( ) . getMessenger ( ) . sendMessage ( ( ( ChatActivity ) ctx ) . getPeer ( ) , url . getUrl ( ) . replace ( " send : " , " " ) ) ; < nl > } < nl > } else { < nl > Intent intent = new Intent ( Intent . ACTION _ VIEW ) < nl > - . setData ( Uri . parse ( url . getUrl ( ) ) ) < nl > - . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ; < nl > + . setData ( Uri . parse ( url . getUrl ( ) ) ) ; < nl > Bundle b = addChromeCustomTabData ( intent ) ; < nl > - if ( intent . resolveActivity ( view . getContext ( ) . getPackageManager ( ) ) ! = null ) { < nl > - AndroidContext . getContext ( ) . startActivity ( < nl > + if ( intent . resolveActivity ( ctx . getPackageManager ( ) ) ! = null ) { < nl > + ctx . startActivity ( < nl > intent ) ; < nl > } else { < nl > Intent WithSchema = new Intent ( Intent . ACTION _ VIEW ) < nl > - . setData ( Uri . parse ( " http : / / " . concat ( url . getUrl ( ) ) ) ) < nl > - . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ; < nl > + . setData ( Uri . parse ( " http : / / " . concat ( url . getUrl ( ) ) ) ) ; < nl > Bundle b1 = addChromeCustomTabData ( WithSchema ) ; < nl > - if ( WithSchema . resolveActivity ( view . getContext ( ) . getPackageManager ( ) ) ! = null ) { < nl > - AndroidContext . getContext ( ) . startActivity ( < nl > + if ( WithSchema . resolveActivity ( ctx . getPackageManager ( ) ) ! = null ) { < nl > + ctx . startActivity ( < nl > WithSchema ) ; < nl > } else { < nl > Toast . makeText ( view . getContext ( ) , " Unknown URL type " , Toast . LENGTH _ SHORT ) . show ( ) ;
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > index cea6b77 . . e002956 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > @ @ - 100 , 7 + 100 , 15 @ @ public class AndroidMarkdown { < nl > AndroidContext . getContext ( ) . startActivity ( < nl > intent ) ; < nl > } else { < nl > - Toast . makeText ( view . getContext ( ) , " Unknown URL type " , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + Intent WithSchema = new Intent ( Intent . ACTION _ VIEW ) < nl > + . setData ( Uri . parse ( " http : / / " . concat ( url . getUrl ( ) ) ) ) < nl > + . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ; < nl > + if ( WithSchema . resolveActivity ( view . getContext ( ) . getPackageManager ( ) ) ! = null ) { < nl > + AndroidContext . getContext ( ) . startActivity ( < nl > + WithSchema ) ; < nl > + } else { < nl > + Toast . makeText ( view . getContext ( ) , " Unknown URL type " , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + } < nl > } < nl > < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 index adf50a6 . . bd32c12 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 @ @ - 104 , 26 + 104 , 24 @ @ public class AndroidMarkdown { 
 builder . setSpan ( new ClickableSpan ( ) { 
 @ Override 
 public void onClick ( View view ) { 
 + Context ctx = view . getContext ( ) ; 
 if ( url . getUrl ( ) . startsWith ( " send : " ) ) { 
 - Context ctx = view . getContext ( ) ; 
 if ( ctx instanceof ChatActivity ) { 
 ActorSDK . sharedActor ( ) . getMessenger ( ) . sendMessage ( ( ( ChatActivity ) ctx ) . getPeer ( ) , url . getUrl ( ) . replace ( " send : " , " " ) ) ; 
 } 
 } else { 
 Intent intent = new Intent ( Intent . ACTION _ VIEW ) 
 - . setData ( Uri . parse ( url . getUrl ( ) ) ) 
 - . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ; 
 + . setData ( Uri . parse ( url . getUrl ( ) ) ) ; 
 Bundle b = addChromeCustomTabData ( intent ) ; 
 - if ( intent . resolveActivity ( view . getContext ( ) . getPackageManager ( ) ) ! = null ) { 
 - AndroidContext . getContext ( ) . startActivity ( 
 + if ( intent . resolveActivity ( ctx . getPackageManager ( ) ) ! = null ) { 
 + ctx . startActivity ( 
 intent ) ; 
 } else { 
 Intent WithSchema = new Intent ( Intent . ACTION _ VIEW ) 
 - . setData ( Uri . parse ( " http : / / " . concat ( url . getUrl ( ) ) ) ) 
 - . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ; 
 + . setData ( Uri . parse ( " http : / / " . concat ( url . getUrl ( ) ) ) ) ; 
 Bundle b1 = addChromeCustomTabData ( WithSchema ) ; 
 - if ( WithSchema . resolveActivity ( view . getContext ( ) . getPackageManager ( ) ) ! = null ) { 
 - AndroidContext . getContext ( ) . startActivity ( 
 + if ( WithSchema . resolveActivity ( ctx . getPackageManager ( ) ) ! = null ) { 
 + ctx . startActivity ( 
 WithSchema ) ; 
 } else { 
 Toast . makeText ( view . getContext ( ) , " Unknown URL type " , Toast . LENGTH _ SHORT ) . show ( ) ;

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 index cea6b77 . . e002956 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 @ @ - 100 , 7 + 100 , 15 @ @ public class AndroidMarkdown { 
 AndroidContext . getContext ( ) . startActivity ( 
 intent ) ; 
 } else { 
 - Toast . makeText ( view . getContext ( ) , " Unknown URL type " , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + Intent WithSchema = new Intent ( Intent . ACTION _ VIEW ) 
 + . setData ( Uri . parse ( " http : / / " . concat ( url . getUrl ( ) ) ) ) 
 + . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ; 
 + if ( WithSchema . resolveActivity ( view . getContext ( ) . getPackageManager ( ) ) ! = null ) { 
 + AndroidContext . getContext ( ) . startActivity ( 
 + WithSchema ) ; 
 + } else { 
 + Toast . makeText ( view . getContext ( ) , " Unknown URL type " , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + } 
 } 
 
 }
