BLEU SCORE: 0.16451929399933107

TEST MSG: fix ( android ) : merge emoji keyboard size in cyanogen with soft naw buttons
GENERATED MSG: feat ( android ) : autocomplete fragment as bottom sheet

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / util / Screen . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / util / Screen . java < nl > index 2cde4c7 . . 0a0488c 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / util / Screen . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / util / Screen . java < nl > @ @ - 31 , 6 + 31 , 10 @ @ public class Screen { < nl > return AndroidContext . getContext ( ) . getResources ( ) . getDisplayMetrics ( ) . heightPixels ; < nl > } < nl > < nl > + public static boolean isPrtrait ( ) { < nl > + return getWidth ( ) > getHeight ( ) ; < nl > + } < nl > + < nl > public static int getStatusBarHeight ( ) { < nl > < nl > int result = 0 ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / BaseKeyboard . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / BaseKeyboard . java < nl > index 05f65d5 . . 5fb8659 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / BaseKeyboard . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / BaseKeyboard . java < nl > @ @ - 5 , 6 + 5 , 7 @ @ import android . content . Context ; < nl > import android . content . res . Configuration ; < nl > import android . graphics . PixelFormat ; < nl > import android . graphics . Rect ; < nl > + import android . os . Build ; < nl > import android . view . Gravity ; < nl > import android . view . View ; < nl > import android . view . ViewGroup ; < nl > @ @ - 16 , 10 + 17 , 13 @ @ import android . widget . FrameLayout ; < nl > import android . widget . RelativeLayout ; < nl > import android . widget . TextView ; < nl > < nl > + import java . lang . reflect . Field ; < nl > + < nl > import im . actor . sdk . R ; < nl > import im . actor . runtime . Log ; < nl > import im . actor . sdk . controllers . conversation . KeyboardLayout ; < nl > import im . actor . sdk . util . KeyboardHelper ; < nl > + import im . actor . sdk . util . Screen ; < nl > < nl > public class BaseKeyboard implements < nl > ViewTreeObserver . OnGlobalLayoutListener { < nl > @ @ - 43 , 7 + 47 , 7 @ @ public class BaseKeyboard implements < nl > private KeyboardStatusListener keyboardStatusListener ; < nl > < nl > final WindowManager windowManager ; < nl > - int keyboardHeight = 0 ; < nl > + int keyboardHeight ; < nl > private boolean showingPending ; < nl > < nl > private boolean showing = false ; < nl > @ @ - 51 , 6 + 55 , 7 @ @ public class BaseKeyboard implements < nl > private boolean softwareKeyboardShowing ; < nl > private KeyboardHelper keyboardHelper ; < nl > private boolean keyboardMeasured = false ; < nl > + private int keyboardTriggerHeight = Screen . dp ( 150 ) ; < nl > < nl > public BaseKeyboard ( Activity activity , EditText messageBody ) { < nl > this . activity = activity ; < nl > @ @ - 220 , 12 + 225 , 11 @ @ public class BaseKeyboard implements < nl > return ; < nl > } < nl > Rect r = new Rect ( ) ; < nl > - decorView . getWindowVisibleDisplayFrame ( r ) ; < nl > + messageBody . getWindowVisibleDisplayFrame ( r ) ; < nl > < nl > - int screenHeight = decorView . getRootView ( ) < nl > + int screenHeight = messageBody . getRootView ( ) < nl > . getHeight ( ) ; < nl > - int heightDifference = screenHeight < nl > - - ( r . bottom - r . top ) ; < nl > + < nl > < nl > / / int widthDiff = decorView . getRootView ( ) . getWidth ( ) - ( r . right - r . left ) ; < nl > / / if ( Math . abs ( widthDiff ) > 0 ) { < nl > @ @ - 234 , 30 + 238 , 22 @ @ public class BaseKeyboard implements < nl > int resourceId = activity . getResources ( ) < nl > . getIdentifier ( " status _ bar _ height " , < nl > " dimen " , " android " ) ; < nl > + int statusBarHeight = 0 ; < nl > + < nl > if ( resourceId > 0 ) { < nl > - heightDifference - = activity . getResources ( ) < nl > + statusBarHeight = activity . getResources ( ) < nl > . getDimensionPixelSize ( resourceId ) ; < nl > - } < nl > - int orientation = activity . getResources ( ) . getConfiguration ( ) . orientation ; < nl > - < nl > - int id = activity . getResources ( ) . getIdentifier ( " config _ showNavigationBar " , " bool " , " android " ) ; < nl > - if ( id > 0 ) { < nl > - if ( activity . getResources ( ) . getBoolean ( id ) ) { < nl > - int navbarResId = activity . getResources ( ) < nl > - . getIdentifier ( < nl > - orientation = = Configuration . ORIENTATION _ PORTRAIT ? " navigation _ bar _ height " : " navigation _ bar _ height _ landscape " , < nl > - " dimen " , " android " ) ; < nl > - if ( navbarResId > 0 ) { < nl > - heightDifference - = activity . getResources ( ) < nl > - . getDimensionPixelSize ( navbarResId ) ; < nl > - } < nl > - } < nl > + screenHeight - = statusBarHeight ; < nl > } < nl > < nl > - boolean changed = softwareKeyboardShowing ; < nl > < nl > + screenHeight - = getViewInset ( root , statusBarHeight ) ; < nl > + < nl > + int heightDifference = screenHeight - ( r . bottom - r . top ) ; < nl > + < nl > + boolean changed = softwareKeyboardShowing ; < nl > < nl > - if ( heightDifference > 100 ) { < nl > + if ( heightDifference > keyboardTriggerHeight ) { < nl > < nl > softwareKeyboardShowing = true ; < nl > < nl > @ @ - 267 , 7 + 263 , 6 @ @ public class BaseKeyboard implements < nl > < nl > dismiss ( ) ; < nl > < nl > - < nl > } else { < nl > < nl > softwareKeyboardShowing = false ; < nl > @ @ - 340 , 4 + 335 , 31 @ @ public class BaseKeyboard implements < nl > } < nl > return false ; < nl > } < nl > + < nl > + public static int getViewInset ( View view , int statusBarHeight ) { < nl > + if ( view = = null | | view . getRootView ( ) = = null ) { < nl > + return 0 ; < nl > + } < nl > + < nl > + view = view . getRootView ( ) ; < nl > + < nl > + if ( Build . VERSION . SDK _ INT < 21 | | view . getHeight ( ) = = Screen . getHeight ( ) | | view . getHeight ( ) = = Screen . getHeight ( ) - statusBarHeight ) { < nl > + return 0 ; < nl > + } < nl > + < nl > + try { < nl > + Field mAttachInfoField = View . class . getDeclaredField ( " mAttachInfo " ) ; < nl > + mAttachInfoField . setAccessible ( true ) ; < nl > + Object mAttachInfo = mAttachInfoField . get ( view ) ; < nl > + if ( mAttachInfo ! = null ) { < nl > + Field mStableInsetsField = mAttachInfo . getClass ( ) . getDeclaredField ( " mStableInsets " ) ; < nl > + mStableInsetsField . setAccessible ( true ) ; < nl > + Rect insets = ( Rect ) mStableInsetsField . get ( mAttachInfo ) ; < nl > + return insets . bottom ; < nl > + } < nl > + } catch ( Exception e ) { < nl > + e . printStackTrace ( ) ; < nl > + } < nl > + return 0 ; < nl > + } < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java < nl > index 0366519 . . b26975e 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java < nl > @ @ - 105 , 6 + 105 , 7 @ @ public class ChatFragment extends BaseFragment implements InputBarCallback , Mess < nl > AutocompleteFragment autocompleteFragment = ActorSDK . sharedActor ( ) . getDelegate ( ) . fragmentForAutocomplete ( peer ) ; < nl > if ( autocompleteFragment = = null ) { < nl > autocompleteFragment = AutocompleteFragment . create ( peer ) ; < nl > + autocompleteFragment . setUnderlyingView ( res . findViewById ( R . id . messagesFragment ) ) ; < nl > } < nl > < nl > QuoteFragment quoteFragment = ActorSDK . sharedActor ( ) . getDelegate ( ) . fragmentForQuote ( ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / AutocompleteFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / AutocompleteFragment . java < nl > index ff37afe . . 4af5ec9 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / AutocompleteFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / AutocompleteFragment . java < nl > @ @ - 1 , 16 + 1 , 17 @ @ < nl > package im . actor . sdk . controllers . conversation . mentions ; < nl > < nl > + import android . graphics . Color ; < nl > import android . os . Bundle ; < nl > import android . support . annotation . Nullable ; < nl > import android . support . v4 . app . Fragment ; < nl > import android . view . Gravity ; < nl > import android . view . LayoutInflater ; < nl > + import android . view . MotionEvent ; < nl > import android . view . View ; < nl > import android . view . ViewGroup ; < nl > import android . view . animation . Animation ; < nl > import android . view . animation . Transformation ; < nl > import android . widget . AbsListView ; < nl > - import android . widget . AdapterView ; < nl > import android . widget . FrameLayout ; < nl > < nl > import im . actor . core . entity . BotCommand ; < nl > @ @ - 20 , 6 + 21 , 7 @ @ import im . actor . core . entity . PeerType ; < nl > import im . actor . sdk . controllers . BaseFragment ; < nl > import im . actor . sdk . util . Screen ; < nl > import im . actor . sdk . view . MaterialInterpolator ; < nl > + import im . actor . sdk . view . adapters . BottomSheetListView ; < nl > import im . actor . sdk . view . adapters . HolderAdapter ; < nl > import im . actor . sdk . view . adapters . RecyclerListView ; < nl > < nl > @ @ - 32 , 7 + 34 , 8 @ @ public class AutocompleteFragment extends BaseFragment { < nl > private boolean isGroup ; < nl > < nl > private HolderAdapter autocompleteAdapter ; < nl > - private RecyclerListView autocompleteList ; < nl > + private BottomSheetListView autocompleteList ; < nl > + private View underlyingView ; < nl > < nl > public static AutocompleteFragment create ( Peer peer ) { < nl > AutocompleteFragment res = new AutocompleteFragment ( ) ; < nl > @ @ - 63 , 10 + 66 , 13 @ @ public class AutocompleteFragment extends BaseFragment { < nl > @ Override < nl > public View onCreateView ( LayoutInflater inflater , @ Nullable ViewGroup container , @ Nullable Bundle savedInstanceState ) { < nl > < nl > - autocompleteList = new RecyclerListView ( getContext ( ) ) ; < nl > + autocompleteList = new BottomSheetListView ( getContext ( ) ) ; < nl > + autocompleteList . setVisibility ( View . INVISIBLE ) ; < nl > + autocompleteList . setUnderlyingView ( underlyingView ) ; < nl > autocompleteList . setDivider ( null ) ; < nl > autocompleteList . setDividerHeight ( 0 ) ; < nl > - autocompleteList . setBackgroundColor ( style . getMainBackgroundColor ( ) ) ; < nl > + autocompleteList . setBackgroundColor ( Color . TRANSPARENT ) ; < nl > + < nl > if ( autocompleteAdapter ! = null ) { < nl > autocompleteList . setAdapter ( autocompleteAdapter ) ; < nl > } < nl > @ @ - 88 , 13 + 94 , 14 @ @ public class AutocompleteFragment extends BaseFragment { < nl > } ) ; < nl > < nl > / / Initial zero height < nl > - FrameLayout . LayoutParams params = new FrameLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , 0 ) ; < nl > + FrameLayout . LayoutParams params = new FrameLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , ViewGroup . LayoutParams . MATCH _ PARENT ) ; < nl > params . gravity = Gravity . BOTTOM ; < nl > autocompleteList . setLayoutParams ( params ) ; < nl > < nl > return autocompleteList ; < nl > } < nl > < nl > + < nl > public void onCurrentWordChanged ( String text ) { < nl > if ( isBot ) { < nl > if ( text . startsWith ( " / " ) ) { < nl > @ @ - 135 , 24 + 142 , 22 @ @ public class AutocompleteFragment extends BaseFragment { < nl > / / Expand Animations < nl > / / < nl > < nl > - private void expandMentions ( final View v , final int oldRowsCount , final int newRowsCount ) { < nl > - if ( newRowsCount = = oldRowsCount ) { < nl > - return ; < nl > - } < nl > - < nl > - v . measure ( AbsListView . LayoutParams . MATCH _ PARENT , AbsListView . LayoutParams . WRAP _ CONTENT ) ; < nl > - int newRowsHeight = Screen . dp ( 48 ) * newRowsCount + newRowsCount ; < nl > + private void expandMentions ( final BottomSheetListView list , final int oldRowsCount , final int newRowsCount ) { < nl > + list . post ( ( ) - > { < nl > + if ( newRowsCount = = oldRowsCount ) { < nl > + return ; < nl > + } < nl > < nl > - final int targetHeight = ( newRowsHeight ) > Screen . dp ( 96 + 2 ) ? Screen . dp ( 122 ) : newRowsHeight ; < nl > - final int initialHeight = v . getLayoutParams ( ) . height ; < nl > < nl > - v . getLayoutParams ( ) . height = initialHeight ; < nl > - v . setVisibility ( View . VISIBLE ) ; < nl > - Animation a = new ExpandAnimation ( v , targetHeight , initialHeight ) ; < nl > + list . setMinHeight ( newRowsCount = = 1 ? Screen . dp ( 48 ) : newRowsCount = = 2 ? Screen . dp ( 97 ) : Screen . dp ( 122 ) ) ; < nl > + list . setVisibility ( View . VISIBLE ) ; < nl > + / / Animation a = new ExpandAnimation ( list , targetHeight , initialHeight ) ; < nl > + / / < nl > + / / a . setDuration ( ( newRowsCount > oldRowsCount ? targetHeight : initialHeight / Screen . dp ( 1 ) ) ) ; < nl > + / / a . setInterpolator ( MaterialInterpolator . getInstance ( ) ) ; < nl > + / / list . startAnimation ( a ) ; < nl > + } ) ; < nl > < nl > - a . setDuration ( ( newRowsCount > oldRowsCount ? targetHeight : initialHeight / Screen . dp ( 1 ) ) ) ; < nl > - a . setInterpolator ( MaterialInterpolator . getInstance ( ) ) ; < nl > - v . startAnimation ( a ) ; < nl > } < nl > < nl > private static class ExpandAnimation extends Animation { < nl > @ @ - 188 , 4 + 193 , 8 @ @ public class AutocompleteFragment extends BaseFragment { < nl > return true ; < nl > } < nl > } < nl > + < nl > + public void setUnderlyingView ( View underlyingView ) { < nl > + this . underlyingView = underlyingView ; < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java < nl > index 1dfb7f5 . . 44600b4 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java < nl > @ @ - 81 , 6 + 81 , 7 @ @ public class MentionsAdapter extends HolderAdapter < MentionFilterResult > { < nl > @ Override < nl > public View init ( final MentionFilterResult data , ViewGroup viewGroup , Context context ) { < nl > View res = ( ( Activity ) context ) . getLayoutInflater ( ) . inflate ( R . layout . fragment _ chat _ mention _ item , viewGroup , false ) ; < nl > + res . setBackgroundResource ( R . drawable . selectable _ background ) ; < nl > res . findViewById ( R . id . divider ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > < nl > userName = ( TextView ) res . findViewById ( R . id . name ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / BottomSheetListView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / BottomSheetListView . java < nl > new file mode 100644 < nl > index 0000000 . . c964ad0 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / BottomSheetListView . java < nl > @ @ - 0 , 0 + 1 , 115 @ @ < nl > + package im . actor . sdk . view . adapters ; < nl > + < nl > + import android . content . Context ; < nl > + import android . util . AttributeSet ; < nl > + import android . view . MotionEvent ; < nl > + import android . view . View ; < nl > + import android . view . ViewGroup ; < nl > + import android . widget . AbsListView ; < nl > + < nl > + public class BottomSheetListView extends RecyclerListView { < nl > + < nl > + private View header ; < nl > + private View underlyingView ; < nl > + private int minHeight = 0 ; < nl > + < nl > + public BottomSheetListView ( Context context ) { < nl > + super ( context ) ; < nl > + init ( ) ; < nl > + } < nl > + < nl > + public BottomSheetListView ( Context context , AttributeSet attrs ) { < nl > + super ( context , attrs ) ; < nl > + init ( ) ; < nl > + } < nl > + < nl > + public BottomSheetListView ( Context context , AttributeSet attrs , int defStyleAttr ) { < nl > + super ( context , attrs , defStyleAttr ) ; < nl > + init ( ) ; < nl > + } < nl > + < nl > + public BottomSheetListView ( Context context , AttributeSet attrs , int defStyleAttr , int defStyleRes ) { < nl > + super ( context , attrs , defStyleAttr , defStyleRes ) ; < nl > + init ( ) ; < nl > + } < nl > + < nl > + < nl > + @ Override < nl > + public int getCount ( ) { < nl > + return super . getCount ( ) - 1 ; < nl > + } < nl > + < nl > + private void init ( ) { < nl > + header = new View ( getContext ( ) ) ; < nl > + header . setLayoutParams ( new AbsListView . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , 0 ) ) ; < nl > + addHeaderView ( header ) ; < nl > + < nl > + setOnTouchListener ( new View . OnTouchListener ( ) { < nl > + boolean delegateTouch = false ; < nl > + < nl > + @ Override < nl > + public boolean onTouch ( View view , MotionEvent motionEvent ) { < nl > + boolean stopDelegate = false ; < nl > + switch ( motionEvent . getAction ( ) ) { < nl > + case MotionEvent . ACTION _ DOWN : < nl > + delegateTouch = isWithinHeaderBounds ( motionEvent . getRawX ( ) , motionEvent . getRawY ( ) ) ; < nl > + break ; < nl > + < nl > + case MotionEvent . ACTION _ UP : < nl > + stopDelegate = true ; < nl > + } < nl > + < nl > + if ( delegateTouch & & underlyingView ! = null ) { < nl > + delegateTouch = ! stopDelegate ; < nl > + underlyingView . dispatchTouchEvent ( motionEvent ) ; < nl > + return true ; < nl > + } < nl > + < nl > + < nl > + return false ; < nl > + } < nl > + } ) ; < nl > + } < nl > + < nl > + @ Override < nl > + protected void onSizeChanged ( int w , int h , int oldw , int oldh ) { < nl > + super . onSizeChanged ( w , h , oldw , oldh ) ; < nl > + resizeHeader ( ) ; < nl > + } < nl > + < nl > + protected void resizeHeader ( ) { < nl > + if ( header . getLayoutParams ( ) . height ! = getHeight ( ) - minHeight ) { < nl > + header . getLayoutParams ( ) . height = getHeight ( ) - minHeight ; < nl > + header . requestLayout ( ) ; < nl > + } < nl > + } < nl > + < nl > + public void setMinHeight ( int minHeight ) { < nl > + this . minHeight = minHeight ; < nl > + resizeHeader ( ) ; < nl > + } < nl > + < nl > + public View getHeader ( ) { < nl > + return header ; < nl > + } < nl > + < nl > + boolean isWithinHeaderBounds ( float xPoint , float yPoint ) { < nl > + int [ ] l = new int [ 2 ] ; < nl > + header . getLocationOnScreen ( l ) ; < nl > + int x = l [ 0 ] ; < nl > + int y = l [ 1 ] ; < nl > + int w = header . getWidth ( ) ; < nl > + int h = header . getHeight ( ) ; < nl > + < nl > + if ( xPoint < x | | xPoint > x + w | | yPoint < y | | yPoint > y + h ) { < nl > + return false ; < nl > + } < nl > + return true ; < nl > + } < nl > + < nl > + public void setUnderlyingView ( View underlyingView ) { < nl > + this . underlyingView = underlyingView ; < nl > + } < nl > + < nl > + < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / selectable _ background . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / selectable _ background . xml < nl > new file mode 100644 < nl > index 0000000 . . 6ed6f76 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / selectable _ background . xml < nl > @ @ - 0 , 0 + 1 , 11 @ @ < nl > + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > < ! - - < nl > + ~ Copyright ( C ) 2015 Actor LLC . < https : / / actor . im > < nl > + - - > < nl > + < nl > + < selector xmlns : android = " http : / / schemas . android . com / apk / res / android " > < nl > + < item android : drawable = " @ color / selector _ background _ common " android : state _ selected = " false " android : state _ focused = " false " android : state _ pressed = " false " / > < nl > + < item android : drawable = " @ color / selector _ background _ selected " android : state _ pressed = " true " / > < nl > + < item android : drawable = " @ color / selector _ background _ selected " android : state _ selected = " true " / > < nl > + < item android : drawable = " @ color / selector _ background _ hovered " android : state _ focused = " true " / > < nl > + < item android : drawable = " @ color / selector _ background _ hovered " android : state _ hovered = " true " / > < nl > + < / selector > < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / colors . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / colors . xml < nl > index 51eba4a . . 9a50e6d 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / colors . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / colors . xml < nl > @ @ - 60 , 6 + 60 , 10 @ @ < nl > < color name = " selector _ messages " > # 44000000 < / color > < nl > < color name = " selector _ messages _ selected " > # 66000000 < / color > < nl > < nl > + < color name = " selector _ background _ common " > # ffffff < / color > < nl > + < color name = " selector _ background _ selected " > # 999999 < / color > < nl > + < color name = " selector _ background _ hovered " > # dddddd < / color > < nl > + < nl > < ! - - < color name = " divider " > # 1e000000 < / color > - - > < nl > < ! - - < color name = " dividerInvColor " > # 1effffff < / color > - - >

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / util / Screen . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / util / Screen . java 
 index 2cde4c7 . . 0a0488c 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / util / Screen . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / util / Screen . java 
 @ @ - 31 , 6 + 31 , 10 @ @ public class Screen { 
 return AndroidContext . getContext ( ) . getResources ( ) . getDisplayMetrics ( ) . heightPixels ; 
 } 
 
 + public static boolean isPrtrait ( ) { 
 + return getWidth ( ) > getHeight ( ) ; 
 + } 
 + 
 public static int getStatusBarHeight ( ) { 
 
 int result = 0 ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / BaseKeyboard . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / BaseKeyboard . java 
 index 05f65d5 . . 5fb8659 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / BaseKeyboard . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / keyboard / BaseKeyboard . java 
 @ @ - 5 , 6 + 5 , 7 @ @ import android . content . Context ; 
 import android . content . res . Configuration ; 
 import android . graphics . PixelFormat ; 
 import android . graphics . Rect ; 
 + import android . os . Build ; 
 import android . view . Gravity ; 
 import android . view . View ; 
 import android . view . ViewGroup ; 
 @ @ - 16 , 10 + 17 , 13 @ @ import android . widget . FrameLayout ; 
 import android . widget . RelativeLayout ; 
 import android . widget . TextView ; 
 
 + import java . lang . reflect . Field ; 
 + 
 import im . actor . sdk . R ; 
 import im . actor . runtime . Log ; 
 import im . actor . sdk . controllers . conversation . KeyboardLayout ; 
 import im . actor . sdk . util . KeyboardHelper ; 
 + import im . actor . sdk . util . Screen ; 
 
 public class BaseKeyboard implements 
 ViewTreeObserver . OnGlobalLayoutListener { 
 @ @ - 43 , 7 + 47 , 7 @ @ public class BaseKeyboard implements 
 private KeyboardStatusListener keyboardStatusListener ; 
 
 final WindowManager windowManager ; 
 - int keyboardHeight = 0 ; 
 + int keyboardHeight ; 
 private boolean showingPending ; 
 
 private boolean showing = false ; 
 @ @ - 51 , 6 + 55 , 7 @ @ public class BaseKeyboard implements 
 private boolean softwareKeyboardShowing ; 
 private KeyboardHelper keyboardHelper ; 
 private boolean keyboardMeasured = false ; 
 + private int keyboardTriggerHeight = Screen . dp ( 150 ) ; 
 
 public BaseKeyboard ( Activity activity , EditText messageBody ) { 
 this . activity = activity ; 
 @ @ - 220 , 12 + 225 , 11 @ @ public class BaseKeyboard implements 
 return ; 
 } 
 Rect r = new Rect ( ) ; 
 - decorView . getWindowVisibleDisplayFrame ( r ) ; 
 + messageBody . getWindowVisibleDisplayFrame ( r ) ; 
 
 - int screenHeight = decorView . getRootView ( ) 
 + int screenHeight = messageBody . getRootView ( ) 
 . getHeight ( ) ; 
 - int heightDifference = screenHeight 
 - - ( r . bottom - r . top ) ; 
 + 
 
 / / int widthDiff = decorView . getRootView ( ) . getWidth ( ) - ( r . right - r . left ) ; 
 / / if ( Math . abs ( widthDiff ) > 0 ) { 
 @ @ - 234 , 30 + 238 , 22 @ @ public class BaseKeyboard implements 
 int resourceId = activity . getResources ( ) 
 . getIdentifier ( " status _ bar _ height " , 
 " dimen " , " android " ) ; 
 + int statusBarHeight = 0 ; 
 + 
 if ( resourceId > 0 ) { 
 - heightDifference - = activity . getResources ( ) 
 + statusBarHeight = activity . getResources ( ) 
 . getDimensionPixelSize ( resourceId ) ; 
 - } 
 - int orientation = activity . getResources ( ) . getConfiguration ( ) . orientation ; 
 - 
 - int id = activity . getResources ( ) . getIdentifier ( " config _ showNavigationBar " , " bool " , " android " ) ; 
 - if ( id > 0 ) { 
 - if ( activity . getResources ( ) . getBoolean ( id ) ) { 
 - int navbarResId = activity . getResources ( ) 
 - . getIdentifier ( 
 - orientation = = Configuration . ORIENTATION _ PORTRAIT ? " navigation _ bar _ height " : " navigation _ bar _ height _ landscape " , 
 - " dimen " , " android " ) ; 
 - if ( navbarResId > 0 ) { 
 - heightDifference - = activity . getResources ( ) 
 - . getDimensionPixelSize ( navbarResId ) ; 
 - } 
 - } 
 + screenHeight - = statusBarHeight ; 
 } 
 
 - boolean changed = softwareKeyboardShowing ; 
 
 + screenHeight - = getViewInset ( root , statusBarHeight ) ; 
 + 
 + int heightDifference = screenHeight - ( r . bottom - r . top ) ; 
 + 
 + boolean changed = softwareKeyboardShowing ; 
 
 - if ( heightDifference > 100 ) { 
 + if ( heightDifference > keyboardTriggerHeight ) { 
 
 softwareKeyboardShowing = true ; 
 
 @ @ - 267 , 7 + 263 , 6 @ @ public class BaseKeyboard implements 
 
 dismiss ( ) ; 
 
 - 
 } else { 
 
 softwareKeyboardShowing = false ; 
 @ @ - 340 , 4 + 335 , 31 @ @ public class BaseKeyboard implements 
 } 
 return false ; 
 } 
 + 
 + public static int getViewInset ( View view , int statusBarHeight ) { 
 + if ( view = = null | | view . getRootView ( ) = = null ) { 
 + return 0 ; 
 + } 
 + 
 + view = view . getRootView ( ) ; 
 + 
 + if ( Build . VERSION . SDK _ INT < 21 | | view . getHeight ( ) = = Screen . getHeight ( ) | | view . getHeight ( ) = = Screen . getHeight ( ) - statusBarHeight ) { 
 + return 0 ; 
 + } 
 + 
 + try { 
 + Field mAttachInfoField = View . class . getDeclaredField ( " mAttachInfo " ) ; 
 + mAttachInfoField . setAccessible ( true ) ; 
 + Object mAttachInfo = mAttachInfoField . get ( view ) ; 
 + if ( mAttachInfo ! = null ) { 
 + Field mStableInsetsField = mAttachInfo . getClass ( ) . getDeclaredField ( " mStableInsets " ) ; 
 + mStableInsetsField . setAccessible ( true ) ; 
 + Rect insets = ( Rect ) mStableInsetsField . get ( mAttachInfo ) ; 
 + return insets . bottom ; 
 + } 
 + } catch ( Exception e ) { 
 + e . printStackTrace ( ) ; 
 + } 
 + return 0 ; 
 + } 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java 
 index 0366519 . . b26975e 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatFragment . java 
 @ @ - 105 , 6 + 105 , 7 @ @ public class ChatFragment extends BaseFragment implements InputBarCallback , Mess 
 AutocompleteFragment autocompleteFragment = ActorSDK . sharedActor ( ) . getDelegate ( ) . fragmentForAutocomplete ( peer ) ; 
 if ( autocompleteFragment = = null ) { 
 autocompleteFragment = AutocompleteFragment . create ( peer ) ; 
 + autocompleteFragment . setUnderlyingView ( res . findViewById ( R . id . messagesFragment ) ) ; 
 } 
 
 QuoteFragment quoteFragment = ActorSDK . sharedActor ( ) . getDelegate ( ) . fragmentForQuote ( ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / AutocompleteFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / AutocompleteFragment . java 
 index ff37afe . . 4af5ec9 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / AutocompleteFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / AutocompleteFragment . java 
 @ @ - 1 , 16 + 1 , 17 @ @ 
 package im . actor . sdk . controllers . conversation . mentions ; 
 
 + import android . graphics . Color ; 
 import android . os . Bundle ; 
 import android . support . annotation . Nullable ; 
 import android . support . v4 . app . Fragment ; 
 import android . view . Gravity ; 
 import android . view . LayoutInflater ; 
 + import android . view . MotionEvent ; 
 import android . view . View ; 
 import android . view . ViewGroup ; 
 import android . view . animation . Animation ; 
 import android . view . animation . Transformation ; 
 import android . widget . AbsListView ; 
 - import android . widget . AdapterView ; 
 import android . widget . FrameLayout ; 
 
 import im . actor . core . entity . BotCommand ; 
 @ @ - 20 , 6 + 21 , 7 @ @ import im . actor . core . entity . PeerType ; 
 import im . actor . sdk . controllers . BaseFragment ; 
 import im . actor . sdk . util . Screen ; 
 import im . actor . sdk . view . MaterialInterpolator ; 
 + import im . actor . sdk . view . adapters . BottomSheetListView ; 
 import im . actor . sdk . view . adapters . HolderAdapter ; 
 import im . actor . sdk . view . adapters . RecyclerListView ; 
 
 @ @ - 32 , 7 + 34 , 8 @ @ public class AutocompleteFragment extends BaseFragment { 
 private boolean isGroup ; 
 
 private HolderAdapter autocompleteAdapter ; 
 - private RecyclerListView autocompleteList ; 
 + private BottomSheetListView autocompleteList ; 
 + private View underlyingView ; 
 
 public static AutocompleteFragment create ( Peer peer ) { 
 AutocompleteFragment res = new AutocompleteFragment ( ) ; 
 @ @ - 63 , 10 + 66 , 13 @ @ public class AutocompleteFragment extends BaseFragment { 
 @ Override 
 public View onCreateView ( LayoutInflater inflater , @ Nullable ViewGroup container , @ Nullable Bundle savedInstanceState ) { 
 
 - autocompleteList = new RecyclerListView ( getContext ( ) ) ; 
 + autocompleteList = new BottomSheetListView ( getContext ( ) ) ; 
 + autocompleteList . setVisibility ( View . INVISIBLE ) ; 
 + autocompleteList . setUnderlyingView ( underlyingView ) ; 
 autocompleteList . setDivider ( null ) ; 
 autocompleteList . setDividerHeight ( 0 ) ; 
 - autocompleteList . setBackgroundColor ( style . getMainBackgroundColor ( ) ) ; 
 + autocompleteList . setBackgroundColor ( Color . TRANSPARENT ) ; 
 + 
 if ( autocompleteAdapter ! = null ) { 
 autocompleteList . setAdapter ( autocompleteAdapter ) ; 
 } 
 @ @ - 88 , 13 + 94 , 14 @ @ public class AutocompleteFragment extends BaseFragment { 
 } ) ; 
 
 / / Initial zero height 
 - FrameLayout . LayoutParams params = new FrameLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , 0 ) ; 
 + FrameLayout . LayoutParams params = new FrameLayout . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , ViewGroup . LayoutParams . MATCH _ PARENT ) ; 
 params . gravity = Gravity . BOTTOM ; 
 autocompleteList . setLayoutParams ( params ) ; 
 
 return autocompleteList ; 
 } 
 
 + 
 public void onCurrentWordChanged ( String text ) { 
 if ( isBot ) { 
 if ( text . startsWith ( " / " ) ) { 
 @ @ - 135 , 24 + 142 , 22 @ @ public class AutocompleteFragment extends BaseFragment { 
 / / Expand Animations 
 / / 
 
 - private void expandMentions ( final View v , final int oldRowsCount , final int newRowsCount ) { 
 - if ( newRowsCount = = oldRowsCount ) { 
 - return ; 
 - } 
 - 
 - v . measure ( AbsListView . LayoutParams . MATCH _ PARENT , AbsListView . LayoutParams . WRAP _ CONTENT ) ; 
 - int newRowsHeight = Screen . dp ( 48 ) * newRowsCount + newRowsCount ; 
 + private void expandMentions ( final BottomSheetListView list , final int oldRowsCount , final int newRowsCount ) { 
 + list . post ( ( ) - > { 
 + if ( newRowsCount = = oldRowsCount ) { 
 + return ; 
 + } 
 
 - final int targetHeight = ( newRowsHeight ) > Screen . dp ( 96 + 2 ) ? Screen . dp ( 122 ) : newRowsHeight ; 
 - final int initialHeight = v . getLayoutParams ( ) . height ; 
 
 - v . getLayoutParams ( ) . height = initialHeight ; 
 - v . setVisibility ( View . VISIBLE ) ; 
 - Animation a = new ExpandAnimation ( v , targetHeight , initialHeight ) ; 
 + list . setMinHeight ( newRowsCount = = 1 ? Screen . dp ( 48 ) : newRowsCount = = 2 ? Screen . dp ( 97 ) : Screen . dp ( 122 ) ) ; 
 + list . setVisibility ( View . VISIBLE ) ; 
 + / / Animation a = new ExpandAnimation ( list , targetHeight , initialHeight ) ; 
 + / / 
 + / / a . setDuration ( ( newRowsCount > oldRowsCount ? targetHeight : initialHeight / Screen . dp ( 1 ) ) ) ; 
 + / / a . setInterpolator ( MaterialInterpolator . getInstance ( ) ) ; 
 + / / list . startAnimation ( a ) ; 
 + } ) ; 
 
 - a . setDuration ( ( newRowsCount > oldRowsCount ? targetHeight : initialHeight / Screen . dp ( 1 ) ) ) ; 
 - a . setInterpolator ( MaterialInterpolator . getInstance ( ) ) ; 
 - v . startAnimation ( a ) ; 
 } 
 
 private static class ExpandAnimation extends Animation { 
 @ @ - 188 , 4 + 193 , 8 @ @ public class AutocompleteFragment extends BaseFragment { 
 return true ; 
 } 
 } 
 + 
 + public void setUnderlyingView ( View underlyingView ) { 
 + this . underlyingView = underlyingView ; 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java 
 index 1dfb7f5 . . 44600b4 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / mentions / MentionsAdapter . java 
 @ @ - 81 , 6 + 81 , 7 @ @ public class MentionsAdapter extends HolderAdapter < MentionFilterResult > { 
 @ Override 
 public View init ( final MentionFilterResult data , ViewGroup viewGroup , Context context ) { 
 View res = ( ( Activity ) context ) . getLayoutInflater ( ) . inflate ( R . layout . fragment _ chat _ mention _ item , viewGroup , false ) ; 
 + res . setBackgroundResource ( R . drawable . selectable _ background ) ; 
 res . findViewById ( R . id . divider ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 
 userName = ( TextView ) res . findViewById ( R . id . name ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / BottomSheetListView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / BottomSheetListView . java 
 new file mode 100644 
 index 0000000 . . c964ad0 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / adapters / BottomSheetListView . java 
 @ @ - 0 , 0 + 1 , 115 @ @ 
 + package im . actor . sdk . view . adapters ; 
 + 
 + import android . content . Context ; 
 + import android . util . AttributeSet ; 
 + import android . view . MotionEvent ; 
 + import android . view . View ; 
 + import android . view . ViewGroup ; 
 + import android . widget . AbsListView ; 
 + 
 + public class BottomSheetListView extends RecyclerListView { 
 + 
 + private View header ; 
 + private View underlyingView ; 
 + private int minHeight = 0 ; 
 + 
 + public BottomSheetListView ( Context context ) { 
 + super ( context ) ; 
 + init ( ) ; 
 + } 
 + 
 + public BottomSheetListView ( Context context , AttributeSet attrs ) { 
 + super ( context , attrs ) ; 
 + init ( ) ; 
 + } 
 + 
 + public BottomSheetListView ( Context context , AttributeSet attrs , int defStyleAttr ) { 
 + super ( context , attrs , defStyleAttr ) ; 
 + init ( ) ; 
 + } 
 + 
 + public BottomSheetListView ( Context context , AttributeSet attrs , int defStyleAttr , int defStyleRes ) { 
 + super ( context , attrs , defStyleAttr , defStyleRes ) ; 
 + init ( ) ; 
 + } 
 + 
 + 
 + @ Override 
 + public int getCount ( ) { 
 + return super . getCount ( ) - 1 ; 
 + } 
 + 
 + private void init ( ) { 
 + header = new View ( getContext ( ) ) ; 
 + header . setLayoutParams ( new AbsListView . LayoutParams ( ViewGroup . LayoutParams . MATCH _ PARENT , 0 ) ) ; 
 + addHeaderView ( header ) ; 
 + 
 + setOnTouchListener ( new View . OnTouchListener ( ) { 
 + boolean delegateTouch = false ; 
 + 
 + @ Override 
 + public boolean onTouch ( View view , MotionEvent motionEvent ) { 
 + boolean stopDelegate = false ; 
 + switch ( motionEvent . getAction ( ) ) { 
 + case MotionEvent . ACTION _ DOWN : 
 + delegateTouch = isWithinHeaderBounds ( motionEvent . getRawX ( ) , motionEvent . getRawY ( ) ) ; 
 + break ; 
 + 
 + case MotionEvent . ACTION _ UP : 
 + stopDelegate = true ; 
 + } 
 + 
 + if ( delegateTouch & & underlyingView ! = null ) { 
 + delegateTouch = ! stopDelegate ; 
 + underlyingView . dispatchTouchEvent ( motionEvent ) ; 
 + return true ; 
 + } 
 + 
 + 
 + return false ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Override 
 + protected void onSizeChanged ( int w , int h , int oldw , int oldh ) { 
 + super . onSizeChanged ( w , h , oldw , oldh ) ; 
 + resizeHeader ( ) ; 
 + } 
 + 
 + protected void resizeHeader ( ) { 
 + if ( header . getLayoutParams ( ) . height ! = getHeight ( ) - minHeight ) { 
 + header . getLayoutParams ( ) . height = getHeight ( ) - minHeight ; 
 + header . requestLayout ( ) ; 
 + } 
 + } 
 + 
 + public void setMinHeight ( int minHeight ) { 
 + this . minHeight = minHeight ; 
 + resizeHeader ( ) ; 
 + } 
 + 
 + public View getHeader ( ) { 
 + return header ; 
 + } 
 + 
 + boolean isWithinHeaderBounds ( float xPoint , float yPoint ) { 
 + int [ ] l = new int [ 2 ] ; 
 + header . getLocationOnScreen ( l ) ; 
 + int x = l [ 0 ] ; 
 + int y = l [ 1 ] ; 
 + int w = header . getWidth ( ) ; 
 + int h = header . getHeight ( ) ; 
 + 
 + if ( xPoint < x | | xPoint > x + w | | yPoint < y | | yPoint > y + h ) { 
 + return false ; 
 + } 
 + return true ; 
 + } 
 + 
 + public void setUnderlyingView ( View underlyingView ) { 
 + this . underlyingView = underlyingView ; 
 + } 
 + 
 + 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / selectable _ background . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / selectable _ background . xml 
 new file mode 100644 
 index 0000000 . . 6ed6f76 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / drawable / selectable _ background . xml 
 @ @ - 0 , 0 + 1 , 11 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > < ! - - 
 + ~ Copyright ( C ) 2015 Actor LLC . < https : / / actor . im > 
 + - - > 
 + 
 + < selector xmlns : android = " http : / / schemas . android . com / apk / res / android " > 
 + < item android : drawable = " @ color / selector _ background _ common " android : state _ selected = " false " android : state _ focused = " false " android : state _ pressed = " false " / > 
 + < item android : drawable = " @ color / selector _ background _ selected " android : state _ pressed = " true " / > 
 + < item android : drawable = " @ color / selector _ background _ selected " android : state _ selected = " true " / > 
 + < item android : drawable = " @ color / selector _ background _ hovered " android : state _ focused = " true " / > 
 + < item android : drawable = " @ color / selector _ background _ hovered " android : state _ hovered = " true " / > 
 + < / selector > 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / colors . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / colors . xml 
 index 51eba4a . . 9a50e6d 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / colors . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / colors . xml 
 @ @ - 60 , 6 + 60 , 10 @ @ 
 < color name = " selector _ messages " > # 44000000 < / color > 
 < color name = " selector _ messages _ selected " > # 66000000 < / color > 
 
 + < color name = " selector _ background _ common " > # ffffff < / color > 
 + < color name = " selector _ background _ selected " > # 999999 < / color > 
 + < color name = " selector _ background _ hovered " > # dddddd < / color > 
 + 
 < ! - - < color name = " divider " > # 1e000000 < / color > - - > 
 < ! - - < color name = " dividerInvColor " > # 1effffff < / color > - - >
