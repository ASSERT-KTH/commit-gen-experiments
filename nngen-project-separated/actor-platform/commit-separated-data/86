BLEU SCORE: 0.1777835117834348

TEST MSG: refactor ( android ) : notificationSettings : replaced divider views with DividerView and lambdas
GENERATED MSG: chore ( android ) : create share menu without inflating

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / NotificationsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / NotificationsFragment . java < nl > index 419ead7 . . 5511a2b 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / NotificationsFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / NotificationsFragment . java < nl > @ @ - 33 , 22 + 33 , 13 @ @ public class NotificationsFragment extends BaseFragment { < nl > public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { < nl > View res = inflater . inflate ( R . layout . fr _ settings _ notifications , container , false ) ; < nl > res . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > - res . findViewById ( R . id . divider ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > - res . findViewById ( R . id . divider1 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > - res . findViewById ( R . id . divider2 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > - res . findViewById ( R . id . divider3 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > - res . findViewById ( R . id . divider4 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > - res . findViewById ( R . id . divider5 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; < nl > < nl > / / Conversation tone < nl > final CheckBox enableTones = ( CheckBox ) res . findViewById ( R . id . enableConversationTones ) ; < nl > enableTones . setChecked ( messenger ( ) . isConversationTonesEnabled ( ) ) ; < nl > - View . OnClickListener enableTonesListener = new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - messenger ( ) . changeConversationTonesEnabled ( ! messenger ( ) . isConversationTonesEnabled ( ) ) ; < nl > - enableTones . setChecked ( messenger ( ) . isConversationTonesEnabled ( ) ) ; < nl > - } < nl > + View . OnClickListener enableTonesListener = v - > { < nl > + messenger ( ) . changeConversationTonesEnabled ( ! messenger ( ) . isConversationTonesEnabled ( ) ) ; < nl > + enableTones . setChecked ( messenger ( ) . isConversationTonesEnabled ( ) ) ; < nl > } ; < nl > ActorStyle style = ActorSDK . sharedActor ( ) . style ; < nl > ( ( TextView ) res . findViewById ( R . id . settings _ conversation _ tones _ title ) ) . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > @ @ - 59 , 12 + 50 , 9 @ @ public class NotificationsFragment extends BaseFragment { < nl > / / Vibration < nl > final CheckBox enableVibration = ( CheckBox ) res . findViewById ( R . id . enableVibration ) ; < nl > enableVibration . setChecked ( messenger ( ) . isNotificationVibrationEnabled ( ) ) ; < nl > - View . OnClickListener enableVibrationListener = new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - messenger ( ) . changeNotificationVibrationEnabled ( ! messenger ( ) . isNotificationVibrationEnabled ( ) ) ; < nl > - enableVibration . setChecked ( messenger ( ) . isNotificationVibrationEnabled ( ) ) ; < nl > - } < nl > + View . OnClickListener enableVibrationListener = v - > { < nl > + messenger ( ) . changeNotificationVibrationEnabled ( ! messenger ( ) . isNotificationVibrationEnabled ( ) ) ; < nl > + enableVibration . setChecked ( messenger ( ) . isNotificationVibrationEnabled ( ) ) ; < nl > } ; < nl > enableVibration . setOnClickListener ( enableVibrationListener ) ; < nl > res . findViewById ( R . id . vibrationCont ) . setOnClickListener ( enableVibrationListener ) ; < nl > @ @ - 74 , 12 + 62 , 9 @ @ public class NotificationsFragment extends BaseFragment { < nl > / / Group < nl > final CheckBox enableGroup = ( CheckBox ) res . findViewById ( R . id . enableGroup ) ; < nl > enableGroup . setChecked ( messenger ( ) . isGroupNotificationsEnabled ( ) ) ; < nl > - View . OnClickListener enableGroupListener = new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - messenger ( ) . changeGroupNotificationsEnabled ( ! messenger ( ) . isGroupNotificationsEnabled ( ) ) ; < nl > - enableGroup . setChecked ( messenger ( ) . isGroupNotificationsEnabled ( ) ) ; < nl > - } < nl > + View . OnClickListener enableGroupListener = v - > { < nl > + messenger ( ) . changeGroupNotificationsEnabled ( ! messenger ( ) . isGroupNotificationsEnabled ( ) ) ; < nl > + enableGroup . setChecked ( messenger ( ) . isGroupNotificationsEnabled ( ) ) ; < nl > } ; < nl > enableGroup . setOnClickListener ( enableGroupListener ) ; < nl > res . findViewById ( R . id . groupCont ) . setOnClickListener ( enableGroupListener ) ; < nl > @ @ - 89 , 12 + 74 , 9 @ @ public class NotificationsFragment extends BaseFragment { < nl > / / Mentions < nl > final CheckBox enableGroupMentions = ( CheckBox ) res . findViewById ( R . id . enableGroupMentions ) ; < nl > enableGroupMentions . setChecked ( messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; < nl > - View . OnClickListener enableGroupMentionsListener = new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - messenger ( ) . changeGroupNotificationsOnlyMentionsEnabled ( ! messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; < nl > - enableGroupMentions . setChecked ( messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; < nl > - } < nl > + View . OnClickListener enableGroupMentionsListener = v - > { < nl > + messenger ( ) . changeGroupNotificationsOnlyMentionsEnabled ( ! messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; < nl > + enableGroupMentions . setChecked ( messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; < nl > } ; < nl > enableGroupMentions . setOnClickListener ( enableGroupMentionsListener ) ; < nl > res . findViewById ( R . id . groupMentionsCont ) . setOnClickListener ( enableGroupMentionsListener ) ; < nl > @ @ - 104 , 12 + 86 , 9 @ @ public class NotificationsFragment extends BaseFragment { < nl > / / Names and messages < nl > final CheckBox enableText = ( CheckBox ) res . findViewById ( R . id . enableTitles ) ; < nl > enableText . setChecked ( messenger ( ) . isShowNotificationsText ( ) ) ; < nl > - View . OnClickListener enableTextListener = new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - messenger ( ) . changeShowNotificationTextEnabled ( ! messenger ( ) . isShowNotificationsText ( ) ) ; < nl > - enableText . setChecked ( messenger ( ) . isShowNotificationsText ( ) ) ; < nl > - } < nl > + View . OnClickListener enableTextListener = v - > { < nl > + messenger ( ) . changeShowNotificationTextEnabled ( ! messenger ( ) . isShowNotificationsText ( ) ) ; < nl > + enableText . setChecked ( messenger ( ) . isShowNotificationsText ( ) ) ; < nl > } ; < nl > enableText . setOnClickListener ( enableTextListener ) ; < nl > res . findViewById ( R . id . titlesCont ) . setOnClickListener ( enableTextListener ) ; < nl > @ @ - 119 , 20 + 98 , 17 @ @ public class NotificationsFragment extends BaseFragment { < nl > / / Sound < nl > final CheckBox enableSound = ( CheckBox ) res . findViewById ( R . id . enableSound ) ; < nl > enableSound . setChecked ( messenger ( ) . isNotificationSoundEnabled ( ) ) ; < nl > - View . OnClickListener enableSoundListener = new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - messenger ( ) . changeNotificationSoundEnabled ( ! messenger ( ) . isNotificationSoundEnabled ( ) ) ; < nl > - enableSound . setChecked ( messenger ( ) . isNotificationSoundEnabled ( ) ) ; < nl > - < nl > - / / show / hide sound picker < nl > - View cont = res . findViewById ( R . id . soundPickerCont ) ; < nl > - View div = res . findViewById ( R . id . divider5 ) ; < nl > - if ( messenger ( ) . isNotificationSoundEnabled ( ) ) { < nl > - ViewUtils . showViews ( cont , div ) ; < nl > - } else { < nl > - ViewUtils . goneViews ( cont , div ) ; < nl > - } < nl > + View . OnClickListener enableSoundListener = v - > { < nl > + messenger ( ) . changeNotificationSoundEnabled ( ! messenger ( ) . isNotificationSoundEnabled ( ) ) ; < nl > + enableSound . setChecked ( messenger ( ) . isNotificationSoundEnabled ( ) ) ; < nl > + < nl > + / / show / hide sound picker < nl > + View cont = res . findViewById ( R . id . soundPickerCont ) ; < nl > + View div = res . findViewById ( R . id . divider ) ; < nl > + if ( messenger ( ) . isNotificationSoundEnabled ( ) ) { < nl > + ViewUtils . showViews ( cont , div ) ; < nl > + } else { < nl > + ViewUtils . goneViews ( cont , div ) ; < nl > } < nl > } ; < nl > enableSound . setOnClickListener ( enableSoundListener ) ; < nl > @ @ - 143 , 32 + 119 , 29 @ @ public class NotificationsFragment extends BaseFragment { < nl > / / Sound picker < nl > notificationPreferences = getActivity ( ) . getSharedPreferences ( " notifications " , Context . MODE _ PRIVATE ) ; < nl > notificationPreferencesEditor = notificationPreferences . edit ( ) ; < nl > - View . OnClickListener soundPickerListener = new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - Intent intent = new Intent ( RingtoneManager . ACTION _ RINGTONE _ PICKER ) ; < nl > - intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ TYPE , RingtoneManager . TYPE _ NOTIFICATION ) ; < nl > - intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ SHOW _ DEFAULT , true ) ; < nl > - intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ DEFAULT _ URI , RingtoneManager . getDefaultUri ( RingtoneManager . TYPE _ NOTIFICATION ) ) ; < nl > - < nl > - Uri currentSound = null ; < nl > - String defaultPath = null ; < nl > - Uri defaultUri = Settings . System . DEFAULT _ NOTIFICATION _ URI ; < nl > - if ( defaultUri ! = null ) { < nl > - defaultPath = defaultUri . getPath ( ) ; < nl > - } < nl > + View . OnClickListener soundPickerListener = v - > { < nl > + Intent intent = new Intent ( RingtoneManager . ACTION _ RINGTONE _ PICKER ) ; < nl > + intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ TYPE , RingtoneManager . TYPE _ NOTIFICATION ) ; < nl > + intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ SHOW _ DEFAULT , true ) ; < nl > + intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ DEFAULT _ URI , RingtoneManager . getDefaultUri ( RingtoneManager . TYPE _ NOTIFICATION ) ) ; < nl > + < nl > + Uri currentSound = null ; < nl > + String defaultPath = null ; < nl > + Uri defaultUri = Settings . System . DEFAULT _ NOTIFICATION _ URI ; < nl > + if ( defaultUri ! = null ) { < nl > + defaultPath = defaultUri . getPath ( ) ; < nl > + } < nl > < nl > - String path = notificationPreferences . getString ( " globalSound " , defaultPath ) ; < nl > - if ( path ! = null & & ! path . equals ( " none " ) ) { < nl > - if ( path . equals ( defaultPath ) ) { < nl > - currentSound = defaultUri ; < nl > - } else { < nl > - currentSound = Uri . parse ( path ) ; < nl > - } < nl > + String path = notificationPreferences . getString ( " globalSound " , defaultPath ) ; < nl > + if ( path ! = null & & ! path . equals ( " none " ) ) { < nl > + if ( path . equals ( defaultPath ) ) { < nl > + currentSound = defaultUri ; < nl > + } else { < nl > + currentSound = Uri . parse ( path ) ; < nl > } < nl > - intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ EXISTING _ URI , currentSound ) ; < nl > - startActivityForResult ( intent , SOUND _ PICKER _ REQUEST _ CODE ) ; < nl > } < nl > + intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ EXISTING _ URI , currentSound ) ; < nl > + startActivityForResult ( intent , SOUND _ PICKER _ REQUEST _ CODE ) ; < nl > } ; < nl > res . findViewById ( R . id . soundPickerCont ) . setOnClickListener ( soundPickerListener ) ; < nl > ( ( TextView ) res . findViewById ( R . id . settings _ sound _ picker _ title ) ) . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fr _ settings _ notifications . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fr _ settings _ notifications . xml < nl > index bb930e2 . . cf6a7aa 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fr _ settings _ notifications . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fr _ settings _ notifications . xml < nl > @ @ - 57 , 10 + 57 , 9 @ @ < nl > android : gravity = " center _ vertical " / > < nl > < / LinearLayout > < nl > < nl > - < View < nl > - android : id = " @ + id / divider1 " < nl > + < im . actor . sdk . view . DividerView < nl > android : layout _ width = " match _ parent " < nl > - android : layout _ height = " @ dimen / div _ size " / > < nl > + android : layout _ height = " @ dimen / div _ size " / > < nl > < nl > < LinearLayout < nl > android : id = " @ + id / vibrationCont " < nl > @ @ - 104 , 10 + 103 , 9 @ @ < nl > android : gravity = " center _ vertical " / > < nl > < / LinearLayout > < nl > < nl > - < View < nl > - android : id = " @ + id / divider2 " < nl > + < im . actor . sdk . view . DividerView < nl > android : layout _ width = " match _ parent " < nl > - android : layout _ height = " @ dimen / div _ size " / > < nl > + android : layout _ height = " @ dimen / div _ size " / > < nl > < nl > < LinearLayout < nl > android : id = " @ + id / groupCont " < nl > @ @ - 151 , 10 + 149 , 9 @ @ < nl > android : gravity = " center _ vertical " / > < nl > < / LinearLayout > < nl > < nl > - < View < nl > - android : id = " @ + id / divider3 " < nl > + < im . actor . sdk . view . DividerView < nl > android : layout _ width = " match _ parent " < nl > - android : layout _ height = " @ dimen / div _ size " / > < nl > + android : layout _ height = " @ dimen / div _ size " / > < nl > < nl > < LinearLayout < nl > android : id = " @ + id / groupMentionsCont " < nl > @ @ - 198 , 10 + 195 , 9 @ @ < nl > android : gravity = " center _ vertical " / > < nl > < / LinearLayout > < nl > < nl > - < View < nl > - android : id = " @ + id / divider4 " < nl > + < im . actor . sdk . view . DividerView < nl > android : layout _ width = " match _ parent " < nl > - android : layout _ height = " @ dimen / div _ size " / > < nl > + android : layout _ height = " @ dimen / div _ size " / > < nl > < nl > < LinearLayout < nl > android : id = " @ + id / titlesCont " < nl > @ @ - 244 , 10 + 240 , 9 @ @ < nl > android : gravity = " center _ vertical " / > < nl > < / LinearLayout > < nl > < nl > - < View < nl > - android : id = " @ + id / divider " < nl > + < im . actor . sdk . view . DividerView < nl > android : layout _ width = " match _ parent " < nl > - android : layout _ height = " @ dimen / div _ size " / > < nl > + android : layout _ height = " @ dimen / div _ size " / > < nl > < nl > < LinearLayout < nl > android : id = " @ + id / soundCont " < nl > @ @ - 291 , 10 + 286 , 10 @ @ < nl > android : gravity = " center _ vertical " / > < nl > < / LinearLayout > < nl > < nl > - < View < nl > - android : id = " @ + id / divider5 " < nl > + < im . actor . sdk . view . DividerView < nl > + android : id = " @ + id / divider " < nl > android : layout _ width = " match _ parent " < nl > - android : layout _ height = " @ dimen / div _ size " / > < nl > + android : layout _ height = " @ dimen / div _ size " / > < nl > < nl > < LinearLayout < nl > android : id = " @ + id / soundPickerCont "
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > index a64e8f5 . . 6f78394 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java < nl > @ @ - 76 , 17 + 76 , 35 @ @ public class Application extends ActorSDKApplication { < nl > / / } < nl > < nl > / / < nl > - / / @ Override < nl > - / / public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { < nl > - / / ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; < nl > - / / shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > - / / @ Override < nl > - / / public void onClick ( View v ) { < nl > - / / Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > - / / } < nl > - / / } ) ) ; < nl > - / / return shareMenuFields ; < nl > - / / } < nl > + @ Override < nl > + public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { < nl > + ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; < nl > + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > + Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > + } < nl > + } ) ) ; < nl > + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getMainColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > + Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > + } < nl > + } ) ) ; < nl > + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getDividerColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > + Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > + } < nl > + } ) ) ; < nl > + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getConvLikeColor ( ) , " lol " , new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > + Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; < nl > + } < nl > + } ) ) ; < nl > + return shareMenuFields ; < nl > + } < nl > < nl > / / @ Override < nl > / / public BaseGroupInfoActivity getGroupInfoIntent ( int gid ) { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index ffef87e . . 06abf6e 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 35 , 6 + 35 , 7 @ @ import android . text . Editable ; < nl > import android . text . Spannable ; < nl > import android . text . TextWatcher ; < nl > import android . util . Base64 ; < nl > + import android . view . Gravity ; < nl > import android . view . LayoutInflater ; < nl > import android . view . Menu ; < nl > import android . view . MenuItem ; < nl > @ @ - 339 , 10 + 340 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } ) ; < nl > < nl > / / share menu < nl > - TableLayout shareMenu = ( TableLayout ) findViewById ( R . id . share _ menu ) ; < nl > - shareMenu . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > findViewById ( R . id . fast _ share ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > - shareMenuCaontainer = findViewById ( R . id . share _ container ) ; < nl > + shareMenuCaontainer = findViewById ( R . id . share _ menu _ container ) ; < nl > shareMenuCaontainer . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > @ @ - 358 , 11 + 357 , 6 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } < nl > } ) ; < nl > < nl > - final TextView contactText = ( TextView ) findViewById ( R . id . contact _ text ) ; < nl > - final ImageView shareContact = ( ImageView ) findViewById ( R . id . share _ contact ) ; < nl > - shareContact . setBackgroundDrawable ( ShareMenuButtonFactory . get ( 0xff3ec2fa , this ) ) ; < nl > - ; < nl > - findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; < nl > < nl > View . OnClickListener shareMenuOCL = new View . OnClickListener ( ) { < nl > @ Override < nl > @ @ - 424 , 74 + 418 , 98 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } ; < nl > defaultSendOcl = shareMenuOCL ; < nl > < nl > - findViewById ( R . id . share _ gallery ) . setOnClickListener ( shareMenuOCL ) ; < nl > - findViewById ( R . id . share _ video ) . setOnClickListener ( shareMenuOCL ) ; < nl > - findViewById ( R . id . share _ camera ) . setOnClickListener ( shareMenuOCL ) ; < nl > - shareContact . setOnClickListener ( shareMenuOCL ) ; < nl > - findViewById ( R . id . share _ file ) . setOnClickListener ( shareMenuOCL ) ; < nl > - findViewById ( R . id . share _ hide ) . setOnClickListener ( shareMenuOCL ) ; < nl > - View shareLocation = findViewById ( R . id . share _ location ) ; < nl > - shareLocation . setOnClickListener ( shareMenuOCL ) ; < nl > - ActorSDK . sharedActor ( ) . getDelegate ( ) . onShareMenuCreated ( shareMenu ) ; < nl > - < nl > - menuIconToChange = shareContact ; < nl > - menuTitleToChange = contactText ; < nl > - < nl > - ArrayList < ShareMenuField > customFields = ActorSDK . sharedActor ( ) . getDelegate ( ) . addCustomShareMenuFields ( ) ; < nl > - < nl > - if ( customFields ! = null & & customFields . size ( ) > 0 ) { < nl > - if ( customFields . size ( ) % 2 ! = 0 ) { < nl > - customFields . add ( new ShareMenuField ( R . drawable . attach _ hide2 , < nl > - ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , < nl > - " " , < nl > - new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - < nl > - } < nl > - } ) ) ; < nl > - } < nl > - TableRow rowOne = ( TableRow ) shareMenu . findViewById ( R . id . share _ row _ one ) ; < nl > - TableRow rowTwo = ( TableRow ) shareMenu . findViewById ( R . id . share _ row _ two ) ; < nl > - boolean first = true ; < nl > - TableRow row ; < nl > - TableRow . LayoutParams params = new TableRow . LayoutParams ( 0 , ViewGroup . LayoutParams . WRAP _ CONTENT , 1 ) ; < nl > + ArrayList < ShareMenuField > menuFields = new ArrayList < > ( ) ; < nl > < nl > - for ( int i = 0 ; i < customFields . size ( ) ; i + + ) { < nl > - ShareMenuField f = customFields . get ( i ) ; < nl > - row = first ? rowOne : rowTwo ; < nl > + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ camera ) , R . id . share _ camera , R . drawable . share _ camera _ selector , shareMenuOCL ) ) ; < nl > + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ file ) , R . id . share _ file , R . drawable . share _ file _ selector , shareMenuOCL ) ) ; < nl > + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ gallery ) , R . id . share _ gallery , R . drawable . share _ gallery _ selector , shareMenuOCL ) ) ; < nl > + try { < nl > + Class . forName ( " com . google . android . gms . maps . GoogleMap " ) ; < nl > + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ location ) , R . id . share _ location , R . drawable . share _ location _ selector , shareMenuOCL ) ) ; < nl > + } catch ( ClassNotFoundException e ) { < nl > + / / ignore < nl > + } < nl > + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ video ) , R . id . share _ video , R . drawable . share _ video _ selector , shareMenuOCL ) ) ; < nl > + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ contact ) , R . id . share _ contact , R . drawable . share _ contact _ selector , shareMenuOCL ) ) ; < nl > < nl > - View shareItem = getLayoutInflater ( ) . inflate ( R . layout . share _ menu _ item , null ) ; < nl > + ArrayList < ShareMenuField > customMenuFields = ActorSDK . sharedActor ( ) . getDelegate ( ) . addCustomShareMenuFields ( ) ; < nl > + if ( customMenuFields ! = null ) { < nl > + menuFields . addAll ( customMenuFields ) ; < nl > + } < nl > < nl > - TextView title = ( TextView ) shareItem . findViewById ( R . id . title ) ; < nl > - title . setText ( f . getTitle ( ) ) ; < nl > + if ( menuFields . size ( ) % 2 ! = 0 ) { < nl > + menuFields . add ( new ShareMenuField ( R . drawable . attach _ hide2 , < nl > + ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , < nl > + " " , < nl > + new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > < nl > - ImageView icon = ( ImageView ) shareItem . findViewById ( R . id . icon ) ; < nl > - icon . setClickable ( true ) ; < nl > + } < nl > + } ) ) ; < nl > + } < nl > + FrameLayout row = ( FrameLayout ) findViewById ( R . id . share _ row _ one ) ; < nl > + findViewById ( R . id . share _ menu _ container ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > + boolean first = true ; < nl > + int menuItemSize = Screen . dp ( 80 ) ; < nl > + int screenWidth = getResources ( ) . getConfiguration ( ) . orientation = = Configuration . ORIENTATION _ PORTRAIT ? Screen . getWidth ( ) : Screen . getHeight ( ) ; < nl > + int distance = screenWidth / ( menuFields . size ( ) / 2 + menuFields . size ( ) % 2 ) ; < nl > + int initialMargin = distance / 2 - menuItemSize / 2 ; < nl > + int marginFromStart = initialMargin ; < nl > + int secondRowTopMargin = Screen . dp ( 80 ) ; < nl > + int shareIconSize = Screen . dp ( 60 ) ; < nl > + < nl > + for ( int i = 0 ; i < menuFields . size ( ) ; i + + ) { < nl > + ShareMenuField f = menuFields . get ( i ) ; < nl > + < nl > + LinearLayout shareItem = new LinearLayout ( this ) ; < nl > + shareItem . setOrientation ( LinearLayout . VERTICAL ) ; < nl > + shareItem . setGravity ( Gravity . CENTER _ HORIZONTAL ) ; < nl > + < nl > + TextView title = new TextView ( this ) ; < nl > + title . setGravity ( Gravity . CENTER ) ; < nl > + title . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextPrimaryColor ( ) ) ; < nl > + title . setText ( f . getTitle ( ) ) ; < nl > + < nl > + ImageView icon = new ImageView ( this ) ; < nl > + icon . setClickable ( true ) ; < nl > + if ( f . getSelector ( ) ! = 0 ) { < nl > + icon . setBackgroundResource ( f . getSelector ( ) ) ; < nl > + } else { < nl > icon . setBackgroundDrawable ( ShareMenuButtonFactory . get ( f . getColor ( ) , this ) ) ; < nl > - < nl > + icon . setScaleType ( ImageView . ScaleType . CENTER _ INSIDE ) ; < nl > icon . setImageResource ( f . getIcon ( ) ) ; < nl > + } < nl > < nl > - View . OnClickListener l = new View . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( View v ) { < nl > - hideShare ( ) ; < nl > - f . getOnClickListener ( ) . onClick ( shareItem ) ; < nl > - } < nl > - } ; < nl > - icon . setOnClickListener ( l ) ; < nl > + shareItem . addView ( icon , shareIconSize , shareIconSize ) ; < nl > + shareItem . addView ( title ) ; < nl > < nl > - if ( i = = customFields . size ( ) - 1 ) { < nl > - menuIconToChange = icon ; < nl > - menuTitleToChange = title ; < nl > - defaultSendOcl = l ; < nl > + View . OnClickListener l = new View . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( View v ) { < nl > + hideShare ( ) ; < nl > + f . getOnClickListener ( ) . onClick ( icon ) ; < nl > } < nl > + } ; < nl > + icon . setId ( f . getId ( ) ) ; < nl > + icon . setOnClickListener ( l ) ; < nl > < nl > - row . addView ( shareItem , params ) ; < nl > + FrameLayout . LayoutParams params = new FrameLayout . LayoutParams ( menuItemSize , menuItemSize ) ; < nl > + params . setMargins ( marginFromStart , first ? 0 : secondRowTopMargin , initialMargin , 0 ) ; < nl > < nl > - first = ! first ; < nl > - } < nl > + if ( i = = menuFields . size ( ) - 1 ) { < nl > + menuIconToChange = icon ; < nl > + menuTitleToChange = title ; < nl > + defaultSendOcl = l ; < nl > < nl > + params . setMargins ( marginFromStart , first ? 0 : secondRowTopMargin , 0 , 0 ) ; < nl > + < nl > + } < nl > + row . addView ( shareItem , params ) ; < nl > + if ( ! first ) { < nl > + marginFromStart + = distance ; < nl > + } < nl > + first = ! first ; < nl > } < nl > < nl > menuIconToChange . setTag ( R . id . icon , ( ( ImageView ) menuIconToChange ) . getDrawable ( ) ) ; < nl > @ @ - 503 , 9 + 521 , 9 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > try { < nl > Class . forName ( " com . google . android . gms . maps . GoogleMap " ) ; < nl > } catch ( ClassNotFoundException e ) { < nl > - shareLocation . setVisibility ( View . GONE ) ; < nl > - findViewById ( R . id . share _ hide ) . setVisibility ( View . VISIBLE ) ; < nl > - findViewById ( R . id . location _ text ) . setVisibility ( View . INVISIBLE ) ; < nl > + / / shareLocation . setVisibility ( View . GONE ) ; < nl > + / / findViewById ( R . id . share _ hide ) . setVisibility ( View . VISIBLE ) ; < nl > + / / findViewById ( R . id . location _ text ) . setVisibility ( View . INVISIBLE ) ; < nl > } < nl > < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java < nl > index 221df62 . . ff9c942 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java < nl > @ @ - 5 , 6 + 5 , 8 @ @ import android . view . View ; < nl > public class ShareMenuField { < nl > int icon ; < nl > int color ; < nl > + int selector ; < nl > + int id ; < nl > String title ; < nl > View . OnClickListener onClickListener ; < nl > < nl > @ @ - 15 , 6 + 17 , 13 @ @ public class ShareMenuField { < nl > this . onClickListener = onClickListener ; < nl > } < nl > < nl > + public ShareMenuField ( String title , int id , int selector , View . OnClickListener onClickListener ) { < nl > + this . title = title ; < nl > + this . selector = selector ; < nl > + this . onClickListener = onClickListener ; < nl > + this . id = id ; < nl > + } < nl > + < nl > public int getIcon ( ) { < nl > return icon ; < nl > } < nl > @ @ - 27 , 6 + 36 , 14 @ @ public class ShareMenuField { < nl > return title ; < nl > } < nl > < nl > + public int getSelector ( ) { < nl > + return selector ; < nl > + } < nl > + < nl > + public int getId ( ) { < nl > + return id ; < nl > + } < nl > + < nl > public View . OnClickListener getOnClickListener ( ) { < nl > return onClickListener ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > index 56c2e53 . . f81d116 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > @ @ - 2 , 171 + 2 , 22 @ @ < nl > < LinearLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " < nl > xmlns : tools = " http : / / schemas . android . com / tools " < nl > android : layout _ width = " match _ parent " < nl > - android : layout _ height = " 245dp " < nl > + android : layout _ height = " 232dp " < nl > android : layout _ above = " @ + id / fl _ send _ panel " < nl > - android : id = " @ + id / share _ container " < nl > android : visibility = " invisible " < nl > android : orientation = " vertical " < nl > - android : gravity = " bottom " < nl > + android : gravity = " bottom | center _ horizontal " < nl > android : background = " @ android : color / transparent " < nl > tools : showIn = " @ layout / activity _ dialog " > < nl > < nl > - < ImageView < nl > - android : layout _ width = " fill _ parent " < nl > - android : layout _ height = " 2dp " < nl > - android : scaleType = " fitXY " < nl > - android : src = " @ drawable / conv _ field _ shadow " / > < nl > - < nl > < android . support . v7 . widget . RecyclerView < nl > android : id = " @ + id / fast _ share " < nl > android : layout _ width = " match _ parent " < nl > android : layout _ height = " @ dimen / fast _ share _ size " / > < nl > < nl > - < TableLayout < nl > - android : id = " @ + id / share _ menu " < nl > - android : paddingTop = " 5dp " < nl > - android : layout _ gravity = " bottom " < nl > + < FrameLayout < nl > + android : id = " @ + id / share _ row _ one " < nl > android : layout _ width = " wrap _ content " < nl > - android : layout _ height = " wrap _ content " < nl > - android : gravity = " center _ vertical " < nl > - android : stretchColumns = " * " > < nl > - < nl > - < TableRow android : id = " @ + id / share _ row _ one " > < nl > - < nl > - < LinearLayout < nl > - android : gravity = " center _ horizontal " < nl > - android : layout _ width = " 0dp " < nl > - android : layout _ weight = " 1 " < nl > - android : layout _ height = " wrap _ content " < nl > - android : orientation = " vertical " > < nl > - < nl > - < Button < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ camera " < nl > - android : background = " @ drawable / share _ camera _ selector " / > < nl > - < nl > - < TextView < nl > - android : layout _ width = " wrap _ content " < nl > - android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ camera " / > < nl > - < / LinearLayout > < nl > - < nl > - < LinearLayout < nl > - android : gravity = " center _ horizontal " < nl > - android : layout _ width = " 0dp " < nl > - android : layout _ weight = " 1 " < nl > - android : layout _ height = " wrap _ content " < nl > - android : orientation = " vertical " > < nl > - < nl > - < Button < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ gallery " < nl > - android : background = " @ drawable / share _ gallery _ selector " / > < nl > - < nl > - < TextView < nl > - android : layout _ width = " wrap _ content " < nl > - android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ gallery " / > < nl > - < nl > - < / LinearLayout > < nl > - < nl > - < LinearLayout < nl > - android : layout _ width = " 0dp " < nl > - android : layout _ weight = " 1 " < nl > - android : gravity = " center _ horizontal " < nl > - android : layout _ height = " wrap _ content " < nl > - android : orientation = " vertical " > < nl > - < nl > - < Button < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ video " < nl > - android : background = " @ drawable / share _ video _ selector " / > < nl > - < nl > - < TextView < nl > - android : layout _ width = " wrap _ content " < nl > - android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ video " / > < nl > - < / LinearLayout > < nl > - < nl > - < / TableRow > < nl > - < nl > - < TableRow android : id = " @ + id / share _ row _ two " > < nl > - < nl > - < LinearLayout < nl > - android : layout _ width = " 0dp " < nl > - android : layout _ weight = " 1 " < nl > - android : gravity = " center _ horizontal " < nl > - android : layout _ height = " wrap _ content " < nl > - android : orientation = " vertical " > < nl > - < nl > - < Button < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ file " < nl > - android : background = " @ drawable / share _ file _ selector " / > < nl > - < nl > - < TextView < nl > - android : layout _ width = " wrap _ content " < nl > - android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ file " / > < nl > - < nl > - < / LinearLayout > < nl > - < nl > - < LinearLayout < nl > - android : gravity = " center _ horizontal " < nl > - android : layout _ width = " 0dp " < nl > - android : layout _ weight = " 1 " < nl > - android : layout _ height = " wrap _ content " < nl > - android : orientation = " vertical " > < nl > - < nl > - < Button < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ location " < nl > - android : background = " @ drawable / share _ location _ selector " / > < nl > - < nl > - < ImageButton < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : id = " @ + id / share _ hide " < nl > - android : background = " @ drawable / share _ hide _ selector " < nl > - android : src = " @ drawable / attach _ hide2 " / > < nl > - < nl > - < TextView < nl > - android : id = " @ + id / location _ text " < nl > - android : layout _ width = " wrap _ content " < nl > - android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ location " / > < nl > - < / LinearLayout > < nl > - < nl > - < LinearLayout < nl > - android : layout _ width = " 0dp " < nl > - android : layout _ weight = " 1 " < nl > - android : gravity = " center _ horizontal " < nl > - android : layout _ height = " wrap _ content " < nl > - android : orientation = " vertical " > < nl > - < nl > - < nl > - < ImageView < nl > - android : scaleType = " centerInside " < nl > - android : clickable = " true " < nl > - android : layout _ width = " @ dimen / share _ btn _ size " < nl > - android : layout _ height = " @ dimen / share _ btn _ size " < nl > - android : src = " @ drawable / ic _ person _ white _ 36dp " < nl > - android : id = " @ + id / share _ contact " / > < nl > - < nl > - < TextView < nl > - android : id = " @ + id / contact _ text " < nl > - android : layout _ width = " wrap _ content " < nl > - android : layout _ height = " wrap _ content " < nl > - android : text = " @ string / share _ menu _ contact " / > < nl > - < nl > - < / LinearLayout > < nl > - < nl > - < / TableRow > < nl > - < / TableLayout > < nl > + android : layout _ height = " fill _ parent " / > < nl > < nl > < / LinearLayout > < nl > \ No newline at end of file < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > index fe855ab . . d4afbde 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > @ @ - 91 , 7 + 91 , 16 @ @ < nl > android : layout _ height = " match _ parent " < nl > android : visibility = " gone " / > < nl > < nl > - < include layout = " @ layout / share _ menu " / > < nl > + < include < nl > + layout = " @ layout / share _ menu " < nl > + android : id = " @ + id / share _ menu _ container " / > < nl > + < nl > + < ImageView < nl > + android : layout _ width = " fill _ parent " < nl > + android : layout _ height = " 2dp " < nl > + android : scaleType = " fitXY " < nl > + android : layout _ above = " @ id / share _ menu _ container " < nl > + android : src = " @ drawable / conv _ field _ shadow " / > < nl > < nl > < FrameLayout < nl > android : id = " @ + id / fl _ send _ panel " < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ids . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ids . xml < nl > new file mode 100644 < nl > index 0000000 . . f0ffc3b < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ids . xml < nl > @ @ - 0 , 0 + 1 , 10 @ @ < nl > + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > < nl > + < resources > < nl > + < item type = " id " name = " share _ gallery " / > < nl > + < item type = " id " name = " share _ camera " / > < nl > + < item type = " id " name = " share _ video " / > < nl > + < item type = " id " name = " share _ file " / > < nl > + < item type = " id " name = " share _ location " / > < nl > + < item type = " id " name = " share _ contact " / > < nl > + < item type = " id " name = " share _ hide " / > < nl > + < / resources > < nl > \ No newline at end of file

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / NotificationsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / NotificationsFragment . java 
 index 419ead7 . . 5511a2b 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / NotificationsFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / NotificationsFragment . java 
 @ @ - 33 , 22 + 33 , 13 @ @ public class NotificationsFragment extends BaseFragment { 
 public View onCreateView ( LayoutInflater inflater , ViewGroup container , Bundle savedInstanceState ) { 
 View res = inflater . inflate ( R . layout . fr _ settings _ notifications , container , false ) ; 
 res . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 - res . findViewById ( R . id . divider ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 - res . findViewById ( R . id . divider1 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 - res . findViewById ( R . id . divider2 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 - res . findViewById ( R . id . divider3 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 - res . findViewById ( R . id . divider4 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 - res . findViewById ( R . id . divider5 ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getDividerColor ( ) ) ; 
 
 / / Conversation tone 
 final CheckBox enableTones = ( CheckBox ) res . findViewById ( R . id . enableConversationTones ) ; 
 enableTones . setChecked ( messenger ( ) . isConversationTonesEnabled ( ) ) ; 
 - View . OnClickListener enableTonesListener = new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - messenger ( ) . changeConversationTonesEnabled ( ! messenger ( ) . isConversationTonesEnabled ( ) ) ; 
 - enableTones . setChecked ( messenger ( ) . isConversationTonesEnabled ( ) ) ; 
 - } 
 + View . OnClickListener enableTonesListener = v - > { 
 + messenger ( ) . changeConversationTonesEnabled ( ! messenger ( ) . isConversationTonesEnabled ( ) ) ; 
 + enableTones . setChecked ( messenger ( ) . isConversationTonesEnabled ( ) ) ; 
 } ; 
 ActorStyle style = ActorSDK . sharedActor ( ) . style ; 
 ( ( TextView ) res . findViewById ( R . id . settings _ conversation _ tones _ title ) ) . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 @ @ - 59 , 12 + 50 , 9 @ @ public class NotificationsFragment extends BaseFragment { 
 / / Vibration 
 final CheckBox enableVibration = ( CheckBox ) res . findViewById ( R . id . enableVibration ) ; 
 enableVibration . setChecked ( messenger ( ) . isNotificationVibrationEnabled ( ) ) ; 
 - View . OnClickListener enableVibrationListener = new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - messenger ( ) . changeNotificationVibrationEnabled ( ! messenger ( ) . isNotificationVibrationEnabled ( ) ) ; 
 - enableVibration . setChecked ( messenger ( ) . isNotificationVibrationEnabled ( ) ) ; 
 - } 
 + View . OnClickListener enableVibrationListener = v - > { 
 + messenger ( ) . changeNotificationVibrationEnabled ( ! messenger ( ) . isNotificationVibrationEnabled ( ) ) ; 
 + enableVibration . setChecked ( messenger ( ) . isNotificationVibrationEnabled ( ) ) ; 
 } ; 
 enableVibration . setOnClickListener ( enableVibrationListener ) ; 
 res . findViewById ( R . id . vibrationCont ) . setOnClickListener ( enableVibrationListener ) ; 
 @ @ - 74 , 12 + 62 , 9 @ @ public class NotificationsFragment extends BaseFragment { 
 / / Group 
 final CheckBox enableGroup = ( CheckBox ) res . findViewById ( R . id . enableGroup ) ; 
 enableGroup . setChecked ( messenger ( ) . isGroupNotificationsEnabled ( ) ) ; 
 - View . OnClickListener enableGroupListener = new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - messenger ( ) . changeGroupNotificationsEnabled ( ! messenger ( ) . isGroupNotificationsEnabled ( ) ) ; 
 - enableGroup . setChecked ( messenger ( ) . isGroupNotificationsEnabled ( ) ) ; 
 - } 
 + View . OnClickListener enableGroupListener = v - > { 
 + messenger ( ) . changeGroupNotificationsEnabled ( ! messenger ( ) . isGroupNotificationsEnabled ( ) ) ; 
 + enableGroup . setChecked ( messenger ( ) . isGroupNotificationsEnabled ( ) ) ; 
 } ; 
 enableGroup . setOnClickListener ( enableGroupListener ) ; 
 res . findViewById ( R . id . groupCont ) . setOnClickListener ( enableGroupListener ) ; 
 @ @ - 89 , 12 + 74 , 9 @ @ public class NotificationsFragment extends BaseFragment { 
 / / Mentions 
 final CheckBox enableGroupMentions = ( CheckBox ) res . findViewById ( R . id . enableGroupMentions ) ; 
 enableGroupMentions . setChecked ( messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; 
 - View . OnClickListener enableGroupMentionsListener = new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - messenger ( ) . changeGroupNotificationsOnlyMentionsEnabled ( ! messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; 
 - enableGroupMentions . setChecked ( messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; 
 - } 
 + View . OnClickListener enableGroupMentionsListener = v - > { 
 + messenger ( ) . changeGroupNotificationsOnlyMentionsEnabled ( ! messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; 
 + enableGroupMentions . setChecked ( messenger ( ) . isGroupNotificationsOnlyMentionsEnabled ( ) ) ; 
 } ; 
 enableGroupMentions . setOnClickListener ( enableGroupMentionsListener ) ; 
 res . findViewById ( R . id . groupMentionsCont ) . setOnClickListener ( enableGroupMentionsListener ) ; 
 @ @ - 104 , 12 + 86 , 9 @ @ public class NotificationsFragment extends BaseFragment { 
 / / Names and messages 
 final CheckBox enableText = ( CheckBox ) res . findViewById ( R . id . enableTitles ) ; 
 enableText . setChecked ( messenger ( ) . isShowNotificationsText ( ) ) ; 
 - View . OnClickListener enableTextListener = new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - messenger ( ) . changeShowNotificationTextEnabled ( ! messenger ( ) . isShowNotificationsText ( ) ) ; 
 - enableText . setChecked ( messenger ( ) . isShowNotificationsText ( ) ) ; 
 - } 
 + View . OnClickListener enableTextListener = v - > { 
 + messenger ( ) . changeShowNotificationTextEnabled ( ! messenger ( ) . isShowNotificationsText ( ) ) ; 
 + enableText . setChecked ( messenger ( ) . isShowNotificationsText ( ) ) ; 
 } ; 
 enableText . setOnClickListener ( enableTextListener ) ; 
 res . findViewById ( R . id . titlesCont ) . setOnClickListener ( enableTextListener ) ; 
 @ @ - 119 , 20 + 98 , 17 @ @ public class NotificationsFragment extends BaseFragment { 
 / / Sound 
 final CheckBox enableSound = ( CheckBox ) res . findViewById ( R . id . enableSound ) ; 
 enableSound . setChecked ( messenger ( ) . isNotificationSoundEnabled ( ) ) ; 
 - View . OnClickListener enableSoundListener = new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - messenger ( ) . changeNotificationSoundEnabled ( ! messenger ( ) . isNotificationSoundEnabled ( ) ) ; 
 - enableSound . setChecked ( messenger ( ) . isNotificationSoundEnabled ( ) ) ; 
 - 
 - / / show / hide sound picker 
 - View cont = res . findViewById ( R . id . soundPickerCont ) ; 
 - View div = res . findViewById ( R . id . divider5 ) ; 
 - if ( messenger ( ) . isNotificationSoundEnabled ( ) ) { 
 - ViewUtils . showViews ( cont , div ) ; 
 - } else { 
 - ViewUtils . goneViews ( cont , div ) ; 
 - } 
 + View . OnClickListener enableSoundListener = v - > { 
 + messenger ( ) . changeNotificationSoundEnabled ( ! messenger ( ) . isNotificationSoundEnabled ( ) ) ; 
 + enableSound . setChecked ( messenger ( ) . isNotificationSoundEnabled ( ) ) ; 
 + 
 + / / show / hide sound picker 
 + View cont = res . findViewById ( R . id . soundPickerCont ) ; 
 + View div = res . findViewById ( R . id . divider ) ; 
 + if ( messenger ( ) . isNotificationSoundEnabled ( ) ) { 
 + ViewUtils . showViews ( cont , div ) ; 
 + } else { 
 + ViewUtils . goneViews ( cont , div ) ; 
 } 
 } ; 
 enableSound . setOnClickListener ( enableSoundListener ) ; 
 @ @ - 143 , 32 + 119 , 29 @ @ public class NotificationsFragment extends BaseFragment { 
 / / Sound picker 
 notificationPreferences = getActivity ( ) . getSharedPreferences ( " notifications " , Context . MODE _ PRIVATE ) ; 
 notificationPreferencesEditor = notificationPreferences . edit ( ) ; 
 - View . OnClickListener soundPickerListener = new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - Intent intent = new Intent ( RingtoneManager . ACTION _ RINGTONE _ PICKER ) ; 
 - intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ TYPE , RingtoneManager . TYPE _ NOTIFICATION ) ; 
 - intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ SHOW _ DEFAULT , true ) ; 
 - intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ DEFAULT _ URI , RingtoneManager . getDefaultUri ( RingtoneManager . TYPE _ NOTIFICATION ) ) ; 
 - 
 - Uri currentSound = null ; 
 - String defaultPath = null ; 
 - Uri defaultUri = Settings . System . DEFAULT _ NOTIFICATION _ URI ; 
 - if ( defaultUri ! = null ) { 
 - defaultPath = defaultUri . getPath ( ) ; 
 - } 
 + View . OnClickListener soundPickerListener = v - > { 
 + Intent intent = new Intent ( RingtoneManager . ACTION _ RINGTONE _ PICKER ) ; 
 + intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ TYPE , RingtoneManager . TYPE _ NOTIFICATION ) ; 
 + intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ SHOW _ DEFAULT , true ) ; 
 + intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ DEFAULT _ URI , RingtoneManager . getDefaultUri ( RingtoneManager . TYPE _ NOTIFICATION ) ) ; 
 + 
 + Uri currentSound = null ; 
 + String defaultPath = null ; 
 + Uri defaultUri = Settings . System . DEFAULT _ NOTIFICATION _ URI ; 
 + if ( defaultUri ! = null ) { 
 + defaultPath = defaultUri . getPath ( ) ; 
 + } 
 
 - String path = notificationPreferences . getString ( " globalSound " , defaultPath ) ; 
 - if ( path ! = null & & ! path . equals ( " none " ) ) { 
 - if ( path . equals ( defaultPath ) ) { 
 - currentSound = defaultUri ; 
 - } else { 
 - currentSound = Uri . parse ( path ) ; 
 - } 
 + String path = notificationPreferences . getString ( " globalSound " , defaultPath ) ; 
 + if ( path ! = null & & ! path . equals ( " none " ) ) { 
 + if ( path . equals ( defaultPath ) ) { 
 + currentSound = defaultUri ; 
 + } else { 
 + currentSound = Uri . parse ( path ) ; 
 } 
 - intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ EXISTING _ URI , currentSound ) ; 
 - startActivityForResult ( intent , SOUND _ PICKER _ REQUEST _ CODE ) ; 
 } 
 + intent . putExtra ( RingtoneManager . EXTRA _ RINGTONE _ EXISTING _ URI , currentSound ) ; 
 + startActivityForResult ( intent , SOUND _ PICKER _ REQUEST _ CODE ) ; 
 } ; 
 res . findViewById ( R . id . soundPickerCont ) . setOnClickListener ( soundPickerListener ) ; 
 ( ( TextView ) res . findViewById ( R . id . settings _ sound _ picker _ title ) ) . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fr _ settings _ notifications . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fr _ settings _ notifications . xml 
 index bb930e2 . . cf6a7aa 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fr _ settings _ notifications . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fr _ settings _ notifications . xml 
 @ @ - 57 , 10 + 57 , 9 @ @ 
 android : gravity = " center _ vertical " / > 
 < / LinearLayout > 
 
 - < View 
 - android : id = " @ + id / divider1 " 
 + < im . actor . sdk . view . DividerView 
 android : layout _ width = " match _ parent " 
 - android : layout _ height = " @ dimen / div _ size " / > 
 + android : layout _ height = " @ dimen / div _ size " / > 
 
 < LinearLayout 
 android : id = " @ + id / vibrationCont " 
 @ @ - 104 , 10 + 103 , 9 @ @ 
 android : gravity = " center _ vertical " / > 
 < / LinearLayout > 
 
 - < View 
 - android : id = " @ + id / divider2 " 
 + < im . actor . sdk . view . DividerView 
 android : layout _ width = " match _ parent " 
 - android : layout _ height = " @ dimen / div _ size " / > 
 + android : layout _ height = " @ dimen / div _ size " / > 
 
 < LinearLayout 
 android : id = " @ + id / groupCont " 
 @ @ - 151 , 10 + 149 , 9 @ @ 
 android : gravity = " center _ vertical " / > 
 < / LinearLayout > 
 
 - < View 
 - android : id = " @ + id / divider3 " 
 + < im . actor . sdk . view . DividerView 
 android : layout _ width = " match _ parent " 
 - android : layout _ height = " @ dimen / div _ size " / > 
 + android : layout _ height = " @ dimen / div _ size " / > 
 
 < LinearLayout 
 android : id = " @ + id / groupMentionsCont " 
 @ @ - 198 , 10 + 195 , 9 @ @ 
 android : gravity = " center _ vertical " / > 
 < / LinearLayout > 
 
 - < View 
 - android : id = " @ + id / divider4 " 
 + < im . actor . sdk . view . DividerView 
 android : layout _ width = " match _ parent " 
 - android : layout _ height = " @ dimen / div _ size " / > 
 + android : layout _ height = " @ dimen / div _ size " / > 
 
 < LinearLayout 
 android : id = " @ + id / titlesCont " 
 @ @ - 244 , 10 + 240 , 9 @ @ 
 android : gravity = " center _ vertical " / > 
 < / LinearLayout > 
 
 - < View 
 - android : id = " @ + id / divider " 
 + < im . actor . sdk . view . DividerView 
 android : layout _ width = " match _ parent " 
 - android : layout _ height = " @ dimen / div _ size " / > 
 + android : layout _ height = " @ dimen / div _ size " / > 
 
 < LinearLayout 
 android : id = " @ + id / soundCont " 
 @ @ - 291 , 10 + 286 , 10 @ @ 
 android : gravity = " center _ vertical " / > 
 < / LinearLayout > 
 
 - < View 
 - android : id = " @ + id / divider5 " 
 + < im . actor . sdk . view . DividerView 
 + android : id = " @ + id / divider " 
 android : layout _ width = " match _ parent " 
 - android : layout _ height = " @ dimen / div _ size " / > 
 + android : layout _ height = " @ dimen / div _ size " / > 
 
 < LinearLayout 
 android : id = " @ + id / soundPickerCont "

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 index a64e8f5 . . 6f78394 100644 
 - - - a / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 + + + b / actor - sdk / sdk - core - android / android - app / src / main / java / im / actor / Application . java 
 @ @ - 76 , 17 + 76 , 35 @ @ public class Application extends ActorSDKApplication { 
 / / } 
 
 / / 
 - / / @ Override 
 - / / public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { 
 - / / ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; 
 - / / shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { 
 - / / @ Override 
 - / / public void onClick ( View v ) { 
 - / / Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 - / / } 
 - / / } ) ) ; 
 - / / return shareMenuFields ; 
 - / / } 
 + @ Override 
 + public ArrayList < ShareMenuField > addCustomShareMenuFields ( ) { 
 + ArrayList < ShareMenuField > shareMenuFields = new ArrayList < > ( ) ; 
 + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getAccentColor ( ) , " lol " , new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 + } 
 + } ) ) ; 
 + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getMainColor ( ) , " lol " , new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 + } 
 + } ) ) ; 
 + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getDividerColor ( ) , " lol " , new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 + } 
 + } ) ) ; 
 + shareMenuFields . add ( new ShareMenuField ( R . drawable . conv _ location _ icon , ActorSDK . sharedActor ( ) . style . getConvLikeColor ( ) , " lol " , new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + Toast . makeText ( v . getContext ( ) , " Hey " , Toast . LENGTH _ LONG ) . show ( ) ; 
 + } 
 + } ) ) ; 
 + return shareMenuFields ; 
 + } 
 
 / / @ Override 
 / / public BaseGroupInfoActivity getGroupInfoIntent ( int gid ) { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index ffef87e . . 06abf6e 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 35 , 6 + 35 , 7 @ @ import android . text . Editable ; 
 import android . text . Spannable ; 
 import android . text . TextWatcher ; 
 import android . util . Base64 ; 
 + import android . view . Gravity ; 
 import android . view . LayoutInflater ; 
 import android . view . Menu ; 
 import android . view . MenuItem ; 
 @ @ - 339 , 10 + 340 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } ) ; 
 
 / / share menu 
 - TableLayout shareMenu = ( TableLayout ) findViewById ( R . id . share _ menu ) ; 
 - shareMenu . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 findViewById ( R . id . fast _ share ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 - shareMenuCaontainer = findViewById ( R . id . share _ container ) ; 
 + shareMenuCaontainer = findViewById ( R . id . share _ menu _ container ) ; 
 shareMenuCaontainer . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 @ @ - 358 , 11 + 357 , 6 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } 
 } ) ; 
 
 - final TextView contactText = ( TextView ) findViewById ( R . id . contact _ text ) ; 
 - final ImageView shareContact = ( ImageView ) findViewById ( R . id . share _ contact ) ; 
 - shareContact . setBackgroundDrawable ( ShareMenuButtonFactory . get ( 0xff3ec2fa , this ) ) ; 
 - ; 
 - findViewById ( R . id . share _ hide ) . setVisibility ( View . GONE ) ; 
 
 View . OnClickListener shareMenuOCL = new View . OnClickListener ( ) { 
 @ Override 
 @ @ - 424 , 74 + 418 , 98 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } ; 
 defaultSendOcl = shareMenuOCL ; 
 
 - findViewById ( R . id . share _ gallery ) . setOnClickListener ( shareMenuOCL ) ; 
 - findViewById ( R . id . share _ video ) . setOnClickListener ( shareMenuOCL ) ; 
 - findViewById ( R . id . share _ camera ) . setOnClickListener ( shareMenuOCL ) ; 
 - shareContact . setOnClickListener ( shareMenuOCL ) ; 
 - findViewById ( R . id . share _ file ) . setOnClickListener ( shareMenuOCL ) ; 
 - findViewById ( R . id . share _ hide ) . setOnClickListener ( shareMenuOCL ) ; 
 - View shareLocation = findViewById ( R . id . share _ location ) ; 
 - shareLocation . setOnClickListener ( shareMenuOCL ) ; 
 - ActorSDK . sharedActor ( ) . getDelegate ( ) . onShareMenuCreated ( shareMenu ) ; 
 - 
 - menuIconToChange = shareContact ; 
 - menuTitleToChange = contactText ; 
 - 
 - ArrayList < ShareMenuField > customFields = ActorSDK . sharedActor ( ) . getDelegate ( ) . addCustomShareMenuFields ( ) ; 
 - 
 - if ( customFields ! = null & & customFields . size ( ) > 0 ) { 
 - if ( customFields . size ( ) % 2 ! = 0 ) { 
 - customFields . add ( new ShareMenuField ( R . drawable . attach _ hide2 , 
 - ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , 
 - " " , 
 - new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - 
 - } 
 - } ) ) ; 
 - } 
 - TableRow rowOne = ( TableRow ) shareMenu . findViewById ( R . id . share _ row _ one ) ; 
 - TableRow rowTwo = ( TableRow ) shareMenu . findViewById ( R . id . share _ row _ two ) ; 
 - boolean first = true ; 
 - TableRow row ; 
 - TableRow . LayoutParams params = new TableRow . LayoutParams ( 0 , ViewGroup . LayoutParams . WRAP _ CONTENT , 1 ) ; 
 + ArrayList < ShareMenuField > menuFields = new ArrayList < > ( ) ; 
 
 - for ( int i = 0 ; i < customFields . size ( ) ; i + + ) { 
 - ShareMenuField f = customFields . get ( i ) ; 
 - row = first ? rowOne : rowTwo ; 
 + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ camera ) , R . id . share _ camera , R . drawable . share _ camera _ selector , shareMenuOCL ) ) ; 
 + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ file ) , R . id . share _ file , R . drawable . share _ file _ selector , shareMenuOCL ) ) ; 
 + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ gallery ) , R . id . share _ gallery , R . drawable . share _ gallery _ selector , shareMenuOCL ) ) ; 
 + try { 
 + Class . forName ( " com . google . android . gms . maps . GoogleMap " ) ; 
 + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ location ) , R . id . share _ location , R . drawable . share _ location _ selector , shareMenuOCL ) ) ; 
 + } catch ( ClassNotFoundException e ) { 
 + / / ignore 
 + } 
 + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ video ) , R . id . share _ video , R . drawable . share _ video _ selector , shareMenuOCL ) ) ; 
 + menuFields . add ( new ShareMenuField ( getString ( R . string . share _ menu _ contact ) , R . id . share _ contact , R . drawable . share _ contact _ selector , shareMenuOCL ) ) ; 
 
 - View shareItem = getLayoutInflater ( ) . inflate ( R . layout . share _ menu _ item , null ) ; 
 + ArrayList < ShareMenuField > customMenuFields = ActorSDK . sharedActor ( ) . getDelegate ( ) . addCustomShareMenuFields ( ) ; 
 + if ( customMenuFields ! = null ) { 
 + menuFields . addAll ( customMenuFields ) ; 
 + } 
 
 - TextView title = ( TextView ) shareItem . findViewById ( R . id . title ) ; 
 - title . setText ( f . getTitle ( ) ) ; 
 + if ( menuFields . size ( ) % 2 ! = 0 ) { 
 + menuFields . add ( new ShareMenuField ( R . drawable . attach _ hide2 , 
 + ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) , 
 + " " , 
 + new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 
 - ImageView icon = ( ImageView ) shareItem . findViewById ( R . id . icon ) ; 
 - icon . setClickable ( true ) ; 
 + } 
 + } ) ) ; 
 + } 
 + FrameLayout row = ( FrameLayout ) findViewById ( R . id . share _ row _ one ) ; 
 + findViewById ( R . id . share _ menu _ container ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 + boolean first = true ; 
 + int menuItemSize = Screen . dp ( 80 ) ; 
 + int screenWidth = getResources ( ) . getConfiguration ( ) . orientation = = Configuration . ORIENTATION _ PORTRAIT ? Screen . getWidth ( ) : Screen . getHeight ( ) ; 
 + int distance = screenWidth / ( menuFields . size ( ) / 2 + menuFields . size ( ) % 2 ) ; 
 + int initialMargin = distance / 2 - menuItemSize / 2 ; 
 + int marginFromStart = initialMargin ; 
 + int secondRowTopMargin = Screen . dp ( 80 ) ; 
 + int shareIconSize = Screen . dp ( 60 ) ; 
 + 
 + for ( int i = 0 ; i < menuFields . size ( ) ; i + + ) { 
 + ShareMenuField f = menuFields . get ( i ) ; 
 + 
 + LinearLayout shareItem = new LinearLayout ( this ) ; 
 + shareItem . setOrientation ( LinearLayout . VERTICAL ) ; 
 + shareItem . setGravity ( Gravity . CENTER _ HORIZONTAL ) ; 
 + 
 + TextView title = new TextView ( this ) ; 
 + title . setGravity ( Gravity . CENTER ) ; 
 + title . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextPrimaryColor ( ) ) ; 
 + title . setText ( f . getTitle ( ) ) ; 
 + 
 + ImageView icon = new ImageView ( this ) ; 
 + icon . setClickable ( true ) ; 
 + if ( f . getSelector ( ) ! = 0 ) { 
 + icon . setBackgroundResource ( f . getSelector ( ) ) ; 
 + } else { 
 icon . setBackgroundDrawable ( ShareMenuButtonFactory . get ( f . getColor ( ) , this ) ) ; 
 - 
 + icon . setScaleType ( ImageView . ScaleType . CENTER _ INSIDE ) ; 
 icon . setImageResource ( f . getIcon ( ) ) ; 
 + } 
 
 - View . OnClickListener l = new View . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( View v ) { 
 - hideShare ( ) ; 
 - f . getOnClickListener ( ) . onClick ( shareItem ) ; 
 - } 
 - } ; 
 - icon . setOnClickListener ( l ) ; 
 + shareItem . addView ( icon , shareIconSize , shareIconSize ) ; 
 + shareItem . addView ( title ) ; 
 
 - if ( i = = customFields . size ( ) - 1 ) { 
 - menuIconToChange = icon ; 
 - menuTitleToChange = title ; 
 - defaultSendOcl = l ; 
 + View . OnClickListener l = new View . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( View v ) { 
 + hideShare ( ) ; 
 + f . getOnClickListener ( ) . onClick ( icon ) ; 
 } 
 + } ; 
 + icon . setId ( f . getId ( ) ) ; 
 + icon . setOnClickListener ( l ) ; 
 
 - row . addView ( shareItem , params ) ; 
 + FrameLayout . LayoutParams params = new FrameLayout . LayoutParams ( menuItemSize , menuItemSize ) ; 
 + params . setMargins ( marginFromStart , first ? 0 : secondRowTopMargin , initialMargin , 0 ) ; 
 
 - first = ! first ; 
 - } 
 + if ( i = = menuFields . size ( ) - 1 ) { 
 + menuIconToChange = icon ; 
 + menuTitleToChange = title ; 
 + defaultSendOcl = l ; 
 
 + params . setMargins ( marginFromStart , first ? 0 : secondRowTopMargin , 0 , 0 ) ; 
 + 
 + } 
 + row . addView ( shareItem , params ) ; 
 + if ( ! first ) { 
 + marginFromStart + = distance ; 
 + } 
 + first = ! first ; 
 } 
 
 menuIconToChange . setTag ( R . id . icon , ( ( ImageView ) menuIconToChange ) . getDrawable ( ) ) ; 
 @ @ - 503 , 9 + 521 , 9 @ @ public class ChatActivity extends ActorEditTextActivity { 
 try { 
 Class . forName ( " com . google . android . gms . maps . GoogleMap " ) ; 
 } catch ( ClassNotFoundException e ) { 
 - shareLocation . setVisibility ( View . GONE ) ; 
 - findViewById ( R . id . share _ hide ) . setVisibility ( View . VISIBLE ) ; 
 - findViewById ( R . id . location _ text ) . setVisibility ( View . INVISIBLE ) ; 
 + / / shareLocation . setVisibility ( View . GONE ) ; 
 + / / findViewById ( R . id . share _ hide ) . setVisibility ( View . VISIBLE ) ; 
 + / / findViewById ( R . id . location _ text ) . setVisibility ( View . INVISIBLE ) ; 
 } 
 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java 
 index 221df62 . . ff9c942 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ShareMenuField . java 
 @ @ - 5 , 6 + 5 , 8 @ @ import android . view . View ; 
 public class ShareMenuField { 
 int icon ; 
 int color ; 
 + int selector ; 
 + int id ; 
 String title ; 
 View . OnClickListener onClickListener ; 
 
 @ @ - 15 , 6 + 17 , 13 @ @ public class ShareMenuField { 
 this . onClickListener = onClickListener ; 
 } 
 
 + public ShareMenuField ( String title , int id , int selector , View . OnClickListener onClickListener ) { 
 + this . title = title ; 
 + this . selector = selector ; 
 + this . onClickListener = onClickListener ; 
 + this . id = id ; 
 + } 
 + 
 public int getIcon ( ) { 
 return icon ; 
 } 
 @ @ - 27 , 6 + 36 , 14 @ @ public class ShareMenuField { 
 return title ; 
 } 
 
 + public int getSelector ( ) { 
 + return selector ; 
 + } 
 + 
 + public int getId ( ) { 
 + return id ; 
 + } 
 + 
 public View . OnClickListener getOnClickListener ( ) { 
 return onClickListener ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 index 56c2e53 . . f81d116 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 @ @ - 2 , 171 + 2 , 22 @ @ 
 < LinearLayout xmlns : android = " http : / / schemas . android . com / apk / res / android " 
 xmlns : tools = " http : / / schemas . android . com / tools " 
 android : layout _ width = " match _ parent " 
 - android : layout _ height = " 245dp " 
 + android : layout _ height = " 232dp " 
 android : layout _ above = " @ + id / fl _ send _ panel " 
 - android : id = " @ + id / share _ container " 
 android : visibility = " invisible " 
 android : orientation = " vertical " 
 - android : gravity = " bottom " 
 + android : gravity = " bottom | center _ horizontal " 
 android : background = " @ android : color / transparent " 
 tools : showIn = " @ layout / activity _ dialog " > 
 
 - < ImageView 
 - android : layout _ width = " fill _ parent " 
 - android : layout _ height = " 2dp " 
 - android : scaleType = " fitXY " 
 - android : src = " @ drawable / conv _ field _ shadow " / > 
 - 
 < android . support . v7 . widget . RecyclerView 
 android : id = " @ + id / fast _ share " 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " @ dimen / fast _ share _ size " / > 
 
 - < TableLayout 
 - android : id = " @ + id / share _ menu " 
 - android : paddingTop = " 5dp " 
 - android : layout _ gravity = " bottom " 
 + < FrameLayout 
 + android : id = " @ + id / share _ row _ one " 
 android : layout _ width = " wrap _ content " 
 - android : layout _ height = " wrap _ content " 
 - android : gravity = " center _ vertical " 
 - android : stretchColumns = " * " > 
 - 
 - < TableRow android : id = " @ + id / share _ row _ one " > 
 - 
 - < LinearLayout 
 - android : gravity = " center _ horizontal " 
 - android : layout _ width = " 0dp " 
 - android : layout _ weight = " 1 " 
 - android : layout _ height = " wrap _ content " 
 - android : orientation = " vertical " > 
 - 
 - < Button 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ camera " 
 - android : background = " @ drawable / share _ camera _ selector " / > 
 - 
 - < TextView 
 - android : layout _ width = " wrap _ content " 
 - android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ camera " / > 
 - < / LinearLayout > 
 - 
 - < LinearLayout 
 - android : gravity = " center _ horizontal " 
 - android : layout _ width = " 0dp " 
 - android : layout _ weight = " 1 " 
 - android : layout _ height = " wrap _ content " 
 - android : orientation = " vertical " > 
 - 
 - < Button 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ gallery " 
 - android : background = " @ drawable / share _ gallery _ selector " / > 
 - 
 - < TextView 
 - android : layout _ width = " wrap _ content " 
 - android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ gallery " / > 
 - 
 - < / LinearLayout > 
 - 
 - < LinearLayout 
 - android : layout _ width = " 0dp " 
 - android : layout _ weight = " 1 " 
 - android : gravity = " center _ horizontal " 
 - android : layout _ height = " wrap _ content " 
 - android : orientation = " vertical " > 
 - 
 - < Button 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ video " 
 - android : background = " @ drawable / share _ video _ selector " / > 
 - 
 - < TextView 
 - android : layout _ width = " wrap _ content " 
 - android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ video " / > 
 - < / LinearLayout > 
 - 
 - < / TableRow > 
 - 
 - < TableRow android : id = " @ + id / share _ row _ two " > 
 - 
 - < LinearLayout 
 - android : layout _ width = " 0dp " 
 - android : layout _ weight = " 1 " 
 - android : gravity = " center _ horizontal " 
 - android : layout _ height = " wrap _ content " 
 - android : orientation = " vertical " > 
 - 
 - < Button 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ file " 
 - android : background = " @ drawable / share _ file _ selector " / > 
 - 
 - < TextView 
 - android : layout _ width = " wrap _ content " 
 - android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ file " / > 
 - 
 - < / LinearLayout > 
 - 
 - < LinearLayout 
 - android : gravity = " center _ horizontal " 
 - android : layout _ width = " 0dp " 
 - android : layout _ weight = " 1 " 
 - android : layout _ height = " wrap _ content " 
 - android : orientation = " vertical " > 
 - 
 - < Button 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ location " 
 - android : background = " @ drawable / share _ location _ selector " / > 
 - 
 - < ImageButton 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : id = " @ + id / share _ hide " 
 - android : background = " @ drawable / share _ hide _ selector " 
 - android : src = " @ drawable / attach _ hide2 " / > 
 - 
 - < TextView 
 - android : id = " @ + id / location _ text " 
 - android : layout _ width = " wrap _ content " 
 - android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ location " / > 
 - < / LinearLayout > 
 - 
 - < LinearLayout 
 - android : layout _ width = " 0dp " 
 - android : layout _ weight = " 1 " 
 - android : gravity = " center _ horizontal " 
 - android : layout _ height = " wrap _ content " 
 - android : orientation = " vertical " > 
 - 
 - 
 - < ImageView 
 - android : scaleType = " centerInside " 
 - android : clickable = " true " 
 - android : layout _ width = " @ dimen / share _ btn _ size " 
 - android : layout _ height = " @ dimen / share _ btn _ size " 
 - android : src = " @ drawable / ic _ person _ white _ 36dp " 
 - android : id = " @ + id / share _ contact " / > 
 - 
 - < TextView 
 - android : id = " @ + id / contact _ text " 
 - android : layout _ width = " wrap _ content " 
 - android : layout _ height = " wrap _ content " 
 - android : text = " @ string / share _ menu _ contact " / > 
 - 
 - < / LinearLayout > 
 - 
 - < / TableRow > 
 - < / TableLayout > 
 + android : layout _ height = " fill _ parent " / > 
 
 < / LinearLayout > 
 \ No newline at end of file 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 index fe855ab . . d4afbde 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 @ @ - 91 , 7 + 91 , 16 @ @ 
 android : layout _ height = " match _ parent " 
 android : visibility = " gone " / > 
 
 - < include layout = " @ layout / share _ menu " / > 
 + < include 
 + layout = " @ layout / share _ menu " 
 + android : id = " @ + id / share _ menu _ container " / > 
 + 
 + < ImageView 
 + android : layout _ width = " fill _ parent " 
 + android : layout _ height = " 2dp " 
 + android : scaleType = " fitXY " 
 + android : layout _ above = " @ id / share _ menu _ container " 
 + android : src = " @ drawable / conv _ field _ shadow " / > 
 
 < FrameLayout 
 android : id = " @ + id / fl _ send _ panel " 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ids . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ids . xml 
 new file mode 100644 
 index 0000000 . . f0ffc3b 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / values / ids . xml 
 @ @ - 0 , 0 + 1 , 10 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " utf - 8 " ? > 
 + < resources > 
 + < item type = " id " name = " share _ gallery " / > 
 + < item type = " id " name = " share _ camera " / > 
 + < item type = " id " name = " share _ video " / > 
 + < item type = " id " name = " share _ file " / > 
 + < item type = " id " name = " share _ location " / > 
 + < item type = " id " name = " share _ contact " / > 
 + < item type = " id " name = " share _ hide " / > 
 + < / resources > 
 \ No newline at end of file
