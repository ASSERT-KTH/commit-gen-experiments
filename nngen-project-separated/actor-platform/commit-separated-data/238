BLEU SCORE: 0.2984745896009823

TEST MSG: fix ( android ) : share menu top shadow
GENERATED MSG: design ( android ) : hide send on record

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index 06abf6e . . 95d9117 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 13 , 7 + 13 , 9 @ @ import android . database . Cursor ; < nl > import android . graphics . Color ; < nl > import android . graphics . PorterDuff ; < nl > import android . graphics . PorterDuffColorFilter ; < nl > + import android . graphics . drawable . ColorDrawable ; < nl > import android . graphics . drawable . Drawable ; < nl > + import android . graphics . drawable . InsetDrawable ; < nl > import android . graphics . drawable . StateListDrawable ; < nl > import android . media . MediaScannerConnection ; < nl > import android . net . Uri ; < nl > @ @ - 340 , 8 + 342 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } ) ; < nl > < nl > / / share menu < nl > - findViewById ( R . id . fast _ share ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > - shareMenuCaontainer = findViewById ( R . id . share _ menu _ container ) ; < nl > + View shareMenu = findViewById ( R . id . share _ menu _ container ) ; < nl > + shareMenuCaontainer = shareMenu ; < nl > shareMenuCaontainer . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > public void onClick ( View v ) { < nl > @ @ - 449 , 7 + 451 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } ) ) ; < nl > } < nl > FrameLayout row = ( FrameLayout ) findViewById ( R . id . share _ row _ one ) ; < nl > - findViewById ( R . id . share _ menu _ container ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > + shareMenu . setBackgroundDrawable ( new InsetDrawable ( new ColorDrawable ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) , 0 , Screen . dp ( 2 ) , 0 , 0 ) ) ; < nl > + shareMenu . setPadding ( 0 , 0 , 0 , 0 ) ; < nl > boolean first = true ; < nl > int menuItemSize = Screen . dp ( 80 ) ; < nl > int screenWidth = getResources ( ) . getConfiguration ( ) . orientation = = Configuration . ORIENTATION _ PORTRAIT ? Screen . getWidth ( ) : Screen . getHeight ( ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > index f81d116 . . 39cd7c5 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml < nl > @ @ - 10 , 6 + 10 , 12 @ @ < nl > android : background = " @ android : color / transparent " < nl > tools : showIn = " @ layout / activity _ dialog " > < nl > < nl > + < ImageView < nl > + android : layout _ width = " fill _ parent " < nl > + android : layout _ height = " 2dp " < nl > + android : scaleType = " fitXY " < nl > + android : src = " @ drawable / conv _ field _ shadow " / > < nl > + < nl > < android . support . v7 . widget . RecyclerView < nl > android : id = " @ + id / fast _ share " < nl > android : layout _ width = " match _ parent " < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > index d4afbde . . 4a64618 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > @ @ - 95 , 13 + 95 , 6 @ @ < nl > layout = " @ layout / share _ menu " < nl > android : id = " @ + id / share _ menu _ container " / > < nl > < nl > - < ImageView < nl > - android : layout _ width = " fill _ parent " < nl > - android : layout _ height = " 2dp " < nl > - android : scaleType = " fitXY " < nl > - android : layout _ above = " @ id / share _ menu _ container " < nl > - android : src = " @ drawable / conv _ field _ shadow " / > < nl > - < nl > < FrameLayout < nl > android : id = " @ + id / fl _ send _ panel " < nl > android : layout _ width = " match _ parent "
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java < nl > index 3921a86 . . 40655d5 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java < nl > @ @ - 9 , 6 + 9 , 7 @ @ import android . view . KeyEvent ; < nl > import android . view . View ; < nl > import android . view . inputmethod . EditorInfo ; < nl > import android . widget . EditText ; < nl > + import android . widget . FrameLayout ; < nl > import android . widget . ImageButton ; < nl > import android . widget . ImageView ; < nl > import android . widget . TextView ; < nl > @ @ - 45 , 6 + 46 , 8 @ @ public abstract class ActorEditTextActivity extends BaseActivity { < nl > < nl > / / Emoji keyboard < nl > protected EmojiKeyboard emojiKeyboard ; < nl > + protected ImageView emojiButton ; < nl > + protected FrameLayout sendContainer ; < nl > < nl > @ Override < nl > protected void onCreate ( Bundle savedInstanceState ) { < nl > @ @ - 142 , 7 + 145 , 7 @ @ public abstract class ActorEditTextActivity extends BaseActivity { < nl > ( ( TextView ) removedFromGroup . findViewById ( R . id . kicked _ text ) ) . setTextColor ( ActorSDK . sharedActor ( ) . style . getMainColor ( ) ) ; < nl > < nl > / / Emoji keyboard < nl > - final ImageView emojiButton = ( ImageView ) findViewById ( R . id . ib _ emoji ) ; < nl > + emojiButton = ( ImageView ) findViewById ( R . id . ib _ emoji ) ; < nl > emojiKeyboard = new EmojiKeyboard ( this ) ; < nl > emojiKeyboard . setKeyboardStatusListener ( new KeyboardStatusListener ( ) { < nl > < nl > @ @ - 164 , 6 + 167 , 8 @ @ public abstract class ActorEditTextActivity extends BaseActivity { < nl > } < nl > } ) ; < nl > < nl > + sendContainer = ( FrameLayout ) findViewById ( R . id . sendContainer ) ; < nl > + < nl > / / Keyboard helper for show / hide keyboard < nl > keyboardUtils = new KeyboardHelper ( this ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > index daef4dd . . feb19ae 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java < nl > @ @ - 1189 , 6 + 1189 , 11 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > } < nl > isAudioVisible = true ; < nl > < nl > + hideView ( attachButton ) ; < nl > + hideView ( messageEditText ) ; < nl > + hideView ( emojiButton ) ; < nl > + hideView ( sendContainer ) ; < nl > + < nl > audioFile = ActorSDK . sharedActor ( ) . getMessenger ( ) . getInternalTempFile ( " voice _ msg " , " opus " ) ; < nl > < nl > long id = VoiceCaptureActor . LAST _ ID . incrementAndGet ( ) ; < nl > @ @ - 1219 , 6 + 1224 , 12 @ @ public class ChatActivity extends ActorEditTextActivity { < nl > return ; < nl > } < nl > isAudioVisible = false ; < nl > + < nl > + showView ( attachButton ) ; < nl > + showView ( messageEditText ) ; < nl > + showView ( emojiButton ) ; < nl > + showView ( sendContainer ) ; < nl > + < nl > voiceRecordActor . send ( new VoiceCaptureActor . Stop ( cancel ) ) ; < nl > TranslateAnimation animation = new TranslateAnimation ( 0 , Screen . getWidth ( ) , 0 , 0 ) ; < nl > animation . setDuration ( 160 ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > index c42a626 . . d87dd13 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml < nl > @ @ - 314 , 6 + 314 , 12 @ @ < nl > android : background = " @ drawable / selector _ flat " / > < nl > < / FrameLayout > < nl > < nl > + < FrameLayout < nl > + android : layout _ width = " 0dp " < nl > + android : layout _ height = " 0dp " < nl > + android : id = " @ + id / sendContainer " < nl > + android : visibility = " gone " / > < nl > + < nl > < nl > < FrameLayout < nl > android : layout _ width = " 56dp "

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index 06abf6e . . 95d9117 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 13 , 7 + 13 , 9 @ @ import android . database . Cursor ; 
 import android . graphics . Color ; 
 import android . graphics . PorterDuff ; 
 import android . graphics . PorterDuffColorFilter ; 
 + import android . graphics . drawable . ColorDrawable ; 
 import android . graphics . drawable . Drawable ; 
 + import android . graphics . drawable . InsetDrawable ; 
 import android . graphics . drawable . StateListDrawable ; 
 import android . media . MediaScannerConnection ; 
 import android . net . Uri ; 
 @ @ - 340 , 8 + 342 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } ) ; 
 
 / / share menu 
 - findViewById ( R . id . fast _ share ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 - shareMenuCaontainer = findViewById ( R . id . share _ menu _ container ) ; 
 + View shareMenu = findViewById ( R . id . share _ menu _ container ) ; 
 + shareMenuCaontainer = shareMenu ; 
 shareMenuCaontainer . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 public void onClick ( View v ) { 
 @ @ - 449 , 7 + 451 , 8 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } ) ) ; 
 } 
 FrameLayout row = ( FrameLayout ) findViewById ( R . id . share _ row _ one ) ; 
 - findViewById ( R . id . share _ menu _ container ) . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 + shareMenu . setBackgroundDrawable ( new InsetDrawable ( new ColorDrawable ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) , 0 , Screen . dp ( 2 ) , 0 , 0 ) ) ; 
 + shareMenu . setPadding ( 0 , 0 , 0 , 0 ) ; 
 boolean first = true ; 
 int menuItemSize = Screen . dp ( 80 ) ; 
 int screenWidth = getResources ( ) . getConfiguration ( ) . orientation = = Configuration . ORIENTATION _ PORTRAIT ? Screen . getWidth ( ) : Screen . getHeight ( ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 index f81d116 . . 39cd7c5 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res - material / layout / share _ menu . xml 
 @ @ - 10 , 6 + 10 , 12 @ @ 
 android : background = " @ android : color / transparent " 
 tools : showIn = " @ layout / activity _ dialog " > 
 
 + < ImageView 
 + android : layout _ width = " fill _ parent " 
 + android : layout _ height = " 2dp " 
 + android : scaleType = " fitXY " 
 + android : src = " @ drawable / conv _ field _ shadow " / > 
 + 
 < android . support . v7 . widget . RecyclerView 
 android : id = " @ + id / fast _ share " 
 android : layout _ width = " match _ parent " 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 index d4afbde . . 4a64618 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 @ @ - 95 , 13 + 95 , 6 @ @ 
 layout = " @ layout / share _ menu " 
 android : id = " @ + id / share _ menu _ container " / > 
 
 - < ImageView 
 - android : layout _ width = " fill _ parent " 
 - android : layout _ height = " 2dp " 
 - android : scaleType = " fitXY " 
 - android : layout _ above = " @ id / share _ menu _ container " 
 - android : src = " @ drawable / conv _ field _ shadow " / > 
 - 
 < FrameLayout 
 android : id = " @ + id / fl _ send _ panel " 
 android : layout _ width = " match _ parent "

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java 
 index 3921a86 . . 40655d5 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ActorEditTextActivity . java 
 @ @ - 9 , 6 + 9 , 7 @ @ import android . view . KeyEvent ; 
 import android . view . View ; 
 import android . view . inputmethod . EditorInfo ; 
 import android . widget . EditText ; 
 + import android . widget . FrameLayout ; 
 import android . widget . ImageButton ; 
 import android . widget . ImageView ; 
 import android . widget . TextView ; 
 @ @ - 45 , 6 + 46 , 8 @ @ public abstract class ActorEditTextActivity extends BaseActivity { 
 
 / / Emoji keyboard 
 protected EmojiKeyboard emojiKeyboard ; 
 + protected ImageView emojiButton ; 
 + protected FrameLayout sendContainer ; 
 
 @ Override 
 protected void onCreate ( Bundle savedInstanceState ) { 
 @ @ - 142 , 7 + 145 , 7 @ @ public abstract class ActorEditTextActivity extends BaseActivity { 
 ( ( TextView ) removedFromGroup . findViewById ( R . id . kicked _ text ) ) . setTextColor ( ActorSDK . sharedActor ( ) . style . getMainColor ( ) ) ; 
 
 / / Emoji keyboard 
 - final ImageView emojiButton = ( ImageView ) findViewById ( R . id . ib _ emoji ) ; 
 + emojiButton = ( ImageView ) findViewById ( R . id . ib _ emoji ) ; 
 emojiKeyboard = new EmojiKeyboard ( this ) ; 
 emojiKeyboard . setKeyboardStatusListener ( new KeyboardStatusListener ( ) { 
 
 @ @ - 164 , 6 + 167 , 8 @ @ public abstract class ActorEditTextActivity extends BaseActivity { 
 } 
 } ) ; 
 
 + sendContainer = ( FrameLayout ) findViewById ( R . id . sendContainer ) ; 
 + 
 / / Keyboard helper for show / hide keyboard 
 keyboardUtils = new KeyboardHelper ( this ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 index daef4dd . . feb19ae 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / ChatActivity . java 
 @ @ - 1189 , 6 + 1189 , 11 @ @ public class ChatActivity extends ActorEditTextActivity { 
 } 
 isAudioVisible = true ; 
 
 + hideView ( attachButton ) ; 
 + hideView ( messageEditText ) ; 
 + hideView ( emojiButton ) ; 
 + hideView ( sendContainer ) ; 
 + 
 audioFile = ActorSDK . sharedActor ( ) . getMessenger ( ) . getInternalTempFile ( " voice _ msg " , " opus " ) ; 
 
 long id = VoiceCaptureActor . LAST _ ID . incrementAndGet ( ) ; 
 @ @ - 1219 , 6 + 1224 , 12 @ @ public class ChatActivity extends ActorEditTextActivity { 
 return ; 
 } 
 isAudioVisible = false ; 
 + 
 + showView ( attachButton ) ; 
 + showView ( messageEditText ) ; 
 + showView ( emojiButton ) ; 
 + showView ( sendContainer ) ; 
 + 
 voiceRecordActor . send ( new VoiceCaptureActor . Stop ( cancel ) ) ; 
 TranslateAnimation animation = new TranslateAnimation ( 0 , Screen . getWidth ( ) , 0 , 0 ) ; 
 animation . setDuration ( 160 ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 index c42a626 . . d87dd13 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / activity _ dialog . xml 
 @ @ - 314 , 6 + 314 , 12 @ @ 
 android : background = " @ drawable / selector _ flat " / > 
 < / FrameLayout > 
 
 + < FrameLayout 
 + android : layout _ width = " 0dp " 
 + android : layout _ height = " 0dp " 
 + android : id = " @ + id / sendContainer " 
 + android : visibility = " gone " / > 
 + 
 
 < FrameLayout 
 android : layout _ width = " 56dp "
