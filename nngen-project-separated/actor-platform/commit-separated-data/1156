BLEU SCORE: 0.8371837576365552

TEST MSG: Revert " perf ( server ) : dissable fusing in HttpApiFrontend due to high cpu usage on connection upgrade "
GENERATED MSG: perf ( server ) : dissable fusing in HttpApiFrontend due to high cpu usage on connection upgrade

TEST DIFF (one line): diff - - git a / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala b / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala < nl > index d1605f3 . . 7c94e1a 100644 < nl > - - - a / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala < nl > + + + b / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala < nl > @ @ - 6 , 7 + 6 , 7 @ @ import akka . http . scaladsl . Http < nl > import akka . http . scaladsl . server . Directives . _ < nl > import akka . http . scaladsl . server . Route < nl > import akka . http . scaladsl . server . directives . Credentials < nl > - import akka . stream . { ActorMaterializerSettings , ActorMaterializer , Materializer } < nl > + import akka . stream . { ActorMaterializer , Materializer } < nl > import com . typesafe . config . Config < nl > import im . actor . server . api . http . app . AppFilesHttpHandler < nl > import im . actor . server . api . http . status . StatusHttpHandler < nl > @ @ - 67 , 7 + 67 , 8 @ @ private object HttpApiFrontend { < nl > < nl > def start ( serverConfig : Config ) ( < nl > implicit < nl > - system : ActorSystem < nl > + system : ActorSystem , < nl > + materializer : Materializer < nl > ) : Unit = { < nl > HttpApiConfig . load ( serverConfig . getConfig ( " http " ) ) match { < nl > case Success ( apiConfig ) ⇒ < nl > @ @ - 79 , 7 + 80 , 7 @ @ private object HttpApiFrontend { < nl > } < nl > < nl > def start ( config : HttpApiConfig , tlsContext : Option [ TlsContext ] ) ( implicit system : ActorSystem ) : Unit = { < nl > - implicit val mat = ActorMaterializer ( ActorMaterializerSettings ( system ) . withAutoFusing ( false ) ) < nl > + implicit val mat = ActorMaterializer ( ) < nl > < nl > val status = new StatusHttpHandler < nl > val app = new AppFilesHttpHandler ( config . staticFiles )
NEAREST DIFF (one line): diff - - git a / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala b / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala < nl > index 7c94e1a . . d1605f3 100644 < nl > - - - a / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala < nl > + + + b / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala < nl > @ @ - 6 , 7 + 6 , 7 @ @ import akka . http . scaladsl . Http < nl > import akka . http . scaladsl . server . Directives . _ < nl > import akka . http . scaladsl . server . Route < nl > import akka . http . scaladsl . server . directives . Credentials < nl > - import akka . stream . { ActorMaterializer , Materializer } < nl > + import akka . stream . { ActorMaterializerSettings , ActorMaterializer , Materializer } < nl > import com . typesafe . config . Config < nl > import im . actor . server . api . http . app . AppFilesHttpHandler < nl > import im . actor . server . api . http . status . StatusHttpHandler < nl > @ @ - 67 , 8 + 67 , 7 @ @ private object HttpApiFrontend { < nl > < nl > def start ( serverConfig : Config ) ( < nl > implicit < nl > - system : ActorSystem , < nl > - materializer : Materializer < nl > + system : ActorSystem < nl > ) : Unit = { < nl > HttpApiConfig . load ( serverConfig . getConfig ( " http " ) ) match { < nl > case Success ( apiConfig ) ⇒ < nl > @ @ - 80 , 7 + 79 , 7 @ @ private object HttpApiFrontend { < nl > } < nl > < nl > def start ( config : HttpApiConfig , tlsContext : Option [ TlsContext ] ) ( implicit system : ActorSystem ) : Unit = { < nl > - implicit val mat = ActorMaterializer ( ) < nl > + implicit val mat = ActorMaterializer ( ActorMaterializerSettings ( system ) . withAutoFusing ( false ) ) < nl > < nl > val status = new StatusHttpHandler < nl > val app = new AppFilesHttpHandler ( config . staticFiles )

TEST DIFF:
diff - - git a / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala b / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala 
 index d1605f3 . . 7c94e1a 100644 
 - - - a / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala 
 + + + b / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala 
 @ @ - 6 , 7 + 6 , 7 @ @ import akka . http . scaladsl . Http 
 import akka . http . scaladsl . server . Directives . _ 
 import akka . http . scaladsl . server . Route 
 import akka . http . scaladsl . server . directives . Credentials 
 - import akka . stream . { ActorMaterializerSettings , ActorMaterializer , Materializer } 
 + import akka . stream . { ActorMaterializer , Materializer } 
 import com . typesafe . config . Config 
 import im . actor . server . api . http . app . AppFilesHttpHandler 
 import im . actor . server . api . http . status . StatusHttpHandler 
 @ @ - 67 , 7 + 67 , 8 @ @ private object HttpApiFrontend { 
 
 def start ( serverConfig : Config ) ( 
 implicit 
 - system : ActorSystem 
 + system : ActorSystem , 
 + materializer : Materializer 
 ) : Unit = { 
 HttpApiConfig . load ( serverConfig . getConfig ( " http " ) ) match { 
 case Success ( apiConfig ) ⇒ 
 @ @ - 79 , 7 + 80 , 7 @ @ private object HttpApiFrontend { 
 } 
 
 def start ( config : HttpApiConfig , tlsContext : Option [ TlsContext ] ) ( implicit system : ActorSystem ) : Unit = { 
 - implicit val mat = ActorMaterializer ( ActorMaterializerSettings ( system ) . withAutoFusing ( false ) ) 
 + implicit val mat = ActorMaterializer ( ) 
 
 val status = new StatusHttpHandler 
 val app = new AppFilesHttpHandler ( config . staticFiles )

NEAREST DIFF:
diff - - git a / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala b / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala 
 index 7c94e1a . . d1605f3 100644 
 - - - a / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala 
 + + + b / actor - server / actor - http - api / src / main / scala / im / actor / server / api / http / HttpApiFrontend . scala 
 @ @ - 6 , 7 + 6 , 7 @ @ import akka . http . scaladsl . Http 
 import akka . http . scaladsl . server . Directives . _ 
 import akka . http . scaladsl . server . Route 
 import akka . http . scaladsl . server . directives . Credentials 
 - import akka . stream . { ActorMaterializer , Materializer } 
 + import akka . stream . { ActorMaterializerSettings , ActorMaterializer , Materializer } 
 import com . typesafe . config . Config 
 import im . actor . server . api . http . app . AppFilesHttpHandler 
 import im . actor . server . api . http . status . StatusHttpHandler 
 @ @ - 67 , 8 + 67 , 7 @ @ private object HttpApiFrontend { 
 
 def start ( serverConfig : Config ) ( 
 implicit 
 - system : ActorSystem , 
 - materializer : Materializer 
 + system : ActorSystem 
 ) : Unit = { 
 HttpApiConfig . load ( serverConfig . getConfig ( " http " ) ) match { 
 case Success ( apiConfig ) ⇒ 
 @ @ - 80 , 7 + 79 , 7 @ @ private object HttpApiFrontend { 
 } 
 
 def start ( config : HttpApiConfig , tlsContext : Option [ TlsContext ] ) ( implicit system : ActorSystem ) : Unit = { 
 - implicit val mat = ActorMaterializer ( ) 
 + implicit val mat = ActorMaterializer ( ActorMaterializerSettings ( system ) . withAutoFusing ( false ) ) 
 
 val status = new StatusHttpHandler 
 val app = new AppFilesHttpHandler ( config . staticFiles )
