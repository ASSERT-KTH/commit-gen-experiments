BLEU SCORE: 0.02383853510228548

TEST MSG: ref ( android ) : GroupAdminActivity - > GroupTypeActivity
GENERATED MSG: Merge commit ' 3c548d4f2e5b40a6254bb1ce5daf5e3dbf9af4f9 '

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / AndroidManifest . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / AndroidManifest . xml < nl > index 84dc7a8 . . 8bf8922 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / AndroidManifest . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / AndroidManifest . xml < nl > @ @ - 152 , 7 + 152 , 7 @ @ < nl > android : windowSoftInputMode = " adjustNothing | stateAlwaysHidden " / > < nl > < nl > < activity < nl > - android : name = " . controllers . group . GroupAdminActivity " < nl > + android : name = " . controllers . group . GroupTypeActivity " < nl > android : configChanges = " keyboard | keyboardHidden | orientation | screenSize " < nl > android : theme = " @ style / CommonActivityTheme " < nl > android : windowSoftInputMode = " adjustNothing | stateAlwaysHidden " / > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > index 3ba0c44 . . 17f3a90 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > @ @ - 14 , 6 + 14 , 7 @ @ import com . facebook . drawee . backends . pipeline . Fresco ; < nl > import com . facebook . imagepipeline . core . ImagePipelineConfig ; < nl > < nl > import org . jetbrains . annotations . NotNull ; < nl > + import org . jetbrains . annotations . Nullable ; < nl > < nl > import java . util . Locale ; < nl > import java . util . TimeZone ; < nl > @ @ - 133 , 6 + 134 , 11 @ @ public class ActorSDK { < nl > * / < nl > private String inviteUrl = " https : / / actor . im / dl " ; < nl > / * * < nl > + * Invite url < nl > + * / < nl > + @ Nullable < nl > + private String groupInvitePrefix = " actor . im / join / " ; < nl > + / * * < nl > * Help phone < nl > * / < nl > private String helpPhone = " 75551234567 " ; < nl > @ @ - 520 , 6 + 526 , 25 @ @ public class ActorSDK { < nl > } < nl > < nl > / * * < nl > + * Getting Group Invite Prefix < nl > + * < nl > + * @ return group invite prefix < nl > + * / < nl > + @ Nullable < nl > + public String getGroupInvitePrefix ( ) { < nl > + return groupInvitePrefix ; < nl > + } < nl > + < nl > + / * * < nl > + * Setting Group Invite Prefix < nl > + * < nl > + * @ param groupInvitePrefix group invite prefix < nl > + * / < nl > + public void setGroupInvitePrefix ( @ Nullable String groupInvitePrefix ) { < nl > + this . groupInvitePrefix = groupInvitePrefix ; < nl > + } < nl > + < nl > + / * * < nl > * Getting Push Registration Id < nl > * < nl > * @ return pushId < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminActivity . java < nl > deleted file mode 100644 < nl > index 3aab5e0 . . 0000000 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminActivity . java < nl > + + + / dev / null < nl > @ @ - 1 , 19 + 0 , 0 @ @ < nl > - package im . actor . sdk . controllers . group ; < nl > - < nl > - import android . os . Bundle ; < nl > - < nl > - import im . actor . sdk . controllers . Intents ; < nl > - import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > - < nl > - public class GroupAdminActivity extends BaseFragmentActivity { < nl > - < nl > - @ Override < nl > - protected void onCreate ( Bundle savedInstanceState ) { < nl > - super . onCreate ( savedInstanceState ) ; < nl > - < nl > - if ( savedInstanceState = = null ) { < nl > - showFragment ( GroupAdminFragment . create ( < nl > - getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ) , false ) ; < nl > - } < nl > - } < nl > - } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminFragment . java < nl > deleted file mode 100644 < nl > index 770783d . . 0000000 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminFragment . java < nl > + + + / dev / null < nl > @ @ - 1 , 158 + 0 , 0 @ @ < nl > - package im . actor . sdk . controllers . group ; < nl > - < nl > - import android . os . Bundle ; < nl > - import android . support . annotation . Nullable ; < nl > - import android . view . LayoutInflater ; < nl > - import android . view . Menu ; < nl > - import android . view . MenuInflater ; < nl > - import android . view . MenuItem ; < nl > - import android . view . View ; < nl > - import android . view . ViewGroup ; < nl > - import android . widget . EditText ; < nl > - import android . widget . RadioButton ; < nl > - import android . widget . TextView ; < nl > - import android . widget . Toast ; < nl > - < nl > - import im . actor . core . viewmodel . GroupVM ; < nl > - import im . actor . sdk . R ; < nl > - import im . actor . sdk . controllers . BaseFragment ; < nl > - import im . actor . sdk . util . Fonts ; < nl > - < nl > - import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > - < nl > - public class GroupAdminFragment extends BaseFragment { < nl > - < nl > - public static GroupAdminFragment create ( int groupId ) { < nl > - Bundle bundle = new Bundle ( ) ; < nl > - bundle . putInt ( " groupId " , groupId ) ; < nl > - GroupAdminFragment editFragment = new GroupAdminFragment ( ) ; < nl > - editFragment . setArguments ( bundle ) ; < nl > - return editFragment ; < nl > - } < nl > - < nl > - private EditText publicShortName ; < nl > - private GroupVM groupVM ; < nl > - private boolean isPublic ; < nl > - < nl > - public GroupAdminFragment ( ) { < nl > - setTitle ( R . string . group _ title ) ; < nl > - setRootFragment ( true ) ; < nl > - setHomeAsUp ( true ) ; < nl > - setShowHome ( true ) ; < nl > - } < nl > - < nl > - @ Override < nl > - public void onCreate ( Bundle saveInstance ) { < nl > - super . onCreate ( saveInstance ) ; < nl > - < nl > - groupVM = messenger ( ) . getGroup ( getArguments ( ) . getInt ( " groupId " ) ) ; < nl > - } < nl > - < nl > - @ Nullable < nl > - @ Override < nl > - public View onCreateView ( LayoutInflater inflater , @ Nullable ViewGroup container , @ Nullable Bundle savedInstanceState ) { < nl > - View res = inflater . inflate ( R . layout . fragment _ administration , container , false ) ; < nl > - res . setBackgroundColor ( style . getBackyardBackgroundColor ( ) ) ; < nl > - TextView publicTitle = ( TextView ) res . findViewById ( R . id . publicTitle ) ; < nl > - publicTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > - TextView publicDescription = ( TextView ) res . findViewById ( R . id . publicDescription ) ; < nl > - publicDescription . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > - TextView privateTitle = ( TextView ) res . findViewById ( R . id . privateTitle ) ; < nl > - privateTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > - TextView privateDescription = ( TextView ) res . findViewById ( R . id . privateDescription ) ; < nl > - privateDescription . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > - TextView publicLinkPrefix = ( TextView ) res . findViewById ( R . id . publicLinkPrefix ) ; < nl > - publicLinkPrefix . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > - publicLinkPrefix . setTypeface ( Fonts . medium ( ) ) ; < nl > - RadioButton publicRadio = ( RadioButton ) res . findViewById ( R . id . publicRadio ) ; < nl > - RadioButton privateRadio = ( RadioButton ) res . findViewById ( R . id . privateRadio ) ; < nl > - publicShortName = ( EditText ) res . findViewById ( R . id . publicLink ) ; < nl > - View publicLinkContainer = res . findViewById ( R . id . publicContainer ) ; < nl > - View publicShadowTop = res . findViewById ( R . id . shadowTop ) ; < nl > - View publicShadowBottom = res . findViewById ( R . id . shadowBottom ) ; < nl > - < nl > - if ( groupVM . getShortName ( ) . get ( ) ! = null ) { < nl > - publicRadio . setChecked ( true ) ; < nl > - privateRadio . setChecked ( false ) ; < nl > - publicLinkContainer . setVisibility ( View . VISIBLE ) ; < nl > - publicShadowTop . setVisibility ( View . VISIBLE ) ; < nl > - publicShadowBottom . setVisibility ( View . VISIBLE ) ; < nl > - publicShortName . setText ( groupVM . getShortName ( ) . get ( ) ) ; < nl > - isPublic = true ; < nl > - } else { < nl > - publicRadio . setChecked ( false ) ; < nl > - privateRadio . setChecked ( true ) ; < nl > - publicLinkContainer . setVisibility ( View . GONE ) ; < nl > - publicShadowTop . setVisibility ( View . GONE ) ; < nl > - publicShadowBottom . setVisibility ( View . GONE ) ; < nl > - publicShortName . setText ( null ) ; < nl > - isPublic = false ; < nl > - } < nl > - View . OnClickListener publicClick = view - > { < nl > - if ( ! isPublic ) { < nl > - isPublic = true ; < nl > - publicRadio . setChecked ( true ) ; < nl > - privateRadio . setChecked ( false ) ; < nl > - publicLinkContainer . setVisibility ( View . VISIBLE ) ; < nl > - publicShadowTop . setVisibility ( View . VISIBLE ) ; < nl > - publicShadowBottom . setVisibility ( View . VISIBLE ) ; < nl > - publicShortName . setText ( groupVM . getShortName ( ) . get ( ) ) ; < nl > - } < nl > - } ; < nl > - View . OnClickListener privateClick = view - > { < nl > - if ( isPublic ) { < nl > - isPublic = false ; < nl > - publicRadio . setChecked ( false ) ; < nl > - privateRadio . setChecked ( true ) ; < nl > - publicLinkContainer . setVisibility ( View . GONE ) ; < nl > - publicShadowTop . setVisibility ( View . GONE ) ; < nl > - publicShadowBottom . setVisibility ( View . GONE ) ; < nl > - publicShortName . setText ( null ) ; < nl > - } < nl > - } ; < nl > - publicRadio . setOnClickListener ( publicClick ) ; < nl > - privateRadio . setOnClickListener ( privateClick ) ; < nl > - < nl > - return res ; < nl > - } < nl > - < nl > - @ Override < nl > - public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { < nl > - super . onCreateOptionsMenu ( menu , inflater ) ; < nl > - inflater . inflate ( R . menu . next , menu ) ; < nl > - } < nl > - < nl > - @ Override < nl > - public boolean onOptionsItemSelected ( MenuItem item ) { < nl > - if ( item . getItemId ( ) = = R . id . next ) { < nl > - if ( isPublic ) { < nl > - String nShortName = publicShortName . getText ( ) . toString ( ) . trim ( ) ; < nl > - if ( nShortName . length ( ) = = 0 ) { < nl > - finishActivity ( ) ; < nl > - return true ; < nl > - } < nl > - if ( nShortName . equals ( groupVM . getShortName ( ) . get ( ) ) ) { < nl > - return true ; < nl > - } < nl > - execute ( messenger ( ) . editGroupShortName ( groupVM . getId ( ) , nShortName ) . then ( r - > { < nl > - finishActivity ( ) ; < nl > - } ) . failure ( e - > { < nl > - Toast . makeText ( getActivity ( ) , " Unable to change group short name " , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > - } ) ) ; < nl > - } else { < nl > - if ( groupVM . getShortName ( ) . get ( ) = = null ) { < nl > - finishActivity ( ) ; < nl > - return true ; < nl > - } else { < nl > - execute ( messenger ( ) . editGroupShortName ( groupVM . getId ( ) , null ) . then ( r - > { < nl > - finishActivity ( ) ; < nl > - } ) . failure ( e - > { < nl > - Toast . makeText ( getActivity ( ) , " Unable to change group short name " , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > - } ) ) ; < nl > - } < nl > - } < nl > - return true ; < nl > - } < nl > - return super . onOptionsItemSelected ( item ) ; < nl > - } < nl > - } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > index 225efd1 . . 68d4014 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > @ @ - 31 , 9 + 31 , 6 @ @ import im . actor . core . viewmodel . GroupVM ; < nl > import im . actor . core . viewmodel . UserPhone ; < nl > import im . actor . core . viewmodel . UserVM ; < nl > import im . actor . runtime . actors . messages . Void ; < nl > - import im . actor . runtime . mvvm . Value ; < nl > - import im . actor . runtime . mvvm . ValueDoubleChangedListener ; < nl > - import im . actor . runtime . mvvm . ValueDoubleListener ; < nl > import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . ActorSDKLauncher ; < nl > import im . actor . sdk . ActorStyle ; < nl > @ @ - 148 , 7 + 145 , 6 @ @ public class GroupInfoFragment extends BaseFragment { < nl > administrationAction . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > leaveAction . setTextColor ( style . getTextDangerColor ( ) ) ; < nl > < nl > - < nl > if ( groupVM . getGroupType ( ) = = GroupType . CHANNEL ) { < nl > leaveAction . setText ( R . string . group _ leave _ channel ) ; < nl > } else { < nl > @ @ - 181 , 7 + 177 , 14 @ @ public class GroupInfoFragment extends BaseFragment { < nl > bind ( groupVM . getShortName ( ) , shortName - > { < nl > if ( shortName ! = null ) { < nl > shortNameView . setText ( " @ " + shortName ) ; < nl > - shortLinkView . setText ( " actor . im / join / " + shortName ) ; < nl > + < nl > + String prefix = ActorSDK . sharedActor ( ) . getGroupInvitePrefix ( ) ; < nl > + if ( prefix ! = null ) { < nl > + shortLinkView . setText ( prefix + shortName ) ; < nl > + shortLinkView . setVisibility ( View . VISIBLE ) ; < nl > + } else { < nl > + shortLinkView . setVisibility ( View . GONE ) ; < nl > + } < nl > } < nl > shortNameCont . setVisibility ( shortName ! = null ? View . VISIBLE : View . GONE ) ; < nl > } ) ; < nl > @ @ - 222 , 7 + 225 , 7 @ @ public class GroupInfoFragment extends BaseFragment { < nl > } < nl > } ) ; < nl > administrationAction . setOnClickListener ( view - > { < nl > - startActivity ( new Intent ( getActivity ( ) , GroupAdminActivity . class ) < nl > + startActivity ( new Intent ( getActivity ( ) , GroupTypeActivity . class ) < nl > . putExtra ( Intents . EXTRA _ GROUP _ ID , chatId ) ) ; < nl > } ) ; < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeActivity . java < nl > new file mode 100644 < nl > index 0000000 . . 73e7173 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeActivity . java < nl > @ @ - 0 , 0 + 1 , 19 @ @ < nl > + package im . actor . sdk . controllers . group ; < nl > + < nl > + import android . os . Bundle ; < nl > + < nl > + import im . actor . sdk . controllers . Intents ; < nl > + import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > + < nl > + public class GroupTypeActivity extends BaseFragmentActivity { < nl > + < nl > + @ Override < nl > + protected void onCreate ( Bundle savedInstanceState ) { < nl > + super . onCreate ( savedInstanceState ) ; < nl > + < nl > + if ( savedInstanceState = = null ) { < nl > + showFragment ( GroupTypeFragment . create ( < nl > + getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ) , false ) ; < nl > + } < nl > + } < nl > + } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeFragment . java < nl > new file mode 100644 < nl > index 0000000 . . 8f920d2 < nl > - - - / dev / null < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeFragment . java < nl > @ @ - 0 , 0 + 1 , 158 @ @ < nl > + package im . actor . sdk . controllers . group ; < nl > + < nl > + import android . os . Bundle ; < nl > + import android . support . annotation . Nullable ; < nl > + import android . view . LayoutInflater ; < nl > + import android . view . Menu ; < nl > + import android . view . MenuInflater ; < nl > + import android . view . MenuItem ; < nl > + import android . view . View ; < nl > + import android . view . ViewGroup ; < nl > + import android . widget . EditText ; < nl > + import android . widget . RadioButton ; < nl > + import android . widget . TextView ; < nl > + import android . widget . Toast ; < nl > + < nl > + import im . actor . core . viewmodel . GroupVM ; < nl > + import im . actor . sdk . R ; < nl > + import im . actor . sdk . controllers . BaseFragment ; < nl > + import im . actor . sdk . util . Fonts ; < nl > + < nl > + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > + < nl > + public class GroupTypeFragment extends BaseFragment { < nl > + < nl > + public static GroupTypeFragment create ( int groupId ) { < nl > + Bundle bundle = new Bundle ( ) ; < nl > + bundle . putInt ( " groupId " , groupId ) ; < nl > + GroupTypeFragment editFragment = new GroupTypeFragment ( ) ; < nl > + editFragment . setArguments ( bundle ) ; < nl > + return editFragment ; < nl > + } < nl > + < nl > + private EditText publicShortName ; < nl > + private GroupVM groupVM ; < nl > + private boolean isPublic ; < nl > + < nl > + public GroupTypeFragment ( ) { < nl > + setTitle ( R . string . group _ title ) ; < nl > + setRootFragment ( true ) ; < nl > + setHomeAsUp ( true ) ; < nl > + setShowHome ( true ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public void onCreate ( Bundle saveInstance ) { < nl > + super . onCreate ( saveInstance ) ; < nl > + < nl > + groupVM = messenger ( ) . getGroup ( getArguments ( ) . getInt ( " groupId " ) ) ; < nl > + } < nl > + < nl > + @ Nullable < nl > + @ Override < nl > + public View onCreateView ( LayoutInflater inflater , @ Nullable ViewGroup container , @ Nullable Bundle savedInstanceState ) { < nl > + View res = inflater . inflate ( R . layout . fragment _ administration , container , false ) ; < nl > + res . setBackgroundColor ( style . getBackyardBackgroundColor ( ) ) ; < nl > + TextView publicTitle = ( TextView ) res . findViewById ( R . id . publicTitle ) ; < nl > + publicTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > + TextView publicDescription = ( TextView ) res . findViewById ( R . id . publicDescription ) ; < nl > + publicDescription . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > + TextView privateTitle = ( TextView ) res . findViewById ( R . id . privateTitle ) ; < nl > + privateTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; < nl > + TextView privateDescription = ( TextView ) res . findViewById ( R . id . privateDescription ) ; < nl > + privateDescription . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > + TextView publicLinkPrefix = ( TextView ) res . findViewById ( R . id . publicLinkPrefix ) ; < nl > + publicLinkPrefix . setTextColor ( style . getTextSecondaryColor ( ) ) ; < nl > + publicLinkPrefix . setTypeface ( Fonts . medium ( ) ) ; < nl > + RadioButton publicRadio = ( RadioButton ) res . findViewById ( R . id . publicRadio ) ; < nl > + RadioButton privateRadio = ( RadioButton ) res . findViewById ( R . id . privateRadio ) ; < nl > + publicShortName = ( EditText ) res . findViewById ( R . id . publicLink ) ; < nl > + View publicLinkContainer = res . findViewById ( R . id . publicContainer ) ; < nl > + View publicShadowTop = res . findViewById ( R . id . shadowTop ) ; < nl > + View publicShadowBottom = res . findViewById ( R . id . shadowBottom ) ; < nl > + < nl > + if ( groupVM . getShortName ( ) . get ( ) ! = null ) { < nl > + publicRadio . setChecked ( true ) ; < nl > + privateRadio . setChecked ( false ) ; < nl > + publicLinkContainer . setVisibility ( View . VISIBLE ) ; < nl > + publicShadowTop . setVisibility ( View . VISIBLE ) ; < nl > + publicShadowBottom . setVisibility ( View . VISIBLE ) ; < nl > + publicShortName . setText ( groupVM . getShortName ( ) . get ( ) ) ; < nl > + isPublic = true ; < nl > + } else { < nl > + publicRadio . setChecked ( false ) ; < nl > + privateRadio . setChecked ( true ) ; < nl > + publicLinkContainer . setVisibility ( View . GONE ) ; < nl > + publicShadowTop . setVisibility ( View . GONE ) ; < nl > + publicShadowBottom . setVisibility ( View . GONE ) ; < nl > + publicShortName . setText ( null ) ; < nl > + isPublic = false ; < nl > + } < nl > + View . OnClickListener publicClick = view - > { < nl > + if ( ! isPublic ) { < nl > + isPublic = true ; < nl > + publicRadio . setChecked ( true ) ; < nl > + privateRadio . setChecked ( false ) ; < nl > + publicLinkContainer . setVisibility ( View . VISIBLE ) ; < nl > + publicShadowTop . setVisibility ( View . VISIBLE ) ; < nl > + publicShadowBottom . setVisibility ( View . VISIBLE ) ; < nl > + publicShortName . setText ( groupVM . getShortName ( ) . get ( ) ) ; < nl > + } < nl > + } ; < nl > + View . OnClickListener privateClick = view - > { < nl > + if ( isPublic ) { < nl > + isPublic = false ; < nl > + publicRadio . setChecked ( false ) ; < nl > + privateRadio . setChecked ( true ) ; < nl > + publicLinkContainer . setVisibility ( View . GONE ) ; < nl > + publicShadowTop . setVisibility ( View . GONE ) ; < nl > + publicShadowBottom . setVisibility ( View . GONE ) ; < nl > + publicShortName . setText ( null ) ; < nl > + } < nl > + } ; < nl > + publicRadio . setOnClickListener ( publicClick ) ; < nl > + privateRadio . setOnClickListener ( privateClick ) ; < nl > + < nl > + return res ; < nl > + } < nl > + < nl > + @ Override < nl > + public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { < nl > + super . onCreateOptionsMenu ( menu , inflater ) ; < nl > + inflater . inflate ( R . menu . next , menu ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public boolean onOptionsItemSelected ( MenuItem item ) { < nl > + if ( item . getItemId ( ) = = R . id . next ) { < nl > + if ( isPublic ) { < nl > + String nShortName = publicShortName . getText ( ) . toString ( ) . trim ( ) ; < nl > + if ( nShortName . length ( ) = = 0 ) { < nl > + finishActivity ( ) ; < nl > + return true ; < nl > + } < nl > + if ( nShortName . equals ( groupVM . getShortName ( ) . get ( ) ) ) { < nl > + return true ; < nl > + } < nl > + execute ( messenger ( ) . editGroupShortName ( groupVM . getId ( ) , nShortName ) . then ( r - > { < nl > + finishActivity ( ) ; < nl > + } ) . failure ( e - > { < nl > + Toast . makeText ( getActivity ( ) , " Unable to change group short name " , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + } ) ) ; < nl > + } else { < nl > + if ( groupVM . getShortName ( ) . get ( ) = = null ) { < nl > + finishActivity ( ) ; < nl > + return true ; < nl > + } else { < nl > + execute ( messenger ( ) . editGroupShortName ( groupVM . getId ( ) , null ) . then ( r - > { < nl > + finishActivity ( ) ; < nl > + } ) . failure ( e - > { < nl > + Toast . makeText ( getActivity ( ) , " Unable to change group short name " , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + } ) ) ; < nl > + } < nl > + } < nl > + return true ; < nl > + } < nl > + return super . onOptionsItemSelected ( item ) ; < nl > + } < nl > + }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > index cbd1b86 . . 4d865cb 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > @ @ - 163 , 13 + 163 , 6 @ @ public interface ActorSDKDelegate { < nl > < nl > < nl > / * * < nl > - * Is Actor pushes used for this app - added for testing < nl > - * < nl > - * @ return is Actor push id used < nl > - * / < nl > - boolean useActorPush ( ) ; < nl > - < nl > - / * * < nl > * Method for hacking share menu in dialog < nl > * < nl > * @ param shareMenu share menu < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > index f591d2a . . 63cd509 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > @ @ - 168 , 16 + 168 , 6 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { < nl > } < nl > < nl > / * * < nl > - * Is Actor pushes used for this app - added for testing < nl > - * < nl > - * @ return is Actor push id used < nl > - * / < nl > - @ Override < nl > - public boolean useActorPush ( ) { < nl > - return true ; < nl > - } < nl > - < nl > - / * * < nl > * Method for hacking share menu in dialog < nl > * < nl > * @ param shareMenu share menu < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java < nl > index 8edc540 . . 4907cd2 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java < nl > @ @ - 1 , 21 + 1 , 36 @ @ < nl > package im . actor . sdk . controllers . group ; < nl > < nl > + import android . app . AlertDialog ; < nl > + import android . content . DialogInterface ; < nl > + import android . content . Intent ; < nl > import android . graphics . Color ; < nl > import android . graphics . drawable . ColorDrawable ; < nl > import android . os . Bundle ; < nl > + import android . view . Menu ; < nl > + import android . view . MenuInflater ; < nl > + import android . view . MenuItem ; < nl > < nl > + import im . actor . core . viewmodel . GroupVM ; < nl > import im . actor . sdk . ActorSDK ; < nl > + import im . actor . sdk . R ; < nl > import im . actor . sdk . controllers . Intents ; < nl > import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > + import im . actor . sdk . controllers . fragment . preview . ViewAvatarActivity ; < nl > import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . groups ; < nl > + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; < nl > + < nl > public class GroupInfoActivity extends BaseFragmentActivity { < nl > < nl > + private GroupVM groupInfo ; < nl > + private int chatId ; < nl > + < nl > @ Override < nl > protected void onCreate ( Bundle savedInstanceState ) { < nl > super . onCreate ( savedInstanceState ) ; < nl > - int chatId = getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ; < nl > - < nl > + chatId = getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ; < nl > + groupInfo = groups ( ) . get ( chatId ) ; < nl > getSupportActionBar ( ) . setBackgroundDrawable ( new ColorDrawable ( Color . TRANSPARENT ) ) ; < nl > getSupportActionBar ( ) . setTitle ( null ) ; < nl > < nl > @ @ - 31 , 4 + 46 , 40 @ @ public class GroupInfoActivity extends BaseFragmentActivity { < nl > showFragment ( fragment , false , false ) ; < nl > } < nl > } < nl > + < nl > + @ Override < nl > + public boolean onCreateOptionsMenu ( Menu menu ) { < nl > + if ( groupInfo . isMember ( ) . get ( ) ) { < nl > + getMenuInflater ( ) . inflate ( R . menu . group _ info , menu ) ; < nl > + } < nl > + return true ; < nl > + } < nl > + < nl > + @ Override < nl > + public boolean onOptionsItemSelected ( MenuItem item ) { < nl > + if ( item . getItemId ( ) = = R . id . leaveGroup ) { < nl > + new AlertDialog . Builder ( this ) < nl > + . setMessage ( getString ( R . string . alert _ leave _ group _ message ) . replace ( " % 1 $ s " , < nl > + groupInfo . getName ( ) . get ( ) ) ) < nl > + . setPositiveButton ( R . string . alert _ leave _ group _ yes , new DialogInterface . OnClickListener ( ) { < nl > + @ Override < nl > + public void onClick ( DialogInterface dialog2 , int which ) { < nl > + execute ( messenger ( ) . leaveGroup ( chatId ) ) ; < nl > + } < nl > + } ) < nl > + . setNegativeButton ( R . string . dialog _ cancel , null ) < nl > + . show ( ) < nl > + . setCanceledOnTouchOutside ( true ) ; < nl > + < nl > + return true ; < nl > + } else if ( item . getItemId ( ) = = R . id . addMember ) { < nl > + startActivity ( new Intent ( this , AddMemberActivity . class ) < nl > + . putExtra ( " GROUP _ ID " , chatId ) ) ; < nl > + } else if ( item . getItemId ( ) = = R . id . editTitle ) { < nl > + startActivity ( Intents . editGroupTitle ( chatId , this ) ) ; < nl > + } else if ( item . getItemId ( ) = = R . id . changePhoto ) { < nl > + startActivity ( ViewAvatarActivity . viewGroupAvatar ( chatId , this ) ) ; < nl > + } < nl > + return super . onOptionsItemSelected ( item ) ; < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > index c58a224 . . 36170a7 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java < nl > @ @ - 424 , 42 + 424 , 6 @ @ public class GroupInfoFragment extends BaseFragment { < nl > } < nl > < nl > @ Override < nl > - public void onCreateOptionsMenu ( Menu menu , MenuInflater menuInflater ) { < nl > - super . onCreateOptionsMenu ( menu , menuInflater ) ; < nl > - if ( groupInfo . isMember ( ) . get ( ) ) { < nl > - menuInflater . inflate ( R . menu . group _ info , menu ) ; < nl > - } < nl > - } < nl > - < nl > - @ Override < nl > - public boolean onOptionsItemSelected ( MenuItem item ) { < nl > - if ( item . getItemId ( ) = = R . id . leaveGroup ) { < nl > - new AlertDialog . Builder ( getActivity ( ) ) < nl > - . setMessage ( getString ( R . string . alert _ leave _ group _ message ) . replace ( " % 1 $ s " , < nl > - groupInfo . getName ( ) . get ( ) ) ) < nl > - . setPositiveButton ( R . string . alert _ leave _ group _ yes , new DialogInterface . OnClickListener ( ) { < nl > - @ Override < nl > - public void onClick ( DialogInterface dialog2 , int which ) { < nl > - execute ( messenger ( ) . leaveGroup ( chatId ) ) ; < nl > - } < nl > - } ) < nl > - . setNegativeButton ( R . string . dialog _ cancel , null ) < nl > - . show ( ) < nl > - . setCanceledOnTouchOutside ( true ) ; < nl > - < nl > - return true ; < nl > - } else if ( item . getItemId ( ) = = R . id . addMember ) { < nl > - startActivity ( new Intent ( getActivity ( ) , AddMemberActivity . class ) < nl > - . putExtra ( " GROUP _ ID " , chatId ) ) ; < nl > - } else if ( item . getItemId ( ) = = R . id . editTitle ) { < nl > - startActivity ( Intents . editGroupTitle ( chatId , getActivity ( ) ) ) ; < nl > - } else if ( item . getItemId ( ) = = R . id . changePhoto ) { < nl > - startActivity ( ViewAvatarActivity . viewGroupAvatar ( chatId , getActivity ( ) ) ) ; < nl > - } < nl > - return super . onOptionsItemSelected ( item ) ; < nl > - } < nl > - < nl > - @ Override < nl > public void onActivityResult ( int requestCode , int resultCode , Intent data ) { < nl > if ( resultCode = = Activity . RESULT _ OK & & requestCode = = 0 & & data ! = null & & data . hasExtra ( Intents . EXTRA _ UID ) ) { < nl > final UserVM userModel = users ( ) . get ( data . getIntExtra ( Intents . EXTRA _ UID , 0 ) ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java < nl > index 0efdef7 . . e9fa9ce 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java < nl > @ @ - 15 , 10 + 15 , 13 @ @ import android . view . MenuItem ; < nl > import android . view . View ; < nl > import android . view . ViewGroup ; < nl > import android . widget . FrameLayout ; < nl > + import android . widget . LinearLayout ; < nl > import android . widget . TextView ; < nl > < nl > import im . actor . core . entity . Peer ; < nl > import im . actor . core . entity . SearchEntity ; < nl > + import im . actor . core . viewmodel . CommandCallback ; < nl > + import im . actor . core . viewmodel . UserVM ; < nl > import im . actor . runtime . generic . mvvm . BindedDisplayList ; < nl > import im . actor . runtime . generic . mvvm . DisplayList ; < nl > import im . actor . sdk . ActorSDK ; < nl > @ @ - 45 , 6 + 48 , 10 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { < nl > private BindedDisplayList < SearchEntity > searchDisplay ; < nl > private final DisplayList . Listener searchListener = ( ) - > onSearchChanged ( ) ; < nl > < nl > + SearchHolder footerSearchHolder ; < nl > + private String searchQuery ; < nl > + private LinearLayout footer ; < nl > + < nl > public GlobalSearchBaseFragment ( ) { < nl > setHasOptionsMenu ( true ) ; < nl > setUnbindOnPause ( true ) ; < nl > @ @ - 137 , 12 + 144 , 50 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { < nl > < nl > @ Override < nl > public boolean onQueryTextChange ( String s ) { < nl > + searchQuery = s . trim ( ) ; < nl > + < nl > if ( isSearchVisible ) { < nl > if ( s . trim ( ) . length ( ) > 0 ) { < nl > + String activeSearchQuery = searchQuery ; < nl > searchDisplay . initSearch ( s . trim ( ) . toLowerCase ( ) , false ) ; < nl > searchAdapter . setQuery ( s . trim ( ) . toLowerCase ( ) ) ; < nl > + messenger ( ) . findUsers ( s ) . start ( new CommandCallback < UserVM [ ] > ( ) { < nl > + @ Override < nl > + public void onResult ( UserVM [ ] res ) { < nl > + int footerVisability = footer . getVisibility ( ) ; < nl > + if ( searchQuery . equals ( activeSearchQuery ) ) { < nl > + boolean showResult = false ; < nl > + UserVM u = null ; < nl > + if ( res . length > 0 ) { < nl > + u = res [ 0 ] ; < nl > + showResult = true ; < nl > + for ( int i = 0 ; i < searchDisplay . getSize ( ) ; i + + ) { < nl > + if ( searchDisplay . getItem ( i ) . getPeer ( ) . equals ( Peer . user ( u . getId ( ) ) ) ) < nl > + showResult = false ; < nl > + break ; < nl > + } < nl > + } < nl > + if ( showResult ) { < nl > + footerSearchHolder . bind ( new SearchEntity ( Peer . user ( u . getId ( ) ) , 0 , u . getAvatar ( ) . get ( ) , u . getName ( ) . get ( ) ) , activeSearchQuery , true ) ; < nl > + showView ( footer ) ; < nl > + } else { < nl > + goneView ( footer ) ; < nl > + } < nl > + } < nl > + if ( footerVisability ! = footer . getVisibility ( ) ) { < nl > + onSearchChanged ( ) ; < nl > + } < nl > + } < nl > + < nl > + @ Override < nl > + public void onError ( Exception e ) { < nl > + < nl > + } < nl > + } ) ; < nl > } else { < nl > searchDisplay . initEmpty ( ) ; < nl > + goneView ( footer ) ; < nl > + < nl > } < nl > } < nl > return false ; < nl > @ @ - 156 , 7 + 201 , 7 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { < nl > goneView ( searchEmptyView ) ; < nl > } else { < nl > goneView ( searchHintView ) ; < nl > - if ( searchDisplay . getSize ( ) = = 0 ) { < nl > + if ( searchDisplay . getSize ( ) = = 0 & & footer . getVisibility ( ) ! = View . VISIBLE ) { < nl > showView ( searchEmptyView ) ; < nl > } else { < nl > goneView ( searchEmptyView ) ; < nl > @ @ - 190 , 6 + 235 , 51 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { < nl > header . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; < nl > recyclerAdapter . addHeaderView ( header ) ; < nl > < nl > + TextView footerTitle = new TextView ( getActivity ( ) ) ; < nl > + footerTitle . setText ( R . string . main _ search _ global _ header ) ; < nl > + footerTitle . setTextSize ( 16 ) ; < nl > + footerTitle . setPadding ( Screen . dp ( 12 ) , Screen . dp ( 8 ) , 0 , Screen . dp ( 8 ) ) ; < nl > + footerTitle . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) ) ; < nl > + footerTitle . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; < nl > + < nl > + footerSearchHolder = new SearchHolder ( getActivity ( ) , new OnItemClickedListener < SearchEntity > ( ) { < nl > + @ Override < nl > + public void onClicked ( SearchEntity item ) { < nl > + int peerId = item . getPeer ( ) . getPeerId ( ) ; < nl > + execute ( messenger ( ) . addContact ( peerId ) , R . string . progress _ common , new CommandCallback < Boolean > ( ) { < nl > + @ Override < nl > + public void onResult ( Boolean res2 ) { < nl > + startActivity ( Intents . openPrivateDialog ( peerId , < nl > + true , < nl > + getActivity ( ) ) ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public void onError ( Exception e ) { < nl > + startActivity ( Intents . openPrivateDialog ( peerId , < nl > + true , < nl > + getActivity ( ) ) ) ; < nl > + } < nl > + } ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public boolean onLongClicked ( SearchEntity item ) { < nl > + return false ; < nl > + } < nl > + } ) ; < nl > + View footerGlobalSearchView = footerSearchHolder . itemView ; < nl > + < nl > + footer = new LinearLayout ( getActivity ( ) ) ; < nl > + footer . setOrientation ( LinearLayout . VERTICAL ) ; < nl > + LinearLayout . LayoutParams params = new LinearLayout . LayoutParams ( Screen . getWidth ( ) , ViewGroup . LayoutParams . WRAP _ CONTENT ) ; < nl > + footer . addView ( footerTitle , params ) ; < nl > + footer . addView ( footerGlobalSearchView , params ) ; < nl > + < nl > + footer . setVisibility ( View . GONE ) ; < nl > + < nl > + recyclerAdapter . addFooterView ( footer ) ; < nl > + < nl > searchList . setAdapter ( recyclerAdapter ) ; < nl > searchDisplay . addListener ( searchListener ) ; < nl > showView ( searchHintView , false ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > index 57c9e38 . . f35bc06 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java < nl > @ @ - 345 , 10 + 345 , 6 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > } < nl > } ) ; < nl > < nl > - if ( noEmails & & noPhones ) { < nl > - contactsContainer . setVisibility ( View . GONE ) ; < nl > - about . findViewById ( R . id . divider ) . setVisibility ( View . INVISIBLE ) ; < nl > - } < nl > < nl > view . findViewById ( R . id . chatSettings ) . setOnClickListener ( new View . OnClickListener ( ) { < nl > @ Override < nl > @ @ - 601 , 7 + 597 , 7 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > } < nl > } ) ; < nl > < nl > - updateActionBar ( scrollView . getScrollY ( ) ) ; < nl > + / / updateActionBar ( scrollView . getScrollY ( ) ) ; < nl > < nl > return view ; < nl > } < nl > @ @ - 726 , 24 + 722 , 6 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements < nl > } < nl > } < nl > < nl > - @ Override < nl > - public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { < nl > - super . onCreateOptionsMenu ( menu , inflater ) ; < nl > - inflater . inflate ( R . menu . my _ profile , menu ) ; < nl > - } < nl > - < nl > - @ Override < nl > - public boolean onOptionsItemSelected ( MenuItem item ) { < nl > - if ( item . getItemId ( ) = = R . id . editProfile ) { < nl > - startActivity ( Intents . editMyName ( getActivity ( ) ) ) ; < nl > - return true ; < nl > - } else if ( item . getItemId ( ) = = R . id . changePhoto ) { < nl > - startActivity ( ViewAvatarActivity . viewAvatar ( myUid ( ) , getActivity ( ) ) ) ; < nl > - return true ; < nl > - } < nl > - < nl > - return super . onOptionsItemSelected ( item ) ; < nl > - } < nl > < nl > @ Override < nl > public View getBeforeNickSettingsView ( ) { < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java < nl > index ab18972 . . a61a53f 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java < nl > @ @ - 3 , 11 + 3 , 18 @ @ package im . actor . sdk . controllers . settings ; < nl > import android . graphics . Color ; < nl > import android . graphics . drawable . ColorDrawable ; < nl > import android . os . Bundle ; < nl > + import android . view . Menu ; < nl > + import android . view . MenuItem ; < nl > < nl > import im . actor . sdk . ActorSDK ; < nl > + import im . actor . sdk . R ; < nl > + import im . actor . sdk . controllers . Intents ; < nl > import im . actor . sdk . controllers . activity . BaseFragmentActivity ; < nl > + import im . actor . sdk . controllers . fragment . preview . ViewAvatarActivity ; < nl > import im . actor . sdk . intents . ActorIntent ; < nl > < nl > + import static im . actor . sdk . util . ActorSDKMessenger . myUid ; < nl > + < nl > public class MyProfileActivity extends BaseFragmentActivity { < nl > @ Override < nl > protected void onCreate ( Bundle savedInstanceState ) { < nl > @ @ - 33 , 4 + 40 , 23 @ @ public class MyProfileActivity extends BaseFragmentActivity { < nl > showFragment ( fragment , false , false ) ; < nl > } < nl > } < nl > + < nl > + @ Override < nl > + public boolean onCreateOptionsMenu ( Menu menu ) { < nl > + getMenuInflater ( ) . inflate ( R . menu . my _ profile , menu ) ; < nl > + return super . onCreateOptionsMenu ( menu ) ; < nl > + } < nl > + < nl > + @ Override < nl > + public boolean onOptionsItemSelected ( MenuItem item ) { < nl > + if ( item . getItemId ( ) = = R . id . editProfile ) { < nl > + startActivity ( Intents . editMyName ( this ) ) ; < nl > + return true ; < nl > + } else if ( item . getItemId ( ) = = R . id . changePhoto ) { < nl > + startActivity ( ViewAvatarActivity . viewAvatar ( myUid ( ) , this ) ) ; < nl > + return true ; < nl > + } < nl > + < nl > + return super . onOptionsItemSelected ( item ) ; < nl > + } < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml < nl > index 95264da . . 3a58f6a 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml < nl > @ @ - 18 , 6 + 18 , 7 @ @ < nl > < LinearLayout < nl > android : layout _ width = " match _ parent " < nl > android : layout _ height = " wrap _ content " < nl > + android : focusableInTouchMode = " true " < nl > android : orientation = " vertical " > < nl > < nl > < FrameLayout

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / AndroidManifest . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / AndroidManifest . xml 
 index 84dc7a8 . . 8bf8922 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / AndroidManifest . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / AndroidManifest . xml 
 @ @ - 152 , 7 + 152 , 7 @ @ 
 android : windowSoftInputMode = " adjustNothing | stateAlwaysHidden " / > 
 
 < activity 
 - android : name = " . controllers . group . GroupAdminActivity " 
 + android : name = " . controllers . group . GroupTypeActivity " 
 android : configChanges = " keyboard | keyboardHidden | orientation | screenSize " 
 android : theme = " @ style / CommonActivityTheme " 
 android : windowSoftInputMode = " adjustNothing | stateAlwaysHidden " / > 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 index 3ba0c44 . . 17f3a90 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 @ @ - 14 , 6 + 14 , 7 @ @ import com . facebook . drawee . backends . pipeline . Fresco ; 
 import com . facebook . imagepipeline . core . ImagePipelineConfig ; 
 
 import org . jetbrains . annotations . NotNull ; 
 + import org . jetbrains . annotations . Nullable ; 
 
 import java . util . Locale ; 
 import java . util . TimeZone ; 
 @ @ - 133 , 6 + 134 , 11 @ @ public class ActorSDK { 
 * / 
 private String inviteUrl = " https : / / actor . im / dl " ; 
 / * * 
 + * Invite url 
 + * / 
 + @ Nullable 
 + private String groupInvitePrefix = " actor . im / join / " ; 
 + / * * 
 * Help phone 
 * / 
 private String helpPhone = " 75551234567 " ; 
 @ @ - 520 , 6 + 526 , 25 @ @ public class ActorSDK { 
 } 
 
 / * * 
 + * Getting Group Invite Prefix 
 + * 
 + * @ return group invite prefix 
 + * / 
 + @ Nullable 
 + public String getGroupInvitePrefix ( ) { 
 + return groupInvitePrefix ; 
 + } 
 + 
 + / * * 
 + * Setting Group Invite Prefix 
 + * 
 + * @ param groupInvitePrefix group invite prefix 
 + * / 
 + public void setGroupInvitePrefix ( @ Nullable String groupInvitePrefix ) { 
 + this . groupInvitePrefix = groupInvitePrefix ; 
 + } 
 + 
 + / * * 
 * Getting Push Registration Id 
 * 
 * @ return pushId 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminActivity . java 
 deleted file mode 100644 
 index 3aab5e0 . . 0000000 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminActivity . java 
 + + + / dev / null 
 @ @ - 1 , 19 + 0 , 0 @ @ 
 - package im . actor . sdk . controllers . group ; 
 - 
 - import android . os . Bundle ; 
 - 
 - import im . actor . sdk . controllers . Intents ; 
 - import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 - 
 - public class GroupAdminActivity extends BaseFragmentActivity { 
 - 
 - @ Override 
 - protected void onCreate ( Bundle savedInstanceState ) { 
 - super . onCreate ( savedInstanceState ) ; 
 - 
 - if ( savedInstanceState = = null ) { 
 - showFragment ( GroupAdminFragment . create ( 
 - getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ) , false ) ; 
 - } 
 - } 
 - } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminFragment . java 
 deleted file mode 100644 
 index 770783d . . 0000000 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupAdminFragment . java 
 + + + / dev / null 
 @ @ - 1 , 158 + 0 , 0 @ @ 
 - package im . actor . sdk . controllers . group ; 
 - 
 - import android . os . Bundle ; 
 - import android . support . annotation . Nullable ; 
 - import android . view . LayoutInflater ; 
 - import android . view . Menu ; 
 - import android . view . MenuInflater ; 
 - import android . view . MenuItem ; 
 - import android . view . View ; 
 - import android . view . ViewGroup ; 
 - import android . widget . EditText ; 
 - import android . widget . RadioButton ; 
 - import android . widget . TextView ; 
 - import android . widget . Toast ; 
 - 
 - import im . actor . core . viewmodel . GroupVM ; 
 - import im . actor . sdk . R ; 
 - import im . actor . sdk . controllers . BaseFragment ; 
 - import im . actor . sdk . util . Fonts ; 
 - 
 - import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 - 
 - public class GroupAdminFragment extends BaseFragment { 
 - 
 - public static GroupAdminFragment create ( int groupId ) { 
 - Bundle bundle = new Bundle ( ) ; 
 - bundle . putInt ( " groupId " , groupId ) ; 
 - GroupAdminFragment editFragment = new GroupAdminFragment ( ) ; 
 - editFragment . setArguments ( bundle ) ; 
 - return editFragment ; 
 - } 
 - 
 - private EditText publicShortName ; 
 - private GroupVM groupVM ; 
 - private boolean isPublic ; 
 - 
 - public GroupAdminFragment ( ) { 
 - setTitle ( R . string . group _ title ) ; 
 - setRootFragment ( true ) ; 
 - setHomeAsUp ( true ) ; 
 - setShowHome ( true ) ; 
 - } 
 - 
 - @ Override 
 - public void onCreate ( Bundle saveInstance ) { 
 - super . onCreate ( saveInstance ) ; 
 - 
 - groupVM = messenger ( ) . getGroup ( getArguments ( ) . getInt ( " groupId " ) ) ; 
 - } 
 - 
 - @ Nullable 
 - @ Override 
 - public View onCreateView ( LayoutInflater inflater , @ Nullable ViewGroup container , @ Nullable Bundle savedInstanceState ) { 
 - View res = inflater . inflate ( R . layout . fragment _ administration , container , false ) ; 
 - res . setBackgroundColor ( style . getBackyardBackgroundColor ( ) ) ; 
 - TextView publicTitle = ( TextView ) res . findViewById ( R . id . publicTitle ) ; 
 - publicTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 - TextView publicDescription = ( TextView ) res . findViewById ( R . id . publicDescription ) ; 
 - publicDescription . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 - TextView privateTitle = ( TextView ) res . findViewById ( R . id . privateTitle ) ; 
 - privateTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 - TextView privateDescription = ( TextView ) res . findViewById ( R . id . privateDescription ) ; 
 - privateDescription . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 - TextView publicLinkPrefix = ( TextView ) res . findViewById ( R . id . publicLinkPrefix ) ; 
 - publicLinkPrefix . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 - publicLinkPrefix . setTypeface ( Fonts . medium ( ) ) ; 
 - RadioButton publicRadio = ( RadioButton ) res . findViewById ( R . id . publicRadio ) ; 
 - RadioButton privateRadio = ( RadioButton ) res . findViewById ( R . id . privateRadio ) ; 
 - publicShortName = ( EditText ) res . findViewById ( R . id . publicLink ) ; 
 - View publicLinkContainer = res . findViewById ( R . id . publicContainer ) ; 
 - View publicShadowTop = res . findViewById ( R . id . shadowTop ) ; 
 - View publicShadowBottom = res . findViewById ( R . id . shadowBottom ) ; 
 - 
 - if ( groupVM . getShortName ( ) . get ( ) ! = null ) { 
 - publicRadio . setChecked ( true ) ; 
 - privateRadio . setChecked ( false ) ; 
 - publicLinkContainer . setVisibility ( View . VISIBLE ) ; 
 - publicShadowTop . setVisibility ( View . VISIBLE ) ; 
 - publicShadowBottom . setVisibility ( View . VISIBLE ) ; 
 - publicShortName . setText ( groupVM . getShortName ( ) . get ( ) ) ; 
 - isPublic = true ; 
 - } else { 
 - publicRadio . setChecked ( false ) ; 
 - privateRadio . setChecked ( true ) ; 
 - publicLinkContainer . setVisibility ( View . GONE ) ; 
 - publicShadowTop . setVisibility ( View . GONE ) ; 
 - publicShadowBottom . setVisibility ( View . GONE ) ; 
 - publicShortName . setText ( null ) ; 
 - isPublic = false ; 
 - } 
 - View . OnClickListener publicClick = view - > { 
 - if ( ! isPublic ) { 
 - isPublic = true ; 
 - publicRadio . setChecked ( true ) ; 
 - privateRadio . setChecked ( false ) ; 
 - publicLinkContainer . setVisibility ( View . VISIBLE ) ; 
 - publicShadowTop . setVisibility ( View . VISIBLE ) ; 
 - publicShadowBottom . setVisibility ( View . VISIBLE ) ; 
 - publicShortName . setText ( groupVM . getShortName ( ) . get ( ) ) ; 
 - } 
 - } ; 
 - View . OnClickListener privateClick = view - > { 
 - if ( isPublic ) { 
 - isPublic = false ; 
 - publicRadio . setChecked ( false ) ; 
 - privateRadio . setChecked ( true ) ; 
 - publicLinkContainer . setVisibility ( View . GONE ) ; 
 - publicShadowTop . setVisibility ( View . GONE ) ; 
 - publicShadowBottom . setVisibility ( View . GONE ) ; 
 - publicShortName . setText ( null ) ; 
 - } 
 - } ; 
 - publicRadio . setOnClickListener ( publicClick ) ; 
 - privateRadio . setOnClickListener ( privateClick ) ; 
 - 
 - return res ; 
 - } 
 - 
 - @ Override 
 - public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { 
 - super . onCreateOptionsMenu ( menu , inflater ) ; 
 - inflater . inflate ( R . menu . next , menu ) ; 
 - } 
 - 
 - @ Override 
 - public boolean onOptionsItemSelected ( MenuItem item ) { 
 - if ( item . getItemId ( ) = = R . id . next ) { 
 - if ( isPublic ) { 
 - String nShortName = publicShortName . getText ( ) . toString ( ) . trim ( ) ; 
 - if ( nShortName . length ( ) = = 0 ) { 
 - finishActivity ( ) ; 
 - return true ; 
 - } 
 - if ( nShortName . equals ( groupVM . getShortName ( ) . get ( ) ) ) { 
 - return true ; 
 - } 
 - execute ( messenger ( ) . editGroupShortName ( groupVM . getId ( ) , nShortName ) . then ( r - > { 
 - finishActivity ( ) ; 
 - } ) . failure ( e - > { 
 - Toast . makeText ( getActivity ( ) , " Unable to change group short name " , Toast . LENGTH _ SHORT ) . show ( ) ; 
 - } ) ) ; 
 - } else { 
 - if ( groupVM . getShortName ( ) . get ( ) = = null ) { 
 - finishActivity ( ) ; 
 - return true ; 
 - } else { 
 - execute ( messenger ( ) . editGroupShortName ( groupVM . getId ( ) , null ) . then ( r - > { 
 - finishActivity ( ) ; 
 - } ) . failure ( e - > { 
 - Toast . makeText ( getActivity ( ) , " Unable to change group short name " , Toast . LENGTH _ SHORT ) . show ( ) ; 
 - } ) ) ; 
 - } 
 - } 
 - return true ; 
 - } 
 - return super . onOptionsItemSelected ( item ) ; 
 - } 
 - } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 index 225efd1 . . 68d4014 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 @ @ - 31 , 9 + 31 , 6 @ @ import im . actor . core . viewmodel . GroupVM ; 
 import im . actor . core . viewmodel . UserPhone ; 
 import im . actor . core . viewmodel . UserVM ; 
 import im . actor . runtime . actors . messages . Void ; 
 - import im . actor . runtime . mvvm . Value ; 
 - import im . actor . runtime . mvvm . ValueDoubleChangedListener ; 
 - import im . actor . runtime . mvvm . ValueDoubleListener ; 
 import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . ActorSDKLauncher ; 
 import im . actor . sdk . ActorStyle ; 
 @ @ - 148 , 7 + 145 , 6 @ @ public class GroupInfoFragment extends BaseFragment { 
 administrationAction . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 leaveAction . setTextColor ( style . getTextDangerColor ( ) ) ; 
 
 - 
 if ( groupVM . getGroupType ( ) = = GroupType . CHANNEL ) { 
 leaveAction . setText ( R . string . group _ leave _ channel ) ; 
 } else { 
 @ @ - 181 , 7 + 177 , 14 @ @ public class GroupInfoFragment extends BaseFragment { 
 bind ( groupVM . getShortName ( ) , shortName - > { 
 if ( shortName ! = null ) { 
 shortNameView . setText ( " @ " + shortName ) ; 
 - shortLinkView . setText ( " actor . im / join / " + shortName ) ; 
 + 
 + String prefix = ActorSDK . sharedActor ( ) . getGroupInvitePrefix ( ) ; 
 + if ( prefix ! = null ) { 
 + shortLinkView . setText ( prefix + shortName ) ; 
 + shortLinkView . setVisibility ( View . VISIBLE ) ; 
 + } else { 
 + shortLinkView . setVisibility ( View . GONE ) ; 
 + } 
 } 
 shortNameCont . setVisibility ( shortName ! = null ? View . VISIBLE : View . GONE ) ; 
 } ) ; 
 @ @ - 222 , 7 + 225 , 7 @ @ public class GroupInfoFragment extends BaseFragment { 
 } 
 } ) ; 
 administrationAction . setOnClickListener ( view - > { 
 - startActivity ( new Intent ( getActivity ( ) , GroupAdminActivity . class ) 
 + startActivity ( new Intent ( getActivity ( ) , GroupTypeActivity . class ) 
 . putExtra ( Intents . EXTRA _ GROUP _ ID , chatId ) ) ; 
 } ) ; 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeActivity . java 
 new file mode 100644 
 index 0000000 . . 73e7173 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeActivity . java 
 @ @ - 0 , 0 + 1 , 19 @ @ 
 + package im . actor . sdk . controllers . group ; 
 + 
 + import android . os . Bundle ; 
 + 
 + import im . actor . sdk . controllers . Intents ; 
 + import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 + 
 + public class GroupTypeActivity extends BaseFragmentActivity { 
 + 
 + @ Override 
 + protected void onCreate ( Bundle savedInstanceState ) { 
 + super . onCreate ( savedInstanceState ) ; 
 + 
 + if ( savedInstanceState = = null ) { 
 + showFragment ( GroupTypeFragment . create ( 
 + getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ) , false ) ; 
 + } 
 + } 
 + } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeFragment . java 
 new file mode 100644 
 index 0000000 . . 8f920d2 
 - - - / dev / null 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupTypeFragment . java 
 @ @ - 0 , 0 + 1 , 158 @ @ 
 + package im . actor . sdk . controllers . group ; 
 + 
 + import android . os . Bundle ; 
 + import android . support . annotation . Nullable ; 
 + import android . view . LayoutInflater ; 
 + import android . view . Menu ; 
 + import android . view . MenuInflater ; 
 + import android . view . MenuItem ; 
 + import android . view . View ; 
 + import android . view . ViewGroup ; 
 + import android . widget . EditText ; 
 + import android . widget . RadioButton ; 
 + import android . widget . TextView ; 
 + import android . widget . Toast ; 
 + 
 + import im . actor . core . viewmodel . GroupVM ; 
 + import im . actor . sdk . R ; 
 + import im . actor . sdk . controllers . BaseFragment ; 
 + import im . actor . sdk . util . Fonts ; 
 + 
 + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 + 
 + public class GroupTypeFragment extends BaseFragment { 
 + 
 + public static GroupTypeFragment create ( int groupId ) { 
 + Bundle bundle = new Bundle ( ) ; 
 + bundle . putInt ( " groupId " , groupId ) ; 
 + GroupTypeFragment editFragment = new GroupTypeFragment ( ) ; 
 + editFragment . setArguments ( bundle ) ; 
 + return editFragment ; 
 + } 
 + 
 + private EditText publicShortName ; 
 + private GroupVM groupVM ; 
 + private boolean isPublic ; 
 + 
 + public GroupTypeFragment ( ) { 
 + setTitle ( R . string . group _ title ) ; 
 + setRootFragment ( true ) ; 
 + setHomeAsUp ( true ) ; 
 + setShowHome ( true ) ; 
 + } 
 + 
 + @ Override 
 + public void onCreate ( Bundle saveInstance ) { 
 + super . onCreate ( saveInstance ) ; 
 + 
 + groupVM = messenger ( ) . getGroup ( getArguments ( ) . getInt ( " groupId " ) ) ; 
 + } 
 + 
 + @ Nullable 
 + @ Override 
 + public View onCreateView ( LayoutInflater inflater , @ Nullable ViewGroup container , @ Nullable Bundle savedInstanceState ) { 
 + View res = inflater . inflate ( R . layout . fragment _ administration , container , false ) ; 
 + res . setBackgroundColor ( style . getBackyardBackgroundColor ( ) ) ; 
 + TextView publicTitle = ( TextView ) res . findViewById ( R . id . publicTitle ) ; 
 + publicTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 + TextView publicDescription = ( TextView ) res . findViewById ( R . id . publicDescription ) ; 
 + publicDescription . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 + TextView privateTitle = ( TextView ) res . findViewById ( R . id . privateTitle ) ; 
 + privateTitle . setTextColor ( style . getTextPrimaryColor ( ) ) ; 
 + TextView privateDescription = ( TextView ) res . findViewById ( R . id . privateDescription ) ; 
 + privateDescription . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 + TextView publicLinkPrefix = ( TextView ) res . findViewById ( R . id . publicLinkPrefix ) ; 
 + publicLinkPrefix . setTextColor ( style . getTextSecondaryColor ( ) ) ; 
 + publicLinkPrefix . setTypeface ( Fonts . medium ( ) ) ; 
 + RadioButton publicRadio = ( RadioButton ) res . findViewById ( R . id . publicRadio ) ; 
 + RadioButton privateRadio = ( RadioButton ) res . findViewById ( R . id . privateRadio ) ; 
 + publicShortName = ( EditText ) res . findViewById ( R . id . publicLink ) ; 
 + View publicLinkContainer = res . findViewById ( R . id . publicContainer ) ; 
 + View publicShadowTop = res . findViewById ( R . id . shadowTop ) ; 
 + View publicShadowBottom = res . findViewById ( R . id . shadowBottom ) ; 
 + 
 + if ( groupVM . getShortName ( ) . get ( ) ! = null ) { 
 + publicRadio . setChecked ( true ) ; 
 + privateRadio . setChecked ( false ) ; 
 + publicLinkContainer . setVisibility ( View . VISIBLE ) ; 
 + publicShadowTop . setVisibility ( View . VISIBLE ) ; 
 + publicShadowBottom . setVisibility ( View . VISIBLE ) ; 
 + publicShortName . setText ( groupVM . getShortName ( ) . get ( ) ) ; 
 + isPublic = true ; 
 + } else { 
 + publicRadio . setChecked ( false ) ; 
 + privateRadio . setChecked ( true ) ; 
 + publicLinkContainer . setVisibility ( View . GONE ) ; 
 + publicShadowTop . setVisibility ( View . GONE ) ; 
 + publicShadowBottom . setVisibility ( View . GONE ) ; 
 + publicShortName . setText ( null ) ; 
 + isPublic = false ; 
 + } 
 + View . OnClickListener publicClick = view - > { 
 + if ( ! isPublic ) { 
 + isPublic = true ; 
 + publicRadio . setChecked ( true ) ; 
 + privateRadio . setChecked ( false ) ; 
 + publicLinkContainer . setVisibility ( View . VISIBLE ) ; 
 + publicShadowTop . setVisibility ( View . VISIBLE ) ; 
 + publicShadowBottom . setVisibility ( View . VISIBLE ) ; 
 + publicShortName . setText ( groupVM . getShortName ( ) . get ( ) ) ; 
 + } 
 + } ; 
 + View . OnClickListener privateClick = view - > { 
 + if ( isPublic ) { 
 + isPublic = false ; 
 + publicRadio . setChecked ( false ) ; 
 + privateRadio . setChecked ( true ) ; 
 + publicLinkContainer . setVisibility ( View . GONE ) ; 
 + publicShadowTop . setVisibility ( View . GONE ) ; 
 + publicShadowBottom . setVisibility ( View . GONE ) ; 
 + publicShortName . setText ( null ) ; 
 + } 
 + } ; 
 + publicRadio . setOnClickListener ( publicClick ) ; 
 + privateRadio . setOnClickListener ( privateClick ) ; 
 + 
 + return res ; 
 + } 
 + 
 + @ Override 
 + public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { 
 + super . onCreateOptionsMenu ( menu , inflater ) ; 
 + inflater . inflate ( R . menu . next , menu ) ; 
 + } 
 + 
 + @ Override 
 + public boolean onOptionsItemSelected ( MenuItem item ) { 
 + if ( item . getItemId ( ) = = R . id . next ) { 
 + if ( isPublic ) { 
 + String nShortName = publicShortName . getText ( ) . toString ( ) . trim ( ) ; 
 + if ( nShortName . length ( ) = = 0 ) { 
 + finishActivity ( ) ; 
 + return true ; 
 + } 
 + if ( nShortName . equals ( groupVM . getShortName ( ) . get ( ) ) ) { 
 + return true ; 
 + } 
 + execute ( messenger ( ) . editGroupShortName ( groupVM . getId ( ) , nShortName ) . then ( r - > { 
 + finishActivity ( ) ; 
 + } ) . failure ( e - > { 
 + Toast . makeText ( getActivity ( ) , " Unable to change group short name " , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + } ) ) ; 
 + } else { 
 + if ( groupVM . getShortName ( ) . get ( ) = = null ) { 
 + finishActivity ( ) ; 
 + return true ; 
 + } else { 
 + execute ( messenger ( ) . editGroupShortName ( groupVM . getId ( ) , null ) . then ( r - > { 
 + finishActivity ( ) ; 
 + } ) . failure ( e - > { 
 + Toast . makeText ( getActivity ( ) , " Unable to change group short name " , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + } ) ) ; 
 + } 
 + } 
 + return true ; 
 + } 
 + return super . onOptionsItemSelected ( item ) ; 
 + } 
 + }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 index cbd1b86 . . 4d865cb 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 @ @ - 163 , 13 + 163 , 6 @ @ public interface ActorSDKDelegate { 
 
 
 / * * 
 - * Is Actor pushes used for this app - added for testing 
 - * 
 - * @ return is Actor push id used 
 - * / 
 - boolean useActorPush ( ) ; 
 - 
 - / * * 
 * Method for hacking share menu in dialog 
 * 
 * @ param shareMenu share menu 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 index f591d2a . . 63cd509 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 @ @ - 168 , 16 + 168 , 6 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { 
 } 
 
 / * * 
 - * Is Actor pushes used for this app - added for testing 
 - * 
 - * @ return is Actor push id used 
 - * / 
 - @ Override 
 - public boolean useActorPush ( ) { 
 - return true ; 
 - } 
 - 
 - / * * 
 * Method for hacking share menu in dialog 
 * 
 * @ param shareMenu share menu 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java 
 index 8edc540 . . 4907cd2 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoActivity . java 
 @ @ - 1 , 21 + 1 , 36 @ @ 
 package im . actor . sdk . controllers . group ; 
 
 + import android . app . AlertDialog ; 
 + import android . content . DialogInterface ; 
 + import android . content . Intent ; 
 import android . graphics . Color ; 
 import android . graphics . drawable . ColorDrawable ; 
 import android . os . Bundle ; 
 + import android . view . Menu ; 
 + import android . view . MenuInflater ; 
 + import android . view . MenuItem ; 
 
 + import im . actor . core . viewmodel . GroupVM ; 
 import im . actor . sdk . ActorSDK ; 
 + import im . actor . sdk . R ; 
 import im . actor . sdk . controllers . Intents ; 
 import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 + import im . actor . sdk . controllers . fragment . preview . ViewAvatarActivity ; 
 import im . actor . sdk . controllers . settings . BaseGroupInfoActivity ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . groups ; 
 + import static im . actor . sdk . util . ActorSDKMessenger . messenger ; 
 + 
 public class GroupInfoActivity extends BaseFragmentActivity { 
 
 + private GroupVM groupInfo ; 
 + private int chatId ; 
 + 
 @ Override 
 protected void onCreate ( Bundle savedInstanceState ) { 
 super . onCreate ( savedInstanceState ) ; 
 - int chatId = getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ; 
 - 
 + chatId = getIntent ( ) . getIntExtra ( Intents . EXTRA _ GROUP _ ID , 0 ) ; 
 + groupInfo = groups ( ) . get ( chatId ) ; 
 getSupportActionBar ( ) . setBackgroundDrawable ( new ColorDrawable ( Color . TRANSPARENT ) ) ; 
 getSupportActionBar ( ) . setTitle ( null ) ; 
 
 @ @ - 31 , 4 + 46 , 40 @ @ public class GroupInfoActivity extends BaseFragmentActivity { 
 showFragment ( fragment , false , false ) ; 
 } 
 } 
 + 
 + @ Override 
 + public boolean onCreateOptionsMenu ( Menu menu ) { 
 + if ( groupInfo . isMember ( ) . get ( ) ) { 
 + getMenuInflater ( ) . inflate ( R . menu . group _ info , menu ) ; 
 + } 
 + return true ; 
 + } 
 + 
 + @ Override 
 + public boolean onOptionsItemSelected ( MenuItem item ) { 
 + if ( item . getItemId ( ) = = R . id . leaveGroup ) { 
 + new AlertDialog . Builder ( this ) 
 + . setMessage ( getString ( R . string . alert _ leave _ group _ message ) . replace ( " % 1 $ s " , 
 + groupInfo . getName ( ) . get ( ) ) ) 
 + . setPositiveButton ( R . string . alert _ leave _ group _ yes , new DialogInterface . OnClickListener ( ) { 
 + @ Override 
 + public void onClick ( DialogInterface dialog2 , int which ) { 
 + execute ( messenger ( ) . leaveGroup ( chatId ) ) ; 
 + } 
 + } ) 
 + . setNegativeButton ( R . string . dialog _ cancel , null ) 
 + . show ( ) 
 + . setCanceledOnTouchOutside ( true ) ; 
 + 
 + return true ; 
 + } else if ( item . getItemId ( ) = = R . id . addMember ) { 
 + startActivity ( new Intent ( this , AddMemberActivity . class ) 
 + . putExtra ( " GROUP _ ID " , chatId ) ) ; 
 + } else if ( item . getItemId ( ) = = R . id . editTitle ) { 
 + startActivity ( Intents . editGroupTitle ( chatId , this ) ) ; 
 + } else if ( item . getItemId ( ) = = R . id . changePhoto ) { 
 + startActivity ( ViewAvatarActivity . viewGroupAvatar ( chatId , this ) ) ; 
 + } 
 + return super . onOptionsItemSelected ( item ) ; 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 index c58a224 . . 36170a7 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / group / GroupInfoFragment . java 
 @ @ - 424 , 42 + 424 , 6 @ @ public class GroupInfoFragment extends BaseFragment { 
 } 
 
 @ Override 
 - public void onCreateOptionsMenu ( Menu menu , MenuInflater menuInflater ) { 
 - super . onCreateOptionsMenu ( menu , menuInflater ) ; 
 - if ( groupInfo . isMember ( ) . get ( ) ) { 
 - menuInflater . inflate ( R . menu . group _ info , menu ) ; 
 - } 
 - } 
 - 
 - @ Override 
 - public boolean onOptionsItemSelected ( MenuItem item ) { 
 - if ( item . getItemId ( ) = = R . id . leaveGroup ) { 
 - new AlertDialog . Builder ( getActivity ( ) ) 
 - . setMessage ( getString ( R . string . alert _ leave _ group _ message ) . replace ( " % 1 $ s " , 
 - groupInfo . getName ( ) . get ( ) ) ) 
 - . setPositiveButton ( R . string . alert _ leave _ group _ yes , new DialogInterface . OnClickListener ( ) { 
 - @ Override 
 - public void onClick ( DialogInterface dialog2 , int which ) { 
 - execute ( messenger ( ) . leaveGroup ( chatId ) ) ; 
 - } 
 - } ) 
 - . setNegativeButton ( R . string . dialog _ cancel , null ) 
 - . show ( ) 
 - . setCanceledOnTouchOutside ( true ) ; 
 - 
 - return true ; 
 - } else if ( item . getItemId ( ) = = R . id . addMember ) { 
 - startActivity ( new Intent ( getActivity ( ) , AddMemberActivity . class ) 
 - . putExtra ( " GROUP _ ID " , chatId ) ) ; 
 - } else if ( item . getItemId ( ) = = R . id . editTitle ) { 
 - startActivity ( Intents . editGroupTitle ( chatId , getActivity ( ) ) ) ; 
 - } else if ( item . getItemId ( ) = = R . id . changePhoto ) { 
 - startActivity ( ViewAvatarActivity . viewGroupAvatar ( chatId , getActivity ( ) ) ) ; 
 - } 
 - return super . onOptionsItemSelected ( item ) ; 
 - } 
 - 
 - @ Override 
 public void onActivityResult ( int requestCode , int resultCode , Intent data ) { 
 if ( resultCode = = Activity . RESULT _ OK & & requestCode = = 0 & & data ! = null & & data . hasExtra ( Intents . EXTRA _ UID ) ) { 
 final UserVM userModel = users ( ) . get ( data . getIntExtra ( Intents . EXTRA _ UID , 0 ) ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java 
 index 0efdef7 . . e9fa9ce 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / search / GlobalSearchBaseFragment . java 
 @ @ - 15 , 10 + 15 , 13 @ @ import android . view . MenuItem ; 
 import android . view . View ; 
 import android . view . ViewGroup ; 
 import android . widget . FrameLayout ; 
 + import android . widget . LinearLayout ; 
 import android . widget . TextView ; 
 
 import im . actor . core . entity . Peer ; 
 import im . actor . core . entity . SearchEntity ; 
 + import im . actor . core . viewmodel . CommandCallback ; 
 + import im . actor . core . viewmodel . UserVM ; 
 import im . actor . runtime . generic . mvvm . BindedDisplayList ; 
 import im . actor . runtime . generic . mvvm . DisplayList ; 
 import im . actor . sdk . ActorSDK ; 
 @ @ - 45 , 6 + 48 , 10 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { 
 private BindedDisplayList < SearchEntity > searchDisplay ; 
 private final DisplayList . Listener searchListener = ( ) - > onSearchChanged ( ) ; 
 
 + SearchHolder footerSearchHolder ; 
 + private String searchQuery ; 
 + private LinearLayout footer ; 
 + 
 public GlobalSearchBaseFragment ( ) { 
 setHasOptionsMenu ( true ) ; 
 setUnbindOnPause ( true ) ; 
 @ @ - 137 , 12 + 144 , 50 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { 
 
 @ Override 
 public boolean onQueryTextChange ( String s ) { 
 + searchQuery = s . trim ( ) ; 
 + 
 if ( isSearchVisible ) { 
 if ( s . trim ( ) . length ( ) > 0 ) { 
 + String activeSearchQuery = searchQuery ; 
 searchDisplay . initSearch ( s . trim ( ) . toLowerCase ( ) , false ) ; 
 searchAdapter . setQuery ( s . trim ( ) . toLowerCase ( ) ) ; 
 + messenger ( ) . findUsers ( s ) . start ( new CommandCallback < UserVM [ ] > ( ) { 
 + @ Override 
 + public void onResult ( UserVM [ ] res ) { 
 + int footerVisability = footer . getVisibility ( ) ; 
 + if ( searchQuery . equals ( activeSearchQuery ) ) { 
 + boolean showResult = false ; 
 + UserVM u = null ; 
 + if ( res . length > 0 ) { 
 + u = res [ 0 ] ; 
 + showResult = true ; 
 + for ( int i = 0 ; i < searchDisplay . getSize ( ) ; i + + ) { 
 + if ( searchDisplay . getItem ( i ) . getPeer ( ) . equals ( Peer . user ( u . getId ( ) ) ) ) 
 + showResult = false ; 
 + break ; 
 + } 
 + } 
 + if ( showResult ) { 
 + footerSearchHolder . bind ( new SearchEntity ( Peer . user ( u . getId ( ) ) , 0 , u . getAvatar ( ) . get ( ) , u . getName ( ) . get ( ) ) , activeSearchQuery , true ) ; 
 + showView ( footer ) ; 
 + } else { 
 + goneView ( footer ) ; 
 + } 
 + } 
 + if ( footerVisability ! = footer . getVisibility ( ) ) { 
 + onSearchChanged ( ) ; 
 + } 
 + } 
 + 
 + @ Override 
 + public void onError ( Exception e ) { 
 + 
 + } 
 + } ) ; 
 } else { 
 searchDisplay . initEmpty ( ) ; 
 + goneView ( footer ) ; 
 + 
 } 
 } 
 return false ; 
 @ @ - 156 , 7 + 201 , 7 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { 
 goneView ( searchEmptyView ) ; 
 } else { 
 goneView ( searchHintView ) ; 
 - if ( searchDisplay . getSize ( ) = = 0 ) { 
 + if ( searchDisplay . getSize ( ) = = 0 & & footer . getVisibility ( ) ! = View . VISIBLE ) { 
 showView ( searchEmptyView ) ; 
 } else { 
 goneView ( searchEmptyView ) ; 
 @ @ - 190 , 6 + 235 , 51 @ @ public abstract class GlobalSearchBaseFragment extends BaseFragment { 
 header . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getMainBackgroundColor ( ) ) ; 
 recyclerAdapter . addHeaderView ( header ) ; 
 
 + TextView footerTitle = new TextView ( getActivity ( ) ) ; 
 + footerTitle . setText ( R . string . main _ search _ global _ header ) ; 
 + footerTitle . setTextSize ( 16 ) ; 
 + footerTitle . setPadding ( Screen . dp ( 12 ) , Screen . dp ( 8 ) , 0 , Screen . dp ( 8 ) ) ; 
 + footerTitle . setBackgroundColor ( ActorSDK . sharedActor ( ) . style . getBackyardBackgroundColor ( ) ) ; 
 + footerTitle . setTextColor ( ActorSDK . sharedActor ( ) . style . getTextSecondaryColor ( ) ) ; 
 + 
 + footerSearchHolder = new SearchHolder ( getActivity ( ) , new OnItemClickedListener < SearchEntity > ( ) { 
 + @ Override 
 + public void onClicked ( SearchEntity item ) { 
 + int peerId = item . getPeer ( ) . getPeerId ( ) ; 
 + execute ( messenger ( ) . addContact ( peerId ) , R . string . progress _ common , new CommandCallback < Boolean > ( ) { 
 + @ Override 
 + public void onResult ( Boolean res2 ) { 
 + startActivity ( Intents . openPrivateDialog ( peerId , 
 + true , 
 + getActivity ( ) ) ) ; 
 + } 
 + 
 + @ Override 
 + public void onError ( Exception e ) { 
 + startActivity ( Intents . openPrivateDialog ( peerId , 
 + true , 
 + getActivity ( ) ) ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Override 
 + public boolean onLongClicked ( SearchEntity item ) { 
 + return false ; 
 + } 
 + } ) ; 
 + View footerGlobalSearchView = footerSearchHolder . itemView ; 
 + 
 + footer = new LinearLayout ( getActivity ( ) ) ; 
 + footer . setOrientation ( LinearLayout . VERTICAL ) ; 
 + LinearLayout . LayoutParams params = new LinearLayout . LayoutParams ( Screen . getWidth ( ) , ViewGroup . LayoutParams . WRAP _ CONTENT ) ; 
 + footer . addView ( footerTitle , params ) ; 
 + footer . addView ( footerGlobalSearchView , params ) ; 
 + 
 + footer . setVisibility ( View . GONE ) ; 
 + 
 + recyclerAdapter . addFooterView ( footer ) ; 
 + 
 searchList . setAdapter ( recyclerAdapter ) ; 
 searchDisplay . addListener ( searchListener ) ; 
 showView ( searchHintView , false ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 index 57c9e38 . . f35bc06 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / BaseActorSettingsFragment . java 
 @ @ - 345 , 10 + 345 , 6 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 } 
 } ) ; 
 
 - if ( noEmails & & noPhones ) { 
 - contactsContainer . setVisibility ( View . GONE ) ; 
 - about . findViewById ( R . id . divider ) . setVisibility ( View . INVISIBLE ) ; 
 - } 
 
 view . findViewById ( R . id . chatSettings ) . setOnClickListener ( new View . OnClickListener ( ) { 
 @ Override 
 @ @ - 601 , 7 + 597 , 7 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 } 
 } ) ; 
 
 - updateActionBar ( scrollView . getScrollY ( ) ) ; 
 + / / updateActionBar ( scrollView . getScrollY ( ) ) ; 
 
 return view ; 
 } 
 @ @ - 726 , 24 + 722 , 6 @ @ public abstract class BaseActorSettingsFragment extends BaseFragment implements 
 } 
 } 
 
 - @ Override 
 - public void onCreateOptionsMenu ( Menu menu , MenuInflater inflater ) { 
 - super . onCreateOptionsMenu ( menu , inflater ) ; 
 - inflater . inflate ( R . menu . my _ profile , menu ) ; 
 - } 
 - 
 - @ Override 
 - public boolean onOptionsItemSelected ( MenuItem item ) { 
 - if ( item . getItemId ( ) = = R . id . editProfile ) { 
 - startActivity ( Intents . editMyName ( getActivity ( ) ) ) ; 
 - return true ; 
 - } else if ( item . getItemId ( ) = = R . id . changePhoto ) { 
 - startActivity ( ViewAvatarActivity . viewAvatar ( myUid ( ) , getActivity ( ) ) ) ; 
 - return true ; 
 - } 
 - 
 - return super . onOptionsItemSelected ( item ) ; 
 - } 
 
 @ Override 
 public View getBeforeNickSettingsView ( ) { 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java 
 index ab18972 . . a61a53f 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / settings / MyProfileActivity . java 
 @ @ - 3 , 11 + 3 , 18 @ @ package im . actor . sdk . controllers . settings ; 
 import android . graphics . Color ; 
 import android . graphics . drawable . ColorDrawable ; 
 import android . os . Bundle ; 
 + import android . view . Menu ; 
 + import android . view . MenuItem ; 
 
 import im . actor . sdk . ActorSDK ; 
 + import im . actor . sdk . R ; 
 + import im . actor . sdk . controllers . Intents ; 
 import im . actor . sdk . controllers . activity . BaseFragmentActivity ; 
 + import im . actor . sdk . controllers . fragment . preview . ViewAvatarActivity ; 
 import im . actor . sdk . intents . ActorIntent ; 
 
 + import static im . actor . sdk . util . ActorSDKMessenger . myUid ; 
 + 
 public class MyProfileActivity extends BaseFragmentActivity { 
 @ Override 
 protected void onCreate ( Bundle savedInstanceState ) { 
 @ @ - 33 , 4 + 40 , 23 @ @ public class MyProfileActivity extends BaseFragmentActivity { 
 showFragment ( fragment , false , false ) ; 
 } 
 } 
 + 
 + @ Override 
 + public boolean onCreateOptionsMenu ( Menu menu ) { 
 + getMenuInflater ( ) . inflate ( R . menu . my _ profile , menu ) ; 
 + return super . onCreateOptionsMenu ( menu ) ; 
 + } 
 + 
 + @ Override 
 + public boolean onOptionsItemSelected ( MenuItem item ) { 
 + if ( item . getItemId ( ) = = R . id . editProfile ) { 
 + startActivity ( Intents . editMyName ( this ) ) ; 
 + return true ; 
 + } else if ( item . getItemId ( ) = = R . id . changePhoto ) { 
 + startActivity ( ViewAvatarActivity . viewAvatar ( myUid ( ) , this ) ) ; 
 + return true ; 
 + } 
 + 
 + return super . onOptionsItemSelected ( item ) ; 
 + } 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml 
 index 95264da . . 3a58f6a 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / res / layout / fragment _ settings . xml 
 @ @ - 18 , 6 + 18 , 7 @ @ 
 < LinearLayout 
 android : layout _ width = " match _ parent " 
 android : layout _ height = " wrap _ content " 
 + android : focusableInTouchMode = " true " 
 android : orientation = " vertical " > 
 
 < FrameLayout
