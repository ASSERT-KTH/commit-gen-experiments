BLEU SCORE: 0.3155984539112945

TEST MSG: feat ( core ) : add json content description
GENERATED MSG: chore ( core ) : new content localizations

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java < nl > index 9452bee . . 0723cf7 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java < nl > @ @ - 99 , 6 + 99 , 8 @ @ public class ContentDescription extends BserObject { < nl > } else if ( msg instanceof ServiceContent ) { < nl > return new ContentDescription ( ContentType . SERVICE , < nl > ( ( ServiceContent ) msg ) . getCompatText ( ) , 0 , false ) ; < nl > + } else if ( msg instanceof JsonContent ) { < nl > + return new ContentDescription ( ContentType . CUSTOM _ JSON _ MESSAGE , ( ( JsonContent ) msg ) . getContentDescription ( ) ) ; < nl > } else { < nl > return new ContentDescription ( ContentType . UNKNOWN _ CONTENT ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / content / JsonContent . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / content / JsonContent . java < nl > index 0da5287 . . c4a998b 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / content / JsonContent . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / content / JsonContent . java < nl > @ @ - 2 , 6 + 2 , 8 @ @ package im . actor . core . entity . content ; < nl > < nl > import im . actor . core . api . ApiJsonMessage ; < nl > import im . actor . core . entity . content . internal . ContentRemoteContainer ; < nl > + import im . actor . runtime . json . JSONException ; < nl > + import im . actor . runtime . json . JSONObject ; < nl > < nl > public class JsonContent extends AbsContent { < nl > < nl > @ @ - 16 , 4 + 18 , 15 @ @ public class JsonContent extends AbsContent { < nl > public String getRawJson ( ) { < nl > return rawJson ; < nl > } < nl > + < nl > + public String getContentDescription ( ) { < nl > + String res ; < nl > + try { < nl > + JSONObject data = new JSONObject ( getRawJson ( ) ) ; < nl > + res = data . getJSONObject ( " data " ) . getString ( " text " ) ; < nl > + } catch ( JSONException e ) { < nl > + res = " " ; < nl > + } < nl > + return res ; < nl > + } < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java < nl > index 93b0cb5 . . b706265 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java < nl > @ @ - 9 , 7 + 9 , 9 @ @ import com . google . j2objc . annotations . Property ; < nl > import java . io . IOException ; < nl > < nl > import im . actor . core . entity . content . AbsContent ; < nl > + import im . actor . core . entity . content . ContactContent ; < nl > import im . actor . core . entity . content . DocumentContent ; < nl > + import im . actor . core . entity . content . LocationContent ; < nl > import im . actor . core . entity . content . PhotoContent ; < nl > import im . actor . core . entity . content . ServiceContent ; < nl > import im . actor . core . entity . content . ServiceGroupAvatarChanged ; < nl > @ @ - 22 , 6 + 24 , 7 @ @ import im . actor . core . entity . content . ServiceGroupUserLeave ; < nl > import im . actor . core . entity . content . ServiceUserRegistered ; < nl > import im . actor . core . entity . content . TextContent ; < nl > import im . actor . core . entity . content . VideoContent ; < nl > + import im . actor . core . entity . content . VoiceContent ; < nl > import im . actor . runtime . bser . Bser ; < nl > import im . actor . runtime . bser . BserObject ; < nl > import im . actor . runtime . bser . BserValues ; < nl > @ @ - 42 , 8 + 45 , 14 @ @ public class ContentDescription extends BserObject { < nl > return new ContentDescription ( ContentType . DOCUMENT _ PHOTO ) ; < nl > } else if ( msg instanceof VideoContent ) { < nl > return new ContentDescription ( ContentType . DOCUMENT _ VIDEO ) ; < nl > + } else if ( msg instanceof VoiceContent ) { < nl > + return new ContentDescription ( ContentType . DOCUMENT _ AUDIO ) ; < nl > } else if ( msg instanceof DocumentContent ) { < nl > return new ContentDescription ( ContentType . DOCUMENT ) ; < nl > + } else if ( msg instanceof LocationContent ) { < nl > + return new ContentDescription ( ContentType . LOCATION ) ; < nl > + } else if ( msg instanceof ContactContent ) { < nl > + return new ContentDescription ( ContentType . CONTACT ) ; < nl > } else if ( msg instanceof ServiceUserRegistered ) { < nl > return new ContentDescription ( ContentType . SERVICE _ REGISTERED ) ; < nl > } else if ( msg instanceof ServiceGroupAvatarChanged ) { < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentType . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentType . java < nl > index 69713bd . . e0cff2f 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentType . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentType . java < nl > @ @ - 9 , 6 + 9 , 9 @ @ public enum ContentType { < nl > DOCUMENT ( 3 ) , < nl > DOCUMENT _ PHOTO ( 4 ) , < nl > DOCUMENT _ VIDEO ( 5 ) , < nl > + DOCUMENT _ AUDIO ( 17 ) , < nl > + CONTACT ( 18 ) , < nl > + LOCATION ( 19 ) , < nl > SERVICE ( 6 ) , < nl > SERVICE _ ADD ( 7 ) , < nl > SERVICE _ KICK ( 8 ) , < nl > @ @ - 64 , 6 + 67 , 12 @ @ public enum ContentType { < nl > return SERVICE _ AVATAR _ REMOVED ; < nl > case 16 : < nl > return SERVICE _ JOINED ; < nl > + case 17 : < nl > + return DOCUMENT _ AUDIO ; < nl > + case 18 : < nl > + return CONTACT ; < nl > + case 19 : < nl > + return LOCATION ; < nl > } < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / i18n / I18nEngine . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / i18n / I18nEngine . java < nl > index 31e5e25 . . 4c2e24a 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / i18n / I18nEngine . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / i18n / I18nEngine . java < nl > @ @ - 338 , 6 + 338 , 12 @ @ public class I18nEngine { < nl > return locale . get ( " ContentPhoto " ) ; < nl > case DOCUMENT _ VIDEO : < nl > return locale . get ( " ContentVideo " ) ; < nl > + case DOCUMENT _ AUDIO : < nl > + return locale . get ( " ContentAudio " ) ; < nl > + case CONTACT : < nl > + return locale . get ( " Contact " ) ; < nl > + case LOCATION : < nl > + return locale . get ( " Location " ) ; < nl > case SERVICE : < nl > return text ; / / Should be service message < nl > case SERVICE _ REGISTERED : < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText . properties b / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText . properties < nl > index d68b05a . . e65d887 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText . properties < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText . properties < nl > @ @ - 31 , 6 + 31 , 9 @ @ ContentUnsupported = Unsupported content < nl > ContentDocument = Document < nl > ContentPhoto = Photo < nl > ContentVideo = Video < nl > + ContentAudio = Audio < nl > + Contact = Contact < nl > + Location = Location < nl > < nl > ServiceRegistered = Joined Actor < nl > ServiceRegisteredFull = { name } joined Actor Network < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText _ Ru . properties b / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText _ Ru . properties < nl > index 89be667 . . 0156ecc 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText _ Ru . properties < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText _ Ru . properties < nl > @ @ - 41 , 6 + 41 , 9 @ @ ContentUnsupported = Н е п о д д е р ж и в а е м о е с о о б щ е н и е < nl > ContentDocument = Д о к у м е н т < nl > ContentPhoto = Ф о т о < nl > ContentVideo = В и д е о < nl > + ContentAudio = А у д и о < nl > + Contact = К о н т а к т < nl > + Location = М е с т о < nl > < nl > ServiceRegistered = З а р е г и с т р и р о в а л с я ( - а ) в А к т о р е < nl > ServiceRegisteredMale = З а р е г и с т р и р о в а л с я в А к т о р е

TEST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java 
 index 9452bee . . 0723cf7 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java 
 @ @ - 99 , 6 + 99 , 8 @ @ public class ContentDescription extends BserObject { 
 } else if ( msg instanceof ServiceContent ) { 
 return new ContentDescription ( ContentType . SERVICE , 
 ( ( ServiceContent ) msg ) . getCompatText ( ) , 0 , false ) ; 
 + } else if ( msg instanceof JsonContent ) { 
 + return new ContentDescription ( ContentType . CUSTOM _ JSON _ MESSAGE , ( ( JsonContent ) msg ) . getContentDescription ( ) ) ; 
 } else { 
 return new ContentDescription ( ContentType . UNKNOWN _ CONTENT ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / content / JsonContent . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / content / JsonContent . java 
 index 0da5287 . . c4a998b 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / content / JsonContent . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / content / JsonContent . java 
 @ @ - 2 , 6 + 2 , 8 @ @ package im . actor . core . entity . content ; 
 
 import im . actor . core . api . ApiJsonMessage ; 
 import im . actor . core . entity . content . internal . ContentRemoteContainer ; 
 + import im . actor . runtime . json . JSONException ; 
 + import im . actor . runtime . json . JSONObject ; 
 
 public class JsonContent extends AbsContent { 
 
 @ @ - 16 , 4 + 18 , 15 @ @ public class JsonContent extends AbsContent { 
 public String getRawJson ( ) { 
 return rawJson ; 
 } 
 + 
 + public String getContentDescription ( ) { 
 + String res ; 
 + try { 
 + JSONObject data = new JSONObject ( getRawJson ( ) ) ; 
 + res = data . getJSONObject ( " data " ) . getString ( " text " ) ; 
 + } catch ( JSONException e ) { 
 + res = " " ; 
 + } 
 + return res ; 
 + } 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java 
 index 93b0cb5 . . b706265 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentDescription . java 
 @ @ - 9 , 7 + 9 , 9 @ @ import com . google . j2objc . annotations . Property ; 
 import java . io . IOException ; 
 
 import im . actor . core . entity . content . AbsContent ; 
 + import im . actor . core . entity . content . ContactContent ; 
 import im . actor . core . entity . content . DocumentContent ; 
 + import im . actor . core . entity . content . LocationContent ; 
 import im . actor . core . entity . content . PhotoContent ; 
 import im . actor . core . entity . content . ServiceContent ; 
 import im . actor . core . entity . content . ServiceGroupAvatarChanged ; 
 @ @ - 22 , 6 + 24 , 7 @ @ import im . actor . core . entity . content . ServiceGroupUserLeave ; 
 import im . actor . core . entity . content . ServiceUserRegistered ; 
 import im . actor . core . entity . content . TextContent ; 
 import im . actor . core . entity . content . VideoContent ; 
 + import im . actor . core . entity . content . VoiceContent ; 
 import im . actor . runtime . bser . Bser ; 
 import im . actor . runtime . bser . BserObject ; 
 import im . actor . runtime . bser . BserValues ; 
 @ @ - 42 , 8 + 45 , 14 @ @ public class ContentDescription extends BserObject { 
 return new ContentDescription ( ContentType . DOCUMENT _ PHOTO ) ; 
 } else if ( msg instanceof VideoContent ) { 
 return new ContentDescription ( ContentType . DOCUMENT _ VIDEO ) ; 
 + } else if ( msg instanceof VoiceContent ) { 
 + return new ContentDescription ( ContentType . DOCUMENT _ AUDIO ) ; 
 } else if ( msg instanceof DocumentContent ) { 
 return new ContentDescription ( ContentType . DOCUMENT ) ; 
 + } else if ( msg instanceof LocationContent ) { 
 + return new ContentDescription ( ContentType . LOCATION ) ; 
 + } else if ( msg instanceof ContactContent ) { 
 + return new ContentDescription ( ContentType . CONTACT ) ; 
 } else if ( msg instanceof ServiceUserRegistered ) { 
 return new ContentDescription ( ContentType . SERVICE _ REGISTERED ) ; 
 } else if ( msg instanceof ServiceGroupAvatarChanged ) { 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentType . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentType . java 
 index 69713bd . . e0cff2f 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentType . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / ContentType . java 
 @ @ - 9 , 6 + 9 , 9 @ @ public enum ContentType { 
 DOCUMENT ( 3 ) , 
 DOCUMENT _ PHOTO ( 4 ) , 
 DOCUMENT _ VIDEO ( 5 ) , 
 + DOCUMENT _ AUDIO ( 17 ) , 
 + CONTACT ( 18 ) , 
 + LOCATION ( 19 ) , 
 SERVICE ( 6 ) , 
 SERVICE _ ADD ( 7 ) , 
 SERVICE _ KICK ( 8 ) , 
 @ @ - 64 , 6 + 67 , 12 @ @ public enum ContentType { 
 return SERVICE _ AVATAR _ REMOVED ; 
 case 16 : 
 return SERVICE _ JOINED ; 
 + case 17 : 
 + return DOCUMENT _ AUDIO ; 
 + case 18 : 
 + return CONTACT ; 
 + case 19 : 
 + return LOCATION ; 
 } 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / i18n / I18nEngine . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / i18n / I18nEngine . java 
 index 31e5e25 . . 4c2e24a 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / i18n / I18nEngine . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / i18n / I18nEngine . java 
 @ @ - 338 , 6 + 338 , 12 @ @ public class I18nEngine { 
 return locale . get ( " ContentPhoto " ) ; 
 case DOCUMENT _ VIDEO : 
 return locale . get ( " ContentVideo " ) ; 
 + case DOCUMENT _ AUDIO : 
 + return locale . get ( " ContentAudio " ) ; 
 + case CONTACT : 
 + return locale . get ( " Contact " ) ; 
 + case LOCATION : 
 + return locale . get ( " Location " ) ; 
 case SERVICE : 
 return text ; / / Should be service message 
 case SERVICE _ REGISTERED : 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText . properties b / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText . properties 
 index d68b05a . . e65d887 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText . properties 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText . properties 
 @ @ - 31 , 6 + 31 , 9 @ @ ContentUnsupported = Unsupported content 
 ContentDocument = Document 
 ContentPhoto = Photo 
 ContentVideo = Video 
 + ContentAudio = Audio 
 + Contact = Contact 
 + Location = Location 
 
 ServiceRegistered = Joined Actor 
 ServiceRegisteredFull = { name } joined Actor Network 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText _ Ru . properties b / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText _ Ru . properties 
 index 89be667 . . 0156ecc 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText _ Ru . properties 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / resources / AppText _ Ru . properties 
 @ @ - 41 , 6 + 41 , 9 @ @ ContentUnsupported = Н е п о д д е р ж и в а е м о е с о о б щ е н и е 
 ContentDocument = Д о к у м е н т 
 ContentPhoto = Ф о т о 
 ContentVideo = В и д е о 
 + ContentAudio = А у д и о 
 + Contact = К о н т а к т 
 + Location = М е с т о 
 
 ServiceRegistered = З а р е г и с т р и р о в а л с я ( - а ) в А к т о р е 
 ServiceRegisteredMale = З а р е г и с т р и р о в а л с я в А к т о р е
