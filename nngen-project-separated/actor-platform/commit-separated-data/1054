BLEU SCORE: 0.4703490742954983

TEST MSG: refactor ( server : push ) : more typing
GENERATED MSG: perf ( server : push ) : minify json in push

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala b / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala < nl > index 145658b . . a6d8434 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala < nl > @ @ - 27 , 10 + 27 , 10 @ @ final class ActorPush ( _ system : ActorSystem ) extends Extension { < nl > < nl > private val sourceRef = < nl > Source < nl > - . actorRef ( maxQueue , OverflowStrategy . dropHead ) < nl > + . actorRef [ ( HttpRequest , ActorPushDelivery ) ] ( maxQueue , OverflowStrategy . dropHead ) < nl > . via ( Http ( system ) . superPool [ ActorPushDelivery ] ( ) ) < nl > . to ( Sink foreach { < nl > - case ( Success ( _ ) , _ ) ⇒ < nl > + case ( Success ( _ ) , d ) ⇒ < nl > case ( Failure ( e ) , d ) ⇒ log . error ( e , " Failed to deliver , endpoint : { } " , d . creds . endpoint ) < nl > } ) < nl > . run ( )
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala b / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala < nl > index bdc07d0 . . 145658b 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala < nl > @ @ - 46 , 7 + 46 , 7 @ @ final class ActorPush ( _ system : ActorSystem ) extends Extension { < nl > method = HttpMethods . POST , < nl > uri = uri , < nl > headers = pushHeaders , < nl > - entity = HttpEntity ( ContentTypes . ` application / json ` , m . asJson . toString ) < nl > + entity = HttpEntity ( ContentTypes . ` application / json ` , m . asJson . noSpaces ) < nl > ) → ActorPushDelivery ( creds , m ) < nl > } < nl > } < nl > diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushManager . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushManager . scala < nl > index 824d134 . . c5e950a 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushManager . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushManager . scala < nl > @ @ - 170 , 7 + 170 , 7 @ @ private final class GooglePushDelivery extends ActorPublisher [ ( HttpRequest , Goog < nl > method = HttpMethods . POST , < nl > uri = uri , < nl > headers = List ( headers . Authorization ( headers . GenericHttpCredentials ( s " key = $ { d . key } " , Map . empty [ String , String ] ) ) ) , < nl > - entity = HttpEntity ( ContentTypes . ` application / json ` , d . m . asJson . toString ( ) ) < nl > + entity = HttpEntity ( ContentTypes . ` application / json ` , d . m . asJson . noSpaces ) < nl > ) → d < nl > } < nl > } < nl > \ No newline at end of file

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala b / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala 
 index 145658b . . a6d8434 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala 
 @ @ - 27 , 10 + 27 , 10 @ @ final class ActorPush ( _ system : ActorSystem ) extends Extension { 
 
 private val sourceRef = 
 Source 
 - . actorRef ( maxQueue , OverflowStrategy . dropHead ) 
 + . actorRef [ ( HttpRequest , ActorPushDelivery ) ] ( maxQueue , OverflowStrategy . dropHead ) 
 . via ( Http ( system ) . superPool [ ActorPushDelivery ] ( ) ) 
 . to ( Sink foreach { 
 - case ( Success ( _ ) , _ ) ⇒ 
 + case ( Success ( _ ) , d ) ⇒ 
 case ( Failure ( e ) , d ) ⇒ log . error ( e , " Failed to deliver , endpoint : { } " , d . creds . endpoint ) 
 } ) 
 . run ( )

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala b / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala 
 index bdc07d0 . . 145658b 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / push / actor / ActorPush . scala 
 @ @ - 46 , 7 + 46 , 7 @ @ final class ActorPush ( _ system : ActorSystem ) extends Extension { 
 method = HttpMethods . POST , 
 uri = uri , 
 headers = pushHeaders , 
 - entity = HttpEntity ( ContentTypes . ` application / json ` , m . asJson . toString ) 
 + entity = HttpEntity ( ContentTypes . ` application / json ` , m . asJson . noSpaces ) 
 ) → ActorPushDelivery ( creds , m ) 
 } 
 } 
 diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushManager . scala b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushManager . scala 
 index 824d134 . . c5e950a 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushManager . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / sequence / GooglePushManager . scala 
 @ @ - 170 , 7 + 170 , 7 @ @ private final class GooglePushDelivery extends ActorPublisher [ ( HttpRequest , Goog 
 method = HttpMethods . POST , 
 uri = uri , 
 headers = List ( headers . Authorization ( headers . GenericHttpCredentials ( s " key = $ { d . key } " , Map . empty [ String , String ] ) ) ) , 
 - entity = HttpEntity ( ContentTypes . ` application / json ` , d . m . asJson . toString ( ) ) 
 + entity = HttpEntity ( ContentTypes . ` application / json ` , d . m . asJson . noSpaces ) 
 ) → d 
 } 
 } 
 \ No newline at end of file
