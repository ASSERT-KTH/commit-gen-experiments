BLEU SCORE: 0.37405485108988856

TEST MSG: feat ( core ) : Added new permissions support
GENERATED MSG: feat ( core ) : Passed new Group fields to GroupVM

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / api / ApiGroupFullPermissions . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / api / ApiGroupFullPermissions . java < nl > index 1c015dd . . 502c594 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / api / ApiGroupFullPermissions . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / api / ApiGroupFullPermissions . java < nl > @ @ - 15 , 6 + 15 , 10 @ @ public enum ApiGroupFullPermissions { < nl > EDIT _ ADMIN _ SETTINGS ( 6 ) , < nl > VIEW _ ADMINS ( 7 ) , < nl > EDIT _ ADMINS ( 8 ) , < nl > + KICK _ INVITED ( 9 ) , < nl > + KICK _ ANYONE ( 10 ) , < nl > + EDIT _ FOREIGN ( 11 ) , < nl > + DELETE _ FOREIGN ( 12 ) , < nl > UNSUPPORTED _ VALUE ( - 1 ) ; < nl > < nl > private int value ; < nl > @ @ - 37 , 6 + 41 , 10 @ @ public enum ApiGroupFullPermissions { < nl > case 6 : return ApiGroupFullPermissions . EDIT _ ADMIN _ SETTINGS ; < nl > case 7 : return ApiGroupFullPermissions . VIEW _ ADMINS ; < nl > case 8 : return ApiGroupFullPermissions . EDIT _ ADMINS ; < nl > + case 9 : return ApiGroupFullPermissions . KICK _ INVITED ; < nl > + case 10 : return ApiGroupFullPermissions . KICK _ ANYONE ; < nl > + case 11 : return ApiGroupFullPermissions . EDIT _ FOREIGN ; < nl > + case 12 : return ApiGroupFullPermissions . DELETE _ FOREIGN ; < nl > default : return ApiGroupFullPermissions . UNSUPPORTED _ VALUE ; < nl > } < nl > } < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java < nl > index 5b417d6 . . f34565a 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java < nl > @ @ - 106 , 6 + 106 , 14 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > private boolean isCanViewAdmins ; < nl > @ Property ( " readonly , nonatomic " ) < nl > private boolean isCanEditAdmins ; < nl > + @ Property ( " readonly , nonatomic " ) < nl > + private boolean isCanKickInvited ; < nl > + @ Property ( " readonly , nonatomic " ) < nl > + private boolean isCanKickAnyone ; < nl > + @ Property ( " readonly , nonatomic " ) < nl > + private boolean isCanEditForeign ; < nl > + @ Property ( " readonly , nonatomic " ) < nl > + private boolean isCanDeleteForeign ; < nl > < nl > @ Property ( " readonly , nonatomic " ) < nl > private boolean haveExtension ; < nl > @ @ - 254 , 6 + 262 , 22 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > return isCanInviteViaLink ; < nl > } < nl > < nl > + public boolean isCanKickInvited ( ) { < nl > + return isCanKickInvited ; < nl > + } < nl > + < nl > + public boolean isCanKickAnyone ( ) { < nl > + return isCanKickAnyone ; < nl > + } < nl > + < nl > + public boolean isCanEditForeign ( ) { < nl > + return isCanEditForeign ; < nl > + } < nl > + < nl > + public boolean isCanDeleteForeign ( ) { < nl > + return isCanDeleteForeign ; < nl > + } < nl > + < nl > public Group updateExt ( @ Nullable ApiGroupFull ext ) { < nl > return new Group ( getWrapped ( ) , ext ) ; < nl > } < nl > @ @ - 759 , 6 + 783 , 10 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > # 5 - canEditAdminSettings . Default is FALSE . < nl > # 6 - canViewAdmins . Default is FALSE . < nl > # 7 - canEditAdmins . Default is FALSE . < nl > + # 8 - canKickInvited . Default is FALSE . < nl > + # 9 - canKickAnyone . Default is FALSE . < nl > + # 10 - canEditForeign . Default is FALSE . < nl > + # 11 - canDeleteForeign . Default is FALSE . < nl > * / < nl > long fullPermissions = 0 ; < nl > if ( ext . getPermissions ( ) ! = null ) { < nl > @ @ - 772 , 6 + 800 , 10 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > this . isCanEditAdministration = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . EDIT _ ADMIN _ SETTINGS ) ; < nl > this . isCanViewAdmins = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . VIEW _ ADMINS ) ; < nl > this . isCanEditAdmins = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . EDIT _ ADMINS ) ; < nl > + this . isCanKickInvited = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . KICK _ INVITED ) ; < nl > + this . isCanKickAnyone = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . KICK _ ANYONE ) ; < nl > + this . isCanEditForeign = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . EDIT _ FOREIGN ) ; < nl > + this . isCanDeleteForeign = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . DELETE _ FOREIGN ) ; < nl > < nl > this . members = new ArrayList < > ( ) ; < nl > for ( ApiMember m : ext . getMembers ( ) ) { < nl > @ @ - 794 , 6 + 826 , 10 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > this . isCanViewAdmins = false ; < nl > this . isCanEditAdmins = false ; < nl > this . isCanInviteViaLink = false ; < nl > + this . isCanKickInvited = false ; < nl > + this . isCanKickAnyone = false ; < nl > + this . isCanEditForeign = false ; < nl > + this . isCanDeleteForeign = false ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java < nl > index 11e9ba0 . . a6d5454 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java < nl > @ @ - 93 , 6 + 93 , 18 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > @ NotNull < nl > @ Property ( " nonatomic , readonly " ) < nl > private BooleanValueModel isCanInviteViaLink ; < nl > + @ NotNull < nl > + @ Property ( " nonatomic , readonly " ) < nl > + private BooleanValueModel isCanKickInvited ; < nl > + @ NotNull < nl > + @ Property ( " nonatomic , readonly " ) < nl > + private BooleanValueModel isCanKickAnyone ; < nl > + @ NotNull < nl > + @ Property ( " nonatomic , readonly " ) < nl > + private BooleanValueModel isCanEditForeign ; < nl > + @ NotNull < nl > + @ Property ( " nonatomic , readonly " ) < nl > + private BooleanValueModel isCanDeleteForeign ; < nl > < nl > @ NotNull < nl > @ Property ( " nonatomic , readonly " ) < nl > @ @ - 139 , 6 + 151 , 10 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > this . isCanLeave = new BooleanValueModel ( " group . " + groupId + " . isCanLeave " , rawObj . isCanLeave ( ) ) ; < nl > this . isCanDelete = new BooleanValueModel ( " group . " + groupId + " . isCanDelete " , rawObj . isCanDelete ( ) ) ; < nl > this . isCanInviteViaLink = new BooleanValueModel ( " group . " + groupId + " . isCanInviteViaLink " , rawObj . isCanInviteViaLink ( ) ) ; < nl > + this . isCanKickInvited = new BooleanValueModel ( " group . " + groupId + " . isCanKickInvited " , rawObj . isCanKickInvited ( ) ) ; < nl > + this . isCanKickAnyone = new BooleanValueModel ( " group . " + groupId + " . isCanKickAnyone " , rawObj . isCanKickAnyone ( ) ) ; < nl > + this . isCanEditForeign = new BooleanValueModel ( " group . " + groupId + " . isCanEditForeign " , rawObj . isCanEditForeign ( ) ) ; < nl > + this . isCanDeleteForeign = new BooleanValueModel ( " group . " + groupId + " . isCanDeleteForeign " , rawObj . isCanDeleteForeign ( ) ) ; < nl > < nl > this . ownerId = new IntValueModel ( " group . " + groupId + " . membersCount " , rawObj . getOwnerId ( ) ) ; < nl > this . members = new ValueModel < > ( " group . " + groupId + " . members " , new HashSet < > ( rawObj . getMembers ( ) ) ) ; < nl > @ @ - 369 , 6 + 385 , 50 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > } < nl > < nl > / * * < nl > + * Is current user can kick invited members < nl > + * < nl > + * @ return is current user can kick invited model < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " getIsCanKickInvitedModel " ) < nl > + public BooleanValueModel getIsCanKickInvited ( ) { < nl > + return isCanKickInvited ; < nl > + } < nl > + < nl > + / * * < nl > + * Is current user can kick anyone < nl > + * < nl > + * @ return is current user can kick anyone model < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " getIsCanKickAnyoneModel " ) < nl > + public BooleanValueModel getIsCanKickAnyone ( ) { < nl > + return isCanKickAnyone ; < nl > + } < nl > + < nl > + / * * < nl > + * Is current user can edit foreign messages < nl > + * < nl > + * @ return is current user can edit foreign messages model < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " getIsCanEditForeignModel " ) < nl > + public BooleanValueModel getIsCanEditForeign ( ) { < nl > + return isCanEditForeign ; < nl > + } < nl > + < nl > + / * * < nl > + * Is current user can delete foreign messages < nl > + * < nl > + * @ return is current user can delete foreign messages model < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " getIsCanDeleteForeignModel " ) < nl > + public BooleanValueModel getIsCanDeleteForeign ( ) { < nl > + return isCanDeleteForeign ; < nl > + } < nl > + < nl > + / * * < nl > * Get Group owner user id model < nl > * < nl > * @ return creator owner id model < nl > @ @ - 473 , 6 + 533 , 10 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > isChanged | = isCanLeave . change ( rawObj . isCanLeave ( ) ) ; < nl > isChanged | = isCanDelete . change ( rawObj . isCanDelete ( ) ) ; < nl > isChanged | = isCanInviteViaLink . change ( rawObj . isCanInviteViaLink ( ) ) ; < nl > + isChanged | = isCanKickInvited . change ( rawObj . isCanKickInvited ( ) ) ; < nl > + isChanged | = isCanKickAnyone . change ( rawObj . isCanKickAnyone ( ) ) ; < nl > + isChanged | = isCanEditForeign . change ( rawObj . isCanEditForeign ( ) ) ; < nl > + isChanged | = isCanDeleteForeign . change ( rawObj . isCanDeleteForeign ( ) ) ; < nl > < nl > if ( isChanged ) { < nl > notifyIfNeeded ( ) ;
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java < nl > index 13d836f . . 84f5c7f 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java < nl > @ @ - 70 , 6 + 70 , 9 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > @ Nullable < nl > @ Property ( " readonly , nonatomic " ) < nl > private String about ; < nl > + @ Nullable < nl > + @ Property ( " readonly , nonatomic " ) < nl > + private String shortName ; < nl > @ NotNull < nl > @ Property ( " readonly , nonatomic " ) < nl > @ SuppressWarnings ( " NullableProblems " ) < nl > @ @ - 167 , 6 + 170 , 11 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > } < nl > < nl > @ Nullable < nl > + public String getShortName ( ) { < nl > + return shortName ; < nl > + } < nl > + < nl > + @ Nullable < nl > public Integer getOwnerId ( ) { < nl > return ownerId ; < nl > } < nl > @ @ - 183 , 6 + 191 , 10 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > return isCanViewMembers ; < nl > } < nl > < nl > + public boolean isCanEditInfo ( ) { < nl > + return isCanEditInfo ; < nl > + } < nl > + < nl > public boolean isSharedHistory ( ) { < nl > return isSharedHistory ; < nl > } < nl > @ @ - 877 , 6 + 889 , 7 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > this . ownerId = ext . getOwnerUid ( ) ; < nl > this . about = ext . getAbout ( ) ; < nl > this . topic = ext . getTheme ( ) ; < nl > + this . shortName = ext . getShortName ( ) ; < nl > this . isAsyncMembers = ext . isAsyncMembers ( ) ! = null ? ext . isAsyncMembers ( ) : false ; < nl > this . isCanViewMembers = ext . canViewMembers ( ) ! = null ? ext . canViewMembers ( ) : true ; < nl > this . isCanInviteMembers = ext . canViewMembers ( ) ! = null ? ext . canViewMembers ( ) : true ; < nl > @ @ - 898 , 6 + 911 , 7 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K < nl > this . isSharedHistory = false ; < nl > this . members = new ArrayList < > ( ) ; < nl > this . isCanEditInfo = false ; < nl > + this . shortName = null ; < nl > } < nl > } < nl > < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java < nl > index d2c0d12 . . f60c3bb 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java < nl > @ @ - 59 , 23 + 59 , 32 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > private ValueModel < HashSet < GroupMember > > members ; < nl > @ NotNull < nl > @ Property ( " nonatomic , readonly " ) < nl > + private BooleanValueModel isAsyncMembers ; < nl > + @ NotNull < nl > + @ Property ( " nonatomic , readonly " ) < nl > private BooleanValueModel isCanViewMembers ; < nl > @ NotNull < nl > @ Property ( " nonatomic , readonly " ) < nl > private BooleanValueModel isCanInviteMembers ; < nl > + @ NotNull < nl > + @ Property ( " nonatomic , readonly " ) < nl > + private BooleanValueModel isCanEditInfo ; < nl > < nl > < nl > + @ NotNull < nl > @ Property ( " nonatomic , readonly " ) < nl > - private IntValueModel ownerId ; < nl > + private StringValueModel theme ; < nl > @ NotNull < nl > @ Property ( " nonatomic , readonly " ) < nl > - private ValueModel < Integer > presence ; < nl > + private StringValueModel about ; < nl > @ NotNull < nl > @ Property ( " nonatomic , readonly " ) < nl > - private StringValueModel theme ; < nl > + private StringValueModel shortName ; < nl > + @ Property ( " nonatomic , readonly " ) < nl > + private IntValueModel ownerId ; < nl > @ NotNull < nl > @ Property ( " nonatomic , readonly " ) < nl > - private StringValueModel about ; < nl > + private ValueModel < Integer > presence ; < nl > < nl > @ NotNull < nl > private ArrayList < ModelChangedListener < GroupVM > > listeners = new ArrayList < > ( ) ; < nl > @ @ - 98 , 11 + 107 , 14 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > < nl > this . isCanViewMembers = new BooleanValueModel ( " group . " + groupId + " . can _ view _ members " , rawObj . isCanViewMembers ( ) ) ; < nl > this . isCanInviteMembers = new BooleanValueModel ( " group . " + groupId + " . can _ invite _ members " , rawObj . isCanInviteMembers ( ) ) ; < nl > + this . isCanEditInfo = new BooleanValueModel ( " group . " + groupId + " . can _ edit _ info " , rawObj . isCanEditInfo ( ) ) ; < nl > + this . isAsyncMembers = new BooleanValueModel ( " group . " + groupId + " . isAsyncMembers " , rawObj . isAsyncMembers ( ) ) ; < nl > this . ownerId = new IntValueModel ( " group . " + groupId + " . membersCount " , rawObj . getOwnerId ( ) ) ; < nl > this . members = new ValueModel < > ( " group . " + groupId + " . members " , new HashSet < > ( rawObj . getMembers ( ) ) ) ; < nl > this . presence = new ValueModel < > ( " group . " + groupId + " . presence " , 0 ) ; < nl > this . theme = new StringValueModel ( " group . " + groupId + " . theme " , rawObj . getTopic ( ) ) ; < nl > this . about = new StringValueModel ( " group . " + groupId + " . about " , rawObj . getAbout ( ) ) ; < nl > + this . shortName = new StringValueModel ( " group . " + groupId + " . shortname " , rawObj . getShortName ( ) ) ; < nl > } < nl > < nl > / * * < nl > @ @ - 149 , 6 + 161 , 28 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > } < nl > < nl > / * * < nl > + * Get About Value Model < nl > + * < nl > + * @ return Value Model of String < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " getAboutModel " ) < nl > + public StringValueModel getAbout ( ) { < nl > + return about ; < nl > + } < nl > + < nl > + / * * < nl > + * Get Theme Value Model < nl > + * < nl > + * @ return Value Model of String < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " getThemeModel " ) < nl > + public StringValueModel getTheme ( ) { < nl > + return theme ; < nl > + } < nl > + < nl > + / * * < nl > * Get membership Value Model < nl > * < nl > * @ return Value Model of Boolean < nl > @ @ - 193 , 6 + 227 , 17 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > } < nl > < nl > / * * < nl > + * Can current user edit group info < nl > + * < nl > + * @ return can edit group info < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " isCanEditInfoModel " ) < nl > + public BooleanValueModel getIsCanEditInfo ( ) { < nl > + return isCanEditInfo ; < nl > + } < nl > + < nl > + / * * < nl > * Can current user invite members to a group < nl > * < nl > * @ return can invite members model < nl > @ @ - 203 , 6 + 248 , 18 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > return isCanInviteMembers ; < nl > } < nl > < nl > + < nl > + / * * < nl > + * Is members should be fetched async < nl > + * < nl > + * @ return is members async model < nl > + * / < nl > + @ NotNull < nl > + @ ObjectiveCName ( " getIsAsyncMembersModel " ) < nl > + public BooleanValueModel getIsAsyncMembers ( ) { < nl > + return isAsyncMembers ; < nl > + } < nl > + < nl > / * * < nl > * Get Group owner user id model < nl > * < nl > @ @ - 235 , 47 + 292 , 6 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > return presence ; < nl > } < nl > < nl > - @ Override < nl > - protected void updateValues ( @ NotNull Group rawObj ) { < nl > - boolean isChanged = name . change ( rawObj . getTitle ( ) ) ; < nl > - < nl > - isChanged | = avatar . change ( rawObj . getAvatar ( ) ) ; < nl > - isChanged | = membersCount . change ( rawObj . getMembersCount ( ) ) ; < nl > - isChanged | = isMember . change ( rawObj . isMember ( ) ) ; < nl > - isChanged | = isCanWriteMessage . change ( rawObj . isCanWrite ( ) ) ; < nl > - < nl > - isChanged | = theme . change ( rawObj . getTopic ( ) ) ; < nl > - isChanged | = about . change ( rawObj . getAbout ( ) ) ; < nl > - isChanged | = members . change ( new HashSet < > ( rawObj . getMembers ( ) ) ) ; < nl > - isChanged | = ownerId . change ( rawObj . getOwnerId ( ) ) ; < nl > - isChanged | = isCanViewMembers . change ( rawObj . isCanViewMembers ( ) ) ; < nl > - < nl > - if ( isChanged ) { < nl > - notifyChange ( ) ; < nl > - } < nl > - } < nl > - < nl > - / * * < nl > - * Get About Value Model < nl > - * < nl > - * @ return Value Model of String < nl > - * / < nl > - @ NotNull < nl > - @ ObjectiveCName ( " getAboutModel " ) < nl > - public StringValueModel getAbout ( ) { < nl > - return about ; < nl > - } < nl > - < nl > - / * * < nl > - * Get Theme Value Model < nl > - * < nl > - * @ return Value Model of String < nl > - * / < nl > - @ NotNull < nl > - @ ObjectiveCName ( " getThemeModel " ) < nl > - public StringValueModel getTheme ( ) { < nl > - return theme ; < nl > - } < nl > < nl > / * * < nl > * Subscribe for GroupVM updates < nl > @ @ - 284 , 8 + 300 , 7 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > * / < nl > @ MainThread < nl > @ ObjectiveCName ( " subscribeWithListener : " ) < nl > - public void subscribe ( @ NotNull ModelChangedListener < GroupVM > listener ) { < nl > - / / im . actor . runtime . Runtime . checkMainThread ( ) ; < nl > + public synchronized void subscribe ( @ NotNull ModelChangedListener < GroupVM > listener ) { < nl > if ( listeners . contains ( listener ) ) { < nl > return ; < nl > } < nl > @ @ - 300 , 8 + 315 , 7 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > * / < nl > @ MainThread < nl > @ ObjectiveCName ( " subscribeWithListener : withNotify : " ) < nl > - public void subscribe ( @ NotNull ModelChangedListener < GroupVM > listener , boolean notify ) { < nl > - / / im . actor . runtime . Runtime . checkMainThread ( ) ; < nl > + public synchronized void subscribe ( @ NotNull ModelChangedListener < GroupVM > listener , boolean notify ) { < nl > if ( listeners . contains ( listener ) ) { < nl > return ; < nl > } < nl > @ @ - 318 , 11 + 332 , 43 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > * / < nl > @ MainThread < nl > @ ObjectiveCName ( " unsubscribeWithListener : " ) < nl > - public void unsubscribe ( @ NotNull ModelChangedListener < GroupVM > listener ) { < nl > - / / im . actor . runtime . Runtime . checkMainThread ( ) ; < nl > + public synchronized void unsubscribe ( @ NotNull ModelChangedListener < GroupVM > listener ) { < nl > listeners . remove ( listener ) ; < nl > } < nl > < nl > + / / < nl > + / / Update handling < nl > + / / < nl > + < nl > + @ Override < nl > + protected void updateValues ( @ NotNull Group rawObj ) { < nl > + boolean isChanged = name . change ( rawObj . getTitle ( ) ) ; < nl > + < nl > + isChanged | = avatar . change ( rawObj . getAvatar ( ) ) ; < nl > + isChanged | = membersCount . change ( rawObj . getMembersCount ( ) ) ; < nl > + isChanged | = isMember . change ( rawObj . isMember ( ) ) ; < nl > + isChanged | = isCanWriteMessage . change ( rawObj . isCanWrite ( ) ) ; < nl > + < nl > + isChanged | = theme . change ( rawObj . getTopic ( ) ) ; < nl > + isChanged | = about . change ( rawObj . getAbout ( ) ) ; < nl > + isChanged | = members . change ( new HashSet < > ( rawObj . getMembers ( ) ) ) ; < nl > + isChanged | = ownerId . change ( rawObj . getOwnerId ( ) ) ; < nl > + isChanged | = isCanViewMembers . change ( rawObj . isCanViewMembers ( ) ) ; < nl > + isChanged | = isCanEditInfo . change ( rawObj . isCanEditInfo ( ) ) ; < nl > + isChanged | = shortName . change ( rawObj . getShortName ( ) ) ; < nl > + isChanged | = isAsyncMembers . change ( rawObj . isAsyncMembers ( ) ) ; < nl > + < nl > + if ( isChanged ) { < nl > + notifyIfNeeded ( ) ; < nl > + } < nl > + } < nl > + < nl > + private synchronized void notifyIfNeeded ( ) { < nl > + if ( listeners . size ( ) > 0 ) { < nl > + notifyChange ( ) ; < nl > + } < nl > + } < nl > + < nl > private void notifyChange ( ) { < nl > im . actor . runtime . Runtime . postToMainThread ( ( ) - > { < nl > for ( ModelChangedListener < GroupVM > l : listeners ) { < nl > @ @ - 330 , 13 + 376 , 4 @ @ public class GroupVM extends BaseValueModel < Group > { < nl > } < nl > } ) ; < nl > } < nl > - < nl > - private boolean isHaveMember ( int uid , Collection < GroupMember > members ) { < nl > - for ( GroupMember m : members ) { < nl > - if ( m . getUid ( ) = = uid ) { < nl > - return true ; < nl > - } < nl > - } < nl > - return false ; < nl > - } < nl > } < nl > \ No newline at end of file

TEST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / api / ApiGroupFullPermissions . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / api / ApiGroupFullPermissions . java 
 index 1c015dd . . 502c594 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / api / ApiGroupFullPermissions . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / api / ApiGroupFullPermissions . java 
 @ @ - 15 , 6 + 15 , 10 @ @ public enum ApiGroupFullPermissions { 
 EDIT _ ADMIN _ SETTINGS ( 6 ) , 
 VIEW _ ADMINS ( 7 ) , 
 EDIT _ ADMINS ( 8 ) , 
 + KICK _ INVITED ( 9 ) , 
 + KICK _ ANYONE ( 10 ) , 
 + EDIT _ FOREIGN ( 11 ) , 
 + DELETE _ FOREIGN ( 12 ) , 
 UNSUPPORTED _ VALUE ( - 1 ) ; 
 
 private int value ; 
 @ @ - 37 , 6 + 41 , 10 @ @ public enum ApiGroupFullPermissions { 
 case 6 : return ApiGroupFullPermissions . EDIT _ ADMIN _ SETTINGS ; 
 case 7 : return ApiGroupFullPermissions . VIEW _ ADMINS ; 
 case 8 : return ApiGroupFullPermissions . EDIT _ ADMINS ; 
 + case 9 : return ApiGroupFullPermissions . KICK _ INVITED ; 
 + case 10 : return ApiGroupFullPermissions . KICK _ ANYONE ; 
 + case 11 : return ApiGroupFullPermissions . EDIT _ FOREIGN ; 
 + case 12 : return ApiGroupFullPermissions . DELETE _ FOREIGN ; 
 default : return ApiGroupFullPermissions . UNSUPPORTED _ VALUE ; 
 } 
 } 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java 
 index 5b417d6 . . f34565a 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java 
 @ @ - 106 , 6 + 106 , 14 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 private boolean isCanViewAdmins ; 
 @ Property ( " readonly , nonatomic " ) 
 private boolean isCanEditAdmins ; 
 + @ Property ( " readonly , nonatomic " ) 
 + private boolean isCanKickInvited ; 
 + @ Property ( " readonly , nonatomic " ) 
 + private boolean isCanKickAnyone ; 
 + @ Property ( " readonly , nonatomic " ) 
 + private boolean isCanEditForeign ; 
 + @ Property ( " readonly , nonatomic " ) 
 + private boolean isCanDeleteForeign ; 
 
 @ Property ( " readonly , nonatomic " ) 
 private boolean haveExtension ; 
 @ @ - 254 , 6 + 262 , 22 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 return isCanInviteViaLink ; 
 } 
 
 + public boolean isCanKickInvited ( ) { 
 + return isCanKickInvited ; 
 + } 
 + 
 + public boolean isCanKickAnyone ( ) { 
 + return isCanKickAnyone ; 
 + } 
 + 
 + public boolean isCanEditForeign ( ) { 
 + return isCanEditForeign ; 
 + } 
 + 
 + public boolean isCanDeleteForeign ( ) { 
 + return isCanDeleteForeign ; 
 + } 
 + 
 public Group updateExt ( @ Nullable ApiGroupFull ext ) { 
 return new Group ( getWrapped ( ) , ext ) ; 
 } 
 @ @ - 759 , 6 + 783 , 10 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 # 5 - canEditAdminSettings . Default is FALSE . 
 # 6 - canViewAdmins . Default is FALSE . 
 # 7 - canEditAdmins . Default is FALSE . 
 + # 8 - canKickInvited . Default is FALSE . 
 + # 9 - canKickAnyone . Default is FALSE . 
 + # 10 - canEditForeign . Default is FALSE . 
 + # 11 - canDeleteForeign . Default is FALSE . 
 * / 
 long fullPermissions = 0 ; 
 if ( ext . getPermissions ( ) ! = null ) { 
 @ @ - 772 , 6 + 800 , 10 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 this . isCanEditAdministration = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . EDIT _ ADMIN _ SETTINGS ) ; 
 this . isCanViewAdmins = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . VIEW _ ADMINS ) ; 
 this . isCanEditAdmins = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . EDIT _ ADMINS ) ; 
 + this . isCanKickInvited = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . KICK _ INVITED ) ; 
 + this . isCanKickAnyone = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . KICK _ ANYONE ) ; 
 + this . isCanEditForeign = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . EDIT _ FOREIGN ) ; 
 + this . isCanDeleteForeign = BitMaskUtil . getBitValue ( fullPermissions , ApiGroupFullPermissions . DELETE _ FOREIGN ) ; 
 
 this . members = new ArrayList < > ( ) ; 
 for ( ApiMember m : ext . getMembers ( ) ) { 
 @ @ - 794 , 6 + 826 , 10 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 this . isCanViewAdmins = false ; 
 this . isCanEditAdmins = false ; 
 this . isCanInviteViaLink = false ; 
 + this . isCanKickInvited = false ; 
 + this . isCanKickAnyone = false ; 
 + this . isCanEditForeign = false ; 
 + this . isCanDeleteForeign = false ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java 
 index 11e9ba0 . . a6d5454 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java 
 @ @ - 93 , 6 + 93 , 18 @ @ public class GroupVM extends BaseValueModel < Group > { 
 @ NotNull 
 @ Property ( " nonatomic , readonly " ) 
 private BooleanValueModel isCanInviteViaLink ; 
 + @ NotNull 
 + @ Property ( " nonatomic , readonly " ) 
 + private BooleanValueModel isCanKickInvited ; 
 + @ NotNull 
 + @ Property ( " nonatomic , readonly " ) 
 + private BooleanValueModel isCanKickAnyone ; 
 + @ NotNull 
 + @ Property ( " nonatomic , readonly " ) 
 + private BooleanValueModel isCanEditForeign ; 
 + @ NotNull 
 + @ Property ( " nonatomic , readonly " ) 
 + private BooleanValueModel isCanDeleteForeign ; 
 
 @ NotNull 
 @ Property ( " nonatomic , readonly " ) 
 @ @ - 139 , 6 + 151 , 10 @ @ public class GroupVM extends BaseValueModel < Group > { 
 this . isCanLeave = new BooleanValueModel ( " group . " + groupId + " . isCanLeave " , rawObj . isCanLeave ( ) ) ; 
 this . isCanDelete = new BooleanValueModel ( " group . " + groupId + " . isCanDelete " , rawObj . isCanDelete ( ) ) ; 
 this . isCanInviteViaLink = new BooleanValueModel ( " group . " + groupId + " . isCanInviteViaLink " , rawObj . isCanInviteViaLink ( ) ) ; 
 + this . isCanKickInvited = new BooleanValueModel ( " group . " + groupId + " . isCanKickInvited " , rawObj . isCanKickInvited ( ) ) ; 
 + this . isCanKickAnyone = new BooleanValueModel ( " group . " + groupId + " . isCanKickAnyone " , rawObj . isCanKickAnyone ( ) ) ; 
 + this . isCanEditForeign = new BooleanValueModel ( " group . " + groupId + " . isCanEditForeign " , rawObj . isCanEditForeign ( ) ) ; 
 + this . isCanDeleteForeign = new BooleanValueModel ( " group . " + groupId + " . isCanDeleteForeign " , rawObj . isCanDeleteForeign ( ) ) ; 
 
 this . ownerId = new IntValueModel ( " group . " + groupId + " . membersCount " , rawObj . getOwnerId ( ) ) ; 
 this . members = new ValueModel < > ( " group . " + groupId + " . members " , new HashSet < > ( rawObj . getMembers ( ) ) ) ; 
 @ @ - 369 , 6 + 385 , 50 @ @ public class GroupVM extends BaseValueModel < Group > { 
 } 
 
 / * * 
 + * Is current user can kick invited members 
 + * 
 + * @ return is current user can kick invited model 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " getIsCanKickInvitedModel " ) 
 + public BooleanValueModel getIsCanKickInvited ( ) { 
 + return isCanKickInvited ; 
 + } 
 + 
 + / * * 
 + * Is current user can kick anyone 
 + * 
 + * @ return is current user can kick anyone model 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " getIsCanKickAnyoneModel " ) 
 + public BooleanValueModel getIsCanKickAnyone ( ) { 
 + return isCanKickAnyone ; 
 + } 
 + 
 + / * * 
 + * Is current user can edit foreign messages 
 + * 
 + * @ return is current user can edit foreign messages model 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " getIsCanEditForeignModel " ) 
 + public BooleanValueModel getIsCanEditForeign ( ) { 
 + return isCanEditForeign ; 
 + } 
 + 
 + / * * 
 + * Is current user can delete foreign messages 
 + * 
 + * @ return is current user can delete foreign messages model 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " getIsCanDeleteForeignModel " ) 
 + public BooleanValueModel getIsCanDeleteForeign ( ) { 
 + return isCanDeleteForeign ; 
 + } 
 + 
 + / * * 
 * Get Group owner user id model 
 * 
 * @ return creator owner id model 
 @ @ - 473 , 6 + 533 , 10 @ @ public class GroupVM extends BaseValueModel < Group > { 
 isChanged | = isCanLeave . change ( rawObj . isCanLeave ( ) ) ; 
 isChanged | = isCanDelete . change ( rawObj . isCanDelete ( ) ) ; 
 isChanged | = isCanInviteViaLink . change ( rawObj . isCanInviteViaLink ( ) ) ; 
 + isChanged | = isCanKickInvited . change ( rawObj . isCanKickInvited ( ) ) ; 
 + isChanged | = isCanKickAnyone . change ( rawObj . isCanKickAnyone ( ) ) ; 
 + isChanged | = isCanEditForeign . change ( rawObj . isCanEditForeign ( ) ) ; 
 + isChanged | = isCanDeleteForeign . change ( rawObj . isCanDeleteForeign ( ) ) ; 
 
 if ( isChanged ) { 
 notifyIfNeeded ( ) ;

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java 
 index 13d836f . . 84f5c7f 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / entity / Group . java 
 @ @ - 70 , 6 + 70 , 9 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 @ Nullable 
 @ Property ( " readonly , nonatomic " ) 
 private String about ; 
 + @ Nullable 
 + @ Property ( " readonly , nonatomic " ) 
 + private String shortName ; 
 @ NotNull 
 @ Property ( " readonly , nonatomic " ) 
 @ SuppressWarnings ( " NullableProblems " ) 
 @ @ - 167 , 6 + 170 , 11 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 } 
 
 @ Nullable 
 + public String getShortName ( ) { 
 + return shortName ; 
 + } 
 + 
 + @ Nullable 
 public Integer getOwnerId ( ) { 
 return ownerId ; 
 } 
 @ @ - 183 , 6 + 191 , 10 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 return isCanViewMembers ; 
 } 
 
 + public boolean isCanEditInfo ( ) { 
 + return isCanEditInfo ; 
 + } 
 + 
 public boolean isSharedHistory ( ) { 
 return isSharedHistory ; 
 } 
 @ @ - 877 , 6 + 889 , 7 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 this . ownerId = ext . getOwnerUid ( ) ; 
 this . about = ext . getAbout ( ) ; 
 this . topic = ext . getTheme ( ) ; 
 + this . shortName = ext . getShortName ( ) ; 
 this . isAsyncMembers = ext . isAsyncMembers ( ) ! = null ? ext . isAsyncMembers ( ) : false ; 
 this . isCanViewMembers = ext . canViewMembers ( ) ! = null ? ext . canViewMembers ( ) : true ; 
 this . isCanInviteMembers = ext . canViewMembers ( ) ! = null ? ext . canViewMembers ( ) : true ; 
 @ @ - 898 , 6 + 911 , 7 @ @ public class Group extends WrapperExtEntity < ApiGroupFull , ApiGroup > implements K 
 this . isSharedHistory = false ; 
 this . members = new ArrayList < > ( ) ; 
 this . isCanEditInfo = false ; 
 + this . shortName = null ; 
 } 
 } 
 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java 
 index d2c0d12 . . f60c3bb 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / viewmodel / GroupVM . java 
 @ @ - 59 , 23 + 59 , 32 @ @ public class GroupVM extends BaseValueModel < Group > { 
 private ValueModel < HashSet < GroupMember > > members ; 
 @ NotNull 
 @ Property ( " nonatomic , readonly " ) 
 + private BooleanValueModel isAsyncMembers ; 
 + @ NotNull 
 + @ Property ( " nonatomic , readonly " ) 
 private BooleanValueModel isCanViewMembers ; 
 @ NotNull 
 @ Property ( " nonatomic , readonly " ) 
 private BooleanValueModel isCanInviteMembers ; 
 + @ NotNull 
 + @ Property ( " nonatomic , readonly " ) 
 + private BooleanValueModel isCanEditInfo ; 
 
 
 + @ NotNull 
 @ Property ( " nonatomic , readonly " ) 
 - private IntValueModel ownerId ; 
 + private StringValueModel theme ; 
 @ NotNull 
 @ Property ( " nonatomic , readonly " ) 
 - private ValueModel < Integer > presence ; 
 + private StringValueModel about ; 
 @ NotNull 
 @ Property ( " nonatomic , readonly " ) 
 - private StringValueModel theme ; 
 + private StringValueModel shortName ; 
 + @ Property ( " nonatomic , readonly " ) 
 + private IntValueModel ownerId ; 
 @ NotNull 
 @ Property ( " nonatomic , readonly " ) 
 - private StringValueModel about ; 
 + private ValueModel < Integer > presence ; 
 
 @ NotNull 
 private ArrayList < ModelChangedListener < GroupVM > > listeners = new ArrayList < > ( ) ; 
 @ @ - 98 , 11 + 107 , 14 @ @ public class GroupVM extends BaseValueModel < Group > { 
 
 this . isCanViewMembers = new BooleanValueModel ( " group . " + groupId + " . can _ view _ members " , rawObj . isCanViewMembers ( ) ) ; 
 this . isCanInviteMembers = new BooleanValueModel ( " group . " + groupId + " . can _ invite _ members " , rawObj . isCanInviteMembers ( ) ) ; 
 + this . isCanEditInfo = new BooleanValueModel ( " group . " + groupId + " . can _ edit _ info " , rawObj . isCanEditInfo ( ) ) ; 
 + this . isAsyncMembers = new BooleanValueModel ( " group . " + groupId + " . isAsyncMembers " , rawObj . isAsyncMembers ( ) ) ; 
 this . ownerId = new IntValueModel ( " group . " + groupId + " . membersCount " , rawObj . getOwnerId ( ) ) ; 
 this . members = new ValueModel < > ( " group . " + groupId + " . members " , new HashSet < > ( rawObj . getMembers ( ) ) ) ; 
 this . presence = new ValueModel < > ( " group . " + groupId + " . presence " , 0 ) ; 
 this . theme = new StringValueModel ( " group . " + groupId + " . theme " , rawObj . getTopic ( ) ) ; 
 this . about = new StringValueModel ( " group . " + groupId + " . about " , rawObj . getAbout ( ) ) ; 
 + this . shortName = new StringValueModel ( " group . " + groupId + " . shortname " , rawObj . getShortName ( ) ) ; 
 } 
 
 / * * 
 @ @ - 149 , 6 + 161 , 28 @ @ public class GroupVM extends BaseValueModel < Group > { 
 } 
 
 / * * 
 + * Get About Value Model 
 + * 
 + * @ return Value Model of String 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " getAboutModel " ) 
 + public StringValueModel getAbout ( ) { 
 + return about ; 
 + } 
 + 
 + / * * 
 + * Get Theme Value Model 
 + * 
 + * @ return Value Model of String 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " getThemeModel " ) 
 + public StringValueModel getTheme ( ) { 
 + return theme ; 
 + } 
 + 
 + / * * 
 * Get membership Value Model 
 * 
 * @ return Value Model of Boolean 
 @ @ - 193 , 6 + 227 , 17 @ @ public class GroupVM extends BaseValueModel < Group > { 
 } 
 
 / * * 
 + * Can current user edit group info 
 + * 
 + * @ return can edit group info 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " isCanEditInfoModel " ) 
 + public BooleanValueModel getIsCanEditInfo ( ) { 
 + return isCanEditInfo ; 
 + } 
 + 
 + / * * 
 * Can current user invite members to a group 
 * 
 * @ return can invite members model 
 @ @ - 203 , 6 + 248 , 18 @ @ public class GroupVM extends BaseValueModel < Group > { 
 return isCanInviteMembers ; 
 } 
 
 + 
 + / * * 
 + * Is members should be fetched async 
 + * 
 + * @ return is members async model 
 + * / 
 + @ NotNull 
 + @ ObjectiveCName ( " getIsAsyncMembersModel " ) 
 + public BooleanValueModel getIsAsyncMembers ( ) { 
 + return isAsyncMembers ; 
 + } 
 + 
 / * * 
 * Get Group owner user id model 
 * 
 @ @ - 235 , 47 + 292 , 6 @ @ public class GroupVM extends BaseValueModel < Group > { 
 return presence ; 
 } 
 
 - @ Override 
 - protected void updateValues ( @ NotNull Group rawObj ) { 
 - boolean isChanged = name . change ( rawObj . getTitle ( ) ) ; 
 - 
 - isChanged | = avatar . change ( rawObj . getAvatar ( ) ) ; 
 - isChanged | = membersCount . change ( rawObj . getMembersCount ( ) ) ; 
 - isChanged | = isMember . change ( rawObj . isMember ( ) ) ; 
 - isChanged | = isCanWriteMessage . change ( rawObj . isCanWrite ( ) ) ; 
 - 
 - isChanged | = theme . change ( rawObj . getTopic ( ) ) ; 
 - isChanged | = about . change ( rawObj . getAbout ( ) ) ; 
 - isChanged | = members . change ( new HashSet < > ( rawObj . getMembers ( ) ) ) ; 
 - isChanged | = ownerId . change ( rawObj . getOwnerId ( ) ) ; 
 - isChanged | = isCanViewMembers . change ( rawObj . isCanViewMembers ( ) ) ; 
 - 
 - if ( isChanged ) { 
 - notifyChange ( ) ; 
 - } 
 - } 
 - 
 - / * * 
 - * Get About Value Model 
 - * 
 - * @ return Value Model of String 
 - * / 
 - @ NotNull 
 - @ ObjectiveCName ( " getAboutModel " ) 
 - public StringValueModel getAbout ( ) { 
 - return about ; 
 - } 
 - 
 - / * * 
 - * Get Theme Value Model 
 - * 
 - * @ return Value Model of String 
 - * / 
 - @ NotNull 
 - @ ObjectiveCName ( " getThemeModel " ) 
 - public StringValueModel getTheme ( ) { 
 - return theme ; 
 - } 
 
 / * * 
 * Subscribe for GroupVM updates 
 @ @ - 284 , 8 + 300 , 7 @ @ public class GroupVM extends BaseValueModel < Group > { 
 * / 
 @ MainThread 
 @ ObjectiveCName ( " subscribeWithListener : " ) 
 - public void subscribe ( @ NotNull ModelChangedListener < GroupVM > listener ) { 
 - / / im . actor . runtime . Runtime . checkMainThread ( ) ; 
 + public synchronized void subscribe ( @ NotNull ModelChangedListener < GroupVM > listener ) { 
 if ( listeners . contains ( listener ) ) { 
 return ; 
 } 
 @ @ - 300 , 8 + 315 , 7 @ @ public class GroupVM extends BaseValueModel < Group > { 
 * / 
 @ MainThread 
 @ ObjectiveCName ( " subscribeWithListener : withNotify : " ) 
 - public void subscribe ( @ NotNull ModelChangedListener < GroupVM > listener , boolean notify ) { 
 - / / im . actor . runtime . Runtime . checkMainThread ( ) ; 
 + public synchronized void subscribe ( @ NotNull ModelChangedListener < GroupVM > listener , boolean notify ) { 
 if ( listeners . contains ( listener ) ) { 
 return ; 
 } 
 @ @ - 318 , 11 + 332 , 43 @ @ public class GroupVM extends BaseValueModel < Group > { 
 * / 
 @ MainThread 
 @ ObjectiveCName ( " unsubscribeWithListener : " ) 
 - public void unsubscribe ( @ NotNull ModelChangedListener < GroupVM > listener ) { 
 - / / im . actor . runtime . Runtime . checkMainThread ( ) ; 
 + public synchronized void unsubscribe ( @ NotNull ModelChangedListener < GroupVM > listener ) { 
 listeners . remove ( listener ) ; 
 } 
 
 + / / 
 + / / Update handling 
 + / / 
 + 
 + @ Override 
 + protected void updateValues ( @ NotNull Group rawObj ) { 
 + boolean isChanged = name . change ( rawObj . getTitle ( ) ) ; 
 + 
 + isChanged | = avatar . change ( rawObj . getAvatar ( ) ) ; 
 + isChanged | = membersCount . change ( rawObj . getMembersCount ( ) ) ; 
 + isChanged | = isMember . change ( rawObj . isMember ( ) ) ; 
 + isChanged | = isCanWriteMessage . change ( rawObj . isCanWrite ( ) ) ; 
 + 
 + isChanged | = theme . change ( rawObj . getTopic ( ) ) ; 
 + isChanged | = about . change ( rawObj . getAbout ( ) ) ; 
 + isChanged | = members . change ( new HashSet < > ( rawObj . getMembers ( ) ) ) ; 
 + isChanged | = ownerId . change ( rawObj . getOwnerId ( ) ) ; 
 + isChanged | = isCanViewMembers . change ( rawObj . isCanViewMembers ( ) ) ; 
 + isChanged | = isCanEditInfo . change ( rawObj . isCanEditInfo ( ) ) ; 
 + isChanged | = shortName . change ( rawObj . getShortName ( ) ) ; 
 + isChanged | = isAsyncMembers . change ( rawObj . isAsyncMembers ( ) ) ; 
 + 
 + if ( isChanged ) { 
 + notifyIfNeeded ( ) ; 
 + } 
 + } 
 + 
 + private synchronized void notifyIfNeeded ( ) { 
 + if ( listeners . size ( ) > 0 ) { 
 + notifyChange ( ) ; 
 + } 
 + } 
 + 
 private void notifyChange ( ) { 
 im . actor . runtime . Runtime . postToMainThread ( ( ) - > { 
 for ( ModelChangedListener < GroupVM > l : listeners ) { 
 @ @ - 330 , 13 + 376 , 4 @ @ public class GroupVM extends BaseValueModel < Group > { 
 } 
 } ) ; 
 } 
 - 
 - private boolean isHaveMember ( int uid , Collection < GroupMember > members ) { 
 - for ( GroupMember m : members ) { 
 - if ( m . getUid ( ) = = uid ) { 
 - return true ; 
 - } 
 - } 
 - return false ; 
 - } 
 } 
 \ No newline at end of file
