BLEU SCORE: 0.44632361378533286

TEST MSG: fix ( android ) : sticker keyboard scale type
GENERATED MSG: fix ( android ) : bad link crash

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / stickers / StickerView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / stickers / StickerView . java < nl > index 2368713 . . 886214a 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / stickers / StickerView . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / stickers / StickerView . java < nl > @ @ - 7 , 6 + 7 , 7 @ @ import android . util . AttributeSet ; < nl > import com . facebook . common . util . UriUtil ; < nl > import com . facebook . drawee . backends . pipeline . Fresco ; < nl > import com . facebook . drawee . backends . pipeline . PipelineDraweeController ; < nl > + import com . facebook . drawee . drawable . ScalingUtils ; < nl > import com . facebook . drawee . generic . GenericDraweeHierarchy ; < nl > import com . facebook . drawee . generic . GenericDraweeHierarchyBuilder ; < nl > import com . facebook . drawee . view . SimpleDraweeView ; < nl > @ @ - 56 , 6 + 57 , 7 @ @ public class StickerView extends SimpleDraweeView { < nl > < nl > GenericDraweeHierarchy hierarchy = builder < nl > . setFadeDuration ( 200 ) < nl > + . setActualImageScaleType ( ScalingUtils . ScaleType . CENTER _ INSIDE ) < nl > . build ( ) ; < nl > setHierarchy ( hierarchy ) ; < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java < nl > index f8ee6ef . . 8a52e33 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java < nl > @ @ - 29 , 6 + 29 , 7 @ @ import im . actor . sdk . ActorSDK ; < nl > import im . actor . sdk . R ; < nl > import im . actor . sdk . controllers . conversation . view . MentionSpan ; < nl > import im . actor . sdk . util . Strings ; < nl > + import im . actor . sdk . view . BaseUrlSpan ; < nl > import im . actor . sdk . view . emoji . SmileProcessor ; < nl > import im . actor . sdk . view . markdown . AndroidMarkdown ; < nl > import im . actor . runtime . generic . mvvm . ListProcessor ; < nl > @ @ - 251 , 7 + 252 , 7 @ @ public class ChatListProcessor implements ListProcessor < Message > { < nl > return false ; < nl > } < nl > < nl > - URLSpan span = ( isMention & & isGroup & & found ) ? new MentionSpan ( nick , userId , false ) : new URLSpan ( m . group ( ) ) ; < nl > + URLSpan span = ( isMention & & isGroup & & found ) ? new MentionSpan ( nick , userId , false ) : new BaseUrlSpan ( m . group ( ) , false ) ; < nl > < nl > < nl > spannable . setSpan ( span , m . start ( ) , m . end ( ) , Spanned . SPAN _ EXCLUSIVE _ EXCLUSIVE ) ; < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > index 50efbd8 . . cea6b77 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java < nl > @ @ - 12 , 6 + 12 , 7 @ @ import android . text . style . ForegroundColorSpan ; < nl > import android . text . style . RelativeSizeSpan ; < nl > import android . text . style . StyleSpan ; < nl > import android . view . View ; < nl > + import android . widget . Toast ; < nl > < nl > import im . actor . sdk . controllers . fragment . preview . CodePreviewActivity ; < nl > import im . actor . runtime . android . AndroidContext ; < nl > @ @ - 92 , 10 + 93 , 16 @ @ public class AndroidMarkdown { < nl > builder . setSpan ( new ClickableSpan ( ) { < nl > @ Override < nl > public void onClick ( View view ) { < nl > - AndroidContext . getContext ( ) . startActivity ( < nl > - new Intent ( Intent . ACTION _ VIEW ) < nl > - . setData ( Uri . parse ( url . getUrl ( ) ) ) < nl > - . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ) ; < nl > + Intent intent = new Intent ( Intent . ACTION _ VIEW ) < nl > + . setData ( Uri . parse ( url . getUrl ( ) ) ) < nl > + . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ; < nl > + if ( intent . resolveActivity ( view . getContext ( ) . getPackageManager ( ) ) ! = null ) { < nl > + AndroidContext . getContext ( ) . startActivity ( < nl > + intent ) ; < nl > + } else { < nl > + Toast . makeText ( view . getContext ( ) , " Unknown URL type " , Toast . LENGTH _ SHORT ) . show ( ) ; < nl > + } < nl > + < nl > } < nl > } , start , builder . length ( ) , Spanned . SPAN _ EXCLUSIVE _ EXCLUSIVE ) ; < nl > } else {

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / stickers / StickerView . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / stickers / StickerView . java 
 index 2368713 . . 886214a 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / stickers / StickerView . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / emoji / stickers / StickerView . java 
 @ @ - 7 , 6 + 7 , 7 @ @ import android . util . AttributeSet ; 
 import com . facebook . common . util . UriUtil ; 
 import com . facebook . drawee . backends . pipeline . Fresco ; 
 import com . facebook . drawee . backends . pipeline . PipelineDraweeController ; 
 + import com . facebook . drawee . drawable . ScalingUtils ; 
 import com . facebook . drawee . generic . GenericDraweeHierarchy ; 
 import com . facebook . drawee . generic . GenericDraweeHierarchyBuilder ; 
 import com . facebook . drawee . view . SimpleDraweeView ; 
 @ @ - 56 , 6 + 57 , 7 @ @ public class StickerView extends SimpleDraweeView { 
 
 GenericDraweeHierarchy hierarchy = builder 
 . setFadeDuration ( 200 ) 
 + . setActualImageScaleType ( ScalingUtils . ScaleType . CENTER _ INSIDE ) 
 . build ( ) ; 
 setHierarchy ( hierarchy ) ; 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java 
 index f8ee6ef . . 8a52e33 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / controllers / conversation / messages / ChatListProcessor . java 
 @ @ - 29 , 6 + 29 , 7 @ @ import im . actor . sdk . ActorSDK ; 
 import im . actor . sdk . R ; 
 import im . actor . sdk . controllers . conversation . view . MentionSpan ; 
 import im . actor . sdk . util . Strings ; 
 + import im . actor . sdk . view . BaseUrlSpan ; 
 import im . actor . sdk . view . emoji . SmileProcessor ; 
 import im . actor . sdk . view . markdown . AndroidMarkdown ; 
 import im . actor . runtime . generic . mvvm . ListProcessor ; 
 @ @ - 251 , 7 + 252 , 7 @ @ public class ChatListProcessor implements ListProcessor < Message > { 
 return false ; 
 } 
 
 - URLSpan span = ( isMention & & isGroup & & found ) ? new MentionSpan ( nick , userId , false ) : new URLSpan ( m . group ( ) ) ; 
 + URLSpan span = ( isMention & & isGroup & & found ) ? new MentionSpan ( nick , userId , false ) : new BaseUrlSpan ( m . group ( ) , false ) ; 
 
 
 spannable . setSpan ( span , m . start ( ) , m . end ( ) , Spanned . SPAN _ EXCLUSIVE _ EXCLUSIVE ) ; 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 index 50efbd8 . . cea6b77 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / view / markdown / AndroidMarkdown . java 
 @ @ - 12 , 6 + 12 , 7 @ @ import android . text . style . ForegroundColorSpan ; 
 import android . text . style . RelativeSizeSpan ; 
 import android . text . style . StyleSpan ; 
 import android . view . View ; 
 + import android . widget . Toast ; 
 
 import im . actor . sdk . controllers . fragment . preview . CodePreviewActivity ; 
 import im . actor . runtime . android . AndroidContext ; 
 @ @ - 92 , 10 + 93 , 16 @ @ public class AndroidMarkdown { 
 builder . setSpan ( new ClickableSpan ( ) { 
 @ Override 
 public void onClick ( View view ) { 
 - AndroidContext . getContext ( ) . startActivity ( 
 - new Intent ( Intent . ACTION _ VIEW ) 
 - . setData ( Uri . parse ( url . getUrl ( ) ) ) 
 - . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ) ; 
 + Intent intent = new Intent ( Intent . ACTION _ VIEW ) 
 + . setData ( Uri . parse ( url . getUrl ( ) ) ) 
 + . setFlags ( Intent . FLAG _ ACTIVITY _ NEW _ TASK ) ; 
 + if ( intent . resolveActivity ( view . getContext ( ) . getPackageManager ( ) ) ! = null ) { 
 + AndroidContext . getContext ( ) . startActivity ( 
 + intent ) ; 
 + } else { 
 + Toast . makeText ( view . getContext ( ) , " Unknown URL type " , Toast . LENGTH _ SHORT ) . show ( ) ; 
 + } 
 + 
 } 
 } , start , builder . length ( ) , Spanned . SPAN _ EXCLUSIVE _ EXCLUSIVE ) ; 
 } else {
