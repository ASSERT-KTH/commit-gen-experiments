BLEU SCORE: 0.35084396956386854

TEST MSG: fix ( core ) : check not to move InReadDate back
GENERATED MSG: fix ( core ) : Fixing isLoaded flag in chat

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java < nl > index aaf5417 . . dde083e 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java < nl > @ @ - 238 , 9 + 238 , 10 @ @ public class RouterActor extends ModuleActor { < nl > if ( isConversationVisible ) { < nl > / / Auto Reading message < nl > if ( maxInDate > 0 ) { < nl > - state = state < nl > - . changeInReadDate ( maxInDate ) < nl > - . changeCounter ( 0 ) ; < nl > + if ( state . getInReadDate ( ) < maxInDate ) { < nl > + state = state . changeInReadDate ( maxInDate ) ; < nl > + } < nl > + state = state . changeCounter ( 0 ) ; < nl > if ( state . getInMaxMessageDate ( ) < maxInDate ) { < nl > state . changeInMaxDate ( maxInDate ) ; < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java < nl > index cb2a5f0 . . a145ef3 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java < nl > @ @ - 239 , 6 + 239 , 10 @ @ public class RouterActor extends ModuleActor { < nl > state = state . changeOutReceiveDate ( maxReceiveDate ) ; < nl > isChanged = true ; < nl > } < nl > + if ( state . isLoaded ( ) ! = isEnded ) { < nl > + state = state . changeIsLoaded ( isEnded ) ; < nl > + isChanged = true ; < nl > + } < nl > if ( isChanged ) { < nl > conversationStates . addOrUpdateItem ( state ) ; < nl > }

TEST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java 
 index aaf5417 . . dde083e 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java 
 @ @ - 238 , 9 + 238 , 10 @ @ public class RouterActor extends ModuleActor { 
 if ( isConversationVisible ) { 
 / / Auto Reading message 
 if ( maxInDate > 0 ) { 
 - state = state 
 - . changeInReadDate ( maxInDate ) 
 - . changeCounter ( 0 ) ; 
 + if ( state . getInReadDate ( ) < maxInDate ) { 
 + state = state . changeInReadDate ( maxInDate ) ; 
 + } 
 + state = state . changeCounter ( 0 ) ; 
 if ( state . getInMaxMessageDate ( ) < maxInDate ) { 
 state . changeInMaxDate ( maxInDate ) ; 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java 
 index cb2a5f0 . . a145ef3 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / messaging / router / RouterActor . java 
 @ @ - 239 , 6 + 239 , 10 @ @ public class RouterActor extends ModuleActor { 
 state = state . changeOutReceiveDate ( maxReceiveDate ) ; 
 isChanged = true ; 
 } 
 + if ( state . isLoaded ( ) ! = isEnded ) { 
 + state = state . changeIsLoaded ( isEnded ) ; 
 + isChanged = true ; 
 + } 
 if ( isChanged ) { 
 conversationStates . addOrUpdateItem ( state ) ; 
 }
