BLEU SCORE: 0.4703709593866897

TEST MSG: perf ( server : messaging ) : check if dialog created by mobilePeers
GENERATED MSG: perf ( server : messaging ) : persistAllAsync in DialogRoot

TEST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > index 3c87d65 . . 30507c2 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > @ @ - 220 , 7 + 220 , 7 @ @ private class DialogRoot ( val userId : Int , extensions : Seq [ ApiExtension ] ) < nl > < nl > private def isFavourited ( peer : Peer ) : Boolean = state . active . favourites . contains ( peer ) < nl > < nl > - private def isDialogCreated ( peer : Peer ) : Boolean = state . mobile . exists ( _ . peer = = peer ) < nl > + private def isDialogCreated ( peer : Peer ) : Boolean = state . mobilePeers . contains ( peer ) < nl > < nl > private def isDialogShown ( peer : Peer ) : Boolean = state . active . contains ( peer )
NEAREST DIFF (one line): diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > index 1f43c7c . . 3c87d65 100644 < nl > - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala < nl > @ @ - 141 , 7 + 141 , 7 @ @ private class DialogRoot ( val userId : Int , extensions : Seq [ ApiExtension ] ) < nl > List ( Created ( now , peerOpt ) ) < nl > } < nl > < nl > - persistAll ( events ) ( e ⇒ commit ( e ) ) < nl > + persistAllAsync ( events ) ( e ⇒ commit ( e ) ) < nl > < nl > deferAsync ( ( ) ) { _ ⇒ < nl > handleDialogCommand ( dc )

TEST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 index 3c87d65 . . 30507c2 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 @ @ - 220 , 7 + 220 , 7 @ @ private class DialogRoot ( val userId : Int , extensions : Seq [ ApiExtension ] ) 
 
 private def isFavourited ( peer : Peer ) : Boolean = state . active . favourites . contains ( peer ) 
 
 - private def isDialogCreated ( peer : Peer ) : Boolean = state . mobile . exists ( _ . peer = = peer ) 
 + private def isDialogCreated ( peer : Peer ) : Boolean = state . mobilePeers . contains ( peer ) 
 
 private def isDialogShown ( peer : Peer ) : Boolean = state . active . contains ( peer )

NEAREST DIFF:
diff - - git a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 index 1f43c7c . . 3c87d65 100644 
 - - - a / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 + + + b / actor - server / actor - core / src / main / scala / im / actor / server / dialog / DialogRoot . scala 
 @ @ - 141 , 7 + 141 , 7 @ @ private class DialogRoot ( val userId : Int , extensions : Seq [ ApiExtension ] ) 
 List ( Created ( now , peerOpt ) ) 
 } 
 
 - persistAll ( events ) ( e ⇒ commit ( e ) ) 
 + persistAllAsync ( events ) ( e ⇒ commit ( e ) ) 
 
 deferAsync ( ( ) ) { _ ⇒ 
 handleDialogCommand ( dc )
