BLEU SCORE: 0.355310106137518

TEST MSG: fix ( iOS ) : change settings style
GENERATED MSG: fix ( iOS ) : fix date background in media cell

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedCells . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedCells . swift < nl > index 86dcd6f . . a3d0893 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedCells . swift 	 < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedCells . swift 	 < nl > @ @ - 93 , 7 + 93 , 7 @ @ public class AATitledRow : AAManagedRow { < nl > res . accessoryType = accessoryType < nl > < nl > if isAction { < nl > - res . contentLabel . textColor = ActorSDK . sharedActor ( ) . style . cellTintColor < nl > + res . contentLabel . textColor = ActorSDK . sharedActor ( ) . style . vcHintColor < nl > } else { < nl > res . contentLabel . textColor = ActorSDK . sharedActor ( ) . style . cellTextColor < nl > } < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > index e0c05e5 . . e852cc8 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift < nl > @ @ - 12 , 7 + 12 , 7 @ @ public class AASettingsViewController : AAContentTableController { < nl > < nl > private var headerCell : AAAvatarRow ! < nl > private var nicknameCell : AATitledRow ! < nl > - private var aboutCell : AATextRow ! < nl > + private var aboutCell : AATitledRow ! < nl > < nl > public init ( ) { < nl > super . init ( style : AAContentTableStyle . SettingsPlain ) < nl > @ @ - 223 , 16 + 223 , 16 @ @ public class AASettingsViewController : AAContentTableController { < nl > } < nl > < nl > / / Contacts : About < nl > - self . aboutCell = s . text ( " ProfileAbout " ) { [ unowned self ] ( r ) - > ( ) in < nl > - < nl > - r . navigate = true < nl > + self . aboutCell = s . titled ( " ProfileAbout " ) { [ unowned self ] ( r ) - > ( ) in < nl > + < nl > + r . accessoryType = . DisclosureIndicator < nl > < nl > r . bindAction = { [ unowned self ] ( r ) - > ( ) in < nl > if let about = self . user . getAboutModel ( ) . get ( ) { < nl > - r . content = about < nl > + r . subtitle = about < nl > r . isAction = false < nl > } else { < nl > - r . content = AALocalized ( " SettingsAboutNotSet " ) < nl > + r . subtitle = AALocalized ( " SettingsAboutNotSet " ) < nl > r . isAction = true < nl > } < nl > } < nl > @ @ - 261 , 6 + 261 , 7 @ @ public class AASettingsViewController : AAContentTableController { < nl > < nl > return AADevice . isiPad < nl > } < nl > + < nl > } < nl > < nl > / / Profile : Phones < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / Cells / AATitledCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / Cells / AATitledCell . swift < nl > index e2d45cb . . 24b0740 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / Cells / AATitledCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / Cells / AATitledCell . swift < nl > @ @ - 26 , 7 + 26 , 7 @ @ public class AATitledCell : AATableViewCell { < nl > titleLabel . text = title < nl > contentLabel . text = content < nl > if isAction { < nl > - contentLabel . textColor = appStyle . cellTintColor < nl > + contentLabel . textColor = UIColor . lightGrayColor ( ) < nl > } else { < nl > contentLabel . textColor = appStyle . cellTextColor < nl > }
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > index 59d23d1 . . 1327b5d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > @ @ - 377 , 6 + 377 , 11 @ @ public class ActorStyle { < nl > public var chatIconWarring = UIImage . templated ( " msg _ warring " ) < nl > public var chatIconClock = UIImage . templated ( " msg _ clock " ) < nl > < nl > + < nl > + < nl > + < nl > + < nl > + < nl > private var _ chatStatusActive : UIColor ? < nl > public var chatStatusActive : UIColor { < nl > get { return _ chatStatusActive ! = nil ? _ chatStatusActive ! : vcTintColor } < nl > @ @ - 587 , 6 + 592 , 24 @ @ public class ActorStyle { < nl > set ( v ) { _ dialogStatusError = v } < nl > } < nl > < nl > + private var _ statusBackgroundIcon : UIImage ? < nl > + public var statusBackgroundImage : UIImage { < nl > + get { < nl > + if ( _ statusBackgroundIcon = = nil ) { < nl > + < nl > + let statusImage : UIImage = ( UIImage . bundled ( " bubble _ service _ bg " ) ? . imageWithColor ( UIColor . blackColor ( ) . colorWithAlphaComponent ( 0 . 7 ) ) . imageWithRenderingMode ( UIImageRenderingMode . AlwaysOriginal ) ) ! < nl > + < nl > + let center : CGPoint = CGPointMake ( statusImage . size . width / 2 . 0 , statusImage . size . height / 2 . 0 ) ; < nl > + let capInsets : UIEdgeInsets = UIEdgeInsetsMake ( center . y , center . x , center . y , center . x ) ; < nl > + < nl > + _ statusBackgroundIcon = statusImage . resizableImageWithCapInsets ( capInsets , resizingMode : UIImageResizingMode . Stretch ) < nl > + return _ statusBackgroundIcon ! < nl > + } else { < nl > + return _ statusBackgroundIcon ! < nl > + } < nl > + } < nl > + } < nl > + < nl > / / < nl > / / Contacts styles < nl > / / < nl > @ @ - 684 , 6 + 707 , 18 @ @ public class ActorStyle { < nl > set ( v ) { _ vcStarInfoTextColor = v } < nl > } < nl > public var _ vcStarInfoTextColor : UIColor ? < nl > + < nl > + / / < nl > + / / Settings VC < nl > + / / < nl > + < nl > + public var vcSettingsContactsHeaderTextColor : UIColor { < nl > + get { return _ vcSettingsContactsHeaderTextColor ! = nil ? _ vcSettingsContactsHeaderTextColor ! : vcTextColor } < nl > + set ( v ) { _ vcSettingsContactsHeaderTextColor = v } < nl > + } < nl > + public var _ vcSettingsContactsHeaderTextColor : UIColor ? < nl > + < nl > + < nl > } < nl > < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > index 75f1d53 . . 33fc49f 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > @ @ - 81 , 7 + 81 , 9 @ @ public class AABubbleCell : UICollectionViewCell { < nl > / / Cached Date bubble images < nl > / / < nl > < nl > - private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) < nl > + / / private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) < nl > + < nl > + private static var dateBgImage = ActorSDK . sharedActor ( ) . style . statusBackgroundImage < nl > < nl > / / MARK : - < nl > / / MARK : Public vars < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > index 0e04191 . . 29cf826 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > @ @ - 27 , 8 + 27 , 10 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > public init ( frame : CGRect ) { < nl > super . init ( frame : frame , isFullSize : false ) < nl > < nl > - timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) < nl > - < nl > + / / timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) < nl > + < nl > + timeBg . image = ActorSDK . sharedActor ( ) . style . statusBackgroundImage < nl > + < nl > timeLabel . font = UIFont . italicSystemFontOfSize ( 11 ) < nl > timeLabel . textColor = appStyle . chatMediaDateColor < nl > < nl > @ @ - 285 , 7 + 287 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > statusView . frame = CGRectMake ( timeLabel . frame . maxX , timeLabel . frame . minY , 23 , timeHeight ) < nl > } < nl > < nl > - timeBg . frame = CGRectMake ( timeLabel . frame . minX - 3 , timeLabel . frame . minY - 1 , timeWidth + 6 , timeHeight + 2 ) < nl > + timeBg . frame = CGRectMake ( timeLabel . frame . minX - 4 , timeLabel . frame . minY - 1 , timeWidth + 8 , timeHeight + 2 ) < nl > } < nl > < nl > / / Photo preview < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > index 6b6ac11 . . 95d8f0d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > @ @ - 117 , 6 + 117 , 25 @ @ public extension UIImage { < nl > UIGraphicsEndImageContext ( ) < nl > return image ; < nl > } < nl > + < nl > + func imageWithColor ( color1 : UIColor ) - > UIImage { < nl > + UIGraphicsBeginImageContextWithOptions ( self . size , false , self . scale ) < nl > + < nl > + let context = UIGraphicsGetCurrentContext ( ) < nl > + CGContextTranslateCTM ( context , 0 , self . size . height ) < nl > + CGContextScaleCTM ( context , 1 . 0 , - 1 . 0 ) ; < nl > + CGContextSetBlendMode ( context , CGBlendMode . Normal ) < nl > + < nl > + let rect = CGRectMake ( 0 , 0 , self . size . width , self . size . height ) as CGRect < nl > + CGContextClipToMask ( context , rect , self . CGImage ) < nl > + color1 . setFill ( ) < nl > + CGContextFillRect ( context , rect ) < nl > + < nl > + let newImage = UIGraphicsGetImageFromCurrentImageContext ( ) as UIImage < nl > + UIGraphicsEndImageContext ( ) < nl > + < nl > + return newImage < nl > + } < nl > } < nl > < nl > public class Imaging {

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedCells . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedCells . swift 
 index 86dcd6f . . a3d0893 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedCells . swift 	 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Managed Runtime / ManagedCells . swift 	 
 @ @ - 93 , 7 + 93 , 7 @ @ public class AATitledRow : AAManagedRow { 
 res . accessoryType = accessoryType 
 
 if isAction { 
 - res . contentLabel . textColor = ActorSDK . sharedActor ( ) . style . cellTintColor 
 + res . contentLabel . textColor = ActorSDK . sharedActor ( ) . style . vcHintColor 
 } else { 
 res . contentLabel . textColor = ActorSDK . sharedActor ( ) . style . cellTextColor 
 } 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 index e0c05e5 . . e852cc8 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Settings / AASettingsViewController . swift 
 @ @ - 12 , 7 + 12 , 7 @ @ public class AASettingsViewController : AAContentTableController { 
 
 private var headerCell : AAAvatarRow ! 
 private var nicknameCell : AATitledRow ! 
 - private var aboutCell : AATextRow ! 
 + private var aboutCell : AATitledRow ! 
 
 public init ( ) { 
 super . init ( style : AAContentTableStyle . SettingsPlain ) 
 @ @ - 223 , 16 + 223 , 16 @ @ public class AASettingsViewController : AAContentTableController { 
 } 
 
 / / Contacts : About 
 - self . aboutCell = s . text ( " ProfileAbout " ) { [ unowned self ] ( r ) - > ( ) in 
 - 
 - r . navigate = true 
 + self . aboutCell = s . titled ( " ProfileAbout " ) { [ unowned self ] ( r ) - > ( ) in 
 + 
 + r . accessoryType = . DisclosureIndicator 
 
 r . bindAction = { [ unowned self ] ( r ) - > ( ) in 
 if let about = self . user . getAboutModel ( ) . get ( ) { 
 - r . content = about 
 + r . subtitle = about 
 r . isAction = false 
 } else { 
 - r . content = AALocalized ( " SettingsAboutNotSet " ) 
 + r . subtitle = AALocalized ( " SettingsAboutNotSet " ) 
 r . isAction = true 
 } 
 } 
 @ @ - 261 , 6 + 261 , 7 @ @ public class AASettingsViewController : AAContentTableController { 
 
 return AADevice . isiPad 
 } 
 + 
 } 
 
 / / Profile : Phones 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / Cells / AATitledCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / Cells / AATitledCell . swift 
 index e2d45cb . . 24b0740 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / Cells / AATitledCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Views / Cells / AATitledCell . swift 
 @ @ - 26 , 7 + 26 , 7 @ @ public class AATitledCell : AATableViewCell { 
 titleLabel . text = title 
 contentLabel . text = content 
 if isAction { 
 - contentLabel . textColor = appStyle . cellTintColor 
 + contentLabel . textColor = UIColor . lightGrayColor ( ) 
 } else { 
 contentLabel . textColor = appStyle . cellTextColor 
 }

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 index 59d23d1 . . 1327b5d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 @ @ - 377 , 6 + 377 , 11 @ @ public class ActorStyle { 
 public var chatIconWarring = UIImage . templated ( " msg _ warring " ) 
 public var chatIconClock = UIImage . templated ( " msg _ clock " ) 
 
 + 
 + 
 + 
 + 
 + 
 private var _ chatStatusActive : UIColor ? 
 public var chatStatusActive : UIColor { 
 get { return _ chatStatusActive ! = nil ? _ chatStatusActive ! : vcTintColor } 
 @ @ - 587 , 6 + 592 , 24 @ @ public class ActorStyle { 
 set ( v ) { _ dialogStatusError = v } 
 } 
 
 + private var _ statusBackgroundIcon : UIImage ? 
 + public var statusBackgroundImage : UIImage { 
 + get { 
 + if ( _ statusBackgroundIcon = = nil ) { 
 + 
 + let statusImage : UIImage = ( UIImage . bundled ( " bubble _ service _ bg " ) ? . imageWithColor ( UIColor . blackColor ( ) . colorWithAlphaComponent ( 0 . 7 ) ) . imageWithRenderingMode ( UIImageRenderingMode . AlwaysOriginal ) ) ! 
 + 
 + let center : CGPoint = CGPointMake ( statusImage . size . width / 2 . 0 , statusImage . size . height / 2 . 0 ) ; 
 + let capInsets : UIEdgeInsets = UIEdgeInsetsMake ( center . y , center . x , center . y , center . x ) ; 
 + 
 + _ statusBackgroundIcon = statusImage . resizableImageWithCapInsets ( capInsets , resizingMode : UIImageResizingMode . Stretch ) 
 + return _ statusBackgroundIcon ! 
 + } else { 
 + return _ statusBackgroundIcon ! 
 + } 
 + } 
 + } 
 + 
 / / 
 / / Contacts styles 
 / / 
 @ @ - 684 , 6 + 707 , 18 @ @ public class ActorStyle { 
 set ( v ) { _ vcStarInfoTextColor = v } 
 } 
 public var _ vcStarInfoTextColor : UIColor ? 
 + 
 + / / 
 + / / Settings VC 
 + / / 
 + 
 + public var vcSettingsContactsHeaderTextColor : UIColor { 
 + get { return _ vcSettingsContactsHeaderTextColor ! = nil ? _ vcSettingsContactsHeaderTextColor ! : vcTextColor } 
 + set ( v ) { _ vcSettingsContactsHeaderTextColor = v } 
 + } 
 + public var _ vcSettingsContactsHeaderTextColor : UIColor ? 
 + 
 + 
 } 
 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 index 75f1d53 . . 33fc49f 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 @ @ - 81 , 7 + 81 , 9 @ @ public class AABubbleCell : UICollectionViewCell { 
 / / Cached Date bubble images 
 / / 
 
 - private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) 
 + / / private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) 
 + 
 + private static var dateBgImage = ActorSDK . sharedActor ( ) . style . statusBackgroundImage 
 
 / / MARK : - 
 / / MARK : Public vars 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 index 0e04191 . . 29cf826 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 @ @ - 27 , 8 + 27 , 10 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 public init ( frame : CGRect ) { 
 super . init ( frame : frame , isFullSize : false ) 
 
 - timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) 
 - 
 + / / timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) 
 + 
 + timeBg . image = ActorSDK . sharedActor ( ) . style . statusBackgroundImage 
 + 
 timeLabel . font = UIFont . italicSystemFontOfSize ( 11 ) 
 timeLabel . textColor = appStyle . chatMediaDateColor 
 
 @ @ - 285 , 7 + 287 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 statusView . frame = CGRectMake ( timeLabel . frame . maxX , timeLabel . frame . minY , 23 , timeHeight ) 
 } 
 
 - timeBg . frame = CGRectMake ( timeLabel . frame . minX - 3 , timeLabel . frame . minY - 1 , timeWidth + 6 , timeHeight + 2 ) 
 + timeBg . frame = CGRectMake ( timeLabel . frame . minX - 4 , timeLabel . frame . minY - 1 , timeWidth + 8 , timeHeight + 2 ) 
 } 
 
 / / Photo preview 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 index 6b6ac11 . . 95d8f0d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 @ @ - 117 , 6 + 117 , 25 @ @ public extension UIImage { 
 UIGraphicsEndImageContext ( ) 
 return image ; 
 } 
 + 
 + func imageWithColor ( color1 : UIColor ) - > UIImage { 
 + UIGraphicsBeginImageContextWithOptions ( self . size , false , self . scale ) 
 + 
 + let context = UIGraphicsGetCurrentContext ( ) 
 + CGContextTranslateCTM ( context , 0 , self . size . height ) 
 + CGContextScaleCTM ( context , 1 . 0 , - 1 . 0 ) ; 
 + CGContextSetBlendMode ( context , CGBlendMode . Normal ) 
 + 
 + let rect = CGRectMake ( 0 , 0 , self . size . width , self . size . height ) as CGRect 
 + CGContextClipToMask ( context , rect , self . CGImage ) 
 + color1 . setFill ( ) 
 + CGContextFillRect ( context , rect ) 
 + 
 + let newImage = UIGraphicsGetImageFromCurrentImageContext ( ) as UIImage 
 + UIGraphicsEndImageContext ( ) 
 + 
 + return newImage 
 + } 
 } 
 
 public class Imaging {
