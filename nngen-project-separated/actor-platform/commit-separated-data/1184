BLEU SCORE: 0.07603985612048919

TEST MSG: feat ( android ) : incoming call event in delegate
GENERATED MSG: fix ( core ) : Fix crash on receiving updates before auth

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > index 8ce6dfa . . 04a4226 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java < nl > @ @ - 26 , 8 + 26 , 11 @ @ import im . actor . core . ConfigurationBuilder ; < nl > import im . actor . core . DeviceCategory ; < nl > import im . actor . core . PlatformType ; < nl > import im . actor . core . entity . content . AbsContent ; < nl > + import im . actor . core . modules . events . IncomingCall ; < nl > import im . actor . runtime . Log ; < nl > import im . actor . runtime . android . view . BindedViewHolder ; < nl > + import im . actor . runtime . eventbus . BusSubscriber ; < nl > + import im . actor . runtime . eventbus . Event ; < nl > import im . actor . sdk . controllers . activity . ActorMainActivity ; < nl > import im . actor . sdk . controllers . conversation . messages . MessageHolder ; < nl > import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; < nl > @ @ - 245 , 6 + 248 , 13 @ @ public class ActorSDK { < nl > } catch ( Exception e ) { < nl > e . printStackTrace ( ) ; < nl > } < nl > + < nl > + messenger . getEvents ( ) . subscribe ( new BusSubscriber ( ) { < nl > + @ Override < nl > + public void onBusEvent ( Event event ) { < nl > + delegate . onIncominCall ( ( ( IncomingCall ) event ) . getCall ( ) , ( ( IncomingCall ) event ) . getUid ( ) ) ; < nl > + } < nl > + } , IncomingCall . EVENT ) ; < nl > } < nl > < nl > / * * < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > index c9e3e44 . . 3e881dc 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > @ @ - 70 , 6 + 70 , 7 @ @ public interface ActorSDKDelegate { < nl > * / < nl > ActorIntent getChatIntent ( ) ; < nl > < nl > + void onIncominCall ( long callId , int uid ) ; < nl > < nl > < T extends BindedViewHolder , J extends T > J getViewHolder ( Class < T > base , Object . . . args ) ; < nl > < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > index 0008a47 . . e6094fc 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > @ @ - 91 , 6 + 91 , 11 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { < nl > } < nl > < nl > @ Override < nl > + public void onIncominCall ( long callId , int uid ) { < nl > + < nl > + } < nl > + < nl > + @ Override < nl > public < T extends BindedViewHolder , J extends T > J getViewHolder ( Class < T > base , Object [ ] args ) { < nl > return null ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core / core / core - android / src / main / java / im / actor / core / AndroidMessenger . java b / actor - sdk / sdk - core / core / core - android / src / main / java / im / actor / core / AndroidMessenger . java < nl > index c4605ce . . c8742f1 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - android / src / main / java / im / actor / core / AndroidMessenger . java < nl > + + + b / actor - sdk / sdk - core / core / core - android / src / main / java / im / actor / core / AndroidMessenger . java < nl > @ @ - 42 , 6 + 42 , 7 @ @ import im . actor . runtime . actors . ActorCreator ; < nl > import im . actor . runtime . actors . ActorRef ; < nl > import im . actor . runtime . actors . Props ; < nl > import im . actor . runtime . android . AndroidContext ; < nl > + import im . actor . runtime . eventbus . EventBus ; < nl > import im . actor . runtime . generic . mvvm . BindedDisplayList ; < nl > import im . actor . runtime . mvvm . Value ; < nl > import im . actor . runtime . mvvm . ValueChangedListener ; < nl > @ @ - 478 , 4 + 479 , 8 @ @ public class AndroidMessenger extends im . actor . core . Messenger { < nl > < nl > return docsLists . get ( peer ) ; < nl > } < nl > + < nl > + public EventBus getEvents ( ) { < nl > + return modules . getEvents ( ) ; < nl > + } < nl > } < nl > \ No newline at end of file
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > index 593095a . . ab9a17a 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java < nl > @ @ - 8 , 6 + 8 , 9 @ @ import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; < nl > import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; < nl > import im . actor . sdk . intents . ActorIntent ; < nl > < nl > + / * * < nl > + * SDK Delegate . Used for delegating some work to < nl > + * / < nl > public interface ActorSDKDelegate { < nl > < nl > / * * < nl > @ @ - 31 , 19 + 34 , 34 @ @ public interface ActorSDKDelegate { < nl > * / < nl > ActorIntent getStartIntent ( ) ; < nl > < nl > + / * * < nl > + * If not null returned , overrides settings activity intent < nl > + * < nl > + * @ return Actor Intent < nl > + * / < nl > + ActorIntent getSettingsIntent ( ) ; < nl > + < nl > + @ Deprecated < nl > AuthState getAuthStartState ( ) ; < nl > < nl > + @ Deprecated < nl > BaseAuthFragment getSignFragment ( ) ; < nl > < nl > + @ Deprecated < nl > View getBeforeNickSettingsView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getAfterPhoneSettingsView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getSettingsTopView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > View getSettingsBottomView ( Context context ) ; < nl > < nl > + @ Deprecated < nl > ActorSettingsCategory [ ] getBeforeSettingsCategories ( ) ; < nl > < nl > + @ Deprecated < nl > ActorSettingsCategory [ ] getAfterSettingsCategories ( ) ; < nl > } < nl > diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > index 68ec210 . . 9741d06 100644 < nl > - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java < nl > @ @ - 61 , 6 + 61 , 11 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { < nl > return null ; < nl > } < nl > < nl > + @ Override < nl > + public ActorIntent getSettingsIntent ( ) { < nl > + return null ; < nl > + } < nl > + < nl > / / < nl > / / Hacking settings activity < nl > / / < nl > diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > index bbb081d . . 2518330 100644 < nl > - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java < nl > @ @ - 113 , 7 + 113 , 9 @ @ public class ApiModule extends AbsModule implements BusSubscriber { < nl > < nl > @ Override < nl > public void onUpdateReceived ( Object obj ) { < nl > - context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; < nl > + if ( context ( ) . getUpdatesModule ( ) ! = null ) { < nl > + context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; < nl > + } < nl > } < nl > < nl > @ Override

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 index 8ce6dfa . . 04a4226 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDK . java 
 @ @ - 26 , 8 + 26 , 11 @ @ import im . actor . core . ConfigurationBuilder ; 
 import im . actor . core . DeviceCategory ; 
 import im . actor . core . PlatformType ; 
 import im . actor . core . entity . content . AbsContent ; 
 + import im . actor . core . modules . events . IncomingCall ; 
 import im . actor . runtime . Log ; 
 import im . actor . runtime . android . view . BindedViewHolder ; 
 + import im . actor . runtime . eventbus . BusSubscriber ; 
 + import im . actor . runtime . eventbus . Event ; 
 import im . actor . sdk . controllers . activity . ActorMainActivity ; 
 import im . actor . sdk . controllers . conversation . messages . MessageHolder ; 
 import im . actor . sdk . controllers . conversation . messages . MessagesAdapter ; 
 @ @ - 245 , 6 + 248 , 13 @ @ public class ActorSDK { 
 } catch ( Exception e ) { 
 e . printStackTrace ( ) ; 
 } 
 + 
 + messenger . getEvents ( ) . subscribe ( new BusSubscriber ( ) { 
 + @ Override 
 + public void onBusEvent ( Event event ) { 
 + delegate . onIncominCall ( ( ( IncomingCall ) event ) . getCall ( ) , ( ( IncomingCall ) event ) . getUid ( ) ) ; 
 + } 
 + } , IncomingCall . EVENT ) ; 
 } 
 
 / * * 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 index c9e3e44 . . 3e881dc 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 @ @ - 70 , 6 + 70 , 7 @ @ public interface ActorSDKDelegate { 
 * / 
 ActorIntent getChatIntent ( ) ; 
 
 + void onIncominCall ( long callId , int uid ) ; 
 
 < T extends BindedViewHolder , J extends T > J getViewHolder ( Class < T > base , Object . . . args ) ; 
 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 index 0008a47 . . e6094fc 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 @ @ - 91 , 6 + 91 , 11 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { 
 } 
 
 @ Override 
 + public void onIncominCall ( long callId , int uid ) { 
 + 
 + } 
 + 
 + @ Override 
 public < T extends BindedViewHolder , J extends T > J getViewHolder ( Class < T > base , Object [ ] args ) { 
 return null ; 
 } 
 diff - - git a / actor - sdk / sdk - core / core / core - android / src / main / java / im / actor / core / AndroidMessenger . java b / actor - sdk / sdk - core / core / core - android / src / main / java / im / actor / core / AndroidMessenger . java 
 index c4605ce . . c8742f1 100644 
 - - - a / actor - sdk / sdk - core / core / core - android / src / main / java / im / actor / core / AndroidMessenger . java 
 + + + b / actor - sdk / sdk - core / core / core - android / src / main / java / im / actor / core / AndroidMessenger . java 
 @ @ - 42 , 6 + 42 , 7 @ @ import im . actor . runtime . actors . ActorCreator ; 
 import im . actor . runtime . actors . ActorRef ; 
 import im . actor . runtime . actors . Props ; 
 import im . actor . runtime . android . AndroidContext ; 
 + import im . actor . runtime . eventbus . EventBus ; 
 import im . actor . runtime . generic . mvvm . BindedDisplayList ; 
 import im . actor . runtime . mvvm . Value ; 
 import im . actor . runtime . mvvm . ValueChangedListener ; 
 @ @ - 478 , 4 + 479 , 8 @ @ public class AndroidMessenger extends im . actor . core . Messenger { 
 
 return docsLists . get ( peer ) ; 
 } 
 + 
 + public EventBus getEvents ( ) { 
 + return modules . getEvents ( ) ; 
 + } 
 } 
 \ No newline at end of file

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 index 593095a . . ab9a17a 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / ActorSDKDelegate . java 
 @ @ - 8 , 6 + 8 , 9 @ @ import im . actor . sdk . controllers . fragment . auth . BaseAuthFragment ; 
 import im . actor . sdk . controllers . fragment . settings . ActorSettingsCategory ; 
 import im . actor . sdk . intents . ActorIntent ; 
 
 + / * * 
 + * SDK Delegate . Used for delegating some work to 
 + * / 
 public interface ActorSDKDelegate { 
 
 / * * 
 @ @ - 31 , 19 + 34 , 34 @ @ public interface ActorSDKDelegate { 
 * / 
 ActorIntent getStartIntent ( ) ; 
 
 + / * * 
 + * If not null returned , overrides settings activity intent 
 + * 
 + * @ return Actor Intent 
 + * / 
 + ActorIntent getSettingsIntent ( ) ; 
 + 
 + @ Deprecated 
 AuthState getAuthStartState ( ) ; 
 
 + @ Deprecated 
 BaseAuthFragment getSignFragment ( ) ; 
 
 + @ Deprecated 
 View getBeforeNickSettingsView ( Context context ) ; 
 
 + @ Deprecated 
 View getAfterPhoneSettingsView ( Context context ) ; 
 
 + @ Deprecated 
 View getSettingsTopView ( Context context ) ; 
 
 + @ Deprecated 
 View getSettingsBottomView ( Context context ) ; 
 
 + @ Deprecated 
 ActorSettingsCategory [ ] getBeforeSettingsCategories ( ) ; 
 
 + @ Deprecated 
 ActorSettingsCategory [ ] getAfterSettingsCategories ( ) ; 
 } 
 diff - - git a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 index 68ec210 . . 9741d06 100644 
 - - - a / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 + + + b / actor - sdk / sdk - core - android / android - sdk / src / main / java / im / actor / sdk / BaseActorSDKDelegate . java 
 @ @ - 61 , 6 + 61 , 11 @ @ public class BaseActorSDKDelegate implements ActorSDKDelegate { 
 return null ; 
 } 
 
 + @ Override 
 + public ActorIntent getSettingsIntent ( ) { 
 + return null ; 
 + } 
 + 
 / / 
 / / Hacking settings activity 
 / / 
 diff - - git a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 index bbb081d . . 2518330 100644 
 - - - a / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 + + + b / actor - sdk / sdk - core / core / core - shared / src / main / java / im / actor / core / modules / ApiModule . java 
 @ @ - 113 , 7 + 113 , 9 @ @ public class ApiModule extends AbsModule implements BusSubscriber { 
 
 @ Override 
 public void onUpdateReceived ( Object obj ) { 
 - context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; 
 + if ( context ( ) . getUpdatesModule ( ) ! = null ) { 
 + context ( ) . getUpdatesModule ( ) . onUpdateReceived ( obj ) ; 
 + } 
 } 
 
 @ Override
