BLEU SCORE: 0.355433394487517

TEST MSG: fix ( iOS ) : Fixing Call Controller caller design
GENERATED MSG: fix ( iOS ) : fix date background in media cell

TEST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Calls / AACallViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Calls / AACallViewController . swift < nl > index d6c14d7 . . facb6ea 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Calls / AACallViewController . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Calls / AACallViewController . swift < nl > @ @ - 85 , 6 + 85 , 7 @ @ public class AACallViewController : AAViewController { < nl > peerTitle . textColor = UIColor . whiteColor ( ) . alpha ( 0 . 87 ) < nl > peerTitle . textAlignment = NSTextAlignment . Center < nl > peerTitle . font = UIFont . thinSystemFontOfSize ( 42 ) < nl > + peerTitle . minimumScaleFactor = 0 . 3 < nl > < nl > callState . textColor = UIColor . whiteColor ( ) < nl > callState . textAlignment = NSTextAlignment . Center < nl > @ @ - 109 , 7 + 110 , 7 @ @ public class AACallViewController : AAViewController { < nl > super . viewWillLayoutSubviews ( ) < nl > < nl > senderAvatar . frame = CGRectMake ( ( self . view . width - 104 ) / 2 , 60 , 104 , 104 ) < nl > - peerTitle . frame = CGRectMake ( 60 , senderAvatar . bottom + 22 , view . width - 120 , 42 ) < nl > + peerTitle . frame = CGRectMake ( 22 , senderAvatar . bottom + 22 , view . width - 44 , 42 ) < nl > callState . frame = CGRectMake ( 0 , peerTitle . bottom + 8 , view . width , 22 ) < nl > < nl > layoutButtons ( )
NEAREST DIFF (one line): diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > index 59d23d1 . . 1327b5d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift < nl > @ @ - 377 , 6 + 377 , 11 @ @ public class ActorStyle { < nl > public var chatIconWarring = UIImage . templated ( " msg _ warring " ) < nl > public var chatIconClock = UIImage . templated ( " msg _ clock " ) < nl > < nl > + < nl > + < nl > + < nl > + < nl > + < nl > private var _ chatStatusActive : UIColor ? < nl > public var chatStatusActive : UIColor { < nl > get { return _ chatStatusActive ! = nil ? _ chatStatusActive ! : vcTintColor } < nl > @ @ - 587 , 6 + 592 , 24 @ @ public class ActorStyle { < nl > set ( v ) { _ dialogStatusError = v } < nl > } < nl > < nl > + private var _ statusBackgroundIcon : UIImage ? < nl > + public var statusBackgroundImage : UIImage { < nl > + get { < nl > + if ( _ statusBackgroundIcon = = nil ) { < nl > + < nl > + let statusImage : UIImage = ( UIImage . bundled ( " bubble _ service _ bg " ) ? . imageWithColor ( UIColor . blackColor ( ) . colorWithAlphaComponent ( 0 . 7 ) ) . imageWithRenderingMode ( UIImageRenderingMode . AlwaysOriginal ) ) ! < nl > + < nl > + let center : CGPoint = CGPointMake ( statusImage . size . width / 2 . 0 , statusImage . size . height / 2 . 0 ) ; < nl > + let capInsets : UIEdgeInsets = UIEdgeInsetsMake ( center . y , center . x , center . y , center . x ) ; < nl > + < nl > + _ statusBackgroundIcon = statusImage . resizableImageWithCapInsets ( capInsets , resizingMode : UIImageResizingMode . Stretch ) < nl > + return _ statusBackgroundIcon ! < nl > + } else { < nl > + return _ statusBackgroundIcon ! < nl > + } < nl > + } < nl > + } < nl > + < nl > / / < nl > / / Contacts styles < nl > / / < nl > @ @ - 684 , 6 + 707 , 18 @ @ public class ActorStyle { < nl > set ( v ) { _ vcStarInfoTextColor = v } < nl > } < nl > public var _ vcStarInfoTextColor : UIColor ? < nl > + < nl > + / / < nl > + / / Settings VC < nl > + / / < nl > + < nl > + public var vcSettingsContactsHeaderTextColor : UIColor { < nl > + get { return _ vcSettingsContactsHeaderTextColor ! = nil ? _ vcSettingsContactsHeaderTextColor ! : vcTextColor } < nl > + set ( v ) { _ vcSettingsContactsHeaderTextColor = v } < nl > + } < nl > + public var _ vcSettingsContactsHeaderTextColor : UIColor ? < nl > + < nl > + < nl > } < nl > < nl > < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > index 75f1d53 . . 33fc49f 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift < nl > @ @ - 81 , 7 + 81 , 9 @ @ public class AABubbleCell : UICollectionViewCell { < nl > / / Cached Date bubble images < nl > / / < nl > < nl > - private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) < nl > + / / private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) < nl > + < nl > + private static var dateBgImage = ActorSDK . sharedActor ( ) . style . statusBackgroundImage < nl > < nl > / / MARK : - < nl > / / MARK : Public vars < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > index 0e04191 . . 29cf826 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift < nl > @ @ - 27 , 8 + 27 , 10 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > public init ( frame : CGRect ) { < nl > super . init ( frame : frame , isFullSize : false ) < nl > < nl > - timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) < nl > - < nl > + / / timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) < nl > + < nl > + timeBg . image = ActorSDK . sharedActor ( ) . style . statusBackgroundImage < nl > + < nl > timeLabel . font = UIFont . italicSystemFontOfSize ( 11 ) < nl > timeLabel . textColor = appStyle . chatMediaDateColor < nl > < nl > @ @ - 285 , 7 + 287 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe < nl > statusView . frame = CGRectMake ( timeLabel . frame . maxX , timeLabel . frame . minY , 23 , timeHeight ) < nl > } < nl > < nl > - timeBg . frame = CGRectMake ( timeLabel . frame . minX - 3 , timeLabel . frame . minY - 1 , timeWidth + 6 , timeHeight + 2 ) < nl > + timeBg . frame = CGRectMake ( timeLabel . frame . minX - 4 , timeLabel . frame . minY - 1 , timeWidth + 8 , timeHeight + 2 ) < nl > } < nl > < nl > / / Photo preview < nl > diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > index 6b6ac11 . . 95d8f0d 100644 < nl > - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift < nl > @ @ - 117 , 6 + 117 , 25 @ @ public extension UIImage { < nl > UIGraphicsEndImageContext ( ) < nl > return image ; < nl > } < nl > + < nl > + func imageWithColor ( color1 : UIColor ) - > UIImage { < nl > + UIGraphicsBeginImageContextWithOptions ( self . size , false , self . scale ) < nl > + < nl > + let context = UIGraphicsGetCurrentContext ( ) < nl > + CGContextTranslateCTM ( context , 0 , self . size . height ) < nl > + CGContextScaleCTM ( context , 1 . 0 , - 1 . 0 ) ; < nl > + CGContextSetBlendMode ( context , CGBlendMode . Normal ) < nl > + < nl > + let rect = CGRectMake ( 0 , 0 , self . size . width , self . size . height ) as CGRect < nl > + CGContextClipToMask ( context , rect , self . CGImage ) < nl > + color1 . setFill ( ) < nl > + CGContextFillRect ( context , rect ) < nl > + < nl > + let newImage = UIGraphicsGetImageFromCurrentImageContext ( ) as UIImage < nl > + UIGraphicsEndImageContext ( ) < nl > + < nl > + return newImage < nl > + } < nl > } < nl > < nl > public class Imaging {

TEST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Calls / AACallViewController . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Calls / AACallViewController . swift 
 index d6c14d7 . . facb6ea 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Calls / AACallViewController . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Calls / AACallViewController . swift 
 @ @ - 85 , 6 + 85 , 7 @ @ public class AACallViewController : AAViewController { 
 peerTitle . textColor = UIColor . whiteColor ( ) . alpha ( 0 . 87 ) 
 peerTitle . textAlignment = NSTextAlignment . Center 
 peerTitle . font = UIFont . thinSystemFontOfSize ( 42 ) 
 + peerTitle . minimumScaleFactor = 0 . 3 
 
 callState . textColor = UIColor . whiteColor ( ) 
 callState . textAlignment = NSTextAlignment . Center 
 @ @ - 109 , 7 + 110 , 7 @ @ public class AACallViewController : AAViewController { 
 super . viewWillLayoutSubviews ( ) 
 
 senderAvatar . frame = CGRectMake ( ( self . view . width - 104 ) / 2 , 60 , 104 , 104 ) 
 - peerTitle . frame = CGRectMake ( 60 , senderAvatar . bottom + 22 , view . width - 120 , 42 ) 
 + peerTitle . frame = CGRectMake ( 22 , senderAvatar . bottom + 22 , view . width - 44 , 42 ) 
 callState . frame = CGRectMake ( 0 , peerTitle . bottom + 8 , view . width , 22 ) 
 
 layoutButtons ( )

NEAREST DIFF:
diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 index 59d23d1 . . 1327b5d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / ActorStyle . swift 
 @ @ - 377 , 6 + 377 , 11 @ @ public class ActorStyle { 
 public var chatIconWarring = UIImage . templated ( " msg _ warring " ) 
 public var chatIconClock = UIImage . templated ( " msg _ clock " ) 
 
 + 
 + 
 + 
 + 
 + 
 private var _ chatStatusActive : UIColor ? 
 public var chatStatusActive : UIColor { 
 get { return _ chatStatusActive ! = nil ? _ chatStatusActive ! : vcTintColor } 
 @ @ - 587 , 6 + 592 , 24 @ @ public class ActorStyle { 
 set ( v ) { _ dialogStatusError = v } 
 } 
 
 + private var _ statusBackgroundIcon : UIImage ? 
 + public var statusBackgroundImage : UIImage { 
 + get { 
 + if ( _ statusBackgroundIcon = = nil ) { 
 + 
 + let statusImage : UIImage = ( UIImage . bundled ( " bubble _ service _ bg " ) ? . imageWithColor ( UIColor . blackColor ( ) . colorWithAlphaComponent ( 0 . 7 ) ) . imageWithRenderingMode ( UIImageRenderingMode . AlwaysOriginal ) ) ! 
 + 
 + let center : CGPoint = CGPointMake ( statusImage . size . width / 2 . 0 , statusImage . size . height / 2 . 0 ) ; 
 + let capInsets : UIEdgeInsets = UIEdgeInsetsMake ( center . y , center . x , center . y , center . x ) ; 
 + 
 + _ statusBackgroundIcon = statusImage . resizableImageWithCapInsets ( capInsets , resizingMode : UIImageResizingMode . Stretch ) 
 + return _ statusBackgroundIcon ! 
 + } else { 
 + return _ statusBackgroundIcon ! 
 + } 
 + } 
 + } 
 + 
 / / 
 / / Contacts styles 
 / / 
 @ @ - 684 , 6 + 707 , 18 @ @ public class ActorStyle { 
 set ( v ) { _ vcStarInfoTextColor = v } 
 } 
 public var _ vcStarInfoTextColor : UIColor ? 
 + 
 + / / 
 + / / Settings VC 
 + / / 
 + 
 + public var vcSettingsContactsHeaderTextColor : UIColor { 
 + get { return _ vcSettingsContactsHeaderTextColor ! = nil ? _ vcSettingsContactsHeaderTextColor ! : vcTextColor } 
 + set ( v ) { _ vcSettingsContactsHeaderTextColor = v } 
 + } 
 + public var _ vcSettingsContactsHeaderTextColor : UIColor ? 
 + 
 + 
 } 
 
 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 index 75f1d53 . . 33fc49f 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleCell . swift 
 @ @ - 81 , 7 + 81 , 9 @ @ public class AABubbleCell : UICollectionViewCell { 
 / / Cached Date bubble images 
 / / 
 
 - private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) 
 + / / private static var dateBgImage = Imaging . roundedImage ( ActorSDK . sharedActor ( ) . style . chatDateBubbleColor , size : CGSizeMake ( 18 , 18 ) , radius : 9 ) 
 + 
 + private static var dateBgImage = ActorSDK . sharedActor ( ) . style . statusBackgroundImage 
 
 / / MARK : - 
 / / MARK : Public vars 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 index 0e04191 . . 29cf826 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / Controllers / Content / Conversation / Cell / AABubbleMediaCell . swift 
 @ @ - 27 , 8 + 27 , 10 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 public init ( frame : CGRect ) { 
 super . init ( frame : frame , isFullSize : false ) 
 
 - timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) 
 - 
 + / / timeBg . image = Imaging . imageWithColor ( appStyle . chatMediaDateBgColor , size : CGSize ( width : 1 , height : 1 ) ) 
 + 
 + timeBg . image = ActorSDK . sharedActor ( ) . style . statusBackgroundImage 
 + 
 timeLabel . font = UIFont . italicSystemFontOfSize ( 11 ) 
 timeLabel . textColor = appStyle . chatMediaDateColor 
 
 @ @ - 285 , 7 + 287 , 7 @ @ public class AABubbleMediaCell : AABubbleBaseFileCell , NYTPhotosViewControllerDe 
 statusView . frame = CGRectMake ( timeLabel . frame . maxX , timeLabel . frame . minY , 23 , timeHeight ) 
 } 
 
 - timeBg . frame = CGRectMake ( timeLabel . frame . minX - 3 , timeLabel . frame . minY - 1 , timeWidth + 6 , timeHeight + 2 ) 
 + timeBg . frame = CGRectMake ( timeLabel . frame . minX - 4 , timeLabel . frame . minY - 1 , timeWidth + 8 , timeHeight + 2 ) 
 } 
 
 / / Photo preview 
 diff - - git a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 index 6b6ac11 . . 95d8f0d 100644 
 - - - a / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 + + + b / actor - sdk / sdk - core - ios / ActorSDK / Sources / SwiftExtensions / Images . swift 
 @ @ - 117 , 6 + 117 , 25 @ @ public extension UIImage { 
 UIGraphicsEndImageContext ( ) 
 return image ; 
 } 
 + 
 + func imageWithColor ( color1 : UIColor ) - > UIImage { 
 + UIGraphicsBeginImageContextWithOptions ( self . size , false , self . scale ) 
 + 
 + let context = UIGraphicsGetCurrentContext ( ) 
 + CGContextTranslateCTM ( context , 0 , self . size . height ) 
 + CGContextScaleCTM ( context , 1 . 0 , - 1 . 0 ) ; 
 + CGContextSetBlendMode ( context , CGBlendMode . Normal ) 
 + 
 + let rect = CGRectMake ( 0 , 0 , self . size . width , self . size . height ) as CGRect 
 + CGContextClipToMask ( context , rect , self . CGImage ) 
 + color1 . setFill ( ) 
 + CGContextFillRect ( context , rect ) 
 + 
 + let newImage = UIGraphicsGetImageFromCurrentImageContext ( ) as UIImage 
 + UIGraphicsEndImageContext ( ) 
 + 
 + return newImage 
 + } 
 } 
 
 public class Imaging {
