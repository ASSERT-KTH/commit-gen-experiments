BLEU SCORE: 0.1597357760615681

TEST MSG: added empty query test
GENERATED MSG: added content text api

TEST DIFF (one line): diff - - git a / moco - core / src / main / java / com / github / dreamhead / moco / extractor / ParamRequestExtractor . java b / moco - core / src / main / java / com / github / dreamhead / moco / extractor / ParamRequestExtractor . java <nl> index 4e99fdf . . f033a5b 100644 <nl> - - - a / moco - core / src / main / java / com / github / dreamhead / moco / extractor / ParamRequestExtractor . java <nl> + + + b / moco - core / src / main / java / com / github / dreamhead / moco / extractor / ParamRequestExtractor . java <nl> @ @ - 15 , 6 + 15 , 7 @ @ public class ParamRequestExtractor extends HttpRequestExtractor < String [ ] > { <nl> <nl> @ Override <nl> protected Optional < String [ ] > doExtract ( final HttpRequest request ) { <nl> - return fromNullable ( request . getQueries ( ) . get ( this . param ) ) ; <nl> + String [ ] reference = request . getQueries ( ) . get ( this . param ) ; <nl> + return fromNullable ( reference ) ; <nl> } <nl> } <nl> diff - - git a / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java b / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java <nl> index f8f75cb . . 67f7cc0 100644 <nl> - - - a / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java <nl> + + + b / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java <nl> @ @ - 435 , 6 + 435 , 19 @ @ public class MocoTest extends AbstractMocoHttpTest { <nl> } <nl> <nl> @ Test <nl> + public void should _ exist _ query ( ) throws Exception { <nl> + server . request ( exist ( query ( " foo " ) ) ) . response ( " query " ) ; <nl> + <nl> + running ( server , new Runnable ( ) { <nl> + @ Override <nl> + public void run ( ) throws Exception { <nl> + assertThat ( helper . get ( remoteUrl ( " / path ? foo " ) ) , is ( " query " ) ) ; <nl> + assertThat ( helper . get ( remoteUrl ( " / other ? foo " ) ) , is ( " query " ) ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> + @ Test <nl> public void should _ starts _ with ( ) throws Exception { <nl> server . request ( startsWith ( uri ( " / foo " ) ) ) . response ( " bar " ) ; <nl>
NEAREST DIFF (one line): diff - - git a / moco - core / src / main / java / com / github / dreamhead / moco / Moco . java b / moco - core / src / main / java / com / github / dreamhead / moco / Moco . java <nl> index eb0337b . . 49fe84e 100644 <nl> - - - a / moco - core / src / main / java / com / github / dreamhead / moco / Moco . java <nl> + + + b / moco - core / src / main / java / com / github / dreamhead / moco / Moco . java <nl> @ @ - 68 , 6 + 68 , 10 @ @ public class Moco { <nl> return new TextResource ( checkNotNull ( text , " Null text is not allowed " ) ) ; <nl> } <nl> <nl> + public static ResponseHandler content ( String text ) { <nl> + return content ( text ( text ) ) ; <nl> + } <nl> + <nl> public static ResponseHandler content ( final ContentResource resource ) { <nl> return new ContentHandler ( resource ) ; <nl> } <nl> diff - - git a / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java b / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java <nl> index 018a748 . . 726a312 100644 <nl> - - - a / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java <nl> + + + b / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java <nl> @ @ - 47 , 6 + 47 , 18 @ @ public class MocoTest extends AbstractMocoTest { <nl> } <nl> <nl> @ Test <nl> + public void should _ return _ expected _ response _ with _ content _ api ( ) throws Exception { <nl> + server . response ( content ( " foo " ) ) ; <nl> + <nl> + running ( server , new Runnable ( ) { <nl> + @ Override <nl> + public void run ( ) throws IOException { <nl> + assertThat ( helper . get ( root ( ) ) , is ( " foo " ) ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> + @ Test <nl> public void should _ return _ expected _ response _ from _ file ( ) throws Exception { <nl> server . response ( file ( " src / test / resources / foo . response " ) ) ; <nl>

TEST DIFF:
diff - - git a / moco - core / src / main / java / com / github / dreamhead / moco / extractor / ParamRequestExtractor . java b / moco - core / src / main / java / com / github / dreamhead / moco / extractor / ParamRequestExtractor . java 
 index 4e99fdf . . f033a5b 100644 
 - - - a / moco - core / src / main / java / com / github / dreamhead / moco / extractor / ParamRequestExtractor . java 
 + + + b / moco - core / src / main / java / com / github / dreamhead / moco / extractor / ParamRequestExtractor . java 
 @ @ - 15 , 6 + 15 , 7 @ @ public class ParamRequestExtractor extends HttpRequestExtractor < String [ ] > { 
 
 @ Override 
 protected Optional < String [ ] > doExtract ( final HttpRequest request ) { 
 - return fromNullable ( request . getQueries ( ) . get ( this . param ) ) ; 
 + String [ ] reference = request . getQueries ( ) . get ( this . param ) ; 
 + return fromNullable ( reference ) ; 
 } 
 } 
 diff - - git a / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java b / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java 
 index f8f75cb . . 67f7cc0 100644 
 - - - a / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java 
 + + + b / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java 
 @ @ - 435 , 6 + 435 , 19 @ @ public class MocoTest extends AbstractMocoHttpTest { 
 } 
 
 @ Test 
 + public void should _ exist _ query ( ) throws Exception { 
 + server . request ( exist ( query ( " foo " ) ) ) . response ( " query " ) ; 
 + 
 + running ( server , new Runnable ( ) { 
 + @ Override 
 + public void run ( ) throws Exception { 
 + assertThat ( helper . get ( remoteUrl ( " / path ? foo " ) ) , is ( " query " ) ) ; 
 + assertThat ( helper . get ( remoteUrl ( " / other ? foo " ) ) , is ( " query " ) ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Test 
 public void should _ starts _ with ( ) throws Exception { 
 server . request ( startsWith ( uri ( " / foo " ) ) ) . response ( " bar " ) ; 


NEAREST DIFF:
diff - - git a / moco - core / src / main / java / com / github / dreamhead / moco / Moco . java b / moco - core / src / main / java / com / github / dreamhead / moco / Moco . java 
 index eb0337b . . 49fe84e 100644 
 - - - a / moco - core / src / main / java / com / github / dreamhead / moco / Moco . java 
 + + + b / moco - core / src / main / java / com / github / dreamhead / moco / Moco . java 
 @ @ - 68 , 6 + 68 , 10 @ @ public class Moco { 
 return new TextResource ( checkNotNull ( text , " Null text is not allowed " ) ) ; 
 } 
 
 + public static ResponseHandler content ( String text ) { 
 + return content ( text ( text ) ) ; 
 + } 
 + 
 public static ResponseHandler content ( final ContentResource resource ) { 
 return new ContentHandler ( resource ) ; 
 } 
 diff - - git a / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java b / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java 
 index 018a748 . . 726a312 100644 
 - - - a / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java 
 + + + b / moco - core / src / test / java / com / github / dreamhead / moco / MocoTest . java 
 @ @ - 47 , 6 + 47 , 18 @ @ public class MocoTest extends AbstractMocoTest { 
 } 
 
 @ Test 
 + public void should _ return _ expected _ response _ with _ content _ api ( ) throws Exception { 
 + server . response ( content ( " foo " ) ) ; 
 + 
 + running ( server , new Runnable ( ) { 
 + @ Override 
 + public void run ( ) throws IOException { 
 + assertThat ( helper . get ( root ( ) ) , is ( " foo " ) ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Test 
 public void should _ return _ expected _ response _ from _ file ( ) throws Exception { 
 server . response ( file ( " src / test / resources / foo . response " ) ) ; 

