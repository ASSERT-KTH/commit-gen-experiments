BLEU SCORE: 0.057079690340587526

TEST MSG: added merge https servers test
GENERATED MSG: added test for merging http server with different port

TEST DIFF (one line): diff - - git a / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java b / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java <nl> index b248908 . . 3084fee 100644 <nl> - - - a / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java <nl> + + + b / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java <nl> @ @ - 116 , 6 + 116 , 22 @ @ public class ActualHttpServerTest extends AbstractMocoHttpTest { <nl> } <nl> <nl> @ Test <nl> + public void should _ merge _ two _ https _ servers ( ) throws Exception { <nl> + httpServer = httpsServer ( 12306 , DEFAULT _ CERTIFICATE , context ( " / foo " ) ) ; <nl> + httpServer . response ( " foo " ) ; <nl> + anotherServer = httpsServer ( 12306 , DEFAULT _ CERTIFICATE , context ( " / bar " ) ) ; <nl> + anotherServer . request ( by ( uri ( " / bar " ) ) ) . response ( " bar " ) ; <nl> + HttpServer mergedServer = ( ( ActualHttpServer ) anotherServer ) . mergeHttpServer ( ( ActualHttpServer ) httpServer ) ; <nl> + running ( mergedServer , new Runnable ( ) { <nl> + @ Override <nl> + public void run ( ) throws Exception { <nl> + assertThat ( helper . get ( remoteHttpsUrl ( " / foo / anything " ) ) , is ( " foo " ) ) ; <nl> + assertThat ( helper . get ( remoteHttpsUrl ( " / bar / bar " ) ) , is ( " bar " ) ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> + @ Test <nl> public void should _ merge _ https _ server _ into _ http _ server ( ) throws Exception { <nl> httpServer = httpsServer ( 12306 , DEFAULT _ CERTIFICATE , context ( " / foo " ) ) ; <nl> httpServer . response ( " foo " ) ; <nl> @ @ - 128 , 6 + 144 , 7 @ @ public class ActualHttpServerTest extends AbstractMocoHttpTest { <nl> } ) ; <nl> } <nl> <nl> + <nl> @ Test <nl> public void should _ merge _ http _ server _ with _ same _ port ( ) throws Exception { <nl> httpServer = httpServer ( 12306 , context ( " / foo " ) ) ;
NEAREST DIFF (one line): diff - - git a / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java b / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java <nl> index 912ef8e . . ca4d55d 100644 <nl> - - - a / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java <nl> + + + b / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java <nl> @ @ - 140 , 4 + 140 , 18 @ @ public class ActualHttpServerTest extends AbstractMocoHttpTest { <nl> } <nl> } ) ; <nl> } <nl> + <nl> + @ Test <nl> + public void should _ merge _ http _ server _ with _ different _ port ( ) throws Exception { <nl> + httpServer = httpServer ( 12306 , context ( " / foo " ) ) ; <nl> + anotherServer = httpServer ( 12307 , context ( " / bar " ) ) ; <nl> + final HttpServer mergedServer = ( ( ActualHttpServer ) anotherServer ) . mergeHttpServer ( ( ActualHttpServer ) httpServer ) ; <nl> + running ( mergedServer , new Runnable ( ) { <nl> + @ Override <nl> + public void run ( ) throws Exception { <nl> + assertThat ( mergedServer . port ( ) , is ( 12307 ) ) ; <nl> + } <nl> + } ) ; <nl> + } <nl> + <nl> }

TEST DIFF:
diff - - git a / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java b / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java 
 index b248908 . . 3084fee 100644 
 - - - a / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java 
 + + + b / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java 
 @ @ - 116 , 6 + 116 , 22 @ @ public class ActualHttpServerTest extends AbstractMocoHttpTest { 
 } 
 
 @ Test 
 + public void should _ merge _ two _ https _ servers ( ) throws Exception { 
 + httpServer = httpsServer ( 12306 , DEFAULT _ CERTIFICATE , context ( " / foo " ) ) ; 
 + httpServer . response ( " foo " ) ; 
 + anotherServer = httpsServer ( 12306 , DEFAULT _ CERTIFICATE , context ( " / bar " ) ) ; 
 + anotherServer . request ( by ( uri ( " / bar " ) ) ) . response ( " bar " ) ; 
 + HttpServer mergedServer = ( ( ActualHttpServer ) anotherServer ) . mergeHttpServer ( ( ActualHttpServer ) httpServer ) ; 
 + running ( mergedServer , new Runnable ( ) { 
 + @ Override 
 + public void run ( ) throws Exception { 
 + assertThat ( helper . get ( remoteHttpsUrl ( " / foo / anything " ) ) , is ( " foo " ) ) ; 
 + assertThat ( helper . get ( remoteHttpsUrl ( " / bar / bar " ) ) , is ( " bar " ) ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 + @ Test 
 public void should _ merge _ https _ server _ into _ http _ server ( ) throws Exception { 
 httpServer = httpsServer ( 12306 , DEFAULT _ CERTIFICATE , context ( " / foo " ) ) ; 
 httpServer . response ( " foo " ) ; 
 @ @ - 128 , 6 + 144 , 7 @ @ public class ActualHttpServerTest extends AbstractMocoHttpTest { 
 } ) ; 
 } 
 
 + 
 @ Test 
 public void should _ merge _ http _ server _ with _ same _ port ( ) throws Exception { 
 httpServer = httpServer ( 12306 , context ( " / foo " ) ) ;

NEAREST DIFF:
diff - - git a / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java b / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java 
 index 912ef8e . . ca4d55d 100644 
 - - - a / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java 
 + + + b / moco - core / src / test / java / com / github / dreamhead / moco / internal / ActualHttpServerTest . java 
 @ @ - 140 , 4 + 140 , 18 @ @ public class ActualHttpServerTest extends AbstractMocoHttpTest { 
 } 
 } ) ; 
 } 
 + 
 + @ Test 
 + public void should _ merge _ http _ server _ with _ different _ port ( ) throws Exception { 
 + httpServer = httpServer ( 12306 , context ( " / foo " ) ) ; 
 + anotherServer = httpServer ( 12307 , context ( " / bar " ) ) ; 
 + final HttpServer mergedServer = ( ( ActualHttpServer ) anotherServer ) . mergeHttpServer ( ( ActualHttpServer ) httpServer ) ; 
 + running ( mergedServer , new Runnable ( ) { 
 + @ Override 
 + public void run ( ) throws Exception { 
 + assertThat ( mergedServer . port ( ) , is ( 12307 ) ) ; 
 + } 
 + } ) ; 
 + } 
 + 
 }
