BLEU SCORE: 0.14535768424205484

TEST MSG: introduced proxy status in proxy response handler
GENERATED MSG: introduced should failover in proxy

TEST DIFF (one line): diff - - git a / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java b / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java <nl> index 7419473 . . 63866da 100644 <nl> - - - a / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java <nl> + + + b / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java <nl> @ @ - 96 , 10 + 96 , 12 @ @ public abstract class AbstractProxyResponseHandler extends AbstractHttpResponseH <nl> <nl> private static Logger logger = LoggerFactory . getLogger ( AbstractProxyResponseHandler . class ) ; <nl> <nl> + private final int proxyStatus ; <nl> private final Failover failover ; <nl> <nl> protected AbstractProxyResponseHandler ( final Failover failover ) { <nl> this . failover = failover ; <nl> + this . proxyStatus = HttpResponseStatus . BAD _ REQUEST . code ( ) ; <nl> } <nl> <nl> private HttpRequestBase prepareRemoteRequest ( final FullHttpRequest request , final URL url ) { <nl> @ @ - 204 , 7 + 206 , 7 @ @ public abstract class AbstractProxyResponseHandler extends AbstractHttpResponseH <nl> <nl> private boolean shouldFailover ( final org . apache . http . HttpResponse remoteResponse ) { <nl> int statusCode = remoteResponse . getStatusLine ( ) . getStatusCode ( ) ; <nl> - return statusCode = = HttpResponseStatus . BAD _ REQUEST . code ( ) ; <nl> + return statusCode = = proxyStatus ; <nl> } <nl> <nl> private HttpResponse setupNormalResponse ( final org . apache . http . HttpResponse remoteResponse ) throws IOException {
NEAREST DIFF (one line): diff - - git a / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java b / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java <nl> index 333dd3f . . 7419473 100644 <nl> - - - a / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java <nl> + + + b / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java <nl> @ @ - 192 , 8 + 192 , 7 @ @ public abstract class AbstractProxyResponseHandler extends AbstractHttpResponseH <nl> <nl> private HttpResponse setupResponse ( final HttpRequest request , <nl> final org . apache . http . HttpResponse remoteResponse ) throws IOException { <nl> - int statusCode = remoteResponse . getStatusLine ( ) . getStatusCode ( ) ; <nl> - if ( statusCode = = HttpResponseStatus . BAD _ REQUEST . code ( ) ) { <nl> + if ( shouldFailover ( remoteResponse ) ) { <nl> return failover . failover ( request ) ; <nl> } <nl> <nl> @ @ - 203 , 6 + 202 , 11 @ @ public abstract class AbstractProxyResponseHandler extends AbstractHttpResponseH <nl> return httpResponse ; <nl> } <nl> <nl> + private boolean shouldFailover ( final org . apache . http . HttpResponse remoteResponse ) { <nl> + int statusCode = remoteResponse . getStatusLine ( ) . getStatusCode ( ) ; <nl> + return statusCode = = HttpResponseStatus . BAD _ REQUEST . code ( ) ; <nl> + } <nl> + <nl> private HttpResponse setupNormalResponse ( final org . apache . http . HttpResponse remoteResponse ) throws IOException { <nl> HttpVersion httpVersion = HttpVersion . valueOf ( remoteResponse . getProtocolVersion ( ) . toString ( ) ) ; <nl> HttpResponseStatus status = HttpResponseStatus . valueOf ( remoteResponse . getStatusLine ( ) . getStatusCode ( ) ) ;

TEST DIFF:
diff - - git a / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java b / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java 
 index 7419473 . . 63866da 100644 
 - - - a / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java 
 + + + b / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java 
 @ @ - 96 , 10 + 96 , 12 @ @ public abstract class AbstractProxyResponseHandler extends AbstractHttpResponseH 
 
 private static Logger logger = LoggerFactory . getLogger ( AbstractProxyResponseHandler . class ) ; 
 
 + private final int proxyStatus ; 
 private final Failover failover ; 
 
 protected AbstractProxyResponseHandler ( final Failover failover ) { 
 this . failover = failover ; 
 + this . proxyStatus = HttpResponseStatus . BAD _ REQUEST . code ( ) ; 
 } 
 
 private HttpRequestBase prepareRemoteRequest ( final FullHttpRequest request , final URL url ) { 
 @ @ - 204 , 7 + 206 , 7 @ @ public abstract class AbstractProxyResponseHandler extends AbstractHttpResponseH 
 
 private boolean shouldFailover ( final org . apache . http . HttpResponse remoteResponse ) { 
 int statusCode = remoteResponse . getStatusLine ( ) . getStatusCode ( ) ; 
 - return statusCode = = HttpResponseStatus . BAD _ REQUEST . code ( ) ; 
 + return statusCode = = proxyStatus ; 
 } 
 
 private HttpResponse setupNormalResponse ( final org . apache . http . HttpResponse remoteResponse ) throws IOException {

NEAREST DIFF:
diff - - git a / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java b / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java 
 index 333dd3f . . 7419473 100644 
 - - - a / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java 
 + + + b / moco - core / src / main / java / com / github / dreamhead / moco / handler / AbstractProxyResponseHandler . java 
 @ @ - 192 , 8 + 192 , 7 @ @ public abstract class AbstractProxyResponseHandler extends AbstractHttpResponseH 
 
 private HttpResponse setupResponse ( final HttpRequest request , 
 final org . apache . http . HttpResponse remoteResponse ) throws IOException { 
 - int statusCode = remoteResponse . getStatusLine ( ) . getStatusCode ( ) ; 
 - if ( statusCode = = HttpResponseStatus . BAD _ REQUEST . code ( ) ) { 
 + if ( shouldFailover ( remoteResponse ) ) { 
 return failover . failover ( request ) ; 
 } 
 
 @ @ - 203 , 6 + 202 , 11 @ @ public abstract class AbstractProxyResponseHandler extends AbstractHttpResponseH 
 return httpResponse ; 
 } 
 
 + private boolean shouldFailover ( final org . apache . http . HttpResponse remoteResponse ) { 
 + int statusCode = remoteResponse . getStatusLine ( ) . getStatusCode ( ) ; 
 + return statusCode = = HttpResponseStatus . BAD _ REQUEST . code ( ) ; 
 + } 
 + 
 private HttpResponse setupNormalResponse ( final org . apache . http . HttpResponse remoteResponse ) throws IOException { 
 HttpVersion httpVersion = HttpVersion . valueOf ( remoteResponse . getProtocolVersion ( ) . toString ( ) ) ; 
 HttpResponseStatus status = HttpResponseStatus . valueOf ( remoteResponse . getStatusLine ( ) . getStatusCode ( ) ) ;
