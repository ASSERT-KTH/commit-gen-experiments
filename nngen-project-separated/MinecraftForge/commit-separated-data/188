BLEU SCORE: 0.0156963464356626

TEST MSG: metadata is dead
GENERATED MSG: Revert commits related to filtering proxy and Automatic Subscriber annotations .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / Mod . java b / src / main / java / net / minecraftforge / fml / common / Mod . java <nl> index 73074e5 . . 4106fac 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / Mod . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / Mod . java <nl> @ @ - 118 , 33 + 118 , 7 @ @ public @ interface Mod <nl> * The mod object to inject into this field <nl> * / <nl> String value ( ) default " " ; <nl> - <nl> - / * * <nl> - * Optional owner modid , required if this annotation is on something that is not inside the main class of a mod container . <nl> - * This is required to prevent mods from classloading other , potentially disabled mods . <nl> - * / <nl> - String owner ( ) default " " ; <nl> - } <nl> - / * * <nl> - * Populate the annotated field with the mod ' s metadata . <nl> - * @ author cpw <nl> - * <nl> - * / <nl> - @ Retention ( RetentionPolicy . RUNTIME ) <nl> - @ Target ( ElementType . FIELD ) <nl> - @ interface Metadata { <nl> - / * * <nl> - * The mod id specifying the metadata to load here <nl> - * / <nl> - String value ( ) default " " ; <nl> - <nl> - / * * <nl> - * Optional owner modid , required if this annotation is on something that is not inside the main class of a mod container . <nl> - * This is required to prevent mods from classloading other , potentially disabled mods . <nl> - * / <nl> - String owner ( ) default " " ; <nl> - } <nl> - <nl> + } <nl> / * * <nl> * A class which will be subscribed to { @ link net . minecraftforge . common . MinecraftForge . EVENT _ BUS } at mod construction time . <nl> * /
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / AutomaticEventSubscriber . java b / src / main / java / net / minecraftforge / fml / common / AutomaticEventSubscriber . java <nl> index 230abe4 . . d1fe342 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / AutomaticEventSubscriber . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / AutomaticEventSubscriber . java <nl> @ @ - 51 , 24 + 51 , 6 @ @ public class AutomaticEventSubscriber <nl> { <nl> try <nl> { <nl> - / / Filter out handlers for things that arnt this mod . <nl> - / / Perhaps find a way to make this more generic for multiple mods <nl> - / / from the same source . . . . <nl> - boolean register = true ; <nl> - for ( ASMData a : data . getAll ( Mod . class . getName ( ) ) ) <nl> - { <nl> - if ( a . getClassName ( ) . equals ( targ . getClassName ( ) ) ) <nl> - { <nl> - if ( ! mod . getModId ( ) . equals ( a . getAnnotationInfo ( ) . get ( " modid " ) ) ) <nl> - { <nl> - register = false ; <nl> - break ; <nl> - } <nl> - } <nl> - } <nl> - if ( ! register ) <nl> - continue ; <nl> - <nl> / / noinspection unchecked <nl> List < ModAnnotation . EnumHolder > sidesEnum = ( List < ModAnnotation . EnumHolder > ) targ . getAnnotationInfo ( ) . get ( " value " ) ; <nl> EnumSet < Side > sides = DEFAULT ; <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / ProxyInjector . java b / src / main / java / net / minecraftforge / fml / common / ProxyInjector . java <nl> index d159168 . . 9c66694 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / ProxyInjector . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / ProxyInjector . java <nl> @ @ - 47 , 30 + 47 , 6 @ @ public class ProxyInjector <nl> { <nl> try <nl> { <nl> - / / Pull this from the ASM data so we do not prematurely initialize mods with the below Class . forName <nl> - String modid = ( String ) targ . getAnnotationInfo ( ) . get ( " modId " ) ; <nl> - if ( modid = = null ) <nl> - { <nl> - for ( ASMData a : data . getAll ( Mod . class . getName ( ) ) ) <nl> - { <nl> - if ( isProxyFromMod ( a . getClassName ( ) , targ . getClassName ( ) ) ) <nl> - { <nl> - modid = ( String ) a . getAnnotationInfo ( ) . get ( " modid " ) ; <nl> - break ; <nl> - } <nl> - } <nl> - } <nl> - <nl> - if ( modid = = null ) <nl> - { <nl> - FMLLog . warning ( " Unable to determine the associated mod for proxy injection for % s . % s , assuming it ' s from % s " , targ . getClassName ( ) , targ . getObjectName ( ) , mod . getModId ( ) ) ; <nl> - } <nl> - else if ( ! modid . equals ( mod . getModId ( ) ) ) <nl> - { <nl> - FMLLog . fine ( " Skipping proxy injection for % s . % s since it is not for mod % s , it should belong to % s " , targ . getClassName ( ) , targ . getObjectName ( ) , mod . getModId ( ) , modid ) ; <nl> - continue ; <nl> - } <nl> - <nl> Class < ? > proxyTarget = Class . forName ( targ . getClassName ( ) , true , mcl ) ; <nl> Field target = proxyTarget . getDeclaredField ( targ . getObjectName ( ) ) ; <nl> if ( target = = null ) <nl> @ @ - 82 , 6 + 58 , 11 @ @ public class ProxyInjector <nl> target . setAccessible ( true ) ; <nl> <nl> SidedProxy annotation = target . getAnnotation ( SidedProxy . class ) ; <nl> + if ( ! Strings . isNullOrEmpty ( annotation . modId ( ) ) & & ! annotation . modId ( ) . equals ( mod . getModId ( ) ) ) <nl> + { <nl> + FMLLog . fine ( " Skipping proxy injection for % s . % s since it is not for mod % s " , targ . getClassName ( ) , targ . getObjectName ( ) , mod . getModId ( ) ) ; <nl> + continue ; <nl> + } <nl> String targetType = side . isClient ( ) ? annotation . clientSide ( ) : annotation . serverSide ( ) ; <nl> if ( targetType . equals ( " " ) ) <nl> { <nl> @ @ - 111 , 36 + 92 , 4 @ @ public class ProxyInjector <nl> / / Allow language specific proxy injection . <nl> languageAdapter . setInternalProxies ( mod , side , mcl ) ; <nl> } <nl> - <nl> - / * * <nl> - * Checks if a proxy is part of a mod . <nl> - * <nl> - * Checks that the proxy is somewhere in the same package that holds the mod . <nl> - * For example , the @ Mod is ' com . modname . Mod ' , the Proxy is ' com . modname . proxies . ProxyClient ' <nl> - * The package of the mod is ' com . modname ' , and Proxy is in that package , so it is from the mod . <nl> - * <nl> - * Compares each path section in a for loop instead of simply using { @ link String # startsWith ( String ) } <nl> - * because a mod like ' com . modname . Mod ' with package ' com . modname ' <nl> - * does not own a proxy from ' com . modnametools . proxies . ProxyClient ' even though they start the same . <nl> - * / <nl> - private static boolean isProxyFromMod ( String modClassName , String proxyClassName ) <nl> - { <nl> - if ( modClassName . equals ( proxyClassName ) ) <nl> - return true ; <nl> - <nl> - String [ ] modPath = modClassName . split ( " \ \ . " ) ; <nl> - String [ ] proxyPath = proxyClassName . split ( " \ \ . " ) ; <nl> - if ( proxyPath . length < modPath . length ) <nl> - return false ; <nl> - <nl> - for ( int i = 0 ; i < modPath . length - 1 ; i + + ) <nl> - { <nl> - if ( ! modPath [ i ] . equals ( proxyPath [ i ] ) ) <nl> - { <nl> - return false ; <nl> - } <nl> - } <nl> - <nl> - return true ; <nl> - } <nl> }

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / Mod . java b / src / main / java / net / minecraftforge / fml / common / Mod . java 
 index 73074e5 . . 4106fac 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / Mod . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / Mod . java 
 @ @ - 118 , 33 + 118 , 7 @ @ public @ interface Mod 
 * The mod object to inject into this field 
 * / 
 String value ( ) default " " ; 
 - 
 - / * * 
 - * Optional owner modid , required if this annotation is on something that is not inside the main class of a mod container . 
 - * This is required to prevent mods from classloading other , potentially disabled mods . 
 - * / 
 - String owner ( ) default " " ; 
 - } 
 - / * * 
 - * Populate the annotated field with the mod ' s metadata . 
 - * @ author cpw 
 - * 
 - * / 
 - @ Retention ( RetentionPolicy . RUNTIME ) 
 - @ Target ( ElementType . FIELD ) 
 - @ interface Metadata { 
 - / * * 
 - * The mod id specifying the metadata to load here 
 - * / 
 - String value ( ) default " " ; 
 - 
 - / * * 
 - * Optional owner modid , required if this annotation is on something that is not inside the main class of a mod container . 
 - * This is required to prevent mods from classloading other , potentially disabled mods . 
 - * / 
 - String owner ( ) default " " ; 
 - } 
 - 
 + } 
 / * * 
 * A class which will be subscribed to { @ link net . minecraftforge . common . MinecraftForge . EVENT _ BUS } at mod construction time . 
 * /

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / AutomaticEventSubscriber . java b / src / main / java / net / minecraftforge / fml / common / AutomaticEventSubscriber . java 
 index 230abe4 . . d1fe342 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / AutomaticEventSubscriber . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / AutomaticEventSubscriber . java 
 @ @ - 51 , 24 + 51 , 6 @ @ public class AutomaticEventSubscriber 
 { 
 try 
 { 
 - / / Filter out handlers for things that arnt this mod . 
 - / / Perhaps find a way to make this more generic for multiple mods 
 - / / from the same source . . . . 
 - boolean register = true ; 
 - for ( ASMData a : data . getAll ( Mod . class . getName ( ) ) ) 
 - { 
 - if ( a . getClassName ( ) . equals ( targ . getClassName ( ) ) ) 
 - { 
 - if ( ! mod . getModId ( ) . equals ( a . getAnnotationInfo ( ) . get ( " modid " ) ) ) 
 - { 
 - register = false ; 
 - break ; 
 - } 
 - } 
 - } 
 - if ( ! register ) 
 - continue ; 
 - 
 / / noinspection unchecked 
 List < ModAnnotation . EnumHolder > sidesEnum = ( List < ModAnnotation . EnumHolder > ) targ . getAnnotationInfo ( ) . get ( " value " ) ; 
 EnumSet < Side > sides = DEFAULT ; 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / ProxyInjector . java b / src / main / java / net / minecraftforge / fml / common / ProxyInjector . java 
 index d159168 . . 9c66694 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / ProxyInjector . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / ProxyInjector . java 
 @ @ - 47 , 30 + 47 , 6 @ @ public class ProxyInjector 
 { 
 try 
 { 
 - / / Pull this from the ASM data so we do not prematurely initialize mods with the below Class . forName 
 - String modid = ( String ) targ . getAnnotationInfo ( ) . get ( " modId " ) ; 
 - if ( modid = = null ) 
 - { 
 - for ( ASMData a : data . getAll ( Mod . class . getName ( ) ) ) 
 - { 
 - if ( isProxyFromMod ( a . getClassName ( ) , targ . getClassName ( ) ) ) 
 - { 
 - modid = ( String ) a . getAnnotationInfo ( ) . get ( " modid " ) ; 
 - break ; 
 - } 
 - } 
 - } 
 - 
 - if ( modid = = null ) 
 - { 
 - FMLLog . warning ( " Unable to determine the associated mod for proxy injection for % s . % s , assuming it ' s from % s " , targ . getClassName ( ) , targ . getObjectName ( ) , mod . getModId ( ) ) ; 
 - } 
 - else if ( ! modid . equals ( mod . getModId ( ) ) ) 
 - { 
 - FMLLog . fine ( " Skipping proxy injection for % s . % s since it is not for mod % s , it should belong to % s " , targ . getClassName ( ) , targ . getObjectName ( ) , mod . getModId ( ) , modid ) ; 
 - continue ; 
 - } 
 - 
 Class < ? > proxyTarget = Class . forName ( targ . getClassName ( ) , true , mcl ) ; 
 Field target = proxyTarget . getDeclaredField ( targ . getObjectName ( ) ) ; 
 if ( target = = null ) 
 @ @ - 82 , 6 + 58 , 11 @ @ public class ProxyInjector 
 target . setAccessible ( true ) ; 
 
 SidedProxy annotation = target . getAnnotation ( SidedProxy . class ) ; 
 + if ( ! Strings . isNullOrEmpty ( annotation . modId ( ) ) & & ! annotation . modId ( ) . equals ( mod . getModId ( ) ) ) 
 + { 
 + FMLLog . fine ( " Skipping proxy injection for % s . % s since it is not for mod % s " , targ . getClassName ( ) , targ . getObjectName ( ) , mod . getModId ( ) ) ; 
 + continue ; 
 + } 
 String targetType = side . isClient ( ) ? annotation . clientSide ( ) : annotation . serverSide ( ) ; 
 if ( targetType . equals ( " " ) ) 
 { 
 @ @ - 111 , 36 + 92 , 4 @ @ public class ProxyInjector 
 / / Allow language specific proxy injection . 
 languageAdapter . setInternalProxies ( mod , side , mcl ) ; 
 } 
 - 
 - / * * 
 - * Checks if a proxy is part of a mod . 
 - * 
 - * Checks that the proxy is somewhere in the same package that holds the mod . 
 - * For example , the @ Mod is ' com . modname . Mod ' , the Proxy is ' com . modname . proxies . ProxyClient ' 
 - * The package of the mod is ' com . modname ' , and Proxy is in that package , so it is from the mod . 
 - * 
 - * Compares each path section in a for loop instead of simply using { @ link String # startsWith ( String ) } 
 - * because a mod like ' com . modname . Mod ' with package ' com . modname ' 
 - * does not own a proxy from ' com . modnametools . proxies . ProxyClient ' even though they start the same . 
 - * / 
 - private static boolean isProxyFromMod ( String modClassName , String proxyClassName ) 
 - { 
 - if ( modClassName . equals ( proxyClassName ) ) 
 - return true ; 
 - 
 - String [ ] modPath = modClassName . split ( " \ \ . " ) ; 
 - String [ ] proxyPath = proxyClassName . split ( " \ \ . " ) ; 
 - if ( proxyPath . length < modPath . length ) 
 - return false ; 
 - 
 - for ( int i = 0 ; i < modPath . length - 1 ; i + + ) 
 - { 
 - if ( ! modPath [ i ] . equals ( proxyPath [ i ] ) ) 
 - { 
 - return false ; 
 - } 
 - } 
 - 
 - return true ; 
 - } 
 }
