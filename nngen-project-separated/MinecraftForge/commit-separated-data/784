BLEU SCORE: 0.025006150769968642

TEST MSG: Fixed sprite not being passed to the quad builder for custom models .
GENERATED MSG: Model stuff : updated to generics , fixed various warnings , added handling of new perspective types .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> index 7d23d4d . . ca7b14f 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> @ @ - 224 , 14 + 224 , 14 @ @ public final class ItemLayerModel implements IRetexturableModel <nl> } <nl> } <nl> / / front <nl> - builder . add ( buildQuad ( format , transform , EnumFacing . NORTH , tint , <nl> + builder . add ( buildQuad ( format , transform , EnumFacing . NORTH , sprite , tint , <nl> 0 , 0 , 7 . 5f / 16f , sprite . getMinU ( ) , sprite . getMaxV ( ) , <nl> 0 , 1 , 7 . 5f / 16f , sprite . getMinU ( ) , sprite . getMinV ( ) , <nl> 1 , 1 , 7 . 5f / 16f , sprite . getMaxU ( ) , sprite . getMinV ( ) , <nl> 1 , 0 , 7 . 5f / 16f , sprite . getMaxU ( ) , sprite . getMaxV ( ) <nl> ) ) ; <nl> / / back <nl> - builder . add ( buildQuad ( format , transform , EnumFacing . SOUTH , tint , <nl> + builder . add ( buildQuad ( format , transform , EnumFacing . SOUTH , sprite , tint , <nl> 0 , 0 , 8 . 5f / 16f , sprite . getMinU ( ) , sprite . getMaxV ( ) , <nl> 1 , 0 , 8 . 5f / 16f , sprite . getMaxU ( ) , sprite . getMaxV ( ) , <nl> 1 , 1 , 8 . 5f / 16f , sprite . getMaxU ( ) , sprite . getMinV ( ) , <nl> @ @ - 329 , 7 + 329 , 7 @ @ public final class ItemLayerModel implements IRetexturableModel <nl> throw new IllegalArgumentException ( " can ' t handle z - oriented side " ) ; <nl> } <nl> return buildQuad ( <nl> - format , transform , side . getOpposite ( ) , tint , / / getOpposite is related either to the swapping of V direction , or something else <nl> + format , transform , side . getOpposite ( ) , sprite , tint , / / getOpposite is related either to the swapping of V direction , or something else <nl> x0 , y0 , z1 , sprite . getInterpolatedU ( u0 ) , sprite . getInterpolatedV ( v0 ) , <nl> x1 , y1 , z1 , sprite . getInterpolatedU ( u1 ) , sprite . getInterpolatedV ( v1 ) , <nl> x1 , y1 , z2 , sprite . getInterpolatedU ( u1 ) , sprite . getInterpolatedV ( v1 ) , <nl> @ @ - 338 , 7 + 338 , 7 @ @ public final class ItemLayerModel implements IRetexturableModel <nl> } <nl> <nl> private static final BakedQuad buildQuad ( <nl> - VertexFormat format , Optional < TRSRTransformation > transform , EnumFacing side , int tint , <nl> + VertexFormat format , Optional < TRSRTransformation > transform , EnumFacing side , TextureAtlasSprite sprite , int tint , <nl> float x0 , float y0 , float z0 , float u0 , float v0 , <nl> float x1 , float y1 , float z1 , float u1 , float v1 , <nl> float x2 , float y2 , float z2 , float u2 , float v2 , <nl> @ @ - 347 , 6 + 347 , 7 @ @ public final class ItemLayerModel implements IRetexturableModel <nl> UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; <nl> builder . setQuadTint ( tint ) ; <nl> builder . setQuadOrientation ( side ) ; <nl> + builder . setTexture ( sprite ) ; <nl> putVertex ( builder , format , transform , side , x0 , y0 , z0 , u0 , v0 ) ; <nl> putVertex ( builder , format , transform , side , x1 , y1 , z1 , u1 , v1 ) ; <nl> putVertex ( builder , format , transform , side , x2 , y2 , z2 , u2 , v2 ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / ItemTextureQuadConverter . java b / src / main / java / net / minecraftforge / client / model / ItemTextureQuadConverter . java <nl> index c946739 . . 14746db 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ItemTextureQuadConverter . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ItemTextureQuadConverter . java <nl> @ @ - 195 , 10 + 195 , 10 @ @ public final class ItemTextureQuadConverter <nl> y1 = 1f - y2 ; <nl> y2 = 1f - tmp ; <nl> <nl> - return putQuad ( format , transform , facing , color , x1 , y1 , x2 , y2 , z , u1 , v1 , u2 , v2 ) ; <nl> + return putQuad ( format , transform , facing , sprite , color , x1 , y1 , x2 , y2 , z , u1 , v1 , u2 , v2 ) ; <nl> } <nl> <nl> - private static UnpackedBakedQuad putQuad ( VertexFormat format , TRSRTransformation transform , EnumFacing side , int color , <nl> + private static UnpackedBakedQuad putQuad ( VertexFormat format , TRSRTransformation transform , EnumFacing side , TextureAtlasSprite sprite , int color , <nl> float x1 , float y1 , float x2 , float y2 , float z , <nl> float u1 , float v1 , float u2 , float v2 ) <nl> { <nl> @ @ - 206 , 6 + 206 , 7 @ @ public final class ItemTextureQuadConverter <nl> UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; <nl> builder . setQuadTint ( - 1 ) ; <nl> builder . setQuadOrientation ( side ) ; <nl> + builder . setTexture ( sprite ) ; <nl> <nl> if ( side = = EnumFacing . NORTH ) <nl> { <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / ModelFluid . java b / src / main / java / net / minecraftforge / client / model / ModelFluid . java <nl> index be1134a . . 50f3774 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ModelFluid . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ModelFluid . java <nl> @ @ - 209 , 6 + 209 , 7 @ @ public final class ModelFluid implements IModelCustomData <nl> EnumFacing side = gas ? EnumFacing . DOWN : EnumFacing . UP ; <nl> UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; <nl> builder . setQuadOrientation ( side ) ; <nl> + builder . setTexture ( topSprite ) ; <nl> for ( int i = gas ? 3 : 0 ; i ! = ( gas ? - 1 : 4 ) ; i + = ( gas ? - 1 : 1 ) ) <nl> { <nl> putVertex ( <nl> @ @ - 224 , 6 + 225 , 7 @ @ public final class ModelFluid implements IModelCustomData <nl> side = side . getOpposite ( ) ; <nl> builder = new UnpackedBakedQuad . Builder ( format ) ; <nl> builder . setQuadOrientation ( side ) ; <nl> + builder . setTexture ( still ) ; <nl> for ( int i = gas ? 3 : 0 ; i ! = ( gas ? - 1 : 4 ) ; i + = ( gas ? - 1 : 1 ) ) <nl> { <nl> putVertex ( <nl> @ @ - 245 , 6 + 247 , 7 @ @ public final class ModelFluid implements IModelCustomData <nl> { <nl> builder = new UnpackedBakedQuad . Builder ( format ) ; <nl> builder . setQuadOrientation ( side ) ; <nl> + builder . setTexture ( flowing ) ; <nl> for ( int j = 0 ; j < 4 ; j + + ) <nl> { <nl> int l = ( k * 3 ) + ( 1 - 2 * k ) * j ; <nl> @ @ - 266 , 6 + 269 , 7 @ @ public final class ModelFluid implements IModelCustomData <nl> / / 1 quad for inventory <nl> UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; <nl> builder . setQuadOrientation ( EnumFacing . UP ) ; <nl> + builder . setTexture ( still ) ; <nl> for ( int i = 0 ; i < 4 ; i + + ) <nl> { <nl> putVertex ( <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java b / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java <nl> index 34371c5 . . 6e9cf90 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java <nl> @ @ - 723 , 6 + 723 , 7 @ @ public final class B3DLoader implements ICustomModelLoader <nl> if ( textures = = null | | textures . isEmpty ( ) ) sprite = this . textures . get ( " missingno " ) ; <nl> else if ( textures . get ( 0 ) = = B3DModel . Texture . White ) sprite = ModelLoader . White . instance ; <nl> else sprite = this . textures . get ( textures . get ( 0 ) . getPath ( ) ) ; <nl> + quadBuilder . setTexture ( sprite ) ; <nl> putVertexData ( quadBuilder , f . getV1 ( ) , f . getNormal ( ) , sprite ) ; <nl> putVertexData ( quadBuilder , f . getV2 ( ) , f . getNormal ( ) , sprite ) ; <nl> putVertexData ( quadBuilder , f . getV3 ( ) , f . getNormal ( ) , sprite ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java b / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java <nl> index fc53067 . . 5854413 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java <nl> @ @ - 1400 , 6 + 1400 , 7 @ @ public class OBJModel implements IRetexturableModel , IModelCustomData <nl> } else sprite = this . textures . get ( f . getMaterialName ( ) ) ; <nl> UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; <nl> builder . setQuadOrientation ( EnumFacing . getFacingFromVector ( f . getNormal ( ) . x , f . getNormal ( ) . y , f . getNormal ( ) . z ) ) ; <nl> + builder . setTexture ( sprite ) ; <nl> Normal faceNormal = f . getNormal ( ) ; <nl> putVertexData ( builder , f . verts [ 0 ] , faceNormal , TextureCoordinate . getDefaultUVs ( ) [ 0 ] , sprite ) ; <nl> putVertexData ( builder , f . verts [ 1 ] , faceNormal , TextureCoordinate . getDefaultUVs ( ) [ 1 ] , sprite ) ;
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / resources / model / IBakedModel . java . patch b / patches / minecraft / net / minecraft / client / resources / model / IBakedModel . java . patch <nl> index 94444e8 . . d032f72 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / resources / model / IBakedModel . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / resources / model / IBakedModel . java . patch <nl> @ @ - 1 , 18 + 1 , 6 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / resources / model / IBakedModel . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / resources / model / IBakedModel . java <nl> - @ @ - 8 , 7 + 8 , 11 @ @ <nl> - import net . minecraftforge . fml . relauncher . Side ; <nl> - import net . minecraftforge . fml . relauncher . SideOnly ; <nl> - <nl> - + / * <nl> - + * @ deprecated use { @ link net . minecraftforge . client . model . IFlexibleBakedModel } , { @ link net . minecraftforge . client . model . IPerspectiveAwareModel } <nl> - + * / <nl> - @ SideOnly ( Side . CLIENT ) <nl> - + @ Deprecated <nl> - public interface IBakedModel <nl> - { <nl> - List < BakedQuad > getFaceQuads ( EnumFacing p _ 177551 _ 1 _ ) ; <nl> - @ @ - 23 , 5 + 27 , 6 @ @ <nl> + @ @ - 23 , 5 + 23 , 6 @ @ <nl> <nl> TextureAtlasSprite getTexture ( ) ; <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> index 2fc9623 . . 2b58dee 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> + + + b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> @ @ - 42 , 6 + 42 , 7 @ @ import net . minecraft . client . resources . I18n ; <nl> import net . minecraft . client . resources . model . IBakedModel ; <nl> import net . minecraft . client . resources . model . ModelBakery ; <nl> import net . minecraft . client . resources . model . ModelManager ; <nl> + import net . minecraft . client . resources . model . ModelResourceLocation ; <nl> import net . minecraft . client . resources . model . ModelRotation ; <nl> import net . minecraft . client . settings . GameSettings ; <nl> import net . minecraft . entity . Entity ; <nl> @ @ - 90 , 6 + 91 , 7 @ @ import org . lwjgl . opengl . GL11 ; <nl> <nl> <nl> <nl> + <nl> import com . google . common . collect . Maps ; <nl> <nl> public class ForgeHooksClient <nl> @ @ - 510 , 7 + 512 , 7 @ @ public class ForgeHooksClient <nl> } <nl> * / <nl> <nl> - public static void onModelBake ( ModelManager modelManager , IRegistry modelRegistry , ModelBakery modelBakery ) <nl> + public static void onModelBake ( ModelManager modelManager , IRegistry < ModelResourceLocation , IBakedModel > modelRegistry , ModelBakery modelBakery ) <nl> { <nl> ModelLoader loader = ( ModelLoader ) modelBakery ; <nl> MinecraftForge . EVENT _ BUS . post ( new ModelBakeEvent ( modelManager , modelRegistry , loader ) ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / BlockStateLoader . java b / src / main / java / net / minecraftforge / client / model / BlockStateLoader . java <nl> index cd3e1d2 . . 007fefc 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / BlockStateLoader . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / BlockStateLoader . java <nl> @ @ - 43 , 7 + 43 , 6 @ @ public class BlockStateLoader <nl> * <nl> * @ return Model definition including variants for all known combinations . <nl> * / <nl> - @ SuppressWarnings ( " rawtypes " ) <nl> public static ModelBlockDefinition load ( Reader reader , final Gson vanillaGSON ) <nl> { <nl> try <nl> @ @ - 75 , 7 + 74 , 7 @ @ public class BlockStateLoader <nl> variants . add ( new ModelBlockDefinition . Variants ( entry . getKey ( ) , mcVars ) ) ; <nl> } <nl> <nl> - return new ModelBlockDefinition ( ( Collection ) variants ) ; / / Damn lists being collections ! <nl> + return new ModelBlockDefinition ( variants ) ; <nl> <nl> default : / / Unknown version . . try loading it as normal . <nl> return vanillaGSON . fromJson ( reader , ModelBlockDefinition . class ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java b / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java <nl> index 59598c2 . . b5ced65 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java <nl> @ @ - 534 , 17 + 534 , 29 @ @ public class ForgeBlockStateV1 extends Marker <nl> transform . remove ( " firstperson " ) ; <nl> transforms . put ( TransformType . FIRST _ PERSON , TRSRTransformation . blockCenterToCorner ( t ) ) ; <nl> } <nl> + if ( transform . has ( " head " ) ) <nl> + { <nl> + TRSRTransformation t = context . deserialize ( transform . get ( " head " ) , TRSRTransformation . class ) ; <nl> + transform . remove ( " head " ) ; <nl> + transforms . put ( TransformType . HEAD , TRSRTransformation . blockCenterToCorner ( t ) ) ; <nl> + } <nl> if ( transform . has ( " gui " ) ) <nl> { <nl> TRSRTransformation t = context . deserialize ( transform . get ( " gui " ) , TRSRTransformation . class ) ; <nl> transform . remove ( " gui " ) ; <nl> transforms . put ( TransformType . GUI , TRSRTransformation . blockCenterToCorner ( t ) ) ; <nl> } <nl> - if ( transform . has ( " head " ) ) <nl> + if ( transform . has ( " ground " ) ) <nl> { <nl> - TRSRTransformation t = context . deserialize ( transform . get ( " head " ) , TRSRTransformation . class ) ; <nl> - transform . remove ( " head " ) ; <nl> - transforms . put ( TransformType . HEAD , TRSRTransformation . blockCenterToCorner ( t ) ) ; <nl> + TRSRTransformation t = context . deserialize ( transform . get ( " ground " ) , TRSRTransformation . class ) ; <nl> + transform . remove ( " ground " ) ; <nl> + transforms . put ( TransformType . GROUND , TRSRTransformation . blockCenterToCorner ( t ) ) ; <nl> + } <nl> + if ( transform . has ( " fixed " ) ) <nl> + { <nl> + TRSRTransformation t = context . deserialize ( transform . get ( " fixed " ) , TRSRTransformation . class ) ; <nl> + transform . remove ( " fixed " ) ; <nl> + transforms . put ( TransformType . FIXED , TRSRTransformation . blockCenterToCorner ( t ) ) ; <nl> } <nl> int k = transform . entrySet ( ) . size ( ) ; <nl> if ( transform . has ( " matrix " ) ) k - - ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / IFlexibleBakedModel . java b / src / main / java / net / minecraftforge / client / model / IFlexibleBakedModel . java <nl> index e01989a . . 4d921fa 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / IFlexibleBakedModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / IFlexibleBakedModel . java <nl> @ @ - 14 , 9 + 14 , 6 @ @ import net . minecraft . util . EnumFacing ; <nl> * / <nl> public interface IFlexibleBakedModel extends IBakedModel <nl> { <nl> - / / non - erased versions of the IBakedModel methods <nl> - List < BakedQuad > getFaceQuads ( EnumFacing side ) ; <nl> - List < BakedQuad > getGeneralQuads ( ) ; <nl> / * <nl> * Specifies the format which BakedQuads ' getVertexData will have . <nl> * / <nl> @ @ - 36 , 13 + 33 , 11 @ @ public interface IFlexibleBakedModel extends IBakedModel <nl> this . format = format ; <nl> } <nl> <nl> - @ SuppressWarnings ( " unchecked " ) <nl> public List < BakedQuad > getFaceQuads ( EnumFacing side ) <nl> { <nl> return parent . getFaceQuads ( side ) ; <nl> } <nl> <nl> - @ SuppressWarnings ( " unchecked " ) <nl> public List < BakedQuad > getGeneralQuads ( ) <nl> { <nl> return parent . getGeneralQuads ( ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / IPerspectiveAwareModel . java b / src / main / java / net / minecraftforge / client / model / IPerspectiveAwareModel . java <nl> index be4a2ad . . d783267 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / IPerspectiveAwareModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / IPerspectiveAwareModel . java <nl> @ @ - 14 , 7 + 14 , 6 @ @ import net . minecraft . util . EnumFacing ; <nl> <nl> import org . apache . commons . lang3 . tuple . Pair ; <nl> <nl> - import com . google . common . collect . ImmutableList ; <nl> import com . google . common . collect . ImmutableMap ; <nl> <nl> / * <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java b / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java <nl> index 1dbeb77 . . 838090f 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java <nl> @ @ - 38 , 11 + 38 , 10 @ @ public interface IPerspectiveState extends IModelState <nl> private static ImmutableMap < TransformType , IModelState > getMap ( ItemCameraTransforms transforms ) <nl> { <nl> Map < TransformType , IModelState > map = Maps . newHashMap ( ) ; <nl> - map . put ( TransformType . NONE , TRSRTransformation . identity ( ) ) ; <nl> - map . put ( TransformType . THIRD _ PERSON , transforms . thirdPerson ) ; <nl> - map . put ( TransformType . FIRST _ PERSON , transforms . firstPerson ) ; <nl> - map . put ( TransformType . GUI , transforms . gui ) ; <nl> - map . put ( TransformType . HEAD , transforms . head ) ; <nl> + for ( TransformType type : TransformType . values ( ) ) <nl> + { <nl> + map . put ( type , transforms . func _ 181688 _ b ( type ) ) ; <nl> + } <nl> return Maps . immutableEnumMap ( map ) ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> index 8930101 . . 396c4e6 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> @ @ - 3 , 7 + 3 , 6 @ @ package net . minecraftforge . client . model ; <nl> import java . util . Arrays ; <nl> import java . util . Collection ; <nl> import java . util . List ; <nl> - import java . util . Map ; <nl> <nl> import javax . vecmath . Matrix4f ; <nl> import javax . vecmath . Vector4f ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / ModelLoader . java b / src / main / java / net / minecraftforge / client / model / ModelLoader . java <nl> index fda3968 . . 4e0fdef 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ModelLoader . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ModelLoader . java <nl> @ @ - 38 , 6 + 38 , 7 @ @ import net . minecraft . client . renderer . vertex . DefaultVertexFormats ; <nl> import net . minecraft . client . renderer . vertex . VertexFormat ; <nl> import net . minecraft . client . resources . IResourceManager ; <nl> import net . minecraft . client . resources . model . BuiltInModel ; <nl> + import net . minecraft . client . resources . model . IBakedModel ; <nl> import net . minecraft . client . resources . model . ModelBakery ; <nl> import net . minecraft . client . resources . model . ModelResourceLocation ; <nl> import net . minecraft . client . resources . model . ModelRotation ; <nl> @ @ - 85 , 7 + 86 , 7 @ @ public class ModelLoader extends ModelBakery <nl> } <nl> <nl> @ Override <nl> - public IRegistry setupModelRegistry ( ) <nl> + public IRegistry < ModelResourceLocation , IBakedModel > setupModelRegistry ( ) <nl> { <nl> isLoading = true ; <nl> loadBlocks ( ) ; <nl> @ @ - 717 , 12 + 718 , 12 @ @ public class ModelLoader extends ModelBakery <nl> } <nl> } <nl> <nl> - public void onPostBakeEvent ( IRegistry modelRegistry ) <nl> + public void onPostBakeEvent ( IRegistry < ModelResourceLocation , IBakedModel > modelRegistry ) <nl> { <nl> - Object missingModel = modelRegistry . getObject ( MODEL _ MISSING ) ; <nl> + IBakedModel missingModel = modelRegistry . getObject ( MODEL _ MISSING ) ; <nl> for ( ModelResourceLocation missing : missingVariants ) <nl> { <nl> - Object model = modelRegistry . getObject ( missing ) ; <nl> + IBakedModel model = modelRegistry . getObject ( missing ) ; <nl> if ( model = = null | | model = = missingModel ) <nl> { <nl> FMLLog . severe ( " Model definition for location % s not found " , missing ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / b3d / B3DModel . java b / src / main / java / net / minecraftforge / client / model / b3d / B3DModel . java <nl> index c9b889a . . 60af648 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / b3d / B3DModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / b3d / B3DModel . java <nl> @ @ - 185 , 12 + 185 , 12 @ @ public class B3DModel <nl> { <nl> chunk ( " BB3D " ) ; <nl> int version = buf . getInt ( ) ; <nl> - if ( version / 100 > this . version / 100 ) <nl> + if ( version / 100 > Parser . version / 100 ) <nl> throw new IOException ( " Unsupported major model version : " + ( ( float ) version / 100 ) ) ; <nl> - if ( version % 100 > this . version % 100 ) <nl> + if ( version % 100 > Parser . version % 100 ) <nl> logger . warn ( String . format ( " Minor version differnce in model : " , ( ( float ) version / 100 ) ) ) ; <nl> - List < Texture > textures = Collections . EMPTY _ LIST ; <nl> - List < Brush > brushes = Collections . EMPTY _ LIST ; <nl> + List < Texture > textures = Collections . emptyList ( ) ; <nl> + List < Brush > brushes = Collections . emptyList ( ) ; <nl> Node < ? > root = null ; <nl> while ( buf . hasRemaining ( ) ) <nl> { <nl> @ @ - 400 , 7 + 400 , 6 @ @ public class B3DModel <nl> chunk ( " NODE " ) ; <nl> animations . push ( HashBasedTable . < Integer , Optional < Node < ? > > , Key > create ( ) ) ; <nl> Triple < Integer , Integer , Float > animData = null ; <nl> - Animation animation = null ; <nl> Pair < Brush , List < Face > > mesh = null ; <nl> List < Pair < Vertex , Float > > bone = null ; <nl> Map < Integer , Key > keys = new HashMap < Integer , Key > ( ) ;

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 index 7d23d4d . . ca7b14f 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 @ @ - 224 , 14 + 224 , 14 @ @ public final class ItemLayerModel implements IRetexturableModel 
 } 
 } 
 / / front 
 - builder . add ( buildQuad ( format , transform , EnumFacing . NORTH , tint , 
 + builder . add ( buildQuad ( format , transform , EnumFacing . NORTH , sprite , tint , 
 0 , 0 , 7 . 5f / 16f , sprite . getMinU ( ) , sprite . getMaxV ( ) , 
 0 , 1 , 7 . 5f / 16f , sprite . getMinU ( ) , sprite . getMinV ( ) , 
 1 , 1 , 7 . 5f / 16f , sprite . getMaxU ( ) , sprite . getMinV ( ) , 
 1 , 0 , 7 . 5f / 16f , sprite . getMaxU ( ) , sprite . getMaxV ( ) 
 ) ) ; 
 / / back 
 - builder . add ( buildQuad ( format , transform , EnumFacing . SOUTH , tint , 
 + builder . add ( buildQuad ( format , transform , EnumFacing . SOUTH , sprite , tint , 
 0 , 0 , 8 . 5f / 16f , sprite . getMinU ( ) , sprite . getMaxV ( ) , 
 1 , 0 , 8 . 5f / 16f , sprite . getMaxU ( ) , sprite . getMaxV ( ) , 
 1 , 1 , 8 . 5f / 16f , sprite . getMaxU ( ) , sprite . getMinV ( ) , 
 @ @ - 329 , 7 + 329 , 7 @ @ public final class ItemLayerModel implements IRetexturableModel 
 throw new IllegalArgumentException ( " can ' t handle z - oriented side " ) ; 
 } 
 return buildQuad ( 
 - format , transform , side . getOpposite ( ) , tint , / / getOpposite is related either to the swapping of V direction , or something else 
 + format , transform , side . getOpposite ( ) , sprite , tint , / / getOpposite is related either to the swapping of V direction , or something else 
 x0 , y0 , z1 , sprite . getInterpolatedU ( u0 ) , sprite . getInterpolatedV ( v0 ) , 
 x1 , y1 , z1 , sprite . getInterpolatedU ( u1 ) , sprite . getInterpolatedV ( v1 ) , 
 x1 , y1 , z2 , sprite . getInterpolatedU ( u1 ) , sprite . getInterpolatedV ( v1 ) , 
 @ @ - 338 , 7 + 338 , 7 @ @ public final class ItemLayerModel implements IRetexturableModel 
 } 
 
 private static final BakedQuad buildQuad ( 
 - VertexFormat format , Optional < TRSRTransformation > transform , EnumFacing side , int tint , 
 + VertexFormat format , Optional < TRSRTransformation > transform , EnumFacing side , TextureAtlasSprite sprite , int tint , 
 float x0 , float y0 , float z0 , float u0 , float v0 , 
 float x1 , float y1 , float z1 , float u1 , float v1 , 
 float x2 , float y2 , float z2 , float u2 , float v2 , 
 @ @ - 347 , 6 + 347 , 7 @ @ public final class ItemLayerModel implements IRetexturableModel 
 UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; 
 builder . setQuadTint ( tint ) ; 
 builder . setQuadOrientation ( side ) ; 
 + builder . setTexture ( sprite ) ; 
 putVertex ( builder , format , transform , side , x0 , y0 , z0 , u0 , v0 ) ; 
 putVertex ( builder , format , transform , side , x1 , y1 , z1 , u1 , v1 ) ; 
 putVertex ( builder , format , transform , side , x2 , y2 , z2 , u2 , v2 ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / ItemTextureQuadConverter . java b / src / main / java / net / minecraftforge / client / model / ItemTextureQuadConverter . java 
 index c946739 . . 14746db 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ItemTextureQuadConverter . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ItemTextureQuadConverter . java 
 @ @ - 195 , 10 + 195 , 10 @ @ public final class ItemTextureQuadConverter 
 y1 = 1f - y2 ; 
 y2 = 1f - tmp ; 
 
 - return putQuad ( format , transform , facing , color , x1 , y1 , x2 , y2 , z , u1 , v1 , u2 , v2 ) ; 
 + return putQuad ( format , transform , facing , sprite , color , x1 , y1 , x2 , y2 , z , u1 , v1 , u2 , v2 ) ; 
 } 
 
 - private static UnpackedBakedQuad putQuad ( VertexFormat format , TRSRTransformation transform , EnumFacing side , int color , 
 + private static UnpackedBakedQuad putQuad ( VertexFormat format , TRSRTransformation transform , EnumFacing side , TextureAtlasSprite sprite , int color , 
 float x1 , float y1 , float x2 , float y2 , float z , 
 float u1 , float v1 , float u2 , float v2 ) 
 { 
 @ @ - 206 , 6 + 206 , 7 @ @ public final class ItemTextureQuadConverter 
 UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; 
 builder . setQuadTint ( - 1 ) ; 
 builder . setQuadOrientation ( side ) ; 
 + builder . setTexture ( sprite ) ; 
 
 if ( side = = EnumFacing . NORTH ) 
 { 
 diff - - git a / src / main / java / net / minecraftforge / client / model / ModelFluid . java b / src / main / java / net / minecraftforge / client / model / ModelFluid . java 
 index be1134a . . 50f3774 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ModelFluid . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ModelFluid . java 
 @ @ - 209 , 6 + 209 , 7 @ @ public final class ModelFluid implements IModelCustomData 
 EnumFacing side = gas ? EnumFacing . DOWN : EnumFacing . UP ; 
 UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; 
 builder . setQuadOrientation ( side ) ; 
 + builder . setTexture ( topSprite ) ; 
 for ( int i = gas ? 3 : 0 ; i ! = ( gas ? - 1 : 4 ) ; i + = ( gas ? - 1 : 1 ) ) 
 { 
 putVertex ( 
 @ @ - 224 , 6 + 225 , 7 @ @ public final class ModelFluid implements IModelCustomData 
 side = side . getOpposite ( ) ; 
 builder = new UnpackedBakedQuad . Builder ( format ) ; 
 builder . setQuadOrientation ( side ) ; 
 + builder . setTexture ( still ) ; 
 for ( int i = gas ? 3 : 0 ; i ! = ( gas ? - 1 : 4 ) ; i + = ( gas ? - 1 : 1 ) ) 
 { 
 putVertex ( 
 @ @ - 245 , 6 + 247 , 7 @ @ public final class ModelFluid implements IModelCustomData 
 { 
 builder = new UnpackedBakedQuad . Builder ( format ) ; 
 builder . setQuadOrientation ( side ) ; 
 + builder . setTexture ( flowing ) ; 
 for ( int j = 0 ; j < 4 ; j + + ) 
 { 
 int l = ( k * 3 ) + ( 1 - 2 * k ) * j ; 
 @ @ - 266 , 6 + 269 , 7 @ @ public final class ModelFluid implements IModelCustomData 
 / / 1 quad for inventory 
 UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; 
 builder . setQuadOrientation ( EnumFacing . UP ) ; 
 + builder . setTexture ( still ) ; 
 for ( int i = 0 ; i < 4 ; i + + ) 
 { 
 putVertex ( 
 diff - - git a / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java b / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java 
 index 34371c5 . . 6e9cf90 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java 
 + + + b / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java 
 @ @ - 723 , 6 + 723 , 7 @ @ public final class B3DLoader implements ICustomModelLoader 
 if ( textures = = null | | textures . isEmpty ( ) ) sprite = this . textures . get ( " missingno " ) ; 
 else if ( textures . get ( 0 ) = = B3DModel . Texture . White ) sprite = ModelLoader . White . instance ; 
 else sprite = this . textures . get ( textures . get ( 0 ) . getPath ( ) ) ; 
 + quadBuilder . setTexture ( sprite ) ; 
 putVertexData ( quadBuilder , f . getV1 ( ) , f . getNormal ( ) , sprite ) ; 
 putVertexData ( quadBuilder , f . getV2 ( ) , f . getNormal ( ) , sprite ) ; 
 putVertexData ( quadBuilder , f . getV3 ( ) , f . getNormal ( ) , sprite ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java b / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java 
 index fc53067 . . 5854413 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java 
 @ @ - 1400 , 6 + 1400 , 7 @ @ public class OBJModel implements IRetexturableModel , IModelCustomData 
 } else sprite = this . textures . get ( f . getMaterialName ( ) ) ; 
 UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; 
 builder . setQuadOrientation ( EnumFacing . getFacingFromVector ( f . getNormal ( ) . x , f . getNormal ( ) . y , f . getNormal ( ) . z ) ) ; 
 + builder . setTexture ( sprite ) ; 
 Normal faceNormal = f . getNormal ( ) ; 
 putVertexData ( builder , f . verts [ 0 ] , faceNormal , TextureCoordinate . getDefaultUVs ( ) [ 0 ] , sprite ) ; 
 putVertexData ( builder , f . verts [ 1 ] , faceNormal , TextureCoordinate . getDefaultUVs ( ) [ 1 ] , sprite ) ;

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / resources / model / IBakedModel . java . patch b / patches / minecraft / net / minecraft / client / resources / model / IBakedModel . java . patch 
 index 94444e8 . . d032f72 100644 
 - - - a / patches / minecraft / net / minecraft / client / resources / model / IBakedModel . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / resources / model / IBakedModel . java . patch 
 @ @ - 1 , 18 + 1 , 6 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / resources / model / IBakedModel . java 
 + + + . . / src - work / minecraft / net / minecraft / client / resources / model / IBakedModel . java 
 - @ @ - 8 , 7 + 8 , 11 @ @ 
 - import net . minecraftforge . fml . relauncher . Side ; 
 - import net . minecraftforge . fml . relauncher . SideOnly ; 
 - 
 - + / * 
 - + * @ deprecated use { @ link net . minecraftforge . client . model . IFlexibleBakedModel } , { @ link net . minecraftforge . client . model . IPerspectiveAwareModel } 
 - + * / 
 - @ SideOnly ( Side . CLIENT ) 
 - + @ Deprecated 
 - public interface IBakedModel 
 - { 
 - List < BakedQuad > getFaceQuads ( EnumFacing p _ 177551 _ 1 _ ) ; 
 - @ @ - 23 , 5 + 27 , 6 @ @ 
 + @ @ - 23 , 5 + 23 , 6 @ @ 
 
 TextureAtlasSprite getTexture ( ) ; 
 
 diff - - git a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 index 2fc9623 . . 2b58dee 100644 
 - - - a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 + + + b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 @ @ - 42 , 6 + 42 , 7 @ @ import net . minecraft . client . resources . I18n ; 
 import net . minecraft . client . resources . model . IBakedModel ; 
 import net . minecraft . client . resources . model . ModelBakery ; 
 import net . minecraft . client . resources . model . ModelManager ; 
 + import net . minecraft . client . resources . model . ModelResourceLocation ; 
 import net . minecraft . client . resources . model . ModelRotation ; 
 import net . minecraft . client . settings . GameSettings ; 
 import net . minecraft . entity . Entity ; 
 @ @ - 90 , 6 + 91 , 7 @ @ import org . lwjgl . opengl . GL11 ; 
 
 
 
 + 
 import com . google . common . collect . Maps ; 
 
 public class ForgeHooksClient 
 @ @ - 510 , 7 + 512 , 7 @ @ public class ForgeHooksClient 
 } 
 * / 
 
 - public static void onModelBake ( ModelManager modelManager , IRegistry modelRegistry , ModelBakery modelBakery ) 
 + public static void onModelBake ( ModelManager modelManager , IRegistry < ModelResourceLocation , IBakedModel > modelRegistry , ModelBakery modelBakery ) 
 { 
 ModelLoader loader = ( ModelLoader ) modelBakery ; 
 MinecraftForge . EVENT _ BUS . post ( new ModelBakeEvent ( modelManager , modelRegistry , loader ) ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / BlockStateLoader . java b / src / main / java / net / minecraftforge / client / model / BlockStateLoader . java 
 index cd3e1d2 . . 007fefc 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / BlockStateLoader . java 
 + + + b / src / main / java / net / minecraftforge / client / model / BlockStateLoader . java 
 @ @ - 43 , 7 + 43 , 6 @ @ public class BlockStateLoader 
 * 
 * @ return Model definition including variants for all known combinations . 
 * / 
 - @ SuppressWarnings ( " rawtypes " ) 
 public static ModelBlockDefinition load ( Reader reader , final Gson vanillaGSON ) 
 { 
 try 
 @ @ - 75 , 7 + 74 , 7 @ @ public class BlockStateLoader 
 variants . add ( new ModelBlockDefinition . Variants ( entry . getKey ( ) , mcVars ) ) ; 
 } 
 
 - return new ModelBlockDefinition ( ( Collection ) variants ) ; / / Damn lists being collections ! 
 + return new ModelBlockDefinition ( variants ) ; 
 
 default : / / Unknown version . . try loading it as normal . 
 return vanillaGSON . fromJson ( reader , ModelBlockDefinition . class ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java b / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java 
 index 59598c2 . . b5ced65 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java 
 @ @ - 534 , 17 + 534 , 29 @ @ public class ForgeBlockStateV1 extends Marker 
 transform . remove ( " firstperson " ) ; 
 transforms . put ( TransformType . FIRST _ PERSON , TRSRTransformation . blockCenterToCorner ( t ) ) ; 
 } 
 + if ( transform . has ( " head " ) ) 
 + { 
 + TRSRTransformation t = context . deserialize ( transform . get ( " head " ) , TRSRTransformation . class ) ; 
 + transform . remove ( " head " ) ; 
 + transforms . put ( TransformType . HEAD , TRSRTransformation . blockCenterToCorner ( t ) ) ; 
 + } 
 if ( transform . has ( " gui " ) ) 
 { 
 TRSRTransformation t = context . deserialize ( transform . get ( " gui " ) , TRSRTransformation . class ) ; 
 transform . remove ( " gui " ) ; 
 transforms . put ( TransformType . GUI , TRSRTransformation . blockCenterToCorner ( t ) ) ; 
 } 
 - if ( transform . has ( " head " ) ) 
 + if ( transform . has ( " ground " ) ) 
 { 
 - TRSRTransformation t = context . deserialize ( transform . get ( " head " ) , TRSRTransformation . class ) ; 
 - transform . remove ( " head " ) ; 
 - transforms . put ( TransformType . HEAD , TRSRTransformation . blockCenterToCorner ( t ) ) ; 
 + TRSRTransformation t = context . deserialize ( transform . get ( " ground " ) , TRSRTransformation . class ) ; 
 + transform . remove ( " ground " ) ; 
 + transforms . put ( TransformType . GROUND , TRSRTransformation . blockCenterToCorner ( t ) ) ; 
 + } 
 + if ( transform . has ( " fixed " ) ) 
 + { 
 + TRSRTransformation t = context . deserialize ( transform . get ( " fixed " ) , TRSRTransformation . class ) ; 
 + transform . remove ( " fixed " ) ; 
 + transforms . put ( TransformType . FIXED , TRSRTransformation . blockCenterToCorner ( t ) ) ; 
 } 
 int k = transform . entrySet ( ) . size ( ) ; 
 if ( transform . has ( " matrix " ) ) k - - ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / IFlexibleBakedModel . java b / src / main / java / net / minecraftforge / client / model / IFlexibleBakedModel . java 
 index e01989a . . 4d921fa 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / IFlexibleBakedModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / IFlexibleBakedModel . java 
 @ @ - 14 , 9 + 14 , 6 @ @ import net . minecraft . util . EnumFacing ; 
 * / 
 public interface IFlexibleBakedModel extends IBakedModel 
 { 
 - / / non - erased versions of the IBakedModel methods 
 - List < BakedQuad > getFaceQuads ( EnumFacing side ) ; 
 - List < BakedQuad > getGeneralQuads ( ) ; 
 / * 
 * Specifies the format which BakedQuads ' getVertexData will have . 
 * / 
 @ @ - 36 , 13 + 33 , 11 @ @ public interface IFlexibleBakedModel extends IBakedModel 
 this . format = format ; 
 } 
 
 - @ SuppressWarnings ( " unchecked " ) 
 public List < BakedQuad > getFaceQuads ( EnumFacing side ) 
 { 
 return parent . getFaceQuads ( side ) ; 
 } 
 
 - @ SuppressWarnings ( " unchecked " ) 
 public List < BakedQuad > getGeneralQuads ( ) 
 { 
 return parent . getGeneralQuads ( ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / IPerspectiveAwareModel . java b / src / main / java / net / minecraftforge / client / model / IPerspectiveAwareModel . java 
 index be4a2ad . . d783267 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / IPerspectiveAwareModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / IPerspectiveAwareModel . java 
 @ @ - 14 , 7 + 14 , 6 @ @ import net . minecraft . util . EnumFacing ; 
 
 import org . apache . commons . lang3 . tuple . Pair ; 
 
 - import com . google . common . collect . ImmutableList ; 
 import com . google . common . collect . ImmutableMap ; 
 
 / * 
 diff - - git a / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java b / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java 
 index 1dbeb77 . . 838090f 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java 
 + + + b / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java 
 @ @ - 38 , 11 + 38 , 10 @ @ public interface IPerspectiveState extends IModelState 
 private static ImmutableMap < TransformType , IModelState > getMap ( ItemCameraTransforms transforms ) 
 { 
 Map < TransformType , IModelState > map = Maps . newHashMap ( ) ; 
 - map . put ( TransformType . NONE , TRSRTransformation . identity ( ) ) ; 
 - map . put ( TransformType . THIRD _ PERSON , transforms . thirdPerson ) ; 
 - map . put ( TransformType . FIRST _ PERSON , transforms . firstPerson ) ; 
 - map . put ( TransformType . GUI , transforms . gui ) ; 
 - map . put ( TransformType . HEAD , transforms . head ) ; 
 + for ( TransformType type : TransformType . values ( ) ) 
 + { 
 + map . put ( type , transforms . func _ 181688 _ b ( type ) ) ; 
 + } 
 return Maps . immutableEnumMap ( map ) ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 index 8930101 . . 396c4e6 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 @ @ - 3 , 7 + 3 , 6 @ @ package net . minecraftforge . client . model ; 
 import java . util . Arrays ; 
 import java . util . Collection ; 
 import java . util . List ; 
 - import java . util . Map ; 
 
 import javax . vecmath . Matrix4f ; 
 import javax . vecmath . Vector4f ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / ModelLoader . java b / src / main / java / net / minecraftforge / client / model / ModelLoader . java 
 index fda3968 . . 4e0fdef 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ModelLoader . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ModelLoader . java 
 @ @ - 38 , 6 + 38 , 7 @ @ import net . minecraft . client . renderer . vertex . DefaultVertexFormats ; 
 import net . minecraft . client . renderer . vertex . VertexFormat ; 
 import net . minecraft . client . resources . IResourceManager ; 
 import net . minecraft . client . resources . model . BuiltInModel ; 
 + import net . minecraft . client . resources . model . IBakedModel ; 
 import net . minecraft . client . resources . model . ModelBakery ; 
 import net . minecraft . client . resources . model . ModelResourceLocation ; 
 import net . minecraft . client . resources . model . ModelRotation ; 
 @ @ - 85 , 7 + 86 , 7 @ @ public class ModelLoader extends ModelBakery 
 } 
 
 @ Override 
 - public IRegistry setupModelRegistry ( ) 
 + public IRegistry < ModelResourceLocation , IBakedModel > setupModelRegistry ( ) 
 { 
 isLoading = true ; 
 loadBlocks ( ) ; 
 @ @ - 717 , 12 + 718 , 12 @ @ public class ModelLoader extends ModelBakery 
 } 
 } 
 
 - public void onPostBakeEvent ( IRegistry modelRegistry ) 
 + public void onPostBakeEvent ( IRegistry < ModelResourceLocation , IBakedModel > modelRegistry ) 
 { 
 - Object missingModel = modelRegistry . getObject ( MODEL _ MISSING ) ; 
 + IBakedModel missingModel = modelRegistry . getObject ( MODEL _ MISSING ) ; 
 for ( ModelResourceLocation missing : missingVariants ) 
 { 
 - Object model = modelRegistry . getObject ( missing ) ; 
 + IBakedModel model = modelRegistry . getObject ( missing ) ; 
 if ( model = = null | | model = = missingModel ) 
 { 
 FMLLog . severe ( " Model definition for location % s not found " , missing ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / b3d / B3DModel . java b / src / main / java / net / minecraftforge / client / model / b3d / B3DModel . java 
 index c9b889a . . 60af648 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / b3d / B3DModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / b3d / B3DModel . java 
 @ @ - 185 , 12 + 185 , 12 @ @ public class B3DModel 
 { 
 chunk ( " BB3D " ) ; 
 int version = buf . getInt ( ) ; 
 - if ( version / 100 > this . version / 100 ) 
 + if ( version / 100 > Parser . version / 100 ) 
 throw new IOException ( " Unsupported major model version : " + ( ( float ) version / 100 ) ) ; 
 - if ( version % 100 > this . version % 100 ) 
 + if ( version % 100 > Parser . version % 100 ) 
 logger . warn ( String . format ( " Minor version differnce in model : " , ( ( float ) version / 100 ) ) ) ; 
 - List < Texture > textures = Collections . EMPTY _ LIST ; 
 - List < Brush > brushes = Collections . EMPTY _ LIST ; 
 + List < Texture > textures = Collections . emptyList ( ) ; 
 + List < Brush > brushes = Collections . emptyList ( ) ; 
 Node < ? > root = null ; 
 while ( buf . hasRemaining ( ) ) 
 { 
 @ @ - 400 , 7 + 400 , 6 @ @ public class B3DModel 
 chunk ( " NODE " ) ; 
 animations . push ( HashBasedTable . < Integer , Optional < Node < ? > > , Key > create ( ) ) ; 
 Triple < Integer , Integer , Float > animData = null ; 
 - Animation animation = null ; 
 Pair < Brush , List < Face > > mesh = null ; 
 List < Pair < Vertex , Float > > bone = null ; 
 Map < Integer , Key > keys = new HashMap < Integer , Key > ( ) ;
