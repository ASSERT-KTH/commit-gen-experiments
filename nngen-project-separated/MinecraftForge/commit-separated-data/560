BLEU SCORE: 0.021476912089159066

TEST MSG: Insert FML packet handler into Vanilla pipelines in case modders send FMLPacket to vanilla . Fixes # 3422
GENERATED MSG: Mute the connection reset by peer exception - it ' s spamilicious for the most part .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java b / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java <nl> index 65c5f7a . . d26fe6b 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java <nl> @ @ - 159 , 6 + 159 , 7 @ @ public class NetworkDispatcher extends SimpleChannelInboundHandler < Packet < ? > > im <nl> serverInitiateHandshake ( ) ; <nl> FMLLog . info ( " Connection received without FML marker , assuming vanilla . " ) ; <nl> this . completeServerSideConnection ( ConnectionType . VANILLA ) ; <nl> + insertIntoChannel ( ) ; <nl> } <nl> } <nl> <nl> @ @ - 184 , 6 + 185 , 7 @ @ public class NetworkDispatcher extends SimpleChannelInboundHandler < Packet < ? > > im <nl> { <nl> if ( this . state ! = null ) { <nl> FMLLog . getLogger ( ) . log ( Level . INFO , " Opening channel which already seems to have a state set . This is a vanilla connection . Handshake handler will stop now " ) ; <nl> + this . manager . channel ( ) . config ( ) . setAutoRead ( true ) ; <nl> return ; <nl> } <nl> FMLLog . getLogger ( ) . log ( Level . TRACE , " Handshake channel activating " ) ;
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java b / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java <nl> index 7820945 . . ea419a2 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java <nl> @ @ - 562 , 7 + 562 , 15 @ @ public class NetworkDispatcher extends SimpleChannelInboundHandler < Packet < ? > > im <nl> / / Stop the epic channel closed spam at close <nl> if ( ! ( cause instanceof ClosedChannelException ) ) <nl> { <nl> - FMLLog . log ( Level . ERROR , cause , " NetworkDispatcher exception " ) ; <nl> + / / Mute the reset by peer exception - it ' s disconnection noise <nl> + if ( cause . getMessage ( ) . contains ( " Connection reset by peer " ) ) <nl> + { <nl> + FMLLog . log ( Level . DEBUG , cause , " Muted NetworkDispatcher exception " ) ; <nl> + } <nl> + else <nl> + { <nl> + FMLLog . log ( Level . ERROR , cause , " NetworkDispatcher exception " ) ; <nl> + } <nl> } <nl> super . exceptionCaught ( ctx , cause ) ; <nl> }

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java b / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java 
 index 65c5f7a . . d26fe6b 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java 
 @ @ - 159 , 6 + 159 , 7 @ @ public class NetworkDispatcher extends SimpleChannelInboundHandler < Packet < ? > > im 
 serverInitiateHandshake ( ) ; 
 FMLLog . info ( " Connection received without FML marker , assuming vanilla . " ) ; 
 this . completeServerSideConnection ( ConnectionType . VANILLA ) ; 
 + insertIntoChannel ( ) ; 
 } 
 } 
 
 @ @ - 184 , 6 + 185 , 7 @ @ public class NetworkDispatcher extends SimpleChannelInboundHandler < Packet < ? > > im 
 { 
 if ( this . state ! = null ) { 
 FMLLog . getLogger ( ) . log ( Level . INFO , " Opening channel which already seems to have a state set . This is a vanilla connection . Handshake handler will stop now " ) ; 
 + this . manager . channel ( ) . config ( ) . setAutoRead ( true ) ; 
 return ; 
 } 
 FMLLog . getLogger ( ) . log ( Level . TRACE , " Handshake channel activating " ) ;

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java b / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java 
 index 7820945 . . ea419a2 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / network / handshake / NetworkDispatcher . java 
 @ @ - 562 , 7 + 562 , 15 @ @ public class NetworkDispatcher extends SimpleChannelInboundHandler < Packet < ? > > im 
 / / Stop the epic channel closed spam at close 
 if ( ! ( cause instanceof ClosedChannelException ) ) 
 { 
 - FMLLog . log ( Level . ERROR , cause , " NetworkDispatcher exception " ) ; 
 + / / Mute the reset by peer exception - it ' s disconnection noise 
 + if ( cause . getMessage ( ) . contains ( " Connection reset by peer " ) ) 
 + { 
 + FMLLog . log ( Level . DEBUG , cause , " Muted NetworkDispatcher exception " ) ; 
 + } 
 + else 
 + { 
 + FMLLog . log ( Level . ERROR , cause , " NetworkDispatcher exception " ) ; 
 + } 
 } 
 super . exceptionCaught ( ctx , cause ) ; 
 }
