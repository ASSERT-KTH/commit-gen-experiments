BLEU SCORE: 0.012123671946965517

TEST MSG: Dissallow color codes in mod names displayed in Mod gui list . And code formatting .
GENERATED MSG: Adds a field to the player for maximum health . Player . dat additions are present , getMaxHealth ( ) needs a magic number for spawning . Closes # 527

TEST DIFF (one line): diff - - git a / fml / src / main / java / net / minecraftforge / fml / client / GuiModList . java b / fml / src / main / java / net / minecraftforge / fml / client / GuiModList . java <nl> index d7de5a4 . . 3539ac8 100644 <nl> - - - a / fml / src / main / java / net / minecraftforge / fml / client / GuiModList . java <nl> + + + b / fml / src / main / java / net / minecraftforge / fml / client / GuiModList . java <nl> @ @ - 54 , 56 + 54 , 42 @ @ import com . google . common . base . Strings ; <nl> * / <nl> public class GuiModList extends GuiScreen <nl> { <nl> - private enum SortType <nl> + private enum SortType implements Comparator < ModContainer > <nl> { <nl> - NORMAL ( 24 ) , A _ TO _ Z ( 25 ) , Z _ TO _ A ( 26 ) ; <nl> + NORMAL ( 24 ) , <nl> + A _ TO _ Z ( 25 ) { @ Override protected int compare ( String name1 , String name2 ) { return name1 . compareTo ( name2 ) ; } } , <nl> + Z _ TO _ A ( 26 ) { @ Override protected int compare ( String name1 , String name2 ) { return name2 . compareTo ( name1 ) ; } } ; <nl> <nl> private int buttonID ; <nl> <nl> private SortType ( int buttonID ) <nl> { <nl> this . buttonID = buttonID ; <nl> - this . comparator = new ModComparator ( this ) ; <nl> } <nl> - <nl> - private final ModComparator comparator ; <nl> <nl> public static SortType getTypeForButton ( GuiButton button ) <nl> { <nl> - for ( SortType t : values ( ) ) { <nl> - if ( t . buttonID = = button . id ) { <nl> + for ( SortType t : values ( ) ) <nl> + { <nl> + if ( t . buttonID = = button . id ) <nl> + { <nl> return t ; <nl> } <nl> } <nl> return null ; <nl> } <nl> - } <nl> - <nl> - private static class ModComparator implements Comparator < ModContainer > <nl> - { <nl> - private SortType type ; <nl> - private ModComparator ( SortType type ) <nl> - { <nl> - this . type = type ; <nl> - } <nl> - <nl> + <nl> + protected int compare ( String name1 , String name2 ) { return 0 ; } <nl> + <nl> @ Override <nl> public int compare ( ModContainer o1 , ModContainer o2 ) <nl> { <nl> String name1 = StringUtils . stripControlCodes ( o1 . getName ( ) ) . toLowerCase ( ) ; <nl> String name2 = StringUtils . stripControlCodes ( o2 . getName ( ) ) . toLowerCase ( ) ; <nl> - switch ( type ) <nl> - { <nl> - case A _ TO _ Z : <nl> - return name1 . compareTo ( name2 ) ; <nl> - case Z _ TO _ A : <nl> - return name2 . compareTo ( name1 ) ; <nl> - default : <nl> - return 0 ; <nl> - } <nl> + return compare ( name1 , name2 ) ; <nl> } <nl> } <nl> - <nl> + <nl> private GuiScreen mainMenu ; <nl> private GuiSlotModList modList ; <nl> private int selected = - 1 ; <nl> @ @ - 114 , 7 + 100 , 7 @ @ public class GuiModList extends GuiScreen <nl> private GuiButton disableModButton ; <nl> private ResourceLocation cachedLogo ; <nl> private Dimension cachedLogoDimensions ; <nl> - <nl> + <nl> private int buttonMargin = 1 ; <nl> private int numButtons = SortType . values ( ) . length ; <nl> <nl> @ @ - 129 , 12 + 115 , 14 @ @ public class GuiModList extends GuiScreen <nl> * / <nl> public GuiModList ( GuiScreen mainMenu ) <nl> { <nl> - this . mainMenu = mainMenu ; <nl> - this . mods = new ArrayList < ModContainer > ( ) ; <nl> + this . mainMenu = mainMenu ; <nl> + this . mods = new ArrayList < ModContainer > ( ) ; <nl> FMLClientHandler . instance ( ) . addSpecialModEntries ( mods ) ; <nl> / / Add child mods to their parent ' s list <nl> - for ( ModContainer mod : Loader . instance ( ) . getModList ( ) ) { <nl> - if ( mod . getMetadata ( ) ! = null & & mod . getMetadata ( ) . parentMod = = null & & ! Strings . isNullOrEmpty ( mod . getMetadata ( ) . parent ) ) { <nl> + for ( ModContainer mod : Loader . instance ( ) . getModList ( ) ) <nl> + { <nl> + if ( mod . getMetadata ( ) ! = null & & mod . getMetadata ( ) . parentMod = = null & & ! Strings . isNullOrEmpty ( mod . getMetadata ( ) . parent ) ) <nl> + { <nl> String parentMod = mod . getMetadata ( ) . parent ; <nl> ModContainer parentContainer = Loader . instance ( ) . getIndexedModList ( ) . get ( parentMod ) ; <nl> if ( parentContainer ! = null ) <nl> @ @ - 144 , 7 + 132 , 7 @ @ public class GuiModList extends GuiScreen <nl> continue ; <nl> } <nl> } <nl> - else if ( mod . getMetadata ( ) ! = null & & mod . getMetadata ( ) . parentMod ! = null ) <nl> + else if ( mod . getMetadata ( ) ! = null & & mod . getMetadata ( ) . parentMod ! = null ) <nl> { <nl> continue ; <nl> } <nl> @ @ - 156 , 20 + 144 , 21 @ @ public class GuiModList extends GuiScreen <nl> @ Override <nl> public void initGui ( ) <nl> { <nl> - for ( ModContainer mod : mods ) { <nl> - listWidth = Math . max ( listWidth , getFontRenderer ( ) . getStringWidth ( mod . getName ( ) ) + 10 ) ; <nl> - listWidth = Math . max ( listWidth , getFontRenderer ( ) . getStringWidth ( mod . getVersion ( ) ) + 10 ) ; <nl> + for ( ModContainer mod : mods ) <nl> + { <nl> + listWidth = Math . max ( listWidth , getFontRenderer ( ) . getStringWidth ( mod . getName ( ) ) + 10 ) ; <nl> + listWidth = Math . max ( listWidth , getFontRenderer ( ) . getStringWidth ( mod . getVersion ( ) ) + 10 ) ; <nl> } <nl> - listWidth = Math . min ( listWidth , 150 ) ; <nl> - this . modList = new GuiSlotModList ( this , mods , listWidth ) ; <nl> + listWidth = Math . min ( listWidth , 150 ) ; <nl> + this . modList = new GuiSlotModList ( this , mods , listWidth ) ; <nl> this . modList . registerScrollButtons ( this . buttonList , 7 , 8 ) ; <nl> - <nl> + <nl> this . buttonList . add ( new GuiButton ( 6 , ( ( modList . right + this . width ) / 2 ) - 100 , this . height - 38 , I18n . format ( " gui . done " ) ) ) ; <nl> configModButton = new GuiButton ( 20 , 10 , this . height - 49 , this . listWidth , 20 , " Config " ) ; <nl> disableModButton = new GuiButton ( 21 , 10 , this . height - 27 , this . listWidth , 20 , " Disable " ) ; <nl> this . buttonList . add ( configModButton ) ; <nl> this . buttonList . add ( disableModButton ) ; <nl> - <nl> + <nl> search = new GuiTextField ( 0 , getFontRenderer ( ) , 12 , modList . bottom + 17 , modList . listWidth - 4 , 14 ) ; <nl> search . setFocused ( true ) ; <nl> search . setCanLoseFocus ( true ) ; <nl> @ @ - 184 , 7 + 173 , 7 @ @ public class GuiModList extends GuiScreen <nl> x + = width + buttonMargin ; <nl> buttonList . add ( new GuiButton ( SortType . Z _ TO _ A . buttonID , x , y , width - buttonMargin , 20 , " Z - A " ) ) ; <nl> } <nl> - <nl> + <nl> @ Override <nl> protected void mouseClicked ( int x , int y , int button ) throws IOException <nl> { <nl> @ @ - 201 , 7 + 190 , 7 @ @ public class GuiModList extends GuiScreen <nl> super . keyTyped ( c , keyCode ) ; <nl> search . textboxKeyTyped ( c , keyCode ) ; <nl> } <nl> - <nl> + <nl> @ Override <nl> public void updateScreen ( ) <nl> { <nl> @ @ - 217 , 7 + 206 , 7 @ @ public class GuiModList extends GuiScreen <nl> if ( ! sorted ) <nl> { <nl> reloadMods ( ) ; <nl> - Collections . sort ( mods , sortType . comparator ) ; <nl> + Collections . sort ( mods , sortType ) ; <nl> selected = modList . selectedIndex = mods . indexOf ( selectedMod ) ; <nl> sorted = true ; <nl> } <nl> @ @ - 263 , 22 + 252 , 22 @ @ public class GuiModList extends GuiScreen <nl> { <nl> switch ( button . id ) <nl> { <nl> - case 6 : <nl> - this . mc . displayGuiScreen ( this . mainMenu ) ; <nl> - return ; <nl> - case 20 : <nl> - try <nl> - { <nl> - IModGuiFactory guiFactory = FMLClientHandler . instance ( ) . getGuiFactoryFor ( selectedMod ) ; <nl> - GuiScreen newScreen = guiFactory . mainConfigGuiClass ( ) . getConstructor ( GuiScreen . class ) . newInstance ( this ) ; <nl> - this . mc . displayGuiScreen ( newScreen ) ; <nl> - } <nl> - catch ( Exception e ) <nl> - { <nl> - FMLLog . log ( Level . ERROR , e , " There was a critical issue trying to build the config GUI for % s " , selectedMod . getModId ( ) ) ; <nl> + case 6 : <nl> + this . mc . displayGuiScreen ( this . mainMenu ) ; <nl> + return ; <nl> + case 20 : <nl> + try <nl> + { <nl> + IModGuiFactory guiFactory = FMLClientHandler . instance ( ) . getGuiFactoryFor ( selectedMod ) ; <nl> + GuiScreen newScreen = guiFactory . mainConfigGuiClass ( ) . getConstructor ( GuiScreen . class ) . newInstance ( this ) ; <nl> + this . mc . displayGuiScreen ( newScreen ) ; <nl> + } <nl> + catch ( Exception e ) <nl> + { <nl> + FMLLog . log ( Level . ERROR , e , " There was a critical issue trying to build the config GUI for % s " , selectedMod . getModId ( ) ) ; <nl> + } <nl> + return ; <nl> } <nl> - return ; <nl> - } <nl> } <nl> } <nl> super . actionPerformed ( button ) ; <nl> @ @ - 296 , 9 + 285 , 11 @ @ public class GuiModList extends GuiScreen <nl> this . modList . drawScreen ( p _ 571 _ 1 _ , p _ 571 _ 2 _ , p _ 571 _ 3 _ ) ; <nl> this . drawCenteredString ( this . fontRendererObj , " Mod List " , this . width / 2 , 16 , 0xFFFFFF ) ; <nl> int offset = this . listWidth + 20 ; <nl> - if ( selectedMod ! = null ) { <nl> + if ( selectedMod ! = null ) <nl> + { <nl> GL11 . glEnable ( GL11 . GL _ BLEND ) ; <nl> - if ( ! selectedMod . getMetadata ( ) . autogenerated ) { <nl> + if ( ! selectedMod . getMetadata ( ) . autogenerated ) <nl> + { <nl> configModButton . visible = true ; <nl> disableModButton . visible = true ; <nl> disableModButton . packedFGColour = 0xFF3377 ; <nl> @ @ - 368 , 7 + 359 , 8 @ @ public class GuiModList extends GuiScreen <nl> <nl> shifty = drawLine ( String . format ( " Version : % s ( % s ) " , selectedMod . getDisplayVersion ( ) , selectedMod . getVersion ( ) ) , offset , shifty ) ; <nl> shifty = drawLine ( String . format ( " Mod ID : ' % s ' Mod State : % s " , selectedMod . getModId ( ) , Loader . instance ( ) . getModState ( selectedMod ) ) , offset , shifty ) ; <nl> - if ( ! selectedMod . getMetadata ( ) . credits . isEmpty ( ) ) { <nl> + if ( ! selectedMod . getMetadata ( ) . credits . isEmpty ( ) ) <nl> + { <nl> shifty = drawLine ( String . format ( " Credits : % s " , selectedMod . getMetadata ( ) . credits ) , offset , shifty ) ; <nl> } <nl> shifty = drawLine ( String . format ( " Authors : % s " , selectedMod . getMetadata ( ) . getAuthorList ( ) ) , offset , shifty ) ; <nl> @ @ - 409 , 7 + 401 , 9 @ @ public class GuiModList extends GuiScreen <nl> configModButton . visible = true ; <nl> configModButton . enabled = true ; <nl> } <nl> - } else { <nl> + } <nl> + else <nl> + { <nl> offset = ( this . listWidth + this . width ) / 2 ; <nl> this . drawCenteredString ( this . fontRendererObj , selectedMod . getName ( ) , offset , 35 , 0xFFFFFF ) ; <nl> this . drawCenteredString ( this . fontRendererObj , String . format ( " Version : % s " , selectedMod . getVersion ( ) ) , offset , 45 , 0xFFFFFF ) ; <nl> @ @ - 434 , 30 + 428 , 25 @ @ public class GuiModList extends GuiScreen <nl> search . drawTextBox ( ) ; <nl> } <nl> <nl> - Minecraft getMinecraftInstance ( ) { <nl> + Minecraft getMinecraftInstance ( ) <nl> + { <nl> return mc ; <nl> } <nl> <nl> - FontRenderer getFontRenderer ( ) { <nl> + FontRenderer getFontRenderer ( ) <nl> + { <nl> return fontRendererObj ; <nl> } <nl> <nl> - / * * <nl> - * @ param var1 <nl> - * / <nl> - public void selectModIndex ( int var1 ) <nl> + public void selectModIndex ( int index ) <nl> { <nl> - this . selected = var1 ; <nl> - if ( var1 > = 0 & & var1 < = mods . size ( ) ) { <nl> - this . selectedMod = mods . get ( selected ) ; <nl> - } else { <nl> - this . selectedMod = null ; <nl> - } <nl> + this . selected = index ; <nl> + this . selectedMod = ( index > = 0 & & index < = mods . size ( ) ) ? mods . get ( selected ) : null ; <nl> cachedLogo = null ; <nl> } <nl> <nl> - public boolean modIndexSelected ( int var1 ) <nl> + public boolean modIndexSelected ( int index ) <nl> { <nl> - return var1 = = selected ; <nl> + return index = = selected ; <nl> } <nl> } <nl> diff - - git a / fml / src / main / java / net / minecraftforge / fml / client / GuiSlotModList . java b / fml / src / main / java / net / minecraftforge / fml / client / GuiSlotModList . java <nl> index 606dfdd . . 2074b9c 100644 <nl> - - - a / fml / src / main / java / net / minecraftforge / fml / client / GuiSlotModList . java <nl> + + + b / fml / src / main / java / net / minecraftforge / fml / client / GuiSlotModList . java <nl> @ @ - 15 , 6 + 15 , 7 @ @ package net . minecraftforge . fml . client ; <nl> import java . util . ArrayList ; <nl> <nl> import net . minecraft . client . renderer . Tessellator ; <nl> + import net . minecraft . util . StringUtils ; <nl> import net . minecraftforge . fml . common . Loader ; <nl> import net . minecraftforge . fml . common . LoaderState . ModState ; <nl> import net . minecraftforge . fml . common . ModContainer ; <nl> @ @ - 64 , 7 + 65 , 7 @ @ public class GuiSlotModList extends GuiScrollingList <nl> { <nl> return ( this . getSize ( ) ) * 35 + 1 ; <nl> } <nl> - <nl> + <nl> ArrayList < ModContainer > getMods ( ) <nl> { <nl> return mods ; <nl> @ @ - 74 , 16 + 75 , 18 @ @ public class GuiSlotModList extends GuiScrollingList <nl> protected void drawSlot ( int listIndex , int var2 , int var3 , int var4 , Tessellator var5 ) <nl> { <nl> ModContainer mc = mods . get ( listIndex ) ; <nl> + String name = StringUtils . stripControlCodes ( mc . getName ( ) ) ; <nl> + String version = StringUtils . stripControlCodes ( mc . getDisplayVersion ( ) ) ; <nl> if ( Loader . instance ( ) . getModState ( mc ) = = ModState . DISABLED ) <nl> { <nl> - this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getName ( ) , listWidth - 10 ) , this . left + 3 , var3 + 2 , 0xFF2222 ) ; <nl> - this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getDisplayVersion ( ) , listWidth - 10 ) , this . left + 3 , var3 + 12 , 0xFF2222 ) ; <nl> + this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( name , listWidth - 10 ) , this . left + 3 , var3 + 2 , 0xFF2222 ) ; <nl> + this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( version , listWidth - 10 ) , this . left + 3 , var3 + 12 , 0xFF2222 ) ; <nl> this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( " DISABLED " , listWidth - 10 ) , this . left + 3 , var3 + 22 , 0xFF2222 ) ; <nl> } <nl> else <nl> { <nl> - this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getName ( ) , listWidth - 10 ) , this . left + 3 , var3 + 2 , 0xFFFFFF ) ; <nl> - this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getDisplayVersion ( ) , listWidth - 10 ) , this . left + 3 , var3 + 12 , 0xCCCCCC ) ; <nl> + this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( name , listWidth - 10 ) , this . left + 3 , var3 + 2 , 0xFFFFFF ) ; <nl> + this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( version , listWidth - 10 ) , this . left + 3 , var3 + 12 , 0xCCCCCC ) ; <nl> this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getMetadata ( ) ! = null ? mc . getMetadata ( ) . getChildModCountString ( ) : " Metadata not found " , listWidth - 10 ) , this . left + 3 , var3 + 22 , 0xCCCCCC ) ; <nl> } <nl> }
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> index 84ab029 . . c25b511 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - . . / src _ base / minecraft / net / minecraft / entity / player / EntityPlayer . java <nl> + + + . . / src _ work / minecraft / net / minecraft / entity / player / EntityPlayer . java <nl> - @ @ - 66 , 8 + 66 , 22 @ @ <nl> + @ @ - 66 , 8 + 66 , 23 @ @ <nl> import net . minecraft . world . World ; <nl> import net . minecraft . world . chunk . IChunkProvider ; <nl> <nl> @ @ - 19 , 11 + 19 , 21 @ @ <nl> public abstract class EntityPlayer extends EntityLiving implements ICommandSender <nl> { <nl> + public static final String PERSISTED _ NBT _ TAG = " PlayerPersisted " ; <nl> + + public int maxHealth = 20 ; <nl> + <nl> / * * Inventory of the player * / <nl> public InventoryPlayer inventory = new InventoryPlayer ( this ) ; <nl> private InventoryEnderChest theInventoryEnderChest = new InventoryEnderChest ( ) ; <nl> - @ @ - 268 , 6 + 282 , 7 @ @ <nl> + @ @ - 181 , 7 + 196 , 7 @ @ <nl> + <nl> + public int getMaxHealth ( ) <nl> + { <nl> + - return 20 ; <nl> + + return maxHealth < = 0 ? 20 : maxHealth ; <nl> + } <nl> + <nl> + protected void entityInit ( ) <nl> + @ @ - 268 , 6 + 283 , 7 @ @ <nl> <nl> if ( itemstack = = this . itemInUse ) <nl> { <nl> @ @ - 31 , 7 + 41 , 7 @ @ <nl> if ( this . itemInUseCount < = 25 & & this . itemInUseCount % 4 = = 0 ) <nl> { <nl> this . updateItemUse ( itemstack , 5 ) ; <nl> - @ @ - 528 , 11 + 543 , 11 @ @ <nl> + @ @ - 528 , 11 + 544 , 11 @ @ <nl> this . cameraYaw = 0 . 0F ; <nl> this . addMountedMovementStat ( this . posX - d0 , this . posY - d1 , this . posZ - d2 ) ; <nl> <nl> @ @ - 45 , 7 + 55 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 661 , 6 + 676 , 9 @ @ <nl> + @ @ - 661 , 6 + 677 , 9 @ @ <nl> this . setPosition ( this . posX , this . posY , this . posZ ) ; <nl> this . motionY = 0 . 10000000149011612D ; <nl> <nl> @ @ - 55 , 7 + 65 , 7 @ @ <nl> if ( this . username . equals ( " Notch " ) ) <nl> { <nl> this . dropPlayerItemWithRandomChoice ( new ItemStack ( Item . appleRed , 1 ) , true ) ; <nl> - @ @ - 669 , 6 + 687 , 20 @ @ <nl> + @ @ - 669 , 6 + 688 , 20 @ @ <nl> if ( ! this . worldObj . getGameRules ( ) . getGameRuleBooleanValue ( " keepInventory " ) ) <nl> { <nl> this . inventory . dropAllItems ( ) ; <nl> @ @ - 76 , 7 + 86 , 7 @ @ <nl> } <nl> <nl> if ( par1DamageSource ! = null ) <nl> - @ @ - 719 , 7 + 751 , 20 @ @ <nl> + @ @ - 719 , 7 + 752 , 20 @ @ <nl> * / <nl> public EntityItem dropOneItem ( boolean par1 ) <nl> { <nl> @ @ - 98 , 7 + 108 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 728 , 7 + 773 , 7 @ @ <nl> + @ @ - 728 , 7 + 774 , 7 @ @ <nl> * / <nl> public EntityItem dropPlayerItem ( ItemStack par1ItemStack ) <nl> { <nl> @ @ - 107 , 7 + 117 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 780 , 15 + 825 , 28 @ @ <nl> + @ @ - 780 , 15 + 826 , 28 @ @ <nl> * / <nl> public void joinEntityItemWithWorld ( EntityItem par1EntityItem ) <nl> { <nl> @ @ - 138 , 7 + 148 , 7 @ @ <nl> <nl> if ( f > 1 . 0F ) <nl> { <nl> - @ @ - 799 , 7 + 857 , 9 @ @ <nl> + @ @ - 799 , 7 + 858 , 9 @ @ <nl> { <nl> float f1 = ( float ) ( i * i + 1 ) ; <nl> <nl> @ @ - 149 , 7 + 159 , 7 @ @ <nl> { <nl> f + = f1 * 0 . 08F ; <nl> } <nl> - @ @ - 830 , 7 + 890 , 8 @ @ <nl> + @ @ - 830 , 7 + 891 , 8 @ @ <nl> f / = 5 . 0F ; <nl> } <nl> <nl> @ @ - 159 , 7 + 169 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 838 , 7 + 899 , 7 @ @ <nl> + @ @ - 838 , 7 + 900 , 7 @ @ <nl> * / <nl> public boolean canHarvestBlock ( Block par1Block ) <nl> { <nl> @ @ - 168 , 7 + 178 , 25 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1096 , 12 + 1157 , 22 @ @ <nl> + @ @ - 857 , 6 + 919 , 9 @ @ <nl> + this . experienceTotal = par1NBTTagCompound . getInteger ( " XpTotal " ) ; <nl> + this . setScore ( par1NBTTagCompound . getInteger ( " Score " ) ) ; <nl> + <nl> + + int tmp = par1NBTTagCompound . getInteger ( " MaxHealth " ) ; <nl> + + maxHealth = ( tmp < = 0 ? 20 : tmp ) ; <nl> + + <nl> + if ( this . sleeping ) <nl> + { <nl> + this . playerLocation = new ChunkCoordinates ( MathHelper . floor _ double ( this . posX ) , MathHelper . floor _ double ( this . posY ) , MathHelper . floor _ double ( this . posZ ) ) ; <nl> + @ @ - 893 , 6 + 958 , 7 @ @ <nl> + par1NBTTagCompound . setInteger ( " XpLevel " , this . experienceLevel ) ; <nl> + par1NBTTagCompound . setInteger ( " XpTotal " , this . experienceTotal ) ; <nl> + par1NBTTagCompound . setInteger ( " Score " , this . getScore ( ) ) ; <nl> + + par1NBTTagCompound . setInteger ( " MaxHealth " , maxHealth ) ; <nl> + <nl> + if ( this . spawnChunk ! = null ) <nl> + { <nl> + @ @ - 1096 , 12 + 1162 , 22 @ @ <nl> { <nl> if ( ! this . isEntityInvulnerable ( ) ) <nl> { <nl> @ @ - 192 , 7 + 220 , 7 @ @ <nl> par2 = this . applyPotionDamageCalculations ( par1DamageSource , par2 ) ; <nl> this . addExhaustion ( par1DamageSource . getHungerDamage ( ) ) ; <nl> int j = this . getHealth ( ) ; <nl> - @ @ - 1144 , 6 + 1215 , 10 @ @ <nl> + @ @ - 1144 , 6 + 1220 , 10 @ @ <nl> <nl> public boolean interactWith ( Entity par1Entity ) <nl> { <nl> @ @ - 203 , 7 + 231 , 7 @ @ <nl> if ( par1Entity . interact ( this ) ) <nl> { <nl> return true ; <nl> - @ @ - 1187 , 7 + 1262 , 9 @ @ <nl> + @ @ - 1187 , 7 + 1267 , 9 @ @ <nl> * / <nl> public void destroyCurrentEquippedItem ( ) <nl> { <nl> @ @ - 213 , 7 + 241 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1204 , 6 + 1281 , 15 @ @ <nl> + @ @ - 1204 , 6 + 1286 , 15 @ @ <nl> * / <nl> public void attackTargetEntityWithCurrentItem ( Entity par1Entity ) <nl> { <nl> @ @ - 229 , 7 + 257 , 7 @ @ <nl> if ( par1Entity . canAttackWithItem ( ) ) <nl> { <nl> if ( ! par1Entity . func _ 85031 _ j ( this ) ) <nl> - @ @ - 1378 , 6 + 1464 , 12 @ @ <nl> + @ @ - 1378 , 6 + 1469 , 12 @ @ <nl> * / <nl> public EnumStatus sleepInBedAt ( int par1 , int par2 , int par3 ) <nl> { <nl> @ @ - 242 , 7 + 270 , 7 @ @ <nl> if ( ! this . worldObj . isRemote ) <nl> { <nl> if ( this . isPlayerSleeping ( ) | | ! this . isEntityAlive ( ) ) <nl> - @ @ - 1417 , 6 + 1509 , 11 @ @ <nl> + @ @ - 1417 , 6 + 1514 , 11 @ @ <nl> { <nl> int l = this . worldObj . getBlockMetadata ( par1 , par2 , par3 ) ; <nl> int i1 = BlockBed . getDirection ( l ) ; <nl> @ @ - 254 , 7 + 282 , 7 @ @ <nl> float f = 0 . 5F ; <nl> float f1 = 0 . 5F ; <nl> <nl> - @ @ - 1487 , 10 + 1584 , 12 @ @ <nl> + @ @ - 1487 , 10 + 1589 , 12 @ @ <nl> ChunkCoordinates chunkcoordinates = this . playerLocation ; <nl> ChunkCoordinates chunkcoordinates1 = this . playerLocation ; <nl> <nl> @ @ - 271 , 7 + 299 , 7 @ @ <nl> <nl> if ( chunkcoordinates1 = = null ) <nl> { <nl> - @ @ - 1527 , 7 + 1626 , 9 @ @ <nl> + @ @ - 1527 , 7 + 1631 , 9 @ @ <nl> * / <nl> private boolean isInBed ( ) <nl> { <nl> @ @ - 282 , 7 + 310 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1542 , 9 + 1643 , 12 @ @ <nl> + @ @ - 1542 , 9 + 1648 , 12 @ @ <nl> ichunkprovider . loadChunk ( par1ChunkCoordinates . posX - 3 > > 4 , par1ChunkCoordinates . posZ + 3 > > 4 ) ; <nl> ichunkprovider . loadChunk ( par1ChunkCoordinates . posX + 3 > > 4 , par1ChunkCoordinates . posZ + 3 > > 4 ) ; <nl> <nl> @ @ - 298 , 7 + 326 , 7 @ @ <nl> return chunkcoordinates1 ; <nl> } <nl> else <nl> - @ @ - 1566 , 10 + 1670 , 13 @ @ <nl> + @ @ - 1566 , 10 + 1675 , 13 @ @ <nl> { <nl> if ( this . playerLocation ! = null ) <nl> { <nl> @ @ - 316 , 7 + 344 , 7 @ @ <nl> { <nl> case 0 : <nl> return 90 . 0F ; <nl> - @ @ - 1835 , 6 + 1942 , 10 @ @ <nl> + @ @ - 1835 , 6 + 1947 , 10 @ @ <nl> <nl> super . fall ( par1 ) ; <nl> } <nl> @ @ - 327 , 7 + 355 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1876 , 7 + 1987 , 7 @ @ <nl> + @ @ - 1876 , 7 + 1992 , 7 @ @ <nl> { <nl> if ( par1ItemStack . getItem ( ) . requiresMultipleRenderPasses ( ) ) <nl> { <nl> @ @ - 336 , 7 + 364 , 7 @ @ <nl> } <nl> <nl> if ( this . itemInUse ! = null & & par1ItemStack . itemID = = Item . bow . itemID ) <nl> - @ @ - 1898 , 6 + 2009 , 7 @ @ <nl> + @ @ - 1898 , 6 + 2014 , 7 @ @ <nl> return Item . bow . func _ 94599 _ c ( 0 ) ; <nl> } <nl> } <nl> @ @ - 344 , 7 + 372 , 7 @ @ <nl> } <nl> <nl> return icon ; <nl> - @ @ - 2137 , 6 + 2249 , 14 @ @ <nl> + @ @ - 2137 , 6 + 2254 , 14 @ @ <nl> } <nl> <nl> this . theInventoryEnderChest = par1EntityPlayer . theInventoryEnderChest ; <nl> @ @ - 359 , 7 + 387 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 2208 , 7 + 2328 , 14 @ @ <nl> + @ @ - 2208 , 7 + 2333 , 14 @ @ <nl> * / <nl> public void setCurrentItemOrArmor ( int par1 , ItemStack par2ItemStack ) <nl> {

TEST DIFF:
diff - - git a / fml / src / main / java / net / minecraftforge / fml / client / GuiModList . java b / fml / src / main / java / net / minecraftforge / fml / client / GuiModList . java 
 index d7de5a4 . . 3539ac8 100644 
 - - - a / fml / src / main / java / net / minecraftforge / fml / client / GuiModList . java 
 + + + b / fml / src / main / java / net / minecraftforge / fml / client / GuiModList . java 
 @ @ - 54 , 56 + 54 , 42 @ @ import com . google . common . base . Strings ; 
 * / 
 public class GuiModList extends GuiScreen 
 { 
 - private enum SortType 
 + private enum SortType implements Comparator < ModContainer > 
 { 
 - NORMAL ( 24 ) , A _ TO _ Z ( 25 ) , Z _ TO _ A ( 26 ) ; 
 + NORMAL ( 24 ) , 
 + A _ TO _ Z ( 25 ) { @ Override protected int compare ( String name1 , String name2 ) { return name1 . compareTo ( name2 ) ; } } , 
 + Z _ TO _ A ( 26 ) { @ Override protected int compare ( String name1 , String name2 ) { return name2 . compareTo ( name1 ) ; } } ; 
 
 private int buttonID ; 
 
 private SortType ( int buttonID ) 
 { 
 this . buttonID = buttonID ; 
 - this . comparator = new ModComparator ( this ) ; 
 } 
 - 
 - private final ModComparator comparator ; 
 
 public static SortType getTypeForButton ( GuiButton button ) 
 { 
 - for ( SortType t : values ( ) ) { 
 - if ( t . buttonID = = button . id ) { 
 + for ( SortType t : values ( ) ) 
 + { 
 + if ( t . buttonID = = button . id ) 
 + { 
 return t ; 
 } 
 } 
 return null ; 
 } 
 - } 
 - 
 - private static class ModComparator implements Comparator < ModContainer > 
 - { 
 - private SortType type ; 
 - private ModComparator ( SortType type ) 
 - { 
 - this . type = type ; 
 - } 
 - 
 + 
 + protected int compare ( String name1 , String name2 ) { return 0 ; } 
 + 
 @ Override 
 public int compare ( ModContainer o1 , ModContainer o2 ) 
 { 
 String name1 = StringUtils . stripControlCodes ( o1 . getName ( ) ) . toLowerCase ( ) ; 
 String name2 = StringUtils . stripControlCodes ( o2 . getName ( ) ) . toLowerCase ( ) ; 
 - switch ( type ) 
 - { 
 - case A _ TO _ Z : 
 - return name1 . compareTo ( name2 ) ; 
 - case Z _ TO _ A : 
 - return name2 . compareTo ( name1 ) ; 
 - default : 
 - return 0 ; 
 - } 
 + return compare ( name1 , name2 ) ; 
 } 
 } 
 - 
 + 
 private GuiScreen mainMenu ; 
 private GuiSlotModList modList ; 
 private int selected = - 1 ; 
 @ @ - 114 , 7 + 100 , 7 @ @ public class GuiModList extends GuiScreen 
 private GuiButton disableModButton ; 
 private ResourceLocation cachedLogo ; 
 private Dimension cachedLogoDimensions ; 
 - 
 + 
 private int buttonMargin = 1 ; 
 private int numButtons = SortType . values ( ) . length ; 
 
 @ @ - 129 , 12 + 115 , 14 @ @ public class GuiModList extends GuiScreen 
 * / 
 public GuiModList ( GuiScreen mainMenu ) 
 { 
 - this . mainMenu = mainMenu ; 
 - this . mods = new ArrayList < ModContainer > ( ) ; 
 + this . mainMenu = mainMenu ; 
 + this . mods = new ArrayList < ModContainer > ( ) ; 
 FMLClientHandler . instance ( ) . addSpecialModEntries ( mods ) ; 
 / / Add child mods to their parent ' s list 
 - for ( ModContainer mod : Loader . instance ( ) . getModList ( ) ) { 
 - if ( mod . getMetadata ( ) ! = null & & mod . getMetadata ( ) . parentMod = = null & & ! Strings . isNullOrEmpty ( mod . getMetadata ( ) . parent ) ) { 
 + for ( ModContainer mod : Loader . instance ( ) . getModList ( ) ) 
 + { 
 + if ( mod . getMetadata ( ) ! = null & & mod . getMetadata ( ) . parentMod = = null & & ! Strings . isNullOrEmpty ( mod . getMetadata ( ) . parent ) ) 
 + { 
 String parentMod = mod . getMetadata ( ) . parent ; 
 ModContainer parentContainer = Loader . instance ( ) . getIndexedModList ( ) . get ( parentMod ) ; 
 if ( parentContainer ! = null ) 
 @ @ - 144 , 7 + 132 , 7 @ @ public class GuiModList extends GuiScreen 
 continue ; 
 } 
 } 
 - else if ( mod . getMetadata ( ) ! = null & & mod . getMetadata ( ) . parentMod ! = null ) 
 + else if ( mod . getMetadata ( ) ! = null & & mod . getMetadata ( ) . parentMod ! = null ) 
 { 
 continue ; 
 } 
 @ @ - 156 , 20 + 144 , 21 @ @ public class GuiModList extends GuiScreen 
 @ Override 
 public void initGui ( ) 
 { 
 - for ( ModContainer mod : mods ) { 
 - listWidth = Math . max ( listWidth , getFontRenderer ( ) . getStringWidth ( mod . getName ( ) ) + 10 ) ; 
 - listWidth = Math . max ( listWidth , getFontRenderer ( ) . getStringWidth ( mod . getVersion ( ) ) + 10 ) ; 
 + for ( ModContainer mod : mods ) 
 + { 
 + listWidth = Math . max ( listWidth , getFontRenderer ( ) . getStringWidth ( mod . getName ( ) ) + 10 ) ; 
 + listWidth = Math . max ( listWidth , getFontRenderer ( ) . getStringWidth ( mod . getVersion ( ) ) + 10 ) ; 
 } 
 - listWidth = Math . min ( listWidth , 150 ) ; 
 - this . modList = new GuiSlotModList ( this , mods , listWidth ) ; 
 + listWidth = Math . min ( listWidth , 150 ) ; 
 + this . modList = new GuiSlotModList ( this , mods , listWidth ) ; 
 this . modList . registerScrollButtons ( this . buttonList , 7 , 8 ) ; 
 - 
 + 
 this . buttonList . add ( new GuiButton ( 6 , ( ( modList . right + this . width ) / 2 ) - 100 , this . height - 38 , I18n . format ( " gui . done " ) ) ) ; 
 configModButton = new GuiButton ( 20 , 10 , this . height - 49 , this . listWidth , 20 , " Config " ) ; 
 disableModButton = new GuiButton ( 21 , 10 , this . height - 27 , this . listWidth , 20 , " Disable " ) ; 
 this . buttonList . add ( configModButton ) ; 
 this . buttonList . add ( disableModButton ) ; 
 - 
 + 
 search = new GuiTextField ( 0 , getFontRenderer ( ) , 12 , modList . bottom + 17 , modList . listWidth - 4 , 14 ) ; 
 search . setFocused ( true ) ; 
 search . setCanLoseFocus ( true ) ; 
 @ @ - 184 , 7 + 173 , 7 @ @ public class GuiModList extends GuiScreen 
 x + = width + buttonMargin ; 
 buttonList . add ( new GuiButton ( SortType . Z _ TO _ A . buttonID , x , y , width - buttonMargin , 20 , " Z - A " ) ) ; 
 } 
 - 
 + 
 @ Override 
 protected void mouseClicked ( int x , int y , int button ) throws IOException 
 { 
 @ @ - 201 , 7 + 190 , 7 @ @ public class GuiModList extends GuiScreen 
 super . keyTyped ( c , keyCode ) ; 
 search . textboxKeyTyped ( c , keyCode ) ; 
 } 
 - 
 + 
 @ Override 
 public void updateScreen ( ) 
 { 
 @ @ - 217 , 7 + 206 , 7 @ @ public class GuiModList extends GuiScreen 
 if ( ! sorted ) 
 { 
 reloadMods ( ) ; 
 - Collections . sort ( mods , sortType . comparator ) ; 
 + Collections . sort ( mods , sortType ) ; 
 selected = modList . selectedIndex = mods . indexOf ( selectedMod ) ; 
 sorted = true ; 
 } 
 @ @ - 263 , 22 + 252 , 22 @ @ public class GuiModList extends GuiScreen 
 { 
 switch ( button . id ) 
 { 
 - case 6 : 
 - this . mc . displayGuiScreen ( this . mainMenu ) ; 
 - return ; 
 - case 20 : 
 - try 
 - { 
 - IModGuiFactory guiFactory = FMLClientHandler . instance ( ) . getGuiFactoryFor ( selectedMod ) ; 
 - GuiScreen newScreen = guiFactory . mainConfigGuiClass ( ) . getConstructor ( GuiScreen . class ) . newInstance ( this ) ; 
 - this . mc . displayGuiScreen ( newScreen ) ; 
 - } 
 - catch ( Exception e ) 
 - { 
 - FMLLog . log ( Level . ERROR , e , " There was a critical issue trying to build the config GUI for % s " , selectedMod . getModId ( ) ) ; 
 + case 6 : 
 + this . mc . displayGuiScreen ( this . mainMenu ) ; 
 + return ; 
 + case 20 : 
 + try 
 + { 
 + IModGuiFactory guiFactory = FMLClientHandler . instance ( ) . getGuiFactoryFor ( selectedMod ) ; 
 + GuiScreen newScreen = guiFactory . mainConfigGuiClass ( ) . getConstructor ( GuiScreen . class ) . newInstance ( this ) ; 
 + this . mc . displayGuiScreen ( newScreen ) ; 
 + } 
 + catch ( Exception e ) 
 + { 
 + FMLLog . log ( Level . ERROR , e , " There was a critical issue trying to build the config GUI for % s " , selectedMod . getModId ( ) ) ; 
 + } 
 + return ; 
 } 
 - return ; 
 - } 
 } 
 } 
 super . actionPerformed ( button ) ; 
 @ @ - 296 , 9 + 285 , 11 @ @ public class GuiModList extends GuiScreen 
 this . modList . drawScreen ( p _ 571 _ 1 _ , p _ 571 _ 2 _ , p _ 571 _ 3 _ ) ; 
 this . drawCenteredString ( this . fontRendererObj , " Mod List " , this . width / 2 , 16 , 0xFFFFFF ) ; 
 int offset = this . listWidth + 20 ; 
 - if ( selectedMod ! = null ) { 
 + if ( selectedMod ! = null ) 
 + { 
 GL11 . glEnable ( GL11 . GL _ BLEND ) ; 
 - if ( ! selectedMod . getMetadata ( ) . autogenerated ) { 
 + if ( ! selectedMod . getMetadata ( ) . autogenerated ) 
 + { 
 configModButton . visible = true ; 
 disableModButton . visible = true ; 
 disableModButton . packedFGColour = 0xFF3377 ; 
 @ @ - 368 , 7 + 359 , 8 @ @ public class GuiModList extends GuiScreen 
 
 shifty = drawLine ( String . format ( " Version : % s ( % s ) " , selectedMod . getDisplayVersion ( ) , selectedMod . getVersion ( ) ) , offset , shifty ) ; 
 shifty = drawLine ( String . format ( " Mod ID : ' % s ' Mod State : % s " , selectedMod . getModId ( ) , Loader . instance ( ) . getModState ( selectedMod ) ) , offset , shifty ) ; 
 - if ( ! selectedMod . getMetadata ( ) . credits . isEmpty ( ) ) { 
 + if ( ! selectedMod . getMetadata ( ) . credits . isEmpty ( ) ) 
 + { 
 shifty = drawLine ( String . format ( " Credits : % s " , selectedMod . getMetadata ( ) . credits ) , offset , shifty ) ; 
 } 
 shifty = drawLine ( String . format ( " Authors : % s " , selectedMod . getMetadata ( ) . getAuthorList ( ) ) , offset , shifty ) ; 
 @ @ - 409 , 7 + 401 , 9 @ @ public class GuiModList extends GuiScreen 
 configModButton . visible = true ; 
 configModButton . enabled = true ; 
 } 
 - } else { 
 + } 
 + else 
 + { 
 offset = ( this . listWidth + this . width ) / 2 ; 
 this . drawCenteredString ( this . fontRendererObj , selectedMod . getName ( ) , offset , 35 , 0xFFFFFF ) ; 
 this . drawCenteredString ( this . fontRendererObj , String . format ( " Version : % s " , selectedMod . getVersion ( ) ) , offset , 45 , 0xFFFFFF ) ; 
 @ @ - 434 , 30 + 428 , 25 @ @ public class GuiModList extends GuiScreen 
 search . drawTextBox ( ) ; 
 } 
 
 - Minecraft getMinecraftInstance ( ) { 
 + Minecraft getMinecraftInstance ( ) 
 + { 
 return mc ; 
 } 
 
 - FontRenderer getFontRenderer ( ) { 
 + FontRenderer getFontRenderer ( ) 
 + { 
 return fontRendererObj ; 
 } 
 
 - / * * 
 - * @ param var1 
 - * / 
 - public void selectModIndex ( int var1 ) 
 + public void selectModIndex ( int index ) 
 { 
 - this . selected = var1 ; 
 - if ( var1 > = 0 & & var1 < = mods . size ( ) ) { 
 - this . selectedMod = mods . get ( selected ) ; 
 - } else { 
 - this . selectedMod = null ; 
 - } 
 + this . selected = index ; 
 + this . selectedMod = ( index > = 0 & & index < = mods . size ( ) ) ? mods . get ( selected ) : null ; 
 cachedLogo = null ; 
 } 
 
 - public boolean modIndexSelected ( int var1 ) 
 + public boolean modIndexSelected ( int index ) 
 { 
 - return var1 = = selected ; 
 + return index = = selected ; 
 } 
 } 
 diff - - git a / fml / src / main / java / net / minecraftforge / fml / client / GuiSlotModList . java b / fml / src / main / java / net / minecraftforge / fml / client / GuiSlotModList . java 
 index 606dfdd . . 2074b9c 100644 
 - - - a / fml / src / main / java / net / minecraftforge / fml / client / GuiSlotModList . java 
 + + + b / fml / src / main / java / net / minecraftforge / fml / client / GuiSlotModList . java 
 @ @ - 15 , 6 + 15 , 7 @ @ package net . minecraftforge . fml . client ; 
 import java . util . ArrayList ; 
 
 import net . minecraft . client . renderer . Tessellator ; 
 + import net . minecraft . util . StringUtils ; 
 import net . minecraftforge . fml . common . Loader ; 
 import net . minecraftforge . fml . common . LoaderState . ModState ; 
 import net . minecraftforge . fml . common . ModContainer ; 
 @ @ - 64 , 7 + 65 , 7 @ @ public class GuiSlotModList extends GuiScrollingList 
 { 
 return ( this . getSize ( ) ) * 35 + 1 ; 
 } 
 - 
 + 
 ArrayList < ModContainer > getMods ( ) 
 { 
 return mods ; 
 @ @ - 74 , 16 + 75 , 18 @ @ public class GuiSlotModList extends GuiScrollingList 
 protected void drawSlot ( int listIndex , int var2 , int var3 , int var4 , Tessellator var5 ) 
 { 
 ModContainer mc = mods . get ( listIndex ) ; 
 + String name = StringUtils . stripControlCodes ( mc . getName ( ) ) ; 
 + String version = StringUtils . stripControlCodes ( mc . getDisplayVersion ( ) ) ; 
 if ( Loader . instance ( ) . getModState ( mc ) = = ModState . DISABLED ) 
 { 
 - this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getName ( ) , listWidth - 10 ) , this . left + 3 , var3 + 2 , 0xFF2222 ) ; 
 - this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getDisplayVersion ( ) , listWidth - 10 ) , this . left + 3 , var3 + 12 , 0xFF2222 ) ; 
 + this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( name , listWidth - 10 ) , this . left + 3 , var3 + 2 , 0xFF2222 ) ; 
 + this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( version , listWidth - 10 ) , this . left + 3 , var3 + 12 , 0xFF2222 ) ; 
 this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( " DISABLED " , listWidth - 10 ) , this . left + 3 , var3 + 22 , 0xFF2222 ) ; 
 } 
 else 
 { 
 - this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getName ( ) , listWidth - 10 ) , this . left + 3 , var3 + 2 , 0xFFFFFF ) ; 
 - this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getDisplayVersion ( ) , listWidth - 10 ) , this . left + 3 , var3 + 12 , 0xCCCCCC ) ; 
 + this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( name , listWidth - 10 ) , this . left + 3 , var3 + 2 , 0xFFFFFF ) ; 
 + this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( version , listWidth - 10 ) , this . left + 3 , var3 + 12 , 0xCCCCCC ) ; 
 this . parent . getFontRenderer ( ) . drawString ( this . parent . getFontRenderer ( ) . trimStringToWidth ( mc . getMetadata ( ) ! = null ? mc . getMetadata ( ) . getChildModCountString ( ) : " Metadata not found " , listWidth - 10 ) , this . left + 3 , var3 + 22 , 0xCCCCCC ) ; 
 } 
 }

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 index 84ab029 . . c25b511 100644 
 - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - . . / src _ base / minecraft / net / minecraft / entity / player / EntityPlayer . java 
 + + + . . / src _ work / minecraft / net / minecraft / entity / player / EntityPlayer . java 
 - @ @ - 66 , 8 + 66 , 22 @ @ 
 + @ @ - 66 , 8 + 66 , 23 @ @ 
 import net . minecraft . world . World ; 
 import net . minecraft . world . chunk . IChunkProvider ; 
 
 @ @ - 19 , 11 + 19 , 21 @ @ 
 public abstract class EntityPlayer extends EntityLiving implements ICommandSender 
 { 
 + public static final String PERSISTED _ NBT _ TAG = " PlayerPersisted " ; 
 + + public int maxHealth = 20 ; 
 + 
 / * * Inventory of the player * / 
 public InventoryPlayer inventory = new InventoryPlayer ( this ) ; 
 private InventoryEnderChest theInventoryEnderChest = new InventoryEnderChest ( ) ; 
 - @ @ - 268 , 6 + 282 , 7 @ @ 
 + @ @ - 181 , 7 + 196 , 7 @ @ 
 + 
 + public int getMaxHealth ( ) 
 + { 
 + - return 20 ; 
 + + return maxHealth < = 0 ? 20 : maxHealth ; 
 + } 
 + 
 + protected void entityInit ( ) 
 + @ @ - 268 , 6 + 283 , 7 @ @ 
 
 if ( itemstack = = this . itemInUse ) 
 { 
 @ @ - 31 , 7 + 41 , 7 @ @ 
 if ( this . itemInUseCount < = 25 & & this . itemInUseCount % 4 = = 0 ) 
 { 
 this . updateItemUse ( itemstack , 5 ) ; 
 - @ @ - 528 , 11 + 543 , 11 @ @ 
 + @ @ - 528 , 11 + 544 , 11 @ @ 
 this . cameraYaw = 0 . 0F ; 
 this . addMountedMovementStat ( this . posX - d0 , this . posY - d1 , this . posZ - d2 ) ; 
 
 @ @ - 45 , 7 + 55 , 7 @ @ 
 } 
 } 
 
 - @ @ - 661 , 6 + 676 , 9 @ @ 
 + @ @ - 661 , 6 + 677 , 9 @ @ 
 this . setPosition ( this . posX , this . posY , this . posZ ) ; 
 this . motionY = 0 . 10000000149011612D ; 
 
 @ @ - 55 , 7 + 65 , 7 @ @ 
 if ( this . username . equals ( " Notch " ) ) 
 { 
 this . dropPlayerItemWithRandomChoice ( new ItemStack ( Item . appleRed , 1 ) , true ) ; 
 - @ @ - 669 , 6 + 687 , 20 @ @ 
 + @ @ - 669 , 6 + 688 , 20 @ @ 
 if ( ! this . worldObj . getGameRules ( ) . getGameRuleBooleanValue ( " keepInventory " ) ) 
 { 
 this . inventory . dropAllItems ( ) ; 
 @ @ - 76 , 7 + 86 , 7 @ @ 
 } 
 
 if ( par1DamageSource ! = null ) 
 - @ @ - 719 , 7 + 751 , 20 @ @ 
 + @ @ - 719 , 7 + 752 , 20 @ @ 
 * / 
 public EntityItem dropOneItem ( boolean par1 ) 
 { 
 @ @ - 98 , 7 + 108 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 728 , 7 + 773 , 7 @ @ 
 + @ @ - 728 , 7 + 774 , 7 @ @ 
 * / 
 public EntityItem dropPlayerItem ( ItemStack par1ItemStack ) 
 { 
 @ @ - 107 , 7 + 117 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 780 , 15 + 825 , 28 @ @ 
 + @ @ - 780 , 15 + 826 , 28 @ @ 
 * / 
 public void joinEntityItemWithWorld ( EntityItem par1EntityItem ) 
 { 
 @ @ - 138 , 7 + 148 , 7 @ @ 
 
 if ( f > 1 . 0F ) 
 { 
 - @ @ - 799 , 7 + 857 , 9 @ @ 
 + @ @ - 799 , 7 + 858 , 9 @ @ 
 { 
 float f1 = ( float ) ( i * i + 1 ) ; 
 
 @ @ - 149 , 7 + 159 , 7 @ @ 
 { 
 f + = f1 * 0 . 08F ; 
 } 
 - @ @ - 830 , 7 + 890 , 8 @ @ 
 + @ @ - 830 , 7 + 891 , 8 @ @ 
 f / = 5 . 0F ; 
 } 
 
 @ @ - 159 , 7 + 169 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 838 , 7 + 899 , 7 @ @ 
 + @ @ - 838 , 7 + 900 , 7 @ @ 
 * / 
 public boolean canHarvestBlock ( Block par1Block ) 
 { 
 @ @ - 168 , 7 + 178 , 25 @ @ 
 } 
 
 / * * 
 - @ @ - 1096 , 12 + 1157 , 22 @ @ 
 + @ @ - 857 , 6 + 919 , 9 @ @ 
 + this . experienceTotal = par1NBTTagCompound . getInteger ( " XpTotal " ) ; 
 + this . setScore ( par1NBTTagCompound . getInteger ( " Score " ) ) ; 
 + 
 + + int tmp = par1NBTTagCompound . getInteger ( " MaxHealth " ) ; 
 + + maxHealth = ( tmp < = 0 ? 20 : tmp ) ; 
 + + 
 + if ( this . sleeping ) 
 + { 
 + this . playerLocation = new ChunkCoordinates ( MathHelper . floor _ double ( this . posX ) , MathHelper . floor _ double ( this . posY ) , MathHelper . floor _ double ( this . posZ ) ) ; 
 + @ @ - 893 , 6 + 958 , 7 @ @ 
 + par1NBTTagCompound . setInteger ( " XpLevel " , this . experienceLevel ) ; 
 + par1NBTTagCompound . setInteger ( " XpTotal " , this . experienceTotal ) ; 
 + par1NBTTagCompound . setInteger ( " Score " , this . getScore ( ) ) ; 
 + + par1NBTTagCompound . setInteger ( " MaxHealth " , maxHealth ) ; 
 + 
 + if ( this . spawnChunk ! = null ) 
 + { 
 + @ @ - 1096 , 12 + 1162 , 22 @ @ 
 { 
 if ( ! this . isEntityInvulnerable ( ) ) 
 { 
 @ @ - 192 , 7 + 220 , 7 @ @ 
 par2 = this . applyPotionDamageCalculations ( par1DamageSource , par2 ) ; 
 this . addExhaustion ( par1DamageSource . getHungerDamage ( ) ) ; 
 int j = this . getHealth ( ) ; 
 - @ @ - 1144 , 6 + 1215 , 10 @ @ 
 + @ @ - 1144 , 6 + 1220 , 10 @ @ 
 
 public boolean interactWith ( Entity par1Entity ) 
 { 
 @ @ - 203 , 7 + 231 , 7 @ @ 
 if ( par1Entity . interact ( this ) ) 
 { 
 return true ; 
 - @ @ - 1187 , 7 + 1262 , 9 @ @ 
 + @ @ - 1187 , 7 + 1267 , 9 @ @ 
 * / 
 public void destroyCurrentEquippedItem ( ) 
 { 
 @ @ - 213 , 7 + 241 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 1204 , 6 + 1281 , 15 @ @ 
 + @ @ - 1204 , 6 + 1286 , 15 @ @ 
 * / 
 public void attackTargetEntityWithCurrentItem ( Entity par1Entity ) 
 { 
 @ @ - 229 , 7 + 257 , 7 @ @ 
 if ( par1Entity . canAttackWithItem ( ) ) 
 { 
 if ( ! par1Entity . func _ 85031 _ j ( this ) ) 
 - @ @ - 1378 , 6 + 1464 , 12 @ @ 
 + @ @ - 1378 , 6 + 1469 , 12 @ @ 
 * / 
 public EnumStatus sleepInBedAt ( int par1 , int par2 , int par3 ) 
 { 
 @ @ - 242 , 7 + 270 , 7 @ @ 
 if ( ! this . worldObj . isRemote ) 
 { 
 if ( this . isPlayerSleeping ( ) | | ! this . isEntityAlive ( ) ) 
 - @ @ - 1417 , 6 + 1509 , 11 @ @ 
 + @ @ - 1417 , 6 + 1514 , 11 @ @ 
 { 
 int l = this . worldObj . getBlockMetadata ( par1 , par2 , par3 ) ; 
 int i1 = BlockBed . getDirection ( l ) ; 
 @ @ - 254 , 7 + 282 , 7 @ @ 
 float f = 0 . 5F ; 
 float f1 = 0 . 5F ; 
 
 - @ @ - 1487 , 10 + 1584 , 12 @ @ 
 + @ @ - 1487 , 10 + 1589 , 12 @ @ 
 ChunkCoordinates chunkcoordinates = this . playerLocation ; 
 ChunkCoordinates chunkcoordinates1 = this . playerLocation ; 
 
 @ @ - 271 , 7 + 299 , 7 @ @ 
 
 if ( chunkcoordinates1 = = null ) 
 { 
 - @ @ - 1527 , 7 + 1626 , 9 @ @ 
 + @ @ - 1527 , 7 + 1631 , 9 @ @ 
 * / 
 private boolean isInBed ( ) 
 { 
 @ @ - 282 , 7 + 310 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 1542 , 9 + 1643 , 12 @ @ 
 + @ @ - 1542 , 9 + 1648 , 12 @ @ 
 ichunkprovider . loadChunk ( par1ChunkCoordinates . posX - 3 > > 4 , par1ChunkCoordinates . posZ + 3 > > 4 ) ; 
 ichunkprovider . loadChunk ( par1ChunkCoordinates . posX + 3 > > 4 , par1ChunkCoordinates . posZ + 3 > > 4 ) ; 
 
 @ @ - 298 , 7 + 326 , 7 @ @ 
 return chunkcoordinates1 ; 
 } 
 else 
 - @ @ - 1566 , 10 + 1670 , 13 @ @ 
 + @ @ - 1566 , 10 + 1675 , 13 @ @ 
 { 
 if ( this . playerLocation ! = null ) 
 { 
 @ @ - 316 , 7 + 344 , 7 @ @ 
 { 
 case 0 : 
 return 90 . 0F ; 
 - @ @ - 1835 , 6 + 1942 , 10 @ @ 
 + @ @ - 1835 , 6 + 1947 , 10 @ @ 
 
 super . fall ( par1 ) ; 
 } 
 @ @ - 327 , 7 + 355 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 1876 , 7 + 1987 , 7 @ @ 
 + @ @ - 1876 , 7 + 1992 , 7 @ @ 
 { 
 if ( par1ItemStack . getItem ( ) . requiresMultipleRenderPasses ( ) ) 
 { 
 @ @ - 336 , 7 + 364 , 7 @ @ 
 } 
 
 if ( this . itemInUse ! = null & & par1ItemStack . itemID = = Item . bow . itemID ) 
 - @ @ - 1898 , 6 + 2009 , 7 @ @ 
 + @ @ - 1898 , 6 + 2014 , 7 @ @ 
 return Item . bow . func _ 94599 _ c ( 0 ) ; 
 } 
 } 
 @ @ - 344 , 7 + 372 , 7 @ @ 
 } 
 
 return icon ; 
 - @ @ - 2137 , 6 + 2249 , 14 @ @ 
 + @ @ - 2137 , 6 + 2254 , 14 @ @ 
 } 
 
 this . theInventoryEnderChest = par1EntityPlayer . theInventoryEnderChest ; 
 @ @ - 359 , 7 + 387 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 2208 , 7 + 2328 , 14 @ @ 
 + @ @ - 2208 , 7 + 2333 , 14 @ @ 
 * / 
 public void setCurrentItemOrArmor ( int par1 , ItemStack par2ItemStack ) 
 {
