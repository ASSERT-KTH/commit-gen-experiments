BLEU SCORE: 0.02133165846478451

TEST MSG: Fix # 3576 Unnecessary warning about totem being renamed
GENERATED MSG: Try and fix registry NPE when substitution is active .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / common / ForgeModContainer . java b / src / main / java / net / minecraftforge / common / ForgeModContainer . java <nl> index 2e0abea . . 7481c2f 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / ForgeModContainer . java <nl> + + + b / src / main / java / net / minecraftforge / common / ForgeModContainer . java <nl> @ @ - 24 , 6 + 24 , 7 @ @ <nl> <nl> package net . minecraftforge . common ; <nl> <nl> + import net . minecraft . util . ResourceLocation ; <nl> import net . minecraft . world . biome . Biome ; <nl> import static net . minecraftforge . common . config . Configuration . CATEGORY _ CLIENT ; <nl> import static net . minecraftforge . common . config . Configuration . CATEGORY _ GENERAL ; <nl> @ @ - 86 , 6 + 87 , 7 @ @ import net . minecraftforge . fml . common . WorldAccessContainer ; <nl> import net . minecraftforge . fml . common . discovery . ASMDataTable . ASMData ; <nl> import net . minecraftforge . fml . common . event . FMLConstructionEvent ; <nl> import net . minecraftforge . fml . common . event . FMLLoadCompleteEvent ; <nl> + import net . minecraftforge . fml . common . event . FMLMissingMappingsEvent ; <nl> import net . minecraftforge . fml . common . event . FMLModIdMappingEvent ; <nl> import net . minecraftforge . fml . common . event . FMLPostInitializationEvent ; <nl> import net . minecraftforge . fml . common . event . FMLPreInitializationEvent ; <nl> @ @ - 350 , 6 + 352 , 19 @ @ public class ForgeModContainer extends DummyModContainer implements WorldAccessC <nl> } <nl> } <nl> <nl> + @ Subscribe <nl> + public void missingMapping ( FMLMissingMappingsEvent event ) <nl> + { <nl> + for ( FMLMissingMappingsEvent . MissingMapping entry : event . getAll ( ) ) <nl> + { <nl> + if ( entry . name . equals ( " minecraft : totem " ) ) / / This item changed from 1 . 11 - > 1 . 11 . 2 <nl> + { <nl> + ResourceLocation newTotem = new ResourceLocation ( " minecraft : totem _ of _ undying " ) ; <nl> + entry . remap ( ForgeRegistries . ITEMS . getValue ( newTotem ) ) ; <nl> + } <nl> + } <nl> + } <nl> + <nl> @ SubscribeEvent <nl> public void playerLogin ( PlayerEvent . PlayerLoggedInEvent event ) <nl> { <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> index fccf3fa . . 6e8f0cd 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> @ @ - 761 , 7 + 761 , 7 @ @ public class FMLControlledNamespacedRegistry < I extends IForgeRegistryEntry < I > > e <nl> if ( currId = = - 1 ) <nl> { <nl> FMLLog . info ( " Found a missing id from the world % s " , itemName ) ; <nl> - missingIds . put ( entry . getKey ( ) , newId ) ; <nl> + missingIds . put ( itemName , newId ) ; <nl> continue ; / / no block / item - > nothing to add <nl> } <nl> else if ( currId ! = newId ) <nl> @ @ - 772 , 7 + 772 , 7 @ @ public class FMLControlledNamespacedRegistry < I extends IForgeRegistryEntry < I > > e <nl> I obj = currentRegistry . getRaw ( itemName ) ; <nl> Preconditions . checkState ( obj ! = null , " objectKey has an ID but no object . Reflection / ASM hackery ? Registry bug ? " ) ; <nl> I sub = obj ; <nl> - / / If we have an object in the originals set , we use that for initial adding - substitute activation will readd the substitute if neceessary later <nl> + / / If we have an object in the originals set , we use that for initial adding - substitute activation will re - add the substitute if necessary later <nl> if ( currentRegistry . substitutionOriginals . containsKey ( itemName ) ) <nl> { <nl> obj = currentRegistry . substitutionOriginals . get ( itemName ) ;
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> index 0cdd305 . . 607ac29 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> @ @ - 718 , 7 + 718 , 7 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul <nl> blockedIds . add ( id ) ; <nl> } <nl> <nl> - public void noitifyCallbacks ( ) <nl> + public void notifyCallbacks ( ) <nl> { <nl> if ( addCallback = = null ) <nl> return ; <nl> @ @ - 728 , 4 + 728 , 15 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul <nl> addCallback . onAdd ( i , this . underlyingIntegerMap . get ( i ) ) ; <nl> } <nl> } <nl> + <nl> + @ Override <nl> + public ResourceLocation getNameForObject ( I p _ 177774 _ 1 _ ) <nl> + { <nl> + ResourceLocation rl = super . getNameForObject ( p _ 177774 _ 1 _ ) ; <nl> + if ( rl = = null ) <nl> + { <nl> + rl = activeSubstitutions . inverse ( ) . get ( p _ 177774 _ 1 _ ) ; <nl> + } <nl> + return rl ; <nl> + } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java b / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java <nl> index 723bb55 . . 6071989 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java <nl> @ @ - 23 , 7 + 23 , 6 @ @ import org . apache . logging . log4j . Level ; <nl> <nl> import net . minecraft . block . Block ; <nl> import net . minecraft . block . BlockAir ; <nl> - import net . minecraft . init . Blocks ; <nl> import net . minecraft . item . Item ; <nl> import net . minecraft . potion . Potion ; <nl> import net . minecraft . util . ResourceLocation ; <nl> @ @ - 33 , 7 + 32 , 6 @ @ import net . minecraftforge . fml . common . FMLLog ; <nl> import net . minecraftforge . fml . common . Loader ; <nl> import net . minecraftforge . fml . common . StartupQuery ; <nl> import net . minecraftforge . fml . common . ZipperUtil ; <nl> - import net . minecraftforge . fml . common . EnhancedRuntimeException . WrappedPrintStream ; <nl> import net . minecraftforge . fml . common . event . FMLMissingMappingsEvent ; <nl> <nl> / * * <nl> @ @ - 257 , 7 + 255 , 7 @ @ public class PersistentRegistryManager <nl> / / This happens when connecting to a server that doesn ' t have this registry . <nl> / / Such as a 1 . 8 . 0 Forge server with 1 . 8 . 8 + Forge . <nl> / / We must however , re - fire the callbacks as some internal data may be corrupted { potions } <nl> - toRegistry . noitifyCallbacks ( ) ; <nl> + toRegistry . notifyCallbacks ( ) ; <nl> } <nl> else <nl> {

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / common / ForgeModContainer . java b / src / main / java / net / minecraftforge / common / ForgeModContainer . java 
 index 2e0abea . . 7481c2f 100644 
 - - - a / src / main / java / net / minecraftforge / common / ForgeModContainer . java 
 + + + b / src / main / java / net / minecraftforge / common / ForgeModContainer . java 
 @ @ - 24 , 6 + 24 , 7 @ @ 
 
 package net . minecraftforge . common ; 
 
 + import net . minecraft . util . ResourceLocation ; 
 import net . minecraft . world . biome . Biome ; 
 import static net . minecraftforge . common . config . Configuration . CATEGORY _ CLIENT ; 
 import static net . minecraftforge . common . config . Configuration . CATEGORY _ GENERAL ; 
 @ @ - 86 , 6 + 87 , 7 @ @ import net . minecraftforge . fml . common . WorldAccessContainer ; 
 import net . minecraftforge . fml . common . discovery . ASMDataTable . ASMData ; 
 import net . minecraftforge . fml . common . event . FMLConstructionEvent ; 
 import net . minecraftforge . fml . common . event . FMLLoadCompleteEvent ; 
 + import net . minecraftforge . fml . common . event . FMLMissingMappingsEvent ; 
 import net . minecraftforge . fml . common . event . FMLModIdMappingEvent ; 
 import net . minecraftforge . fml . common . event . FMLPostInitializationEvent ; 
 import net . minecraftforge . fml . common . event . FMLPreInitializationEvent ; 
 @ @ - 350 , 6 + 352 , 19 @ @ public class ForgeModContainer extends DummyModContainer implements WorldAccessC 
 } 
 } 
 
 + @ Subscribe 
 + public void missingMapping ( FMLMissingMappingsEvent event ) 
 + { 
 + for ( FMLMissingMappingsEvent . MissingMapping entry : event . getAll ( ) ) 
 + { 
 + if ( entry . name . equals ( " minecraft : totem " ) ) / / This item changed from 1 . 11 - > 1 . 11 . 2 
 + { 
 + ResourceLocation newTotem = new ResourceLocation ( " minecraft : totem _ of _ undying " ) ; 
 + entry . remap ( ForgeRegistries . ITEMS . getValue ( newTotem ) ) ; 
 + } 
 + } 
 + } 
 + 
 @ SubscribeEvent 
 public void playerLogin ( PlayerEvent . PlayerLoggedInEvent event ) 
 { 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 index fccf3fa . . 6e8f0cd 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 @ @ - 761 , 7 + 761 , 7 @ @ public class FMLControlledNamespacedRegistry < I extends IForgeRegistryEntry < I > > e 
 if ( currId = = - 1 ) 
 { 
 FMLLog . info ( " Found a missing id from the world % s " , itemName ) ; 
 - missingIds . put ( entry . getKey ( ) , newId ) ; 
 + missingIds . put ( itemName , newId ) ; 
 continue ; / / no block / item - > nothing to add 
 } 
 else if ( currId ! = newId ) 
 @ @ - 772 , 7 + 772 , 7 @ @ public class FMLControlledNamespacedRegistry < I extends IForgeRegistryEntry < I > > e 
 I obj = currentRegistry . getRaw ( itemName ) ; 
 Preconditions . checkState ( obj ! = null , " objectKey has an ID but no object . Reflection / ASM hackery ? Registry bug ? " ) ; 
 I sub = obj ; 
 - / / If we have an object in the originals set , we use that for initial adding - substitute activation will readd the substitute if neceessary later 
 + / / If we have an object in the originals set , we use that for initial adding - substitute activation will re - add the substitute if necessary later 
 if ( currentRegistry . substitutionOriginals . containsKey ( itemName ) ) 
 { 
 obj = currentRegistry . substitutionOriginals . get ( itemName ) ;

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 index 0cdd305 . . 607ac29 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 @ @ - 718 , 7 + 718 , 7 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul 
 blockedIds . add ( id ) ; 
 } 
 
 - public void noitifyCallbacks ( ) 
 + public void notifyCallbacks ( ) 
 { 
 if ( addCallback = = null ) 
 return ; 
 @ @ - 728 , 4 + 728 , 15 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul 
 addCallback . onAdd ( i , this . underlyingIntegerMap . get ( i ) ) ; 
 } 
 } 
 + 
 + @ Override 
 + public ResourceLocation getNameForObject ( I p _ 177774 _ 1 _ ) 
 + { 
 + ResourceLocation rl = super . getNameForObject ( p _ 177774 _ 1 _ ) ; 
 + if ( rl = = null ) 
 + { 
 + rl = activeSubstitutions . inverse ( ) . get ( p _ 177774 _ 1 _ ) ; 
 + } 
 + return rl ; 
 + } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java b / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java 
 index 723bb55 . . 6071989 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java 
 @ @ - 23 , 7 + 23 , 6 @ @ import org . apache . logging . log4j . Level ; 
 
 import net . minecraft . block . Block ; 
 import net . minecraft . block . BlockAir ; 
 - import net . minecraft . init . Blocks ; 
 import net . minecraft . item . Item ; 
 import net . minecraft . potion . Potion ; 
 import net . minecraft . util . ResourceLocation ; 
 @ @ - 33 , 7 + 32 , 6 @ @ import net . minecraftforge . fml . common . FMLLog ; 
 import net . minecraftforge . fml . common . Loader ; 
 import net . minecraftforge . fml . common . StartupQuery ; 
 import net . minecraftforge . fml . common . ZipperUtil ; 
 - import net . minecraftforge . fml . common . EnhancedRuntimeException . WrappedPrintStream ; 
 import net . minecraftforge . fml . common . event . FMLMissingMappingsEvent ; 
 
 / * * 
 @ @ - 257 , 7 + 255 , 7 @ @ public class PersistentRegistryManager 
 / / This happens when connecting to a server that doesn ' t have this registry . 
 / / Such as a 1 . 8 . 0 Forge server with 1 . 8 . 8 + Forge . 
 / / We must however , re - fire the callbacks as some internal data may be corrupted { potions } 
 - toRegistry . noitifyCallbacks ( ) ; 
 + toRegistry . notifyCallbacks ( ) ; 
 } 
 else 
 {
