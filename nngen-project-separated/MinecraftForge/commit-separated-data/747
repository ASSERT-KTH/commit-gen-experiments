BLEU SCORE: 0.03089055318156698

TEST MSG: Improved UV offset hackery - should fix most visible custom model seams .
GENERATED MSG: Fixed quads that don ' t need diffuse lighting getting it anyway .

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch <nl> index 8e298ad . . f27905b 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch <nl> @ @ - 70 , 6 + 70 , 17 @ @ <nl> this . func _ 178404 _ a ( p _ 188015 _ 1 _ , j , p _ 188015 _ 2 _ , vector3f , i , p _ 188015 _ 6 _ , p _ 188015 _ 4 _ ) ; <nl> } <nl> <nl> + @ @ - 139 , 8 + 155 , 8 @ @ <nl> + p _ 178404 _ 1 _ [ i + 1 ] = Float . floatToRawIntBits ( p _ 178404 _ 4 _ . y ) ; <nl> + p _ 178404 _ 1 _ [ i + 2 ] = Float . floatToRawIntBits ( p _ 178404 _ 4 _ . z ) ; <nl> + p _ 178404 _ 1 _ [ i + 3 ] = p _ 178404 _ 5 _ ; <nl> + - p _ 178404 _ 1 _ [ i + 4 ] = Float . floatToRawIntBits ( p _ 178404 _ 6 _ . func _ 94214 _ a ( ( double ) p _ 178404 _ 7 _ . func _ 178348 _ a ( p _ 178404 _ 3 _ ) ) ) ; <nl> + - p _ 178404 _ 1 _ [ i + 4 + 1 ] = Float . floatToRawIntBits ( p _ 178404 _ 6 _ . func _ 94207 _ b ( ( double ) p _ 178404 _ 7 _ . func _ 178346 _ b ( p _ 178404 _ 3 _ ) ) ) ; <nl> + + p _ 178404 _ 1 _ [ i + 4 ] = Float . floatToRawIntBits ( p _ 178404 _ 6 _ . func _ 94214 _ a ( ( double ) p _ 178404 _ 7 _ . func _ 178348 _ a ( p _ 178404 _ 3 _ ) * . 999 + p _ 178404 _ 7 _ . func _ 178348 _ a ( ( p _ 178404 _ 3 _ + 2 ) % 4 ) * . 001 ) ) ; <nl> + + p _ 178404 _ 1 _ [ i + 4 + 1 ] = Float . floatToRawIntBits ( p _ 178404 _ 6 _ . func _ 94207 _ b ( ( double ) p _ 178404 _ 7 _ . func _ 178346 _ b ( p _ 178404 _ 3 _ ) * . 999 + p _ 178404 _ 7 _ . func _ 178346 _ b ( ( p _ 178404 _ 3 _ + 2 ) % 4 ) * . 001 ) ) ; <nl> + } <nl> + <nl> + private void func _ 178407 _ a ( Vector3f p _ 178407 _ 1 _ , BlockPartRotation p _ 178407 _ 2 _ ) <nl> @ @ - 189 , 14 + 205 , 19 @ @ <nl> <nl> public int func _ 188011 _ a ( Vector3f p _ 188011 _ 1 _ , EnumFacing p _ 188011 _ 2 _ , int p _ 188011 _ 3 _ , ModelRotation p _ 188011 _ 4 _ ) <nl> diff - - git a / patches / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java . patch b / patches / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java . patch <nl> index 5ef4028 . . b7a16e4 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java . patch <nl> @ @ - 1 , 6 + 1 , 23 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java <nl> - @ @ - 398 , 4 + 398 , 30 @ @ <nl> + @ @ - 50 , 12 + 50 , 10 @ @ <nl> + this . field _ 110975 _ c = p _ 110971 _ 3 _ ; <nl> + this . field _ 110974 _ d = p _ 110971 _ 4 _ ; <nl> + this . field _ 130222 _ e = p _ 110971 _ 5 _ ; <nl> + - float f = ( float ) ( 0 . 009999999776482582D / ( double ) p _ 110971 _ 1 _ ) ; <nl> + - float f1 = ( float ) ( 0 . 009999999776482582D / ( double ) p _ 110971 _ 2 _ ) ; <nl> + - this . field _ 110979 _ l = ( float ) p _ 110971 _ 3 _ / ( float ) ( ( double ) p _ 110971 _ 1 _ ) + f ; <nl> + - this . field _ 110980 _ m = ( float ) ( p _ 110971 _ 3 _ + this . field _ 130223 _ c ) / ( float ) ( ( double ) p _ 110971 _ 1 _ ) - f ; <nl> + - this . field _ 110977 _ n = ( float ) p _ 110971 _ 4 _ / ( float ) p _ 110971 _ 2 _ + f1 ; <nl> + - this . field _ 110978 _ o = ( float ) ( p _ 110971 _ 4 _ + this . field _ 130224 _ d ) / ( float ) p _ 110971 _ 2 _ - f1 ; <nl> + + this . field _ 110979 _ l = ( float ) p _ 110971 _ 3 _ / ( float ) p _ 110971 _ 1 _ ; <nl> + + this . field _ 110980 _ m = ( float ) ( p _ 110971 _ 3 _ + this . field _ 130223 _ c ) / ( float ) p _ 110971 _ 1 _ ; <nl> + + this . field _ 110977 _ n = ( float ) p _ 110971 _ 4 _ / ( float ) p _ 110971 _ 2 _ ; <nl> + + this . field _ 110978 _ o = ( float ) ( p _ 110971 _ 4 _ + this . field _ 130224 _ d ) / ( float ) p _ 110971 _ 2 _ ; <nl> + } <nl> + <nl> + public void func _ 94217 _ a ( TextureAtlasSprite p _ 94217 _ 1 _ ) <nl> + @ @ - 398 , 4 + 396 , 30 @ @ <nl> { <nl> return " TextureAtlasSprite { name = \ ' " + this . field _ 110984 _ i + ' \ ' ' + " , frameCount = " + this . field _ 110976 _ a . size ( ) + " , rotated = " + this . field _ 130222 _ e + " , x = " + this . field _ 110975 _ c + " , y = " + this . field _ 110974 _ d + " , height = " + this . field _ 130224 _ d + " , width = " + this . field _ 130223 _ c + " , u0 = " + this . field _ 110979 _ l + " , u1 = " + this . field _ 110980 _ m + " , v0 = " + this . field _ 110977 _ n + " , v1 = " + this . field _ 110978 _ o + ' } ' ; <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java b / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java <nl> index 4b8095d . . 02f92be 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java <nl> @ @ - 722 , 6 + 722 , 7 @ @ public enum B3DLoader implements ICustomModelLoader <nl> for ( Face f : faces ) <nl> { <nl> UnpackedBakedQuad . Builder quadBuilder = new UnpackedBakedQuad . Builder ( format ) ; <nl> + quadBuilder . setContractUVs ( true ) ; <nl> quadBuilder . setQuadOrientation ( EnumFacing . getFacingFromVector ( f . getNormal ( ) . x , f . getNormal ( ) . y , f . getNormal ( ) . z ) ) ; <nl> List < Texture > textures = null ; <nl> if ( f . getBrush ( ) ! = null ) textures = f . getBrush ( ) . getTextures ( ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java b / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java <nl> index 3efab8d . . 4aba809 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java <nl> @ @ - 1403 , 6 + 1403 , 7 @ @ public class OBJModel implements IRetexturableModel , IModelCustomData <nl> sprite = ModelLoader . White . INSTANCE ; <nl> } else sprite = this . textures . get ( f . getMaterialName ( ) ) ; <nl> UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; <nl> + builder . setContractUVs ( true ) ; <nl> builder . setQuadOrientation ( EnumFacing . getFacingFromVector ( f . getNormal ( ) . x , f . getNormal ( ) . y , f . getNormal ( ) . z ) ) ; <nl> builder . setTexture ( sprite ) ; <nl> Normal faceNormal = f . getNormal ( ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java b / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java <nl> index ac888e1 . . fae9806 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java <nl> @ @ - 3 , 6 + 3 , 7 @ @ package net . minecraftforge . client . model . pipeline ; <nl> import net . minecraft . client . renderer . block . model . BakedQuad ; <nl> import net . minecraft . client . renderer . texture . TextureAtlasSprite ; <nl> import net . minecraft . client . renderer . vertex . VertexFormat ; <nl> + import net . minecraft . client . renderer . vertex . VertexFormatElement ; <nl> import net . minecraft . util . EnumFacing ; <nl> <nl> / / advantages : non - fixed - length vertex format , no overhead of packing and unpacking attributes to transform the model <nl> @ @ - 75 , 6 + 76 , 7 @ @ public class UnpackedBakedQuad extends BakedQuad <nl> private int vertices = 0 ; <nl> private int elements = 0 ; <nl> private boolean full = false ; <nl> + private boolean contractUVs = false ; <nl> <nl> public Builder ( VertexFormat format ) <nl> { <nl> @ @ - 87 , 6 + 89 , 10 @ @ public class UnpackedBakedQuad extends BakedQuad <nl> return format ; <nl> } <nl> <nl> + public void setContractUVs ( boolean value ) <nl> + { <nl> + this . contractUVs = value ; <nl> + } <nl> public void setQuadTint ( int tint ) <nl> { <nl> this . tint = tint ; <nl> @ @ - 132 , 12 + 138 , 68 @ @ public class UnpackedBakedQuad extends BakedQuad <nl> } <nl> } <nl> <nl> + private final float eps = 1f / 0x100 ; <nl> + <nl> public UnpackedBakedQuad build ( ) <nl> { <nl> if ( ! full ) <nl> { <nl> throw new IllegalStateException ( " not enough data " ) ; <nl> } <nl> + if ( contractUVs ) <nl> + { <nl> + float tX = texture . getOriginX ( ) / texture . getMinU ( ) ; <nl> + float tY = texture . getOriginY ( ) / texture . getMinV ( ) ; <nl> + float tS = tX > tY ? tX : tY ; <nl> + float ep = 1f / ( tS * 0x100 ) ; <nl> + int uve = 0 ; <nl> + while ( uve < format . getElementCount ( ) ) <nl> + { <nl> + VertexFormatElement e = format . getElement ( uve ) ; <nl> + if ( e . getUsage ( ) = = VertexFormatElement . EnumUsage . UV & & e . getIndex ( ) = = 0 ) <nl> + { <nl> + break ; <nl> + } <nl> + uve + + ; <nl> + } <nl> + if ( uve = = format . getElementCount ( ) ) <nl> + { <nl> + throw new IllegalStateException ( " Can ' t contract UVs : format doesn ' t contain UVs " ) ; <nl> + } <nl> + float [ ] uvc = new float [ 4 ] ; <nl> + for ( int v = 0 ; v < 4 ; v + + ) <nl> + { <nl> + for ( int i = 0 ; i < 4 ; i + + ) <nl> + { <nl> + uvc [ i ] + = unpackedData [ v ] [ uve ] [ i ] / 4 ; <nl> + } <nl> + } <nl> + for ( int v = 0 ; v < 4 ; v + + ) <nl> + { <nl> + for ( int i = 0 ; i < 4 ; i + + ) <nl> + { <nl> + float uo = unpackedData [ v ] [ uve ] [ i ] ; <nl> + float un = uo * ( 1 - eps ) + uvc [ i ] * eps ; <nl> + float ud = uo - un ; <nl> + float aud = ud ; <nl> + if ( aud < 0 ) aud = - aud ; <nl> + if ( aud < ep ) / / not moving a fraction of a pixel <nl> + { <nl> + float udc = uo - uvc [ i ] ; <nl> + if ( udc < 0 ) udc = - udc ; <nl> + if ( udc < 2 * ep ) / / center is closer than 2 fractions of a pixel , don ' t move too close <nl> + { <nl> + un = ( uo + uvc [ i ] ) / 2 ; <nl> + } <nl> + else / / move at least by a fraction <nl> + { <nl> + un = uo + ( ud < 0 ? ep : - ep ) ; <nl> + } <nl> + } <nl> + unpackedData [ v ] [ uve ] [ i ] = un ; <nl> + } <nl> + } <nl> + } <nl> return new UnpackedBakedQuad ( unpackedData , tint , orientation , texture , applyDiffuseLighting , format ) ; <nl> } <nl> }
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java . patch <nl> index 8a1013f . . 2348edf 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java <nl> - @ @ - 6 , 15 + 6 , 25 @ @ <nl> + @ @ - 6 , 15 + 6 , 26 @ @ <nl> import net . minecraftforge . fml . relauncher . SideOnly ; <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> @ @ - 18 , 21 + 18 , 23 @ @ <nl> + @ Deprecated <nl> public BakedQuad ( int [ ] p _ i46574 _ 1 _ , int p _ i46574 _ 2 _ , EnumFacing p _ i46574 _ 3 _ , TextureAtlasSprite p _ i46574 _ 4 _ ) <nl> { <nl> - + this ( p _ i46574 _ 1 _ , p _ i46574 _ 2 _ , p _ i46574 _ 3 _ , p _ i46574 _ 4 _ , net . minecraft . client . renderer . vertex . DefaultVertexFormats . field _ 176599 _ b ) ; <nl> + + this ( p _ i46574 _ 1 _ , p _ i46574 _ 2 _ , p _ i46574 _ 3 _ , p _ i46574 _ 4 _ , true , net . minecraft . client . renderer . vertex . DefaultVertexFormats . field _ 176599 _ b ) ; <nl> + } <nl> + <nl> - + public BakedQuad ( int [ ] p _ i46574 _ 1 _ , int p _ i46574 _ 2 _ , EnumFacing p _ i46574 _ 3 _ , TextureAtlasSprite p _ i46574 _ 4 _ , net . minecraft . client . renderer . vertex . VertexFormat format ) <nl> + + public BakedQuad ( int [ ] p _ i46574 _ 1 _ , int p _ i46574 _ 2 _ , EnumFacing p _ i46574 _ 3 _ , TextureAtlasSprite p _ i46574 _ 4 _ , boolean applyDiffuseLighting , net . minecraft . client . renderer . vertex . VertexFormat format ) <nl> + { <nl> + this . format = format ; <nl> + + this . applyDiffuseLighting = applyDiffuseLighting ; <nl> this . field _ 178215 _ a = p _ i46574 _ 1 _ ; <nl> this . field _ 178213 _ b = p _ i46574 _ 2 _ ; <nl> this . field _ 178214 _ c = p _ i46574 _ 3 _ ; <nl> - @ @ - 45 , 4 + 55 , 17 @ @ <nl> + @ @ - 45 , 4 + 56 , 23 @ @ <nl> { <nl> return this . field _ 178214 _ c ; <nl> } <nl> + <nl> - + private final net . minecraft . client . renderer . vertex . VertexFormat format ; <nl> + + protected final net . minecraft . client . renderer . vertex . VertexFormat format ; <nl> + + protected final boolean applyDiffuseLighting ; <nl> + <nl> + @ Override <nl> + public void pipe ( net . minecraftforge . client . model . pipeline . IVertexConsumer consumer ) <nl> @ @ - 44 , 4 + 46 , 9 @ @ <nl> + { <nl> + return format ; <nl> + } <nl> + + <nl> + + public boolean shouldApplyDiffuseLighting ( ) <nl> + + { <nl> + + return applyDiffuseLighting ; <nl> + + } <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java . patch <nl> new file mode 100644 <nl> index 0000000 . . 4c13ace <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java . patch <nl> @ @ - 0 , 0 + 1 , 25 @ @ <nl> + - - - . . / src - base / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java <nl> + + + + . . / src - work / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java <nl> + @ @ - 12 , 7 + 12 , 7 @ @ <nl> + <nl> + public BakedQuadRetextured ( BakedQuad p _ i46217 _ 1 _ , TextureAtlasSprite p _ i46217 _ 2 _ ) <nl> + { <nl> + - super ( Arrays . copyOf ( p _ i46217 _ 1 _ . func _ 178209 _ a ( ) , p _ i46217 _ 1 _ . func _ 178209 _ a ( ) . length ) , p _ i46217 _ 1 _ . field _ 178213 _ b , FaceBakery . func _ 178410 _ a ( p _ i46217 _ 1 _ . func _ 178209 _ a ( ) ) , p _ i46217 _ 1 _ . func _ 187508 _ a ( ) ) ; <nl> + + super ( Arrays . copyOf ( p _ i46217 _ 1 _ . func _ 178209 _ a ( ) , p _ i46217 _ 1 _ . func _ 178209 _ a ( ) . length ) , p _ i46217 _ 1 _ . field _ 178213 _ b , FaceBakery . func _ 178410 _ a ( p _ i46217 _ 1 _ . func _ 178209 _ a ( ) ) , p _ i46217 _ 1 _ . func _ 187508 _ a ( ) , p _ i46217 _ 1 _ . applyDiffuseLighting , p _ i46217 _ 1 _ . format ) ; <nl> + this . field _ 178218 _ d = p _ i46217 _ 2 _ ; <nl> + this . func _ 178217 _ e ( ) ; <nl> + } <nl> + @ @ - 21 , 9 + 21 , 10 @ @ <nl> + { <nl> + for ( int i = 0 ; i < 4 ; + + i ) <nl> + { <nl> + - int j = 7 * i ; <nl> + - this . field _ 178215 _ a [ j + 4 ] = Float . floatToRawIntBits ( this . field _ 178218 _ d . func _ 94214 _ a ( ( double ) this . field _ 187509 _ d . func _ 188537 _ a ( Float . intBitsToFloat ( this . field _ 178215 _ a [ j + 4 ] ) ) ) ) ; <nl> + - this . field _ 178215 _ a [ j + 4 + 1 ] = Float . floatToRawIntBits ( this . field _ 178218 _ d . func _ 94207 _ b ( ( double ) this . field _ 187509 _ d . func _ 188536 _ b ( Float . intBitsToFloat ( this . field _ 178215 _ a [ j + 4 + 1 ] ) ) ) ) ; <nl> + + int j = format . func _ 181719 _ f ( ) * i ; <nl> + + int uvIndex = format . func _ 177344 _ b ( 0 ) ; <nl> + + this . field _ 178215 _ a [ j + uvIndex ] = Float . floatToRawIntBits ( this . field _ 178218 _ d . func _ 94214 _ a ( ( double ) this . field _ 187509 _ d . func _ 188537 _ a ( Float . intBitsToFloat ( this . field _ 178215 _ a [ j + uvIndex ] ) ) ) ) ; <nl> + + this . field _ 178215 _ a [ j + uvIndex + 1 ] = Float . floatToRawIntBits ( this . field _ 178218 _ d . func _ 94207 _ b ( ( double ) this . field _ 187509 _ d . func _ 188536 _ b ( Float . intBitsToFloat ( this . field _ 178215 _ a [ j + uvIndex + 1 ] ) ) ) ) ; <nl> + } <nl> + } <nl> + } <nl> diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch <nl> index 2d771db . . a45204c 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch <nl> @ @ - 19 , 18 + 19 , 20 @ @ <nl> } <nl> <nl> - int [ ] aint = this . func _ 188012 _ a ( blockfaceuv , p _ 178414 _ 4 _ , p _ 178414 _ 5 _ , this . func _ 178403 _ a ( p _ 178414 _ 1 _ , p _ 178414 _ 2 _ ) , p _ 178414 _ 6 _ , p _ 178414 _ 7 _ , p _ 178414 _ 9 _ ) ; <nl> - + int [ ] aint = this . makeQuadVertexData ( blockfaceuv , p _ 178414 _ 4 _ , p _ 178414 _ 5 _ , this . func _ 178403 _ a ( p _ 178414 _ 1 _ , p _ 178414 _ 2 _ ) , p _ 178414 _ 6 _ , p _ 178414 _ 7 _ , p _ 178414 _ 9 _ ) ; <nl> + + int [ ] aint = this . makeQuadVertexData ( blockfaceuv , p _ 178414 _ 4 _ , p _ 178414 _ 5 _ , this . func _ 178403 _ a ( p _ 178414 _ 1 _ , p _ 178414 _ 2 _ ) , p _ 178414 _ 6 _ , p _ 178414 _ 7 _ , false ) ; <nl> EnumFacing enumfacing = func _ 178410 _ a ( aint ) ; <nl> <nl> if ( p _ 178414 _ 7 _ = = null ) <nl> - @ @ - 63 , 6 + 69 , 7 @ @ <nl> + @ @ - 63 , 7 + 69 , 8 @ @ <nl> this . func _ 178408 _ a ( aint , enumfacing ) ; <nl> } <nl> <nl> + - return new BakedQuad ( aint , p _ 178414 _ 3 _ . field _ 178245 _ c , enumfacing , p _ 178414 _ 4 _ ) ; <nl> + net . minecraftforge . client . ForgeHooksClient . fillNormal ( aint , enumfacing ) ; <nl> - return new BakedQuad ( aint , p _ 178414 _ 3 _ . field _ 178245 _ c , enumfacing , p _ 178414 _ 4 _ ) ; <nl> + + return new BakedQuad ( aint , p _ 178414 _ 3 _ . field _ 178245 _ c , enumfacing , p _ 178414 _ 4 _ , p _ 178414 _ 9 _ , net . minecraft . client . renderer . vertex . DefaultVertexFormats . field _ 176599 _ b ) ; <nl> } <nl> <nl> + private BlockFaceUV func _ 188010 _ a ( BlockFaceUV p _ 188010 _ 1 _ , EnumFacing p _ 188010 _ 2 _ , ModelRotation p _ 188010 _ 3 _ ) <nl> @ @ - 73 , 11 + 80 , 16 @ @ <nl> <nl> private int [ ] func _ 188012 _ a ( BlockFaceUV p _ 188012 _ 1 _ , TextureAtlasSprite p _ 188012 _ 2 _ , EnumFacing p _ 188012 _ 3 _ , float [ ] p _ 188012 _ 4 _ , ModelRotation p _ 188012 _ 5 _ , BlockPartRotation p _ 188012 _ 6 _ , boolean p _ 188012 _ 7 _ ) <nl> diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / ModelBakery . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / ModelBakery . java . patch <nl> index 78f75f8 . . 4f6cd2e 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / renderer / block / model / ModelBakery . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / ModelBakery . java . patch <nl> @ @ - 132 , 7 + 132 , 7 @ @ <nl> <nl> + protected BakedQuad makeBakedQuad ( BlockPart p _ 177589 _ 1 _ , BlockPartFace p _ 177589 _ 2 _ , TextureAtlasSprite p _ 177589 _ 3 _ , EnumFacing p _ 177589 _ 4 _ , net . minecraftforge . client . model . ITransformation p _ 177589 _ 5 _ , boolean p _ 177589 _ 6 _ ) <nl> + { <nl> - + return this . field _ 177607 _ l . makeBakedQuad ( p _ 177589 _ 1 _ . field _ 178241 _ a , p _ 177589 _ 1 _ . field _ 178239 _ b , p _ 177589 _ 2 _ , p _ 177589 _ 3 _ , p _ 177589 _ 4 _ , p _ 177589 _ 5 _ , p _ 177589 _ 1 _ . field _ 178237 _ d , p _ 177589 _ 6 _ , false ) ; <nl> + + return this . field _ 177607 _ l . makeBakedQuad ( p _ 177589 _ 1 _ . field _ 178241 _ a , p _ 177589 _ 1 _ . field _ 178239 _ b , p _ 177589 _ 2 _ , p _ 177589 _ 3 _ , p _ 177589 _ 4 _ , p _ 177589 _ 5 _ , p _ 177589 _ 1 _ . field _ 178237 _ d , p _ 177589 _ 6 _ , p _ 177589 _ 1 _ . field _ 178238 _ e ) ; <nl> + } <nl> + <nl> private void func _ 177597 _ h ( ) <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / IVertexConsumer . java b / src / main / java / net / minecraftforge / client / model / pipeline / IVertexConsumer . java <nl> index f079cb1 . . 2adff89 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / pipeline / IVertexConsumer . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / pipeline / IVertexConsumer . java <nl> @ @ - 17 , 6 + 17 , 7 @ @ public interface IVertexConsumer <nl> <nl> void setQuadTint ( int tint ) ; <nl> void setQuadOrientation ( EnumFacing orientation ) ; <nl> + void setApplyDiffuseLighting ( boolean diffuse ) ; <nl> <nl> void put ( int element , float . . . data ) ; <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / LightUtil . java b / src / main / java / net / minecraftforge / client / model / pipeline / LightUtil . java <nl> index c6e7bdb . . cbcdb23 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / pipeline / LightUtil . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / pipeline / LightUtil . java <nl> @ @ - 88 , 6 + 88 , 7 @ @ public class LightUtil <nl> { <nl> consumer . setQuadTint ( quad . getTintIndex ( ) ) ; <nl> } <nl> + consumer . setApplyDiffuseLighting ( quad . shouldApplyDiffuseLighting ( ) ) ; <nl> / / int [ ] eMap = mapFormats ( consumer . getVertexFormat ( ) , DefaultVertexFormats . ITEM ) ; <nl> float [ ] data = new float [ 4 ] ; <nl> VertexFormat formatFrom = consumer . getVertexFormat ( ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java b / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java <nl> index 1dc298b . . cecb447 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java <nl> @ @ - 13 , 9 + 13 , 9 @ @ public class UnpackedBakedQuad extends BakedQuad <nl> protected final VertexFormat format ; <nl> protected boolean packed = false ; <nl> <nl> - public UnpackedBakedQuad ( float [ ] [ ] [ ] unpackedData , int tint , EnumFacing orientation , TextureAtlasSprite texture , VertexFormat format ) <nl> + public UnpackedBakedQuad ( float [ ] [ ] [ ] unpackedData , int tint , EnumFacing orientation , TextureAtlasSprite texture , boolean applyDiffuseLighting , VertexFormat format ) <nl> { <nl> - super ( new int [ format . getNextOffset ( ) / * / 4 * 4 * / ] , tint , orientation , texture , format ) ; <nl> + super ( new int [ format . getNextOffset ( ) / * / 4 * 4 * / ] , tint , orientation , texture , applyDiffuseLighting , format ) ; <nl> this . unpackedData = unpackedData ; <nl> this . format = format ; <nl> } <nl> @ @ - 70 , 6 + 70 , 7 @ @ public class UnpackedBakedQuad extends BakedQuad <nl> private int tint = - 1 ; <nl> private EnumFacing orientation ; <nl> private TextureAtlasSprite texture ; <nl> + private boolean applyDiffuseLighting ; <nl> <nl> private int vertices = 0 ; <nl> private int elements = 0 ; <nl> @ @ - 101 , 6 + 102 , 11 @ @ public class UnpackedBakedQuad extends BakedQuad <nl> this . texture = texture ; <nl> } <nl> <nl> + public void setApplyDiffuseLighting ( boolean diffuse ) <nl> + { <nl> + this . applyDiffuseLighting = diffuse ; <nl> + } <nl> + <nl> public void put ( int element , float . . . data ) <nl> { <nl> for ( int i = 0 ; i < 4 ; i + + ) <nl> @ @ - 132 , 7 + 138 , 7 @ @ public class UnpackedBakedQuad extends BakedQuad <nl> { <nl> throw new IllegalStateException ( " not enough data " ) ; <nl> } <nl> - return new UnpackedBakedQuad ( unpackedData , tint , orientation , texture , format ) ; <nl> + return new UnpackedBakedQuad ( unpackedData , tint , orientation , texture , applyDiffuseLighting , format ) ; <nl> } <nl> } <nl> } <nl> \ No newline at end of file <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / VertexBufferConsumer . java b / src / main / java / net / minecraftforge / client / model / pipeline / VertexBufferConsumer . java <nl> index f07e149 . . de40252 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / pipeline / VertexBufferConsumer . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / pipeline / VertexBufferConsumer . java <nl> @ @ - 57 , 4 + 57 , 5 @ @ public class VertexBufferConsumer implements IVertexConsumer <nl> <nl> public void setQuadTint ( int tint ) { } <nl> public void setQuadOrientation ( EnumFacing orientation ) { } <nl> + public void setApplyDiffuseLighting ( boolean diffuse ) { } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / VertexLighterFlat . java b / src / main / java / net / minecraftforge / client / model / pipeline / VertexLighterFlat . java <nl> index 3f5d913 . . 8492dda 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / pipeline / VertexLighterFlat . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / pipeline / VertexLighterFlat . java <nl> @ @ - 17 , 6 + 17 , 7 @ @ public class VertexLighterFlat extends QuadGatheringTransformer <nl> { <nl> protected final BlockInfo blockInfo ; <nl> private int tint = - 1 ; <nl> + private boolean diffuse = true ; <nl> <nl> protected int posIndex = - 1 ; <nl> protected int normalIndex = - 1 ; <nl> @ @ - 148 , 10 + 149 , 13 @ @ public class VertexLighterFlat extends QuadGatheringTransformer <nl> if ( skyLight > lightmap [ v ] [ 1 ] ) lightmap [ v ] [ 1 ] = skyLight ; <nl> } <nl> updateColor ( normal [ v ] , color [ v ] , x , y , z , tint , multiplier ) ; <nl> - float diffuse = LightUtil . diffuseLight ( normal [ v ] [ 0 ] , normal [ v ] [ 1 ] , normal [ v ] [ 2 ] ) ; <nl> - for ( int i = 0 ; i < 3 ; i + + ) <nl> + if ( diffuse ) <nl> { <nl> - color [ v ] [ i ] * = diffuse ; <nl> + float d = LightUtil . diffuseLight ( normal [ v ] [ 0 ] , normal [ v ] [ 1 ] , normal [ v ] [ 2 ] ) ; <nl> + for ( int i = 0 ; i < 3 ; i + + ) <nl> + { <nl> + color [ v ] [ i ] * = d ; <nl> + } <nl> } <nl> if ( EntityRenderer . anaglyphEnable ) <nl> { <nl> @ @ - 239 , 6 + 243 , 10 @ @ public class VertexLighterFlat extends QuadGatheringTransformer <nl> } <nl> public void setQuadOrientation ( EnumFacing orientation ) { } <nl> public void setQuadCulled ( ) { } <nl> + public void setApplyDiffuseLighting ( boolean diffuse ) <nl> + { <nl> + this . diffuse = diffuse ; <nl> + } <nl> <nl> public void setWorld ( IBlockAccess world ) <nl> { <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / VertexTransformer . java b / src / main / java / net / minecraftforge / client / model / pipeline / VertexTransformer . java <nl> index 7a38467 . . 1bd4ecd 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / pipeline / VertexTransformer . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / pipeline / VertexTransformer . java <nl> @ @ - 27 , 6 + 27 , 11 @ @ public class VertexTransformer implements IVertexConsumer <nl> parent . setQuadOrientation ( orientation ) ; <nl> } <nl> <nl> + public void setApplyDiffuseLighting ( boolean diffuse ) <nl> + { <nl> + parent . setApplyDiffuseLighting ( diffuse ) ; <nl> + } <nl> + <nl> public void put ( int element , float . . . data ) <nl> { <nl> parent . put ( element , data ) ; <nl> diff - - git a / src / main / resources / forge . exc b / src / main / resources / forge . exc <nl> index 9b6ed04 . . 01b0f0b 100644 <nl> - - - a / src / main / resources / forge . exc <nl> + + + b / src / main / resources / forge . exc <nl> @ @ - 45 , 5 + 45 , 5 @ @ net / minecraft / stats / StatList . mergeStatBases ( [ Lnet / minecraft / stats / StatBase ; Lnet / <nl> net / minecraft / item / ItemStack . < init > ( Lnet / minecraft / item / Item ; IILnet / minecraft / nbt / NBTTagCompound ; ) V = | p _ i1881 _ 1 _ , p _ i1881 _ 2 _ , p _ i1881 _ 3 _ , capNBT <nl> <nl> net / minecraft / block / BlockRedstoneWire . canConnectTo ( Lnet / minecraft / block / state / IBlockState ; Lnet / minecraft / util / EnumFacing ; Lnet / minecraft / world / IBlockAccess ; Lnet / minecraft / util / math / BlockPos ; ) Z = p _ 176343 _ 0 _ , p _ 176343 _ 1 _ , world , pos <nl> - net / minecraft / client / renderer / block / model / BakedQuad . < init > ( [ IILnet / minecraft / util / EnumFacing ; Lnet / minecraft / client / renderer / texture / TextureAtlasSprite ; Lnet / minecraft / client / renderer / vertex / VertexFormat ; ) V = | p _ i46574 _ 1 _ , p _ i46574 _ 2 _ , p _ i46574 _ 3 _ , p _ i46574 _ 4 _ , format <nl> + net / minecraft / client / renderer / block / model / BakedQuad . < init > ( [ IILnet / minecraft / util / EnumFacing ; Lnet / minecraft / client / renderer / texture / TextureAtlasSprite ; ZLnet / minecraft / client / renderer / vertex / VertexFormat ; ) V = | p _ i46574 _ 1 _ , p _ i46574 _ 2 _ , p _ i46574 _ 3 _ , p _ i46574 _ 4 _ , applyDiffuseLighting , format <nl> net / minecraft / client / renderer / texture / TextureMap . < init > ( Ljava / lang / String ; Lnet / minecraft / client / renderer / texture / IIconCreator ; Z ) V = | p _ i46100 _ 1 _ , p _ i46100 _ 2 _ , skipFirst <nl> diff - - git a / src / test / java / net / minecraftforge / debug / ModelBakeEventDebug . java b / src / test / java / net / minecraftforge / debug / ModelBakeEventDebug . java <nl> index c15b75b . . ace5cde 100644 <nl> - - - a / src / test / java / net / minecraftforge / debug / ModelBakeEventDebug . java <nl> + + + b / src / test / java / net / minecraftforge / debug / ModelBakeEventDebug . java <nl> @ @ - 245 , 7 + 245 , 7 @ @ public class ModelBakeEventDebug <nl> vertexToInts ( ( float ) v2 . xCoord , ( float ) v2 . yCoord , ( float ) v2 . zCoord , - 1 , texture , 0 , 16 ) , <nl> vertexToInts ( ( float ) v3 . xCoord , ( float ) v3 . yCoord , ( float ) v3 . zCoord , - 1 , texture , 16 , 16 ) , <nl> vertexToInts ( ( float ) v4 . xCoord , ( float ) v4 . yCoord , ( float ) v4 . zCoord , - 1 , texture , 16 , 0 ) <nl> - ) , - 1 , side , texture , DefaultVertexFormats . BLOCK ) ; <nl> + ) , - 1 , side , texture , true , DefaultVertexFormats . BLOCK ) ; <nl> } <nl> <nl> @ Override

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch 
 index 8e298ad . . f27905b 100644 
 - - - a / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch 
 @ @ - 70 , 6 + 70 , 17 @ @ 
 this . func _ 178404 _ a ( p _ 188015 _ 1 _ , j , p _ 188015 _ 2 _ , vector3f , i , p _ 188015 _ 6 _ , p _ 188015 _ 4 _ ) ; 
 } 
 
 + @ @ - 139 , 8 + 155 , 8 @ @ 
 + p _ 178404 _ 1 _ [ i + 1 ] = Float . floatToRawIntBits ( p _ 178404 _ 4 _ . y ) ; 
 + p _ 178404 _ 1 _ [ i + 2 ] = Float . floatToRawIntBits ( p _ 178404 _ 4 _ . z ) ; 
 + p _ 178404 _ 1 _ [ i + 3 ] = p _ 178404 _ 5 _ ; 
 + - p _ 178404 _ 1 _ [ i + 4 ] = Float . floatToRawIntBits ( p _ 178404 _ 6 _ . func _ 94214 _ a ( ( double ) p _ 178404 _ 7 _ . func _ 178348 _ a ( p _ 178404 _ 3 _ ) ) ) ; 
 + - p _ 178404 _ 1 _ [ i + 4 + 1 ] = Float . floatToRawIntBits ( p _ 178404 _ 6 _ . func _ 94207 _ b ( ( double ) p _ 178404 _ 7 _ . func _ 178346 _ b ( p _ 178404 _ 3 _ ) ) ) ; 
 + + p _ 178404 _ 1 _ [ i + 4 ] = Float . floatToRawIntBits ( p _ 178404 _ 6 _ . func _ 94214 _ a ( ( double ) p _ 178404 _ 7 _ . func _ 178348 _ a ( p _ 178404 _ 3 _ ) * . 999 + p _ 178404 _ 7 _ . func _ 178348 _ a ( ( p _ 178404 _ 3 _ + 2 ) % 4 ) * . 001 ) ) ; 
 + + p _ 178404 _ 1 _ [ i + 4 + 1 ] = Float . floatToRawIntBits ( p _ 178404 _ 6 _ . func _ 94207 _ b ( ( double ) p _ 178404 _ 7 _ . func _ 178346 _ b ( p _ 178404 _ 3 _ ) * . 999 + p _ 178404 _ 7 _ . func _ 178346 _ b ( ( p _ 178404 _ 3 _ + 2 ) % 4 ) * . 001 ) ) ; 
 + } 
 + 
 + private void func _ 178407 _ a ( Vector3f p _ 178407 _ 1 _ , BlockPartRotation p _ 178407 _ 2 _ ) 
 @ @ - 189 , 14 + 205 , 19 @ @ 
 
 public int func _ 188011 _ a ( Vector3f p _ 188011 _ 1 _ , EnumFacing p _ 188011 _ 2 _ , int p _ 188011 _ 3 _ , ModelRotation p _ 188011 _ 4 _ ) 
 diff - - git a / patches / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java . patch b / patches / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java . patch 
 index 5ef4028 . . b7a16e4 100644 
 - - - a / patches / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java . patch 
 @ @ - 1 , 6 + 1 , 23 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java 
 + + + . . / src - work / minecraft / net / minecraft / client / renderer / texture / TextureAtlasSprite . java 
 - @ @ - 398 , 4 + 398 , 30 @ @ 
 + @ @ - 50 , 12 + 50 , 10 @ @ 
 + this . field _ 110975 _ c = p _ 110971 _ 3 _ ; 
 + this . field _ 110974 _ d = p _ 110971 _ 4 _ ; 
 + this . field _ 130222 _ e = p _ 110971 _ 5 _ ; 
 + - float f = ( float ) ( 0 . 009999999776482582D / ( double ) p _ 110971 _ 1 _ ) ; 
 + - float f1 = ( float ) ( 0 . 009999999776482582D / ( double ) p _ 110971 _ 2 _ ) ; 
 + - this . field _ 110979 _ l = ( float ) p _ 110971 _ 3 _ / ( float ) ( ( double ) p _ 110971 _ 1 _ ) + f ; 
 + - this . field _ 110980 _ m = ( float ) ( p _ 110971 _ 3 _ + this . field _ 130223 _ c ) / ( float ) ( ( double ) p _ 110971 _ 1 _ ) - f ; 
 + - this . field _ 110977 _ n = ( float ) p _ 110971 _ 4 _ / ( float ) p _ 110971 _ 2 _ + f1 ; 
 + - this . field _ 110978 _ o = ( float ) ( p _ 110971 _ 4 _ + this . field _ 130224 _ d ) / ( float ) p _ 110971 _ 2 _ - f1 ; 
 + + this . field _ 110979 _ l = ( float ) p _ 110971 _ 3 _ / ( float ) p _ 110971 _ 1 _ ; 
 + + this . field _ 110980 _ m = ( float ) ( p _ 110971 _ 3 _ + this . field _ 130223 _ c ) / ( float ) p _ 110971 _ 1 _ ; 
 + + this . field _ 110977 _ n = ( float ) p _ 110971 _ 4 _ / ( float ) p _ 110971 _ 2 _ ; 
 + + this . field _ 110978 _ o = ( float ) ( p _ 110971 _ 4 _ + this . field _ 130224 _ d ) / ( float ) p _ 110971 _ 2 _ ; 
 + } 
 + 
 + public void func _ 94217 _ a ( TextureAtlasSprite p _ 94217 _ 1 _ ) 
 + @ @ - 398 , 4 + 396 , 30 @ @ 
 { 
 return " TextureAtlasSprite { name = \ ' " + this . field _ 110984 _ i + ' \ ' ' + " , frameCount = " + this . field _ 110976 _ a . size ( ) + " , rotated = " + this . field _ 130222 _ e + " , x = " + this . field _ 110975 _ c + " , y = " + this . field _ 110974 _ d + " , height = " + this . field _ 130224 _ d + " , width = " + this . field _ 130223 _ c + " , u0 = " + this . field _ 110979 _ l + " , u1 = " + this . field _ 110980 _ m + " , v0 = " + this . field _ 110977 _ n + " , v1 = " + this . field _ 110978 _ o + ' } ' ; 
 } 
 diff - - git a / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java b / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java 
 index 4b8095d . . 02f92be 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java 
 + + + b / src / main / java / net / minecraftforge / client / model / b3d / B3DLoader . java 
 @ @ - 722 , 6 + 722 , 7 @ @ public enum B3DLoader implements ICustomModelLoader 
 for ( Face f : faces ) 
 { 
 UnpackedBakedQuad . Builder quadBuilder = new UnpackedBakedQuad . Builder ( format ) ; 
 + quadBuilder . setContractUVs ( true ) ; 
 quadBuilder . setQuadOrientation ( EnumFacing . getFacingFromVector ( f . getNormal ( ) . x , f . getNormal ( ) . y , f . getNormal ( ) . z ) ) ; 
 List < Texture > textures = null ; 
 if ( f . getBrush ( ) ! = null ) textures = f . getBrush ( ) . getTextures ( ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java b / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java 
 index 3efab8d . . 4aba809 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / obj / OBJModel . java 
 @ @ - 1403 , 6 + 1403 , 7 @ @ public class OBJModel implements IRetexturableModel , IModelCustomData 
 sprite = ModelLoader . White . INSTANCE ; 
 } else sprite = this . textures . get ( f . getMaterialName ( ) ) ; 
 UnpackedBakedQuad . Builder builder = new UnpackedBakedQuad . Builder ( format ) ; 
 + builder . setContractUVs ( true ) ; 
 builder . setQuadOrientation ( EnumFacing . getFacingFromVector ( f . getNormal ( ) . x , f . getNormal ( ) . y , f . getNormal ( ) . z ) ) ; 
 builder . setTexture ( sprite ) ; 
 Normal faceNormal = f . getNormal ( ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java b / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java 
 index ac888e1 . . fae9806 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java 
 + + + b / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java 
 @ @ - 3 , 6 + 3 , 7 @ @ package net . minecraftforge . client . model . pipeline ; 
 import net . minecraft . client . renderer . block . model . BakedQuad ; 
 import net . minecraft . client . renderer . texture . TextureAtlasSprite ; 
 import net . minecraft . client . renderer . vertex . VertexFormat ; 
 + import net . minecraft . client . renderer . vertex . VertexFormatElement ; 
 import net . minecraft . util . EnumFacing ; 
 
 / / advantages : non - fixed - length vertex format , no overhead of packing and unpacking attributes to transform the model 
 @ @ - 75 , 6 + 76 , 7 @ @ public class UnpackedBakedQuad extends BakedQuad 
 private int vertices = 0 ; 
 private int elements = 0 ; 
 private boolean full = false ; 
 + private boolean contractUVs = false ; 
 
 public Builder ( VertexFormat format ) 
 { 
 @ @ - 87 , 6 + 89 , 10 @ @ public class UnpackedBakedQuad extends BakedQuad 
 return format ; 
 } 
 
 + public void setContractUVs ( boolean value ) 
 + { 
 + this . contractUVs = value ; 
 + } 
 public void setQuadTint ( int tint ) 
 { 
 this . tint = tint ; 
 @ @ - 132 , 12 + 138 , 68 @ @ public class UnpackedBakedQuad extends BakedQuad 
 } 
 } 
 
 + private final float eps = 1f / 0x100 ; 
 + 
 public UnpackedBakedQuad build ( ) 
 { 
 if ( ! full ) 
 { 
 throw new IllegalStateException ( " not enough data " ) ; 
 } 
 + if ( contractUVs ) 
 + { 
 + float tX = texture . getOriginX ( ) / texture . getMinU ( ) ; 
 + float tY = texture . getOriginY ( ) / texture . getMinV ( ) ; 
 + float tS = tX > tY ? tX : tY ; 
 + float ep = 1f / ( tS * 0x100 ) ; 
 + int uve = 0 ; 
 + while ( uve < format . getElementCount ( ) ) 
 + { 
 + VertexFormatElement e = format . getElement ( uve ) ; 
 + if ( e . getUsage ( ) = = VertexFormatElement . EnumUsage . UV & & e . getIndex ( ) = = 0 ) 
 + { 
 + break ; 
 + } 
 + uve + + ; 
 + } 
 + if ( uve = = format . getElementCount ( ) ) 
 + { 
 + throw new IllegalStateException ( " Can ' t contract UVs : format doesn ' t contain UVs " ) ; 
 + } 
 + float [ ] uvc = new float [ 4 ] ; 
 + for ( int v = 0 ; v < 4 ; v + + ) 
 + { 
 + for ( int i = 0 ; i < 4 ; i + + ) 
 + { 
 + uvc [ i ] + = unpackedData [ v ] [ uve ] [ i ] / 4 ; 
 + } 
 + } 
 + for ( int v = 0 ; v < 4 ; v + + ) 
 + { 
 + for ( int i = 0 ; i < 4 ; i + + ) 
 + { 
 + float uo = unpackedData [ v ] [ uve ] [ i ] ; 
 + float un = uo * ( 1 - eps ) + uvc [ i ] * eps ; 
 + float ud = uo - un ; 
 + float aud = ud ; 
 + if ( aud < 0 ) aud = - aud ; 
 + if ( aud < ep ) / / not moving a fraction of a pixel 
 + { 
 + float udc = uo - uvc [ i ] ; 
 + if ( udc < 0 ) udc = - udc ; 
 + if ( udc < 2 * ep ) / / center is closer than 2 fractions of a pixel , don ' t move too close 
 + { 
 + un = ( uo + uvc [ i ] ) / 2 ; 
 + } 
 + else / / move at least by a fraction 
 + { 
 + un = uo + ( ud < 0 ? ep : - ep ) ; 
 + } 
 + } 
 + unpackedData [ v ] [ uve ] [ i ] = un ; 
 + } 
 + } 
 + } 
 return new UnpackedBakedQuad ( unpackedData , tint , orientation , texture , applyDiffuseLighting , format ) ; 
 } 
 }

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java . patch 
 index 8a1013f . . 2348edf 100644 
 - - - a / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java 
 + + + . . / src - work / minecraft / net / minecraft / client / renderer / block / model / BakedQuad . java 
 - @ @ - 6 , 15 + 6 , 25 @ @ 
 + @ @ - 6 , 15 + 6 , 26 @ @ 
 import net . minecraftforge . fml . relauncher . SideOnly ; 
 
 @ SideOnly ( Side . CLIENT ) 
 @ @ - 18 , 21 + 18 , 23 @ @ 
 + @ Deprecated 
 public BakedQuad ( int [ ] p _ i46574 _ 1 _ , int p _ i46574 _ 2 _ , EnumFacing p _ i46574 _ 3 _ , TextureAtlasSprite p _ i46574 _ 4 _ ) 
 { 
 - + this ( p _ i46574 _ 1 _ , p _ i46574 _ 2 _ , p _ i46574 _ 3 _ , p _ i46574 _ 4 _ , net . minecraft . client . renderer . vertex . DefaultVertexFormats . field _ 176599 _ b ) ; 
 + + this ( p _ i46574 _ 1 _ , p _ i46574 _ 2 _ , p _ i46574 _ 3 _ , p _ i46574 _ 4 _ , true , net . minecraft . client . renderer . vertex . DefaultVertexFormats . field _ 176599 _ b ) ; 
 + } 
 + 
 - + public BakedQuad ( int [ ] p _ i46574 _ 1 _ , int p _ i46574 _ 2 _ , EnumFacing p _ i46574 _ 3 _ , TextureAtlasSprite p _ i46574 _ 4 _ , net . minecraft . client . renderer . vertex . VertexFormat format ) 
 + + public BakedQuad ( int [ ] p _ i46574 _ 1 _ , int p _ i46574 _ 2 _ , EnumFacing p _ i46574 _ 3 _ , TextureAtlasSprite p _ i46574 _ 4 _ , boolean applyDiffuseLighting , net . minecraft . client . renderer . vertex . VertexFormat format ) 
 + { 
 + this . format = format ; 
 + + this . applyDiffuseLighting = applyDiffuseLighting ; 
 this . field _ 178215 _ a = p _ i46574 _ 1 _ ; 
 this . field _ 178213 _ b = p _ i46574 _ 2 _ ; 
 this . field _ 178214 _ c = p _ i46574 _ 3 _ ; 
 - @ @ - 45 , 4 + 55 , 17 @ @ 
 + @ @ - 45 , 4 + 56 , 23 @ @ 
 { 
 return this . field _ 178214 _ c ; 
 } 
 + 
 - + private final net . minecraft . client . renderer . vertex . VertexFormat format ; 
 + + protected final net . minecraft . client . renderer . vertex . VertexFormat format ; 
 + + protected final boolean applyDiffuseLighting ; 
 + 
 + @ Override 
 + public void pipe ( net . minecraftforge . client . model . pipeline . IVertexConsumer consumer ) 
 @ @ - 44 , 4 + 46 , 9 @ @ 
 + { 
 + return format ; 
 + } 
 + + 
 + + public boolean shouldApplyDiffuseLighting ( ) 
 + + { 
 + + return applyDiffuseLighting ; 
 + + } 
 } 
 diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java . patch 
 new file mode 100644 
 index 0000000 . . 4c13ace 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java . patch 
 @ @ - 0 , 0 + 1 , 25 @ @ 
 + - - - . . / src - base / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java 
 + + + + . . / src - work / minecraft / net / minecraft / client / renderer / block / model / BakedQuadRetextured . java 
 + @ @ - 12 , 7 + 12 , 7 @ @ 
 + 
 + public BakedQuadRetextured ( BakedQuad p _ i46217 _ 1 _ , TextureAtlasSprite p _ i46217 _ 2 _ ) 
 + { 
 + - super ( Arrays . copyOf ( p _ i46217 _ 1 _ . func _ 178209 _ a ( ) , p _ i46217 _ 1 _ . func _ 178209 _ a ( ) . length ) , p _ i46217 _ 1 _ . field _ 178213 _ b , FaceBakery . func _ 178410 _ a ( p _ i46217 _ 1 _ . func _ 178209 _ a ( ) ) , p _ i46217 _ 1 _ . func _ 187508 _ a ( ) ) ; 
 + + super ( Arrays . copyOf ( p _ i46217 _ 1 _ . func _ 178209 _ a ( ) , p _ i46217 _ 1 _ . func _ 178209 _ a ( ) . length ) , p _ i46217 _ 1 _ . field _ 178213 _ b , FaceBakery . func _ 178410 _ a ( p _ i46217 _ 1 _ . func _ 178209 _ a ( ) ) , p _ i46217 _ 1 _ . func _ 187508 _ a ( ) , p _ i46217 _ 1 _ . applyDiffuseLighting , p _ i46217 _ 1 _ . format ) ; 
 + this . field _ 178218 _ d = p _ i46217 _ 2 _ ; 
 + this . func _ 178217 _ e ( ) ; 
 + } 
 + @ @ - 21 , 9 + 21 , 10 @ @ 
 + { 
 + for ( int i = 0 ; i < 4 ; + + i ) 
 + { 
 + - int j = 7 * i ; 
 + - this . field _ 178215 _ a [ j + 4 ] = Float . floatToRawIntBits ( this . field _ 178218 _ d . func _ 94214 _ a ( ( double ) this . field _ 187509 _ d . func _ 188537 _ a ( Float . intBitsToFloat ( this . field _ 178215 _ a [ j + 4 ] ) ) ) ) ; 
 + - this . field _ 178215 _ a [ j + 4 + 1 ] = Float . floatToRawIntBits ( this . field _ 178218 _ d . func _ 94207 _ b ( ( double ) this . field _ 187509 _ d . func _ 188536 _ b ( Float . intBitsToFloat ( this . field _ 178215 _ a [ j + 4 + 1 ] ) ) ) ) ; 
 + + int j = format . func _ 181719 _ f ( ) * i ; 
 + + int uvIndex = format . func _ 177344 _ b ( 0 ) ; 
 + + this . field _ 178215 _ a [ j + uvIndex ] = Float . floatToRawIntBits ( this . field _ 178218 _ d . func _ 94214 _ a ( ( double ) this . field _ 187509 _ d . func _ 188537 _ a ( Float . intBitsToFloat ( this . field _ 178215 _ a [ j + uvIndex ] ) ) ) ) ; 
 + + this . field _ 178215 _ a [ j + uvIndex + 1 ] = Float . floatToRawIntBits ( this . field _ 178218 _ d . func _ 94207 _ b ( ( double ) this . field _ 187509 _ d . func _ 188536 _ b ( Float . intBitsToFloat ( this . field _ 178215 _ a [ j + uvIndex + 1 ] ) ) ) ) ; 
 + } 
 + } 
 + } 
 diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch 
 index 2d771db . . a45204c 100644 
 - - - a / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / FaceBakery . java . patch 
 @ @ - 19 , 18 + 19 , 20 @ @ 
 } 
 
 - int [ ] aint = this . func _ 188012 _ a ( blockfaceuv , p _ 178414 _ 4 _ , p _ 178414 _ 5 _ , this . func _ 178403 _ a ( p _ 178414 _ 1 _ , p _ 178414 _ 2 _ ) , p _ 178414 _ 6 _ , p _ 178414 _ 7 _ , p _ 178414 _ 9 _ ) ; 
 - + int [ ] aint = this . makeQuadVertexData ( blockfaceuv , p _ 178414 _ 4 _ , p _ 178414 _ 5 _ , this . func _ 178403 _ a ( p _ 178414 _ 1 _ , p _ 178414 _ 2 _ ) , p _ 178414 _ 6 _ , p _ 178414 _ 7 _ , p _ 178414 _ 9 _ ) ; 
 + + int [ ] aint = this . makeQuadVertexData ( blockfaceuv , p _ 178414 _ 4 _ , p _ 178414 _ 5 _ , this . func _ 178403 _ a ( p _ 178414 _ 1 _ , p _ 178414 _ 2 _ ) , p _ 178414 _ 6 _ , p _ 178414 _ 7 _ , false ) ; 
 EnumFacing enumfacing = func _ 178410 _ a ( aint ) ; 
 
 if ( p _ 178414 _ 7 _ = = null ) 
 - @ @ - 63 , 6 + 69 , 7 @ @ 
 + @ @ - 63 , 7 + 69 , 8 @ @ 
 this . func _ 178408 _ a ( aint , enumfacing ) ; 
 } 
 
 + - return new BakedQuad ( aint , p _ 178414 _ 3 _ . field _ 178245 _ c , enumfacing , p _ 178414 _ 4 _ ) ; 
 + net . minecraftforge . client . ForgeHooksClient . fillNormal ( aint , enumfacing ) ; 
 - return new BakedQuad ( aint , p _ 178414 _ 3 _ . field _ 178245 _ c , enumfacing , p _ 178414 _ 4 _ ) ; 
 + + return new BakedQuad ( aint , p _ 178414 _ 3 _ . field _ 178245 _ c , enumfacing , p _ 178414 _ 4 _ , p _ 178414 _ 9 _ , net . minecraft . client . renderer . vertex . DefaultVertexFormats . field _ 176599 _ b ) ; 
 } 
 
 + private BlockFaceUV func _ 188010 _ a ( BlockFaceUV p _ 188010 _ 1 _ , EnumFacing p _ 188010 _ 2 _ , ModelRotation p _ 188010 _ 3 _ ) 
 @ @ - 73 , 11 + 80 , 16 @ @ 
 
 private int [ ] func _ 188012 _ a ( BlockFaceUV p _ 188012 _ 1 _ , TextureAtlasSprite p _ 188012 _ 2 _ , EnumFacing p _ 188012 _ 3 _ , float [ ] p _ 188012 _ 4 _ , ModelRotation p _ 188012 _ 5 _ , BlockPartRotation p _ 188012 _ 6 _ , boolean p _ 188012 _ 7 _ ) 
 diff - - git a / patches / minecraft / net / minecraft / client / renderer / block / model / ModelBakery . java . patch b / patches / minecraft / net / minecraft / client / renderer / block / model / ModelBakery . java . patch 
 index 78f75f8 . . 4f6cd2e 100644 
 - - - a / patches / minecraft / net / minecraft / client / renderer / block / model / ModelBakery . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / renderer / block / model / ModelBakery . java . patch 
 @ @ - 132 , 7 + 132 , 7 @ @ 
 
 + protected BakedQuad makeBakedQuad ( BlockPart p _ 177589 _ 1 _ , BlockPartFace p _ 177589 _ 2 _ , TextureAtlasSprite p _ 177589 _ 3 _ , EnumFacing p _ 177589 _ 4 _ , net . minecraftforge . client . model . ITransformation p _ 177589 _ 5 _ , boolean p _ 177589 _ 6 _ ) 
 + { 
 - + return this . field _ 177607 _ l . makeBakedQuad ( p _ 177589 _ 1 _ . field _ 178241 _ a , p _ 177589 _ 1 _ . field _ 178239 _ b , p _ 177589 _ 2 _ , p _ 177589 _ 3 _ , p _ 177589 _ 4 _ , p _ 177589 _ 5 _ , p _ 177589 _ 1 _ . field _ 178237 _ d , p _ 177589 _ 6 _ , false ) ; 
 + + return this . field _ 177607 _ l . makeBakedQuad ( p _ 177589 _ 1 _ . field _ 178241 _ a , p _ 177589 _ 1 _ . field _ 178239 _ b , p _ 177589 _ 2 _ , p _ 177589 _ 3 _ , p _ 177589 _ 4 _ , p _ 177589 _ 5 _ , p _ 177589 _ 1 _ . field _ 178237 _ d , p _ 177589 _ 6 _ , p _ 177589 _ 1 _ . field _ 178238 _ e ) ; 
 + } 
 + 
 private void func _ 177597 _ h ( ) 
 diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / IVertexConsumer . java b / src / main / java / net / minecraftforge / client / model / pipeline / IVertexConsumer . java 
 index f079cb1 . . 2adff89 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / pipeline / IVertexConsumer . java 
 + + + b / src / main / java / net / minecraftforge / client / model / pipeline / IVertexConsumer . java 
 @ @ - 17 , 6 + 17 , 7 @ @ public interface IVertexConsumer 
 
 void setQuadTint ( int tint ) ; 
 void setQuadOrientation ( EnumFacing orientation ) ; 
 + void setApplyDiffuseLighting ( boolean diffuse ) ; 
 
 void put ( int element , float . . . data ) ; 
 } 
 diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / LightUtil . java b / src / main / java / net / minecraftforge / client / model / pipeline / LightUtil . java 
 index c6e7bdb . . cbcdb23 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / pipeline / LightUtil . java 
 + + + b / src / main / java / net / minecraftforge / client / model / pipeline / LightUtil . java 
 @ @ - 88 , 6 + 88 , 7 @ @ public class LightUtil 
 { 
 consumer . setQuadTint ( quad . getTintIndex ( ) ) ; 
 } 
 + consumer . setApplyDiffuseLighting ( quad . shouldApplyDiffuseLighting ( ) ) ; 
 / / int [ ] eMap = mapFormats ( consumer . getVertexFormat ( ) , DefaultVertexFormats . ITEM ) ; 
 float [ ] data = new float [ 4 ] ; 
 VertexFormat formatFrom = consumer . getVertexFormat ( ) ; 
 diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java b / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java 
 index 1dc298b . . cecb447 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java 
 + + + b / src / main / java / net / minecraftforge / client / model / pipeline / UnpackedBakedQuad . java 
 @ @ - 13 , 9 + 13 , 9 @ @ public class UnpackedBakedQuad extends BakedQuad 
 protected final VertexFormat format ; 
 protected boolean packed = false ; 
 
 - public UnpackedBakedQuad ( float [ ] [ ] [ ] unpackedData , int tint , EnumFacing orientation , TextureAtlasSprite texture , VertexFormat format ) 
 + public UnpackedBakedQuad ( float [ ] [ ] [ ] unpackedData , int tint , EnumFacing orientation , TextureAtlasSprite texture , boolean applyDiffuseLighting , VertexFormat format ) 
 { 
 - super ( new int [ format . getNextOffset ( ) / * / 4 * 4 * / ] , tint , orientation , texture , format ) ; 
 + super ( new int [ format . getNextOffset ( ) / * / 4 * 4 * / ] , tint , orientation , texture , applyDiffuseLighting , format ) ; 
 this . unpackedData = unpackedData ; 
 this . format = format ; 
 } 
 @ @ - 70 , 6 + 70 , 7 @ @ public class UnpackedBakedQuad extends BakedQuad 
 private int tint = - 1 ; 
 private EnumFacing orientation ; 
 private TextureAtlasSprite texture ; 
 + private boolean applyDiffuseLighting ; 
 
 private int vertices = 0 ; 
 private int elements = 0 ; 
 @ @ - 101 , 6 + 102 , 11 @ @ public class UnpackedBakedQuad extends BakedQuad 
 this . texture = texture ; 
 } 
 
 + public void setApplyDiffuseLighting ( boolean diffuse ) 
 + { 
 + this . applyDiffuseLighting = diffuse ; 
 + } 
 + 
 public void put ( int element , float . . . data ) 
 { 
 for ( int i = 0 ; i < 4 ; i + + ) 
 @ @ - 132 , 7 + 138 , 7 @ @ public class UnpackedBakedQuad extends BakedQuad 
 { 
 throw new IllegalStateException ( " not enough data " ) ; 
 } 
 - return new UnpackedBakedQuad ( unpackedData , tint , orientation , texture , format ) ; 
 + return new UnpackedBakedQuad ( unpackedData , tint , orientation , texture , applyDiffuseLighting , format ) ; 
 } 
 } 
 } 
 \ No newline at end of file 
 diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / VertexBufferConsumer . java b / src / main / java / net / minecraftforge / client / model / pipeline / VertexBufferConsumer . java 
 index f07e149 . . de40252 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / pipeline / VertexBufferConsumer . java 
 + + + b / src / main / java / net / minecraftforge / client / model / pipeline / VertexBufferConsumer . java 
 @ @ - 57 , 4 + 57 , 5 @ @ public class VertexBufferConsumer implements IVertexConsumer 
 
 public void setQuadTint ( int tint ) { } 
 public void setQuadOrientation ( EnumFacing orientation ) { } 
 + public void setApplyDiffuseLighting ( boolean diffuse ) { } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / VertexLighterFlat . java b / src / main / java / net / minecraftforge / client / model / pipeline / VertexLighterFlat . java 
 index 3f5d913 . . 8492dda 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / pipeline / VertexLighterFlat . java 
 + + + b / src / main / java / net / minecraftforge / client / model / pipeline / VertexLighterFlat . java 
 @ @ - 17 , 6 + 17 , 7 @ @ public class VertexLighterFlat extends QuadGatheringTransformer 
 { 
 protected final BlockInfo blockInfo ; 
 private int tint = - 1 ; 
 + private boolean diffuse = true ; 
 
 protected int posIndex = - 1 ; 
 protected int normalIndex = - 1 ; 
 @ @ - 148 , 10 + 149 , 13 @ @ public class VertexLighterFlat extends QuadGatheringTransformer 
 if ( skyLight > lightmap [ v ] [ 1 ] ) lightmap [ v ] [ 1 ] = skyLight ; 
 } 
 updateColor ( normal [ v ] , color [ v ] , x , y , z , tint , multiplier ) ; 
 - float diffuse = LightUtil . diffuseLight ( normal [ v ] [ 0 ] , normal [ v ] [ 1 ] , normal [ v ] [ 2 ] ) ; 
 - for ( int i = 0 ; i < 3 ; i + + ) 
 + if ( diffuse ) 
 { 
 - color [ v ] [ i ] * = diffuse ; 
 + float d = LightUtil . diffuseLight ( normal [ v ] [ 0 ] , normal [ v ] [ 1 ] , normal [ v ] [ 2 ] ) ; 
 + for ( int i = 0 ; i < 3 ; i + + ) 
 + { 
 + color [ v ] [ i ] * = d ; 
 + } 
 } 
 if ( EntityRenderer . anaglyphEnable ) 
 { 
 @ @ - 239 , 6 + 243 , 10 @ @ public class VertexLighterFlat extends QuadGatheringTransformer 
 } 
 public void setQuadOrientation ( EnumFacing orientation ) { } 
 public void setQuadCulled ( ) { } 
 + public void setApplyDiffuseLighting ( boolean diffuse ) 
 + { 
 + this . diffuse = diffuse ; 
 + } 
 
 public void setWorld ( IBlockAccess world ) 
 { 
 diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / VertexTransformer . java b / src / main / java / net / minecraftforge / client / model / pipeline / VertexTransformer . java 
 index 7a38467 . . 1bd4ecd 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / pipeline / VertexTransformer . java 
 + + + b / src / main / java / net / minecraftforge / client / model / pipeline / VertexTransformer . java 
 @ @ - 27 , 6 + 27 , 11 @ @ public class VertexTransformer implements IVertexConsumer 
 parent . setQuadOrientation ( orientation ) ; 
 } 
 
 + public void setApplyDiffuseLighting ( boolean diffuse ) 
 + { 
 + parent . setApplyDiffuseLighting ( diffuse ) ; 
 + } 
 + 
 public void put ( int element , float . . . data ) 
 { 
 parent . put ( element , data ) ; 
 diff - - git a / src / main / resources / forge . exc b / src / main / resources / forge . exc 
 index 9b6ed04 . . 01b0f0b 100644 
 - - - a / src / main / resources / forge . exc 
 + + + b / src / main / resources / forge . exc 
 @ @ - 45 , 5 + 45 , 5 @ @ net / minecraft / stats / StatList . mergeStatBases ( [ Lnet / minecraft / stats / StatBase ; Lnet / 
 net / minecraft / item / ItemStack . < init > ( Lnet / minecraft / item / Item ; IILnet / minecraft / nbt / NBTTagCompound ; ) V = | p _ i1881 _ 1 _ , p _ i1881 _ 2 _ , p _ i1881 _ 3 _ , capNBT 
 
 net / minecraft / block / BlockRedstoneWire . canConnectTo ( Lnet / minecraft / block / state / IBlockState ; Lnet / minecraft / util / EnumFacing ; Lnet / minecraft / world / IBlockAccess ; Lnet / minecraft / util / math / BlockPos ; ) Z = p _ 176343 _ 0 _ , p _ 176343 _ 1 _ , world , pos 
 - net / minecraft / client / renderer / block / model / BakedQuad . < init > ( [ IILnet / minecraft / util / EnumFacing ; Lnet / minecraft / client / renderer / texture / TextureAtlasSprite ; Lnet / minecraft / client / renderer / vertex / VertexFormat ; ) V = | p _ i46574 _ 1 _ , p _ i46574 _ 2 _ , p _ i46574 _ 3 _ , p _ i46574 _ 4 _ , format 
 + net / minecraft / client / renderer / block / model / BakedQuad . < init > ( [ IILnet / minecraft / util / EnumFacing ; Lnet / minecraft / client / renderer / texture / TextureAtlasSprite ; ZLnet / minecraft / client / renderer / vertex / VertexFormat ; ) V = | p _ i46574 _ 1 _ , p _ i46574 _ 2 _ , p _ i46574 _ 3 _ , p _ i46574 _ 4 _ , applyDiffuseLighting , format 
 net / minecraft / client / renderer / texture / TextureMap . < init > ( Ljava / lang / String ; Lnet / minecraft / client / renderer / texture / IIconCreator ; Z ) V = | p _ i46100 _ 1 _ , p _ i46100 _ 2 _ , skipFirst 
 diff - - git a / src / test / java / net / minecraftforge / debug / ModelBakeEventDebug . java b / src / test / java / net / minecraftforge / debug / ModelBakeEventDebug . java 
 index c15b75b . . ace5cde 100644 
 - - - a / src / test / java / net / minecraftforge / debug / ModelBakeEventDebug . java 
 + + + b / src / test / java / net / minecraftforge / debug / ModelBakeEventDebug . java 
 @ @ - 245 , 7 + 245 , 7 @ @ public class ModelBakeEventDebug 
 vertexToInts ( ( float ) v2 . xCoord , ( float ) v2 . yCoord , ( float ) v2 . zCoord , - 1 , texture , 0 , 16 ) , 
 vertexToInts ( ( float ) v3 . xCoord , ( float ) v3 . yCoord , ( float ) v3 . zCoord , - 1 , texture , 16 , 16 ) , 
 vertexToInts ( ( float ) v4 . xCoord , ( float ) v4 . yCoord , ( float ) v4 . zCoord , - 1 , texture , 16 , 0 ) 
 - ) , - 1 , side , texture , DefaultVertexFormats . BLOCK ) ; 
 + ) , - 1 , side , texture , true , DefaultVertexFormats . BLOCK ) ; 
 } 
 
 @ Override
