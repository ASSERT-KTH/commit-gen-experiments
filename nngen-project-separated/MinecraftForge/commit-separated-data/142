BLEU SCORE: 0.0114347838903095

TEST MSG: Fix MC - 136995 - Chunk loading and unloading issue with entities placed in exact positions .
GENERATED MSG: Add smarter getter for block slipperiness

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / entity / Entity . java . patch b / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> index 3319308 . . c322b02 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> @ @ - 27 , 7 + 27 , 23 @ @ <nl> } <nl> <nl> public EntityType < ? > func _ 200600 _ R ( ) { <nl> - @ @ - 845 , 7 + 847 , 7 @ @ <nl> + @ @ - 324 , 6 + 326 , 7 @ @ <nl> + this . field _ 70165 _ t = p _ 70107 _ 1 _ ; <nl> + this . field _ 70163 _ u = p _ 70107 _ 3 _ ; <nl> + this . field _ 70161 _ v = p _ 70107 _ 5 _ ; <nl> + + if ( this . isAddedToWorld ( ) & & ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72866 _ a ( this , false ) ; / / Forge - Process chunk registration after moving . <nl> + float f = this . field _ 70130 _ N / 2 . 0F ; <nl> + float f1 = this . field _ 70131 _ O ; <nl> + this . func _ 174826 _ a ( new AxisAlignedBB ( p _ 70107 _ 1 _ - ( double ) f , p _ 70107 _ 3 _ , p _ 70107 _ 5 _ - ( double ) f , p _ 70107 _ 1 _ + ( double ) f , p _ 70107 _ 3 _ + ( double ) f1 , p _ 70107 _ 5 _ + ( double ) f ) ) ; <nl> + @ @ - 794 , 6 + 797 , 7 @ @ <nl> + this . field _ 70165 _ t = ( axisalignedbb . field _ 72340 _ a + axisalignedbb . field _ 72336 _ d ) / 2 . 0D ; <nl> + this . field _ 70163 _ u = axisalignedbb . field _ 72338 _ b ; <nl> + this . field _ 70161 _ v = ( axisalignedbb . field _ 72339 _ c + axisalignedbb . field _ 72334 _ f ) / 2 . 0D ; <nl> + + if ( this . isAddedToWorld ( ) & & ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72866 _ a ( this , false ) ; / / Forge - Process chunk registration after moving . <nl> + } <nl> + <nl> + protected SoundEvent func _ 184184 _ Z ( ) { <nl> + @ @ - 845 , 7 + 849 , 7 @ @ <nl> <nl> protected void func _ 180429 _ a ( BlockPos p _ 180429 _ 1 _ , IBlockState p _ 180429 _ 2 _ ) { <nl> if ( ! p _ 180429 _ 2 _ . func _ 185904 _ a ( ) . func _ 76224 _ d ( ) ) { <nl> @ @ - 36 , 7 + 52 , 7 @ @ <nl> this . func _ 184185 _ a ( soundtype . func _ 185844 _ d ( ) , soundtype . func _ 185843 _ a ( ) * 0 . 15F , soundtype . func _ 185847 _ b ( ) ) ; <nl> } <nl> } <nl> - @ @ - 1040 , 6 + 1042 , 7 @ @ <nl> + @ @ - 1040 , 6 + 1044 , 7 @ @ <nl> int k = MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ; <nl> BlockPos blockpos = new BlockPos ( i , j , k ) ; <nl> IBlockState iblockstate = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos ) ; <nl> @ @ - 44 , 7 + 60 , 7 @ @ <nl> if ( iblockstate . func _ 185901 _ i ( ) ! = EnumBlockRenderType . INVISIBLE ) { <nl> this . field _ 70170 _ p . func _ 195594 _ a ( new BlockParticleData ( Particles . field _ 197611 _ d , iblockstate ) , this . field _ 70165 _ t + ( ( double ) this . field _ 70146 _ Z . nextFloat ( ) - 0 . 5D ) * ( double ) this . field _ 70130 _ N , this . func _ 174813 _ aQ ( ) . field _ 72338 _ b + 0 . 1D , this . field _ 70161 _ v + ( ( double ) this . field _ 70146 _ Z . nextFloat ( ) - 0 . 5D ) * ( double ) this . field _ 70130 _ N , - this . field _ 70159 _ w * 4 . 0D , 1 . 5D , - this . field _ 70179 _ y * 4 . 0D ) ; <nl> } <nl> - @ @ - 1053 , 7 + 1056 , 7 @ @ <nl> + @ @ - 1053 , 7 + 1058 , 7 @ @ <nl> double d0 = this . field _ 70163 _ u + ( double ) this . func _ 70047 _ e ( ) ; <nl> BlockPos blockpos = new BlockPos ( this . field _ 70165 _ t , d0 , this . field _ 70161 _ v ) ; <nl> IFluidState ifluidstate = this . field _ 70170 _ p . func _ 204610 _ c ( blockpos ) ; <nl> @ @ - 53 , 7 + 69 , 15 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1370 , 6 + 1373 , 7 @ @ <nl> + @ @ - 1122 , 6 + 1127 , 7 @ @ <nl> + this . field _ 70126 _ B - = 360 . 0F ; <nl> + } <nl> + <nl> + + if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72964 _ e ( ( int ) Math . floor ( this . field _ 70165 _ t ) > > 4 , ( int ) Math . floor ( this . field _ 70161 _ v ) > > 4 ) ; / / Forge - ensure target chunk is loaded . <nl> + this . func _ 70107 _ b ( this . field _ 70165 _ t , this . field _ 70163 _ u , this . field _ 70161 _ v ) ; <nl> + this . func _ 70101 _ b ( p _ 70080 _ 7 _ , p _ 70080 _ 8 _ ) ; <nl> + } <nl> + @ @ - 1370 , 6 + 1376 , 7 @ @ <nl> if ( this . field _ 184238 _ ar ) { <nl> p _ 189511 _ 1 _ . func _ 74757 _ a ( " Glowing " , this . field _ 184238 _ ar ) ; <nl> } <nl> @ @ - 61 , 7 + 85 , 7 @ @ <nl> <nl> if ( ! this . field _ 184236 _ aF . isEmpty ( ) ) { <nl> NBTTagList nbttaglist = new NBTTagList ( ) ; <nl> - @ @ - 1381 , 6 + 1385 , 9 @ @ <nl> + @ @ - 1381 , 6 + 1388 , 9 @ @ <nl> p _ 189511 _ 1 _ . func _ 74782 _ a ( " Tags " , nbttaglist ) ; <nl> } <nl> <nl> @ @ - 71 , 7 + 95 , 7 @ @ <nl> this . func _ 70014 _ b ( p _ 189511 _ 1 _ ) ; <nl> if ( this . func _ 184207 _ aI ( ) ) { <nl> NBTTagList nbttaglist1 = new NBTTagList ( ) ; <nl> - @ @ - 1466 , 6 + 1473 , 8 @ @ <nl> + @ @ - 1466 , 6 + 1476 , 8 @ @ <nl> this . func _ 174810 _ b ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " Silent " ) ) ; <nl> this . func _ 189654 _ d ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " NoGravity " ) ) ; <nl> this . func _ 184195 _ f ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " Glowing " ) ) ; <nl> @ @ - 80 , 7 + 104 , 7 @ @ <nl> if ( p _ 70020 _ 1 _ . func _ 150297 _ b ( " Tags " , 9 ) ) { <nl> this . field _ 184236 _ aF . clear ( ) ; <nl> NBTTagList nbttaglist1 = p _ 70020 _ 1 _ . func _ 150295 _ c ( " Tags " , 8 ) ; <nl> - @ @ - 1546 , 6 + 1555 , 8 @ @ <nl> + @ @ - 1546 , 6 + 1558 , 8 @ @ <nl> } else { <nl> EntityItem entityitem = new EntityItem ( this . field _ 70170 _ p , this . field _ 70165 _ t , this . field _ 70163 _ u + ( double ) p _ 70099 _ 2 _ , this . field _ 70161 _ v , p _ 70099 _ 1 _ ) ; <nl> entityitem . func _ 174869 _ p ( ) ; <nl> @ @ - 89 , 7 + 113 , 7 @ @ <nl> this . field _ 70170 _ p . func _ 72838 _ d ( entityitem ) ; <nl> return entityitem ; <nl> } <nl> - @ @ - 1595 , 6 + 1606 , 7 @ @ <nl> + @ @ - 1595 , 6 + 1609 , 7 @ @ <nl> this . field _ 70159 _ w = 0 . 0D ; <nl> this . field _ 70181 _ x = 0 . 0D ; <nl> this . field _ 70179 _ y = 0 . 0D ; <nl> @ @ - 97 , 7 + 121 , 7 @ @ <nl> this . func _ 70071 _ h _ ( ) ; <nl> if ( this . func _ 184218 _ aH ( ) ) { <nl> entity . func _ 184232 _ k ( this ) ; <nl> - @ @ - 1636 , 6 + 1648 , 7 @ @ <nl> + @ @ - 1636 , 6 + 1651 , 7 @ @ <nl> } <nl> } <nl> <nl> @ @ - 105 , 7 + 129 , 7 @ @ <nl> if ( p _ 184205 _ 2 _ | | this . func _ 184228 _ n ( p _ 184205 _ 1 _ ) & & p _ 184205 _ 1 _ . func _ 184219 _ q ( this ) ) { <nl> if ( this . func _ 184218 _ aH ( ) ) { <nl> this . func _ 184210 _ p ( ) ; <nl> - @ @ - 1663 , 6 + 1676 , 7 @ @ <nl> + @ @ - 1663 , 6 + 1679 , 7 @ @ <nl> public void func _ 184210 _ p ( ) { <nl> if ( this . field _ 184239 _ as ! = null ) { <nl> Entity entity = this . field _ 184239 _ as ; <nl> @ @ - 113 , 7 + 137 , 7 @ @ <nl> this . field _ 184239 _ as = null ; <nl> entity . func _ 184225 _ p ( this ) ; <nl> } <nl> - @ @ - 1789 , 10 + 1803 , 15 @ @ <nl> + @ @ - 1789 , 10 + 1806 , 15 @ @ <nl> return ! this . func _ 184188 _ bt ( ) . isEmpty ( ) ; <nl> } <nl> <nl> @ @ - 129 , 7 + 153 , 7 @ @ <nl> public boolean func _ 70093 _ af ( ) { <nl> return this . func _ 70083 _ f ( 1 ) ; <nl> } <nl> - @ @ - 2053 , 6 + 2072 , 14 @ @ <nl> + @ @ - 2053 , 6 + 2075 , 14 @ @ <nl> <nl> @ Nullable <nl> public Entity func _ 184204 _ a ( int p _ 184204 _ 1 _ ) { <nl> @ @ - 144 , 7 + 168 , 7 @ @ <nl> if ( ! this . field _ 70170 _ p . field _ 72995 _ K & & ! this . field _ 70128 _ L ) { <nl> this . field _ 70170 _ p . field _ 72984 _ F . func _ 76320 _ a ( " changeDimension " ) ; <nl> MinecraftServer minecraftserver = this . func _ 184102 _ h ( ) ; <nl> - @ @ - 2060 , 7 + 2087 , 7 @ @ <nl> + @ @ - 2060 , 7 + 2090 , 7 @ @ <nl> WorldServer worldserver = minecraftserver . func _ 71218 _ a ( i ) ; <nl> WorldServer worldserver1 = minecraftserver . func _ 71218 _ a ( p _ 184204 _ 1 _ ) ; <nl> this . field _ 71093 _ bK = p _ 184204 _ 1 _ ; <nl> @ @ - 153 , 7 + 177 , 7 @ @ <nl> worldserver1 = minecraftserver . func _ 200667 _ a ( DimensionType . OVERWORLD ) ; <nl> this . field _ 71093 _ bK = 0 ; <nl> } <nl> - @ @ - 2069 , 16 + 2096 , 17 @ @ <nl> + @ @ - 2069 , 16 + 2099 , 17 @ @ <nl> this . field _ 70128 _ L = false ; <nl> this . field _ 70170 _ p . field _ 72984 _ F . func _ 76320 _ a ( " reposition " ) ; <nl> BlockPos blockpos ; <nl> @ @ - 176 , 7 + 200 , 7 @ @ <nl> d0 = MathHelper . func _ 151237 _ a ( d0 * 8 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177726 _ b ( ) + 16 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177728 _ d ( ) - 16 . 0D ) ; <nl> d1 = MathHelper . func _ 151237 _ a ( d1 * 8 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177736 _ c ( ) + 16 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177733 _ e ( ) - 16 . 0D ) ; <nl> } <nl> - @ @ - 2087 , 8 + 2115 , 7 @ @ <nl> + @ @ - 2087 , 8 + 2118 , 7 @ @ <nl> d1 = ( double ) MathHelper . func _ 76125 _ a ( ( int ) d1 , - 29999872 , 29999872 ) ; <nl> float f = this . field _ 70177 _ z ; <nl> this . func _ 70012 _ b ( d0 , this . field _ 70163 _ u , d1 , 90 . 0F , 0 . 0F ) ; <nl> @ @ - 186 , 7 + 210 , 7 @ @ <nl> blockpos = new BlockPos ( this ) ; <nl> } <nl> <nl> - @ @ - 2097 , 7 + 2124 , 7 @ @ <nl> + @ @ - 2097 , 7 + 2127 , 7 @ @ <nl> Entity entity = this . func _ 200600 _ R ( ) . func _ 200721 _ a ( worldserver1 ) ; <nl> if ( entity ! = null ) { <nl> entity . func _ 180432 _ n ( this ) ; <nl> @ @ - 195 , 7 + 219 , 7 @ @ <nl> BlockPos blockpos1 = worldserver1 . func _ 205770 _ a ( Heightmap . Type . MOTION _ BLOCKING _ NO _ LEAVES , worldserver1 . func _ 175694 _ M ( ) ) ; <nl> entity . func _ 174828 _ a ( blockpos1 , entity . field _ 70177 _ z , entity . field _ 70125 _ A ) ; <nl> } else { <nl> - @ @ - 2591 , 4 + 2618 , 32 @ @ <nl> + @ @ - 2591 , 4 + 2621 , 49 @ @ <nl> public double func _ 212107 _ bY ( ) { <nl> return this . field _ 211517 _ W ; <nl> } <nl> @ @ - 227 , 4 + 251 , 21 @ @ <nl> + & & ( this instanceof EntityPlayer | | net . minecraftforge . event . ForgeEventFactory . getMobGriefingEvent ( field _ 70170 _ p , this ) ) <nl> + & & this . field _ 70130 _ N * this . field _ 70130 _ N * this . field _ 70131 _ O > 0 . 512F ; <nl> + } <nl> + + <nl> + + / * = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = Forge Start = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = * / <nl> + + / * * <nl> + + * Internal use for keeping track of entities that are tracked by a world , to <nl> + + * allow guarantees that entity position changes will force a chunk load , avoiding <nl> + + * potential issues with entity desyncing and bad chunk data . <nl> + + * / <nl> + + private boolean isAddedToWorld ; <nl> + + <nl> + + @ Override <nl> + + public final boolean isAddedToWorld ( ) { return this . isAddedToWorld ; } <nl> + + <nl> + + @ Override <nl> + + public void onAddedToWorld ( ) { this . isAddedToWorld = true ; } <nl> + + <nl> + + @ Override <nl> + + public void onRemovedFromWorld ( ) { this . isAddedToWorld = false ; } <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / entity / EntityLeashKnot . java . patch b / patches / minecraft / net / minecraft / entity / EntityLeashKnot . java . patch <nl> new file mode 100644 <nl> index 0000000 . . bbfe697 <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / entity / EntityLeashKnot . java . patch <nl> @ @ - 0 , 0 + 1 , 10 @ @ <nl> + - - - a / net / minecraft / entity / EntityLeashKnot . java <nl> + + + + b / net / minecraft / entity / EntityLeashKnot . java <nl> + @ @ - 38 , 6 + 38 , 7 @ @ <nl> + this . field _ 70165 _ t = ( double ) this . field _ 174861 _ a . func _ 177958 _ n ( ) + 0 . 5D ; <nl> + this . field _ 70163 _ u = ( double ) this . field _ 174861 _ a . func _ 177956 _ o ( ) + 0 . 5D ; <nl> + this . field _ 70161 _ v = ( double ) this . field _ 174861 _ a . func _ 177952 _ p ( ) + 0 . 5D ; <nl> + + if ( this . isAddedToWorld ( ) & & ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72866 _ a ( this , false ) ; / / Forge - Process chunk registration after moving . <nl> + } <nl> + <nl> + public void func _ 174859 _ a ( EnumFacing p _ 174859 _ 1 _ ) { <nl> diff - - git a / patches / minecraft / net / minecraft / entity / monster / EntityShulker . java . patch b / patches / minecraft / net / minecraft / entity / monster / EntityShulker . java . patch <nl> index e9e834f . . 5fe493e 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / monster / EntityShulker . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / monster / EntityShulker . java . patch <nl> @ @ - 1 , 6 + 1 , 14 @ @ <nl> - - - a / net / minecraft / entity / monster / EntityShulker . java <nl> + + + b / net / minecraft / entity / monster / EntityShulker . java <nl> - @ @ - 338 , 6 + 338 , 13 @ @ <nl> + @ @ - 245 , 6 + 245 , 7 @ @ <nl> + this . field _ 70165 _ t = ( double ) blockpos . func _ 177958 _ n ( ) + 0 . 5D ; <nl> + this . field _ 70163 _ u = ( double ) blockpos . func _ 177956 _ o ( ) ; <nl> + this . field _ 70161 _ v = ( double ) blockpos . func _ 177952 _ p ( ) + 0 . 5D ; <nl> + + if ( this . isAddedToWorld ( ) & & ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72866 _ a ( this , false ) ; / / Forge - Process chunk registration after moving . <nl> + this . field _ 70169 _ q = this . field _ 70165 _ t ; <nl> + this . field _ 70167 _ r = this . field _ 70163 _ u ; <nl> + this . field _ 70166 _ s = this . field _ 70161 _ v ; <nl> + @ @ - 338 , 6 + 339 , 13 @ @ <nl> } <nl> } <nl> <nl> diff - - git a / patches / minecraft / net / minecraft / network / NetHandlerPlayServer . java . patch b / patches / minecraft / net / minecraft / network / NetHandlerPlayServer . java . patch <nl> index 475fa9f . . 8aaf5e2 100644 <nl> - - - a / patches / minecraft / net / minecraft / network / NetHandlerPlayServer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / network / NetHandlerPlayServer . java . patch <nl> @ @ - 1 , 6 + 1 , 18 @ @ <nl> - - - a / net / minecraft / network / NetHandlerPlayServer . java <nl> + + + b / net / minecraft / network / NetHandlerPlayServer . java <nl> - @ @ - 1265 , 5 + 1265 , 7 @ @ <nl> + @ @ - 327 , 9 + 327 , 11 @ @ <nl> + } <nl> + <nl> + entity . func _ 70080 _ a ( d3 , d4 , d5 , f , f1 ) ; <nl> + + this . field _ 147369 _ b . func _ 70080 _ a ( d3 , d4 , d5 , this . field _ 147369 _ b . field _ 70177 _ z , this . field _ 147369 _ b . field _ 70125 _ A ) ; / / Forge - Resync player position on vehicle moving <nl> + boolean flag2 = worldserver . func _ 195586 _ b ( entity , entity . func _ 174813 _ aQ ( ) . func _ 186664 _ h ( 0 . 0625D ) ) ; <nl> + if ( flag & & ( flag1 | | ! flag2 ) ) { <nl> + entity . func _ 70080 _ a ( d0 , d1 , d2 , f , f1 ) ; <nl> + + this . field _ 147369 _ b . func _ 70080 _ a ( d0 , d1 , d2 , this . field _ 147369 _ b . field _ 70177 _ z , this . field _ 147369 _ b . field _ 70125 _ A ) ; / / Forge - Resync player position on vehicle moving <nl> + this . field _ 147371 _ a . func _ 179290 _ a ( new SPacketMoveVehicle ( entity ) ) ; <nl> + return ; <nl> + } <nl> + @ @ - 1265 , 5 + 1267 , 7 @ @ <nl> } <nl> <nl> public void func _ 147349 _ a ( CPacketCustomPayload p _ 147349 _ 1 _ ) { <nl> diff - - git a / patches / minecraft / net / minecraft / world / World . java . patch b / patches / minecraft / net / minecraft / world / World . java . patch <nl> index e7ef4b3 . . 47e9f61 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / World . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / World . java . patch <nl> @ @ - 235 , 6 + 235 , 23 @ @ <nl> this . func _ 72964 _ e ( i , j ) . func _ 76612 _ a ( p _ 72838 _ 1 _ ) ; <nl> this . field _ 72996 _ f . add ( p _ 72838 _ 1 _ ) ; <nl> this . func _ 72923 _ a ( p _ 72838 _ 1 _ ) ; <nl> + @ @ - 766 , 14 + 818 , 14 @ @ <nl> + for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) { <nl> + ( ( IWorldEventListener ) this . field _ 73021 _ x . get ( i ) ) . func _ 72703 _ a ( p _ 72923 _ 1 _ ) ; <nl> + } <nl> + - <nl> + + p _ 72923 _ 1 _ . onAddedToWorld ( ) ; <nl> + } <nl> + <nl> + public void func _ 72847 _ b ( Entity p _ 72847 _ 1 _ ) { <nl> + for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) { <nl> + ( ( IWorldEventListener ) this . field _ 73021 _ x . get ( i ) ) . func _ 72709 _ b ( p _ 72847 _ 1 _ ) ; <nl> + } <nl> + - <nl> + + p _ 72847 _ 1 _ . onRemovedFromWorld ( ) ; <nl> + } <nl> + <nl> + public void func _ 72900 _ e ( Entity p _ 72900 _ 1 _ ) { <nl> @ @ - 816 , 52 + 868 , 62 @ @ <nl> this . field _ 73021 _ x . add ( p _ 72954 _ 1 _ ) ; <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / world / chunk / Chunk . java . patch b / patches / minecraft / net / minecraft / world / chunk / Chunk . java . patch <nl> index c7fd732 . . cc1213d 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / chunk / Chunk . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / chunk / Chunk . java . patch <nl> @ @ - 17 , 7 + 17 , 23 @ @ <nl> } <nl> <nl> public Chunk ( World p _ i48703 _ 1 _ , ChunkPrimer p _ i48703 _ 2 _ , int p _ i48703 _ 3 _ , int p _ i48703 _ 4 _ ) { <nl> - @ @ - 1164 , 4 + 1165 , 30 @ @ <nl> + @ @ - 593 , 6 + 594 , 7 @ @ <nl> + p _ 76612 _ 1 _ . field _ 70162 _ ai = k ; <nl> + p _ 76612 _ 1 _ . field _ 70164 _ aj = this . field _ 76647 _ h ; <nl> + this . field _ 76645 _ j [ k ] . add ( p _ 76612 _ 1 _ ) ; <nl> + + this . func _ 76630 _ e ( ) ; / / Forge - ensure chunks are marked to save after an entity add <nl> + } <nl> + <nl> + public void func _ 201607 _ a ( Heightmap . Type p _ 201607 _ 1 _ , long [ ] p _ 201607 _ 2 _ ) { <nl> + @ @ - 613 , 6 + 615 , 7 @ @ <nl> + } <nl> + <nl> + this . field _ 76645 _ j [ p _ 76608 _ 2 _ ] . remove ( p _ 76608 _ 1 _ ) ; <nl> + + this . func _ 76630 _ e ( ) ; / / Forge - ensure chunks are marked to save after entity removals <nl> + } <nl> + <nl> + public boolean func _ 177444 _ d ( BlockPos p _ 177444 _ 1 _ ) { <nl> + @ @ - 1164 , 4 + 1167 , 30 @ @ <nl> QUEUED , <nl> CHECK ; <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / common / extensions / IForgeEntity . java b / src / main / java / net / minecraftforge / common / extensions / IForgeEntity . java <nl> index f0d07fd . . 64cbc6e 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / extensions / IForgeEntity . java <nl> + + + b / src / main / java / net / minecraftforge / common / extensions / IForgeEntity . java <nl> @ @ - 181 , 4 + 181 , 28 @ @ public interface IForgeEntity extends ICapabilitySerializable < NBTTagCompound > <nl> if ( forSpawnCount & & ( this instanceof EntityLiving ) & & ( ( EntityLiving ) this ) . isNoDespawnRequired ( ) ) return false ; <nl> return type . getBaseClass ( ) . isAssignableFrom ( this . getClass ( ) ) ; <nl> } <nl> + <nl> + / * * <nl> + * Gets whether this entity has been added to a world ( for tracking ) . Specifically <nl> + * between the times when an entity is added to a world and the entity being removed <nl> + * from the world ' s tracked lists . See { @ link World # onEntityAdded ( Entity ) } and <nl> + * { @ link World # onEntityRemoved ( Entity ) } . <nl> + * <nl> + * @ return True if this entity is being tracked by a world <nl> + * / <nl> + boolean isAddedToWorld ( ) ; <nl> + <nl> + / * * <nl> + * Called after the entity has been added to the world ' s <nl> + * ticking list . Can be overriden , but needs to call super <nl> + * to prevent MC - 136995 . <nl> + * / <nl> + void onAddedToWorld ( ) ; <nl> + <nl> + / * * <nl> + * Called after the entity has been removed to the world ' s <nl> + * ticking list . Can be overriden , but needs to call super <nl> + * to prevent MC - 136995 . <nl> + * / <nl> + void onRemovedFromWorld ( ) ; <nl> }
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / block / Block . java . patch b / patches / minecraft / net / minecraft / block / Block . java . patch <nl> index ab5d77d . . cca9797 100644 <nl> - - - a / patches / minecraft / net / minecraft / block / Block . java . patch <nl> + + + b / patches / minecraft / net / minecraft / block / Block . java . patch <nl> @ @ - 16 , 7 + 16 , 15 @ @ <nl> public static final AxisAlignedBB field _ 185505 _ j = new AxisAlignedBB ( 0 . 0D , 0 . 0D , 0 . 0D , 1 . 0D , 1 . 0D , 1 . 0D ) ; <nl> @ Nullable <nl> public static final AxisAlignedBB field _ 185506 _ k = null ; <nl> - @ @ - 319 , 7 + 320 , 7 @ @ <nl> + @ @ - 75 , 6 + 76 , 7 @ @ <nl> + public float field _ 149763 _ I ; <nl> + protected final Material field _ 149764 _ J ; <nl> + protected final MapColor field _ 181083 _ K ; <nl> + + @ Deprecated / / Forge : State / world / pos / entity sensitive version below <nl> + public float field _ 149765 _ K ; <nl> + protected final BlockStateContainer field _ 176227 _ L ; <nl> + private IBlockState field _ 176228 _ M ; <nl> + @ @ - 319 , 7 + 321 , 7 @ @ <nl> <nl> public boolean func _ 176200 _ f ( IBlockAccess p _ 176200 _ 1 _ , BlockPos p _ 176200 _ 2 _ ) <nl> { <nl> @ @ - 25 , 7 + 33 , 7 @ @ <nl> } <nl> <nl> public Block func _ 149711 _ c ( float p _ 149711 _ 1 _ ) <nl> - @ @ - 357 , 9 + 358 , 10 @ @ <nl> + @ @ - 357 , 9 + 359 , 10 @ @ <nl> return this . field _ 149789 _ z ; <nl> } <nl> <nl> @ @ - 37 , 7 + 45 , 7 @ @ <nl> } <nl> <nl> @ Deprecated <nl> - @ @ - 372 , 13 + 374 , 13 @ @ <nl> + @ @ - 372 , 13 + 375 , 13 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public int func _ 185484 _ c ( IBlockState p _ 185484 _ 1 _ , IBlockAccess p _ 185484 _ 2 _ , BlockPos p _ 185484 _ 3 _ ) <nl> { <nl> @ @ - 53 , 7 + 61 , 7 @ @ <nl> } <nl> else <nl> { <nl> - @ @ - 442 , 7 + 444 , 7 @ @ <nl> + @ @ - 442 , 7 + 445 , 7 @ @ <nl> } <nl> } <nl> <nl> @ @ - 62 , 7 + 70 , 7 @ @ <nl> } <nl> <nl> @ Deprecated <nl> - @ @ - 534 , 6 + 536 , 10 @ @ <nl> + @ @ - 534 , 6 + 537 , 10 @ @ <nl> <nl> public void func _ 180663 _ b ( World p _ 180663 _ 1 _ , BlockPos p _ 180663 _ 2 _ , IBlockState p _ 180663 _ 3 _ ) <nl> { <nl> @ @ - 73 , 7 + 81 , 7 @ @ <nl> } <nl> <nl> public int func _ 149745 _ a ( Random p _ 149745 _ 1 _ ) <nl> - @ @ - 549 , 16 + 555 , 7 @ @ <nl> + @ @ - 549 , 16 + 556 , 7 @ @ <nl> @ Deprecated <nl> public float func _ 180647 _ a ( IBlockState p _ 180647 _ 1 _ , EntityPlayer p _ 180647 _ 2 _ , World p _ 180647 _ 3 _ , BlockPos p _ 180647 _ 4 _ ) <nl> { <nl> @ @ - 91 , 7 + 99 , 7 @ @ <nl> } <nl> <nl> public final void func _ 176226 _ b ( World p _ 176226 _ 1 _ , BlockPos p _ 176226 _ 2 _ , IBlockState p _ 176226 _ 3 _ , int p _ 176226 _ 4 _ ) <nl> - @ @ - 568 , 20 + 565 , 16 @ @ <nl> + @ @ - 568 , 20 + 566 , 16 @ @ <nl> <nl> public void func _ 180653 _ a ( World p _ 180653 _ 1 _ , BlockPos p _ 180653 _ 2 _ , IBlockState p _ 180653 _ 3 _ , float p _ 180653 _ 4 _ , int p _ 180653 _ 5 _ ) <nl> { <nl> @ @ - 117 , 7 + 125 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 589 , 8 + 582 , 13 @ @ <nl> + @ @ - 589 , 8 + 583 , 13 @ @ <nl> <nl> public static void func _ 180635 _ a ( World p _ 180635 _ 0 _ , BlockPos p _ 180635 _ 1 _ , ItemStack p _ 180635 _ 2 _ ) <nl> { <nl> @ @ - 132 , 7 + 140 , 7 @ @ <nl> float f = 0 . 5F ; <nl> double d0 = ( double ) ( p _ 180635 _ 0 _ . field _ 73012 _ v . nextFloat ( ) * 0 . 5F ) + 0 . 25D ; <nl> double d1 = ( double ) ( p _ 180635 _ 0 _ . field _ 73012 _ v . nextFloat ( ) * 0 . 5F ) + 0 . 25D ; <nl> - @ @ - 619 , 6 + 617 , 7 @ @ <nl> + @ @ - 619 , 6 + 618 , 7 @ @ <nl> return 0 ; <nl> } <nl> <nl> @ @ - 140 , 7 + 148 , 7 @ @ <nl> public float func _ 149638 _ a ( Entity p _ 149638 _ 1 _ ) <nl> { <nl> return this . field _ 149781 _ w / 5 . 0F ; <nl> - @ @ - 657 , 7 + 656 , 7 @ @ <nl> + @ @ - 657 , 7 + 657 , 7 @ @ <nl> <nl> public boolean func _ 176196 _ c ( World p _ 176196 _ 1 _ , BlockPos p _ 176196 _ 2 _ ) <nl> { <nl> @ @ - 149 , 7 + 157 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 180639 _ a ( World p _ 180639 _ 1 _ , BlockPos p _ 180639 _ 2 _ , IBlockState p _ 180639 _ 3 _ , EntityPlayer p _ 180639 _ 4 _ , EnumHand p _ 180639 _ 5 _ , EnumFacing p _ 180639 _ 6 _ , float p _ 180639 _ 7 _ , float p _ 180639 _ 8 _ , float p _ 180639 _ 9 _ ) <nl> - @ @ - 669 , 6 + 668 , 8 @ @ <nl> + @ @ - 669 , 6 + 669 , 8 @ @ <nl> { <nl> } <nl> <nl> @ @ - 158 , 7 + 166 , 7 @ @ <nl> public IBlockState func _ 180642 _ a ( World p _ 180642 _ 1 _ , BlockPos p _ 180642 _ 2 _ , EnumFacing p _ 180642 _ 3 _ , float p _ 180642 _ 4 _ , float p _ 180642 _ 5 _ , float p _ 180642 _ 6 _ , int p _ 180642 _ 7 _ , EntityLivingBase p _ 180642 _ 8 _ ) <nl> { <nl> return this . func _ 176203 _ a ( p _ 180642 _ 7 _ ) ; <nl> - @ @ - 710 , 21 + 711 , 35 @ @ <nl> + @ @ - 710 , 21 + 712 , 35 @ @ <nl> p _ 180657 _ 2 _ . func _ 71029 _ a ( StatList . func _ 188055 _ a ( this ) ) ; <nl> p _ 180657 _ 2 _ . func _ 71020 _ j ( 0 . 005F ) ; <nl> <nl> @ @ - 197 , 7 + 205 , 7 @ @ <nl> } <nl> <nl> protected ItemStack func _ 180643 _ i ( IBlockState p _ 180643 _ 1 _ ) <nl> - @ @ - 810 , 12 + 825 , 12 @ @ <nl> + @ @ - 810 , 12 + 826 , 12 @ @ <nl> p _ 176216 _ 2 _ . field _ 70181 _ x = 0 . 0D ; <nl> } <nl> <nl> @ @ - 211 , 7 + 219 , 7 @ @ <nl> public void func _ 149666 _ a ( CreativeTabs p _ 149666 _ 1 _ , NonNullList < ItemStack > p _ 149666 _ 2 _ ) <nl> { <nl> p _ 149666 _ 2 _ . add ( new ItemStack ( this ) ) ; <nl> - @ @ - 831 , 7 + 846 , 6 @ @ <nl> + @ @ - 831 , 7 + 847 , 6 @ @ <nl> { <nl> } <nl> <nl> @ @ - 219 , 7 + 227 , 7 @ @ <nl> public CreativeTabs func _ 149708 _ J ( ) <nl> { <nl> return this . field _ 149772 _ a ; <nl> - @ @ - 921 , 6 + 935 , 7 @ @ <nl> + @ @ - 921 , 6 + 936 , 7 @ @ <nl> } <nl> } <nl> <nl> @ @ - 227 , 7 + 235 , 7 @ @ <nl> public SoundType func _ 185467 _ w ( ) <nl> { <nl> return this . field _ 149762 _ H ; <nl> - @ @ - 936 , 6 + 951 , 1250 @ @ <nl> + @ @ - 936 , 6 + 952 , 1287 @ @ <nl> { <nl> } <nl> <nl> @ @ - 236 , 6 + 244 , 43 @ @ <nl> + protected ThreadLocal < EntityPlayer > harvesters = new ThreadLocal ( ) ; <nl> + private ThreadLocal < IBlockState > silk _ check _ state = new ThreadLocal ( ) ; <nl> + protected static java . util . Random RANDOM = new java . util . Random ( ) ; / / Useful for random things without a seed . <nl> + + <nl> + + / * * <nl> + + * Gets the slipperiness at the given location at the given state . Normally <nl> + + * between 0 and 1 . <nl> + + * < p > <nl> + + * Note that entities may reduce slipperiness by a certain factor of their own ; <nl> + + * for { @ link net . minecraft . entity . EntityLivingBase } , this is { @ code . 91 } . <nl> + + * { @ link net . minecraft . entity . item . EntityItem } uses { @ code . 98 } , and <nl> + + * { @ link net . minecraft . entity . projectile . EntityFishHook } uses { @ code . 92 } . <nl> + + * <nl> + + * @ param state state of the block <nl> + + * @ param world the world <nl> + + * @ param pos the position in the world <nl> + + * @ param entity the entity in question <nl> + + * @ return the factor by which the entity ' s motion should be multiplied <nl> + + * / <nl> + + public float getSlipperiness ( IBlockState state , IBlockAccess world , BlockPos pos , @ Nullable Entity entity ) <nl> + + { <nl> + + return field _ 149765 _ K ; <nl> + + } <nl> + + <nl> + + / * * <nl> + + * Sets the base slipperiness level . Normally between 0 and 1 . <nl> + + * < p > <nl> + + * < b > Calling this method may have no effect on the function of this block < / b > , <nl> + + * or may not have the expected result . This block is free to caclculate <nl> + + * its slipperiness arbitrarily . This method is guaranteed to work on the <nl> + + * base { @ code Block } class . <nl> + + * <nl> + + * @ param slipperiness the base slipperiness of this block <nl> + + * @ see # getSlipperiness ( IBlockState , IBlockAccess , BlockPos , Entity ) <nl> + + * / <nl> + + public void setDefaultSlipperiness ( float slipperiness ) <nl> + + { <nl> + + this . field _ 149765 _ K = slipperiness ; <nl> + + } <nl> + + <nl> + / * * <nl> + * Get a light value for this block , taking into account the given state and coordinates , normal ranges are between 0 and 15 <nl> + * <nl> @ @ - 1478 , 7 + 1523 , 7 @ @ <nl> public static void func _ 149671 _ p ( ) <nl> { <nl> func _ 176215 _ a ( 0 , field _ 176230 _ a , ( new BlockAir ( ) ) . func _ 149663 _ c ( " air " ) ) ; <nl> - @ @ - 1232 , 31 + 2491 , 6 @ @ <nl> + @ @ - 1232 , 31 + 2529 , 6 @ @ <nl> block15 . field _ 149783 _ u = flag ; <nl> } <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / entity / EntityFlying . java . patch b / patches / minecraft / net / minecraft / entity / EntityFlying . java . patch <nl> new file mode 100644 <nl> index 0000000 . . 6b4ceb1 <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / entity / EntityFlying . java . patch <nl> @ @ - 0 , 0 + 1 , 24 @ @ <nl> + - - - . . / src - base / minecraft / net / minecraft / entity / EntityFlying . java <nl> + + + + . . / src - work / minecraft / net / minecraft / entity / EntityFlying . java <nl> + @ @ - 44 , 7 + 44 , 9 @ @ <nl> + <nl> + if ( this . field _ 70122 _ E ) <nl> + { <nl> + - f = this . field _ 70170 _ p . func _ 180495 _ p ( new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 91F ; <nl> + + BlockPos underPos = new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ; <nl> + + IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( underPos ) ; <nl> + + f = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , underPos , this ) * 0 . 91F ; <nl> + } <nl> + <nl> + float f1 = 0 . 16277136F / ( f * f * f ) ; <nl> + @ @ - 53 , 7 + 55 , 9 @ @ <nl> + <nl> + if ( this . field _ 70122 _ E ) <nl> + { <nl> + - f = this . field _ 70170 _ p . func _ 180495 _ p ( new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 91F ; <nl> + + BlockPos underPos = new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ; <nl> + + IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( underPos ) ; <nl> + + f = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , underPos , this ) * 0 . 91F ; <nl> + } <nl> + <nl> + this . func _ 70091 _ d ( MoverType . SELF , this . field _ 70159 _ w , this . field _ 70181 _ x , this . field _ 70179 _ y ) ; <nl> diff - - git a / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch b / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch <nl> index a5dc1bd . . 26b82f6 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch <nl> @ @ - 232 , 7 + 232 , 27 @ @ <nl> } <nl> <nl> protected void func _ 70629 _ bd ( ) <nl> - @ @ - 2054 , 6 + 2077 , 7 @ @ <nl> + @ @ - 1874 , 7 + 1897 , 8 @ @ <nl> + <nl> + if ( this . field _ 70122 _ E ) <nl> + { <nl> + - f6 = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos $ pooledmutableblockpos ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 91F ; <nl> + + IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos $ pooledmutableblockpos ) ; <nl> + + f6 = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , blockpos $ pooledmutableblockpos , this ) * 0 . 91F ; <nl> + } <nl> + <nl> + float f7 = 0 . 16277136F / ( f6 * f6 * f6 ) ; <nl> + @ @ - 1894 , 7 + 1918 , 8 @ @ <nl> + <nl> + if ( this . field _ 70122 _ E ) <nl> + { <nl> + - f6 = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos $ pooledmutableblockpos . func _ 189532 _ c ( this . field _ 70165 _ t , this . func _ 174813 _ aQ ( ) . field _ 72338 _ b - 1 . 0D , this . field _ 70161 _ v ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 91F ; <nl> + + IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos $ pooledmutableblockpos . func _ 189532 _ c ( this . field _ 70165 _ t , this . func _ 174813 _ aQ ( ) . field _ 72338 _ b - 1 . 0D , this . field _ 70161 _ v ) ) ; <nl> + + f6 = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , blockpos $ pooledmutableblockpos , this ) * 0 . 91F ; <nl> + } <nl> + <nl> + if ( this . func _ 70617 _ f _ ( ) ) <nl> + @ @ - 2054 , 6 + 2079 , 7 @ @ <nl> <nl> public void func _ 70071 _ h _ ( ) <nl> { <nl> @ @ - 240 , 7 + 260 , 7 @ @ <nl> super . func _ 70071 _ h _ ( ) ; <nl> this . func _ 184608 _ ct ( ) ; <nl> <nl> - @ @ - 2096 , 7 + 2120 , 9 @ @ <nl> + @ @ - 2096 , 7 + 2122 , 9 @ @ <nl> <nl> if ( ! ItemStack . func _ 77989 _ b ( itemstack1 , itemstack ) ) <nl> { <nl> @ @ - 250 , 7 + 270 , 7 @ @ <nl> <nl> if ( ! itemstack . func _ 190926 _ b ( ) ) <nl> { <nl> - @ @ - 2575 , 6 + 2601 , 40 @ @ <nl> + @ @ - 2575 , 6 + 2603 , 40 @ @ <nl> this . field _ 70752 _ e = true ; <nl> } <nl> <nl> @ @ - 291 , 7 + 311 , 7 @ @ <nl> public abstract EnumHandSide func _ 184591 _ cq ( ) ; <nl> <nl> public boolean func _ 184587 _ cr ( ) <nl> - @ @ - 2595 , 12 + 2655 , 19 @ @ <nl> + @ @ - 2595 , 12 + 2657 , 19 @ @ <nl> <nl> if ( itemstack = = this . field _ 184627 _ bm ) <nl> { <nl> @ @ - 312 , 7 + 332 , 7 @ @ <nl> { <nl> this . func _ 71036 _ o ( ) ; <nl> } <nl> - @ @ - 2618 , 8 + 2685 , 10 @ @ <nl> + @ @ - 2618 , 8 + 2687 , 10 @ @ <nl> <nl> if ( ! itemstack . func _ 190926 _ b ( ) & & ! this . func _ 184587 _ cr ( ) ) <nl> { <nl> @ @ - 324 , 7 + 344 , 7 @ @ <nl> <nl> if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) <nl> { <nl> - @ @ - 2700 , 7 + 2769 , 9 @ @ <nl> + @ @ - 2700 , 7 + 2771 , 9 @ @ <nl> if ( ! this . field _ 184627 _ bm . func _ 190926 _ b ( ) & & this . func _ 184587 _ cr ( ) ) <nl> { <nl> this . func _ 184584 _ a ( this . field _ 184627 _ bm , 16 ) ; <nl> @ @ - 335 , 7 + 355 , 7 @ @ <nl> this . func _ 184602 _ cy ( ) ; <nl> } <nl> } <nl> - @ @ - 2724 , 7 + 2795 , 8 @ @ <nl> + @ @ - 2724 , 7 + 2797 , 8 @ @ <nl> { <nl> if ( ! this . field _ 184627 _ bm . func _ 190926 _ b ( ) ) <nl> { <nl> @ @ - 345 , 7 + 365 , 7 @ @ <nl> } <nl> <nl> this . func _ 184602 _ cy ( ) ; <nl> - @ @ - 2852 , 6 + 2924 , 31 @ @ <nl> + @ @ - 2852 , 6 + 2926 , 31 @ @ <nl> return true ; <nl> } <nl> <nl> diff - - git a / patches / minecraft / net / minecraft / entity / item / EntityBoat . java . patch b / patches / minecraft / net / minecraft / entity / item / EntityBoat . java . patch <nl> new file mode 100644 <nl> index 0000000 . . 46a9889 <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / entity / item / EntityBoat . java . patch <nl> @ @ - 0 , 0 + 1 , 32 @ @ <nl> + - - - . . / src - base / minecraft / net / minecraft / entity / item / EntityBoat . java <nl> + + + + . . / src - work / minecraft / net / minecraft / entity / item / EntityBoat . java <nl> + @ @ - 508 , 7 + 508 , 7 @ @ <nl> + <nl> + if ( ! list . isEmpty ( ) ) <nl> + { <nl> + - f + = iblockstate . func _ 177230 _ c ( ) . field _ 149765 _ K ; <nl> + + f + = iblockstate . func _ 177230 _ c ( ) . getSlipperiness ( iblockstate , this . field _ 70170 _ p , blockpos $ pooledmutableblockpos , this ) ; <nl> + + + k1 ; <nl> + } <nl> + <nl> + @ @ - 980 , 4 + 980 , 20 @ @ <nl> + return values ( ) [ 0 ] ; <nl> + } <nl> + } <nl> + + <nl> + + / / Forge : Fix MC - 119811 by instantly completing lerp on board <nl> + + @ Override <nl> + + protected void func _ 184200 _ o ( Entity passenger ) <nl> + + { <nl> + + super . func _ 184200 _ o ( passenger ) ; <nl> + + if ( this . func _ 184186 _ bw ( ) & & this . field _ 184476 _ at > 0 ) <nl> + + { <nl> + + this . field _ 184476 _ at = 0 ; <nl> + + this . field _ 70165 _ t = this . field _ 70281 _ h ; <nl> + + this . field _ 70163 _ u = this . field _ 184477 _ av ; <nl> + + this . field _ 70161 _ v = this . field _ 184478 _ aw ; <nl> + + this . field _ 70177 _ z = ( float ) this . field _ 70273 _ g ; <nl> + + this . field _ 70125 _ A = ( float ) this . field _ 184479 _ ay ; <nl> + + } <nl> + + } <nl> + } <nl> diff - - git a / patches / minecraft / net / minecraft / entity / item / EntityItem . java . patch b / patches / minecraft / net / minecraft / entity / item / EntityItem . java . patch <nl> index 75fa7b0 . . 1eb7106 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / item / EntityItem . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / item / EntityItem . java . patch <nl> @ @ - 28 , 7 + 28 , 18 @ @ <nl> if ( this . func _ 92059 _ d ( ) . func _ 190926 _ b ( ) ) <nl> { <nl> this . func _ 70106 _ y ( ) ; <nl> - @ @ - 167 , 8 + 174 , 16 @ @ <nl> + @ @ - 135 , 7 + 142 , 9 @ @ <nl> + <nl> + if ( this . field _ 70122 _ E ) <nl> + { <nl> + - f = this . field _ 70170 _ p . func _ 180495 _ p ( new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 98F ; <nl> + + BlockPos underPos = new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ; <nl> + + net . minecraft . block . state . IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( underPos ) ; <nl> + + f = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , underPos , this ) * 0 . 98F ; <nl> + } <nl> + <nl> + this . field _ 70159 _ w * = ( double ) f ; <nl> + @ @ - 167 , 8 + 176 , 16 @ @ <nl> } <nl> } <nl> <nl> @ @ - 46 , 7 + 57 , 7 @ @ <nl> this . func _ 70106 _ y ( ) ; <nl> } <nl> } <nl> - @ @ - 225 , 6 + 240 , 10 @ @ <nl> + @ @ - 225 , 6 + 242 , 10 @ @ <nl> { <nl> return false ; <nl> } <nl> @ @ - 57 , 7 + 68 , 7 @ @ <nl> else <nl> { <nl> itemstack1 . func _ 190917 _ f ( itemstack . func _ 190916 _ E ( ) ) ; <nl> - @ @ - 282 , 6 + 301 , 7 @ @ <nl> + @ @ - 282 , 6 + 303 , 7 @ @ <nl> <nl> public boolean func _ 70097 _ a ( DamageSource p _ 70097 _ 1 _ , float p _ 70097 _ 2 _ ) <nl> { <nl> @ @ - 65 , 7 + 76 , 7 @ @ <nl> if ( this . func _ 180431 _ b ( p _ 70097 _ 1 _ ) ) <nl> { <nl> return false ; <nl> - @ @ - 314 , 6 + 334 , 7 @ @ <nl> + @ @ - 314 , 6 + 336 , 7 @ @ <nl> p _ 70014 _ 1 _ . func _ 74777 _ a ( " Health " , ( short ) this . field _ 70291 _ e ) ; <nl> p _ 70014 _ 1 _ . func _ 74777 _ a ( " Age " , ( short ) this . field _ 70292 _ b ) ; <nl> p _ 70014 _ 1 _ . func _ 74777 _ a ( " PickupDelay " , ( short ) this . field _ 145804 _ b ) ; <nl> @ @ - 73 , 7 + 84 , 7 @ @ <nl> <nl> if ( this . func _ 145800 _ j ( ) ! = null ) <nl> { <nl> - @ @ - 358 , 18 + 379 , 24 @ @ <nl> + @ @ - 358 , 18 + 381 , 24 @ @ <nl> { <nl> this . func _ 70106 _ y ( ) ; <nl> } <nl> @ @ - 99 , 7 + 110 , 7 @ @ <nl> p _ 70100 _ 1 _ . func _ 71001 _ a ( this , i ) ; <nl> <nl> if ( itemstack . func _ 190926 _ b ( ) ) <nl> - @ @ - 476 , 6 + 503 , 6 @ @ <nl> + @ @ - 476 , 6 + 505 , 6 @ @ <nl> public void func _ 174870 _ v ( ) <nl> { <nl> this . func _ 174871 _ r ( ) ; <nl> diff - - git a / patches / minecraft / net / minecraft / entity / item / EntityXPOrb . java . patch b / patches / minecraft / net / minecraft / entity / item / EntityXPOrb . java . patch <nl> index dd711a5 . . 8440a70 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / item / EntityXPOrb . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / item / EntityXPOrb . java . patch <nl> @ @ - 1 , 6 + 1 , 17 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / entity / item / EntityXPOrb . java <nl> + + + . . / src - work / minecraft / net / minecraft / entity / item / EntityXPOrb . java <nl> - @ @ - 170 , 6 + 170 , 7 @ @ <nl> + @ @ - 137 , 7 + 137 , 9 @ @ <nl> + <nl> + if ( this . field _ 70122 _ E ) <nl> + { <nl> + - f = this . field _ 70170 _ p . func _ 180495 _ p ( new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 98F ; <nl> + + BlockPos underPos = new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ; <nl> + + net . minecraft . block . state . IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( underPos ) ; <nl> + + f = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , underPos , this ) * 0 . 98F ; <nl> + } <nl> + <nl> + this . field _ 70159 _ w * = ( double ) f ; <nl> + @ @ - 170 , 6 + 172 , 7 @ @ <nl> <nl> public boolean func _ 70097 _ a ( DamageSource p _ 70097 _ 1 _ , float p _ 70097 _ 2 _ ) <nl> { <nl> @ @ - 8 , 7 + 19 , 7 @ @ <nl> if ( this . func _ 180431 _ b ( p _ 70097 _ 1 _ ) ) <nl> { <nl> return false ; <nl> - @ @ - 208 , 6 + 209 , 7 @ @ <nl> + @ @ - 208 , 6 + 211 , 7 @ @ <nl> { <nl> if ( this . field _ 70532 _ c = = 0 & & p _ 70100 _ 1 _ . field _ 71090 _ bL = = 0 ) <nl> { <nl> diff - - git a / src / test / java / net / minecraftforge / debug / SlipperinessTest . java b / src / test / java / net / minecraftforge / debug / SlipperinessTest . java <nl> new file mode 100644 <nl> index 0000000 . . 76fa5ff <nl> - - - / dev / null <nl> + + + b / src / test / java / net / minecraftforge / debug / SlipperinessTest . java <nl> @ @ - 0 , 0 + 1 , 42 @ @ <nl> + package net . minecraftforge . debug ; <nl> + <nl> + import net . minecraft . block . Block ; <nl> + import net . minecraft . block . material . Material ; <nl> + import net . minecraft . block . state . IBlockState ; <nl> + import net . minecraft . entity . Entity ; <nl> + import net . minecraft . entity . item . EntityBoat ; <nl> + import net . minecraft . item . Item ; <nl> + import net . minecraft . item . ItemBlock ; <nl> + import net . minecraft . util . math . BlockPos ; <nl> + import net . minecraft . world . IBlockAccess ; <nl> + import net . minecraftforge . event . RegistryEvent ; <nl> + import net . minecraftforge . fml . common . Mod ; <nl> + import net . minecraftforge . fml . common . Mod . EventBusSubscriber ; <nl> + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; <nl> + <nl> + @ Mod ( modid = " slipperiness _ test " , name = " Slipperiness Test " , version = " 0 . 0 . 0 " ) <nl> + @ EventBusSubscriber <nl> + public class SlipperinessTest <nl> + { <nl> + public static final Block BB _ BLOCK = new Block ( Material . PACKED _ ICE ) <nl> + { <nl> + @ Override <nl> + public float getSlipperiness ( IBlockState state , IBlockAccess world , BlockPos pos , Entity entity ) <nl> + { <nl> + return entity instanceof EntityBoat ? 2 : super . getSlipperiness ( state , world , pos , entity ) ; <nl> + } <nl> + } . setUnlocalizedName ( " boat _ blaster " ) . setRegistryName ( " boat _ blaster " ) ; <nl> + <nl> + @ SubscribeEvent <nl> + public static void registerBlocks ( RegistryEvent . Register < Block > e ) <nl> + { <nl> + e . getRegistry ( ) . register ( BB _ BLOCK ) ; <nl> + } <nl> + <nl> + @ SubscribeEvent <nl> + public static void registerItems ( RegistryEvent . Register < Item > e ) <nl> + { <nl> + e . getRegistry ( ) . register ( new ItemBlock ( BB _ BLOCK ) . setRegistryName ( BB _ BLOCK . getRegistryName ( ) ) ) ; <nl> + } <nl> + } <nl> +

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / entity / Entity . java . patch b / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 index 3319308 . . c322b02 100644 
 - - - a / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 @ @ - 27 , 7 + 27 , 23 @ @ 
 } 
 
 public EntityType < ? > func _ 200600 _ R ( ) { 
 - @ @ - 845 , 7 + 847 , 7 @ @ 
 + @ @ - 324 , 6 + 326 , 7 @ @ 
 + this . field _ 70165 _ t = p _ 70107 _ 1 _ ; 
 + this . field _ 70163 _ u = p _ 70107 _ 3 _ ; 
 + this . field _ 70161 _ v = p _ 70107 _ 5 _ ; 
 + + if ( this . isAddedToWorld ( ) & & ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72866 _ a ( this , false ) ; / / Forge - Process chunk registration after moving . 
 + float f = this . field _ 70130 _ N / 2 . 0F ; 
 + float f1 = this . field _ 70131 _ O ; 
 + this . func _ 174826 _ a ( new AxisAlignedBB ( p _ 70107 _ 1 _ - ( double ) f , p _ 70107 _ 3 _ , p _ 70107 _ 5 _ - ( double ) f , p _ 70107 _ 1 _ + ( double ) f , p _ 70107 _ 3 _ + ( double ) f1 , p _ 70107 _ 5 _ + ( double ) f ) ) ; 
 + @ @ - 794 , 6 + 797 , 7 @ @ 
 + this . field _ 70165 _ t = ( axisalignedbb . field _ 72340 _ a + axisalignedbb . field _ 72336 _ d ) / 2 . 0D ; 
 + this . field _ 70163 _ u = axisalignedbb . field _ 72338 _ b ; 
 + this . field _ 70161 _ v = ( axisalignedbb . field _ 72339 _ c + axisalignedbb . field _ 72334 _ f ) / 2 . 0D ; 
 + + if ( this . isAddedToWorld ( ) & & ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72866 _ a ( this , false ) ; / / Forge - Process chunk registration after moving . 
 + } 
 + 
 + protected SoundEvent func _ 184184 _ Z ( ) { 
 + @ @ - 845 , 7 + 849 , 7 @ @ 
 
 protected void func _ 180429 _ a ( BlockPos p _ 180429 _ 1 _ , IBlockState p _ 180429 _ 2 _ ) { 
 if ( ! p _ 180429 _ 2 _ . func _ 185904 _ a ( ) . func _ 76224 _ d ( ) ) { 
 @ @ - 36 , 7 + 52 , 7 @ @ 
 this . func _ 184185 _ a ( soundtype . func _ 185844 _ d ( ) , soundtype . func _ 185843 _ a ( ) * 0 . 15F , soundtype . func _ 185847 _ b ( ) ) ; 
 } 
 } 
 - @ @ - 1040 , 6 + 1042 , 7 @ @ 
 + @ @ - 1040 , 6 + 1044 , 7 @ @ 
 int k = MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ; 
 BlockPos blockpos = new BlockPos ( i , j , k ) ; 
 IBlockState iblockstate = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos ) ; 
 @ @ - 44 , 7 + 60 , 7 @ @ 
 if ( iblockstate . func _ 185901 _ i ( ) ! = EnumBlockRenderType . INVISIBLE ) { 
 this . field _ 70170 _ p . func _ 195594 _ a ( new BlockParticleData ( Particles . field _ 197611 _ d , iblockstate ) , this . field _ 70165 _ t + ( ( double ) this . field _ 70146 _ Z . nextFloat ( ) - 0 . 5D ) * ( double ) this . field _ 70130 _ N , this . func _ 174813 _ aQ ( ) . field _ 72338 _ b + 0 . 1D , this . field _ 70161 _ v + ( ( double ) this . field _ 70146 _ Z . nextFloat ( ) - 0 . 5D ) * ( double ) this . field _ 70130 _ N , - this . field _ 70159 _ w * 4 . 0D , 1 . 5D , - this . field _ 70179 _ y * 4 . 0D ) ; 
 } 
 - @ @ - 1053 , 7 + 1056 , 7 @ @ 
 + @ @ - 1053 , 7 + 1058 , 7 @ @ 
 double d0 = this . field _ 70163 _ u + ( double ) this . func _ 70047 _ e ( ) ; 
 BlockPos blockpos = new BlockPos ( this . field _ 70165 _ t , d0 , this . field _ 70161 _ v ) ; 
 IFluidState ifluidstate = this . field _ 70170 _ p . func _ 204610 _ c ( blockpos ) ; 
 @ @ - 53 , 7 + 69 , 15 @ @ 
 } 
 } 
 
 - @ @ - 1370 , 6 + 1373 , 7 @ @ 
 + @ @ - 1122 , 6 + 1127 , 7 @ @ 
 + this . field _ 70126 _ B - = 360 . 0F ; 
 + } 
 + 
 + + if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72964 _ e ( ( int ) Math . floor ( this . field _ 70165 _ t ) > > 4 , ( int ) Math . floor ( this . field _ 70161 _ v ) > > 4 ) ; / / Forge - ensure target chunk is loaded . 
 + this . func _ 70107 _ b ( this . field _ 70165 _ t , this . field _ 70163 _ u , this . field _ 70161 _ v ) ; 
 + this . func _ 70101 _ b ( p _ 70080 _ 7 _ , p _ 70080 _ 8 _ ) ; 
 + } 
 + @ @ - 1370 , 6 + 1376 , 7 @ @ 
 if ( this . field _ 184238 _ ar ) { 
 p _ 189511 _ 1 _ . func _ 74757 _ a ( " Glowing " , this . field _ 184238 _ ar ) ; 
 } 
 @ @ - 61 , 7 + 85 , 7 @ @ 
 
 if ( ! this . field _ 184236 _ aF . isEmpty ( ) ) { 
 NBTTagList nbttaglist = new NBTTagList ( ) ; 
 - @ @ - 1381 , 6 + 1385 , 9 @ @ 
 + @ @ - 1381 , 6 + 1388 , 9 @ @ 
 p _ 189511 _ 1 _ . func _ 74782 _ a ( " Tags " , nbttaglist ) ; 
 } 
 
 @ @ - 71 , 7 + 95 , 7 @ @ 
 this . func _ 70014 _ b ( p _ 189511 _ 1 _ ) ; 
 if ( this . func _ 184207 _ aI ( ) ) { 
 NBTTagList nbttaglist1 = new NBTTagList ( ) ; 
 - @ @ - 1466 , 6 + 1473 , 8 @ @ 
 + @ @ - 1466 , 6 + 1476 , 8 @ @ 
 this . func _ 174810 _ b ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " Silent " ) ) ; 
 this . func _ 189654 _ d ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " NoGravity " ) ) ; 
 this . func _ 184195 _ f ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " Glowing " ) ) ; 
 @ @ - 80 , 7 + 104 , 7 @ @ 
 if ( p _ 70020 _ 1 _ . func _ 150297 _ b ( " Tags " , 9 ) ) { 
 this . field _ 184236 _ aF . clear ( ) ; 
 NBTTagList nbttaglist1 = p _ 70020 _ 1 _ . func _ 150295 _ c ( " Tags " , 8 ) ; 
 - @ @ - 1546 , 6 + 1555 , 8 @ @ 
 + @ @ - 1546 , 6 + 1558 , 8 @ @ 
 } else { 
 EntityItem entityitem = new EntityItem ( this . field _ 70170 _ p , this . field _ 70165 _ t , this . field _ 70163 _ u + ( double ) p _ 70099 _ 2 _ , this . field _ 70161 _ v , p _ 70099 _ 1 _ ) ; 
 entityitem . func _ 174869 _ p ( ) ; 
 @ @ - 89 , 7 + 113 , 7 @ @ 
 this . field _ 70170 _ p . func _ 72838 _ d ( entityitem ) ; 
 return entityitem ; 
 } 
 - @ @ - 1595 , 6 + 1606 , 7 @ @ 
 + @ @ - 1595 , 6 + 1609 , 7 @ @ 
 this . field _ 70159 _ w = 0 . 0D ; 
 this . field _ 70181 _ x = 0 . 0D ; 
 this . field _ 70179 _ y = 0 . 0D ; 
 @ @ - 97 , 7 + 121 , 7 @ @ 
 this . func _ 70071 _ h _ ( ) ; 
 if ( this . func _ 184218 _ aH ( ) ) { 
 entity . func _ 184232 _ k ( this ) ; 
 - @ @ - 1636 , 6 + 1648 , 7 @ @ 
 + @ @ - 1636 , 6 + 1651 , 7 @ @ 
 } 
 } 
 
 @ @ - 105 , 7 + 129 , 7 @ @ 
 if ( p _ 184205 _ 2 _ | | this . func _ 184228 _ n ( p _ 184205 _ 1 _ ) & & p _ 184205 _ 1 _ . func _ 184219 _ q ( this ) ) { 
 if ( this . func _ 184218 _ aH ( ) ) { 
 this . func _ 184210 _ p ( ) ; 
 - @ @ - 1663 , 6 + 1676 , 7 @ @ 
 + @ @ - 1663 , 6 + 1679 , 7 @ @ 
 public void func _ 184210 _ p ( ) { 
 if ( this . field _ 184239 _ as ! = null ) { 
 Entity entity = this . field _ 184239 _ as ; 
 @ @ - 113 , 7 + 137 , 7 @ @ 
 this . field _ 184239 _ as = null ; 
 entity . func _ 184225 _ p ( this ) ; 
 } 
 - @ @ - 1789 , 10 + 1803 , 15 @ @ 
 + @ @ - 1789 , 10 + 1806 , 15 @ @ 
 return ! this . func _ 184188 _ bt ( ) . isEmpty ( ) ; 
 } 
 
 @ @ - 129 , 7 + 153 , 7 @ @ 
 public boolean func _ 70093 _ af ( ) { 
 return this . func _ 70083 _ f ( 1 ) ; 
 } 
 - @ @ - 2053 , 6 + 2072 , 14 @ @ 
 + @ @ - 2053 , 6 + 2075 , 14 @ @ 
 
 @ Nullable 
 public Entity func _ 184204 _ a ( int p _ 184204 _ 1 _ ) { 
 @ @ - 144 , 7 + 168 , 7 @ @ 
 if ( ! this . field _ 70170 _ p . field _ 72995 _ K & & ! this . field _ 70128 _ L ) { 
 this . field _ 70170 _ p . field _ 72984 _ F . func _ 76320 _ a ( " changeDimension " ) ; 
 MinecraftServer minecraftserver = this . func _ 184102 _ h ( ) ; 
 - @ @ - 2060 , 7 + 2087 , 7 @ @ 
 + @ @ - 2060 , 7 + 2090 , 7 @ @ 
 WorldServer worldserver = minecraftserver . func _ 71218 _ a ( i ) ; 
 WorldServer worldserver1 = minecraftserver . func _ 71218 _ a ( p _ 184204 _ 1 _ ) ; 
 this . field _ 71093 _ bK = p _ 184204 _ 1 _ ; 
 @ @ - 153 , 7 + 177 , 7 @ @ 
 worldserver1 = minecraftserver . func _ 200667 _ a ( DimensionType . OVERWORLD ) ; 
 this . field _ 71093 _ bK = 0 ; 
 } 
 - @ @ - 2069 , 16 + 2096 , 17 @ @ 
 + @ @ - 2069 , 16 + 2099 , 17 @ @ 
 this . field _ 70128 _ L = false ; 
 this . field _ 70170 _ p . field _ 72984 _ F . func _ 76320 _ a ( " reposition " ) ; 
 BlockPos blockpos ; 
 @ @ - 176 , 7 + 200 , 7 @ @ 
 d0 = MathHelper . func _ 151237 _ a ( d0 * 8 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177726 _ b ( ) + 16 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177728 _ d ( ) - 16 . 0D ) ; 
 d1 = MathHelper . func _ 151237 _ a ( d1 * 8 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177736 _ c ( ) + 16 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177733 _ e ( ) - 16 . 0D ) ; 
 } 
 - @ @ - 2087 , 8 + 2115 , 7 @ @ 
 + @ @ - 2087 , 8 + 2118 , 7 @ @ 
 d1 = ( double ) MathHelper . func _ 76125 _ a ( ( int ) d1 , - 29999872 , 29999872 ) ; 
 float f = this . field _ 70177 _ z ; 
 this . func _ 70012 _ b ( d0 , this . field _ 70163 _ u , d1 , 90 . 0F , 0 . 0F ) ; 
 @ @ - 186 , 7 + 210 , 7 @ @ 
 blockpos = new BlockPos ( this ) ; 
 } 
 
 - @ @ - 2097 , 7 + 2124 , 7 @ @ 
 + @ @ - 2097 , 7 + 2127 , 7 @ @ 
 Entity entity = this . func _ 200600 _ R ( ) . func _ 200721 _ a ( worldserver1 ) ; 
 if ( entity ! = null ) { 
 entity . func _ 180432 _ n ( this ) ; 
 @ @ - 195 , 7 + 219 , 7 @ @ 
 BlockPos blockpos1 = worldserver1 . func _ 205770 _ a ( Heightmap . Type . MOTION _ BLOCKING _ NO _ LEAVES , worldserver1 . func _ 175694 _ M ( ) ) ; 
 entity . func _ 174828 _ a ( blockpos1 , entity . field _ 70177 _ z , entity . field _ 70125 _ A ) ; 
 } else { 
 - @ @ - 2591 , 4 + 2618 , 32 @ @ 
 + @ @ - 2591 , 4 + 2621 , 49 @ @ 
 public double func _ 212107 _ bY ( ) { 
 return this . field _ 211517 _ W ; 
 } 
 @ @ - 227 , 4 + 251 , 21 @ @ 
 + & & ( this instanceof EntityPlayer | | net . minecraftforge . event . ForgeEventFactory . getMobGriefingEvent ( field _ 70170 _ p , this ) ) 
 + & & this . field _ 70130 _ N * this . field _ 70130 _ N * this . field _ 70131 _ O > 0 . 512F ; 
 + } 
 + + 
 + + / * = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = Forge Start = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = * / 
 + + / * * 
 + + * Internal use for keeping track of entities that are tracked by a world , to 
 + + * allow guarantees that entity position changes will force a chunk load , avoiding 
 + + * potential issues with entity desyncing and bad chunk data . 
 + + * / 
 + + private boolean isAddedToWorld ; 
 + + 
 + + @ Override 
 + + public final boolean isAddedToWorld ( ) { return this . isAddedToWorld ; } 
 + + 
 + + @ Override 
 + + public void onAddedToWorld ( ) { this . isAddedToWorld = true ; } 
 + + 
 + + @ Override 
 + + public void onRemovedFromWorld ( ) { this . isAddedToWorld = false ; } 
 } 
 diff - - git a / patches / minecraft / net / minecraft / entity / EntityLeashKnot . java . patch b / patches / minecraft / net / minecraft / entity / EntityLeashKnot . java . patch 
 new file mode 100644 
 index 0000000 . . bbfe697 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / entity / EntityLeashKnot . java . patch 
 @ @ - 0 , 0 + 1 , 10 @ @ 
 + - - - a / net / minecraft / entity / EntityLeashKnot . java 
 + + + + b / net / minecraft / entity / EntityLeashKnot . java 
 + @ @ - 38 , 6 + 38 , 7 @ @ 
 + this . field _ 70165 _ t = ( double ) this . field _ 174861 _ a . func _ 177958 _ n ( ) + 0 . 5D ; 
 + this . field _ 70163 _ u = ( double ) this . field _ 174861 _ a . func _ 177956 _ o ( ) + 0 . 5D ; 
 + this . field _ 70161 _ v = ( double ) this . field _ 174861 _ a . func _ 177952 _ p ( ) + 0 . 5D ; 
 + + if ( this . isAddedToWorld ( ) & & ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72866 _ a ( this , false ) ; / / Forge - Process chunk registration after moving . 
 + } 
 + 
 + public void func _ 174859 _ a ( EnumFacing p _ 174859 _ 1 _ ) { 
 diff - - git a / patches / minecraft / net / minecraft / entity / monster / EntityShulker . java . patch b / patches / minecraft / net / minecraft / entity / monster / EntityShulker . java . patch 
 index e9e834f . . 5fe493e 100644 
 - - - a / patches / minecraft / net / minecraft / entity / monster / EntityShulker . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / monster / EntityShulker . java . patch 
 @ @ - 1 , 6 + 1 , 14 @ @ 
 - - - a / net / minecraft / entity / monster / EntityShulker . java 
 + + + b / net / minecraft / entity / monster / EntityShulker . java 
 - @ @ - 338 , 6 + 338 , 13 @ @ 
 + @ @ - 245 , 6 + 245 , 7 @ @ 
 + this . field _ 70165 _ t = ( double ) blockpos . func _ 177958 _ n ( ) + 0 . 5D ; 
 + this . field _ 70163 _ u = ( double ) blockpos . func _ 177956 _ o ( ) ; 
 + this . field _ 70161 _ v = ( double ) blockpos . func _ 177952 _ p ( ) + 0 . 5D ; 
 + + if ( this . isAddedToWorld ( ) & & ! this . field _ 70170 _ p . field _ 72995 _ K ) this . field _ 70170 _ p . func _ 72866 _ a ( this , false ) ; / / Forge - Process chunk registration after moving . 
 + this . field _ 70169 _ q = this . field _ 70165 _ t ; 
 + this . field _ 70167 _ r = this . field _ 70163 _ u ; 
 + this . field _ 70166 _ s = this . field _ 70161 _ v ; 
 + @ @ - 338 , 6 + 339 , 13 @ @ 
 } 
 } 
 
 diff - - git a / patches / minecraft / net / minecraft / network / NetHandlerPlayServer . java . patch b / patches / minecraft / net / minecraft / network / NetHandlerPlayServer . java . patch 
 index 475fa9f . . 8aaf5e2 100644 
 - - - a / patches / minecraft / net / minecraft / network / NetHandlerPlayServer . java . patch 
 + + + b / patches / minecraft / net / minecraft / network / NetHandlerPlayServer . java . patch 
 @ @ - 1 , 6 + 1 , 18 @ @ 
 - - - a / net / minecraft / network / NetHandlerPlayServer . java 
 + + + b / net / minecraft / network / NetHandlerPlayServer . java 
 - @ @ - 1265 , 5 + 1265 , 7 @ @ 
 + @ @ - 327 , 9 + 327 , 11 @ @ 
 + } 
 + 
 + entity . func _ 70080 _ a ( d3 , d4 , d5 , f , f1 ) ; 
 + + this . field _ 147369 _ b . func _ 70080 _ a ( d3 , d4 , d5 , this . field _ 147369 _ b . field _ 70177 _ z , this . field _ 147369 _ b . field _ 70125 _ A ) ; / / Forge - Resync player position on vehicle moving 
 + boolean flag2 = worldserver . func _ 195586 _ b ( entity , entity . func _ 174813 _ aQ ( ) . func _ 186664 _ h ( 0 . 0625D ) ) ; 
 + if ( flag & & ( flag1 | | ! flag2 ) ) { 
 + entity . func _ 70080 _ a ( d0 , d1 , d2 , f , f1 ) ; 
 + + this . field _ 147369 _ b . func _ 70080 _ a ( d0 , d1 , d2 , this . field _ 147369 _ b . field _ 70177 _ z , this . field _ 147369 _ b . field _ 70125 _ A ) ; / / Forge - Resync player position on vehicle moving 
 + this . field _ 147371 _ a . func _ 179290 _ a ( new SPacketMoveVehicle ( entity ) ) ; 
 + return ; 
 + } 
 + @ @ - 1265 , 5 + 1267 , 7 @ @ 
 } 
 
 public void func _ 147349 _ a ( CPacketCustomPayload p _ 147349 _ 1 _ ) { 
 diff - - git a / patches / minecraft / net / minecraft / world / World . java . patch b / patches / minecraft / net / minecraft / world / World . java . patch 
 index e7ef4b3 . . 47e9f61 100644 
 - - - a / patches / minecraft / net / minecraft / world / World . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / World . java . patch 
 @ @ - 235 , 6 + 235 , 23 @ @ 
 this . func _ 72964 _ e ( i , j ) . func _ 76612 _ a ( p _ 72838 _ 1 _ ) ; 
 this . field _ 72996 _ f . add ( p _ 72838 _ 1 _ ) ; 
 this . func _ 72923 _ a ( p _ 72838 _ 1 _ ) ; 
 + @ @ - 766 , 14 + 818 , 14 @ @ 
 + for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) { 
 + ( ( IWorldEventListener ) this . field _ 73021 _ x . get ( i ) ) . func _ 72703 _ a ( p _ 72923 _ 1 _ ) ; 
 + } 
 + - 
 + + p _ 72923 _ 1 _ . onAddedToWorld ( ) ; 
 + } 
 + 
 + public void func _ 72847 _ b ( Entity p _ 72847 _ 1 _ ) { 
 + for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) { 
 + ( ( IWorldEventListener ) this . field _ 73021 _ x . get ( i ) ) . func _ 72709 _ b ( p _ 72847 _ 1 _ ) ; 
 + } 
 + - 
 + + p _ 72847 _ 1 _ . onRemovedFromWorld ( ) ; 
 + } 
 + 
 + public void func _ 72900 _ e ( Entity p _ 72900 _ 1 _ ) { 
 @ @ - 816 , 52 + 868 , 62 @ @ 
 this . field _ 73021 _ x . add ( p _ 72954 _ 1 _ ) ; 
 } 
 diff - - git a / patches / minecraft / net / minecraft / world / chunk / Chunk . java . patch b / patches / minecraft / net / minecraft / world / chunk / Chunk . java . patch 
 index c7fd732 . . cc1213d 100644 
 - - - a / patches / minecraft / net / minecraft / world / chunk / Chunk . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / chunk / Chunk . java . patch 
 @ @ - 17 , 7 + 17 , 23 @ @ 
 } 
 
 public Chunk ( World p _ i48703 _ 1 _ , ChunkPrimer p _ i48703 _ 2 _ , int p _ i48703 _ 3 _ , int p _ i48703 _ 4 _ ) { 
 - @ @ - 1164 , 4 + 1165 , 30 @ @ 
 + @ @ - 593 , 6 + 594 , 7 @ @ 
 + p _ 76612 _ 1 _ . field _ 70162 _ ai = k ; 
 + p _ 76612 _ 1 _ . field _ 70164 _ aj = this . field _ 76647 _ h ; 
 + this . field _ 76645 _ j [ k ] . add ( p _ 76612 _ 1 _ ) ; 
 + + this . func _ 76630 _ e ( ) ; / / Forge - ensure chunks are marked to save after an entity add 
 + } 
 + 
 + public void func _ 201607 _ a ( Heightmap . Type p _ 201607 _ 1 _ , long [ ] p _ 201607 _ 2 _ ) { 
 + @ @ - 613 , 6 + 615 , 7 @ @ 
 + } 
 + 
 + this . field _ 76645 _ j [ p _ 76608 _ 2 _ ] . remove ( p _ 76608 _ 1 _ ) ; 
 + + this . func _ 76630 _ e ( ) ; / / Forge - ensure chunks are marked to save after entity removals 
 + } 
 + 
 + public boolean func _ 177444 _ d ( BlockPos p _ 177444 _ 1 _ ) { 
 + @ @ - 1164 , 4 + 1167 , 30 @ @ 
 QUEUED , 
 CHECK ; 
 } 
 diff - - git a / src / main / java / net / minecraftforge / common / extensions / IForgeEntity . java b / src / main / java / net / minecraftforge / common / extensions / IForgeEntity . java 
 index f0d07fd . . 64cbc6e 100644 
 - - - a / src / main / java / net / minecraftforge / common / extensions / IForgeEntity . java 
 + + + b / src / main / java / net / minecraftforge / common / extensions / IForgeEntity . java 
 @ @ - 181 , 4 + 181 , 28 @ @ public interface IForgeEntity extends ICapabilitySerializable < NBTTagCompound > 
 if ( forSpawnCount & & ( this instanceof EntityLiving ) & & ( ( EntityLiving ) this ) . isNoDespawnRequired ( ) ) return false ; 
 return type . getBaseClass ( ) . isAssignableFrom ( this . getClass ( ) ) ; 
 } 
 + 
 + / * * 
 + * Gets whether this entity has been added to a world ( for tracking ) . Specifically 
 + * between the times when an entity is added to a world and the entity being removed 
 + * from the world ' s tracked lists . See { @ link World # onEntityAdded ( Entity ) } and 
 + * { @ link World # onEntityRemoved ( Entity ) } . 
 + * 
 + * @ return True if this entity is being tracked by a world 
 + * / 
 + boolean isAddedToWorld ( ) ; 
 + 
 + / * * 
 + * Called after the entity has been added to the world ' s 
 + * ticking list . Can be overriden , but needs to call super 
 + * to prevent MC - 136995 . 
 + * / 
 + void onAddedToWorld ( ) ; 
 + 
 + / * * 
 + * Called after the entity has been removed to the world ' s 
 + * ticking list . Can be overriden , but needs to call super 
 + * to prevent MC - 136995 . 
 + * / 
 + void onRemovedFromWorld ( ) ; 
 }

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / block / Block . java . patch b / patches / minecraft / net / minecraft / block / Block . java . patch 
 index ab5d77d . . cca9797 100644 
 - - - a / patches / minecraft / net / minecraft / block / Block . java . patch 
 + + + b / patches / minecraft / net / minecraft / block / Block . java . patch 
 @ @ - 16 , 7 + 16 , 15 @ @ 
 public static final AxisAlignedBB field _ 185505 _ j = new AxisAlignedBB ( 0 . 0D , 0 . 0D , 0 . 0D , 1 . 0D , 1 . 0D , 1 . 0D ) ; 
 @ Nullable 
 public static final AxisAlignedBB field _ 185506 _ k = null ; 
 - @ @ - 319 , 7 + 320 , 7 @ @ 
 + @ @ - 75 , 6 + 76 , 7 @ @ 
 + public float field _ 149763 _ I ; 
 + protected final Material field _ 149764 _ J ; 
 + protected final MapColor field _ 181083 _ K ; 
 + + @ Deprecated / / Forge : State / world / pos / entity sensitive version below 
 + public float field _ 149765 _ K ; 
 + protected final BlockStateContainer field _ 176227 _ L ; 
 + private IBlockState field _ 176228 _ M ; 
 + @ @ - 319 , 7 + 321 , 7 @ @ 
 
 public boolean func _ 176200 _ f ( IBlockAccess p _ 176200 _ 1 _ , BlockPos p _ 176200 _ 2 _ ) 
 { 
 @ @ - 25 , 7 + 33 , 7 @ @ 
 } 
 
 public Block func _ 149711 _ c ( float p _ 149711 _ 1 _ ) 
 - @ @ - 357 , 9 + 358 , 10 @ @ 
 + @ @ - 357 , 9 + 359 , 10 @ @ 
 return this . field _ 149789 _ z ; 
 } 
 
 @ @ - 37 , 7 + 45 , 7 @ @ 
 } 
 
 @ Deprecated 
 - @ @ - 372 , 13 + 374 , 13 @ @ 
 + @ @ - 372 , 13 + 375 , 13 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public int func _ 185484 _ c ( IBlockState p _ 185484 _ 1 _ , IBlockAccess p _ 185484 _ 2 _ , BlockPos p _ 185484 _ 3 _ ) 
 { 
 @ @ - 53 , 7 + 61 , 7 @ @ 
 } 
 else 
 { 
 - @ @ - 442 , 7 + 444 , 7 @ @ 
 + @ @ - 442 , 7 + 445 , 7 @ @ 
 } 
 } 
 
 @ @ - 62 , 7 + 70 , 7 @ @ 
 } 
 
 @ Deprecated 
 - @ @ - 534 , 6 + 536 , 10 @ @ 
 + @ @ - 534 , 6 + 537 , 10 @ @ 
 
 public void func _ 180663 _ b ( World p _ 180663 _ 1 _ , BlockPos p _ 180663 _ 2 _ , IBlockState p _ 180663 _ 3 _ ) 
 { 
 @ @ - 73 , 7 + 81 , 7 @ @ 
 } 
 
 public int func _ 149745 _ a ( Random p _ 149745 _ 1 _ ) 
 - @ @ - 549 , 16 + 555 , 7 @ @ 
 + @ @ - 549 , 16 + 556 , 7 @ @ 
 @ Deprecated 
 public float func _ 180647 _ a ( IBlockState p _ 180647 _ 1 _ , EntityPlayer p _ 180647 _ 2 _ , World p _ 180647 _ 3 _ , BlockPos p _ 180647 _ 4 _ ) 
 { 
 @ @ - 91 , 7 + 99 , 7 @ @ 
 } 
 
 public final void func _ 176226 _ b ( World p _ 176226 _ 1 _ , BlockPos p _ 176226 _ 2 _ , IBlockState p _ 176226 _ 3 _ , int p _ 176226 _ 4 _ ) 
 - @ @ - 568 , 20 + 565 , 16 @ @ 
 + @ @ - 568 , 20 + 566 , 16 @ @ 
 
 public void func _ 180653 _ a ( World p _ 180653 _ 1 _ , BlockPos p _ 180653 _ 2 _ , IBlockState p _ 180653 _ 3 _ , float p _ 180653 _ 4 _ , int p _ 180653 _ 5 _ ) 
 { 
 @ @ - 117 , 7 + 125 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 589 , 8 + 582 , 13 @ @ 
 + @ @ - 589 , 8 + 583 , 13 @ @ 
 
 public static void func _ 180635 _ a ( World p _ 180635 _ 0 _ , BlockPos p _ 180635 _ 1 _ , ItemStack p _ 180635 _ 2 _ ) 
 { 
 @ @ - 132 , 7 + 140 , 7 @ @ 
 float f = 0 . 5F ; 
 double d0 = ( double ) ( p _ 180635 _ 0 _ . field _ 73012 _ v . nextFloat ( ) * 0 . 5F ) + 0 . 25D ; 
 double d1 = ( double ) ( p _ 180635 _ 0 _ . field _ 73012 _ v . nextFloat ( ) * 0 . 5F ) + 0 . 25D ; 
 - @ @ - 619 , 6 + 617 , 7 @ @ 
 + @ @ - 619 , 6 + 618 , 7 @ @ 
 return 0 ; 
 } 
 
 @ @ - 140 , 7 + 148 , 7 @ @ 
 public float func _ 149638 _ a ( Entity p _ 149638 _ 1 _ ) 
 { 
 return this . field _ 149781 _ w / 5 . 0F ; 
 - @ @ - 657 , 7 + 656 , 7 @ @ 
 + @ @ - 657 , 7 + 657 , 7 @ @ 
 
 public boolean func _ 176196 _ c ( World p _ 176196 _ 1 _ , BlockPos p _ 176196 _ 2 _ ) 
 { 
 @ @ - 149 , 7 + 157 , 7 @ @ 
 } 
 
 public boolean func _ 180639 _ a ( World p _ 180639 _ 1 _ , BlockPos p _ 180639 _ 2 _ , IBlockState p _ 180639 _ 3 _ , EntityPlayer p _ 180639 _ 4 _ , EnumHand p _ 180639 _ 5 _ , EnumFacing p _ 180639 _ 6 _ , float p _ 180639 _ 7 _ , float p _ 180639 _ 8 _ , float p _ 180639 _ 9 _ ) 
 - @ @ - 669 , 6 + 668 , 8 @ @ 
 + @ @ - 669 , 6 + 669 , 8 @ @ 
 { 
 } 
 
 @ @ - 158 , 7 + 166 , 7 @ @ 
 public IBlockState func _ 180642 _ a ( World p _ 180642 _ 1 _ , BlockPos p _ 180642 _ 2 _ , EnumFacing p _ 180642 _ 3 _ , float p _ 180642 _ 4 _ , float p _ 180642 _ 5 _ , float p _ 180642 _ 6 _ , int p _ 180642 _ 7 _ , EntityLivingBase p _ 180642 _ 8 _ ) 
 { 
 return this . func _ 176203 _ a ( p _ 180642 _ 7 _ ) ; 
 - @ @ - 710 , 21 + 711 , 35 @ @ 
 + @ @ - 710 , 21 + 712 , 35 @ @ 
 p _ 180657 _ 2 _ . func _ 71029 _ a ( StatList . func _ 188055 _ a ( this ) ) ; 
 p _ 180657 _ 2 _ . func _ 71020 _ j ( 0 . 005F ) ; 
 
 @ @ - 197 , 7 + 205 , 7 @ @ 
 } 
 
 protected ItemStack func _ 180643 _ i ( IBlockState p _ 180643 _ 1 _ ) 
 - @ @ - 810 , 12 + 825 , 12 @ @ 
 + @ @ - 810 , 12 + 826 , 12 @ @ 
 p _ 176216 _ 2 _ . field _ 70181 _ x = 0 . 0D ; 
 } 
 
 @ @ - 211 , 7 + 219 , 7 @ @ 
 public void func _ 149666 _ a ( CreativeTabs p _ 149666 _ 1 _ , NonNullList < ItemStack > p _ 149666 _ 2 _ ) 
 { 
 p _ 149666 _ 2 _ . add ( new ItemStack ( this ) ) ; 
 - @ @ - 831 , 7 + 846 , 6 @ @ 
 + @ @ - 831 , 7 + 847 , 6 @ @ 
 { 
 } 
 
 @ @ - 219 , 7 + 227 , 7 @ @ 
 public CreativeTabs func _ 149708 _ J ( ) 
 { 
 return this . field _ 149772 _ a ; 
 - @ @ - 921 , 6 + 935 , 7 @ @ 
 + @ @ - 921 , 6 + 936 , 7 @ @ 
 } 
 } 
 
 @ @ - 227 , 7 + 235 , 7 @ @ 
 public SoundType func _ 185467 _ w ( ) 
 { 
 return this . field _ 149762 _ H ; 
 - @ @ - 936 , 6 + 951 , 1250 @ @ 
 + @ @ - 936 , 6 + 952 , 1287 @ @ 
 { 
 } 
 
 @ @ - 236 , 6 + 244 , 43 @ @ 
 + protected ThreadLocal < EntityPlayer > harvesters = new ThreadLocal ( ) ; 
 + private ThreadLocal < IBlockState > silk _ check _ state = new ThreadLocal ( ) ; 
 + protected static java . util . Random RANDOM = new java . util . Random ( ) ; / / Useful for random things without a seed . 
 + + 
 + + / * * 
 + + * Gets the slipperiness at the given location at the given state . Normally 
 + + * between 0 and 1 . 
 + + * < p > 
 + + * Note that entities may reduce slipperiness by a certain factor of their own ; 
 + + * for { @ link net . minecraft . entity . EntityLivingBase } , this is { @ code . 91 } . 
 + + * { @ link net . minecraft . entity . item . EntityItem } uses { @ code . 98 } , and 
 + + * { @ link net . minecraft . entity . projectile . EntityFishHook } uses { @ code . 92 } . 
 + + * 
 + + * @ param state state of the block 
 + + * @ param world the world 
 + + * @ param pos the position in the world 
 + + * @ param entity the entity in question 
 + + * @ return the factor by which the entity ' s motion should be multiplied 
 + + * / 
 + + public float getSlipperiness ( IBlockState state , IBlockAccess world , BlockPos pos , @ Nullable Entity entity ) 
 + + { 
 + + return field _ 149765 _ K ; 
 + + } 
 + + 
 + + / * * 
 + + * Sets the base slipperiness level . Normally between 0 and 1 . 
 + + * < p > 
 + + * < b > Calling this method may have no effect on the function of this block < / b > , 
 + + * or may not have the expected result . This block is free to caclculate 
 + + * its slipperiness arbitrarily . This method is guaranteed to work on the 
 + + * base { @ code Block } class . 
 + + * 
 + + * @ param slipperiness the base slipperiness of this block 
 + + * @ see # getSlipperiness ( IBlockState , IBlockAccess , BlockPos , Entity ) 
 + + * / 
 + + public void setDefaultSlipperiness ( float slipperiness ) 
 + + { 
 + + this . field _ 149765 _ K = slipperiness ; 
 + + } 
 + + 
 + / * * 
 + * Get a light value for this block , taking into account the given state and coordinates , normal ranges are between 0 and 15 
 + * 
 @ @ - 1478 , 7 + 1523 , 7 @ @ 
 public static void func _ 149671 _ p ( ) 
 { 
 func _ 176215 _ a ( 0 , field _ 176230 _ a , ( new BlockAir ( ) ) . func _ 149663 _ c ( " air " ) ) ; 
 - @ @ - 1232 , 31 + 2491 , 6 @ @ 
 + @ @ - 1232 , 31 + 2529 , 6 @ @ 
 block15 . field _ 149783 _ u = flag ; 
 } 
 } 
 diff - - git a / patches / minecraft / net / minecraft / entity / EntityFlying . java . patch b / patches / minecraft / net / minecraft / entity / EntityFlying . java . patch 
 new file mode 100644 
 index 0000000 . . 6b4ceb1 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / entity / EntityFlying . java . patch 
 @ @ - 0 , 0 + 1 , 24 @ @ 
 + - - - . . / src - base / minecraft / net / minecraft / entity / EntityFlying . java 
 + + + + . . / src - work / minecraft / net / minecraft / entity / EntityFlying . java 
 + @ @ - 44 , 7 + 44 , 9 @ @ 
 + 
 + if ( this . field _ 70122 _ E ) 
 + { 
 + - f = this . field _ 70170 _ p . func _ 180495 _ p ( new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 91F ; 
 + + BlockPos underPos = new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ; 
 + + IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( underPos ) ; 
 + + f = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , underPos , this ) * 0 . 91F ; 
 + } 
 + 
 + float f1 = 0 . 16277136F / ( f * f * f ) ; 
 + @ @ - 53 , 7 + 55 , 9 @ @ 
 + 
 + if ( this . field _ 70122 _ E ) 
 + { 
 + - f = this . field _ 70170 _ p . func _ 180495 _ p ( new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 91F ; 
 + + BlockPos underPos = new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ; 
 + + IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( underPos ) ; 
 + + f = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , underPos , this ) * 0 . 91F ; 
 + } 
 + 
 + this . func _ 70091 _ d ( MoverType . SELF , this . field _ 70159 _ w , this . field _ 70181 _ x , this . field _ 70179 _ y ) ; 
 diff - - git a / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch b / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch 
 index a5dc1bd . . 26b82f6 100644 
 - - - a / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch 
 @ @ - 232 , 7 + 232 , 27 @ @ 
 } 
 
 protected void func _ 70629 _ bd ( ) 
 - @ @ - 2054 , 6 + 2077 , 7 @ @ 
 + @ @ - 1874 , 7 + 1897 , 8 @ @ 
 + 
 + if ( this . field _ 70122 _ E ) 
 + { 
 + - f6 = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos $ pooledmutableblockpos ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 91F ; 
 + + IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos $ pooledmutableblockpos ) ; 
 + + f6 = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , blockpos $ pooledmutableblockpos , this ) * 0 . 91F ; 
 + } 
 + 
 + float f7 = 0 . 16277136F / ( f6 * f6 * f6 ) ; 
 + @ @ - 1894 , 7 + 1918 , 8 @ @ 
 + 
 + if ( this . field _ 70122 _ E ) 
 + { 
 + - f6 = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos $ pooledmutableblockpos . func _ 189532 _ c ( this . field _ 70165 _ t , this . func _ 174813 _ aQ ( ) . field _ 72338 _ b - 1 . 0D , this . field _ 70161 _ v ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 91F ; 
 + + IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos $ pooledmutableblockpos . func _ 189532 _ c ( this . field _ 70165 _ t , this . func _ 174813 _ aQ ( ) . field _ 72338 _ b - 1 . 0D , this . field _ 70161 _ v ) ) ; 
 + + f6 = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , blockpos $ pooledmutableblockpos , this ) * 0 . 91F ; 
 + } 
 + 
 + if ( this . func _ 70617 _ f _ ( ) ) 
 + @ @ - 2054 , 6 + 2079 , 7 @ @ 
 
 public void func _ 70071 _ h _ ( ) 
 { 
 @ @ - 240 , 7 + 260 , 7 @ @ 
 super . func _ 70071 _ h _ ( ) ; 
 this . func _ 184608 _ ct ( ) ; 
 
 - @ @ - 2096 , 7 + 2120 , 9 @ @ 
 + @ @ - 2096 , 7 + 2122 , 9 @ @ 
 
 if ( ! ItemStack . func _ 77989 _ b ( itemstack1 , itemstack ) ) 
 { 
 @ @ - 250 , 7 + 270 , 7 @ @ 
 
 if ( ! itemstack . func _ 190926 _ b ( ) ) 
 { 
 - @ @ - 2575 , 6 + 2601 , 40 @ @ 
 + @ @ - 2575 , 6 + 2603 , 40 @ @ 
 this . field _ 70752 _ e = true ; 
 } 
 
 @ @ - 291 , 7 + 311 , 7 @ @ 
 public abstract EnumHandSide func _ 184591 _ cq ( ) ; 
 
 public boolean func _ 184587 _ cr ( ) 
 - @ @ - 2595 , 12 + 2655 , 19 @ @ 
 + @ @ - 2595 , 12 + 2657 , 19 @ @ 
 
 if ( itemstack = = this . field _ 184627 _ bm ) 
 { 
 @ @ - 312 , 7 + 332 , 7 @ @ 
 { 
 this . func _ 71036 _ o ( ) ; 
 } 
 - @ @ - 2618 , 8 + 2685 , 10 @ @ 
 + @ @ - 2618 , 8 + 2687 , 10 @ @ 
 
 if ( ! itemstack . func _ 190926 _ b ( ) & & ! this . func _ 184587 _ cr ( ) ) 
 { 
 @ @ - 324 , 7 + 344 , 7 @ @ 
 
 if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) 
 { 
 - @ @ - 2700 , 7 + 2769 , 9 @ @ 
 + @ @ - 2700 , 7 + 2771 , 9 @ @ 
 if ( ! this . field _ 184627 _ bm . func _ 190926 _ b ( ) & & this . func _ 184587 _ cr ( ) ) 
 { 
 this . func _ 184584 _ a ( this . field _ 184627 _ bm , 16 ) ; 
 @ @ - 335 , 7 + 355 , 7 @ @ 
 this . func _ 184602 _ cy ( ) ; 
 } 
 } 
 - @ @ - 2724 , 7 + 2795 , 8 @ @ 
 + @ @ - 2724 , 7 + 2797 , 8 @ @ 
 { 
 if ( ! this . field _ 184627 _ bm . func _ 190926 _ b ( ) ) 
 { 
 @ @ - 345 , 7 + 365 , 7 @ @ 
 } 
 
 this . func _ 184602 _ cy ( ) ; 
 - @ @ - 2852 , 6 + 2924 , 31 @ @ 
 + @ @ - 2852 , 6 + 2926 , 31 @ @ 
 return true ; 
 } 
 
 diff - - git a / patches / minecraft / net / minecraft / entity / item / EntityBoat . java . patch b / patches / minecraft / net / minecraft / entity / item / EntityBoat . java . patch 
 new file mode 100644 
 index 0000000 . . 46a9889 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / entity / item / EntityBoat . java . patch 
 @ @ - 0 , 0 + 1 , 32 @ @ 
 + - - - . . / src - base / minecraft / net / minecraft / entity / item / EntityBoat . java 
 + + + + . . / src - work / minecraft / net / minecraft / entity / item / EntityBoat . java 
 + @ @ - 508 , 7 + 508 , 7 @ @ 
 + 
 + if ( ! list . isEmpty ( ) ) 
 + { 
 + - f + = iblockstate . func _ 177230 _ c ( ) . field _ 149765 _ K ; 
 + + f + = iblockstate . func _ 177230 _ c ( ) . getSlipperiness ( iblockstate , this . field _ 70170 _ p , blockpos $ pooledmutableblockpos , this ) ; 
 + + + k1 ; 
 + } 
 + 
 + @ @ - 980 , 4 + 980 , 20 @ @ 
 + return values ( ) [ 0 ] ; 
 + } 
 + } 
 + + 
 + + / / Forge : Fix MC - 119811 by instantly completing lerp on board 
 + + @ Override 
 + + protected void func _ 184200 _ o ( Entity passenger ) 
 + + { 
 + + super . func _ 184200 _ o ( passenger ) ; 
 + + if ( this . func _ 184186 _ bw ( ) & & this . field _ 184476 _ at > 0 ) 
 + + { 
 + + this . field _ 184476 _ at = 0 ; 
 + + this . field _ 70165 _ t = this . field _ 70281 _ h ; 
 + + this . field _ 70163 _ u = this . field _ 184477 _ av ; 
 + + this . field _ 70161 _ v = this . field _ 184478 _ aw ; 
 + + this . field _ 70177 _ z = ( float ) this . field _ 70273 _ g ; 
 + + this . field _ 70125 _ A = ( float ) this . field _ 184479 _ ay ; 
 + + } 
 + + } 
 + } 
 diff - - git a / patches / minecraft / net / minecraft / entity / item / EntityItem . java . patch b / patches / minecraft / net / minecraft / entity / item / EntityItem . java . patch 
 index 75fa7b0 . . 1eb7106 100644 
 - - - a / patches / minecraft / net / minecraft / entity / item / EntityItem . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / item / EntityItem . java . patch 
 @ @ - 28 , 7 + 28 , 18 @ @ 
 if ( this . func _ 92059 _ d ( ) . func _ 190926 _ b ( ) ) 
 { 
 this . func _ 70106 _ y ( ) ; 
 - @ @ - 167 , 8 + 174 , 16 @ @ 
 + @ @ - 135 , 7 + 142 , 9 @ @ 
 + 
 + if ( this . field _ 70122 _ E ) 
 + { 
 + - f = this . field _ 70170 _ p . func _ 180495 _ p ( new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 98F ; 
 + + BlockPos underPos = new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ; 
 + + net . minecraft . block . state . IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( underPos ) ; 
 + + f = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , underPos , this ) * 0 . 98F ; 
 + } 
 + 
 + this . field _ 70159 _ w * = ( double ) f ; 
 + @ @ - 167 , 8 + 176 , 16 @ @ 
 } 
 } 
 
 @ @ - 46 , 7 + 57 , 7 @ @ 
 this . func _ 70106 _ y ( ) ; 
 } 
 } 
 - @ @ - 225 , 6 + 240 , 10 @ @ 
 + @ @ - 225 , 6 + 242 , 10 @ @ 
 { 
 return false ; 
 } 
 @ @ - 57 , 7 + 68 , 7 @ @ 
 else 
 { 
 itemstack1 . func _ 190917 _ f ( itemstack . func _ 190916 _ E ( ) ) ; 
 - @ @ - 282 , 6 + 301 , 7 @ @ 
 + @ @ - 282 , 6 + 303 , 7 @ @ 
 
 public boolean func _ 70097 _ a ( DamageSource p _ 70097 _ 1 _ , float p _ 70097 _ 2 _ ) 
 { 
 @ @ - 65 , 7 + 76 , 7 @ @ 
 if ( this . func _ 180431 _ b ( p _ 70097 _ 1 _ ) ) 
 { 
 return false ; 
 - @ @ - 314 , 6 + 334 , 7 @ @ 
 + @ @ - 314 , 6 + 336 , 7 @ @ 
 p _ 70014 _ 1 _ . func _ 74777 _ a ( " Health " , ( short ) this . field _ 70291 _ e ) ; 
 p _ 70014 _ 1 _ . func _ 74777 _ a ( " Age " , ( short ) this . field _ 70292 _ b ) ; 
 p _ 70014 _ 1 _ . func _ 74777 _ a ( " PickupDelay " , ( short ) this . field _ 145804 _ b ) ; 
 @ @ - 73 , 7 + 84 , 7 @ @ 
 
 if ( this . func _ 145800 _ j ( ) ! = null ) 
 { 
 - @ @ - 358 , 18 + 379 , 24 @ @ 
 + @ @ - 358 , 18 + 381 , 24 @ @ 
 { 
 this . func _ 70106 _ y ( ) ; 
 } 
 @ @ - 99 , 7 + 110 , 7 @ @ 
 p _ 70100 _ 1 _ . func _ 71001 _ a ( this , i ) ; 
 
 if ( itemstack . func _ 190926 _ b ( ) ) 
 - @ @ - 476 , 6 + 503 , 6 @ @ 
 + @ @ - 476 , 6 + 505 , 6 @ @ 
 public void func _ 174870 _ v ( ) 
 { 
 this . func _ 174871 _ r ( ) ; 
 diff - - git a / patches / minecraft / net / minecraft / entity / item / EntityXPOrb . java . patch b / patches / minecraft / net / minecraft / entity / item / EntityXPOrb . java . patch 
 index dd711a5 . . 8440a70 100644 
 - - - a / patches / minecraft / net / minecraft / entity / item / EntityXPOrb . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / item / EntityXPOrb . java . patch 
 @ @ - 1 , 6 + 1 , 17 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / entity / item / EntityXPOrb . java 
 + + + . . / src - work / minecraft / net / minecraft / entity / item / EntityXPOrb . java 
 - @ @ - 170 , 6 + 170 , 7 @ @ 
 + @ @ - 137 , 7 + 137 , 9 @ @ 
 + 
 + if ( this . field _ 70122 _ E ) 
 + { 
 + - f = this . field _ 70170 _ p . func _ 180495 _ p ( new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ) . func _ 177230 _ c ( ) . field _ 149765 _ K * 0 . 98F ; 
 + + BlockPos underPos = new BlockPos ( MathHelper . func _ 76128 _ c ( this . field _ 70165 _ t ) , MathHelper . func _ 76128 _ c ( this . func _ 174813 _ aQ ( ) . field _ 72338 _ b ) - 1 , MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ) ; 
 + + net . minecraft . block . state . IBlockState underState = this . field _ 70170 _ p . func _ 180495 _ p ( underPos ) ; 
 + + f = underState . func _ 177230 _ c ( ) . getSlipperiness ( underState , this . field _ 70170 _ p , underPos , this ) * 0 . 98F ; 
 + } 
 + 
 + this . field _ 70159 _ w * = ( double ) f ; 
 + @ @ - 170 , 6 + 172 , 7 @ @ 
 
 public boolean func _ 70097 _ a ( DamageSource p _ 70097 _ 1 _ , float p _ 70097 _ 2 _ ) 
 { 
 @ @ - 8 , 7 + 19 , 7 @ @ 
 if ( this . func _ 180431 _ b ( p _ 70097 _ 1 _ ) ) 
 { 
 return false ; 
 - @ @ - 208 , 6 + 209 , 7 @ @ 
 + @ @ - 208 , 6 + 211 , 7 @ @ 
 { 
 if ( this . field _ 70532 _ c = = 0 & & p _ 70100 _ 1 _ . field _ 71090 _ bL = = 0 ) 
 { 
 diff - - git a / src / test / java / net / minecraftforge / debug / SlipperinessTest . java b / src / test / java / net / minecraftforge / debug / SlipperinessTest . java 
 new file mode 100644 
 index 0000000 . . 76fa5ff 
 - - - / dev / null 
 + + + b / src / test / java / net / minecraftforge / debug / SlipperinessTest . java 
 @ @ - 0 , 0 + 1 , 42 @ @ 
 + package net . minecraftforge . debug ; 
 + 
 + import net . minecraft . block . Block ; 
 + import net . minecraft . block . material . Material ; 
 + import net . minecraft . block . state . IBlockState ; 
 + import net . minecraft . entity . Entity ; 
 + import net . minecraft . entity . item . EntityBoat ; 
 + import net . minecraft . item . Item ; 
 + import net . minecraft . item . ItemBlock ; 
 + import net . minecraft . util . math . BlockPos ; 
 + import net . minecraft . world . IBlockAccess ; 
 + import net . minecraftforge . event . RegistryEvent ; 
 + import net . minecraftforge . fml . common . Mod ; 
 + import net . minecraftforge . fml . common . Mod . EventBusSubscriber ; 
 + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; 
 + 
 + @ Mod ( modid = " slipperiness _ test " , name = " Slipperiness Test " , version = " 0 . 0 . 0 " ) 
 + @ EventBusSubscriber 
 + public class SlipperinessTest 
 + { 
 + public static final Block BB _ BLOCK = new Block ( Material . PACKED _ ICE ) 
 + { 
 + @ Override 
 + public float getSlipperiness ( IBlockState state , IBlockAccess world , BlockPos pos , Entity entity ) 
 + { 
 + return entity instanceof EntityBoat ? 2 : super . getSlipperiness ( state , world , pos , entity ) ; 
 + } 
 + } . setUnlocalizedName ( " boat _ blaster " ) . setRegistryName ( " boat _ blaster " ) ; 
 + 
 + @ SubscribeEvent 
 + public static void registerBlocks ( RegistryEvent . Register < Block > e ) 
 + { 
 + e . getRegistry ( ) . register ( BB _ BLOCK ) ; 
 + } 
 + 
 + @ SubscribeEvent 
 + public static void registerItems ( RegistryEvent . Register < Item > e ) 
 + { 
 + e . getRegistry ( ) . register ( new ItemBlock ( BB _ BLOCK ) . setRegistryName ( BB _ BLOCK . getRegistryName ( ) ) ) ; 
 + } 
 + } 
 +
