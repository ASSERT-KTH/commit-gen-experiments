BLEU SCORE: 0.011514383434815713

TEST MSG: There ' s no Map . getOrDefault in java6 .
GENERATED MSG: made renderLayer ThreadLocal , now it should hold correct value for use inside custom baked models

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java b / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java <nl> index ca9d25d . . 5d030ec 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java <nl> @ @ - 52 , 7 + 52 , 9 @ @ public interface IPerspectiveState extends IModelState <nl> <nl> public IModelState forPerspective ( TransformType type ) <nl> { <nl> - return states . getOrDefault ( type , TRSRTransformation . identity ( ) ) ; <nl> + IModelState state = states . get ( type ) ; <nl> + if ( state = = null ) state = TRSRTransformation . identity ( ) ; <nl> + return state ; <nl> } <nl> } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> index d80d81b . . 8077cc5 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> @ @ - 144 , 8 + 144 , 9 @ @ public class ItemLayerModel implements IRetexturableModel { <nl> @ Override <nl> public Pair < IBakedModel , Matrix4f > handlePerspective ( TransformType cameraTransformType ) <nl> { <nl> - TRSRTransformation tr = transforms . getOrDefault ( cameraTransformType , TRSRTransformation . identity ( ) ) ; <nl> - Matrix4f mat = tr = = TRSRTransformation . identity ( ) ? null : tr . getMatrix ( ) ; <nl> + TRSRTransformation tr = transforms . get ( cameraTransformType ) ; <nl> + Matrix4f mat = null ; <nl> + if ( tr ! = null & & tr ! = TRSRTransformation . identity ( ) ) mat = tr . getMatrix ( ) ; <nl> return Pair . of ( ( IBakedModel ) this , mat ) ; <nl> } <nl> }
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> index 2407f52 . . 971b167 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> + + + b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> @ @ - 295 , 10 + 295 , 17 @ @ public class ForgeHooksClient <nl> renderPass = pass ; <nl> } <nl> <nl> - static EnumWorldBlockLayer renderLayer = EnumWorldBlockLayer . SOLID ; <nl> + static final ThreadLocal < EnumWorldBlockLayer > renderLayer = new ThreadLocal < EnumWorldBlockLayer > ( ) <nl> + { <nl> + protected EnumWorldBlockLayer initialValue ( ) <nl> + { <nl> + return EnumWorldBlockLayer . SOLID ; <nl> + } <nl> + } ; <nl> + <nl> public static void setRenderLayer ( EnumWorldBlockLayer layer ) <nl> { <nl> - renderLayer = layer ; <nl> + renderLayer . set ( layer ) ; <nl> } <nl> <nl> public static ModelBase getArmorModel ( EntityLivingBase entityLiving , ItemStack itemStack , int slotID , ModelBase _ default ) <nl> diff - - git a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> index 39afb26 . . ae5194e 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> + + + b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> @ @ - 49 , 7 + 49 , 7 @ @ public class MinecraftForgeClient <nl> <nl> public static EnumWorldBlockLayer getRenderLayer ( ) <nl> { <nl> - return ForgeHooksClient . renderLayer ; <nl> + return ForgeHooksClient . renderLayer . get ( ) ; <nl> } <nl> <nl> private static BitSet stencilBits = new BitSet ( 8 ) ;

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java b / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java 
 index ca9d25d . . 5d030ec 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java 
 + + + b / src / main / java / net / minecraftforge / client / model / IPerspectiveState . java 
 @ @ - 52 , 7 + 52 , 9 @ @ public interface IPerspectiveState extends IModelState 
 
 public IModelState forPerspective ( TransformType type ) 
 { 
 - return states . getOrDefault ( type , TRSRTransformation . identity ( ) ) ; 
 + IModelState state = states . get ( type ) ; 
 + if ( state = = null ) state = TRSRTransformation . identity ( ) ; 
 + return state ; 
 } 
 } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 index d80d81b . . 8077cc5 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 @ @ - 144 , 8 + 144 , 9 @ @ public class ItemLayerModel implements IRetexturableModel { 
 @ Override 
 public Pair < IBakedModel , Matrix4f > handlePerspective ( TransformType cameraTransformType ) 
 { 
 - TRSRTransformation tr = transforms . getOrDefault ( cameraTransformType , TRSRTransformation . identity ( ) ) ; 
 - Matrix4f mat = tr = = TRSRTransformation . identity ( ) ? null : tr . getMatrix ( ) ; 
 + TRSRTransformation tr = transforms . get ( cameraTransformType ) ; 
 + Matrix4f mat = null ; 
 + if ( tr ! = null & & tr ! = TRSRTransformation . identity ( ) ) mat = tr . getMatrix ( ) ; 
 return Pair . of ( ( IBakedModel ) this , mat ) ; 
 } 
 }

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 index 2407f52 . . 971b167 100644 
 - - - a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 + + + b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 @ @ - 295 , 10 + 295 , 17 @ @ public class ForgeHooksClient 
 renderPass = pass ; 
 } 
 
 - static EnumWorldBlockLayer renderLayer = EnumWorldBlockLayer . SOLID ; 
 + static final ThreadLocal < EnumWorldBlockLayer > renderLayer = new ThreadLocal < EnumWorldBlockLayer > ( ) 
 + { 
 + protected EnumWorldBlockLayer initialValue ( ) 
 + { 
 + return EnumWorldBlockLayer . SOLID ; 
 + } 
 + } ; 
 + 
 public static void setRenderLayer ( EnumWorldBlockLayer layer ) 
 { 
 - renderLayer = layer ; 
 + renderLayer . set ( layer ) ; 
 } 
 
 public static ModelBase getArmorModel ( EntityLivingBase entityLiving , ItemStack itemStack , int slotID , ModelBase _ default ) 
 diff - - git a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 index 39afb26 . . ae5194e 100644 
 - - - a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 + + + b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 @ @ - 49 , 7 + 49 , 7 @ @ public class MinecraftForgeClient 
 
 public static EnumWorldBlockLayer getRenderLayer ( ) 
 { 
 - return ForgeHooksClient . renderLayer ; 
 + return ForgeHooksClient . renderLayer . get ( ) ; 
 } 
 
 private static BitSet stencilBits = new BitSet ( 8 ) ;
