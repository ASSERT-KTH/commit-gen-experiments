BLEU SCORE: 0.015445276590783498

TEST MSG: Fix exploded directory locator to actually scan all paths for a file .
GENERATED MSG: When the window is closed during loading , exit the game quickly

TEST DIFF (one line): diff - - git a / src / fmllauncher / java / net / minecraftforge / fml / loading / moddiscovery / ExplodedDirectoryLocator . java b / src / fmllauncher / java / net / minecraftforge / fml / loading / moddiscovery / ExplodedDirectoryLocator . java <nl> index 8f0a297 . . 0bbd1d0 100644 <nl> - - - a / src / fmllauncher / java / net / minecraftforge / fml / loading / moddiscovery / ExplodedDirectoryLocator . java <nl> + + + b / src / fmllauncher / java / net / minecraftforge / fml / loading / moddiscovery / ExplodedDirectoryLocator . java <nl> @ @ - 76 , 7 + 76 , 8 @ @ public class ExplodedDirectoryLocator implements IModLocator { <nl> Path found = mods . get ( modFile ) . getLeft ( ) . resolve ( target ) ; <nl> if ( Files . exists ( found ) ) return found ; <nl> / / then try left path ( classes ) <nl> - return mods . get ( modFile ) . getRight ( ) . stream ( ) . map ( p - > p . resolve ( target ) ) . findFirst ( ) . orElse ( found . resolve ( target ) ) ; <nl> + return mods . get ( modFile ) . getRight ( ) . stream ( ) . map ( p - > p . resolve ( target ) ) . filter ( Files : : exists ) . <nl> + findFirst ( ) . orElse ( found . resolve ( target ) ) ; <nl> } <nl> <nl> @ Override
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> index dc3c98a . . c19fbcf 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> @ @ - 638 , 6 + 638 , 12 @ @ public class FMLClientHandler implements IFMLSidedHandler <nl> } <nl> <nl> @ Override <nl> + public boolean isDisplayCloseRequested ( ) <nl> + { <nl> + return Display . isCreated ( ) & & Display . isCloseRequested ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> public boolean shouldServerShouldBeKilledQuietly ( ) <nl> { <nl> return serverShouldBeKilledQuietly ; <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / FMLCommonHandler . java b / src / main / java / net / minecraftforge / fml / common / FMLCommonHandler . java <nl> index 968b6de . . f79ac5a 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / FMLCommonHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / FMLCommonHandler . java <nl> @ @ - 438 , 6 + 438 , 11 @ @ public class FMLCommonHandler <nl> if ( ! confirmed ) StartupQuery . abort ( ) ; <nl> } <nl> <nl> + public boolean isDisplayCloseRequested ( ) <nl> + { <nl> + return sidedDelegate ! = null & & sidedDelegate . isDisplayCloseRequested ( ) ; <nl> + } <nl> + <nl> public boolean shouldServerBeKilledQuietly ( ) <nl> { <nl> if ( sidedDelegate = = null ) <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / IFMLSidedHandler . java b / src / main / java / net / minecraftforge / fml / common / IFMLSidedHandler . java <nl> index e28ea0f . . 28126cf 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / IFMLSidedHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / IFMLSidedHandler . java <nl> @ @ - 51 , 6 + 51 , 8 @ @ public interface IFMLSidedHandler <nl> <nl> MinecraftServer getServer ( ) ; <nl> <nl> + boolean isDisplayCloseRequested ( ) ; <nl> + <nl> boolean shouldServerShouldBeKilledQuietly ( ) ; <nl> <nl> void addModAsResource ( ModContainer container ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / LoadController . java b / src / main / java / net / minecraftforge / fml / common / LoadController . java <nl> index 784778b . . 792b6d5 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / LoadController . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / LoadController . java <nl> @ @ - 150 , 6 + 150 , 12 @ @ public class LoadController <nl> <nl> public void transition ( LoaderState desiredState , boolean forceState ) <nl> { <nl> + if ( FMLCommonHandler . instance ( ) . isDisplayCloseRequested ( ) ) <nl> + { <nl> + FMLLog . info ( " The game window is being closed by the player , exiting . " ) ; <nl> + FMLCommonHandler . instance ( ) . exitJava ( 0 , false ) ; <nl> + } <nl> + <nl> LoaderState oldState = state ; <nl> state = state . transition ( ! errors . isEmpty ( ) ) ; <nl> if ( state ! = desiredState & & ! forceState ) <nl> diff - - git a / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java b / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java <nl> index 64a175d . . 68ae604 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java <nl> @ @ - 223 , 6 + 223 , 12 @ @ public class FMLServerHandler implements IFMLSidedHandler <nl> } <nl> <nl> @ Override <nl> + public boolean isDisplayCloseRequested ( ) <nl> + { <nl> + return false ; <nl> + } <nl> + <nl> + @ Override <nl> public boolean shouldServerShouldBeKilledQuietly ( ) <nl> { <nl> return false ;

TEST DIFF:
diff - - git a / src / fmllauncher / java / net / minecraftforge / fml / loading / moddiscovery / ExplodedDirectoryLocator . java b / src / fmllauncher / java / net / minecraftforge / fml / loading / moddiscovery / ExplodedDirectoryLocator . java 
 index 8f0a297 . . 0bbd1d0 100644 
 - - - a / src / fmllauncher / java / net / minecraftforge / fml / loading / moddiscovery / ExplodedDirectoryLocator . java 
 + + + b / src / fmllauncher / java / net / minecraftforge / fml / loading / moddiscovery / ExplodedDirectoryLocator . java 
 @ @ - 76 , 7 + 76 , 8 @ @ public class ExplodedDirectoryLocator implements IModLocator { 
 Path found = mods . get ( modFile ) . getLeft ( ) . resolve ( target ) ; 
 if ( Files . exists ( found ) ) return found ; 
 / / then try left path ( classes ) 
 - return mods . get ( modFile ) . getRight ( ) . stream ( ) . map ( p - > p . resolve ( target ) ) . findFirst ( ) . orElse ( found . resolve ( target ) ) ; 
 + return mods . get ( modFile ) . getRight ( ) . stream ( ) . map ( p - > p . resolve ( target ) ) . filter ( Files : : exists ) . 
 + findFirst ( ) . orElse ( found . resolve ( target ) ) ; 
 } 
 
 @ Override

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 index dc3c98a . . c19fbcf 100644 
 - - - a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 @ @ - 638 , 6 + 638 , 12 @ @ public class FMLClientHandler implements IFMLSidedHandler 
 } 
 
 @ Override 
 + public boolean isDisplayCloseRequested ( ) 
 + { 
 + return Display . isCreated ( ) & & Display . isCloseRequested ( ) ; 
 + } 
 + 
 + @ Override 
 public boolean shouldServerShouldBeKilledQuietly ( ) 
 { 
 return serverShouldBeKilledQuietly ; 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / FMLCommonHandler . java b / src / main / java / net / minecraftforge / fml / common / FMLCommonHandler . java 
 index 968b6de . . f79ac5a 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / FMLCommonHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / FMLCommonHandler . java 
 @ @ - 438 , 6 + 438 , 11 @ @ public class FMLCommonHandler 
 if ( ! confirmed ) StartupQuery . abort ( ) ; 
 } 
 
 + public boolean isDisplayCloseRequested ( ) 
 + { 
 + return sidedDelegate ! = null & & sidedDelegate . isDisplayCloseRequested ( ) ; 
 + } 
 + 
 public boolean shouldServerBeKilledQuietly ( ) 
 { 
 if ( sidedDelegate = = null ) 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / IFMLSidedHandler . java b / src / main / java / net / minecraftforge / fml / common / IFMLSidedHandler . java 
 index e28ea0f . . 28126cf 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / IFMLSidedHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / IFMLSidedHandler . java 
 @ @ - 51 , 6 + 51 , 8 @ @ public interface IFMLSidedHandler 
 
 MinecraftServer getServer ( ) ; 
 
 + boolean isDisplayCloseRequested ( ) ; 
 + 
 boolean shouldServerShouldBeKilledQuietly ( ) ; 
 
 void addModAsResource ( ModContainer container ) ; 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / LoadController . java b / src / main / java / net / minecraftforge / fml / common / LoadController . java 
 index 784778b . . 792b6d5 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / LoadController . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / LoadController . java 
 @ @ - 150 , 6 + 150 , 12 @ @ public class LoadController 
 
 public void transition ( LoaderState desiredState , boolean forceState ) 
 { 
 + if ( FMLCommonHandler . instance ( ) . isDisplayCloseRequested ( ) ) 
 + { 
 + FMLLog . info ( " The game window is being closed by the player , exiting . " ) ; 
 + FMLCommonHandler . instance ( ) . exitJava ( 0 , false ) ; 
 + } 
 + 
 LoaderState oldState = state ; 
 state = state . transition ( ! errors . isEmpty ( ) ) ; 
 if ( state ! = desiredState & & ! forceState ) 
 diff - - git a / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java b / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java 
 index 64a175d . . 68ae604 100644 
 - - - a / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java 
 @ @ - 223 , 6 + 223 , 12 @ @ public class FMLServerHandler implements IFMLSidedHandler 
 } 
 
 @ Override 
 + public boolean isDisplayCloseRequested ( ) 
 + { 
 + return false ; 
 + } 
 + 
 + @ Override 
 public boolean shouldServerShouldBeKilledQuietly ( ) 
 { 
 return false ;
