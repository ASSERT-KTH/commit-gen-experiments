BLEU SCORE: 0.024455939372403628

TEST MSG: Fixed block color multiplier not being cached properly in the forge renderer , performance improvement .
GENERATED MSG: made renderLayer ThreadLocal , now it should hold correct value for use inside custom baked models

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / BlockInfo . java b / src / main / java / net / minecraftforge / client / model / pipeline / BlockInfo . java <nl> index 620510f . . b3908c3 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / pipeline / BlockInfo . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / pipeline / BlockInfo . java <nl> @ @ - 27 , 7 + 27 , 9 @ @ public class BlockInfo <nl> public int getColorMultiplier ( int tint ) <nl> { <nl> if ( cachedTint = = tint ) return cachedMultiplier ; <nl> - return block . colorMultiplier ( world , blockPos , tint ) ; <nl> + cachedTint = tint ; <nl> + cachedMultiplier = block . colorMultiplier ( world , blockPos , tint ) ; <nl> + return cachedMultiplier ; <nl> } <nl> <nl> public void updateShift ( )
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> index 2407f52 . . 971b167 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> + + + b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> @ @ - 295 , 10 + 295 , 17 @ @ public class ForgeHooksClient <nl> renderPass = pass ; <nl> } <nl> <nl> - static EnumWorldBlockLayer renderLayer = EnumWorldBlockLayer . SOLID ; <nl> + static final ThreadLocal < EnumWorldBlockLayer > renderLayer = new ThreadLocal < EnumWorldBlockLayer > ( ) <nl> + { <nl> + protected EnumWorldBlockLayer initialValue ( ) <nl> + { <nl> + return EnumWorldBlockLayer . SOLID ; <nl> + } <nl> + } ; <nl> + <nl> public static void setRenderLayer ( EnumWorldBlockLayer layer ) <nl> { <nl> - renderLayer = layer ; <nl> + renderLayer . set ( layer ) ; <nl> } <nl> <nl> public static ModelBase getArmorModel ( EntityLivingBase entityLiving , ItemStack itemStack , int slotID , ModelBase _ default ) <nl> diff - - git a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> index 39afb26 . . ae5194e 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> + + + b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> @ @ - 49 , 7 + 49 , 7 @ @ public class MinecraftForgeClient <nl> <nl> public static EnumWorldBlockLayer getRenderLayer ( ) <nl> { <nl> - return ForgeHooksClient . renderLayer ; <nl> + return ForgeHooksClient . renderLayer . get ( ) ; <nl> } <nl> <nl> private static BitSet stencilBits = new BitSet ( 8 ) ;

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / client / model / pipeline / BlockInfo . java b / src / main / java / net / minecraftforge / client / model / pipeline / BlockInfo . java 
 index 620510f . . b3908c3 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / pipeline / BlockInfo . java 
 + + + b / src / main / java / net / minecraftforge / client / model / pipeline / BlockInfo . java 
 @ @ - 27 , 7 + 27 , 9 @ @ public class BlockInfo 
 public int getColorMultiplier ( int tint ) 
 { 
 if ( cachedTint = = tint ) return cachedMultiplier ; 
 - return block . colorMultiplier ( world , blockPos , tint ) ; 
 + cachedTint = tint ; 
 + cachedMultiplier = block . colorMultiplier ( world , blockPos , tint ) ; 
 + return cachedMultiplier ; 
 } 
 
 public void updateShift ( )

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 index 2407f52 . . 971b167 100644 
 - - - a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 + + + b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 @ @ - 295 , 10 + 295 , 17 @ @ public class ForgeHooksClient 
 renderPass = pass ; 
 } 
 
 - static EnumWorldBlockLayer renderLayer = EnumWorldBlockLayer . SOLID ; 
 + static final ThreadLocal < EnumWorldBlockLayer > renderLayer = new ThreadLocal < EnumWorldBlockLayer > ( ) 
 + { 
 + protected EnumWorldBlockLayer initialValue ( ) 
 + { 
 + return EnumWorldBlockLayer . SOLID ; 
 + } 
 + } ; 
 + 
 public static void setRenderLayer ( EnumWorldBlockLayer layer ) 
 { 
 - renderLayer = layer ; 
 + renderLayer . set ( layer ) ; 
 } 
 
 public static ModelBase getArmorModel ( EntityLivingBase entityLiving , ItemStack itemStack , int slotID , ModelBase _ default ) 
 diff - - git a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 index 39afb26 . . ae5194e 100644 
 - - - a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 + + + b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 @ @ - 49 , 7 + 49 , 7 @ @ public class MinecraftForgeClient 
 
 public static EnumWorldBlockLayer getRenderLayer ( ) 
 { 
 - return ForgeHooksClient . renderLayer ; 
 + return ForgeHooksClient . renderLayer . get ( ) ; 
 } 
 
 private static BitSet stencilBits = new BitSet ( 8 ) ;
