BLEU SCORE: 0.010061810165940762

TEST MSG: Add method to check if an Entity can trample a Block . Fixes # 2510
GENERATED MSG: Fix extended entity properties being lost when leaving the end , This introduces the concept of calling IExtendedEntityProperties . init when entites / worlds change . Lets see if mods explode .

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / block / BlockFarmland . java . patch b / patches / minecraft / net / minecraft / block / BlockFarmland . java . patch <nl> index 75b874e . . c2b6229 100644 <nl> - - - a / patches / minecraft / net / minecraft / block / BlockFarmland . java . patch <nl> + + + b / patches / minecraft / net / minecraft / block / BlockFarmland . java . patch <nl> @ @ - 1 , 5 + 1 , 14 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / block / BlockFarmland . java <nl> + + + . . / src - work / minecraft / net / minecraft / block / BlockFarmland . java <nl> + @ @ - 70 , 7 + 70 , 7 @ @ <nl> + <nl> + public void func _ 180658 _ a ( World p _ 180658 _ 1 _ , BlockPos p _ 180658 _ 2 _ , Entity p _ 180658 _ 3 _ , float p _ 180658 _ 4 _ ) <nl> + { <nl> + - if ( ! p _ 180658 _ 1 _ . field _ 72995 _ K & & p _ 180658 _ 1 _ . field _ 73012 _ v . nextFloat ( ) < p _ 180658 _ 4 _ - 0 . 5F & & p _ 180658 _ 3 _ instanceof EntityLivingBase & & ( p _ 180658 _ 3 _ instanceof EntityPlayer | | p _ 180658 _ 1 _ . func _ 82736 _ K ( ) . func _ 82766 _ b ( " mobGriefing " ) ) & & p _ 180658 _ 3 _ . field _ 70130 _ N * p _ 180658 _ 3 _ . field _ 70130 _ N * p _ 180658 _ 3 _ . field _ 70131 _ O > 0 . 512F ) <nl> + + if ( ! p _ 180658 _ 1 _ . field _ 72995 _ K & & p _ 180658 _ 3 _ . canTrample ( p _ 180658 _ 1 _ , this , p _ 180658 _ 2 _ , p _ 180658 _ 4 _ ) ) / / Forge : Move logic to Entity # canTrample <nl> + { <nl> + this . func _ 190970 _ b ( p _ 180658 _ 1 _ , p _ 180658 _ 2 _ ) ; <nl> + } <nl> @ @ - 93 , 7 + 93 , 7 @ @ <nl> private boolean func _ 176529 _ d ( World p _ 176529 _ 1 _ , BlockPos p _ 176529 _ 2 _ ) <nl> { <nl> diff - - git a / patches / minecraft / net / minecraft / entity / Entity . java . patch b / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> index a99d602 . . 48df088 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> @ @ - 126 , 7 + 126 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 174816 _ a ( Explosion p _ 174816 _ 1 _ , World p _ 174816 _ 2 _ , BlockPos p _ 174816 _ 3 _ , IBlockState p _ 174816 _ 4 _ , float p _ 174816 _ 5 _ ) <nl> - @ @ - 2802 , 6 + 2822 , 167 @ @ <nl> + @ @ - 2802 , 6 + 2822 , 184 @ @ <nl> EnchantmentHelper . func _ 151385 _ b ( p _ 174815 _ 1 _ , p _ 174815 _ 2 _ ) ; <nl> } <nl> <nl> @ @ - 289 , 6 + 289 , 23 @ @ <nl> + ret . func _ 74778 _ a ( " id " , this . func _ 70022 _ Q ( ) ) ; <nl> + return this . func _ 189511 _ e ( ret ) ; <nl> + } <nl> + + <nl> + + / * * <nl> + + * Checks if this { @ link Entity } can trample a { @ link Block } . <nl> + + * <nl> + + * @ param world The world in which the block will be trampled <nl> + + * @ param block The block being tested <nl> + + * @ param pos The block pos <nl> + + * @ param fallDistance The fall distance <nl> + + * @ return { @ code true } if this entity can trample , { @ code false } otherwise <nl> + + * / <nl> + + public boolean canTrample ( World world , Block block , BlockPos pos , float fallDistance ) <nl> + + { <nl> + + return world . field _ 73012 _ v . nextFloat ( ) < fallDistance - 0 . 5F <nl> + + & & this instanceof EntityLivingBase <nl> + + & & ( this instanceof EntityPlayer | | world . func _ 82736 _ K ( ) . func _ 82766 _ b ( " mobGriefing " ) ) <nl> + + & & this . field _ 70130 _ N * this . field _ 70130 _ N * this . field _ 70131 _ O > 0 . 512F ; <nl> + + } <nl> + / * = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = Forge End = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = * / <nl> + <nl> public void func _ 184178 _ b ( EntityPlayerMP p _ 184178 _ 1 _ )
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / entity / Entity . java . patch b / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> index 5f2c397 . . 7a5064e 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> @ @ - 54 , 7 + 54 , 7 @ @ <nl> + public ArrayList < EntityItem > capturedDrops = new ArrayList < EntityItem > ( ) ; <nl> + private UUID persistentID ; <nl> <nl> - + private HashMap < String , IExtendedEntityProperties > extendedProperties ; <nl> + + protected HashMap < String , IExtendedEntityProperties > extendedProperties ; <nl> + <nl> public int func _ 145782 _ y ( ) <nl> { <nl> diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> index 1d1e587 . . 4ad85e0 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> @ @ - 498 , 7 + 498 , 18 @ @ <nl> this . field _ 71074 _ e = p _ 71008 _ 1 _ ; <nl> this . field _ 71072 _ f = p _ 71008 _ 2 _ ; <nl> <nl> - @ @ - 1876 , 6 + 2020 , 17 @ @ <nl> + @ @ - 1865 , 6 + 2009 , 10 @ @ <nl> + this . field _ 71106 _ cc = p _ 71049 _ 1 _ . field _ 71106 _ cc ; <nl> + this . func _ 85040 _ s ( p _ 71049 _ 1 _ . func _ 71037 _ bA ( ) ) ; <nl> + this . field _ 82152 _ aq = p _ 71049 _ 1 _ . field _ 82152 _ aq ; <nl> + + / / Copy and re - init ExtendedProperties when switching dimensions . <nl> + + this . extendedProperties = p _ 71049 _ 1 _ . extendedProperties ; <nl> + + for ( net . minecraftforge . common . IExtendedEntityProperties p : this . extendedProperties . values ( ) ) <nl> + + p . init ( this , this . field _ 70170 _ p ) ; <nl> + } <nl> + else if ( this . field _ 70170 _ p . func _ 82736 _ K ( ) . func _ 82766 _ b ( " keepInventory " ) ) <nl> + { <nl> + @ @ - 1876 , 6 + 2024 , 17 @ @ <nl> } <nl> <nl> this . field _ 71078 _ a = p _ 71049 _ 1 _ . field _ 71078 _ a ; <nl> @ @ - 516 , 7 + 527 , 7 @ @ <nl> } <nl> <nl> protected boolean func _ 70041 _ e _ ( ) <nl> - @ @ - 1914 , 7 + 2069 , 14 @ @ <nl> + @ @ - 1914 , 7 + 2073 , 14 @ @ <nl> <nl> public void func _ 70062 _ b ( int p _ 70062 _ 1 _ , ItemStack p _ 70062 _ 2 _ ) <nl> { <nl> @ @ - 532 , 7 + 543 , 7 @ @ <nl> } <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> - @ @ - 1959 , 7 + 2121 , 7 @ @ <nl> + @ @ - 1959 , 7 + 2125 , 7 @ @ <nl> <nl> public IChatComponent func _ 145748 _ c _ ( ) <nl> { <nl> @ @ - 541 , 7 + 552 , 7 @ @ <nl> chatcomponenttext . func _ 150256 _ b ( ) . func _ 150241 _ a ( new ClickEvent ( ClickEvent . Action . SUGGEST _ COMMAND , " / msg " + this . func _ 70005 _ c _ ( ) + " " ) ) ; <nl> return chatcomponenttext ; <nl> } <nl> - @ @ - 2042 , 6 + 2204 , 118 @ @ <nl> + @ @ - 2042 , 6 + 2208 , 118 @ @ <nl> FMLNetworkHandler . openGui ( this , mod , modGuiId , world , x , y , z ) ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / common / IExtendedEntityProperties . java b / src / main / java / net / minecraftforge / common / IExtendedEntityProperties . java <nl> index 48702bd . . 87ea4da 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / IExtendedEntityProperties . java <nl> + + + b / src / main / java / net / minecraftforge / common / IExtendedEntityProperties . java <nl> @ @ - 30 , 6 + 30 , 8 @ @ public interface IExtendedEntityProperties { <nl> * Used to initialize the extended properties with the entity that this is attached to , as well <nl> * as the world object . <nl> * Called automatically if you register with the EntityConstructing event . <nl> + * May be called multiple times if the extended properties is moved over to a new entity . <nl> + * Such as when a player switches dimension { Minecraft re - creates the player entity } <nl> * @ param entity The entity that this extended properties is attached to <nl> * @ param world The world in which the entity exists <nl> * /

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / block / BlockFarmland . java . patch b / patches / minecraft / net / minecraft / block / BlockFarmland . java . patch 
 index 75b874e . . c2b6229 100644 
 - - - a / patches / minecraft / net / minecraft / block / BlockFarmland . java . patch 
 + + + b / patches / minecraft / net / minecraft / block / BlockFarmland . java . patch 
 @ @ - 1 , 5 + 1 , 14 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / block / BlockFarmland . java 
 + + + . . / src - work / minecraft / net / minecraft / block / BlockFarmland . java 
 + @ @ - 70 , 7 + 70 , 7 @ @ 
 + 
 + public void func _ 180658 _ a ( World p _ 180658 _ 1 _ , BlockPos p _ 180658 _ 2 _ , Entity p _ 180658 _ 3 _ , float p _ 180658 _ 4 _ ) 
 + { 
 + - if ( ! p _ 180658 _ 1 _ . field _ 72995 _ K & & p _ 180658 _ 1 _ . field _ 73012 _ v . nextFloat ( ) < p _ 180658 _ 4 _ - 0 . 5F & & p _ 180658 _ 3 _ instanceof EntityLivingBase & & ( p _ 180658 _ 3 _ instanceof EntityPlayer | | p _ 180658 _ 1 _ . func _ 82736 _ K ( ) . func _ 82766 _ b ( " mobGriefing " ) ) & & p _ 180658 _ 3 _ . field _ 70130 _ N * p _ 180658 _ 3 _ . field _ 70130 _ N * p _ 180658 _ 3 _ . field _ 70131 _ O > 0 . 512F ) 
 + + if ( ! p _ 180658 _ 1 _ . field _ 72995 _ K & & p _ 180658 _ 3 _ . canTrample ( p _ 180658 _ 1 _ , this , p _ 180658 _ 2 _ , p _ 180658 _ 4 _ ) ) / / Forge : Move logic to Entity # canTrample 
 + { 
 + this . func _ 190970 _ b ( p _ 180658 _ 1 _ , p _ 180658 _ 2 _ ) ; 
 + } 
 @ @ - 93 , 7 + 93 , 7 @ @ 
 private boolean func _ 176529 _ d ( World p _ 176529 _ 1 _ , BlockPos p _ 176529 _ 2 _ ) 
 { 
 diff - - git a / patches / minecraft / net / minecraft / entity / Entity . java . patch b / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 index a99d602 . . 48df088 100644 
 - - - a / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 @ @ - 126 , 7 + 126 , 7 @ @ 
 } 
 
 public boolean func _ 174816 _ a ( Explosion p _ 174816 _ 1 _ , World p _ 174816 _ 2 _ , BlockPos p _ 174816 _ 3 _ , IBlockState p _ 174816 _ 4 _ , float p _ 174816 _ 5 _ ) 
 - @ @ - 2802 , 6 + 2822 , 167 @ @ 
 + @ @ - 2802 , 6 + 2822 , 184 @ @ 
 EnchantmentHelper . func _ 151385 _ b ( p _ 174815 _ 1 _ , p _ 174815 _ 2 _ ) ; 
 } 
 
 @ @ - 289 , 6 + 289 , 23 @ @ 
 + ret . func _ 74778 _ a ( " id " , this . func _ 70022 _ Q ( ) ) ; 
 + return this . func _ 189511 _ e ( ret ) ; 
 + } 
 + + 
 + + / * * 
 + + * Checks if this { @ link Entity } can trample a { @ link Block } . 
 + + * 
 + + * @ param world The world in which the block will be trampled 
 + + * @ param block The block being tested 
 + + * @ param pos The block pos 
 + + * @ param fallDistance The fall distance 
 + + * @ return { @ code true } if this entity can trample , { @ code false } otherwise 
 + + * / 
 + + public boolean canTrample ( World world , Block block , BlockPos pos , float fallDistance ) 
 + + { 
 + + return world . field _ 73012 _ v . nextFloat ( ) < fallDistance - 0 . 5F 
 + + & & this instanceof EntityLivingBase 
 + + & & ( this instanceof EntityPlayer | | world . func _ 82736 _ K ( ) . func _ 82766 _ b ( " mobGriefing " ) ) 
 + + & & this . field _ 70130 _ N * this . field _ 70130 _ N * this . field _ 70131 _ O > 0 . 512F ; 
 + + } 
 + / * = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = Forge End = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = * / 
 + 
 public void func _ 184178 _ b ( EntityPlayerMP p _ 184178 _ 1 _ )

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / entity / Entity . java . patch b / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 index 5f2c397 . . 7a5064e 100644 
 - - - a / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 @ @ - 54 , 7 + 54 , 7 @ @ 
 + public ArrayList < EntityItem > capturedDrops = new ArrayList < EntityItem > ( ) ; 
 + private UUID persistentID ; 
 
 - + private HashMap < String , IExtendedEntityProperties > extendedProperties ; 
 + + protected HashMap < String , IExtendedEntityProperties > extendedProperties ; 
 + 
 public int func _ 145782 _ y ( ) 
 { 
 diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 index 1d1e587 . . 4ad85e0 100644 
 - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 @ @ - 498 , 7 + 498 , 18 @ @ 
 this . field _ 71074 _ e = p _ 71008 _ 1 _ ; 
 this . field _ 71072 _ f = p _ 71008 _ 2 _ ; 
 
 - @ @ - 1876 , 6 + 2020 , 17 @ @ 
 + @ @ - 1865 , 6 + 2009 , 10 @ @ 
 + this . field _ 71106 _ cc = p _ 71049 _ 1 _ . field _ 71106 _ cc ; 
 + this . func _ 85040 _ s ( p _ 71049 _ 1 _ . func _ 71037 _ bA ( ) ) ; 
 + this . field _ 82152 _ aq = p _ 71049 _ 1 _ . field _ 82152 _ aq ; 
 + + / / Copy and re - init ExtendedProperties when switching dimensions . 
 + + this . extendedProperties = p _ 71049 _ 1 _ . extendedProperties ; 
 + + for ( net . minecraftforge . common . IExtendedEntityProperties p : this . extendedProperties . values ( ) ) 
 + + p . init ( this , this . field _ 70170 _ p ) ; 
 + } 
 + else if ( this . field _ 70170 _ p . func _ 82736 _ K ( ) . func _ 82766 _ b ( " keepInventory " ) ) 
 + { 
 + @ @ - 1876 , 6 + 2024 , 17 @ @ 
 } 
 
 this . field _ 71078 _ a = p _ 71049 _ 1 _ . field _ 71078 _ a ; 
 @ @ - 516 , 7 + 527 , 7 @ @ 
 } 
 
 protected boolean func _ 70041 _ e _ ( ) 
 - @ @ - 1914 , 7 + 2069 , 14 @ @ 
 + @ @ - 1914 , 7 + 2073 , 14 @ @ 
 
 public void func _ 70062 _ b ( int p _ 70062 _ 1 _ , ItemStack p _ 70062 _ 2 _ ) 
 { 
 @ @ - 532 , 7 + 543 , 7 @ @ 
 } 
 
 @ SideOnly ( Side . CLIENT ) 
 - @ @ - 1959 , 7 + 2121 , 7 @ @ 
 + @ @ - 1959 , 7 + 2125 , 7 @ @ 
 
 public IChatComponent func _ 145748 _ c _ ( ) 
 { 
 @ @ - 541 , 7 + 552 , 7 @ @ 
 chatcomponenttext . func _ 150256 _ b ( ) . func _ 150241 _ a ( new ClickEvent ( ClickEvent . Action . SUGGEST _ COMMAND , " / msg " + this . func _ 70005 _ c _ ( ) + " " ) ) ; 
 return chatcomponenttext ; 
 } 
 - @ @ - 2042 , 6 + 2204 , 118 @ @ 
 + @ @ - 2042 , 6 + 2208 , 118 @ @ 
 FMLNetworkHandler . openGui ( this , mod , modGuiId , world , x , y , z ) ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / common / IExtendedEntityProperties . java b / src / main / java / net / minecraftforge / common / IExtendedEntityProperties . java 
 index 48702bd . . 87ea4da 100644 
 - - - a / src / main / java / net / minecraftforge / common / IExtendedEntityProperties . java 
 + + + b / src / main / java / net / minecraftforge / common / IExtendedEntityProperties . java 
 @ @ - 30 , 6 + 30 , 8 @ @ public interface IExtendedEntityProperties { 
 * Used to initialize the extended properties with the entity that this is attached to , as well 
 * as the world object . 
 * Called automatically if you register with the EntityConstructing event . 
 + * May be called multiple times if the extended properties is moved over to a new entity . 
 + * Such as when a player switches dimension { Minecraft re - creates the player entity } 
 * @ param entity The entity that this extended properties is attached to 
 * @ param world The world in which the entity exists 
 * /
