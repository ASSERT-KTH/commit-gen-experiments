BLEU SCORE: 0.021440371673288

TEST MSG: Fix Biome # getSpawnableList returning an empty list for non - vanilla EnumCreatureTypes
GENERATED MSG: Add ability for modders to designate custom biome types . And remove note about automatically registering . Closes # 1167

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / world / biome / Biome . java . patch b / patches / minecraft / net / minecraft / world / biome / Biome . java . patch <nl> index 1f0ed44 . . b852758 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / biome / Biome . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / biome / Biome . java . patch <nl> @ @ - 18 , 7 + 18 , 16 @ @ <nl> private final String field _ 76791 _ y ; <nl> private final float field _ 76748 _ D ; <nl> private final float field _ 76749 _ E ; <nl> - @ @ - 134 , 11 + 134 , 12 @ @ <nl> + @ @ - 90 , 6 + 90 , 8 @ @ <nl> + protected List < Biome . SpawnListEntry > field _ 76762 _ K = Lists . < Biome . SpawnListEntry > newArrayList ( ) ; <nl> + protected List < Biome . SpawnListEntry > field _ 76755 _ L = Lists . < Biome . SpawnListEntry > newArrayList ( ) ; <nl> + protected List < Biome . SpawnListEntry > field _ 82914 _ M = Lists . < Biome . SpawnListEntry > newArrayList ( ) ; <nl> + + / / Forge : Stores the spawnable lists for non - vanilla EnumCreatureTypes . Can ' t be an EnumMap as that doesn ' t handle new enum values being added after it ' s created . <nl> + + protected java . util . Map < EnumCreatureType , List < Biome . SpawnListEntry > > modSpawnableLists = com . google . common . collect . Maps . newHashMap ( ) ; <nl> + <nl> + public static int func _ 185362 _ a ( Biome p _ 185362 _ 0 _ ) <nl> + { <nl> + @ @ - 134 , 11 + 136 , 12 @ @ <nl> this . field _ 76761 _ J . add ( new Biome . SpawnListEntry ( EntityWitch . class , 5 , 1 , 1 ) ) ; <nl> this . field _ 76755 _ L . add ( new Biome . SpawnListEntry ( EntitySquid . class , 10 , 4 , 4 ) ) ; <nl> this . field _ 82914 _ M . add ( new Biome . SpawnListEntry ( EntityBat . class , 10 , 8 , 8 ) ) ; <nl> @ @ - 32 , 7 + 41 , 18 @ @ <nl> } <nl> <nl> public boolean func _ 185363 _ b ( ) <nl> - @ @ - 234 , 7 + 235 , 7 @ @ <nl> + @ @ - 182 , 7 + 185 , 9 @ @ <nl> + case AMBIENT : <nl> + return this . field _ 82914 _ M ; <nl> + default : <nl> + - return Collections . < Biome . SpawnListEntry > emptyList ( ) ; <nl> + + / / Forge : Return a non - empty list for non - vanilla EnumCreatureTypes <nl> + + if ( ! this . modSpawnableLists . containsKey ( p _ 76747 _ 1 _ ) ) this . modSpawnableLists . put ( p _ 76747 _ 1 _ , Lists . < Biome . SpawnListEntry > newArrayList ( ) ) ; <nl> + + return this . modSpawnableLists . get ( p _ 76747 _ 1 _ ) ; <nl> + } <nl> + } <nl> + <nl> + @ @ - 234 , 7 + 239 , 7 @ @ <nl> { <nl> double d0 = ( double ) MathHelper . func _ 76131 _ a ( this . func _ 180626 _ a ( p _ 180627 _ 1 _ ) , 0 . 0F , 1 . 0F ) ; <nl> double d1 = ( double ) MathHelper . func _ 76131 _ a ( this . func _ 76727 _ i ( ) , 0 . 0F , 1 . 0F ) ; <nl> @ @ - 41 , 7 + 61 , 7 @ @ <nl> } <nl> <nl> public final void func _ 180628 _ b ( World p _ 180628 _ 1 _ , Random p _ 180628 _ 2 _ , ChunkPrimer p _ 180628 _ 3 _ , int p _ 180628 _ 4 _ , int p _ 180628 _ 5 _ , double p _ 180628 _ 6 _ ) <nl> - @ @ - 327 , 7 + 328 , 7 @ @ <nl> + @ @ - 327 , 7 + 332 , 7 @ @ <nl> { <nl> double d0 = ( double ) MathHelper . func _ 76131 _ a ( this . func _ 180626 _ a ( p _ 180625 _ 1 _ ) , 0 . 0F , 1 . 0F ) ; <nl> double d1 = ( double ) MathHelper . func _ 76131 _ a ( this . func _ 76727 _ i ( ) , 0 . 0F , 1 . 0F ) ; <nl> @ @ - 50 , 7 + 70 , 7 @ @ <nl> } <nl> <nl> public Class < ? extends Biome > func _ 150562 _ l ( ) <nl> - @ @ - 393 , 6 + 394 , 83 @ @ <nl> + @ @ - 393 , 6 + 398 , 83 @ @ <nl> return this . field _ 76766 _ R ; <nl> } <nl> <nl> diff - - git a / src / test / java / net / minecraftforge / test / BiomeSpawnableListTest . java b / src / test / java / net / minecraftforge / test / BiomeSpawnableListTest . java <nl> new file mode 100644 <nl> index 0000000 . . 3f44ea2 <nl> - - - / dev / null <nl> + + + b / src / test / java / net / minecraftforge / test / BiomeSpawnableListTest . java <nl> @ @ - 0 , 0 + 1 , 70 @ @ <nl> + package net . minecraftforge . test ; <nl> + <nl> + import net . minecraft . block . material . Material ; <nl> + import net . minecraft . entity . EntityLiving ; <nl> + import net . minecraft . entity . EnumCreatureType ; <nl> + import net . minecraft . entity . passive . AbstractHorse ; <nl> + import net . minecraft . entity . passive . EntityHorse ; <nl> + import net . minecraft . init . Biomes ; <nl> + import net . minecraft . init . Bootstrap ; <nl> + import net . minecraft . world . biome . Biome ; <nl> + import net . minecraftforge . common . util . EnumHelper ; <nl> + import net . minecraftforge . fml . common . registry . EntityRegistry ; <nl> + import net . minecraftforge . fml . common . registry . ForgeTestRunner ; <nl> + import org . junit . BeforeClass ; <nl> + import org . junit . Test ; <nl> + import org . junit . runner . RunWith ; <nl> + <nl> + import static org . junit . Assert . assertFalse ; <nl> + import static org . junit . Assert . assertTrue ; <nl> + <nl> + @ RunWith ( ForgeTestRunner . class ) <nl> + public class BiomeSpawnableListTest <nl> + { <nl> + private static EnumCreatureType creatureTypeHorse ; <nl> + <nl> + @ BeforeClass <nl> + public static void setUp ( ) throws Exception <nl> + { <nl> + Bootstrap . register ( ) ; <nl> + creatureTypeHorse = EnumHelper . addCreatureType ( " biomespawnablelisttest : horse " , AbstractHorse . class , 20 , Material . AIR , true , true ) ; <nl> + } <nl> + <nl> + private boolean spawnableListContainsEntry ( Class < ? extends EntityLiving > entityClass , int weightedProb , int minGroupCount , int maxGroupCount , <nl> + EnumCreatureType creatureType , Biome biome ) <nl> + { <nl> + boolean found = false ; <nl> + <nl> + for ( Biome . SpawnListEntry spawnListEntry : biome . getSpawnableList ( creatureType ) ) <nl> + { <nl> + if ( spawnListEntry . entityClass = = entityClass & & spawnListEntry . itemWeight = = weightedProb & & spawnListEntry . minGroupCount = = minGroupCount <nl> + & & spawnListEntry . maxGroupCount = = maxGroupCount ) <nl> + { <nl> + found = true ; <nl> + break ; <nl> + } <nl> + } <nl> + <nl> + return found ; <nl> + } <nl> + <nl> + @ Test <nl> + public void testAddAndRemoveSpawn ( ) throws Exception <nl> + { <nl> + final Class < EntityHorse > entityClass = EntityHorse . class ; <nl> + final int weightedProb = 1 ; <nl> + final int minGroupCount = 1 ; <nl> + final int maxGroupCount = 20 ; <nl> + final Biome biome = Biomes . PLAINS ; <nl> + <nl> + / / Test 1 : We can add a spawn for the non - vanilla EnumCreatureType <nl> + EntityRegistry . addSpawn ( entityClass , weightedProb , minGroupCount , maxGroupCount , creatureTypeHorse , biome ) ; <nl> + final boolean containsEntryAfterAdd = spawnableListContainsEntry ( entityClass , weightedProb , minGroupCount , maxGroupCount , creatureTypeHorse , biome ) ; <nl> + assertTrue ( " The SpawnListEntry wasn ' t added " , containsEntryAfterAdd ) ; <nl> + <nl> + / / Test 2 : We can remove a spawn for the non - vanilla EnumCreatureType <nl> + EntityRegistry . removeSpawn ( entityClass , creatureTypeHorse , biome ) ; <nl> + final boolean containsEntryAfterRemove = spawnableListContainsEntry ( entityClass , weightedProb , minGroupCount , maxGroupCount , creatureTypeHorse , biome ) ; <nl> + assertFalse ( " The SpawnListEntry wasn ' t removed " , containsEntryAfterRemove ) ; <nl> + } <nl> + }
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / common / BiomeDictionary . java b / src / main / java / net / minecraftforge / common / BiomeDictionary . java <nl> index a62ed47 . . 726cf9b 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / BiomeDictionary . java <nl> + + + b / src / main / java / net / minecraftforge / common / BiomeDictionary . java <nl> @ @ - 5 , 6 + 5 , 7 @ @ import java . util . * ; <nl> import cpw . mods . fml . common . FMLLog ; <nl> import net . minecraft . init . Blocks ; <nl> import net . minecraft . world . biome . * ; <nl> + import net . minecraftforge . common . util . EnumHelper ; <nl> import net . minecraftforge . event . terraingen . DeferredBiomeDecorator ; <nl> import static net . minecraft . world . biome . BiomeGenBase . * ; <nl> import static net . minecraftforge . common . BiomeDictionary . Type . * ; <nl> @ @ - 27 , 7 + 28 , 7 @ @ public class BiomeDictionary <nl> SAVANNA , <nl> CONIFEROUS , <nl> JUNGLE , <nl> - <nl> + <nl> / * Tags specifying the nature of a biome * / <nl> SPOOKY , <nl> DEAD , <nl> @ @ - 36 , 12 + 37 , 12 @ @ public class BiomeDictionary <nl> END , <nl> MUSHROOM , <nl> MAGICAL , <nl> - <nl> + <nl> OCEAN , <nl> RIVER , <nl> / * * A general tag for all water - based biomes . Shown as present if OCEAN or RIVER are . * * / <nl> WATER ( OCEAN , RIVER ) , <nl> - <nl> + <nl> / * Generic types which a biome can be * / <nl> MESA , <nl> FOREST , <nl> @ @ - 53 , 7 + 54 , 7 @ @ public class BiomeDictionary <nl> SNOWY , <nl> WASTELAND , <nl> BEACH , <nl> - <nl> + <nl> / * Deprecated tags , kept for compatibility * / <nl> @ Deprecated <nl> / * * Replaced by SANDY * * / <nl> @ @ - 61 , 18 + 62 , 47 @ @ public class BiomeDictionary <nl> @ Deprecated <nl> / * * Replaced by SNOWY * * / <nl> FROZEN ( SNOWY ) ; <nl> - <nl> + <nl> private List < Type > subTags ; <nl> - <nl> + <nl> private Type ( Type . . . subTags ) <nl> { <nl> this . subTags = Arrays . asList ( subTags ) ; <nl> } <nl> - <nl> + <nl> private boolean hasSubTags ( ) <nl> { <nl> return subTags ! = null & & ! subTags . isEmpty ( ) ; <nl> } <nl> + <nl> + / * * <nl> + * Retrieves a Type value by name , <nl> + * if one does not exist already it creates one . <nl> + * This can be used as interm measure for modders to <nl> + * add there own category of Biome . <nl> + * <nl> + * There are NO naming conventions besides : <nl> + * MUST be all upper case ( enforced by name . toUpper ( ) ) <nl> + * NO Special characters . { Unenforced , just don ' t be a pain , if it becomes a issue I WILL <nl> + * make this RTE with no worry about backwards compatibility } <nl> + * <nl> + * Note : For performance sake , the return value of this function SHOULD be cached . <nl> + * Two calls with the same name SHOULD return the same value . <nl> + * <nl> + * <nl> + * @ param name The name of this Type <nl> + * @ return An instance of Type for this name . <nl> + * / <nl> + public static Type getType ( String name , Type . . . subTypes ) <nl> + { <nl> + name = name . toUpperCase ( ) ; <nl> + for ( Type t : values ( ) ) <nl> + { <nl> + if ( t . name ( ) . equals ( name ) ) <nl> + return t ; <nl> + } <nl> + return EnumHelper . addEnum ( Type . class , name , new Class [ ] { Type [ ] . class } , new Object [ ] { subTypes } ) ; <nl> + } <nl> } <nl> <nl> private static final int BIOME _ LIST _ SIZE = BiomeGenBase . getBiomeGenArray ( ) . length ; <nl> @ @ - 101 , 15 + 131 , 15 @ @ public class BiomeDictionary <nl> <nl> / * * <nl> * Registers a biome with a specific biome type <nl> - * <nl> + * <nl> * @ param biome the biome to be registered <nl> * @ param type the type to register the biome as <nl> * @ return returns true if the biome was registered successfully <nl> * / <nl> public static boolean registerBiomeType ( BiomeGenBase biome , Type . . . types ) <nl> - { <nl> + { <nl> types = listSubTags ( types ) ; <nl> - <nl> + <nl> if ( BiomeGenBase . getBiomeGenArray ( ) [ biome . biomeID ] ! = null ) <nl> { <nl> for ( Type type : types ) <nl> @ @ - 142 , 7 + 172 , 7 @ @ public class BiomeDictionary <nl> <nl> / * * <nl> * Returns a list of biomes registered with a specific type <nl> - * <nl> + * <nl> * @ param type the Type to look for <nl> * @ return a list of biomes of the specified type , null if there are none <nl> * / <nl> @ @ - 158 , 7 + 188 , 7 @ @ public class BiomeDictionary <nl> <nl> / * * <nl> * Gets a list of Types that a specific biome is registered with <nl> - * <nl> + * <nl> * @ param biome the biome to check <nl> * @ return the list of types , null if there are none <nl> * / <nl> @ @ - 176 , 7 + 206 , 7 @ @ public class BiomeDictionary <nl> <nl> / * * <nl> * Checks to see if two biomes are registered as having the same type <nl> - * <nl> + * <nl> * @ param biomeA <nl> * @ param biomeB <nl> * @ return returns true if a common type is found , false otherwise <nl> @ @ - 205 , 7 + 235 , 7 @ @ public class BiomeDictionary <nl> <nl> / * * <nl> * Checks to see if the given biome is registered as being a specific type <nl> - * <nl> + * <nl> * @ param biome the biome to be considered <nl> * @ param type the type to check for <nl> * @ return returns true if the biome is registered as being of type type , false otherwise <nl> @ @ - 228 , 7 + 258 , 7 @ @ public class BiomeDictionary <nl> * @ return returns true if the biome has been registered , false otherwise <nl> * / <nl> public static boolean isBiomeRegistered ( BiomeGenBase biome ) <nl> - { <nl> + { <nl> return biomeList [ biome . biomeID ] ! = null ; <nl> } <nl> <nl> @ @ - 245 , 7 + 275 , 7 @ @ public class BiomeDictionary <nl> * Loops through the biome list and automatically adds tags to any biome that does not have any <nl> * This is called by Forge at postinit time . It will additionally dispatch any deferred decorator <nl> * creation events . <nl> - * <nl> + * <nl> * DO NOT call this during world generation <nl> * / <nl> public static void registerAllBiomesAndGenerateEvents ( ) <nl> @ @ - 273 , 13 + 303 , 11 @ @ public class BiomeDictionary <nl> * Automatically looks for and registers a given biome with appropriate tags <nl> * This method is called automatically if a biome has not been registered with any tags , <nl> * And another method requests information about it <nl> - * <nl> - * NOTE : You can opt out of having your biome registered by registering it as type NULL <nl> - * <nl> + * <nl> * @ param biome the biome to be considered <nl> * / <nl> public static void makeBestGuess ( BiomeGenBase biome ) <nl> - { <nl> + { <nl> if ( biome . theBiomeDecorator . treesPerChunk > = 3 ) <nl> { <nl> if ( biome . isHighHumidity ( ) & & biome . temperature > = 0 . 9F ) <nl> @ @ - 290 , 7 + 318 , 7 @ @ public class BiomeDictionary <nl> { <nl> BiomeDictionary . registerBiomeType ( biome , FOREST ) ; <nl> <nl> - if ( biome . temperature < = 0 . 2f ) <nl> + if ( biome . temperature < = 0 . 2f ) <nl> { <nl> BiomeDictionary . registerBiomeType ( biome , CONIFEROUS ) ; <nl> } <nl> @ @ - 384 , 7 + 412 , 7 @ @ public class BiomeDictionary <nl> } <nl> } <nl> <nl> - / / Internal implementation <nl> + / / Internal implementation <nl> private static void checkRegistration ( BiomeGenBase biome ) <nl> { <nl> if ( ! isBiomeRegistered ( biome ) ) <nl> @ @ - 401 , 23 + 429 , 23 @ @ public class BiomeDictionary <nl> { <nl> if ( info . typeList . contains ( remappedType ) ) return true ; <nl> } <nl> - <nl> + <nl> return false ; <nl> } <nl> - <nl> + <nl> return info . typeList . contains ( type ) ; <nl> } <nl> - <nl> + <nl> private static Type [ ] listSubTags ( Type . . . types ) <nl> { <nl> List < Type > subTags = new ArrayList < Type > ( ) ; <nl> - <nl> + <nl> for ( Type type : types ) <nl> { <nl> if ( type . hasSubTags ( ) ) subTags . addAll ( type . subTags ) ; <nl> else subTags . add ( type ) ; <nl> } <nl> - <nl> + <nl> return subTags . toArray ( new Type [ subTags . size ( ) ] ) ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / common / util / EnumHelper . java b / src / main / java / net / minecraftforge / common / util / EnumHelper . java <nl> index f71408a . . 5f0ec8a 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / util / EnumHelper . java <nl> + + + b / src / main / java / net / minecraftforge / common / util / EnumHelper . java <nl> @ @ - 49 , 7 + 49 , 7 @ @ public class EnumHelper <nl> { EnumStatus . class } , <nl> { ToolMaterial . class , int . class , int . class , float . class , float . class , int . class } , <nl> { EnumRarity . class , EnumChatFormatting . class , String . class } <nl> - } ; <nl> + } ; <nl> <nl> public static EnumAction addAction ( String name ) <nl> { <nl> @ @ - 190 , 7 + 190 , 7 @ @ public class EnumHelper <nl> setup ( ) ; <nl> return addEnum ( commonTypes , enumType , enumName , paramValues ) ; <nl> } <nl> - <nl> + <nl> @ SuppressWarnings ( " rawtypes " ) <nl> public static < T extends Enum < ? > > T addEnum ( Class [ ] [ ] map , Class < T > enumType , String enumName , Object . . . paramValues ) <nl> { <nl> @ @ - 219 , 7 + 219 , 7 @ @ public class EnumHelper <nl> <nl> Field valuesField = null ; <nl> Field [ ] fields = enumType . getDeclaredFields ( ) ; <nl> - <nl> + <nl> for ( Field field : fields ) <nl> { <nl> String name = field . getName ( ) ; <nl> @ @ - 234 , 7 + 234 , 7 @ @ public class EnumHelper <nl> if ( valuesField = = null ) <nl> { <nl> String valueType = String . format ( " [ L % s ; " , enumType . getName ( ) . replace ( ' . ' , ' / ' ) ) ; <nl> - <nl> + <nl> for ( Field field : fields ) <nl> { <nl> if ( ( field . getModifiers ( ) & flags ) = = flags & & <nl> diff - - git a / src / test / java / net / minecraftforge / test / EnumHelperTest . java b / src / test / java / net / minecraftforge / test / EnumHelperTest . java <nl> index a79582e . . ed891f7 100644 <nl> - - - a / src / test / java / net / minecraftforge / test / EnumHelperTest . java <nl> + + + b / src / test / java / net / minecraftforge / test / EnumHelperTest . java <nl> @ @ - 6 , 9 + 6 , 10 @ @ import java . util . ArrayList ; <nl> import java . util . List ; <nl> <nl> import net . minecraftforge . client . EnumHelperClient ; <nl> + import net . minecraftforge . common . BiomeDictionary ; <nl> import net . minecraftforge . common . util . EnumHelper ; <nl> <nl> - import org . apache . logging . log4j . core . helpers . Assert ; <nl> + import org . junit . Assert ; <nl> import org . junit . Test ; <nl> <nl> import cpw . mods . fml . relauncher . ReflectionHelper ; <nl> @ @ - 32 , 6 + 33 , 8 @ @ public class EnumHelperTest <nl> <nl> if ( failed ) <nl> throw new RuntimeException ( " Enum Helper test failed ! " ) ; <nl> + Assert . assertEquals ( BiomeDictionary . Type . BEACH , BiomeDictionary . Type . getType ( " BEACH " ) ) ; <nl> + Assert . assertEquals ( BiomeDictionary . Type . getType ( " NEWTYPE " ) , BiomeDictionary . Type . getType ( " NEWTYPE " ) ) ; <nl> } <nl> private void testType ( Object [ ] info ) <nl> {

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / world / biome / Biome . java . patch b / patches / minecraft / net / minecraft / world / biome / Biome . java . patch 
 index 1f0ed44 . . b852758 100644 
 - - - a / patches / minecraft / net / minecraft / world / biome / Biome . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / biome / Biome . java . patch 
 @ @ - 18 , 7 + 18 , 16 @ @ 
 private final String field _ 76791 _ y ; 
 private final float field _ 76748 _ D ; 
 private final float field _ 76749 _ E ; 
 - @ @ - 134 , 11 + 134 , 12 @ @ 
 + @ @ - 90 , 6 + 90 , 8 @ @ 
 + protected List < Biome . SpawnListEntry > field _ 76762 _ K = Lists . < Biome . SpawnListEntry > newArrayList ( ) ; 
 + protected List < Biome . SpawnListEntry > field _ 76755 _ L = Lists . < Biome . SpawnListEntry > newArrayList ( ) ; 
 + protected List < Biome . SpawnListEntry > field _ 82914 _ M = Lists . < Biome . SpawnListEntry > newArrayList ( ) ; 
 + + / / Forge : Stores the spawnable lists for non - vanilla EnumCreatureTypes . Can ' t be an EnumMap as that doesn ' t handle new enum values being added after it ' s created . 
 + + protected java . util . Map < EnumCreatureType , List < Biome . SpawnListEntry > > modSpawnableLists = com . google . common . collect . Maps . newHashMap ( ) ; 
 + 
 + public static int func _ 185362 _ a ( Biome p _ 185362 _ 0 _ ) 
 + { 
 + @ @ - 134 , 11 + 136 , 12 @ @ 
 this . field _ 76761 _ J . add ( new Biome . SpawnListEntry ( EntityWitch . class , 5 , 1 , 1 ) ) ; 
 this . field _ 76755 _ L . add ( new Biome . SpawnListEntry ( EntitySquid . class , 10 , 4 , 4 ) ) ; 
 this . field _ 82914 _ M . add ( new Biome . SpawnListEntry ( EntityBat . class , 10 , 8 , 8 ) ) ; 
 @ @ - 32 , 7 + 41 , 18 @ @ 
 } 
 
 public boolean func _ 185363 _ b ( ) 
 - @ @ - 234 , 7 + 235 , 7 @ @ 
 + @ @ - 182 , 7 + 185 , 9 @ @ 
 + case AMBIENT : 
 + return this . field _ 82914 _ M ; 
 + default : 
 + - return Collections . < Biome . SpawnListEntry > emptyList ( ) ; 
 + + / / Forge : Return a non - empty list for non - vanilla EnumCreatureTypes 
 + + if ( ! this . modSpawnableLists . containsKey ( p _ 76747 _ 1 _ ) ) this . modSpawnableLists . put ( p _ 76747 _ 1 _ , Lists . < Biome . SpawnListEntry > newArrayList ( ) ) ; 
 + + return this . modSpawnableLists . get ( p _ 76747 _ 1 _ ) ; 
 + } 
 + } 
 + 
 + @ @ - 234 , 7 + 239 , 7 @ @ 
 { 
 double d0 = ( double ) MathHelper . func _ 76131 _ a ( this . func _ 180626 _ a ( p _ 180627 _ 1 _ ) , 0 . 0F , 1 . 0F ) ; 
 double d1 = ( double ) MathHelper . func _ 76131 _ a ( this . func _ 76727 _ i ( ) , 0 . 0F , 1 . 0F ) ; 
 @ @ - 41 , 7 + 61 , 7 @ @ 
 } 
 
 public final void func _ 180628 _ b ( World p _ 180628 _ 1 _ , Random p _ 180628 _ 2 _ , ChunkPrimer p _ 180628 _ 3 _ , int p _ 180628 _ 4 _ , int p _ 180628 _ 5 _ , double p _ 180628 _ 6 _ ) 
 - @ @ - 327 , 7 + 328 , 7 @ @ 
 + @ @ - 327 , 7 + 332 , 7 @ @ 
 { 
 double d0 = ( double ) MathHelper . func _ 76131 _ a ( this . func _ 180626 _ a ( p _ 180625 _ 1 _ ) , 0 . 0F , 1 . 0F ) ; 
 double d1 = ( double ) MathHelper . func _ 76131 _ a ( this . func _ 76727 _ i ( ) , 0 . 0F , 1 . 0F ) ; 
 @ @ - 50 , 7 + 70 , 7 @ @ 
 } 
 
 public Class < ? extends Biome > func _ 150562 _ l ( ) 
 - @ @ - 393 , 6 + 394 , 83 @ @ 
 + @ @ - 393 , 6 + 398 , 83 @ @ 
 return this . field _ 76766 _ R ; 
 } 
 
 diff - - git a / src / test / java / net / minecraftforge / test / BiomeSpawnableListTest . java b / src / test / java / net / minecraftforge / test / BiomeSpawnableListTest . java 
 new file mode 100644 
 index 0000000 . . 3f44ea2 
 - - - / dev / null 
 + + + b / src / test / java / net / minecraftforge / test / BiomeSpawnableListTest . java 
 @ @ - 0 , 0 + 1 , 70 @ @ 
 + package net . minecraftforge . test ; 
 + 
 + import net . minecraft . block . material . Material ; 
 + import net . minecraft . entity . EntityLiving ; 
 + import net . minecraft . entity . EnumCreatureType ; 
 + import net . minecraft . entity . passive . AbstractHorse ; 
 + import net . minecraft . entity . passive . EntityHorse ; 
 + import net . minecraft . init . Biomes ; 
 + import net . minecraft . init . Bootstrap ; 
 + import net . minecraft . world . biome . Biome ; 
 + import net . minecraftforge . common . util . EnumHelper ; 
 + import net . minecraftforge . fml . common . registry . EntityRegistry ; 
 + import net . minecraftforge . fml . common . registry . ForgeTestRunner ; 
 + import org . junit . BeforeClass ; 
 + import org . junit . Test ; 
 + import org . junit . runner . RunWith ; 
 + 
 + import static org . junit . Assert . assertFalse ; 
 + import static org . junit . Assert . assertTrue ; 
 + 
 + @ RunWith ( ForgeTestRunner . class ) 
 + public class BiomeSpawnableListTest 
 + { 
 + private static EnumCreatureType creatureTypeHorse ; 
 + 
 + @ BeforeClass 
 + public static void setUp ( ) throws Exception 
 + { 
 + Bootstrap . register ( ) ; 
 + creatureTypeHorse = EnumHelper . addCreatureType ( " biomespawnablelisttest : horse " , AbstractHorse . class , 20 , Material . AIR , true , true ) ; 
 + } 
 + 
 + private boolean spawnableListContainsEntry ( Class < ? extends EntityLiving > entityClass , int weightedProb , int minGroupCount , int maxGroupCount , 
 + EnumCreatureType creatureType , Biome biome ) 
 + { 
 + boolean found = false ; 
 + 
 + for ( Biome . SpawnListEntry spawnListEntry : biome . getSpawnableList ( creatureType ) ) 
 + { 
 + if ( spawnListEntry . entityClass = = entityClass & & spawnListEntry . itemWeight = = weightedProb & & spawnListEntry . minGroupCount = = minGroupCount 
 + & & spawnListEntry . maxGroupCount = = maxGroupCount ) 
 + { 
 + found = true ; 
 + break ; 
 + } 
 + } 
 + 
 + return found ; 
 + } 
 + 
 + @ Test 
 + public void testAddAndRemoveSpawn ( ) throws Exception 
 + { 
 + final Class < EntityHorse > entityClass = EntityHorse . class ; 
 + final int weightedProb = 1 ; 
 + final int minGroupCount = 1 ; 
 + final int maxGroupCount = 20 ; 
 + final Biome biome = Biomes . PLAINS ; 
 + 
 + / / Test 1 : We can add a spawn for the non - vanilla EnumCreatureType 
 + EntityRegistry . addSpawn ( entityClass , weightedProb , minGroupCount , maxGroupCount , creatureTypeHorse , biome ) ; 
 + final boolean containsEntryAfterAdd = spawnableListContainsEntry ( entityClass , weightedProb , minGroupCount , maxGroupCount , creatureTypeHorse , biome ) ; 
 + assertTrue ( " The SpawnListEntry wasn ' t added " , containsEntryAfterAdd ) ; 
 + 
 + / / Test 2 : We can remove a spawn for the non - vanilla EnumCreatureType 
 + EntityRegistry . removeSpawn ( entityClass , creatureTypeHorse , biome ) ; 
 + final boolean containsEntryAfterRemove = spawnableListContainsEntry ( entityClass , weightedProb , minGroupCount , maxGroupCount , creatureTypeHorse , biome ) ; 
 + assertFalse ( " The SpawnListEntry wasn ' t removed " , containsEntryAfterRemove ) ; 
 + } 
 + }

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / common / BiomeDictionary . java b / src / main / java / net / minecraftforge / common / BiomeDictionary . java 
 index a62ed47 . . 726cf9b 100644 
 - - - a / src / main / java / net / minecraftforge / common / BiomeDictionary . java 
 + + + b / src / main / java / net / minecraftforge / common / BiomeDictionary . java 
 @ @ - 5 , 6 + 5 , 7 @ @ import java . util . * ; 
 import cpw . mods . fml . common . FMLLog ; 
 import net . minecraft . init . Blocks ; 
 import net . minecraft . world . biome . * ; 
 + import net . minecraftforge . common . util . EnumHelper ; 
 import net . minecraftforge . event . terraingen . DeferredBiomeDecorator ; 
 import static net . minecraft . world . biome . BiomeGenBase . * ; 
 import static net . minecraftforge . common . BiomeDictionary . Type . * ; 
 @ @ - 27 , 7 + 28 , 7 @ @ public class BiomeDictionary 
 SAVANNA , 
 CONIFEROUS , 
 JUNGLE , 
 - 
 + 
 / * Tags specifying the nature of a biome * / 
 SPOOKY , 
 DEAD , 
 @ @ - 36 , 12 + 37 , 12 @ @ public class BiomeDictionary 
 END , 
 MUSHROOM , 
 MAGICAL , 
 - 
 + 
 OCEAN , 
 RIVER , 
 / * * A general tag for all water - based biomes . Shown as present if OCEAN or RIVER are . * * / 
 WATER ( OCEAN , RIVER ) , 
 - 
 + 
 / * Generic types which a biome can be * / 
 MESA , 
 FOREST , 
 @ @ - 53 , 7 + 54 , 7 @ @ public class BiomeDictionary 
 SNOWY , 
 WASTELAND , 
 BEACH , 
 - 
 + 
 / * Deprecated tags , kept for compatibility * / 
 @ Deprecated 
 / * * Replaced by SANDY * * / 
 @ @ - 61 , 18 + 62 , 47 @ @ public class BiomeDictionary 
 @ Deprecated 
 / * * Replaced by SNOWY * * / 
 FROZEN ( SNOWY ) ; 
 - 
 + 
 private List < Type > subTags ; 
 - 
 + 
 private Type ( Type . . . subTags ) 
 { 
 this . subTags = Arrays . asList ( subTags ) ; 
 } 
 - 
 + 
 private boolean hasSubTags ( ) 
 { 
 return subTags ! = null & & ! subTags . isEmpty ( ) ; 
 } 
 + 
 + / * * 
 + * Retrieves a Type value by name , 
 + * if one does not exist already it creates one . 
 + * This can be used as interm measure for modders to 
 + * add there own category of Biome . 
 + * 
 + * There are NO naming conventions besides : 
 + * MUST be all upper case ( enforced by name . toUpper ( ) ) 
 + * NO Special characters . { Unenforced , just don ' t be a pain , if it becomes a issue I WILL 
 + * make this RTE with no worry about backwards compatibility } 
 + * 
 + * Note : For performance sake , the return value of this function SHOULD be cached . 
 + * Two calls with the same name SHOULD return the same value . 
 + * 
 + * 
 + * @ param name The name of this Type 
 + * @ return An instance of Type for this name . 
 + * / 
 + public static Type getType ( String name , Type . . . subTypes ) 
 + { 
 + name = name . toUpperCase ( ) ; 
 + for ( Type t : values ( ) ) 
 + { 
 + if ( t . name ( ) . equals ( name ) ) 
 + return t ; 
 + } 
 + return EnumHelper . addEnum ( Type . class , name , new Class [ ] { Type [ ] . class } , new Object [ ] { subTypes } ) ; 
 + } 
 } 
 
 private static final int BIOME _ LIST _ SIZE = BiomeGenBase . getBiomeGenArray ( ) . length ; 
 @ @ - 101 , 15 + 131 , 15 @ @ public class BiomeDictionary 
 
 / * * 
 * Registers a biome with a specific biome type 
 - * 
 + * 
 * @ param biome the biome to be registered 
 * @ param type the type to register the biome as 
 * @ return returns true if the biome was registered successfully 
 * / 
 public static boolean registerBiomeType ( BiomeGenBase biome , Type . . . types ) 
 - { 
 + { 
 types = listSubTags ( types ) ; 
 - 
 + 
 if ( BiomeGenBase . getBiomeGenArray ( ) [ biome . biomeID ] ! = null ) 
 { 
 for ( Type type : types ) 
 @ @ - 142 , 7 + 172 , 7 @ @ public class BiomeDictionary 
 
 / * * 
 * Returns a list of biomes registered with a specific type 
 - * 
 + * 
 * @ param type the Type to look for 
 * @ return a list of biomes of the specified type , null if there are none 
 * / 
 @ @ - 158 , 7 + 188 , 7 @ @ public class BiomeDictionary 
 
 / * * 
 * Gets a list of Types that a specific biome is registered with 
 - * 
 + * 
 * @ param biome the biome to check 
 * @ return the list of types , null if there are none 
 * / 
 @ @ - 176 , 7 + 206 , 7 @ @ public class BiomeDictionary 
 
 / * * 
 * Checks to see if two biomes are registered as having the same type 
 - * 
 + * 
 * @ param biomeA 
 * @ param biomeB 
 * @ return returns true if a common type is found , false otherwise 
 @ @ - 205 , 7 + 235 , 7 @ @ public class BiomeDictionary 
 
 / * * 
 * Checks to see if the given biome is registered as being a specific type 
 - * 
 + * 
 * @ param biome the biome to be considered 
 * @ param type the type to check for 
 * @ return returns true if the biome is registered as being of type type , false otherwise 
 @ @ - 228 , 7 + 258 , 7 @ @ public class BiomeDictionary 
 * @ return returns true if the biome has been registered , false otherwise 
 * / 
 public static boolean isBiomeRegistered ( BiomeGenBase biome ) 
 - { 
 + { 
 return biomeList [ biome . biomeID ] ! = null ; 
 } 
 
 @ @ - 245 , 7 + 275 , 7 @ @ public class BiomeDictionary 
 * Loops through the biome list and automatically adds tags to any biome that does not have any 
 * This is called by Forge at postinit time . It will additionally dispatch any deferred decorator 
 * creation events . 
 - * 
 + * 
 * DO NOT call this during world generation 
 * / 
 public static void registerAllBiomesAndGenerateEvents ( ) 
 @ @ - 273 , 13 + 303 , 11 @ @ public class BiomeDictionary 
 * Automatically looks for and registers a given biome with appropriate tags 
 * This method is called automatically if a biome has not been registered with any tags , 
 * And another method requests information about it 
 - * 
 - * NOTE : You can opt out of having your biome registered by registering it as type NULL 
 - * 
 + * 
 * @ param biome the biome to be considered 
 * / 
 public static void makeBestGuess ( BiomeGenBase biome ) 
 - { 
 + { 
 if ( biome . theBiomeDecorator . treesPerChunk > = 3 ) 
 { 
 if ( biome . isHighHumidity ( ) & & biome . temperature > = 0 . 9F ) 
 @ @ - 290 , 7 + 318 , 7 @ @ public class BiomeDictionary 
 { 
 BiomeDictionary . registerBiomeType ( biome , FOREST ) ; 
 
 - if ( biome . temperature < = 0 . 2f ) 
 + if ( biome . temperature < = 0 . 2f ) 
 { 
 BiomeDictionary . registerBiomeType ( biome , CONIFEROUS ) ; 
 } 
 @ @ - 384 , 7 + 412 , 7 @ @ public class BiomeDictionary 
 } 
 } 
 
 - / / Internal implementation 
 + / / Internal implementation 
 private static void checkRegistration ( BiomeGenBase biome ) 
 { 
 if ( ! isBiomeRegistered ( biome ) ) 
 @ @ - 401 , 23 + 429 , 23 @ @ public class BiomeDictionary 
 { 
 if ( info . typeList . contains ( remappedType ) ) return true ; 
 } 
 - 
 + 
 return false ; 
 } 
 - 
 + 
 return info . typeList . contains ( type ) ; 
 } 
 - 
 + 
 private static Type [ ] listSubTags ( Type . . . types ) 
 { 
 List < Type > subTags = new ArrayList < Type > ( ) ; 
 - 
 + 
 for ( Type type : types ) 
 { 
 if ( type . hasSubTags ( ) ) subTags . addAll ( type . subTags ) ; 
 else subTags . add ( type ) ; 
 } 
 - 
 + 
 return subTags . toArray ( new Type [ subTags . size ( ) ] ) ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / common / util / EnumHelper . java b / src / main / java / net / minecraftforge / common / util / EnumHelper . java 
 index f71408a . . 5f0ec8a 100644 
 - - - a / src / main / java / net / minecraftforge / common / util / EnumHelper . java 
 + + + b / src / main / java / net / minecraftforge / common / util / EnumHelper . java 
 @ @ - 49 , 7 + 49 , 7 @ @ public class EnumHelper 
 { EnumStatus . class } , 
 { ToolMaterial . class , int . class , int . class , float . class , float . class , int . class } , 
 { EnumRarity . class , EnumChatFormatting . class , String . class } 
 - } ; 
 + } ; 
 
 public static EnumAction addAction ( String name ) 
 { 
 @ @ - 190 , 7 + 190 , 7 @ @ public class EnumHelper 
 setup ( ) ; 
 return addEnum ( commonTypes , enumType , enumName , paramValues ) ; 
 } 
 - 
 + 
 @ SuppressWarnings ( " rawtypes " ) 
 public static < T extends Enum < ? > > T addEnum ( Class [ ] [ ] map , Class < T > enumType , String enumName , Object . . . paramValues ) 
 { 
 @ @ - 219 , 7 + 219 , 7 @ @ public class EnumHelper 
 
 Field valuesField = null ; 
 Field [ ] fields = enumType . getDeclaredFields ( ) ; 
 - 
 + 
 for ( Field field : fields ) 
 { 
 String name = field . getName ( ) ; 
 @ @ - 234 , 7 + 234 , 7 @ @ public class EnumHelper 
 if ( valuesField = = null ) 
 { 
 String valueType = String . format ( " [ L % s ; " , enumType . getName ( ) . replace ( ' . ' , ' / ' ) ) ; 
 - 
 + 
 for ( Field field : fields ) 
 { 
 if ( ( field . getModifiers ( ) & flags ) = = flags & & 
 diff - - git a / src / test / java / net / minecraftforge / test / EnumHelperTest . java b / src / test / java / net / minecraftforge / test / EnumHelperTest . java 
 index a79582e . . ed891f7 100644 
 - - - a / src / test / java / net / minecraftforge / test / EnumHelperTest . java 
 + + + b / src / test / java / net / minecraftforge / test / EnumHelperTest . java 
 @ @ - 6 , 9 + 6 , 10 @ @ import java . util . ArrayList ; 
 import java . util . List ; 
 
 import net . minecraftforge . client . EnumHelperClient ; 
 + import net . minecraftforge . common . BiomeDictionary ; 
 import net . minecraftforge . common . util . EnumHelper ; 
 
 - import org . apache . logging . log4j . core . helpers . Assert ; 
 + import org . junit . Assert ; 
 import org . junit . Test ; 
 
 import cpw . mods . fml . relauncher . ReflectionHelper ; 
 @ @ - 32 , 6 + 33 , 8 @ @ public class EnumHelperTest 
 
 if ( failed ) 
 throw new RuntimeException ( " Enum Helper test failed ! " ) ; 
 + Assert . assertEquals ( BiomeDictionary . Type . BEACH , BiomeDictionary . Type . getType ( " BEACH " ) ) ; 
 + Assert . assertEquals ( BiomeDictionary . Type . getType ( " NEWTYPE " ) , BiomeDictionary . Type . getType ( " NEWTYPE " ) ) ; 
 } 
 private void testType ( Object [ ] info ) 
 {
