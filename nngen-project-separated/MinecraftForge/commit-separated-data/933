BLEU SCORE: 0.03214954573057458

TEST MSG: Removed face doubles from item models .
GENERATED MSG: Some more fixes for chunkloading code . Works very reliably now .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> index 6c405c9 . . feade29 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java <nl> @ @ - 1 , 6 + 1 , 7 @ @ <nl> package net . minecraftforge . client . model ; <nl> <nl> import java . util . Arrays ; <nl> + import java . util . BitSet ; <nl> import java . util . Collection ; <nl> import java . util . List ; <nl> <nl> @ @ - 145 , 6 + 146 , 7 @ @ public class ItemLayerModel implements IRetexturableModel { <nl> int uMax = sprite . getIconWidth ( ) ; <nl> int vMax = sprite . getIconHeight ( ) ; <nl> <nl> + BitSet faces = new BitSet ( ( uMax + 1 ) * ( vMax + 1 ) * 4 ) ; <nl> for ( int f = 0 ; f < sprite . getFrameCount ( ) ; f + + ) <nl> { <nl> int [ ] pixels = sprite . getFrameTextureData ( f ) [ 0 ] ; <nl> @ @ - 159 , 26 + 161 , 26 @ @ public class ItemLayerModel implements IRetexturableModel { <nl> boolean t = isTransparent ( pixels , uMax , vMax , u , v ) ; <nl> if ( ptu & & ! t ) / / left - transparent , right - opaque <nl> { <nl> - builder . add ( buildSideQuad ( format , transform , EnumFacing . WEST , tint , sprite , u , v ) ) ; <nl> + addSideQuad ( builder , faces , format , transform , EnumFacing . WEST , tint , sprite , uMax , vMax , u , v ) ; <nl> } <nl> if ( ! ptu & & t ) / / left - opaque , right - transparent <nl> { <nl> - builder . add ( buildSideQuad ( format , transform , EnumFacing . EAST , tint , sprite , u , v ) ) ; <nl> + addSideQuad ( builder , faces , format , transform , EnumFacing . EAST , tint , sprite , uMax , vMax , u , v ) ; <nl> } <nl> if ( ptv [ u ] & & ! t ) / / up - transparent , down - opaque <nl> { <nl> - builder . add ( buildSideQuad ( format , transform , EnumFacing . UP , tint , sprite , u , v ) ) ; <nl> + addSideQuad ( builder , faces , format , transform , EnumFacing . UP , tint , sprite , uMax , vMax , u , v ) ; <nl> } <nl> if ( ! ptv [ u ] & & t ) / / up - opaque , down - transparent <nl> { <nl> - builder . add ( buildSideQuad ( format , transform , EnumFacing . DOWN , tint , sprite , u , v ) ) ; <nl> + addSideQuad ( builder , faces , format , transform , EnumFacing . DOWN , tint , sprite , uMax , vMax , u , v ) ; <nl> } <nl> ptu = t ; <nl> ptv [ u ] = t ; <nl> } <nl> if ( ! ptu ) / / last - opaque <nl> { <nl> - builder . add ( buildSideQuad ( format , transform , EnumFacing . EAST , tint , sprite , uMax , v ) ) ; <nl> + addSideQuad ( builder , faces , format , transform , EnumFacing . EAST , tint , sprite , uMax , vMax , uMax , v ) ; <nl> } <nl> } <nl> / / last line <nl> @ @ - 186 , 7 + 188 , 7 @ @ public class ItemLayerModel implements IRetexturableModel { <nl> { <nl> if ( ! ptv [ u ] ) <nl> { <nl> - builder . add ( buildSideQuad ( format , transform , EnumFacing . DOWN , tint , sprite , u , vMax ) ) ; <nl> + addSideQuad ( builder , faces , format , transform , EnumFacing . DOWN , tint , sprite , uMax , vMax , u , vMax ) ; <nl> } <nl> } <nl> } <nl> @ @ - 212 , 6 + 214 , 18 @ @ public class ItemLayerModel implements IRetexturableModel { <nl> return ( pixels [ u + ( vMax - 1 - v ) * uMax ] > > 24 & 0xFF ) = = 0 ; <nl> } <nl> <nl> + private static void addSideQuad ( ImmutableList . Builder < BakedQuad > builder , BitSet faces , VertexFormat format , TRSRTransformation transform , EnumFacing side , int tint , TextureAtlasSprite sprite , int uMax , int vMax , int u , int v ) <nl> + { <nl> + int si = side . ordinal ( ) ; <nl> + if ( si > 4 ) si - = 2 ; <nl> + int index = ( vMax + 1 ) * ( ( uMax + 1 ) * si + u ) + v ; <nl> + if ( ! faces . get ( index ) ) <nl> + { <nl> + faces . set ( index ) ; <nl> + builder . add ( buildSideQuad ( format , transform , side , tint , sprite , u , v ) ) ; <nl> + } <nl> + } <nl> + <nl> private static BakedQuad buildSideQuad ( VertexFormat format , TRSRTransformation transform , EnumFacing side , int tint , TextureAtlasSprite sprite , int u , int v ) <nl> { <nl> final float eps0 = 30e - 5f ;
NEAREST DIFF (one line): diff - - git a / common / net / minecraftforge / common / ForgeChunkManager . java b / common / net / minecraftforge / common / ForgeChunkManager . java <nl> index 688e6cb . . 918e4e5 100644 <nl> - - - a / common / net / minecraftforge / common / ForgeChunkManager . java <nl> + + + b / common / net / minecraftforge / common / ForgeChunkManager . java <nl> @ @ - 518 , 7 + 518 , 7 @ @ public class ForgeChunkManager <nl> * / <nl> public static SetMultimap < ChunkCoordIntPair , Ticket > getPersistentChunksFor ( World world ) <nl> { <nl> - return ImmutableSetMultimap . copyOf ( forcedChunks . get ( world ) ) ; <nl> + return forcedChunks . containsKey ( world ) ? ImmutableSetMultimap . copyOf ( forcedChunks . get ( world ) ) : ImmutableSetMultimap . < ChunkCoordIntPair , Ticket > of ( ) ; <nl> } <nl> <nl> static void saveWorld ( World world ) <nl> diff - - git a / patches / common / net / minecraft / src / World . java . patch b / patches / common / net / minecraft / src / World . java . patch <nl> index 3926d23 . . 957ae17 100644 <nl> - - - a / patches / common / net / minecraft / src / World . java . patch <nl> + + + b / patches / common / net / minecraft / src / World . java . patch <nl> @ @ - 40 , 23 + 40 , 7 @ @ <nl> { <nl> if ( this . blockExists ( par1 , 0 , par2 ) ) <nl> { <nl> - @ @ - 167 , 6 + 191 , 7 @ @ <nl> - this . chunkProvider = this . createChunkProvider ( ) ; <nl> - this . calculateInitialSkylight ( ) ; <nl> - this . calculateInitialWeather ( ) ; <nl> - + MinecraftForge . EVENT _ BUS . post ( new WorldEvent . Load ( this ) ) ; <nl> - } <nl> - <nl> - public World ( ISaveHandler par1ISaveHandler , String par2Str , WorldSettings par3WorldSettings , WorldProvider par4WorldProvider , Profiler par5Profiler ) <nl> - @ @ - 213 , 6 + 238 , 7 @ @ <nl> - <nl> - this . calculateInitialSkylight ( ) ; <nl> - this . calculateInitialWeather ( ) ; <nl> - + MinecraftForge . EVENT _ BUS . post ( new WorldEvent . Load ( this ) ) ; <nl> - } <nl> - <nl> - / * * <nl> - @ @ - 269 , 7 + 295 , 8 @ @ <nl> + @ @ - 269 , 7 + 293 , 8 @ @ <nl> * / <nl> public boolean isAirBlock ( int par1 , int par2 , int par3 ) <nl> { <nl> @ @ - 66 , 7 + 50 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 278 , 7 + 305 , 8 @ @ <nl> + @ @ - 278 , 7 + 303 , 8 @ @ <nl> public boolean blockHasTileEntity ( int par1 , int par2 , int par3 ) <nl> { <nl> int var4 = this . getBlockId ( par1 , par2 , par3 ) ; <nl> @ @ - 76 , 7 + 60 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 980 , 7 + 1008 , 7 @ @ <nl> + @ @ - 980 , 7 + 1006 , 7 @ @ <nl> * / <nl> public boolean isDaytime ( ) <nl> { <nl> @ @ - 85 , 7 + 69 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1012 , 7 + 1040 , 7 @ @ <nl> + @ @ - 1012 , 7 + 1038 , 7 @ @ <nl> int var12 = this . getBlockMetadata ( var8 , var9 , var10 ) ; <nl> Block var13 = Block . blocksList [ var11 ] ; <nl> <nl> @ @ - 94 , 7 + 78 , 7 @ @ <nl> { <nl> MovingObjectPosition var14 = var13 . collisionRayTrace ( this , var8 , var9 , var10 , par1Vec3 , par2Vec3 ) ; <nl> <nl> - @ @ - 1212 , 6 + 1240 , 12 @ @ <nl> + @ @ - 1212 , 6 + 1238 , 12 @ @ <nl> * / <nl> public void playSoundAtEntity ( Entity par1Entity , String par2Str , float par3 , float par4 ) <nl> { <nl> @ @ - 107 , 7 + 91 , 7 @ @ <nl> if ( par1Entity ! = null & & par2Str ! = null ) <nl> { <nl> Iterator var5 = this . worldAccesses . iterator ( ) ; <nl> - @ @ - 1312 , 6 + 1346 , 11 @ @ <nl> + @ @ - 1312 , 6 + 1344 , 11 @ @ <nl> EntityPlayer var5 = ( EntityPlayer ) par1Entity ; <nl> this . playerEntities . add ( var5 ) ; <nl> this . updateAllPlayersSleepingFlag ( ) ; <nl> @ @ - 119 , 7 + 103 , 7 @ @ <nl> } <nl> <nl> this . getChunkFromChunkCoords ( var2 , var3 ) . addEntity ( par1Entity ) ; <nl> - @ @ - 1563 , 6 + 1602 , 12 @ @ <nl> + @ @ - 1563 , 6 + 1600 , 12 @ @ <nl> * Calculates the color for the skybox <nl> * / <nl> public Vec3 getSkyColor ( Entity par1Entity , float par2 ) <nl> @ @ - 132 , 7 + 116 , 7 @ @ <nl> { <nl> float var3 = this . getCelestialAngle ( par2 ) ; <nl> float var4 = MathHelper . cos ( var3 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; <nl> - @ @ - 1658 , 6 + 1703 , 12 @ @ <nl> + @ @ - 1658 , 6 + 1701 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public Vec3 drawClouds ( float par1 ) <nl> { <nl> @ @ - 145 , 7 + 129 , 7 @ @ <nl> float var2 = this . getCelestialAngle ( par1 ) ; <nl> float var3 = MathHelper . cos ( var2 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; <nl> <nl> - @ @ - 1736 , 7 + 1787 , 7 @ @ <nl> + @ @ - 1736 , 7 + 1785 , 7 @ @ <nl> { <nl> int var5 = var3 . getBlockID ( par1 , var4 , par2 ) ; <nl> <nl> @ @ - 154 , 7 + 138 , 7 @ @ <nl> { <nl> return var4 + 1 ; <nl> } <nl> - @ @ - 1751 , 6 + 1802 , 12 @ @ <nl> + @ @ - 1751 , 6 + 1800 , 12 @ @ <nl> * How bright are stars in the sky <nl> * / <nl> public float getStarBrightness ( float par1 ) <nl> @ @ - 167 , 7 + 151 , 7 @ @ <nl> { <nl> float var2 = this . getCelestialAngle ( par1 ) ; <nl> float var3 = 1 . 0F - ( MathHelper . cos ( var2 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 25F ) ; <nl> - @ @ - 1893 , 7 + 1950 , 7 @ @ <nl> + @ @ - 1893 , 7 + 1948 , 7 @ @ <nl> <nl> if ( var8 ! = null ) <nl> { <nl> @ @ - 176 , 7 + 160 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 1903 , 6 + 1960 , 10 @ @ <nl> + @ @ - 1903 , 6 + 1958 , 10 @ @ <nl> <nl> if ( ! this . entityRemoval . isEmpty ( ) ) <nl> { <nl> @ @ - 187 , 7 + 171 , 7 @ @ <nl> this . loadedTileEntityList . removeAll ( this . entityRemoval ) ; <nl> this . entityRemoval . clear ( ) ; <nl> } <nl> - @ @ - 1923 , 7 + 1984 , 9 @ @ <nl> + @ @ - 1923 , 7 + 1982 , 9 @ @ <nl> { <nl> this . loadedTileEntityList . add ( var9 ) ; <nl> } <nl> @ @ - 198 , 7 + 182 , 7 @ @ <nl> if ( this . chunkExists ( var9 . xCoord > > 4 , var9 . zCoord > > 4 ) ) <nl> { <nl> Chunk var10 = this . getChunkFromChunkCoords ( var9 . xCoord > > 4 , var9 . zCoord > > 4 ) ; <nl> - @ @ - 1933 , 8 + 1996 , 6 @ @ <nl> + @ @ - 1933 , 8 + 1994 , 6 @ @ <nl> var10 . setChunkBlockTileEntity ( var9 . xCoord & 15 , var9 . yCoord , var9 . zCoord & 15 , var9 ) ; <nl> } <nl> } <nl> @ @ - 207 , 7 + 191 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1947 , 13 + 2008 , 13 @ @ <nl> + @ @ - 1947 , 13 + 2006 , 13 @ @ <nl> <nl> public void addTileEntity ( Collection par1Collection ) <nl> { <nl> @ @ - 228 , 7 + 212 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1973 , 9 + 2034 , 17 @ @ <nl> + @ @ - 1973 , 9 + 2032 , 17 @ @ <nl> { <nl> int var3 = MathHelper . floor _ double ( par1Entity . posX ) ; <nl> int var4 = MathHelper . floor _ double ( par1Entity . posZ ) ; <nl> @ @ - 249 , 7 + 233 , 7 @ @ <nl> { <nl> par1Entity . lastTickPosX = par1Entity . posX ; <nl> par1Entity . lastTickPosY = par1Entity . posY ; <nl> - @ @ - 2210 , 6 + 2279 , 14 @ @ <nl> + @ @ - 2210 , 6 + 2277 , 14 @ @ <nl> { <nl> return true ; <nl> } <nl> @ @ - 264 , 7 + 248 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 2516 , 25 + 2593 , 21 @ @ <nl> + @ @ - 2516 , 25 + 2591 , 21 @ @ <nl> * / <nl> public void setBlockTileEntity ( int par1 , int par2 , int par3 , TileEntity par4TileEntity ) <nl> { <nl> @ @ - 305 , 7 + 289 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 2543 , 27 + 2616 , 10 @ @ <nl> + @ @ - 2543 , 27 + 2614 , 10 @ @ <nl> * / <nl> public void removeBlockTileEntity ( int par1 , int par2 , int par3 ) <nl> { <nl> @ @ - 337 , 7 + 321 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 2589 , 7 + 2645 , 8 @ @ <nl> + @ @ - 2589 , 7 + 2643 , 8 @ @ <nl> * / <nl> public boolean isBlockNormalCube ( int par1 , int par2 , int par3 ) <nl> { <nl> @ @ - 347 , 7 + 331 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 2597 , 8 + 2654 , 7 @ @ <nl> + @ @ - 2597 , 8 + 2652 , 7 @ @ <nl> * / <nl> public boolean doesBlockHaveSolidTopSurface ( int par1 , int par2 , int par3 ) <nl> { <nl> @ @ - 357 , 7 + 341 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 2614 , 7 + 2670 , 7 @ @ <nl> + @ @ - 2614 , 7 + 2668 , 7 @ @ <nl> if ( var5 ! = null & & ! var5 . isEmpty ( ) ) <nl> { <nl> Block var6 = Block . blocksList [ this . getBlockId ( par1 , par2 , par3 ) ] ; <nl> @ @ - 366 , 7 + 350 , 7 @ @ <nl> } <nl> else <nl> { <nl> - @ @ - 2645 , 8 + 2701 , 7 @ @ <nl> + @ @ - 2645 , 8 + 2699 , 7 @ @ <nl> * / <nl> public void setAllowedSpawnTypes ( boolean par1 , boolean par2 ) <nl> { <nl> @ @ - 376 , 7 + 360 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 2662 , 6 + 2717 , 11 @ @ <nl> + @ @ - 2662 , 6 + 2715 , 11 @ @ <nl> * / <nl> private void calculateInitialWeather ( ) <nl> { <nl> @ @ - 388 , 7 + 372 , 7 @ @ <nl> if ( this . worldInfo . isRaining ( ) ) <nl> { <nl> this . rainingStrength = 1 . 0F ; <nl> - @ @ - 2677 , 6 + 2737 , 11 @ @ <nl> + @ @ - 2677 , 6 + 2735 , 11 @ @ <nl> * Updates all weather states . <nl> * / <nl> protected void updateWeather ( ) <nl> @ @ - 400 , 7 + 384 , 7 @ @ <nl> { <nl> if ( ! this . provider . hasNoSky ) <nl> { <nl> - @ @ - 2779 , 12 + 2844 , 14 @ @ <nl> + @ @ - 2779 , 12 + 2842 , 14 @ @ <nl> <nl> public void toggleRain ( ) <nl> { <nl> @ @ - 416 , 7 + 400 , 7 @ @ <nl> this . theProfiler . startSection ( " buildList " ) ; <nl> int var1 ; <nl> EntityPlayer var2 ; <nl> - @ @ - 2891 , 6 + 2958 , 11 @ @ <nl> + @ @ - 2891 , 6 + 2956 , 11 @ @ <nl> * / <nl> public boolean canBlockFreeze ( int par1 , int par2 , int par3 , boolean par4 ) <nl> { <nl> @ @ - 428 , 7 + 412 , 7 @ @ <nl> BiomeGenBase var5 = this . getBiomeGenForCoords ( par1 , par3 ) ; <nl> float var6 = var5 . getFloatTemperature ( ) ; <nl> <nl> - @ @ - 2948 , 6 + 3020 , 11 @ @ <nl> + @ @ - 2948 , 6 + 3018 , 11 @ @ <nl> * Tests whether or not snow can be placed at a given location <nl> * / <nl> public boolean canSnowAt ( int par1 , int par2 , int par3 ) <nl> @ @ - 440 , 7 + 424 , 7 @ @ <nl> { <nl> BiomeGenBase var4 = this . getBiomeGenForCoords ( par1 , par3 ) ; <nl> float var5 = var4 . getFloatTemperature ( ) ; <nl> - @ @ - 3041 , 7 + 3118 , 7 @ @ <nl> + @ @ - 3041 , 7 + 3116 , 7 @ @ <nl> <nl> private int computeBlockLightValue ( int par1 , int par2 , int par3 , int par4 , int par5 , int par6 ) <nl> { <nl> @ @ - 449 , 7 + 433 , 7 @ @ <nl> int var8 = this . getSavedLightValue ( EnumSkyBlock . Block , par2 - 1 , par3 , par4 ) - par6 ; <nl> int var9 = this . getSavedLightValue ( EnumSkyBlock . Block , par2 + 1 , par3 , par4 ) - par6 ; <nl> int var10 = this . getSavedLightValue ( EnumSkyBlock . Block , par2 , par3 - 1 , par4 ) - par6 ; <nl> - @ @ - 3309 , 10 + 3386 , 10 @ @ <nl> + @ @ - 3309 , 10 + 3384 , 10 @ @ <nl> public List getEntitiesWithinAABBExcludingEntity ( Entity par1Entity , AxisAlignedBB par2AxisAlignedBB ) <nl> { <nl> this . entitiesWithinAABBExcludingEntity . clear ( ) ; <nl> @ @ - 464 , 7 + 448 , 7 @ @ <nl> <nl> for ( int var7 = var3 ; var7 < = var4 ; + + var7 ) <nl> { <nl> - @ @ - 3333 , 10 + 3410 , 10 @ @ <nl> + @ @ - 3333 , 10 + 3408 , 10 @ @ <nl> * / <nl> public List getEntitiesWithinAABB ( Class par1Class , AxisAlignedBB par2AxisAlignedBB ) <nl> { <nl> @ @ - 479 , 7 + 463 , 7 @ @ <nl> ArrayList var7 = new ArrayList ( ) ; <nl> <nl> for ( int var8 = var3 ; var8 < = var4 ; + + var8 ) <nl> - @ @ - 3425 , 11 + 3502 , 14 @ @ <nl> + @ @ - 3425 , 11 + 3500 , 14 @ @ <nl> * / <nl> public void addLoadedEntities ( List par1List ) <nl> { <nl> @ @ - 497 , 7 + 481 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 3466 , 7 + 3546 , 10 @ @ <nl> + @ @ - 3466 , 7 + 3544 , 10 @ @ <nl> { <nl> var9 = null ; <nl> } <nl> @ @ - 509 , 7 + 493 , 7 @ @ <nl> return par1 > 0 & & var9 = = null & & var10 . canPlaceBlockOnSide ( this , par2 , par3 , par4 , par6 ) ; <nl> } <nl> } <nl> - @ @ - 3656 , 7 + 3739 , 7 @ @ <nl> + @ @ - 3656 , 7 + 3737 , 7 @ @ <nl> * / <nl> public void setWorldTime ( long par1 ) <nl> { <nl> @ @ - 518 , 7 + 502 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 3664 , 12 + 3747 , 12 @ @ <nl> + @ @ - 3664 , 12 + 3745 , 12 @ @ <nl> * / <nl> public long getSeed ( ) <nl> { <nl> @ @ - 533 , 7 + 517 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 3677 , 13 + 3760 , 13 @ @ <nl> + @ @ - 3677 , 13 + 3758 , 13 @ @ <nl> * / <nl> public ChunkCoordinates getSpawnPoint ( ) <nl> { <nl> @ @ - 549 , 7 + 533 , 7 @ @ <nl> } <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> - @ @ - 3707 , 7 + 3790 , 10 @ @ <nl> + @ @ - 3707 , 7 + 3788 , 10 @ @ <nl> <nl> if ( ! this . loadedEntityList . contains ( par1Entity ) ) <nl> { <nl> @ @ - 561 , 7 + 545 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 3715 , 6 + 3801 , 11 @ @ <nl> + @ @ - 3715 , 6 + 3799 , 11 @ @ <nl> * Called when checking if a certain block can be mined or not . The ' spawn safe zone ' check is located here . <nl> * / <nl> public boolean canMineBlock ( EntityPlayer par1EntityPlayer , int par2 , int par3 , int par4 ) <nl> @ @ - 573 , 7 + 557 , 7 @ @ <nl> { <nl> return true ; <nl> } <nl> - @ @ - 3827 , 8 + 3918 , 7 @ @ <nl> + @ @ - 3827 , 8 + 3916 , 7 @ @ <nl> * / <nl> public boolean isBlockHighHumidity ( int par1 , int par2 , int par3 ) <nl> { <nl> @ @ - 583 , 7 + 567 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 3882 , 7 + 3972 , 7 @ @ <nl> + @ @ - 3882 , 7 + 3970 , 7 @ @ <nl> * / <nl> public int getHeight ( ) <nl> { <nl> @ @ - 592 , 7 + 576 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 3890 , 7 + 3980 , 7 @ @ <nl> + @ @ - 3890 , 7 + 3978 , 7 @ @ <nl> * / <nl> public int getActualHeight ( ) <nl> { <nl> @ @ - 601 , 7 + 585 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 3936 , 7 + 4026 , 7 @ @ <nl> + @ @ - 3936 , 7 + 4024 , 7 @ @ <nl> * / <nl> public double getHorizon ( ) <nl> { <nl> @ @ - 610 , 7 + 594 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 3964 , 4 + 4054 , 75 @ @ <nl> + @ @ - 3964 , 4 + 4052 , 75 @ @ <nl> var7 . destroyBlockPartially ( par1 , par2 , par3 , par4 , par5 ) ; <nl> } <nl> } <nl> diff - - git a / patches / common / net / minecraft / src / WorldServer . java . patch b / patches / common / net / minecraft / src / WorldServer . java . patch <nl> index 63f63bf . . a877941 100644 <nl> - - - a / patches / common / net / minecraft / src / WorldServer . java . patch <nl> + + + b / patches / common / net / minecraft / src / WorldServer . java . patch <nl> @ @ - 21 , 15 + 21 , 16 @ @ <nl> <nl> public class WorldServer extends World <nl> { <nl> - @ @ - 71 , 6 + 78 , 7 @ @ <nl> + @ @ - 71 , 6 + 78 , 8 @ @ <nl> { <nl> this . pendingTickListEntries = new TreeSet ( ) ; <nl> } <nl> + + MinecraftForge . EVENT _ BUS . post ( new WorldEvent . Load ( this ) ) ; <nl> + DimensionManager . setWorld ( par4 , this ) ; <nl> } <nl> <nl> / * * <nl> - @ @ - 179 , 10 + 187 , 7 @ @ <nl> + @ @ - 179 , 10 + 188 , 7 @ @ <nl> <nl> private void resetRainAndThunder ( ) <nl> { <nl> @ @ - 41 , 7 + 42 , 7 @ @ <nl> } <nl> <nl> public boolean areAllPlayersAsleep ( ) <nl> - @ @ - 270 , 7 + 275 , 7 @ @ <nl> + @ @ - 270 , 7 + 276 , 7 @ @ <nl> int var10 ; <nl> int var11 ; <nl> <nl> @ @ - 50 , 7 + 51 , 7 @ @ <nl> { <nl> this . updateLCG = this . updateLCG * 3 + 1013904223 ; <nl> var8 = this . updateLCG > > 2 ; <nl> - @ @ - 288 , 7 + 293 , 7 @ @ <nl> + @ @ - 288 , 7 + 294 , 7 @ @ <nl> this . theProfiler . endStartSection ( " iceandsnow " ) ; <nl> int var13 ; <nl> <nl> @ @ - 59 , 7 + 60 , 7 @ @ <nl> { <nl> this . updateLCG = this . updateLCG * 3 + 1013904223 ; <nl> var8 = this . updateLCG > > 2 ; <nl> - @ @ - 362 , 7 + 367 , 8 @ @ <nl> + @ @ - 362 , 7 + 368 , 8 @ @ <nl> public void scheduleBlockUpdate ( int par1 , int par2 , int par3 , int par4 , int par5 ) <nl> { <nl> NextTickListEntry var6 = new NextTickListEntry ( par1 , par2 , par3 , par4 ) ; <nl> @ @ - 69 , 7 + 70 , 7 @ @ <nl> <nl> if ( this . scheduledUpdatesAreImmediate ) <nl> { <nl> - @ @ - 418 , 7 + 424 , 7 @ @ <nl> + @ @ - 418 , 7 + 425 , 7 @ @ <nl> * / <nl> public void updateEntities ( ) <nl> { <nl> @ @ - 78 , 7 + 79 , 7 @ @ <nl> { <nl> if ( this . updateEntityTick + + > = 60 ) <nl> { <nl> - @ @ - 462 , 7 + 468 , 8 @ @ <nl> + @ @ - 462 , 7 + 469 , 8 @ @ <nl> <nl> this . pendingTickListEntries . remove ( var4 ) ; <nl> this . field _ 73064 _ N . remove ( var4 ) ; <nl> @ @ - 88 , 7 + 89 , 7 @ @ <nl> <nl> if ( this . checkChunksExist ( var4 . xCoord - var5 , var4 . yCoord - var5 , var4 . zCoord - var5 , var4 . xCoord + var5 , var4 . yCoord + var5 , var4 . zCoord + var5 ) ) <nl> { <nl> - @ @ - 559 , 15 + 566 , 27 @ @ <nl> + @ @ - 559 , 15 + 567 , 27 @ @ <nl> public List getAllTileEntityInBox ( int par1 , int par2 , int par3 , int par4 , int par5 , int par6 ) <nl> { <nl> ArrayList var7 = new ArrayList ( ) ; <nl> @ @ - 125 , 7 + 126 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 578 , 6 + 597 , 11 @ @ <nl> + @ @ - 578 , 6 + 598 , 11 @ @ <nl> * Called when checking if a certain block can be mined or not . The ' spawn safe zone ' check is located here . <nl> * / <nl> public boolean canMineBlock ( EntityPlayer par1EntityPlayer , int par2 , int par3 , int par4 ) <nl> @ @ - 137 , 7 + 138 , 7 @ @ <nl> { <nl> int var5 = MathHelper . abs _ int ( par2 - this . worldInfo . getSpawnX ( ) ) ; <nl> int var6 = MathHelper . abs _ int ( par4 - this . worldInfo . getSpawnZ ( ) ) ; <nl> - @ @ - 587 , 7 + 611 , 7 @ @ <nl> + @ @ - 587 , 7 + 612 , 7 @ @ <nl> var6 = var5 ; <nl> } <nl> <nl> @ @ - 146 , 7 + 147 , 7 @ @ <nl> } <nl> <nl> protected void initialize ( WorldSettings par1WorldSettings ) <nl> - @ @ - 670 , 7 + 694 , 7 @ @ <nl> + @ @ - 670 , 7 + 695 , 7 @ @ <nl> * / <nl> protected void createBonusChest ( ) <nl> { <nl> @ @ - 155 , 7 + 156 , 7 @ @ <nl> <nl> for ( int var2 = 0 ; var2 < 10 ; + + var2 ) <nl> { <nl> - @ @ - 713 , 6 + 737 , 7 @ @ <nl> + @ @ - 713 , 6 + 738 , 7 @ @ <nl> } <nl> <nl> this . chunkProvider . saveChunks ( par1 , par2IProgressUpdate ) ; <nl> @ @ - 163 , 7 + 164 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 971 , 4 + 996 , 9 @ @ <nl> + @ @ - 971 , 4 + 997 , 9 @ @ <nl> { <nl> return this . thePlayerManager ; <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / src / WorldClient . java . patch b / patches / minecraft / net / minecraft / src / WorldClient . java . patch <nl> index 2481c22 . . f4ab05d 100644 <nl> - - - a / patches / minecraft / net / minecraft / src / WorldClient . java . patch <nl> + + + b / patches / minecraft / net / minecraft / src / WorldClient . java . patch <nl> @ @ - 1 , 6 + 1 , 23 @ @ <nl> - - - . . / src _ base / minecraft / net / minecraft / src / WorldClient . java <nl> + + + . . / src _ work / minecraft / net / minecraft / src / WorldClient . java <nl> - @ @ - 265 , 6 + 265 , 12 @ @ <nl> + @ @ - 7 , 6 + 7 , 8 @ @ <nl> + import java . util . Random ; <nl> + import java . util . Set ; <nl> + import net . minecraft . client . Minecraft ; <nl> + + import net . minecraftforge . common . MinecraftForge ; <nl> + + import net . minecraftforge . event . world . WorldEvent ; <nl> + <nl> + @ SideOnly ( Side . CLIENT ) <nl> + public class WorldClient extends World <nl> + @ @ - 40 , 6 + 42 , 7 @ @ <nl> + this . difficultySetting = par4 ; <nl> + this . setSpawnLocation ( 8 , 64 , 8 ) ; <nl> + this . mapStorage = par1NetClientHandler . mapStorage ; <nl> + + MinecraftForge . EVENT _ BUS . post ( new WorldEvent . Load ( this ) ) ; <nl> + } <nl> + <nl> + / * * <nl> + @ @ - 265 , 6 + 268 , 12 @ @ <nl> * / <nl> protected void updateWeather ( ) <nl> {

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 index 6c405c9 . . feade29 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ItemLayerModel . java 
 @ @ - 1 , 6 + 1 , 7 @ @ 
 package net . minecraftforge . client . model ; 
 
 import java . util . Arrays ; 
 + import java . util . BitSet ; 
 import java . util . Collection ; 
 import java . util . List ; 
 
 @ @ - 145 , 6 + 146 , 7 @ @ public class ItemLayerModel implements IRetexturableModel { 
 int uMax = sprite . getIconWidth ( ) ; 
 int vMax = sprite . getIconHeight ( ) ; 
 
 + BitSet faces = new BitSet ( ( uMax + 1 ) * ( vMax + 1 ) * 4 ) ; 
 for ( int f = 0 ; f < sprite . getFrameCount ( ) ; f + + ) 
 { 
 int [ ] pixels = sprite . getFrameTextureData ( f ) [ 0 ] ; 
 @ @ - 159 , 26 + 161 , 26 @ @ public class ItemLayerModel implements IRetexturableModel { 
 boolean t = isTransparent ( pixels , uMax , vMax , u , v ) ; 
 if ( ptu & & ! t ) / / left - transparent , right - opaque 
 { 
 - builder . add ( buildSideQuad ( format , transform , EnumFacing . WEST , tint , sprite , u , v ) ) ; 
 + addSideQuad ( builder , faces , format , transform , EnumFacing . WEST , tint , sprite , uMax , vMax , u , v ) ; 
 } 
 if ( ! ptu & & t ) / / left - opaque , right - transparent 
 { 
 - builder . add ( buildSideQuad ( format , transform , EnumFacing . EAST , tint , sprite , u , v ) ) ; 
 + addSideQuad ( builder , faces , format , transform , EnumFacing . EAST , tint , sprite , uMax , vMax , u , v ) ; 
 } 
 if ( ptv [ u ] & & ! t ) / / up - transparent , down - opaque 
 { 
 - builder . add ( buildSideQuad ( format , transform , EnumFacing . UP , tint , sprite , u , v ) ) ; 
 + addSideQuad ( builder , faces , format , transform , EnumFacing . UP , tint , sprite , uMax , vMax , u , v ) ; 
 } 
 if ( ! ptv [ u ] & & t ) / / up - opaque , down - transparent 
 { 
 - builder . add ( buildSideQuad ( format , transform , EnumFacing . DOWN , tint , sprite , u , v ) ) ; 
 + addSideQuad ( builder , faces , format , transform , EnumFacing . DOWN , tint , sprite , uMax , vMax , u , v ) ; 
 } 
 ptu = t ; 
 ptv [ u ] = t ; 
 } 
 if ( ! ptu ) / / last - opaque 
 { 
 - builder . add ( buildSideQuad ( format , transform , EnumFacing . EAST , tint , sprite , uMax , v ) ) ; 
 + addSideQuad ( builder , faces , format , transform , EnumFacing . EAST , tint , sprite , uMax , vMax , uMax , v ) ; 
 } 
 } 
 / / last line 
 @ @ - 186 , 7 + 188 , 7 @ @ public class ItemLayerModel implements IRetexturableModel { 
 { 
 if ( ! ptv [ u ] ) 
 { 
 - builder . add ( buildSideQuad ( format , transform , EnumFacing . DOWN , tint , sprite , u , vMax ) ) ; 
 + addSideQuad ( builder , faces , format , transform , EnumFacing . DOWN , tint , sprite , uMax , vMax , u , vMax ) ; 
 } 
 } 
 } 
 @ @ - 212 , 6 + 214 , 18 @ @ public class ItemLayerModel implements IRetexturableModel { 
 return ( pixels [ u + ( vMax - 1 - v ) * uMax ] > > 24 & 0xFF ) = = 0 ; 
 } 
 
 + private static void addSideQuad ( ImmutableList . Builder < BakedQuad > builder , BitSet faces , VertexFormat format , TRSRTransformation transform , EnumFacing side , int tint , TextureAtlasSprite sprite , int uMax , int vMax , int u , int v ) 
 + { 
 + int si = side . ordinal ( ) ; 
 + if ( si > 4 ) si - = 2 ; 
 + int index = ( vMax + 1 ) * ( ( uMax + 1 ) * si + u ) + v ; 
 + if ( ! faces . get ( index ) ) 
 + { 
 + faces . set ( index ) ; 
 + builder . add ( buildSideQuad ( format , transform , side , tint , sprite , u , v ) ) ; 
 + } 
 + } 
 + 
 private static BakedQuad buildSideQuad ( VertexFormat format , TRSRTransformation transform , EnumFacing side , int tint , TextureAtlasSprite sprite , int u , int v ) 
 { 
 final float eps0 = 30e - 5f ;

NEAREST DIFF:
diff - - git a / common / net / minecraftforge / common / ForgeChunkManager . java b / common / net / minecraftforge / common / ForgeChunkManager . java 
 index 688e6cb . . 918e4e5 100644 
 - - - a / common / net / minecraftforge / common / ForgeChunkManager . java 
 + + + b / common / net / minecraftforge / common / ForgeChunkManager . java 
 @ @ - 518 , 7 + 518 , 7 @ @ public class ForgeChunkManager 
 * / 
 public static SetMultimap < ChunkCoordIntPair , Ticket > getPersistentChunksFor ( World world ) 
 { 
 - return ImmutableSetMultimap . copyOf ( forcedChunks . get ( world ) ) ; 
 + return forcedChunks . containsKey ( world ) ? ImmutableSetMultimap . copyOf ( forcedChunks . get ( world ) ) : ImmutableSetMultimap . < ChunkCoordIntPair , Ticket > of ( ) ; 
 } 
 
 static void saveWorld ( World world ) 
 diff - - git a / patches / common / net / minecraft / src / World . java . patch b / patches / common / net / minecraft / src / World . java . patch 
 index 3926d23 . . 957ae17 100644 
 - - - a / patches / common / net / minecraft / src / World . java . patch 
 + + + b / patches / common / net / minecraft / src / World . java . patch 
 @ @ - 40 , 23 + 40 , 7 @ @ 
 { 
 if ( this . blockExists ( par1 , 0 , par2 ) ) 
 { 
 - @ @ - 167 , 6 + 191 , 7 @ @ 
 - this . chunkProvider = this . createChunkProvider ( ) ; 
 - this . calculateInitialSkylight ( ) ; 
 - this . calculateInitialWeather ( ) ; 
 - + MinecraftForge . EVENT _ BUS . post ( new WorldEvent . Load ( this ) ) ; 
 - } 
 - 
 - public World ( ISaveHandler par1ISaveHandler , String par2Str , WorldSettings par3WorldSettings , WorldProvider par4WorldProvider , Profiler par5Profiler ) 
 - @ @ - 213 , 6 + 238 , 7 @ @ 
 - 
 - this . calculateInitialSkylight ( ) ; 
 - this . calculateInitialWeather ( ) ; 
 - + MinecraftForge . EVENT _ BUS . post ( new WorldEvent . Load ( this ) ) ; 
 - } 
 - 
 - / * * 
 - @ @ - 269 , 7 + 295 , 8 @ @ 
 + @ @ - 269 , 7 + 293 , 8 @ @ 
 * / 
 public boolean isAirBlock ( int par1 , int par2 , int par3 ) 
 { 
 @ @ - 66 , 7 + 50 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 278 , 7 + 305 , 8 @ @ 
 + @ @ - 278 , 7 + 303 , 8 @ @ 
 public boolean blockHasTileEntity ( int par1 , int par2 , int par3 ) 
 { 
 int var4 = this . getBlockId ( par1 , par2 , par3 ) ; 
 @ @ - 76 , 7 + 60 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 980 , 7 + 1008 , 7 @ @ 
 + @ @ - 980 , 7 + 1006 , 7 @ @ 
 * / 
 public boolean isDaytime ( ) 
 { 
 @ @ - 85 , 7 + 69 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 1012 , 7 + 1040 , 7 @ @ 
 + @ @ - 1012 , 7 + 1038 , 7 @ @ 
 int var12 = this . getBlockMetadata ( var8 , var9 , var10 ) ; 
 Block var13 = Block . blocksList [ var11 ] ; 
 
 @ @ - 94 , 7 + 78 , 7 @ @ 
 { 
 MovingObjectPosition var14 = var13 . collisionRayTrace ( this , var8 , var9 , var10 , par1Vec3 , par2Vec3 ) ; 
 
 - @ @ - 1212 , 6 + 1240 , 12 @ @ 
 + @ @ - 1212 , 6 + 1238 , 12 @ @ 
 * / 
 public void playSoundAtEntity ( Entity par1Entity , String par2Str , float par3 , float par4 ) 
 { 
 @ @ - 107 , 7 + 91 , 7 @ @ 
 if ( par1Entity ! = null & & par2Str ! = null ) 
 { 
 Iterator var5 = this . worldAccesses . iterator ( ) ; 
 - @ @ - 1312 , 6 + 1346 , 11 @ @ 
 + @ @ - 1312 , 6 + 1344 , 11 @ @ 
 EntityPlayer var5 = ( EntityPlayer ) par1Entity ; 
 this . playerEntities . add ( var5 ) ; 
 this . updateAllPlayersSleepingFlag ( ) ; 
 @ @ - 119 , 7 + 103 , 7 @ @ 
 } 
 
 this . getChunkFromChunkCoords ( var2 , var3 ) . addEntity ( par1Entity ) ; 
 - @ @ - 1563 , 6 + 1602 , 12 @ @ 
 + @ @ - 1563 , 6 + 1600 , 12 @ @ 
 * Calculates the color for the skybox 
 * / 
 public Vec3 getSkyColor ( Entity par1Entity , float par2 ) 
 @ @ - 132 , 7 + 116 , 7 @ @ 
 { 
 float var3 = this . getCelestialAngle ( par2 ) ; 
 float var4 = MathHelper . cos ( var3 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; 
 - @ @ - 1658 , 6 + 1703 , 12 @ @ 
 + @ @ - 1658 , 6 + 1701 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public Vec3 drawClouds ( float par1 ) 
 { 
 @ @ - 145 , 7 + 129 , 7 @ @ 
 float var2 = this . getCelestialAngle ( par1 ) ; 
 float var3 = MathHelper . cos ( var2 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; 
 
 - @ @ - 1736 , 7 + 1787 , 7 @ @ 
 + @ @ - 1736 , 7 + 1785 , 7 @ @ 
 { 
 int var5 = var3 . getBlockID ( par1 , var4 , par2 ) ; 
 
 @ @ - 154 , 7 + 138 , 7 @ @ 
 { 
 return var4 + 1 ; 
 } 
 - @ @ - 1751 , 6 + 1802 , 12 @ @ 
 + @ @ - 1751 , 6 + 1800 , 12 @ @ 
 * How bright are stars in the sky 
 * / 
 public float getStarBrightness ( float par1 ) 
 @ @ - 167 , 7 + 151 , 7 @ @ 
 { 
 float var2 = this . getCelestialAngle ( par1 ) ; 
 float var3 = 1 . 0F - ( MathHelper . cos ( var2 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 25F ) ; 
 - @ @ - 1893 , 7 + 1950 , 7 @ @ 
 + @ @ - 1893 , 7 + 1948 , 7 @ @ 
 
 if ( var8 ! = null ) 
 { 
 @ @ - 176 , 7 + 160 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 1903 , 6 + 1960 , 10 @ @ 
 + @ @ - 1903 , 6 + 1958 , 10 @ @ 
 
 if ( ! this . entityRemoval . isEmpty ( ) ) 
 { 
 @ @ - 187 , 7 + 171 , 7 @ @ 
 this . loadedTileEntityList . removeAll ( this . entityRemoval ) ; 
 this . entityRemoval . clear ( ) ; 
 } 
 - @ @ - 1923 , 7 + 1984 , 9 @ @ 
 + @ @ - 1923 , 7 + 1982 , 9 @ @ 
 { 
 this . loadedTileEntityList . add ( var9 ) ; 
 } 
 @ @ - 198 , 7 + 182 , 7 @ @ 
 if ( this . chunkExists ( var9 . xCoord > > 4 , var9 . zCoord > > 4 ) ) 
 { 
 Chunk var10 = this . getChunkFromChunkCoords ( var9 . xCoord > > 4 , var9 . zCoord > > 4 ) ; 
 - @ @ - 1933 , 8 + 1996 , 6 @ @ 
 + @ @ - 1933 , 8 + 1994 , 6 @ @ 
 var10 . setChunkBlockTileEntity ( var9 . xCoord & 15 , var9 . yCoord , var9 . zCoord & 15 , var9 ) ; 
 } 
 } 
 @ @ - 207 , 7 + 191 , 7 @ @ 
 } 
 } 
 
 - @ @ - 1947 , 13 + 2008 , 13 @ @ 
 + @ @ - 1947 , 13 + 2006 , 13 @ @ 
 
 public void addTileEntity ( Collection par1Collection ) 
 { 
 @ @ - 228 , 7 + 212 , 7 @ @ 
 } 
 } 
 
 - @ @ - 1973 , 9 + 2034 , 17 @ @ 
 + @ @ - 1973 , 9 + 2032 , 17 @ @ 
 { 
 int var3 = MathHelper . floor _ double ( par1Entity . posX ) ; 
 int var4 = MathHelper . floor _ double ( par1Entity . posZ ) ; 
 @ @ - 249 , 7 + 233 , 7 @ @ 
 { 
 par1Entity . lastTickPosX = par1Entity . posX ; 
 par1Entity . lastTickPosY = par1Entity . posY ; 
 - @ @ - 2210 , 6 + 2279 , 14 @ @ 
 + @ @ - 2210 , 6 + 2277 , 14 @ @ 
 { 
 return true ; 
 } 
 @ @ - 264 , 7 + 248 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 2516 , 25 + 2593 , 21 @ @ 
 + @ @ - 2516 , 25 + 2591 , 21 @ @ 
 * / 
 public void setBlockTileEntity ( int par1 , int par2 , int par3 , TileEntity par4TileEntity ) 
 { 
 @ @ - 305 , 7 + 289 , 7 @ @ 
 } 
 } 
 
 - @ @ - 2543 , 27 + 2616 , 10 @ @ 
 + @ @ - 2543 , 27 + 2614 , 10 @ @ 
 * / 
 public void removeBlockTileEntity ( int par1 , int par2 , int par3 ) 
 { 
 @ @ - 337 , 7 + 321 , 7 @ @ 
 } 
 } 
 
 - @ @ - 2589 , 7 + 2645 , 8 @ @ 
 + @ @ - 2589 , 7 + 2643 , 8 @ @ 
 * / 
 public boolean isBlockNormalCube ( int par1 , int par2 , int par3 ) 
 { 
 @ @ - 347 , 7 + 331 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 2597 , 8 + 2654 , 7 @ @ 
 + @ @ - 2597 , 8 + 2652 , 7 @ @ 
 * / 
 public boolean doesBlockHaveSolidTopSurface ( int par1 , int par2 , int par3 ) 
 { 
 @ @ - 357 , 7 + 341 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 2614 , 7 + 2670 , 7 @ @ 
 + @ @ - 2614 , 7 + 2668 , 7 @ @ 
 if ( var5 ! = null & & ! var5 . isEmpty ( ) ) 
 { 
 Block var6 = Block . blocksList [ this . getBlockId ( par1 , par2 , par3 ) ] ; 
 @ @ - 366 , 7 + 350 , 7 @ @ 
 } 
 else 
 { 
 - @ @ - 2645 , 8 + 2701 , 7 @ @ 
 + @ @ - 2645 , 8 + 2699 , 7 @ @ 
 * / 
 public void setAllowedSpawnTypes ( boolean par1 , boolean par2 ) 
 { 
 @ @ - 376 , 7 + 360 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 2662 , 6 + 2717 , 11 @ @ 
 + @ @ - 2662 , 6 + 2715 , 11 @ @ 
 * / 
 private void calculateInitialWeather ( ) 
 { 
 @ @ - 388 , 7 + 372 , 7 @ @ 
 if ( this . worldInfo . isRaining ( ) ) 
 { 
 this . rainingStrength = 1 . 0F ; 
 - @ @ - 2677 , 6 + 2737 , 11 @ @ 
 + @ @ - 2677 , 6 + 2735 , 11 @ @ 
 * Updates all weather states . 
 * / 
 protected void updateWeather ( ) 
 @ @ - 400 , 7 + 384 , 7 @ @ 
 { 
 if ( ! this . provider . hasNoSky ) 
 { 
 - @ @ - 2779 , 12 + 2844 , 14 @ @ 
 + @ @ - 2779 , 12 + 2842 , 14 @ @ 
 
 public void toggleRain ( ) 
 { 
 @ @ - 416 , 7 + 400 , 7 @ @ 
 this . theProfiler . startSection ( " buildList " ) ; 
 int var1 ; 
 EntityPlayer var2 ; 
 - @ @ - 2891 , 6 + 2958 , 11 @ @ 
 + @ @ - 2891 , 6 + 2956 , 11 @ @ 
 * / 
 public boolean canBlockFreeze ( int par1 , int par2 , int par3 , boolean par4 ) 
 { 
 @ @ - 428 , 7 + 412 , 7 @ @ 
 BiomeGenBase var5 = this . getBiomeGenForCoords ( par1 , par3 ) ; 
 float var6 = var5 . getFloatTemperature ( ) ; 
 
 - @ @ - 2948 , 6 + 3020 , 11 @ @ 
 + @ @ - 2948 , 6 + 3018 , 11 @ @ 
 * Tests whether or not snow can be placed at a given location 
 * / 
 public boolean canSnowAt ( int par1 , int par2 , int par3 ) 
 @ @ - 440 , 7 + 424 , 7 @ @ 
 { 
 BiomeGenBase var4 = this . getBiomeGenForCoords ( par1 , par3 ) ; 
 float var5 = var4 . getFloatTemperature ( ) ; 
 - @ @ - 3041 , 7 + 3118 , 7 @ @ 
 + @ @ - 3041 , 7 + 3116 , 7 @ @ 
 
 private int computeBlockLightValue ( int par1 , int par2 , int par3 , int par4 , int par5 , int par6 ) 
 { 
 @ @ - 449 , 7 + 433 , 7 @ @ 
 int var8 = this . getSavedLightValue ( EnumSkyBlock . Block , par2 - 1 , par3 , par4 ) - par6 ; 
 int var9 = this . getSavedLightValue ( EnumSkyBlock . Block , par2 + 1 , par3 , par4 ) - par6 ; 
 int var10 = this . getSavedLightValue ( EnumSkyBlock . Block , par2 , par3 - 1 , par4 ) - par6 ; 
 - @ @ - 3309 , 10 + 3386 , 10 @ @ 
 + @ @ - 3309 , 10 + 3384 , 10 @ @ 
 public List getEntitiesWithinAABBExcludingEntity ( Entity par1Entity , AxisAlignedBB par2AxisAlignedBB ) 
 { 
 this . entitiesWithinAABBExcludingEntity . clear ( ) ; 
 @ @ - 464 , 7 + 448 , 7 @ @ 
 
 for ( int var7 = var3 ; var7 < = var4 ; + + var7 ) 
 { 
 - @ @ - 3333 , 10 + 3410 , 10 @ @ 
 + @ @ - 3333 , 10 + 3408 , 10 @ @ 
 * / 
 public List getEntitiesWithinAABB ( Class par1Class , AxisAlignedBB par2AxisAlignedBB ) 
 { 
 @ @ - 479 , 7 + 463 , 7 @ @ 
 ArrayList var7 = new ArrayList ( ) ; 
 
 for ( int var8 = var3 ; var8 < = var4 ; + + var8 ) 
 - @ @ - 3425 , 11 + 3502 , 14 @ @ 
 + @ @ - 3425 , 11 + 3500 , 14 @ @ 
 * / 
 public void addLoadedEntities ( List par1List ) 
 { 
 @ @ - 497 , 7 + 481 , 7 @ @ 
 } 
 } 
 
 - @ @ - 3466 , 7 + 3546 , 10 @ @ 
 + @ @ - 3466 , 7 + 3544 , 10 @ @ 
 { 
 var9 = null ; 
 } 
 @ @ - 509 , 7 + 493 , 7 @ @ 
 return par1 > 0 & & var9 = = null & & var10 . canPlaceBlockOnSide ( this , par2 , par3 , par4 , par6 ) ; 
 } 
 } 
 - @ @ - 3656 , 7 + 3739 , 7 @ @ 
 + @ @ - 3656 , 7 + 3737 , 7 @ @ 
 * / 
 public void setWorldTime ( long par1 ) 
 { 
 @ @ - 518 , 7 + 502 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 3664 , 12 + 3747 , 12 @ @ 
 + @ @ - 3664 , 12 + 3745 , 12 @ @ 
 * / 
 public long getSeed ( ) 
 { 
 @ @ - 533 , 7 + 517 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 3677 , 13 + 3760 , 13 @ @ 
 + @ @ - 3677 , 13 + 3758 , 13 @ @ 
 * / 
 public ChunkCoordinates getSpawnPoint ( ) 
 { 
 @ @ - 549 , 7 + 533 , 7 @ @ 
 } 
 
 @ SideOnly ( Side . CLIENT ) 
 - @ @ - 3707 , 7 + 3790 , 10 @ @ 
 + @ @ - 3707 , 7 + 3788 , 10 @ @ 
 
 if ( ! this . loadedEntityList . contains ( par1Entity ) ) 
 { 
 @ @ - 561 , 7 + 545 , 7 @ @ 
 } 
 } 
 
 - @ @ - 3715 , 6 + 3801 , 11 @ @ 
 + @ @ - 3715 , 6 + 3799 , 11 @ @ 
 * Called when checking if a certain block can be mined or not . The ' spawn safe zone ' check is located here . 
 * / 
 public boolean canMineBlock ( EntityPlayer par1EntityPlayer , int par2 , int par3 , int par4 ) 
 @ @ - 573 , 7 + 557 , 7 @ @ 
 { 
 return true ; 
 } 
 - @ @ - 3827 , 8 + 3918 , 7 @ @ 
 + @ @ - 3827 , 8 + 3916 , 7 @ @ 
 * / 
 public boolean isBlockHighHumidity ( int par1 , int par2 , int par3 ) 
 { 
 @ @ - 583 , 7 + 567 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 3882 , 7 + 3972 , 7 @ @ 
 + @ @ - 3882 , 7 + 3970 , 7 @ @ 
 * / 
 public int getHeight ( ) 
 { 
 @ @ - 592 , 7 + 576 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 3890 , 7 + 3980 , 7 @ @ 
 + @ @ - 3890 , 7 + 3978 , 7 @ @ 
 * / 
 public int getActualHeight ( ) 
 { 
 @ @ - 601 , 7 + 585 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 3936 , 7 + 4026 , 7 @ @ 
 + @ @ - 3936 , 7 + 4024 , 7 @ @ 
 * / 
 public double getHorizon ( ) 
 { 
 @ @ - 610 , 7 + 594 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 3964 , 4 + 4054 , 75 @ @ 
 + @ @ - 3964 , 4 + 4052 , 75 @ @ 
 var7 . destroyBlockPartially ( par1 , par2 , par3 , par4 , par5 ) ; 
 } 
 } 
 diff - - git a / patches / common / net / minecraft / src / WorldServer . java . patch b / patches / common / net / minecraft / src / WorldServer . java . patch 
 index 63f63bf . . a877941 100644 
 - - - a / patches / common / net / minecraft / src / WorldServer . java . patch 
 + + + b / patches / common / net / minecraft / src / WorldServer . java . patch 
 @ @ - 21 , 15 + 21 , 16 @ @ 
 
 public class WorldServer extends World 
 { 
 - @ @ - 71 , 6 + 78 , 7 @ @ 
 + @ @ - 71 , 6 + 78 , 8 @ @ 
 { 
 this . pendingTickListEntries = new TreeSet ( ) ; 
 } 
 + + MinecraftForge . EVENT _ BUS . post ( new WorldEvent . Load ( this ) ) ; 
 + DimensionManager . setWorld ( par4 , this ) ; 
 } 
 
 / * * 
 - @ @ - 179 , 10 + 187 , 7 @ @ 
 + @ @ - 179 , 10 + 188 , 7 @ @ 
 
 private void resetRainAndThunder ( ) 
 { 
 @ @ - 41 , 7 + 42 , 7 @ @ 
 } 
 
 public boolean areAllPlayersAsleep ( ) 
 - @ @ - 270 , 7 + 275 , 7 @ @ 
 + @ @ - 270 , 7 + 276 , 7 @ @ 
 int var10 ; 
 int var11 ; 
 
 @ @ - 50 , 7 + 51 , 7 @ @ 
 { 
 this . updateLCG = this . updateLCG * 3 + 1013904223 ; 
 var8 = this . updateLCG > > 2 ; 
 - @ @ - 288 , 7 + 293 , 7 @ @ 
 + @ @ - 288 , 7 + 294 , 7 @ @ 
 this . theProfiler . endStartSection ( " iceandsnow " ) ; 
 int var13 ; 
 
 @ @ - 59 , 7 + 60 , 7 @ @ 
 { 
 this . updateLCG = this . updateLCG * 3 + 1013904223 ; 
 var8 = this . updateLCG > > 2 ; 
 - @ @ - 362 , 7 + 367 , 8 @ @ 
 + @ @ - 362 , 7 + 368 , 8 @ @ 
 public void scheduleBlockUpdate ( int par1 , int par2 , int par3 , int par4 , int par5 ) 
 { 
 NextTickListEntry var6 = new NextTickListEntry ( par1 , par2 , par3 , par4 ) ; 
 @ @ - 69 , 7 + 70 , 7 @ @ 
 
 if ( this . scheduledUpdatesAreImmediate ) 
 { 
 - @ @ - 418 , 7 + 424 , 7 @ @ 
 + @ @ - 418 , 7 + 425 , 7 @ @ 
 * / 
 public void updateEntities ( ) 
 { 
 @ @ - 78 , 7 + 79 , 7 @ @ 
 { 
 if ( this . updateEntityTick + + > = 60 ) 
 { 
 - @ @ - 462 , 7 + 468 , 8 @ @ 
 + @ @ - 462 , 7 + 469 , 8 @ @ 
 
 this . pendingTickListEntries . remove ( var4 ) ; 
 this . field _ 73064 _ N . remove ( var4 ) ; 
 @ @ - 88 , 7 + 89 , 7 @ @ 
 
 if ( this . checkChunksExist ( var4 . xCoord - var5 , var4 . yCoord - var5 , var4 . zCoord - var5 , var4 . xCoord + var5 , var4 . yCoord + var5 , var4 . zCoord + var5 ) ) 
 { 
 - @ @ - 559 , 15 + 566 , 27 @ @ 
 + @ @ - 559 , 15 + 567 , 27 @ @ 
 public List getAllTileEntityInBox ( int par1 , int par2 , int par3 , int par4 , int par5 , int par6 ) 
 { 
 ArrayList var7 = new ArrayList ( ) ; 
 @ @ - 125 , 7 + 126 , 7 @ @ 
 } 
 } 
 
 - @ @ - 578 , 6 + 597 , 11 @ @ 
 + @ @ - 578 , 6 + 598 , 11 @ @ 
 * Called when checking if a certain block can be mined or not . The ' spawn safe zone ' check is located here . 
 * / 
 public boolean canMineBlock ( EntityPlayer par1EntityPlayer , int par2 , int par3 , int par4 ) 
 @ @ - 137 , 7 + 138 , 7 @ @ 
 { 
 int var5 = MathHelper . abs _ int ( par2 - this . worldInfo . getSpawnX ( ) ) ; 
 int var6 = MathHelper . abs _ int ( par4 - this . worldInfo . getSpawnZ ( ) ) ; 
 - @ @ - 587 , 7 + 611 , 7 @ @ 
 + @ @ - 587 , 7 + 612 , 7 @ @ 
 var6 = var5 ; 
 } 
 
 @ @ - 146 , 7 + 147 , 7 @ @ 
 } 
 
 protected void initialize ( WorldSettings par1WorldSettings ) 
 - @ @ - 670 , 7 + 694 , 7 @ @ 
 + @ @ - 670 , 7 + 695 , 7 @ @ 
 * / 
 protected void createBonusChest ( ) 
 { 
 @ @ - 155 , 7 + 156 , 7 @ @ 
 
 for ( int var2 = 0 ; var2 < 10 ; + + var2 ) 
 { 
 - @ @ - 713 , 6 + 737 , 7 @ @ 
 + @ @ - 713 , 6 + 738 , 7 @ @ 
 } 
 
 this . chunkProvider . saveChunks ( par1 , par2IProgressUpdate ) ; 
 @ @ - 163 , 7 + 164 , 7 @ @ 
 } 
 } 
 
 - @ @ - 971 , 4 + 996 , 9 @ @ 
 + @ @ - 971 , 4 + 997 , 9 @ @ 
 { 
 return this . thePlayerManager ; 
 } 
 diff - - git a / patches / minecraft / net / minecraft / src / WorldClient . java . patch b / patches / minecraft / net / minecraft / src / WorldClient . java . patch 
 index 2481c22 . . f4ab05d 100644 
 - - - a / patches / minecraft / net / minecraft / src / WorldClient . java . patch 
 + + + b / patches / minecraft / net / minecraft / src / WorldClient . java . patch 
 @ @ - 1 , 6 + 1 , 23 @ @ 
 - - - . . / src _ base / minecraft / net / minecraft / src / WorldClient . java 
 + + + . . / src _ work / minecraft / net / minecraft / src / WorldClient . java 
 - @ @ - 265 , 6 + 265 , 12 @ @ 
 + @ @ - 7 , 6 + 7 , 8 @ @ 
 + import java . util . Random ; 
 + import java . util . Set ; 
 + import net . minecraft . client . Minecraft ; 
 + + import net . minecraftforge . common . MinecraftForge ; 
 + + import net . minecraftforge . event . world . WorldEvent ; 
 + 
 + @ SideOnly ( Side . CLIENT ) 
 + public class WorldClient extends World 
 + @ @ - 40 , 6 + 42 , 7 @ @ 
 + this . difficultySetting = par4 ; 
 + this . setSpawnLocation ( 8 , 64 , 8 ) ; 
 + this . mapStorage = par1NetClientHandler . mapStorage ; 
 + + MinecraftForge . EVENT _ BUS . post ( new WorldEvent . Load ( this ) ) ; 
 + } 
 + 
 + / * * 
 + @ @ - 265 , 6 + 268 , 12 @ @ 
 * / 
 protected void updateWeather ( ) 
 {
