BLEU SCORE: 0.021138964808863438

TEST MSG: Fix potential shading issue in GuiEditArrayEntries . Closes # 3247
GENERATED MSG: Adds a field to the player for maximum health . Player . dat additions are present , getMaxHealth ( ) needs a magic number for spawning . Closes # 527

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / item / ItemStack . java . patch b / patches / minecraft / net / minecraft / item / ItemStack . java . patch <nl> index 9b1a6b0 . . 254ac92 100644 <nl> - - - a / patches / minecraft / net / minecraft / item / ItemStack . java . patch <nl> + + + b / patches / minecraft / net / minecraft / item / ItemStack . java . patch <nl> @ @ - 64 , 7 + 64 , 7 @ @ <nl> + if ( this . capabilities ! = null ) <nl> + { <nl> + NBTTagCompound cnbt = this . capabilities . serializeNBT ( ) ; <nl> - + if ( ! cnbt . func _ 82582 _ d ( ) ) p _ 77955 _ 1 _ . func _ 74782 _ a ( " ForgeCaps " , this . capabilities . serializeNBT ( ) ) ; <nl> + + if ( ! cnbt . func _ 82582 _ d ( ) ) p _ 77955 _ 1 _ . func _ 74782 _ a ( " ForgeCaps " , cnbt ) ; <nl> + } <nl> + <nl> return p _ 77955 _ 1 _ ; <nl> diff - - git a / src / main / java / net / minecraftforge / fml / client / config / GuiEditArrayEntries . java b / src / main / java / net / minecraftforge / fml / client / config / GuiEditArrayEntries . java <nl> index 9d9444d . . dbcbb0e 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / client / config / GuiEditArrayEntries . java <nl> + + + b / src / main / java / net / minecraftforge / fml / client / config / GuiEditArrayEntries . java <nl> @ @ - 43 , 7 + 43 , 6 @ @ import static net . minecraftforge . fml . client . config . GuiUtils . VALID ; <nl> public class GuiEditArrayEntries extends GuiListExtended <nl> { <nl> protected GuiEditArray owningGui ; <nl> - public Minecraft mc ; <nl> public IConfigElement configElement ; <nl> public List < IArrayEntry > listEntries ; <nl> public boolean isDefault ; <nl> @ @ - 57 , 7 + 56 , 6 @ @ public class GuiEditArrayEntries extends GuiListExtended <nl> { <nl> super ( mc , parent . width , parent . height , parent . titleLine2 ! = null ? ( parent . titleLine3 ! = null ? 43 : 33 ) : 23 , parent . height - 32 , 20 ) ; <nl> this . owningGui = parent ; <nl> - this . mc = mc ; <nl> this . configElement = configElement ; <nl> this . beforeValues = beforeValues ; <nl> this . currentValues = currentValues ; <nl> @ @ - 281 , 6 + 279 , 11 @ @ public class GuiEditArrayEntries extends GuiListExtended <nl> entry . drawToolTip ( mouseX , mouseY ) ; <nl> } <nl> <nl> + public Minecraft getMC ( ) <nl> + { <nl> + return this . mc ; <nl> + } <nl> + <nl> / * * <nl> * IGuiListEntry Inner Classes <nl> * / <nl> @ @ - 405 , 7 + 408 , 7 @ @ public class GuiEditArrayEntries extends GuiListExtended <nl> public StringEntry ( GuiEditArray owningScreen , GuiEditArrayEntries owningEntryList , IConfigElement configElement , Object value ) <nl> { <nl> super ( owningScreen , owningEntryList , configElement ) ; <nl> - this . textFieldValue = new GuiTextField ( 0 , owningEntryList . mc . fontRendererObj , owningEntryList . width / 4 + 1 , 0 , owningEntryList . controlWidth - 3 , 16 ) ; <nl> + this . textFieldValue = new GuiTextField ( 0 , owningEntryList . getMC ( ) . fontRendererObj , owningEntryList . width / 4 + 1 , 0 , owningEntryList . controlWidth - 3 , 16 ) ; <nl> this . textFieldValue . setMaxStringLength ( 10000 ) ; <nl> this . textFieldValue . setText ( value . toString ( ) ) ; <nl> this . isValidated = configElement . getValidationPattern ( ) ! = null ; <nl> @ @ - 499 , 15 + 502 , 15 @ @ public class GuiEditArrayEntries extends GuiListExtended <nl> this . btnValue . displayString = String . valueOf ( value ) ; <nl> btnValue . packedFGColour = value ? GuiUtils . getColorCode ( ' 2 ' , true ) : GuiUtils . getColorCode ( ' 4 ' , true ) ; <nl> <nl> - this . btnValue . drawButton ( owningEntryList . mc , mouseX , mouseY ) ; <nl> + this . btnValue . drawButton ( owningEntryList . getMC ( ) , mouseX , mouseY ) ; <nl> } <nl> <nl> @ Override <nl> public boolean mousePressed ( int index , int x , int y , int mouseEvent , int relativeX , int relativeY ) <nl> { <nl> - if ( this . btnValue . mousePressed ( owningEntryList . mc , x , y ) ) <nl> + if ( this . btnValue . mousePressed ( owningEntryList . getMC ( ) , x , y ) ) <nl> { <nl> - btnValue . playPressSound ( owningEntryList . mc . getSoundHandler ( ) ) ; <nl> + btnValue . playPressSound ( owningEntryList . getMC ( ) . getSoundHandler ( ) ) ; <nl> value = ! value ; <nl> owningEntryList . recalculateState ( ) ; <nl> return true ; <nl> @ @ - 566 , 10 + 569 , 10 @ @ public class GuiEditArrayEntries extends GuiListExtended <nl> public void drawEntry ( int slotIndex , int x , int y , int listWidth , int slotHeight , int mouseX , int mouseY , boolean isSelected ) <nl> { <nl> if ( this . getValue ( ) ! = null & & this . isValidated ) <nl> - owningEntryList . mc . fontRendererObj . drawString ( <nl> + owningEntryList . getMC ( ) . fontRendererObj . drawString ( <nl> isValidValue ? TextFormatting . GREEN + VALID : TextFormatting . RED + INVALID , <nl> - listWidth / 4 - owningEntryList . mc . fontRendererObj . getStringWidth ( VALID ) - 2 , <nl> - y + slotHeight / 2 - owningEntryList . mc . fontRendererObj . FONT _ HEIGHT / 2 , <nl> + listWidth / 4 - owningEntryList . getMC ( ) . fontRendererObj . getStringWidth ( VALID ) - 2 , <nl> + y + slotHeight / 2 - owningEntryList . getMC ( ) . fontRendererObj . FONT _ HEIGHT / 2 , <nl> 16777215 ) ; <nl> <nl> int half = listWidth / 2 ; <nl> @ @ - 578 , 7 + 581 , 7 @ @ public class GuiEditArrayEntries extends GuiListExtended <nl> this . btnAddNewEntryAbove . visible = true ; <nl> this . btnAddNewEntryAbove . xPosition = half + ( ( half / 2 ) - 44 ) ; <nl> this . btnAddNewEntryAbove . yPosition = y ; <nl> - this . btnAddNewEntryAbove . drawButton ( owningEntryList . mc , mouseX , mouseY ) ; <nl> + this . btnAddNewEntryAbove . drawButton ( owningEntryList . getMC ( ) , mouseX , mouseY ) ; <nl> } <nl> else <nl> this . btnAddNewEntryAbove . visible = false ; <nl> @ @ - 588 , 7 + 591 , 7 @ @ public class GuiEditArrayEntries extends GuiListExtended <nl> this . btnRemoveEntry . visible = true ; <nl> this . btnRemoveEntry . xPosition = half + ( ( half / 2 ) - 22 ) ; <nl> this . btnRemoveEntry . yPosition = y ; <nl> - this . btnRemoveEntry . drawButton ( owningEntryList . mc , mouseX , mouseY ) ; <nl> + this . btnRemoveEntry . drawButton ( owningEntryList . getMC ( ) , mouseX , mouseY ) ; <nl> } <nl> else <nl> this . btnRemoveEntry . visible = false ; <nl> @ @ - 607 , 16 + 610 , 16 @ @ public class GuiEditArrayEntries extends GuiListExtended <nl> @ Override <nl> public boolean mousePressed ( int index , int x , int y , int mouseEvent , int relativeX , int relativeY ) <nl> { <nl> - if ( this . btnAddNewEntryAbove . mousePressed ( owningEntryList . mc , x , y ) ) <nl> + if ( this . btnAddNewEntryAbove . mousePressed ( owningEntryList . getMC ( ) , x , y ) ) <nl> { <nl> - btnAddNewEntryAbove . playPressSound ( owningEntryList . mc . getSoundHandler ( ) ) ; <nl> + btnAddNewEntryAbove . playPressSound ( owningEntryList . getMC ( ) . getSoundHandler ( ) ) ; <nl> owningEntryList . addNewEntry ( index ) ; <nl> owningEntryList . recalculateState ( ) ; <nl> return true ; <nl> } <nl> - else if ( this . btnRemoveEntry . mousePressed ( owningEntryList . mc , x , y ) ) <nl> + else if ( this . btnRemoveEntry . mousePressed ( owningEntryList . getMC ( ) , x , y ) ) <nl> { <nl> - btnRemoveEntry . playPressSound ( owningEntryList . mc . getSoundHandler ( ) ) ; <nl> + btnRemoveEntry . playPressSound ( owningEntryList . getMC ( ) . getSoundHandler ( ) ) ; <nl> owningEntryList . removeEntry ( index ) ; <nl> owningEntryList . recalculateState ( ) ; <nl> return true ;
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> index 84ab029 . . c25b511 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - . . / src _ base / minecraft / net / minecraft / entity / player / EntityPlayer . java <nl> + + + . . / src _ work / minecraft / net / minecraft / entity / player / EntityPlayer . java <nl> - @ @ - 66 , 8 + 66 , 22 @ @ <nl> + @ @ - 66 , 8 + 66 , 23 @ @ <nl> import net . minecraft . world . World ; <nl> import net . minecraft . world . chunk . IChunkProvider ; <nl> <nl> @ @ - 19 , 11 + 19 , 21 @ @ <nl> public abstract class EntityPlayer extends EntityLiving implements ICommandSender <nl> { <nl> + public static final String PERSISTED _ NBT _ TAG = " PlayerPersisted " ; <nl> + + public int maxHealth = 20 ; <nl> + <nl> / * * Inventory of the player * / <nl> public InventoryPlayer inventory = new InventoryPlayer ( this ) ; <nl> private InventoryEnderChest theInventoryEnderChest = new InventoryEnderChest ( ) ; <nl> - @ @ - 268 , 6 + 282 , 7 @ @ <nl> + @ @ - 181 , 7 + 196 , 7 @ @ <nl> + <nl> + public int getMaxHealth ( ) <nl> + { <nl> + - return 20 ; <nl> + + return maxHealth < = 0 ? 20 : maxHealth ; <nl> + } <nl> + <nl> + protected void entityInit ( ) <nl> + @ @ - 268 , 6 + 283 , 7 @ @ <nl> <nl> if ( itemstack = = this . itemInUse ) <nl> { <nl> @ @ - 31 , 7 + 41 , 7 @ @ <nl> if ( this . itemInUseCount < = 25 & & this . itemInUseCount % 4 = = 0 ) <nl> { <nl> this . updateItemUse ( itemstack , 5 ) ; <nl> - @ @ - 528 , 11 + 543 , 11 @ @ <nl> + @ @ - 528 , 11 + 544 , 11 @ @ <nl> this . cameraYaw = 0 . 0F ; <nl> this . addMountedMovementStat ( this . posX - d0 , this . posY - d1 , this . posZ - d2 ) ; <nl> <nl> @ @ - 45 , 7 + 55 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 661 , 6 + 676 , 9 @ @ <nl> + @ @ - 661 , 6 + 677 , 9 @ @ <nl> this . setPosition ( this . posX , this . posY , this . posZ ) ; <nl> this . motionY = 0 . 10000000149011612D ; <nl> <nl> @ @ - 55 , 7 + 65 , 7 @ @ <nl> if ( this . username . equals ( " Notch " ) ) <nl> { <nl> this . dropPlayerItemWithRandomChoice ( new ItemStack ( Item . appleRed , 1 ) , true ) ; <nl> - @ @ - 669 , 6 + 687 , 20 @ @ <nl> + @ @ - 669 , 6 + 688 , 20 @ @ <nl> if ( ! this . worldObj . getGameRules ( ) . getGameRuleBooleanValue ( " keepInventory " ) ) <nl> { <nl> this . inventory . dropAllItems ( ) ; <nl> @ @ - 76 , 7 + 86 , 7 @ @ <nl> } <nl> <nl> if ( par1DamageSource ! = null ) <nl> - @ @ - 719 , 7 + 751 , 20 @ @ <nl> + @ @ - 719 , 7 + 752 , 20 @ @ <nl> * / <nl> public EntityItem dropOneItem ( boolean par1 ) <nl> { <nl> @ @ - 98 , 7 + 108 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 728 , 7 + 773 , 7 @ @ <nl> + @ @ - 728 , 7 + 774 , 7 @ @ <nl> * / <nl> public EntityItem dropPlayerItem ( ItemStack par1ItemStack ) <nl> { <nl> @ @ - 107 , 7 + 117 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 780 , 15 + 825 , 28 @ @ <nl> + @ @ - 780 , 15 + 826 , 28 @ @ <nl> * / <nl> public void joinEntityItemWithWorld ( EntityItem par1EntityItem ) <nl> { <nl> @ @ - 138 , 7 + 148 , 7 @ @ <nl> <nl> if ( f > 1 . 0F ) <nl> { <nl> - @ @ - 799 , 7 + 857 , 9 @ @ <nl> + @ @ - 799 , 7 + 858 , 9 @ @ <nl> { <nl> float f1 = ( float ) ( i * i + 1 ) ; <nl> <nl> @ @ - 149 , 7 + 159 , 7 @ @ <nl> { <nl> f + = f1 * 0 . 08F ; <nl> } <nl> - @ @ - 830 , 7 + 890 , 8 @ @ <nl> + @ @ - 830 , 7 + 891 , 8 @ @ <nl> f / = 5 . 0F ; <nl> } <nl> <nl> @ @ - 159 , 7 + 169 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 838 , 7 + 899 , 7 @ @ <nl> + @ @ - 838 , 7 + 900 , 7 @ @ <nl> * / <nl> public boolean canHarvestBlock ( Block par1Block ) <nl> { <nl> @ @ - 168 , 7 + 178 , 25 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1096 , 12 + 1157 , 22 @ @ <nl> + @ @ - 857 , 6 + 919 , 9 @ @ <nl> + this . experienceTotal = par1NBTTagCompound . getInteger ( " XpTotal " ) ; <nl> + this . setScore ( par1NBTTagCompound . getInteger ( " Score " ) ) ; <nl> + <nl> + + int tmp = par1NBTTagCompound . getInteger ( " MaxHealth " ) ; <nl> + + maxHealth = ( tmp < = 0 ? 20 : tmp ) ; <nl> + + <nl> + if ( this . sleeping ) <nl> + { <nl> + this . playerLocation = new ChunkCoordinates ( MathHelper . floor _ double ( this . posX ) , MathHelper . floor _ double ( this . posY ) , MathHelper . floor _ double ( this . posZ ) ) ; <nl> + @ @ - 893 , 6 + 958 , 7 @ @ <nl> + par1NBTTagCompound . setInteger ( " XpLevel " , this . experienceLevel ) ; <nl> + par1NBTTagCompound . setInteger ( " XpTotal " , this . experienceTotal ) ; <nl> + par1NBTTagCompound . setInteger ( " Score " , this . getScore ( ) ) ; <nl> + + par1NBTTagCompound . setInteger ( " MaxHealth " , maxHealth ) ; <nl> + <nl> + if ( this . spawnChunk ! = null ) <nl> + { <nl> + @ @ - 1096 , 12 + 1162 , 22 @ @ <nl> { <nl> if ( ! this . isEntityInvulnerable ( ) ) <nl> { <nl> @ @ - 192 , 7 + 220 , 7 @ @ <nl> par2 = this . applyPotionDamageCalculations ( par1DamageSource , par2 ) ; <nl> this . addExhaustion ( par1DamageSource . getHungerDamage ( ) ) ; <nl> int j = this . getHealth ( ) ; <nl> - @ @ - 1144 , 6 + 1215 , 10 @ @ <nl> + @ @ - 1144 , 6 + 1220 , 10 @ @ <nl> <nl> public boolean interactWith ( Entity par1Entity ) <nl> { <nl> @ @ - 203 , 7 + 231 , 7 @ @ <nl> if ( par1Entity . interact ( this ) ) <nl> { <nl> return true ; <nl> - @ @ - 1187 , 7 + 1262 , 9 @ @ <nl> + @ @ - 1187 , 7 + 1267 , 9 @ @ <nl> * / <nl> public void destroyCurrentEquippedItem ( ) <nl> { <nl> @ @ - 213 , 7 + 241 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1204 , 6 + 1281 , 15 @ @ <nl> + @ @ - 1204 , 6 + 1286 , 15 @ @ <nl> * / <nl> public void attackTargetEntityWithCurrentItem ( Entity par1Entity ) <nl> { <nl> @ @ - 229 , 7 + 257 , 7 @ @ <nl> if ( par1Entity . canAttackWithItem ( ) ) <nl> { <nl> if ( ! par1Entity . func _ 85031 _ j ( this ) ) <nl> - @ @ - 1378 , 6 + 1464 , 12 @ @ <nl> + @ @ - 1378 , 6 + 1469 , 12 @ @ <nl> * / <nl> public EnumStatus sleepInBedAt ( int par1 , int par2 , int par3 ) <nl> { <nl> @ @ - 242 , 7 + 270 , 7 @ @ <nl> if ( ! this . worldObj . isRemote ) <nl> { <nl> if ( this . isPlayerSleeping ( ) | | ! this . isEntityAlive ( ) ) <nl> - @ @ - 1417 , 6 + 1509 , 11 @ @ <nl> + @ @ - 1417 , 6 + 1514 , 11 @ @ <nl> { <nl> int l = this . worldObj . getBlockMetadata ( par1 , par2 , par3 ) ; <nl> int i1 = BlockBed . getDirection ( l ) ; <nl> @ @ - 254 , 7 + 282 , 7 @ @ <nl> float f = 0 . 5F ; <nl> float f1 = 0 . 5F ; <nl> <nl> - @ @ - 1487 , 10 + 1584 , 12 @ @ <nl> + @ @ - 1487 , 10 + 1589 , 12 @ @ <nl> ChunkCoordinates chunkcoordinates = this . playerLocation ; <nl> ChunkCoordinates chunkcoordinates1 = this . playerLocation ; <nl> <nl> @ @ - 271 , 7 + 299 , 7 @ @ <nl> <nl> if ( chunkcoordinates1 = = null ) <nl> { <nl> - @ @ - 1527 , 7 + 1626 , 9 @ @ <nl> + @ @ - 1527 , 7 + 1631 , 9 @ @ <nl> * / <nl> private boolean isInBed ( ) <nl> { <nl> @ @ - 282 , 7 + 310 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1542 , 9 + 1643 , 12 @ @ <nl> + @ @ - 1542 , 9 + 1648 , 12 @ @ <nl> ichunkprovider . loadChunk ( par1ChunkCoordinates . posX - 3 > > 4 , par1ChunkCoordinates . posZ + 3 > > 4 ) ; <nl> ichunkprovider . loadChunk ( par1ChunkCoordinates . posX + 3 > > 4 , par1ChunkCoordinates . posZ + 3 > > 4 ) ; <nl> <nl> @ @ - 298 , 7 + 326 , 7 @ @ <nl> return chunkcoordinates1 ; <nl> } <nl> else <nl> - @ @ - 1566 , 10 + 1670 , 13 @ @ <nl> + @ @ - 1566 , 10 + 1675 , 13 @ @ <nl> { <nl> if ( this . playerLocation ! = null ) <nl> { <nl> @ @ - 316 , 7 + 344 , 7 @ @ <nl> { <nl> case 0 : <nl> return 90 . 0F ; <nl> - @ @ - 1835 , 6 + 1942 , 10 @ @ <nl> + @ @ - 1835 , 6 + 1947 , 10 @ @ <nl> <nl> super . fall ( par1 ) ; <nl> } <nl> @ @ - 327 , 7 + 355 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 1876 , 7 + 1987 , 7 @ @ <nl> + @ @ - 1876 , 7 + 1992 , 7 @ @ <nl> { <nl> if ( par1ItemStack . getItem ( ) . requiresMultipleRenderPasses ( ) ) <nl> { <nl> @ @ - 336 , 7 + 364 , 7 @ @ <nl> } <nl> <nl> if ( this . itemInUse ! = null & & par1ItemStack . itemID = = Item . bow . itemID ) <nl> - @ @ - 1898 , 6 + 2009 , 7 @ @ <nl> + @ @ - 1898 , 6 + 2014 , 7 @ @ <nl> return Item . bow . func _ 94599 _ c ( 0 ) ; <nl> } <nl> } <nl> @ @ - 344 , 7 + 372 , 7 @ @ <nl> } <nl> <nl> return icon ; <nl> - @ @ - 2137 , 6 + 2249 , 14 @ @ <nl> + @ @ - 2137 , 6 + 2254 , 14 @ @ <nl> } <nl> <nl> this . theInventoryEnderChest = par1EntityPlayer . theInventoryEnderChest ; <nl> @ @ - 359 , 7 + 387 , 7 @ @ <nl> } <nl> <nl> / * * <nl> - @ @ - 2208 , 7 + 2328 , 14 @ @ <nl> + @ @ - 2208 , 7 + 2333 , 14 @ @ <nl> * / <nl> public void setCurrentItemOrArmor ( int par1 , ItemStack par2ItemStack ) <nl> {

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / item / ItemStack . java . patch b / patches / minecraft / net / minecraft / item / ItemStack . java . patch 
 index 9b1a6b0 . . 254ac92 100644 
 - - - a / patches / minecraft / net / minecraft / item / ItemStack . java . patch 
 + + + b / patches / minecraft / net / minecraft / item / ItemStack . java . patch 
 @ @ - 64 , 7 + 64 , 7 @ @ 
 + if ( this . capabilities ! = null ) 
 + { 
 + NBTTagCompound cnbt = this . capabilities . serializeNBT ( ) ; 
 - + if ( ! cnbt . func _ 82582 _ d ( ) ) p _ 77955 _ 1 _ . func _ 74782 _ a ( " ForgeCaps " , this . capabilities . serializeNBT ( ) ) ; 
 + + if ( ! cnbt . func _ 82582 _ d ( ) ) p _ 77955 _ 1 _ . func _ 74782 _ a ( " ForgeCaps " , cnbt ) ; 
 + } 
 + 
 return p _ 77955 _ 1 _ ; 
 diff - - git a / src / main / java / net / minecraftforge / fml / client / config / GuiEditArrayEntries . java b / src / main / java / net / minecraftforge / fml / client / config / GuiEditArrayEntries . java 
 index 9d9444d . . dbcbb0e 100644 
 - - - a / src / main / java / net / minecraftforge / fml / client / config / GuiEditArrayEntries . java 
 + + + b / src / main / java / net / minecraftforge / fml / client / config / GuiEditArrayEntries . java 
 @ @ - 43 , 7 + 43 , 6 @ @ import static net . minecraftforge . fml . client . config . GuiUtils . VALID ; 
 public class GuiEditArrayEntries extends GuiListExtended 
 { 
 protected GuiEditArray owningGui ; 
 - public Minecraft mc ; 
 public IConfigElement configElement ; 
 public List < IArrayEntry > listEntries ; 
 public boolean isDefault ; 
 @ @ - 57 , 7 + 56 , 6 @ @ public class GuiEditArrayEntries extends GuiListExtended 
 { 
 super ( mc , parent . width , parent . height , parent . titleLine2 ! = null ? ( parent . titleLine3 ! = null ? 43 : 33 ) : 23 , parent . height - 32 , 20 ) ; 
 this . owningGui = parent ; 
 - this . mc = mc ; 
 this . configElement = configElement ; 
 this . beforeValues = beforeValues ; 
 this . currentValues = currentValues ; 
 @ @ - 281 , 6 + 279 , 11 @ @ public class GuiEditArrayEntries extends GuiListExtended 
 entry . drawToolTip ( mouseX , mouseY ) ; 
 } 
 
 + public Minecraft getMC ( ) 
 + { 
 + return this . mc ; 
 + } 
 + 
 / * * 
 * IGuiListEntry Inner Classes 
 * / 
 @ @ - 405 , 7 + 408 , 7 @ @ public class GuiEditArrayEntries extends GuiListExtended 
 public StringEntry ( GuiEditArray owningScreen , GuiEditArrayEntries owningEntryList , IConfigElement configElement , Object value ) 
 { 
 super ( owningScreen , owningEntryList , configElement ) ; 
 - this . textFieldValue = new GuiTextField ( 0 , owningEntryList . mc . fontRendererObj , owningEntryList . width / 4 + 1 , 0 , owningEntryList . controlWidth - 3 , 16 ) ; 
 + this . textFieldValue = new GuiTextField ( 0 , owningEntryList . getMC ( ) . fontRendererObj , owningEntryList . width / 4 + 1 , 0 , owningEntryList . controlWidth - 3 , 16 ) ; 
 this . textFieldValue . setMaxStringLength ( 10000 ) ; 
 this . textFieldValue . setText ( value . toString ( ) ) ; 
 this . isValidated = configElement . getValidationPattern ( ) ! = null ; 
 @ @ - 499 , 15 + 502 , 15 @ @ public class GuiEditArrayEntries extends GuiListExtended 
 this . btnValue . displayString = String . valueOf ( value ) ; 
 btnValue . packedFGColour = value ? GuiUtils . getColorCode ( ' 2 ' , true ) : GuiUtils . getColorCode ( ' 4 ' , true ) ; 
 
 - this . btnValue . drawButton ( owningEntryList . mc , mouseX , mouseY ) ; 
 + this . btnValue . drawButton ( owningEntryList . getMC ( ) , mouseX , mouseY ) ; 
 } 
 
 @ Override 
 public boolean mousePressed ( int index , int x , int y , int mouseEvent , int relativeX , int relativeY ) 
 { 
 - if ( this . btnValue . mousePressed ( owningEntryList . mc , x , y ) ) 
 + if ( this . btnValue . mousePressed ( owningEntryList . getMC ( ) , x , y ) ) 
 { 
 - btnValue . playPressSound ( owningEntryList . mc . getSoundHandler ( ) ) ; 
 + btnValue . playPressSound ( owningEntryList . getMC ( ) . getSoundHandler ( ) ) ; 
 value = ! value ; 
 owningEntryList . recalculateState ( ) ; 
 return true ; 
 @ @ - 566 , 10 + 569 , 10 @ @ public class GuiEditArrayEntries extends GuiListExtended 
 public void drawEntry ( int slotIndex , int x , int y , int listWidth , int slotHeight , int mouseX , int mouseY , boolean isSelected ) 
 { 
 if ( this . getValue ( ) ! = null & & this . isValidated ) 
 - owningEntryList . mc . fontRendererObj . drawString ( 
 + owningEntryList . getMC ( ) . fontRendererObj . drawString ( 
 isValidValue ? TextFormatting . GREEN + VALID : TextFormatting . RED + INVALID , 
 - listWidth / 4 - owningEntryList . mc . fontRendererObj . getStringWidth ( VALID ) - 2 , 
 - y + slotHeight / 2 - owningEntryList . mc . fontRendererObj . FONT _ HEIGHT / 2 , 
 + listWidth / 4 - owningEntryList . getMC ( ) . fontRendererObj . getStringWidth ( VALID ) - 2 , 
 + y + slotHeight / 2 - owningEntryList . getMC ( ) . fontRendererObj . FONT _ HEIGHT / 2 , 
 16777215 ) ; 
 
 int half = listWidth / 2 ; 
 @ @ - 578 , 7 + 581 , 7 @ @ public class GuiEditArrayEntries extends GuiListExtended 
 this . btnAddNewEntryAbove . visible = true ; 
 this . btnAddNewEntryAbove . xPosition = half + ( ( half / 2 ) - 44 ) ; 
 this . btnAddNewEntryAbove . yPosition = y ; 
 - this . btnAddNewEntryAbove . drawButton ( owningEntryList . mc , mouseX , mouseY ) ; 
 + this . btnAddNewEntryAbove . drawButton ( owningEntryList . getMC ( ) , mouseX , mouseY ) ; 
 } 
 else 
 this . btnAddNewEntryAbove . visible = false ; 
 @ @ - 588 , 7 + 591 , 7 @ @ public class GuiEditArrayEntries extends GuiListExtended 
 this . btnRemoveEntry . visible = true ; 
 this . btnRemoveEntry . xPosition = half + ( ( half / 2 ) - 22 ) ; 
 this . btnRemoveEntry . yPosition = y ; 
 - this . btnRemoveEntry . drawButton ( owningEntryList . mc , mouseX , mouseY ) ; 
 + this . btnRemoveEntry . drawButton ( owningEntryList . getMC ( ) , mouseX , mouseY ) ; 
 } 
 else 
 this . btnRemoveEntry . visible = false ; 
 @ @ - 607 , 16 + 610 , 16 @ @ public class GuiEditArrayEntries extends GuiListExtended 
 @ Override 
 public boolean mousePressed ( int index , int x , int y , int mouseEvent , int relativeX , int relativeY ) 
 { 
 - if ( this . btnAddNewEntryAbove . mousePressed ( owningEntryList . mc , x , y ) ) 
 + if ( this . btnAddNewEntryAbove . mousePressed ( owningEntryList . getMC ( ) , x , y ) ) 
 { 
 - btnAddNewEntryAbove . playPressSound ( owningEntryList . mc . getSoundHandler ( ) ) ; 
 + btnAddNewEntryAbove . playPressSound ( owningEntryList . getMC ( ) . getSoundHandler ( ) ) ; 
 owningEntryList . addNewEntry ( index ) ; 
 owningEntryList . recalculateState ( ) ; 
 return true ; 
 } 
 - else if ( this . btnRemoveEntry . mousePressed ( owningEntryList . mc , x , y ) ) 
 + else if ( this . btnRemoveEntry . mousePressed ( owningEntryList . getMC ( ) , x , y ) ) 
 { 
 - btnRemoveEntry . playPressSound ( owningEntryList . mc . getSoundHandler ( ) ) ; 
 + btnRemoveEntry . playPressSound ( owningEntryList . getMC ( ) . getSoundHandler ( ) ) ; 
 owningEntryList . removeEntry ( index ) ; 
 owningEntryList . recalculateState ( ) ; 
 return true ;

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 index 84ab029 . . c25b511 100644 
 - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - . . / src _ base / minecraft / net / minecraft / entity / player / EntityPlayer . java 
 + + + . . / src _ work / minecraft / net / minecraft / entity / player / EntityPlayer . java 
 - @ @ - 66 , 8 + 66 , 22 @ @ 
 + @ @ - 66 , 8 + 66 , 23 @ @ 
 import net . minecraft . world . World ; 
 import net . minecraft . world . chunk . IChunkProvider ; 
 
 @ @ - 19 , 11 + 19 , 21 @ @ 
 public abstract class EntityPlayer extends EntityLiving implements ICommandSender 
 { 
 + public static final String PERSISTED _ NBT _ TAG = " PlayerPersisted " ; 
 + + public int maxHealth = 20 ; 
 + 
 / * * Inventory of the player * / 
 public InventoryPlayer inventory = new InventoryPlayer ( this ) ; 
 private InventoryEnderChest theInventoryEnderChest = new InventoryEnderChest ( ) ; 
 - @ @ - 268 , 6 + 282 , 7 @ @ 
 + @ @ - 181 , 7 + 196 , 7 @ @ 
 + 
 + public int getMaxHealth ( ) 
 + { 
 + - return 20 ; 
 + + return maxHealth < = 0 ? 20 : maxHealth ; 
 + } 
 + 
 + protected void entityInit ( ) 
 + @ @ - 268 , 6 + 283 , 7 @ @ 
 
 if ( itemstack = = this . itemInUse ) 
 { 
 @ @ - 31 , 7 + 41 , 7 @ @ 
 if ( this . itemInUseCount < = 25 & & this . itemInUseCount % 4 = = 0 ) 
 { 
 this . updateItemUse ( itemstack , 5 ) ; 
 - @ @ - 528 , 11 + 543 , 11 @ @ 
 + @ @ - 528 , 11 + 544 , 11 @ @ 
 this . cameraYaw = 0 . 0F ; 
 this . addMountedMovementStat ( this . posX - d0 , this . posY - d1 , this . posZ - d2 ) ; 
 
 @ @ - 45 , 7 + 55 , 7 @ @ 
 } 
 } 
 
 - @ @ - 661 , 6 + 676 , 9 @ @ 
 + @ @ - 661 , 6 + 677 , 9 @ @ 
 this . setPosition ( this . posX , this . posY , this . posZ ) ; 
 this . motionY = 0 . 10000000149011612D ; 
 
 @ @ - 55 , 7 + 65 , 7 @ @ 
 if ( this . username . equals ( " Notch " ) ) 
 { 
 this . dropPlayerItemWithRandomChoice ( new ItemStack ( Item . appleRed , 1 ) , true ) ; 
 - @ @ - 669 , 6 + 687 , 20 @ @ 
 + @ @ - 669 , 6 + 688 , 20 @ @ 
 if ( ! this . worldObj . getGameRules ( ) . getGameRuleBooleanValue ( " keepInventory " ) ) 
 { 
 this . inventory . dropAllItems ( ) ; 
 @ @ - 76 , 7 + 86 , 7 @ @ 
 } 
 
 if ( par1DamageSource ! = null ) 
 - @ @ - 719 , 7 + 751 , 20 @ @ 
 + @ @ - 719 , 7 + 752 , 20 @ @ 
 * / 
 public EntityItem dropOneItem ( boolean par1 ) 
 { 
 @ @ - 98 , 7 + 108 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 728 , 7 + 773 , 7 @ @ 
 + @ @ - 728 , 7 + 774 , 7 @ @ 
 * / 
 public EntityItem dropPlayerItem ( ItemStack par1ItemStack ) 
 { 
 @ @ - 107 , 7 + 117 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 780 , 15 + 825 , 28 @ @ 
 + @ @ - 780 , 15 + 826 , 28 @ @ 
 * / 
 public void joinEntityItemWithWorld ( EntityItem par1EntityItem ) 
 { 
 @ @ - 138 , 7 + 148 , 7 @ @ 
 
 if ( f > 1 . 0F ) 
 { 
 - @ @ - 799 , 7 + 857 , 9 @ @ 
 + @ @ - 799 , 7 + 858 , 9 @ @ 
 { 
 float f1 = ( float ) ( i * i + 1 ) ; 
 
 @ @ - 149 , 7 + 159 , 7 @ @ 
 { 
 f + = f1 * 0 . 08F ; 
 } 
 - @ @ - 830 , 7 + 890 , 8 @ @ 
 + @ @ - 830 , 7 + 891 , 8 @ @ 
 f / = 5 . 0F ; 
 } 
 
 @ @ - 159 , 7 + 169 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 838 , 7 + 899 , 7 @ @ 
 + @ @ - 838 , 7 + 900 , 7 @ @ 
 * / 
 public boolean canHarvestBlock ( Block par1Block ) 
 { 
 @ @ - 168 , 7 + 178 , 25 @ @ 
 } 
 
 / * * 
 - @ @ - 1096 , 12 + 1157 , 22 @ @ 
 + @ @ - 857 , 6 + 919 , 9 @ @ 
 + this . experienceTotal = par1NBTTagCompound . getInteger ( " XpTotal " ) ; 
 + this . setScore ( par1NBTTagCompound . getInteger ( " Score " ) ) ; 
 + 
 + + int tmp = par1NBTTagCompound . getInteger ( " MaxHealth " ) ; 
 + + maxHealth = ( tmp < = 0 ? 20 : tmp ) ; 
 + + 
 + if ( this . sleeping ) 
 + { 
 + this . playerLocation = new ChunkCoordinates ( MathHelper . floor _ double ( this . posX ) , MathHelper . floor _ double ( this . posY ) , MathHelper . floor _ double ( this . posZ ) ) ; 
 + @ @ - 893 , 6 + 958 , 7 @ @ 
 + par1NBTTagCompound . setInteger ( " XpLevel " , this . experienceLevel ) ; 
 + par1NBTTagCompound . setInteger ( " XpTotal " , this . experienceTotal ) ; 
 + par1NBTTagCompound . setInteger ( " Score " , this . getScore ( ) ) ; 
 + + par1NBTTagCompound . setInteger ( " MaxHealth " , maxHealth ) ; 
 + 
 + if ( this . spawnChunk ! = null ) 
 + { 
 + @ @ - 1096 , 12 + 1162 , 22 @ @ 
 { 
 if ( ! this . isEntityInvulnerable ( ) ) 
 { 
 @ @ - 192 , 7 + 220 , 7 @ @ 
 par2 = this . applyPotionDamageCalculations ( par1DamageSource , par2 ) ; 
 this . addExhaustion ( par1DamageSource . getHungerDamage ( ) ) ; 
 int j = this . getHealth ( ) ; 
 - @ @ - 1144 , 6 + 1215 , 10 @ @ 
 + @ @ - 1144 , 6 + 1220 , 10 @ @ 
 
 public boolean interactWith ( Entity par1Entity ) 
 { 
 @ @ - 203 , 7 + 231 , 7 @ @ 
 if ( par1Entity . interact ( this ) ) 
 { 
 return true ; 
 - @ @ - 1187 , 7 + 1262 , 9 @ @ 
 + @ @ - 1187 , 7 + 1267 , 9 @ @ 
 * / 
 public void destroyCurrentEquippedItem ( ) 
 { 
 @ @ - 213 , 7 + 241 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 1204 , 6 + 1281 , 15 @ @ 
 + @ @ - 1204 , 6 + 1286 , 15 @ @ 
 * / 
 public void attackTargetEntityWithCurrentItem ( Entity par1Entity ) 
 { 
 @ @ - 229 , 7 + 257 , 7 @ @ 
 if ( par1Entity . canAttackWithItem ( ) ) 
 { 
 if ( ! par1Entity . func _ 85031 _ j ( this ) ) 
 - @ @ - 1378 , 6 + 1464 , 12 @ @ 
 + @ @ - 1378 , 6 + 1469 , 12 @ @ 
 * / 
 public EnumStatus sleepInBedAt ( int par1 , int par2 , int par3 ) 
 { 
 @ @ - 242 , 7 + 270 , 7 @ @ 
 if ( ! this . worldObj . isRemote ) 
 { 
 if ( this . isPlayerSleeping ( ) | | ! this . isEntityAlive ( ) ) 
 - @ @ - 1417 , 6 + 1509 , 11 @ @ 
 + @ @ - 1417 , 6 + 1514 , 11 @ @ 
 { 
 int l = this . worldObj . getBlockMetadata ( par1 , par2 , par3 ) ; 
 int i1 = BlockBed . getDirection ( l ) ; 
 @ @ - 254 , 7 + 282 , 7 @ @ 
 float f = 0 . 5F ; 
 float f1 = 0 . 5F ; 
 
 - @ @ - 1487 , 10 + 1584 , 12 @ @ 
 + @ @ - 1487 , 10 + 1589 , 12 @ @ 
 ChunkCoordinates chunkcoordinates = this . playerLocation ; 
 ChunkCoordinates chunkcoordinates1 = this . playerLocation ; 
 
 @ @ - 271 , 7 + 299 , 7 @ @ 
 
 if ( chunkcoordinates1 = = null ) 
 { 
 - @ @ - 1527 , 7 + 1626 , 9 @ @ 
 + @ @ - 1527 , 7 + 1631 , 9 @ @ 
 * / 
 private boolean isInBed ( ) 
 { 
 @ @ - 282 , 7 + 310 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 1542 , 9 + 1643 , 12 @ @ 
 + @ @ - 1542 , 9 + 1648 , 12 @ @ 
 ichunkprovider . loadChunk ( par1ChunkCoordinates . posX - 3 > > 4 , par1ChunkCoordinates . posZ + 3 > > 4 ) ; 
 ichunkprovider . loadChunk ( par1ChunkCoordinates . posX + 3 > > 4 , par1ChunkCoordinates . posZ + 3 > > 4 ) ; 
 
 @ @ - 298 , 7 + 326 , 7 @ @ 
 return chunkcoordinates1 ; 
 } 
 else 
 - @ @ - 1566 , 10 + 1670 , 13 @ @ 
 + @ @ - 1566 , 10 + 1675 , 13 @ @ 
 { 
 if ( this . playerLocation ! = null ) 
 { 
 @ @ - 316 , 7 + 344 , 7 @ @ 
 { 
 case 0 : 
 return 90 . 0F ; 
 - @ @ - 1835 , 6 + 1942 , 10 @ @ 
 + @ @ - 1835 , 6 + 1947 , 10 @ @ 
 
 super . fall ( par1 ) ; 
 } 
 @ @ - 327 , 7 + 355 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 1876 , 7 + 1987 , 7 @ @ 
 + @ @ - 1876 , 7 + 1992 , 7 @ @ 
 { 
 if ( par1ItemStack . getItem ( ) . requiresMultipleRenderPasses ( ) ) 
 { 
 @ @ - 336 , 7 + 364 , 7 @ @ 
 } 
 
 if ( this . itemInUse ! = null & & par1ItemStack . itemID = = Item . bow . itemID ) 
 - @ @ - 1898 , 6 + 2009 , 7 @ @ 
 + @ @ - 1898 , 6 + 2014 , 7 @ @ 
 return Item . bow . func _ 94599 _ c ( 0 ) ; 
 } 
 } 
 @ @ - 344 , 7 + 372 , 7 @ @ 
 } 
 
 return icon ; 
 - @ @ - 2137 , 6 + 2249 , 14 @ @ 
 + @ @ - 2137 , 6 + 2254 , 14 @ @ 
 } 
 
 this . theInventoryEnderChest = par1EntityPlayer . theInventoryEnderChest ; 
 @ @ - 359 , 7 + 387 , 7 @ @ 
 } 
 
 / * * 
 - @ @ - 2208 , 7 + 2328 , 14 @ @ 
 + @ @ - 2208 , 7 + 2333 , 14 @ @ 
 * / 
 public void setCurrentItemOrArmor ( int par1 , ItemStack par2ItemStack ) 
 {
