BLEU SCORE: 0.06758212955973164

TEST MSG: Actually dispatch handleWorldDataSave . Closes # 5492
GENERATED MSG: Propogate AbortException . Closes # 2206 . Also fix tracing printstream when printStackTrace is called .

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch b / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch <nl> index 7483017 . . 7faa995 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch <nl> @ @ - 17 , 7 + 17 , 16 @ @ <nl> } <nl> <nl> public void func _ 75755 _ a ( WorldInfo p _ 75755 _ 1 _ , @ Nullable NBTTagCompound p _ 75755 _ 2 _ ) { <nl> - @ @ - 148 , 6 + 148 , 7 @ @ <nl> + @ @ - 109 , 6 + 109 , 8 @ @ <nl> + NBTTagCompound nbttagcompound1 = new NBTTagCompound ( ) ; <nl> + nbttagcompound1 . func _ 74782 _ a ( " Data " , nbttagcompound ) ; <nl> + <nl> + + net . minecraftforge . fml . WorldPersistenceHooks . handleWorldDataSave ( this , p _ 75755 _ 1 _ , nbttagcompound1 ) ; <nl> + + <nl> + try { <nl> + File file1 = new File ( this . field _ 75770 _ b , " level . dat _ new " ) ; <nl> + File file2 = new File ( this . field _ 75770 _ b , " level . dat _ old " ) ; <nl> + @ @ - 148 , 6 + 150 , 7 @ @ <nl> } <nl> <nl> file1 . renameTo ( file2 ) ; <nl> @ @ - 25 , 7 + 34 , 7 @ @ <nl> } catch ( Exception var5 ) { <nl> field _ 151478 _ a . warn ( " Failed to save player data for { } " , ( Object ) p _ 75753 _ 1 _ . func _ 200200 _ C _ ( ) . getString ( ) ) ; <nl> } <nl> - @ @ - 171 , 6 + 172 , 7 @ @ <nl> + @ @ - 171 , 6 + 174 , 7 @ @ <nl> int i = nbttagcompound . func _ 150297 _ b ( " DataVersion " , 3 ) ? nbttagcompound . func _ 74762 _ e ( " DataVersion " ) : - 1 ; <nl> p _ 75752 _ 1 _ . func _ 70020 _ e ( NBTUtil . func _ 210822 _ a ( this . field _ 186341 _ a , DataFixTypes . PLAYER , nbttagcompound , i ) ) ; <nl> } <nl> @ @ - 33 , 7 + 42 , 7 @ @ <nl> <nl> return nbttagcompound ; <nl> } <nl> - @ @ - 210 , 4 + 212 , 20 @ @ <nl> + @ @ - 210 , 4 + 214 , 20 @ @ <nl> public DataFixer func _ 197718 _ i ( ) { <nl> return this . field _ 186341 _ a ; <nl> }
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch b / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch <nl> index f3f48d6 . . 6f920a6 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / world / storage / SaveHandler . java <nl> + + + . . / src - work / minecraft / net / minecraft / world / storage / SaveHandler . java <nl> - @ @ - 104 , 13 + 104 , 17 @ @ <nl> + @ @ - 104 , 20 + 104 , 29 @ @ <nl> { <nl> File file1 = new File ( this . field _ 75770 _ b , " level . dat " ) ; <nl> <nl> @ @ - 17 , 9 + 17 , 13 @ @ <nl> + net . minecraftforge . fml . common . FMLCommonHandler . instance ( ) . handleWorldDataLoad ( this , worldInfo , nbttagcompound2 ) ; <nl> + return worldInfo ; <nl> } <nl> + + catch ( net . minecraftforge . fml . common . StartupQuery . AbortedException e ) <nl> + + { <nl> + + throw e ; <nl> + + } <nl> catch ( Exception exception1 ) <nl> { <nl> - @ @ - 118 , 6 + 122 , 7 @ @ <nl> + exception1 . printStackTrace ( ) ; <nl> } <nl> } <nl> <nl> @ @ - 27 , 7 + 31 , 7 @ @ <nl> file1 = new File ( this . field _ 75770 _ b , " level . dat _ old " ) ; <nl> <nl> if ( file1 . exists ( ) ) <nl> - @ @ - 126 , 7 + 131 , 13 @ @ <nl> + @ @ - 126 , 7 + 135 , 13 @ @ <nl> { <nl> NBTTagCompound nbttagcompound = CompressedStreamTools . func _ 74796 _ a ( new FileInputStream ( file1 ) ) ; <nl> NBTTagCompound nbttagcompound1 = nbttagcompound . func _ 74775 _ l ( " Data " ) ; <nl> @ @ - 42 , 7 + 46 , 7 @ @ <nl> } <nl> catch ( Exception exception ) <nl> { <nl> - @ @ - 143 , 6 + 154 , 8 @ @ <nl> + @ @ - 143 , 6 + 158 , 8 @ @ <nl> NBTTagCompound nbttagcompound1 = new NBTTagCompound ( ) ; <nl> nbttagcompound1 . func _ 74782 _ a ( " Data " , nbttagcompound ) ; <nl> <nl> @ @ - 51 , 7 + 55 , 7 @ @ <nl> try <nl> { <nl> File file1 = new File ( this . field _ 75770 _ b , " level . dat _ new " ) ; <nl> - @ @ - 181 , 6 + 194 , 8 @ @ <nl> + @ @ - 181 , 6 + 198 , 8 @ @ <nl> NBTTagCompound nbttagcompound1 = new NBTTagCompound ( ) ; <nl> nbttagcompound1 . func _ 74782 _ a ( " Data " , nbttagcompound ) ; <nl> <nl> @ @ - 60 , 7 + 64 , 7 @ @ <nl> try <nl> { <nl> File file1 = new File ( this . field _ 75770 _ b , " level . dat _ new " ) ; <nl> - @ @ - 229 , 6 + 244 , 7 @ @ <nl> + @ @ - 229 , 6 + 248 , 7 @ @ <nl> } <nl> <nl> file1 . renameTo ( file2 ) ; <nl> @ @ - 68 , 7 + 72 , 7 @ @ <nl> } <nl> catch ( Exception var5 ) <nl> { <nl> - @ @ - 259 , 6 + 275 , 7 @ @ <nl> + @ @ - 259 , 6 + 279 , 7 @ @ <nl> p _ 75752 _ 1 _ . func _ 70020 _ e ( nbttagcompound ) ; <nl> } <nl> <nl> @ @ - 76 , 7 + 80 , 7 @ @ <nl> return nbttagcompound ; <nl> } <nl> <nl> - @ @ - 300 , 4 + 317 , 22 @ @ <nl> + @ @ - 300 , 4 + 321 , 22 @ @ <nl> { <nl> return this . field _ 75767 _ f ; <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / TracingPrintStream . java b / src / main / java / net / minecraftforge / fml / common / TracingPrintStream . java <nl> index f6ea78e . . 0451edf 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / TracingPrintStream . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / TracingPrintStream . java <nl> @ @ - 44 , 7 + 44 , 7 @ @ public class TracingPrintStream extends PrintStream { <nl> if ( elem . getClassName ( ) . startsWith ( " kotlin . io . " ) ) { <nl> elem = elems [ BASE _ DEPTH + 2 ] ; / / Kotlins IoPackage masks origins 2 deeper in the stack . <nl> } else if ( elem . getClassName ( ) . startsWith ( " java . lang . Throwable " ) ) { <nl> - elem = elems [ BASE _ DEPTH + 2 ] ; <nl> + elem = elems [ BASE _ DEPTH + 4 ] ; <nl> } <nl> return " [ " + elem . getClassName ( ) + " : " + elem . getMethodName ( ) + " : " + elem . getLineNumber ( ) + " ] : " ; <nl> }

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch b / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch 
 index 7483017 . . 7faa995 100644 
 - - - a / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch 
 @ @ - 17 , 7 + 17 , 16 @ @ 
 } 
 
 public void func _ 75755 _ a ( WorldInfo p _ 75755 _ 1 _ , @ Nullable NBTTagCompound p _ 75755 _ 2 _ ) { 
 - @ @ - 148 , 6 + 148 , 7 @ @ 
 + @ @ - 109 , 6 + 109 , 8 @ @ 
 + NBTTagCompound nbttagcompound1 = new NBTTagCompound ( ) ; 
 + nbttagcompound1 . func _ 74782 _ a ( " Data " , nbttagcompound ) ; 
 + 
 + + net . minecraftforge . fml . WorldPersistenceHooks . handleWorldDataSave ( this , p _ 75755 _ 1 _ , nbttagcompound1 ) ; 
 + + 
 + try { 
 + File file1 = new File ( this . field _ 75770 _ b , " level . dat _ new " ) ; 
 + File file2 = new File ( this . field _ 75770 _ b , " level . dat _ old " ) ; 
 + @ @ - 148 , 6 + 150 , 7 @ @ 
 } 
 
 file1 . renameTo ( file2 ) ; 
 @ @ - 25 , 7 + 34 , 7 @ @ 
 } catch ( Exception var5 ) { 
 field _ 151478 _ a . warn ( " Failed to save player data for { } " , ( Object ) p _ 75753 _ 1 _ . func _ 200200 _ C _ ( ) . getString ( ) ) ; 
 } 
 - @ @ - 171 , 6 + 172 , 7 @ @ 
 + @ @ - 171 , 6 + 174 , 7 @ @ 
 int i = nbttagcompound . func _ 150297 _ b ( " DataVersion " , 3 ) ? nbttagcompound . func _ 74762 _ e ( " DataVersion " ) : - 1 ; 
 p _ 75752 _ 1 _ . func _ 70020 _ e ( NBTUtil . func _ 210822 _ a ( this . field _ 186341 _ a , DataFixTypes . PLAYER , nbttagcompound , i ) ) ; 
 } 
 @ @ - 33 , 7 + 42 , 7 @ @ 
 
 return nbttagcompound ; 
 } 
 - @ @ - 210 , 4 + 212 , 20 @ @ 
 + @ @ - 210 , 4 + 214 , 20 @ @ 
 public DataFixer func _ 197718 _ i ( ) { 
 return this . field _ 186341 _ a ; 
 }

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch b / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch 
 index f3f48d6 . . 6f920a6 100644 
 - - - a / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / storage / SaveHandler . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / world / storage / SaveHandler . java 
 + + + . . / src - work / minecraft / net / minecraft / world / storage / SaveHandler . java 
 - @ @ - 104 , 13 + 104 , 17 @ @ 
 + @ @ - 104 , 20 + 104 , 29 @ @ 
 { 
 File file1 = new File ( this . field _ 75770 _ b , " level . dat " ) ; 
 
 @ @ - 17 , 9 + 17 , 13 @ @ 
 + net . minecraftforge . fml . common . FMLCommonHandler . instance ( ) . handleWorldDataLoad ( this , worldInfo , nbttagcompound2 ) ; 
 + return worldInfo ; 
 } 
 + + catch ( net . minecraftforge . fml . common . StartupQuery . AbortedException e ) 
 + + { 
 + + throw e ; 
 + + } 
 catch ( Exception exception1 ) 
 { 
 - @ @ - 118 , 6 + 122 , 7 @ @ 
 + exception1 . printStackTrace ( ) ; 
 } 
 } 
 
 @ @ - 27 , 7 + 31 , 7 @ @ 
 file1 = new File ( this . field _ 75770 _ b , " level . dat _ old " ) ; 
 
 if ( file1 . exists ( ) ) 
 - @ @ - 126 , 7 + 131 , 13 @ @ 
 + @ @ - 126 , 7 + 135 , 13 @ @ 
 { 
 NBTTagCompound nbttagcompound = CompressedStreamTools . func _ 74796 _ a ( new FileInputStream ( file1 ) ) ; 
 NBTTagCompound nbttagcompound1 = nbttagcompound . func _ 74775 _ l ( " Data " ) ; 
 @ @ - 42 , 7 + 46 , 7 @ @ 
 } 
 catch ( Exception exception ) 
 { 
 - @ @ - 143 , 6 + 154 , 8 @ @ 
 + @ @ - 143 , 6 + 158 , 8 @ @ 
 NBTTagCompound nbttagcompound1 = new NBTTagCompound ( ) ; 
 nbttagcompound1 . func _ 74782 _ a ( " Data " , nbttagcompound ) ; 
 
 @ @ - 51 , 7 + 55 , 7 @ @ 
 try 
 { 
 File file1 = new File ( this . field _ 75770 _ b , " level . dat _ new " ) ; 
 - @ @ - 181 , 6 + 194 , 8 @ @ 
 + @ @ - 181 , 6 + 198 , 8 @ @ 
 NBTTagCompound nbttagcompound1 = new NBTTagCompound ( ) ; 
 nbttagcompound1 . func _ 74782 _ a ( " Data " , nbttagcompound ) ; 
 
 @ @ - 60 , 7 + 64 , 7 @ @ 
 try 
 { 
 File file1 = new File ( this . field _ 75770 _ b , " level . dat _ new " ) ; 
 - @ @ - 229 , 6 + 244 , 7 @ @ 
 + @ @ - 229 , 6 + 248 , 7 @ @ 
 } 
 
 file1 . renameTo ( file2 ) ; 
 @ @ - 68 , 7 + 72 , 7 @ @ 
 } 
 catch ( Exception var5 ) 
 { 
 - @ @ - 259 , 6 + 275 , 7 @ @ 
 + @ @ - 259 , 6 + 279 , 7 @ @ 
 p _ 75752 _ 1 _ . func _ 70020 _ e ( nbttagcompound ) ; 
 } 
 
 @ @ - 76 , 7 + 80 , 7 @ @ 
 return nbttagcompound ; 
 } 
 
 - @ @ - 300 , 4 + 317 , 22 @ @ 
 + @ @ - 300 , 4 + 321 , 22 @ @ 
 { 
 return this . field _ 75767 _ f ; 
 } 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / TracingPrintStream . java b / src / main / java / net / minecraftforge / fml / common / TracingPrintStream . java 
 index f6ea78e . . 0451edf 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / TracingPrintStream . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / TracingPrintStream . java 
 @ @ - 44 , 7 + 44 , 7 @ @ public class TracingPrintStream extends PrintStream { 
 if ( elem . getClassName ( ) . startsWith ( " kotlin . io . " ) ) { 
 elem = elems [ BASE _ DEPTH + 2 ] ; / / Kotlins IoPackage masks origins 2 deeper in the stack . 
 } else if ( elem . getClassName ( ) . startsWith ( " java . lang . Throwable " ) ) { 
 - elem = elems [ BASE _ DEPTH + 2 ] ; 
 + elem = elems [ BASE _ DEPTH + 4 ] ; 
 } 
 return " [ " + elem . getClassName ( ) + " : " + elem . getMethodName ( ) + " : " + elem . getLineNumber ( ) + " ] : " ; 
 }
