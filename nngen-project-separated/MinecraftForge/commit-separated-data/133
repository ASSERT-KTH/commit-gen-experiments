BLEU SCORE: 0.01367744106030566

TEST MSG: Fix classcast in autoeventsubscriber , also actually make progression
GENERATED MSG: Move @ EventBusSubscriber application to just after construction instead of pre - init .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java b / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java <nl> index 1f06449 . . 42823d7 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java <nl> + + + b / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java <nl> @ @ - 61 , 10 + 61 , 12 @ @ public class AutomaticEventSubscriber <nl> final EnumSet < Dist > sides = sidesValue . stream ( ) . map ( eh - > Dist . valueOf ( eh . getValue ( ) ) ) . <nl> collect ( Collectors . toCollection ( ( ) - > EnumSet . noneOf ( Dist . class ) ) ) ; <nl> final String modId = ( String ) ad . getAnnotationData ( ) . getOrDefault ( " modid " , mod . getModId ( ) ) ; <nl> - final Mod . EventBusSubscriber . Bus busTarget = ( Mod . EventBusSubscriber . Bus ) ad . getAnnotationData ( ) . getOrDefault ( " bus " , Mod . EventBusSubscriber . Bus . FORGE ) ; <nl> + final ModAnnotation . EnumHolder busTargetHolder = ( ModAnnotation . EnumHolder ) ad . getAnnotationData ( ) . getOrDefault ( " bus " , new ModAnnotation . EnumHolder ( null , " FORGE " ) ) ; <nl> + final Mod . EventBusSubscriber . Bus busTarget = Mod . EventBusSubscriber . Bus . valueOf ( busTargetHolder . getValue ( ) ) ; <nl> if ( Objects . equals ( mod . getModId ( ) , modId ) & & sides . contains ( FMLEnvironment . dist ) ) { <nl> try <nl> { <nl> + LOGGER . info ( LOADING , " Auto - subscribing { } to { } " , ad . getClassType ( ) . getClassName ( ) , busTarget ) ; <nl> busTarget . bus ( ) . get ( ) . register ( Class . forName ( ad . getClassType ( ) . getClassName ( ) , true , loader ) ) ; <nl> } <nl> catch ( ClassNotFoundException e ) <nl> diff - - git a / src / main / java / net / minecraftforge / registries / GameData . java b / src / main / java / net / minecraftforge / registries / GameData . java <nl> index 8da094b . . 91b4d47 100644 <nl> - - - a / src / main / java / net / minecraftforge / registries / GameData . java <nl> + + + b / src / main / java / net / minecraftforge / registries / GameData . java <nl> @ @ - 806 , 7 + 806 , 8 @ @ public class GameData <nl> reg . unfreeze ( ) ; <nl> final RegistryEvent . Register < ? > registerEvent = reg . getRegisterEvent ( rl ) ; <nl> lifecycleEventProvider . setCustomEventSupplier ( ( ) - > registerEvent ) ; <nl> - if ( i = = keysSize - 1 ) lifecycleEventProvider . changeProgression ( LifecycleEventProvider . LifecycleEvent . Progression . NEXT ) ; <nl> + lifecycleEventProvider . changeProgression ( LifecycleEventProvider . LifecycleEvent . Progression . STAY ) ; <nl> + if ( i = = keysSize - 1 ) lifecycleEventProvider . changeProgression ( LifecycleEventProvider . LifecycleEvent . Progression . NEXT ) ; <nl> eventDispatcher . accept ( lifecycleEventProvider ) ; <nl> reg . freeze ( ) ; <nl> LOGGER . info ( " { } Applying holder lookups " , rl . toString ( ) ) ;
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java b / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java <nl> index 3967759 . . 2621914 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java <nl> + + + b / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java <nl> @ @ - 44 , 12 + 44 , 13 @ @ import static net . minecraftforge . fml . Logging . LOADING ; <nl> public class AutomaticEventSubscriber <nl> { <nl> private static final Logger LOGGER = LogManager . getLogger ( ) ; <nl> + private static final Type AUTO _ SUBSCRIBER = Type . getType ( Mod . EventBusSubscriber . class ) ; <nl> public static void inject ( final ModContainer mod , final ModFileScanData scanData , final ClassLoader loader ) <nl> { <nl> if ( scanData = = null ) return ; <nl> LOGGER . debug ( LOADING , " Attempting to inject @ EventBusSubscriber classes into the eventbus for { } " , mod . getModId ( ) ) ; <nl> List < ModFileScanData . AnnotationData > ebsTargets = scanData . getAnnotations ( ) . stream ( ) . <nl> - filter ( annotationData - > Objects . equals ( annotationData . getAnnotationType ( ) , Type . getType ( Mod . EventBusSubscriber . class ) ) ) . <nl> + filter ( annotationData - > AUTO _ SUBSCRIBER . equals ( annotationData . getAnnotationType ( ) ) ) . <nl> collect ( Collectors . toList ( ) ) ; <nl> <nl> ebsTargets . forEach ( ad - > { <nl> diff - - git a / src / main / java / net / minecraftforge / fml / javafmlmod / FMLModContainer . java b / src / main / java / net / minecraftforge / fml / javafmlmod / FMLModContainer . java <nl> index 5b7b0c3 . . 150f89f 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / javafmlmod / FMLModContainer . java <nl> + + + b / src / main / java / net / minecraftforge / fml / javafmlmod / FMLModContainer . java <nl> @ @ - 120 , 9 + 120 , 6 @ @ public class FMLModContainer extends ModContainer <nl> <nl> private void preinitMod ( LifecycleEventProvider . LifecycleEvent lifecycleEvent ) <nl> { <nl> - LOGGER . debug ( LOADING , " Injecting Automatic event subscribers for { } " , getModId ( ) ) ; <nl> - AutomaticEventSubscriber . inject ( this , this . scanResults , this . modClass . getClassLoader ( ) ) ; <nl> - LOGGER . debug ( LOADING , " Completed Automatic event subscribers for { } " , getModId ( ) ) ; <nl> } <nl> <nl> private void constructMod ( LifecycleEventProvider . LifecycleEvent event ) <nl> @ @ - 138 , 6 + 135 , 9 @ @ public class FMLModContainer extends ModContainer <nl> LOGGER . error ( LOADING , " Failed to create mod instance . ModID : { } , class { } " , getModId ( ) , modClass . getName ( ) , e ) ; <nl> throw new ModLoadingException ( modInfo , event . fromStage ( ) , " fml . modloading . failedtoloadmod " , e , modClass ) ; <nl> } <nl> + LOGGER . debug ( LOADING , " Injecting Automatic event subscribers for { } " , getModId ( ) ) ; <nl> + AutomaticEventSubscriber . inject ( this , this . scanResults , this . modClass . getClassLoader ( ) ) ; <nl> + LOGGER . debug ( LOADING , " Completed Automatic event subscribers for { } " , getModId ( ) ) ; <nl> } <nl> <nl> @ Override

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java b / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java 
 index 1f06449 . . 42823d7 100644 
 - - - a / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java 
 + + + b / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java 
 @ @ - 61 , 10 + 61 , 12 @ @ public class AutomaticEventSubscriber 
 final EnumSet < Dist > sides = sidesValue . stream ( ) . map ( eh - > Dist . valueOf ( eh . getValue ( ) ) ) . 
 collect ( Collectors . toCollection ( ( ) - > EnumSet . noneOf ( Dist . class ) ) ) ; 
 final String modId = ( String ) ad . getAnnotationData ( ) . getOrDefault ( " modid " , mod . getModId ( ) ) ; 
 - final Mod . EventBusSubscriber . Bus busTarget = ( Mod . EventBusSubscriber . Bus ) ad . getAnnotationData ( ) . getOrDefault ( " bus " , Mod . EventBusSubscriber . Bus . FORGE ) ; 
 + final ModAnnotation . EnumHolder busTargetHolder = ( ModAnnotation . EnumHolder ) ad . getAnnotationData ( ) . getOrDefault ( " bus " , new ModAnnotation . EnumHolder ( null , " FORGE " ) ) ; 
 + final Mod . EventBusSubscriber . Bus busTarget = Mod . EventBusSubscriber . Bus . valueOf ( busTargetHolder . getValue ( ) ) ; 
 if ( Objects . equals ( mod . getModId ( ) , modId ) & & sides . contains ( FMLEnvironment . dist ) ) { 
 try 
 { 
 + LOGGER . info ( LOADING , " Auto - subscribing { } to { } " , ad . getClassType ( ) . getClassName ( ) , busTarget ) ; 
 busTarget . bus ( ) . get ( ) . register ( Class . forName ( ad . getClassType ( ) . getClassName ( ) , true , loader ) ) ; 
 } 
 catch ( ClassNotFoundException e ) 
 diff - - git a / src / main / java / net / minecraftforge / registries / GameData . java b / src / main / java / net / minecraftforge / registries / GameData . java 
 index 8da094b . . 91b4d47 100644 
 - - - a / src / main / java / net / minecraftforge / registries / GameData . java 
 + + + b / src / main / java / net / minecraftforge / registries / GameData . java 
 @ @ - 806 , 7 + 806 , 8 @ @ public class GameData 
 reg . unfreeze ( ) ; 
 final RegistryEvent . Register < ? > registerEvent = reg . getRegisterEvent ( rl ) ; 
 lifecycleEventProvider . setCustomEventSupplier ( ( ) - > registerEvent ) ; 
 - if ( i = = keysSize - 1 ) lifecycleEventProvider . changeProgression ( LifecycleEventProvider . LifecycleEvent . Progression . NEXT ) ; 
 + lifecycleEventProvider . changeProgression ( LifecycleEventProvider . LifecycleEvent . Progression . STAY ) ; 
 + if ( i = = keysSize - 1 ) lifecycleEventProvider . changeProgression ( LifecycleEventProvider . LifecycleEvent . Progression . NEXT ) ; 
 eventDispatcher . accept ( lifecycleEventProvider ) ; 
 reg . freeze ( ) ; 
 LOGGER . info ( " { } Applying holder lookups " , rl . toString ( ) ) ;

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java b / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java 
 index 3967759 . . 2621914 100644 
 - - - a / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java 
 + + + b / src / main / java / net / minecraftforge / fml / AutomaticEventSubscriber . java 
 @ @ - 44 , 12 + 44 , 13 @ @ import static net . minecraftforge . fml . Logging . LOADING ; 
 public class AutomaticEventSubscriber 
 { 
 private static final Logger LOGGER = LogManager . getLogger ( ) ; 
 + private static final Type AUTO _ SUBSCRIBER = Type . getType ( Mod . EventBusSubscriber . class ) ; 
 public static void inject ( final ModContainer mod , final ModFileScanData scanData , final ClassLoader loader ) 
 { 
 if ( scanData = = null ) return ; 
 LOGGER . debug ( LOADING , " Attempting to inject @ EventBusSubscriber classes into the eventbus for { } " , mod . getModId ( ) ) ; 
 List < ModFileScanData . AnnotationData > ebsTargets = scanData . getAnnotations ( ) . stream ( ) . 
 - filter ( annotationData - > Objects . equals ( annotationData . getAnnotationType ( ) , Type . getType ( Mod . EventBusSubscriber . class ) ) ) . 
 + filter ( annotationData - > AUTO _ SUBSCRIBER . equals ( annotationData . getAnnotationType ( ) ) ) . 
 collect ( Collectors . toList ( ) ) ; 
 
 ebsTargets . forEach ( ad - > { 
 diff - - git a / src / main / java / net / minecraftforge / fml / javafmlmod / FMLModContainer . java b / src / main / java / net / minecraftforge / fml / javafmlmod / FMLModContainer . java 
 index 5b7b0c3 . . 150f89f 100644 
 - - - a / src / main / java / net / minecraftforge / fml / javafmlmod / FMLModContainer . java 
 + + + b / src / main / java / net / minecraftforge / fml / javafmlmod / FMLModContainer . java 
 @ @ - 120 , 9 + 120 , 6 @ @ public class FMLModContainer extends ModContainer 
 
 private void preinitMod ( LifecycleEventProvider . LifecycleEvent lifecycleEvent ) 
 { 
 - LOGGER . debug ( LOADING , " Injecting Automatic event subscribers for { } " , getModId ( ) ) ; 
 - AutomaticEventSubscriber . inject ( this , this . scanResults , this . modClass . getClassLoader ( ) ) ; 
 - LOGGER . debug ( LOADING , " Completed Automatic event subscribers for { } " , getModId ( ) ) ; 
 } 
 
 private void constructMod ( LifecycleEventProvider . LifecycleEvent event ) 
 @ @ - 138 , 6 + 135 , 9 @ @ public class FMLModContainer extends ModContainer 
 LOGGER . error ( LOADING , " Failed to create mod instance . ModID : { } , class { } " , getModId ( ) , modClass . getName ( ) , e ) ; 
 throw new ModLoadingException ( modInfo , event . fromStage ( ) , " fml . modloading . failedtoloadmod " , e , modClass ) ; 
 } 
 + LOGGER . debug ( LOADING , " Injecting Automatic event subscribers for { } " , getModId ( ) ) ; 
 + AutomaticEventSubscriber . inject ( this , this . scanResults , this . modClass . getClassLoader ( ) ) ; 
 + LOGGER . debug ( LOADING , " Completed Automatic event subscribers for { } " , getModId ( ) ) ; 
 } 
 
 @ Override
