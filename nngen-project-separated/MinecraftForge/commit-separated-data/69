BLEU SCORE: 0.0017824955768751362

TEST MSG: Add back missing ItemColors patch
GENERATED MSG: Fixed villager profession not being set correctly on the client , and fixed custom village texture rendering . Closes # 2766 .

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / renderer / color / ItemColors . java . patch b / patches / minecraft / net / minecraft / client / renderer / color / ItemColors . java . patch <nl> new file mode 100644 <nl> index 0000000 . . fe11892 <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / color / ItemColors . java . patch <nl> @ @ - 0 , 0 + 1 , 33 @ @ <nl> + - - - a / net / minecraft / client / renderer / color / ItemColors . java <nl> + + + + b / net / minecraft / client / renderer / color / ItemColors . java <nl> + @ @ - 22 , 7 + 22 , 8 @ @ <nl> + <nl> + @ OnlyIn ( Dist . CLIENT ) <nl> + public class ItemColors { <nl> + - private final ObjectIntIdentityMap < IItemColor > field _ 186732 _ a = new ObjectIntIdentityMap < > ( 32 ) ; <nl> + + / / FORGE : Use RegistryDelegates as non - Vanilla item ids are not constant <nl> + + private final java . util . Map < net . minecraftforge . registries . IRegistryDelegate < Item > , IItemColor > field _ 186732 _ a = new java . util . HashMap < > ( ) ; <nl> + <nl> + public static ItemColors func _ 186729 _ a ( BlockColors p _ 186729 _ 0 _ ) { <nl> + ItemColors itemcolors = new ItemColors ( ) ; <nl> + @ @ - 80 , 17 + 81 , 18 @ @ <nl> + itemcolors . func _ 199877 _ a ( ( p _ 210237 _ 0 _ , p _ 210237 _ 1 _ ) - > { <nl> + return p _ 210237 _ 1 _ = = 0 ? - 1 : ItemMap . func _ 190907 _ h ( p _ 210237 _ 0 _ ) ; <nl> + } , Items . field _ 151098 _ aY ) ; <nl> + + net . minecraftforge . client . ForgeHooksClient . onItemColorsInit ( itemcolors , p _ 186729 _ 0 _ ) ; <nl> + return itemcolors ; <nl> + } <nl> + <nl> + public int func _ 186728 _ a ( ItemStack p _ 186728 _ 1 _ , int p _ 186728 _ 2 _ ) { <nl> + - IItemColor iitemcolor = this . field _ 186732 _ a . func _ 148745 _ a ( IRegistry . field _ 212630 _ s . func _ 148757 _ b ( p _ 186728 _ 1 _ . func _ 77973 _ b ( ) ) ) ; <nl> + + IItemColor iitemcolor = this . field _ 186732 _ a . get ( p _ 186728 _ 1 _ . func _ 77973 _ b ( ) . delegate ) ; <nl> + return iitemcolor = = null ? - 1 : iitemcolor . getColor ( p _ 186728 _ 1 _ , p _ 186728 _ 2 _ ) ; <nl> + } <nl> + <nl> + public void func _ 199877 _ a ( IItemColor p _ 199877 _ 1 _ , IItemProvider . . . p _ 199877 _ 2 _ ) { <nl> + for ( IItemProvider iitemprovider : p _ 199877 _ 2 _ ) { <nl> + - this . field _ 186732 _ a . func _ 148746 _ a ( p _ 199877 _ 1 _ , Item . func _ 150891 _ b ( iitemprovider . func _ 199767 _ j ( ) ) ) ; <nl> + + this . field _ 186732 _ a . put ( iitemprovider . func _ 199767 _ j ( ) . delegate , p _ 199877 _ 1 _ ) ; <nl> + } <nl> + <nl> + }
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java . patch b / patches / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java . patch <nl> index 81ae520 . . 4b0720e 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java . patch <nl> @ @ - 1 , 11 + 1 , 25 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java <nl> - @ @ - 44 , 7 + 44 , 7 @ @ <nl> - case 4 : <nl> - return field _ 110906 _ m ; <nl> - default : <nl> + @ @ - 31 , 21 + 31 , 7 @ @ <nl> + <nl> + protected ResourceLocation func _ 110775 _ a ( EntityVillager p _ 110775 _ 1 _ ) <nl> + { <nl> + - switch ( p _ 110775 _ 1 _ . func _ 70946 _ n ( ) ) <nl> + - { <nl> + - case 0 : <nl> + - return field _ 110904 _ g ; <nl> + - case 1 : <nl> + - return field _ 110908 _ h ; <nl> + - case 2 : <nl> + - return field _ 110907 _ k ; <nl> + - case 3 : <nl> + - return field _ 110905 _ l ; <nl> + - case 4 : <nl> + - return field _ 110906 _ m ; <nl> + - default : <nl> - return field _ 110903 _ f ; <nl> - + return p _ 110775 _ 1 _ . getProfessionForge ( ) . getSkin ( ) ; <nl> - } <nl> + - } <nl> + + return p _ 110775 _ 1 _ . getProfessionForge ( ) . getSkin ( ) ; <nl> } <nl> <nl> + protected void func _ 77041 _ b ( EntityVillager p _ 77041 _ 1 _ , float p _ 77041 _ 2 _ ) <nl> diff - - git a / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch b / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch <nl> index 54cc5b1 . . f6a41fe 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch <nl> @ @ - 63 , 7 + 63 , 7 @ @ <nl> } <nl> <nl> public int func _ 70946 _ n ( ) <nl> - @ @ - 334 , 6 + 347 , 27 @ @ <nl> + @ @ - 334 , 6 + 347 , 39 @ @ <nl> return Math . max ( ( ( Integer ) this . field _ 70180 _ af . func _ 187225 _ a ( field _ 184752 _ bw ) ) . intValue ( ) % 5 , 0 ) ; <nl> } <nl> <nl> @ @ - 88 , 10 + 88 , 22 @ @ <nl> + return this . prof ; <nl> + } <nl> + <nl> + + @ Override <nl> + + public void func _ 184206 _ a ( DataParameter < ? > key ) <nl> + + { <nl> + + super . func _ 184206 _ a ( key ) ; <nl> + + if ( key = = PROFESSION _ STR ) <nl> + + { <nl> + + String p = this . field _ 70180 _ af . func _ 187225 _ a ( PROFESSION _ STR ) ; <nl> + + net . minecraft . util . ResourceLocation res = new net . minecraft . util . ResourceLocation ( p = = null ? " minecraft : farmer " : p ) ; <nl> + + this . prof = net . minecraftforge . fml . common . registry . VillagerRegistry . instance ( ) . getRegistry ( ) . getValue ( res ) ; <nl> + + } <nl> + + } <nl> + + <nl> public boolean func _ 70941 _ o ( ) <nl> { <nl> return this . field _ 70952 _ f ; <nl> - @ @ - 533 , 15 + 567 , 13 @ @ <nl> + @ @ - 533 , 15 + 579 , 13 @ @ <nl> <nl> private void func _ 175554 _ cu ( ) <nl> { <nl> @ @ - 108 , 7 + 120 , 7 @ @ <nl> this . field _ 175562 _ bw = 1 ; <nl> } <nl> <nl> - @ @ - 552 , 7 + 584 , 7 @ @ <nl> + @ @ - 552 , 7 + 596 , 7 @ @ <nl> <nl> int i = this . field _ 175563 _ bv - 1 ; <nl> int j = this . field _ 175562 _ bw - 1 ; <nl> @ @ - 117 , 7 + 129 , 7 @ @ <nl> <nl> if ( j > = 0 & & j < aentityvillager $ itradelist1 . length ) <nl> { <nl> - @ @ - 647 , 9 + 679 , 14 @ @ <nl> + @ @ - 647 , 9 + 691 , 14 @ @ <nl> } <nl> } <nl> <nl> @ @ - 133 , 7 + 145 , 7 @ @ <nl> textcomponenttranslation . func _ 150256 _ b ( ) . func _ 150209 _ a ( this . func _ 174823 _ aP ( ) ) ; <nl> textcomponenttranslation . func _ 150256 _ b ( ) . func _ 179989 _ a ( this . func _ 110124 _ au ( ) . toString ( ) ) ; <nl> <nl> - @ @ - 708 , 7 + 745 , 7 @ @ <nl> + @ @ - 708 , 7 + 757 , 7 @ @ <nl> public IEntityLivingData func _ 180482 _ a ( DifficultyInstance p _ 180482 _ 1 _ , IEntityLivingData p _ 180482 _ 2 _ ) <nl> { <nl> p _ 180482 _ 2 _ = super . func _ 180482 _ a ( p _ 180482 _ 1 _ , p _ 180482 _ 2 _ ) ;

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / renderer / color / ItemColors . java . patch b / patches / minecraft / net / minecraft / client / renderer / color / ItemColors . java . patch 
 new file mode 100644 
 index 0000000 . . fe11892 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / client / renderer / color / ItemColors . java . patch 
 @ @ - 0 , 0 + 1 , 33 @ @ 
 + - - - a / net / minecraft / client / renderer / color / ItemColors . java 
 + + + + b / net / minecraft / client / renderer / color / ItemColors . java 
 + @ @ - 22 , 7 + 22 , 8 @ @ 
 + 
 + @ OnlyIn ( Dist . CLIENT ) 
 + public class ItemColors { 
 + - private final ObjectIntIdentityMap < IItemColor > field _ 186732 _ a = new ObjectIntIdentityMap < > ( 32 ) ; 
 + + / / FORGE : Use RegistryDelegates as non - Vanilla item ids are not constant 
 + + private final java . util . Map < net . minecraftforge . registries . IRegistryDelegate < Item > , IItemColor > field _ 186732 _ a = new java . util . HashMap < > ( ) ; 
 + 
 + public static ItemColors func _ 186729 _ a ( BlockColors p _ 186729 _ 0 _ ) { 
 + ItemColors itemcolors = new ItemColors ( ) ; 
 + @ @ - 80 , 17 + 81 , 18 @ @ 
 + itemcolors . func _ 199877 _ a ( ( p _ 210237 _ 0 _ , p _ 210237 _ 1 _ ) - > { 
 + return p _ 210237 _ 1 _ = = 0 ? - 1 : ItemMap . func _ 190907 _ h ( p _ 210237 _ 0 _ ) ; 
 + } , Items . field _ 151098 _ aY ) ; 
 + + net . minecraftforge . client . ForgeHooksClient . onItemColorsInit ( itemcolors , p _ 186729 _ 0 _ ) ; 
 + return itemcolors ; 
 + } 
 + 
 + public int func _ 186728 _ a ( ItemStack p _ 186728 _ 1 _ , int p _ 186728 _ 2 _ ) { 
 + - IItemColor iitemcolor = this . field _ 186732 _ a . func _ 148745 _ a ( IRegistry . field _ 212630 _ s . func _ 148757 _ b ( p _ 186728 _ 1 _ . func _ 77973 _ b ( ) ) ) ; 
 + + IItemColor iitemcolor = this . field _ 186732 _ a . get ( p _ 186728 _ 1 _ . func _ 77973 _ b ( ) . delegate ) ; 
 + return iitemcolor = = null ? - 1 : iitemcolor . getColor ( p _ 186728 _ 1 _ , p _ 186728 _ 2 _ ) ; 
 + } 
 + 
 + public void func _ 199877 _ a ( IItemColor p _ 199877 _ 1 _ , IItemProvider . . . p _ 199877 _ 2 _ ) { 
 + for ( IItemProvider iitemprovider : p _ 199877 _ 2 _ ) { 
 + - this . field _ 186732 _ a . func _ 148746 _ a ( p _ 199877 _ 1 _ , Item . func _ 150891 _ b ( iitemprovider . func _ 199767 _ j ( ) ) ) ; 
 + + this . field _ 186732 _ a . put ( iitemprovider . func _ 199767 _ j ( ) . delegate , p _ 199877 _ 1 _ ) ; 
 + } 
 + 
 + }

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java . patch b / patches / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java . patch 
 index 81ae520 . . 4b0720e 100644 
 - - - a / patches / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java . patch 
 @ @ - 1 , 11 + 1 , 25 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java 
 + + + . . / src - work / minecraft / net / minecraft / client / renderer / entity / RenderVillager . java 
 - @ @ - 44 , 7 + 44 , 7 @ @ 
 - case 4 : 
 - return field _ 110906 _ m ; 
 - default : 
 + @ @ - 31 , 21 + 31 , 7 @ @ 
 + 
 + protected ResourceLocation func _ 110775 _ a ( EntityVillager p _ 110775 _ 1 _ ) 
 + { 
 + - switch ( p _ 110775 _ 1 _ . func _ 70946 _ n ( ) ) 
 + - { 
 + - case 0 : 
 + - return field _ 110904 _ g ; 
 + - case 1 : 
 + - return field _ 110908 _ h ; 
 + - case 2 : 
 + - return field _ 110907 _ k ; 
 + - case 3 : 
 + - return field _ 110905 _ l ; 
 + - case 4 : 
 + - return field _ 110906 _ m ; 
 + - default : 
 - return field _ 110903 _ f ; 
 - + return p _ 110775 _ 1 _ . getProfessionForge ( ) . getSkin ( ) ; 
 - } 
 + - } 
 + + return p _ 110775 _ 1 _ . getProfessionForge ( ) . getSkin ( ) ; 
 } 
 
 + protected void func _ 77041 _ b ( EntityVillager p _ 77041 _ 1 _ , float p _ 77041 _ 2 _ ) 
 diff - - git a / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch b / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch 
 index 54cc5b1 . . f6a41fe 100644 
 - - - a / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch 
 @ @ - 63 , 7 + 63 , 7 @ @ 
 } 
 
 public int func _ 70946 _ n ( ) 
 - @ @ - 334 , 6 + 347 , 27 @ @ 
 + @ @ - 334 , 6 + 347 , 39 @ @ 
 return Math . max ( ( ( Integer ) this . field _ 70180 _ af . func _ 187225 _ a ( field _ 184752 _ bw ) ) . intValue ( ) % 5 , 0 ) ; 
 } 
 
 @ @ - 88 , 10 + 88 , 22 @ @ 
 + return this . prof ; 
 + } 
 + 
 + + @ Override 
 + + public void func _ 184206 _ a ( DataParameter < ? > key ) 
 + + { 
 + + super . func _ 184206 _ a ( key ) ; 
 + + if ( key = = PROFESSION _ STR ) 
 + + { 
 + + String p = this . field _ 70180 _ af . func _ 187225 _ a ( PROFESSION _ STR ) ; 
 + + net . minecraft . util . ResourceLocation res = new net . minecraft . util . ResourceLocation ( p = = null ? " minecraft : farmer " : p ) ; 
 + + this . prof = net . minecraftforge . fml . common . registry . VillagerRegistry . instance ( ) . getRegistry ( ) . getValue ( res ) ; 
 + + } 
 + + } 
 + + 
 public boolean func _ 70941 _ o ( ) 
 { 
 return this . field _ 70952 _ f ; 
 - @ @ - 533 , 15 + 567 , 13 @ @ 
 + @ @ - 533 , 15 + 579 , 13 @ @ 
 
 private void func _ 175554 _ cu ( ) 
 { 
 @ @ - 108 , 7 + 120 , 7 @ @ 
 this . field _ 175562 _ bw = 1 ; 
 } 
 
 - @ @ - 552 , 7 + 584 , 7 @ @ 
 + @ @ - 552 , 7 + 596 , 7 @ @ 
 
 int i = this . field _ 175563 _ bv - 1 ; 
 int j = this . field _ 175562 _ bw - 1 ; 
 @ @ - 117 , 7 + 129 , 7 @ @ 
 
 if ( j > = 0 & & j < aentityvillager $ itradelist1 . length ) 
 { 
 - @ @ - 647 , 9 + 679 , 14 @ @ 
 + @ @ - 647 , 9 + 691 , 14 @ @ 
 } 
 } 
 
 @ @ - 133 , 7 + 145 , 7 @ @ 
 textcomponenttranslation . func _ 150256 _ b ( ) . func _ 150209 _ a ( this . func _ 174823 _ aP ( ) ) ; 
 textcomponenttranslation . func _ 150256 _ b ( ) . func _ 179989 _ a ( this . func _ 110124 _ au ( ) . toString ( ) ) ; 
 
 - @ @ - 708 , 7 + 745 , 7 @ @ 
 + @ @ - 708 , 7 + 757 , 7 @ @ 
 public IEntityLivingData func _ 180482 _ a ( DifficultyInstance p _ 180482 _ 1 _ , IEntityLivingData p _ 180482 _ 2 _ ) 
 { 
 p _ 180482 _ 2 _ = super . func _ 180482 _ a ( p _ 180482 _ 1 _ , p _ 180482 _ 2 _ ) ;
