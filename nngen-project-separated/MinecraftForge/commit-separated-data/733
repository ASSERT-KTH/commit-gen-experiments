BLEU SCORE: 0.011894251924133204

TEST MSG: Fix some plain keybinds not working when a modifier is active
GENERATED MSG: made renderLayer ThreadLocal , now it should hold correct value for use inside custom baked models

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / client / settings / KeyBindingMap . java b / src / main / java / net / minecraftforge / client / settings / KeyBindingMap . java <nl> index b50af08 . . bdf84be 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / settings / KeyBindingMap . java <nl> + + + b / src / main / java / net / minecraftforge / client / settings / KeyBindingMap . java <nl> @ @ - 22 , 11 + 22 , 15 @ @ public class KeyBindingMap <nl> public KeyBinding lookupActive ( int keyCode ) <nl> { <nl> KeyModifier activeModifier = KeyModifier . getActiveModifier ( ) ; <nl> - if ( activeModifier . matches ( keyCode ) ) <nl> + if ( ! activeModifier . matches ( keyCode ) ) <nl> { <nl> - activeModifier = KeyModifier . NONE ; <nl> + KeyBinding binding = getBinding ( keyCode , activeModifier ) ; <nl> + if ( binding ! = null ) <nl> + { <nl> + return binding ; <nl> + } <nl> } <nl> - return getBinding ( keyCode , activeModifier ) ; <nl> + return getBinding ( keyCode , KeyModifier . NONE ) ; <nl> } <nl> <nl> private KeyBinding getBinding ( int keyCode , KeyModifier keyModifier )
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> index 2407f52 . . 971b167 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> + + + b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java <nl> @ @ - 295 , 10 + 295 , 17 @ @ public class ForgeHooksClient <nl> renderPass = pass ; <nl> } <nl> <nl> - static EnumWorldBlockLayer renderLayer = EnumWorldBlockLayer . SOLID ; <nl> + static final ThreadLocal < EnumWorldBlockLayer > renderLayer = new ThreadLocal < EnumWorldBlockLayer > ( ) <nl> + { <nl> + protected EnumWorldBlockLayer initialValue ( ) <nl> + { <nl> + return EnumWorldBlockLayer . SOLID ; <nl> + } <nl> + } ; <nl> + <nl> public static void setRenderLayer ( EnumWorldBlockLayer layer ) <nl> { <nl> - renderLayer = layer ; <nl> + renderLayer . set ( layer ) ; <nl> } <nl> <nl> public static ModelBase getArmorModel ( EntityLivingBase entityLiving , ItemStack itemStack , int slotID , ModelBase _ default ) <nl> diff - - git a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> index 39afb26 . . ae5194e 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> + + + b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java <nl> @ @ - 49 , 7 + 49 , 7 @ @ public class MinecraftForgeClient <nl> <nl> public static EnumWorldBlockLayer getRenderLayer ( ) <nl> { <nl> - return ForgeHooksClient . renderLayer ; <nl> + return ForgeHooksClient . renderLayer . get ( ) ; <nl> } <nl> <nl> private static BitSet stencilBits = new BitSet ( 8 ) ;

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / client / settings / KeyBindingMap . java b / src / main / java / net / minecraftforge / client / settings / KeyBindingMap . java 
 index b50af08 . . bdf84be 100644 
 - - - a / src / main / java / net / minecraftforge / client / settings / KeyBindingMap . java 
 + + + b / src / main / java / net / minecraftforge / client / settings / KeyBindingMap . java 
 @ @ - 22 , 11 + 22 , 15 @ @ public class KeyBindingMap 
 public KeyBinding lookupActive ( int keyCode ) 
 { 
 KeyModifier activeModifier = KeyModifier . getActiveModifier ( ) ; 
 - if ( activeModifier . matches ( keyCode ) ) 
 + if ( ! activeModifier . matches ( keyCode ) ) 
 { 
 - activeModifier = KeyModifier . NONE ; 
 + KeyBinding binding = getBinding ( keyCode , activeModifier ) ; 
 + if ( binding ! = null ) 
 + { 
 + return binding ; 
 + } 
 } 
 - return getBinding ( keyCode , activeModifier ) ; 
 + return getBinding ( keyCode , KeyModifier . NONE ) ; 
 } 
 
 private KeyBinding getBinding ( int keyCode , KeyModifier keyModifier )

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 index 2407f52 . . 971b167 100644 
 - - - a / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 + + + b / src / main / java / net / minecraftforge / client / ForgeHooksClient . java 
 @ @ - 295 , 10 + 295 , 17 @ @ public class ForgeHooksClient 
 renderPass = pass ; 
 } 
 
 - static EnumWorldBlockLayer renderLayer = EnumWorldBlockLayer . SOLID ; 
 + static final ThreadLocal < EnumWorldBlockLayer > renderLayer = new ThreadLocal < EnumWorldBlockLayer > ( ) 
 + { 
 + protected EnumWorldBlockLayer initialValue ( ) 
 + { 
 + return EnumWorldBlockLayer . SOLID ; 
 + } 
 + } ; 
 + 
 public static void setRenderLayer ( EnumWorldBlockLayer layer ) 
 { 
 - renderLayer = layer ; 
 + renderLayer . set ( layer ) ; 
 } 
 
 public static ModelBase getArmorModel ( EntityLivingBase entityLiving , ItemStack itemStack , int slotID , ModelBase _ default ) 
 diff - - git a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 index 39afb26 . . ae5194e 100644 
 - - - a / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 + + + b / src / main / java / net / minecraftforge / client / MinecraftForgeClient . java 
 @ @ - 49 , 7 + 49 , 7 @ @ public class MinecraftForgeClient 
 
 public static EnumWorldBlockLayer getRenderLayer ( ) 
 { 
 - return ForgeHooksClient . renderLayer ; 
 + return ForgeHooksClient . renderLayer . get ( ) ; 
 } 
 
 private static BitSet stencilBits = new BitSet ( 8 ) ;
