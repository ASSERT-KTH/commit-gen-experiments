BLEU SCORE: 0.037477767366779206

TEST MSG: Fix Deobfusication transformer throwing verification errores in Eclipse development environments .
GENERATED MSG: Try and fix registry NPE when substitution is active .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / asm / transformers / DeobfuscationTransformer . java b / src / main / java / net / minecraftforge / fml / common / asm / transformers / DeobfuscationTransformer . java <nl> index aecd94d . . e88fabf 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / asm / transformers / DeobfuscationTransformer . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / asm / transformers / DeobfuscationTransformer . java <nl> @ @ - 23 , 6 + 23 , 14 @ @ import org . objectweb . asm . commons . RemappingClassAdapter ; <nl> <nl> public class DeobfuscationTransformer implements IClassTransformer , IClassNameTransformer { <nl> <nl> + private static final boolean RECALC _ FRAMES = Boolean . parseBoolean ( System . getProperty ( " FORGE _ FORCE _ FRAME _ RECALC " , " false " ) ) ; <nl> + private static final int WRITER _ FLAGS = ClassWriter . COMPUTE _ MAXS | ( RECALC _ FRAMES ? ClassWriter . COMPUTE _ FRAMES : 0 ) ; <nl> + private static final int READER _ FLAGS = RECALC _ FRAMES ? ClassReader . SKIP _ FRAMES : ClassReader . EXPAND _ FRAMES ; <nl> + / / COMPUTE _ FRAMES causes classes to be loaded , which could cause issues if the classes do not exist . <nl> + / / However in testing this has not happened . { As we run post SideTransfromer } <nl> + / / If reported we need to add a custom implementation of ClassWriter . getCommonSuperClass <nl> + / / that does not cause class loading . <nl> + <nl> @ Override <nl> public byte [ ] transform ( String name , String transformedName , byte [ ] bytes ) <nl> { <nl> @ @ - 31 , 9 + 39 , 9 @ @ public class DeobfuscationTransformer implements IClassTransformer , IClassNameTr <nl> return null ; <nl> } <nl> ClassReader classReader = new ClassReader ( bytes ) ; <nl> - ClassWriter classWriter = new ClassWriter ( ClassWriter . COMPUTE _ MAXS ) ; <nl> + ClassWriter classWriter = new ClassWriter ( WRITER _ FLAGS ) ; <nl> RemappingClassAdapter remapAdapter = new FMLRemappingAdapter ( classWriter ) ; <nl> - classReader . accept ( remapAdapter , ClassReader . EXPAND _ FRAMES ) ; <nl> + classReader . accept ( remapAdapter , READER _ FLAGS ) ; <nl> return classWriter . toByteArray ( ) ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / launcher / FMLDeobfTweaker . java b / src / main / java / net / minecraftforge / fml / common / launcher / FMLDeobfTweaker . java <nl> index ee5ec9d . . 09dc9ee 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / launcher / FMLDeobfTweaker . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / launcher / FMLDeobfTweaker . java <nl> @ @ - 5 , 7 + 5 , 6 @ @ import java . lang . reflect . Method ; <nl> import java . util . List ; <nl> <nl> import net . minecraft . launchwrapper . ITweaker ; <nl> - import net . minecraft . launchwrapper . Launch ; <nl> import net . minecraft . launchwrapper . LaunchClassLoader ; <nl> import net . minecraftforge . fml . relauncher . CoreModManager ; <nl> import net . minecraftforge . fml . relauncher . FMLInjectionData ;
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> index 0cdd305 . . 607ac29 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> @ @ - 718 , 7 + 718 , 7 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul <nl> blockedIds . add ( id ) ; <nl> } <nl> <nl> - public void noitifyCallbacks ( ) <nl> + public void notifyCallbacks ( ) <nl> { <nl> if ( addCallback = = null ) <nl> return ; <nl> @ @ - 728 , 4 + 728 , 15 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul <nl> addCallback . onAdd ( i , this . underlyingIntegerMap . get ( i ) ) ; <nl> } <nl> } <nl> + <nl> + @ Override <nl> + public ResourceLocation getNameForObject ( I p _ 177774 _ 1 _ ) <nl> + { <nl> + ResourceLocation rl = super . getNameForObject ( p _ 177774 _ 1 _ ) ; <nl> + if ( rl = = null ) <nl> + { <nl> + rl = activeSubstitutions . inverse ( ) . get ( p _ 177774 _ 1 _ ) ; <nl> + } <nl> + return rl ; <nl> + } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java b / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java <nl> index 723bb55 . . 6071989 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java <nl> @ @ - 23 , 7 + 23 , 6 @ @ import org . apache . logging . log4j . Level ; <nl> <nl> import net . minecraft . block . Block ; <nl> import net . minecraft . block . BlockAir ; <nl> - import net . minecraft . init . Blocks ; <nl> import net . minecraft . item . Item ; <nl> import net . minecraft . potion . Potion ; <nl> import net . minecraft . util . ResourceLocation ; <nl> @ @ - 33 , 7 + 32 , 6 @ @ import net . minecraftforge . fml . common . FMLLog ; <nl> import net . minecraftforge . fml . common . Loader ; <nl> import net . minecraftforge . fml . common . StartupQuery ; <nl> import net . minecraftforge . fml . common . ZipperUtil ; <nl> - import net . minecraftforge . fml . common . EnhancedRuntimeException . WrappedPrintStream ; <nl> import net . minecraftforge . fml . common . event . FMLMissingMappingsEvent ; <nl> <nl> / * * <nl> @ @ - 257 , 7 + 255 , 7 @ @ public class PersistentRegistryManager <nl> / / This happens when connecting to a server that doesn ' t have this registry . <nl> / / Such as a 1 . 8 . 0 Forge server with 1 . 8 . 8 + Forge . <nl> / / We must however , re - fire the callbacks as some internal data may be corrupted { potions } <nl> - toRegistry . noitifyCallbacks ( ) ; <nl> + toRegistry . notifyCallbacks ( ) ; <nl> } <nl> else <nl> {

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / asm / transformers / DeobfuscationTransformer . java b / src / main / java / net / minecraftforge / fml / common / asm / transformers / DeobfuscationTransformer . java 
 index aecd94d . . e88fabf 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / asm / transformers / DeobfuscationTransformer . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / asm / transformers / DeobfuscationTransformer . java 
 @ @ - 23 , 6 + 23 , 14 @ @ import org . objectweb . asm . commons . RemappingClassAdapter ; 
 
 public class DeobfuscationTransformer implements IClassTransformer , IClassNameTransformer { 
 
 + private static final boolean RECALC _ FRAMES = Boolean . parseBoolean ( System . getProperty ( " FORGE _ FORCE _ FRAME _ RECALC " , " false " ) ) ; 
 + private static final int WRITER _ FLAGS = ClassWriter . COMPUTE _ MAXS | ( RECALC _ FRAMES ? ClassWriter . COMPUTE _ FRAMES : 0 ) ; 
 + private static final int READER _ FLAGS = RECALC _ FRAMES ? ClassReader . SKIP _ FRAMES : ClassReader . EXPAND _ FRAMES ; 
 + / / COMPUTE _ FRAMES causes classes to be loaded , which could cause issues if the classes do not exist . 
 + / / However in testing this has not happened . { As we run post SideTransfromer } 
 + / / If reported we need to add a custom implementation of ClassWriter . getCommonSuperClass 
 + / / that does not cause class loading . 
 + 
 @ Override 
 public byte [ ] transform ( String name , String transformedName , byte [ ] bytes ) 
 { 
 @ @ - 31 , 9 + 39 , 9 @ @ public class DeobfuscationTransformer implements IClassTransformer , IClassNameTr 
 return null ; 
 } 
 ClassReader classReader = new ClassReader ( bytes ) ; 
 - ClassWriter classWriter = new ClassWriter ( ClassWriter . COMPUTE _ MAXS ) ; 
 + ClassWriter classWriter = new ClassWriter ( WRITER _ FLAGS ) ; 
 RemappingClassAdapter remapAdapter = new FMLRemappingAdapter ( classWriter ) ; 
 - classReader . accept ( remapAdapter , ClassReader . EXPAND _ FRAMES ) ; 
 + classReader . accept ( remapAdapter , READER _ FLAGS ) ; 
 return classWriter . toByteArray ( ) ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / launcher / FMLDeobfTweaker . java b / src / main / java / net / minecraftforge / fml / common / launcher / FMLDeobfTweaker . java 
 index ee5ec9d . . 09dc9ee 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / launcher / FMLDeobfTweaker . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / launcher / FMLDeobfTweaker . java 
 @ @ - 5 , 7 + 5 , 6 @ @ import java . lang . reflect . Method ; 
 import java . util . List ; 
 
 import net . minecraft . launchwrapper . ITweaker ; 
 - import net . minecraft . launchwrapper . Launch ; 
 import net . minecraft . launchwrapper . LaunchClassLoader ; 
 import net . minecraftforge . fml . relauncher . CoreModManager ; 
 import net . minecraftforge . fml . relauncher . FMLInjectionData ;

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 index 0cdd305 . . 607ac29 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 @ @ - 718 , 7 + 718 , 7 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul 
 blockedIds . add ( id ) ; 
 } 
 
 - public void noitifyCallbacks ( ) 
 + public void notifyCallbacks ( ) 
 { 
 if ( addCallback = = null ) 
 return ; 
 @ @ - 728 , 4 + 728 , 15 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul 
 addCallback . onAdd ( i , this . underlyingIntegerMap . get ( i ) ) ; 
 } 
 } 
 + 
 + @ Override 
 + public ResourceLocation getNameForObject ( I p _ 177774 _ 1 _ ) 
 + { 
 + ResourceLocation rl = super . getNameForObject ( p _ 177774 _ 1 _ ) ; 
 + if ( rl = = null ) 
 + { 
 + rl = activeSubstitutions . inverse ( ) . get ( p _ 177774 _ 1 _ ) ; 
 + } 
 + return rl ; 
 + } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java b / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java 
 index 723bb55 . . 6071989 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / PersistentRegistryManager . java 
 @ @ - 23 , 7 + 23 , 6 @ @ import org . apache . logging . log4j . Level ; 
 
 import net . minecraft . block . Block ; 
 import net . minecraft . block . BlockAir ; 
 - import net . minecraft . init . Blocks ; 
 import net . minecraft . item . Item ; 
 import net . minecraft . potion . Potion ; 
 import net . minecraft . util . ResourceLocation ; 
 @ @ - 33 , 7 + 32 , 6 @ @ import net . minecraftforge . fml . common . FMLLog ; 
 import net . minecraftforge . fml . common . Loader ; 
 import net . minecraftforge . fml . common . StartupQuery ; 
 import net . minecraftforge . fml . common . ZipperUtil ; 
 - import net . minecraftforge . fml . common . EnhancedRuntimeException . WrappedPrintStream ; 
 import net . minecraftforge . fml . common . event . FMLMissingMappingsEvent ; 
 
 / * * 
 @ @ - 257 , 7 + 255 , 7 @ @ public class PersistentRegistryManager 
 / / This happens when connecting to a server that doesn ' t have this registry . 
 / / Such as a 1 . 8 . 0 Forge server with 1 . 8 . 8 + Forge . 
 / / We must however , re - fire the callbacks as some internal data may be corrupted { potions } 
 - toRegistry . noitifyCallbacks ( ) ; 
 + toRegistry . notifyCallbacks ( ) ; 
 } 
 else 
 {
