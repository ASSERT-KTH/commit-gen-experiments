BLEU SCORE: 0.018977423949228533

TEST MSG: Fixed NPE when sneak using a item .
GENERATED MSG: Add in null protection for client / server sides of handleChat

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / multiplayer / PlayerControllerMP . java . patch b / patches / minecraft / net / minecraft / client / multiplayer / PlayerControllerMP . java . patch <nl> index 8cc02cf . . e28a1fd 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / multiplayer / PlayerControllerMP . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / multiplayer / PlayerControllerMP . java . patch <nl> @ @ - 50 , 7 + 50 , 7 @ @ <nl> return flag ; <nl> } <nl> } <nl> - @ @ - 373 , 11 + 379 , 15 @ @ <nl> + @ @ - 373 , 11 + 379 , 18 @ @ <nl> { <nl> if ( this . field _ 78779 _ k ! = WorldSettings . GameType . SPECTATOR ) <nl> { <nl> @ @ - 59 , 16 + 59 , 19 @ @ <nl> + if ( ret ! = EnumActionResult . PASS ) return ret ; <nl> + <nl> IBlockState iblockstate = p _ 187099 _ 2 _ . func _ 180495 _ p ( p _ 187099 _ 4 _ ) ; <nl> + + boolean bypass = true ; <nl> + + for ( ItemStack s : new ItemStack [ ] { p _ 187099 _ 1 _ . func _ 184614 _ ca ( ) , p _ 187099 _ 1 _ . func _ 184592 _ cb ( ) } ) / / TODO : Expand to more hands ? player . inv . getHands ( ) ? <nl> + + bypass = bypass & & ( s = = null | | s . func _ 77973 _ b ( ) . doesSneakBypassUse ( s , p _ 187099 _ 2 _ , p _ 187099 _ 4 _ , p _ 187099 _ 1 _ ) ) ; <nl> <nl> - if ( ( ! p _ 187099 _ 1 _ . func _ 70093 _ af ( ) | | p _ 187099 _ 1 _ . func _ 184614 _ ca ( ) = = null & & p _ 187099 _ 1 _ . func _ 184592 _ cb ( ) = = null ) & & iblockstate . func _ 177230 _ c ( ) . func _ 180639 _ a ( p _ 187099 _ 2 _ , p _ 187099 _ 4 _ , iblockstate , p _ 187099 _ 1 _ , p _ 187099 _ 7 _ , p _ 187099 _ 3 _ , p _ 187099 _ 5 _ , f , f1 , f2 ) ) <nl> - + if ( ( ! p _ 187099 _ 1 _ . func _ 70093 _ af ( ) | | ( p _ 187099 _ 1 _ . func _ 184614 _ ca ( ) = = null | | item . doesSneakBypassUse ( p _ 187099 _ 3 _ , p _ 187099 _ 2 _ , p _ 187099 _ 4 _ , p _ 187099 _ 1 _ ) ) & & p _ 187099 _ 1 _ . func _ 184592 _ cb ( ) = = null ) ) <nl> + + if ( ! p _ 187099 _ 1 _ . func _ 70093 _ af ( ) | | bypass ) <nl> { <nl> - flag = true ; <nl> + flag = iblockstate . func _ 177230 _ c ( ) . func _ 180639 _ a ( p _ 187099 _ 2 _ , p _ 187099 _ 4 _ , iblockstate , p _ 187099 _ 1 _ , p _ 187099 _ 7 _ , p _ 187099 _ 3 _ , p _ 187099 _ 5 _ , f , f1 , f2 ) ; <nl> } <nl> <nl> if ( ! flag & & p _ 187099 _ 3 _ ! = null & & p _ 187099 _ 3 _ . func _ 77973 _ b ( ) instanceof ItemBlock ) <nl> - @ @ - 418 , 7 + 428 , 9 @ @ <nl> + @ @ - 418 , 7 + 431 , 9 @ @ <nl> } <nl> else <nl> { <nl> @ @ - 79 , 7 + 82 , 7 @ @ <nl> } <nl> } <nl> else <nl> - @ @ - 453 , 9 + 465 , 10 @ @ <nl> + @ @ - 453 , 9 + 468 , 10 @ @ <nl> { <nl> p _ 187101 _ 1 _ . func _ 184611 _ a ( p _ 187101 _ 4 _ , itemstack ) ; <nl>
NEAREST DIFF (one line): diff - - git a / fml / patches / minecraft / net / minecraft / client / multiplayer / NetClientHandler . java . patch b / fml / patches / minecraft / net / minecraft / client / multiplayer / NetClientHandler . java . patch <nl> index 22f11c6 . . 4e66d9b 100644 <nl> - - - a / fml / patches / minecraft / net / minecraft / client / multiplayer / NetClientHandler . java . patch <nl> + + + b / fml / patches / minecraft / net / minecraft / client / multiplayer / NetClientHandler . java . patch <nl> @ @ - 64 , 15 + 64 , 19 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 804 , 6 + 814 , 7 @ @ <nl> + @ @ - 804 , 7 + 814 , 11 @ @ <nl> <nl> public void func _ 72481 _ a ( Packet3Chat p _ 72481 _ 1 _ ) <nl> { <nl> + p _ 72481 _ 1 _ = FMLNetworkHandler . handleChatMessage ( this , p _ 72481 _ 1 _ ) ; <nl> + + if ( p _ 72481 _ 1 _ ! = null ) <nl> + + { <nl> this . field _ 72563 _ h . field _ 71456 _ v . func _ 73827 _ b ( ) . func _ 73765 _ a ( ChatMessageComponent . func _ 111078 _ c ( p _ 72481 _ 1 _ . field _ 73476 _ b ) . func _ 111068 _ a ( true ) ) ; <nl> + + } <nl> } <nl> <nl> - @ @ - 1403 , 6 + 1414 , 11 @ @ <nl> + public void func _ 72524 _ a ( Packet18Animation p _ 72524 _ 1 _ ) <nl> + @ @ - 1403 , 6 + 1417 , 11 @ @ <nl> <nl> public void func _ 72494 _ a ( Packet131MapData p _ 72494 _ 1 _ ) <nl> { <nl> @ @ - 84 , 7 + 88 , 7 @ @ <nl> if ( p _ 72494 _ 1 _ . field _ 73438 _ a = = Item . field _ 77744 _ bd . field _ 77779 _ bT ) <nl> { <nl> ItemMap . func _ 77874 _ a ( p _ 72494 _ 1 _ . field _ 73436 _ b , this . field _ 72563 _ h . field _ 71441 _ e ) . func _ 76192 _ a ( p _ 72494 _ 1 _ . field _ 73437 _ c ) ; <nl> - @ @ - 1514 , 6 + 1530 , 11 @ @ <nl> + @ @ - 1514 , 6 + 1533 , 11 @ @ <nl> <nl> public void func _ 72501 _ a ( Packet250CustomPayload p _ 72501 _ 1 _ ) <nl> { <nl> @ @ - 96 , 7 + 100 , 7 @ @ <nl> if ( " MC | TrList " . equals ( p _ 72501 _ 1 _ . field _ 73630 _ a ) ) <nl> { <nl> DataInputStream datainputstream = new DataInputStream ( new ByteArrayInputStream ( p _ 72501 _ 1 _ . field _ 73629 _ c ) ) ; <nl> - @ @ - 1707 , 4 + 1728 , 20 @ @ <nl> + @ @ - 1707 , 4 + 1731 , 20 @ @ <nl> { <nl> return this . field _ 72555 _ g ; <nl> } <nl> diff - - git a / fml / patches / minecraft / net / minecraft / network / NetServerHandler . java . patch b / fml / patches / minecraft / net / minecraft / network / NetServerHandler . java . patch <nl> index f3bef7a . . b977a96 100644 <nl> - - - a / fml / patches / minecraft / net / minecraft / network / NetServerHandler . java . patch <nl> + + + b / fml / patches / minecraft / net / minecraft / network / NetServerHandler . java . patch <nl> @ @ - 17 , 15 + 17 , 38 @ @ <nl> import net . minecraft . network . packet . Packet13PlayerLookMove ; <nl> import net . minecraft . network . packet . Packet14BlockDig ; <nl> import net . minecraft . network . packet . Packet15Place ; <nl> - @ @ - 618 , 6 + 621 , 7 @ @ <nl> + @ @ - 618 , 6 + 621 , 10 @ @ <nl> <nl> public void func _ 72481 _ a ( Packet3Chat p _ 72481 _ 1 _ ) <nl> { <nl> + p _ 72481 _ 1 _ = FMLNetworkHandler . handleChatMessage ( this , p _ 72481 _ 1 _ ) ; <nl> + + <nl> + + if ( p _ 72481 _ 1 _ ! = null ) <nl> + + { <nl> if ( this . field _ 72574 _ e . func _ 71126 _ v ( ) = = 2 ) <nl> { <nl> this . func _ 72567 _ b ( new Packet3Chat ( ChatMessageComponent . func _ 111077 _ e ( " chat . cannotSend " ) . func _ 111059 _ a ( EnumChatFormatting . RED ) ) ) ; <nl> - @ @ - 1013 , 6 + 1017 , 11 @ @ <nl> + @ @ - 635 , 6 + 642 , 8 @ @ <nl> + { <nl> + s = StringUtils . normalizeSpace ( s ) ; <nl> + <nl> + + if ( s ! = null ) <nl> + + { <nl> + for ( int i = 0 ; i < s . length ( ) ; + + i ) <nl> + { <nl> + if ( ! ChatAllowedCharacters . func _ 71566 _ a ( s . charAt ( i ) ) ) <nl> + @ @ - 666 , 7 + 675 , 9 @ @ <nl> + { <nl> + this . func _ 72565 _ c ( " disconnect . spam " ) ; <nl> + } <nl> + - } <nl> + + } <nl> + + } <nl> + + } <nl> + } <nl> + } <nl> + <nl> + @ @ - 1013 , 6 + 1024 , 11 @ @ <nl> } <nl> <nl> public void func _ 72501 _ a ( Packet250CustomPayload p _ 72501 _ 1 _ ) <nl> @ @ - 37 , 7 + 60 , 7 @ @ <nl> { <nl> DataInputStream datainputstream ; <nl> ItemStack itemstack ; <nl> - @ @ - 1182 , 4 + 1191 , 18 @ @ <nl> + @ @ - 1182 , 4 + 1198 , 18 @ @ <nl> { <nl> return this . field _ 72576 _ c ; <nl> }

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / multiplayer / PlayerControllerMP . java . patch b / patches / minecraft / net / minecraft / client / multiplayer / PlayerControllerMP . java . patch 
 index 8cc02cf . . e28a1fd 100644 
 - - - a / patches / minecraft / net / minecraft / client / multiplayer / PlayerControllerMP . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / multiplayer / PlayerControllerMP . java . patch 
 @ @ - 50 , 7 + 50 , 7 @ @ 
 return flag ; 
 } 
 } 
 - @ @ - 373 , 11 + 379 , 15 @ @ 
 + @ @ - 373 , 11 + 379 , 18 @ @ 
 { 
 if ( this . field _ 78779 _ k ! = WorldSettings . GameType . SPECTATOR ) 
 { 
 @ @ - 59 , 16 + 59 , 19 @ @ 
 + if ( ret ! = EnumActionResult . PASS ) return ret ; 
 + 
 IBlockState iblockstate = p _ 187099 _ 2 _ . func _ 180495 _ p ( p _ 187099 _ 4 _ ) ; 
 + + boolean bypass = true ; 
 + + for ( ItemStack s : new ItemStack [ ] { p _ 187099 _ 1 _ . func _ 184614 _ ca ( ) , p _ 187099 _ 1 _ . func _ 184592 _ cb ( ) } ) / / TODO : Expand to more hands ? player . inv . getHands ( ) ? 
 + + bypass = bypass & & ( s = = null | | s . func _ 77973 _ b ( ) . doesSneakBypassUse ( s , p _ 187099 _ 2 _ , p _ 187099 _ 4 _ , p _ 187099 _ 1 _ ) ) ; 
 
 - if ( ( ! p _ 187099 _ 1 _ . func _ 70093 _ af ( ) | | p _ 187099 _ 1 _ . func _ 184614 _ ca ( ) = = null & & p _ 187099 _ 1 _ . func _ 184592 _ cb ( ) = = null ) & & iblockstate . func _ 177230 _ c ( ) . func _ 180639 _ a ( p _ 187099 _ 2 _ , p _ 187099 _ 4 _ , iblockstate , p _ 187099 _ 1 _ , p _ 187099 _ 7 _ , p _ 187099 _ 3 _ , p _ 187099 _ 5 _ , f , f1 , f2 ) ) 
 - + if ( ( ! p _ 187099 _ 1 _ . func _ 70093 _ af ( ) | | ( p _ 187099 _ 1 _ . func _ 184614 _ ca ( ) = = null | | item . doesSneakBypassUse ( p _ 187099 _ 3 _ , p _ 187099 _ 2 _ , p _ 187099 _ 4 _ , p _ 187099 _ 1 _ ) ) & & p _ 187099 _ 1 _ . func _ 184592 _ cb ( ) = = null ) ) 
 + + if ( ! p _ 187099 _ 1 _ . func _ 70093 _ af ( ) | | bypass ) 
 { 
 - flag = true ; 
 + flag = iblockstate . func _ 177230 _ c ( ) . func _ 180639 _ a ( p _ 187099 _ 2 _ , p _ 187099 _ 4 _ , iblockstate , p _ 187099 _ 1 _ , p _ 187099 _ 7 _ , p _ 187099 _ 3 _ , p _ 187099 _ 5 _ , f , f1 , f2 ) ; 
 } 
 
 if ( ! flag & & p _ 187099 _ 3 _ ! = null & & p _ 187099 _ 3 _ . func _ 77973 _ b ( ) instanceof ItemBlock ) 
 - @ @ - 418 , 7 + 428 , 9 @ @ 
 + @ @ - 418 , 7 + 431 , 9 @ @ 
 } 
 else 
 { 
 @ @ - 79 , 7 + 82 , 7 @ @ 
 } 
 } 
 else 
 - @ @ - 453 , 9 + 465 , 10 @ @ 
 + @ @ - 453 , 9 + 468 , 10 @ @ 
 { 
 p _ 187101 _ 1 _ . func _ 184611 _ a ( p _ 187101 _ 4 _ , itemstack ) ; 


NEAREST DIFF:
diff - - git a / fml / patches / minecraft / net / minecraft / client / multiplayer / NetClientHandler . java . patch b / fml / patches / minecraft / net / minecraft / client / multiplayer / NetClientHandler . java . patch 
 index 22f11c6 . . 4e66d9b 100644 
 - - - a / fml / patches / minecraft / net / minecraft / client / multiplayer / NetClientHandler . java . patch 
 + + + b / fml / patches / minecraft / net / minecraft / client / multiplayer / NetClientHandler . java . patch 
 @ @ - 64 , 15 + 64 , 19 @ @ 
 } 
 } 
 
 - @ @ - 804 , 6 + 814 , 7 @ @ 
 + @ @ - 804 , 7 + 814 , 11 @ @ 
 
 public void func _ 72481 _ a ( Packet3Chat p _ 72481 _ 1 _ ) 
 { 
 + p _ 72481 _ 1 _ = FMLNetworkHandler . handleChatMessage ( this , p _ 72481 _ 1 _ ) ; 
 + + if ( p _ 72481 _ 1 _ ! = null ) 
 + + { 
 this . field _ 72563 _ h . field _ 71456 _ v . func _ 73827 _ b ( ) . func _ 73765 _ a ( ChatMessageComponent . func _ 111078 _ c ( p _ 72481 _ 1 _ . field _ 73476 _ b ) . func _ 111068 _ a ( true ) ) ; 
 + + } 
 } 
 
 - @ @ - 1403 , 6 + 1414 , 11 @ @ 
 + public void func _ 72524 _ a ( Packet18Animation p _ 72524 _ 1 _ ) 
 + @ @ - 1403 , 6 + 1417 , 11 @ @ 
 
 public void func _ 72494 _ a ( Packet131MapData p _ 72494 _ 1 _ ) 
 { 
 @ @ - 84 , 7 + 88 , 7 @ @ 
 if ( p _ 72494 _ 1 _ . field _ 73438 _ a = = Item . field _ 77744 _ bd . field _ 77779 _ bT ) 
 { 
 ItemMap . func _ 77874 _ a ( p _ 72494 _ 1 _ . field _ 73436 _ b , this . field _ 72563 _ h . field _ 71441 _ e ) . func _ 76192 _ a ( p _ 72494 _ 1 _ . field _ 73437 _ c ) ; 
 - @ @ - 1514 , 6 + 1530 , 11 @ @ 
 + @ @ - 1514 , 6 + 1533 , 11 @ @ 
 
 public void func _ 72501 _ a ( Packet250CustomPayload p _ 72501 _ 1 _ ) 
 { 
 @ @ - 96 , 7 + 100 , 7 @ @ 
 if ( " MC | TrList " . equals ( p _ 72501 _ 1 _ . field _ 73630 _ a ) ) 
 { 
 DataInputStream datainputstream = new DataInputStream ( new ByteArrayInputStream ( p _ 72501 _ 1 _ . field _ 73629 _ c ) ) ; 
 - @ @ - 1707 , 4 + 1728 , 20 @ @ 
 + @ @ - 1707 , 4 + 1731 , 20 @ @ 
 { 
 return this . field _ 72555 _ g ; 
 } 
 diff - - git a / fml / patches / minecraft / net / minecraft / network / NetServerHandler . java . patch b / fml / patches / minecraft / net / minecraft / network / NetServerHandler . java . patch 
 index f3bef7a . . b977a96 100644 
 - - - a / fml / patches / minecraft / net / minecraft / network / NetServerHandler . java . patch 
 + + + b / fml / patches / minecraft / net / minecraft / network / NetServerHandler . java . patch 
 @ @ - 17 , 15 + 17 , 38 @ @ 
 import net . minecraft . network . packet . Packet13PlayerLookMove ; 
 import net . minecraft . network . packet . Packet14BlockDig ; 
 import net . minecraft . network . packet . Packet15Place ; 
 - @ @ - 618 , 6 + 621 , 7 @ @ 
 + @ @ - 618 , 6 + 621 , 10 @ @ 
 
 public void func _ 72481 _ a ( Packet3Chat p _ 72481 _ 1 _ ) 
 { 
 + p _ 72481 _ 1 _ = FMLNetworkHandler . handleChatMessage ( this , p _ 72481 _ 1 _ ) ; 
 + + 
 + + if ( p _ 72481 _ 1 _ ! = null ) 
 + + { 
 if ( this . field _ 72574 _ e . func _ 71126 _ v ( ) = = 2 ) 
 { 
 this . func _ 72567 _ b ( new Packet3Chat ( ChatMessageComponent . func _ 111077 _ e ( " chat . cannotSend " ) . func _ 111059 _ a ( EnumChatFormatting . RED ) ) ) ; 
 - @ @ - 1013 , 6 + 1017 , 11 @ @ 
 + @ @ - 635 , 6 + 642 , 8 @ @ 
 + { 
 + s = StringUtils . normalizeSpace ( s ) ; 
 + 
 + + if ( s ! = null ) 
 + + { 
 + for ( int i = 0 ; i < s . length ( ) ; + + i ) 
 + { 
 + if ( ! ChatAllowedCharacters . func _ 71566 _ a ( s . charAt ( i ) ) ) 
 + @ @ - 666 , 7 + 675 , 9 @ @ 
 + { 
 + this . func _ 72565 _ c ( " disconnect . spam " ) ; 
 + } 
 + - } 
 + + } 
 + + } 
 + + } 
 + } 
 + } 
 + 
 + @ @ - 1013 , 6 + 1024 , 11 @ @ 
 } 
 
 public void func _ 72501 _ a ( Packet250CustomPayload p _ 72501 _ 1 _ ) 
 @ @ - 37 , 7 + 60 , 7 @ @ 
 { 
 DataInputStream datainputstream ; 
 ItemStack itemstack ; 
 - @ @ - 1182 , 4 + 1191 , 18 @ @ 
 + @ @ - 1182 , 4 + 1198 , 18 @ @ 
 { 
 return this . field _ 72576 _ c ; 
 }
