BLEU SCORE: 0.028398387225677897

TEST MSG: Invalidate capabilities that we attach to vanilla entities and TileEntities . Closes # 5307
GENERATED MSG: Add NeighborNotiftyEvent .

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / entity / Entity . java . patch b / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> index a6d0faa . . 9e06213 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / Entity . java . patch <nl> @ @ - 35 , 7 + 35 , 15 @ @ <nl> } <nl> <nl> public EntityType < ? > func _ 200600 _ R ( ) { <nl> - @ @ - 324 , 6 + 327 , 7 @ @ <nl> + @ @ - 290 , 6 + 293 , 7 @ @ <nl> + <nl> + public void func _ 70106 _ y ( ) { <nl> + this . field _ 70128 _ L = true ; <nl> + + this . invalidateCaps ( ) ; <nl> + } <nl> + <nl> + public void func _ 184174 _ b ( boolean p _ 184174 _ 1 _ ) { <nl> + @ @ - 324 , 6 + 328 , 7 @ @ <nl> this . field _ 70165 _ t = p _ 70107 _ 1 _ ; <nl> this . field _ 70163 _ u = p _ 70107 _ 3 _ ; <nl> this . field _ 70161 _ v = p _ 70107 _ 5 _ ; <nl> @ @ - 43 , 7 + 51 , 7 @ @ <nl> float f = this . field _ 70130 _ N / 2 . 0F ; <nl> float f1 = this . field _ 70131 _ O ; <nl> this . func _ 174826 _ a ( new AxisAlignedBB ( p _ 70107 _ 1 _ - ( double ) f , p _ 70107 _ 3 _ , p _ 70107 _ 5 _ - ( double ) f , p _ 70107 _ 1 _ + ( double ) f , p _ 70107 _ 3 _ + ( double ) f1 , p _ 70107 _ 5 _ + ( double ) f ) ) ; <nl> - @ @ - 794 , 6 + 798 , 7 @ @ <nl> + @ @ - 794 , 6 + 799 , 7 @ @ <nl> this . field _ 70165 _ t = ( axisalignedbb . field _ 72340 _ a + axisalignedbb . field _ 72336 _ d ) / 2 . 0D ; <nl> this . field _ 70163 _ u = axisalignedbb . field _ 72338 _ b ; <nl> this . field _ 70161 _ v = ( axisalignedbb . field _ 72339 _ c + axisalignedbb . field _ 72334 _ f ) / 2 . 0D ; <nl> @ @ - 51 , 7 + 59 , 7 @ @ <nl> } <nl> <nl> protected SoundEvent func _ 184184 _ Z ( ) { <nl> - @ @ - 845 , 7 + 850 , 7 @ @ <nl> + @ @ - 845 , 7 + 851 , 7 @ @ <nl> <nl> protected void func _ 180429 _ a ( BlockPos p _ 180429 _ 1 _ , IBlockState p _ 180429 _ 2 _ ) { <nl> if ( ! p _ 180429 _ 2 _ . func _ 185904 _ a ( ) . func _ 76224 _ d ( ) ) { <nl> @ @ - 60 , 7 + 68 , 7 @ @ <nl> this . func _ 184185 _ a ( soundtype . func _ 185844 _ d ( ) , soundtype . func _ 185843 _ a ( ) * 0 . 15F , soundtype . func _ 185847 _ b ( ) ) ; <nl> } <nl> } <nl> - @ @ - 1040 , 6 + 1045 , 7 @ @ <nl> + @ @ - 1040 , 6 + 1046 , 7 @ @ <nl> int k = MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ; <nl> BlockPos blockpos = new BlockPos ( i , j , k ) ; <nl> IBlockState iblockstate = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos ) ; <nl> @ @ - 68 , 7 + 76 , 7 @ @ <nl> if ( iblockstate . func _ 185901 _ i ( ) ! = EnumBlockRenderType . INVISIBLE ) { <nl> this . field _ 70170 _ p . func _ 195594 _ a ( new BlockParticleData ( Particles . field _ 197611 _ d , iblockstate ) , this . field _ 70165 _ t + ( ( double ) this . field _ 70146 _ Z . nextFloat ( ) - 0 . 5D ) * ( double ) this . field _ 70130 _ N , this . func _ 174813 _ aQ ( ) . field _ 72338 _ b + 0 . 1D , this . field _ 70161 _ v + ( ( double ) this . field _ 70146 _ Z . nextFloat ( ) - 0 . 5D ) * ( double ) this . field _ 70130 _ N , - this . field _ 70159 _ w * 4 . 0D , 1 . 5D , - this . field _ 70179 _ y * 4 . 0D ) ; <nl> } <nl> - @ @ - 1053 , 7 + 1059 , 7 @ @ <nl> + @ @ - 1053 , 7 + 1060 , 7 @ @ <nl> double d0 = this . field _ 70163 _ u + ( double ) this . func _ 70047 _ e ( ) ; <nl> BlockPos blockpos = new BlockPos ( this . field _ 70165 _ t , d0 , this . field _ 70161 _ v ) ; <nl> IFluidState ifluidstate = this . field _ 70170 _ p . func _ 204610 _ c ( blockpos ) ; <nl> @ @ - 77 , 7 + 85 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1122 , 6 + 1128 , 7 @ @ <nl> + @ @ - 1122 , 6 + 1129 , 7 @ @ <nl> this . field _ 70126 _ B - = 360 . 0F ; <nl> } <nl> <nl> @ @ - 85 , 7 + 93 , 7 @ @ <nl> this . func _ 70107 _ b ( this . field _ 70165 _ t , this . field _ 70163 _ u , this . field _ 70161 _ v ) ; <nl> this . func _ 70101 _ b ( p _ 70080 _ 7 _ , p _ 70080 _ 8 _ ) ; <nl> } <nl> - @ @ - 1370 , 6 + 1377 , 7 @ @ <nl> + @ @ - 1370 , 6 + 1378 , 7 @ @ <nl> if ( this . field _ 184238 _ ar ) { <nl> p _ 189511 _ 1 _ . func _ 74757 _ a ( " Glowing " , this . field _ 184238 _ ar ) ; <nl> } <nl> @ @ - 93 , 7 + 101 , 7 @ @ <nl> <nl> if ( ! this . field _ 184236 _ aF . isEmpty ( ) ) { <nl> NBTTagList nbttaglist = new NBTTagList ( ) ; <nl> - @ @ - 1381 , 6 + 1389 , 9 @ @ <nl> + @ @ - 1381 , 6 + 1390 , 9 @ @ <nl> p _ 189511 _ 1 _ . func _ 74782 _ a ( " Tags " , nbttaglist ) ; <nl> } <nl> <nl> @ @ - 103 , 7 + 111 , 7 @ @ <nl> this . func _ 70014 _ b ( p _ 189511 _ 1 _ ) ; <nl> if ( this . func _ 184207 _ aI ( ) ) { <nl> NBTTagList nbttaglist1 = new NBTTagList ( ) ; <nl> - @ @ - 1466 , 6 + 1477 , 8 @ @ <nl> + @ @ - 1466 , 6 + 1478 , 8 @ @ <nl> this . func _ 174810 _ b ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " Silent " ) ) ; <nl> this . func _ 189654 _ d ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " NoGravity " ) ) ; <nl> this . func _ 184195 _ f ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " Glowing " ) ) ; <nl> @ @ - 112 , 7 + 120 , 7 @ @ <nl> if ( p _ 70020 _ 1 _ . func _ 150297 _ b ( " Tags " , 9 ) ) { <nl> this . field _ 184236 _ aF . clear ( ) ; <nl> NBTTagList nbttaglist1 = p _ 70020 _ 1 _ . func _ 150295 _ c ( " Tags " , 8 ) ; <nl> - @ @ - 1546 , 6 + 1559 , 8 @ @ <nl> + @ @ - 1546 , 6 + 1560 , 8 @ @ <nl> } else { <nl> EntityItem entityitem = new EntityItem ( this . field _ 70170 _ p , this . field _ 70165 _ t , this . field _ 70163 _ u + ( double ) p _ 70099 _ 2 _ , this . field _ 70161 _ v , p _ 70099 _ 1 _ ) ; <nl> entityitem . func _ 174869 _ p ( ) ; <nl> @ @ - 121 , 7 + 129 , 7 @ @ <nl> this . field _ 70170 _ p . func _ 72838 _ d ( entityitem ) ; <nl> return entityitem ; <nl> } <nl> - @ @ - 1595 , 6 + 1610 , 7 @ @ <nl> + @ @ - 1595 , 6 + 1611 , 7 @ @ <nl> this . field _ 70159 _ w = 0 . 0D ; <nl> this . field _ 70181 _ x = 0 . 0D ; <nl> this . field _ 70179 _ y = 0 . 0D ; <nl> @ @ - 129 , 7 + 137 , 7 @ @ <nl> this . func _ 70071 _ h _ ( ) ; <nl> if ( this . func _ 184218 _ aH ( ) ) { <nl> entity . func _ 184232 _ k ( this ) ; <nl> - @ @ - 1636 , 6 + 1652 , 7 @ @ <nl> + @ @ - 1636 , 6 + 1653 , 7 @ @ <nl> } <nl> } <nl> <nl> @ @ - 137 , 7 + 145 , 7 @ @ <nl> if ( p _ 184205 _ 2 _ | | this . func _ 184228 _ n ( p _ 184205 _ 1 _ ) & & p _ 184205 _ 1 _ . func _ 184219 _ q ( this ) ) { <nl> if ( this . func _ 184218 _ aH ( ) ) { <nl> this . func _ 184210 _ p ( ) ; <nl> - @ @ - 1663 , 6 + 1680 , 7 @ @ <nl> + @ @ - 1663 , 6 + 1681 , 7 @ @ <nl> public void func _ 184210 _ p ( ) { <nl> if ( this . field _ 184239 _ as ! = null ) { <nl> Entity entity = this . field _ 184239 _ as ; <nl> @ @ - 145 , 7 + 153 , 7 @ @ <nl> this . field _ 184239 _ as = null ; <nl> entity . func _ 184225 _ p ( this ) ; <nl> } <nl> - @ @ - 1789 , 10 + 1807 , 15 @ @ <nl> + @ @ - 1789 , 10 + 1808 , 15 @ @ <nl> return ! this . func _ 184188 _ bt ( ) . isEmpty ( ) ; <nl> } <nl> <nl> @ @ - 161 , 7 + 169 , 7 @ @ <nl> public boolean func _ 70093 _ af ( ) { <nl> return this . func _ 70083 _ f ( 1 ) ; <nl> } <nl> - @ @ - 2053 , 6 + 2076 , 14 @ @ <nl> + @ @ - 2053 , 6 + 2077 , 14 @ @ <nl> <nl> @ Nullable <nl> public Entity func _ 184204 _ a ( int p _ 184204 _ 1 _ ) { <nl> @ @ - 176 , 7 + 184 , 7 @ @ <nl> if ( ! this . field _ 70170 _ p . field _ 72995 _ K & & ! this . field _ 70128 _ L ) { <nl> this . field _ 70170 _ p . field _ 72984 _ F . func _ 76320 _ a ( " changeDimension " ) ; <nl> MinecraftServer minecraftserver = this . func _ 184102 _ h ( ) ; <nl> - @ @ - 2060 , 7 + 2091 , 7 @ @ <nl> + @ @ - 2060 , 7 + 2092 , 7 @ @ <nl> WorldServer worldserver = minecraftserver . func _ 71218 _ a ( i ) ; <nl> WorldServer worldserver1 = minecraftserver . func _ 71218 _ a ( p _ 184204 _ 1 _ ) ; <nl> this . field _ 71093 _ bK = p _ 184204 _ 1 _ ; <nl> @ @ - 185 , 7 + 193 , 7 @ @ <nl> worldserver1 = minecraftserver . func _ 200667 _ a ( DimensionType . OVERWORLD ) ; <nl> this . field _ 71093 _ bK = 0 ; <nl> } <nl> - @ @ - 2069 , 16 + 2100 , 17 @ @ <nl> + @ @ - 2069 , 16 + 2101 , 17 @ @ <nl> this . field _ 70128 _ L = false ; <nl> this . field _ 70170 _ p . field _ 72984 _ F . func _ 76320 _ a ( " reposition " ) ; <nl> BlockPos blockpos ; <nl> @ @ - 208 , 7 + 216 , 7 @ @ <nl> d0 = MathHelper . func _ 151237 _ a ( d0 * 8 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177726 _ b ( ) + 16 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177728 _ d ( ) - 16 . 0D ) ; <nl> d1 = MathHelper . func _ 151237 _ a ( d1 * 8 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177736 _ c ( ) + 16 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177733 _ e ( ) - 16 . 0D ) ; <nl> } <nl> - @ @ - 2087 , 8 + 2119 , 7 @ @ <nl> + @ @ - 2087 , 8 + 2120 , 7 @ @ <nl> d1 = ( double ) MathHelper . func _ 76125 _ a ( ( int ) d1 , - 29999872 , 29999872 ) ; <nl> float f = this . field _ 70177 _ z ; <nl> this . func _ 70012 _ b ( d0 , this . field _ 70163 _ u , d1 , 90 . 0F , 0 . 0F ) ; <nl> @ @ - 218 , 7 + 226 , 7 @ @ <nl> blockpos = new BlockPos ( this ) ; <nl> } <nl> <nl> - @ @ - 2097 , 7 + 2128 , 7 @ @ <nl> + @ @ - 2097 , 7 + 2129 , 7 @ @ <nl> Entity entity = this . func _ 200600 _ R ( ) . func _ 200721 _ a ( worldserver1 ) ; <nl> if ( entity ! = null ) { <nl> entity . func _ 180432 _ n ( this ) ; <nl> @ @ - 227 , 7 + 235 , 7 @ @ <nl> BlockPos blockpos1 = worldserver1 . func _ 205770 _ a ( Heightmap . Type . MOTION _ BLOCKING _ NO _ LEAVES , worldserver1 . func _ 175694 _ M ( ) ) ; <nl> entity . func _ 174828 _ a ( blockpos1 , entity . field _ 70177 _ z , entity . field _ 70125 _ A ) ; <nl> } else { <nl> - @ @ - 2591 , 4 + 2622 , 49 @ @ <nl> + @ @ - 2591 , 4 + 2623 , 49 @ @ <nl> public double func _ 212107 _ bY ( ) { <nl> return this . field _ 211517 _ W ; <nl> } <nl> @ @ - 259 , 7 + 267 , 7 @ @ <nl> + & & ( this instanceof EntityPlayer | | net . minecraftforge . event . ForgeEventFactory . getMobGriefingEvent ( field _ 70170 _ p , this ) ) <nl> + & & this . field _ 70130 _ N * this . field _ 70130 _ N * this . field _ 70131 _ O > 0 . 512F ; <nl> + } <nl> - + <nl> + + <nl> + / * = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = Forge Start = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = * / <nl> + / * * <nl> + * Internal use for keeping track of entities that are tracked by a world , to <nl> diff - - git a / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch b / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch <nl> index 9314809 . . e8ed1d6 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch <nl> @ @ - 369 , 7 + 369 , 7 @ @ <nl> this . field _ 184627 _ bm . func _ 77974 _ b ( this . field _ 70170 _ p , this , this . func _ 184605 _ cv ( ) ) ; <nl> } <nl> <nl> - @ @ - 2346 , 4 + 2406 , 53 @ @ <nl> + @ @ - 2346 , 4 + 2406 , 60 @ @ <nl> @ OnlyIn ( Dist . CLIENT ) <nl> public void func _ 191987 _ a ( BlockPos p _ 191987 _ 1 _ , boolean p _ 191987 _ 2 _ ) { <nl> } <nl> @ @ - 415 , 11 + 415 , 18 @ @ <nl> + <nl> + @ Override <nl> + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable EnumFacing facing ) { <nl> - + if ( capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + + if ( ! this . field _ 70128 _ L & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + if ( facing = = null ) return handlers [ 2 ] . cast ( ) ; <nl> + else if ( facing . func _ 176740 _ k ( ) . func _ 200128 _ b ( ) ) return handlers [ 0 ] . cast ( ) ; <nl> + else if ( facing . func _ 176740 _ k ( ) . func _ 176722 _ c ( ) ) return handlers [ 1 ] . cast ( ) ; <nl> + } <nl> + return super . getCapability ( capability , facing ) ; <nl> + } <nl> + + <nl> + + @ Override <nl> + + public void func _ 70106 _ y ( ) { <nl> + + super . func _ 70106 _ y ( ) ; <nl> + + for ( int x = 0 ; x < handlers . length ; x + + ) <nl> + + handlers [ x ] . invalidate ( ) ; <nl> + + } <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / entity / item / EntityMinecartContainer . java . patch b / patches / minecraft / net / minecraft / entity / item / EntityMinecartContainer . java . patch <nl> index a74aeb7 . . 03a5b5c 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / item / EntityMinecartContainer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / item / EntityMinecartContainer . java . patch <nl> @ @ - 14 , 7 + 14 , 15 @ @ <nl> } <nl> <nl> public void func _ 70106 _ y ( ) { <nl> - @ @ - 163 , 6 + 164 , 7 @ @ <nl> + @ @ - 131 , 6 + 132 , 7 @ @ <nl> + } <nl> + <nl> + super . func _ 70106 _ y ( ) ; <nl> + + itemHandler . invalidate ( ) ; <nl> + } <nl> + <nl> + public void func _ 184174 _ b ( boolean p _ 184174 _ 1 _ ) { <nl> + @ @ - 163 , 6 + 165 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 184230 _ a ( EntityPlayer p _ 184230 _ 1 _ , EnumHand p _ 184230 _ 2 _ ) { <nl> @ @ - 22 , 7 + 30 , 7 @ @ <nl> if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) { <nl> p _ 184230 _ 1 _ . func _ 71007 _ a ( this ) ; <nl> } <nl> - @ @ - 215 , 9 + 217 , 9 @ @ <nl> + @ @ - 215 , 9 + 218 , 9 @ @ <nl> random = new Random ( this . field _ 184291 _ d ) ; <nl> } <nl> <nl> @ @ - 34 , 7 + 42 , 7 @ @ <nl> } <nl> <nl> loottable . func _ 186460 _ a ( this , random , lootcontext $ builder . func _ 186471 _ a ( ) ) ; <nl> - @ @ - 238 , 4 + 240 , 13 @ @ <nl> + @ @ - 238 , 4 + 241 , 13 @ @ <nl> public ResourceLocation func _ 184276 _ b ( ) { <nl> return this . field _ 184290 _ c ; <nl> } <nl> @ @ - 43 , 7 + 51 , 7 @ @ <nl> + <nl> + @ Override <nl> + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable net . minecraft . util . EnumFacing facing ) { <nl> - + if ( capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) <nl> + + if ( ! this . field _ 70128 _ L & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) <nl> + return itemHandler . cast ( ) ; <nl> + return super . getCapability ( capability , facing ) ; <nl> + } <nl> diff - - git a / patches / minecraft / net / minecraft / entity / passive / AbstractHorse . java . patch b / patches / minecraft / net / minecraft / entity / passive / AbstractHorse . java . patch <nl> index dffc26b . . d3f460b 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / passive / AbstractHorse . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / passive / AbstractHorse . java . patch <nl> @ @ - 8 , 7 + 8 , 7 @ @ <nl> } <nl> <nl> protected void func _ 110232 _ cE ( ) { <nl> - @ @ - 960 , 4 + 961 , 13 @ @ <nl> + @ @ - 960 , 4 + 961 , 19 @ @ <nl> <nl> return p _ 204210 _ 2 _ ; <nl> } <nl> @ @ - 17 , 8 + 17 , 14 @ @ <nl> + <nl> + @ Override <nl> + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable net . minecraft . util . EnumFacing facing ) { <nl> - + if ( capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY & & itemHandler ! = null ) <nl> + + if ( ! this . field _ 70128 _ L & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY & & itemHandler ! = null ) <nl> + return itemHandler . cast ( ) ; <nl> + return super . getCapability ( capability , facing ) ; <nl> + } <nl> + + <nl> + + @ Override <nl> + + public void func _ 70106 _ y ( ) { <nl> + + super . func _ 70106 _ y ( ) ; <nl> + + itemHandler . invalidate ( ) ; <nl> + + } <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntity . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntity . java . patch <nl> index e4921ec . . 5f71bf3 100644 <nl> - - - a / patches / minecraft / net / minecraft / tileentity / TileEntity . java . patch <nl> + + + b / patches / minecraft / net / minecraft / tileentity / TileEntity . java . patch <nl> @ @ - 61 , 7 + 61 , 15 @ @ <nl> public double func _ 145835 _ a ( double p _ 145835 _ 1 _ , double p _ 145835 _ 3 _ , double p _ 145835 _ 5 _ ) { <nl> double d0 = ( double ) this . field _ 174879 _ c . func _ 177958 _ n ( ) + 0 . 5D - p _ 145835 _ 1 _ ; <nl> double d1 = ( double ) this . field _ 174879 _ c . func _ 177956 _ o ( ) + 0 . 5D - p _ 145835 _ 3 _ ; <nl> - @ @ - 179 , 4 + 187 , 11 @ @ <nl> + @ @ - 138 , 6 + 146 , 7 @ @ <nl> + <nl> + public void func _ 145843 _ s ( ) { <nl> + this . field _ 145846 _ f = true ; <nl> + + this . invalidateCaps ( ) ; <nl> + } <nl> + <nl> + public void func _ 145829 _ t ( ) { <nl> + @ @ - 179 , 4 + 188 , 11 @ @ <nl> public TileEntityType < ? > func _ 200662 _ C ( ) { <nl> return this . field _ 200663 _ e ; <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityBrewingStand . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityBrewingStand . java . patch <nl> index 120cb47 . . 7ac2323 100644 <nl> - - - a / patches / minecraft / net / minecraft / tileentity / TileEntityBrewingStand . java . patch <nl> + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityBrewingStand . java . patch <nl> @ @ - 63 , 7 + 63 , 7 @ @ <nl> + <nl> + @ Override <nl> + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable EnumFacing facing ) { <nl> - + if ( facing ! = null & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + + if ( ! this . field _ 145846 _ f & & facing ! = null & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + if ( facing = = EnumFacing . UP ) <nl> + return handlers [ 0 ] . cast ( ) ; <nl> + else if ( facing = = EnumFacing . DOWN ) <nl> @ @ - 78 , 6 + 78 , 6 @ @ <nl> + public void func _ 145843 _ s ( ) { <nl> + super . func _ 145843 _ s ( ) ; <nl> + for ( int x = 0 ; x < handlers . length ; x + + ) <nl> - + handlers [ x ] . invalidate ( ) ; <nl> + + handlers [ x ] . invalidate ( ) ; <nl> + } <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityChest . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityChest . java . patch <nl> index f3e3ac7 . . 9dd0421 100644 <nl> - - - a / patches / minecraft / net / minecraft / tileentity / TileEntityChest . java . patch <nl> + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityChest . java . patch <nl> @ @ - 17 , 7 + 17 , 7 @ @ <nl> TileEntity tileentity = p _ 195481 _ 0 _ . func _ 175625 _ s ( p _ 195481 _ 1 _ ) ; <nl> if ( tileentity instanceof TileEntityChest ) { <nl> return ( ( TileEntityChest ) tileentity ) . field _ 145987 _ o ; <nl> - @ @ - 235 , 4 + 236 , 50 @ @ <nl> + @ @ - 235 , 4 + 236 , 57 @ @ <nl> p _ 199722 _ 0 _ . func _ 199721 _ a ( p _ 199722 _ 1 _ . func _ 190576 _ q ( ) ) ; <nl> p _ 199722 _ 1 _ . func _ 199721 _ a ( nonnulllist ) ; <nl> } <nl> @ @ - 33 , 7 + 33 , 7 @ @ <nl> + <nl> + @ Override <nl> + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > cap , EnumFacing side ) { <nl> - + if ( cap = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + + if ( ! this . field _ 145846 _ f & & cap = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + if ( this . chestHandler = = null ) { <nl> + this . chestHandler = net . minecraftforge . common . util . LazyOptional . of ( this : : createHandler ) ; <nl> + } <nl> @ @ - 67 , 4 + 67 , 11 @ @ <nl> + } <nl> + return new net . minecraftforge . items . wrapper . InvWrapper ( this ) ; <nl> + } <nl> + + <nl> + + @ Override <nl> + + public void func _ 145843 _ s ( ) { <nl> + + super . func _ 145843 _ s ( ) ; <nl> + + if ( chestHandler ! = null ) <nl> + + chestHandler . invalidate ( ) ; <nl> + + } <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityFurnace . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityFurnace . java . patch <nl> index d3b76d1 . . 798adfa 100644 <nl> - - - a / patches / minecraft / net / minecraft / tileentity / TileEntityFurnace . java . patch <nl> + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityFurnace . java . patch <nl> @ @ - 101 , 7 + 101 , 7 @ @ <nl> + <nl> + @ Override <nl> + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable EnumFacing facing ) { <nl> - + if ( facing ! = null & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + + if ( ! this . field _ 145846 _ f & & facing ! = null & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + if ( facing = = EnumFacing . UP ) <nl> + return handlers [ 0 ] . cast ( ) ; <nl> + else if ( facing = = EnumFacing . DOWN ) <nl> @ @ - 116 , 6 + 116 , 6 @ @ <nl> + public void func _ 145843 _ s ( ) { <nl> + super . func _ 145843 _ s ( ) ; <nl> + for ( int x = 0 ; x < handlers . length ; x + + ) <nl> - + handlers [ x ] . invalidate ( ) ; <nl> + + handlers [ x ] . invalidate ( ) ; <nl> + } <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityLockable . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityLockable . java . patch <nl> index 376587f . . fefef4c 100644 <nl> - - - a / patches / minecraft / net / minecraft / tileentity / TileEntityLockable . java . patch <nl> + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityLockable . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - a / net / minecraft / tileentity / TileEntityLockable . java <nl> + + + b / net / minecraft / tileentity / TileEntityLockable . java <nl> - @ @ - 36 , 4 + 36 , 17 @ @ <nl> + @ @ - 36 , 4 + 36 , 23 @ @ <nl> public void func _ 174892 _ a ( LockCode p _ 174892 _ 1 _ ) { <nl> this . field _ 174901 _ a = p _ 174892 _ 1 _ ; <nl> } <nl> @ @ - 12 , 9 + 12 , 15 @ @ <nl> + <nl> + @ javax . annotation . Nullable <nl> + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > cap , @ javax . annotation . Nullable net . minecraft . util . EnumFacing side ) { <nl> - + if ( cap = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + + if ( ! this . field _ 145846 _ f & & cap = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { <nl> + return itemHandler . cast ( ) ; <nl> + } <nl> + return super . getCapability ( cap , side ) ; <nl> + } <nl> + + <nl> + + @ Override <nl> + + public void func _ 145843 _ s ( ) { <nl> + + super . func _ 145843 _ s ( ) ; <nl> + + itemHandler . invalidate ( ) ; <nl> + + } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / common / capabilities / CapabilityDispatcher . java b / src / main / java / net / minecraftforge / common / capabilities / CapabilityDispatcher . java <nl> index 14b8819 . . 75841af 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / capabilities / CapabilityDispatcher . java <nl> + + + b / src / main / java / net / minecraftforge / common / capabilities / CapabilityDispatcher . java <nl> @ @ - 52 , 18 + 52 , 20 @ @ public final class CapabilityDispatcher implements INBTSerializable < NBTTagCompou <nl> private ICapabilityProvider [ ] caps ; <nl> private INBTSerializable < INBTBase > [ ] writers ; <nl> private String [ ] names ; <nl> + private final List < Runnable > listeners ; <nl> <nl> - public CapabilityDispatcher ( Map < ResourceLocation , ICapabilityProvider > list ) <nl> + public CapabilityDispatcher ( Map < ResourceLocation , ICapabilityProvider > list , List < Runnable > listeners ) <nl> { <nl> - this ( list , null ) ; <nl> + this ( list , listeners , null ) ; <nl> } <nl> <nl> @ SuppressWarnings ( " unchecked " ) <nl> - public CapabilityDispatcher ( Map < ResourceLocation , ICapabilityProvider > list , @ Nullable ICapabilityProvider parent ) <nl> + public CapabilityDispatcher ( Map < ResourceLocation , ICapabilityProvider > list , List < Runnable > listeners , @ Nullable ICapabilityProvider parent ) <nl> { <nl> List < ICapabilityProvider > lstCaps = Lists . newArrayList ( ) ; <nl> List < INBTSerializable < INBTBase > > lstWriters = Lists . newArrayList ( ) ; <nl> List < String > lstNames = Lists . newArrayList ( ) ; <nl> + this . listeners = listeners ; <nl> <nl> if ( parent ! = null ) / / Parents go first ! <nl> { <nl> @ @ - 134 , 4 + 136 , 9 @ @ public final class CapabilityDispatcher implements INBTSerializable < NBTTagCompou <nl> if ( this . writers . length = = 0 ) return other . writers . length = = 0 ; <nl> return this . serializeNBT ( ) . equals ( other . serializeNBT ( ) ) ; <nl> } <nl> + <nl> + public void invalidate ( ) <nl> + { <nl> + this . listeners . forEach ( Runnable : : run ) ; <nl> + } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / common / capabilities / CapabilityProvider . java b / src / main / java / net / minecraftforge / common / capabilities / CapabilityProvider . java <nl> index b60d2b9 . . 7bba644 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / capabilities / CapabilityProvider . java <nl> + + + b / src / main / java / net / minecraftforge / common / capabilities / CapabilityProvider . java <nl> @ @ - 35 , 24 + 35 , 25 @ @ public abstract class CapabilityProvider < B extends CapabilityProvider < B > > implem <nl> { <nl> private final @ Nonnull Class < B > baseClass ; <nl> private @ Nullable CapabilityDispatcher capabilities ; <nl> - <nl> + private boolean valid = true ; <nl> + <nl> protected CapabilityProvider ( Class < B > baseClass ) <nl> { <nl> this . baseClass = baseClass ; <nl> } <nl> - <nl> + <nl> protected final void gatherCapabilities ( ) { gatherCapabilities ( null ) ; } <nl> - <nl> + <nl> protected final void gatherCapabilities ( @ Nullable ICapabilityProvider parent ) <nl> { <nl> this . capabilities = ForgeEventFactory . gatherCapabilities ( baseClass , this , parent ) ; <nl> } <nl> - <nl> + <nl> protected final @ Nullable CapabilityDispatcher getCapabilities ( ) <nl> { <nl> return this . capabilities ; <nl> } <nl> - <nl> + <nl> public final boolean areCapsCompatible ( CapabilityProvider < B > other ) <nl> { <nl> return areCapsCompatible ( other . getCapabilities ( ) ) ; <nl> @ @ - 71 , 23 + 72 , 23 @ @ public abstract class CapabilityProvider < B extends CapabilityProvider < B > > implem <nl> { <nl> return other . areCompatible ( null ) ; <nl> } <nl> - } <nl> + } <nl> else <nl> { <nl> return disp . areCompatible ( other ) ; <nl> } <nl> } <nl> - <nl> + <nl> protected final @ Nullable NBTTagCompound serializeCaps ( ) <nl> { <nl> final CapabilityDispatcher disp = getCapabilities ( ) ; <nl> - if ( disp ! = null ) <nl> + if ( disp ! = null ) <nl> { <nl> return disp . serializeNBT ( ) ; <nl> } <nl> return null ; <nl> } <nl> - <nl> + <nl> protected final void deserializeCaps ( NBTTagCompound tag ) <nl> { <nl> final CapabilityDispatcher disp = getCapabilities ( ) ; <nl> @ @ - 97 , 11 + 98 , 19 @ @ public abstract class CapabilityProvider < B extends CapabilityProvider < B > > implem <nl> } <nl> } <nl> <nl> + protected void invalidateCaps ( ) <nl> + { <nl> + this . valid = false ; <nl> + final CapabilityDispatcher disp = getCapabilities ( ) ; <nl> + if ( disp ! = null ) <nl> + disp . invalidate ( ) ; <nl> + } <nl> + <nl> @ Override <nl> @ Nonnull <nl> public < T > LazyOptional < T > getCapability ( @ Nonnull Capability < T > cap , @ Nullable EnumFacing side ) <nl> { <nl> final CapabilityDispatcher disp = getCapabilities ( ) ; <nl> - return disp = = null ? LazyOptional . empty ( ) : disp . getCapability ( cap , side ) ; <nl> + return ! valid | | disp = = null ? LazyOptional . empty ( ) : disp . getCapability ( cap , side ) ; <nl> } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java b / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java <nl> index 5c61443 . . d150d56 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java <nl> + + + b / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java <nl> @ @ - 20 , 8 + 20 , 10 @ @ <nl> package net . minecraftforge . event ; <nl> <nl> import java . util . Collections ; <nl> + import java . util . List ; <nl> import java . util . Map ; <nl> <nl> + import com . google . common . collect . Lists ; <nl> import com . google . common . collect . Maps ; <nl> <nl> import net . minecraft . util . ResourceLocation ; <nl> @ @ - 40 , 6 + 42 , 8 @ @ public class AttachCapabilitiesEvent < T > extends GenericEvent < T > <nl> private final T obj ; <nl> private final Map < ResourceLocation , ICapabilityProvider > caps = Maps . newLinkedHashMap ( ) ; <nl> private final Map < ResourceLocation , ICapabilityProvider > view = Collections . unmodifiableMap ( caps ) ; <nl> + private final List < Runnable > listeners = Lists . newArrayList ( ) ; <nl> + private final List < Runnable > listenersView = Collections . unmodifiableList ( listeners ) ; <nl> <nl> public AttachCapabilitiesEvent ( Class < T > type , T obj ) <nl> { <nl> @ @ - 77 , 4 + 81 , 20 @ @ public class AttachCapabilitiesEvent < T > extends GenericEvent < T > <nl> { <nl> return view ; <nl> } <nl> + <nl> + <nl> + / * * <nl> + * Adds a callback that is fired when the attacked object is invalidated . <nl> + * Such as a Entity / TileEntity being removed from world . <nl> + * All attached providers should invalidate all of their held capability instances . <nl> + * / <nl> + public void addListener ( Runnable listener ) <nl> + { <nl> + this . listeners . add ( listener ) ; <nl> + } <nl> + <nl> + public List < Runnable > getListeners ( ) <nl> + { <nl> + return this . listenersView ; <nl> + } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> index 3e88181 . . c21d0ce 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> @ @ - 569 , 7 + 569 , 7 @ @ public class ForgeEventFactory <nl> private static CapabilityDispatcher gatherCapabilities ( AttachCapabilitiesEvent < ? > event , @ Nullable ICapabilityProvider parent ) <nl> { <nl> MinecraftForge . EVENT _ BUS . post ( event ) ; <nl> - return event . getCapabilities ( ) . size ( ) > 0 | | parent ! = null ? new CapabilityDispatcher ( event . getCapabilities ( ) , parent ) : null ; <nl> + return event . getCapabilities ( ) . size ( ) > 0 | | parent ! = null ? new CapabilityDispatcher ( event . getCapabilities ( ) , event . getListeners ( ) , parent ) : null ; <nl> } <nl> <nl> public static boolean fireSleepingLocationCheck ( EntityPlayer player , BlockPos sleepingLocation ) <nl> @ @ - 634 , 7 + 634 , 7 @ @ public class ForgeEventFactory <nl> { <nl> return MinecraftForge . EVENT _ BUS . post ( new ProjectileImpactEvent . Throwable ( throwable , ray ) ) ; <nl> } <nl> - <nl> + <nl> public static boolean onReplaceBiomeBlocks ( IChunkGenerator < ? > gen , IChunk chunk , IWorld world ) <nl> { <nl> ChunkGeneratorEvent . ReplaceBiomeBlocks event = new ChunkGeneratorEvent . ReplaceBiomeBlocks ( gen , chunk , world ) ;
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch b / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch <nl> new file mode 100644 <nl> index 0000000 . . b2ed5d2 <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch <nl> @ @ - 0 , 0 + 1 , 11 @ @ <nl> + - - - . . / src - base / minecraft / net / minecraft / block / BlockRedstoneDiode . java <nl> + + + + . . / src - work / minecraft / net / minecraft / block / BlockRedstoneDiode . java <nl> + @ @ - 200 , 6 + 200 , 8 @ @ <nl> + { <nl> + EnumFacing enumfacing = ( EnumFacing ) p _ 176400 _ 3 _ . func _ 177229 _ b ( field _ 176387 _ N ) ; <nl> + BlockPos blockpos1 = p _ 176400 _ 2 _ . func _ 177972 _ a ( enumfacing . func _ 176734 _ d ( ) ) ; <nl> + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( p _ 176400 _ 1 _ , p _ 176400 _ 2 _ , p _ 176400 _ 1 _ . func _ 180495 _ p ( p _ 176400 _ 2 _ ) , java . util . EnumSet . of ( enumfacing . func _ 176734 _ d ( ) ) ) . isCanceled ( ) ) <nl> + + return ; <nl> + p _ 176400 _ 1 _ . func _ 180496 _ d ( blockpos1 , this ) ; <nl> + p _ 176400 _ 1 _ . func _ 175695 _ a ( blockpos1 , this , enumfacing ) ; <nl> + } <nl> diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch <nl> new file mode 100644 <nl> index 0000000 . . 4c1454b <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch <nl> @ @ - 0 , 0 + 1 , 22 @ @ <nl> + - - - . . / src - base / minecraft / net / minecraft / tileentity / TileEntityPiston . java <nl> + + + + . . / src - work / minecraft / net / minecraft / tileentity / TileEntityPiston . java <nl> + @ @ - 151 , 7 + 151 , 8 @ @ <nl> + if ( this . field _ 145850 _ b . func _ 180495 _ p ( this . field _ 174879 _ c ) . func _ 177230 _ c ( ) = = Blocks . field _ 180384 _ M ) <nl> + { <nl> + this . field _ 145850 _ b . func _ 180501 _ a ( this . field _ 174879 _ c , this . field _ 174932 _ a , 3 ) ; <nl> + - this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; <nl> + + if ( ! net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( field _ 145850 _ b , field _ 174879 _ c , field _ 145850 _ b . func _ 180495 _ p ( field _ 174879 _ c ) , java . util . EnumSet . noneOf ( EnumFacing . class ) ) . isCanceled ( ) ) <nl> + + this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; <nl> + } <nl> + } <nl> + } <nl> + @ @ - 169 , 7 + 170 , 8 @ @ <nl> + if ( this . field _ 145850 _ b . func _ 180495 _ p ( this . field _ 174879 _ c ) . func _ 177230 _ c ( ) = = Blocks . field _ 180384 _ M ) <nl> + { <nl> + this . field _ 145850 _ b . func _ 180501 _ a ( this . field _ 174879 _ c , this . field _ 174932 _ a , 3 ) ; <nl> + - this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; <nl> + + if ( ! net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( field _ 145850 _ b , field _ 174879 _ c , field _ 145850 _ b . func _ 180495 _ p ( field _ 174879 _ c ) , java . util . EnumSet . noneOf ( EnumFacing . class ) ) . isCanceled ( ) ) <nl> + + this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; <nl> + } <nl> + } <nl> + else <nl> diff - - git a / patches / minecraft / net / minecraft / world / World . java . patch b / patches / minecraft / net / minecraft / world / World . java . patch <nl> index 1da6baf . . 3d4fc0b 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / World . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / World . java . patch <nl> @ @ - 162 , 7 + 162 , 29 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 782 , 7 + 832 , 7 @ @ <nl> + @ @ - 408 , 6 + 458 , 9 @ @ <nl> + <nl> + public void func _ 175685 _ c ( BlockPos p _ 175685 _ 1 _ , Block p _ 175685 _ 2 _ ) <nl> + { <nl> + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( this , p _ 175685 _ 1 _ , this . func _ 180495 _ p ( p _ 175685 _ 1 _ ) , java . util . EnumSet . allOf ( EnumFacing . class ) ) . isCanceled ( ) ) <nl> + + return ; <nl> + + <nl> + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177976 _ e ( ) , p _ 175685 _ 2 _ ) ; <nl> + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177974 _ f ( ) , p _ 175685 _ 2 _ ) ; <nl> + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177977 _ b ( ) , p _ 175685 _ 2 _ ) ; <nl> + @ @ - 418 , 6 + 471 , 11 @ @ <nl> + <nl> + public void func _ 175695 _ a ( BlockPos p _ 175695 _ 1 _ , Block p _ 175695 _ 2 _ , EnumFacing p _ 175695 _ 3 _ ) <nl> + { <nl> + + java . util . EnumSet < EnumFacing > directions = java . util . EnumSet . allOf ( EnumFacing . class ) ; <nl> + + directions . remove ( p _ 175695 _ 3 _ ) ; <nl> + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( this , p _ 175695 _ 1 _ , this . func _ 180495 _ p ( p _ 175695 _ 1 _ ) , directions ) . isCanceled ( ) ) <nl> + + return ; <nl> + + <nl> + if ( p _ 175695 _ 3 _ ! = EnumFacing . WEST ) <nl> + { <nl> + this . func _ 180496 _ d ( p _ 175695 _ 1 _ . func _ 177976 _ e ( ) , p _ 175695 _ 2 _ ) ; <nl> + @ @ - 782 , 7 + 840 , 7 @ @ <nl> <nl> public boolean func _ 72935 _ r ( ) <nl> { <nl> @ @ - 171 , 7 + 193 , 7 @ @ <nl> } <nl> <nl> public MovingObjectPosition func _ 72933 _ a ( Vec3 p _ 72933 _ 1 _ , Vec3 p _ 72933 _ 2 _ ) <nl> - @ @ - 978 , 6 + 1028 , 8 @ @ <nl> + @ @ - 978 , 6 + 1036 , 8 @ @ <nl> <nl> public void func _ 72956 _ a ( Entity p _ 72956 _ 1 _ , String p _ 72956 _ 2 _ , float p _ 72956 _ 3 _ , float p _ 72956 _ 4 _ ) <nl> { <nl> @ @ - 180 , 7 + 202 , 7 @ @ <nl> for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) <nl> { <nl> ( ( IWorldAccess ) this . field _ 73021 _ x . get ( i ) ) . func _ 72704 _ a ( p _ 72956 _ 2 _ , p _ 72956 _ 1 _ . field _ 70165 _ t , p _ 72956 _ 1 _ . field _ 70163 _ u , p _ 72956 _ 1 _ . field _ 70161 _ v , p _ 72956 _ 3 _ , p _ 72956 _ 4 _ ) ; <nl> - @ @ - 986 , 6 + 1038 , 8 @ @ <nl> + @ @ - 986 , 6 + 1046 , 8 @ @ <nl> <nl> public void func _ 85173 _ a ( EntityPlayer p _ 85173 _ 1 _ , String p _ 85173 _ 2 _ , float p _ 85173 _ 3 _ , float p _ 85173 _ 4 _ ) <nl> { <nl> @ @ - 189 , 7 + 211 , 7 @ @ <nl> for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) <nl> { <nl> ( ( IWorldAccess ) this . field _ 73021 _ x . get ( i ) ) . func _ 85102 _ a ( p _ 85173 _ 1 _ , p _ 85173 _ 2 _ , p _ 85173 _ 1 _ . field _ 70165 _ t , p _ 85173 _ 1 _ . field _ 70163 _ u , p _ 85173 _ 1 _ . field _ 70161 _ v , p _ 85173 _ 3 _ , p _ 85173 _ 4 _ ) ; <nl> - @ @ - 1037 , 6 + 1091 , 9 @ @ <nl> + @ @ - 1037 , 6 + 1099 , 9 @ @ <nl> <nl> public boolean func _ 72838 _ d ( Entity p _ 72838 _ 1 _ ) <nl> { <nl> @ @ - 199 , 7 + 221 , 7 @ @ <nl> int i = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70165 _ t / 16 . 0D ) ; <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70161 _ v / 16 . 0D ) ; <nl> boolean flag = p _ 72838 _ 1 _ . field _ 98038 _ p ; <nl> - @ @ - 1059 , 6 + 1116 , 8 @ @ <nl> + @ @ - 1059 , 6 + 1124 , 8 @ @ <nl> this . func _ 72854 _ c ( ) ; <nl> } <nl> <nl> @ @ - 208 , 7 + 230 , 7 @ @ <nl> this . func _ 72964 _ e ( i , j ) . func _ 76612 _ a ( p _ 72838 _ 1 _ ) ; <nl> this . field _ 72996 _ f . add ( p _ 72838 _ 1 _ ) ; <nl> this . func _ 72923 _ a ( p _ 72838 _ 1 _ ) ; <nl> - @ @ - 1271 , 17 + 1330 , 29 @ @ <nl> + @ @ - 1271 , 17 + 1338 , 29 @ @ <nl> <nl> public int func _ 72967 _ a ( float p _ 72967 _ 1 _ ) <nl> { <nl> @ @ - 241 , 7 + 263 , 7 @ @ <nl> public void func _ 72848 _ b ( IWorldAccess p _ 72848 _ 1 _ ) <nl> { <nl> this . field _ 73021 _ x . remove ( p _ 72848 _ 1 _ ) ; <nl> - @ @ - 1290 , 6 + 1361 , 12 @ @ <nl> + @ @ - 1290 , 6 + 1369 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public float func _ 72971 _ b ( float p _ 72971 _ 1 _ ) <nl> { <nl> @ @ - 254 , 7 + 276 , 7 @ @ <nl> float f1 = this . func _ 72826 _ c ( p _ 72971 _ 1 _ ) ; <nl> float f2 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 2F ) ; <nl> f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1302 , 6 + 1379 , 12 @ @ <nl> + @ @ - 1302 , 6 + 1387 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public Vec3 func _ 72833 _ a ( Entity p _ 72833 _ 1 _ , float p _ 72833 _ 2 _ ) <nl> { <nl> @ @ - 267 , 7 + 289 , 7 @ @ <nl> float f1 = this . func _ 72826 _ c ( p _ 72833 _ 2 _ ) ; <nl> float f2 = MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; <nl> f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1309 , 9 + 1392 , 7 @ @ <nl> + @ @ - 1309 , 9 + 1400 , 7 @ @ <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70163 _ u ) ; <nl> int k = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70161 _ v ) ; <nl> BlockPos blockpos = new BlockPos ( i , j , k ) ; <nl> @ @ - 278 , 7 + 300 , 7 @ @ <nl> float f4 = ( float ) ( l > > 16 & 255 ) / 255 . 0F ; <nl> float f5 = ( float ) ( l > > 8 & 255 ) / 255 . 0F ; <nl> float f6 = ( float ) ( l & 255 ) / 255 . 0F ; <nl> - @ @ - 1373 , 6 + 1454 , 11 @ @ <nl> + @ @ - 1373 , 6 + 1462 , 11 @ @ <nl> <nl> public float func _ 130001 _ d ( ) <nl> { <nl> @ @ - 290 , 7 + 312 , 7 @ @ <nl> return WorldProvider . field _ 111203 _ a [ this . field _ 73011 _ w . func _ 76559 _ b ( this . field _ 72986 _ A . func _ 76073 _ f ( ) ) ] ; <nl> } <nl> <nl> - @ @ - 1385 , 6 + 1471 , 12 @ @ <nl> + @ @ - 1385 , 6 + 1479 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public Vec3 func _ 72824 _ f ( float p _ 72824 _ 1 _ ) <nl> { <nl> @ @ - 303 , 7 + 325 , 7 @ @ <nl> float f1 = this . func _ 72826 _ c ( p _ 72824 _ 1 _ ) ; <nl> float f2 = MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; <nl> f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1442 , 9 + 1534 , 9 @ @ <nl> + @ @ - 1442 , 9 + 1542 , 9 @ @ <nl> for ( blockpos1 = new BlockPos ( p _ 175672 _ 1 _ . func _ 177958 _ n ( ) , chunk . func _ 76625 _ h ( ) + 16 , p _ 175672 _ 1 _ . func _ 177952 _ p ( ) ) ; blockpos1 . func _ 177956 _ o ( ) > = 0 ; blockpos1 = blockpos2 ) <nl> { <nl> blockpos2 = blockpos1 . func _ 177977 _ b ( ) ; <nl> @ @ - 315 , 7 + 337 , 7 @ @ <nl> { <nl> break ; <nl> } <nl> - @ @ - 1456 , 6 + 1548 , 12 @ @ <nl> + @ @ - 1456 , 6 + 1556 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public float func _ 72880 _ h ( float p _ 72880 _ 1 _ ) <nl> { <nl> @ @ - 328 , 7 + 350 , 7 @ @ <nl> float f1 = this . func _ 72826 _ c ( p _ 72880 _ 1 _ ) ; <nl> float f2 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 25F ) ; <nl> f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1500 , 7 + 1598 , 15 @ @ <nl> + @ @ - 1500 , 7 + 1606 , 15 @ @ <nl> entity . func _ 85029 _ a ( crashreportcategory ) ; <nl> } <nl> <nl> @ @ - 345 , 7 + 367 , 7 @ @ <nl> } <nl> <nl> if ( entity . field _ 70128 _ L ) <nl> - @ @ - 1562 , 7 + 1668 , 16 @ @ <nl> + @ @ - 1562 , 7 + 1676 , 16 @ @ <nl> crashreport = CrashReport . func _ 85055 _ a ( throwable1 , " Ticking entity " ) ; <nl> crashreportcategory = crashreport . func _ 85058 _ a ( " Entity being ticked " ) ; <nl> entity . func _ 85029 _ a ( crashreportcategory ) ; <nl> @ @ - 363 , 7 + 385 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1609 , 7 + 1724 , 16 @ @ <nl> + @ @ - 1609 , 7 + 1732 , 16 @ @ <nl> CrashReport crashreport1 = CrashReport . func _ 85055 _ a ( throwable , " Ticking block entity " ) ; <nl> CrashReportCategory crashreportcategory1 = crashreport1 . func _ 85058 _ a ( " Block entity being ticked " ) ; <nl> tileentity . func _ 145828 _ a ( crashreportcategory1 ) ; <nl> @ @ - 381 , 7 + 403 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 1628 , 6 + 1752 , 10 @ @ <nl> + @ @ - 1628 , 6 + 1760 , 10 @ @ <nl> <nl> if ( ! this . field _ 147483 _ b . isEmpty ( ) ) <nl> { <nl> @ @ - 392 , 7 + 414 , 7 @ @ <nl> this . field _ 175730 _ i . removeAll ( this . field _ 147483 _ b ) ; <nl> this . field _ 147482 _ g . removeAll ( this . field _ 147483 _ b ) ; <nl> this . field _ 147483 _ b . clear ( ) ; <nl> - @ @ - 1668 , 7 + 1796 , 8 @ @ <nl> + @ @ - 1668 , 7 + 1804 , 8 @ @ <nl> <nl> public boolean func _ 175700 _ a ( TileEntity p _ 175700 _ 1 _ ) <nl> { <nl> @ @ - 402 , 7 + 424 , 7 @ @ <nl> <nl> if ( flag & & p _ 175700 _ 1 _ instanceof IUpdatePlayerListBox ) <nl> { <nl> - @ @ - 1710 , 9 + 1839 , 12 @ @ <nl> + @ @ - 1710 , 9 + 1847 , 12 @ @ <nl> { <nl> int i = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70165 _ t ) ; <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70161 _ v ) ; <nl> @ @ - 417 , 7 + 439 , 7 @ @ <nl> { <nl> p _ 72866 _ 1 _ . field _ 70142 _ S = p _ 72866 _ 1 _ . field _ 70165 _ t ; <nl> p _ 72866 _ 1 _ . field _ 70137 _ T = p _ 72866 _ 1 _ . field _ 70163 _ u ; <nl> - @ @ - 1839 , 7 + 1971 , 7 @ @ <nl> + @ @ - 1839 , 7 + 1979 , 7 @ @ <nl> { <nl> Block block = this . func _ 180495 _ p ( new BlockPos ( k1 , l1 , i2 ) ) . func _ 177230 _ c ( ) ; <nl> <nl> @ @ - 426 , 7 + 448 , 7 @ @ <nl> { <nl> return true ; <nl> } <nl> - @ @ - 1901 , 6 + 2033 , 10 @ @ <nl> + @ @ - 1901 , 6 + 2041 , 10 @ @ <nl> { <nl> return true ; <nl> } <nl> @ @ - 437 , 7 + 459 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 2039 , 6 + 2175 , 7 @ @ <nl> + @ @ - 2039 , 6 + 2183 , 7 @ @ <nl> public Explosion func _ 72885 _ a ( Entity p _ 72885 _ 1 _ , double p _ 72885 _ 2 _ , double p _ 72885 _ 4 _ , double p _ 72885 _ 6 _ , float p _ 72885 _ 8 _ , boolean p _ 72885 _ 9 _ , boolean p _ 72885 _ 10 _ ) <nl> { <nl> Explosion explosion = new Explosion ( this , p _ 72885 _ 1 _ , p _ 72885 _ 2 _ , p _ 72885 _ 4 _ , p _ 72885 _ 6 _ , p _ 72885 _ 8 _ , p _ 72885 _ 9 _ , p _ 72885 _ 10 _ ) ; <nl> @ @ - 445 , 7 + 467 , 7 @ @ <nl> explosion . func _ 77278 _ a ( ) ; <nl> explosion . func _ 77279 _ a ( true ) ; <nl> return explosion ; <nl> - @ @ - 2185 , 19 + 2322 , 28 @ @ <nl> + @ @ - 2185 , 19 + 2330 , 28 @ @ <nl> else <nl> { <nl> this . func _ 175700 _ a ( p _ 175690 _ 2 _ ) ; <nl> @ @ - 475 , 7 + 497 , 7 @ @ <nl> } <nl> else <nl> { <nl> - @ @ - 2210 , 6 + 2356 , 7 @ @ <nl> + @ @ - 2210 , 6 + 2364 , 7 @ @ <nl> <nl> this . func _ 175726 _ f ( p _ 175713 _ 1 _ ) . func _ 177425 _ e ( p _ 175713 _ 1 _ ) ; <nl> } <nl> @ @ - 483 , 7 + 505 , 7 @ @ <nl> } <nl> <nl> public void func _ 147457 _ a ( TileEntity p _ 147457 _ 1 _ ) <nl> - @ @ - 2228 , 7 + 2375 , 7 @ @ <nl> + @ @ - 2228 , 7 + 2383 , 7 @ @ <nl> { <nl> IBlockState iblockstate = p _ 175683 _ 0 _ . func _ 180495 _ p ( p _ 175683 _ 1 _ ) ; <nl> Block block = iblockstate . func _ 177230 _ c ( ) ; <nl> @ @ - 492 , 7 + 514 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 175677 _ d ( BlockPos p _ 175677 _ 1 _ , boolean p _ 175677 _ 2 _ ) <nl> - @ @ - 2248 , 7 + 2395 , 7 @ @ <nl> + @ @ - 2248 , 7 + 2403 , 7 @ @ <nl> else <nl> { <nl> Block block = this . func _ 180495 _ p ( p _ 175677 _ 1 _ ) . func _ 177230 _ c ( ) ; <nl> @ @ - 501 , 7 + 523 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 2265 , 8 + 2412 , 7 @ @ <nl> + @ @ - 2265 , 8 + 2420 , 7 @ @ <nl> <nl> public void func _ 72891 _ a ( boolean p _ 72891 _ 1 _ , boolean p _ 72891 _ 2 _ ) <nl> { <nl> @ @ - 511 , 7 + 533 , 7 @ @ <nl> } <nl> <nl> public void func _ 72835 _ b ( ) <nl> - @ @ - 2276 , 6 + 2422 , 11 @ @ <nl> + @ @ - 2276 , 6 + 2430 , 11 @ @ <nl> <nl> protected void func _ 72947 _ a ( ) <nl> { <nl> @ @ - 523 , 7 + 545 , 7 @ @ <nl> if ( this . field _ 72986 _ A . func _ 76059 _ o ( ) ) <nl> { <nl> this . field _ 73004 _ o = 1 . 0F ; <nl> - @ @ - 2289 , 6 + 2440 , 11 @ @ <nl> + @ @ - 2289 , 6 + 2448 , 11 @ @ <nl> <nl> protected void func _ 72979 _ l ( ) <nl> { <nl> @ @ - 535 , 7 + 557 , 7 @ @ <nl> if ( ! this . field _ 73011 _ w . func _ 177495 _ o ( ) ) <nl> { <nl> if ( ! this . field _ 72995 _ K ) <nl> - @ @ - 2383 , 6 + 2539 , 7 @ @ <nl> + @ @ - 2383 , 6 + 2547 , 7 @ @ <nl> { <nl> this . field _ 72993 _ I . clear ( ) ; <nl> this . field _ 72984 _ F . func _ 76320 _ a ( " buildList " ) ; <nl> @ @ - 543 , 7 + 565 , 7 @ @ <nl> int i ; <nl> EntityPlayer entityplayer ; <nl> int j ; <nl> - @ @ - 2445 , 7 + 2602 , 7 @ @ <nl> + @ @ - 2445 , 7 + 2610 , 7 @ @ <nl> l + = p _ 147467 _ 1 _ ; <nl> i1 + = p _ 147467 _ 2 _ ; <nl> <nl> @ @ - 552 , 7 + 574 , 7 @ @ <nl> { <nl> EntityPlayer entityplayer = this . func _ 72977 _ a ( ( double ) l + 0 . 5D , ( double ) j1 + 0 . 5D , ( double ) i1 + 0 . 5D , 8 . 0D ) ; <nl> <nl> - @ @ - 2485 , 6 + 2642 , 11 @ @ <nl> + @ @ - 2485 , 6 + 2650 , 11 @ @ <nl> <nl> public boolean func _ 175670 _ e ( BlockPos p _ 175670 _ 1 _ , boolean p _ 175670 _ 2 _ ) <nl> { <nl> @ @ - 564 , 7 + 586 , 7 @ @ <nl> BiomeGenBase biomegenbase = this . func _ 180494 _ b ( p _ 175670 _ 1 _ ) ; <nl> float f = biomegenbase . func _ 180626 _ a ( p _ 175670 _ 1 _ ) ; <nl> <nl> - @ @ - 2526 , 6 + 2688 , 11 @ @ <nl> + @ @ - 2526 , 6 + 2696 , 11 @ @ <nl> <nl> public boolean func _ 175708 _ f ( BlockPos p _ 175708 _ 1 _ , boolean p _ 175708 _ 2 _ ) <nl> { <nl> @ @ - 576 , 7 + 598 , 7 @ @ <nl> BiomeGenBase biomegenbase = this . func _ 180494 _ b ( p _ 175708 _ 1 _ ) ; <nl> float f = biomegenbase . func _ 180626 _ a ( p _ 175708 _ 1 _ ) ; <nl> <nl> - @ @ - 2543 , 7 + 2710 , 7 @ @ <nl> + @ @ - 2543 , 7 + 2718 , 7 @ @ <nl> { <nl> Block block = this . func _ 180495 _ p ( p _ 175708 _ 1 _ ) . func _ 177230 _ c ( ) ; <nl> <nl> @ @ - 585 , 7 + 607 , 7 @ @ <nl> { <nl> return true ; <nl> } <nl> - @ @ - 2575 , 10 + 2742 , 11 @ @ <nl> + @ @ - 2575 , 10 + 2750 , 11 @ @ <nl> else <nl> { <nl> Block block = this . func _ 180495 _ p ( p _ 175638 _ 1 _ ) . func _ 177230 _ c ( ) ; <nl> @ @ - 600 , 7 + 622 , 7 @ @ <nl> { <nl> j = 1 ; <nl> } <nl> - @ @ - 2792 , 10 + 2960 , 10 @ @ <nl> + @ @ - 2792 , 10 + 2968 , 10 @ @ <nl> public List func _ 175674 _ a ( Entity p _ 175674 _ 1 _ , AxisAlignedBB p _ 175674 _ 2 _ , Predicate p _ 175674 _ 3 _ ) <nl> { <nl> ArrayList arraylist = Lists . newArrayList ( ) ; <nl> @ @ - 615 , 7 + 637 , 7 @ @ <nl> <nl> for ( int i1 = i ; i1 < = j ; + + i1 ) <nl> { <nl> - @ @ - 2854 , 10 + 3022 , 10 @ @ <nl> + @ @ - 2854 , 10 + 3030 , 10 @ @ <nl> <nl> public List func _ 175647 _ a ( Class p _ 175647 _ 1 _ , AxisAlignedBB p _ 175647 _ 2 _ , Predicate p _ 175647 _ 3 _ ) <nl> { <nl> @ @ - 630 , 7 + 652 , 7 @ @ <nl> ArrayList arraylist = Lists . newArrayList ( ) ; <nl> <nl> for ( int i1 = i ; i1 < = j ; + + i1 ) <nl> - @ @ - 2938 , 13 + 3106 , 16 @ @ <nl> + @ @ - 2938 , 13 + 3114 , 16 @ @ <nl> <nl> public void func _ 175650 _ b ( Collection p _ 175650 _ 1 _ ) <nl> { <nl> @ @ - 649 , 7 + 671 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 2957 , 7 + 3128 , 9 @ @ <nl> + @ @ - 2957 , 7 + 3136 , 9 @ @ <nl> { <nl> Block block1 = this . func _ 180495 _ p ( p _ 175716 _ 2 _ ) . func _ 177230 _ c ( ) ; <nl> AxisAlignedBB axisalignedbb = p _ 175716 _ 3 _ ? null : p _ 175716 _ 1 _ . func _ 180640 _ a ( this , p _ 175716 _ 2 _ , p _ 175716 _ 1 _ . func _ 176223 _ P ( ) ) ; <nl> @ @ - 660 , 7 + 682 , 7 @ @ <nl> } <nl> <nl> public int func _ 175627 _ a ( BlockPos p _ 175627 _ 1 _ , EnumFacing p _ 175627 _ 2 _ ) <nl> - @ @ - 3032 , 7 + 3205 , 7 @ @ <nl> + @ @ - 3032 , 7 + 3213 , 7 @ @ <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175651 _ 1 _ ) ; <nl> Block block = iblockstate . func _ 177230 _ c ( ) ; <nl> @ @ - 669 , 7 + 691 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 175640 _ z ( BlockPos p _ 175640 _ 1 _ ) <nl> - @ @ - 3160 , 7 + 3333 , 7 @ @ <nl> + @ @ - 3160 , 7 + 3341 , 7 @ @ <nl> <nl> public long func _ 72905 _ C ( ) <nl> { <nl> @ @ - 678 , 7 + 700 , 7 @ @ <nl> } <nl> <nl> public long func _ 82737 _ E ( ) <nl> - @ @ - 3170 , 17 + 3343 , 17 @ @ <nl> + @ @ - 3170 , 17 + 3351 , 17 @ @ <nl> <nl> public long func _ 72820 _ D ( ) <nl> { <nl> @ @ - 699 , 7 + 721 , 7 @ @ <nl> <nl> if ( ! this . func _ 175723 _ af ( ) . func _ 177746 _ a ( blockpos ) ) <nl> { <nl> - @ @ - 3192 , 7 + 3365 , 7 @ @ <nl> + @ @ - 3192 , 7 + 3373 , 7 @ @ <nl> <nl> public void func _ 175652 _ B ( BlockPos p _ 175652 _ 1 _ ) <nl> { <nl> @ @ - 708 , 7 + 730 , 7 @ @ <nl> } <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> - @ @ - 3212 , 12 + 3385 , 18 @ @ <nl> + @ @ - 3212 , 12 + 3393 , 18 @ @ <nl> <nl> if ( ! this . field _ 72996 _ f . contains ( p _ 72897 _ 1 _ ) ) <nl> { <nl> @ @ - 727 , 7 + 749 , 7 @ @ <nl> return true ; <nl> } <nl> <nl> - @ @ - 3307 , 8 + 3486 , 7 @ @ <nl> + @ @ - 3307 , 8 + 3494 , 7 @ @ <nl> <nl> public boolean func _ 180502 _ D ( BlockPos p _ 180502 _ 1 _ ) <nl> { <nl> @ @ - 737 , 7 + 759 , 7 @ @ <nl> } <nl> <nl> public MapStorage func _ 175693 _ T ( ) <nl> - @ @ - 3367 , 12 + 3545 , 12 @ @ <nl> + @ @ - 3367 , 12 + 3553 , 12 @ @ <nl> <nl> public int func _ 72800 _ K ( ) <nl> { <nl> @ @ - 752 , 7 + 774 , 7 @ @ <nl> } <nl> <nl> public Random func _ 72843 _ D ( int p _ 72843 _ 1 _ , int p _ 72843 _ 2 _ , int p _ 72843 _ 3 _ ) <nl> - @ @ - 3429 , 7 + 3607 , 7 @ @ <nl> + @ @ - 3429 , 7 + 3615 , 7 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public double func _ 72919 _ O ( ) <nl> { <nl> @ @ - 761 , 7 + 783 , 7 @ @ <nl> } <nl> <nl> public void func _ 175715 _ c ( int p _ 175715 _ 1 _ , BlockPos p _ 175715 _ 2 _ , int p _ 175715 _ 3 _ ) <nl> - @ @ - 3461 , 29 + 3639 , 21 @ @ <nl> + @ @ - 3461 , 29 + 3647 , 21 @ @ <nl> <nl> public void func _ 175666 _ e ( BlockPos p _ 175666 _ 1 _ , Block p _ 175666 _ 2 _ ) <nl> { <nl> @ @ - 798 , 7 + 820 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 3553 , 4 + 3723 , 82 @ @ <nl> + @ @ - 3553 , 4 + 3731 , 82 @ @ <nl> short short1 = 128 ; <nl> return k > = - short1 & & k < = short1 & & l > = - short1 & & l < = short1 ; <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> index cefbe13 . . 0640935 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> @ @ - 2 , 6 + 2 , 7 @ @ package net . minecraftforge . event ; <nl> <nl> import java . io . File ; <nl> import java . util . ArrayList ; <nl> + import java . util . EnumSet ; <nl> import java . util . HashMap ; <nl> import java . util . Iterator ; <nl> import java . util . List ; <nl> @ @ - 62 , 6 + 63 , 7 @ @ import net . minecraftforge . event . entity . player . PlayerUseItemEvent ; <nl> import net . minecraftforge . event . entity . player . PlayerWakeUpEvent ; <nl> import net . minecraftforge . event . entity . player . UseHoeEvent ; <nl> import net . minecraftforge . event . world . BlockEvent ; <nl> + import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; <nl> import net . minecraftforge . event . world . BlockEvent . MultiPlaceEvent ; <nl> import net . minecraftforge . event . world . BlockEvent . PlaceEvent ; <nl> import net . minecraftforge . event . world . ExplosionEvent ; <nl> @ @ - 89 , 6 + 91 , 13 @ @ public class ForgeEventFactory <nl> MinecraftForge . EVENT _ BUS . post ( event ) ; <nl> return event ; <nl> } <nl> + <nl> + public static NeighborNotifyEvent onNeighborNotify ( World world , BlockPos pos , IBlockState state , EnumSet < EnumFacing > notifiedSides ) <nl> + { <nl> + NeighborNotifyEvent event = new NeighborNotifyEvent ( world , pos , state , notifiedSides ) ; <nl> + MinecraftForge . EVENT _ BUS . post ( event ) ; <nl> + return event ; <nl> + } <nl> <nl> public static boolean doPlayerHarvestCheck ( EntityPlayer player , Block block , boolean success ) <nl> { <nl> diff - - git a / src / main / java / net / minecraftforge / event / world / BlockEvent . java b / src / main / java / net / minecraftforge / event / world / BlockEvent . java <nl> index 4315a28 . . 8e87f85 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / world / BlockEvent . java <nl> + + + b / src / main / java / net / minecraftforge / event / world / BlockEvent . java <nl> @ @ - 1 , 6 + 1 , 7 @ @ <nl> package net . minecraftforge . event . world ; <nl> <nl> import java . util . ArrayList ; <nl> + import java . util . EnumSet ; <nl> import java . util . List ; <nl> <nl> import net . minecraft . block . Block ; <nl> @ @ - 9 , 6 + 10 , 7 @ @ import net . minecraft . enchantment . EnchantmentHelper ; <nl> import net . minecraft . entity . player . EntityPlayer ; <nl> import net . minecraft . item . ItemStack ; <nl> import net . minecraft . util . BlockPos ; <nl> + import net . minecraft . util . EnumFacing ; <nl> import net . minecraft . world . World ; <nl> import net . minecraftforge . common . ForgeHooks ; <nl> import net . minecraftforge . common . util . BlockSnapshot ; <nl> @ @ - 177 , 4 + 179 , 31 @ @ public class BlockEvent extends Event <nl> return blockSnapshots ; <nl> } <nl> } <nl> + <nl> + / * * <nl> + * Fired when a physics update occurs on a block . This event acts as <nl> + * a way for mods to detect physics updates , in the same way a BUD switch <nl> + * does . This event is only called on the server . <nl> + * / <nl> + @ Cancelable <nl> + public static class NeighborNotifyEvent extends BlockEvent <nl> + { <nl> + private final EnumSet < EnumFacing > notifiedSides ; <nl> + <nl> + public NeighborNotifyEvent ( World world , BlockPos pos , IBlockState state , EnumSet < EnumFacing > notifiedSides ) <nl> + { <nl> + super ( world , pos , state ) ; <nl> + this . notifiedSides = notifiedSides ; <nl> + } <nl> + <nl> + / * * <nl> + * Gets a list of directions from the base block that updates will occur upon . <nl> + * <nl> + * @ return list of notified directions <nl> + * / <nl> + public EnumSet < EnumFacing > getNotifiedSides ( ) <nl> + { <nl> + return notifiedSides ; <nl> + } <nl> + } <nl> } <nl> diff - - git a / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java b / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java <nl> new file mode 100644 <nl> index 0000000 . . 9be69bf <nl> - - - / dev / null <nl> + + + b / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java <nl> @ @ - 0 , 0 + 1 , 30 @ @ <nl> + package net . minecraftforge . test ; <nl> + <nl> + import net . minecraftforge . common . MinecraftForge ; <nl> + import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; <nl> + import net . minecraftforge . fml . common . Mod ; <nl> + import net . minecraftforge . fml . common . Mod . EventHandler ; <nl> + import net . minecraftforge . fml . common . event . FMLInitializationEvent ; <nl> + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; <nl> + <nl> + @ Mod ( modid = " NeighborNotifyEventTest " , name = " NeighborNotifyEventTest " , version = " 0 . 0 . 0 " ) <nl> + public class NeighborNotifyEventTest <nl> + { <nl> + <nl> + public static final boolean ENABLE = false ; <nl> + <nl> + @ EventHandler <nl> + public void init ( FMLInitializationEvent event ) <nl> + { <nl> + MinecraftForge . EVENT _ BUS . register ( this ) ; <nl> + } <nl> + <nl> + @ SubscribeEvent <nl> + public void onNeighborNotify ( NeighborNotifyEvent event ) <nl> + { <nl> + if ( ENABLE ) { <nl> + System . out . println ( event . pos . toString ( ) ) ; <nl> + event . setCanceled ( true ) ; <nl> + } <nl> + } <nl> + }

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / entity / Entity . java . patch b / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 index a6d0faa . . 9e06213 100644 
 - - - a / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / Entity . java . patch 
 @ @ - 35 , 7 + 35 , 15 @ @ 
 } 
 
 public EntityType < ? > func _ 200600 _ R ( ) { 
 - @ @ - 324 , 6 + 327 , 7 @ @ 
 + @ @ - 290 , 6 + 293 , 7 @ @ 
 + 
 + public void func _ 70106 _ y ( ) { 
 + this . field _ 70128 _ L = true ; 
 + + this . invalidateCaps ( ) ; 
 + } 
 + 
 + public void func _ 184174 _ b ( boolean p _ 184174 _ 1 _ ) { 
 + @ @ - 324 , 6 + 328 , 7 @ @ 
 this . field _ 70165 _ t = p _ 70107 _ 1 _ ; 
 this . field _ 70163 _ u = p _ 70107 _ 3 _ ; 
 this . field _ 70161 _ v = p _ 70107 _ 5 _ ; 
 @ @ - 43 , 7 + 51 , 7 @ @ 
 float f = this . field _ 70130 _ N / 2 . 0F ; 
 float f1 = this . field _ 70131 _ O ; 
 this . func _ 174826 _ a ( new AxisAlignedBB ( p _ 70107 _ 1 _ - ( double ) f , p _ 70107 _ 3 _ , p _ 70107 _ 5 _ - ( double ) f , p _ 70107 _ 1 _ + ( double ) f , p _ 70107 _ 3 _ + ( double ) f1 , p _ 70107 _ 5 _ + ( double ) f ) ) ; 
 - @ @ - 794 , 6 + 798 , 7 @ @ 
 + @ @ - 794 , 6 + 799 , 7 @ @ 
 this . field _ 70165 _ t = ( axisalignedbb . field _ 72340 _ a + axisalignedbb . field _ 72336 _ d ) / 2 . 0D ; 
 this . field _ 70163 _ u = axisalignedbb . field _ 72338 _ b ; 
 this . field _ 70161 _ v = ( axisalignedbb . field _ 72339 _ c + axisalignedbb . field _ 72334 _ f ) / 2 . 0D ; 
 @ @ - 51 , 7 + 59 , 7 @ @ 
 } 
 
 protected SoundEvent func _ 184184 _ Z ( ) { 
 - @ @ - 845 , 7 + 850 , 7 @ @ 
 + @ @ - 845 , 7 + 851 , 7 @ @ 
 
 protected void func _ 180429 _ a ( BlockPos p _ 180429 _ 1 _ , IBlockState p _ 180429 _ 2 _ ) { 
 if ( ! p _ 180429 _ 2 _ . func _ 185904 _ a ( ) . func _ 76224 _ d ( ) ) { 
 @ @ - 60 , 7 + 68 , 7 @ @ 
 this . func _ 184185 _ a ( soundtype . func _ 185844 _ d ( ) , soundtype . func _ 185843 _ a ( ) * 0 . 15F , soundtype . func _ 185847 _ b ( ) ) ; 
 } 
 } 
 - @ @ - 1040 , 6 + 1045 , 7 @ @ 
 + @ @ - 1040 , 6 + 1046 , 7 @ @ 
 int k = MathHelper . func _ 76128 _ c ( this . field _ 70161 _ v ) ; 
 BlockPos blockpos = new BlockPos ( i , j , k ) ; 
 IBlockState iblockstate = this . field _ 70170 _ p . func _ 180495 _ p ( blockpos ) ; 
 @ @ - 68 , 7 + 76 , 7 @ @ 
 if ( iblockstate . func _ 185901 _ i ( ) ! = EnumBlockRenderType . INVISIBLE ) { 
 this . field _ 70170 _ p . func _ 195594 _ a ( new BlockParticleData ( Particles . field _ 197611 _ d , iblockstate ) , this . field _ 70165 _ t + ( ( double ) this . field _ 70146 _ Z . nextFloat ( ) - 0 . 5D ) * ( double ) this . field _ 70130 _ N , this . func _ 174813 _ aQ ( ) . field _ 72338 _ b + 0 . 1D , this . field _ 70161 _ v + ( ( double ) this . field _ 70146 _ Z . nextFloat ( ) - 0 . 5D ) * ( double ) this . field _ 70130 _ N , - this . field _ 70159 _ w * 4 . 0D , 1 . 5D , - this . field _ 70179 _ y * 4 . 0D ) ; 
 } 
 - @ @ - 1053 , 7 + 1059 , 7 @ @ 
 + @ @ - 1053 , 7 + 1060 , 7 @ @ 
 double d0 = this . field _ 70163 _ u + ( double ) this . func _ 70047 _ e ( ) ; 
 BlockPos blockpos = new BlockPos ( this . field _ 70165 _ t , d0 , this . field _ 70161 _ v ) ; 
 IFluidState ifluidstate = this . field _ 70170 _ p . func _ 204610 _ c ( blockpos ) ; 
 @ @ - 77 , 7 + 85 , 7 @ @ 
 } 
 } 
 
 - @ @ - 1122 , 6 + 1128 , 7 @ @ 
 + @ @ - 1122 , 6 + 1129 , 7 @ @ 
 this . field _ 70126 _ B - = 360 . 0F ; 
 } 
 
 @ @ - 85 , 7 + 93 , 7 @ @ 
 this . func _ 70107 _ b ( this . field _ 70165 _ t , this . field _ 70163 _ u , this . field _ 70161 _ v ) ; 
 this . func _ 70101 _ b ( p _ 70080 _ 7 _ , p _ 70080 _ 8 _ ) ; 
 } 
 - @ @ - 1370 , 6 + 1377 , 7 @ @ 
 + @ @ - 1370 , 6 + 1378 , 7 @ @ 
 if ( this . field _ 184238 _ ar ) { 
 p _ 189511 _ 1 _ . func _ 74757 _ a ( " Glowing " , this . field _ 184238 _ ar ) ; 
 } 
 @ @ - 93 , 7 + 101 , 7 @ @ 
 
 if ( ! this . field _ 184236 _ aF . isEmpty ( ) ) { 
 NBTTagList nbttaglist = new NBTTagList ( ) ; 
 - @ @ - 1381 , 6 + 1389 , 9 @ @ 
 + @ @ - 1381 , 6 + 1390 , 9 @ @ 
 p _ 189511 _ 1 _ . func _ 74782 _ a ( " Tags " , nbttaglist ) ; 
 } 
 
 @ @ - 103 , 7 + 111 , 7 @ @ 
 this . func _ 70014 _ b ( p _ 189511 _ 1 _ ) ; 
 if ( this . func _ 184207 _ aI ( ) ) { 
 NBTTagList nbttaglist1 = new NBTTagList ( ) ; 
 - @ @ - 1466 , 6 + 1477 , 8 @ @ 
 + @ @ - 1466 , 6 + 1478 , 8 @ @ 
 this . func _ 174810 _ b ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " Silent " ) ) ; 
 this . func _ 189654 _ d ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " NoGravity " ) ) ; 
 this . func _ 184195 _ f ( p _ 70020 _ 1 _ . func _ 74767 _ n ( " Glowing " ) ) ; 
 @ @ - 112 , 7 + 120 , 7 @ @ 
 if ( p _ 70020 _ 1 _ . func _ 150297 _ b ( " Tags " , 9 ) ) { 
 this . field _ 184236 _ aF . clear ( ) ; 
 NBTTagList nbttaglist1 = p _ 70020 _ 1 _ . func _ 150295 _ c ( " Tags " , 8 ) ; 
 - @ @ - 1546 , 6 + 1559 , 8 @ @ 
 + @ @ - 1546 , 6 + 1560 , 8 @ @ 
 } else { 
 EntityItem entityitem = new EntityItem ( this . field _ 70170 _ p , this . field _ 70165 _ t , this . field _ 70163 _ u + ( double ) p _ 70099 _ 2 _ , this . field _ 70161 _ v , p _ 70099 _ 1 _ ) ; 
 entityitem . func _ 174869 _ p ( ) ; 
 @ @ - 121 , 7 + 129 , 7 @ @ 
 this . field _ 70170 _ p . func _ 72838 _ d ( entityitem ) ; 
 return entityitem ; 
 } 
 - @ @ - 1595 , 6 + 1610 , 7 @ @ 
 + @ @ - 1595 , 6 + 1611 , 7 @ @ 
 this . field _ 70159 _ w = 0 . 0D ; 
 this . field _ 70181 _ x = 0 . 0D ; 
 this . field _ 70179 _ y = 0 . 0D ; 
 @ @ - 129 , 7 + 137 , 7 @ @ 
 this . func _ 70071 _ h _ ( ) ; 
 if ( this . func _ 184218 _ aH ( ) ) { 
 entity . func _ 184232 _ k ( this ) ; 
 - @ @ - 1636 , 6 + 1652 , 7 @ @ 
 + @ @ - 1636 , 6 + 1653 , 7 @ @ 
 } 
 } 
 
 @ @ - 137 , 7 + 145 , 7 @ @ 
 if ( p _ 184205 _ 2 _ | | this . func _ 184228 _ n ( p _ 184205 _ 1 _ ) & & p _ 184205 _ 1 _ . func _ 184219 _ q ( this ) ) { 
 if ( this . func _ 184218 _ aH ( ) ) { 
 this . func _ 184210 _ p ( ) ; 
 - @ @ - 1663 , 6 + 1680 , 7 @ @ 
 + @ @ - 1663 , 6 + 1681 , 7 @ @ 
 public void func _ 184210 _ p ( ) { 
 if ( this . field _ 184239 _ as ! = null ) { 
 Entity entity = this . field _ 184239 _ as ; 
 @ @ - 145 , 7 + 153 , 7 @ @ 
 this . field _ 184239 _ as = null ; 
 entity . func _ 184225 _ p ( this ) ; 
 } 
 - @ @ - 1789 , 10 + 1807 , 15 @ @ 
 + @ @ - 1789 , 10 + 1808 , 15 @ @ 
 return ! this . func _ 184188 _ bt ( ) . isEmpty ( ) ; 
 } 
 
 @ @ - 161 , 7 + 169 , 7 @ @ 
 public boolean func _ 70093 _ af ( ) { 
 return this . func _ 70083 _ f ( 1 ) ; 
 } 
 - @ @ - 2053 , 6 + 2076 , 14 @ @ 
 + @ @ - 2053 , 6 + 2077 , 14 @ @ 
 
 @ Nullable 
 public Entity func _ 184204 _ a ( int p _ 184204 _ 1 _ ) { 
 @ @ - 176 , 7 + 184 , 7 @ @ 
 if ( ! this . field _ 70170 _ p . field _ 72995 _ K & & ! this . field _ 70128 _ L ) { 
 this . field _ 70170 _ p . field _ 72984 _ F . func _ 76320 _ a ( " changeDimension " ) ; 
 MinecraftServer minecraftserver = this . func _ 184102 _ h ( ) ; 
 - @ @ - 2060 , 7 + 2091 , 7 @ @ 
 + @ @ - 2060 , 7 + 2092 , 7 @ @ 
 WorldServer worldserver = minecraftserver . func _ 71218 _ a ( i ) ; 
 WorldServer worldserver1 = minecraftserver . func _ 71218 _ a ( p _ 184204 _ 1 _ ) ; 
 this . field _ 71093 _ bK = p _ 184204 _ 1 _ ; 
 @ @ - 185 , 7 + 193 , 7 @ @ 
 worldserver1 = minecraftserver . func _ 200667 _ a ( DimensionType . OVERWORLD ) ; 
 this . field _ 71093 _ bK = 0 ; 
 } 
 - @ @ - 2069 , 16 + 2100 , 17 @ @ 
 + @ @ - 2069 , 16 + 2101 , 17 @ @ 
 this . field _ 70128 _ L = false ; 
 this . field _ 70170 _ p . field _ 72984 _ F . func _ 76320 _ a ( " reposition " ) ; 
 BlockPos blockpos ; 
 @ @ - 208 , 7 + 216 , 7 @ @ 
 d0 = MathHelper . func _ 151237 _ a ( d0 * 8 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177726 _ b ( ) + 16 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177728 _ d ( ) - 16 . 0D ) ; 
 d1 = MathHelper . func _ 151237 _ a ( d1 * 8 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177736 _ c ( ) + 16 . 0D , worldserver1 . func _ 175723 _ af ( ) . func _ 177733 _ e ( ) - 16 . 0D ) ; 
 } 
 - @ @ - 2087 , 8 + 2119 , 7 @ @ 
 + @ @ - 2087 , 8 + 2120 , 7 @ @ 
 d1 = ( double ) MathHelper . func _ 76125 _ a ( ( int ) d1 , - 29999872 , 29999872 ) ; 
 float f = this . field _ 70177 _ z ; 
 this . func _ 70012 _ b ( d0 , this . field _ 70163 _ u , d1 , 90 . 0F , 0 . 0F ) ; 
 @ @ - 218 , 7 + 226 , 7 @ @ 
 blockpos = new BlockPos ( this ) ; 
 } 
 
 - @ @ - 2097 , 7 + 2128 , 7 @ @ 
 + @ @ - 2097 , 7 + 2129 , 7 @ @ 
 Entity entity = this . func _ 200600 _ R ( ) . func _ 200721 _ a ( worldserver1 ) ; 
 if ( entity ! = null ) { 
 entity . func _ 180432 _ n ( this ) ; 
 @ @ - 227 , 7 + 235 , 7 @ @ 
 BlockPos blockpos1 = worldserver1 . func _ 205770 _ a ( Heightmap . Type . MOTION _ BLOCKING _ NO _ LEAVES , worldserver1 . func _ 175694 _ M ( ) ) ; 
 entity . func _ 174828 _ a ( blockpos1 , entity . field _ 70177 _ z , entity . field _ 70125 _ A ) ; 
 } else { 
 - @ @ - 2591 , 4 + 2622 , 49 @ @ 
 + @ @ - 2591 , 4 + 2623 , 49 @ @ 
 public double func _ 212107 _ bY ( ) { 
 return this . field _ 211517 _ W ; 
 } 
 @ @ - 259 , 7 + 267 , 7 @ @ 
 + & & ( this instanceof EntityPlayer | | net . minecraftforge . event . ForgeEventFactory . getMobGriefingEvent ( field _ 70170 _ p , this ) ) 
 + & & this . field _ 70130 _ N * this . field _ 70130 _ N * this . field _ 70131 _ O > 0 . 512F ; 
 + } 
 - + 
 + + 
 + / * = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = Forge Start = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = * / 
 + / * * 
 + * Internal use for keeping track of entities that are tracked by a world , to 
 diff - - git a / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch b / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch 
 index 9314809 . . e8ed1d6 100644 
 - - - a / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / EntityLivingBase . java . patch 
 @ @ - 369 , 7 + 369 , 7 @ @ 
 this . field _ 184627 _ bm . func _ 77974 _ b ( this . field _ 70170 _ p , this , this . func _ 184605 _ cv ( ) ) ; 
 } 
 
 - @ @ - 2346 , 4 + 2406 , 53 @ @ 
 + @ @ - 2346 , 4 + 2406 , 60 @ @ 
 @ OnlyIn ( Dist . CLIENT ) 
 public void func _ 191987 _ a ( BlockPos p _ 191987 _ 1 _ , boolean p _ 191987 _ 2 _ ) { 
 } 
 @ @ - 415 , 11 + 415 , 18 @ @ 
 + 
 + @ Override 
 + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable EnumFacing facing ) { 
 - + if ( capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + + if ( ! this . field _ 70128 _ L & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + if ( facing = = null ) return handlers [ 2 ] . cast ( ) ; 
 + else if ( facing . func _ 176740 _ k ( ) . func _ 200128 _ b ( ) ) return handlers [ 0 ] . cast ( ) ; 
 + else if ( facing . func _ 176740 _ k ( ) . func _ 176722 _ c ( ) ) return handlers [ 1 ] . cast ( ) ; 
 + } 
 + return super . getCapability ( capability , facing ) ; 
 + } 
 + + 
 + + @ Override 
 + + public void func _ 70106 _ y ( ) { 
 + + super . func _ 70106 _ y ( ) ; 
 + + for ( int x = 0 ; x < handlers . length ; x + + ) 
 + + handlers [ x ] . invalidate ( ) ; 
 + + } 
 } 
 diff - - git a / patches / minecraft / net / minecraft / entity / item / EntityMinecartContainer . java . patch b / patches / minecraft / net / minecraft / entity / item / EntityMinecartContainer . java . patch 
 index a74aeb7 . . 03a5b5c 100644 
 - - - a / patches / minecraft / net / minecraft / entity / item / EntityMinecartContainer . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / item / EntityMinecartContainer . java . patch 
 @ @ - 14 , 7 + 14 , 15 @ @ 
 } 
 
 public void func _ 70106 _ y ( ) { 
 - @ @ - 163 , 6 + 164 , 7 @ @ 
 + @ @ - 131 , 6 + 132 , 7 @ @ 
 + } 
 + 
 + super . func _ 70106 _ y ( ) ; 
 + + itemHandler . invalidate ( ) ; 
 + } 
 + 
 + public void func _ 184174 _ b ( boolean p _ 184174 _ 1 _ ) { 
 + @ @ - 163 , 6 + 165 , 7 @ @ 
 } 
 
 public boolean func _ 184230 _ a ( EntityPlayer p _ 184230 _ 1 _ , EnumHand p _ 184230 _ 2 _ ) { 
 @ @ - 22 , 7 + 30 , 7 @ @ 
 if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) { 
 p _ 184230 _ 1 _ . func _ 71007 _ a ( this ) ; 
 } 
 - @ @ - 215 , 9 + 217 , 9 @ @ 
 + @ @ - 215 , 9 + 218 , 9 @ @ 
 random = new Random ( this . field _ 184291 _ d ) ; 
 } 
 
 @ @ - 34 , 7 + 42 , 7 @ @ 
 } 
 
 loottable . func _ 186460 _ a ( this , random , lootcontext $ builder . func _ 186471 _ a ( ) ) ; 
 - @ @ - 238 , 4 + 240 , 13 @ @ 
 + @ @ - 238 , 4 + 241 , 13 @ @ 
 public ResourceLocation func _ 184276 _ b ( ) { 
 return this . field _ 184290 _ c ; 
 } 
 @ @ - 43 , 7 + 51 , 7 @ @ 
 + 
 + @ Override 
 + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable net . minecraft . util . EnumFacing facing ) { 
 - + if ( capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) 
 + + if ( ! this . field _ 70128 _ L & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) 
 + return itemHandler . cast ( ) ; 
 + return super . getCapability ( capability , facing ) ; 
 + } 
 diff - - git a / patches / minecraft / net / minecraft / entity / passive / AbstractHorse . java . patch b / patches / minecraft / net / minecraft / entity / passive / AbstractHorse . java . patch 
 index dffc26b . . d3f460b 100644 
 - - - a / patches / minecraft / net / minecraft / entity / passive / AbstractHorse . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / passive / AbstractHorse . java . patch 
 @ @ - 8 , 7 + 8 , 7 @ @ 
 } 
 
 protected void func _ 110232 _ cE ( ) { 
 - @ @ - 960 , 4 + 961 , 13 @ @ 
 + @ @ - 960 , 4 + 961 , 19 @ @ 
 
 return p _ 204210 _ 2 _ ; 
 } 
 @ @ - 17 , 8 + 17 , 14 @ @ 
 + 
 + @ Override 
 + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable net . minecraft . util . EnumFacing facing ) { 
 - + if ( capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY & & itemHandler ! = null ) 
 + + if ( ! this . field _ 70128 _ L & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY & & itemHandler ! = null ) 
 + return itemHandler . cast ( ) ; 
 + return super . getCapability ( capability , facing ) ; 
 + } 
 + + 
 + + @ Override 
 + + public void func _ 70106 _ y ( ) { 
 + + super . func _ 70106 _ y ( ) ; 
 + + itemHandler . invalidate ( ) ; 
 + + } 
 } 
 diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntity . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntity . java . patch 
 index e4921ec . . 5f71bf3 100644 
 - - - a / patches / minecraft / net / minecraft / tileentity / TileEntity . java . patch 
 + + + b / patches / minecraft / net / minecraft / tileentity / TileEntity . java . patch 
 @ @ - 61 , 7 + 61 , 15 @ @ 
 public double func _ 145835 _ a ( double p _ 145835 _ 1 _ , double p _ 145835 _ 3 _ , double p _ 145835 _ 5 _ ) { 
 double d0 = ( double ) this . field _ 174879 _ c . func _ 177958 _ n ( ) + 0 . 5D - p _ 145835 _ 1 _ ; 
 double d1 = ( double ) this . field _ 174879 _ c . func _ 177956 _ o ( ) + 0 . 5D - p _ 145835 _ 3 _ ; 
 - @ @ - 179 , 4 + 187 , 11 @ @ 
 + @ @ - 138 , 6 + 146 , 7 @ @ 
 + 
 + public void func _ 145843 _ s ( ) { 
 + this . field _ 145846 _ f = true ; 
 + + this . invalidateCaps ( ) ; 
 + } 
 + 
 + public void func _ 145829 _ t ( ) { 
 + @ @ - 179 , 4 + 188 , 11 @ @ 
 public TileEntityType < ? > func _ 200662 _ C ( ) { 
 return this . field _ 200663 _ e ; 
 } 
 diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityBrewingStand . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityBrewingStand . java . patch 
 index 120cb47 . . 7ac2323 100644 
 - - - a / patches / minecraft / net / minecraft / tileentity / TileEntityBrewingStand . java . patch 
 + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityBrewingStand . java . patch 
 @ @ - 63 , 7 + 63 , 7 @ @ 
 + 
 + @ Override 
 + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable EnumFacing facing ) { 
 - + if ( facing ! = null & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + + if ( ! this . field _ 145846 _ f & & facing ! = null & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + if ( facing = = EnumFacing . UP ) 
 + return handlers [ 0 ] . cast ( ) ; 
 + else if ( facing = = EnumFacing . DOWN ) 
 @ @ - 78 , 6 + 78 , 6 @ @ 
 + public void func _ 145843 _ s ( ) { 
 + super . func _ 145843 _ s ( ) ; 
 + for ( int x = 0 ; x < handlers . length ; x + + ) 
 - + handlers [ x ] . invalidate ( ) ; 
 + + handlers [ x ] . invalidate ( ) ; 
 + } 
 } 
 diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityChest . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityChest . java . patch 
 index f3e3ac7 . . 9dd0421 100644 
 - - - a / patches / minecraft / net / minecraft / tileentity / TileEntityChest . java . patch 
 + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityChest . java . patch 
 @ @ - 17 , 7 + 17 , 7 @ @ 
 TileEntity tileentity = p _ 195481 _ 0 _ . func _ 175625 _ s ( p _ 195481 _ 1 _ ) ; 
 if ( tileentity instanceof TileEntityChest ) { 
 return ( ( TileEntityChest ) tileentity ) . field _ 145987 _ o ; 
 - @ @ - 235 , 4 + 236 , 50 @ @ 
 + @ @ - 235 , 4 + 236 , 57 @ @ 
 p _ 199722 _ 0 _ . func _ 199721 _ a ( p _ 199722 _ 1 _ . func _ 190576 _ q ( ) ) ; 
 p _ 199722 _ 1 _ . func _ 199721 _ a ( nonnulllist ) ; 
 } 
 @ @ - 33 , 7 + 33 , 7 @ @ 
 + 
 + @ Override 
 + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > cap , EnumFacing side ) { 
 - + if ( cap = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + + if ( ! this . field _ 145846 _ f & & cap = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + if ( this . chestHandler = = null ) { 
 + this . chestHandler = net . minecraftforge . common . util . LazyOptional . of ( this : : createHandler ) ; 
 + } 
 @ @ - 67 , 4 + 67 , 11 @ @ 
 + } 
 + return new net . minecraftforge . items . wrapper . InvWrapper ( this ) ; 
 + } 
 + + 
 + + @ Override 
 + + public void func _ 145843 _ s ( ) { 
 + + super . func _ 145843 _ s ( ) ; 
 + + if ( chestHandler ! = null ) 
 + + chestHandler . invalidate ( ) ; 
 + + } 
 } 
 diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityFurnace . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityFurnace . java . patch 
 index d3b76d1 . . 798adfa 100644 
 - - - a / patches / minecraft / net / minecraft / tileentity / TileEntityFurnace . java . patch 
 + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityFurnace . java . patch 
 @ @ - 101 , 7 + 101 , 7 @ @ 
 + 
 + @ Override 
 + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , @ Nullable EnumFacing facing ) { 
 - + if ( facing ! = null & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + + if ( ! this . field _ 145846 _ f & & facing ! = null & & capability = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + if ( facing = = EnumFacing . UP ) 
 + return handlers [ 0 ] . cast ( ) ; 
 + else if ( facing = = EnumFacing . DOWN ) 
 @ @ - 116 , 6 + 116 , 6 @ @ 
 + public void func _ 145843 _ s ( ) { 
 + super . func _ 145843 _ s ( ) ; 
 + for ( int x = 0 ; x < handlers . length ; x + + ) 
 - + handlers [ x ] . invalidate ( ) ; 
 + + handlers [ x ] . invalidate ( ) ; 
 + } 
 } 
 diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityLockable . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityLockable . java . patch 
 index 376587f . . fefef4c 100644 
 - - - a / patches / minecraft / net / minecraft / tileentity / TileEntityLockable . java . patch 
 + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityLockable . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - a / net / minecraft / tileentity / TileEntityLockable . java 
 + + + b / net / minecraft / tileentity / TileEntityLockable . java 
 - @ @ - 36 , 4 + 36 , 17 @ @ 
 + @ @ - 36 , 4 + 36 , 23 @ @ 
 public void func _ 174892 _ a ( LockCode p _ 174892 _ 1 _ ) { 
 this . field _ 174901 _ a = p _ 174892 _ 1 _ ; 
 } 
 @ @ - 12 , 9 + 12 , 15 @ @ 
 + 
 + @ javax . annotation . Nullable 
 + public < T > net . minecraftforge . common . util . LazyOptional < T > getCapability ( net . minecraftforge . common . capabilities . Capability < T > cap , @ javax . annotation . Nullable net . minecraft . util . EnumFacing side ) { 
 - + if ( cap = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + + if ( ! this . field _ 145846 _ f & & cap = = net . minecraftforge . items . CapabilityItemHandler . ITEM _ HANDLER _ CAPABILITY ) { 
 + return itemHandler . cast ( ) ; 
 + } 
 + return super . getCapability ( cap , side ) ; 
 + } 
 + + 
 + + @ Override 
 + + public void func _ 145843 _ s ( ) { 
 + + super . func _ 145843 _ s ( ) ; 
 + + itemHandler . invalidate ( ) ; 
 + + } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / common / capabilities / CapabilityDispatcher . java b / src / main / java / net / minecraftforge / common / capabilities / CapabilityDispatcher . java 
 index 14b8819 . . 75841af 100644 
 - - - a / src / main / java / net / minecraftforge / common / capabilities / CapabilityDispatcher . java 
 + + + b / src / main / java / net / minecraftforge / common / capabilities / CapabilityDispatcher . java 
 @ @ - 52 , 18 + 52 , 20 @ @ public final class CapabilityDispatcher implements INBTSerializable < NBTTagCompou 
 private ICapabilityProvider [ ] caps ; 
 private INBTSerializable < INBTBase > [ ] writers ; 
 private String [ ] names ; 
 + private final List < Runnable > listeners ; 
 
 - public CapabilityDispatcher ( Map < ResourceLocation , ICapabilityProvider > list ) 
 + public CapabilityDispatcher ( Map < ResourceLocation , ICapabilityProvider > list , List < Runnable > listeners ) 
 { 
 - this ( list , null ) ; 
 + this ( list , listeners , null ) ; 
 } 
 
 @ SuppressWarnings ( " unchecked " ) 
 - public CapabilityDispatcher ( Map < ResourceLocation , ICapabilityProvider > list , @ Nullable ICapabilityProvider parent ) 
 + public CapabilityDispatcher ( Map < ResourceLocation , ICapabilityProvider > list , List < Runnable > listeners , @ Nullable ICapabilityProvider parent ) 
 { 
 List < ICapabilityProvider > lstCaps = Lists . newArrayList ( ) ; 
 List < INBTSerializable < INBTBase > > lstWriters = Lists . newArrayList ( ) ; 
 List < String > lstNames = Lists . newArrayList ( ) ; 
 + this . listeners = listeners ; 
 
 if ( parent ! = null ) / / Parents go first ! 
 { 
 @ @ - 134 , 4 + 136 , 9 @ @ public final class CapabilityDispatcher implements INBTSerializable < NBTTagCompou 
 if ( this . writers . length = = 0 ) return other . writers . length = = 0 ; 
 return this . serializeNBT ( ) . equals ( other . serializeNBT ( ) ) ; 
 } 
 + 
 + public void invalidate ( ) 
 + { 
 + this . listeners . forEach ( Runnable : : run ) ; 
 + } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / common / capabilities / CapabilityProvider . java b / src / main / java / net / minecraftforge / common / capabilities / CapabilityProvider . java 
 index b60d2b9 . . 7bba644 100644 
 - - - a / src / main / java / net / minecraftforge / common / capabilities / CapabilityProvider . java 
 + + + b / src / main / java / net / minecraftforge / common / capabilities / CapabilityProvider . java 
 @ @ - 35 , 24 + 35 , 25 @ @ public abstract class CapabilityProvider < B extends CapabilityProvider < B > > implem 
 { 
 private final @ Nonnull Class < B > baseClass ; 
 private @ Nullable CapabilityDispatcher capabilities ; 
 - 
 + private boolean valid = true ; 
 + 
 protected CapabilityProvider ( Class < B > baseClass ) 
 { 
 this . baseClass = baseClass ; 
 } 
 - 
 + 
 protected final void gatherCapabilities ( ) { gatherCapabilities ( null ) ; } 
 - 
 + 
 protected final void gatherCapabilities ( @ Nullable ICapabilityProvider parent ) 
 { 
 this . capabilities = ForgeEventFactory . gatherCapabilities ( baseClass , this , parent ) ; 
 } 
 - 
 + 
 protected final @ Nullable CapabilityDispatcher getCapabilities ( ) 
 { 
 return this . capabilities ; 
 } 
 - 
 + 
 public final boolean areCapsCompatible ( CapabilityProvider < B > other ) 
 { 
 return areCapsCompatible ( other . getCapabilities ( ) ) ; 
 @ @ - 71 , 23 + 72 , 23 @ @ public abstract class CapabilityProvider < B extends CapabilityProvider < B > > implem 
 { 
 return other . areCompatible ( null ) ; 
 } 
 - } 
 + } 
 else 
 { 
 return disp . areCompatible ( other ) ; 
 } 
 } 
 - 
 + 
 protected final @ Nullable NBTTagCompound serializeCaps ( ) 
 { 
 final CapabilityDispatcher disp = getCapabilities ( ) ; 
 - if ( disp ! = null ) 
 + if ( disp ! = null ) 
 { 
 return disp . serializeNBT ( ) ; 
 } 
 return null ; 
 } 
 - 
 + 
 protected final void deserializeCaps ( NBTTagCompound tag ) 
 { 
 final CapabilityDispatcher disp = getCapabilities ( ) ; 
 @ @ - 97 , 11 + 98 , 19 @ @ public abstract class CapabilityProvider < B extends CapabilityProvider < B > > implem 
 } 
 } 
 
 + protected void invalidateCaps ( ) 
 + { 
 + this . valid = false ; 
 + final CapabilityDispatcher disp = getCapabilities ( ) ; 
 + if ( disp ! = null ) 
 + disp . invalidate ( ) ; 
 + } 
 + 
 @ Override 
 @ Nonnull 
 public < T > LazyOptional < T > getCapability ( @ Nonnull Capability < T > cap , @ Nullable EnumFacing side ) 
 { 
 final CapabilityDispatcher disp = getCapabilities ( ) ; 
 - return disp = = null ? LazyOptional . empty ( ) : disp . getCapability ( cap , side ) ; 
 + return ! valid | | disp = = null ? LazyOptional . empty ( ) : disp . getCapability ( cap , side ) ; 
 } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java b / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java 
 index 5c61443 . . d150d56 100644 
 - - - a / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java 
 + + + b / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java 
 @ @ - 20 , 8 + 20 , 10 @ @ 
 package net . minecraftforge . event ; 
 
 import java . util . Collections ; 
 + import java . util . List ; 
 import java . util . Map ; 
 
 + import com . google . common . collect . Lists ; 
 import com . google . common . collect . Maps ; 
 
 import net . minecraft . util . ResourceLocation ; 
 @ @ - 40 , 6 + 42 , 8 @ @ public class AttachCapabilitiesEvent < T > extends GenericEvent < T > 
 private final T obj ; 
 private final Map < ResourceLocation , ICapabilityProvider > caps = Maps . newLinkedHashMap ( ) ; 
 private final Map < ResourceLocation , ICapabilityProvider > view = Collections . unmodifiableMap ( caps ) ; 
 + private final List < Runnable > listeners = Lists . newArrayList ( ) ; 
 + private final List < Runnable > listenersView = Collections . unmodifiableList ( listeners ) ; 
 
 public AttachCapabilitiesEvent ( Class < T > type , T obj ) 
 { 
 @ @ - 77 , 4 + 81 , 20 @ @ public class AttachCapabilitiesEvent < T > extends GenericEvent < T > 
 { 
 return view ; 
 } 
 + 
 + 
 + / * * 
 + * Adds a callback that is fired when the attacked object is invalidated . 
 + * Such as a Entity / TileEntity being removed from world . 
 + * All attached providers should invalidate all of their held capability instances . 
 + * / 
 + public void addListener ( Runnable listener ) 
 + { 
 + this . listeners . add ( listener ) ; 
 + } 
 + 
 + public List < Runnable > getListeners ( ) 
 + { 
 + return this . listenersView ; 
 + } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 index 3e88181 . . c21d0ce 100644 
 - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 @ @ - 569 , 7 + 569 , 7 @ @ public class ForgeEventFactory 
 private static CapabilityDispatcher gatherCapabilities ( AttachCapabilitiesEvent < ? > event , @ Nullable ICapabilityProvider parent ) 
 { 
 MinecraftForge . EVENT _ BUS . post ( event ) ; 
 - return event . getCapabilities ( ) . size ( ) > 0 | | parent ! = null ? new CapabilityDispatcher ( event . getCapabilities ( ) , parent ) : null ; 
 + return event . getCapabilities ( ) . size ( ) > 0 | | parent ! = null ? new CapabilityDispatcher ( event . getCapabilities ( ) , event . getListeners ( ) , parent ) : null ; 
 } 
 
 public static boolean fireSleepingLocationCheck ( EntityPlayer player , BlockPos sleepingLocation ) 
 @ @ - 634 , 7 + 634 , 7 @ @ public class ForgeEventFactory 
 { 
 return MinecraftForge . EVENT _ BUS . post ( new ProjectileImpactEvent . Throwable ( throwable , ray ) ) ; 
 } 
 - 
 + 
 public static boolean onReplaceBiomeBlocks ( IChunkGenerator < ? > gen , IChunk chunk , IWorld world ) 
 { 
 ChunkGeneratorEvent . ReplaceBiomeBlocks event = new ChunkGeneratorEvent . ReplaceBiomeBlocks ( gen , chunk , world ) ;

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch b / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch 
 new file mode 100644 
 index 0000000 . . b2ed5d2 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch 
 @ @ - 0 , 0 + 1 , 11 @ @ 
 + - - - . . / src - base / minecraft / net / minecraft / block / BlockRedstoneDiode . java 
 + + + + . . / src - work / minecraft / net / minecraft / block / BlockRedstoneDiode . java 
 + @ @ - 200 , 6 + 200 , 8 @ @ 
 + { 
 + EnumFacing enumfacing = ( EnumFacing ) p _ 176400 _ 3 _ . func _ 177229 _ b ( field _ 176387 _ N ) ; 
 + BlockPos blockpos1 = p _ 176400 _ 2 _ . func _ 177972 _ a ( enumfacing . func _ 176734 _ d ( ) ) ; 
 + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( p _ 176400 _ 1 _ , p _ 176400 _ 2 _ , p _ 176400 _ 1 _ . func _ 180495 _ p ( p _ 176400 _ 2 _ ) , java . util . EnumSet . of ( enumfacing . func _ 176734 _ d ( ) ) ) . isCanceled ( ) ) 
 + + return ; 
 + p _ 176400 _ 1 _ . func _ 180496 _ d ( blockpos1 , this ) ; 
 + p _ 176400 _ 1 _ . func _ 175695 _ a ( blockpos1 , this , enumfacing ) ; 
 + } 
 diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch 
 new file mode 100644 
 index 0000000 . . 4c1454b 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch 
 @ @ - 0 , 0 + 1 , 22 @ @ 
 + - - - . . / src - base / minecraft / net / minecraft / tileentity / TileEntityPiston . java 
 + + + + . . / src - work / minecraft / net / minecraft / tileentity / TileEntityPiston . java 
 + @ @ - 151 , 7 + 151 , 8 @ @ 
 + if ( this . field _ 145850 _ b . func _ 180495 _ p ( this . field _ 174879 _ c ) . func _ 177230 _ c ( ) = = Blocks . field _ 180384 _ M ) 
 + { 
 + this . field _ 145850 _ b . func _ 180501 _ a ( this . field _ 174879 _ c , this . field _ 174932 _ a , 3 ) ; 
 + - this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; 
 + + if ( ! net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( field _ 145850 _ b , field _ 174879 _ c , field _ 145850 _ b . func _ 180495 _ p ( field _ 174879 _ c ) , java . util . EnumSet . noneOf ( EnumFacing . class ) ) . isCanceled ( ) ) 
 + + this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; 
 + } 
 + } 
 + } 
 + @ @ - 169 , 7 + 170 , 8 @ @ 
 + if ( this . field _ 145850 _ b . func _ 180495 _ p ( this . field _ 174879 _ c ) . func _ 177230 _ c ( ) = = Blocks . field _ 180384 _ M ) 
 + { 
 + this . field _ 145850 _ b . func _ 180501 _ a ( this . field _ 174879 _ c , this . field _ 174932 _ a , 3 ) ; 
 + - this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; 
 + + if ( ! net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( field _ 145850 _ b , field _ 174879 _ c , field _ 145850 _ b . func _ 180495 _ p ( field _ 174879 _ c ) , java . util . EnumSet . noneOf ( EnumFacing . class ) ) . isCanceled ( ) ) 
 + + this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; 
 + } 
 + } 
 + else 
 diff - - git a / patches / minecraft / net / minecraft / world / World . java . patch b / patches / minecraft / net / minecraft / world / World . java . patch 
 index 1da6baf . . 3d4fc0b 100644 
 - - - a / patches / minecraft / net / minecraft / world / World . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / World . java . patch 
 @ @ - 162 , 7 + 162 , 29 @ @ 
 } 
 } 
 } 
 - @ @ - 782 , 7 + 832 , 7 @ @ 
 + @ @ - 408 , 6 + 458 , 9 @ @ 
 + 
 + public void func _ 175685 _ c ( BlockPos p _ 175685 _ 1 _ , Block p _ 175685 _ 2 _ ) 
 + { 
 + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( this , p _ 175685 _ 1 _ , this . func _ 180495 _ p ( p _ 175685 _ 1 _ ) , java . util . EnumSet . allOf ( EnumFacing . class ) ) . isCanceled ( ) ) 
 + + return ; 
 + + 
 + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177976 _ e ( ) , p _ 175685 _ 2 _ ) ; 
 + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177974 _ f ( ) , p _ 175685 _ 2 _ ) ; 
 + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177977 _ b ( ) , p _ 175685 _ 2 _ ) ; 
 + @ @ - 418 , 6 + 471 , 11 @ @ 
 + 
 + public void func _ 175695 _ a ( BlockPos p _ 175695 _ 1 _ , Block p _ 175695 _ 2 _ , EnumFacing p _ 175695 _ 3 _ ) 
 + { 
 + + java . util . EnumSet < EnumFacing > directions = java . util . EnumSet . allOf ( EnumFacing . class ) ; 
 + + directions . remove ( p _ 175695 _ 3 _ ) ; 
 + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( this , p _ 175695 _ 1 _ , this . func _ 180495 _ p ( p _ 175695 _ 1 _ ) , directions ) . isCanceled ( ) ) 
 + + return ; 
 + + 
 + if ( p _ 175695 _ 3 _ ! = EnumFacing . WEST ) 
 + { 
 + this . func _ 180496 _ d ( p _ 175695 _ 1 _ . func _ 177976 _ e ( ) , p _ 175695 _ 2 _ ) ; 
 + @ @ - 782 , 7 + 840 , 7 @ @ 
 
 public boolean func _ 72935 _ r ( ) 
 { 
 @ @ - 171 , 7 + 193 , 7 @ @ 
 } 
 
 public MovingObjectPosition func _ 72933 _ a ( Vec3 p _ 72933 _ 1 _ , Vec3 p _ 72933 _ 2 _ ) 
 - @ @ - 978 , 6 + 1028 , 8 @ @ 
 + @ @ - 978 , 6 + 1036 , 8 @ @ 
 
 public void func _ 72956 _ a ( Entity p _ 72956 _ 1 _ , String p _ 72956 _ 2 _ , float p _ 72956 _ 3 _ , float p _ 72956 _ 4 _ ) 
 { 
 @ @ - 180 , 7 + 202 , 7 @ @ 
 for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) 
 { 
 ( ( IWorldAccess ) this . field _ 73021 _ x . get ( i ) ) . func _ 72704 _ a ( p _ 72956 _ 2 _ , p _ 72956 _ 1 _ . field _ 70165 _ t , p _ 72956 _ 1 _ . field _ 70163 _ u , p _ 72956 _ 1 _ . field _ 70161 _ v , p _ 72956 _ 3 _ , p _ 72956 _ 4 _ ) ; 
 - @ @ - 986 , 6 + 1038 , 8 @ @ 
 + @ @ - 986 , 6 + 1046 , 8 @ @ 
 
 public void func _ 85173 _ a ( EntityPlayer p _ 85173 _ 1 _ , String p _ 85173 _ 2 _ , float p _ 85173 _ 3 _ , float p _ 85173 _ 4 _ ) 
 { 
 @ @ - 189 , 7 + 211 , 7 @ @ 
 for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) 
 { 
 ( ( IWorldAccess ) this . field _ 73021 _ x . get ( i ) ) . func _ 85102 _ a ( p _ 85173 _ 1 _ , p _ 85173 _ 2 _ , p _ 85173 _ 1 _ . field _ 70165 _ t , p _ 85173 _ 1 _ . field _ 70163 _ u , p _ 85173 _ 1 _ . field _ 70161 _ v , p _ 85173 _ 3 _ , p _ 85173 _ 4 _ ) ; 
 - @ @ - 1037 , 6 + 1091 , 9 @ @ 
 + @ @ - 1037 , 6 + 1099 , 9 @ @ 
 
 public boolean func _ 72838 _ d ( Entity p _ 72838 _ 1 _ ) 
 { 
 @ @ - 199 , 7 + 221 , 7 @ @ 
 int i = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70165 _ t / 16 . 0D ) ; 
 int j = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70161 _ v / 16 . 0D ) ; 
 boolean flag = p _ 72838 _ 1 _ . field _ 98038 _ p ; 
 - @ @ - 1059 , 6 + 1116 , 8 @ @ 
 + @ @ - 1059 , 6 + 1124 , 8 @ @ 
 this . func _ 72854 _ c ( ) ; 
 } 
 
 @ @ - 208 , 7 + 230 , 7 @ @ 
 this . func _ 72964 _ e ( i , j ) . func _ 76612 _ a ( p _ 72838 _ 1 _ ) ; 
 this . field _ 72996 _ f . add ( p _ 72838 _ 1 _ ) ; 
 this . func _ 72923 _ a ( p _ 72838 _ 1 _ ) ; 
 - @ @ - 1271 , 17 + 1330 , 29 @ @ 
 + @ @ - 1271 , 17 + 1338 , 29 @ @ 
 
 public int func _ 72967 _ a ( float p _ 72967 _ 1 _ ) 
 { 
 @ @ - 241 , 7 + 263 , 7 @ @ 
 public void func _ 72848 _ b ( IWorldAccess p _ 72848 _ 1 _ ) 
 { 
 this . field _ 73021 _ x . remove ( p _ 72848 _ 1 _ ) ; 
 - @ @ - 1290 , 6 + 1361 , 12 @ @ 
 + @ @ - 1290 , 6 + 1369 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public float func _ 72971 _ b ( float p _ 72971 _ 1 _ ) 
 { 
 @ @ - 254 , 7 + 276 , 7 @ @ 
 float f1 = this . func _ 72826 _ c ( p _ 72971 _ 1 _ ) ; 
 float f2 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 2F ) ; 
 f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1302 , 6 + 1379 , 12 @ @ 
 + @ @ - 1302 , 6 + 1387 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public Vec3 func _ 72833 _ a ( Entity p _ 72833 _ 1 _ , float p _ 72833 _ 2 _ ) 
 { 
 @ @ - 267 , 7 + 289 , 7 @ @ 
 float f1 = this . func _ 72826 _ c ( p _ 72833 _ 2 _ ) ; 
 float f2 = MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; 
 f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1309 , 9 + 1392 , 7 @ @ 
 + @ @ - 1309 , 9 + 1400 , 7 @ @ 
 int j = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70163 _ u ) ; 
 int k = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70161 _ v ) ; 
 BlockPos blockpos = new BlockPos ( i , j , k ) ; 
 @ @ - 278 , 7 + 300 , 7 @ @ 
 float f4 = ( float ) ( l > > 16 & 255 ) / 255 . 0F ; 
 float f5 = ( float ) ( l > > 8 & 255 ) / 255 . 0F ; 
 float f6 = ( float ) ( l & 255 ) / 255 . 0F ; 
 - @ @ - 1373 , 6 + 1454 , 11 @ @ 
 + @ @ - 1373 , 6 + 1462 , 11 @ @ 
 
 public float func _ 130001 _ d ( ) 
 { 
 @ @ - 290 , 7 + 312 , 7 @ @ 
 return WorldProvider . field _ 111203 _ a [ this . field _ 73011 _ w . func _ 76559 _ b ( this . field _ 72986 _ A . func _ 76073 _ f ( ) ) ] ; 
 } 
 
 - @ @ - 1385 , 6 + 1471 , 12 @ @ 
 + @ @ - 1385 , 6 + 1479 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public Vec3 func _ 72824 _ f ( float p _ 72824 _ 1 _ ) 
 { 
 @ @ - 303 , 7 + 325 , 7 @ @ 
 float f1 = this . func _ 72826 _ c ( p _ 72824 _ 1 _ ) ; 
 float f2 = MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; 
 f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1442 , 9 + 1534 , 9 @ @ 
 + @ @ - 1442 , 9 + 1542 , 9 @ @ 
 for ( blockpos1 = new BlockPos ( p _ 175672 _ 1 _ . func _ 177958 _ n ( ) , chunk . func _ 76625 _ h ( ) + 16 , p _ 175672 _ 1 _ . func _ 177952 _ p ( ) ) ; blockpos1 . func _ 177956 _ o ( ) > = 0 ; blockpos1 = blockpos2 ) 
 { 
 blockpos2 = blockpos1 . func _ 177977 _ b ( ) ; 
 @ @ - 315 , 7 + 337 , 7 @ @ 
 { 
 break ; 
 } 
 - @ @ - 1456 , 6 + 1548 , 12 @ @ 
 + @ @ - 1456 , 6 + 1556 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public float func _ 72880 _ h ( float p _ 72880 _ 1 _ ) 
 { 
 @ @ - 328 , 7 + 350 , 7 @ @ 
 float f1 = this . func _ 72826 _ c ( p _ 72880 _ 1 _ ) ; 
 float f2 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 25F ) ; 
 f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1500 , 7 + 1598 , 15 @ @ 
 + @ @ - 1500 , 7 + 1606 , 15 @ @ 
 entity . func _ 85029 _ a ( crashreportcategory ) ; 
 } 
 
 @ @ - 345 , 7 + 367 , 7 @ @ 
 } 
 
 if ( entity . field _ 70128 _ L ) 
 - @ @ - 1562 , 7 + 1668 , 16 @ @ 
 + @ @ - 1562 , 7 + 1676 , 16 @ @ 
 crashreport = CrashReport . func _ 85055 _ a ( throwable1 , " Ticking entity " ) ; 
 crashreportcategory = crashreport . func _ 85058 _ a ( " Entity being ticked " ) ; 
 entity . func _ 85029 _ a ( crashreportcategory ) ; 
 @ @ - 363 , 7 + 385 , 7 @ @ 
 } 
 } 
 
 - @ @ - 1609 , 7 + 1724 , 16 @ @ 
 + @ @ - 1609 , 7 + 1732 , 16 @ @ 
 CrashReport crashreport1 = CrashReport . func _ 85055 _ a ( throwable , " Ticking block entity " ) ; 
 CrashReportCategory crashreportcategory1 = crashreport1 . func _ 85058 _ a ( " Block entity being ticked " ) ; 
 tileentity . func _ 145828 _ a ( crashreportcategory1 ) ; 
 @ @ - 381 , 7 + 403 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 1628 , 6 + 1752 , 10 @ @ 
 + @ @ - 1628 , 6 + 1760 , 10 @ @ 
 
 if ( ! this . field _ 147483 _ b . isEmpty ( ) ) 
 { 
 @ @ - 392 , 7 + 414 , 7 @ @ 
 this . field _ 175730 _ i . removeAll ( this . field _ 147483 _ b ) ; 
 this . field _ 147482 _ g . removeAll ( this . field _ 147483 _ b ) ; 
 this . field _ 147483 _ b . clear ( ) ; 
 - @ @ - 1668 , 7 + 1796 , 8 @ @ 
 + @ @ - 1668 , 7 + 1804 , 8 @ @ 
 
 public boolean func _ 175700 _ a ( TileEntity p _ 175700 _ 1 _ ) 
 { 
 @ @ - 402 , 7 + 424 , 7 @ @ 
 
 if ( flag & & p _ 175700 _ 1 _ instanceof IUpdatePlayerListBox ) 
 { 
 - @ @ - 1710 , 9 + 1839 , 12 @ @ 
 + @ @ - 1710 , 9 + 1847 , 12 @ @ 
 { 
 int i = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70165 _ t ) ; 
 int j = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70161 _ v ) ; 
 @ @ - 417 , 7 + 439 , 7 @ @ 
 { 
 p _ 72866 _ 1 _ . field _ 70142 _ S = p _ 72866 _ 1 _ . field _ 70165 _ t ; 
 p _ 72866 _ 1 _ . field _ 70137 _ T = p _ 72866 _ 1 _ . field _ 70163 _ u ; 
 - @ @ - 1839 , 7 + 1971 , 7 @ @ 
 + @ @ - 1839 , 7 + 1979 , 7 @ @ 
 { 
 Block block = this . func _ 180495 _ p ( new BlockPos ( k1 , l1 , i2 ) ) . func _ 177230 _ c ( ) ; 
 
 @ @ - 426 , 7 + 448 , 7 @ @ 
 { 
 return true ; 
 } 
 - @ @ - 1901 , 6 + 2033 , 10 @ @ 
 + @ @ - 1901 , 6 + 2041 , 10 @ @ 
 { 
 return true ; 
 } 
 @ @ - 437 , 7 + 459 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 2039 , 6 + 2175 , 7 @ @ 
 + @ @ - 2039 , 6 + 2183 , 7 @ @ 
 public Explosion func _ 72885 _ a ( Entity p _ 72885 _ 1 _ , double p _ 72885 _ 2 _ , double p _ 72885 _ 4 _ , double p _ 72885 _ 6 _ , float p _ 72885 _ 8 _ , boolean p _ 72885 _ 9 _ , boolean p _ 72885 _ 10 _ ) 
 { 
 Explosion explosion = new Explosion ( this , p _ 72885 _ 1 _ , p _ 72885 _ 2 _ , p _ 72885 _ 4 _ , p _ 72885 _ 6 _ , p _ 72885 _ 8 _ , p _ 72885 _ 9 _ , p _ 72885 _ 10 _ ) ; 
 @ @ - 445 , 7 + 467 , 7 @ @ 
 explosion . func _ 77278 _ a ( ) ; 
 explosion . func _ 77279 _ a ( true ) ; 
 return explosion ; 
 - @ @ - 2185 , 19 + 2322 , 28 @ @ 
 + @ @ - 2185 , 19 + 2330 , 28 @ @ 
 else 
 { 
 this . func _ 175700 _ a ( p _ 175690 _ 2 _ ) ; 
 @ @ - 475 , 7 + 497 , 7 @ @ 
 } 
 else 
 { 
 - @ @ - 2210 , 6 + 2356 , 7 @ @ 
 + @ @ - 2210 , 6 + 2364 , 7 @ @ 
 
 this . func _ 175726 _ f ( p _ 175713 _ 1 _ ) . func _ 177425 _ e ( p _ 175713 _ 1 _ ) ; 
 } 
 @ @ - 483 , 7 + 505 , 7 @ @ 
 } 
 
 public void func _ 147457 _ a ( TileEntity p _ 147457 _ 1 _ ) 
 - @ @ - 2228 , 7 + 2375 , 7 @ @ 
 + @ @ - 2228 , 7 + 2383 , 7 @ @ 
 { 
 IBlockState iblockstate = p _ 175683 _ 0 _ . func _ 180495 _ p ( p _ 175683 _ 1 _ ) ; 
 Block block = iblockstate . func _ 177230 _ c ( ) ; 
 @ @ - 492 , 7 + 514 , 7 @ @ 
 } 
 
 public boolean func _ 175677 _ d ( BlockPos p _ 175677 _ 1 _ , boolean p _ 175677 _ 2 _ ) 
 - @ @ - 2248 , 7 + 2395 , 7 @ @ 
 + @ @ - 2248 , 7 + 2403 , 7 @ @ 
 else 
 { 
 Block block = this . func _ 180495 _ p ( p _ 175677 _ 1 _ ) . func _ 177230 _ c ( ) ; 
 @ @ - 501 , 7 + 523 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 2265 , 8 + 2412 , 7 @ @ 
 + @ @ - 2265 , 8 + 2420 , 7 @ @ 
 
 public void func _ 72891 _ a ( boolean p _ 72891 _ 1 _ , boolean p _ 72891 _ 2 _ ) 
 { 
 @ @ - 511 , 7 + 533 , 7 @ @ 
 } 
 
 public void func _ 72835 _ b ( ) 
 - @ @ - 2276 , 6 + 2422 , 11 @ @ 
 + @ @ - 2276 , 6 + 2430 , 11 @ @ 
 
 protected void func _ 72947 _ a ( ) 
 { 
 @ @ - 523 , 7 + 545 , 7 @ @ 
 if ( this . field _ 72986 _ A . func _ 76059 _ o ( ) ) 
 { 
 this . field _ 73004 _ o = 1 . 0F ; 
 - @ @ - 2289 , 6 + 2440 , 11 @ @ 
 + @ @ - 2289 , 6 + 2448 , 11 @ @ 
 
 protected void func _ 72979 _ l ( ) 
 { 
 @ @ - 535 , 7 + 557 , 7 @ @ 
 if ( ! this . field _ 73011 _ w . func _ 177495 _ o ( ) ) 
 { 
 if ( ! this . field _ 72995 _ K ) 
 - @ @ - 2383 , 6 + 2539 , 7 @ @ 
 + @ @ - 2383 , 6 + 2547 , 7 @ @ 
 { 
 this . field _ 72993 _ I . clear ( ) ; 
 this . field _ 72984 _ F . func _ 76320 _ a ( " buildList " ) ; 
 @ @ - 543 , 7 + 565 , 7 @ @ 
 int i ; 
 EntityPlayer entityplayer ; 
 int j ; 
 - @ @ - 2445 , 7 + 2602 , 7 @ @ 
 + @ @ - 2445 , 7 + 2610 , 7 @ @ 
 l + = p _ 147467 _ 1 _ ; 
 i1 + = p _ 147467 _ 2 _ ; 
 
 @ @ - 552 , 7 + 574 , 7 @ @ 
 { 
 EntityPlayer entityplayer = this . func _ 72977 _ a ( ( double ) l + 0 . 5D , ( double ) j1 + 0 . 5D , ( double ) i1 + 0 . 5D , 8 . 0D ) ; 
 
 - @ @ - 2485 , 6 + 2642 , 11 @ @ 
 + @ @ - 2485 , 6 + 2650 , 11 @ @ 
 
 public boolean func _ 175670 _ e ( BlockPos p _ 175670 _ 1 _ , boolean p _ 175670 _ 2 _ ) 
 { 
 @ @ - 564 , 7 + 586 , 7 @ @ 
 BiomeGenBase biomegenbase = this . func _ 180494 _ b ( p _ 175670 _ 1 _ ) ; 
 float f = biomegenbase . func _ 180626 _ a ( p _ 175670 _ 1 _ ) ; 
 
 - @ @ - 2526 , 6 + 2688 , 11 @ @ 
 + @ @ - 2526 , 6 + 2696 , 11 @ @ 
 
 public boolean func _ 175708 _ f ( BlockPos p _ 175708 _ 1 _ , boolean p _ 175708 _ 2 _ ) 
 { 
 @ @ - 576 , 7 + 598 , 7 @ @ 
 BiomeGenBase biomegenbase = this . func _ 180494 _ b ( p _ 175708 _ 1 _ ) ; 
 float f = biomegenbase . func _ 180626 _ a ( p _ 175708 _ 1 _ ) ; 
 
 - @ @ - 2543 , 7 + 2710 , 7 @ @ 
 + @ @ - 2543 , 7 + 2718 , 7 @ @ 
 { 
 Block block = this . func _ 180495 _ p ( p _ 175708 _ 1 _ ) . func _ 177230 _ c ( ) ; 
 
 @ @ - 585 , 7 + 607 , 7 @ @ 
 { 
 return true ; 
 } 
 - @ @ - 2575 , 10 + 2742 , 11 @ @ 
 + @ @ - 2575 , 10 + 2750 , 11 @ @ 
 else 
 { 
 Block block = this . func _ 180495 _ p ( p _ 175638 _ 1 _ ) . func _ 177230 _ c ( ) ; 
 @ @ - 600 , 7 + 622 , 7 @ @ 
 { 
 j = 1 ; 
 } 
 - @ @ - 2792 , 10 + 2960 , 10 @ @ 
 + @ @ - 2792 , 10 + 2968 , 10 @ @ 
 public List func _ 175674 _ a ( Entity p _ 175674 _ 1 _ , AxisAlignedBB p _ 175674 _ 2 _ , Predicate p _ 175674 _ 3 _ ) 
 { 
 ArrayList arraylist = Lists . newArrayList ( ) ; 
 @ @ - 615 , 7 + 637 , 7 @ @ 
 
 for ( int i1 = i ; i1 < = j ; + + i1 ) 
 { 
 - @ @ - 2854 , 10 + 3022 , 10 @ @ 
 + @ @ - 2854 , 10 + 3030 , 10 @ @ 
 
 public List func _ 175647 _ a ( Class p _ 175647 _ 1 _ , AxisAlignedBB p _ 175647 _ 2 _ , Predicate p _ 175647 _ 3 _ ) 
 { 
 @ @ - 630 , 7 + 652 , 7 @ @ 
 ArrayList arraylist = Lists . newArrayList ( ) ; 
 
 for ( int i1 = i ; i1 < = j ; + + i1 ) 
 - @ @ - 2938 , 13 + 3106 , 16 @ @ 
 + @ @ - 2938 , 13 + 3114 , 16 @ @ 
 
 public void func _ 175650 _ b ( Collection p _ 175650 _ 1 _ ) 
 { 
 @ @ - 649 , 7 + 671 , 7 @ @ 
 } 
 } 
 
 - @ @ - 2957 , 7 + 3128 , 9 @ @ 
 + @ @ - 2957 , 7 + 3136 , 9 @ @ 
 { 
 Block block1 = this . func _ 180495 _ p ( p _ 175716 _ 2 _ ) . func _ 177230 _ c ( ) ; 
 AxisAlignedBB axisalignedbb = p _ 175716 _ 3 _ ? null : p _ 175716 _ 1 _ . func _ 180640 _ a ( this , p _ 175716 _ 2 _ , p _ 175716 _ 1 _ . func _ 176223 _ P ( ) ) ; 
 @ @ - 660 , 7 + 682 , 7 @ @ 
 } 
 
 public int func _ 175627 _ a ( BlockPos p _ 175627 _ 1 _ , EnumFacing p _ 175627 _ 2 _ ) 
 - @ @ - 3032 , 7 + 3205 , 7 @ @ 
 + @ @ - 3032 , 7 + 3213 , 7 @ @ 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175651 _ 1 _ ) ; 
 Block block = iblockstate . func _ 177230 _ c ( ) ; 
 @ @ - 669 , 7 + 691 , 7 @ @ 
 } 
 
 public boolean func _ 175640 _ z ( BlockPos p _ 175640 _ 1 _ ) 
 - @ @ - 3160 , 7 + 3333 , 7 @ @ 
 + @ @ - 3160 , 7 + 3341 , 7 @ @ 
 
 public long func _ 72905 _ C ( ) 
 { 
 @ @ - 678 , 7 + 700 , 7 @ @ 
 } 
 
 public long func _ 82737 _ E ( ) 
 - @ @ - 3170 , 17 + 3343 , 17 @ @ 
 + @ @ - 3170 , 17 + 3351 , 17 @ @ 
 
 public long func _ 72820 _ D ( ) 
 { 
 @ @ - 699 , 7 + 721 , 7 @ @ 
 
 if ( ! this . func _ 175723 _ af ( ) . func _ 177746 _ a ( blockpos ) ) 
 { 
 - @ @ - 3192 , 7 + 3365 , 7 @ @ 
 + @ @ - 3192 , 7 + 3373 , 7 @ @ 
 
 public void func _ 175652 _ B ( BlockPos p _ 175652 _ 1 _ ) 
 { 
 @ @ - 708 , 7 + 730 , 7 @ @ 
 } 
 
 @ SideOnly ( Side . CLIENT ) 
 - @ @ - 3212 , 12 + 3385 , 18 @ @ 
 + @ @ - 3212 , 12 + 3393 , 18 @ @ 
 
 if ( ! this . field _ 72996 _ f . contains ( p _ 72897 _ 1 _ ) ) 
 { 
 @ @ - 727 , 7 + 749 , 7 @ @ 
 return true ; 
 } 
 
 - @ @ - 3307 , 8 + 3486 , 7 @ @ 
 + @ @ - 3307 , 8 + 3494 , 7 @ @ 
 
 public boolean func _ 180502 _ D ( BlockPos p _ 180502 _ 1 _ ) 
 { 
 @ @ - 737 , 7 + 759 , 7 @ @ 
 } 
 
 public MapStorage func _ 175693 _ T ( ) 
 - @ @ - 3367 , 12 + 3545 , 12 @ @ 
 + @ @ - 3367 , 12 + 3553 , 12 @ @ 
 
 public int func _ 72800 _ K ( ) 
 { 
 @ @ - 752 , 7 + 774 , 7 @ @ 
 } 
 
 public Random func _ 72843 _ D ( int p _ 72843 _ 1 _ , int p _ 72843 _ 2 _ , int p _ 72843 _ 3 _ ) 
 - @ @ - 3429 , 7 + 3607 , 7 @ @ 
 + @ @ - 3429 , 7 + 3615 , 7 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public double func _ 72919 _ O ( ) 
 { 
 @ @ - 761 , 7 + 783 , 7 @ @ 
 } 
 
 public void func _ 175715 _ c ( int p _ 175715 _ 1 _ , BlockPos p _ 175715 _ 2 _ , int p _ 175715 _ 3 _ ) 
 - @ @ - 3461 , 29 + 3639 , 21 @ @ 
 + @ @ - 3461 , 29 + 3647 , 21 @ @ 
 
 public void func _ 175666 _ e ( BlockPos p _ 175666 _ 1 _ , Block p _ 175666 _ 2 _ ) 
 { 
 @ @ - 798 , 7 + 820 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 3553 , 4 + 3723 , 82 @ @ 
 + @ @ - 3553 , 4 + 3731 , 82 @ @ 
 short short1 = 128 ; 
 return k > = - short1 & & k < = short1 & & l > = - short1 & & l < = short1 ; 
 } 
 diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 index cefbe13 . . 0640935 100644 
 - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 @ @ - 2 , 6 + 2 , 7 @ @ package net . minecraftforge . event ; 
 
 import java . io . File ; 
 import java . util . ArrayList ; 
 + import java . util . EnumSet ; 
 import java . util . HashMap ; 
 import java . util . Iterator ; 
 import java . util . List ; 
 @ @ - 62 , 6 + 63 , 7 @ @ import net . minecraftforge . event . entity . player . PlayerUseItemEvent ; 
 import net . minecraftforge . event . entity . player . PlayerWakeUpEvent ; 
 import net . minecraftforge . event . entity . player . UseHoeEvent ; 
 import net . minecraftforge . event . world . BlockEvent ; 
 + import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; 
 import net . minecraftforge . event . world . BlockEvent . MultiPlaceEvent ; 
 import net . minecraftforge . event . world . BlockEvent . PlaceEvent ; 
 import net . minecraftforge . event . world . ExplosionEvent ; 
 @ @ - 89 , 6 + 91 , 13 @ @ public class ForgeEventFactory 
 MinecraftForge . EVENT _ BUS . post ( event ) ; 
 return event ; 
 } 
 + 
 + public static NeighborNotifyEvent onNeighborNotify ( World world , BlockPos pos , IBlockState state , EnumSet < EnumFacing > notifiedSides ) 
 + { 
 + NeighborNotifyEvent event = new NeighborNotifyEvent ( world , pos , state , notifiedSides ) ; 
 + MinecraftForge . EVENT _ BUS . post ( event ) ; 
 + return event ; 
 + } 
 
 public static boolean doPlayerHarvestCheck ( EntityPlayer player , Block block , boolean success ) 
 { 
 diff - - git a / src / main / java / net / minecraftforge / event / world / BlockEvent . java b / src / main / java / net / minecraftforge / event / world / BlockEvent . java 
 index 4315a28 . . 8e87f85 100644 
 - - - a / src / main / java / net / minecraftforge / event / world / BlockEvent . java 
 + + + b / src / main / java / net / minecraftforge / event / world / BlockEvent . java 
 @ @ - 1 , 6 + 1 , 7 @ @ 
 package net . minecraftforge . event . world ; 
 
 import java . util . ArrayList ; 
 + import java . util . EnumSet ; 
 import java . util . List ; 
 
 import net . minecraft . block . Block ; 
 @ @ - 9 , 6 + 10 , 7 @ @ import net . minecraft . enchantment . EnchantmentHelper ; 
 import net . minecraft . entity . player . EntityPlayer ; 
 import net . minecraft . item . ItemStack ; 
 import net . minecraft . util . BlockPos ; 
 + import net . minecraft . util . EnumFacing ; 
 import net . minecraft . world . World ; 
 import net . minecraftforge . common . ForgeHooks ; 
 import net . minecraftforge . common . util . BlockSnapshot ; 
 @ @ - 177 , 4 + 179 , 31 @ @ public class BlockEvent extends Event 
 return blockSnapshots ; 
 } 
 } 
 + 
 + / * * 
 + * Fired when a physics update occurs on a block . This event acts as 
 + * a way for mods to detect physics updates , in the same way a BUD switch 
 + * does . This event is only called on the server . 
 + * / 
 + @ Cancelable 
 + public static class NeighborNotifyEvent extends BlockEvent 
 + { 
 + private final EnumSet < EnumFacing > notifiedSides ; 
 + 
 + public NeighborNotifyEvent ( World world , BlockPos pos , IBlockState state , EnumSet < EnumFacing > notifiedSides ) 
 + { 
 + super ( world , pos , state ) ; 
 + this . notifiedSides = notifiedSides ; 
 + } 
 + 
 + / * * 
 + * Gets a list of directions from the base block that updates will occur upon . 
 + * 
 + * @ return list of notified directions 
 + * / 
 + public EnumSet < EnumFacing > getNotifiedSides ( ) 
 + { 
 + return notifiedSides ; 
 + } 
 + } 
 } 
 diff - - git a / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java b / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java 
 new file mode 100644 
 index 0000000 . . 9be69bf 
 - - - / dev / null 
 + + + b / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java 
 @ @ - 0 , 0 + 1 , 30 @ @ 
 + package net . minecraftforge . test ; 
 + 
 + import net . minecraftforge . common . MinecraftForge ; 
 + import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; 
 + import net . minecraftforge . fml . common . Mod ; 
 + import net . minecraftforge . fml . common . Mod . EventHandler ; 
 + import net . minecraftforge . fml . common . event . FMLInitializationEvent ; 
 + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; 
 + 
 + @ Mod ( modid = " NeighborNotifyEventTest " , name = " NeighborNotifyEventTest " , version = " 0 . 0 . 0 " ) 
 + public class NeighborNotifyEventTest 
 + { 
 + 
 + public static final boolean ENABLE = false ; 
 + 
 + @ EventHandler 
 + public void init ( FMLInitializationEvent event ) 
 + { 
 + MinecraftForge . EVENT _ BUS . register ( this ) ; 
 + } 
 + 
 + @ SubscribeEvent 
 + public void onNeighborNotify ( NeighborNotifyEvent event ) 
 + { 
 + if ( ENABLE ) { 
 + System . out . println ( event . pos . toString ( ) ) ; 
 + event . setCanceled ( true ) ; 
 + } 
 + } 
 + }
