BLEU SCORE: 0.022882533035912193

TEST MSG: Allow sleeping without bed
GENERATED MSG: Add position to BreakSpeed event . Closes # 621

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> index cdf492a . . 20055aa 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> @ @ - 296 , 9 + 296 , 12 @ @ <nl> if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) <nl> { <nl> if ( this . func _ 70608 _ bn ( ) | | ! this . func _ 70089 _ S ( ) ) <nl> - @ @ - 1352 , 7 + 1440 , 7 @ @ <nl> + @ @ - 1350 , 9 + 1438 , 9 @ @ <nl> <nl> - if ( this . field _ 70170 _ p . func _ 175667 _ e ( p _ 180469 _ 1 _ ) ) <nl> + this . func _ 70105 _ a ( 0 . 2F , 0 . 2F ) ; <nl> + <nl> + - if ( this . field _ 70170 _ p . func _ 175667 _ e ( p _ 180469 _ 1 _ ) ) <nl> + + if ( this . field _ 70170 _ p . func _ 175667 _ e ( p _ 180469 _ 1 _ ) & & field _ 70170 _ p . func _ 180495 _ p ( p _ 180469 _ 1 _ ) . func _ 177230 _ c ( ) . isBed ( field _ 70170 _ p , p _ 180469 _ 1 _ , this ) ) <nl> { <nl> - EnumFacing enumfacing = ( EnumFacing ) this . field _ 70170 _ p . func _ 180495 _ p ( p _ 180469 _ 1 _ ) . func _ 177229 _ b ( BlockDirectional . field _ 176387 _ N ) ; <nl> + EnumFacing enumfacing = this . field _ 70170 _ p . func _ 180495 _ p ( p _ 180469 _ 1 _ ) . func _ 177230 _ c ( ) . getBedDirection ( field _ 70170 _ p , p _ 180469 _ 1 _ ) ; <nl> @ @ - 323 , 12 + 326 , 23 @ @ <nl> <nl> if ( blockpos = = null ) <nl> { <nl> - @ @ - 1448 , 14 + 1537 , 14 @ @ <nl> + @ @ - 1430 , 6 + 1519 , 10 @ @ <nl> + <nl> + this . func _ 70107 _ b ( ( double ) ( ( float ) blockpos . func _ 177958 _ n ( ) + 0 . 5F ) , ( double ) ( ( float ) blockpos . func _ 177956 _ o ( ) + 0 . 1F ) , ( double ) ( ( float ) blockpos . func _ 177952 _ p ( ) + 0 . 5F ) ) ; <nl> + } <nl> + + else <nl> + + { <nl> + + p _ 70999 _ 3 _ = false ; <nl> + + } <nl> + <nl> + this . field _ 71083 _ bS = false ; <nl> + <nl> + @ @ - 1448 , 14 + 1541 , 14 @ @ <nl> <nl> private boolean func _ 175143 _ p ( ) <nl> { <nl> - return this . field _ 70170 _ p . func _ 180495 _ p ( this . field _ 71081 _ bT ) . func _ 177230 _ c ( ) = = Blocks . field _ 150324 _ C ; <nl> - + return this . field _ 70170 _ p . func _ 180495 _ p ( this . field _ 71081 _ bT ) . func _ 177230 _ c ( ) . isBed ( field _ 70170 _ p , field _ 71081 _ bT , this ) ; <nl> + + return net . minecraftforge . event . ForgeEventFactory . fireSleepingLocationCheck ( this , field _ 71081 _ bT ) ; <nl> } <nl> <nl> public static BlockPos func _ 180467 _ a ( World p _ 180467 _ 0 _ , BlockPos p _ 180467 _ 1 _ , boolean p _ 180467 _ 2 _ ) <nl> @ @ - 340 , 7 + 354 , 7 @ @ <nl> { <nl> if ( ! p _ 180467 _ 2 _ ) <nl> { <nl> - @ @ - 1470 , 7 + 1559 , 7 @ @ <nl> + @ @ - 1470 , 16 + 1563 , 16 @ @ <nl> } <nl> else <nl> { <nl> @ @ - 349 , 16 + 363 , 18 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1479 , 7 + 1568 , 7 @ @ <nl> + @ SideOnly ( Side . CLIENT ) <nl> + public float func _ 71051 _ bG ( ) <nl> { <nl> - if ( this . field _ 71081 _ bT ! = null ) <nl> + - if ( this . field _ 71081 _ bT ! = null ) <nl> + + if ( this . field _ 71081 _ bT ! = null & & field _ 70170 _ p . func _ 180495 _ p ( field _ 71081 _ bT ) . func _ 177230 _ c ( ) . isBed ( field _ 70170 _ p , field _ 71081 _ bT , this ) ) <nl> { <nl> - EnumFacing enumfacing = ( EnumFacing ) this . field _ 70170 _ p . func _ 180495 _ p ( this . field _ 71081 _ bT ) . func _ 177229 _ b ( BlockDirectional . field _ 176387 _ N ) ; <nl> + EnumFacing enumfacing = this . field _ 70170 _ p . func _ 180495 _ p ( this . field _ 71081 _ bT ) . func _ 177230 _ c ( ) . getBedDirection ( field _ 70170 _ p , field _ 71081 _ bT ) ; <nl> <nl> switch ( enumfacing ) <nl> { <nl> - @ @ - 1519 , 16 + 1608 , 24 @ @ <nl> + @ @ - 1519 , 16 + 1612 , 24 @ @ <nl> <nl> public BlockPos func _ 180470 _ cg ( ) <nl> { <nl> @ @ - 385 , 7 + 401 , 7 @ @ <nl> if ( p _ 180473 _ 1 _ ! = null ) <nl> { <nl> this . field _ 71077 _ c = p _ 180473 _ 1 _ ; <nl> - @ @ - 1712 , 6 + 1809 , 10 @ @ <nl> + @ @ - 1712 , 6 + 1813 , 10 @ @ <nl> <nl> super . func _ 180430 _ e ( p _ 180430 _ 1 _ , p _ 180430 _ 2 _ ) ; <nl> } <nl> @ @ - 396 , 7 + 412 , 7 @ @ <nl> } <nl> <nl> protected void func _ 71061 _ d _ ( ) <nl> - @ @ - 1735 , 6 + 1836 , 7 @ @ <nl> + @ @ - 1735 , 6 + 1840 , 7 @ @ <nl> } <nl> <nl> EntityList . EntityEggInfo entitylist $ entityegginfo = ( EntityList . EntityEggInfo ) EntityList . field _ 75627 _ a . get ( Integer . valueOf ( EntityList . func _ 75619 _ a ( p _ 70074 _ 1 _ ) ) ) ; <nl> @ @ - 404 , 7 + 420 , 7 @ @ <nl> <nl> if ( entitylist $ entityegginfo ! = null ) <nl> { <nl> - @ @ - 1847 , 6 + 1949 , 8 @ @ <nl> + @ @ - 1847 , 6 + 1953 , 8 @ @ <nl> { <nl> if ( p _ 71008 _ 1 _ ! = this . field _ 71074 _ e ) <nl> { <nl> @ @ - 413 , 7 + 429 , 7 @ @ <nl> this . field _ 71074 _ e = p _ 71008 _ 1 _ ; <nl> this . field _ 71072 _ f = p _ 71008 _ 2 _ ; <nl> <nl> - @ @ - 1918 , 6 + 2022 , 10 @ @ <nl> + @ @ - 1918 , 6 + 2026 , 10 @ @ <nl> this . field _ 181016 _ an = p _ 71049 _ 1 _ . field _ 181016 _ an ; <nl> this . field _ 181017 _ ao = p _ 71049 _ 1 _ . field _ 181017 _ ao ; <nl> this . field _ 181018 _ ap = p _ 71049 _ 1 _ . field _ 181018 _ ap ; <nl> @ @ - 424 , 7 + 440 , 7 @ @ <nl> } <nl> else if ( this . field _ 70170 _ p . func _ 82736 _ K ( ) . func _ 82766 _ b ( " keepInventory " ) ) <nl> { <nl> - @ @ - 1931 , 6 + 2039 , 18 @ @ <nl> + @ @ - 1931 , 6 + 2043 , 18 @ @ <nl> this . field _ 175152 _ f = p _ 71049 _ 1 _ . field _ 175152 _ f ; <nl> this . field _ 71078 _ a = p _ 71049 _ 1 _ . field _ 71078 _ a ; <nl> this . func _ 70096 _ w ( ) . func _ 75692 _ b ( 10 , Byte . valueOf ( p _ 71049 _ 1 _ . func _ 70096 _ w ( ) . func _ 75683 _ a ( 10 ) ) ) ; <nl> @ @ - 443 , 7 + 459 , 7 @ @ <nl> } <nl> <nl> protected boolean func _ 70041 _ e _ ( ) <nl> - @ @ - 1968 , 7 + 2088 , 14 @ @ <nl> + @ @ - 1968 , 7 + 2092 , 14 @ @ <nl> <nl> public void func _ 70062 _ b ( int p _ 70062 _ 1 _ , ItemStack p _ 70062 _ 2 _ ) <nl> { <nl> @ @ - 459 , 7 + 475 , 7 @ @ <nl> } <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> - @ @ - 2013 , 7 + 2140 , 10 @ @ <nl> + @ @ - 2013 , 7 + 2144 , 10 @ @ <nl> <nl> public IChatComponent func _ 145748 _ c _ ( ) <nl> { <nl> @ @ - 471 , 7 + 487 , 7 @ @ <nl> ichatcomponent . func _ 150256 _ b ( ) . func _ 150241 _ a ( new ClickEvent ( ClickEvent . Action . SUGGEST _ COMMAND , " / msg " + this . func _ 70005 _ c _ ( ) + " " ) ) ; <nl> ichatcomponent . func _ 150256 _ b ( ) . func _ 150209 _ a ( this . func _ 174823 _ aP ( ) ) ; <nl> ichatcomponent . func _ 150256 _ b ( ) . func _ 179989 _ a ( this . func _ 70005 _ c _ ( ) ) ; <nl> - @ @ - 2022 , 7 + 2152 , 7 @ @ <nl> + @ @ - 2022 , 7 + 2156 , 7 @ @ <nl> <nl> public float func _ 70047 _ e ( ) <nl> { <nl> @ @ - 480 , 7 + 496 , 7 @ @ <nl> <nl> if ( this . func _ 70608 _ bn ( ) ) <nl> { <nl> - @ @ - 2155 , 6 + 2285 , 136 @ @ <nl> + @ @ - 2155 , 6 + 2289 , 136 @ @ <nl> this . field _ 175153 _ bG = p _ 175150 _ 1 _ ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> index 1084089 . . 1d51ff4 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> @ @ - 65 , 6 + 65 , 7 @ @ import net . minecraftforge . event . entity . player . PlayerSetSpawnEvent ; <nl> import net . minecraftforge . event . entity . player . PlayerSleepInBedEvent ; <nl> import net . minecraftforge . event . entity . player . PlayerUseItemEvent ; <nl> import net . minecraftforge . event . entity . player . PlayerWakeUpEvent ; <nl> + import net . minecraftforge . event . entity . player . SleepingLocationCheckEvent ; <nl> import net . minecraftforge . event . entity . player . UseHoeEvent ; <nl> import net . minecraftforge . event . world . BlockEvent ; <nl> import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; <nl> @ @ - 500 , 4 + 501 , 17 @ @ public class ForgeEventFactory <nl> MinecraftForge . EVENT _ BUS . post ( event ) ; <nl> return event . getCapabilities ( ) . size ( ) > 0 ? new CapabilityDispatcher ( event . getCapabilities ( ) , parent ) : null ; <nl> } <nl> + <nl> + public static boolean fireSleepingLocationCheck ( EntityPlayer player , BlockPos sleepingLocation ) <nl> + { <nl> + SleepingLocationCheckEvent evt = new SleepingLocationCheckEvent ( player , sleepingLocation ) ; <nl> + MinecraftForge . EVENT _ BUS . post ( evt ) ; <nl> + <nl> + Result canContinueSleep = evt . getResult ( ) ; <nl> + if ( canContinueSleep = = Result . DEFAULT ) <nl> + return player . worldObj . getBlockState ( player . playerLocation ) . getBlock ( ) . isBed ( player . worldObj , player . playerLocation , player ) ; <nl> + else <nl> + return canContinueSleep = = Result . ALLOW ; <nl> + } <nl> + <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / event / entity / player / SleepingLocationCheckEvent . java b / src / main / java / net / minecraftforge / event / entity / player / SleepingLocationCheckEvent . java <nl> new file mode 100644 <nl> index 0000000 . . 0dbd832 <nl> - - - / dev / null <nl> + + + b / src / main / java / net / minecraftforge / event / entity / player / SleepingLocationCheckEvent . java <nl> @ @ - 0 , 0 + 1 , 28 @ @ <nl> + package net . minecraftforge . event . entity . player ; <nl> + <nl> + import net . minecraft . entity . player . EntityPlayer ; <nl> + import net . minecraft . util . BlockPos ; <nl> + import net . minecraftforge . fml . common . eventhandler . Event . HasResult ; <nl> + <nl> + / * * <nl> + * This event is fired when game checks , if sleeping player should be still considered " in bed " . < br > <nl> + * Failing this check will cause player to wake up . < br > <nl> + * <nl> + * This event has a result . { @ link HasResult } < br > <nl> + * <nl> + * setResult ( ALLOW ) informs game that player is still " in bed " < br > <nl> + * setResult ( DEFAULT ) causes game to check { @ link net . minecraft . block . Block # isBed ( net . minecraft . world . IBlockAccess , BlockPos , net . minecraft . entity . Entity ) } instead <nl> + * / <nl> + @ HasResult <nl> + public class SleepingLocationCheckEvent extends PlayerEvent <nl> + { <nl> + <nl> + public final BlockPos sleepingLocation ; <nl> + <nl> + public SleepingLocationCheckEvent ( EntityPlayer player , BlockPos sleepingLocation ) <nl> + { <nl> + super ( player ) ; <nl> + this . sleepingLocation = sleepingLocation ; <nl> + } <nl> + <nl> + } <nl> diff - - git a / src / test / java / net / minecraftforge / test / NoBedSleepingTest . java b / src / test / java / net / minecraftforge / test / NoBedSleepingTest . java <nl> new file mode 100644 <nl> index 0000000 . . c231fcd <nl> - - - / dev / null <nl> + + + b / src / test / java / net / minecraftforge / test / NoBedSleepingTest . java <nl> @ @ - 0 , 0 + 1 , 113 @ @ <nl> + package net . minecraftforge . test ; <nl> + <nl> + import net . minecraft . creativetab . CreativeTabs ; <nl> + import net . minecraft . entity . Entity ; <nl> + import net . minecraft . entity . player . EntityPlayer ; <nl> + import net . minecraft . entity . player . EntityPlayer . EnumStatus ; <nl> + import net . minecraft . item . Item ; <nl> + import net . minecraft . item . ItemStack ; <nl> + import net . minecraft . nbt . NBTTagCompound ; <nl> + import net . minecraft . world . World ; <nl> + import net . minecraftforge . common . IExtendedEntityProperties ; <nl> + import net . minecraftforge . common . MinecraftForge ; <nl> + import net . minecraftforge . event . entity . EntityEvent . EntityConstructing ; <nl> + import net . minecraftforge . event . entity . player . PlayerWakeUpEvent ; <nl> + import net . minecraftforge . event . entity . player . SleepingLocationCheckEvent ; <nl> + import net . minecraftforge . fml . common . Mod ; <nl> + import net . minecraftforge . fml . common . event . FMLPreInitializationEvent ; <nl> + import net . minecraftforge . fml . common . eventhandler . Event . Result ; <nl> + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; <nl> + import net . minecraftforge . fml . common . registry . GameRegistry ; <nl> + <nl> + @ Mod ( modid = NoBedSleepingTest . MODID , version = NoBedSleepingTest . VERSION ) <nl> + public class NoBedSleepingTest <nl> + { <nl> + public static final String MODID = " ForgeDebugNoBedSleeping " ; <nl> + public static final String VERSION = " 1 . 0 " ; <nl> + <nl> + @ Mod . EventHandler <nl> + public void preInit ( FMLPreInitializationEvent event ) <nl> + { <nl> + GameRegistry . registerItem ( ItemSleepingPill . instance , ItemSleepingPill . name ) ; <nl> + MinecraftForge . EVENT _ BUS . register ( new EventHandler ( ) ) ; <nl> + } <nl> + <nl> + public static class EventHandler <nl> + { <nl> + @ SubscribeEvent <nl> + public void onEntityConstruct ( EntityConstructing evt ) <nl> + { <nl> + evt . entity . registerExtendedProperties ( ExtendedPropertySleeping . name , new ExtendedPropertySleeping ( ) ) ; <nl> + } <nl> + <nl> + @ SubscribeEvent <nl> + public void onBedCheck ( SleepingLocationCheckEvent evt ) <nl> + { <nl> + final IExtendedEntityProperties property = evt . entityPlayer . getExtendedProperties ( ExtendedPropertySleeping . name ) ; <nl> + if ( property instanceof ExtendedPropertySleeping & & ( ( ExtendedPropertySleeping ) property ) . isSleeping ) <nl> + evt . setResult ( Result . ALLOW ) ; <nl> + } <nl> + <nl> + @ SubscribeEvent <nl> + public void onWakeUp ( PlayerWakeUpEvent evt ) <nl> + { <nl> + final IExtendedEntityProperties property = evt . entityPlayer . getExtendedProperties ( ExtendedPropertySleeping . name ) ; <nl> + if ( property instanceof ExtendedPropertySleeping ) <nl> + ( ( ExtendedPropertySleeping ) property ) . isSleeping = false ; <nl> + } <nl> + } <nl> + <nl> + public static class ExtendedPropertySleeping implements IExtendedEntityProperties <nl> + { <nl> + private static final String TAG _ NAME = " IsSleepingExt " ; <nl> + <nl> + public static final String name = " is _ sleeping " ; <nl> + <nl> + public boolean isSleeping ; <nl> + <nl> + @ Override <nl> + public void saveNBTData ( NBTTagCompound compound ) <nl> + { <nl> + compound . setBoolean ( TAG _ NAME , isSleeping ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void loadNBTData ( NBTTagCompound compound ) <nl> + { <nl> + this . isSleeping = compound . getBoolean ( TAG _ NAME ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void init ( Entity entity , World world ) <nl> + { <nl> + } <nl> + <nl> + } <nl> + <nl> + public static class ItemSleepingPill extends Item <nl> + { <nl> + public static final ItemSleepingPill instance = new ItemSleepingPill ( ) ; <nl> + public static final String name = " sleeping _ pill " ; <nl> + <nl> + private ItemSleepingPill ( ) <nl> + { <nl> + setCreativeTab ( CreativeTabs . tabMisc ) ; <nl> + setUnlocalizedName ( MODID + " : " + name ) ; <nl> + } <nl> + <nl> + public ItemStack onItemRightClick ( ItemStack itemStackIn , World worldIn , EntityPlayer playerIn ) <nl> + { <nl> + if ( ! worldIn . isRemote ) <nl> + { <nl> + final EnumStatus result = playerIn . trySleep ( playerIn . getPosition ( ) ) ; <nl> + if ( result = = EnumStatus . OK ) <nl> + { <nl> + final IExtendedEntityProperties property = playerIn . getExtendedProperties ( ExtendedPropertySleeping . name ) ; <nl> + if ( property instanceof ExtendedPropertySleeping ) <nl> + ( ( ExtendedPropertySleeping ) property ) . isSleeping = true ; <nl> + } <nl> + } <nl> + return itemStackIn ; <nl> + } <nl> + } <nl> + }
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> index 0d298e8 . . 1d1e587 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch <nl> @ @ - 188 , 7 + 188 , 7 @ @ <nl> } <nl> <nl> public EntityItem func _ 146097 _ a ( ItemStack p _ 146097 _ 1 _ , boolean p _ 146097 _ 2 _ , boolean p _ 146097 _ 3 _ ) <nl> - @ @ - 723 , 13 + 786 , 25 @ @ <nl> + @ @ - 723 , 13 + 786 , 31 @ @ <nl> <nl> public void func _ 71012 _ a ( EntityItem p _ 71012 _ 1 _ ) <nl> { <nl> @ @ - 204 , 18 + 204 , 24 @ @ <nl> public float func _ 146096 _ a ( Block p _ 146096 _ 1 _ , boolean p _ 146096 _ 2 _ ) <nl> { <nl> - float f = this . field _ 71071 _ by . func _ 146023 _ a ( p _ 146096 _ 1 _ ) ; <nl> - + return getBreakSpeed ( p _ 146096 _ 1 _ , p _ 146096 _ 2 _ , 0 ) ; <nl> + + return getBreakSpeed ( p _ 146096 _ 1 _ , p _ 146096 _ 2 _ , 0 , 0 , - 1 , 0 ) ; <nl> + } <nl> <nl> + + @ Deprecated / / Location Specifc , one below , remove in 1 . 8 <nl> + public float getBreakSpeed ( Block p _ 146096 _ 1 _ , boolean p _ 146096 _ 2 _ , int meta ) <nl> + { <nl> + + return getBreakSpeed ( p _ 146096 _ 1 _ , p _ 146096 _ 2 _ , meta , 0 , - 1 , 0 ) ; <nl> + + } <nl> + + <nl> + + public float getBreakSpeed ( Block p _ 146096 _ 1 _ , boolean p _ 146096 _ 2 _ , int meta , int x , int y , int z ) <nl> + + { <nl> + ItemStack stack = field _ 71071 _ by . func _ 70448 _ g ( ) ; <nl> + float f = ( stack = = null ? 1 . 0F : stack . func _ 77973 _ b ( ) . getDigSpeed ( stack , p _ 146096 _ 1 _ , meta ) ) ; <nl> + <nl> if ( f > 1 . 0F ) <nl> { <nl> int i = EnchantmentHelper . func _ 77509 _ b ( this ) ; <nl> - @ @ - 739 , 7 + 814 , 9 @ @ <nl> + @ @ - 739 , 7 + 820 , 9 @ @ <nl> { <nl> float f1 = ( float ) ( i * i + 1 ) ; <nl> <nl> @ @ - 226 , 12 + 232 , 12 @ @ <nl> { <nl> f + = f1 * 0 . 08F ; <nl> } <nl> - @ @ - 770 , 12 + 847 , 13 @ @ <nl> + @ @ - 770 , 12 + 853 , 13 @ @ <nl> f / = 5 . 0F ; <nl> } <nl> <nl> - return f ; <nl> - + f = ForgeEventFactory . getBreakSpeed ( this , p _ 146096 _ 1 _ , meta , f ) ; <nl> + + f = ForgeEventFactory . getBreakSpeed ( this , p _ 146096 _ 1 _ , meta , f , x , y , z ) ; <nl> + return ( f < 0 ? 0 : f ) ; <nl> } <nl> <nl> @ @ - 242 , 7 + 248 , 7 @ @ <nl> } <nl> <nl> public void func _ 70037 _ a ( NBTTagCompound p _ 70037 _ 1 _ ) <nl> - @ @ - 804 , 6 + 882 , 16 @ @ <nl> + @ @ - 804 , 6 + 888 , 16 @ @ <nl> this . field _ 82248 _ d = p _ 70037 _ 1 _ . func _ 74767 _ n ( " SpawnForced " ) ; <nl> } <nl> <nl> @ @ - 259 , 7 + 265 , 7 @ @ <nl> this . field _ 71100 _ bB . func _ 75112 _ a ( p _ 70037 _ 1 _ ) ; <nl> this . field _ 71075 _ bZ . func _ 75095 _ b ( p _ 70037 _ 1 _ ) ; <nl> <nl> - @ @ - 834 , 6 + 922 , 23 @ @ <nl> + @ @ - 834 , 6 + 928 , 23 @ @ <nl> p _ 70014 _ 1 _ . func _ 74757 _ a ( " SpawnForced " , this . field _ 82248 _ d ) ; <nl> } <nl> <nl> @ @ - 283 , 7 + 289 , 7 @ @ <nl> this . field _ 71100 _ bB . func _ 75117 _ b ( p _ 70014 _ 1 _ ) ; <nl> this . field _ 71075 _ bZ . func _ 75091 _ a ( p _ 70014 _ 1 _ ) ; <nl> p _ 70014 _ 1 _ . func _ 74782 _ a ( " EnderItems " , this . field _ 71078 _ a . func _ 70487 _ g ( ) ) ; <nl> - @ @ - 855 , 7 + 960 , 7 @ @ <nl> + @ @ - 855 , 7 + 966 , 7 @ @ <nl> <nl> public float func _ 70047 _ e ( ) <nl> { <nl> @ @ - 292 , 7 + 298 , 7 @ @ <nl> } <nl> <nl> protected void func _ 71061 _ d _ ( ) <nl> - @ @ - 865 , 6 + 970 , 7 @ @ <nl> + @ @ - 865 , 6 + 976 , 7 @ @ <nl> <nl> public boolean func _ 70097 _ a ( DamageSource p _ 70097 _ 1 _ , float p _ 70097 _ 2 _ ) <nl> { <nl> @ @ - 300 , 7 + 306 , 7 @ @ <nl> if ( this . func _ 85032 _ ar ( ) ) <nl> { <nl> return false ; <nl> - @ @ - 966 , 12 + 1072 , 15 @ @ <nl> + @ @ - 966 , 12 + 1078 , 15 @ @ <nl> { <nl> if ( ! this . func _ 85032 _ ar ( ) ) <nl> { <nl> @ @ - 317 , 7 + 323 , 7 @ @ <nl> p _ 70665 _ 2 _ = this . func _ 70672 _ c ( p _ 70665 _ 1 _ , p _ 70665 _ 2 _ ) ; <nl> float f1 = p _ 70665 _ 2 _ ; <nl> p _ 70665 _ 2 _ = Math . max ( p _ 70665 _ 2 _ - this . func _ 110139 _ bj ( ) , 0 . 0F ) ; <nl> - @ @ - 1005 , 6 + 1114 , 7 @ @ <nl> + @ @ - 1005 , 6 + 1120 , 7 @ @ <nl> <nl> public boolean func _ 70998 _ m ( Entity p _ 70998 _ 1 _ ) <nl> { <nl> @ @ - 325 , 7 + 331 , 7 @ @ <nl> ItemStack itemstack = this . func _ 71045 _ bC ( ) ; <nl> ItemStack itemstack1 = itemstack ! = null ? itemstack . func _ 77946 _ l ( ) : null ; <nl> <nl> - @ @ - 1055 , 7 + 1165 , 9 @ @ <nl> + @ @ - 1055 , 7 + 1171 , 9 @ @ <nl> <nl> public void func _ 71028 _ bD ( ) <nl> { <nl> @ @ - 335 , 7 + 341 , 7 @ @ <nl> } <nl> <nl> public double func _ 70033 _ W ( ) <nl> - @ @ - 1065 , 6 + 1177 , 15 @ @ <nl> + @ @ - 1065 , 6 + 1183 , 15 @ @ <nl> <nl> public void func _ 71059 _ n ( Entity p _ 71059 _ 1 _ ) <nl> { <nl> @ @ - 351 , 7 + 357 , 7 @ @ <nl> if ( p _ 71059 _ 1 _ . func _ 70075 _ an ( ) ) <nl> { <nl> if ( ! p _ 71059 _ 1 _ . func _ 85031 _ j ( this ) ) <nl> - @ @ - 1212 , 6 + 1333 , 12 @ @ <nl> + @ @ - 1212 , 6 + 1339 , 12 @ @ <nl> <nl> public EntityPlayer . EnumStatus func _ 71018 _ a ( int p _ 71018 _ 1 _ , int p _ 71018 _ 2 _ , int p _ 71018 _ 3 _ ) <nl> { <nl> @ @ - 364 , 7 + 370 , 7 @ @ <nl> if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) <nl> { <nl> if ( this . func _ 70608 _ bn ( ) | | ! this . func _ 70089 _ S ( ) ) <nl> - @ @ - 1254 , 8 + 1381 , 7 @ @ <nl> + @ @ - 1254 , 8 + 1387 , 7 @ @ <nl> <nl> if ( this . field _ 70170 _ p . func _ 72899 _ e ( p _ 71018 _ 1 _ , p _ 71018 _ 2 _ , p _ 71018 _ 3 _ ) ) <nl> { <nl> @ @ - 374 , 7 + 380 , 7 @ @ <nl> float f1 = 0 . 5F ; <nl> float f = 0 . 5F ; <nl> <nl> - @ @ - 1322 , 11 + 1448 , 12 @ @ <nl> + @ @ - 1322 , 11 + 1454 , 12 @ @ <nl> this . func _ 71061 _ d _ ( ) ; <nl> ChunkCoordinates chunkcoordinates = this . field _ 71081 _ bT ; <nl> ChunkCoordinates chunkcoordinates1 = this . field _ 71081 _ bT ; <nl> @ @ - 390 , 7 + 396 , 7 @ @ <nl> <nl> if ( chunkcoordinates1 = = null ) <nl> { <nl> - @ @ - 1360 , 7 + 1487 , 7 @ @ <nl> + @ @ - 1360 , 7 + 1493 , 7 @ @ <nl> <nl> private boolean func _ 71065 _ l ( ) <nl> { <nl> @ @ - 399 , 7 + 405 , 7 @ @ <nl> } <nl> <nl> public static ChunkCoordinates func _ 71056 _ a ( World p _ 71056 _ 0 _ , ChunkCoordinates p _ 71056 _ 1 _ , boolean p _ 71056 _ 2 _ ) <nl> - @ @ - 1371 , 9 + 1498 , 9 @ @ <nl> + @ @ - 1371 , 9 + 1504 , 9 @ @ <nl> ichunkprovider . func _ 73158 _ c ( p _ 71056 _ 1 _ . field _ 71574 _ a - 3 > > 4 , p _ 71056 _ 1 _ . field _ 71573 _ c + 3 > > 4 ) ; <nl> ichunkprovider . func _ 73158 _ c ( p _ 71056 _ 1 _ . field _ 71574 _ a + 3 > > 4 , p _ 71056 _ 1 _ . field _ 71573 _ c + 3 > > 4 ) ; <nl> <nl> @ @ - 411 , 7 + 417 , 7 @ @ <nl> return chunkcoordinates1 ; <nl> } <nl> else <nl> - @ @ - 1391 , 8 + 1518 , 10 @ @ <nl> + @ @ - 1391 , 8 + 1524 , 10 @ @ <nl> { <nl> if ( this . field _ 71081 _ bT ! = null ) <nl> { <nl> @ @ - 424 , 7 + 430 , 7 @ @ <nl> <nl> switch ( j ) <nl> { <nl> - @ @ - 1448 , 18 + 1577 , 25 @ @ <nl> + @ @ - 1448 , 18 + 1583 , 25 @ @ <nl> <nl> public void func _ 146105 _ b ( IChatComponent p _ 146105 _ 1 _ ) { } <nl> <nl> @ @ - 452 , 7 + 458 , 7 @ @ <nl> if ( p _ 71063 _ 1 _ ! = null ) <nl> { <nl> this . field _ 71077 _ c = new ChunkCoordinates ( p _ 71063 _ 1 _ ) ; <nl> - @ @ - 1633 , 6 + 1769 , 10 @ @ <nl> + @ @ - 1633 , 6 + 1775 , 10 @ @ <nl> <nl> super . func _ 70069 _ a ( p _ 70069 _ 1 _ ) ; <nl> } <nl> @ @ - 463 , 7 + 469 , 7 @ @ <nl> } <nl> <nl> protected String func _ 146067 _ o ( int p _ 146067 _ 1 _ ) <nl> - @ @ - 1675 , 11 + 1815 , 6 @ @ <nl> + @ @ - 1675 , 11 + 1821 , 6 @ @ <nl> } <nl> else <nl> { <nl> @ @ - 475 , 7 + 481 , 7 @ @ <nl> if ( this . field _ 71074 _ e ! = null & & p _ 70620 _ 1 _ . func _ 77973 _ b ( ) = = Items . field _ 151031 _ f ) <nl> { <nl> int j = p _ 70620 _ 1 _ . func _ 77988 _ m ( ) - this . field _ 71072 _ f ; <nl> - @ @ - 1699 , 6 + 1834 , 7 @ @ <nl> + @ @ - 1699 , 6 + 1840 , 7 @ @ <nl> return Items . field _ 151031 _ f . func _ 94599 _ c ( 0 ) ; <nl> } <nl> } <nl> @ @ - 483 , 7 + 489 , 7 @ @ <nl> } <nl> <nl> return iicon ; <nl> - @ @ - 1782 , 6 + 1918 , 8 @ @ <nl> + @ @ - 1782 , 6 + 1924 , 8 @ @ <nl> { <nl> if ( p _ 71008 _ 1 _ ! = this . field _ 71074 _ e ) <nl> { <nl> @ @ - 492 , 7 + 498 , 7 @ @ <nl> this . field _ 71074 _ e = p _ 71008 _ 1 _ ; <nl> this . field _ 71072 _ f = p _ 71008 _ 2 _ ; <nl> <nl> - @ @ - 1876 , 6 + 2014 , 17 @ @ <nl> + @ @ - 1876 , 6 + 2020 , 17 @ @ <nl> } <nl> <nl> this . field _ 71078 _ a = p _ 71049 _ 1 _ . field _ 71078 _ a ; <nl> @ @ - 510 , 7 + 516 , 7 @ @ <nl> } <nl> <nl> protected boolean func _ 70041 _ e _ ( ) <nl> - @ @ - 1914 , 7 + 2063 , 14 @ @ <nl> + @ @ - 1914 , 7 + 2069 , 14 @ @ <nl> <nl> public void func _ 70062 _ b ( int p _ 70062 _ 1 _ , ItemStack p _ 70062 _ 2 _ ) <nl> { <nl> @ @ - 526 , 7 + 532 , 7 @ @ <nl> } <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> - @ @ - 1959 , 7 + 2115 , 7 @ @ <nl> + @ @ - 1959 , 7 + 2121 , 7 @ @ <nl> <nl> public IChatComponent func _ 145748 _ c _ ( ) <nl> { <nl> @ @ - 535 , 7 + 541 , 7 @ @ <nl> chatcomponenttext . func _ 150256 _ b ( ) . func _ 150241 _ a ( new ClickEvent ( ClickEvent . Action . SUGGEST _ COMMAND , " / msg " + this . func _ 70005 _ c _ ( ) + " " ) ) ; <nl> return chatcomponenttext ; <nl> } <nl> - @ @ - 2042 , 6 + 2198 , 118 @ @ <nl> + @ @ - 2042 , 6 + 2204 , 118 @ @ <nl> FMLNetworkHandler . openGui ( this , mod , modGuiId , world , x , y , z ) ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / common / ForgeHooks . java b / src / main / java / net / minecraftforge / common / ForgeHooks . java <nl> index d2a4bbe . . 1ad659e 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / ForgeHooks . java <nl> + + + b / src / main / java / net / minecraftforge / common / ForgeHooks . java <nl> @ @ - 114 , 11 + 114 , 11 @ @ public class ForgeHooks <nl> <nl> if ( ! canHarvestBlock ( block , player , metadata ) ) <nl> { <nl> - return player . getBreakSpeed ( block , true , metadata ) / hardness / 100F ; <nl> + return player . getBreakSpeed ( block , true , metadata , x , y , z ) / hardness / 100F ; <nl> } <nl> else <nl> { <nl> - return player . getBreakSpeed ( block , false , metadata ) / hardness / 30F ; <nl> + return player . getBreakSpeed ( block , false , metadata , x , y , z ) / hardness / 30F ; <nl> } <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> index 91cd661 . . e402c62 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> @ @ - 39 , 9 + 39 , 15 @ @ public class ForgeEventFactory <nl> return event . success ; <nl> } <nl> <nl> + @ Deprecated / / Location version below <nl> public static float getBreakSpeed ( EntityPlayer player , Block block , int metadata , float original ) <nl> { <nl> - PlayerEvent . BreakSpeed event = new PlayerEvent . BreakSpeed ( player , block , metadata , original ) ; <nl> + return getBreakSpeed ( player , block , metadata , original , 0 , - 1 , 0 ) ; <nl> + } <nl> + <nl> + public static float getBreakSpeed ( EntityPlayer player , Block block , int metadata , float original , int x , int y , int z ) <nl> + { <nl> + PlayerEvent . BreakSpeed event = new PlayerEvent . BreakSpeed ( player , block , metadata , original , x , y , z ) ; <nl> return ( MinecraftForge . EVENT _ BUS . post ( event ) ? - 1 : event . newSpeed ) ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / event / entity / player / PlayerEvent . java b / src / main / java / net / minecraftforge / event / entity / player / PlayerEvent . java <nl> index 0c0b028 . . f57bc67 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / entity / player / PlayerEvent . java <nl> + + + b / src / main / java / net / minecraftforge / event / entity / player / PlayerEvent . java <nl> @ @ - 34 , 14 + 34 , 26 @ @ public class PlayerEvent extends LivingEvent <nl> public final int metadata ; <nl> public final float originalSpeed ; <nl> public float newSpeed = 0 . 0f ; <nl> + public final int x ; <nl> + public final int y ; / / - 1 notes unknown location <nl> + public final int z ; <nl> <nl> + @ Deprecated <nl> public BreakSpeed ( EntityPlayer player , Block block , int metadata , float original ) <nl> { <nl> + this ( player , block , metadata , original , 0 , - 1 , 0 ) ; <nl> + } <nl> + <nl> + public BreakSpeed ( EntityPlayer player , Block block , int metadata , float original , int x , int y , int z ) <nl> + { <nl> super ( player ) ; <nl> this . block = block ; <nl> this . metadata = metadata ; <nl> this . originalSpeed = original ; <nl> this . newSpeed = original ; <nl> + this . x = x ; <nl> + this . y = y ; <nl> + this . z = z ; <nl> } <nl> } <nl>

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 index cdf492a . . 20055aa 100644 
 - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 @ @ - 296 , 9 + 296 , 12 @ @ 
 if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) 
 { 
 if ( this . func _ 70608 _ bn ( ) | | ! this . func _ 70089 _ S ( ) ) 
 - @ @ - 1352 , 7 + 1440 , 7 @ @ 
 + @ @ - 1350 , 9 + 1438 , 9 @ @ 
 
 - if ( this . field _ 70170 _ p . func _ 175667 _ e ( p _ 180469 _ 1 _ ) ) 
 + this . func _ 70105 _ a ( 0 . 2F , 0 . 2F ) ; 
 + 
 + - if ( this . field _ 70170 _ p . func _ 175667 _ e ( p _ 180469 _ 1 _ ) ) 
 + + if ( this . field _ 70170 _ p . func _ 175667 _ e ( p _ 180469 _ 1 _ ) & & field _ 70170 _ p . func _ 180495 _ p ( p _ 180469 _ 1 _ ) . func _ 177230 _ c ( ) . isBed ( field _ 70170 _ p , p _ 180469 _ 1 _ , this ) ) 
 { 
 - EnumFacing enumfacing = ( EnumFacing ) this . field _ 70170 _ p . func _ 180495 _ p ( p _ 180469 _ 1 _ ) . func _ 177229 _ b ( BlockDirectional . field _ 176387 _ N ) ; 
 + EnumFacing enumfacing = this . field _ 70170 _ p . func _ 180495 _ p ( p _ 180469 _ 1 _ ) . func _ 177230 _ c ( ) . getBedDirection ( field _ 70170 _ p , p _ 180469 _ 1 _ ) ; 
 @ @ - 323 , 12 + 326 , 23 @ @ 
 
 if ( blockpos = = null ) 
 { 
 - @ @ - 1448 , 14 + 1537 , 14 @ @ 
 + @ @ - 1430 , 6 + 1519 , 10 @ @ 
 + 
 + this . func _ 70107 _ b ( ( double ) ( ( float ) blockpos . func _ 177958 _ n ( ) + 0 . 5F ) , ( double ) ( ( float ) blockpos . func _ 177956 _ o ( ) + 0 . 1F ) , ( double ) ( ( float ) blockpos . func _ 177952 _ p ( ) + 0 . 5F ) ) ; 
 + } 
 + + else 
 + + { 
 + + p _ 70999 _ 3 _ = false ; 
 + + } 
 + 
 + this . field _ 71083 _ bS = false ; 
 + 
 + @ @ - 1448 , 14 + 1541 , 14 @ @ 
 
 private boolean func _ 175143 _ p ( ) 
 { 
 - return this . field _ 70170 _ p . func _ 180495 _ p ( this . field _ 71081 _ bT ) . func _ 177230 _ c ( ) = = Blocks . field _ 150324 _ C ; 
 - + return this . field _ 70170 _ p . func _ 180495 _ p ( this . field _ 71081 _ bT ) . func _ 177230 _ c ( ) . isBed ( field _ 70170 _ p , field _ 71081 _ bT , this ) ; 
 + + return net . minecraftforge . event . ForgeEventFactory . fireSleepingLocationCheck ( this , field _ 71081 _ bT ) ; 
 } 
 
 public static BlockPos func _ 180467 _ a ( World p _ 180467 _ 0 _ , BlockPos p _ 180467 _ 1 _ , boolean p _ 180467 _ 2 _ ) 
 @ @ - 340 , 7 + 354 , 7 @ @ 
 { 
 if ( ! p _ 180467 _ 2 _ ) 
 { 
 - @ @ - 1470 , 7 + 1559 , 7 @ @ 
 + @ @ - 1470 , 16 + 1563 , 16 @ @ 
 } 
 else 
 { 
 @ @ - 349 , 16 + 363 , 18 @ @ 
 } 
 } 
 
 - @ @ - 1479 , 7 + 1568 , 7 @ @ 
 + @ SideOnly ( Side . CLIENT ) 
 + public float func _ 71051 _ bG ( ) 
 { 
 - if ( this . field _ 71081 _ bT ! = null ) 
 + - if ( this . field _ 71081 _ bT ! = null ) 
 + + if ( this . field _ 71081 _ bT ! = null & & field _ 70170 _ p . func _ 180495 _ p ( field _ 71081 _ bT ) . func _ 177230 _ c ( ) . isBed ( field _ 70170 _ p , field _ 71081 _ bT , this ) ) 
 { 
 - EnumFacing enumfacing = ( EnumFacing ) this . field _ 70170 _ p . func _ 180495 _ p ( this . field _ 71081 _ bT ) . func _ 177229 _ b ( BlockDirectional . field _ 176387 _ N ) ; 
 + EnumFacing enumfacing = this . field _ 70170 _ p . func _ 180495 _ p ( this . field _ 71081 _ bT ) . func _ 177230 _ c ( ) . getBedDirection ( field _ 70170 _ p , field _ 71081 _ bT ) ; 
 
 switch ( enumfacing ) 
 { 
 - @ @ - 1519 , 16 + 1608 , 24 @ @ 
 + @ @ - 1519 , 16 + 1612 , 24 @ @ 
 
 public BlockPos func _ 180470 _ cg ( ) 
 { 
 @ @ - 385 , 7 + 401 , 7 @ @ 
 if ( p _ 180473 _ 1 _ ! = null ) 
 { 
 this . field _ 71077 _ c = p _ 180473 _ 1 _ ; 
 - @ @ - 1712 , 6 + 1809 , 10 @ @ 
 + @ @ - 1712 , 6 + 1813 , 10 @ @ 
 
 super . func _ 180430 _ e ( p _ 180430 _ 1 _ , p _ 180430 _ 2 _ ) ; 
 } 
 @ @ - 396 , 7 + 412 , 7 @ @ 
 } 
 
 protected void func _ 71061 _ d _ ( ) 
 - @ @ - 1735 , 6 + 1836 , 7 @ @ 
 + @ @ - 1735 , 6 + 1840 , 7 @ @ 
 } 
 
 EntityList . EntityEggInfo entitylist $ entityegginfo = ( EntityList . EntityEggInfo ) EntityList . field _ 75627 _ a . get ( Integer . valueOf ( EntityList . func _ 75619 _ a ( p _ 70074 _ 1 _ ) ) ) ; 
 @ @ - 404 , 7 + 420 , 7 @ @ 
 
 if ( entitylist $ entityegginfo ! = null ) 
 { 
 - @ @ - 1847 , 6 + 1949 , 8 @ @ 
 + @ @ - 1847 , 6 + 1953 , 8 @ @ 
 { 
 if ( p _ 71008 _ 1 _ ! = this . field _ 71074 _ e ) 
 { 
 @ @ - 413 , 7 + 429 , 7 @ @ 
 this . field _ 71074 _ e = p _ 71008 _ 1 _ ; 
 this . field _ 71072 _ f = p _ 71008 _ 2 _ ; 
 
 - @ @ - 1918 , 6 + 2022 , 10 @ @ 
 + @ @ - 1918 , 6 + 2026 , 10 @ @ 
 this . field _ 181016 _ an = p _ 71049 _ 1 _ . field _ 181016 _ an ; 
 this . field _ 181017 _ ao = p _ 71049 _ 1 _ . field _ 181017 _ ao ; 
 this . field _ 181018 _ ap = p _ 71049 _ 1 _ . field _ 181018 _ ap ; 
 @ @ - 424 , 7 + 440 , 7 @ @ 
 } 
 else if ( this . field _ 70170 _ p . func _ 82736 _ K ( ) . func _ 82766 _ b ( " keepInventory " ) ) 
 { 
 - @ @ - 1931 , 6 + 2039 , 18 @ @ 
 + @ @ - 1931 , 6 + 2043 , 18 @ @ 
 this . field _ 175152 _ f = p _ 71049 _ 1 _ . field _ 175152 _ f ; 
 this . field _ 71078 _ a = p _ 71049 _ 1 _ . field _ 71078 _ a ; 
 this . func _ 70096 _ w ( ) . func _ 75692 _ b ( 10 , Byte . valueOf ( p _ 71049 _ 1 _ . func _ 70096 _ w ( ) . func _ 75683 _ a ( 10 ) ) ) ; 
 @ @ - 443 , 7 + 459 , 7 @ @ 
 } 
 
 protected boolean func _ 70041 _ e _ ( ) 
 - @ @ - 1968 , 7 + 2088 , 14 @ @ 
 + @ @ - 1968 , 7 + 2092 , 14 @ @ 
 
 public void func _ 70062 _ b ( int p _ 70062 _ 1 _ , ItemStack p _ 70062 _ 2 _ ) 
 { 
 @ @ - 459 , 7 + 475 , 7 @ @ 
 } 
 
 @ SideOnly ( Side . CLIENT ) 
 - @ @ - 2013 , 7 + 2140 , 10 @ @ 
 + @ @ - 2013 , 7 + 2144 , 10 @ @ 
 
 public IChatComponent func _ 145748 _ c _ ( ) 
 { 
 @ @ - 471 , 7 + 487 , 7 @ @ 
 ichatcomponent . func _ 150256 _ b ( ) . func _ 150241 _ a ( new ClickEvent ( ClickEvent . Action . SUGGEST _ COMMAND , " / msg " + this . func _ 70005 _ c _ ( ) + " " ) ) ; 
 ichatcomponent . func _ 150256 _ b ( ) . func _ 150209 _ a ( this . func _ 174823 _ aP ( ) ) ; 
 ichatcomponent . func _ 150256 _ b ( ) . func _ 179989 _ a ( this . func _ 70005 _ c _ ( ) ) ; 
 - @ @ - 2022 , 7 + 2152 , 7 @ @ 
 + @ @ - 2022 , 7 + 2156 , 7 @ @ 
 
 public float func _ 70047 _ e ( ) 
 { 
 @ @ - 480 , 7 + 496 , 7 @ @ 
 
 if ( this . func _ 70608 _ bn ( ) ) 
 { 
 - @ @ - 2155 , 6 + 2285 , 136 @ @ 
 + @ @ - 2155 , 6 + 2289 , 136 @ @ 
 this . field _ 175153 _ bG = p _ 175150 _ 1 _ ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 index 1084089 . . 1d51ff4 100644 
 - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 @ @ - 65 , 6 + 65 , 7 @ @ import net . minecraftforge . event . entity . player . PlayerSetSpawnEvent ; 
 import net . minecraftforge . event . entity . player . PlayerSleepInBedEvent ; 
 import net . minecraftforge . event . entity . player . PlayerUseItemEvent ; 
 import net . minecraftforge . event . entity . player . PlayerWakeUpEvent ; 
 + import net . minecraftforge . event . entity . player . SleepingLocationCheckEvent ; 
 import net . minecraftforge . event . entity . player . UseHoeEvent ; 
 import net . minecraftforge . event . world . BlockEvent ; 
 import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; 
 @ @ - 500 , 4 + 501 , 17 @ @ public class ForgeEventFactory 
 MinecraftForge . EVENT _ BUS . post ( event ) ; 
 return event . getCapabilities ( ) . size ( ) > 0 ? new CapabilityDispatcher ( event . getCapabilities ( ) , parent ) : null ; 
 } 
 + 
 + public static boolean fireSleepingLocationCheck ( EntityPlayer player , BlockPos sleepingLocation ) 
 + { 
 + SleepingLocationCheckEvent evt = new SleepingLocationCheckEvent ( player , sleepingLocation ) ; 
 + MinecraftForge . EVENT _ BUS . post ( evt ) ; 
 + 
 + Result canContinueSleep = evt . getResult ( ) ; 
 + if ( canContinueSleep = = Result . DEFAULT ) 
 + return player . worldObj . getBlockState ( player . playerLocation ) . getBlock ( ) . isBed ( player . worldObj , player . playerLocation , player ) ; 
 + else 
 + return canContinueSleep = = Result . ALLOW ; 
 + } 
 + 
 } 
 diff - - git a / src / main / java / net / minecraftforge / event / entity / player / SleepingLocationCheckEvent . java b / src / main / java / net / minecraftforge / event / entity / player / SleepingLocationCheckEvent . java 
 new file mode 100644 
 index 0000000 . . 0dbd832 
 - - - / dev / null 
 + + + b / src / main / java / net / minecraftforge / event / entity / player / SleepingLocationCheckEvent . java 
 @ @ - 0 , 0 + 1 , 28 @ @ 
 + package net . minecraftforge . event . entity . player ; 
 + 
 + import net . minecraft . entity . player . EntityPlayer ; 
 + import net . minecraft . util . BlockPos ; 
 + import net . minecraftforge . fml . common . eventhandler . Event . HasResult ; 
 + 
 + / * * 
 + * This event is fired when game checks , if sleeping player should be still considered " in bed " . < br > 
 + * Failing this check will cause player to wake up . < br > 
 + * 
 + * This event has a result . { @ link HasResult } < br > 
 + * 
 + * setResult ( ALLOW ) informs game that player is still " in bed " < br > 
 + * setResult ( DEFAULT ) causes game to check { @ link net . minecraft . block . Block # isBed ( net . minecraft . world . IBlockAccess , BlockPos , net . minecraft . entity . Entity ) } instead 
 + * / 
 + @ HasResult 
 + public class SleepingLocationCheckEvent extends PlayerEvent 
 + { 
 + 
 + public final BlockPos sleepingLocation ; 
 + 
 + public SleepingLocationCheckEvent ( EntityPlayer player , BlockPos sleepingLocation ) 
 + { 
 + super ( player ) ; 
 + this . sleepingLocation = sleepingLocation ; 
 + } 
 + 
 + } 
 diff - - git a / src / test / java / net / minecraftforge / test / NoBedSleepingTest . java b / src / test / java / net / minecraftforge / test / NoBedSleepingTest . java 
 new file mode 100644 
 index 0000000 . . c231fcd 
 - - - / dev / null 
 + + + b / src / test / java / net / minecraftforge / test / NoBedSleepingTest . java 
 @ @ - 0 , 0 + 1 , 113 @ @ 
 + package net . minecraftforge . test ; 
 + 
 + import net . minecraft . creativetab . CreativeTabs ; 
 + import net . minecraft . entity . Entity ; 
 + import net . minecraft . entity . player . EntityPlayer ; 
 + import net . minecraft . entity . player . EntityPlayer . EnumStatus ; 
 + import net . minecraft . item . Item ; 
 + import net . minecraft . item . ItemStack ; 
 + import net . minecraft . nbt . NBTTagCompound ; 
 + import net . minecraft . world . World ; 
 + import net . minecraftforge . common . IExtendedEntityProperties ; 
 + import net . minecraftforge . common . MinecraftForge ; 
 + import net . minecraftforge . event . entity . EntityEvent . EntityConstructing ; 
 + import net . minecraftforge . event . entity . player . PlayerWakeUpEvent ; 
 + import net . minecraftforge . event . entity . player . SleepingLocationCheckEvent ; 
 + import net . minecraftforge . fml . common . Mod ; 
 + import net . minecraftforge . fml . common . event . FMLPreInitializationEvent ; 
 + import net . minecraftforge . fml . common . eventhandler . Event . Result ; 
 + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; 
 + import net . minecraftforge . fml . common . registry . GameRegistry ; 
 + 
 + @ Mod ( modid = NoBedSleepingTest . MODID , version = NoBedSleepingTest . VERSION ) 
 + public class NoBedSleepingTest 
 + { 
 + public static final String MODID = " ForgeDebugNoBedSleeping " ; 
 + public static final String VERSION = " 1 . 0 " ; 
 + 
 + @ Mod . EventHandler 
 + public void preInit ( FMLPreInitializationEvent event ) 
 + { 
 + GameRegistry . registerItem ( ItemSleepingPill . instance , ItemSleepingPill . name ) ; 
 + MinecraftForge . EVENT _ BUS . register ( new EventHandler ( ) ) ; 
 + } 
 + 
 + public static class EventHandler 
 + { 
 + @ SubscribeEvent 
 + public void onEntityConstruct ( EntityConstructing evt ) 
 + { 
 + evt . entity . registerExtendedProperties ( ExtendedPropertySleeping . name , new ExtendedPropertySleeping ( ) ) ; 
 + } 
 + 
 + @ SubscribeEvent 
 + public void onBedCheck ( SleepingLocationCheckEvent evt ) 
 + { 
 + final IExtendedEntityProperties property = evt . entityPlayer . getExtendedProperties ( ExtendedPropertySleeping . name ) ; 
 + if ( property instanceof ExtendedPropertySleeping & & ( ( ExtendedPropertySleeping ) property ) . isSleeping ) 
 + evt . setResult ( Result . ALLOW ) ; 
 + } 
 + 
 + @ SubscribeEvent 
 + public void onWakeUp ( PlayerWakeUpEvent evt ) 
 + { 
 + final IExtendedEntityProperties property = evt . entityPlayer . getExtendedProperties ( ExtendedPropertySleeping . name ) ; 
 + if ( property instanceof ExtendedPropertySleeping ) 
 + ( ( ExtendedPropertySleeping ) property ) . isSleeping = false ; 
 + } 
 + } 
 + 
 + public static class ExtendedPropertySleeping implements IExtendedEntityProperties 
 + { 
 + private static final String TAG _ NAME = " IsSleepingExt " ; 
 + 
 + public static final String name = " is _ sleeping " ; 
 + 
 + public boolean isSleeping ; 
 + 
 + @ Override 
 + public void saveNBTData ( NBTTagCompound compound ) 
 + { 
 + compound . setBoolean ( TAG _ NAME , isSleeping ) ; 
 + } 
 + 
 + @ Override 
 + public void loadNBTData ( NBTTagCompound compound ) 
 + { 
 + this . isSleeping = compound . getBoolean ( TAG _ NAME ) ; 
 + } 
 + 
 + @ Override 
 + public void init ( Entity entity , World world ) 
 + { 
 + } 
 + 
 + } 
 + 
 + public static class ItemSleepingPill extends Item 
 + { 
 + public static final ItemSleepingPill instance = new ItemSleepingPill ( ) ; 
 + public static final String name = " sleeping _ pill " ; 
 + 
 + private ItemSleepingPill ( ) 
 + { 
 + setCreativeTab ( CreativeTabs . tabMisc ) ; 
 + setUnlocalizedName ( MODID + " : " + name ) ; 
 + } 
 + 
 + public ItemStack onItemRightClick ( ItemStack itemStackIn , World worldIn , EntityPlayer playerIn ) 
 + { 
 + if ( ! worldIn . isRemote ) 
 + { 
 + final EnumStatus result = playerIn . trySleep ( playerIn . getPosition ( ) ) ; 
 + if ( result = = EnumStatus . OK ) 
 + { 
 + final IExtendedEntityProperties property = playerIn . getExtendedProperties ( ExtendedPropertySleeping . name ) ; 
 + if ( property instanceof ExtendedPropertySleeping ) 
 + ( ( ExtendedPropertySleeping ) property ) . isSleeping = true ; 
 + } 
 + } 
 + return itemStackIn ; 
 + } 
 + } 
 + }

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 index 0d298e8 . . 1d1e587 100644 
 - - - a / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / player / EntityPlayer . java . patch 
 @ @ - 188 , 7 + 188 , 7 @ @ 
 } 
 
 public EntityItem func _ 146097 _ a ( ItemStack p _ 146097 _ 1 _ , boolean p _ 146097 _ 2 _ , boolean p _ 146097 _ 3 _ ) 
 - @ @ - 723 , 13 + 786 , 25 @ @ 
 + @ @ - 723 , 13 + 786 , 31 @ @ 
 
 public void func _ 71012 _ a ( EntityItem p _ 71012 _ 1 _ ) 
 { 
 @ @ - 204 , 18 + 204 , 24 @ @ 
 public float func _ 146096 _ a ( Block p _ 146096 _ 1 _ , boolean p _ 146096 _ 2 _ ) 
 { 
 - float f = this . field _ 71071 _ by . func _ 146023 _ a ( p _ 146096 _ 1 _ ) ; 
 - + return getBreakSpeed ( p _ 146096 _ 1 _ , p _ 146096 _ 2 _ , 0 ) ; 
 + + return getBreakSpeed ( p _ 146096 _ 1 _ , p _ 146096 _ 2 _ , 0 , 0 , - 1 , 0 ) ; 
 + } 
 
 + + @ Deprecated / / Location Specifc , one below , remove in 1 . 8 
 + public float getBreakSpeed ( Block p _ 146096 _ 1 _ , boolean p _ 146096 _ 2 _ , int meta ) 
 + { 
 + + return getBreakSpeed ( p _ 146096 _ 1 _ , p _ 146096 _ 2 _ , meta , 0 , - 1 , 0 ) ; 
 + + } 
 + + 
 + + public float getBreakSpeed ( Block p _ 146096 _ 1 _ , boolean p _ 146096 _ 2 _ , int meta , int x , int y , int z ) 
 + + { 
 + ItemStack stack = field _ 71071 _ by . func _ 70448 _ g ( ) ; 
 + float f = ( stack = = null ? 1 . 0F : stack . func _ 77973 _ b ( ) . getDigSpeed ( stack , p _ 146096 _ 1 _ , meta ) ) ; 
 + 
 if ( f > 1 . 0F ) 
 { 
 int i = EnchantmentHelper . func _ 77509 _ b ( this ) ; 
 - @ @ - 739 , 7 + 814 , 9 @ @ 
 + @ @ - 739 , 7 + 820 , 9 @ @ 
 { 
 float f1 = ( float ) ( i * i + 1 ) ; 
 
 @ @ - 226 , 12 + 232 , 12 @ @ 
 { 
 f + = f1 * 0 . 08F ; 
 } 
 - @ @ - 770 , 12 + 847 , 13 @ @ 
 + @ @ - 770 , 12 + 853 , 13 @ @ 
 f / = 5 . 0F ; 
 } 
 
 - return f ; 
 - + f = ForgeEventFactory . getBreakSpeed ( this , p _ 146096 _ 1 _ , meta , f ) ; 
 + + f = ForgeEventFactory . getBreakSpeed ( this , p _ 146096 _ 1 _ , meta , f , x , y , z ) ; 
 + return ( f < 0 ? 0 : f ) ; 
 } 
 
 @ @ - 242 , 7 + 248 , 7 @ @ 
 } 
 
 public void func _ 70037 _ a ( NBTTagCompound p _ 70037 _ 1 _ ) 
 - @ @ - 804 , 6 + 882 , 16 @ @ 
 + @ @ - 804 , 6 + 888 , 16 @ @ 
 this . field _ 82248 _ d = p _ 70037 _ 1 _ . func _ 74767 _ n ( " SpawnForced " ) ; 
 } 
 
 @ @ - 259 , 7 + 265 , 7 @ @ 
 this . field _ 71100 _ bB . func _ 75112 _ a ( p _ 70037 _ 1 _ ) ; 
 this . field _ 71075 _ bZ . func _ 75095 _ b ( p _ 70037 _ 1 _ ) ; 
 
 - @ @ - 834 , 6 + 922 , 23 @ @ 
 + @ @ - 834 , 6 + 928 , 23 @ @ 
 p _ 70014 _ 1 _ . func _ 74757 _ a ( " SpawnForced " , this . field _ 82248 _ d ) ; 
 } 
 
 @ @ - 283 , 7 + 289 , 7 @ @ 
 this . field _ 71100 _ bB . func _ 75117 _ b ( p _ 70014 _ 1 _ ) ; 
 this . field _ 71075 _ bZ . func _ 75091 _ a ( p _ 70014 _ 1 _ ) ; 
 p _ 70014 _ 1 _ . func _ 74782 _ a ( " EnderItems " , this . field _ 71078 _ a . func _ 70487 _ g ( ) ) ; 
 - @ @ - 855 , 7 + 960 , 7 @ @ 
 + @ @ - 855 , 7 + 966 , 7 @ @ 
 
 public float func _ 70047 _ e ( ) 
 { 
 @ @ - 292 , 7 + 298 , 7 @ @ 
 } 
 
 protected void func _ 71061 _ d _ ( ) 
 - @ @ - 865 , 6 + 970 , 7 @ @ 
 + @ @ - 865 , 6 + 976 , 7 @ @ 
 
 public boolean func _ 70097 _ a ( DamageSource p _ 70097 _ 1 _ , float p _ 70097 _ 2 _ ) 
 { 
 @ @ - 300 , 7 + 306 , 7 @ @ 
 if ( this . func _ 85032 _ ar ( ) ) 
 { 
 return false ; 
 - @ @ - 966 , 12 + 1072 , 15 @ @ 
 + @ @ - 966 , 12 + 1078 , 15 @ @ 
 { 
 if ( ! this . func _ 85032 _ ar ( ) ) 
 { 
 @ @ - 317 , 7 + 323 , 7 @ @ 
 p _ 70665 _ 2 _ = this . func _ 70672 _ c ( p _ 70665 _ 1 _ , p _ 70665 _ 2 _ ) ; 
 float f1 = p _ 70665 _ 2 _ ; 
 p _ 70665 _ 2 _ = Math . max ( p _ 70665 _ 2 _ - this . func _ 110139 _ bj ( ) , 0 . 0F ) ; 
 - @ @ - 1005 , 6 + 1114 , 7 @ @ 
 + @ @ - 1005 , 6 + 1120 , 7 @ @ 
 
 public boolean func _ 70998 _ m ( Entity p _ 70998 _ 1 _ ) 
 { 
 @ @ - 325 , 7 + 331 , 7 @ @ 
 ItemStack itemstack = this . func _ 71045 _ bC ( ) ; 
 ItemStack itemstack1 = itemstack ! = null ? itemstack . func _ 77946 _ l ( ) : null ; 
 
 - @ @ - 1055 , 7 + 1165 , 9 @ @ 
 + @ @ - 1055 , 7 + 1171 , 9 @ @ 
 
 public void func _ 71028 _ bD ( ) 
 { 
 @ @ - 335 , 7 + 341 , 7 @ @ 
 } 
 
 public double func _ 70033 _ W ( ) 
 - @ @ - 1065 , 6 + 1177 , 15 @ @ 
 + @ @ - 1065 , 6 + 1183 , 15 @ @ 
 
 public void func _ 71059 _ n ( Entity p _ 71059 _ 1 _ ) 
 { 
 @ @ - 351 , 7 + 357 , 7 @ @ 
 if ( p _ 71059 _ 1 _ . func _ 70075 _ an ( ) ) 
 { 
 if ( ! p _ 71059 _ 1 _ . func _ 85031 _ j ( this ) ) 
 - @ @ - 1212 , 6 + 1333 , 12 @ @ 
 + @ @ - 1212 , 6 + 1339 , 12 @ @ 
 
 public EntityPlayer . EnumStatus func _ 71018 _ a ( int p _ 71018 _ 1 _ , int p _ 71018 _ 2 _ , int p _ 71018 _ 3 _ ) 
 { 
 @ @ - 364 , 7 + 370 , 7 @ @ 
 if ( ! this . field _ 70170 _ p . field _ 72995 _ K ) 
 { 
 if ( this . func _ 70608 _ bn ( ) | | ! this . func _ 70089 _ S ( ) ) 
 - @ @ - 1254 , 8 + 1381 , 7 @ @ 
 + @ @ - 1254 , 8 + 1387 , 7 @ @ 
 
 if ( this . field _ 70170 _ p . func _ 72899 _ e ( p _ 71018 _ 1 _ , p _ 71018 _ 2 _ , p _ 71018 _ 3 _ ) ) 
 { 
 @ @ - 374 , 7 + 380 , 7 @ @ 
 float f1 = 0 . 5F ; 
 float f = 0 . 5F ; 
 
 - @ @ - 1322 , 11 + 1448 , 12 @ @ 
 + @ @ - 1322 , 11 + 1454 , 12 @ @ 
 this . func _ 71061 _ d _ ( ) ; 
 ChunkCoordinates chunkcoordinates = this . field _ 71081 _ bT ; 
 ChunkCoordinates chunkcoordinates1 = this . field _ 71081 _ bT ; 
 @ @ - 390 , 7 + 396 , 7 @ @ 
 
 if ( chunkcoordinates1 = = null ) 
 { 
 - @ @ - 1360 , 7 + 1487 , 7 @ @ 
 + @ @ - 1360 , 7 + 1493 , 7 @ @ 
 
 private boolean func _ 71065 _ l ( ) 
 { 
 @ @ - 399 , 7 + 405 , 7 @ @ 
 } 
 
 public static ChunkCoordinates func _ 71056 _ a ( World p _ 71056 _ 0 _ , ChunkCoordinates p _ 71056 _ 1 _ , boolean p _ 71056 _ 2 _ ) 
 - @ @ - 1371 , 9 + 1498 , 9 @ @ 
 + @ @ - 1371 , 9 + 1504 , 9 @ @ 
 ichunkprovider . func _ 73158 _ c ( p _ 71056 _ 1 _ . field _ 71574 _ a - 3 > > 4 , p _ 71056 _ 1 _ . field _ 71573 _ c + 3 > > 4 ) ; 
 ichunkprovider . func _ 73158 _ c ( p _ 71056 _ 1 _ . field _ 71574 _ a + 3 > > 4 , p _ 71056 _ 1 _ . field _ 71573 _ c + 3 > > 4 ) ; 
 
 @ @ - 411 , 7 + 417 , 7 @ @ 
 return chunkcoordinates1 ; 
 } 
 else 
 - @ @ - 1391 , 8 + 1518 , 10 @ @ 
 + @ @ - 1391 , 8 + 1524 , 10 @ @ 
 { 
 if ( this . field _ 71081 _ bT ! = null ) 
 { 
 @ @ - 424 , 7 + 430 , 7 @ @ 
 
 switch ( j ) 
 { 
 - @ @ - 1448 , 18 + 1577 , 25 @ @ 
 + @ @ - 1448 , 18 + 1583 , 25 @ @ 
 
 public void func _ 146105 _ b ( IChatComponent p _ 146105 _ 1 _ ) { } 
 
 @ @ - 452 , 7 + 458 , 7 @ @ 
 if ( p _ 71063 _ 1 _ ! = null ) 
 { 
 this . field _ 71077 _ c = new ChunkCoordinates ( p _ 71063 _ 1 _ ) ; 
 - @ @ - 1633 , 6 + 1769 , 10 @ @ 
 + @ @ - 1633 , 6 + 1775 , 10 @ @ 
 
 super . func _ 70069 _ a ( p _ 70069 _ 1 _ ) ; 
 } 
 @ @ - 463 , 7 + 469 , 7 @ @ 
 } 
 
 protected String func _ 146067 _ o ( int p _ 146067 _ 1 _ ) 
 - @ @ - 1675 , 11 + 1815 , 6 @ @ 
 + @ @ - 1675 , 11 + 1821 , 6 @ @ 
 } 
 else 
 { 
 @ @ - 475 , 7 + 481 , 7 @ @ 
 if ( this . field _ 71074 _ e ! = null & & p _ 70620 _ 1 _ . func _ 77973 _ b ( ) = = Items . field _ 151031 _ f ) 
 { 
 int j = p _ 70620 _ 1 _ . func _ 77988 _ m ( ) - this . field _ 71072 _ f ; 
 - @ @ - 1699 , 6 + 1834 , 7 @ @ 
 + @ @ - 1699 , 6 + 1840 , 7 @ @ 
 return Items . field _ 151031 _ f . func _ 94599 _ c ( 0 ) ; 
 } 
 } 
 @ @ - 483 , 7 + 489 , 7 @ @ 
 } 
 
 return iicon ; 
 - @ @ - 1782 , 6 + 1918 , 8 @ @ 
 + @ @ - 1782 , 6 + 1924 , 8 @ @ 
 { 
 if ( p _ 71008 _ 1 _ ! = this . field _ 71074 _ e ) 
 { 
 @ @ - 492 , 7 + 498 , 7 @ @ 
 this . field _ 71074 _ e = p _ 71008 _ 1 _ ; 
 this . field _ 71072 _ f = p _ 71008 _ 2 _ ; 
 
 - @ @ - 1876 , 6 + 2014 , 17 @ @ 
 + @ @ - 1876 , 6 + 2020 , 17 @ @ 
 } 
 
 this . field _ 71078 _ a = p _ 71049 _ 1 _ . field _ 71078 _ a ; 
 @ @ - 510 , 7 + 516 , 7 @ @ 
 } 
 
 protected boolean func _ 70041 _ e _ ( ) 
 - @ @ - 1914 , 7 + 2063 , 14 @ @ 
 + @ @ - 1914 , 7 + 2069 , 14 @ @ 
 
 public void func _ 70062 _ b ( int p _ 70062 _ 1 _ , ItemStack p _ 70062 _ 2 _ ) 
 { 
 @ @ - 526 , 7 + 532 , 7 @ @ 
 } 
 
 @ SideOnly ( Side . CLIENT ) 
 - @ @ - 1959 , 7 + 2115 , 7 @ @ 
 + @ @ - 1959 , 7 + 2121 , 7 @ @ 
 
 public IChatComponent func _ 145748 _ c _ ( ) 
 { 
 @ @ - 535 , 7 + 541 , 7 @ @ 
 chatcomponenttext . func _ 150256 _ b ( ) . func _ 150241 _ a ( new ClickEvent ( ClickEvent . Action . SUGGEST _ COMMAND , " / msg " + this . func _ 70005 _ c _ ( ) + " " ) ) ; 
 return chatcomponenttext ; 
 } 
 - @ @ - 2042 , 6 + 2198 , 118 @ @ 
 + @ @ - 2042 , 6 + 2204 , 118 @ @ 
 FMLNetworkHandler . openGui ( this , mod , modGuiId , world , x , y , z ) ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / common / ForgeHooks . java b / src / main / java / net / minecraftforge / common / ForgeHooks . java 
 index d2a4bbe . . 1ad659e 100644 
 - - - a / src / main / java / net / minecraftforge / common / ForgeHooks . java 
 + + + b / src / main / java / net / minecraftforge / common / ForgeHooks . java 
 @ @ - 114 , 11 + 114 , 11 @ @ public class ForgeHooks 
 
 if ( ! canHarvestBlock ( block , player , metadata ) ) 
 { 
 - return player . getBreakSpeed ( block , true , metadata ) / hardness / 100F ; 
 + return player . getBreakSpeed ( block , true , metadata , x , y , z ) / hardness / 100F ; 
 } 
 else 
 { 
 - return player . getBreakSpeed ( block , false , metadata ) / hardness / 30F ; 
 + return player . getBreakSpeed ( block , false , metadata , x , y , z ) / hardness / 30F ; 
 } 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 index 91cd661 . . e402c62 100644 
 - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 @ @ - 39 , 9 + 39 , 15 @ @ public class ForgeEventFactory 
 return event . success ; 
 } 
 
 + @ Deprecated / / Location version below 
 public static float getBreakSpeed ( EntityPlayer player , Block block , int metadata , float original ) 
 { 
 - PlayerEvent . BreakSpeed event = new PlayerEvent . BreakSpeed ( player , block , metadata , original ) ; 
 + return getBreakSpeed ( player , block , metadata , original , 0 , - 1 , 0 ) ; 
 + } 
 + 
 + public static float getBreakSpeed ( EntityPlayer player , Block block , int metadata , float original , int x , int y , int z ) 
 + { 
 + PlayerEvent . BreakSpeed event = new PlayerEvent . BreakSpeed ( player , block , metadata , original , x , y , z ) ; 
 return ( MinecraftForge . EVENT _ BUS . post ( event ) ? - 1 : event . newSpeed ) ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / event / entity / player / PlayerEvent . java b / src / main / java / net / minecraftforge / event / entity / player / PlayerEvent . java 
 index 0c0b028 . . f57bc67 100644 
 - - - a / src / main / java / net / minecraftforge / event / entity / player / PlayerEvent . java 
 + + + b / src / main / java / net / minecraftforge / event / entity / player / PlayerEvent . java 
 @ @ - 34 , 14 + 34 , 26 @ @ public class PlayerEvent extends LivingEvent 
 public final int metadata ; 
 public final float originalSpeed ; 
 public float newSpeed = 0 . 0f ; 
 + public final int x ; 
 + public final int y ; / / - 1 notes unknown location 
 + public final int z ; 
 
 + @ Deprecated 
 public BreakSpeed ( EntityPlayer player , Block block , int metadata , float original ) 
 { 
 + this ( player , block , metadata , original , 0 , - 1 , 0 ) ; 
 + } 
 + 
 + public BreakSpeed ( EntityPlayer player , Block block , int metadata , float original , int x , int y , int z ) 
 + { 
 super ( player ) ; 
 this . block = block ; 
 this . metadata = metadata ; 
 this . originalSpeed = original ; 
 this . newSpeed = original ; 
 + this . x = x ; 
 + this . y = y ; 
 + this . z = z ; 
 } 
 } 

