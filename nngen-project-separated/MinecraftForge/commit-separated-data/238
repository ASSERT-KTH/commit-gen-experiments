BLEU SCORE: 0.02028802809405136

TEST MSG: Fix possible NPE when calling Loader . getIndexedModList # 4919
GENERATED MSG: Only revert to frozen data on server shutdown on client . Should fix race condition exposed by # 4904

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / Loader . java b / src / main / java / net / minecraftforge / fml / common / Loader . java <nl> index 95c182a . . ba03417 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / Loader . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / Loader . java <nl> @ @ - 744 , 7 + 744 , 7 @ @ public class Loader <nl> <nl> public Map < String , ModContainer > getIndexedModList ( ) <nl> { <nl> - return ImmutableMap . copyOf ( namedMods ) ; <nl> + return namedMods ! = null ? ImmutableMap . copyOf ( namedMods ) : ImmutableMap . of ( ) ; <nl> } <nl> <nl> public void initializeMods ( )
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> index 32e3bb7 . . 6dbedb1 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> @ @ - 705 , 6 + 705 , 8 @ @ public class FMLClientHandler implements IFMLSidedHandler <nl> { <nl> / / ObfuscationReflectionHelper . setPrivateValue ( MinecraftServer . class , server , true , " field _ 71296 " + " _ Q " , " serverIs " + " Running " ) ; <nl> } <nl> + <nl> + GameData . revertToFrozen ( ) ; <nl> } <nl> <nl> @ Override <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / Loader . java b / src / main / java / net / minecraftforge / fml / common / Loader . java <nl> index 4617283 . . 95c182a 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / Loader . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / Loader . java <nl> @ @ - 864 , 7 + 864 , 6 @ @ public class Loader <nl> <nl> public void serverStopped ( ) <nl> { <nl> - GameData . revertToFrozen ( ) ; <nl> modController . distributeStateMessage ( LoaderState . SERVER _ STOPPED ) ; <nl> modController . transition ( LoaderState . SERVER _ STOPPED , true ) ; <nl> modController . transition ( LoaderState . AVAILABLE , true ) ;

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / Loader . java b / src / main / java / net / minecraftforge / fml / common / Loader . java 
 index 95c182a . . ba03417 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / Loader . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / Loader . java 
 @ @ - 744 , 7 + 744 , 7 @ @ public class Loader 
 
 public Map < String , ModContainer > getIndexedModList ( ) 
 { 
 - return ImmutableMap . copyOf ( namedMods ) ; 
 + return namedMods ! = null ? ImmutableMap . copyOf ( namedMods ) : ImmutableMap . of ( ) ; 
 } 
 
 public void initializeMods ( )

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 index 32e3bb7 . . 6dbedb1 100644 
 - - - a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 @ @ - 705 , 6 + 705 , 8 @ @ public class FMLClientHandler implements IFMLSidedHandler 
 { 
 / / ObfuscationReflectionHelper . setPrivateValue ( MinecraftServer . class , server , true , " field _ 71296 " + " _ Q " , " serverIs " + " Running " ) ; 
 } 
 + 
 + GameData . revertToFrozen ( ) ; 
 } 
 
 @ Override 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / Loader . java b / src / main / java / net / minecraftforge / fml / common / Loader . java 
 index 4617283 . . 95c182a 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / Loader . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / Loader . java 
 @ @ - 864 , 7 + 864 , 6 @ @ public class Loader 
 
 public void serverStopped ( ) 
 { 
 - GameData . revertToFrozen ( ) ; 
 modController . distributeStateMessage ( LoaderState . SERVER _ STOPPED ) ; 
 modController . transition ( LoaderState . SERVER _ STOPPED , true ) ; 
 modController . transition ( LoaderState . AVAILABLE , true ) ;
