BLEU SCORE: 0.07986788803078405

TEST MSG: Introduced Capabilities for World
GENERATED MSG: Add NeighborNotiftyEvent .

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / multiplayer / WorldClient . java . patch b / patches / minecraft / net / minecraft / client / multiplayer / WorldClient . java . patch <nl> index 83f738d . . b2931d8 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / multiplayer / WorldClient . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / multiplayer / WorldClient . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / multiplayer / WorldClient . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / multiplayer / WorldClient . java <nl> - @ @ - 60 , 17 + 60 , 18 @ @ <nl> + @ @ - 60 , 17 + 60 , 19 @ @ <nl> <nl> public WorldClient ( NetHandlerPlayClient p _ i45063 _ 1 _ , WorldSettings p _ i45063 _ 2 _ , int p _ i45063 _ 3 _ , EnumDifficulty p _ i45063 _ 4 _ , Profiler p _ i45063 _ 5 _ ) <nl> { <nl> @ @ - 17 , 6 + 17 , 7 @ @ <nl> this . field _ 72988 _ C = new SaveDataMemoryStorage ( ) ; <nl> this . func _ 72966 _ v ( ) ; <nl> this . func _ 72947 _ a ( ) ; <nl> + + this . initCapabilities ( ) ; <nl> + net . minecraftforge . common . MinecraftForge . EVENT _ BUS . post ( new net . minecraftforge . event . world . WorldEvent . Load ( this ) ) ; <nl> } <nl> <nl> diff - - git a / patches / minecraft / net / minecraft / world / World . java . patch b / patches / minecraft / net / minecraft / world / World . java . patch <nl> index 3367560 . . ac3bbc4 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / World . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / World . java . patch <nl> @ @ - 1 , 8 + 1 , 11 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / world / World . java <nl> + + + . . / src - work / minecraft / net / minecraft / world / World . java <nl> - @ @ - 61 , 6 + 61 , 13 @ @ <nl> + @ @ - 59 , 8 + 59 , 15 @ @ <nl> + import net . minecraftforge . fml . relauncher . Side ; <nl> + import net . minecraftforge . fml . relauncher . SideOnly ; <nl> <nl> - public abstract class World implements IBlockAccess <nl> + - public abstract class World implements IBlockAccess <nl> + + public abstract class World implements IBlockAccess , net . minecraftforge . common . capabilities . ICapabilityProvider <nl> { <nl> + / * * <nl> + * Used in the getEntitiesWithinAABB functions to expand the search area for entities . <nl> @ @ - 14 , 18 + 17 , 20 @ @ <nl> private int field _ 181546 _ a = 63 ; <nl> protected boolean field _ 72999 _ e ; <nl> public final List < Entity > field _ 72996 _ f = Lists . < Entity > newArrayList ( ) ; <nl> - @ @ - 102 , 6 + 109 , 10 @ @ <nl> + @ @ - 102 , 6 + 109 , 12 @ @ <nl> private final WorldBorder field _ 175728 _ M ; <nl> int [ ] field _ 72994 _ J ; <nl> <nl> + public boolean restoringBlockSnapshots = false ; <nl> + public boolean captureBlockSnapshots = false ; <nl> + public java . util . ArrayList < net . minecraftforge . common . util . BlockSnapshot > capturedBlockSnapshots = new java . util . ArrayList < net . minecraftforge . common . util . BlockSnapshot > ( ) ; <nl> + + private net . minecraftforge . common . capabilities . CapabilityDispatcher capabilities ; <nl> + + private net . minecraftforge . common . util . WorldCapabilityData capabilityData ; <nl> + <nl> protected World ( ISaveHandler p _ i45749 _ 1 _ , WorldInfo p _ i45749 _ 2 _ , WorldProvider p _ i45749 _ 3 _ , Profiler p _ i45749 _ 4 _ , boolean p _ i45749 _ 5 _ ) <nl> { <nl> this . field _ 73021 _ x = Lists . newArrayList ( new IWorldEventListener [ ] { this . field _ 184152 _ t } ) ; <nl> - @ @ - 116 , 6 + 127 , 7 @ @ <nl> + @ @ - 116 , 6 + 129 , 7 @ @ <nl> this . field _ 73011 _ w = p _ i45749 _ 3 _ ; <nl> this . field _ 72995 _ K = p _ i45749 _ 5 _ ; <nl> this . field _ 175728 _ M = p _ i45749 _ 3 _ . func _ 177501 _ r ( ) ; <nl> @ @ - 33 , 7 + 38 , 7 @ @ <nl> } <nl> <nl> public World func _ 175643 _ b ( ) <nl> - @ @ - 125 , 6 + 137 , 11 @ @ <nl> + @ @ - 125 , 6 + 139 , 11 @ @ <nl> <nl> public Biome func _ 180494 _ b ( final BlockPos p _ 180494 _ 1 _ ) <nl> { <nl> @ @ - 45 , 7 + 50 , 7 @ @ <nl> if ( this . func _ 175667 _ e ( p _ 180494 _ 1 _ ) ) <nl> { <nl> Chunk chunk = this . func _ 175726 _ f ( p _ 180494 _ 1 _ ) ; <nl> - @ @ - 201 , 7 + 218 , 7 @ @ <nl> + @ @ - 201 , 7 + 220 , 7 @ @ <nl> <nl> public boolean func _ 175623 _ d ( BlockPos p _ 175623 _ 1 _ ) <nl> { <nl> @ @ - 54 , 7 + 59 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 175667 _ e ( BlockPos p _ 175667 _ 1 _ ) <nl> - @ @ - 298 , 23 + 315 , 49 @ @ <nl> + @ @ - 298 , 23 + 317 , 49 @ @ <nl> { <nl> Chunk chunk = this . func _ 175726 _ f ( p _ 180501 _ 1 _ ) ; <nl> Block block = p _ 180501 _ 2 _ . func _ 177230 _ c ( ) ; <nl> @ @ - 106 , 7 + 111 , 7 @ @ <nl> this . func _ 184138 _ a ( p _ 180501 _ 1 _ , iblockstate , p _ 180501 _ 2 _ , p _ 180501 _ 3 _ ) ; <nl> } <nl> <nl> - @ @ - 324 , 11 + 367 , 9 @ @ <nl> + @ @ - 324 , 11 + 369 , 9 @ @ <nl> <nl> if ( p _ 180501 _ 2 _ . func _ 185912 _ n ( ) ) <nl> { <nl> @ @ - 119 , 7 + 124 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 343 , 7 + 384 , 7 @ @ <nl> + @ @ - 343 , 7 + 386 , 7 @ @ <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175655 _ 1 _ ) ; <nl> Block block = iblockstate . func _ 177230 _ c ( ) ; <nl> <nl> @ @ - 128 , 7 + 133 , 7 @ @ <nl> { <nl> return false ; <nl> } <nl> - @ @ - 416 , 6 + 457 , 9 @ @ <nl> + @ @ - 416 , 6 + 459 , 9 @ @ <nl> <nl> public void func _ 175685 _ c ( BlockPos p _ 175685 _ 1 _ , Block p _ 175685 _ 2 _ ) <nl> { <nl> @ @ - 138 , 7 + 143 , 7 @ @ <nl> this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177976 _ e ( ) , p _ 175685 _ 2 _ ) ; <nl> this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177974 _ f ( ) , p _ 175685 _ 2 _ ) ; <nl> this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177977 _ b ( ) , p _ 175685 _ 2 _ ) ; <nl> - @ @ - 426 , 6 + 470 , 11 @ @ <nl> + @ @ - 426 , 6 + 472 , 11 @ @ <nl> <nl> public void func _ 175695 _ a ( BlockPos p _ 175695 _ 1 _ , Block p _ 175695 _ 2 _ , EnumFacing p _ 175695 _ 3 _ ) <nl> { <nl> @ @ - 150 , 7 + 155 , 7 @ @ <nl> if ( p _ 175695 _ 3 _ ! = EnumFacing . WEST ) <nl> { <nl> this . func _ 180496 _ d ( p _ 175695 _ 1 _ . func _ 177976 _ e ( ) , p _ 175695 _ 2 _ ) ; <nl> - @ @ - 521 , 7 + 570 , 7 @ @ <nl> + @ @ - 521 , 7 + 572 , 7 @ @ <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( blockpos ) ; <nl> <nl> @ @ - 159 , 7 + 164 , 7 @ @ <nl> { <nl> return false ; <nl> } <nl> - @ @ - 795 , 7 + 844 , 7 @ @ <nl> + @ @ - 795 , 7 + 846 , 7 @ @ <nl> <nl> public boolean func _ 72935 _ r ( ) <nl> { <nl> @ @ - 168 , 7 + 173 , 7 @ @ <nl> } <nl> <nl> @ Nullable <nl> - @ @ - 998 , 6 + 1047 , 13 @ @ <nl> + @ @ - 998 , 6 + 1049 , 13 @ @ <nl> <nl> public void func _ 184148 _ a ( @ Nullable EntityPlayer p _ 184148 _ 1 _ , double p _ 184148 _ 2 _ , double p _ 184148 _ 4 _ , double p _ 184148 _ 6 _ , SoundEvent p _ 184148 _ 8 _ , SoundCategory p _ 184148 _ 9 _ , float p _ 184148 _ 10 _ , float p _ 184148 _ 11 _ ) <nl> { <nl> @ @ - 182 , 7 + 187 , 7 @ @ <nl> for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) <nl> { <nl> ( ( IWorldEventListener ) this . field _ 73021 _ x . get ( i ) ) . func _ 184375 _ a ( p _ 184148 _ 1 _ , p _ 184148 _ 8 _ , p _ 184148 _ 9 _ , p _ 184148 _ 2 _ , p _ 184148 _ 4 _ , p _ 184148 _ 6 _ , p _ 184148 _ 10 _ , p _ 184148 _ 11 _ ) ; <nl> - @ @ - 1043 , 6 + 1099 , 9 @ @ <nl> + @ @ - 1043 , 6 + 1101 , 9 @ @ <nl> <nl> public boolean func _ 72838 _ d ( Entity p _ 72838 _ 1 _ ) <nl> { <nl> @ @ - 192 , 7 + 197 , 7 @ @ <nl> int i = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70165 _ t / 16 . 0D ) ; <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70161 _ v / 16 . 0D ) ; <nl> boolean flag = p _ 72838 _ 1 _ . field _ 98038 _ p ; <nl> - @ @ - 1065 , 6 + 1124 , 8 @ @ <nl> + @ @ - 1065 , 6 + 1126 , 8 @ @ <nl> this . func _ 72854 _ c ( ) ; <nl> } <nl> <nl> @ @ - 201 , 7 + 206 , 7 @ @ <nl> this . func _ 72964 _ e ( i , j ) . func _ 76612 _ a ( p _ 72838 _ 1 _ ) ; <nl> this . field _ 72996 _ f . add ( p _ 72838 _ 1 _ ) ; <nl> this . func _ 72923 _ a ( p _ 72838 _ 1 _ ) ; <nl> - @ @ - 1296 , 7 + 1357 , 6 @ @ <nl> + @ @ - 1296 , 7 + 1359 , 6 @ @ <nl> return list ; <nl> } <nl> <nl> @ @ - 209 , 7 + 214 , 7 @ @ <nl> public void func _ 72848 _ b ( IWorldEventListener p _ 72848 _ 1 _ ) <nl> { <nl> this . field _ 73021 _ x . remove ( p _ 72848 _ 1 _ ) ; <nl> - @ @ - 1359 , 19 + 1419 , 38 @ @ <nl> + @ @ - 1359 , 19 + 1421 , 38 @ @ <nl> <nl> public int func _ 72967 _ a ( float p _ 72967 _ 1 _ ) <nl> { <nl> @ @ - 250 , 7 + 255 , 7 @ @ <nl> float f = this . func _ 72826 _ c ( p _ 72971 _ 1 _ ) ; <nl> float f1 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f * ( ( float ) Math . PI * 2F ) ) * 2 . 0F + 0 . 2F ) ; <nl> f1 = MathHelper . func _ 76131 _ a ( f1 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1384 , 6 + 1463 , 12 @ @ <nl> + @ @ - 1384 , 6 + 1465 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public Vec3d func _ 72833 _ a ( Entity p _ 72833 _ 1 _ , float p _ 72833 _ 2 _ ) <nl> { <nl> @ @ - 263 , 7 + 268 , 7 @ @ <nl> float f = this . func _ 72826 _ c ( p _ 72833 _ 2 _ ) ; <nl> float f1 = MathHelper . func _ 76134 _ b ( f * ( ( float ) Math . PI * 2F ) ) * 2 . 0F + 0 . 5F ; <nl> f1 = MathHelper . func _ 76131 _ a ( f1 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1391 , 9 + 1476 , 7 @ @ <nl> + @ @ - 1391 , 9 + 1478 , 7 @ @ <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70163 _ u ) ; <nl> int k = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70161 _ v ) ; <nl> BlockPos blockpos = new BlockPos ( i , j , k ) ; <nl> @ @ - 274 , 7 + 279 , 7 @ @ <nl> float f3 = ( float ) ( l > > 16 & 255 ) / 255 . 0F ; <nl> float f4 = ( float ) ( l > > 8 & 255 ) / 255 . 0F ; <nl> float f5 = ( float ) ( l & 255 ) / 255 . 0F ; <nl> - @ @ - 1453 , 6 + 1536 , 11 @ @ <nl> + @ @ - 1453 , 6 + 1538 , 11 @ @ <nl> <nl> public float func _ 130001 _ d ( ) <nl> { <nl> @ @ - 286 , 7 + 291 , 7 @ @ <nl> return WorldProvider . field _ 111203 _ a [ this . field _ 73011 _ w . func _ 76559 _ b ( this . field _ 72986 _ A . func _ 76073 _ f ( ) ) ] ; <nl> } <nl> <nl> - @ @ - 1465 , 6 + 1553 , 12 @ @ <nl> + @ @ - 1465 , 6 + 1555 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public Vec3d func _ 72824 _ f ( float p _ 72824 _ 1 _ ) <nl> { <nl> @ @ - 299 , 7 + 304 , 7 @ @ <nl> float f = this . func _ 72826 _ c ( p _ 72824 _ 1 _ ) ; <nl> float f1 = MathHelper . func _ 76134 _ b ( f * ( ( float ) Math . PI * 2F ) ) * 2 . 0F + 0 . 5F ; <nl> f1 = MathHelper . func _ 76131 _ a ( f1 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1520 , 9 + 1614 , 9 @ @ <nl> + @ @ - 1520 , 9 + 1616 , 9 @ @ <nl> for ( blockpos = new BlockPos ( p _ 175672 _ 1 _ . func _ 177958 _ n ( ) , chunk . func _ 76625 _ h ( ) + 16 , p _ 175672 _ 1 _ . func _ 177952 _ p ( ) ) ; blockpos . func _ 177956 _ o ( ) > = 0 ; blockpos = blockpos1 ) <nl> { <nl> blockpos1 = blockpos . func _ 177977 _ b ( ) ; <nl> @ @ - 311 , 7 + 316 , 7 @ @ <nl> { <nl> break ; <nl> } <nl> - @ @ - 1534 , 6 + 1628 , 12 @ @ <nl> + @ @ - 1534 , 6 + 1630 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public float func _ 72880 _ h ( float p _ 72880 _ 1 _ ) <nl> { <nl> @ @ - 324 , 7 + 329 , 7 @ @ <nl> float f = this . func _ 72826 _ c ( p _ 72880 _ 1 _ ) ; <nl> float f1 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f * ( ( float ) Math . PI * 2F ) ) * 2 . 0F + 0 . 25F ) ; <nl> f1 = MathHelper . func _ 76131 _ a ( f1 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1585 , 6 + 1685 , 12 @ @ <nl> + @ @ - 1585 , 6 + 1687 , 12 @ @ <nl> entity . func _ 85029 _ a ( crashreportcategory ) ; <nl> } <nl> <nl> @ @ - 337 , 7 + 342 , 7 @ @ <nl> throw new ReportedException ( crashreport ) ; <nl> } <nl> <nl> - @ @ - 1646 , 6 + 1752 , 12 @ @ <nl> + @ @ - 1646 , 6 + 1754 , 12 @ @ <nl> CrashReport crashreport1 = CrashReport . func _ 85055 _ a ( throwable1 , " Ticking entity " ) ; <nl> CrashReportCategory crashreportcategory1 = crashreport1 . func _ 85058 _ a ( " Entity being ticked " ) ; <nl> entity2 . func _ 85029 _ a ( crashreportcategory1 ) ; <nl> @ @ - 350 , 7 + 355 , 7 @ @ <nl> throw new ReportedException ( crashreport1 ) ; <nl> } <nl> } <nl> - @ @ - 1682 , 7 + 1794 , 7 @ @ <nl> + @ @ - 1682 , 7 + 1796 , 7 @ @ <nl> { <nl> BlockPos blockpos = tileentity . func _ 174877 _ v ( ) ; <nl> <nl> @ @ - 359 , 7 + 364 , 7 @ @ <nl> { <nl> try <nl> { <nl> - @ @ - 1695 , 6 + 1807 , 13 @ @ <nl> + @ @ - 1695 , 6 + 1809 , 13 @ @ <nl> CrashReport crashreport2 = CrashReport . func _ 85055 _ a ( throwable , " Ticking block entity " ) ; <nl> CrashReportCategory crashreportcategory2 = crashreport2 . func _ 85058 _ a ( " Block entity being ticked " ) ; <nl> tileentity . func _ 145828 _ a ( crashreportcategory2 ) ; <nl> @ @ - 373 , 7 + 378 , 7 @ @ <nl> throw new ReportedException ( crashreport2 ) ; <nl> } <nl> } <nl> - @ @ - 1707 , 20 + 1826 , 28 @ @ <nl> + @ @ - 1707 , 20 + 1828 , 28 @ @ <nl> <nl> if ( this . func _ 175667 _ e ( tileentity . func _ 174877 _ v ( ) ) ) <nl> { <nl> @ @ - 405 , 7 + 410 , 7 @ @ <nl> this . field _ 72984 _ F . func _ 76318 _ c ( " pendingBlockEntities " ) ; <nl> <nl> if ( ! this . field _ 147484 _ a . isEmpty ( ) ) <nl> - @ @ - 1759 , 8 + 1886 , 12 @ @ <nl> + @ @ - 1759 , 8 + 1888 , 12 @ @ <nl> <nl> public boolean func _ 175700 _ a ( TileEntity p _ 175700 _ 1 _ ) <nl> { <nl> @ @ - 419 , 7 + 424 , 7 @ @ <nl> if ( flag & & p _ 175700 _ 1 _ instanceof ITickable ) <nl> { <nl> this . field _ 175730 _ i . add ( p _ 175700 _ 1 _ ) ; <nl> - @ @ - 1780 , 6 + 1911 , 11 @ @ <nl> + @ @ - 1780 , 6 + 1913 , 11 @ @ <nl> { <nl> if ( this . field _ 147481 _ N ) <nl> { <nl> @ @ - 431 , 7 + 436 , 7 @ @ <nl> this . field _ 147484 _ a . addAll ( p _ 147448 _ 1 _ ) ; <nl> } <nl> else <nl> - @ @ - 1800 , 9 + 1936 , 12 @ @ <nl> + @ @ - 1800 , 9 + 1938 , 12 @ @ <nl> { <nl> int i = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70165 _ t ) ; <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70161 _ v ) ; <nl> @ @ - 446 , 7 + 451 , 7 @ @ <nl> { <nl> p _ 72866 _ 1 _ . field _ 70142 _ S = p _ 72866 _ 1 _ . field _ 70165 _ t ; <nl> p _ 72866 _ 1 _ . field _ 70137 _ T = p _ 72866 _ 1 _ . field _ 70163 _ u ; <nl> - @ @ - 2001 , 6 + 2140 , 10 @ @ <nl> + @ @ - 2001 , 6 + 2142 , 10 @ @ <nl> blockpos $ pooledmutableblockpos . func _ 185344 _ t ( ) ; <nl> return true ; <nl> } <nl> @ @ - 457 , 7 + 462 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 2040 , 6 + 2183 , 16 @ @ <nl> + @ @ - 2040 , 6 + 2185 , 16 @ @ <nl> IBlockState iblockstate = this . func _ 180495 _ p ( blockpos $ pooledmutableblockpos ) ; <nl> Block block = iblockstate . func _ 177230 _ c ( ) ; <nl> <nl> @ @ - 474 , 7 + 479 , 7 @ @ <nl> if ( iblockstate . func _ 185904 _ a ( ) = = p _ 72918 _ 2 _ ) <nl> { <nl> double d0 = ( double ) ( ( float ) ( l1 + 1 ) - BlockLiquid . func _ 149801 _ b ( ( ( Integer ) iblockstate . func _ 177229 _ b ( BlockLiquid . field _ 176367 _ b ) ) . intValue ( ) ) ) ; <nl> - @ @ - 2116 , 6 + 2269 , 9 @ @ <nl> + @ @ - 2116 , 6 + 2271 , 9 @ @ <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( blockpos $ pooledmutableblockpos . func _ 181079 _ c ( k1 , l1 , i2 ) ) ; <nl> <nl> @ @ - 484 , 7 + 489 , 7 @ @ <nl> if ( iblockstate . func _ 185904 _ a ( ) = = p _ 72830 _ 2 _ ) <nl> { <nl> int j2 = ( ( Integer ) iblockstate . func _ 177229 _ b ( BlockLiquid . field _ 176367 _ b ) ) . intValue ( ) ; <nl> - @ @ - 2148 , 6 + 2304 , 7 @ @ <nl> + @ @ - 2148 , 6 + 2306 , 7 @ @ <nl> public Explosion func _ 72885 _ a ( @ Nullable Entity p _ 72885 _ 1 _ , double p _ 72885 _ 2 _ , double p _ 72885 _ 4 _ , double p _ 72885 _ 6 _ , float p _ 72885 _ 8 _ , boolean p _ 72885 _ 9 _ , boolean p _ 72885 _ 10 _ ) <nl> { <nl> Explosion explosion = new Explosion ( this , p _ 72885 _ 1 _ , p _ 72885 _ 2 _ , p _ 72885 _ 4 _ , p _ 72885 _ 6 _ , p _ 72885 _ 8 _ , p _ 72885 _ 9 _ , p _ 72885 _ 10 _ ) ; <nl> @ @ - 492 , 7 + 497 , 7 @ @ <nl> explosion . func _ 77278 _ a ( ) ; <nl> explosion . func _ 77279 _ a ( true ) ; <nl> return explosion ; <nl> - @ @ - 2270 , 6 + 2427 , 7 @ @ <nl> + @ @ - 2270 , 6 + 2429 , 7 @ @ <nl> <nl> public void func _ 175690 _ a ( BlockPos p _ 175690 _ 1 _ , @ Nullable TileEntity p _ 175690 _ 2 _ ) <nl> { <nl> @ @ - 500 , 7 + 505 , 7 @ @ <nl> if ( ! this . func _ 189509 _ E ( p _ 175690 _ 1 _ ) ) <nl> { <nl> if ( p _ 175690 _ 2 _ ! = null & & ! p _ 175690 _ 2 _ . func _ 145837 _ r ( ) ) <nl> - @ @ - 2277 , 6 + 2435 , 8 @ @ <nl> + @ @ - 2277 , 6 + 2437 , 8 @ @ <nl> if ( this . field _ 147481 _ N ) <nl> { <nl> p _ 175690 _ 2 _ . func _ 174878 _ a ( p _ 175690 _ 1 _ ) ; <nl> @ @ - 509 , 7 + 514 , 7 @ @ <nl> Iterator < TileEntity > iterator = this . field _ 147484 _ a . iterator ( ) ; <nl> <nl> while ( iterator . hasNext ( ) ) <nl> - @ @ - 2295 , 8 + 2455 , 10 @ @ <nl> + @ @ - 2295 , 8 + 2457 , 10 @ @ <nl> else <nl> { <nl> this . func _ 175700 _ a ( p _ 175690 _ 2 _ ) ; <nl> @ @ - 521 , 7 + 526 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 2309 , 6 + 2471 , 8 @ @ <nl> + @ @ - 2309 , 6 + 2473 , 8 @ @ <nl> { <nl> tileentity . func _ 145843 _ s ( ) ; <nl> this . field _ 147484 _ a . remove ( tileentity ) ; <nl> @ @ - 530 , 7 + 535 , 7 @ @ <nl> } <nl> else <nl> { <nl> - @ @ - 2321 , 6 + 2485 , 7 @ @ <nl> + @ @ - 2321 , 6 + 2487 , 7 @ @ <nl> <nl> this . func _ 175726 _ f ( p _ 175713 _ 1 _ ) . func _ 177425 _ e ( p _ 175713 _ 1 _ ) ; <nl> } <nl> @ @ - 538 , 7 + 543 , 7 @ @ <nl> } <nl> <nl> public void func _ 147457 _ a ( TileEntity p _ 147457 _ 1 _ ) <nl> - @ @ - 2347 , 7 + 2512 , 7 @ @ <nl> + @ @ - 2347 , 7 + 2514 , 7 @ @ <nl> if ( chunk ! = null & & ! chunk . func _ 76621 _ g ( ) ) <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175677 _ 1 _ ) ; <nl> @ @ - 547 , 7 + 552 , 7 @ @ <nl> } <nl> else <nl> { <nl> - @ @ - 2370 , 6 + 2535 , 7 @ @ <nl> + @ @ - 2370 , 6 + 2537 , 7 @ @ <nl> { <nl> this . field _ 72985 _ G = p _ 72891 _ 1 _ ; <nl> this . field _ 72992 _ H = p _ 72891 _ 2 _ ; <nl> @ @ - 555 , 7 + 560 , 7 @ @ <nl> } <nl> <nl> public void func _ 72835 _ b ( ) <nl> - @ @ - 2379 , 6 + 2545 , 11 @ @ <nl> + @ @ - 2379 , 6 + 2547 , 11 @ @ <nl> <nl> protected void func _ 72947 _ a ( ) <nl> { <nl> @ @ - 567 , 7 + 572 , 7 @ @ <nl> if ( this . field _ 72986 _ A . func _ 76059 _ o ( ) ) <nl> { <nl> this . field _ 73004 _ o = 1 . 0F ; <nl> - @ @ - 2392 , 6 + 2563 , 11 @ @ <nl> + @ @ - 2392 , 6 + 2565 , 11 @ @ <nl> <nl> protected void func _ 72979 _ l ( ) <nl> { <nl> @ @ - 579 , 7 + 584 , 7 @ @ <nl> if ( ! this . field _ 73011 _ w . func _ 177495 _ o ( ) ) <nl> { <nl> if ( ! this . field _ 72995 _ K ) <nl> - @ @ - 2511 , 6 + 2687 , 11 @ @ <nl> + @ @ - 2511 , 6 + 2689 , 11 @ @ <nl> <nl> public boolean func _ 175670 _ e ( BlockPos p _ 175670 _ 1 _ , boolean p _ 175670 _ 2 _ ) <nl> { <nl> @ @ - 591 , 7 + 596 , 7 @ @ <nl> Biome biome = this . func _ 180494 _ b ( p _ 175670 _ 1 _ ) ; <nl> float f = biome . func _ 180626 _ a ( p _ 175670 _ 1 _ ) ; <nl> <nl> - @ @ - 2552 , 6 + 2733 , 11 @ @ <nl> + @ @ - 2552 , 6 + 2735 , 11 @ @ <nl> <nl> public boolean func _ 175708 _ f ( BlockPos p _ 175708 _ 1 _ , boolean p _ 175708 _ 2 _ ) <nl> { <nl> @ @ - 603 , 7 + 608 , 7 @ @ <nl> Biome biome = this . func _ 180494 _ b ( p _ 175708 _ 1 _ ) ; <nl> float f = biome . func _ 180626 _ a ( p _ 175708 _ 1 _ ) ; <nl> <nl> - @ @ - 2569 , 7 + 2755 , 7 @ @ <nl> + @ @ - 2569 , 7 + 2757 , 7 @ @ <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175708 _ 1 _ ) ; <nl> <nl> @ @ - 612 , 7 + 617 , 7 @ @ <nl> { <nl> return true ; <nl> } <nl> - @ @ - 2601 , 10 + 2787 , 11 @ @ <nl> + @ @ - 2601 , 10 + 2789 , 11 @ @ <nl> else <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175638 _ 1 _ ) ; <nl> @ @ - 627 , 7 + 632 , 7 @ @ <nl> { <nl> j = 1 ; <nl> } <nl> - @ @ - 2703 , 7 + 2890 , 7 @ @ <nl> + @ @ - 2703 , 7 + 2892 , 7 @ @ <nl> int j4 = j2 + enumfacing . func _ 96559 _ d ( ) ; <nl> int k4 = k2 + enumfacing . func _ 82599 _ e ( ) ; <nl> blockpos $ pooledmutableblockpos . func _ 181079 _ c ( i4 , j4 , k4 ) ; <nl> @ @ - 636 , 7 + 641 , 7 @ @ <nl> i3 = this . func _ 175642 _ b ( p _ 180500 _ 1 _ , blockpos $ pooledmutableblockpos ) ; <nl> <nl> if ( i3 = = l2 - l4 & & j < this . field _ 72994 _ J . length ) <nl> - @ @ - 2811 , 10 + 2998 , 10 @ @ <nl> + @ @ - 2811 , 10 + 3000 , 10 @ @ <nl> public List < Entity > func _ 175674 _ a ( @ Nullable Entity p _ 175674 _ 1 _ , AxisAlignedBB p _ 175674 _ 2 _ , @ Nullable Predicate < ? super Entity > p _ 175674 _ 3 _ ) <nl> { <nl> List < Entity > list = Lists . < Entity > newArrayList ( ) ; <nl> @ @ - 651 , 7 + 656 , 7 @ @ <nl> <nl> for ( int i1 = i ; i1 < = j ; + + i1 ) <nl> { <nl> - @ @ - 2867 , 10 + 3054 , 10 @ @ <nl> + @ @ - 2867 , 10 + 3056 , 10 @ @ <nl> <nl> public < T extends Entity > List < T > func _ 175647 _ a ( Class < ? extends T > p _ 175647 _ 1 _ , AxisAlignedBB p _ 175647 _ 2 _ , @ Nullable Predicate < ? super T > p _ 175647 _ 3 _ ) <nl> { <nl> @ @ - 666 , 7 + 671 , 7 @ @ <nl> List < T > list = Lists . < T > newArrayList ( ) ; <nl> <nl> for ( int i1 = i ; i1 < j ; + + i1 ) <nl> - @ @ - 2950 , 11 + 3137 , 13 @ @ <nl> + @ @ - 2950 , 11 + 3139 , 13 @ @ <nl> <nl> public void func _ 175650 _ b ( Collection < Entity > p _ 175650 _ 1 _ ) <nl> { <nl> @ @ - 683 , 7 + 688 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 2967 , 7 + 3156 , 7 @ @ <nl> + @ @ - 2967 , 7 + 3158 , 7 @ @ <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175716 _ 2 _ ) ; <nl> AxisAlignedBB axisalignedbb = p _ 175716 _ 3 _ ? null : p _ 175716 _ 1 _ . func _ 176223 _ P ( ) . func _ 185890 _ d ( this , p _ 175716 _ 2 _ ) ; <nl> @ @ - 692 , 7 + 697 , 7 @ @ <nl> } <nl> <nl> public int func _ 181545 _ F ( ) <nl> - @ @ - 3050 , 7 + 3239 , 7 @ @ <nl> + @ @ - 3050 , 7 + 3241 , 7 @ @ <nl> public int func _ 175651 _ c ( BlockPos p _ 175651 _ 1 _ , EnumFacing p _ 175651 _ 2 _ ) <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175651 _ 1 _ ) ; <nl> @ @ - 701 , 7 + 706 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 175640 _ z ( BlockPos p _ 175640 _ 1 _ ) <nl> - @ @ - 3247 , 7 + 3436 , 7 @ @ <nl> + @ @ - 3247 , 7 + 3438 , 7 @ @ <nl> <nl> public long func _ 72905 _ C ( ) <nl> { <nl> @ @ - 710 , 7 + 715 , 7 @ @ <nl> } <nl> <nl> public long func _ 82737 _ E ( ) <nl> - @ @ - 3257 , 17 + 3446 , 17 @ @ <nl> + @ @ - 3257 , 17 + 3448 , 17 @ @ <nl> <nl> public long func _ 72820 _ D ( ) <nl> { <nl> @ @ - 731 , 7 + 736 , 7 @ @ <nl> <nl> if ( ! this . func _ 175723 _ af ( ) . func _ 177746 _ a ( blockpos ) ) <nl> { <nl> - @ @ - 3279 , 7 + 3468 , 7 @ @ <nl> + @ @ - 3279 , 7 + 3470 , 7 @ @ <nl> <nl> public void func _ 175652 _ B ( BlockPos p _ 175652 _ 1 _ ) <nl> { <nl> @ @ - 740 , 7 + 745 , 7 @ @ <nl> } <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> - @ @ - 3299 , 12 + 3488 , 18 @ @ <nl> + @ @ - 3299 , 12 + 3490 , 18 @ @ <nl> <nl> if ( ! this . field _ 72996 _ f . contains ( p _ 72897 _ 1 _ ) ) <nl> { <nl> @ @ - 759 , 7 + 764 , 7 @ @ <nl> return true ; <nl> } <nl> <nl> - @ @ - 3398 , 8 + 3593 , 7 @ @ <nl> + @ @ - 3398 , 8 + 3595 , 7 @ @ <nl> <nl> public boolean func _ 180502 _ D ( BlockPos p _ 180502 _ 1 _ ) <nl> { <nl> @ @ - 769 , 7 + 774 , 7 @ @ <nl> } <nl> <nl> @ Nullable <nl> - @ @ - 3460 , 12 + 3654 , 12 @ @ <nl> + @ @ - 3460 , 12 + 3656 , 12 @ @ <nl> <nl> public int func _ 72800 _ K ( ) <nl> { <nl> @ @ - 784 , 7 + 789 , 7 @ @ <nl> } <nl> <nl> public Random func _ 72843 _ D ( int p _ 72843 _ 1 _ , int p _ 72843 _ 2 _ , int p _ 72843 _ 3 _ ) <nl> - @ @ - 3509 , 7 + 3703 , 7 @ @ <nl> + @ @ - 3509 , 7 + 3705 , 7 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public double func _ 72919 _ O ( ) <nl> { <nl> @ @ - 793 , 7 + 798 , 7 @ @ <nl> } <nl> <nl> public void func _ 175715 _ c ( int p _ 175715 _ 1 _ , BlockPos p _ 175715 _ 2 _ , int p _ 175715 _ 3 _ ) <nl> - @ @ - 3543 , 7 + 3737 , 7 @ @ <nl> + @ @ - 3543 , 7 + 3739 , 7 @ @ <nl> <nl> public void func _ 175666 _ e ( BlockPos p _ 175666 _ 1 _ , Block p _ 175666 _ 2 _ ) <nl> { <nl> @ @ - 802 , 7 + 807 , 7 @ @ <nl> { <nl> BlockPos blockpos = p _ 175666 _ 1 _ . func _ 177972 _ a ( enumfacing ) ; <nl> <nl> - @ @ - 3551 , 18 + 3745 , 14 @ @ <nl> + @ @ - 3551 , 18 + 3747 , 14 @ @ <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( blockpos ) ; <nl> <nl> @ @ - 825 , 7 + 830 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 3628 , 6 + 3818 , 87 @ @ <nl> + @ @ - 3628 , 6 + 3820 , 112 @ @ <nl> return i > = - 128 & & i < = 128 & & j > = - 128 & & j < = 128 ; <nl> } <nl> <nl> @ @ - 904 , 6 + 909 , 31 @ @ <nl> + return count ; <nl> + } <nl> + <nl> + + protected void initCapabilities ( ) <nl> + + { <nl> + + net . minecraftforge . common . capabilities . ICapabilityProvider parent = field _ 73011 _ w . initCapabilities ( ) ; <nl> + + capabilities = net . minecraftforge . event . ForgeEventFactory . gatherCapabilities ( this , parent ) ; <nl> + + net . minecraftforge . common . util . WorldCapabilityData data = ( net . minecraftforge . common . util . WorldCapabilityData ) perWorldStorage . func _ 75742 _ a ( net . minecraftforge . common . util . WorldCapabilityData . class , net . minecraftforge . common . util . WorldCapabilityData . ID ) ; <nl> + + if ( data = = null ) <nl> + + { <nl> + + capabilityData = new net . minecraftforge . common . util . WorldCapabilityData ( capabilities ) ; <nl> + + perWorldStorage . func _ 75745 _ a ( capabilityData . field _ 76190 _ i , capabilityData ) ; <nl> + + } <nl> + + else <nl> + + { <nl> + + capabilityData = data ; <nl> + + capabilityData . setCapabilities ( field _ 73011 _ w , capabilities ) ; <nl> + + } <nl> + + } <nl> + + public boolean hasCapability ( net . minecraftforge . common . capabilities . Capability < ? > capability , EnumFacing facing ) <nl> + + { <nl> + + return capabilities = = null ? false : capabilities . hasCapability ( capability , facing ) ; <nl> + + } <nl> + + public < T > T getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , EnumFacing facing ) <nl> + + { <nl> + + return capabilities = = null ? null : capabilities . getCapability ( capability , facing ) ; <nl> + + } <nl> + + <nl> + protected MapStorage perWorldStorage ; / / Moved to a getter to simulate final without being final so we can load in subclasses . <nl> + public MapStorage getPerWorldStorage ( ) <nl> + { <nl> diff - - git a / patches / minecraft / net / minecraft / world / WorldProvider . java . patch b / patches / minecraft / net / minecraft / world / WorldProvider . java . patch <nl> index 1930a42 . . 77b782a 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / WorldProvider . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / WorldProvider . java . patch <nl> @ @ - 54 , 7 + 54 , 7 @ @ <nl> } <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> - @ @ - 214 , 6 + 200 , 327 @ @ <nl> + @ @ - 214 , 6 + 200 , 339 @ @ <nl> return new WorldBorder ( ) ; <nl> } <nl> <nl> @ @ - 220 , 6 + 220 , 18 @ @ <nl> + return 0 ; <nl> + } <nl> + <nl> + + / * * <nl> + + * Called from { @ link World # initCapabilities ( ) } , to gather capabilities for this world . <nl> + + * It ' s safe to access world here since this is called after world is registered . <nl> + + * <nl> + + * On server , called directly after mapStorage and world data such as Scoreboard and VillageCollection are initialized . <nl> + + * On client , called when world is constructed , just before world load event is called . <nl> + + * Note that this method is always called before the world load event . <nl> + + * @ return initial holder for capabilities on the world <nl> + + * / <nl> + + public net . minecraftforge . common . capabilities . ICapabilityProvider initCapabilities ( ) { <nl> + + return null ; <nl> + + } <nl> + / * = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = Start Moved From World = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = * / <nl> + <nl> + public Biome getBiomeForCoords ( BlockPos pos ) <nl> diff - - git a / patches / minecraft / net / minecraft / world / WorldServer . java . patch b / patches / minecraft / net / minecraft / world / WorldServer . java . patch <nl> index 39103b4 . . cc3e323 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / WorldServer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / WorldServer . java . patch <nl> @ @ - 43 , 7 + 43 , 15 @ @ <nl> } <nl> else <nl> { <nl> - @ @ - 215 , 6 + 224 , 10 @ @ <nl> + @ @ - 156 , 6 + 165 , 7 @ @ <nl> + this . func _ 175723 _ af ( ) . func _ 177750 _ a ( this . field _ 72986 _ A . func _ 176137 _ E ( ) ) ; <nl> + } <nl> + <nl> + + this . initCapabilities ( ) ; <nl> + return this ; <nl> + } <nl> + <nl> + @ @ - 215 , 6 + 225 , 10 @ @ <nl> this . field _ 175740 _ d . func _ 75528 _ a ( ) ; <nl> this . field _ 72984 _ F . func _ 76318 _ c ( " portalForcer " ) ; <nl> this . field _ 85177 _ Q . func _ 85189 _ a ( this . func _ 82737 _ E ( ) ) ; <nl> @ @ - 54 , 7 + 62 , 7 @ @ <nl> this . field _ 72984 _ F . func _ 76319 _ b ( ) ; <nl> this . func _ 147488 _ Z ( ) ; <nl> } <nl> - @ @ - 223 , 12 + 236 , 14 @ @ <nl> + @ @ - 223 , 12 + 237 , 14 @ @ <nl> public Biome . SpawnListEntry func _ 175734 _ a ( EnumCreatureType p _ 175734 _ 1 _ , BlockPos p _ 175734 _ 2 _ ) <nl> { <nl> List < Biome . SpawnListEntry > list = this . func _ 72863 _ F ( ) . func _ 177458 _ a ( p _ 175734 _ 1 _ , p _ 175734 _ 2 _ ) ; <nl> @ @ - 69 , 7 + 77 , 7 @ @ <nl> return list ! = null & & ! list . isEmpty ( ) ? list . contains ( p _ 175732 _ 2 _ ) : false ; <nl> } <nl> <nl> - @ @ - 274 , 10 + 289 , 7 @ @ <nl> + @ @ - 274 , 10 + 290 , 7 @ @ <nl> <nl> private void func _ 73051 _ P ( ) <nl> { <nl> @ @ - 81 , 7 + 89 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 73056 _ e ( ) <nl> - @ @ - 370 , 7 + 382 , 7 @ @ <nl> + @ @ - 370 , 7 + 383 , 7 @ @ <nl> boolean flag1 = this . func _ 72911 _ I ( ) ; <nl> this . field _ 72984 _ F . func _ 76320 _ a ( " pollingChunks " ) ; <nl> <nl> @ @ - 90 , 7 + 98 , 7 @ @ <nl> { <nl> this . field _ 72984 _ F . func _ 76320 _ a ( " getChunk " ) ; <nl> Chunk chunk = ( Chunk ) iterator . next ( ) ; <nl> - @ @ - 382 , 7 + 394 , 7 @ @ <nl> + @ @ - 382 , 7 + 395 , 7 @ @ <nl> chunk . func _ 150804 _ b ( false ) ; <nl> this . field _ 72984 _ F . func _ 76318 _ c ( " thunder " ) ; <nl> <nl> @ @ - 99 , 7 + 107 , 7 @ @ <nl> { <nl> this . field _ 73005 _ l = this . field _ 73005 _ l * 3 + 1013904223 ; <nl> int l = this . field _ 73005 _ l > > 2 ; <nl> - @ @ - 411 , 7 + 423 , 7 @ @ <nl> + @ @ - 411 , 7 + 424 , 7 @ @ <nl> <nl> this . field _ 72984 _ F . func _ 76318 _ c ( " iceandsnow " ) ; <nl> <nl> @ @ - 108 , 7 + 116 , 7 @ @ <nl> { <nl> this . field _ 73005 _ l = this . field _ 73005 _ l * 3 + 1013904223 ; <nl> int j2 = this . field _ 73005 _ l > > 2 ; <nl> - @ @ - 527 , 7 + 539 , 10 @ @ <nl> + @ @ - 527 , 7 + 540 , 10 @ @ <nl> { <nl> if ( p _ 175654 _ 2 _ . func _ 149698 _ L ( ) ) <nl> { <nl> @ @ - 120 , 7 + 128 , 7 @ @ <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175654 _ 1 _ ) ; <nl> <nl> - @ @ - 587 , 7 + 602 , 7 @ @ <nl> + @ @ - 587 , 7 + 603 , 7 @ @ <nl> <nl> public void func _ 72939 _ s ( ) <nl> { <nl> @ @ - 129 , 7 + 137 , 7 @ @ <nl> { <nl> if ( this . field _ 80004 _ Q + + > = 300 ) <nl> { <nl> - @ @ - 711 , 6 + 726 , 9 @ @ <nl> + @ @ - 711 , 6 + 727 , 9 @ @ <nl> { <nl> NextTickListEntry nextticklistentry1 = ( NextTickListEntry ) iterator . next ( ) ; <nl> iterator . remove ( ) ; <nl> @ @ - 139 , 7 + 147 , 7 @ @ <nl> int k = 0 ; <nl> <nl> if ( this . func _ 175707 _ a ( nextticklistentry1 . field _ 180282 _ a . func _ 177982 _ a ( 0 , 0 , 0 ) , nextticklistentry1 . field _ 180282 _ a . func _ 177982 _ a ( 0 , 0 , 0 ) ) ) <nl> - @ @ - 837 , 6 + 855 , 10 @ @ <nl> + @ @ - 837 , 6 + 856 , 10 @ @ <nl> <nl> public boolean func _ 175660 _ a ( EntityPlayer p _ 175660 _ 1 _ , BlockPos p _ 175660 _ 2 _ ) <nl> { <nl> @ @ - 150 , 7 + 158 , 7 @ @ <nl> return ! this . field _ 73061 _ a . func _ 175579 _ a ( this , p _ 175660 _ 2 _ , p _ 175660 _ 1 _ ) & & this . func _ 175723 _ af ( ) . func _ 177746 _ a ( p _ 175660 _ 2 _ ) ; <nl> } <nl> <nl> - @ @ - 902 , 6 + 924 , 7 @ @ <nl> + @ @ - 902 , 6 + 925 , 7 @ @ <nl> } <nl> else <nl> { <nl> @ @ - 158 , 7 + 166 , 7 @ @ <nl> this . field _ 72987 _ B = true ; <nl> BiomeProvider biomeprovider = this . field _ 73011 _ w . func _ 177499 _ m ( ) ; <nl> List < Biome > list = biomeprovider . func _ 76932 _ a ( ) ; <nl> - @ @ - 986 , 6 + 1009 , 7 @ @ <nl> + @ @ - 986 , 6 + 1010 , 7 @ @ <nl> } <nl> <nl> chunkproviderserver . func _ 186027 _ a ( p _ 73044 _ 1 _ ) ; <nl> @ @ - 166 , 7 + 174 , 7 @ @ <nl> <nl> for ( Chunk chunk : Lists . newArrayList ( chunkproviderserver . func _ 189548 _ a ( ) ) ) <nl> { <nl> - @ @ - 1030 , 6 + 1054 , 7 @ @ <nl> + @ @ - 1030 , 6 + 1055 , 7 @ @ <nl> this . field _ 72986 _ A . func _ 176135 _ e ( this . func _ 175723 _ af ( ) . func _ 177732 _ i ( ) ) ; <nl> this . field _ 73019 _ z . func _ 75755 _ a ( this . field _ 72986 _ A , this . field _ 73061 _ a . func _ 184103 _ al ( ) . func _ 72378 _ q ( ) ) ; <nl> this . field _ 72988 _ C . func _ 75744 _ a ( ) ; <nl> @ @ - 174 , 7 + 182 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 72838 _ d ( Entity p _ 72838 _ 1 _ ) <nl> - @ @ - 1041 , 7 + 1066 , 7 @ @ <nl> + @ @ - 1041 , 7 + 1067 , 7 @ @ <nl> { <nl> for ( Entity entity : Lists . newArrayList ( p _ 175650 _ 1 _ ) ) <nl> { <nl> @ @ - 183 , 7 + 191 , 7 @ @ <nl> { <nl> this . field _ 72996 _ f . add ( entity ) ; <nl> this . func _ 72923 _ a ( entity ) ; <nl> - @ @ - 1122 , 7 + 1147 , 7 @ @ <nl> + @ @ - 1122 , 7 + 1148 , 7 @ @ <nl> { <nl> if ( super . func _ 72942 _ c ( p _ 72942 _ 1 _ ) ) <nl> { <nl> @ @ - 192 , 7 + 200 , 7 @ @ <nl> return true ; <nl> } <nl> else <nl> - @ @ - 1144 , 6 + 1169 , 7 @ @ <nl> + @ @ - 1144 , 6 + 1170 , 7 @ @ <nl> public Explosion func _ 72885 _ a ( @ Nullable Entity p _ 72885 _ 1 _ , double p _ 72885 _ 2 _ , double p _ 72885 _ 4 _ , double p _ 72885 _ 6 _ , float p _ 72885 _ 8 _ , boolean p _ 72885 _ 9 _ , boolean p _ 72885 _ 10 _ ) <nl> { <nl> Explosion explosion = new Explosion ( this , p _ 72885 _ 1 _ , p _ 72885 _ 2 _ , p _ 72885 _ 4 _ , p _ 72885 _ 6 _ , p _ 72885 _ 8 _ , p _ 72885 _ 9 _ , p _ 72885 _ 10 _ ) ; <nl> @ @ - 200 , 7 + 208 , 7 @ @ <nl> explosion . func _ 77278 _ a ( ) ; <nl> explosion . func _ 77279 _ a ( false ) ; <nl> <nl> - @ @ - 1189 , 7 + 1215 , 7 @ @ <nl> + @ @ - 1189 , 7 + 1216 , 7 @ @ <nl> { <nl> if ( this . func _ 147485 _ a ( blockeventdata ) ) <nl> { <nl> @ @ - 209 , 7 + 217 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1215 , 27 + 1241 , 31 @ @ <nl> + @ @ - 1215 , 27 + 1242 , 31 @ @ <nl> <nl> if ( this . field _ 73003 _ n ! = this . field _ 73004 _ o ) <nl> { <nl> @ @ - 247 , 7 + 255 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1314 , 6 + 1344 , 11 @ @ <nl> + @ @ - 1314 , 6 + 1345 , 11 @ @ <nl> return this . field _ 73061 _ a . func _ 152345 _ ab ( ) ; <nl> } <nl> <nl> diff - - git a / patches / minecraft / net / minecraft / world / WorldServerMulti . java . patch b / patches / minecraft / net / minecraft / world / WorldServerMulti . java . patch <nl> index a5fdfe8 . . 121f7da 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / WorldServerMulti . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / WorldServerMulti . java . patch <nl> @ @ - 45 , 7 + 45 , 11 @ @ <nl> } <nl> else <nl> { <nl> - @ @ - 75 , 6 + 78 , 14 @ @ <nl> + @ @ - 72 , 9 + 75 , 18 @ @ <nl> + this . field _ 72982 _ D . func _ 82566 _ a ( this ) ; <nl> + } <nl> + <nl> + + this . initCapabilities ( ) ; <nl> return this ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / common / util / WorldCapabilityData . java b / src / main / java / net / minecraftforge / common / util / WorldCapabilityData . java <nl> new file mode 100644 <nl> index 0000000 . . 8ffff90 <nl> - - - / dev / null <nl> + + + b / src / main / java / net / minecraftforge / common / util / WorldCapabilityData . java <nl> @ @ - 0 , 0 + 1 , 57 @ @ <nl> + package net . minecraftforge . common . util ; <nl> + <nl> + import net . minecraft . nbt . NBTTagCompound ; <nl> + import net . minecraft . world . WorldProvider ; <nl> + import net . minecraft . world . WorldSavedData ; <nl> + <nl> + public class WorldCapabilityData extends WorldSavedData <nl> + { <nl> + public static final String ID = " capabilities " ; <nl> + <nl> + private INBTSerializable < NBTTagCompound > serializable ; <nl> + private NBTTagCompound capNBT = null ; <nl> + <nl> + public WorldCapabilityData ( String name ) <nl> + { <nl> + super ( name ) ; <nl> + } <nl> + <nl> + public WorldCapabilityData ( INBTSerializable < NBTTagCompound > serializable ) <nl> + { <nl> + super ( ID ) ; <nl> + this . serializable = serializable ; <nl> + } <nl> + <nl> + @ Override <nl> + public void readFromNBT ( NBTTagCompound nbt ) <nl> + { <nl> + this . capNBT = nbt ; <nl> + if ( serializable ! = null ) <nl> + { <nl> + serializable . deserializeNBT ( this . capNBT ) ; <nl> + this . capNBT = null ; <nl> + } <nl> + } <nl> + <nl> + @ Override <nl> + public NBTTagCompound writeToNBT ( NBTTagCompound nbt ) <nl> + { <nl> + return nbt = serializable . serializeNBT ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public boolean isDirty ( ) <nl> + { <nl> + return true ; <nl> + } <nl> + <nl> + public void setCapabilities ( WorldProvider provider , INBTSerializable < NBTTagCompound > capabilities ) <nl> + { <nl> + this . serializable = capabilities ; <nl> + if ( this . capNBT ! = null ) <nl> + { <nl> + serializable . deserializeNBT ( this . capNBT ) ; <nl> + this . capNBT = null ; <nl> + } <nl> + } <nl> + } <nl> \ No newline at end of file <nl> diff - - git a / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java b / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java <nl> index 4166a1e . . fd8bfa0 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java <nl> + + + b / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java <nl> @ @ - 133 , 4 + 133 , 21 @ @ public class AttachCapabilitiesEvent extends Event <nl> return this . stack ; <nl> } <nl> } <nl> + <nl> + / * * <nl> + * A version of the parent event which is only fired for Worlds . <nl> + * / <nl> + public static class World extends AttachCapabilitiesEvent <nl> + { <nl> + private final net . minecraft . world . World world ; <nl> + public World ( net . minecraft . world . World world ) <nl> + { <nl> + super ( world ) ; <nl> + this . world = world ; <nl> + } <nl> + public net . minecraft . world . World getWorld ( ) <nl> + { <nl> + return this . world ; <nl> + } <nl> + } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> index aa88ccc . . 7593041 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> @ @ - 525 , 6 + 525 , 10 @ @ public class ForgeEventFactory <nl> return gatherCapabilities ( new AttachCapabilitiesEvent . Item ( item , stack ) , parent ) ; <nl> } <nl> <nl> + public static CapabilityDispatcher gatherCapabilities ( World world , ICapabilityProvider parent ) { <nl> + return gatherCapabilities ( new AttachCapabilitiesEvent . World ( world ) , parent ) ; <nl> + } <nl> + <nl> private static CapabilityDispatcher gatherCapabilities ( AttachCapabilitiesEvent event , ICapabilityProvider parent ) <nl> { <nl> MinecraftForge . EVENT _ BUS . post ( event ) ; <nl> diff - - git a / src / test / java / net / minecraftforge / test / WorldCapabilityRainTimerTest . java b / src / test / java / net / minecraftforge / test / WorldCapabilityRainTimerTest . java <nl> new file mode 100644 <nl> index 0000000 . . bc1a348 <nl> - - - / dev / null <nl> + + + b / src / test / java / net / minecraftforge / test / WorldCapabilityRainTimerTest . java <nl> @ @ - 0 , 0 + 1 , 167 @ @ <nl> + package net . minecraftforge . test ; <nl> + <nl> + import java . util . Map ; <nl> + import java . util . Set ; <nl> + <nl> + import com . google . common . collect . Maps ; <nl> + <nl> + import net . minecraft . nbt . NBTBase ; <nl> + import net . minecraft . nbt . NBTTagCompound ; <nl> + import net . minecraft . nbt . NBTTagIntArray ; <nl> + import net . minecraft . util . EnumFacing ; <nl> + import net . minecraft . util . ResourceLocation ; <nl> + import net . minecraft . world . storage . WorldInfo ; <nl> + import net . minecraftforge . common . MinecraftForge ; <nl> + import net . minecraftforge . common . capabilities . Capability ; <nl> + import net . minecraftforge . common . capabilities . Capability . IStorage ; <nl> + import net . minecraftforge . common . capabilities . CapabilityInject ; <nl> + import net . minecraftforge . common . capabilities . CapabilityManager ; <nl> + import net . minecraftforge . common . capabilities . ICapabilitySerializable ; <nl> + import net . minecraftforge . event . AttachCapabilitiesEvent ; <nl> + import net . minecraftforge . fml . common . Mod ; <nl> + import net . minecraftforge . fml . common . Mod . EventHandler ; <nl> + import net . minecraftforge . fml . common . event . FMLInitializationEvent ; <nl> + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; <nl> + import net . minecraftforge . fml . common . gameevent . TickEvent ; <nl> + <nl> + / * * Simple mod to test world capability , by adding timer logic and check for raining time . * / <nl> + @ Mod ( modid = WorldCapabilityRainTimerTest . MODID , name = " World Periodic Rain Check Test " , version = " 0 . 0 . 0 " ) <nl> + public class WorldCapabilityRainTimerTest { <nl> + public static final String MODID = " worldperiodicrainchecktest " ; <nl> + <nl> + @ CapabilityInject ( IRainTimer . class ) <nl> + public static final Capability < IRainTimer > TIMER _ CAP = null ; <nl> + <nl> + @ EventHandler <nl> + public void init ( FMLInitializationEvent event ) <nl> + { <nl> + CapabilityManager . INSTANCE . register ( IRainTimer . class , new TimerStorage ( ) , DefaultTimer . class ) ; <nl> + MinecraftForge . EVENT _ BUS . register ( new NormalEventHandler ( ) ) ; <nl> + } <nl> + <nl> + public static class NormalEventHandler <nl> + { <nl> + @ SubscribeEvent <nl> + public void attatchTimer ( AttachCapabilitiesEvent . World event ) <nl> + { <nl> + event . addCapability ( new ResourceLocation ( MODID , " rainTimer " ) , new RainTimerProvider ( ) ) ; <nl> + } <nl> + <nl> + @ SubscribeEvent <nl> + public void onTick ( TickEvent . WorldTickEvent event ) <nl> + { <nl> + if ( event . world . isRemote ) <nl> + return ; <nl> + <nl> + IRainTimer timer = event . world . getCapability ( TIMER _ CAP , null ) ; <nl> + <nl> + if ( event . phase = = TickEvent . Phase . END ) <nl> + timer . onTick ( ) ; <nl> + <nl> + if ( event . phase = = TickEvent . Phase . START ) <nl> + { <nl> + if ( ! event . world . provider . getHasNoSky ( ) & & event . world . isRaining ( ) ) <nl> + { <nl> + if ( timer . getDuration ( ) = = 0 ) <nl> + timer . refreshTimer ( 1000 , 0 ) ; <nl> + else if ( timer . isTimerReachedDuration ( ) ) <nl> + event . world . provider . resetRainAndThunder ( ) ; <nl> + } else <nl> + timer . refreshTimer ( 0 , 0 ) ; <nl> + } <nl> + } <nl> + } <nl> + <nl> + public interface IRainTimer <nl> + { <nl> + public int getCurrentTime ( ) ; <nl> + public int getDuration ( ) ; <nl> + <nl> + public void refreshTimer ( int duration , int initial ) ; <nl> + public void resetTimer ( ) ; <nl> + public boolean isTimerReachedDuration ( ) ; <nl> + <nl> + public void onTick ( ) ; <nl> + } <nl> + <nl> + public static class TimerStorage implements IStorage < IRainTimer > <nl> + { <nl> + @ Override <nl> + public NBTBase writeNBT ( Capability < IRainTimer > capability , IRainTimer instance , EnumFacing side ) { <nl> + NBTTagCompound compound = new NBTTagCompound ( ) ; <nl> + compound . setInteger ( " current " , instance . getCurrentTime ( ) ) ; <nl> + compound . setInteger ( " duration " , instance . getDuration ( ) ) ; <nl> + return compound ; <nl> + } <nl> + <nl> + @ Override <nl> + public void readNBT ( Capability < IRainTimer > capability , IRainTimer instance , EnumFacing side , NBTBase nbt ) { <nl> + NBTTagCompound data = ( NBTTagCompound ) nbt ; <nl> + instance . refreshTimer ( data . getInteger ( " duration " ) , data . getInteger ( " current " ) ) ; <nl> + } <nl> + } <nl> + <nl> + public static class DefaultTimer implements IRainTimer <nl> + { <nl> + private int duration , current ; <nl> + <nl> + @ Override <nl> + public int getCurrentTime ( ) { return this . current ; } <nl> + @ Override <nl> + public int getDuration ( ) { return this . duration ; } <nl> + <nl> + @ Override <nl> + public void refreshTimer ( int duration , int initial ) <nl> + { <nl> + this . duration = duration ; <nl> + this . current = initial ; <nl> + } <nl> + <nl> + @ Override <nl> + public void resetTimer ( ) <nl> + { <nl> + this . current = 0 ; <nl> + } <nl> + @ Override <nl> + public boolean isTimerReachedDuration ( ) <nl> + { <nl> + return this . current > = this . duration ; <nl> + } <nl> + <nl> + @ Override <nl> + public void onTick ( ) <nl> + { <nl> + if ( this . current < this . duration ) <nl> + this . current + + ; <nl> + } <nl> + } <nl> + <nl> + public static class RainTimerProvider implements ICapabilitySerializable < NBTTagCompound > <nl> + { <nl> + private IRainTimer timer = TIMER _ CAP . getDefaultInstance ( ) ; <nl> + <nl> + @ Override <nl> + public boolean hasCapability ( Capability < ? > capability , EnumFacing facing ) <nl> + { <nl> + return capability = = TIMER _ CAP ; <nl> + } <nl> + <nl> + @ Override <nl> + public < T > T getCapability ( Capability < T > capability , EnumFacing facing ) <nl> + { <nl> + return capability = = TIMER _ CAP ? TIMER _ CAP . < T > cast ( this . timer ) : null ; <nl> + } <nl> + <nl> + @ Override <nl> + public NBTTagCompound serializeNBT ( ) <nl> + { <nl> + return ( NBTTagCompound ) TIMER _ CAP . writeNBT ( this . timer , null ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void deserializeNBT ( NBTTagCompound nbt ) <nl> + { <nl> + TIMER _ CAP . readNBT ( this . timer , null , nbt ) ; <nl> + } <nl> + } <nl> + } <nl> \ No newline at end of file
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch b / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch <nl> new file mode 100644 <nl> index 0000000 . . b2ed5d2 <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch <nl> @ @ - 0 , 0 + 1 , 11 @ @ <nl> + - - - . . / src - base / minecraft / net / minecraft / block / BlockRedstoneDiode . java <nl> + + + + . . / src - work / minecraft / net / minecraft / block / BlockRedstoneDiode . java <nl> + @ @ - 200 , 6 + 200 , 8 @ @ <nl> + { <nl> + EnumFacing enumfacing = ( EnumFacing ) p _ 176400 _ 3 _ . func _ 177229 _ b ( field _ 176387 _ N ) ; <nl> + BlockPos blockpos1 = p _ 176400 _ 2 _ . func _ 177972 _ a ( enumfacing . func _ 176734 _ d ( ) ) ; <nl> + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( p _ 176400 _ 1 _ , p _ 176400 _ 2 _ , p _ 176400 _ 1 _ . func _ 180495 _ p ( p _ 176400 _ 2 _ ) , java . util . EnumSet . of ( enumfacing . func _ 176734 _ d ( ) ) ) . isCanceled ( ) ) <nl> + + return ; <nl> + p _ 176400 _ 1 _ . func _ 180496 _ d ( blockpos1 , this ) ; <nl> + p _ 176400 _ 1 _ . func _ 175695 _ a ( blockpos1 , this , enumfacing ) ; <nl> + } <nl> diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch <nl> new file mode 100644 <nl> index 0000000 . . 4c1454b <nl> - - - / dev / null <nl> + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch <nl> @ @ - 0 , 0 + 1 , 22 @ @ <nl> + - - - . . / src - base / minecraft / net / minecraft / tileentity / TileEntityPiston . java <nl> + + + + . . / src - work / minecraft / net / minecraft / tileentity / TileEntityPiston . java <nl> + @ @ - 151 , 7 + 151 , 8 @ @ <nl> + if ( this . field _ 145850 _ b . func _ 180495 _ p ( this . field _ 174879 _ c ) . func _ 177230 _ c ( ) = = Blocks . field _ 180384 _ M ) <nl> + { <nl> + this . field _ 145850 _ b . func _ 180501 _ a ( this . field _ 174879 _ c , this . field _ 174932 _ a , 3 ) ; <nl> + - this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; <nl> + + if ( ! net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( field _ 145850 _ b , field _ 174879 _ c , field _ 145850 _ b . func _ 180495 _ p ( field _ 174879 _ c ) , java . util . EnumSet . noneOf ( EnumFacing . class ) ) . isCanceled ( ) ) <nl> + + this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; <nl> + } <nl> + } <nl> + } <nl> + @ @ - 169 , 7 + 170 , 8 @ @ <nl> + if ( this . field _ 145850 _ b . func _ 180495 _ p ( this . field _ 174879 _ c ) . func _ 177230 _ c ( ) = = Blocks . field _ 180384 _ M ) <nl> + { <nl> + this . field _ 145850 _ b . func _ 180501 _ a ( this . field _ 174879 _ c , this . field _ 174932 _ a , 3 ) ; <nl> + - this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; <nl> + + if ( ! net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( field _ 145850 _ b , field _ 174879 _ c , field _ 145850 _ b . func _ 180495 _ p ( field _ 174879 _ c ) , java . util . EnumSet . noneOf ( EnumFacing . class ) ) . isCanceled ( ) ) <nl> + + this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; <nl> + } <nl> + } <nl> + else <nl> diff - - git a / patches / minecraft / net / minecraft / world / World . java . patch b / patches / minecraft / net / minecraft / world / World . java . patch <nl> index 1da6baf . . 3d4fc0b 100644 <nl> - - - a / patches / minecraft / net / minecraft / world / World . java . patch <nl> + + + b / patches / minecraft / net / minecraft / world / World . java . patch <nl> @ @ - 162 , 7 + 162 , 29 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 782 , 7 + 832 , 7 @ @ <nl> + @ @ - 408 , 6 + 458 , 9 @ @ <nl> + <nl> + public void func _ 175685 _ c ( BlockPos p _ 175685 _ 1 _ , Block p _ 175685 _ 2 _ ) <nl> + { <nl> + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( this , p _ 175685 _ 1 _ , this . func _ 180495 _ p ( p _ 175685 _ 1 _ ) , java . util . EnumSet . allOf ( EnumFacing . class ) ) . isCanceled ( ) ) <nl> + + return ; <nl> + + <nl> + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177976 _ e ( ) , p _ 175685 _ 2 _ ) ; <nl> + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177974 _ f ( ) , p _ 175685 _ 2 _ ) ; <nl> + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177977 _ b ( ) , p _ 175685 _ 2 _ ) ; <nl> + @ @ - 418 , 6 + 471 , 11 @ @ <nl> + <nl> + public void func _ 175695 _ a ( BlockPos p _ 175695 _ 1 _ , Block p _ 175695 _ 2 _ , EnumFacing p _ 175695 _ 3 _ ) <nl> + { <nl> + + java . util . EnumSet < EnumFacing > directions = java . util . EnumSet . allOf ( EnumFacing . class ) ; <nl> + + directions . remove ( p _ 175695 _ 3 _ ) ; <nl> + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( this , p _ 175695 _ 1 _ , this . func _ 180495 _ p ( p _ 175695 _ 1 _ ) , directions ) . isCanceled ( ) ) <nl> + + return ; <nl> + + <nl> + if ( p _ 175695 _ 3 _ ! = EnumFacing . WEST ) <nl> + { <nl> + this . func _ 180496 _ d ( p _ 175695 _ 1 _ . func _ 177976 _ e ( ) , p _ 175695 _ 2 _ ) ; <nl> + @ @ - 782 , 7 + 840 , 7 @ @ <nl> <nl> public boolean func _ 72935 _ r ( ) <nl> { <nl> @ @ - 171 , 7 + 193 , 7 @ @ <nl> } <nl> <nl> public MovingObjectPosition func _ 72933 _ a ( Vec3 p _ 72933 _ 1 _ , Vec3 p _ 72933 _ 2 _ ) <nl> - @ @ - 978 , 6 + 1028 , 8 @ @ <nl> + @ @ - 978 , 6 + 1036 , 8 @ @ <nl> <nl> public void func _ 72956 _ a ( Entity p _ 72956 _ 1 _ , String p _ 72956 _ 2 _ , float p _ 72956 _ 3 _ , float p _ 72956 _ 4 _ ) <nl> { <nl> @ @ - 180 , 7 + 202 , 7 @ @ <nl> for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) <nl> { <nl> ( ( IWorldAccess ) this . field _ 73021 _ x . get ( i ) ) . func _ 72704 _ a ( p _ 72956 _ 2 _ , p _ 72956 _ 1 _ . field _ 70165 _ t , p _ 72956 _ 1 _ . field _ 70163 _ u , p _ 72956 _ 1 _ . field _ 70161 _ v , p _ 72956 _ 3 _ , p _ 72956 _ 4 _ ) ; <nl> - @ @ - 986 , 6 + 1038 , 8 @ @ <nl> + @ @ - 986 , 6 + 1046 , 8 @ @ <nl> <nl> public void func _ 85173 _ a ( EntityPlayer p _ 85173 _ 1 _ , String p _ 85173 _ 2 _ , float p _ 85173 _ 3 _ , float p _ 85173 _ 4 _ ) <nl> { <nl> @ @ - 189 , 7 + 211 , 7 @ @ <nl> for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) <nl> { <nl> ( ( IWorldAccess ) this . field _ 73021 _ x . get ( i ) ) . func _ 85102 _ a ( p _ 85173 _ 1 _ , p _ 85173 _ 2 _ , p _ 85173 _ 1 _ . field _ 70165 _ t , p _ 85173 _ 1 _ . field _ 70163 _ u , p _ 85173 _ 1 _ . field _ 70161 _ v , p _ 85173 _ 3 _ , p _ 85173 _ 4 _ ) ; <nl> - @ @ - 1037 , 6 + 1091 , 9 @ @ <nl> + @ @ - 1037 , 6 + 1099 , 9 @ @ <nl> <nl> public boolean func _ 72838 _ d ( Entity p _ 72838 _ 1 _ ) <nl> { <nl> @ @ - 199 , 7 + 221 , 7 @ @ <nl> int i = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70165 _ t / 16 . 0D ) ; <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70161 _ v / 16 . 0D ) ; <nl> boolean flag = p _ 72838 _ 1 _ . field _ 98038 _ p ; <nl> - @ @ - 1059 , 6 + 1116 , 8 @ @ <nl> + @ @ - 1059 , 6 + 1124 , 8 @ @ <nl> this . func _ 72854 _ c ( ) ; <nl> } <nl> <nl> @ @ - 208 , 7 + 230 , 7 @ @ <nl> this . func _ 72964 _ e ( i , j ) . func _ 76612 _ a ( p _ 72838 _ 1 _ ) ; <nl> this . field _ 72996 _ f . add ( p _ 72838 _ 1 _ ) ; <nl> this . func _ 72923 _ a ( p _ 72838 _ 1 _ ) ; <nl> - @ @ - 1271 , 17 + 1330 , 29 @ @ <nl> + @ @ - 1271 , 17 + 1338 , 29 @ @ <nl> <nl> public int func _ 72967 _ a ( float p _ 72967 _ 1 _ ) <nl> { <nl> @ @ - 241 , 7 + 263 , 7 @ @ <nl> public void func _ 72848 _ b ( IWorldAccess p _ 72848 _ 1 _ ) <nl> { <nl> this . field _ 73021 _ x . remove ( p _ 72848 _ 1 _ ) ; <nl> - @ @ - 1290 , 6 + 1361 , 12 @ @ <nl> + @ @ - 1290 , 6 + 1369 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public float func _ 72971 _ b ( float p _ 72971 _ 1 _ ) <nl> { <nl> @ @ - 254 , 7 + 276 , 7 @ @ <nl> float f1 = this . func _ 72826 _ c ( p _ 72971 _ 1 _ ) ; <nl> float f2 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 2F ) ; <nl> f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1302 , 6 + 1379 , 12 @ @ <nl> + @ @ - 1302 , 6 + 1387 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public Vec3 func _ 72833 _ a ( Entity p _ 72833 _ 1 _ , float p _ 72833 _ 2 _ ) <nl> { <nl> @ @ - 267 , 7 + 289 , 7 @ @ <nl> float f1 = this . func _ 72826 _ c ( p _ 72833 _ 2 _ ) ; <nl> float f2 = MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; <nl> f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1309 , 9 + 1392 , 7 @ @ <nl> + @ @ - 1309 , 9 + 1400 , 7 @ @ <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70163 _ u ) ; <nl> int k = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70161 _ v ) ; <nl> BlockPos blockpos = new BlockPos ( i , j , k ) ; <nl> @ @ - 278 , 7 + 300 , 7 @ @ <nl> float f4 = ( float ) ( l > > 16 & 255 ) / 255 . 0F ; <nl> float f5 = ( float ) ( l > > 8 & 255 ) / 255 . 0F ; <nl> float f6 = ( float ) ( l & 255 ) / 255 . 0F ; <nl> - @ @ - 1373 , 6 + 1454 , 11 @ @ <nl> + @ @ - 1373 , 6 + 1462 , 11 @ @ <nl> <nl> public float func _ 130001 _ d ( ) <nl> { <nl> @ @ - 290 , 7 + 312 , 7 @ @ <nl> return WorldProvider . field _ 111203 _ a [ this . field _ 73011 _ w . func _ 76559 _ b ( this . field _ 72986 _ A . func _ 76073 _ f ( ) ) ] ; <nl> } <nl> <nl> - @ @ - 1385 , 6 + 1471 , 12 @ @ <nl> + @ @ - 1385 , 6 + 1479 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public Vec3 func _ 72824 _ f ( float p _ 72824 _ 1 _ ) <nl> { <nl> @ @ - 303 , 7 + 325 , 7 @ @ <nl> float f1 = this . func _ 72826 _ c ( p _ 72824 _ 1 _ ) ; <nl> float f2 = MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; <nl> f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1442 , 9 + 1534 , 9 @ @ <nl> + @ @ - 1442 , 9 + 1542 , 9 @ @ <nl> for ( blockpos1 = new BlockPos ( p _ 175672 _ 1 _ . func _ 177958 _ n ( ) , chunk . func _ 76625 _ h ( ) + 16 , p _ 175672 _ 1 _ . func _ 177952 _ p ( ) ) ; blockpos1 . func _ 177956 _ o ( ) > = 0 ; blockpos1 = blockpos2 ) <nl> { <nl> blockpos2 = blockpos1 . func _ 177977 _ b ( ) ; <nl> @ @ - 315 , 7 + 337 , 7 @ @ <nl> { <nl> break ; <nl> } <nl> - @ @ - 1456 , 6 + 1548 , 12 @ @ <nl> + @ @ - 1456 , 6 + 1556 , 12 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public float func _ 72880 _ h ( float p _ 72880 _ 1 _ ) <nl> { <nl> @ @ - 328 , 7 + 350 , 7 @ @ <nl> float f1 = this . func _ 72826 _ c ( p _ 72880 _ 1 _ ) ; <nl> float f2 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 25F ) ; <nl> f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; <nl> - @ @ - 1500 , 7 + 1598 , 15 @ @ <nl> + @ @ - 1500 , 7 + 1606 , 15 @ @ <nl> entity . func _ 85029 _ a ( crashreportcategory ) ; <nl> } <nl> <nl> @ @ - 345 , 7 + 367 , 7 @ @ <nl> } <nl> <nl> if ( entity . field _ 70128 _ L ) <nl> - @ @ - 1562 , 7 + 1668 , 16 @ @ <nl> + @ @ - 1562 , 7 + 1676 , 16 @ @ <nl> crashreport = CrashReport . func _ 85055 _ a ( throwable1 , " Ticking entity " ) ; <nl> crashreportcategory = crashreport . func _ 85058 _ a ( " Entity being ticked " ) ; <nl> entity . func _ 85029 _ a ( crashreportcategory ) ; <nl> @ @ - 363 , 7 + 385 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1609 , 7 + 1724 , 16 @ @ <nl> + @ @ - 1609 , 7 + 1732 , 16 @ @ <nl> CrashReport crashreport1 = CrashReport . func _ 85055 _ a ( throwable , " Ticking block entity " ) ; <nl> CrashReportCategory crashreportcategory1 = crashreport1 . func _ 85058 _ a ( " Block entity being ticked " ) ; <nl> tileentity . func _ 145828 _ a ( crashreportcategory1 ) ; <nl> @ @ - 381 , 7 + 403 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 1628 , 6 + 1752 , 10 @ @ <nl> + @ @ - 1628 , 6 + 1760 , 10 @ @ <nl> <nl> if ( ! this . field _ 147483 _ b . isEmpty ( ) ) <nl> { <nl> @ @ - 392 , 7 + 414 , 7 @ @ <nl> this . field _ 175730 _ i . removeAll ( this . field _ 147483 _ b ) ; <nl> this . field _ 147482 _ g . removeAll ( this . field _ 147483 _ b ) ; <nl> this . field _ 147483 _ b . clear ( ) ; <nl> - @ @ - 1668 , 7 + 1796 , 8 @ @ <nl> + @ @ - 1668 , 7 + 1804 , 8 @ @ <nl> <nl> public boolean func _ 175700 _ a ( TileEntity p _ 175700 _ 1 _ ) <nl> { <nl> @ @ - 402 , 7 + 424 , 7 @ @ <nl> <nl> if ( flag & & p _ 175700 _ 1 _ instanceof IUpdatePlayerListBox ) <nl> { <nl> - @ @ - 1710 , 9 + 1839 , 12 @ @ <nl> + @ @ - 1710 , 9 + 1847 , 12 @ @ <nl> { <nl> int i = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70165 _ t ) ; <nl> int j = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70161 _ v ) ; <nl> @ @ - 417 , 7 + 439 , 7 @ @ <nl> { <nl> p _ 72866 _ 1 _ . field _ 70142 _ S = p _ 72866 _ 1 _ . field _ 70165 _ t ; <nl> p _ 72866 _ 1 _ . field _ 70137 _ T = p _ 72866 _ 1 _ . field _ 70163 _ u ; <nl> - @ @ - 1839 , 7 + 1971 , 7 @ @ <nl> + @ @ - 1839 , 7 + 1979 , 7 @ @ <nl> { <nl> Block block = this . func _ 180495 _ p ( new BlockPos ( k1 , l1 , i2 ) ) . func _ 177230 _ c ( ) ; <nl> <nl> @ @ - 426 , 7 + 448 , 7 @ @ <nl> { <nl> return true ; <nl> } <nl> - @ @ - 1901 , 6 + 2033 , 10 @ @ <nl> + @ @ - 1901 , 6 + 2041 , 10 @ @ <nl> { <nl> return true ; <nl> } <nl> @ @ - 437 , 7 + 459 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 2039 , 6 + 2175 , 7 @ @ <nl> + @ @ - 2039 , 6 + 2183 , 7 @ @ <nl> public Explosion func _ 72885 _ a ( Entity p _ 72885 _ 1 _ , double p _ 72885 _ 2 _ , double p _ 72885 _ 4 _ , double p _ 72885 _ 6 _ , float p _ 72885 _ 8 _ , boolean p _ 72885 _ 9 _ , boolean p _ 72885 _ 10 _ ) <nl> { <nl> Explosion explosion = new Explosion ( this , p _ 72885 _ 1 _ , p _ 72885 _ 2 _ , p _ 72885 _ 4 _ , p _ 72885 _ 6 _ , p _ 72885 _ 8 _ , p _ 72885 _ 9 _ , p _ 72885 _ 10 _ ) ; <nl> @ @ - 445 , 7 + 467 , 7 @ @ <nl> explosion . func _ 77278 _ a ( ) ; <nl> explosion . func _ 77279 _ a ( true ) ; <nl> return explosion ; <nl> - @ @ - 2185 , 19 + 2322 , 28 @ @ <nl> + @ @ - 2185 , 19 + 2330 , 28 @ @ <nl> else <nl> { <nl> this . func _ 175700 _ a ( p _ 175690 _ 2 _ ) ; <nl> @ @ - 475 , 7 + 497 , 7 @ @ <nl> } <nl> else <nl> { <nl> - @ @ - 2210 , 6 + 2356 , 7 @ @ <nl> + @ @ - 2210 , 6 + 2364 , 7 @ @ <nl> <nl> this . func _ 175726 _ f ( p _ 175713 _ 1 _ ) . func _ 177425 _ e ( p _ 175713 _ 1 _ ) ; <nl> } <nl> @ @ - 483 , 7 + 505 , 7 @ @ <nl> } <nl> <nl> public void func _ 147457 _ a ( TileEntity p _ 147457 _ 1 _ ) <nl> - @ @ - 2228 , 7 + 2375 , 7 @ @ <nl> + @ @ - 2228 , 7 + 2383 , 7 @ @ <nl> { <nl> IBlockState iblockstate = p _ 175683 _ 0 _ . func _ 180495 _ p ( p _ 175683 _ 1 _ ) ; <nl> Block block = iblockstate . func _ 177230 _ c ( ) ; <nl> @ @ - 492 , 7 + 514 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 175677 _ d ( BlockPos p _ 175677 _ 1 _ , boolean p _ 175677 _ 2 _ ) <nl> - @ @ - 2248 , 7 + 2395 , 7 @ @ <nl> + @ @ - 2248 , 7 + 2403 , 7 @ @ <nl> else <nl> { <nl> Block block = this . func _ 180495 _ p ( p _ 175677 _ 1 _ ) . func _ 177230 _ c ( ) ; <nl> @ @ - 501 , 7 + 523 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 2265 , 8 + 2412 , 7 @ @ <nl> + @ @ - 2265 , 8 + 2420 , 7 @ @ <nl> <nl> public void func _ 72891 _ a ( boolean p _ 72891 _ 1 _ , boolean p _ 72891 _ 2 _ ) <nl> { <nl> @ @ - 511 , 7 + 533 , 7 @ @ <nl> } <nl> <nl> public void func _ 72835 _ b ( ) <nl> - @ @ - 2276 , 6 + 2422 , 11 @ @ <nl> + @ @ - 2276 , 6 + 2430 , 11 @ @ <nl> <nl> protected void func _ 72947 _ a ( ) <nl> { <nl> @ @ - 523 , 7 + 545 , 7 @ @ <nl> if ( this . field _ 72986 _ A . func _ 76059 _ o ( ) ) <nl> { <nl> this . field _ 73004 _ o = 1 . 0F ; <nl> - @ @ - 2289 , 6 + 2440 , 11 @ @ <nl> + @ @ - 2289 , 6 + 2448 , 11 @ @ <nl> <nl> protected void func _ 72979 _ l ( ) <nl> { <nl> @ @ - 535 , 7 + 557 , 7 @ @ <nl> if ( ! this . field _ 73011 _ w . func _ 177495 _ o ( ) ) <nl> { <nl> if ( ! this . field _ 72995 _ K ) <nl> - @ @ - 2383 , 6 + 2539 , 7 @ @ <nl> + @ @ - 2383 , 6 + 2547 , 7 @ @ <nl> { <nl> this . field _ 72993 _ I . clear ( ) ; <nl> this . field _ 72984 _ F . func _ 76320 _ a ( " buildList " ) ; <nl> @ @ - 543 , 7 + 565 , 7 @ @ <nl> int i ; <nl> EntityPlayer entityplayer ; <nl> int j ; <nl> - @ @ - 2445 , 7 + 2602 , 7 @ @ <nl> + @ @ - 2445 , 7 + 2610 , 7 @ @ <nl> l + = p _ 147467 _ 1 _ ; <nl> i1 + = p _ 147467 _ 2 _ ; <nl> <nl> @ @ - 552 , 7 + 574 , 7 @ @ <nl> { <nl> EntityPlayer entityplayer = this . func _ 72977 _ a ( ( double ) l + 0 . 5D , ( double ) j1 + 0 . 5D , ( double ) i1 + 0 . 5D , 8 . 0D ) ; <nl> <nl> - @ @ - 2485 , 6 + 2642 , 11 @ @ <nl> + @ @ - 2485 , 6 + 2650 , 11 @ @ <nl> <nl> public boolean func _ 175670 _ e ( BlockPos p _ 175670 _ 1 _ , boolean p _ 175670 _ 2 _ ) <nl> { <nl> @ @ - 564 , 7 + 586 , 7 @ @ <nl> BiomeGenBase biomegenbase = this . func _ 180494 _ b ( p _ 175670 _ 1 _ ) ; <nl> float f = biomegenbase . func _ 180626 _ a ( p _ 175670 _ 1 _ ) ; <nl> <nl> - @ @ - 2526 , 6 + 2688 , 11 @ @ <nl> + @ @ - 2526 , 6 + 2696 , 11 @ @ <nl> <nl> public boolean func _ 175708 _ f ( BlockPos p _ 175708 _ 1 _ , boolean p _ 175708 _ 2 _ ) <nl> { <nl> @ @ - 576 , 7 + 598 , 7 @ @ <nl> BiomeGenBase biomegenbase = this . func _ 180494 _ b ( p _ 175708 _ 1 _ ) ; <nl> float f = biomegenbase . func _ 180626 _ a ( p _ 175708 _ 1 _ ) ; <nl> <nl> - @ @ - 2543 , 7 + 2710 , 7 @ @ <nl> + @ @ - 2543 , 7 + 2718 , 7 @ @ <nl> { <nl> Block block = this . func _ 180495 _ p ( p _ 175708 _ 1 _ ) . func _ 177230 _ c ( ) ; <nl> <nl> @ @ - 585 , 7 + 607 , 7 @ @ <nl> { <nl> return true ; <nl> } <nl> - @ @ - 2575 , 10 + 2742 , 11 @ @ <nl> + @ @ - 2575 , 10 + 2750 , 11 @ @ <nl> else <nl> { <nl> Block block = this . func _ 180495 _ p ( p _ 175638 _ 1 _ ) . func _ 177230 _ c ( ) ; <nl> @ @ - 600 , 7 + 622 , 7 @ @ <nl> { <nl> j = 1 ; <nl> } <nl> - @ @ - 2792 , 10 + 2960 , 10 @ @ <nl> + @ @ - 2792 , 10 + 2968 , 10 @ @ <nl> public List func _ 175674 _ a ( Entity p _ 175674 _ 1 _ , AxisAlignedBB p _ 175674 _ 2 _ , Predicate p _ 175674 _ 3 _ ) <nl> { <nl> ArrayList arraylist = Lists . newArrayList ( ) ; <nl> @ @ - 615 , 7 + 637 , 7 @ @ <nl> <nl> for ( int i1 = i ; i1 < = j ; + + i1 ) <nl> { <nl> - @ @ - 2854 , 10 + 3022 , 10 @ @ <nl> + @ @ - 2854 , 10 + 3030 , 10 @ @ <nl> <nl> public List func _ 175647 _ a ( Class p _ 175647 _ 1 _ , AxisAlignedBB p _ 175647 _ 2 _ , Predicate p _ 175647 _ 3 _ ) <nl> { <nl> @ @ - 630 , 7 + 652 , 7 @ @ <nl> ArrayList arraylist = Lists . newArrayList ( ) ; <nl> <nl> for ( int i1 = i ; i1 < = j ; + + i1 ) <nl> - @ @ - 2938 , 13 + 3106 , 16 @ @ <nl> + @ @ - 2938 , 13 + 3114 , 16 @ @ <nl> <nl> public void func _ 175650 _ b ( Collection p _ 175650 _ 1 _ ) <nl> { <nl> @ @ - 649 , 7 + 671 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 2957 , 7 + 3128 , 9 @ @ <nl> + @ @ - 2957 , 7 + 3136 , 9 @ @ <nl> { <nl> Block block1 = this . func _ 180495 _ p ( p _ 175716 _ 2 _ ) . func _ 177230 _ c ( ) ; <nl> AxisAlignedBB axisalignedbb = p _ 175716 _ 3 _ ? null : p _ 175716 _ 1 _ . func _ 180640 _ a ( this , p _ 175716 _ 2 _ , p _ 175716 _ 1 _ . func _ 176223 _ P ( ) ) ; <nl> @ @ - 660 , 7 + 682 , 7 @ @ <nl> } <nl> <nl> public int func _ 175627 _ a ( BlockPos p _ 175627 _ 1 _ , EnumFacing p _ 175627 _ 2 _ ) <nl> - @ @ - 3032 , 7 + 3205 , 7 @ @ <nl> + @ @ - 3032 , 7 + 3213 , 7 @ @ <nl> { <nl> IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175651 _ 1 _ ) ; <nl> Block block = iblockstate . func _ 177230 _ c ( ) ; <nl> @ @ - 669 , 7 + 691 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 175640 _ z ( BlockPos p _ 175640 _ 1 _ ) <nl> - @ @ - 3160 , 7 + 3333 , 7 @ @ <nl> + @ @ - 3160 , 7 + 3341 , 7 @ @ <nl> <nl> public long func _ 72905 _ C ( ) <nl> { <nl> @ @ - 678 , 7 + 700 , 7 @ @ <nl> } <nl> <nl> public long func _ 82737 _ E ( ) <nl> - @ @ - 3170 , 17 + 3343 , 17 @ @ <nl> + @ @ - 3170 , 17 + 3351 , 17 @ @ <nl> <nl> public long func _ 72820 _ D ( ) <nl> { <nl> @ @ - 699 , 7 + 721 , 7 @ @ <nl> <nl> if ( ! this . func _ 175723 _ af ( ) . func _ 177746 _ a ( blockpos ) ) <nl> { <nl> - @ @ - 3192 , 7 + 3365 , 7 @ @ <nl> + @ @ - 3192 , 7 + 3373 , 7 @ @ <nl> <nl> public void func _ 175652 _ B ( BlockPos p _ 175652 _ 1 _ ) <nl> { <nl> @ @ - 708 , 7 + 730 , 7 @ @ <nl> } <nl> <nl> @ SideOnly ( Side . CLIENT ) <nl> - @ @ - 3212 , 12 + 3385 , 18 @ @ <nl> + @ @ - 3212 , 12 + 3393 , 18 @ @ <nl> <nl> if ( ! this . field _ 72996 _ f . contains ( p _ 72897 _ 1 _ ) ) <nl> { <nl> @ @ - 727 , 7 + 749 , 7 @ @ <nl> return true ; <nl> } <nl> <nl> - @ @ - 3307 , 8 + 3486 , 7 @ @ <nl> + @ @ - 3307 , 8 + 3494 , 7 @ @ <nl> <nl> public boolean func _ 180502 _ D ( BlockPos p _ 180502 _ 1 _ ) <nl> { <nl> @ @ - 737 , 7 + 759 , 7 @ @ <nl> } <nl> <nl> public MapStorage func _ 175693 _ T ( ) <nl> - @ @ - 3367 , 12 + 3545 , 12 @ @ <nl> + @ @ - 3367 , 12 + 3553 , 12 @ @ <nl> <nl> public int func _ 72800 _ K ( ) <nl> { <nl> @ @ - 752 , 7 + 774 , 7 @ @ <nl> } <nl> <nl> public Random func _ 72843 _ D ( int p _ 72843 _ 1 _ , int p _ 72843 _ 2 _ , int p _ 72843 _ 3 _ ) <nl> - @ @ - 3429 , 7 + 3607 , 7 @ @ <nl> + @ @ - 3429 , 7 + 3615 , 7 @ @ <nl> @ SideOnly ( Side . CLIENT ) <nl> public double func _ 72919 _ O ( ) <nl> { <nl> @ @ - 761 , 7 + 783 , 7 @ @ <nl> } <nl> <nl> public void func _ 175715 _ c ( int p _ 175715 _ 1 _ , BlockPos p _ 175715 _ 2 _ , int p _ 175715 _ 3 _ ) <nl> - @ @ - 3461 , 29 + 3639 , 21 @ @ <nl> + @ @ - 3461 , 29 + 3647 , 21 @ @ <nl> <nl> public void func _ 175666 _ e ( BlockPos p _ 175666 _ 1 _ , Block p _ 175666 _ 2 _ ) <nl> { <nl> @ @ - 798 , 7 + 820 , 7 @ @ <nl> } <nl> } <nl> } <nl> - @ @ - 3553 , 4 + 3723 , 82 @ @ <nl> + @ @ - 3553 , 4 + 3731 , 82 @ @ <nl> short short1 = 128 ; <nl> return k > = - short1 & & k < = short1 & & l > = - short1 & & l < = short1 ; <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> index cefbe13 . . 0640935 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java <nl> @ @ - 2 , 6 + 2 , 7 @ @ package net . minecraftforge . event ; <nl> <nl> import java . io . File ; <nl> import java . util . ArrayList ; <nl> + import java . util . EnumSet ; <nl> import java . util . HashMap ; <nl> import java . util . Iterator ; <nl> import java . util . List ; <nl> @ @ - 62 , 6 + 63 , 7 @ @ import net . minecraftforge . event . entity . player . PlayerUseItemEvent ; <nl> import net . minecraftforge . event . entity . player . PlayerWakeUpEvent ; <nl> import net . minecraftforge . event . entity . player . UseHoeEvent ; <nl> import net . minecraftforge . event . world . BlockEvent ; <nl> + import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; <nl> import net . minecraftforge . event . world . BlockEvent . MultiPlaceEvent ; <nl> import net . minecraftforge . event . world . BlockEvent . PlaceEvent ; <nl> import net . minecraftforge . event . world . ExplosionEvent ; <nl> @ @ - 89 , 6 + 91 , 13 @ @ public class ForgeEventFactory <nl> MinecraftForge . EVENT _ BUS . post ( event ) ; <nl> return event ; <nl> } <nl> + <nl> + public static NeighborNotifyEvent onNeighborNotify ( World world , BlockPos pos , IBlockState state , EnumSet < EnumFacing > notifiedSides ) <nl> + { <nl> + NeighborNotifyEvent event = new NeighborNotifyEvent ( world , pos , state , notifiedSides ) ; <nl> + MinecraftForge . EVENT _ BUS . post ( event ) ; <nl> + return event ; <nl> + } <nl> <nl> public static boolean doPlayerHarvestCheck ( EntityPlayer player , Block block , boolean success ) <nl> { <nl> diff - - git a / src / main / java / net / minecraftforge / event / world / BlockEvent . java b / src / main / java / net / minecraftforge / event / world / BlockEvent . java <nl> index 4315a28 . . 8e87f85 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / world / BlockEvent . java <nl> + + + b / src / main / java / net / minecraftforge / event / world / BlockEvent . java <nl> @ @ - 1 , 6 + 1 , 7 @ @ <nl> package net . minecraftforge . event . world ; <nl> <nl> import java . util . ArrayList ; <nl> + import java . util . EnumSet ; <nl> import java . util . List ; <nl> <nl> import net . minecraft . block . Block ; <nl> @ @ - 9 , 6 + 10 , 7 @ @ import net . minecraft . enchantment . EnchantmentHelper ; <nl> import net . minecraft . entity . player . EntityPlayer ; <nl> import net . minecraft . item . ItemStack ; <nl> import net . minecraft . util . BlockPos ; <nl> + import net . minecraft . util . EnumFacing ; <nl> import net . minecraft . world . World ; <nl> import net . minecraftforge . common . ForgeHooks ; <nl> import net . minecraftforge . common . util . BlockSnapshot ; <nl> @ @ - 177 , 4 + 179 , 31 @ @ public class BlockEvent extends Event <nl> return blockSnapshots ; <nl> } <nl> } <nl> + <nl> + / * * <nl> + * Fired when a physics update occurs on a block . This event acts as <nl> + * a way for mods to detect physics updates , in the same way a BUD switch <nl> + * does . This event is only called on the server . <nl> + * / <nl> + @ Cancelable <nl> + public static class NeighborNotifyEvent extends BlockEvent <nl> + { <nl> + private final EnumSet < EnumFacing > notifiedSides ; <nl> + <nl> + public NeighborNotifyEvent ( World world , BlockPos pos , IBlockState state , EnumSet < EnumFacing > notifiedSides ) <nl> + { <nl> + super ( world , pos , state ) ; <nl> + this . notifiedSides = notifiedSides ; <nl> + } <nl> + <nl> + / * * <nl> + * Gets a list of directions from the base block that updates will occur upon . <nl> + * <nl> + * @ return list of notified directions <nl> + * / <nl> + public EnumSet < EnumFacing > getNotifiedSides ( ) <nl> + { <nl> + return notifiedSides ; <nl> + } <nl> + } <nl> } <nl> diff - - git a / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java b / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java <nl> new file mode 100644 <nl> index 0000000 . . 9be69bf <nl> - - - / dev / null <nl> + + + b / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java <nl> @ @ - 0 , 0 + 1 , 30 @ @ <nl> + package net . minecraftforge . test ; <nl> + <nl> + import net . minecraftforge . common . MinecraftForge ; <nl> + import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; <nl> + import net . minecraftforge . fml . common . Mod ; <nl> + import net . minecraftforge . fml . common . Mod . EventHandler ; <nl> + import net . minecraftforge . fml . common . event . FMLInitializationEvent ; <nl> + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; <nl> + <nl> + @ Mod ( modid = " NeighborNotifyEventTest " , name = " NeighborNotifyEventTest " , version = " 0 . 0 . 0 " ) <nl> + public class NeighborNotifyEventTest <nl> + { <nl> + <nl> + public static final boolean ENABLE = false ; <nl> + <nl> + @ EventHandler <nl> + public void init ( FMLInitializationEvent event ) <nl> + { <nl> + MinecraftForge . EVENT _ BUS . register ( this ) ; <nl> + } <nl> + <nl> + @ SubscribeEvent <nl> + public void onNeighborNotify ( NeighborNotifyEvent event ) <nl> + { <nl> + if ( ENABLE ) { <nl> + System . out . println ( event . pos . toString ( ) ) ; <nl> + event . setCanceled ( true ) ; <nl> + } <nl> + } <nl> + }

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / multiplayer / WorldClient . java . patch b / patches / minecraft / net / minecraft / client / multiplayer / WorldClient . java . patch 
 index 83f738d . . b2931d8 100644 
 - - - a / patches / minecraft / net / minecraft / client / multiplayer / WorldClient . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / multiplayer / WorldClient . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / multiplayer / WorldClient . java 
 + + + . . / src - work / minecraft / net / minecraft / client / multiplayer / WorldClient . java 
 - @ @ - 60 , 17 + 60 , 18 @ @ 
 + @ @ - 60 , 17 + 60 , 19 @ @ 
 
 public WorldClient ( NetHandlerPlayClient p _ i45063 _ 1 _ , WorldSettings p _ i45063 _ 2 _ , int p _ i45063 _ 3 _ , EnumDifficulty p _ i45063 _ 4 _ , Profiler p _ i45063 _ 5 _ ) 
 { 
 @ @ - 17 , 6 + 17 , 7 @ @ 
 this . field _ 72988 _ C = new SaveDataMemoryStorage ( ) ; 
 this . func _ 72966 _ v ( ) ; 
 this . func _ 72947 _ a ( ) ; 
 + + this . initCapabilities ( ) ; 
 + net . minecraftforge . common . MinecraftForge . EVENT _ BUS . post ( new net . minecraftforge . event . world . WorldEvent . Load ( this ) ) ; 
 } 
 
 diff - - git a / patches / minecraft / net / minecraft / world / World . java . patch b / patches / minecraft / net / minecraft / world / World . java . patch 
 index 3367560 . . ac3bbc4 100644 
 - - - a / patches / minecraft / net / minecraft / world / World . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / World . java . patch 
 @ @ - 1 , 8 + 1 , 11 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / world / World . java 
 + + + . . / src - work / minecraft / net / minecraft / world / World . java 
 - @ @ - 61 , 6 + 61 , 13 @ @ 
 + @ @ - 59 , 8 + 59 , 15 @ @ 
 + import net . minecraftforge . fml . relauncher . Side ; 
 + import net . minecraftforge . fml . relauncher . SideOnly ; 
 
 - public abstract class World implements IBlockAccess 
 + - public abstract class World implements IBlockAccess 
 + + public abstract class World implements IBlockAccess , net . minecraftforge . common . capabilities . ICapabilityProvider 
 { 
 + / * * 
 + * Used in the getEntitiesWithinAABB functions to expand the search area for entities . 
 @ @ - 14 , 18 + 17 , 20 @ @ 
 private int field _ 181546 _ a = 63 ; 
 protected boolean field _ 72999 _ e ; 
 public final List < Entity > field _ 72996 _ f = Lists . < Entity > newArrayList ( ) ; 
 - @ @ - 102 , 6 + 109 , 10 @ @ 
 + @ @ - 102 , 6 + 109 , 12 @ @ 
 private final WorldBorder field _ 175728 _ M ; 
 int [ ] field _ 72994 _ J ; 
 
 + public boolean restoringBlockSnapshots = false ; 
 + public boolean captureBlockSnapshots = false ; 
 + public java . util . ArrayList < net . minecraftforge . common . util . BlockSnapshot > capturedBlockSnapshots = new java . util . ArrayList < net . minecraftforge . common . util . BlockSnapshot > ( ) ; 
 + + private net . minecraftforge . common . capabilities . CapabilityDispatcher capabilities ; 
 + + private net . minecraftforge . common . util . WorldCapabilityData capabilityData ; 
 + 
 protected World ( ISaveHandler p _ i45749 _ 1 _ , WorldInfo p _ i45749 _ 2 _ , WorldProvider p _ i45749 _ 3 _ , Profiler p _ i45749 _ 4 _ , boolean p _ i45749 _ 5 _ ) 
 { 
 this . field _ 73021 _ x = Lists . newArrayList ( new IWorldEventListener [ ] { this . field _ 184152 _ t } ) ; 
 - @ @ - 116 , 6 + 127 , 7 @ @ 
 + @ @ - 116 , 6 + 129 , 7 @ @ 
 this . field _ 73011 _ w = p _ i45749 _ 3 _ ; 
 this . field _ 72995 _ K = p _ i45749 _ 5 _ ; 
 this . field _ 175728 _ M = p _ i45749 _ 3 _ . func _ 177501 _ r ( ) ; 
 @ @ - 33 , 7 + 38 , 7 @ @ 
 } 
 
 public World func _ 175643 _ b ( ) 
 - @ @ - 125 , 6 + 137 , 11 @ @ 
 + @ @ - 125 , 6 + 139 , 11 @ @ 
 
 public Biome func _ 180494 _ b ( final BlockPos p _ 180494 _ 1 _ ) 
 { 
 @ @ - 45 , 7 + 50 , 7 @ @ 
 if ( this . func _ 175667 _ e ( p _ 180494 _ 1 _ ) ) 
 { 
 Chunk chunk = this . func _ 175726 _ f ( p _ 180494 _ 1 _ ) ; 
 - @ @ - 201 , 7 + 218 , 7 @ @ 
 + @ @ - 201 , 7 + 220 , 7 @ @ 
 
 public boolean func _ 175623 _ d ( BlockPos p _ 175623 _ 1 _ ) 
 { 
 @ @ - 54 , 7 + 59 , 7 @ @ 
 } 
 
 public boolean func _ 175667 _ e ( BlockPos p _ 175667 _ 1 _ ) 
 - @ @ - 298 , 23 + 315 , 49 @ @ 
 + @ @ - 298 , 23 + 317 , 49 @ @ 
 { 
 Chunk chunk = this . func _ 175726 _ f ( p _ 180501 _ 1 _ ) ; 
 Block block = p _ 180501 _ 2 _ . func _ 177230 _ c ( ) ; 
 @ @ - 106 , 7 + 111 , 7 @ @ 
 this . func _ 184138 _ a ( p _ 180501 _ 1 _ , iblockstate , p _ 180501 _ 2 _ , p _ 180501 _ 3 _ ) ; 
 } 
 
 - @ @ - 324 , 11 + 367 , 9 @ @ 
 + @ @ - 324 , 11 + 369 , 9 @ @ 
 
 if ( p _ 180501 _ 2 _ . func _ 185912 _ n ( ) ) 
 { 
 @ @ - 119 , 7 + 124 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 343 , 7 + 384 , 7 @ @ 
 + @ @ - 343 , 7 + 386 , 7 @ @ 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175655 _ 1 _ ) ; 
 Block block = iblockstate . func _ 177230 _ c ( ) ; 
 
 @ @ - 128 , 7 + 133 , 7 @ @ 
 { 
 return false ; 
 } 
 - @ @ - 416 , 6 + 457 , 9 @ @ 
 + @ @ - 416 , 6 + 459 , 9 @ @ 
 
 public void func _ 175685 _ c ( BlockPos p _ 175685 _ 1 _ , Block p _ 175685 _ 2 _ ) 
 { 
 @ @ - 138 , 7 + 143 , 7 @ @ 
 this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177976 _ e ( ) , p _ 175685 _ 2 _ ) ; 
 this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177974 _ f ( ) , p _ 175685 _ 2 _ ) ; 
 this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177977 _ b ( ) , p _ 175685 _ 2 _ ) ; 
 - @ @ - 426 , 6 + 470 , 11 @ @ 
 + @ @ - 426 , 6 + 472 , 11 @ @ 
 
 public void func _ 175695 _ a ( BlockPos p _ 175695 _ 1 _ , Block p _ 175695 _ 2 _ , EnumFacing p _ 175695 _ 3 _ ) 
 { 
 @ @ - 150 , 7 + 155 , 7 @ @ 
 if ( p _ 175695 _ 3 _ ! = EnumFacing . WEST ) 
 { 
 this . func _ 180496 _ d ( p _ 175695 _ 1 _ . func _ 177976 _ e ( ) , p _ 175695 _ 2 _ ) ; 
 - @ @ - 521 , 7 + 570 , 7 @ @ 
 + @ @ - 521 , 7 + 572 , 7 @ @ 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( blockpos ) ; 
 
 @ @ - 159 , 7 + 164 , 7 @ @ 
 { 
 return false ; 
 } 
 - @ @ - 795 , 7 + 844 , 7 @ @ 
 + @ @ - 795 , 7 + 846 , 7 @ @ 
 
 public boolean func _ 72935 _ r ( ) 
 { 
 @ @ - 168 , 7 + 173 , 7 @ @ 
 } 
 
 @ Nullable 
 - @ @ - 998 , 6 + 1047 , 13 @ @ 
 + @ @ - 998 , 6 + 1049 , 13 @ @ 
 
 public void func _ 184148 _ a ( @ Nullable EntityPlayer p _ 184148 _ 1 _ , double p _ 184148 _ 2 _ , double p _ 184148 _ 4 _ , double p _ 184148 _ 6 _ , SoundEvent p _ 184148 _ 8 _ , SoundCategory p _ 184148 _ 9 _ , float p _ 184148 _ 10 _ , float p _ 184148 _ 11 _ ) 
 { 
 @ @ - 182 , 7 + 187 , 7 @ @ 
 for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) 
 { 
 ( ( IWorldEventListener ) this . field _ 73021 _ x . get ( i ) ) . func _ 184375 _ a ( p _ 184148 _ 1 _ , p _ 184148 _ 8 _ , p _ 184148 _ 9 _ , p _ 184148 _ 2 _ , p _ 184148 _ 4 _ , p _ 184148 _ 6 _ , p _ 184148 _ 10 _ , p _ 184148 _ 11 _ ) ; 
 - @ @ - 1043 , 6 + 1099 , 9 @ @ 
 + @ @ - 1043 , 6 + 1101 , 9 @ @ 
 
 public boolean func _ 72838 _ d ( Entity p _ 72838 _ 1 _ ) 
 { 
 @ @ - 192 , 7 + 197 , 7 @ @ 
 int i = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70165 _ t / 16 . 0D ) ; 
 int j = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70161 _ v / 16 . 0D ) ; 
 boolean flag = p _ 72838 _ 1 _ . field _ 98038 _ p ; 
 - @ @ - 1065 , 6 + 1124 , 8 @ @ 
 + @ @ - 1065 , 6 + 1126 , 8 @ @ 
 this . func _ 72854 _ c ( ) ; 
 } 
 
 @ @ - 201 , 7 + 206 , 7 @ @ 
 this . func _ 72964 _ e ( i , j ) . func _ 76612 _ a ( p _ 72838 _ 1 _ ) ; 
 this . field _ 72996 _ f . add ( p _ 72838 _ 1 _ ) ; 
 this . func _ 72923 _ a ( p _ 72838 _ 1 _ ) ; 
 - @ @ - 1296 , 7 + 1357 , 6 @ @ 
 + @ @ - 1296 , 7 + 1359 , 6 @ @ 
 return list ; 
 } 
 
 @ @ - 209 , 7 + 214 , 7 @ @ 
 public void func _ 72848 _ b ( IWorldEventListener p _ 72848 _ 1 _ ) 
 { 
 this . field _ 73021 _ x . remove ( p _ 72848 _ 1 _ ) ; 
 - @ @ - 1359 , 19 + 1419 , 38 @ @ 
 + @ @ - 1359 , 19 + 1421 , 38 @ @ 
 
 public int func _ 72967 _ a ( float p _ 72967 _ 1 _ ) 
 { 
 @ @ - 250 , 7 + 255 , 7 @ @ 
 float f = this . func _ 72826 _ c ( p _ 72971 _ 1 _ ) ; 
 float f1 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f * ( ( float ) Math . PI * 2F ) ) * 2 . 0F + 0 . 2F ) ; 
 f1 = MathHelper . func _ 76131 _ a ( f1 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1384 , 6 + 1463 , 12 @ @ 
 + @ @ - 1384 , 6 + 1465 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public Vec3d func _ 72833 _ a ( Entity p _ 72833 _ 1 _ , float p _ 72833 _ 2 _ ) 
 { 
 @ @ - 263 , 7 + 268 , 7 @ @ 
 float f = this . func _ 72826 _ c ( p _ 72833 _ 2 _ ) ; 
 float f1 = MathHelper . func _ 76134 _ b ( f * ( ( float ) Math . PI * 2F ) ) * 2 . 0F + 0 . 5F ; 
 f1 = MathHelper . func _ 76131 _ a ( f1 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1391 , 9 + 1476 , 7 @ @ 
 + @ @ - 1391 , 9 + 1478 , 7 @ @ 
 int j = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70163 _ u ) ; 
 int k = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70161 _ v ) ; 
 BlockPos blockpos = new BlockPos ( i , j , k ) ; 
 @ @ - 274 , 7 + 279 , 7 @ @ 
 float f3 = ( float ) ( l > > 16 & 255 ) / 255 . 0F ; 
 float f4 = ( float ) ( l > > 8 & 255 ) / 255 . 0F ; 
 float f5 = ( float ) ( l & 255 ) / 255 . 0F ; 
 - @ @ - 1453 , 6 + 1536 , 11 @ @ 
 + @ @ - 1453 , 6 + 1538 , 11 @ @ 
 
 public float func _ 130001 _ d ( ) 
 { 
 @ @ - 286 , 7 + 291 , 7 @ @ 
 return WorldProvider . field _ 111203 _ a [ this . field _ 73011 _ w . func _ 76559 _ b ( this . field _ 72986 _ A . func _ 76073 _ f ( ) ) ] ; 
 } 
 
 - @ @ - 1465 , 6 + 1553 , 12 @ @ 
 + @ @ - 1465 , 6 + 1555 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public Vec3d func _ 72824 _ f ( float p _ 72824 _ 1 _ ) 
 { 
 @ @ - 299 , 7 + 304 , 7 @ @ 
 float f = this . func _ 72826 _ c ( p _ 72824 _ 1 _ ) ; 
 float f1 = MathHelper . func _ 76134 _ b ( f * ( ( float ) Math . PI * 2F ) ) * 2 . 0F + 0 . 5F ; 
 f1 = MathHelper . func _ 76131 _ a ( f1 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1520 , 9 + 1614 , 9 @ @ 
 + @ @ - 1520 , 9 + 1616 , 9 @ @ 
 for ( blockpos = new BlockPos ( p _ 175672 _ 1 _ . func _ 177958 _ n ( ) , chunk . func _ 76625 _ h ( ) + 16 , p _ 175672 _ 1 _ . func _ 177952 _ p ( ) ) ; blockpos . func _ 177956 _ o ( ) > = 0 ; blockpos = blockpos1 ) 
 { 
 blockpos1 = blockpos . func _ 177977 _ b ( ) ; 
 @ @ - 311 , 7 + 316 , 7 @ @ 
 { 
 break ; 
 } 
 - @ @ - 1534 , 6 + 1628 , 12 @ @ 
 + @ @ - 1534 , 6 + 1630 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public float func _ 72880 _ h ( float p _ 72880 _ 1 _ ) 
 { 
 @ @ - 324 , 7 + 329 , 7 @ @ 
 float f = this . func _ 72826 _ c ( p _ 72880 _ 1 _ ) ; 
 float f1 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f * ( ( float ) Math . PI * 2F ) ) * 2 . 0F + 0 . 25F ) ; 
 f1 = MathHelper . func _ 76131 _ a ( f1 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1585 , 6 + 1685 , 12 @ @ 
 + @ @ - 1585 , 6 + 1687 , 12 @ @ 
 entity . func _ 85029 _ a ( crashreportcategory ) ; 
 } 
 
 @ @ - 337 , 7 + 342 , 7 @ @ 
 throw new ReportedException ( crashreport ) ; 
 } 
 
 - @ @ - 1646 , 6 + 1752 , 12 @ @ 
 + @ @ - 1646 , 6 + 1754 , 12 @ @ 
 CrashReport crashreport1 = CrashReport . func _ 85055 _ a ( throwable1 , " Ticking entity " ) ; 
 CrashReportCategory crashreportcategory1 = crashreport1 . func _ 85058 _ a ( " Entity being ticked " ) ; 
 entity2 . func _ 85029 _ a ( crashreportcategory1 ) ; 
 @ @ - 350 , 7 + 355 , 7 @ @ 
 throw new ReportedException ( crashreport1 ) ; 
 } 
 } 
 - @ @ - 1682 , 7 + 1794 , 7 @ @ 
 + @ @ - 1682 , 7 + 1796 , 7 @ @ 
 { 
 BlockPos blockpos = tileentity . func _ 174877 _ v ( ) ; 
 
 @ @ - 359 , 7 + 364 , 7 @ @ 
 { 
 try 
 { 
 - @ @ - 1695 , 6 + 1807 , 13 @ @ 
 + @ @ - 1695 , 6 + 1809 , 13 @ @ 
 CrashReport crashreport2 = CrashReport . func _ 85055 _ a ( throwable , " Ticking block entity " ) ; 
 CrashReportCategory crashreportcategory2 = crashreport2 . func _ 85058 _ a ( " Block entity being ticked " ) ; 
 tileentity . func _ 145828 _ a ( crashreportcategory2 ) ; 
 @ @ - 373 , 7 + 378 , 7 @ @ 
 throw new ReportedException ( crashreport2 ) ; 
 } 
 } 
 - @ @ - 1707 , 20 + 1826 , 28 @ @ 
 + @ @ - 1707 , 20 + 1828 , 28 @ @ 
 
 if ( this . func _ 175667 _ e ( tileentity . func _ 174877 _ v ( ) ) ) 
 { 
 @ @ - 405 , 7 + 410 , 7 @ @ 
 this . field _ 72984 _ F . func _ 76318 _ c ( " pendingBlockEntities " ) ; 
 
 if ( ! this . field _ 147484 _ a . isEmpty ( ) ) 
 - @ @ - 1759 , 8 + 1886 , 12 @ @ 
 + @ @ - 1759 , 8 + 1888 , 12 @ @ 
 
 public boolean func _ 175700 _ a ( TileEntity p _ 175700 _ 1 _ ) 
 { 
 @ @ - 419 , 7 + 424 , 7 @ @ 
 if ( flag & & p _ 175700 _ 1 _ instanceof ITickable ) 
 { 
 this . field _ 175730 _ i . add ( p _ 175700 _ 1 _ ) ; 
 - @ @ - 1780 , 6 + 1911 , 11 @ @ 
 + @ @ - 1780 , 6 + 1913 , 11 @ @ 
 { 
 if ( this . field _ 147481 _ N ) 
 { 
 @ @ - 431 , 7 + 436 , 7 @ @ 
 this . field _ 147484 _ a . addAll ( p _ 147448 _ 1 _ ) ; 
 } 
 else 
 - @ @ - 1800 , 9 + 1936 , 12 @ @ 
 + @ @ - 1800 , 9 + 1938 , 12 @ @ 
 { 
 int i = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70165 _ t ) ; 
 int j = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70161 _ v ) ; 
 @ @ - 446 , 7 + 451 , 7 @ @ 
 { 
 p _ 72866 _ 1 _ . field _ 70142 _ S = p _ 72866 _ 1 _ . field _ 70165 _ t ; 
 p _ 72866 _ 1 _ . field _ 70137 _ T = p _ 72866 _ 1 _ . field _ 70163 _ u ; 
 - @ @ - 2001 , 6 + 2140 , 10 @ @ 
 + @ @ - 2001 , 6 + 2142 , 10 @ @ 
 blockpos $ pooledmutableblockpos . func _ 185344 _ t ( ) ; 
 return true ; 
 } 
 @ @ - 457 , 7 + 462 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 2040 , 6 + 2183 , 16 @ @ 
 + @ @ - 2040 , 6 + 2185 , 16 @ @ 
 IBlockState iblockstate = this . func _ 180495 _ p ( blockpos $ pooledmutableblockpos ) ; 
 Block block = iblockstate . func _ 177230 _ c ( ) ; 
 
 @ @ - 474 , 7 + 479 , 7 @ @ 
 if ( iblockstate . func _ 185904 _ a ( ) = = p _ 72918 _ 2 _ ) 
 { 
 double d0 = ( double ) ( ( float ) ( l1 + 1 ) - BlockLiquid . func _ 149801 _ b ( ( ( Integer ) iblockstate . func _ 177229 _ b ( BlockLiquid . field _ 176367 _ b ) ) . intValue ( ) ) ) ; 
 - @ @ - 2116 , 6 + 2269 , 9 @ @ 
 + @ @ - 2116 , 6 + 2271 , 9 @ @ 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( blockpos $ pooledmutableblockpos . func _ 181079 _ c ( k1 , l1 , i2 ) ) ; 
 
 @ @ - 484 , 7 + 489 , 7 @ @ 
 if ( iblockstate . func _ 185904 _ a ( ) = = p _ 72830 _ 2 _ ) 
 { 
 int j2 = ( ( Integer ) iblockstate . func _ 177229 _ b ( BlockLiquid . field _ 176367 _ b ) ) . intValue ( ) ; 
 - @ @ - 2148 , 6 + 2304 , 7 @ @ 
 + @ @ - 2148 , 6 + 2306 , 7 @ @ 
 public Explosion func _ 72885 _ a ( @ Nullable Entity p _ 72885 _ 1 _ , double p _ 72885 _ 2 _ , double p _ 72885 _ 4 _ , double p _ 72885 _ 6 _ , float p _ 72885 _ 8 _ , boolean p _ 72885 _ 9 _ , boolean p _ 72885 _ 10 _ ) 
 { 
 Explosion explosion = new Explosion ( this , p _ 72885 _ 1 _ , p _ 72885 _ 2 _ , p _ 72885 _ 4 _ , p _ 72885 _ 6 _ , p _ 72885 _ 8 _ , p _ 72885 _ 9 _ , p _ 72885 _ 10 _ ) ; 
 @ @ - 492 , 7 + 497 , 7 @ @ 
 explosion . func _ 77278 _ a ( ) ; 
 explosion . func _ 77279 _ a ( true ) ; 
 return explosion ; 
 - @ @ - 2270 , 6 + 2427 , 7 @ @ 
 + @ @ - 2270 , 6 + 2429 , 7 @ @ 
 
 public void func _ 175690 _ a ( BlockPos p _ 175690 _ 1 _ , @ Nullable TileEntity p _ 175690 _ 2 _ ) 
 { 
 @ @ - 500 , 7 + 505 , 7 @ @ 
 if ( ! this . func _ 189509 _ E ( p _ 175690 _ 1 _ ) ) 
 { 
 if ( p _ 175690 _ 2 _ ! = null & & ! p _ 175690 _ 2 _ . func _ 145837 _ r ( ) ) 
 - @ @ - 2277 , 6 + 2435 , 8 @ @ 
 + @ @ - 2277 , 6 + 2437 , 8 @ @ 
 if ( this . field _ 147481 _ N ) 
 { 
 p _ 175690 _ 2 _ . func _ 174878 _ a ( p _ 175690 _ 1 _ ) ; 
 @ @ - 509 , 7 + 514 , 7 @ @ 
 Iterator < TileEntity > iterator = this . field _ 147484 _ a . iterator ( ) ; 
 
 while ( iterator . hasNext ( ) ) 
 - @ @ - 2295 , 8 + 2455 , 10 @ @ 
 + @ @ - 2295 , 8 + 2457 , 10 @ @ 
 else 
 { 
 this . func _ 175700 _ a ( p _ 175690 _ 2 _ ) ; 
 @ @ - 521 , 7 + 526 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 2309 , 6 + 2471 , 8 @ @ 
 + @ @ - 2309 , 6 + 2473 , 8 @ @ 
 { 
 tileentity . func _ 145843 _ s ( ) ; 
 this . field _ 147484 _ a . remove ( tileentity ) ; 
 @ @ - 530 , 7 + 535 , 7 @ @ 
 } 
 else 
 { 
 - @ @ - 2321 , 6 + 2485 , 7 @ @ 
 + @ @ - 2321 , 6 + 2487 , 7 @ @ 
 
 this . func _ 175726 _ f ( p _ 175713 _ 1 _ ) . func _ 177425 _ e ( p _ 175713 _ 1 _ ) ; 
 } 
 @ @ - 538 , 7 + 543 , 7 @ @ 
 } 
 
 public void func _ 147457 _ a ( TileEntity p _ 147457 _ 1 _ ) 
 - @ @ - 2347 , 7 + 2512 , 7 @ @ 
 + @ @ - 2347 , 7 + 2514 , 7 @ @ 
 if ( chunk ! = null & & ! chunk . func _ 76621 _ g ( ) ) 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175677 _ 1 _ ) ; 
 @ @ - 547 , 7 + 552 , 7 @ @ 
 } 
 else 
 { 
 - @ @ - 2370 , 6 + 2535 , 7 @ @ 
 + @ @ - 2370 , 6 + 2537 , 7 @ @ 
 { 
 this . field _ 72985 _ G = p _ 72891 _ 1 _ ; 
 this . field _ 72992 _ H = p _ 72891 _ 2 _ ; 
 @ @ - 555 , 7 + 560 , 7 @ @ 
 } 
 
 public void func _ 72835 _ b ( ) 
 - @ @ - 2379 , 6 + 2545 , 11 @ @ 
 + @ @ - 2379 , 6 + 2547 , 11 @ @ 
 
 protected void func _ 72947 _ a ( ) 
 { 
 @ @ - 567 , 7 + 572 , 7 @ @ 
 if ( this . field _ 72986 _ A . func _ 76059 _ o ( ) ) 
 { 
 this . field _ 73004 _ o = 1 . 0F ; 
 - @ @ - 2392 , 6 + 2563 , 11 @ @ 
 + @ @ - 2392 , 6 + 2565 , 11 @ @ 
 
 protected void func _ 72979 _ l ( ) 
 { 
 @ @ - 579 , 7 + 584 , 7 @ @ 
 if ( ! this . field _ 73011 _ w . func _ 177495 _ o ( ) ) 
 { 
 if ( ! this . field _ 72995 _ K ) 
 - @ @ - 2511 , 6 + 2687 , 11 @ @ 
 + @ @ - 2511 , 6 + 2689 , 11 @ @ 
 
 public boolean func _ 175670 _ e ( BlockPos p _ 175670 _ 1 _ , boolean p _ 175670 _ 2 _ ) 
 { 
 @ @ - 591 , 7 + 596 , 7 @ @ 
 Biome biome = this . func _ 180494 _ b ( p _ 175670 _ 1 _ ) ; 
 float f = biome . func _ 180626 _ a ( p _ 175670 _ 1 _ ) ; 
 
 - @ @ - 2552 , 6 + 2733 , 11 @ @ 
 + @ @ - 2552 , 6 + 2735 , 11 @ @ 
 
 public boolean func _ 175708 _ f ( BlockPos p _ 175708 _ 1 _ , boolean p _ 175708 _ 2 _ ) 
 { 
 @ @ - 603 , 7 + 608 , 7 @ @ 
 Biome biome = this . func _ 180494 _ b ( p _ 175708 _ 1 _ ) ; 
 float f = biome . func _ 180626 _ a ( p _ 175708 _ 1 _ ) ; 
 
 - @ @ - 2569 , 7 + 2755 , 7 @ @ 
 + @ @ - 2569 , 7 + 2757 , 7 @ @ 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175708 _ 1 _ ) ; 
 
 @ @ - 612 , 7 + 617 , 7 @ @ 
 { 
 return true ; 
 } 
 - @ @ - 2601 , 10 + 2787 , 11 @ @ 
 + @ @ - 2601 , 10 + 2789 , 11 @ @ 
 else 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175638 _ 1 _ ) ; 
 @ @ - 627 , 7 + 632 , 7 @ @ 
 { 
 j = 1 ; 
 } 
 - @ @ - 2703 , 7 + 2890 , 7 @ @ 
 + @ @ - 2703 , 7 + 2892 , 7 @ @ 
 int j4 = j2 + enumfacing . func _ 96559 _ d ( ) ; 
 int k4 = k2 + enumfacing . func _ 82599 _ e ( ) ; 
 blockpos $ pooledmutableblockpos . func _ 181079 _ c ( i4 , j4 , k4 ) ; 
 @ @ - 636 , 7 + 641 , 7 @ @ 
 i3 = this . func _ 175642 _ b ( p _ 180500 _ 1 _ , blockpos $ pooledmutableblockpos ) ; 
 
 if ( i3 = = l2 - l4 & & j < this . field _ 72994 _ J . length ) 
 - @ @ - 2811 , 10 + 2998 , 10 @ @ 
 + @ @ - 2811 , 10 + 3000 , 10 @ @ 
 public List < Entity > func _ 175674 _ a ( @ Nullable Entity p _ 175674 _ 1 _ , AxisAlignedBB p _ 175674 _ 2 _ , @ Nullable Predicate < ? super Entity > p _ 175674 _ 3 _ ) 
 { 
 List < Entity > list = Lists . < Entity > newArrayList ( ) ; 
 @ @ - 651 , 7 + 656 , 7 @ @ 
 
 for ( int i1 = i ; i1 < = j ; + + i1 ) 
 { 
 - @ @ - 2867 , 10 + 3054 , 10 @ @ 
 + @ @ - 2867 , 10 + 3056 , 10 @ @ 
 
 public < T extends Entity > List < T > func _ 175647 _ a ( Class < ? extends T > p _ 175647 _ 1 _ , AxisAlignedBB p _ 175647 _ 2 _ , @ Nullable Predicate < ? super T > p _ 175647 _ 3 _ ) 
 { 
 @ @ - 666 , 7 + 671 , 7 @ @ 
 List < T > list = Lists . < T > newArrayList ( ) ; 
 
 for ( int i1 = i ; i1 < j ; + + i1 ) 
 - @ @ - 2950 , 11 + 3137 , 13 @ @ 
 + @ @ - 2950 , 11 + 3139 , 13 @ @ 
 
 public void func _ 175650 _ b ( Collection < Entity > p _ 175650 _ 1 _ ) 
 { 
 @ @ - 683 , 7 + 688 , 7 @ @ 
 } 
 } 
 
 - @ @ - 2967 , 7 + 3156 , 7 @ @ 
 + @ @ - 2967 , 7 + 3158 , 7 @ @ 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175716 _ 2 _ ) ; 
 AxisAlignedBB axisalignedbb = p _ 175716 _ 3 _ ? null : p _ 175716 _ 1 _ . func _ 176223 _ P ( ) . func _ 185890 _ d ( this , p _ 175716 _ 2 _ ) ; 
 @ @ - 692 , 7 + 697 , 7 @ @ 
 } 
 
 public int func _ 181545 _ F ( ) 
 - @ @ - 3050 , 7 + 3239 , 7 @ @ 
 + @ @ - 3050 , 7 + 3241 , 7 @ @ 
 public int func _ 175651 _ c ( BlockPos p _ 175651 _ 1 _ , EnumFacing p _ 175651 _ 2 _ ) 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175651 _ 1 _ ) ; 
 @ @ - 701 , 7 + 706 , 7 @ @ 
 } 
 
 public boolean func _ 175640 _ z ( BlockPos p _ 175640 _ 1 _ ) 
 - @ @ - 3247 , 7 + 3436 , 7 @ @ 
 + @ @ - 3247 , 7 + 3438 , 7 @ @ 
 
 public long func _ 72905 _ C ( ) 
 { 
 @ @ - 710 , 7 + 715 , 7 @ @ 
 } 
 
 public long func _ 82737 _ E ( ) 
 - @ @ - 3257 , 17 + 3446 , 17 @ @ 
 + @ @ - 3257 , 17 + 3448 , 17 @ @ 
 
 public long func _ 72820 _ D ( ) 
 { 
 @ @ - 731 , 7 + 736 , 7 @ @ 
 
 if ( ! this . func _ 175723 _ af ( ) . func _ 177746 _ a ( blockpos ) ) 
 { 
 - @ @ - 3279 , 7 + 3468 , 7 @ @ 
 + @ @ - 3279 , 7 + 3470 , 7 @ @ 
 
 public void func _ 175652 _ B ( BlockPos p _ 175652 _ 1 _ ) 
 { 
 @ @ - 740 , 7 + 745 , 7 @ @ 
 } 
 
 @ SideOnly ( Side . CLIENT ) 
 - @ @ - 3299 , 12 + 3488 , 18 @ @ 
 + @ @ - 3299 , 12 + 3490 , 18 @ @ 
 
 if ( ! this . field _ 72996 _ f . contains ( p _ 72897 _ 1 _ ) ) 
 { 
 @ @ - 759 , 7 + 764 , 7 @ @ 
 return true ; 
 } 
 
 - @ @ - 3398 , 8 + 3593 , 7 @ @ 
 + @ @ - 3398 , 8 + 3595 , 7 @ @ 
 
 public boolean func _ 180502 _ D ( BlockPos p _ 180502 _ 1 _ ) 
 { 
 @ @ - 769 , 7 + 774 , 7 @ @ 
 } 
 
 @ Nullable 
 - @ @ - 3460 , 12 + 3654 , 12 @ @ 
 + @ @ - 3460 , 12 + 3656 , 12 @ @ 
 
 public int func _ 72800 _ K ( ) 
 { 
 @ @ - 784 , 7 + 789 , 7 @ @ 
 } 
 
 public Random func _ 72843 _ D ( int p _ 72843 _ 1 _ , int p _ 72843 _ 2 _ , int p _ 72843 _ 3 _ ) 
 - @ @ - 3509 , 7 + 3703 , 7 @ @ 
 + @ @ - 3509 , 7 + 3705 , 7 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public double func _ 72919 _ O ( ) 
 { 
 @ @ - 793 , 7 + 798 , 7 @ @ 
 } 
 
 public void func _ 175715 _ c ( int p _ 175715 _ 1 _ , BlockPos p _ 175715 _ 2 _ , int p _ 175715 _ 3 _ ) 
 - @ @ - 3543 , 7 + 3737 , 7 @ @ 
 + @ @ - 3543 , 7 + 3739 , 7 @ @ 
 
 public void func _ 175666 _ e ( BlockPos p _ 175666 _ 1 _ , Block p _ 175666 _ 2 _ ) 
 { 
 @ @ - 802 , 7 + 807 , 7 @ @ 
 { 
 BlockPos blockpos = p _ 175666 _ 1 _ . func _ 177972 _ a ( enumfacing ) ; 
 
 - @ @ - 3551 , 18 + 3745 , 14 @ @ 
 + @ @ - 3551 , 18 + 3747 , 14 @ @ 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( blockpos ) ; 
 
 @ @ - 825 , 7 + 830 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 3628 , 6 + 3818 , 87 @ @ 
 + @ @ - 3628 , 6 + 3820 , 112 @ @ 
 return i > = - 128 & & i < = 128 & & j > = - 128 & & j < = 128 ; 
 } 
 
 @ @ - 904 , 6 + 909 , 31 @ @ 
 + return count ; 
 + } 
 + 
 + + protected void initCapabilities ( ) 
 + + { 
 + + net . minecraftforge . common . capabilities . ICapabilityProvider parent = field _ 73011 _ w . initCapabilities ( ) ; 
 + + capabilities = net . minecraftforge . event . ForgeEventFactory . gatherCapabilities ( this , parent ) ; 
 + + net . minecraftforge . common . util . WorldCapabilityData data = ( net . minecraftforge . common . util . WorldCapabilityData ) perWorldStorage . func _ 75742 _ a ( net . minecraftforge . common . util . WorldCapabilityData . class , net . minecraftforge . common . util . WorldCapabilityData . ID ) ; 
 + + if ( data = = null ) 
 + + { 
 + + capabilityData = new net . minecraftforge . common . util . WorldCapabilityData ( capabilities ) ; 
 + + perWorldStorage . func _ 75745 _ a ( capabilityData . field _ 76190 _ i , capabilityData ) ; 
 + + } 
 + + else 
 + + { 
 + + capabilityData = data ; 
 + + capabilityData . setCapabilities ( field _ 73011 _ w , capabilities ) ; 
 + + } 
 + + } 
 + + public boolean hasCapability ( net . minecraftforge . common . capabilities . Capability < ? > capability , EnumFacing facing ) 
 + + { 
 + + return capabilities = = null ? false : capabilities . hasCapability ( capability , facing ) ; 
 + + } 
 + + public < T > T getCapability ( net . minecraftforge . common . capabilities . Capability < T > capability , EnumFacing facing ) 
 + + { 
 + + return capabilities = = null ? null : capabilities . getCapability ( capability , facing ) ; 
 + + } 
 + + 
 + protected MapStorage perWorldStorage ; / / Moved to a getter to simulate final without being final so we can load in subclasses . 
 + public MapStorage getPerWorldStorage ( ) 
 + { 
 diff - - git a / patches / minecraft / net / minecraft / world / WorldProvider . java . patch b / patches / minecraft / net / minecraft / world / WorldProvider . java . patch 
 index 1930a42 . . 77b782a 100644 
 - - - a / patches / minecraft / net / minecraft / world / WorldProvider . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / WorldProvider . java . patch 
 @ @ - 54 , 7 + 54 , 7 @ @ 
 } 
 
 @ SideOnly ( Side . CLIENT ) 
 - @ @ - 214 , 6 + 200 , 327 @ @ 
 + @ @ - 214 , 6 + 200 , 339 @ @ 
 return new WorldBorder ( ) ; 
 } 
 
 @ @ - 220 , 6 + 220 , 18 @ @ 
 + return 0 ; 
 + } 
 + 
 + + / * * 
 + + * Called from { @ link World # initCapabilities ( ) } , to gather capabilities for this world . 
 + + * It ' s safe to access world here since this is called after world is registered . 
 + + * 
 + + * On server , called directly after mapStorage and world data such as Scoreboard and VillageCollection are initialized . 
 + + * On client , called when world is constructed , just before world load event is called . 
 + + * Note that this method is always called before the world load event . 
 + + * @ return initial holder for capabilities on the world 
 + + * / 
 + + public net . minecraftforge . common . capabilities . ICapabilityProvider initCapabilities ( ) { 
 + + return null ; 
 + + } 
 + / * = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = Start Moved From World = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = * / 
 + 
 + public Biome getBiomeForCoords ( BlockPos pos ) 
 diff - - git a / patches / minecraft / net / minecraft / world / WorldServer . java . patch b / patches / minecraft / net / minecraft / world / WorldServer . java . patch 
 index 39103b4 . . cc3e323 100644 
 - - - a / patches / minecraft / net / minecraft / world / WorldServer . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / WorldServer . java . patch 
 @ @ - 43 , 7 + 43 , 15 @ @ 
 } 
 else 
 { 
 - @ @ - 215 , 6 + 224 , 10 @ @ 
 + @ @ - 156 , 6 + 165 , 7 @ @ 
 + this . func _ 175723 _ af ( ) . func _ 177750 _ a ( this . field _ 72986 _ A . func _ 176137 _ E ( ) ) ; 
 + } 
 + 
 + + this . initCapabilities ( ) ; 
 + return this ; 
 + } 
 + 
 + @ @ - 215 , 6 + 225 , 10 @ @ 
 this . field _ 175740 _ d . func _ 75528 _ a ( ) ; 
 this . field _ 72984 _ F . func _ 76318 _ c ( " portalForcer " ) ; 
 this . field _ 85177 _ Q . func _ 85189 _ a ( this . func _ 82737 _ E ( ) ) ; 
 @ @ - 54 , 7 + 62 , 7 @ @ 
 this . field _ 72984 _ F . func _ 76319 _ b ( ) ; 
 this . func _ 147488 _ Z ( ) ; 
 } 
 - @ @ - 223 , 12 + 236 , 14 @ @ 
 + @ @ - 223 , 12 + 237 , 14 @ @ 
 public Biome . SpawnListEntry func _ 175734 _ a ( EnumCreatureType p _ 175734 _ 1 _ , BlockPos p _ 175734 _ 2 _ ) 
 { 
 List < Biome . SpawnListEntry > list = this . func _ 72863 _ F ( ) . func _ 177458 _ a ( p _ 175734 _ 1 _ , p _ 175734 _ 2 _ ) ; 
 @ @ - 69 , 7 + 77 , 7 @ @ 
 return list ! = null & & ! list . isEmpty ( ) ? list . contains ( p _ 175732 _ 2 _ ) : false ; 
 } 
 
 - @ @ - 274 , 10 + 289 , 7 @ @ 
 + @ @ - 274 , 10 + 290 , 7 @ @ 
 
 private void func _ 73051 _ P ( ) 
 { 
 @ @ - 81 , 7 + 89 , 7 @ @ 
 } 
 
 public boolean func _ 73056 _ e ( ) 
 - @ @ - 370 , 7 + 382 , 7 @ @ 
 + @ @ - 370 , 7 + 383 , 7 @ @ 
 boolean flag1 = this . func _ 72911 _ I ( ) ; 
 this . field _ 72984 _ F . func _ 76320 _ a ( " pollingChunks " ) ; 
 
 @ @ - 90 , 7 + 98 , 7 @ @ 
 { 
 this . field _ 72984 _ F . func _ 76320 _ a ( " getChunk " ) ; 
 Chunk chunk = ( Chunk ) iterator . next ( ) ; 
 - @ @ - 382 , 7 + 394 , 7 @ @ 
 + @ @ - 382 , 7 + 395 , 7 @ @ 
 chunk . func _ 150804 _ b ( false ) ; 
 this . field _ 72984 _ F . func _ 76318 _ c ( " thunder " ) ; 
 
 @ @ - 99 , 7 + 107 , 7 @ @ 
 { 
 this . field _ 73005 _ l = this . field _ 73005 _ l * 3 + 1013904223 ; 
 int l = this . field _ 73005 _ l > > 2 ; 
 - @ @ - 411 , 7 + 423 , 7 @ @ 
 + @ @ - 411 , 7 + 424 , 7 @ @ 
 
 this . field _ 72984 _ F . func _ 76318 _ c ( " iceandsnow " ) ; 
 
 @ @ - 108 , 7 + 116 , 7 @ @ 
 { 
 this . field _ 73005 _ l = this . field _ 73005 _ l * 3 + 1013904223 ; 
 int j2 = this . field _ 73005 _ l > > 2 ; 
 - @ @ - 527 , 7 + 539 , 10 @ @ 
 + @ @ - 527 , 7 + 540 , 10 @ @ 
 { 
 if ( p _ 175654 _ 2 _ . func _ 149698 _ L ( ) ) 
 { 
 @ @ - 120 , 7 + 128 , 7 @ @ 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175654 _ 1 _ ) ; 
 
 - @ @ - 587 , 7 + 602 , 7 @ @ 
 + @ @ - 587 , 7 + 603 , 7 @ @ 
 
 public void func _ 72939 _ s ( ) 
 { 
 @ @ - 129 , 7 + 137 , 7 @ @ 
 { 
 if ( this . field _ 80004 _ Q + + > = 300 ) 
 { 
 - @ @ - 711 , 6 + 726 , 9 @ @ 
 + @ @ - 711 , 6 + 727 , 9 @ @ 
 { 
 NextTickListEntry nextticklistentry1 = ( NextTickListEntry ) iterator . next ( ) ; 
 iterator . remove ( ) ; 
 @ @ - 139 , 7 + 147 , 7 @ @ 
 int k = 0 ; 
 
 if ( this . func _ 175707 _ a ( nextticklistentry1 . field _ 180282 _ a . func _ 177982 _ a ( 0 , 0 , 0 ) , nextticklistentry1 . field _ 180282 _ a . func _ 177982 _ a ( 0 , 0 , 0 ) ) ) 
 - @ @ - 837 , 6 + 855 , 10 @ @ 
 + @ @ - 837 , 6 + 856 , 10 @ @ 
 
 public boolean func _ 175660 _ a ( EntityPlayer p _ 175660 _ 1 _ , BlockPos p _ 175660 _ 2 _ ) 
 { 
 @ @ - 150 , 7 + 158 , 7 @ @ 
 return ! this . field _ 73061 _ a . func _ 175579 _ a ( this , p _ 175660 _ 2 _ , p _ 175660 _ 1 _ ) & & this . func _ 175723 _ af ( ) . func _ 177746 _ a ( p _ 175660 _ 2 _ ) ; 
 } 
 
 - @ @ - 902 , 6 + 924 , 7 @ @ 
 + @ @ - 902 , 6 + 925 , 7 @ @ 
 } 
 else 
 { 
 @ @ - 158 , 7 + 166 , 7 @ @ 
 this . field _ 72987 _ B = true ; 
 BiomeProvider biomeprovider = this . field _ 73011 _ w . func _ 177499 _ m ( ) ; 
 List < Biome > list = biomeprovider . func _ 76932 _ a ( ) ; 
 - @ @ - 986 , 6 + 1009 , 7 @ @ 
 + @ @ - 986 , 6 + 1010 , 7 @ @ 
 } 
 
 chunkproviderserver . func _ 186027 _ a ( p _ 73044 _ 1 _ ) ; 
 @ @ - 166 , 7 + 174 , 7 @ @ 
 
 for ( Chunk chunk : Lists . newArrayList ( chunkproviderserver . func _ 189548 _ a ( ) ) ) 
 { 
 - @ @ - 1030 , 6 + 1054 , 7 @ @ 
 + @ @ - 1030 , 6 + 1055 , 7 @ @ 
 this . field _ 72986 _ A . func _ 176135 _ e ( this . func _ 175723 _ af ( ) . func _ 177732 _ i ( ) ) ; 
 this . field _ 73019 _ z . func _ 75755 _ a ( this . field _ 72986 _ A , this . field _ 73061 _ a . func _ 184103 _ al ( ) . func _ 72378 _ q ( ) ) ; 
 this . field _ 72988 _ C . func _ 75744 _ a ( ) ; 
 @ @ - 174 , 7 + 182 , 7 @ @ 
 } 
 
 public boolean func _ 72838 _ d ( Entity p _ 72838 _ 1 _ ) 
 - @ @ - 1041 , 7 + 1066 , 7 @ @ 
 + @ @ - 1041 , 7 + 1067 , 7 @ @ 
 { 
 for ( Entity entity : Lists . newArrayList ( p _ 175650 _ 1 _ ) ) 
 { 
 @ @ - 183 , 7 + 191 , 7 @ @ 
 { 
 this . field _ 72996 _ f . add ( entity ) ; 
 this . func _ 72923 _ a ( entity ) ; 
 - @ @ - 1122 , 7 + 1147 , 7 @ @ 
 + @ @ - 1122 , 7 + 1148 , 7 @ @ 
 { 
 if ( super . func _ 72942 _ c ( p _ 72942 _ 1 _ ) ) 
 { 
 @ @ - 192 , 7 + 200 , 7 @ @ 
 return true ; 
 } 
 else 
 - @ @ - 1144 , 6 + 1169 , 7 @ @ 
 + @ @ - 1144 , 6 + 1170 , 7 @ @ 
 public Explosion func _ 72885 _ a ( @ Nullable Entity p _ 72885 _ 1 _ , double p _ 72885 _ 2 _ , double p _ 72885 _ 4 _ , double p _ 72885 _ 6 _ , float p _ 72885 _ 8 _ , boolean p _ 72885 _ 9 _ , boolean p _ 72885 _ 10 _ ) 
 { 
 Explosion explosion = new Explosion ( this , p _ 72885 _ 1 _ , p _ 72885 _ 2 _ , p _ 72885 _ 4 _ , p _ 72885 _ 6 _ , p _ 72885 _ 8 _ , p _ 72885 _ 9 _ , p _ 72885 _ 10 _ ) ; 
 @ @ - 200 , 7 + 208 , 7 @ @ 
 explosion . func _ 77278 _ a ( ) ; 
 explosion . func _ 77279 _ a ( false ) ; 
 
 - @ @ - 1189 , 7 + 1215 , 7 @ @ 
 + @ @ - 1189 , 7 + 1216 , 7 @ @ 
 { 
 if ( this . func _ 147485 _ a ( blockeventdata ) ) 
 { 
 @ @ - 209 , 7 + 217 , 7 @ @ 
 } 
 } 
 
 - @ @ - 1215 , 27 + 1241 , 31 @ @ 
 + @ @ - 1215 , 27 + 1242 , 31 @ @ 
 
 if ( this . field _ 73003 _ n ! = this . field _ 73004 _ o ) 
 { 
 @ @ - 247 , 7 + 255 , 7 @ @ 
 } 
 } 
 
 - @ @ - 1314 , 6 + 1344 , 11 @ @ 
 + @ @ - 1314 , 6 + 1345 , 11 @ @ 
 return this . field _ 73061 _ a . func _ 152345 _ ab ( ) ; 
 } 
 
 diff - - git a / patches / minecraft / net / minecraft / world / WorldServerMulti . java . patch b / patches / minecraft / net / minecraft / world / WorldServerMulti . java . patch 
 index a5fdfe8 . . 121f7da 100644 
 - - - a / patches / minecraft / net / minecraft / world / WorldServerMulti . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / WorldServerMulti . java . patch 
 @ @ - 45 , 7 + 45 , 11 @ @ 
 } 
 else 
 { 
 - @ @ - 75 , 6 + 78 , 14 @ @ 
 + @ @ - 72 , 9 + 75 , 18 @ @ 
 + this . field _ 72982 _ D . func _ 82566 _ a ( this ) ; 
 + } 
 + 
 + + this . initCapabilities ( ) ; 
 return this ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / common / util / WorldCapabilityData . java b / src / main / java / net / minecraftforge / common / util / WorldCapabilityData . java 
 new file mode 100644 
 index 0000000 . . 8ffff90 
 - - - / dev / null 
 + + + b / src / main / java / net / minecraftforge / common / util / WorldCapabilityData . java 
 @ @ - 0 , 0 + 1 , 57 @ @ 
 + package net . minecraftforge . common . util ; 
 + 
 + import net . minecraft . nbt . NBTTagCompound ; 
 + import net . minecraft . world . WorldProvider ; 
 + import net . minecraft . world . WorldSavedData ; 
 + 
 + public class WorldCapabilityData extends WorldSavedData 
 + { 
 + public static final String ID = " capabilities " ; 
 + 
 + private INBTSerializable < NBTTagCompound > serializable ; 
 + private NBTTagCompound capNBT = null ; 
 + 
 + public WorldCapabilityData ( String name ) 
 + { 
 + super ( name ) ; 
 + } 
 + 
 + public WorldCapabilityData ( INBTSerializable < NBTTagCompound > serializable ) 
 + { 
 + super ( ID ) ; 
 + this . serializable = serializable ; 
 + } 
 + 
 + @ Override 
 + public void readFromNBT ( NBTTagCompound nbt ) 
 + { 
 + this . capNBT = nbt ; 
 + if ( serializable ! = null ) 
 + { 
 + serializable . deserializeNBT ( this . capNBT ) ; 
 + this . capNBT = null ; 
 + } 
 + } 
 + 
 + @ Override 
 + public NBTTagCompound writeToNBT ( NBTTagCompound nbt ) 
 + { 
 + return nbt = serializable . serializeNBT ( ) ; 
 + } 
 + 
 + @ Override 
 + public boolean isDirty ( ) 
 + { 
 + return true ; 
 + } 
 + 
 + public void setCapabilities ( WorldProvider provider , INBTSerializable < NBTTagCompound > capabilities ) 
 + { 
 + this . serializable = capabilities ; 
 + if ( this . capNBT ! = null ) 
 + { 
 + serializable . deserializeNBT ( this . capNBT ) ; 
 + this . capNBT = null ; 
 + } 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java b / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java 
 index 4166a1e . . fd8bfa0 100644 
 - - - a / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java 
 + + + b / src / main / java / net / minecraftforge / event / AttachCapabilitiesEvent . java 
 @ @ - 133 , 4 + 133 , 21 @ @ public class AttachCapabilitiesEvent extends Event 
 return this . stack ; 
 } 
 } 
 + 
 + / * * 
 + * A version of the parent event which is only fired for Worlds . 
 + * / 
 + public static class World extends AttachCapabilitiesEvent 
 + { 
 + private final net . minecraft . world . World world ; 
 + public World ( net . minecraft . world . World world ) 
 + { 
 + super ( world ) ; 
 + this . world = world ; 
 + } 
 + public net . minecraft . world . World getWorld ( ) 
 + { 
 + return this . world ; 
 + } 
 + } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 index aa88ccc . . 7593041 100644 
 - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 @ @ - 525 , 6 + 525 , 10 @ @ public class ForgeEventFactory 
 return gatherCapabilities ( new AttachCapabilitiesEvent . Item ( item , stack ) , parent ) ; 
 } 
 
 + public static CapabilityDispatcher gatherCapabilities ( World world , ICapabilityProvider parent ) { 
 + return gatherCapabilities ( new AttachCapabilitiesEvent . World ( world ) , parent ) ; 
 + } 
 + 
 private static CapabilityDispatcher gatherCapabilities ( AttachCapabilitiesEvent event , ICapabilityProvider parent ) 
 { 
 MinecraftForge . EVENT _ BUS . post ( event ) ; 
 diff - - git a / src / test / java / net / minecraftforge / test / WorldCapabilityRainTimerTest . java b / src / test / java / net / minecraftforge / test / WorldCapabilityRainTimerTest . java 
 new file mode 100644 
 index 0000000 . . bc1a348 
 - - - / dev / null 
 + + + b / src / test / java / net / minecraftforge / test / WorldCapabilityRainTimerTest . java 
 @ @ - 0 , 0 + 1 , 167 @ @ 
 + package net . minecraftforge . test ; 
 + 
 + import java . util . Map ; 
 + import java . util . Set ; 
 + 
 + import com . google . common . collect . Maps ; 
 + 
 + import net . minecraft . nbt . NBTBase ; 
 + import net . minecraft . nbt . NBTTagCompound ; 
 + import net . minecraft . nbt . NBTTagIntArray ; 
 + import net . minecraft . util . EnumFacing ; 
 + import net . minecraft . util . ResourceLocation ; 
 + import net . minecraft . world . storage . WorldInfo ; 
 + import net . minecraftforge . common . MinecraftForge ; 
 + import net . minecraftforge . common . capabilities . Capability ; 
 + import net . minecraftforge . common . capabilities . Capability . IStorage ; 
 + import net . minecraftforge . common . capabilities . CapabilityInject ; 
 + import net . minecraftforge . common . capabilities . CapabilityManager ; 
 + import net . minecraftforge . common . capabilities . ICapabilitySerializable ; 
 + import net . minecraftforge . event . AttachCapabilitiesEvent ; 
 + import net . minecraftforge . fml . common . Mod ; 
 + import net . minecraftforge . fml . common . Mod . EventHandler ; 
 + import net . minecraftforge . fml . common . event . FMLInitializationEvent ; 
 + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; 
 + import net . minecraftforge . fml . common . gameevent . TickEvent ; 
 + 
 + / * * Simple mod to test world capability , by adding timer logic and check for raining time . * / 
 + @ Mod ( modid = WorldCapabilityRainTimerTest . MODID , name = " World Periodic Rain Check Test " , version = " 0 . 0 . 0 " ) 
 + public class WorldCapabilityRainTimerTest { 
 + public static final String MODID = " worldperiodicrainchecktest " ; 
 + 
 + @ CapabilityInject ( IRainTimer . class ) 
 + public static final Capability < IRainTimer > TIMER _ CAP = null ; 
 + 
 + @ EventHandler 
 + public void init ( FMLInitializationEvent event ) 
 + { 
 + CapabilityManager . INSTANCE . register ( IRainTimer . class , new TimerStorage ( ) , DefaultTimer . class ) ; 
 + MinecraftForge . EVENT _ BUS . register ( new NormalEventHandler ( ) ) ; 
 + } 
 + 
 + public static class NormalEventHandler 
 + { 
 + @ SubscribeEvent 
 + public void attatchTimer ( AttachCapabilitiesEvent . World event ) 
 + { 
 + event . addCapability ( new ResourceLocation ( MODID , " rainTimer " ) , new RainTimerProvider ( ) ) ; 
 + } 
 + 
 + @ SubscribeEvent 
 + public void onTick ( TickEvent . WorldTickEvent event ) 
 + { 
 + if ( event . world . isRemote ) 
 + return ; 
 + 
 + IRainTimer timer = event . world . getCapability ( TIMER _ CAP , null ) ; 
 + 
 + if ( event . phase = = TickEvent . Phase . END ) 
 + timer . onTick ( ) ; 
 + 
 + if ( event . phase = = TickEvent . Phase . START ) 
 + { 
 + if ( ! event . world . provider . getHasNoSky ( ) & & event . world . isRaining ( ) ) 
 + { 
 + if ( timer . getDuration ( ) = = 0 ) 
 + timer . refreshTimer ( 1000 , 0 ) ; 
 + else if ( timer . isTimerReachedDuration ( ) ) 
 + event . world . provider . resetRainAndThunder ( ) ; 
 + } else 
 + timer . refreshTimer ( 0 , 0 ) ; 
 + } 
 + } 
 + } 
 + 
 + public interface IRainTimer 
 + { 
 + public int getCurrentTime ( ) ; 
 + public int getDuration ( ) ; 
 + 
 + public void refreshTimer ( int duration , int initial ) ; 
 + public void resetTimer ( ) ; 
 + public boolean isTimerReachedDuration ( ) ; 
 + 
 + public void onTick ( ) ; 
 + } 
 + 
 + public static class TimerStorage implements IStorage < IRainTimer > 
 + { 
 + @ Override 
 + public NBTBase writeNBT ( Capability < IRainTimer > capability , IRainTimer instance , EnumFacing side ) { 
 + NBTTagCompound compound = new NBTTagCompound ( ) ; 
 + compound . setInteger ( " current " , instance . getCurrentTime ( ) ) ; 
 + compound . setInteger ( " duration " , instance . getDuration ( ) ) ; 
 + return compound ; 
 + } 
 + 
 + @ Override 
 + public void readNBT ( Capability < IRainTimer > capability , IRainTimer instance , EnumFacing side , NBTBase nbt ) { 
 + NBTTagCompound data = ( NBTTagCompound ) nbt ; 
 + instance . refreshTimer ( data . getInteger ( " duration " ) , data . getInteger ( " current " ) ) ; 
 + } 
 + } 
 + 
 + public static class DefaultTimer implements IRainTimer 
 + { 
 + private int duration , current ; 
 + 
 + @ Override 
 + public int getCurrentTime ( ) { return this . current ; } 
 + @ Override 
 + public int getDuration ( ) { return this . duration ; } 
 + 
 + @ Override 
 + public void refreshTimer ( int duration , int initial ) 
 + { 
 + this . duration = duration ; 
 + this . current = initial ; 
 + } 
 + 
 + @ Override 
 + public void resetTimer ( ) 
 + { 
 + this . current = 0 ; 
 + } 
 + @ Override 
 + public boolean isTimerReachedDuration ( ) 
 + { 
 + return this . current > = this . duration ; 
 + } 
 + 
 + @ Override 
 + public void onTick ( ) 
 + { 
 + if ( this . current < this . duration ) 
 + this . current + + ; 
 + } 
 + } 
 + 
 + public static class RainTimerProvider implements ICapabilitySerializable < NBTTagCompound > 
 + { 
 + private IRainTimer timer = TIMER _ CAP . getDefaultInstance ( ) ; 
 + 
 + @ Override 
 + public boolean hasCapability ( Capability < ? > capability , EnumFacing facing ) 
 + { 
 + return capability = = TIMER _ CAP ; 
 + } 
 + 
 + @ Override 
 + public < T > T getCapability ( Capability < T > capability , EnumFacing facing ) 
 + { 
 + return capability = = TIMER _ CAP ? TIMER _ CAP . < T > cast ( this . timer ) : null ; 
 + } 
 + 
 + @ Override 
 + public NBTTagCompound serializeNBT ( ) 
 + { 
 + return ( NBTTagCompound ) TIMER _ CAP . writeNBT ( this . timer , null ) ; 
 + } 
 + 
 + @ Override 
 + public void deserializeNBT ( NBTTagCompound nbt ) 
 + { 
 + TIMER _ CAP . readNBT ( this . timer , null , nbt ) ; 
 + } 
 + } 
 + } 
 \ No newline at end of file

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch b / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch 
 new file mode 100644 
 index 0000000 . . b2ed5d2 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / block / BlockRedstoneDiode . java . patch 
 @ @ - 0 , 0 + 1 , 11 @ @ 
 + - - - . . / src - base / minecraft / net / minecraft / block / BlockRedstoneDiode . java 
 + + + + . . / src - work / minecraft / net / minecraft / block / BlockRedstoneDiode . java 
 + @ @ - 200 , 6 + 200 , 8 @ @ 
 + { 
 + EnumFacing enumfacing = ( EnumFacing ) p _ 176400 _ 3 _ . func _ 177229 _ b ( field _ 176387 _ N ) ; 
 + BlockPos blockpos1 = p _ 176400 _ 2 _ . func _ 177972 _ a ( enumfacing . func _ 176734 _ d ( ) ) ; 
 + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( p _ 176400 _ 1 _ , p _ 176400 _ 2 _ , p _ 176400 _ 1 _ . func _ 180495 _ p ( p _ 176400 _ 2 _ ) , java . util . EnumSet . of ( enumfacing . func _ 176734 _ d ( ) ) ) . isCanceled ( ) ) 
 + + return ; 
 + p _ 176400 _ 1 _ . func _ 180496 _ d ( blockpos1 , this ) ; 
 + p _ 176400 _ 1 _ . func _ 175695 _ a ( blockpos1 , this , enumfacing ) ; 
 + } 
 diff - - git a / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch b / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch 
 new file mode 100644 
 index 0000000 . . 4c1454b 
 - - - / dev / null 
 + + + b / patches / minecraft / net / minecraft / tileentity / TileEntityPiston . java . patch 
 @ @ - 0 , 0 + 1 , 22 @ @ 
 + - - - . . / src - base / minecraft / net / minecraft / tileentity / TileEntityPiston . java 
 + + + + . . / src - work / minecraft / net / minecraft / tileentity / TileEntityPiston . java 
 + @ @ - 151 , 7 + 151 , 8 @ @ 
 + if ( this . field _ 145850 _ b . func _ 180495 _ p ( this . field _ 174879 _ c ) . func _ 177230 _ c ( ) = = Blocks . field _ 180384 _ M ) 
 + { 
 + this . field _ 145850 _ b . func _ 180501 _ a ( this . field _ 174879 _ c , this . field _ 174932 _ a , 3 ) ; 
 + - this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; 
 + + if ( ! net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( field _ 145850 _ b , field _ 174879 _ c , field _ 145850 _ b . func _ 180495 _ p ( field _ 174879 _ c ) , java . util . EnumSet . noneOf ( EnumFacing . class ) ) . isCanceled ( ) ) 
 + + this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; 
 + } 
 + } 
 + } 
 + @ @ - 169 , 7 + 170 , 8 @ @ 
 + if ( this . field _ 145850 _ b . func _ 180495 _ p ( this . field _ 174879 _ c ) . func _ 177230 _ c ( ) = = Blocks . field _ 180384 _ M ) 
 + { 
 + this . field _ 145850 _ b . func _ 180501 _ a ( this . field _ 174879 _ c , this . field _ 174932 _ a , 3 ) ; 
 + - this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; 
 + + if ( ! net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( field _ 145850 _ b , field _ 174879 _ c , field _ 145850 _ b . func _ 180495 _ p ( field _ 174879 _ c ) , java . util . EnumSet . noneOf ( EnumFacing . class ) ) . isCanceled ( ) ) 
 + + this . field _ 145850 _ b . func _ 180496 _ d ( this . field _ 174879 _ c , this . field _ 174932 _ a . func _ 177230 _ c ( ) ) ; 
 + } 
 + } 
 + else 
 diff - - git a / patches / minecraft / net / minecraft / world / World . java . patch b / patches / minecraft / net / minecraft / world / World . java . patch 
 index 1da6baf . . 3d4fc0b 100644 
 - - - a / patches / minecraft / net / minecraft / world / World . java . patch 
 + + + b / patches / minecraft / net / minecraft / world / World . java . patch 
 @ @ - 162 , 7 + 162 , 29 @ @ 
 } 
 } 
 } 
 - @ @ - 782 , 7 + 832 , 7 @ @ 
 + @ @ - 408 , 6 + 458 , 9 @ @ 
 + 
 + public void func _ 175685 _ c ( BlockPos p _ 175685 _ 1 _ , Block p _ 175685 _ 2 _ ) 
 + { 
 + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( this , p _ 175685 _ 1 _ , this . func _ 180495 _ p ( p _ 175685 _ 1 _ ) , java . util . EnumSet . allOf ( EnumFacing . class ) ) . isCanceled ( ) ) 
 + + return ; 
 + + 
 + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177976 _ e ( ) , p _ 175685 _ 2 _ ) ; 
 + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177974 _ f ( ) , p _ 175685 _ 2 _ ) ; 
 + this . func _ 180496 _ d ( p _ 175685 _ 1 _ . func _ 177977 _ b ( ) , p _ 175685 _ 2 _ ) ; 
 + @ @ - 418 , 6 + 471 , 11 @ @ 
 + 
 + public void func _ 175695 _ a ( BlockPos p _ 175695 _ 1 _ , Block p _ 175695 _ 2 _ , EnumFacing p _ 175695 _ 3 _ ) 
 + { 
 + + java . util . EnumSet < EnumFacing > directions = java . util . EnumSet . allOf ( EnumFacing . class ) ; 
 + + directions . remove ( p _ 175695 _ 3 _ ) ; 
 + + if ( net . minecraftforge . event . ForgeEventFactory . onNeighborNotify ( this , p _ 175695 _ 1 _ , this . func _ 180495 _ p ( p _ 175695 _ 1 _ ) , directions ) . isCanceled ( ) ) 
 + + return ; 
 + + 
 + if ( p _ 175695 _ 3 _ ! = EnumFacing . WEST ) 
 + { 
 + this . func _ 180496 _ d ( p _ 175695 _ 1 _ . func _ 177976 _ e ( ) , p _ 175695 _ 2 _ ) ; 
 + @ @ - 782 , 7 + 840 , 7 @ @ 
 
 public boolean func _ 72935 _ r ( ) 
 { 
 @ @ - 171 , 7 + 193 , 7 @ @ 
 } 
 
 public MovingObjectPosition func _ 72933 _ a ( Vec3 p _ 72933 _ 1 _ , Vec3 p _ 72933 _ 2 _ ) 
 - @ @ - 978 , 6 + 1028 , 8 @ @ 
 + @ @ - 978 , 6 + 1036 , 8 @ @ 
 
 public void func _ 72956 _ a ( Entity p _ 72956 _ 1 _ , String p _ 72956 _ 2 _ , float p _ 72956 _ 3 _ , float p _ 72956 _ 4 _ ) 
 { 
 @ @ - 180 , 7 + 202 , 7 @ @ 
 for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) 
 { 
 ( ( IWorldAccess ) this . field _ 73021 _ x . get ( i ) ) . func _ 72704 _ a ( p _ 72956 _ 2 _ , p _ 72956 _ 1 _ . field _ 70165 _ t , p _ 72956 _ 1 _ . field _ 70163 _ u , p _ 72956 _ 1 _ . field _ 70161 _ v , p _ 72956 _ 3 _ , p _ 72956 _ 4 _ ) ; 
 - @ @ - 986 , 6 + 1038 , 8 @ @ 
 + @ @ - 986 , 6 + 1046 , 8 @ @ 
 
 public void func _ 85173 _ a ( EntityPlayer p _ 85173 _ 1 _ , String p _ 85173 _ 2 _ , float p _ 85173 _ 3 _ , float p _ 85173 _ 4 _ ) 
 { 
 @ @ - 189 , 7 + 211 , 7 @ @ 
 for ( int i = 0 ; i < this . field _ 73021 _ x . size ( ) ; + + i ) 
 { 
 ( ( IWorldAccess ) this . field _ 73021 _ x . get ( i ) ) . func _ 85102 _ a ( p _ 85173 _ 1 _ , p _ 85173 _ 2 _ , p _ 85173 _ 1 _ . field _ 70165 _ t , p _ 85173 _ 1 _ . field _ 70163 _ u , p _ 85173 _ 1 _ . field _ 70161 _ v , p _ 85173 _ 3 _ , p _ 85173 _ 4 _ ) ; 
 - @ @ - 1037 , 6 + 1091 , 9 @ @ 
 + @ @ - 1037 , 6 + 1099 , 9 @ @ 
 
 public boolean func _ 72838 _ d ( Entity p _ 72838 _ 1 _ ) 
 { 
 @ @ - 199 , 7 + 221 , 7 @ @ 
 int i = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70165 _ t / 16 . 0D ) ; 
 int j = MathHelper . func _ 76128 _ c ( p _ 72838 _ 1 _ . field _ 70161 _ v / 16 . 0D ) ; 
 boolean flag = p _ 72838 _ 1 _ . field _ 98038 _ p ; 
 - @ @ - 1059 , 6 + 1116 , 8 @ @ 
 + @ @ - 1059 , 6 + 1124 , 8 @ @ 
 this . func _ 72854 _ c ( ) ; 
 } 
 
 @ @ - 208 , 7 + 230 , 7 @ @ 
 this . func _ 72964 _ e ( i , j ) . func _ 76612 _ a ( p _ 72838 _ 1 _ ) ; 
 this . field _ 72996 _ f . add ( p _ 72838 _ 1 _ ) ; 
 this . func _ 72923 _ a ( p _ 72838 _ 1 _ ) ; 
 - @ @ - 1271 , 17 + 1330 , 29 @ @ 
 + @ @ - 1271 , 17 + 1338 , 29 @ @ 
 
 public int func _ 72967 _ a ( float p _ 72967 _ 1 _ ) 
 { 
 @ @ - 241 , 7 + 263 , 7 @ @ 
 public void func _ 72848 _ b ( IWorldAccess p _ 72848 _ 1 _ ) 
 { 
 this . field _ 73021 _ x . remove ( p _ 72848 _ 1 _ ) ; 
 - @ @ - 1290 , 6 + 1361 , 12 @ @ 
 + @ @ - 1290 , 6 + 1369 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public float func _ 72971 _ b ( float p _ 72971 _ 1 _ ) 
 { 
 @ @ - 254 , 7 + 276 , 7 @ @ 
 float f1 = this . func _ 72826 _ c ( p _ 72971 _ 1 _ ) ; 
 float f2 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 2F ) ; 
 f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1302 , 6 + 1379 , 12 @ @ 
 + @ @ - 1302 , 6 + 1387 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public Vec3 func _ 72833 _ a ( Entity p _ 72833 _ 1 _ , float p _ 72833 _ 2 _ ) 
 { 
 @ @ - 267 , 7 + 289 , 7 @ @ 
 float f1 = this . func _ 72826 _ c ( p _ 72833 _ 2 _ ) ; 
 float f2 = MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; 
 f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1309 , 9 + 1392 , 7 @ @ 
 + @ @ - 1309 , 9 + 1400 , 7 @ @ 
 int j = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70163 _ u ) ; 
 int k = MathHelper . func _ 76128 _ c ( p _ 72833 _ 1 _ . field _ 70161 _ v ) ; 
 BlockPos blockpos = new BlockPos ( i , j , k ) ; 
 @ @ - 278 , 7 + 300 , 7 @ @ 
 float f4 = ( float ) ( l > > 16 & 255 ) / 255 . 0F ; 
 float f5 = ( float ) ( l > > 8 & 255 ) / 255 . 0F ; 
 float f6 = ( float ) ( l & 255 ) / 255 . 0F ; 
 - @ @ - 1373 , 6 + 1454 , 11 @ @ 
 + @ @ - 1373 , 6 + 1462 , 11 @ @ 
 
 public float func _ 130001 _ d ( ) 
 { 
 @ @ - 290 , 7 + 312 , 7 @ @ 
 return WorldProvider . field _ 111203 _ a [ this . field _ 73011 _ w . func _ 76559 _ b ( this . field _ 72986 _ A . func _ 76073 _ f ( ) ) ] ; 
 } 
 
 - @ @ - 1385 , 6 + 1471 , 12 @ @ 
 + @ @ - 1385 , 6 + 1479 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public Vec3 func _ 72824 _ f ( float p _ 72824 _ 1 _ ) 
 { 
 @ @ - 303 , 7 + 325 , 7 @ @ 
 float f1 = this . func _ 72826 _ c ( p _ 72824 _ 1 _ ) ; 
 float f2 = MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 5F ; 
 f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1442 , 9 + 1534 , 9 @ @ 
 + @ @ - 1442 , 9 + 1542 , 9 @ @ 
 for ( blockpos1 = new BlockPos ( p _ 175672 _ 1 _ . func _ 177958 _ n ( ) , chunk . func _ 76625 _ h ( ) + 16 , p _ 175672 _ 1 _ . func _ 177952 _ p ( ) ) ; blockpos1 . func _ 177956 _ o ( ) > = 0 ; blockpos1 = blockpos2 ) 
 { 
 blockpos2 = blockpos1 . func _ 177977 _ b ( ) ; 
 @ @ - 315 , 7 + 337 , 7 @ @ 
 { 
 break ; 
 } 
 - @ @ - 1456 , 6 + 1548 , 12 @ @ 
 + @ @ - 1456 , 6 + 1556 , 12 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public float func _ 72880 _ h ( float p _ 72880 _ 1 _ ) 
 { 
 @ @ - 328 , 7 + 350 , 7 @ @ 
 float f1 = this . func _ 72826 _ c ( p _ 72880 _ 1 _ ) ; 
 float f2 = 1 . 0F - ( MathHelper . func _ 76134 _ b ( f1 * ( float ) Math . PI * 2 . 0F ) * 2 . 0F + 0 . 25F ) ; 
 f2 = MathHelper . func _ 76131 _ a ( f2 , 0 . 0F , 1 . 0F ) ; 
 - @ @ - 1500 , 7 + 1598 , 15 @ @ 
 + @ @ - 1500 , 7 + 1606 , 15 @ @ 
 entity . func _ 85029 _ a ( crashreportcategory ) ; 
 } 
 
 @ @ - 345 , 7 + 367 , 7 @ @ 
 } 
 
 if ( entity . field _ 70128 _ L ) 
 - @ @ - 1562 , 7 + 1668 , 16 @ @ 
 + @ @ - 1562 , 7 + 1676 , 16 @ @ 
 crashreport = CrashReport . func _ 85055 _ a ( throwable1 , " Ticking entity " ) ; 
 crashreportcategory = crashreport . func _ 85058 _ a ( " Entity being ticked " ) ; 
 entity . func _ 85029 _ a ( crashreportcategory ) ; 
 @ @ - 363 , 7 + 385 , 7 @ @ 
 } 
 } 
 
 - @ @ - 1609 , 7 + 1724 , 16 @ @ 
 + @ @ - 1609 , 7 + 1732 , 16 @ @ 
 CrashReport crashreport1 = CrashReport . func _ 85055 _ a ( throwable , " Ticking block entity " ) ; 
 CrashReportCategory crashreportcategory1 = crashreport1 . func _ 85058 _ a ( " Block entity being ticked " ) ; 
 tileentity . func _ 145828 _ a ( crashreportcategory1 ) ; 
 @ @ - 381 , 7 + 403 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 1628 , 6 + 1752 , 10 @ @ 
 + @ @ - 1628 , 6 + 1760 , 10 @ @ 
 
 if ( ! this . field _ 147483 _ b . isEmpty ( ) ) 
 { 
 @ @ - 392 , 7 + 414 , 7 @ @ 
 this . field _ 175730 _ i . removeAll ( this . field _ 147483 _ b ) ; 
 this . field _ 147482 _ g . removeAll ( this . field _ 147483 _ b ) ; 
 this . field _ 147483 _ b . clear ( ) ; 
 - @ @ - 1668 , 7 + 1796 , 8 @ @ 
 + @ @ - 1668 , 7 + 1804 , 8 @ @ 
 
 public boolean func _ 175700 _ a ( TileEntity p _ 175700 _ 1 _ ) 
 { 
 @ @ - 402 , 7 + 424 , 7 @ @ 
 
 if ( flag & & p _ 175700 _ 1 _ instanceof IUpdatePlayerListBox ) 
 { 
 - @ @ - 1710 , 9 + 1839 , 12 @ @ 
 + @ @ - 1710 , 9 + 1847 , 12 @ @ 
 { 
 int i = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70165 _ t ) ; 
 int j = MathHelper . func _ 76128 _ c ( p _ 72866 _ 1 _ . field _ 70161 _ v ) ; 
 @ @ - 417 , 7 + 439 , 7 @ @ 
 { 
 p _ 72866 _ 1 _ . field _ 70142 _ S = p _ 72866 _ 1 _ . field _ 70165 _ t ; 
 p _ 72866 _ 1 _ . field _ 70137 _ T = p _ 72866 _ 1 _ . field _ 70163 _ u ; 
 - @ @ - 1839 , 7 + 1971 , 7 @ @ 
 + @ @ - 1839 , 7 + 1979 , 7 @ @ 
 { 
 Block block = this . func _ 180495 _ p ( new BlockPos ( k1 , l1 , i2 ) ) . func _ 177230 _ c ( ) ; 
 
 @ @ - 426 , 7 + 448 , 7 @ @ 
 { 
 return true ; 
 } 
 - @ @ - 1901 , 6 + 2033 , 10 @ @ 
 + @ @ - 1901 , 6 + 2041 , 10 @ @ 
 { 
 return true ; 
 } 
 @ @ - 437 , 7 + 459 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 2039 , 6 + 2175 , 7 @ @ 
 + @ @ - 2039 , 6 + 2183 , 7 @ @ 
 public Explosion func _ 72885 _ a ( Entity p _ 72885 _ 1 _ , double p _ 72885 _ 2 _ , double p _ 72885 _ 4 _ , double p _ 72885 _ 6 _ , float p _ 72885 _ 8 _ , boolean p _ 72885 _ 9 _ , boolean p _ 72885 _ 10 _ ) 
 { 
 Explosion explosion = new Explosion ( this , p _ 72885 _ 1 _ , p _ 72885 _ 2 _ , p _ 72885 _ 4 _ , p _ 72885 _ 6 _ , p _ 72885 _ 8 _ , p _ 72885 _ 9 _ , p _ 72885 _ 10 _ ) ; 
 @ @ - 445 , 7 + 467 , 7 @ @ 
 explosion . func _ 77278 _ a ( ) ; 
 explosion . func _ 77279 _ a ( true ) ; 
 return explosion ; 
 - @ @ - 2185 , 19 + 2322 , 28 @ @ 
 + @ @ - 2185 , 19 + 2330 , 28 @ @ 
 else 
 { 
 this . func _ 175700 _ a ( p _ 175690 _ 2 _ ) ; 
 @ @ - 475 , 7 + 497 , 7 @ @ 
 } 
 else 
 { 
 - @ @ - 2210 , 6 + 2356 , 7 @ @ 
 + @ @ - 2210 , 6 + 2364 , 7 @ @ 
 
 this . func _ 175726 _ f ( p _ 175713 _ 1 _ ) . func _ 177425 _ e ( p _ 175713 _ 1 _ ) ; 
 } 
 @ @ - 483 , 7 + 505 , 7 @ @ 
 } 
 
 public void func _ 147457 _ a ( TileEntity p _ 147457 _ 1 _ ) 
 - @ @ - 2228 , 7 + 2375 , 7 @ @ 
 + @ @ - 2228 , 7 + 2383 , 7 @ @ 
 { 
 IBlockState iblockstate = p _ 175683 _ 0 _ . func _ 180495 _ p ( p _ 175683 _ 1 _ ) ; 
 Block block = iblockstate . func _ 177230 _ c ( ) ; 
 @ @ - 492 , 7 + 514 , 7 @ @ 
 } 
 
 public boolean func _ 175677 _ d ( BlockPos p _ 175677 _ 1 _ , boolean p _ 175677 _ 2 _ ) 
 - @ @ - 2248 , 7 + 2395 , 7 @ @ 
 + @ @ - 2248 , 7 + 2403 , 7 @ @ 
 else 
 { 
 Block block = this . func _ 180495 _ p ( p _ 175677 _ 1 _ ) . func _ 177230 _ c ( ) ; 
 @ @ - 501 , 7 + 523 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 2265 , 8 + 2412 , 7 @ @ 
 + @ @ - 2265 , 8 + 2420 , 7 @ @ 
 
 public void func _ 72891 _ a ( boolean p _ 72891 _ 1 _ , boolean p _ 72891 _ 2 _ ) 
 { 
 @ @ - 511 , 7 + 533 , 7 @ @ 
 } 
 
 public void func _ 72835 _ b ( ) 
 - @ @ - 2276 , 6 + 2422 , 11 @ @ 
 + @ @ - 2276 , 6 + 2430 , 11 @ @ 
 
 protected void func _ 72947 _ a ( ) 
 { 
 @ @ - 523 , 7 + 545 , 7 @ @ 
 if ( this . field _ 72986 _ A . func _ 76059 _ o ( ) ) 
 { 
 this . field _ 73004 _ o = 1 . 0F ; 
 - @ @ - 2289 , 6 + 2440 , 11 @ @ 
 + @ @ - 2289 , 6 + 2448 , 11 @ @ 
 
 protected void func _ 72979 _ l ( ) 
 { 
 @ @ - 535 , 7 + 557 , 7 @ @ 
 if ( ! this . field _ 73011 _ w . func _ 177495 _ o ( ) ) 
 { 
 if ( ! this . field _ 72995 _ K ) 
 - @ @ - 2383 , 6 + 2539 , 7 @ @ 
 + @ @ - 2383 , 6 + 2547 , 7 @ @ 
 { 
 this . field _ 72993 _ I . clear ( ) ; 
 this . field _ 72984 _ F . func _ 76320 _ a ( " buildList " ) ; 
 @ @ - 543 , 7 + 565 , 7 @ @ 
 int i ; 
 EntityPlayer entityplayer ; 
 int j ; 
 - @ @ - 2445 , 7 + 2602 , 7 @ @ 
 + @ @ - 2445 , 7 + 2610 , 7 @ @ 
 l + = p _ 147467 _ 1 _ ; 
 i1 + = p _ 147467 _ 2 _ ; 
 
 @ @ - 552 , 7 + 574 , 7 @ @ 
 { 
 EntityPlayer entityplayer = this . func _ 72977 _ a ( ( double ) l + 0 . 5D , ( double ) j1 + 0 . 5D , ( double ) i1 + 0 . 5D , 8 . 0D ) ; 
 
 - @ @ - 2485 , 6 + 2642 , 11 @ @ 
 + @ @ - 2485 , 6 + 2650 , 11 @ @ 
 
 public boolean func _ 175670 _ e ( BlockPos p _ 175670 _ 1 _ , boolean p _ 175670 _ 2 _ ) 
 { 
 @ @ - 564 , 7 + 586 , 7 @ @ 
 BiomeGenBase biomegenbase = this . func _ 180494 _ b ( p _ 175670 _ 1 _ ) ; 
 float f = biomegenbase . func _ 180626 _ a ( p _ 175670 _ 1 _ ) ; 
 
 - @ @ - 2526 , 6 + 2688 , 11 @ @ 
 + @ @ - 2526 , 6 + 2696 , 11 @ @ 
 
 public boolean func _ 175708 _ f ( BlockPos p _ 175708 _ 1 _ , boolean p _ 175708 _ 2 _ ) 
 { 
 @ @ - 576 , 7 + 598 , 7 @ @ 
 BiomeGenBase biomegenbase = this . func _ 180494 _ b ( p _ 175708 _ 1 _ ) ; 
 float f = biomegenbase . func _ 180626 _ a ( p _ 175708 _ 1 _ ) ; 
 
 - @ @ - 2543 , 7 + 2710 , 7 @ @ 
 + @ @ - 2543 , 7 + 2718 , 7 @ @ 
 { 
 Block block = this . func _ 180495 _ p ( p _ 175708 _ 1 _ ) . func _ 177230 _ c ( ) ; 
 
 @ @ - 585 , 7 + 607 , 7 @ @ 
 { 
 return true ; 
 } 
 - @ @ - 2575 , 10 + 2742 , 11 @ @ 
 + @ @ - 2575 , 10 + 2750 , 11 @ @ 
 else 
 { 
 Block block = this . func _ 180495 _ p ( p _ 175638 _ 1 _ ) . func _ 177230 _ c ( ) ; 
 @ @ - 600 , 7 + 622 , 7 @ @ 
 { 
 j = 1 ; 
 } 
 - @ @ - 2792 , 10 + 2960 , 10 @ @ 
 + @ @ - 2792 , 10 + 2968 , 10 @ @ 
 public List func _ 175674 _ a ( Entity p _ 175674 _ 1 _ , AxisAlignedBB p _ 175674 _ 2 _ , Predicate p _ 175674 _ 3 _ ) 
 { 
 ArrayList arraylist = Lists . newArrayList ( ) ; 
 @ @ - 615 , 7 + 637 , 7 @ @ 
 
 for ( int i1 = i ; i1 < = j ; + + i1 ) 
 { 
 - @ @ - 2854 , 10 + 3022 , 10 @ @ 
 + @ @ - 2854 , 10 + 3030 , 10 @ @ 
 
 public List func _ 175647 _ a ( Class p _ 175647 _ 1 _ , AxisAlignedBB p _ 175647 _ 2 _ , Predicate p _ 175647 _ 3 _ ) 
 { 
 @ @ - 630 , 7 + 652 , 7 @ @ 
 ArrayList arraylist = Lists . newArrayList ( ) ; 
 
 for ( int i1 = i ; i1 < = j ; + + i1 ) 
 - @ @ - 2938 , 13 + 3106 , 16 @ @ 
 + @ @ - 2938 , 13 + 3114 , 16 @ @ 
 
 public void func _ 175650 _ b ( Collection p _ 175650 _ 1 _ ) 
 { 
 @ @ - 649 , 7 + 671 , 7 @ @ 
 } 
 } 
 
 - @ @ - 2957 , 7 + 3128 , 9 @ @ 
 + @ @ - 2957 , 7 + 3136 , 9 @ @ 
 { 
 Block block1 = this . func _ 180495 _ p ( p _ 175716 _ 2 _ ) . func _ 177230 _ c ( ) ; 
 AxisAlignedBB axisalignedbb = p _ 175716 _ 3 _ ? null : p _ 175716 _ 1 _ . func _ 180640 _ a ( this , p _ 175716 _ 2 _ , p _ 175716 _ 1 _ . func _ 176223 _ P ( ) ) ; 
 @ @ - 660 , 7 + 682 , 7 @ @ 
 } 
 
 public int func _ 175627 _ a ( BlockPos p _ 175627 _ 1 _ , EnumFacing p _ 175627 _ 2 _ ) 
 - @ @ - 3032 , 7 + 3205 , 7 @ @ 
 + @ @ - 3032 , 7 + 3213 , 7 @ @ 
 { 
 IBlockState iblockstate = this . func _ 180495 _ p ( p _ 175651 _ 1 _ ) ; 
 Block block = iblockstate . func _ 177230 _ c ( ) ; 
 @ @ - 669 , 7 + 691 , 7 @ @ 
 } 
 
 public boolean func _ 175640 _ z ( BlockPos p _ 175640 _ 1 _ ) 
 - @ @ - 3160 , 7 + 3333 , 7 @ @ 
 + @ @ - 3160 , 7 + 3341 , 7 @ @ 
 
 public long func _ 72905 _ C ( ) 
 { 
 @ @ - 678 , 7 + 700 , 7 @ @ 
 } 
 
 public long func _ 82737 _ E ( ) 
 - @ @ - 3170 , 17 + 3343 , 17 @ @ 
 + @ @ - 3170 , 17 + 3351 , 17 @ @ 
 
 public long func _ 72820 _ D ( ) 
 { 
 @ @ - 699 , 7 + 721 , 7 @ @ 
 
 if ( ! this . func _ 175723 _ af ( ) . func _ 177746 _ a ( blockpos ) ) 
 { 
 - @ @ - 3192 , 7 + 3365 , 7 @ @ 
 + @ @ - 3192 , 7 + 3373 , 7 @ @ 
 
 public void func _ 175652 _ B ( BlockPos p _ 175652 _ 1 _ ) 
 { 
 @ @ - 708 , 7 + 730 , 7 @ @ 
 } 
 
 @ SideOnly ( Side . CLIENT ) 
 - @ @ - 3212 , 12 + 3385 , 18 @ @ 
 + @ @ - 3212 , 12 + 3393 , 18 @ @ 
 
 if ( ! this . field _ 72996 _ f . contains ( p _ 72897 _ 1 _ ) ) 
 { 
 @ @ - 727 , 7 + 749 , 7 @ @ 
 return true ; 
 } 
 
 - @ @ - 3307 , 8 + 3486 , 7 @ @ 
 + @ @ - 3307 , 8 + 3494 , 7 @ @ 
 
 public boolean func _ 180502 _ D ( BlockPos p _ 180502 _ 1 _ ) 
 { 
 @ @ - 737 , 7 + 759 , 7 @ @ 
 } 
 
 public MapStorage func _ 175693 _ T ( ) 
 - @ @ - 3367 , 12 + 3545 , 12 @ @ 
 + @ @ - 3367 , 12 + 3553 , 12 @ @ 
 
 public int func _ 72800 _ K ( ) 
 { 
 @ @ - 752 , 7 + 774 , 7 @ @ 
 } 
 
 public Random func _ 72843 _ D ( int p _ 72843 _ 1 _ , int p _ 72843 _ 2 _ , int p _ 72843 _ 3 _ ) 
 - @ @ - 3429 , 7 + 3607 , 7 @ @ 
 + @ @ - 3429 , 7 + 3615 , 7 @ @ 
 @ SideOnly ( Side . CLIENT ) 
 public double func _ 72919 _ O ( ) 
 { 
 @ @ - 761 , 7 + 783 , 7 @ @ 
 } 
 
 public void func _ 175715 _ c ( int p _ 175715 _ 1 _ , BlockPos p _ 175715 _ 2 _ , int p _ 175715 _ 3 _ ) 
 - @ @ - 3461 , 29 + 3639 , 21 @ @ 
 + @ @ - 3461 , 29 + 3647 , 21 @ @ 
 
 public void func _ 175666 _ e ( BlockPos p _ 175666 _ 1 _ , Block p _ 175666 _ 2 _ ) 
 { 
 @ @ - 798 , 7 + 820 , 7 @ @ 
 } 
 } 
 } 
 - @ @ - 3553 , 4 + 3723 , 82 @ @ 
 + @ @ - 3553 , 4 + 3731 , 82 @ @ 
 short short1 = 128 ; 
 return k > = - short1 & & k < = short1 & & l > = - short1 & & l < = short1 ; 
 } 
 diff - - git a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 index cefbe13 . . 0640935 100644 
 - - - a / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 + + + b / src / main / java / net / minecraftforge / event / ForgeEventFactory . java 
 @ @ - 2 , 6 + 2 , 7 @ @ package net . minecraftforge . event ; 
 
 import java . io . File ; 
 import java . util . ArrayList ; 
 + import java . util . EnumSet ; 
 import java . util . HashMap ; 
 import java . util . Iterator ; 
 import java . util . List ; 
 @ @ - 62 , 6 + 63 , 7 @ @ import net . minecraftforge . event . entity . player . PlayerUseItemEvent ; 
 import net . minecraftforge . event . entity . player . PlayerWakeUpEvent ; 
 import net . minecraftforge . event . entity . player . UseHoeEvent ; 
 import net . minecraftforge . event . world . BlockEvent ; 
 + import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; 
 import net . minecraftforge . event . world . BlockEvent . MultiPlaceEvent ; 
 import net . minecraftforge . event . world . BlockEvent . PlaceEvent ; 
 import net . minecraftforge . event . world . ExplosionEvent ; 
 @ @ - 89 , 6 + 91 , 13 @ @ public class ForgeEventFactory 
 MinecraftForge . EVENT _ BUS . post ( event ) ; 
 return event ; 
 } 
 + 
 + public static NeighborNotifyEvent onNeighborNotify ( World world , BlockPos pos , IBlockState state , EnumSet < EnumFacing > notifiedSides ) 
 + { 
 + NeighborNotifyEvent event = new NeighborNotifyEvent ( world , pos , state , notifiedSides ) ; 
 + MinecraftForge . EVENT _ BUS . post ( event ) ; 
 + return event ; 
 + } 
 
 public static boolean doPlayerHarvestCheck ( EntityPlayer player , Block block , boolean success ) 
 { 
 diff - - git a / src / main / java / net / minecraftforge / event / world / BlockEvent . java b / src / main / java / net / minecraftforge / event / world / BlockEvent . java 
 index 4315a28 . . 8e87f85 100644 
 - - - a / src / main / java / net / minecraftforge / event / world / BlockEvent . java 
 + + + b / src / main / java / net / minecraftforge / event / world / BlockEvent . java 
 @ @ - 1 , 6 + 1 , 7 @ @ 
 package net . minecraftforge . event . world ; 
 
 import java . util . ArrayList ; 
 + import java . util . EnumSet ; 
 import java . util . List ; 
 
 import net . minecraft . block . Block ; 
 @ @ - 9 , 6 + 10 , 7 @ @ import net . minecraft . enchantment . EnchantmentHelper ; 
 import net . minecraft . entity . player . EntityPlayer ; 
 import net . minecraft . item . ItemStack ; 
 import net . minecraft . util . BlockPos ; 
 + import net . minecraft . util . EnumFacing ; 
 import net . minecraft . world . World ; 
 import net . minecraftforge . common . ForgeHooks ; 
 import net . minecraftforge . common . util . BlockSnapshot ; 
 @ @ - 177 , 4 + 179 , 31 @ @ public class BlockEvent extends Event 
 return blockSnapshots ; 
 } 
 } 
 + 
 + / * * 
 + * Fired when a physics update occurs on a block . This event acts as 
 + * a way for mods to detect physics updates , in the same way a BUD switch 
 + * does . This event is only called on the server . 
 + * / 
 + @ Cancelable 
 + public static class NeighborNotifyEvent extends BlockEvent 
 + { 
 + private final EnumSet < EnumFacing > notifiedSides ; 
 + 
 + public NeighborNotifyEvent ( World world , BlockPos pos , IBlockState state , EnumSet < EnumFacing > notifiedSides ) 
 + { 
 + super ( world , pos , state ) ; 
 + this . notifiedSides = notifiedSides ; 
 + } 
 + 
 + / * * 
 + * Gets a list of directions from the base block that updates will occur upon . 
 + * 
 + * @ return list of notified directions 
 + * / 
 + public EnumSet < EnumFacing > getNotifiedSides ( ) 
 + { 
 + return notifiedSides ; 
 + } 
 + } 
 } 
 diff - - git a / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java b / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java 
 new file mode 100644 
 index 0000000 . . 9be69bf 
 - - - / dev / null 
 + + + b / src / test / java / net / minecraftforge / test / NeighborNotifyEventTest . java 
 @ @ - 0 , 0 + 1 , 30 @ @ 
 + package net . minecraftforge . test ; 
 + 
 + import net . minecraftforge . common . MinecraftForge ; 
 + import net . minecraftforge . event . world . BlockEvent . NeighborNotifyEvent ; 
 + import net . minecraftforge . fml . common . Mod ; 
 + import net . minecraftforge . fml . common . Mod . EventHandler ; 
 + import net . minecraftforge . fml . common . event . FMLInitializationEvent ; 
 + import net . minecraftforge . fml . common . eventhandler . SubscribeEvent ; 
 + 
 + @ Mod ( modid = " NeighborNotifyEventTest " , name = " NeighborNotifyEventTest " , version = " 0 . 0 . 0 " ) 
 + public class NeighborNotifyEventTest 
 + { 
 + 
 + public static final boolean ENABLE = false ; 
 + 
 + @ EventHandler 
 + public void init ( FMLInitializationEvent event ) 
 + { 
 + MinecraftForge . EVENT _ BUS . register ( this ) ; 
 + } 
 + 
 + @ SubscribeEvent 
 + public void onNeighborNotify ( NeighborNotifyEvent event ) 
 + { 
 + if ( ENABLE ) { 
 + System . out . println ( event . pos . toString ( ) ) ; 
 + event . setCanceled ( true ) ; 
 + } 
 + } 
 + }
