BLEU SCORE: 0.033864985683445356

TEST MSG: Fixup some registry tests , dummies are now persisted across syncing .
GENERATED MSG: Update mappings to 20151122 .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / registries / ForgeRegistry . java b / src / main / java / net / minecraftforge / registries / ForgeRegistry . java <nl> index b54a8d8 . . 89a5113 100644 <nl> - - - a / src / main / java / net / minecraftforge / registries / ForgeRegistry . java <nl> + + + b / src / main / java / net / minecraftforge / registries / ForgeRegistry . java <nl> @ @ - 199 , 6 + 199 , 15 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe <nl> { <nl> return getID ( this . names . get ( name ) ) ; <nl> } <nl> + private int getIDRaw ( V value ) <nl> + { <nl> + Integer ret = this . ids . inverse ( ) . get ( value ) ; <nl> + return ret = = null ? - 1 : ret . intValue ( ) ; <nl> + } <nl> + private int getIDRaw ( ResourceLocation name ) <nl> + { <nl> + return getIDRaw ( this . names . get ( name ) ) ; <nl> + } <nl> <nl> public V getValue ( int id ) <nl> { <nl> @ @ - 411 , 6 + 420 , 8 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe <nl> if ( from . superType ! = this . superType ) <nl> throw new IllegalArgumentException ( " Attempted to copy to incompatible registry : " + name + " " + from . superType + " - > " + this . superType ) ; <nl> <nl> + this . isFrozen = false ; <nl> + <nl> if ( this . clear ! = null ) <nl> this . clear . onClear ( this , stage ) ; <nl> <nl> @ @ - 421 , 14 + 432 , 11 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe <nl> * / <nl> this . aliases . clear ( ) ; <nl> from . aliases . forEach ( ( f , t ) - > this . addAlias ( f , t ) ) ; <nl> - this . dummies . clear ( ) ; <nl> - from . dummies . forEach ( dummy - > this . addDummy ( dummy ) ) ; <nl> <nl> this . ids . clear ( ) ; <nl> this . names . clear ( ) ; <nl> this . availabilityMap . clear ( 0 , this . availabilityMap . length ( ) ) ; <nl> this . defaultValue = null ; <nl> - this . isFrozen = false ; <nl> <nl> boolean errored = false ; <nl> <nl> @ @ - 443 , 6 + 451 , 10 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe <nl> } <nl> } <nl> <nl> + / / Needs to be below add so that dummies are persisted <nl> + this . dummies . clear ( ) ; <nl> + from . dummies . forEach ( dummy - > this . addDummy ( dummy ) ) ; <nl> + <nl> if ( errored ) <nl> throw new RuntimeException ( " One of more entry values did not copy to the correct id . Check log for details ! " ) ; <nl> } <nl> @ @ - 538 , 7 + 550 , 7 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe <nl> { <nl> ResourceLocation itemName = entry . getKey ( ) ; <nl> int newId = entry . getValue ( ) ; <nl> - int currId = old . getID ( itemName ) ; <nl> + int currId = old . getIDRaw ( itemName ) ; <nl> <nl> if ( currId = = - 1 ) <nl> { <nl> @ @ - 572 , 9 + 584 , 12 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe <nl> if ( DEBUG ) <nl> FMLLog . finer ( " Registry Dummy Add : % s % d - > % s " , key , id , dummy ) ; <nl> <nl> + / / It was blocked before so we need to unset the blocking map <nl> + this . availabilityMap . clear ( id ) ; <nl> + <nl> int realId = this . add ( id , dummy ) ; <nl> if ( realId ! = id ) <nl> - FMLLog . warning ( " Registered object did not get ID it asked for . Name : { } Type : { } Expected : { } Got : { } " , key , dummy . getRegistryType ( ) . getName ( ) , id , realId ) ; <nl> + FMLLog . warning ( " Registered object did not get ID it asked for . Name : % s Type : % s Expected : % s Got : % s " , key , dummy . getRegistryType ( ) . getName ( ) , id , realId ) ; <nl> this . dummies . add ( key ) ; <nl> <nl> return true ; <nl> diff - - git a / src / main / java / net / minecraftforge / registries / GameData . java b / src / main / java / net / minecraftforge / registries / GameData . java <nl> index 02f8859 . . 95cdd87 100644 <nl> - - - a / src / main / java / net / minecraftforge / registries / GameData . java <nl> + + + b / src / main / java / net / minecraftforge / registries / GameData . java <nl> @ @ - 325 , 7 + 325 , 14 @ @ public class GameData <nl> @ Override <nl> public Block createDummy ( ResourceLocation key ) <nl> { <nl> - return new Block ( Material . AIR ) . setUnlocalizedName ( " air " ) . setRegistryName ( key ) ; <nl> + return new BlockDummyAir ( ) . setUnlocalizedName ( " air " ) . setRegistryName ( key ) ; <nl> + } <nl> + private static class BlockDummyAir extends Block / / A named class so DummyBlockReplacementTest can detect if its a dummy <nl> + { <nl> + private BlockDummyAir ( ) <nl> + { <nl> + super ( Material . AIR ) ; <nl> + } <nl> } <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / registries / RegistryManager . java b / src / main / java / net / minecraftforge / registries / RegistryManager . java <nl> index 8c3c8fd . . bf1cbe1 100644 <nl> - - - a / src / main / java / net / minecraftforge / registries / RegistryManager . java <nl> + + + b / src / main / java / net / minecraftforge / registries / RegistryManager . java <nl> @ @ - 84 , 7 + 84 , 7 @ @ public class RegistryManager <nl> if ( ! overlappedTypes . isEmpty ( ) ) <nl> { <nl> Class < ? > foundType = overlappedTypes . iterator ( ) . next ( ) ; <nl> - FMLLog . severe ( " Found existing registry of type % 1s named % 2s , you cannot create a new registry ( % 3s ) with type % 4s , as % 4s has a parent of that type " , foundType , superTypes . get ( foundType ) , name , type ) ; <nl> + FMLLog . severe ( " Found existing registry of type % s named % s , you cannot create a new registry ( % s ) with type % s , as % s has a parent of that type " , foundType , superTypes . get ( foundType ) , name , type , type ) ; <nl> throw new IllegalArgumentException ( " Duplicate registry parent type found - you can only have one registry for a particular super type " ) ; <nl> } <nl> ForgeRegistry < V > reg = new ForgeRegistry < V > ( type , defaultKey , min , max , create , add , clear , this , allowOverrides , isModifiable , dummyFactory ) ; <nl> diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / DummyBlockReplacementTest . java b / src / test / java / net / minecraftforge / fml / common / registry / DummyBlockReplacementTest . java <nl> index 00add31 . . 8f338c2 100644 <nl> - - - a / src / test / java / net / minecraftforge / fml / common / registry / DummyBlockReplacementTest . java <nl> + + + b / src / test / java / net / minecraftforge / fml / common / registry / DummyBlockReplacementTest . java <nl> @ @ - 70 , 9 + 70 , 9 @ @ public class DummyBlockReplacementTest <nl> <nl> fnd = blockRegistry . getValue ( myDirt ) ; <nl> assertNotEquals ( " Did not find my block " , fnd , testDirtBlock ) ; <nl> - assertTrue ( " Found a dummy air block " , fnd . getClass ( ) . getName ( ) . endsWith ( " BlockDummyAir " ) ) ; <nl> + assertTrue ( " Did not find a dummy air block " , fnd . getClass ( ) . getName ( ) . endsWith ( " BlockDummyAir " ) ) ; <nl> final Set < ResourceLocation > dummied = RegistryManager . ACTIVE . takeSnapshot ( false ) . get ( GameData . BLOCKS ) . dummied ; <nl> - assertTrue ( " Found my block in the dummy list " , dummied . contains ( myDirt ) ) ; <nl> + assertTrue ( " Did not find my block in the dummy list " , dummied . contains ( myDirt ) ) ; <nl> <nl> GameData . revertToFrozen ( ) ; <nl> ObjectHolderRegistry . INSTANCE . applyObjectHolders ( ) ; <nl> @ @ - 80 , 6 + 80 , 7 @ @ public class DummyBlockReplacementTest <nl> assertNotEquals ( " Did not find my block " , fnd , testDirtBlock ) ; <nl> assertEquals ( " Found a default air block " , fnd , Blocks . AIR ) ; <nl> <nl> + ( ( ForgeRegistry < Block > ) RegistryManager . ACTIVE . getRegistry ( Block . class ) ) . unfreeze ( ) ; <nl> RegistryManager . ACTIVE . getRegistry ( Block . class ) . register ( testDirtBlock . setRegistryName ( myDirt ) ) ; <nl> fnd = blockRegistry . getValue ( myDirt ) ; <nl> assertEquals ( " Found my block " , fnd , testDirtBlock ) ; <nl> diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / ForgeTestRunner . java b / src / test / java / net / minecraftforge / fml / common / registry / ForgeTestRunner . java <nl> index ad5dc79 . . 81c073b 100644 <nl> - - - a / src / test / java / net / minecraftforge / fml / common / registry / ForgeTestRunner . java <nl> + + + b / src / test / java / net / minecraftforge / fml / common / registry / ForgeTestRunner . java <nl> @ @ - 76 , 6 + 76 , 7 @ @ public class ForgeTestRunner extends Runner <nl> { <nl> try <nl> { <nl> + System . setProperty ( " forge . disableVanillaGameData " , " false " ) ; <nl> innerRunnerClass . getMethod ( " run " , RunNotifier . class ) . invoke ( innerRunner , notifier ) ; <nl> } <nl> catch ( Exception e ) <nl> diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / FreezingTests . java b / src / test / java / net / minecraftforge / fml / common / registry / FreezingTests . java <nl> index 750a79e . . a9ced43 100644 <nl> - - - a / src / test / java / net / minecraftforge / fml / common / registry / FreezingTests . java <nl> + + + b / src / test / java / net / minecraftforge / fml / common / registry / FreezingTests . java <nl> @ @ - 43 , 9 + 43 , 13 @ @ public class FreezingTests <nl> { <nl> setRegistryName ( name ) ; <nl> } <nl> + @ Override <nl> + public String toString ( ) <nl> + { <nl> + return this . getRegistryName ( ) . toString ( ) ; <nl> + } <nl> } <nl> <nl> - public static IForgeRegistry < RTest > registry ; <nl> public static ResourceLocation resloc = new ResourceLocation ( " fmltest : test " ) ; <nl> <nl> @ BeforeClass <nl> @ @ - 53 , 27 + 57 , 33 @ @ public class FreezingTests <nl> { <nl> Loader . instance ( ) ; <nl> System . setProperty ( " fml . queryResult " , " confirm " ) ; <nl> + System . setProperty ( " fml . doNotBackup " , " true " ) ; <nl> System . setProperty ( " forge . disableVanillaGameData " , " true " ) ; <nl> - registry = new RegistryBuilder < RTest > ( ) . setName ( resloc ) . setType ( RTest . class ) . setIDRange ( 0 , 255 ) . create ( ) ; <nl> + <nl> + new RegistryBuilder < RTest > ( ) . setName ( resloc ) . setType ( RTest . class ) . setIDRange ( 0 , 255 ) . create ( ) ; <nl> new RegistryBuilder < Block > ( ) . setName ( GameData . BLOCKS ) . setType ( Block . class ) . setIDRange ( 0 , 255 ) . create ( ) ; <nl> new RegistryBuilder < Item > ( ) . setName ( GameData . ITEMS ) . setType ( Item . class ) . setIDRange ( 0 , 255 ) . create ( ) ; <nl> + <nl> r1 = new RTest ( " test1 " ) ; <nl> r2 = new RTest ( " test2 " ) ; <nl> r3 = new RTest ( " test3 " ) ; <nl> r4 = new RTest ( " test4 " ) ; <nl> r5 = new RTest ( " test5 " ) ; <nl> r6 = new RTest ( " test6 " ) ; <nl> + <nl> ss = Maps . newHashMap ( ) ; <nl> ss . put ( GameData . BLOCKS , new ForgeRegistry . Snapshot ( ) ) ; <nl> ss . put ( GameData . ITEMS , new ForgeRegistry . Snapshot ( ) ) ; <nl> + <nl> RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r1 ) ; <nl> RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r2 ) ; <nl> RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r3 ) ; <nl> RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r4 ) ; <nl> ss . put ( resloc , ( ( ForgeRegistry < ? > ) RegistryManager . ACTIVE . getRegistry ( RTest . class ) ) . makeSnapshot ( ) ) ; <nl> + <nl> RegistryManager . ACTIVE . clean ( ) ; <nl> RegistryManager . FROZEN . clean ( ) ; <nl> - registry = new RegistryBuilder < RTest > ( ) . setName ( resloc ) . setType ( RTest . class ) . setIDRange ( 0 , 255 ) . create ( ) ; <nl> + new RegistryBuilder < RTest > ( ) . setName ( resloc ) . setType ( RTest . class ) . setIDRange ( 0 , 255 ) . create ( ) ; <nl> new RegistryBuilder < Block > ( ) . setName ( GameData . BLOCKS ) . setType ( Block . class ) . setIDRange ( 0 , 255 ) . create ( ) ; <nl> new RegistryBuilder < Item > ( ) . setName ( GameData . ITEMS ) . setType ( Item . class ) . setIDRange ( 0 , 255 ) . create ( ) ; <nl> } <nl> @ @ - 81 , 30 + 91 , 43 @ @ public class FreezingTests <nl> @ Test <nl> public void testFreezeCycle ( ) <nl> { <nl> - RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r6 ) ; <nl> - RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r5 ) ; <nl> - RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r4 ) ; <nl> - RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r3 ) ; <nl> - ForgeRegistry < RTest > r = ( ForgeRegistry < RTest > ) RegistryManager . ACTIVE . getRegistry ( r3 . getRegistryType ( ) ) ; <nl> - int r3id = r . getID ( r3 ) ; <nl> + ResourceLocation name = new ResourceLocation ( " test3 " ) ; <nl> + ForgeRegistry < RTest > active = ( ForgeRegistry < RTest > ) RegistryManager . ACTIVE . getRegistry ( RTest . class ) ; <nl> + active . register ( r6 ) ; <nl> + active . register ( r5 ) ; <nl> + active . register ( r4 ) ; <nl> + active . register ( r3 ) ; <nl> + <nl> + int r3id = active . getID ( r3 ) ; <nl> GameData . freezeData ( ) ; <nl> - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> - GameData . injectSnapshot ( ss , false , false ) ; <nl> - assertNotEquals ( " IDs don ' t match " , r3id , r . getID ( r3 ) ) ; <nl> - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> + <nl> + / / Frozen data should be the same , as there are no replacement <nl> + ForgeRegistry < RTest > frozen = ( ForgeRegistry < RTest > ) RegistryManager . ACTIVE . getRegistry ( RTest . class ) ; <nl> + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; <nl> + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; <nl> + <nl> + / / r3 is in the snapshot , so the ID SHOULD change to whats in the snapshot . <nl> + GameData . injectSnapshot ( ss , false , true ) ; / / Unlike the old system we die on missing mappings for custom registries . So we need to tell it to continue loading as if we ' re local <nl> + assertNotEquals ( " IDs match " , r3id , active . getID ( r3 ) ) ; <nl> + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; <nl> + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; <nl> + <nl> + / / Frozen has the original ID <nl> GameData . revertToFrozen ( ) ; <nl> - assertEquals ( " IDs match " , r3id , r . getID ( r3 ) ) ; <nl> - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> + assertEquals ( " IDs don ' t match " , r3id , active . getID ( r3 ) ) ; <nl> + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; <nl> + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; <nl> + <nl> + / / Make sure we have snapshot ID again <nl> GameData . injectSnapshot ( ss , true , true ) ; <nl> - assertNotEquals ( " IDs don ' t match " , r3id , r . getID ( r3 ) ) ; <nl> - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> + assertNotEquals ( " IDs match " , r3id , active . getID ( r3 ) ) ; <nl> + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; <nl> + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; <nl> + <nl> + / / And back to the frozen ID <nl> GameData . revertToFrozen ( ) ; <nl> - assertEquals ( " IDs match " , r3id , r . getID ( r3 ) ) ; <nl> - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; <nl> + assertEquals ( " IDs don ' t match " , r3id , active . getID ( r3 ) ) ; <nl> + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; <nl> + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; <nl> } <nl> } <nl> diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / ItemBlockSubstitutionRemoveRestoreTest . java b / src / test / java / net / minecraftforge / fml / common / registry / ItemBlockSubstitutionRemoveRestoreTest . java <nl> index 03a1dff . . e1c78bf 100644 <nl> - - - a / src / test / java / net / minecraftforge / fml / common / registry / ItemBlockSubstitutionRemoveRestoreTest . java <nl> + + + b / src / test / java / net / minecraftforge / fml / common / registry / ItemBlockSubstitutionRemoveRestoreTest . java <nl> @ @ - 86 , 11 + 86 , 11 @ @ public class ItemBlockSubstitutionRemoveRestoreTest <nl> snapshot . get ( GameData . ITEMS ) . substitutions . clear ( ) ; <nl> GameData . injectSnapshot ( snapshot , false , false ) ; <nl> ObjectHolderRegistry . INSTANCE . applyObjectHolders ( ) ; <nl> - * / <nl> <nl> dirtitem = ( ItemBlock ) itemRegistry . getValue ( myDirt ) ; <nl> assertEquals ( " ItemBlock points at vanilla block " , originalDirt , dirtitem ) ; <nl> assertNotEquals ( " ItemBlock points at my block " , myDirtInstance , dirtitem ) ; <nl> + * / <nl> <nl> / / TEST 3 : Does the substitute get restored when reverting to frozen state ? The substitute should be found in the registry again <nl> GameData . revertToFrozen ( ) ; <nl> diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / VanillaRegistryTests . java b / src / test / java / net / minecraftforge / fml / common / registry / VanillaRegistryTests . java <nl> index 8f7589f . . 33787dc 100644 <nl> - - - a / src / test / java / net / minecraftforge / fml / common / registry / VanillaRegistryTests . java <nl> + + + b / src / test / java / net / minecraftforge / fml / common / registry / VanillaRegistryTests . java <nl> @ @ - 18 , 6 + 18 , 8 @ @ import org . junit . runner . RunWith ; <nl> <nl> import static org . junit . Assert . * ; <nl> <nl> + import java . lang . reflect . Field ; <nl> + <nl> / * * <nl> * Vanilla registry tests <nl> * / <nl> @ @ - 42 , 7 + 44 , 7 @ @ public class VanillaRegistryTests <nl> <nl> / / Our lookups find the same stuff vanilla sees <nl> final IForgeRegistry < Block > blocks = RegistryManager . ACTIVE . getRegistry ( Block . class ) ; <nl> - assertEquals ( " We have the right blocks for a block " , blocks , Block . REGISTRY ) ; <nl> + assertEquals ( " We have a different block registry then vanilla " , blocks , getDelegate ( Block . REGISTRY ) ) ; <nl> <nl> / / We can look up stuff through our APIs <nl> Block bl = blocks . getValue ( new ResourceLocation ( " minecraft : air " ) ) ; <nl> @ @ - 54 , 7 + 56 , 7 @ @ public class VanillaRegistryTests <nl> <nl> / / Our lookups find the same stuff vanilla sees <nl> final IForgeRegistry < Item > items = RegistryManager . ACTIVE . getRegistry ( Item . class ) ; <nl> - assertEquals ( " We have the right items for an item " , items , Item . REGISTRY ) ; <nl> + assertEquals ( " We have a different item registry then vanilla " , items , getDelegate ( Item . REGISTRY ) ) ; <nl> <nl> / / We can look up stuff through our APIs <nl> Item it = items . getValue ( new ResourceLocation ( " minecraft : bed " ) ) ; <nl> @ @ - 65 , 6 + 67 , 20 @ @ public class VanillaRegistryTests <nl> assertEquals ( " We got nothing ( items ) when we asked for cheese " , null , none ) ; <nl> } <nl> <nl> + private Object getDelegate ( Object obj ) <nl> + { <nl> + try <nl> + { <nl> + Field f = obj . getClass ( ) . getDeclaredField ( " delegate " ) ; <nl> + f . setAccessible ( true ) ; <nl> + return f . get ( obj ) ; <nl> + } <nl> + catch ( Exception e ) <nl> + { <nl> + throw new RuntimeException ( e ) ; <nl> + } <nl> + } <nl> + <nl> @ Test <nl> public void testRegistration ( ) <nl> { <nl> @ @ - 74 , 7 + 90 , 7 @ @ public class VanillaRegistryTests <nl> assertNotNull ( " Registered my block " , myBlock ) ; <nl> <nl> / / Our lookups find the same stuff vanilla sees <nl> - assertEquals ( " We have the right blocks for a block " , blocks , Block . REGISTRY ) ; <nl> + assertEquals ( " We have a different block registry then vanilla " , blocks , getDelegate ( Block . REGISTRY ) ) ; <nl> <nl> Block found = blocks . getValue ( new ResourceLocation ( " minecraft : testy " ) ) ; <nl> assertEquals ( " Registry lookup works " , myBlock , found ) ;
NEAREST DIFF (one line): diff - - git a / build . gradle b / build . gradle <nl> index f6acdc6 . . e8c7fbf 100644 <nl> - - - a / build . gradle <nl> + + + b / build . gradle <nl> @ @ - 28 , 7 + 28 , 7 @ @ apply plugin : " net . minecraftforge . gradle . launch4j " <nl> minecraft { <nl> version = " 1 . 8 . 8 " <nl> / / mappings = ' stable _ 16 ' <nl> - mappings = " snapshot _ nodoc _ 20141130 " <nl> + mappings = " snapshot _ nodoc _ 20151122 " <nl> workspaceDir = " projects " <nl> versionJson = " jsons / 1 . 8 . 8 - dev . json " <nl> buildUserdev = true <nl> diff - - git a / src / main / java / net / minecraftforge / client / ClientCommandHandler . java b / src / main / java / net / minecraftforge / client / ClientCommandHandler . java <nl> index 4978616 . . 455c764 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / ClientCommandHandler . java <nl> + + + b / src / main / java / net / minecraftforge / client / ClientCommandHandler . java <nl> @ @ - 57 , 7 + 57 , 7 @ @ public class ClientCommandHandler extends CommandHandler <nl> return 0 ; <nl> } <nl> <nl> - if ( icommand . canCommandSenderUse ( sender ) ) <nl> + if ( icommand . canCommandSenderUseCommand ( sender ) ) <nl> { <nl> CommandEvent event = new CommandEvent ( icommand , sender , args ) ; <nl> if ( MinecraftForge . EVENT _ BUS . post ( event ) ) <nl> @ @ - 69 , 7 + 69 , 7 @ @ public class ClientCommandHandler extends CommandHandler <nl> return 0 ; <nl> } <nl> <nl> - icommand . execute ( sender , args ) ; <nl> + icommand . processCommand ( sender , args ) ; <nl> return 1 ; <nl> } <nl> else <nl> diff - - git a / src / main / java / net / minecraftforge / client / GuiIngameForge . java b / src / main / java / net / minecraftforge / client / GuiIngameForge . java <nl> index 5c3adae . . a41ecdf 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / GuiIngameForge . java <nl> + + + b / src / main / java / net / minecraftforge / client / GuiIngameForge . java <nl> @ @ - 113 , 7 + 113 , 7 @ @ public class GuiIngameForge extends GuiIngame <nl> <nl> if ( Minecraft . isFancyGraphicsEnabled ( ) ) <nl> { <nl> - func _ 180480 _ a ( mc . thePlayer . getBrightness ( partialTicks ) , res ) ; <nl> + renderVignette ( mc . thePlayer . getBrightness ( partialTicks ) , res ) ; <nl> } <nl> else <nl> { <nl> @ @ - 163 , 16 + 163 , 16 @ @ public class GuiIngameForge extends GuiIngame <nl> <nl> Scoreboard scoreboard = this . mc . theWorld . getScoreboard ( ) ; <nl> ScoreObjective objective = null ; <nl> - ScorePlayerTeam scoreplayerteam = scoreboard . getPlayersTeam ( mc . thePlayer . getName ( ) ) ; <nl> + ScorePlayerTeam scoreplayerteam = scoreboard . getPlayersTeam ( mc . thePlayer . getCommandSenderName ( ) ) ; <nl> if ( scoreplayerteam ! = null ) <nl> { <nl> - int slot = scoreplayerteam . func _ 178775 _ l ( ) . getColorIndex ( ) ; <nl> + int slot = scoreplayerteam . getChatFormat ( ) . getColorIndex ( ) ; <nl> if ( slot > = 0 ) objective = scoreboard . getObjectiveInDisplaySlot ( 3 + slot ) ; <nl> } <nl> ScoreObjective scoreobjective1 = objective ! = null ? objective : scoreboard . getObjectiveInDisplaySlot ( 1 ) ; <nl> if ( renderObjective & & scoreobjective1 ! = null ) <nl> { <nl> - this . func _ 180475 _ a ( scoreobjective1 , res ) ; <nl> + this . renderScoreboard ( scoreobjective1 , res ) ; <nl> } <nl> <nl> GlStateManager . enableBlend ( ) ; <nl> @ @ - 234 , 7 + 234 , 7 @ @ public class GuiIngameForge extends GuiIngame <nl> { <nl> if ( itemstack . getItem ( ) = = Item . getItemFromBlock ( Blocks . pumpkin ) ) <nl> { <nl> - func _ 180476 _ e ( res ) ; <nl> + renderPumpkinOverlay ( res ) ; <nl> } <nl> else <nl> { <nl> @ @ - 345 , 28 + 345 , 28 @ @ public class GuiIngameForge extends GuiIngame <nl> <nl> EntityPlayer player = ( EntityPlayer ) this . mc . getRenderViewEntity ( ) ; <nl> int health = MathHelper . ceiling _ float _ int ( player . getHealth ( ) ) ; <nl> - boolean highlight = field _ 175191 _ F > ( long ) updateCounter & & ( field _ 175191 _ F - ( long ) updateCounter ) / 3L % 2L = = 1L ; <nl> + boolean highlight = healthUpdateCounter > ( long ) updateCounter & & ( healthUpdateCounter - ( long ) updateCounter ) / 3L % 2L = = 1L ; <nl> <nl> - if ( health < this . field _ 175194 _ C & & player . hurtResistantTime > 0 ) <nl> + if ( health < this . playerHealth & & player . hurtResistantTime > 0 ) <nl> { <nl> this . lastSystemTime = Minecraft . getSystemTime ( ) ; <nl> - this . field _ 175191 _ F = ( long ) ( this . updateCounter + 20 ) ; <nl> + this . healthUpdateCounter = ( long ) ( this . updateCounter + 20 ) ; <nl> } <nl> - else if ( health > this . field _ 175194 _ C & & player . hurtResistantTime > 0 ) <nl> + else if ( health > this . playerHealth & & player . hurtResistantTime > 0 ) <nl> { <nl> this . lastSystemTime = Minecraft . getSystemTime ( ) ; <nl> - this . field _ 175191 _ F = ( long ) ( this . updateCounter + 10 ) ; <nl> + this . healthUpdateCounter = ( long ) ( this . updateCounter + 10 ) ; <nl> } <nl> <nl> if ( Minecraft . getSystemTime ( ) - this . lastSystemTime > 1000L ) <nl> { <nl> - this . field _ 175194 _ C = health ; <nl> - this . field _ 175189 _ D = health ; <nl> + this . playerHealth = health ; <nl> + this . lastPlayerHealth = health ; <nl> this . lastSystemTime = Minecraft . getSystemTime ( ) ; <nl> } <nl> <nl> - this . field _ 175194 _ C = health ; <nl> - int healthLast = this . field _ 175189 _ D ; <nl> + this . playerHealth = health ; <nl> + int healthLast = this . lastPlayerHealth ; <nl> <nl> IAttributeInstance attrMaxHealth = player . getEntityAttribute ( SharedMonsterAttributes . maxHealth ) ; <nl> float healthMax = ( float ) attrMaxHealth . getAttributeValue ( ) ; <nl> @ @ - 748 , 11 + 748 , 11 @ @ public class GuiIngameForge extends GuiIngame <nl> GlStateManager . pushMatrix ( ) ; <nl> GlStateManager . scale ( 4 . 0F , 4 . 0F , 4 . 0F ) ; <nl> int l = opacity < < 24 & - 16777216 ; <nl> - this . func _ 175179 _ f ( ) . drawString ( this . field _ 175201 _ x , ( float ) ( - this . func _ 175179 _ f ( ) . getStringWidth ( this . field _ 175201 _ x ) / 2 ) , - 10 . 0F , 16777215 | l , true ) ; <nl> + this . getFontRenderer ( ) . drawString ( this . field _ 175201 _ x , ( float ) ( - this . getFontRenderer ( ) . getStringWidth ( this . field _ 175201 _ x ) / 2 ) , - 10 . 0F , 16777215 | l , true ) ; <nl> GlStateManager . popMatrix ( ) ; <nl> GlStateManager . pushMatrix ( ) ; <nl> GlStateManager . scale ( 2 . 0F , 2 . 0F , 2 . 0F ) ; <nl> - this . func _ 175179 _ f ( ) . drawString ( this . field _ 175200 _ y , ( float ) ( - this . func _ 175179 _ f ( ) . getStringWidth ( this . field _ 175200 _ y ) / 2 ) , 5 . 0F , 16777215 | l , true ) ; <nl> + this . getFontRenderer ( ) . drawString ( this . field _ 175200 _ y , ( float ) ( - this . getFontRenderer ( ) . getStringWidth ( this . field _ 175200 _ y ) / 2 ) , 5 . 0F , 16777215 | l , true ) ; <nl> GlStateManager . popMatrix ( ) ; <nl> GlStateManager . disableBlend ( ) ; <nl> GlStateManager . popMatrix ( ) ; <nl> @ @ - 784 , 16 + 784 , 16 @ @ public class GuiIngameForge extends GuiIngame <nl> ScoreObjective scoreobjective = this . mc . theWorld . getScoreboard ( ) . getObjectiveInDisplaySlot ( 0 ) ; <nl> NetHandlerPlayClient handler = mc . thePlayer . sendQueue ; <nl> <nl> - if ( mc . gameSettings . keyBindPlayerList . isKeyDown ( ) & & ( ! mc . isIntegratedServerRunning ( ) | | handler . func _ 175106 _ d ( ) . size ( ) > 1 | | scoreobjective ! = null ) ) <nl> + if ( mc . gameSettings . keyBindPlayerList . isKeyDown ( ) & & ( ! mc . isIntegratedServerRunning ( ) | | handler . getPlayerInfoMap ( ) . size ( ) > 1 | | scoreobjective ! = null ) ) <nl> { <nl> - this . overlayPlayerList . func _ 175246 _ a ( true ) ; <nl> + this . overlayPlayerList . updatePlayerList ( true ) ; <nl> if ( pre ( PLAYER _ LIST ) ) return ; <nl> - this . overlayPlayerList . func _ 175249 _ a ( width , this . mc . theWorld . getScoreboard ( ) , scoreobjective ) ; <nl> + this . overlayPlayerList . renderPlayerlist ( width , this . mc . theWorld . getScoreboard ( ) , scoreobjective ) ; <nl> post ( PLAYER _ LIST ) ; <nl> } <nl> else <nl> { <nl> - this . overlayPlayerList . func _ 175246 _ a ( false ) ; <nl> + this . overlayPlayerList . updatePlayerList ( false ) ; <nl> } <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java b / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java <nl> index b5ced65 . . 462a307 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java <nl> @ @ - 50 , 7 + 50 , 7 @ @ public class ForgeBlockStateV1 extends Marker <nl> { <nl> JsonObject json = element . getAsJsonObject ( ) ; <nl> ForgeBlockStateV1 ret = new ForgeBlockStateV1 ( ) ; <nl> - ret . forge _ marker = JsonUtils . getJsonObjectIntegerFieldValue ( json , " forge _ marker " ) ; <nl> + ret . forge _ marker = JsonUtils . getInt ( json , " forge _ marker " ) ; <nl> <nl> if ( json . has ( " defaults " ) ) / / Load defaults Variant . <nl> { <nl> @ @ - 146 , 13 + 146 , 13 @ @ public class ForgeBlockStateV1 extends Marker <nl> part . state = state ; <nl> } <nl> } <nl> - <nl> + <nl> Iterator < List < Variant > > iter = v . submodels . values ( ) . iterator ( ) ; <nl> - <nl> + <nl> while ( iter . hasNext ( ) ) <nl> { <nl> List < Variant > submodel = iter . next ( ) ; <nl> - <nl> + <nl> if ( submodel = = null ) <nl> iter . remove ( ) ; <nl> } <nl> @ @ - 430 , 7 + 430 , 7 @ @ public class ForgeBlockStateV1 extends Marker <nl> if ( json . get ( " model " ) . isJsonNull ( ) ) <nl> ret . model = null ; / / Allow overriding base model to remove it from a state . <nl> else <nl> - ret . model = getBlockLocation ( JsonUtils . getJsonObjectStringFieldValue ( json , " model " ) ) ; <nl> + ret . model = getBlockLocation ( JsonUtils . getString ( json , " model " ) ) ; <nl> ret . modelSet = true ; <nl> } <nl> <nl> @ @ - 447 , 8 + 447 , 8 @ @ public class ForgeBlockStateV1 extends Marker <nl> <nl> if ( json . has ( " x " ) | | json . has ( " y " ) ) <nl> { / / Load rotation values . <nl> - int x = JsonUtils . getJsonObjectIntegerFieldValueOrDefault ( json , " x " , 0 ) ; <nl> - int y = JsonUtils . getJsonObjectIntegerFieldValueOrDefault ( json , " y " , 0 ) ; <nl> + int x = JsonUtils . getInt ( json , " x " , 0 ) ; <nl> + int y = JsonUtils . getInt ( json , " y " , 0 ) ; <nl> ret . state = Optional . < IModelState > of ( new TRSRTransformation ( ModelRotation . getModelRotation ( x , y ) ) ) ; <nl> if ( ! ret . state . isPresent ( ) ) <nl> throw new JsonParseException ( " Invalid BlockModelRotation x : " + x + " y : " + y ) ; <nl> @ @ - 589 , 12 + 589 , 12 @ @ public class ForgeBlockStateV1 extends Marker <nl> <nl> if ( json . has ( " uvlock " ) ) <nl> { / / Load uvlock . <nl> - ret . uvLock = Optional . of ( JsonUtils . getJsonObjectBooleanFieldValue ( json , " uvlock " ) ) ; <nl> + ret . uvLock = Optional . of ( JsonUtils . getBoolean ( json , " uvlock " ) ) ; <nl> } <nl> <nl> if ( json . has ( " weight " ) ) <nl> { / / Load weight . <nl> - ret . weight = Optional . of ( JsonUtils . getJsonObjectIntegerFieldValue ( json , " weight " ) ) ; <nl> + ret . weight = Optional . of ( JsonUtils . getInt ( json , " weight " ) ) ; <nl> } <nl> <nl> if ( json . has ( " submodel " ) ) <nl> diff - - git a / src / main / java / net / minecraftforge / common / ChestGenHooks . java b / src / main / java / net / minecraftforge / common / ChestGenHooks . java <nl> index 55fd8e0 . . 61c0244 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / ChestGenHooks . java <nl> + + + b / src / main / java / net / minecraftforge / common / ChestGenHooks . java <nl> @ @ - 234 , 7 + 234 , 7 @ @ public class ChestGenHooks <nl> public ItemStack getOneItem ( Random rand ) <nl> { <nl> WeightedRandomChestContent item = ( WeightedRandomChestContent ) WeightedRandom . getRandomItem ( rand , getItems ( rand ) ) ; <nl> - ItemStack [ ] stacks = ChestGenHooks . generateStacks ( rand , item . theItemId , item . theMinimumChanceToGenerateItem , item . theMaximumChanceToGenerateItem ) ; <nl> + ItemStack [ ] stacks = ChestGenHooks . generateStacks ( rand , item . theItemId , item . minStackSize , item . maxStackSize ) ; <nl> return ( stacks . length > 0 ? stacks [ 0 ] : null ) ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / common / ForgeHooks . java b / src / main / java / net / minecraftforge / common / ForgeHooks . java <nl> index 429a859 . . aab0aca 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / ForgeHooks . java <nl> + + + b / src / main / java / net / minecraftforge / common / ForgeHooks . java <nl> @ @ - 670 , 7 + 670 , 7 @ @ public class ForgeHooks <nl> if ( world . getTileEntity ( pos ) = = null ) <nl> { <nl> S23PacketBlockChange packet = new S23PacketBlockChange ( world , pos ) ; <nl> - packet . field _ 148883 _ d = Blocks . air . getDefaultState ( ) ; <nl> + packet . blockState = Blocks . air . getDefaultState ( ) ; <nl> entityPlayer . playerNetServerHandler . sendPacket ( packet ) ; <nl> } <nl> <nl> diff - - git a / src / main / java / net / minecraftforge / common / util / FakePlayer . java b / src / main / java / net / minecraftforge / common / util / FakePlayer . java <nl> index 2607377 . . 3cbb21e 100644 <nl> - - - a / src / main / java / net / minecraftforge / common / util / FakePlayer . java <nl> + + + b / src / main / java / net / minecraftforge / common / util / FakePlayer . java <nl> @ @ - 23 , 7 + 23 , 7 @ @ public class FakePlayer extends EntityPlayerMP <nl> } <nl> <nl> @ Override public Vec3 getPositionVector ( ) { return new Vec3 ( 0 , 0 , 0 ) ; } <nl> - @ Override public boolean canUseCommand ( int i , String s ) { return false ; } <nl> + @ Override public boolean canCommandSenderUseCommand ( int i , String s ) { return false ; } <nl> @ Override public void addChatComponentMessage ( IChatComponent chatmessagecomponent ) { } <nl> @ Override public void addStat ( StatBase par1StatBase , int par2 ) { } <nl> @ Override public void openGui ( Object mod , int modGuiId , World world , int x , int y , int z ) { } <nl> diff - - git a / src / main / java / net / minecraftforge / event / world / ExplosionEvent . java b / src / main / java / net / minecraftforge / event / world / ExplosionEvent . java <nl> index fc14d7d . . 167c097 100644 <nl> - - - a / src / main / java / net / minecraftforge / event / world / ExplosionEvent . java <nl> + + + b / src / main / java / net / minecraftforge / event / world / ExplosionEvent . java <nl> @ @ - 64 , 7 + 64 , 7 @ @ public class ExplosionEvent extends Event <nl> / * * return the list of blocks affected by the explosion . * / <nl> public List < BlockPos > getAffectedBlocks ( ) <nl> { <nl> - return explosion . func _ 180343 _ e ( ) ; <nl> + return explosion . getAffectedBlockPositions ( ) ; <nl> } <nl> <nl> / * * return the list of entities affected by the explosion . * / <nl> diff - - git a / src / main / java / net / minecraftforge / fml / client / GuiModList . java b / src / main / java / net / minecraftforge / fml / client / GuiModList . java <nl> index 8cb8efc . . 2792b7b 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / client / GuiModList . java <nl> + + + b / src / main / java / net / minecraftforge / fml / client / GuiModList . java <nl> @ @ - 579 , 7 + 579 , 7 @ @ public class GuiModList extends GuiScreen <nl> k + = GuiModList . this . fontRendererObj . getStringWidth ( ( ( ChatComponentText ) part ) . getChatComponentText _ TextValue ( ) ) ; <nl> if ( k > = x ) <nl> { <nl> - GuiModList . this . func _ 175276 _ a ( part ) ; <nl> + GuiModList . this . handleComponentClick ( part ) ; <nl> break ; <nl> } <nl> } <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / network / internal / FMLNetworkHandler . java b / src / main / java / net / minecraftforge / fml / common / network / internal / FMLNetworkHandler . java <nl> index 657bb22 . . 2851281 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / network / internal / FMLNetworkHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / network / internal / FMLNetworkHandler . java <nl> @ @ - 90 , 7 + 90 , 7 @ @ public class FMLNetworkHandler <nl> embeddedChannel . writeOutbound ( openGui ) ; <nl> entityPlayerMP . openContainer = remoteGuiContainer ; <nl> entityPlayerMP . openContainer . windowId = windowId ; <nl> - entityPlayerMP . openContainer . addCraftingToCrafters ( entityPlayerMP ) ; <nl> + entityPlayerMP . openContainer . onCraftGuiOpened ( entityPlayerMP ) ; <nl> } <nl> } <nl> else if ( entityPlayer instanceof FakePlayer ) <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> index 81a3c91 . . da5139d 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java <nl> @ @ - 456 , 7 + 456 , 7 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul <nl> <nl> for ( I thing : this . typeSafeIterable ( ) ) <nl> { <nl> - if ( ! registry . field _ 148758 _ b . containsKey ( thing ) ) <nl> + if ( ! registry . inverseObjectRegistry . containsKey ( thing ) ) <nl> { <nl> if ( ! registry . activeSubstitutions . containsKey ( getNameForObject ( thing ) . toString ( ) ) ) <nl> { <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / GameRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / GameRegistry . java <nl> index f222b1b . . 8116b20 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / GameRegistry . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / GameRegistry . java <nl> @ @ - 506 , 7 + 506 , 7 @ @ public class GameRegistry <nl> NBTBase nbttag = null ; <nl> try <nl> { <nl> - nbttag = JsonToNBT . func _ 180713 _ a ( nbtString ) ; <nl> + nbttag = JsonToNBT . getTagFromJson ( nbtString ) ; <nl> } catch ( NBTException e ) <nl> { <nl> FMLLog . getLogger ( ) . log ( Level . WARN , " Encountered an exception parsing ItemStack NBT string { } " , nbtString , e ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java b / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java <nl> index be2f2d6 . . 252e94d 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java <nl> @ @ - 180 , 7 + 180 , 7 @ @ public class FMLServerHandler implements IFMLSidedHandler <nl> { <nl> for ( Iterator < ServerCommand > it = GenericIterableFactory . newCastingIterable ( dedServer . pendingCommandList , ServerCommand . class ) . iterator ( ) ; it . hasNext ( ) ; ) <nl> { <nl> - String cmd = it . next ( ) . input . trim ( ) . toLowerCase ( ) ; <nl> + String cmd = it . next ( ) . command . trim ( ) . toLowerCase ( ) ; <nl> <nl> if ( cmd . equals ( " / fml confirm " ) ) <nl> { <nl> diff - - git a / src / main / java / net / minecraftforge / server / command / ForgeCommand . java b / src / main / java / net / minecraftforge / server / command / ForgeCommand . java <nl> index 163bc34 . . a940bd8 100644 <nl> - - - a / src / main / java / net / minecraftforge / server / command / ForgeCommand . java <nl> + + + b / src / main / java / net / minecraftforge / server / command / ForgeCommand . java <nl> @ @ - 25 , 7 + 25 , 7 @ @ public class ForgeCommand extends CommandBase { <nl> } <nl> <nl> @ Override <nl> - public String getName ( ) <nl> + public String getCommandName ( ) <nl> { <nl> return " forge " ; <nl> } <nl> @ @ - 42 , 7 + 42 , 7 @ @ public class ForgeCommand extends CommandBase { <nl> return 2 ; <nl> } <nl> @ Override <nl> - public void execute ( ICommandSender sender , String [ ] args ) throws CommandException <nl> + public void processCommand ( ICommandSender sender , String [ ] args ) throws CommandException <nl> { <nl> if ( args . length = = 0 ) <nl> { <nl> @ @ - 80 , 7 + 80 , 7 @ @ public class ForgeCommand extends CommandBase { <nl> else if ( args . length = = 2 ) <nl> { <nl> if ( " tps " . equals ( args [ 0 ] ) ) { <nl> - return func _ 175762 _ a ( args , getServer ( ) . worldTickTimes . keySet ( ) ) ; <nl> + return getListOfStringsMatchingLastWord ( args , getServer ( ) . worldTickTimes . keySet ( ) ) ; <nl> } <nl> else if ( " track " . equals ( args [ 0 ] ) ) <nl> { <nl> @ @ - 89 , 7 + 89 , 7 @ @ public class ForgeCommand extends CommandBase { <nl> } <nl> return null ; <nl> } <nl> - <nl> + <nl> private void handleTracking ( ICommandSender sender , String [ ] args ) throws CommandException <nl> { <nl> if ( args . length ! = 3 ) <nl> diff - - git a / src / test / java / net / minecraftforge / debug / ForgeBlockStatesLoaderDebug . java b / src / test / java / net / minecraftforge / debug / ForgeBlockStatesLoaderDebug . java <nl> index 4dfa7b4 . . 1ad6504 100644 <nl> - - - a / src / test / java / net / minecraftforge / debug / ForgeBlockStatesLoaderDebug . java <nl> + + + b / src / test / java / net / minecraftforge / debug / ForgeBlockStatesLoaderDebug . java <nl> @ @ - 36 , 7 + 36 , 7 @ @ import net . minecraftforge . fml . relauncher . SideOnly ; <nl> public class ForgeBlockStatesLoaderDebug { <nl> public static final String MODID = " ForgeBlockStatesLoader " ; <nl> public static final String ASSETS = " forgeblockstatesloader : " ; <nl> - <nl> + <nl> public static final Block blockCustom = new CustomMappedBlock ( ) ; <nl> public static final String nameCustomWall = " custom _ wall " ; <nl> public static final BlockWall blockCustomWall = new BlockWall ( Blocks . cobblestone ) ; <nl> @ @ - 48 , 42 + 48 , 42 @ @ public class ForgeBlockStatesLoaderDebug { <nl> return BlockWall . EnumType . byMetadata ( stack . getMetadata ( ) ) . getUnlocalizedName ( ) ; <nl> } <nl> } ) ; <nl> - <nl> + <nl> @ EventHandler <nl> public void preInit ( FMLPreInitializationEvent event ) <nl> - { <nl> + { <nl> 	 blockCustom . setUnlocalizedName ( MODID + " . customBlock " ) ; <nl> 	 GameRegistry . registerBlock ( blockCustom , " customBlock " ) ; <nl> - 	 <nl> + <nl> blockCustomWall . setUnlocalizedName ( MODID + " . customWall " ) ; <nl> GameRegistry . registerBlock ( blockCustomWall , null , nameCustomWall ) ; <nl> GameRegistry . registerItem ( itemCustomWall , nameCustomWall ) ; <nl> GameData . getBlockItemMap ( ) . put ( blockCustomWall , itemCustomWall ) ; <nl> - <nl> + <nl> if ( event . getSide ( ) = = Side . CLIENT ) <nl> preInitClient ( event ) ; <nl> } <nl> - <nl> + <nl> @ SideOnly ( Side . CLIENT ) <nl> public void preInitClient ( FMLPreInitializationEvent event ) <nl> { <nl> - 	 ModelLoader . setCustomStateMapper ( blockCustom , new StateMap . Builder ( ) . setProperty ( CustomMappedBlock . VARIANT ) . build ( ) ) ; <nl> - 	 <nl> + 	 ModelLoader . setCustomStateMapper ( blockCustom , new StateMap . Builder ( ) . withName ( CustomMappedBlock . VARIANT ) . build ( ) ) ; <nl> + <nl> ModelLoader . setCustomStateMapper ( blockCustomWall , new IStateMapper ( ) <nl> { <nl> - StateMap stateMap = new StateMap . Builder ( ) . setProperty ( BlockWall . VARIANT ) . setBuilderSuffix ( " _ wall " ) . build ( ) ; <nl> + StateMap stateMap = new StateMap . Builder ( ) . withName ( BlockWall . VARIANT ) . withSuffix ( " _ wall " ) . build ( ) ; <nl> @ Override <nl> public Map putStateModelLocations ( Block block ) <nl> { <nl> Map < IBlockState , ModelResourceLocation > map = ( Map < IBlockState , ModelResourceLocation > ) stateMap . putStateModelLocations ( block ) ; <nl> Map < IBlockState , ModelResourceLocation > newMap = Maps . newHashMap ( ) ; <nl> - <nl> + <nl> for ( Entry < IBlockState , ModelResourceLocation > e : map . entrySet ( ) ) <nl> { <nl> ModelResourceLocation loc = e . getValue ( ) ; <nl> newMap . put ( e . getKey ( ) , new ModelResourceLocation ( ASSETS + loc . getResourcePath ( ) , loc . getVariant ( ) ) ) ; <nl> } <nl> - <nl> + <nl> return newMap ; <nl> } <nl> } ) ; <nl> @ @ - 92 , 41 + 92 , 41 @ @ public class ForgeBlockStatesLoaderDebug { <nl> ModelLoader . setCustomModelResourceLocation ( customWallItem , 1 , new ModelResourceLocation ( ASSETS + " mossy _ cobblestone _ wall " , " inventory " ) ) ; <nl> ModelBakery . addVariantName ( customWallItem , ASSETS + " cobblestone _ wall " , ASSETS + " mossy _ cobblestone _ wall " ) ; <nl> } <nl> - <nl> + <nl> / / this block is never actually used , it ' s only needed for the error message on load to see the variant it maps to <nl> public static class CustomMappedBlock extends Block { <nl> 	 public static final PropertyEnum VARIANT = PropertyEnum . create ( " type " , CustomVariant . class ) ; <nl> - 	 <nl> + <nl> 	 	 protected CustomMappedBlock ( ) { <nl> 	 	 	 super ( Material . rock ) ; <nl> - 	 	 	 <nl> + <nl> 	 	 	 this . setUnlocalizedName ( MODID + " . customMappedBlock " ) ; <nl> 	 	 } <nl> - 	 <nl> + <nl> 	 	 @ Override <nl> 	 	 protected BlockState createBlockState ( ) { <nl> 	 	 	 return new BlockState ( this , VARIANT ) ; <nl> 	 	 } <nl> - 	 	 <nl> + <nl> 	 	 @ Override <nl> 	 	 public int getMetaFromState ( IBlockState state ) <nl> 	 	 { <nl> 	 	 return ( ( CustomVariant ) state . getValue ( VARIANT ) ) . ordinal ( ) ; <nl> 	 	 } <nl> - 	 	 <nl> + <nl> 	 	 @ Override <nl> 	 	 public IBlockState getStateFromMeta ( int meta ) <nl> 	 	 { <nl> 	 	 if ( meta > CustomVariant . values ( ) . length | | meta < 0 ) <nl> 	 	 meta = 0 ; <nl> - 	 	 <nl> + <nl> 	 	 return this . getDefaultState ( ) . withProperty ( VARIANT , CustomVariant . values ( ) [ meta ] ) ; <nl> 	 	 } <nl> - 	 	 <nl> + <nl> 	 	 public static enum CustomVariant implements IStringSerializable { <nl> 	 	 	 TypeA , <nl> 	 	 	 TypeB ; <nl> - 	 	 	 <nl> + <nl> 	 	 	 public String getName ( ) { return this . toString ( ) ; } ; <nl> 	 	 } <nl> }

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / registries / ForgeRegistry . java b / src / main / java / net / minecraftforge / registries / ForgeRegistry . java 
 index b54a8d8 . . 89a5113 100644 
 - - - a / src / main / java / net / minecraftforge / registries / ForgeRegistry . java 
 + + + b / src / main / java / net / minecraftforge / registries / ForgeRegistry . java 
 @ @ - 199 , 6 + 199 , 15 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe 
 { 
 return getID ( this . names . get ( name ) ) ; 
 } 
 + private int getIDRaw ( V value ) 
 + { 
 + Integer ret = this . ids . inverse ( ) . get ( value ) ; 
 + return ret = = null ? - 1 : ret . intValue ( ) ; 
 + } 
 + private int getIDRaw ( ResourceLocation name ) 
 + { 
 + return getIDRaw ( this . names . get ( name ) ) ; 
 + } 
 
 public V getValue ( int id ) 
 { 
 @ @ - 411 , 6 + 420 , 8 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe 
 if ( from . superType ! = this . superType ) 
 throw new IllegalArgumentException ( " Attempted to copy to incompatible registry : " + name + " " + from . superType + " - > " + this . superType ) ; 
 
 + this . isFrozen = false ; 
 + 
 if ( this . clear ! = null ) 
 this . clear . onClear ( this , stage ) ; 
 
 @ @ - 421 , 14 + 432 , 11 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe 
 * / 
 this . aliases . clear ( ) ; 
 from . aliases . forEach ( ( f , t ) - > this . addAlias ( f , t ) ) ; 
 - this . dummies . clear ( ) ; 
 - from . dummies . forEach ( dummy - > this . addDummy ( dummy ) ) ; 
 
 this . ids . clear ( ) ; 
 this . names . clear ( ) ; 
 this . availabilityMap . clear ( 0 , this . availabilityMap . length ( ) ) ; 
 this . defaultValue = null ; 
 - this . isFrozen = false ; 
 
 boolean errored = false ; 
 
 @ @ - 443 , 6 + 451 , 10 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe 
 } 
 } 
 
 + / / Needs to be below add so that dummies are persisted 
 + this . dummies . clear ( ) ; 
 + from . dummies . forEach ( dummy - > this . addDummy ( dummy ) ) ; 
 + 
 if ( errored ) 
 throw new RuntimeException ( " One of more entry values did not copy to the correct id . Check log for details ! " ) ; 
 } 
 @ @ - 538 , 7 + 550 , 7 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe 
 { 
 ResourceLocation itemName = entry . getKey ( ) ; 
 int newId = entry . getValue ( ) ; 
 - int currId = old . getID ( itemName ) ; 
 + int currId = old . getIDRaw ( itemName ) ; 
 
 if ( currId = = - 1 ) 
 { 
 @ @ - 572 , 9 + 584 , 12 @ @ public class ForgeRegistry < V extends IForgeRegistryEntry < V > > implements IForgeRe 
 if ( DEBUG ) 
 FMLLog . finer ( " Registry Dummy Add : % s % d - > % s " , key , id , dummy ) ; 
 
 + / / It was blocked before so we need to unset the blocking map 
 + this . availabilityMap . clear ( id ) ; 
 + 
 int realId = this . add ( id , dummy ) ; 
 if ( realId ! = id ) 
 - FMLLog . warning ( " Registered object did not get ID it asked for . Name : { } Type : { } Expected : { } Got : { } " , key , dummy . getRegistryType ( ) . getName ( ) , id , realId ) ; 
 + FMLLog . warning ( " Registered object did not get ID it asked for . Name : % s Type : % s Expected : % s Got : % s " , key , dummy . getRegistryType ( ) . getName ( ) , id , realId ) ; 
 this . dummies . add ( key ) ; 
 
 return true ; 
 diff - - git a / src / main / java / net / minecraftforge / registries / GameData . java b / src / main / java / net / minecraftforge / registries / GameData . java 
 index 02f8859 . . 95cdd87 100644 
 - - - a / src / main / java / net / minecraftforge / registries / GameData . java 
 + + + b / src / main / java / net / minecraftforge / registries / GameData . java 
 @ @ - 325 , 7 + 325 , 14 @ @ public class GameData 
 @ Override 
 public Block createDummy ( ResourceLocation key ) 
 { 
 - return new Block ( Material . AIR ) . setUnlocalizedName ( " air " ) . setRegistryName ( key ) ; 
 + return new BlockDummyAir ( ) . setUnlocalizedName ( " air " ) . setRegistryName ( key ) ; 
 + } 
 + private static class BlockDummyAir extends Block / / A named class so DummyBlockReplacementTest can detect if its a dummy 
 + { 
 + private BlockDummyAir ( ) 
 + { 
 + super ( Material . AIR ) ; 
 + } 
 } 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / registries / RegistryManager . java b / src / main / java / net / minecraftforge / registries / RegistryManager . java 
 index 8c3c8fd . . bf1cbe1 100644 
 - - - a / src / main / java / net / minecraftforge / registries / RegistryManager . java 
 + + + b / src / main / java / net / minecraftforge / registries / RegistryManager . java 
 @ @ - 84 , 7 + 84 , 7 @ @ public class RegistryManager 
 if ( ! overlappedTypes . isEmpty ( ) ) 
 { 
 Class < ? > foundType = overlappedTypes . iterator ( ) . next ( ) ; 
 - FMLLog . severe ( " Found existing registry of type % 1s named % 2s , you cannot create a new registry ( % 3s ) with type % 4s , as % 4s has a parent of that type " , foundType , superTypes . get ( foundType ) , name , type ) ; 
 + FMLLog . severe ( " Found existing registry of type % s named % s , you cannot create a new registry ( % s ) with type % s , as % s has a parent of that type " , foundType , superTypes . get ( foundType ) , name , type , type ) ; 
 throw new IllegalArgumentException ( " Duplicate registry parent type found - you can only have one registry for a particular super type " ) ; 
 } 
 ForgeRegistry < V > reg = new ForgeRegistry < V > ( type , defaultKey , min , max , create , add , clear , this , allowOverrides , isModifiable , dummyFactory ) ; 
 diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / DummyBlockReplacementTest . java b / src / test / java / net / minecraftforge / fml / common / registry / DummyBlockReplacementTest . java 
 index 00add31 . . 8f338c2 100644 
 - - - a / src / test / java / net / minecraftforge / fml / common / registry / DummyBlockReplacementTest . java 
 + + + b / src / test / java / net / minecraftforge / fml / common / registry / DummyBlockReplacementTest . java 
 @ @ - 70 , 9 + 70 , 9 @ @ public class DummyBlockReplacementTest 
 
 fnd = blockRegistry . getValue ( myDirt ) ; 
 assertNotEquals ( " Did not find my block " , fnd , testDirtBlock ) ; 
 - assertTrue ( " Found a dummy air block " , fnd . getClass ( ) . getName ( ) . endsWith ( " BlockDummyAir " ) ) ; 
 + assertTrue ( " Did not find a dummy air block " , fnd . getClass ( ) . getName ( ) . endsWith ( " BlockDummyAir " ) ) ; 
 final Set < ResourceLocation > dummied = RegistryManager . ACTIVE . takeSnapshot ( false ) . get ( GameData . BLOCKS ) . dummied ; 
 - assertTrue ( " Found my block in the dummy list " , dummied . contains ( myDirt ) ) ; 
 + assertTrue ( " Did not find my block in the dummy list " , dummied . contains ( myDirt ) ) ; 
 
 GameData . revertToFrozen ( ) ; 
 ObjectHolderRegistry . INSTANCE . applyObjectHolders ( ) ; 
 @ @ - 80 , 6 + 80 , 7 @ @ public class DummyBlockReplacementTest 
 assertNotEquals ( " Did not find my block " , fnd , testDirtBlock ) ; 
 assertEquals ( " Found a default air block " , fnd , Blocks . AIR ) ; 
 
 + ( ( ForgeRegistry < Block > ) RegistryManager . ACTIVE . getRegistry ( Block . class ) ) . unfreeze ( ) ; 
 RegistryManager . ACTIVE . getRegistry ( Block . class ) . register ( testDirtBlock . setRegistryName ( myDirt ) ) ; 
 fnd = blockRegistry . getValue ( myDirt ) ; 
 assertEquals ( " Found my block " , fnd , testDirtBlock ) ; 
 diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / ForgeTestRunner . java b / src / test / java / net / minecraftforge / fml / common / registry / ForgeTestRunner . java 
 index ad5dc79 . . 81c073b 100644 
 - - - a / src / test / java / net / minecraftforge / fml / common / registry / ForgeTestRunner . java 
 + + + b / src / test / java / net / minecraftforge / fml / common / registry / ForgeTestRunner . java 
 @ @ - 76 , 6 + 76 , 7 @ @ public class ForgeTestRunner extends Runner 
 { 
 try 
 { 
 + System . setProperty ( " forge . disableVanillaGameData " , " false " ) ; 
 innerRunnerClass . getMethod ( " run " , RunNotifier . class ) . invoke ( innerRunner , notifier ) ; 
 } 
 catch ( Exception e ) 
 diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / FreezingTests . java b / src / test / java / net / minecraftforge / fml / common / registry / FreezingTests . java 
 index 750a79e . . a9ced43 100644 
 - - - a / src / test / java / net / minecraftforge / fml / common / registry / FreezingTests . java 
 + + + b / src / test / java / net / minecraftforge / fml / common / registry / FreezingTests . java 
 @ @ - 43 , 9 + 43 , 13 @ @ public class FreezingTests 
 { 
 setRegistryName ( name ) ; 
 } 
 + @ Override 
 + public String toString ( ) 
 + { 
 + return this . getRegistryName ( ) . toString ( ) ; 
 + } 
 } 
 
 - public static IForgeRegistry < RTest > registry ; 
 public static ResourceLocation resloc = new ResourceLocation ( " fmltest : test " ) ; 
 
 @ BeforeClass 
 @ @ - 53 , 27 + 57 , 33 @ @ public class FreezingTests 
 { 
 Loader . instance ( ) ; 
 System . setProperty ( " fml . queryResult " , " confirm " ) ; 
 + System . setProperty ( " fml . doNotBackup " , " true " ) ; 
 System . setProperty ( " forge . disableVanillaGameData " , " true " ) ; 
 - registry = new RegistryBuilder < RTest > ( ) . setName ( resloc ) . setType ( RTest . class ) . setIDRange ( 0 , 255 ) . create ( ) ; 
 + 
 + new RegistryBuilder < RTest > ( ) . setName ( resloc ) . setType ( RTest . class ) . setIDRange ( 0 , 255 ) . create ( ) ; 
 new RegistryBuilder < Block > ( ) . setName ( GameData . BLOCKS ) . setType ( Block . class ) . setIDRange ( 0 , 255 ) . create ( ) ; 
 new RegistryBuilder < Item > ( ) . setName ( GameData . ITEMS ) . setType ( Item . class ) . setIDRange ( 0 , 255 ) . create ( ) ; 
 + 
 r1 = new RTest ( " test1 " ) ; 
 r2 = new RTest ( " test2 " ) ; 
 r3 = new RTest ( " test3 " ) ; 
 r4 = new RTest ( " test4 " ) ; 
 r5 = new RTest ( " test5 " ) ; 
 r6 = new RTest ( " test6 " ) ; 
 + 
 ss = Maps . newHashMap ( ) ; 
 ss . put ( GameData . BLOCKS , new ForgeRegistry . Snapshot ( ) ) ; 
 ss . put ( GameData . ITEMS , new ForgeRegistry . Snapshot ( ) ) ; 
 + 
 RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r1 ) ; 
 RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r2 ) ; 
 RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r3 ) ; 
 RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r4 ) ; 
 ss . put ( resloc , ( ( ForgeRegistry < ? > ) RegistryManager . ACTIVE . getRegistry ( RTest . class ) ) . makeSnapshot ( ) ) ; 
 + 
 RegistryManager . ACTIVE . clean ( ) ; 
 RegistryManager . FROZEN . clean ( ) ; 
 - registry = new RegistryBuilder < RTest > ( ) . setName ( resloc ) . setType ( RTest . class ) . setIDRange ( 0 , 255 ) . create ( ) ; 
 + new RegistryBuilder < RTest > ( ) . setName ( resloc ) . setType ( RTest . class ) . setIDRange ( 0 , 255 ) . create ( ) ; 
 new RegistryBuilder < Block > ( ) . setName ( GameData . BLOCKS ) . setType ( Block . class ) . setIDRange ( 0 , 255 ) . create ( ) ; 
 new RegistryBuilder < Item > ( ) . setName ( GameData . ITEMS ) . setType ( Item . class ) . setIDRange ( 0 , 255 ) . create ( ) ; 
 } 
 @ @ - 81 , 30 + 91 , 43 @ @ public class FreezingTests 
 @ Test 
 public void testFreezeCycle ( ) 
 { 
 - RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r6 ) ; 
 - RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r5 ) ; 
 - RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r4 ) ; 
 - RegistryManager . ACTIVE . getRegistry ( RTest . class ) . register ( r3 ) ; 
 - ForgeRegistry < RTest > r = ( ForgeRegistry < RTest > ) RegistryManager . ACTIVE . getRegistry ( r3 . getRegistryType ( ) ) ; 
 - int r3id = r . getID ( r3 ) ; 
 + ResourceLocation name = new ResourceLocation ( " test3 " ) ; 
 + ForgeRegistry < RTest > active = ( ForgeRegistry < RTest > ) RegistryManager . ACTIVE . getRegistry ( RTest . class ) ; 
 + active . register ( r6 ) ; 
 + active . register ( r5 ) ; 
 + active . register ( r4 ) ; 
 + active . register ( r3 ) ; 
 + 
 + int r3id = active . getID ( r3 ) ; 
 GameData . freezeData ( ) ; 
 - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 - GameData . injectSnapshot ( ss , false , false ) ; 
 - assertNotEquals ( " IDs don ' t match " , r3id , r . getID ( r3 ) ) ; 
 - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 + 
 + / / Frozen data should be the same , as there are no replacement 
 + ForgeRegistry < RTest > frozen = ( ForgeRegistry < RTest > ) RegistryManager . ACTIVE . getRegistry ( RTest . class ) ; 
 + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; 
 + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; 
 + 
 + / / r3 is in the snapshot , so the ID SHOULD change to whats in the snapshot . 
 + GameData . injectSnapshot ( ss , false , true ) ; / / Unlike the old system we die on missing mappings for custom registries . So we need to tell it to continue loading as if we ' re local 
 + assertNotEquals ( " IDs match " , r3id , active . getID ( r3 ) ) ; 
 + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; 
 + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; 
 + 
 + / / Frozen has the original ID 
 GameData . revertToFrozen ( ) ; 
 - assertEquals ( " IDs match " , r3id , r . getID ( r3 ) ) ; 
 - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 + assertEquals ( " IDs don ' t match " , r3id , active . getID ( r3 ) ) ; 
 + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; 
 + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; 
 + 
 + / / Make sure we have snapshot ID again 
 GameData . injectSnapshot ( ss , true , true ) ; 
 - assertNotEquals ( " IDs don ' t match " , r3id , r . getID ( r3 ) ) ; 
 - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 + assertNotEquals ( " IDs match " , r3id , active . getID ( r3 ) ) ; 
 + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; 
 + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; 
 + 
 + / / And back to the frozen ID 
 GameData . revertToFrozen ( ) ; 
 - assertEquals ( " IDs match " , r3id , r . getID ( r3 ) ) ; 
 - assertEquals ( " Frozen object is the same " , r3 , RegistryManager . FROZEN . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 - assertEquals ( " Active object is the same " , r3 , RegistryManager . ACTIVE . getRegistry ( RTest . class ) . getValue ( new ResourceLocation ( " test3 " ) ) ) ; 
 + assertEquals ( " IDs don ' t match " , r3id , active . getID ( r3 ) ) ; 
 + assertEquals ( " Frozen object not the same " , r3 , frozen . getValue ( name ) ) ; 
 + assertEquals ( " Active object not the same " , r3 , active . getValue ( name ) ) ; 
 } 
 } 
 diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / ItemBlockSubstitutionRemoveRestoreTest . java b / src / test / java / net / minecraftforge / fml / common / registry / ItemBlockSubstitutionRemoveRestoreTest . java 
 index 03a1dff . . e1c78bf 100644 
 - - - a / src / test / java / net / minecraftforge / fml / common / registry / ItemBlockSubstitutionRemoveRestoreTest . java 
 + + + b / src / test / java / net / minecraftforge / fml / common / registry / ItemBlockSubstitutionRemoveRestoreTest . java 
 @ @ - 86 , 11 + 86 , 11 @ @ public class ItemBlockSubstitutionRemoveRestoreTest 
 snapshot . get ( GameData . ITEMS ) . substitutions . clear ( ) ; 
 GameData . injectSnapshot ( snapshot , false , false ) ; 
 ObjectHolderRegistry . INSTANCE . applyObjectHolders ( ) ; 
 - * / 
 
 dirtitem = ( ItemBlock ) itemRegistry . getValue ( myDirt ) ; 
 assertEquals ( " ItemBlock points at vanilla block " , originalDirt , dirtitem ) ; 
 assertNotEquals ( " ItemBlock points at my block " , myDirtInstance , dirtitem ) ; 
 + * / 
 
 / / TEST 3 : Does the substitute get restored when reverting to frozen state ? The substitute should be found in the registry again 
 GameData . revertToFrozen ( ) ; 
 diff - - git a / src / test / java / net / minecraftforge / fml / common / registry / VanillaRegistryTests . java b / src / test / java / net / minecraftforge / fml / common / registry / VanillaRegistryTests . java 
 index 8f7589f . . 33787dc 100644 
 - - - a / src / test / java / net / minecraftforge / fml / common / registry / VanillaRegistryTests . java 
 + + + b / src / test / java / net / minecraftforge / fml / common / registry / VanillaRegistryTests . java 
 @ @ - 18 , 6 + 18 , 8 @ @ import org . junit . runner . RunWith ; 
 
 import static org . junit . Assert . * ; 
 
 + import java . lang . reflect . Field ; 
 + 
 / * * 
 * Vanilla registry tests 
 * / 
 @ @ - 42 , 7 + 44 , 7 @ @ public class VanillaRegistryTests 
 
 / / Our lookups find the same stuff vanilla sees 
 final IForgeRegistry < Block > blocks = RegistryManager . ACTIVE . getRegistry ( Block . class ) ; 
 - assertEquals ( " We have the right blocks for a block " , blocks , Block . REGISTRY ) ; 
 + assertEquals ( " We have a different block registry then vanilla " , blocks , getDelegate ( Block . REGISTRY ) ) ; 
 
 / / We can look up stuff through our APIs 
 Block bl = blocks . getValue ( new ResourceLocation ( " minecraft : air " ) ) ; 
 @ @ - 54 , 7 + 56 , 7 @ @ public class VanillaRegistryTests 
 
 / / Our lookups find the same stuff vanilla sees 
 final IForgeRegistry < Item > items = RegistryManager . ACTIVE . getRegistry ( Item . class ) ; 
 - assertEquals ( " We have the right items for an item " , items , Item . REGISTRY ) ; 
 + assertEquals ( " We have a different item registry then vanilla " , items , getDelegate ( Item . REGISTRY ) ) ; 
 
 / / We can look up stuff through our APIs 
 Item it = items . getValue ( new ResourceLocation ( " minecraft : bed " ) ) ; 
 @ @ - 65 , 6 + 67 , 20 @ @ public class VanillaRegistryTests 
 assertEquals ( " We got nothing ( items ) when we asked for cheese " , null , none ) ; 
 } 
 
 + private Object getDelegate ( Object obj ) 
 + { 
 + try 
 + { 
 + Field f = obj . getClass ( ) . getDeclaredField ( " delegate " ) ; 
 + f . setAccessible ( true ) ; 
 + return f . get ( obj ) ; 
 + } 
 + catch ( Exception e ) 
 + { 
 + throw new RuntimeException ( e ) ; 
 + } 
 + } 
 + 
 @ Test 
 public void testRegistration ( ) 
 { 
 @ @ - 74 , 7 + 90 , 7 @ @ public class VanillaRegistryTests 
 assertNotNull ( " Registered my block " , myBlock ) ; 
 
 / / Our lookups find the same stuff vanilla sees 
 - assertEquals ( " We have the right blocks for a block " , blocks , Block . REGISTRY ) ; 
 + assertEquals ( " We have a different block registry then vanilla " , blocks , getDelegate ( Block . REGISTRY ) ) ; 
 
 Block found = blocks . getValue ( new ResourceLocation ( " minecraft : testy " ) ) ; 
 assertEquals ( " Registry lookup works " , myBlock , found ) ;

NEAREST DIFF:
diff - - git a / build . gradle b / build . gradle 
 index f6acdc6 . . e8c7fbf 100644 
 - - - a / build . gradle 
 + + + b / build . gradle 
 @ @ - 28 , 7 + 28 , 7 @ @ apply plugin : " net . minecraftforge . gradle . launch4j " 
 minecraft { 
 version = " 1 . 8 . 8 " 
 / / mappings = ' stable _ 16 ' 
 - mappings = " snapshot _ nodoc _ 20141130 " 
 + mappings = " snapshot _ nodoc _ 20151122 " 
 workspaceDir = " projects " 
 versionJson = " jsons / 1 . 8 . 8 - dev . json " 
 buildUserdev = true 
 diff - - git a / src / main / java / net / minecraftforge / client / ClientCommandHandler . java b / src / main / java / net / minecraftforge / client / ClientCommandHandler . java 
 index 4978616 . . 455c764 100644 
 - - - a / src / main / java / net / minecraftforge / client / ClientCommandHandler . java 
 + + + b / src / main / java / net / minecraftforge / client / ClientCommandHandler . java 
 @ @ - 57 , 7 + 57 , 7 @ @ public class ClientCommandHandler extends CommandHandler 
 return 0 ; 
 } 
 
 - if ( icommand . canCommandSenderUse ( sender ) ) 
 + if ( icommand . canCommandSenderUseCommand ( sender ) ) 
 { 
 CommandEvent event = new CommandEvent ( icommand , sender , args ) ; 
 if ( MinecraftForge . EVENT _ BUS . post ( event ) ) 
 @ @ - 69 , 7 + 69 , 7 @ @ public class ClientCommandHandler extends CommandHandler 
 return 0 ; 
 } 
 
 - icommand . execute ( sender , args ) ; 
 + icommand . processCommand ( sender , args ) ; 
 return 1 ; 
 } 
 else 
 diff - - git a / src / main / java / net / minecraftforge / client / GuiIngameForge . java b / src / main / java / net / minecraftforge / client / GuiIngameForge . java 
 index 5c3adae . . a41ecdf 100644 
 - - - a / src / main / java / net / minecraftforge / client / GuiIngameForge . java 
 + + + b / src / main / java / net / minecraftforge / client / GuiIngameForge . java 
 @ @ - 113 , 7 + 113 , 7 @ @ public class GuiIngameForge extends GuiIngame 
 
 if ( Minecraft . isFancyGraphicsEnabled ( ) ) 
 { 
 - func _ 180480 _ a ( mc . thePlayer . getBrightness ( partialTicks ) , res ) ; 
 + renderVignette ( mc . thePlayer . getBrightness ( partialTicks ) , res ) ; 
 } 
 else 
 { 
 @ @ - 163 , 16 + 163 , 16 @ @ public class GuiIngameForge extends GuiIngame 
 
 Scoreboard scoreboard = this . mc . theWorld . getScoreboard ( ) ; 
 ScoreObjective objective = null ; 
 - ScorePlayerTeam scoreplayerteam = scoreboard . getPlayersTeam ( mc . thePlayer . getName ( ) ) ; 
 + ScorePlayerTeam scoreplayerteam = scoreboard . getPlayersTeam ( mc . thePlayer . getCommandSenderName ( ) ) ; 
 if ( scoreplayerteam ! = null ) 
 { 
 - int slot = scoreplayerteam . func _ 178775 _ l ( ) . getColorIndex ( ) ; 
 + int slot = scoreplayerteam . getChatFormat ( ) . getColorIndex ( ) ; 
 if ( slot > = 0 ) objective = scoreboard . getObjectiveInDisplaySlot ( 3 + slot ) ; 
 } 
 ScoreObjective scoreobjective1 = objective ! = null ? objective : scoreboard . getObjectiveInDisplaySlot ( 1 ) ; 
 if ( renderObjective & & scoreobjective1 ! = null ) 
 { 
 - this . func _ 180475 _ a ( scoreobjective1 , res ) ; 
 + this . renderScoreboard ( scoreobjective1 , res ) ; 
 } 
 
 GlStateManager . enableBlend ( ) ; 
 @ @ - 234 , 7 + 234 , 7 @ @ public class GuiIngameForge extends GuiIngame 
 { 
 if ( itemstack . getItem ( ) = = Item . getItemFromBlock ( Blocks . pumpkin ) ) 
 { 
 - func _ 180476 _ e ( res ) ; 
 + renderPumpkinOverlay ( res ) ; 
 } 
 else 
 { 
 @ @ - 345 , 28 + 345 , 28 @ @ public class GuiIngameForge extends GuiIngame 
 
 EntityPlayer player = ( EntityPlayer ) this . mc . getRenderViewEntity ( ) ; 
 int health = MathHelper . ceiling _ float _ int ( player . getHealth ( ) ) ; 
 - boolean highlight = field _ 175191 _ F > ( long ) updateCounter & & ( field _ 175191 _ F - ( long ) updateCounter ) / 3L % 2L = = 1L ; 
 + boolean highlight = healthUpdateCounter > ( long ) updateCounter & & ( healthUpdateCounter - ( long ) updateCounter ) / 3L % 2L = = 1L ; 
 
 - if ( health < this . field _ 175194 _ C & & player . hurtResistantTime > 0 ) 
 + if ( health < this . playerHealth & & player . hurtResistantTime > 0 ) 
 { 
 this . lastSystemTime = Minecraft . getSystemTime ( ) ; 
 - this . field _ 175191 _ F = ( long ) ( this . updateCounter + 20 ) ; 
 + this . healthUpdateCounter = ( long ) ( this . updateCounter + 20 ) ; 
 } 
 - else if ( health > this . field _ 175194 _ C & & player . hurtResistantTime > 0 ) 
 + else if ( health > this . playerHealth & & player . hurtResistantTime > 0 ) 
 { 
 this . lastSystemTime = Minecraft . getSystemTime ( ) ; 
 - this . field _ 175191 _ F = ( long ) ( this . updateCounter + 10 ) ; 
 + this . healthUpdateCounter = ( long ) ( this . updateCounter + 10 ) ; 
 } 
 
 if ( Minecraft . getSystemTime ( ) - this . lastSystemTime > 1000L ) 
 { 
 - this . field _ 175194 _ C = health ; 
 - this . field _ 175189 _ D = health ; 
 + this . playerHealth = health ; 
 + this . lastPlayerHealth = health ; 
 this . lastSystemTime = Minecraft . getSystemTime ( ) ; 
 } 
 
 - this . field _ 175194 _ C = health ; 
 - int healthLast = this . field _ 175189 _ D ; 
 + this . playerHealth = health ; 
 + int healthLast = this . lastPlayerHealth ; 
 
 IAttributeInstance attrMaxHealth = player . getEntityAttribute ( SharedMonsterAttributes . maxHealth ) ; 
 float healthMax = ( float ) attrMaxHealth . getAttributeValue ( ) ; 
 @ @ - 748 , 11 + 748 , 11 @ @ public class GuiIngameForge extends GuiIngame 
 GlStateManager . pushMatrix ( ) ; 
 GlStateManager . scale ( 4 . 0F , 4 . 0F , 4 . 0F ) ; 
 int l = opacity < < 24 & - 16777216 ; 
 - this . func _ 175179 _ f ( ) . drawString ( this . field _ 175201 _ x , ( float ) ( - this . func _ 175179 _ f ( ) . getStringWidth ( this . field _ 175201 _ x ) / 2 ) , - 10 . 0F , 16777215 | l , true ) ; 
 + this . getFontRenderer ( ) . drawString ( this . field _ 175201 _ x , ( float ) ( - this . getFontRenderer ( ) . getStringWidth ( this . field _ 175201 _ x ) / 2 ) , - 10 . 0F , 16777215 | l , true ) ; 
 GlStateManager . popMatrix ( ) ; 
 GlStateManager . pushMatrix ( ) ; 
 GlStateManager . scale ( 2 . 0F , 2 . 0F , 2 . 0F ) ; 
 - this . func _ 175179 _ f ( ) . drawString ( this . field _ 175200 _ y , ( float ) ( - this . func _ 175179 _ f ( ) . getStringWidth ( this . field _ 175200 _ y ) / 2 ) , 5 . 0F , 16777215 | l , true ) ; 
 + this . getFontRenderer ( ) . drawString ( this . field _ 175200 _ y , ( float ) ( - this . getFontRenderer ( ) . getStringWidth ( this . field _ 175200 _ y ) / 2 ) , 5 . 0F , 16777215 | l , true ) ; 
 GlStateManager . popMatrix ( ) ; 
 GlStateManager . disableBlend ( ) ; 
 GlStateManager . popMatrix ( ) ; 
 @ @ - 784 , 16 + 784 , 16 @ @ public class GuiIngameForge extends GuiIngame 
 ScoreObjective scoreobjective = this . mc . theWorld . getScoreboard ( ) . getObjectiveInDisplaySlot ( 0 ) ; 
 NetHandlerPlayClient handler = mc . thePlayer . sendQueue ; 
 
 - if ( mc . gameSettings . keyBindPlayerList . isKeyDown ( ) & & ( ! mc . isIntegratedServerRunning ( ) | | handler . func _ 175106 _ d ( ) . size ( ) > 1 | | scoreobjective ! = null ) ) 
 + if ( mc . gameSettings . keyBindPlayerList . isKeyDown ( ) & & ( ! mc . isIntegratedServerRunning ( ) | | handler . getPlayerInfoMap ( ) . size ( ) > 1 | | scoreobjective ! = null ) ) 
 { 
 - this . overlayPlayerList . func _ 175246 _ a ( true ) ; 
 + this . overlayPlayerList . updatePlayerList ( true ) ; 
 if ( pre ( PLAYER _ LIST ) ) return ; 
 - this . overlayPlayerList . func _ 175249 _ a ( width , this . mc . theWorld . getScoreboard ( ) , scoreobjective ) ; 
 + this . overlayPlayerList . renderPlayerlist ( width , this . mc . theWorld . getScoreboard ( ) , scoreobjective ) ; 
 post ( PLAYER _ LIST ) ; 
 } 
 else 
 { 
 - this . overlayPlayerList . func _ 175246 _ a ( false ) ; 
 + this . overlayPlayerList . updatePlayerList ( false ) ; 
 } 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java b / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java 
 index b5ced65 . . 462a307 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ForgeBlockStateV1 . java 
 @ @ - 50 , 7 + 50 , 7 @ @ public class ForgeBlockStateV1 extends Marker 
 { 
 JsonObject json = element . getAsJsonObject ( ) ; 
 ForgeBlockStateV1 ret = new ForgeBlockStateV1 ( ) ; 
 - ret . forge _ marker = JsonUtils . getJsonObjectIntegerFieldValue ( json , " forge _ marker " ) ; 
 + ret . forge _ marker = JsonUtils . getInt ( json , " forge _ marker " ) ; 
 
 if ( json . has ( " defaults " ) ) / / Load defaults Variant . 
 { 
 @ @ - 146 , 13 + 146 , 13 @ @ public class ForgeBlockStateV1 extends Marker 
 part . state = state ; 
 } 
 } 
 - 
 + 
 Iterator < List < Variant > > iter = v . submodels . values ( ) . iterator ( ) ; 
 - 
 + 
 while ( iter . hasNext ( ) ) 
 { 
 List < Variant > submodel = iter . next ( ) ; 
 - 
 + 
 if ( submodel = = null ) 
 iter . remove ( ) ; 
 } 
 @ @ - 430 , 7 + 430 , 7 @ @ public class ForgeBlockStateV1 extends Marker 
 if ( json . get ( " model " ) . isJsonNull ( ) ) 
 ret . model = null ; / / Allow overriding base model to remove it from a state . 
 else 
 - ret . model = getBlockLocation ( JsonUtils . getJsonObjectStringFieldValue ( json , " model " ) ) ; 
 + ret . model = getBlockLocation ( JsonUtils . getString ( json , " model " ) ) ; 
 ret . modelSet = true ; 
 } 
 
 @ @ - 447 , 8 + 447 , 8 @ @ public class ForgeBlockStateV1 extends Marker 
 
 if ( json . has ( " x " ) | | json . has ( " y " ) ) 
 { / / Load rotation values . 
 - int x = JsonUtils . getJsonObjectIntegerFieldValueOrDefault ( json , " x " , 0 ) ; 
 - int y = JsonUtils . getJsonObjectIntegerFieldValueOrDefault ( json , " y " , 0 ) ; 
 + int x = JsonUtils . getInt ( json , " x " , 0 ) ; 
 + int y = JsonUtils . getInt ( json , " y " , 0 ) ; 
 ret . state = Optional . < IModelState > of ( new TRSRTransformation ( ModelRotation . getModelRotation ( x , y ) ) ) ; 
 if ( ! ret . state . isPresent ( ) ) 
 throw new JsonParseException ( " Invalid BlockModelRotation x : " + x + " y : " + y ) ; 
 @ @ - 589 , 12 + 589 , 12 @ @ public class ForgeBlockStateV1 extends Marker 
 
 if ( json . has ( " uvlock " ) ) 
 { / / Load uvlock . 
 - ret . uvLock = Optional . of ( JsonUtils . getJsonObjectBooleanFieldValue ( json , " uvlock " ) ) ; 
 + ret . uvLock = Optional . of ( JsonUtils . getBoolean ( json , " uvlock " ) ) ; 
 } 
 
 if ( json . has ( " weight " ) ) 
 { / / Load weight . 
 - ret . weight = Optional . of ( JsonUtils . getJsonObjectIntegerFieldValue ( json , " weight " ) ) ; 
 + ret . weight = Optional . of ( JsonUtils . getInt ( json , " weight " ) ) ; 
 } 
 
 if ( json . has ( " submodel " ) ) 
 diff - - git a / src / main / java / net / minecraftforge / common / ChestGenHooks . java b / src / main / java / net / minecraftforge / common / ChestGenHooks . java 
 index 55fd8e0 . . 61c0244 100644 
 - - - a / src / main / java / net / minecraftforge / common / ChestGenHooks . java 
 + + + b / src / main / java / net / minecraftforge / common / ChestGenHooks . java 
 @ @ - 234 , 7 + 234 , 7 @ @ public class ChestGenHooks 
 public ItemStack getOneItem ( Random rand ) 
 { 
 WeightedRandomChestContent item = ( WeightedRandomChestContent ) WeightedRandom . getRandomItem ( rand , getItems ( rand ) ) ; 
 - ItemStack [ ] stacks = ChestGenHooks . generateStacks ( rand , item . theItemId , item . theMinimumChanceToGenerateItem , item . theMaximumChanceToGenerateItem ) ; 
 + ItemStack [ ] stacks = ChestGenHooks . generateStacks ( rand , item . theItemId , item . minStackSize , item . maxStackSize ) ; 
 return ( stacks . length > 0 ? stacks [ 0 ] : null ) ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / common / ForgeHooks . java b / src / main / java / net / minecraftforge / common / ForgeHooks . java 
 index 429a859 . . aab0aca 100644 
 - - - a / src / main / java / net / minecraftforge / common / ForgeHooks . java 
 + + + b / src / main / java / net / minecraftforge / common / ForgeHooks . java 
 @ @ - 670 , 7 + 670 , 7 @ @ public class ForgeHooks 
 if ( world . getTileEntity ( pos ) = = null ) 
 { 
 S23PacketBlockChange packet = new S23PacketBlockChange ( world , pos ) ; 
 - packet . field _ 148883 _ d = Blocks . air . getDefaultState ( ) ; 
 + packet . blockState = Blocks . air . getDefaultState ( ) ; 
 entityPlayer . playerNetServerHandler . sendPacket ( packet ) ; 
 } 
 
 diff - - git a / src / main / java / net / minecraftforge / common / util / FakePlayer . java b / src / main / java / net / minecraftforge / common / util / FakePlayer . java 
 index 2607377 . . 3cbb21e 100644 
 - - - a / src / main / java / net / minecraftforge / common / util / FakePlayer . java 
 + + + b / src / main / java / net / minecraftforge / common / util / FakePlayer . java 
 @ @ - 23 , 7 + 23 , 7 @ @ public class FakePlayer extends EntityPlayerMP 
 } 
 
 @ Override public Vec3 getPositionVector ( ) { return new Vec3 ( 0 , 0 , 0 ) ; } 
 - @ Override public boolean canUseCommand ( int i , String s ) { return false ; } 
 + @ Override public boolean canCommandSenderUseCommand ( int i , String s ) { return false ; } 
 @ Override public void addChatComponentMessage ( IChatComponent chatmessagecomponent ) { } 
 @ Override public void addStat ( StatBase par1StatBase , int par2 ) { } 
 @ Override public void openGui ( Object mod , int modGuiId , World world , int x , int y , int z ) { } 
 diff - - git a / src / main / java / net / minecraftforge / event / world / ExplosionEvent . java b / src / main / java / net / minecraftforge / event / world / ExplosionEvent . java 
 index fc14d7d . . 167c097 100644 
 - - - a / src / main / java / net / minecraftforge / event / world / ExplosionEvent . java 
 + + + b / src / main / java / net / minecraftforge / event / world / ExplosionEvent . java 
 @ @ - 64 , 7 + 64 , 7 @ @ public class ExplosionEvent extends Event 
 / * * return the list of blocks affected by the explosion . * / 
 public List < BlockPos > getAffectedBlocks ( ) 
 { 
 - return explosion . func _ 180343 _ e ( ) ; 
 + return explosion . getAffectedBlockPositions ( ) ; 
 } 
 
 / * * return the list of entities affected by the explosion . * / 
 diff - - git a / src / main / java / net / minecraftforge / fml / client / GuiModList . java b / src / main / java / net / minecraftforge / fml / client / GuiModList . java 
 index 8cb8efc . . 2792b7b 100644 
 - - - a / src / main / java / net / minecraftforge / fml / client / GuiModList . java 
 + + + b / src / main / java / net / minecraftforge / fml / client / GuiModList . java 
 @ @ - 579 , 7 + 579 , 7 @ @ public class GuiModList extends GuiScreen 
 k + = GuiModList . this . fontRendererObj . getStringWidth ( ( ( ChatComponentText ) part ) . getChatComponentText _ TextValue ( ) ) ; 
 if ( k > = x ) 
 { 
 - GuiModList . this . func _ 175276 _ a ( part ) ; 
 + GuiModList . this . handleComponentClick ( part ) ; 
 break ; 
 } 
 } 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / network / internal / FMLNetworkHandler . java b / src / main / java / net / minecraftforge / fml / common / network / internal / FMLNetworkHandler . java 
 index 657bb22 . . 2851281 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / network / internal / FMLNetworkHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / network / internal / FMLNetworkHandler . java 
 @ @ - 90 , 7 + 90 , 7 @ @ public class FMLNetworkHandler 
 embeddedChannel . writeOutbound ( openGui ) ; 
 entityPlayerMP . openContainer = remoteGuiContainer ; 
 entityPlayerMP . openContainer . windowId = windowId ; 
 - entityPlayerMP . openContainer . addCraftingToCrafters ( entityPlayerMP ) ; 
 + entityPlayerMP . openContainer . onCraftGuiOpened ( entityPlayerMP ) ; 
 } 
 } 
 else if ( entityPlayer instanceof FakePlayer ) 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 index 81a3c91 . . da5139d 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / FMLControlledNamespacedRegistry . java 
 @ @ - 456 , 7 + 456 , 7 @ @ public class FMLControlledNamespacedRegistry < I > extends RegistryNamespacedDefaul 
 
 for ( I thing : this . typeSafeIterable ( ) ) 
 { 
 - if ( ! registry . field _ 148758 _ b . containsKey ( thing ) ) 
 + if ( ! registry . inverseObjectRegistry . containsKey ( thing ) ) 
 { 
 if ( ! registry . activeSubstitutions . containsKey ( getNameForObject ( thing ) . toString ( ) ) ) 
 { 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / GameRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / GameRegistry . java 
 index f222b1b . . 8116b20 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / GameRegistry . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / GameRegistry . java 
 @ @ - 506 , 7 + 506 , 7 @ @ public class GameRegistry 
 NBTBase nbttag = null ; 
 try 
 { 
 - nbttag = JsonToNBT . func _ 180713 _ a ( nbtString ) ; 
 + nbttag = JsonToNBT . getTagFromJson ( nbtString ) ; 
 } catch ( NBTException e ) 
 { 
 FMLLog . getLogger ( ) . log ( Level . WARN , " Encountered an exception parsing ItemStack NBT string { } " , nbtString , e ) ; 
 diff - - git a / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java b / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java 
 index be2f2d6 . . 252e94d 100644 
 - - - a / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / server / FMLServerHandler . java 
 @ @ - 180 , 7 + 180 , 7 @ @ public class FMLServerHandler implements IFMLSidedHandler 
 { 
 for ( Iterator < ServerCommand > it = GenericIterableFactory . newCastingIterable ( dedServer . pendingCommandList , ServerCommand . class ) . iterator ( ) ; it . hasNext ( ) ; ) 
 { 
 - String cmd = it . next ( ) . input . trim ( ) . toLowerCase ( ) ; 
 + String cmd = it . next ( ) . command . trim ( ) . toLowerCase ( ) ; 
 
 if ( cmd . equals ( " / fml confirm " ) ) 
 { 
 diff - - git a / src / main / java / net / minecraftforge / server / command / ForgeCommand . java b / src / main / java / net / minecraftforge / server / command / ForgeCommand . java 
 index 163bc34 . . a940bd8 100644 
 - - - a / src / main / java / net / minecraftforge / server / command / ForgeCommand . java 
 + + + b / src / main / java / net / minecraftforge / server / command / ForgeCommand . java 
 @ @ - 25 , 7 + 25 , 7 @ @ public class ForgeCommand extends CommandBase { 
 } 
 
 @ Override 
 - public String getName ( ) 
 + public String getCommandName ( ) 
 { 
 return " forge " ; 
 } 
 @ @ - 42 , 7 + 42 , 7 @ @ public class ForgeCommand extends CommandBase { 
 return 2 ; 
 } 
 @ Override 
 - public void execute ( ICommandSender sender , String [ ] args ) throws CommandException 
 + public void processCommand ( ICommandSender sender , String [ ] args ) throws CommandException 
 { 
 if ( args . length = = 0 ) 
 { 
 @ @ - 80 , 7 + 80 , 7 @ @ public class ForgeCommand extends CommandBase { 
 else if ( args . length = = 2 ) 
 { 
 if ( " tps " . equals ( args [ 0 ] ) ) { 
 - return func _ 175762 _ a ( args , getServer ( ) . worldTickTimes . keySet ( ) ) ; 
 + return getListOfStringsMatchingLastWord ( args , getServer ( ) . worldTickTimes . keySet ( ) ) ; 
 } 
 else if ( " track " . equals ( args [ 0 ] ) ) 
 { 
 @ @ - 89 , 7 + 89 , 7 @ @ public class ForgeCommand extends CommandBase { 
 } 
 return null ; 
 } 
 - 
 + 
 private void handleTracking ( ICommandSender sender , String [ ] args ) throws CommandException 
 { 
 if ( args . length ! = 3 ) 
 diff - - git a / src / test / java / net / minecraftforge / debug / ForgeBlockStatesLoaderDebug . java b / src / test / java / net / minecraftforge / debug / ForgeBlockStatesLoaderDebug . java 
 index 4dfa7b4 . . 1ad6504 100644 
 - - - a / src / test / java / net / minecraftforge / debug / ForgeBlockStatesLoaderDebug . java 
 + + + b / src / test / java / net / minecraftforge / debug / ForgeBlockStatesLoaderDebug . java 
 @ @ - 36 , 7 + 36 , 7 @ @ import net . minecraftforge . fml . relauncher . SideOnly ; 
 public class ForgeBlockStatesLoaderDebug { 
 public static final String MODID = " ForgeBlockStatesLoader " ; 
 public static final String ASSETS = " forgeblockstatesloader : " ; 
 - 
 + 
 public static final Block blockCustom = new CustomMappedBlock ( ) ; 
 public static final String nameCustomWall = " custom _ wall " ; 
 public static final BlockWall blockCustomWall = new BlockWall ( Blocks . cobblestone ) ; 
 @ @ - 48 , 42 + 48 , 42 @ @ public class ForgeBlockStatesLoaderDebug { 
 return BlockWall . EnumType . byMetadata ( stack . getMetadata ( ) ) . getUnlocalizedName ( ) ; 
 } 
 } ) ; 
 - 
 + 
 @ EventHandler 
 public void preInit ( FMLPreInitializationEvent event ) 
 - { 
 + { 
 	 blockCustom . setUnlocalizedName ( MODID + " . customBlock " ) ; 
 	 GameRegistry . registerBlock ( blockCustom , " customBlock " ) ; 
 - 	 
 + 
 blockCustomWall . setUnlocalizedName ( MODID + " . customWall " ) ; 
 GameRegistry . registerBlock ( blockCustomWall , null , nameCustomWall ) ; 
 GameRegistry . registerItem ( itemCustomWall , nameCustomWall ) ; 
 GameData . getBlockItemMap ( ) . put ( blockCustomWall , itemCustomWall ) ; 
 - 
 + 
 if ( event . getSide ( ) = = Side . CLIENT ) 
 preInitClient ( event ) ; 
 } 
 - 
 + 
 @ SideOnly ( Side . CLIENT ) 
 public void preInitClient ( FMLPreInitializationEvent event ) 
 { 
 - 	 ModelLoader . setCustomStateMapper ( blockCustom , new StateMap . Builder ( ) . setProperty ( CustomMappedBlock . VARIANT ) . build ( ) ) ; 
 - 	 
 + 	 ModelLoader . setCustomStateMapper ( blockCustom , new StateMap . Builder ( ) . withName ( CustomMappedBlock . VARIANT ) . build ( ) ) ; 
 + 
 ModelLoader . setCustomStateMapper ( blockCustomWall , new IStateMapper ( ) 
 { 
 - StateMap stateMap = new StateMap . Builder ( ) . setProperty ( BlockWall . VARIANT ) . setBuilderSuffix ( " _ wall " ) . build ( ) ; 
 + StateMap stateMap = new StateMap . Builder ( ) . withName ( BlockWall . VARIANT ) . withSuffix ( " _ wall " ) . build ( ) ; 
 @ Override 
 public Map putStateModelLocations ( Block block ) 
 { 
 Map < IBlockState , ModelResourceLocation > map = ( Map < IBlockState , ModelResourceLocation > ) stateMap . putStateModelLocations ( block ) ; 
 Map < IBlockState , ModelResourceLocation > newMap = Maps . newHashMap ( ) ; 
 - 
 + 
 for ( Entry < IBlockState , ModelResourceLocation > e : map . entrySet ( ) ) 
 { 
 ModelResourceLocation loc = e . getValue ( ) ; 
 newMap . put ( e . getKey ( ) , new ModelResourceLocation ( ASSETS + loc . getResourcePath ( ) , loc . getVariant ( ) ) ) ; 
 } 
 - 
 + 
 return newMap ; 
 } 
 } ) ; 
 @ @ - 92 , 41 + 92 , 41 @ @ public class ForgeBlockStatesLoaderDebug { 
 ModelLoader . setCustomModelResourceLocation ( customWallItem , 1 , new ModelResourceLocation ( ASSETS + " mossy _ cobblestone _ wall " , " inventory " ) ) ; 
 ModelBakery . addVariantName ( customWallItem , ASSETS + " cobblestone _ wall " , ASSETS + " mossy _ cobblestone _ wall " ) ; 
 } 
 - 
 + 
 / / this block is never actually used , it ' s only needed for the error message on load to see the variant it maps to 
 public static class CustomMappedBlock extends Block { 
 	 public static final PropertyEnum VARIANT = PropertyEnum . create ( " type " , CustomVariant . class ) ; 
 - 	 
 + 
 	 	 protected CustomMappedBlock ( ) { 
 	 	 	 super ( Material . rock ) ; 
 - 	 	 	 
 + 
 	 	 	 this . setUnlocalizedName ( MODID + " . customMappedBlock " ) ; 
 	 	 } 
 - 	 
 + 
 	 	 @ Override 
 	 	 protected BlockState createBlockState ( ) { 
 	 	 	 return new BlockState ( this , VARIANT ) ; 
 	 	 } 
 - 	 	 
 + 
 	 	 @ Override 
 	 	 public int getMetaFromState ( IBlockState state ) 
 	 	 { 
 	 	 return ( ( CustomVariant ) state . getValue ( VARIANT ) ) . ordinal ( ) ; 
 	 	 } 
 - 	 	 
 + 
 	 	 @ Override 
 	 	 public IBlockState getStateFromMeta ( int meta ) 
 	 	 { 
 	 	 if ( meta > CustomVariant . values ( ) . length | | meta < 0 ) 
 	 	 meta = 0 ; 
 - 	 	 
 + 
 	 	 return this . getDefaultState ( ) . withProperty ( VARIANT , CustomVariant . values ( ) [ meta ] ) ; 
 	 	 } 
 - 	 	 
 + 
 	 	 public static enum CustomVariant implements IStringSerializable { 
 	 	 	 TypeA , 
 	 	 	 TypeB ; 
 - 	 	 	 
 + 
 	 	 	 public String getName ( ) { return this . toString ( ) ; } ; 
 	 	 } 
 }
