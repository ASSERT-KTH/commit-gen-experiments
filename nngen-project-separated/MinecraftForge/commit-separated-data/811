BLEU SCORE: 0.0024118012379963885

TEST MSG: Some client handler cleanup
GENERATED MSG: Divert connection through FML , so we can deny connections to servers that don ' t want us

TEST DIFF (one line): diff - - git a / patches . mcp / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java . patch b / patches . mcp / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java . patch <nl> new file mode 100644 <nl> index 0000000 . . 3731eb6 <nl> - - - / dev / null <nl> + + + b / patches . mcp / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java . patch <nl> @ @ - 0 , 0 + 1 , 11 @ @ <nl> + - - - . . / src - base / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java <nl> + + + + . . / src - work / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java <nl> + @ @ - 242 , 7 + 242 , 7 @ @ <nl> + <nl> + if ( this . field _ 186784 _ e . getSaveLoader ( ) . canLoadWorld ( this . field _ 186786 _ g . getFileName ( ) ) ) <nl> + { <nl> + - this . field _ 186784 _ e . launchIntegratedServer ( this . field _ 186786 _ g . getFileName ( ) , this . field _ 186786 _ g . getDisplayName ( ) , ( WorldSettings ) null ) ; <nl> + + net . minecraftforge . fml . client . FMLClientHandler . instance ( ) . tryLoadExistingWorld ( field _ 186785 _ f , this . field _ 186786 _ g ) ; <nl> + } <nl> + } <nl> + <nl> diff - - git a / rejects / minecraft / net / minecraft / client / gui / GuiSelectWorld . java . patch . rej b / rejects / minecraft / net / minecraft / client / gui / GuiSelectWorld . java . patch . rej <nl> deleted file mode 100644 <nl> index d588a78 . . 0000000 <nl> - - - a / rejects / minecraft / net / minecraft / client / gui / GuiSelectWorld . java . patch . rej <nl> + + + / dev / null <nl> @ @ - 1 , 10 + 0 , 0 @ @ <nl> - + + + + REJECTED PATCH 1 <nl> - <nl> - if ( this . mc . getSaveLoader ( ) . canLoadWorld ( s ) ) <nl> - { <nl> - - this . mc . launchIntegratedServer ( s , s1 , ( WorldSettings ) null ) ; <nl> - + net . minecraftforge . fml . client . FMLClientHandler . instance ( ) . tryLoadExistingWorld ( this , s , s1 ) ; <nl> - } <nl> - } <nl> - } <nl> - + + + + END PATCH <nl> diff - - git a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> index 3f24d4e . . a782e30 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> @ @ - 30 , 16 + 30 , 17 @ @ import net . minecraft . client . Minecraft ; <nl> import net . minecraft . client . entity . EntityPlayerSP ; <nl> import net . minecraft . client . gui . Gui ; <nl> import net . minecraft . client . gui . GuiIngameMenu ; <nl> + import net . minecraft . client . gui . GuiListWorldSelectionEntry ; <nl> import net . minecraft . client . gui . GuiMainMenu ; <nl> import net . minecraft . client . gui . GuiScreen ; <nl> - import net . minecraft . client . gui . GuiSelectWorld ; <nl> + import net . minecraft . client . gui . GuiWorldSelection ; <nl> import net . minecraft . client . gui . ScaledResolution ; <nl> import net . minecraft . client . gui . ServerListEntryNormal ; <nl> import net . minecraft . client . multiplayer . GuiConnecting ; <nl> import net . minecraft . client . multiplayer . ServerData ; <nl> import net . minecraft . client . multiplayer . WorldClient ; <nl> import net . minecraft . client . network . NetHandlerPlayClient ; <nl> - import net . minecraft . client . network . OldServerPinger ; <nl> + import net . minecraft . client . network . ServerPinger ; <nl> import net . minecraft . client . renderer . GlStateManager ; <nl> import net . minecraft . client . resources . AbstractResourcePack ; <nl> import net . minecraft . client . resources . FallbackResourceManager ; <nl> @ @ - 67 , 6 + 68 , 7 @ @ import net . minecraft . util . IThreadListener ; <nl> import net . minecraft . util . ResourceLocation ; <nl> import net . minecraft . util . StringUtils ; <nl> import net . minecraft . world . WorldSettings ; <nl> + import net . minecraft . world . storage . SaveFormatComparator ; <nl> import net . minecraft . world . storage . SaveFormatOld ; <nl> import net . minecraftforge . client . model . animation . Animation ; <nl> import net . minecraftforge . fml . client . registry . RenderingRegistry ; <nl> @ @ - 123 , 7 + 125 , 7 @ @ import com . google . gson . JsonObject ; <nl> / * * <nl> * Handles primary communication from hooked code into the system <nl> * <nl> - * The FML entry point is { @ link # beginMinecraftLoading ( Minecraft , List ) } called from <nl> + * The FML entry point is { @ link # beginMinecraftLoading ( Minecraft , List , IReloadableResourceManager ) } called from <nl> * { @ link Minecraft } <nl> * <nl> * Obfuscated code should focus on this class and other members of the " server " <nl> @ @ - 666 , 9 + 668 , 9 @ @ public class FMLClientHandler implements IFMLSidedHandler <nl> { <nl> return new File ( client . mcDataDir , " saves " ) ; <nl> } <nl> - public void tryLoadExistingWorld ( GuiSelectWorld selectWorldGUI , String dirName , String saveName ) <nl> + public void tryLoadExistingWorld ( GuiWorldSelection selectWorldGUI , SaveFormatComparator comparator ) <nl> { <nl> - File dir = new File ( getSavesDir ( ) , dirName ) ; <nl> + File dir = new File ( getSavesDir ( ) , comparator . getFileName ( ) ) ; <nl> NBTTagCompound leveldat ; <nl> try <nl> { <nl> @ @ - 682 , 20 + 684 , 20 @ @ public class FMLClientHandler implements IFMLSidedHandler <nl> } <nl> catch ( Exception e1 ) <nl> { <nl> - FMLLog . warning ( " There appears to be a problem loading the save % s , both level files are unreadable . " , dirName ) ; <nl> + FMLLog . warning ( " There appears to be a problem loading the save % s , both level files are unreadable . " , comparator . getFileName ( ) ) ; <nl> return ; <nl> } <nl> } <nl> NBTTagCompound fmlData = leveldat . getCompoundTag ( " FML " ) ; <nl> if ( fmlData . hasKey ( " ModItemData " ) ) <nl> { <nl> - showGuiScreen ( new GuiOldSaveLoadConfirm ( dirName , saveName , selectWorldGUI ) ) ; <nl> + showGuiScreen ( new GuiOldSaveLoadConfirm ( comparator . getFileName ( ) , comparator . getDisplayName ( ) , selectWorldGUI ) ) ; <nl> } <nl> else <nl> { <nl> try <nl> { <nl> - client . launchIntegratedServer ( dirName , saveName , ( WorldSettings ) null ) ; <nl> + client . launchIntegratedServer ( comparator . getFileName ( ) , comparator . getDisplayName ( ) , ( WorldSettings ) null ) ; <nl> } <nl> catch ( StartupQuery . AbortedException e ) <nl> { <nl> @ @ - 820 , 7 + 822 , 7 @ @ public class FMLClientHandler implements IFMLSidedHandler <nl> public void connectToServerAtStartup ( String host , int port ) <nl> { <nl> setupServerList ( ) ; <nl> - OldServerPinger osp = new OldServerPinger ( ) ; <nl> + ServerPinger osp = new ServerPinger ( ) ; <nl> ServerData serverData = new ServerData ( " Command Line " , host + " : " + port , false ) ; <nl> try <nl> { <nl> diff - - git a / src / main / java / net / minecraftforge / fml / client / GuiOldSaveLoadConfirm . java b / src / main / java / net / minecraftforge / fml / client / GuiOldSaveLoadConfirm . java <nl> index ccc4269 . . 9244883 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / client / GuiOldSaveLoadConfirm . java <nl> + + + b / src / main / java / net / minecraftforge / fml / client / GuiOldSaveLoadConfirm . java <nl> @ @ - 6 , 7 + 6 , 7 @ @ import java . io . IOException ; <nl> import net . minecraft . client . gui . GuiButton ; <nl> import net . minecraft . client . gui . GuiLabel ; <nl> import net . minecraft . client . gui . GuiScreen ; <nl> - import net . minecraft . client . gui . GuiSelectWorld ; <nl> + import net . minecraft . client . gui . GuiWorldSelection ; <nl> import net . minecraft . client . gui . GuiYesNo ; <nl> import net . minecraft . client . gui . GuiYesNoCallback ; <nl> import net . minecraft . world . WorldSettings ; <nl> @ @ - 57 , 7 + 57 , 6 @ @ public class GuiOldSaveLoadConfirm extends GuiYesNo implements GuiYesNoCallback <nl> { <nl> if ( button . id = = 1 ) <nl> { <nl> - ObfuscationReflectionHelper . setPrivateValue ( GuiSelectWorld . class , ( GuiSelectWorld ) parentScreen , false , " field _ " + " 146634 _ i " ) ; <nl> FMLClientHandler . instance ( ) . showGuiScreen ( parent ) ; <nl> } <nl> else
NEAREST DIFF (one line): diff - - git a / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> index 169f32d . . d67753a 100644 <nl> - - - a / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> + + + b / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> @ @ - 28 , 7 + 28 , 7 @ @ <nl> this . field _ 71446 _ o = new TextureManager ( this . field _ 110451 _ am ) ; <nl> this . field _ 110451 _ am . func _ 110542 _ a ( this . field _ 71446 _ o ) ; <nl> this . field _ 147127 _ av = new SoundHandler ( this . field _ 110451 _ am , this . field _ 71474 _ y ) ; <nl> - @ @ - 508 , 6 + 513 , 7 @ @ <nl> + @ @ - 508 , 12 + 513 , 13 @ @ <nl> this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110576 _ c , new TextureMap ( 1 , " textures / items " ) ) ; <nl> GL11 . glViewport ( 0 , 0 , this . field _ 71443 _ c , this . field _ 71440 _ d ) ; <nl> this . field _ 71452 _ i = new EffectRenderer ( this . field _ 71441 _ e , this . field _ 71446 _ o ) ; <nl> @ @ - 36 , 6 + 36 , 13 @ @ <nl> this . func _ 71361 _ d ( " Post startup " ) ; <nl> this . field _ 71456 _ v = new GuiIngame ( this ) ; <nl> <nl> + if ( this . field _ 71475 _ ae ! = null ) <nl> + { <nl> + - this . func _ 147108 _ a ( new GuiConnecting ( new GuiMainMenu ( ) , this , this . field _ 71475 _ ae , this . field _ 71477 _ af ) ) ; <nl> + + FMLClientHandler . instance ( ) . connectToServerAtStartup ( this . field _ 71475 _ ae , this . field _ 71477 _ af ) ; <nl> + } <nl> + else <nl> + { <nl> @ @ - 527 , 6 + 533 , 7 @ @ <nl> this . func _ 71352 _ k ( ) ; <nl> } <nl> diff - - git a / fml / patches / minecraft / net / minecraft / client / gui / GuiMultiplayer . java . patch b / fml / patches / minecraft / net / minecraft / client / gui / GuiMultiplayer . java . patch <nl> index 43b0b5b . . a65e90b 100644 <nl> - - - a / fml / patches / minecraft / net / minecraft / client / gui / GuiMultiplayer . java . patch <nl> + + + b / fml / patches / minecraft / net / minecraft / client / gui / GuiMultiplayer . java . patch <nl> @ @ - 16 , 3 + 16 , 12 @ @ <nl> } <nl> <nl> public void func _ 73866 _ w _ ( ) <nl> + @ @ - 366 , 7 + 368 , 7 @ @ <nl> + <nl> + private void func _ 146791 _ a ( ServerData p _ 146791 _ 1 _ ) <nl> + { <nl> + - this . field _ 146297 _ k . func _ 147108 _ a ( new GuiConnecting ( this , this . field _ 146297 _ k , p _ 146791 _ 1 _ ) ) ; <nl> + + FMLClientHandler . instance ( ) . connectToServer ( this , p _ 146791 _ 1 _ ) ; <nl> + } <nl> + <nl> + public void func _ 146790 _ a ( int p _ 146790 _ 1 _ ) <nl> diff - - git a / fml / src / main / java / cpw / mods / fml / client / FMLClientHandler . java b / fml / src / main / java / cpw / mods / fml / client / FMLClientHandler . java <nl> index 1b1688a . . 619d8d2 100644 <nl> - - - a / fml / src / main / java / cpw / mods / fml / client / FMLClientHandler . java <nl> + + + b / fml / src / main / java / cpw / mods / fml / client / FMLClientHandler . java <nl> @ @ - 18 , 16 + 18 , 21 @ @ import java . util . Collections ; <nl> import java . util . List ; <nl> import java . util . Map ; <nl> import java . util . Map . Entry ; <nl> + import java . util . concurrent . CountDownLatch ; <nl> + import java . util . concurrent . TimeUnit ; <nl> import java . util . logging . Logger ; <nl> import net . minecraft . client . Minecraft ; <nl> import net . minecraft . client . entity . EntityClientPlayerMP ; <nl> import net . minecraft . client . gui . Gui ; <nl> import net . minecraft . client . gui . GuiIngameMenu ; <nl> + import net . minecraft . client . gui . GuiMainMenu ; <nl> import net . minecraft . client . gui . GuiScreen ; <nl> import net . minecraft . client . gui . GuiSelectWorld ; <nl> import net . minecraft . client . gui . ServerListEntryNormal ; <nl> + import net . minecraft . client . multiplayer . GuiConnecting ; <nl> import net . minecraft . client . multiplayer . ServerData ; <nl> import net . minecraft . client . multiplayer . WorldClient ; <nl> + import net . minecraft . client . network . OldServerPinger ; <nl> import net . minecraft . client . renderer . entity . Render ; <nl> import net . minecraft . client . renderer . entity . RenderManager ; <nl> import net . minecraft . client . resources . IReloadableResourceManager ; <nl> @ @ - 590 , 9 + 595 , 11 @ @ public class FMLClientHandler implements IFMLSidedHandler <nl> } <nl> serverDataTag . put ( data , new ExtendedServerListData ( " VANILLA " , false , - 1 , ! moddedClientAllowed ) ) ; <nl> } <nl> + startupConnectionData . countDown ( ) ; <nl> } <nl> <nl> private static final ResourceLocation iconSheet = new ResourceLocation ( " fml : textures / gui / icons . png " ) ; <nl> + private static final CountDownLatch startupConnectionData = new CountDownLatch ( 1 ) ; <nl> <nl> public String enhanceServerListEntry ( ServerListEntryNormal serverListEntry , ServerData serverEntry , int x , int width , int y , int relativeMouseX , int relativeMouseY ) <nl> { <nl> @ @ - 647 , 4 + 654 , 35 @ @ public class FMLClientHandler implements IFMLSidedHandler <nl> { <nl> return description . endsWith ( " : NOFML § r " ) ? description . substring ( 0 , description . length ( ) - 8 ) + " § r " : description ; <nl> } <nl> + <nl> + public void connectToServerAtStartup ( String host , int port ) <nl> + { <nl> + setupServerList ( ) ; <nl> + OldServerPinger osp = new OldServerPinger ( ) ; <nl> + ServerData serverData = new ServerData ( " Command Line " , host + " : " + port ) ; <nl> + try <nl> + { <nl> + osp . func _ 147224 _ a ( serverData ) ; <nl> + startupConnectionData . await ( 30 , TimeUnit . SECONDS ) ; <nl> + } <nl> + catch ( Exception e ) <nl> + { <nl> + showGuiScreen ( new GuiConnecting ( new GuiMainMenu ( ) , client , host , port ) ) ; <nl> + return ; <nl> + } <nl> + connectToServer ( new GuiMainMenu ( ) , serverData ) ; <nl> + } <nl> + <nl> + public void connectToServer ( GuiScreen guiMultiplayer , ServerData serverEntry ) <nl> + { <nl> + ExtendedServerListData extendedData = serverDataTag . get ( serverEntry ) ; <nl> + if ( extendedData . isBlocked ) <nl> + { <nl> + showGuiScreen ( new GuiAccessDenied ( guiMultiplayer , serverEntry ) ) ; <nl> + } <nl> + else <nl> + { <nl> + showGuiScreen ( new GuiConnecting ( guiMultiplayer , client , serverEntry ) ) ; <nl> + } <nl> + } <nl> }

TEST DIFF:
diff - - git a / patches . mcp / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java . patch b / patches . mcp / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java . patch 
 new file mode 100644 
 index 0000000 . . 3731eb6 
 - - - / dev / null 
 + + + b / patches . mcp / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java . patch 
 @ @ - 0 , 0 + 1 , 11 @ @ 
 + - - - . . / src - base / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java 
 + + + + . . / src - work / minecraft / net / minecraft / client / gui / GuiListWorldSelectionEntry . java 
 + @ @ - 242 , 7 + 242 , 7 @ @ 
 + 
 + if ( this . field _ 186784 _ e . getSaveLoader ( ) . canLoadWorld ( this . field _ 186786 _ g . getFileName ( ) ) ) 
 + { 
 + - this . field _ 186784 _ e . launchIntegratedServer ( this . field _ 186786 _ g . getFileName ( ) , this . field _ 186786 _ g . getDisplayName ( ) , ( WorldSettings ) null ) ; 
 + + net . minecraftforge . fml . client . FMLClientHandler . instance ( ) . tryLoadExistingWorld ( field _ 186785 _ f , this . field _ 186786 _ g ) ; 
 + } 
 + } 
 + 
 diff - - git a / rejects / minecraft / net / minecraft / client / gui / GuiSelectWorld . java . patch . rej b / rejects / minecraft / net / minecraft / client / gui / GuiSelectWorld . java . patch . rej 
 deleted file mode 100644 
 index d588a78 . . 0000000 
 - - - a / rejects / minecraft / net / minecraft / client / gui / GuiSelectWorld . java . patch . rej 
 + + + / dev / null 
 @ @ - 1 , 10 + 0 , 0 @ @ 
 - + + + + REJECTED PATCH 1 
 - 
 - if ( this . mc . getSaveLoader ( ) . canLoadWorld ( s ) ) 
 - { 
 - - this . mc . launchIntegratedServer ( s , s1 , ( WorldSettings ) null ) ; 
 - + net . minecraftforge . fml . client . FMLClientHandler . instance ( ) . tryLoadExistingWorld ( this , s , s1 ) ; 
 - } 
 - } 
 - } 
 - + + + + END PATCH 
 diff - - git a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 index 3f24d4e . . a782e30 100644 
 - - - a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 @ @ - 30 , 16 + 30 , 17 @ @ import net . minecraft . client . Minecraft ; 
 import net . minecraft . client . entity . EntityPlayerSP ; 
 import net . minecraft . client . gui . Gui ; 
 import net . minecraft . client . gui . GuiIngameMenu ; 
 + import net . minecraft . client . gui . GuiListWorldSelectionEntry ; 
 import net . minecraft . client . gui . GuiMainMenu ; 
 import net . minecraft . client . gui . GuiScreen ; 
 - import net . minecraft . client . gui . GuiSelectWorld ; 
 + import net . minecraft . client . gui . GuiWorldSelection ; 
 import net . minecraft . client . gui . ScaledResolution ; 
 import net . minecraft . client . gui . ServerListEntryNormal ; 
 import net . minecraft . client . multiplayer . GuiConnecting ; 
 import net . minecraft . client . multiplayer . ServerData ; 
 import net . minecraft . client . multiplayer . WorldClient ; 
 import net . minecraft . client . network . NetHandlerPlayClient ; 
 - import net . minecraft . client . network . OldServerPinger ; 
 + import net . minecraft . client . network . ServerPinger ; 
 import net . minecraft . client . renderer . GlStateManager ; 
 import net . minecraft . client . resources . AbstractResourcePack ; 
 import net . minecraft . client . resources . FallbackResourceManager ; 
 @ @ - 67 , 6 + 68 , 7 @ @ import net . minecraft . util . IThreadListener ; 
 import net . minecraft . util . ResourceLocation ; 
 import net . minecraft . util . StringUtils ; 
 import net . minecraft . world . WorldSettings ; 
 + import net . minecraft . world . storage . SaveFormatComparator ; 
 import net . minecraft . world . storage . SaveFormatOld ; 
 import net . minecraftforge . client . model . animation . Animation ; 
 import net . minecraftforge . fml . client . registry . RenderingRegistry ; 
 @ @ - 123 , 7 + 125 , 7 @ @ import com . google . gson . JsonObject ; 
 / * * 
 * Handles primary communication from hooked code into the system 
 * 
 - * The FML entry point is { @ link # beginMinecraftLoading ( Minecraft , List ) } called from 
 + * The FML entry point is { @ link # beginMinecraftLoading ( Minecraft , List , IReloadableResourceManager ) } called from 
 * { @ link Minecraft } 
 * 
 * Obfuscated code should focus on this class and other members of the " server " 
 @ @ - 666 , 9 + 668 , 9 @ @ public class FMLClientHandler implements IFMLSidedHandler 
 { 
 return new File ( client . mcDataDir , " saves " ) ; 
 } 
 - public void tryLoadExistingWorld ( GuiSelectWorld selectWorldGUI , String dirName , String saveName ) 
 + public void tryLoadExistingWorld ( GuiWorldSelection selectWorldGUI , SaveFormatComparator comparator ) 
 { 
 - File dir = new File ( getSavesDir ( ) , dirName ) ; 
 + File dir = new File ( getSavesDir ( ) , comparator . getFileName ( ) ) ; 
 NBTTagCompound leveldat ; 
 try 
 { 
 @ @ - 682 , 20 + 684 , 20 @ @ public class FMLClientHandler implements IFMLSidedHandler 
 } 
 catch ( Exception e1 ) 
 { 
 - FMLLog . warning ( " There appears to be a problem loading the save % s , both level files are unreadable . " , dirName ) ; 
 + FMLLog . warning ( " There appears to be a problem loading the save % s , both level files are unreadable . " , comparator . getFileName ( ) ) ; 
 return ; 
 } 
 } 
 NBTTagCompound fmlData = leveldat . getCompoundTag ( " FML " ) ; 
 if ( fmlData . hasKey ( " ModItemData " ) ) 
 { 
 - showGuiScreen ( new GuiOldSaveLoadConfirm ( dirName , saveName , selectWorldGUI ) ) ; 
 + showGuiScreen ( new GuiOldSaveLoadConfirm ( comparator . getFileName ( ) , comparator . getDisplayName ( ) , selectWorldGUI ) ) ; 
 } 
 else 
 { 
 try 
 { 
 - client . launchIntegratedServer ( dirName , saveName , ( WorldSettings ) null ) ; 
 + client . launchIntegratedServer ( comparator . getFileName ( ) , comparator . getDisplayName ( ) , ( WorldSettings ) null ) ; 
 } 
 catch ( StartupQuery . AbortedException e ) 
 { 
 @ @ - 820 , 7 + 822 , 7 @ @ public class FMLClientHandler implements IFMLSidedHandler 
 public void connectToServerAtStartup ( String host , int port ) 
 { 
 setupServerList ( ) ; 
 - OldServerPinger osp = new OldServerPinger ( ) ; 
 + ServerPinger osp = new ServerPinger ( ) ; 
 ServerData serverData = new ServerData ( " Command Line " , host + " : " + port , false ) ; 
 try 
 { 
 diff - - git a / src / main / java / net / minecraftforge / fml / client / GuiOldSaveLoadConfirm . java b / src / main / java / net / minecraftforge / fml / client / GuiOldSaveLoadConfirm . java 
 index ccc4269 . . 9244883 100644 
 - - - a / src / main / java / net / minecraftforge / fml / client / GuiOldSaveLoadConfirm . java 
 + + + b / src / main / java / net / minecraftforge / fml / client / GuiOldSaveLoadConfirm . java 
 @ @ - 6 , 7 + 6 , 7 @ @ import java . io . IOException ; 
 import net . minecraft . client . gui . GuiButton ; 
 import net . minecraft . client . gui . GuiLabel ; 
 import net . minecraft . client . gui . GuiScreen ; 
 - import net . minecraft . client . gui . GuiSelectWorld ; 
 + import net . minecraft . client . gui . GuiWorldSelection ; 
 import net . minecraft . client . gui . GuiYesNo ; 
 import net . minecraft . client . gui . GuiYesNoCallback ; 
 import net . minecraft . world . WorldSettings ; 
 @ @ - 57 , 7 + 57 , 6 @ @ public class GuiOldSaveLoadConfirm extends GuiYesNo implements GuiYesNoCallback 
 { 
 if ( button . id = = 1 ) 
 { 
 - ObfuscationReflectionHelper . setPrivateValue ( GuiSelectWorld . class , ( GuiSelectWorld ) parentScreen , false , " field _ " + " 146634 _ i " ) ; 
 FMLClientHandler . instance ( ) . showGuiScreen ( parent ) ; 
 } 
 else

NEAREST DIFF:
diff - - git a / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 index 169f32d . . d67753a 100644 
 - - - a / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 + + + b / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 @ @ - 28 , 7 + 28 , 7 @ @ 
 this . field _ 71446 _ o = new TextureManager ( this . field _ 110451 _ am ) ; 
 this . field _ 110451 _ am . func _ 110542 _ a ( this . field _ 71446 _ o ) ; 
 this . field _ 147127 _ av = new SoundHandler ( this . field _ 110451 _ am , this . field _ 71474 _ y ) ; 
 - @ @ - 508 , 6 + 513 , 7 @ @ 
 + @ @ - 508 , 12 + 513 , 13 @ @ 
 this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110576 _ c , new TextureMap ( 1 , " textures / items " ) ) ; 
 GL11 . glViewport ( 0 , 0 , this . field _ 71443 _ c , this . field _ 71440 _ d ) ; 
 this . field _ 71452 _ i = new EffectRenderer ( this . field _ 71441 _ e , this . field _ 71446 _ o ) ; 
 @ @ - 36 , 6 + 36 , 13 @ @ 
 this . func _ 71361 _ d ( " Post startup " ) ; 
 this . field _ 71456 _ v = new GuiIngame ( this ) ; 
 
 + if ( this . field _ 71475 _ ae ! = null ) 
 + { 
 + - this . func _ 147108 _ a ( new GuiConnecting ( new GuiMainMenu ( ) , this , this . field _ 71475 _ ae , this . field _ 71477 _ af ) ) ; 
 + + FMLClientHandler . instance ( ) . connectToServerAtStartup ( this . field _ 71475 _ ae , this . field _ 71477 _ af ) ; 
 + } 
 + else 
 + { 
 @ @ - 527 , 6 + 533 , 7 @ @ 
 this . func _ 71352 _ k ( ) ; 
 } 
 diff - - git a / fml / patches / minecraft / net / minecraft / client / gui / GuiMultiplayer . java . patch b / fml / patches / minecraft / net / minecraft / client / gui / GuiMultiplayer . java . patch 
 index 43b0b5b . . a65e90b 100644 
 - - - a / fml / patches / minecraft / net / minecraft / client / gui / GuiMultiplayer . java . patch 
 + + + b / fml / patches / minecraft / net / minecraft / client / gui / GuiMultiplayer . java . patch 
 @ @ - 16 , 3 + 16 , 12 @ @ 
 } 
 
 public void func _ 73866 _ w _ ( ) 
 + @ @ - 366 , 7 + 368 , 7 @ @ 
 + 
 + private void func _ 146791 _ a ( ServerData p _ 146791 _ 1 _ ) 
 + { 
 + - this . field _ 146297 _ k . func _ 147108 _ a ( new GuiConnecting ( this , this . field _ 146297 _ k , p _ 146791 _ 1 _ ) ) ; 
 + + FMLClientHandler . instance ( ) . connectToServer ( this , p _ 146791 _ 1 _ ) ; 
 + } 
 + 
 + public void func _ 146790 _ a ( int p _ 146790 _ 1 _ ) 
 diff - - git a / fml / src / main / java / cpw / mods / fml / client / FMLClientHandler . java b / fml / src / main / java / cpw / mods / fml / client / FMLClientHandler . java 
 index 1b1688a . . 619d8d2 100644 
 - - - a / fml / src / main / java / cpw / mods / fml / client / FMLClientHandler . java 
 + + + b / fml / src / main / java / cpw / mods / fml / client / FMLClientHandler . java 
 @ @ - 18 , 16 + 18 , 21 @ @ import java . util . Collections ; 
 import java . util . List ; 
 import java . util . Map ; 
 import java . util . Map . Entry ; 
 + import java . util . concurrent . CountDownLatch ; 
 + import java . util . concurrent . TimeUnit ; 
 import java . util . logging . Logger ; 
 import net . minecraft . client . Minecraft ; 
 import net . minecraft . client . entity . EntityClientPlayerMP ; 
 import net . minecraft . client . gui . Gui ; 
 import net . minecraft . client . gui . GuiIngameMenu ; 
 + import net . minecraft . client . gui . GuiMainMenu ; 
 import net . minecraft . client . gui . GuiScreen ; 
 import net . minecraft . client . gui . GuiSelectWorld ; 
 import net . minecraft . client . gui . ServerListEntryNormal ; 
 + import net . minecraft . client . multiplayer . GuiConnecting ; 
 import net . minecraft . client . multiplayer . ServerData ; 
 import net . minecraft . client . multiplayer . WorldClient ; 
 + import net . minecraft . client . network . OldServerPinger ; 
 import net . minecraft . client . renderer . entity . Render ; 
 import net . minecraft . client . renderer . entity . RenderManager ; 
 import net . minecraft . client . resources . IReloadableResourceManager ; 
 @ @ - 590 , 9 + 595 , 11 @ @ public class FMLClientHandler implements IFMLSidedHandler 
 } 
 serverDataTag . put ( data , new ExtendedServerListData ( " VANILLA " , false , - 1 , ! moddedClientAllowed ) ) ; 
 } 
 + startupConnectionData . countDown ( ) ; 
 } 
 
 private static final ResourceLocation iconSheet = new ResourceLocation ( " fml : textures / gui / icons . png " ) ; 
 + private static final CountDownLatch startupConnectionData = new CountDownLatch ( 1 ) ; 
 
 public String enhanceServerListEntry ( ServerListEntryNormal serverListEntry , ServerData serverEntry , int x , int width , int y , int relativeMouseX , int relativeMouseY ) 
 { 
 @ @ - 647 , 4 + 654 , 35 @ @ public class FMLClientHandler implements IFMLSidedHandler 
 { 
 return description . endsWith ( " : NOFML § r " ) ? description . substring ( 0 , description . length ( ) - 8 ) + " § r " : description ; 
 } 
 + 
 + public void connectToServerAtStartup ( String host , int port ) 
 + { 
 + setupServerList ( ) ; 
 + OldServerPinger osp = new OldServerPinger ( ) ; 
 + ServerData serverData = new ServerData ( " Command Line " , host + " : " + port ) ; 
 + try 
 + { 
 + osp . func _ 147224 _ a ( serverData ) ; 
 + startupConnectionData . await ( 30 , TimeUnit . SECONDS ) ; 
 + } 
 + catch ( Exception e ) 
 + { 
 + showGuiScreen ( new GuiConnecting ( new GuiMainMenu ( ) , client , host , port ) ) ; 
 + return ; 
 + } 
 + connectToServer ( new GuiMainMenu ( ) , serverData ) ; 
 + } 
 + 
 + public void connectToServer ( GuiScreen guiMultiplayer , ServerData serverEntry ) 
 + { 
 + ExtendedServerListData extendedData = serverDataTag . get ( serverEntry ) ; 
 + if ( extendedData . isBlocked ) 
 + { 
 + showGuiScreen ( new GuiAccessDenied ( guiMultiplayer , serverEntry ) ) ; 
 + } 
 + else 
 + { 
 + showGuiScreen ( new GuiConnecting ( guiMultiplayer , client , serverEntry ) ) ; 
 + } 
 + } 
 }
