BLEU SCORE: 0.02286956778061902

TEST MSG: Fixed issue where config folder would not be created before SplashProgress tried to read from it .
GENERATED MSG: Try and fix invalid framebuffer depth / stencil setup , Thanks Ivoforce . Closes # 1032

TEST DIFF (one line): diff - - git a / . gitignore b / . gitignore <nl> index f99fd0d . . 850a6e9 100644 <nl> - - - a / . gitignore <nl> + + + b / . gitignore <nl> @ @ - 3 , 6 + 3 , 9 @ @ <nl> / . settings <nl> / . classpath <nl> <nl> + # In case people make their workspace in the repo <nl> + / eclipse / <nl> + <nl> # idea <nl> / . idea <nl> * . iml <nl> diff - - git a / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> index 261adbf . . 28fcaf8 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> @ @ - 8 , 7 + 8 , 7 @ @ <nl> this . field _ 71459 _ aj = p _ i45547 _ 1 _ . field _ 178741 _ d . field _ 178756 _ a ; <nl> this . field _ 71443 _ c = p _ i45547 _ 1 _ . field _ 178743 _ b . field _ 178764 _ a > 0 ? p _ i45547 _ 1 _ . field _ 178743 _ b . field _ 178764 _ a : 1 ; <nl> this . field _ 71440 _ d = p _ i45547 _ 1 _ . field _ 178743 _ b . field _ 178762 _ b > 0 ? p _ i45547 _ 1 _ . field _ 178743 _ b . field _ 178762 _ b : 1 ; <nl> - @ @ - 410 , 10 + 409 , 10 @ @ <nl> + @ @ - 411 , 10 + 410 , 10 @ @ <nl> this . field _ 110451 _ am = new SimpleReloadableResourceManager ( this . field _ 110452 _ an ) ; <nl> this . field _ 135017 _ as = new LanguageManager ( this . field _ 110452 _ an , this . field _ 71474 _ y . field _ 74363 _ ab ) ; <nl> this . field _ 110451 _ am . func _ 110542 _ a ( this . field _ 135017 _ as ) ; <nl> @ @ - 21 , 7 + 21 , 7 @ @ <nl> this . func _ 175595 _ al ( ) ; <nl> this . field _ 152350 _ aA = new SkinManager ( this . field _ 71446 _ o , new File ( this . field _ 110446 _ Y , " skins " ) , this . field _ 152355 _ az ) ; <nl> this . field _ 71469 _ aa = new AnvilSaveConverter ( new File ( this . field _ 71412 _ D , " saves " ) ) ; <nl> - @ @ - 449 , 6 + 448 , 8 @ @ <nl> + @ @ - 450 , 6 + 449 , 8 @ @ <nl> } <nl> } ) ; <nl> this . field _ 71417 _ B = new MouseHelper ( ) ; <nl> @ @ - 30 , 7 + 30 , 7 @ @ <nl> this . func _ 71361 _ d ( " Pre startup " ) ; <nl> GlStateManager . func _ 179098 _ w ( ) ; <nl> GlStateManager . func _ 179103 _ j ( 7425 ) ; <nl> - @ @ - 462 , 17 + 463 , 21 @ @ <nl> + @ @ - 463 , 17 + 464 , 21 @ @ <nl> GlStateManager . func _ 179096 _ D ( ) ; <nl> GlStateManager . func _ 179128 _ n ( 5888 ) ; <nl> this . func _ 71361 _ d ( " Startup " ) ; <nl> @ @ - 53 , 7 + 53 , 7 @ @ <nl> this . field _ 71460 _ t = new EntityRenderer ( this , this . field _ 110451 _ am ) ; <nl> this . field _ 110451 _ am . func _ 110542 _ a ( this . field _ 71460 _ t ) ; <nl> this . field _ 175618 _ aM = new BlockRendererDispatcher ( this . field _ 175617 _ aL . func _ 174954 _ c ( ) , this . field _ 71474 _ y ) ; <nl> - @ @ - 482 , 22 + 487 , 25 @ @ <nl> + @ @ - 483 , 22 + 488 , 25 @ @ <nl> this . field _ 71458 _ u = new GuiAchievement ( this ) ; <nl> GlStateManager . func _ 179083 _ b ( 0 , 0 , this . field _ 71443 _ c , this . field _ 71440 _ d ) ; <nl> this . field _ 71452 _ i = new EffectRenderer ( this . field _ 71441 _ e , this . field _ 71446 _ o ) ; <nl> @ @ - 82 , 7 + 82 , 7 @ @ <nl> if ( this . field _ 71474 _ y . field _ 74353 _ u & & ! this . field _ 71431 _ Q ) <nl> { <nl> this . func _ 71352 _ k ( ) ; <nl> - @ @ - 681 , 21 + 689 , 23 @ @ <nl> + @ @ - 682 , 21 + 690 , 23 @ @ <nl> File file2 = new File ( file1 , " crash - " + ( new SimpleDateFormat ( " yyyy - MM - dd _ HH . mm . ss " ) ) . format ( new Date ( ) ) + " - client . txt " ) ; <nl> Bootstrap . func _ 179870 _ a ( p _ 71377 _ 1 _ . func _ 71502 _ e ( ) ) ; <nl> <nl> @ @ - 109 , 7 + 109 , 7 @ @ <nl> } <nl> <nl> public boolean func _ 152349 _ b ( ) <nl> - @ @ - 887 , 11 + 897 , 6 @ @ <nl> + @ @ - 888 , 11 + 898 , 6 @ @ <nl> <nl> public void func _ 147108 _ a ( GuiScreen p _ 147108 _ 1 _ ) <nl> { <nl> @ @ - 121 , 7 + 121 , 7 @ @ <nl> if ( p _ 147108 _ 1 _ = = null & & this . field _ 71441 _ e = = null ) <nl> { <nl> p _ 147108 _ 1 _ = new GuiMainMenu ( ) ; <nl> - @ @ - 901 , 6 + 906 , 17 @ @ <nl> + @ @ - 902 , 6 + 907 , 17 @ @ <nl> p _ 147108 _ 1 _ = new GuiGameOver ( ) ; <nl> } <nl> <nl> @ @ - 139 , 7 + 139 , 7 @ @ <nl> if ( p _ 147108 _ 1 _ instanceof GuiMainMenu ) <nl> { <nl> this . field _ 71474 _ y . field _ 74330 _ P = false ; <nl> - @ @ - 999 , 7 + 1015 , 7 @ @ <nl> + @ @ - 1000 , 7 + 1016 , 7 @ @ <nl> { <nl> while ( ! this . field _ 152351 _ aB . isEmpty ( ) ) <nl> { <nl> @ @ - 148 , 7 + 148 , 7 @ @ <nl> } <nl> } <nl> <nl> - @ @ - 1034 , 9 + 1050 , 11 @ @ <nl> + @ @ - 1035 , 9 + 1051 , 11 @ @ <nl> <nl> if ( ! this . field _ 71454 _ w ) <nl> { <nl> @ @ - 160 , 7 + 160 , 7 @ @ <nl> } <nl> <nl> this . field _ 71424 _ I . func _ 76319 _ b ( ) ; <nl> - @ @ - 1382 , 7 + 1400 , 7 @ @ <nl> + @ @ - 1383 , 7 + 1401 , 7 @ @ <nl> <nl> if ( this . field _ 71441 _ e . func _ 180495 _ p ( blockpos ) . func _ 177230 _ c ( ) . func _ 149688 _ o ( ) ! = Material . field _ 151579 _ a & & this . field _ 71442 _ b . func _ 180512 _ c ( blockpos , this . field _ 71476 _ x . field _ 178784 _ b ) ) <nl> { <nl> @ @ - 169 , 7 + 169 , 7 @ @ <nl> this . field _ 71439 _ g . func _ 71038 _ i ( ) ; <nl> } <nl> } <nl> - @ @ - 1462 , 15 + 1480 , 19 @ @ <nl> + @ @ - 1463 , 15 + 1481 , 19 @ @ <nl> case 2 : <nl> BlockPos blockpos = this . field _ 71476 _ x . func _ 178782 _ a ( ) ; <nl> <nl> @ @ - 190 , 7 + 190 , 7 @ @ <nl> <nl> if ( itemstack = = null ) <nl> { <nl> - @ @ - 1493 , 7 + 1515 , 8 @ @ <nl> + @ @ - 1494 , 7 + 1516 , 8 @ @ <nl> { <nl> ItemStack itemstack1 = this . field _ 71439 _ g . field _ 71071 _ by . func _ 70448 _ g ( ) ; <nl> <nl> @ @ - 200 , 7 + 200 , 7 @ @ <nl> { <nl> this . field _ 71460 _ t . field _ 78516 _ c . func _ 78445 _ c ( ) ; <nl> } <nl> - @ @ - 1591 , 6 + 1614 , 8 @ @ <nl> + @ @ - 1592 , 6 + 1615 , 8 @ @ <nl> - - this . field _ 71467 _ ac ; <nl> } <nl> <nl> @ @ - 209 , 7 + 209 , 7 @ @ <nl> this . field _ 71424 _ I . func _ 76320 _ a ( " gui " ) ; <nl> <nl> if ( ! this . field _ 71445 _ n ) <nl> - @ @ - 1689 , 6 + 1714 , 8 @ @ <nl> + @ @ - 1690 , 6 + 1715 , 8 @ @ <nl> <nl> while ( Mouse . next ( ) ) <nl> { <nl> @ @ - 218 , 7 + 218 , 7 @ @ <nl> i = Mouse . getEventButton ( ) ; <nl> KeyBinding . func _ 74510 _ a ( i - 100 , Mouse . getEventButtonState ( ) ) ; <nl> <nl> - @ @ - 1744 , 6 + 1771 , 7 @ @ <nl> + @ @ - 1745 , 6 + 1772 , 7 @ @ <nl> this . field _ 71462 _ r . func _ 146274 _ d ( ) ; <nl> } <nl> } <nl> @ @ - 226 , 7 + 226 , 7 @ @ <nl> } <nl> <nl> if ( this . field _ 71429 _ W > 0 ) <nl> - @ @ - 1920 , 6 + 1948 , 7 @ @ <nl> + @ @ - 1921 , 6 + 1949 , 7 @ @ <nl> } <nl> } <nl> } <nl> @ @ - 234 , 7 + 234 , 7 @ @ <nl> } <nl> <nl> for ( i = 0 ; i < 9 ; + + i ) <nl> - @ @ - 2120 , 12 + 2149 , 15 @ @ <nl> + @ @ - 2121 , 12 + 2150 , 15 @ @ <nl> this . field _ 71453 _ ak . func _ 74428 _ b ( ) ; <nl> } <nl> <nl> @ @ - 250 , 7 + 250 , 7 @ @ <nl> this . func _ 71403 _ a ( ( WorldClient ) null ) ; <nl> System . gc ( ) ; <nl> ISaveHandler isavehandler = this . field _ 71469 _ aa . func _ 75804 _ a ( p _ 71371 _ 1 _ , false ) ; <nl> - @ @ - 2161 , 6 + 2193 , 12 @ @ <nl> + @ @ - 2162 , 6 + 2194 , 12 @ @ <nl> <nl> while ( ! this . field _ 71437 _ Z . func _ 71200 _ ad ( ) ) <nl> { <nl> @ @ - 263 , 7 + 263 , 7 @ @ <nl> String s2 = this . field _ 71437 _ Z . func _ 71195 _ b _ ( ) ; <nl> <nl> if ( s2 ! = null ) <nl> - @ @ - 2186 , 8 + 2224 , 14 @ @ <nl> + @ @ - 2187 , 8 + 2225 , 14 @ @ <nl> SocketAddress socketaddress = this . field _ 71437 _ Z . func _ 147137 _ ag ( ) . func _ 151270 _ a ( ) ; <nl> NetworkManager networkmanager = NetworkManager . func _ 150722 _ a ( socketaddress ) ; <nl> networkmanager . func _ 150719 _ a ( new NetHandlerLoginClient ( networkmanager , this , ( GuiScreen ) null ) ) ; <nl> @ @ - 280 , 7 + 280 , 7 @ @ <nl> this . field _ 71453 _ ak = networkmanager ; <nl> } <nl> <nl> - @ @ - 2198 , 6 + 2242 , 8 @ @ <nl> + @ @ - 2199 , 6 + 2243 , 8 @ @ <nl> <nl> public void func _ 71353 _ a ( WorldClient p _ 71353 _ 1 _ , String p _ 71353 _ 2 _ ) <nl> { <nl> @ @ - 289 , 7 + 289 , 7 @ @ <nl> if ( p _ 71353 _ 1 _ = = null ) <nl> { <nl> NetHandlerPlayClient nethandlerplayclient = this . func _ 147114 _ u ( ) ; <nl> - @ @ - 2211 , 6 + 2257 , 18 @ @ <nl> + @ @ - 2212 , 6 + 2258 , 18 @ @ <nl> { <nl> this . field _ 71437 _ Z . func _ 71263 _ m ( ) ; <nl> this . field _ 71437 _ Z . func _ 175592 _ a ( ) ; <nl> @ @ - 308 , 7 + 308 , 7 @ @ <nl> } <nl> <nl> this . field _ 71437 _ Z = null ; <nl> - @ @ - 2237 , 6 + 2295 , 7 @ @ <nl> + @ @ - 2238 , 6 + 2296 , 7 @ @ <nl> <nl> this . func _ 71351 _ a ( ( ServerData ) null ) ; <nl> this . field _ 71455 _ al = false ; <nl> @ @ - 316 , 7 + 316 , 7 @ @ <nl> } <nl> <nl> this . field _ 147127 _ av . func _ 147690 _ c ( ) ; <nl> - @ @ - 2341 , 134 + 2400 , 11 @ @ <nl> + @ @ - 2342 , 134 + 2401 , 11 @ @ <nl> if ( this . field _ 71476 _ x ! = null ) <nl> { <nl> boolean flag = this . field _ 71439 _ g . field _ 71075 _ bZ . field _ 75098 _ d ; <nl> @ @ - 453 , 23 + 453 , 24 @ @ <nl> if ( flag ) <nl> { <nl> int j = this . field _ 71439 _ g . field _ 71069 _ bz . field _ 75151 _ b . size ( ) - 9 + inventoryplayer . field _ 70461 _ c ; <nl> - @ @ - 2724 , 8 + 2660 , 11 @ @ <nl> - p _ 70001 _ 1 _ . func _ 152767 _ b ( " gl _ max _ texture _ size " , Integer . valueOf ( func _ 71369 _ N ( ) ) ) ; <nl> - } <nl> + @ @ - 2727 , 18 + 2663 , 8 @ @ <nl> <nl> - + / / Forge : Adds a optimization to the getGLMaximumTextureSize , only calculate it once . <nl> - + private static int max _ texture _ size = - 1 ; <nl> public static int func _ 71369 _ N ( ) <nl> { <nl> - + if ( max _ texture _ size ! = - 1 ) return max _ texture _ size ; <nl> - for ( int i = 16384 ; i > 0 ; i > > = 1 ) <nl> - { <nl> - GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; <nl> - @ @ - 2733 , 6 + 2672 , 7 @ @ <nl> + - for ( int i = 16384 ; i > 0 ; i > > = 1 ) <nl> + - { <nl> + - GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; <nl> + - int j = GL11 . glGetTexLevelParameteri ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ TEXTURE _ WIDTH ) ; <nl> + - <nl> + - if ( j ! = 0 ) <nl> + - { <nl> + - return i ; <nl> + - } <nl> + - } <nl> + - <nl> + - return - 1 ; <nl> + + / / Forge we redirect this to our code which caches the value before any splash screen stuff is done . <nl> + + return net . minecraftforge . fml . client . SplashProgress . getMaxTextureSize ( ) ; <nl> + } <nl> <nl> - if ( j ! = 0 ) <nl> - { <nl> - + max _ texture _ size = i ; <nl> - return i ; <nl> - } <nl> - } <nl> + public boolean func _ 70002 _ Q ( ) <nl> diff - - git a / src / main / java / net / minecraftforge / fml / client / SplashProgress . java b / src / main / java / net / minecraftforge / fml / client / SplashProgress . java <nl> index cab9526 . . 5582f03 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / client / SplashProgress . java <nl> + + + b / src / main / java / net / minecraftforge / fml / client / SplashProgress . java <nl> @ @ - 60 , 6 + 60 , 7 @ @ import java . io . InputStream ; <nl> import java . io . PrintStream ; <nl> import java . io . PrintWriter ; <nl> import java . lang . Thread . UncaughtExceptionHandler ; <nl> + import java . nio . ByteBuffer ; <nl> import java . nio . IntBuffer ; <nl> import java . util . Iterator ; <nl> import java . util . Properties ; <nl> @ @ - 81 , 7 + 82 , 6 @ @ import net . minecraft . crash . CrashReport ; <nl> import net . minecraft . launchwrapper . Launch ; <nl> import net . minecraft . util . ResourceLocation ; <nl> import net . minecraftforge . fml . common . EnhancedRuntimeException ; <nl> - import net . minecraftforge . fml . common . EnhancedRuntimeException . WrappedPrintStream ; <nl> import net . minecraftforge . fml . common . FMLCommonHandler ; <nl> import net . minecraftforge . fml . common . FMLLog ; <nl> import net . minecraftforge . fml . common . ICrashCallable ; <nl> @ @ - 103 , 6 + 103 , 7 @ @ import org . lwjgl . util . glu . GLU ; <nl> * @ deprecated not a stable API , will break , don ' t use this yet <nl> * / <nl> @ Deprecated <nl> + @ SuppressWarnings ( " serial " ) <nl> public class SplashProgress <nl> { <nl> private static Drawable d ; <nl> @ @ - 159 , 6 + 160 , 11 @ @ public class SplashProgress <nl> public static void start ( ) <nl> { <nl> File configFile = new File ( Minecraft . getMinecraft ( ) . mcDataDir , " config / splash . properties " ) ; <nl> + <nl> + File parent = configFile . getParentFile ( ) ; <nl> + if ( ! parent . exists ( ) ) <nl> + parent . mkdirs ( ) ; <nl> + <nl> FileReader r = null ; <nl> config = new Properties ( ) ; <nl> try <nl> @ @ - 175 , 9 + 181 , 14 @ @ public class SplashProgress <nl> IOUtils . closeQuietly ( r ) ; <nl> } <nl> <nl> + / / Some system do not support this and have weird effects so we need to detect and disable by default . <nl> + / / The user can always force enable it if they want to take the responsibility for bugs . <nl> + / / For now macs derp so disable them . <nl> + boolean defaultEnabled = ! System . getProperty ( " os . name " ) . toLowerCase ( ) . contains ( " mac " ) ; <nl> + <nl> / / Enable if we have the flag , and there ' s either no optifine , or optifine has added a key to the blackboard ( " optifine . ForgeSplashCompatible " ) <nl> / / Optifine authors - add this key to the blackboard if you feel your modifications are now compatible with this code . <nl> - enabled = getBool ( " enabled " , true ) & & ( ( ! FMLClientHandler . instance ( ) . hasOptifine ( ) ) | | Launch . blackboard . containsKey ( " optifine . ForgeSplashCompatible " ) ) ; <nl> + enabled = getBool ( " enabled " , defaultEnabled ) & & ( ( ! FMLClientHandler . instance ( ) . hasOptifine ( ) ) | | Launch . blackboard . containsKey ( " optifine . ForgeSplashCompatible " ) ) ; <nl> rotate = getBool ( " rotate " , false ) ; <nl> logoOffset = getInt ( " logoOffset " , 0 ) ; <nl> backgroundColor = getHex ( " background " , 0xFFFFFF ) ; <nl> @ @ - 243 , 9 + 254 , 13 @ @ public class SplashProgress <nl> catch ( LWJGLException e ) <nl> { <nl> e . printStackTrace ( ) ; <nl> - throw new RuntimeException ( e ) ; <nl> + disableSplash ( e ) ; <nl> } <nl> - Thread mainThread = Thread . currentThread ( ) ; <nl> + <nl> + / / Call this ASAP if splash is enabled so that threading doesn ' t cause issues later <nl> + getMaxTextureSize ( ) ; <nl> + <nl> + / / Thread mainThread = Thread . currentThread ( ) ; <nl> thread = new Thread ( new Runnable ( ) <nl> { <nl> private final int barWidth = 400 ; <nl> @ @ - 478 , 6 + 493 , 22 @ @ public class SplashProgress <nl> checkThreadState ( ) ; <nl> } <nl> <nl> + private static int max _ texture _ size = - 1 ; <nl> + public static int getMaxTextureSize ( ) <nl> + { <nl> + if ( max _ texture _ size ! = - 1 ) return max _ texture _ size ; <nl> + for ( int i = 0x4000 ; i > 0 ; i > > = 1 ) <nl> + { <nl> + GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; <nl> + if ( GL11 . glGetTexLevelParameteri ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ TEXTURE _ WIDTH ) ! = 0 ) <nl> + { <nl> + max _ texture _ size = i ; <nl> + return i ; <nl> + } <nl> + } <nl> + return - 1 ; <nl> + } <nl> + <nl> private static void checkThreadState ( ) <nl> { <nl> if ( thread . getState ( ) = = Thread . State . TERMINATED | | threadError ! = null ) <nl> @ @ - 549 , 34 + 580 , 39 @ @ public class SplashProgress <nl> catch ( Exception e ) <nl> { <nl> e . printStackTrace ( ) ; <nl> - if ( disableSplash ( ) ) <nl> + disableSplash ( e ) ; <nl> + } <nl> + } <nl> + <nl> + private static boolean disableSplash ( Exception e ) <nl> + { <nl> + if ( disableSplash ( ) ) <nl> + { <nl> + throw new EnhancedRuntimeException ( e ) <nl> { <nl> - throw new EnhancedRuntimeException ( e ) <nl> + @ Override <nl> + protected void printStackTrace ( WrappedPrintStream stream ) <nl> { <nl> - @ Override <nl> - protected void printStackTrace ( WrappedPrintStream stream ) <nl> - { <nl> - stream . println ( " SplashProgress has detected a error loading Minecraft . " ) ; <nl> - stream . println ( " This can sometimes be caused by bad video drivers . " ) ; <nl> - stream . println ( " We have automatically disabeled the new Splash Screen in config / splash . properties . " ) ; <nl> - stream . println ( " Try reloading minecraft before reporting any errors . " ) ; <nl> - } <nl> - } ; <nl> - } <nl> - else <nl> + stream . println ( " SplashProgress has detected a error loading Minecraft . " ) ; <nl> + stream . println ( " This can sometimes be caused by bad video drivers . " ) ; <nl> + stream . println ( " We have automatically disabeled the new Splash Screen in config / splash . properties . " ) ; <nl> + stream . println ( " Try reloading minecraft before reporting any errors . " ) ; <nl> + } <nl> + } ; <nl> + } <nl> + else <nl> + { <nl> + throw new EnhancedRuntimeException ( e ) <nl> { <nl> - throw new EnhancedRuntimeException ( e ) <nl> + @ Override <nl> + protected void printStackTrace ( WrappedPrintStream stream ) <nl> { <nl> - @ Override <nl> - protected void printStackTrace ( WrappedPrintStream stream ) <nl> - { <nl> - stream . println ( " SplashProgress has detected a error loading Minecraft . " ) ; <nl> - stream . println ( " This can sometimes be caused by bad video drivers . " ) ; <nl> - stream . println ( " Please try disabeling the new Splash Screen in config / splash . properties . " ) ; <nl> - stream . println ( " After doing so , try reloading minecraft before reporting any errors . " ) ; <nl> - } <nl> - } ; <nl> - } <nl> + stream . println ( " SplashProgress has detected a error loading Minecraft . " ) ; <nl> + stream . println ( " This can sometimes be caused by bad video drivers . " ) ; <nl> + stream . println ( " Please try disabeling the new Splash Screen in config / splash . properties . " ) ; <nl> + stream . println ( " After doing so , try reloading minecraft before reporting any errors . " ) ; <nl> + } <nl> + } ; <nl> } <nl> } <nl> <nl> @ @ - 587 , 7 + 623 , 6 @ @ public class SplashProgress <nl> if ( ! parent . exists ( ) ) <nl> parent . mkdirs ( ) ; <nl> <nl> - FileReader r = null ; <nl> enabled = false ; <nl> config . setProperty ( " enabled " , " false " ) ; <nl> <nl> @ @ - 623 , 6 + 658 , 7 @ @ public class SplashProgress <nl> <nl> private static final IntBuffer buf = BufferUtils . createIntBuffer ( 4 * 1024 * 1024 ) ; <nl> <nl> + @ SuppressWarnings ( " unused " ) <nl> private static class Texture <nl> { <nl> private final ResourceLocation location ;
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> index b69cba7 . . b1c023d 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / Minecraft . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / Minecraft . java <nl> - @ @ - 134 , 6 + 134 , 14 @ @ <nl> + @ @ - 135 , 6 + 135 , 14 @ @ <nl> import net . minecraft . world . storage . ISaveFormat ; <nl> import net . minecraft . world . storage . ISaveHandler ; <nl> import net . minecraft . world . storage . WorldInfo ; <nl> @ @ - 15 , 7 + 15 , 7 @ @ <nl> import org . apache . logging . log4j . LogManager ; <nl> import org . apache . logging . log4j . Logger ; <nl> import org . lwjgl . LWJGLException ; <nl> - @ @ - 245 , 7 + 253 , 7 @ @ <nl> + @ @ - 246 , 7 + 254 , 7 @ @ <nl> this . func _ 71389 _ H ( ) ; <nl> this . field _ 71449 _ j = p _ i1014 _ 1 _ ; <nl> field _ 147123 _ G . info ( " Setting user : " + p _ i1014 _ 1 _ . func _ 111285 _ a ( ) ) ; <nl> @ @ - 24 , 7 + 24 , 7 @ @ <nl> this . field _ 71459 _ aj = p _ i1014 _ 5 _ ; <nl> this . field _ 71443 _ c = p _ i1014 _ 2 _ ; <nl> this . field _ 71440 _ d = p _ i1014 _ 3 _ ; <nl> - @ @ - 419 , 7 + 427 , 7 @ @ <nl> + @ @ - 417 , 7 + 425 , 7 @ @ <nl> <nl> try <nl> { <nl> @ @ - 33 , 7 + 33 , 7 @ @ <nl> } <nl> catch ( LWJGLException lwjglexception ) <nl> { <nl> - @ @ - 518 , 7 + 526 , 7 @ @ <nl> + @ @ - 516 , 7 + 524 , 7 @ @ <nl> this . field _ 71452 _ i = new EffectRenderer ( this . field _ 71441 _ e , this . field _ 71446 _ o ) ; <nl> FMLClientHandler . instance ( ) . finishMinecraftLoading ( ) ; <nl> this . func _ 71361 _ d ( " Post startup " ) ; <nl> @ @ - 42 , 7 + 42 , 7 @ @ <nl> <nl> if ( this . field _ 71475 _ ae ! = null ) <nl> { <nl> - @ @ - 701 , 11 + 709 , 6 @ @ <nl> + @ @ - 699 , 11 + 707 , 6 @ @ <nl> <nl> public void func _ 147108 _ a ( GuiScreen p _ 147108 _ 1 _ ) <nl> { <nl> @ @ - 54 , 7 + 54 , 7 @ @ <nl> if ( p _ 147108 _ 1 _ = = null & & this . field _ 71441 _ e = = null ) <nl> { <nl> p _ 147108 _ 1 _ = new GuiMainMenu ( ) ; <nl> - @ @ - 715 , 6 + 718 , 17 @ @ <nl> + @ @ - 713 , 6 + 716 , 17 @ @ <nl> p _ 147108 _ 1 _ = new GuiGameOver ( ) ; <nl> } <nl> <nl> @ @ - 72 , 7 + 72 , 7 @ @ <nl> if ( p _ 147108 _ 1 _ instanceof GuiMainMenu ) <nl> { <nl> this . field _ 71474 _ y . field _ 74330 _ P = false ; <nl> - @ @ - 1297 , 7 + 1311 , 7 @ @ <nl> + @ @ - 1295 , 7 + 1309 , 7 @ @ <nl> <nl> if ( this . field _ 71439 _ g . func _ 82246 _ f ( i , j , k ) ) <nl> { <nl> @ @ - 81 , 7 + 81 , 7 @ @ <nl> this . field _ 71439 _ g . func _ 71038 _ i ( ) ; <nl> } <nl> } <nl> - @ @ - 1378 , 11 + 1392 , 12 @ @ <nl> + @ @ - 1376 , 11 + 1390 , 12 @ @ <nl> int j = this . field _ 71476 _ x . field _ 72312 _ c ; <nl> int k = this . field _ 71476 _ x . field _ 72309 _ d ; <nl> <nl> @ @ - 96 , 7 + 96 , 7 @ @ <nl> { <nl> flag = false ; <nl> this . field _ 71439 _ g . func _ 71038 _ i ( ) ; <nl> - @ @ - 1409 , 7 + 1424 , 8 @ @ <nl> + @ @ - 1407 , 7 + 1422 , 8 @ @ <nl> { <nl> ItemStack itemstack1 = this . field _ 71439 _ g . field _ 71071 _ by . func _ 70448 _ g ( ) ; <nl> <nl> @ @ - 106 , 7 + 106 , 7 @ @ <nl> { <nl> this . field _ 71460 _ t . field _ 78516 _ c . func _ 78445 _ c ( ) ; <nl> } <nl> - @ @ - 1608 , 6 + 1624 , 8 @ @ <nl> + @ @ - 1606 , 6 + 1622 , 8 @ @ <nl> <nl> while ( Mouse . next ( ) ) <nl> { <nl> @ @ - 115 , 7 + 115 , 7 @ @ <nl> i = Mouse . getEventButton ( ) ; <nl> <nl> if ( field _ 142025 _ a & & i = = 0 & & ( Keyboard . isKeyDown ( 29 ) | | Keyboard . isKeyDown ( 157 ) ) ) <nl> - @ @ - 2075 , 6 + 2093 , 11 @ @ <nl> + @ @ - 2079 , 6 + 2097 , 11 @ @ <nl> <nl> public void func _ 71353 _ a ( WorldClient p _ 71353 _ 1 _ , String p _ 71353 _ 2 _ ) <nl> { <nl> @ @ - 127 , 7 + 127 , 7 @ @ <nl> if ( p _ 71353 _ 1 _ = = null ) <nl> { <nl> NetHandlerPlayClient nethandlerplayclient = this . func _ 147114 _ u ( ) ; <nl> - @ @ - 2087 , 6 + 2110 , 18 @ @ <nl> + @ @ - 2091 , 6 + 2114 , 18 @ @ <nl> if ( this . field _ 71437 _ Z ! = null ) <nl> { <nl> this . field _ 71437 _ Z . func _ 71263 _ m ( ) ; <nl> @ @ - 146 , 7 + 146 , 7 @ @ <nl> } <nl> <nl> this . field _ 71437 _ Z = null ; <nl> - @ @ - 2235 , 113 + 2270 , 10 @ @ <nl> + @ @ - 2239 , 113 + 2274 , 10 @ @ <nl> if ( this . field _ 71476 _ x ! = null ) <nl> { <nl> boolean flag = this . field _ 71439 _ g . field _ 71075 _ bZ . field _ 75098 _ d ; <nl> @ @ - 262 , 7 + 262 , 7 @ @ <nl> if ( flag ) <nl> { <nl> j = this . field _ 71439 _ g . field _ 71069 _ bz . field _ 75151 _ b . size ( ) - 9 + this . field _ 71439 _ g . field _ 71071 _ by . field _ 70461 _ c ; <nl> - @ @ - 2508 , 8 + 2440 , 15 @ @ <nl> + @ @ - 2512 , 8 + 2444 , 15 @ @ <nl> p _ 70001 _ 1 _ . func _ 76472 _ a ( " gl _ max _ texture _ size " , Integer . valueOf ( func _ 71369 _ N ( ) ) ) ; <nl> } <nl> <nl> @ @ - 278 , 7 + 278 , 7 @ @ <nl> for ( int i = 16384 ; i > 0 ; i > > = 1 ) <nl> { <nl> GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; <nl> - @ @ - 2517 , 6 + 2456 , 7 @ @ <nl> + @ @ - 2521 , 6 + 2460 , 7 @ @ <nl> <nl> if ( j ! = 0 ) <nl> { <nl> diff - - git a / patches / minecraft / net / minecraft / client / shader / Framebuffer . java . patch b / patches / minecraft / net / minecraft / client / shader / Framebuffer . java . patch <nl> index a17617b . . bf256e0 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / shader / Framebuffer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / shader / Framebuffer . java . patch <nl> @ @ - 1 , 21 + 1 , 29 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / shader / Framebuffer . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / shader / Framebuffer . java <nl> - @ @ - 6 , 6 + 6 , 7 @ @ <nl> + @ @ - 6 , 6 + 6 , 9 @ @ <nl> import net . minecraft . client . renderer . OpenGlHelper ; <nl> import net . minecraft . client . renderer . Tessellator ; <nl> import net . minecraft . client . renderer . texture . TextureUtil ; <nl> + import net . minecraftforge . client . MinecraftForgeClient ; <nl> + + import static org . lwjgl . opengl . EXTPackedDepthStencil . * ; <nl> + + import static org . lwjgl . opengl . EXTFramebufferObject . * ; <nl> import org . lwjgl . opengl . EXTFramebufferObject ; <nl> import org . lwjgl . opengl . GL11 ; <nl> <nl> - @ @ - 120 , 6 + 121 , 11 @ @ <nl> + @ @ - 118 , 8 + 121 , 17 @ @ <nl> + if ( this . field _ 147619 _ e ) <nl> + { <nl> EXTFramebufferObject . glBindRenderbufferEXT ( 36161 , this . field _ 147624 _ h ) ; <nl> + + if ( MinecraftForgeClient . getStencilBits ( ) = = 0 ) <nl> + + { <nl> EXTFramebufferObject . glRenderbufferStorageEXT ( 36161 , 33190 , this . field _ 147622 _ a , this . field _ 147620 _ b ) ; <nl> EXTFramebufferObject . glFramebufferRenderbufferEXT ( 36160 , 36096 , 36161 , this . field _ 147624 _ h ) ; <nl> - + if ( MinecraftForgeClient . getStencilBits ( ) > 0 ) <nl> + + } <nl> + + else <nl> + { <nl> - + EXTFramebufferObject . glRenderbufferStorageEXT ( 36161 , EXTFramebufferObject . GL _ STENCIL _ INDEX8 _ EXT , this . field _ 147622 _ a , this . field _ 147620 _ b ) ; <nl> - + EXTFramebufferObject . glFramebufferRenderbufferEXT ( 36160 , EXTFramebufferObject . GL _ STENCIL _ ATTACHMENT _ EXT , 36161 , this . field _ 147624 _ h ) ; <nl> + + EXTFramebufferObject . glRenderbufferStorageEXT ( 36161 , GL _ DEPTH24 _ STENCIL8 _ EXT , this . field _ 147622 _ a , this . field _ 147620 _ b ) ; <nl> + + EXTFramebufferObject . glFramebufferRenderbufferEXT ( 36160 , GL _ DEPTH _ ATTACHMENT _ EXT , GL _ RENDERBUFFER _ EXT , this . field _ 147624 _ h ) ; <nl> + + EXTFramebufferObject . glFramebufferRenderbufferEXT ( 36160 , GL _ STENCIL _ ATTACHMENT _ EXT , GL _ RENDERBUFFER _ EXT , this . field _ 147624 _ h ) ; <nl> + } <nl> } <nl> <nl> diff - - git a / patches / minecraft / net / minecraft / server / MinecraftServer . java . patch b / patches / minecraft / net / minecraft / server / MinecraftServer . java . patch <nl> index 3082905 . . fafd4c8 100644 <nl> - - - a / patches / minecraft / net / minecraft / server / MinecraftServer . java . patch <nl> + + + b / patches / minecraft / net / minecraft / server / MinecraftServer . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / server / MinecraftServer . java <nl> + + + . . / src - work / minecraft / net / minecraft / server / MinecraftServer . java <nl> - @ @ - 25 , 6 + 25 , 7 @ @ <nl> + @ @ - 26 , 6 + 26 , 7 @ @ <nl> import java . util . Arrays ; <nl> import java . util . Collections ; <nl> import java . util . Date ; <nl> @ @ - 8 , 7 + 8 , 7 @ @ <nl> import java . util . Iterator ; <nl> import java . util . List ; <nl> import java . util . Random ; <nl> - @ @ - 73 , 6 + 74 , 10 @ @ <nl> + @ @ - 74 , 6 + 75 , 10 @ @ <nl> import org . apache . logging . log4j . LogManager ; <nl> import org . apache . logging . log4j . Logger ; <nl> <nl> @ @ - 19 , 7 + 19 , 7 @ @ <nl> public abstract class MinecraftServer implements ICommandSender , Runnable , IPlayerUsage <nl> { <nl> private static final Logger field _ 147145 _ h = LogManager . getLogger ( ) ; <nl> - @ @ - 89 , 7 + 94 , 7 @ @ <nl> + @ @ - 90 , 7 + 95 , 7 @ @ <nl> @ SideOnly ( Side . SERVER ) <nl> private String field _ 71320 _ r ; <nl> private int field _ 71319 _ s = - 1 ; <nl> @ @ - 28 , 7 + 28 , 7 @ @ <nl> private ServerConfigurationManager field _ 71318 _ t ; <nl> private boolean field _ 71317 _ u = true ; <nl> private boolean field _ 71316 _ v ; <nl> - @ @ - 106 , 7 + 111 , 8 @ @ <nl> + @ @ - 107 , 7 + 112 , 8 @ @ <nl> private int field _ 71280 _ D ; <nl> private int field _ 143008 _ E = 0 ; <nl> public final long [ ] field _ 71311 _ j = new long [ 100 ] ; <nl> @ @ - 38 , 7 + 38 , 7 @ @ <nl> private KeyPair field _ 71292 _ I ; <nl> private String field _ 71293 _ J ; <nl> private String field _ 71294 _ K ; <nl> - @ @ - 182 , 8 + 188 , 6 @ @ <nl> + @ @ - 183 , 8 + 189 , 6 @ @ <nl> { <nl> this . func _ 71237 _ c ( p _ 71247 _ 1 _ ) ; <nl> this . func _ 71192 _ d ( " menu . loadingLevel " ) ; <nl> @ @ - 47 , 7 + 47 , 7 @ @ <nl> ISaveHandler isavehandler = this . field _ 71310 _ m . func _ 75804 _ a ( p _ 71247 _ 1 _ , true ) ; <nl> WorldInfo worldinfo = isavehandler . func _ 75757 _ d ( ) ; <nl> WorldSettings worldsettings ; <nl> - @ @ - 203 , 46 + 207 , 21 @ @ <nl> + @ @ - 204 , 46 + 208 , 21 @ @ <nl> worldsettings . func _ 77159 _ a ( ) ; <nl> } <nl> <nl> @ @ - 101 , 7 + 101 , 7 @ @ <nl> this . func _ 147139 _ a ( this . func _ 147135 _ j ( ) ) ; <nl> this . func _ 71222 _ d ( ) ; <nl> } <nl> - @ @ - 309 , 6 + 288 , 7 @ @ <nl> + @ @ - 310 , 6 + 289 , 7 @ @ <nl> if ( ! this . field _ 71290 _ O ) <nl> { <nl> WorldServer [ ] aworldserver = this . field _ 71305 _ c ; <nl> @ @ - 109 , 7 + 109 , 7 @ @ <nl> int i = aworldserver . length ; <nl> <nl> for ( int j = 0 ; j < i ; + + j ) <nl> - @ @ - 359 , 9 + 339 , 16 @ @ <nl> + @ @ - 360 , 9 + 340 , 16 @ @ <nl> for ( int i = 0 ; i < this . field _ 71305 _ c . length ; + + i ) <nl> { <nl> WorldServer worldserver = this . field _ 71305 _ c [ i ] ; <nl> @ @ - 126 , 7 + 126 , 7 @ @ <nl> if ( this . field _ 71307 _ n . func _ 76468 _ d ( ) ) <nl> { <nl> this . field _ 71307 _ n . func _ 76470 _ e ( ) ; <nl> - @ @ - 586 , 13 + 573 , 15 @ @ <nl> + @ @ - 588 , 13 + 575 , 15 @ @ <nl> this . field _ 71304 _ b . func _ 76320 _ a ( " levels " ) ; <nl> int i ; <nl> <nl> @ @ - 145 , 7 + 145 , 7 @ @ <nl> this . field _ 71304 _ b . func _ 76320 _ a ( worldserver . func _ 72912 _ H ( ) . func _ 76065 _ j ( ) ) ; <nl> this . field _ 71304 _ b . func _ 76320 _ a ( " pools " ) ; <nl> worldserver . func _ 82732 _ R ( ) . func _ 72343 _ a ( ) ; <nl> - @ @ - 639 , 9 + 628 , 11 @ @ <nl> + @ @ - 641 , 9 + 630 , 11 @ @ <nl> this . field _ 71304 _ b . func _ 76319 _ b ( ) ; <nl> } <nl> <nl> @ @ - 158 , 7 + 158 , 7 @ @ <nl> this . field _ 71304 _ b . func _ 76318 _ c ( " connection " ) ; <nl> this . func _ 147137 _ ag ( ) . func _ 151269 _ c ( ) ; <nl> this . field _ 71304 _ b . func _ 76318 _ c ( " players " ) ; <nl> - @ @ - 685 , 7 + 676 , 13 @ @ <nl> + @ @ - 688 , 7 + 679 , 13 @ @ <nl> <nl> public WorldServer func _ 71218 _ a ( int p _ 71218 _ 1 _ ) <nl> { <nl> @ @ - 173 , 7 + 173 , 7 @ @ <nl> } <nl> <nl> public String func _ 71249 _ w ( ) <nl> - @ @ - 944 , 6 + 941 , 7 @ @ <nl> + @ @ - 947 , 6 + 944 , 7 @ @ <nl> <nl> if ( worldserver ! = null ) <nl> { <nl> @ @ - 181 , 7 + 181 , 7 @ @ <nl> worldserver . func _ 73041 _ k ( ) ; <nl> } <nl> } <nl> - @ @ - 1414 , 7 + 1412 , 6 @ @ <nl> + @ @ - 1417 , 7 + 1415 , 6 @ @ <nl> this . field _ 147141 _ M = p _ 155759 _ 1 _ ; <nl> } <nl>

TEST DIFF:
diff - - git a / . gitignore b / . gitignore 
 index f99fd0d . . 850a6e9 100644 
 - - - a / . gitignore 
 + + + b / . gitignore 
 @ @ - 3 , 6 + 3 , 9 @ @ 
 / . settings 
 / . classpath 
 
 + # In case people make their workspace in the repo 
 + / eclipse / 
 + 
 # idea 
 / . idea 
 * . iml 
 diff - - git a / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 index 261adbf . . 28fcaf8 100644 
 - - - a / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 @ @ - 8 , 7 + 8 , 7 @ @ 
 this . field _ 71459 _ aj = p _ i45547 _ 1 _ . field _ 178741 _ d . field _ 178756 _ a ; 
 this . field _ 71443 _ c = p _ i45547 _ 1 _ . field _ 178743 _ b . field _ 178764 _ a > 0 ? p _ i45547 _ 1 _ . field _ 178743 _ b . field _ 178764 _ a : 1 ; 
 this . field _ 71440 _ d = p _ i45547 _ 1 _ . field _ 178743 _ b . field _ 178762 _ b > 0 ? p _ i45547 _ 1 _ . field _ 178743 _ b . field _ 178762 _ b : 1 ; 
 - @ @ - 410 , 10 + 409 , 10 @ @ 
 + @ @ - 411 , 10 + 410 , 10 @ @ 
 this . field _ 110451 _ am = new SimpleReloadableResourceManager ( this . field _ 110452 _ an ) ; 
 this . field _ 135017 _ as = new LanguageManager ( this . field _ 110452 _ an , this . field _ 71474 _ y . field _ 74363 _ ab ) ; 
 this . field _ 110451 _ am . func _ 110542 _ a ( this . field _ 135017 _ as ) ; 
 @ @ - 21 , 7 + 21 , 7 @ @ 
 this . func _ 175595 _ al ( ) ; 
 this . field _ 152350 _ aA = new SkinManager ( this . field _ 71446 _ o , new File ( this . field _ 110446 _ Y , " skins " ) , this . field _ 152355 _ az ) ; 
 this . field _ 71469 _ aa = new AnvilSaveConverter ( new File ( this . field _ 71412 _ D , " saves " ) ) ; 
 - @ @ - 449 , 6 + 448 , 8 @ @ 
 + @ @ - 450 , 6 + 449 , 8 @ @ 
 } 
 } ) ; 
 this . field _ 71417 _ B = new MouseHelper ( ) ; 
 @ @ - 30 , 7 + 30 , 7 @ @ 
 this . func _ 71361 _ d ( " Pre startup " ) ; 
 GlStateManager . func _ 179098 _ w ( ) ; 
 GlStateManager . func _ 179103 _ j ( 7425 ) ; 
 - @ @ - 462 , 17 + 463 , 21 @ @ 
 + @ @ - 463 , 17 + 464 , 21 @ @ 
 GlStateManager . func _ 179096 _ D ( ) ; 
 GlStateManager . func _ 179128 _ n ( 5888 ) ; 
 this . func _ 71361 _ d ( " Startup " ) ; 
 @ @ - 53 , 7 + 53 , 7 @ @ 
 this . field _ 71460 _ t = new EntityRenderer ( this , this . field _ 110451 _ am ) ; 
 this . field _ 110451 _ am . func _ 110542 _ a ( this . field _ 71460 _ t ) ; 
 this . field _ 175618 _ aM = new BlockRendererDispatcher ( this . field _ 175617 _ aL . func _ 174954 _ c ( ) , this . field _ 71474 _ y ) ; 
 - @ @ - 482 , 22 + 487 , 25 @ @ 
 + @ @ - 483 , 22 + 488 , 25 @ @ 
 this . field _ 71458 _ u = new GuiAchievement ( this ) ; 
 GlStateManager . func _ 179083 _ b ( 0 , 0 , this . field _ 71443 _ c , this . field _ 71440 _ d ) ; 
 this . field _ 71452 _ i = new EffectRenderer ( this . field _ 71441 _ e , this . field _ 71446 _ o ) ; 
 @ @ - 82 , 7 + 82 , 7 @ @ 
 if ( this . field _ 71474 _ y . field _ 74353 _ u & & ! this . field _ 71431 _ Q ) 
 { 
 this . func _ 71352 _ k ( ) ; 
 - @ @ - 681 , 21 + 689 , 23 @ @ 
 + @ @ - 682 , 21 + 690 , 23 @ @ 
 File file2 = new File ( file1 , " crash - " + ( new SimpleDateFormat ( " yyyy - MM - dd _ HH . mm . ss " ) ) . format ( new Date ( ) ) + " - client . txt " ) ; 
 Bootstrap . func _ 179870 _ a ( p _ 71377 _ 1 _ . func _ 71502 _ e ( ) ) ; 
 
 @ @ - 109 , 7 + 109 , 7 @ @ 
 } 
 
 public boolean func _ 152349 _ b ( ) 
 - @ @ - 887 , 11 + 897 , 6 @ @ 
 + @ @ - 888 , 11 + 898 , 6 @ @ 
 
 public void func _ 147108 _ a ( GuiScreen p _ 147108 _ 1 _ ) 
 { 
 @ @ - 121 , 7 + 121 , 7 @ @ 
 if ( p _ 147108 _ 1 _ = = null & & this . field _ 71441 _ e = = null ) 
 { 
 p _ 147108 _ 1 _ = new GuiMainMenu ( ) ; 
 - @ @ - 901 , 6 + 906 , 17 @ @ 
 + @ @ - 902 , 6 + 907 , 17 @ @ 
 p _ 147108 _ 1 _ = new GuiGameOver ( ) ; 
 } 
 
 @ @ - 139 , 7 + 139 , 7 @ @ 
 if ( p _ 147108 _ 1 _ instanceof GuiMainMenu ) 
 { 
 this . field _ 71474 _ y . field _ 74330 _ P = false ; 
 - @ @ - 999 , 7 + 1015 , 7 @ @ 
 + @ @ - 1000 , 7 + 1016 , 7 @ @ 
 { 
 while ( ! this . field _ 152351 _ aB . isEmpty ( ) ) 
 { 
 @ @ - 148 , 7 + 148 , 7 @ @ 
 } 
 } 
 
 - @ @ - 1034 , 9 + 1050 , 11 @ @ 
 + @ @ - 1035 , 9 + 1051 , 11 @ @ 
 
 if ( ! this . field _ 71454 _ w ) 
 { 
 @ @ - 160 , 7 + 160 , 7 @ @ 
 } 
 
 this . field _ 71424 _ I . func _ 76319 _ b ( ) ; 
 - @ @ - 1382 , 7 + 1400 , 7 @ @ 
 + @ @ - 1383 , 7 + 1401 , 7 @ @ 
 
 if ( this . field _ 71441 _ e . func _ 180495 _ p ( blockpos ) . func _ 177230 _ c ( ) . func _ 149688 _ o ( ) ! = Material . field _ 151579 _ a & & this . field _ 71442 _ b . func _ 180512 _ c ( blockpos , this . field _ 71476 _ x . field _ 178784 _ b ) ) 
 { 
 @ @ - 169 , 7 + 169 , 7 @ @ 
 this . field _ 71439 _ g . func _ 71038 _ i ( ) ; 
 } 
 } 
 - @ @ - 1462 , 15 + 1480 , 19 @ @ 
 + @ @ - 1463 , 15 + 1481 , 19 @ @ 
 case 2 : 
 BlockPos blockpos = this . field _ 71476 _ x . func _ 178782 _ a ( ) ; 
 
 @ @ - 190 , 7 + 190 , 7 @ @ 
 
 if ( itemstack = = null ) 
 { 
 - @ @ - 1493 , 7 + 1515 , 8 @ @ 
 + @ @ - 1494 , 7 + 1516 , 8 @ @ 
 { 
 ItemStack itemstack1 = this . field _ 71439 _ g . field _ 71071 _ by . func _ 70448 _ g ( ) ; 
 
 @ @ - 200 , 7 + 200 , 7 @ @ 
 { 
 this . field _ 71460 _ t . field _ 78516 _ c . func _ 78445 _ c ( ) ; 
 } 
 - @ @ - 1591 , 6 + 1614 , 8 @ @ 
 + @ @ - 1592 , 6 + 1615 , 8 @ @ 
 - - this . field _ 71467 _ ac ; 
 } 
 
 @ @ - 209 , 7 + 209 , 7 @ @ 
 this . field _ 71424 _ I . func _ 76320 _ a ( " gui " ) ; 
 
 if ( ! this . field _ 71445 _ n ) 
 - @ @ - 1689 , 6 + 1714 , 8 @ @ 
 + @ @ - 1690 , 6 + 1715 , 8 @ @ 
 
 while ( Mouse . next ( ) ) 
 { 
 @ @ - 218 , 7 + 218 , 7 @ @ 
 i = Mouse . getEventButton ( ) ; 
 KeyBinding . func _ 74510 _ a ( i - 100 , Mouse . getEventButtonState ( ) ) ; 
 
 - @ @ - 1744 , 6 + 1771 , 7 @ @ 
 + @ @ - 1745 , 6 + 1772 , 7 @ @ 
 this . field _ 71462 _ r . func _ 146274 _ d ( ) ; 
 } 
 } 
 @ @ - 226 , 7 + 226 , 7 @ @ 
 } 
 
 if ( this . field _ 71429 _ W > 0 ) 
 - @ @ - 1920 , 6 + 1948 , 7 @ @ 
 + @ @ - 1921 , 6 + 1949 , 7 @ @ 
 } 
 } 
 } 
 @ @ - 234 , 7 + 234 , 7 @ @ 
 } 
 
 for ( i = 0 ; i < 9 ; + + i ) 
 - @ @ - 2120 , 12 + 2149 , 15 @ @ 
 + @ @ - 2121 , 12 + 2150 , 15 @ @ 
 this . field _ 71453 _ ak . func _ 74428 _ b ( ) ; 
 } 
 
 @ @ - 250 , 7 + 250 , 7 @ @ 
 this . func _ 71403 _ a ( ( WorldClient ) null ) ; 
 System . gc ( ) ; 
 ISaveHandler isavehandler = this . field _ 71469 _ aa . func _ 75804 _ a ( p _ 71371 _ 1 _ , false ) ; 
 - @ @ - 2161 , 6 + 2193 , 12 @ @ 
 + @ @ - 2162 , 6 + 2194 , 12 @ @ 
 
 while ( ! this . field _ 71437 _ Z . func _ 71200 _ ad ( ) ) 
 { 
 @ @ - 263 , 7 + 263 , 7 @ @ 
 String s2 = this . field _ 71437 _ Z . func _ 71195 _ b _ ( ) ; 
 
 if ( s2 ! = null ) 
 - @ @ - 2186 , 8 + 2224 , 14 @ @ 
 + @ @ - 2187 , 8 + 2225 , 14 @ @ 
 SocketAddress socketaddress = this . field _ 71437 _ Z . func _ 147137 _ ag ( ) . func _ 151270 _ a ( ) ; 
 NetworkManager networkmanager = NetworkManager . func _ 150722 _ a ( socketaddress ) ; 
 networkmanager . func _ 150719 _ a ( new NetHandlerLoginClient ( networkmanager , this , ( GuiScreen ) null ) ) ; 
 @ @ - 280 , 7 + 280 , 7 @ @ 
 this . field _ 71453 _ ak = networkmanager ; 
 } 
 
 - @ @ - 2198 , 6 + 2242 , 8 @ @ 
 + @ @ - 2199 , 6 + 2243 , 8 @ @ 
 
 public void func _ 71353 _ a ( WorldClient p _ 71353 _ 1 _ , String p _ 71353 _ 2 _ ) 
 { 
 @ @ - 289 , 7 + 289 , 7 @ @ 
 if ( p _ 71353 _ 1 _ = = null ) 
 { 
 NetHandlerPlayClient nethandlerplayclient = this . func _ 147114 _ u ( ) ; 
 - @ @ - 2211 , 6 + 2257 , 18 @ @ 
 + @ @ - 2212 , 6 + 2258 , 18 @ @ 
 { 
 this . field _ 71437 _ Z . func _ 71263 _ m ( ) ; 
 this . field _ 71437 _ Z . func _ 175592 _ a ( ) ; 
 @ @ - 308 , 7 + 308 , 7 @ @ 
 } 
 
 this . field _ 71437 _ Z = null ; 
 - @ @ - 2237 , 6 + 2295 , 7 @ @ 
 + @ @ - 2238 , 6 + 2296 , 7 @ @ 
 
 this . func _ 71351 _ a ( ( ServerData ) null ) ; 
 this . field _ 71455 _ al = false ; 
 @ @ - 316 , 7 + 316 , 7 @ @ 
 } 
 
 this . field _ 147127 _ av . func _ 147690 _ c ( ) ; 
 - @ @ - 2341 , 134 + 2400 , 11 @ @ 
 + @ @ - 2342 , 134 + 2401 , 11 @ @ 
 if ( this . field _ 71476 _ x ! = null ) 
 { 
 boolean flag = this . field _ 71439 _ g . field _ 71075 _ bZ . field _ 75098 _ d ; 
 @ @ - 453 , 23 + 453 , 24 @ @ 
 if ( flag ) 
 { 
 int j = this . field _ 71439 _ g . field _ 71069 _ bz . field _ 75151 _ b . size ( ) - 9 + inventoryplayer . field _ 70461 _ c ; 
 - @ @ - 2724 , 8 + 2660 , 11 @ @ 
 - p _ 70001 _ 1 _ . func _ 152767 _ b ( " gl _ max _ texture _ size " , Integer . valueOf ( func _ 71369 _ N ( ) ) ) ; 
 - } 
 + @ @ - 2727 , 18 + 2663 , 8 @ @ 
 
 - + / / Forge : Adds a optimization to the getGLMaximumTextureSize , only calculate it once . 
 - + private static int max _ texture _ size = - 1 ; 
 public static int func _ 71369 _ N ( ) 
 { 
 - + if ( max _ texture _ size ! = - 1 ) return max _ texture _ size ; 
 - for ( int i = 16384 ; i > 0 ; i > > = 1 ) 
 - { 
 - GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; 
 - @ @ - 2733 , 6 + 2672 , 7 @ @ 
 + - for ( int i = 16384 ; i > 0 ; i > > = 1 ) 
 + - { 
 + - GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; 
 + - int j = GL11 . glGetTexLevelParameteri ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ TEXTURE _ WIDTH ) ; 
 + - 
 + - if ( j ! = 0 ) 
 + - { 
 + - return i ; 
 + - } 
 + - } 
 + - 
 + - return - 1 ; 
 + + / / Forge we redirect this to our code which caches the value before any splash screen stuff is done . 
 + + return net . minecraftforge . fml . client . SplashProgress . getMaxTextureSize ( ) ; 
 + } 
 
 - if ( j ! = 0 ) 
 - { 
 - + max _ texture _ size = i ; 
 - return i ; 
 - } 
 - } 
 + public boolean func _ 70002 _ Q ( ) 
 diff - - git a / src / main / java / net / minecraftforge / fml / client / SplashProgress . java b / src / main / java / net / minecraftforge / fml / client / SplashProgress . java 
 index cab9526 . . 5582f03 100644 
 - - - a / src / main / java / net / minecraftforge / fml / client / SplashProgress . java 
 + + + b / src / main / java / net / minecraftforge / fml / client / SplashProgress . java 
 @ @ - 60 , 6 + 60 , 7 @ @ import java . io . InputStream ; 
 import java . io . PrintStream ; 
 import java . io . PrintWriter ; 
 import java . lang . Thread . UncaughtExceptionHandler ; 
 + import java . nio . ByteBuffer ; 
 import java . nio . IntBuffer ; 
 import java . util . Iterator ; 
 import java . util . Properties ; 
 @ @ - 81 , 7 + 82 , 6 @ @ import net . minecraft . crash . CrashReport ; 
 import net . minecraft . launchwrapper . Launch ; 
 import net . minecraft . util . ResourceLocation ; 
 import net . minecraftforge . fml . common . EnhancedRuntimeException ; 
 - import net . minecraftforge . fml . common . EnhancedRuntimeException . WrappedPrintStream ; 
 import net . minecraftforge . fml . common . FMLCommonHandler ; 
 import net . minecraftforge . fml . common . FMLLog ; 
 import net . minecraftforge . fml . common . ICrashCallable ; 
 @ @ - 103 , 6 + 103 , 7 @ @ import org . lwjgl . util . glu . GLU ; 
 * @ deprecated not a stable API , will break , don ' t use this yet 
 * / 
 @ Deprecated 
 + @ SuppressWarnings ( " serial " ) 
 public class SplashProgress 
 { 
 private static Drawable d ; 
 @ @ - 159 , 6 + 160 , 11 @ @ public class SplashProgress 
 public static void start ( ) 
 { 
 File configFile = new File ( Minecraft . getMinecraft ( ) . mcDataDir , " config / splash . properties " ) ; 
 + 
 + File parent = configFile . getParentFile ( ) ; 
 + if ( ! parent . exists ( ) ) 
 + parent . mkdirs ( ) ; 
 + 
 FileReader r = null ; 
 config = new Properties ( ) ; 
 try 
 @ @ - 175 , 9 + 181 , 14 @ @ public class SplashProgress 
 IOUtils . closeQuietly ( r ) ; 
 } 
 
 + / / Some system do not support this and have weird effects so we need to detect and disable by default . 
 + / / The user can always force enable it if they want to take the responsibility for bugs . 
 + / / For now macs derp so disable them . 
 + boolean defaultEnabled = ! System . getProperty ( " os . name " ) . toLowerCase ( ) . contains ( " mac " ) ; 
 + 
 / / Enable if we have the flag , and there ' s either no optifine , or optifine has added a key to the blackboard ( " optifine . ForgeSplashCompatible " ) 
 / / Optifine authors - add this key to the blackboard if you feel your modifications are now compatible with this code . 
 - enabled = getBool ( " enabled " , true ) & & ( ( ! FMLClientHandler . instance ( ) . hasOptifine ( ) ) | | Launch . blackboard . containsKey ( " optifine . ForgeSplashCompatible " ) ) ; 
 + enabled = getBool ( " enabled " , defaultEnabled ) & & ( ( ! FMLClientHandler . instance ( ) . hasOptifine ( ) ) | | Launch . blackboard . containsKey ( " optifine . ForgeSplashCompatible " ) ) ; 
 rotate = getBool ( " rotate " , false ) ; 
 logoOffset = getInt ( " logoOffset " , 0 ) ; 
 backgroundColor = getHex ( " background " , 0xFFFFFF ) ; 
 @ @ - 243 , 9 + 254 , 13 @ @ public class SplashProgress 
 catch ( LWJGLException e ) 
 { 
 e . printStackTrace ( ) ; 
 - throw new RuntimeException ( e ) ; 
 + disableSplash ( e ) ; 
 } 
 - Thread mainThread = Thread . currentThread ( ) ; 
 + 
 + / / Call this ASAP if splash is enabled so that threading doesn ' t cause issues later 
 + getMaxTextureSize ( ) ; 
 + 
 + / / Thread mainThread = Thread . currentThread ( ) ; 
 thread = new Thread ( new Runnable ( ) 
 { 
 private final int barWidth = 400 ; 
 @ @ - 478 , 6 + 493 , 22 @ @ public class SplashProgress 
 checkThreadState ( ) ; 
 } 
 
 + private static int max _ texture _ size = - 1 ; 
 + public static int getMaxTextureSize ( ) 
 + { 
 + if ( max _ texture _ size ! = - 1 ) return max _ texture _ size ; 
 + for ( int i = 0x4000 ; i > 0 ; i > > = 1 ) 
 + { 
 + GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; 
 + if ( GL11 . glGetTexLevelParameteri ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ TEXTURE _ WIDTH ) ! = 0 ) 
 + { 
 + max _ texture _ size = i ; 
 + return i ; 
 + } 
 + } 
 + return - 1 ; 
 + } 
 + 
 private static void checkThreadState ( ) 
 { 
 if ( thread . getState ( ) = = Thread . State . TERMINATED | | threadError ! = null ) 
 @ @ - 549 , 34 + 580 , 39 @ @ public class SplashProgress 
 catch ( Exception e ) 
 { 
 e . printStackTrace ( ) ; 
 - if ( disableSplash ( ) ) 
 + disableSplash ( e ) ; 
 + } 
 + } 
 + 
 + private static boolean disableSplash ( Exception e ) 
 + { 
 + if ( disableSplash ( ) ) 
 + { 
 + throw new EnhancedRuntimeException ( e ) 
 { 
 - throw new EnhancedRuntimeException ( e ) 
 + @ Override 
 + protected void printStackTrace ( WrappedPrintStream stream ) 
 { 
 - @ Override 
 - protected void printStackTrace ( WrappedPrintStream stream ) 
 - { 
 - stream . println ( " SplashProgress has detected a error loading Minecraft . " ) ; 
 - stream . println ( " This can sometimes be caused by bad video drivers . " ) ; 
 - stream . println ( " We have automatically disabeled the new Splash Screen in config / splash . properties . " ) ; 
 - stream . println ( " Try reloading minecraft before reporting any errors . " ) ; 
 - } 
 - } ; 
 - } 
 - else 
 + stream . println ( " SplashProgress has detected a error loading Minecraft . " ) ; 
 + stream . println ( " This can sometimes be caused by bad video drivers . " ) ; 
 + stream . println ( " We have automatically disabeled the new Splash Screen in config / splash . properties . " ) ; 
 + stream . println ( " Try reloading minecraft before reporting any errors . " ) ; 
 + } 
 + } ; 
 + } 
 + else 
 + { 
 + throw new EnhancedRuntimeException ( e ) 
 { 
 - throw new EnhancedRuntimeException ( e ) 
 + @ Override 
 + protected void printStackTrace ( WrappedPrintStream stream ) 
 { 
 - @ Override 
 - protected void printStackTrace ( WrappedPrintStream stream ) 
 - { 
 - stream . println ( " SplashProgress has detected a error loading Minecraft . " ) ; 
 - stream . println ( " This can sometimes be caused by bad video drivers . " ) ; 
 - stream . println ( " Please try disabeling the new Splash Screen in config / splash . properties . " ) ; 
 - stream . println ( " After doing so , try reloading minecraft before reporting any errors . " ) ; 
 - } 
 - } ; 
 - } 
 + stream . println ( " SplashProgress has detected a error loading Minecraft . " ) ; 
 + stream . println ( " This can sometimes be caused by bad video drivers . " ) ; 
 + stream . println ( " Please try disabeling the new Splash Screen in config / splash . properties . " ) ; 
 + stream . println ( " After doing so , try reloading minecraft before reporting any errors . " ) ; 
 + } 
 + } ; 
 } 
 } 
 
 @ @ - 587 , 7 + 623 , 6 @ @ public class SplashProgress 
 if ( ! parent . exists ( ) ) 
 parent . mkdirs ( ) ; 
 
 - FileReader r = null ; 
 enabled = false ; 
 config . setProperty ( " enabled " , " false " ) ; 
 
 @ @ - 623 , 6 + 658 , 7 @ @ public class SplashProgress 
 
 private static final IntBuffer buf = BufferUtils . createIntBuffer ( 4 * 1024 * 1024 ) ; 
 
 + @ SuppressWarnings ( " unused " ) 
 private static class Texture 
 { 
 private final ResourceLocation location ;

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 index b69cba7 . . b1c023d 100644 
 - - - a / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / Minecraft . java 
 + + + . . / src - work / minecraft / net / minecraft / client / Minecraft . java 
 - @ @ - 134 , 6 + 134 , 14 @ @ 
 + @ @ - 135 , 6 + 135 , 14 @ @ 
 import net . minecraft . world . storage . ISaveFormat ; 
 import net . minecraft . world . storage . ISaveHandler ; 
 import net . minecraft . world . storage . WorldInfo ; 
 @ @ - 15 , 7 + 15 , 7 @ @ 
 import org . apache . logging . log4j . LogManager ; 
 import org . apache . logging . log4j . Logger ; 
 import org . lwjgl . LWJGLException ; 
 - @ @ - 245 , 7 + 253 , 7 @ @ 
 + @ @ - 246 , 7 + 254 , 7 @ @ 
 this . func _ 71389 _ H ( ) ; 
 this . field _ 71449 _ j = p _ i1014 _ 1 _ ; 
 field _ 147123 _ G . info ( " Setting user : " + p _ i1014 _ 1 _ . func _ 111285 _ a ( ) ) ; 
 @ @ - 24 , 7 + 24 , 7 @ @ 
 this . field _ 71459 _ aj = p _ i1014 _ 5 _ ; 
 this . field _ 71443 _ c = p _ i1014 _ 2 _ ; 
 this . field _ 71440 _ d = p _ i1014 _ 3 _ ; 
 - @ @ - 419 , 7 + 427 , 7 @ @ 
 + @ @ - 417 , 7 + 425 , 7 @ @ 
 
 try 
 { 
 @ @ - 33 , 7 + 33 , 7 @ @ 
 } 
 catch ( LWJGLException lwjglexception ) 
 { 
 - @ @ - 518 , 7 + 526 , 7 @ @ 
 + @ @ - 516 , 7 + 524 , 7 @ @ 
 this . field _ 71452 _ i = new EffectRenderer ( this . field _ 71441 _ e , this . field _ 71446 _ o ) ; 
 FMLClientHandler . instance ( ) . finishMinecraftLoading ( ) ; 
 this . func _ 71361 _ d ( " Post startup " ) ; 
 @ @ - 42 , 7 + 42 , 7 @ @ 
 
 if ( this . field _ 71475 _ ae ! = null ) 
 { 
 - @ @ - 701 , 11 + 709 , 6 @ @ 
 + @ @ - 699 , 11 + 707 , 6 @ @ 
 
 public void func _ 147108 _ a ( GuiScreen p _ 147108 _ 1 _ ) 
 { 
 @ @ - 54 , 7 + 54 , 7 @ @ 
 if ( p _ 147108 _ 1 _ = = null & & this . field _ 71441 _ e = = null ) 
 { 
 p _ 147108 _ 1 _ = new GuiMainMenu ( ) ; 
 - @ @ - 715 , 6 + 718 , 17 @ @ 
 + @ @ - 713 , 6 + 716 , 17 @ @ 
 p _ 147108 _ 1 _ = new GuiGameOver ( ) ; 
 } 
 
 @ @ - 72 , 7 + 72 , 7 @ @ 
 if ( p _ 147108 _ 1 _ instanceof GuiMainMenu ) 
 { 
 this . field _ 71474 _ y . field _ 74330 _ P = false ; 
 - @ @ - 1297 , 7 + 1311 , 7 @ @ 
 + @ @ - 1295 , 7 + 1309 , 7 @ @ 
 
 if ( this . field _ 71439 _ g . func _ 82246 _ f ( i , j , k ) ) 
 { 
 @ @ - 81 , 7 + 81 , 7 @ @ 
 this . field _ 71439 _ g . func _ 71038 _ i ( ) ; 
 } 
 } 
 - @ @ - 1378 , 11 + 1392 , 12 @ @ 
 + @ @ - 1376 , 11 + 1390 , 12 @ @ 
 int j = this . field _ 71476 _ x . field _ 72312 _ c ; 
 int k = this . field _ 71476 _ x . field _ 72309 _ d ; 
 
 @ @ - 96 , 7 + 96 , 7 @ @ 
 { 
 flag = false ; 
 this . field _ 71439 _ g . func _ 71038 _ i ( ) ; 
 - @ @ - 1409 , 7 + 1424 , 8 @ @ 
 + @ @ - 1407 , 7 + 1422 , 8 @ @ 
 { 
 ItemStack itemstack1 = this . field _ 71439 _ g . field _ 71071 _ by . func _ 70448 _ g ( ) ; 
 
 @ @ - 106 , 7 + 106 , 7 @ @ 
 { 
 this . field _ 71460 _ t . field _ 78516 _ c . func _ 78445 _ c ( ) ; 
 } 
 - @ @ - 1608 , 6 + 1624 , 8 @ @ 
 + @ @ - 1606 , 6 + 1622 , 8 @ @ 
 
 while ( Mouse . next ( ) ) 
 { 
 @ @ - 115 , 7 + 115 , 7 @ @ 
 i = Mouse . getEventButton ( ) ; 
 
 if ( field _ 142025 _ a & & i = = 0 & & ( Keyboard . isKeyDown ( 29 ) | | Keyboard . isKeyDown ( 157 ) ) ) 
 - @ @ - 2075 , 6 + 2093 , 11 @ @ 
 + @ @ - 2079 , 6 + 2097 , 11 @ @ 
 
 public void func _ 71353 _ a ( WorldClient p _ 71353 _ 1 _ , String p _ 71353 _ 2 _ ) 
 { 
 @ @ - 127 , 7 + 127 , 7 @ @ 
 if ( p _ 71353 _ 1 _ = = null ) 
 { 
 NetHandlerPlayClient nethandlerplayclient = this . func _ 147114 _ u ( ) ; 
 - @ @ - 2087 , 6 + 2110 , 18 @ @ 
 + @ @ - 2091 , 6 + 2114 , 18 @ @ 
 if ( this . field _ 71437 _ Z ! = null ) 
 { 
 this . field _ 71437 _ Z . func _ 71263 _ m ( ) ; 
 @ @ - 146 , 7 + 146 , 7 @ @ 
 } 
 
 this . field _ 71437 _ Z = null ; 
 - @ @ - 2235 , 113 + 2270 , 10 @ @ 
 + @ @ - 2239 , 113 + 2274 , 10 @ @ 
 if ( this . field _ 71476 _ x ! = null ) 
 { 
 boolean flag = this . field _ 71439 _ g . field _ 71075 _ bZ . field _ 75098 _ d ; 
 @ @ - 262 , 7 + 262 , 7 @ @ 
 if ( flag ) 
 { 
 j = this . field _ 71439 _ g . field _ 71069 _ bz . field _ 75151 _ b . size ( ) - 9 + this . field _ 71439 _ g . field _ 71071 _ by . field _ 70461 _ c ; 
 - @ @ - 2508 , 8 + 2440 , 15 @ @ 
 + @ @ - 2512 , 8 + 2444 , 15 @ @ 
 p _ 70001 _ 1 _ . func _ 76472 _ a ( " gl _ max _ texture _ size " , Integer . valueOf ( func _ 71369 _ N ( ) ) ) ; 
 } 
 
 @ @ - 278 , 7 + 278 , 7 @ @ 
 for ( int i = 16384 ; i > 0 ; i > > = 1 ) 
 { 
 GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; 
 - @ @ - 2517 , 6 + 2456 , 7 @ @ 
 + @ @ - 2521 , 6 + 2460 , 7 @ @ 
 
 if ( j ! = 0 ) 
 { 
 diff - - git a / patches / minecraft / net / minecraft / client / shader / Framebuffer . java . patch b / patches / minecraft / net / minecraft / client / shader / Framebuffer . java . patch 
 index a17617b . . bf256e0 100644 
 - - - a / patches / minecraft / net / minecraft / client / shader / Framebuffer . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / shader / Framebuffer . java . patch 
 @ @ - 1 , 21 + 1 , 29 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / shader / Framebuffer . java 
 + + + . . / src - work / minecraft / net / minecraft / client / shader / Framebuffer . java 
 - @ @ - 6 , 6 + 6 , 7 @ @ 
 + @ @ - 6 , 6 + 6 , 9 @ @ 
 import net . minecraft . client . renderer . OpenGlHelper ; 
 import net . minecraft . client . renderer . Tessellator ; 
 import net . minecraft . client . renderer . texture . TextureUtil ; 
 + import net . minecraftforge . client . MinecraftForgeClient ; 
 + + import static org . lwjgl . opengl . EXTPackedDepthStencil . * ; 
 + + import static org . lwjgl . opengl . EXTFramebufferObject . * ; 
 import org . lwjgl . opengl . EXTFramebufferObject ; 
 import org . lwjgl . opengl . GL11 ; 
 
 - @ @ - 120 , 6 + 121 , 11 @ @ 
 + @ @ - 118 , 8 + 121 , 17 @ @ 
 + if ( this . field _ 147619 _ e ) 
 + { 
 EXTFramebufferObject . glBindRenderbufferEXT ( 36161 , this . field _ 147624 _ h ) ; 
 + + if ( MinecraftForgeClient . getStencilBits ( ) = = 0 ) 
 + + { 
 EXTFramebufferObject . glRenderbufferStorageEXT ( 36161 , 33190 , this . field _ 147622 _ a , this . field _ 147620 _ b ) ; 
 EXTFramebufferObject . glFramebufferRenderbufferEXT ( 36160 , 36096 , 36161 , this . field _ 147624 _ h ) ; 
 - + if ( MinecraftForgeClient . getStencilBits ( ) > 0 ) 
 + + } 
 + + else 
 + { 
 - + EXTFramebufferObject . glRenderbufferStorageEXT ( 36161 , EXTFramebufferObject . GL _ STENCIL _ INDEX8 _ EXT , this . field _ 147622 _ a , this . field _ 147620 _ b ) ; 
 - + EXTFramebufferObject . glFramebufferRenderbufferEXT ( 36160 , EXTFramebufferObject . GL _ STENCIL _ ATTACHMENT _ EXT , 36161 , this . field _ 147624 _ h ) ; 
 + + EXTFramebufferObject . glRenderbufferStorageEXT ( 36161 , GL _ DEPTH24 _ STENCIL8 _ EXT , this . field _ 147622 _ a , this . field _ 147620 _ b ) ; 
 + + EXTFramebufferObject . glFramebufferRenderbufferEXT ( 36160 , GL _ DEPTH _ ATTACHMENT _ EXT , GL _ RENDERBUFFER _ EXT , this . field _ 147624 _ h ) ; 
 + + EXTFramebufferObject . glFramebufferRenderbufferEXT ( 36160 , GL _ STENCIL _ ATTACHMENT _ EXT , GL _ RENDERBUFFER _ EXT , this . field _ 147624 _ h ) ; 
 + } 
 } 
 
 diff - - git a / patches / minecraft / net / minecraft / server / MinecraftServer . java . patch b / patches / minecraft / net / minecraft / server / MinecraftServer . java . patch 
 index 3082905 . . fafd4c8 100644 
 - - - a / patches / minecraft / net / minecraft / server / MinecraftServer . java . patch 
 + + + b / patches / minecraft / net / minecraft / server / MinecraftServer . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / server / MinecraftServer . java 
 + + + . . / src - work / minecraft / net / minecraft / server / MinecraftServer . java 
 - @ @ - 25 , 6 + 25 , 7 @ @ 
 + @ @ - 26 , 6 + 26 , 7 @ @ 
 import java . util . Arrays ; 
 import java . util . Collections ; 
 import java . util . Date ; 
 @ @ - 8 , 7 + 8 , 7 @ @ 
 import java . util . Iterator ; 
 import java . util . List ; 
 import java . util . Random ; 
 - @ @ - 73 , 6 + 74 , 10 @ @ 
 + @ @ - 74 , 6 + 75 , 10 @ @ 
 import org . apache . logging . log4j . LogManager ; 
 import org . apache . logging . log4j . Logger ; 
 
 @ @ - 19 , 7 + 19 , 7 @ @ 
 public abstract class MinecraftServer implements ICommandSender , Runnable , IPlayerUsage 
 { 
 private static final Logger field _ 147145 _ h = LogManager . getLogger ( ) ; 
 - @ @ - 89 , 7 + 94 , 7 @ @ 
 + @ @ - 90 , 7 + 95 , 7 @ @ 
 @ SideOnly ( Side . SERVER ) 
 private String field _ 71320 _ r ; 
 private int field _ 71319 _ s = - 1 ; 
 @ @ - 28 , 7 + 28 , 7 @ @ 
 private ServerConfigurationManager field _ 71318 _ t ; 
 private boolean field _ 71317 _ u = true ; 
 private boolean field _ 71316 _ v ; 
 - @ @ - 106 , 7 + 111 , 8 @ @ 
 + @ @ - 107 , 7 + 112 , 8 @ @ 
 private int field _ 71280 _ D ; 
 private int field _ 143008 _ E = 0 ; 
 public final long [ ] field _ 71311 _ j = new long [ 100 ] ; 
 @ @ - 38 , 7 + 38 , 7 @ @ 
 private KeyPair field _ 71292 _ I ; 
 private String field _ 71293 _ J ; 
 private String field _ 71294 _ K ; 
 - @ @ - 182 , 8 + 188 , 6 @ @ 
 + @ @ - 183 , 8 + 189 , 6 @ @ 
 { 
 this . func _ 71237 _ c ( p _ 71247 _ 1 _ ) ; 
 this . func _ 71192 _ d ( " menu . loadingLevel " ) ; 
 @ @ - 47 , 7 + 47 , 7 @ @ 
 ISaveHandler isavehandler = this . field _ 71310 _ m . func _ 75804 _ a ( p _ 71247 _ 1 _ , true ) ; 
 WorldInfo worldinfo = isavehandler . func _ 75757 _ d ( ) ; 
 WorldSettings worldsettings ; 
 - @ @ - 203 , 46 + 207 , 21 @ @ 
 + @ @ - 204 , 46 + 208 , 21 @ @ 
 worldsettings . func _ 77159 _ a ( ) ; 
 } 
 
 @ @ - 101 , 7 + 101 , 7 @ @ 
 this . func _ 147139 _ a ( this . func _ 147135 _ j ( ) ) ; 
 this . func _ 71222 _ d ( ) ; 
 } 
 - @ @ - 309 , 6 + 288 , 7 @ @ 
 + @ @ - 310 , 6 + 289 , 7 @ @ 
 if ( ! this . field _ 71290 _ O ) 
 { 
 WorldServer [ ] aworldserver = this . field _ 71305 _ c ; 
 @ @ - 109 , 7 + 109 , 7 @ @ 
 int i = aworldserver . length ; 
 
 for ( int j = 0 ; j < i ; + + j ) 
 - @ @ - 359 , 9 + 339 , 16 @ @ 
 + @ @ - 360 , 9 + 340 , 16 @ @ 
 for ( int i = 0 ; i < this . field _ 71305 _ c . length ; + + i ) 
 { 
 WorldServer worldserver = this . field _ 71305 _ c [ i ] ; 
 @ @ - 126 , 7 + 126 , 7 @ @ 
 if ( this . field _ 71307 _ n . func _ 76468 _ d ( ) ) 
 { 
 this . field _ 71307 _ n . func _ 76470 _ e ( ) ; 
 - @ @ - 586 , 13 + 573 , 15 @ @ 
 + @ @ - 588 , 13 + 575 , 15 @ @ 
 this . field _ 71304 _ b . func _ 76320 _ a ( " levels " ) ; 
 int i ; 
 
 @ @ - 145 , 7 + 145 , 7 @ @ 
 this . field _ 71304 _ b . func _ 76320 _ a ( worldserver . func _ 72912 _ H ( ) . func _ 76065 _ j ( ) ) ; 
 this . field _ 71304 _ b . func _ 76320 _ a ( " pools " ) ; 
 worldserver . func _ 82732 _ R ( ) . func _ 72343 _ a ( ) ; 
 - @ @ - 639 , 9 + 628 , 11 @ @ 
 + @ @ - 641 , 9 + 630 , 11 @ @ 
 this . field _ 71304 _ b . func _ 76319 _ b ( ) ; 
 } 
 
 @ @ - 158 , 7 + 158 , 7 @ @ 
 this . field _ 71304 _ b . func _ 76318 _ c ( " connection " ) ; 
 this . func _ 147137 _ ag ( ) . func _ 151269 _ c ( ) ; 
 this . field _ 71304 _ b . func _ 76318 _ c ( " players " ) ; 
 - @ @ - 685 , 7 + 676 , 13 @ @ 
 + @ @ - 688 , 7 + 679 , 13 @ @ 
 
 public WorldServer func _ 71218 _ a ( int p _ 71218 _ 1 _ ) 
 { 
 @ @ - 173 , 7 + 173 , 7 @ @ 
 } 
 
 public String func _ 71249 _ w ( ) 
 - @ @ - 944 , 6 + 941 , 7 @ @ 
 + @ @ - 947 , 6 + 944 , 7 @ @ 
 
 if ( worldserver ! = null ) 
 { 
 @ @ - 181 , 7 + 181 , 7 @ @ 
 worldserver . func _ 73041 _ k ( ) ; 
 } 
 } 
 - @ @ - 1414 , 7 + 1412 , 6 @ @ 
 + @ @ - 1417 , 7 + 1415 , 6 @ @ 
 this . field _ 147141 _ M = p _ 155759 _ 1 _ ; 
 } 

