BLEU SCORE: 0.015445276590783498

TEST MSG: Fix milk bucket is fillable with water or lava when milk is unregistered
GENERATED MSG: Make finite fluid blocks drainable

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fluids / capability / wrappers / FluidBucketWrapper . java b / src / main / java / net / minecraftforge / fluids / capability / wrappers / FluidBucketWrapper . java <nl> index e15b22b . . 9d7c9e7 100644 <nl> - - - a / src / main / java / net / minecraftforge / fluids / capability / wrappers / FluidBucketWrapper . java <nl> + + + b / src / main / java / net / minecraftforge / fluids / capability / wrappers / FluidBucketWrapper . java <nl> @ @ - 23 , 6 + 23 , 7 @ @ import javax . annotation . Nullable ; <nl> <nl> import net . minecraft . init . Items ; <nl> import net . minecraft . item . Item ; <nl> + import net . minecraft . item . ItemBucketMilk ; <nl> import net . minecraft . item . ItemStack ; <nl> import net . minecraft . util . EnumFacing ; <nl> import net . minecraftforge . common . ForgeModContainer ; <nl> @ @ - 118 , 7 + 119 , 7 @ @ public class FluidBucketWrapper implements IFluidHandler , ICapabilityProvider <nl> @ Override <nl> public int fill ( FluidStack resource , boolean doFill ) <nl> { <nl> - if ( container . stackSize ! = 1 | | resource = = null | | resource . amount < Fluid . BUCKET _ VOLUME | | getFluid ( ) ! = null | | ! canFillFluidType ( resource ) ) <nl> + if ( container . stackSize ! = 1 | | resource = = null | | resource . amount < Fluid . BUCKET _ VOLUME | | container . getItem ( ) instanceof ItemBucketMilk | | getFluid ( ) ! = null | | ! canFillFluidType ( resource ) ) <nl> { <nl> return 0 ; <nl> }
NEAREST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fluids / BlockFluidFinite . java b / src / main / java / net / minecraftforge / fluids / BlockFluidFinite . java <nl> index ac36dbb . . 52a76a8 100644 <nl> - - - a / src / main / java / net / minecraftforge / fluids / BlockFluidFinite . java <nl> + + + b / src / main / java / net / minecraftforge / fluids / BlockFluidFinite . java <nl> @ @ - 5 , 6 + 5 , 7 @ @ import java . util . Random ; <nl> <nl> import net . minecraft . block . material . Material ; <nl> import net . minecraft . init . Blocks ; <nl> + import net . minecraft . util . MathHelper ; <nl> import net . minecraft . world . IBlockAccess ; <nl> import net . minecraft . world . World ; <nl> <nl> @ @ - 310 , 12 + 311 , 18 @ @ public class BlockFluidFinite extends BlockFluidBase <nl> @ Override <nl> public FluidStack drain ( World world , int x , int y , int z , boolean doDrain ) <nl> { <nl> - return null ; <nl> + if ( doDrain ) <nl> + { <nl> + world . setBlock ( x , y , z , Blocks . air ) ; <nl> + } <nl> + <nl> + return new FluidStack ( getFluid ( ) , <nl> + MathHelper . floor _ float ( getQuantaPercentage ( world , x , y , z ) * FluidContainerRegistry . BUCKET _ VOLUME ) ) ; <nl> } <nl> <nl> @ Override <nl> public boolean canDrain ( World world , int x , int y , int z ) <nl> { <nl> - return false ; <nl> + return true ; <nl> } <nl> }

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fluids / capability / wrappers / FluidBucketWrapper . java b / src / main / java / net / minecraftforge / fluids / capability / wrappers / FluidBucketWrapper . java 
 index e15b22b . . 9d7c9e7 100644 
 - - - a / src / main / java / net / minecraftforge / fluids / capability / wrappers / FluidBucketWrapper . java 
 + + + b / src / main / java / net / minecraftforge / fluids / capability / wrappers / FluidBucketWrapper . java 
 @ @ - 23 , 6 + 23 , 7 @ @ import javax . annotation . Nullable ; 
 
 import net . minecraft . init . Items ; 
 import net . minecraft . item . Item ; 
 + import net . minecraft . item . ItemBucketMilk ; 
 import net . minecraft . item . ItemStack ; 
 import net . minecraft . util . EnumFacing ; 
 import net . minecraftforge . common . ForgeModContainer ; 
 @ @ - 118 , 7 + 119 , 7 @ @ public class FluidBucketWrapper implements IFluidHandler , ICapabilityProvider 
 @ Override 
 public int fill ( FluidStack resource , boolean doFill ) 
 { 
 - if ( container . stackSize ! = 1 | | resource = = null | | resource . amount < Fluid . BUCKET _ VOLUME | | getFluid ( ) ! = null | | ! canFillFluidType ( resource ) ) 
 + if ( container . stackSize ! = 1 | | resource = = null | | resource . amount < Fluid . BUCKET _ VOLUME | | container . getItem ( ) instanceof ItemBucketMilk | | getFluid ( ) ! = null | | ! canFillFluidType ( resource ) ) 
 { 
 return 0 ; 
 }

NEAREST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fluids / BlockFluidFinite . java b / src / main / java / net / minecraftforge / fluids / BlockFluidFinite . java 
 index ac36dbb . . 52a76a8 100644 
 - - - a / src / main / java / net / minecraftforge / fluids / BlockFluidFinite . java 
 + + + b / src / main / java / net / minecraftforge / fluids / BlockFluidFinite . java 
 @ @ - 5 , 6 + 5 , 7 @ @ import java . util . Random ; 
 
 import net . minecraft . block . material . Material ; 
 import net . minecraft . init . Blocks ; 
 + import net . minecraft . util . MathHelper ; 
 import net . minecraft . world . IBlockAccess ; 
 import net . minecraft . world . World ; 
 
 @ @ - 310 , 12 + 311 , 18 @ @ public class BlockFluidFinite extends BlockFluidBase 
 @ Override 
 public FluidStack drain ( World world , int x , int y , int z , boolean doDrain ) 
 { 
 - return null ; 
 + if ( doDrain ) 
 + { 
 + world . setBlock ( x , y , z , Blocks . air ) ; 
 + } 
 + 
 + return new FluidStack ( getFluid ( ) , 
 + MathHelper . floor _ float ( getQuantaPercentage ( world , x , y , z ) * FluidContainerRegistry . BUCKET _ VOLUME ) ) ; 
 } 
 
 @ Override 
 public boolean canDrain ( World world , int x , int y , int z ) 
 { 
 - return false ; 
 + return true ; 
 } 
 }
