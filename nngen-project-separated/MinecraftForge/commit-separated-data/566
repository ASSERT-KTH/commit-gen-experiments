BLEU SCORE: 0.01543228837249852

TEST MSG: Fix Villagers for 1 . 11
GENERATED MSG: Fix potential desync between Forge ' s Villager profession and vanilla ' s int based system .

TEST DIFF (one line): diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java <nl> index 20de558 . . 3823166 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java <nl> @ @ - 159 , 6 + 159 , 7 @ @ public class VillagerRegistry <nl> { <nl> register ( prof , 1 ) ; <nl> ( new VillagerCareer ( prof , " librarian " ) ) . init ( VanillaTrades . trades [ 1 ] [ 0 ] ) ; <nl> + ( new VillagerCareer ( prof , " cartographer " ) ) . init ( VanillaTrades . trades [ 1 ] [ 1 ] ) ; <nl> } <nl> prof = new VillagerProfession ( " minecraft : priest " , <nl> " minecraft : textures / entity / villager / priest . png " , <nl> @ @ - 185 , 8 + 186 , 8 @ @ public class VillagerRegistry <nl> ( new VillagerCareer ( prof , " leather " ) ) . init ( VanillaTrades . trades [ 4 ] [ 1 ] ) ; <nl> } <nl> prof = new VillagerProfession ( " minecraft : nitwit " , <nl> - " minecraft : textures / entity / villager / nitwit . png " , <nl> - " minecraft : textures / entity / zombie _ villager / zombie _ nitwit . png " ) ; <nl> + " minecraft : textures / entity / villager / villager . png " , <nl> + " minecraft : textures / entity / zombie _ villager / zombie _ villager . png " ) ; <nl> { <nl> register ( prof , 5 ) ; <nl> ( new VillagerCareer ( prof , " nitwit " ) ) . init ( VanillaTrades . trades [ 5 ] [ 0 ] ) ;
NEAREST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch b / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch <nl> index 9cd5cb3 . . 54cc5b1 100644 <nl> - - - a / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch <nl> + + + b / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch <nl> @ @ - 55 , 7 + 55 , 15 @ @ <nl> this . field _ 70956 _ bz = p _ 70037 _ 1 _ . func _ 74762 _ e ( " Riches " ) ; <nl> this . field _ 175563 _ bv = p _ 70037 _ 1 _ . func _ 74762 _ e ( " Career " ) ; <nl> this . field _ 175562 _ bw = p _ 70037 _ 1 _ . func _ 74762 _ e ( " CareerLevel " ) ; <nl> - @ @ - 334 , 6 + 346 , 26 @ @ <nl> + @ @ - 327 , 6 + 339 , 7 @ @ <nl> + public void func _ 70938 _ b ( int p _ 70938 _ 1 _ ) <nl> + { <nl> + this . field _ 70180 _ af . func _ 187227 _ b ( field _ 184752 _ bw , Integer . valueOf ( p _ 70938 _ 1 _ ) ) ; <nl> + + net . minecraftforge . fml . common . registry . VillagerRegistry . onSetProfession ( this , p _ 70938 _ 1 _ ) ; <nl> + } <nl> + <nl> + public int func _ 70946 _ n ( ) <nl> + @ @ - 334 , 6 + 347 , 27 @ @ <nl> return Math . max ( ( ( Integer ) this . field _ 70180 _ af . func _ 187225 _ a ( field _ 184752 _ bw ) ) . intValue ( ) % 5 , 0 ) ; <nl> } <nl> <nl> @ @ - 64 , 6 + 72 , 7 @ @ <nl> + { <nl> + this . field _ 70180 _ af . func _ 187227 _ b ( PROFESSION _ STR , prof . getRegistryName ( ) . toString ( ) ) ; <nl> + this . prof = prof ; <nl> + + net . minecraftforge . fml . common . registry . VillagerRegistry . onSetProfession ( this , prof ) ; <nl> + } <nl> + <nl> + public net . minecraftforge . fml . common . registry . VillagerRegistry . VillagerProfession getProfessionForge ( ) <nl> @ @ - 82 , 7 + 91 , 7 @ @ <nl> public boolean func _ 70941 _ o ( ) <nl> { <nl> return this . field _ 70952 _ f ; <nl> - @ @ - 533 , 15 + 565 , 13 @ @ <nl> + @ @ - 533 , 15 + 567 , 13 @ @ <nl> <nl> private void func _ 175554 _ cu ( ) <nl> { <nl> @ @ - 99 , 7 + 108 , 7 @ @ <nl> this . field _ 175562 _ bw = 1 ; <nl> } <nl> <nl> - @ @ - 552 , 7 + 582 , 7 @ @ <nl> + @ @ - 552 , 7 + 584 , 7 @ @ <nl> <nl> int i = this . field _ 175563 _ bv - 1 ; <nl> int j = this . field _ 175562 _ bw - 1 ; <nl> @ @ - 108 , 7 + 117 , 7 @ @ <nl> <nl> if ( j > = 0 & & j < aentityvillager $ itradelist1 . length ) <nl> { <nl> - @ @ - 647 , 9 + 677 , 14 @ @ <nl> + @ @ - 647 , 9 + 679 , 14 @ @ <nl> } <nl> } <nl> <nl> @ @ - 124 , 7 + 133 , 7 @ @ <nl> textcomponenttranslation . func _ 150256 _ b ( ) . func _ 150209 _ a ( this . func _ 174823 _ aP ( ) ) ; <nl> textcomponenttranslation . func _ 150256 _ b ( ) . func _ 179989 _ a ( this . func _ 110124 _ au ( ) . toString ( ) ) ; <nl> <nl> - @ @ - 708 , 7 + 743 , 7 @ @ <nl> + @ @ - 708 , 7 + 745 , 7 @ @ <nl> public IEntityLivingData func _ 180482 _ a ( DifficultyInstance p _ 180482 _ 1 _ , IEntityLivingData p _ 180482 _ 2 _ ) <nl> { <nl> p _ 180482 _ 2 _ = super . func _ 180482 _ a ( p _ 180482 _ 1 _ , p _ 180482 _ 2 _ ) ; <nl> diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java <nl> index f0cfb52 . . 0c02d63 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java <nl> + + + b / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java <nl> @ @ - 277 , 6 + 277 , 29 @ @ public class VillagerRegistry <nl> entity . setProfession ( rand . nextInt ( entries . size ( ) ) ) ; <nl> } <nl> <nl> + public static void onSetProfession ( EntityVillager entity , VillagerProfession prof ) <nl> + { <nl> + int network = INSTANCE . professions . getId ( prof ) ; <nl> + if ( network = = - 1 | | prof ! = INSTANCE . professions . getObjectById ( network ) ) <nl> + { <nl> + throw new RuntimeException ( " Attempted to set villager profession to unregistered profession : " + network + " " + prof ) ; <nl> + } <nl> + <nl> + if ( network ! = entity . getProfession ( ) ) <nl> + entity . setProfession ( network ) ; <nl> + } <nl> + public static void onSetProfession ( EntityVillager entity , int network ) <nl> + { <nl> + VillagerProfession prof = INSTANCE . professions . getObjectById ( network ) ; <nl> + if ( prof = = null | | INSTANCE . professions . getId ( prof ) ! = network ) <nl> + { <nl> + throw new RuntimeException ( " Attempted to set villager profession to unregistered profession : " + network + " " + prof ) ; <nl> + } <nl> + <nl> + if ( prof ! = entity . getProfessionForge ( ) ) <nl> + entity . setProfession ( prof ) ; <nl> + } <nl> + <nl> / / TODO : Figure out a good generic system for this . Put on hold for Patches . <nl> <nl> private static class VanillaTrades

TEST DIFF:
diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java 
 index 20de558 . . 3823166 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java 
 @ @ - 159 , 6 + 159 , 7 @ @ public class VillagerRegistry 
 { 
 register ( prof , 1 ) ; 
 ( new VillagerCareer ( prof , " librarian " ) ) . init ( VanillaTrades . trades [ 1 ] [ 0 ] ) ; 
 + ( new VillagerCareer ( prof , " cartographer " ) ) . init ( VanillaTrades . trades [ 1 ] [ 1 ] ) ; 
 } 
 prof = new VillagerProfession ( " minecraft : priest " , 
 " minecraft : textures / entity / villager / priest . png " , 
 @ @ - 185 , 8 + 186 , 8 @ @ public class VillagerRegistry 
 ( new VillagerCareer ( prof , " leather " ) ) . init ( VanillaTrades . trades [ 4 ] [ 1 ] ) ; 
 } 
 prof = new VillagerProfession ( " minecraft : nitwit " , 
 - " minecraft : textures / entity / villager / nitwit . png " , 
 - " minecraft : textures / entity / zombie _ villager / zombie _ nitwit . png " ) ; 
 + " minecraft : textures / entity / villager / villager . png " , 
 + " minecraft : textures / entity / zombie _ villager / zombie _ villager . png " ) ; 
 { 
 register ( prof , 5 ) ; 
 ( new VillagerCareer ( prof , " nitwit " ) ) . init ( VanillaTrades . trades [ 5 ] [ 0 ] ) ;

NEAREST DIFF:
diff - - git a / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch b / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch 
 index 9cd5cb3 . . 54cc5b1 100644 
 - - - a / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch 
 + + + b / patches / minecraft / net / minecraft / entity / passive / EntityVillager . java . patch 
 @ @ - 55 , 7 + 55 , 15 @ @ 
 this . field _ 70956 _ bz = p _ 70037 _ 1 _ . func _ 74762 _ e ( " Riches " ) ; 
 this . field _ 175563 _ bv = p _ 70037 _ 1 _ . func _ 74762 _ e ( " Career " ) ; 
 this . field _ 175562 _ bw = p _ 70037 _ 1 _ . func _ 74762 _ e ( " CareerLevel " ) ; 
 - @ @ - 334 , 6 + 346 , 26 @ @ 
 + @ @ - 327 , 6 + 339 , 7 @ @ 
 + public void func _ 70938 _ b ( int p _ 70938 _ 1 _ ) 
 + { 
 + this . field _ 70180 _ af . func _ 187227 _ b ( field _ 184752 _ bw , Integer . valueOf ( p _ 70938 _ 1 _ ) ) ; 
 + + net . minecraftforge . fml . common . registry . VillagerRegistry . onSetProfession ( this , p _ 70938 _ 1 _ ) ; 
 + } 
 + 
 + public int func _ 70946 _ n ( ) 
 + @ @ - 334 , 6 + 347 , 27 @ @ 
 return Math . max ( ( ( Integer ) this . field _ 70180 _ af . func _ 187225 _ a ( field _ 184752 _ bw ) ) . intValue ( ) % 5 , 0 ) ; 
 } 
 
 @ @ - 64 , 6 + 72 , 7 @ @ 
 + { 
 + this . field _ 70180 _ af . func _ 187227 _ b ( PROFESSION _ STR , prof . getRegistryName ( ) . toString ( ) ) ; 
 + this . prof = prof ; 
 + + net . minecraftforge . fml . common . registry . VillagerRegistry . onSetProfession ( this , prof ) ; 
 + } 
 + 
 + public net . minecraftforge . fml . common . registry . VillagerRegistry . VillagerProfession getProfessionForge ( ) 
 @ @ - 82 , 7 + 91 , 7 @ @ 
 public boolean func _ 70941 _ o ( ) 
 { 
 return this . field _ 70952 _ f ; 
 - @ @ - 533 , 15 + 565 , 13 @ @ 
 + @ @ - 533 , 15 + 567 , 13 @ @ 
 
 private void func _ 175554 _ cu ( ) 
 { 
 @ @ - 99 , 7 + 108 , 7 @ @ 
 this . field _ 175562 _ bw = 1 ; 
 } 
 
 - @ @ - 552 , 7 + 582 , 7 @ @ 
 + @ @ - 552 , 7 + 584 , 7 @ @ 
 
 int i = this . field _ 175563 _ bv - 1 ; 
 int j = this . field _ 175562 _ bw - 1 ; 
 @ @ - 108 , 7 + 117 , 7 @ @ 
 
 if ( j > = 0 & & j < aentityvillager $ itradelist1 . length ) 
 { 
 - @ @ - 647 , 9 + 677 , 14 @ @ 
 + @ @ - 647 , 9 + 679 , 14 @ @ 
 } 
 } 
 
 @ @ - 124 , 7 + 133 , 7 @ @ 
 textcomponenttranslation . func _ 150256 _ b ( ) . func _ 150209 _ a ( this . func _ 174823 _ aP ( ) ) ; 
 textcomponenttranslation . func _ 150256 _ b ( ) . func _ 179989 _ a ( this . func _ 110124 _ au ( ) . toString ( ) ) ; 
 
 - @ @ - 708 , 7 + 743 , 7 @ @ 
 + @ @ - 708 , 7 + 745 , 7 @ @ 
 public IEntityLivingData func _ 180482 _ a ( DifficultyInstance p _ 180482 _ 1 _ , IEntityLivingData p _ 180482 _ 2 _ ) 
 { 
 p _ 180482 _ 2 _ = super . func _ 180482 _ a ( p _ 180482 _ 1 _ , p _ 180482 _ 2 _ ) ; 
 diff - - git a / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java b / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java 
 index f0cfb52 . . 0c02d63 100644 
 - - - a / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java 
 + + + b / src / main / java / net / minecraftforge / fml / common / registry / VillagerRegistry . java 
 @ @ - 277 , 6 + 277 , 29 @ @ public class VillagerRegistry 
 entity . setProfession ( rand . nextInt ( entries . size ( ) ) ) ; 
 } 
 
 + public static void onSetProfession ( EntityVillager entity , VillagerProfession prof ) 
 + { 
 + int network = INSTANCE . professions . getId ( prof ) ; 
 + if ( network = = - 1 | | prof ! = INSTANCE . professions . getObjectById ( network ) ) 
 + { 
 + throw new RuntimeException ( " Attempted to set villager profession to unregistered profession : " + network + " " + prof ) ; 
 + } 
 + 
 + if ( network ! = entity . getProfession ( ) ) 
 + entity . setProfession ( network ) ; 
 + } 
 + public static void onSetProfession ( EntityVillager entity , int network ) 
 + { 
 + VillagerProfession prof = INSTANCE . professions . getObjectById ( network ) ; 
 + if ( prof = = null | | INSTANCE . professions . getId ( prof ) ! = network ) 
 + { 
 + throw new RuntimeException ( " Attempted to set villager profession to unregistered profession : " + network + " " + prof ) ; 
 + } 
 + 
 + if ( prof ! = entity . getProfessionForge ( ) ) 
 + entity . setProfession ( prof ) ; 
 + } 
 + 
 / / TODO : Figure out a good generic system for this . Put on hold for Patches . 
 
 private static class VanillaTrades
