BLEU SCORE: 0.028827386867951624

TEST MSG: Remove the call to client . refreshResources during loading
GENERATED MSG: Make TextureMap for items and blocks skip the first pass of loading / stitching textures .

TEST DIFF (one line): diff - - git a / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> index 99421c7 . . 5adf1a1 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> @ @ - 34 , 9 + 34 , 8 @ @ <nl> GlStateManager . func _ 179096 _ D ( ) ; <nl> GlStateManager . func _ 179128 _ n ( 5888 ) ; <nl> this . func _ 71361 _ d ( " Startup " ) ; <nl> - - this . field _ 147128 _ au = new TextureMap ( " textures " ) ; <nl> + bar . step ( " Loading Texture Map " ) ; <nl> - + this . field _ 147128 _ au = new TextureMap ( " textures " , true ) ; <nl> + this . field _ 147128 _ au = new TextureMap ( " textures " ) ; <nl> this . field _ 147128 _ au . func _ 147633 _ a ( this . field _ 71474 _ y . field _ 151442 _ I ) ; <nl> this . field _ 71446 _ o . func _ 110580 _ a ( TextureMap . field _ 110575 _ b , this . field _ 147128 _ au ) ; <nl> this . field _ 71446 _ o . func _ 110577 _ a ( TextureMap . field _ 110575 _ b ) ; <nl> @ @ - 87 , 15 + 86 , 6 @ @ <nl> if ( this . field _ 71474 _ y . field _ 74353 _ u & & ! this . field _ 71431 _ Q ) <nl> { <nl> this . func _ 71352 _ k ( ) ; <nl> - @ @ - 581 , 7 + 591 , 7 @ @ <nl> - { <nl> - return ( List ) p _ 193990 _ 0 _ . func _ 192711 _ b ( ) . stream ( ) . flatMap ( ( p _ 193993 _ 0 _ ) - > { <nl> - return p _ 193993 _ 0 _ . func _ 77571 _ b ( ) . func _ 82840 _ a ( ( EntityPlayer ) null , ITooltipFlag . TooltipFlags . NORMAL ) . stream ( ) ; <nl> - - } ) . map ( TextFormatting : : func _ 110646 _ a ) . map ( String : : trim ) . filter ( ( p _ 193994 _ 0 _ ) - > { <nl> - + } ) . map ( TextFormatting : : getTextWithoutFormattingCodes ) . map ( String : : trim ) . filter ( ( p _ 193994 _ 0 _ ) - > { <nl> - return ! p _ 193994 _ 0 _ . isEmpty ( ) ; <nl> - } ) . collect ( Collectors . toList ( ) ) ; <nl> - } , ( p _ 193991 _ 0 _ ) - > <nl> @ @ - 748 , 21 + 758 , 23 @ @ <nl> File file2 = new File ( file1 , " crash - " + ( new SimpleDateFormat ( " yyyy - MM - dd _ HH . mm . ss " ) ) . format ( new Date ( ) ) + " - client . txt " ) ; <nl> Bootstrap . func _ 179870 _ a ( p _ 71377 _ 1 _ . func _ 71502 _ e ( ) ) ; <nl> diff - - git a / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch b / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> index c21d8c9 . . d58b4ea 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / renderer / texture / TextureMap . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / renderer / texture / TextureMap . java <nl> - @ @ - 45 , 12 + 45 , 23 @ @ <nl> + @ @ - 45 , 6 + 45 , 16 @ @ <nl> <nl> public TextureMap ( String p _ i46100 _ 1 _ , @ Nullable ITextureMapPopulator p _ i46100 _ 2 _ ) <nl> { <nl> @ @ - 17 , 14 + 17 , 7 @ @ <nl> this . field _ 94258 _ i = Lists . < TextureAtlasSprite > newArrayList ( ) ; <nl> this . field _ 110574 _ e = Maps . < String , TextureAtlasSprite > newHashMap ( ) ; <nl> this . field _ 94252 _ e = Maps . < String , TextureAtlasSprite > newHashMap ( ) ; <nl> - this . field _ 94249 _ f = new TextureAtlasSprite ( " missingno " ) ; <nl> - this . field _ 94254 _ c = p _ i46100 _ 1 _ ; <nl> - this . field _ 174946 _ m = p _ i46100 _ 2 _ ; <nl> - + this . skipFirst = skipFirst & & ENABLE _ SKIP ; <nl> - } <nl> - <nl> - private void func _ 110569 _ e ( ) <nl> - @ @ - 74 , 6 + 85 , 7 @ @ <nl> + @ @ - 74 , 6 + 84 , 7 @ @ <nl> public void func _ 174943 _ a ( IResourceManager p _ 174943 _ 1 _ , ITextureMapPopulator p _ 174943 _ 2 _ ) <nl> { <nl> this . field _ 110574 _ e . clear ( ) ; <nl> @ @ - 32 , 26 + 25 , 23 @ @ <nl> p _ 174943 _ 2 _ . func _ 177059 _ a ( this ) ; <nl> this . func _ 110569 _ e ( ) ; <nl> this . func _ 147631 _ c ( ) ; <nl> - @ @ - 88 , 13 + 100 , 58 @ @ <nl> + @ @ - 88 , 13 + 99 , 55 @ @ <nl> this . field _ 94258 _ i . clear ( ) ; <nl> int j = Integer . MAX _ VALUE ; <nl> int k = 1 < < this . field _ 147636 _ j ; <nl> + net . minecraftforge . fml . common . FMLLog . log . info ( " Max texture size : { } " , i ) ; <nl> - + net . minecraftforge . fml . common . ProgressManager . ProgressBar bar = net . minecraftforge . fml . common . ProgressManager . push ( " Texture stitching " , skipFirst ? 0 : this . field _ 110574 _ e . size ( ) ) ; <nl> + + net . minecraftforge . fml . common . ProgressManager . ProgressBar bar = net . minecraftforge . fml . common . ProgressManager . push ( " Texture stitching " , this . field _ 110574 _ e . size ( ) ) ; <nl> + loadedSprites . clear ( ) ; <nl> <nl> - for ( Entry < String , TextureAtlasSprite > entry : this . field _ 110574 _ e . entrySet ( ) ) <nl> - + if ( ! skipFirst ) <nl> + + for ( Entry < String , TextureAtlasSprite > entry : Maps . newHashMap ( this . field _ 110574 _ e ) . entrySet ( ) ) <nl> { <nl> - TextureAtlasSprite textureatlassprite = entry . getValue ( ) ; <nl> - ResourceLocation resourcelocation = this . func _ 184396 _ a ( textureatlassprite ) ; <nl> - IResource iresource = null ; <nl> - + for ( Entry < String , TextureAtlasSprite > entry : Maps . newHashMap ( this . field _ 110574 _ e ) . entrySet ( ) ) <nl> - + { <nl> - + final ResourceLocation location = new ResourceLocation ( entry . getKey ( ) ) ; <nl> - + bar . step ( location . toString ( ) ) ; <nl> - + j = loadTexture ( stitcher , p _ 110571 _ 1 _ , location , entry . getValue ( ) , bar , j , k ) ; <nl> - + } <nl> + + final ResourceLocation location = new ResourceLocation ( entry . getKey ( ) ) ; <nl> + + bar . step ( location . toString ( ) ) ; <nl> + + j = loadTexture ( stitcher , p _ 110571 _ 1 _ , location , entry . getValue ( ) , bar , j , k ) ; <nl> + } <nl> + finishLoading ( stitcher , bar , j , k ) ; <nl> + } <nl> @ @ - 95 , 7 + 85 , 7 @ @ <nl> try <nl> { <nl> PngSizeInfo pngsizeinfo = PngSizeInfo . func _ 188532 _ a ( p _ 110571 _ 1 _ . func _ 110536 _ a ( resourcelocation ) ) ; <nl> - @ @ - 104 , 13 + 161 , 13 @ @ <nl> + @ @ - 104 , 13 + 157 , 13 @ @ <nl> } <nl> catch ( RuntimeException runtimeexception ) <nl> { <nl> @ @ - 113 , 7 + 103 , 7 @ @ <nl> } <nl> finally <nl> { <nl> - @ @ - 122 , 16 + 179 , 28 @ @ <nl> + @ @ - 122 , 16 + 175 , 28 @ @ <nl> <nl> if ( j1 < k ) <nl> { <nl> @ @ - 144 , 11 + 134 , 10 @ @ <nl> if ( i1 < this . field _ 147636 _ j ) <nl> { <nl> field _ 147635 _ d . warn ( " { } : dropping miplevel from { } to { } , because of minimum power of two : { } " , this . field _ 94254 _ c , Integer . valueOf ( this . field _ 147636 _ j ) , Integer . valueOf ( i1 ) , Integer . valueOf ( l ) ) ; <nl> - @ @ - 140 , 9 + 209 , 12 @ @ <nl> + @ @ - 140 , 9 + 205 , 11 @ @ <nl> <nl> this . field _ 94249 _ f . func _ 147963 _ d ( this . field _ 147636 _ j ) ; <nl> stitcher . func _ 110934 _ a ( this . field _ 94249 _ f ) ; <nl> - + skipFirst = false ; <nl> + bar = net . minecraftforge . fml . common . ProgressManager . push ( " Texture creation " , 2 ) ; <nl> <nl> try <nl> @ @ - 157 , 7 + 146 , 7 @ @ <nl> stitcher . func _ 94305 _ f ( ) ; <nl> } <nl> catch ( StitcherException stitcherexception ) <nl> - @ @ - 151 , 12 + 223 , 16 @ @ <nl> + @ @ - 151 , 12 + 218 , 16 @ @ <nl> } <nl> <nl> field _ 147635 _ d . info ( " Created : { } x { } { } - atlas " , Integer . valueOf ( stitcher . func _ 110935 _ a ( ) ) , Integer . valueOf ( stitcher . func _ 110936 _ b ( ) ) , this . field _ 94254 _ c ) ; <nl> @ @ - 175 , 21 + 164 , 16 @ @ <nl> { <nl> String s = textureatlassprite1 . func _ 94215 _ i ( ) ; <nl> map . remove ( s ) ; <nl> - @ @ - 186 , 6 + 262 , 13 @ @ <nl> + @ @ - 186 , 6 + 257 , 8 @ @ <nl> { <nl> textureatlassprite2 . func _ 94217 _ a ( this . field _ 94249 _ f ) ; <nl> } <nl> - + <nl> + net . minecraftforge . client . ForgeHooksClient . onTextureStitchedPost ( this ) ; <nl> - + <nl> - + / / TextureUtil . saveGlTexture is gone , FIXME <nl> - + / / if ( ! net . minecraftforge . common . ForgeModContainer . disableStitchedFileSaving ) <nl> - + / / TextureUtil . saveGlTexture ( this . basePath . replaceAll ( " / " , " _ " ) , this . getGlTextureId ( ) , this . mipmapLevels , stitcher . getCurrentWidth ( ) , stitcher . getCurrentHeight ( ) ) ; <nl> + net . minecraftforge . fml . common . ProgressManager . pop ( bar ) ; <nl> } <nl> <nl> private boolean func _ 184397 _ a ( IResourceManager p _ 184397 _ 1 _ , final TextureAtlasSprite p _ 184397 _ 2 _ ) <nl> - @ @ - 195 , 7 + 278 , 7 @ @ <nl> + @ @ - 195 , 7 + 268 , 7 @ @ <nl> label62 : <nl> { <nl> boolean flag ; <nl> @ @ - 198 , 7 + 182 , 7 @ @ <nl> try <nl> { <nl> iresource = p _ 184397 _ 1 _ . func _ 110536 _ a ( resourcelocation ) ; <nl> - @ @ - 292 , 7 + 375 , 7 @ @ <nl> + @ @ - 292 , 7 + 365 , 7 @ @ <nl> } <nl> else <nl> { <nl> @ @ - 207 , 7 + 191 , 7 @ @ <nl> <nl> if ( textureatlassprite = = null ) <nl> { <nl> - @ @ - 318 , 4 + 401 , 54 @ @ <nl> + @ @ - 318 , 4 + 391 , 52 @ @ <nl> { <nl> return this . field _ 94249 _ f ; <nl> } <nl> @ @ - 216 , 8 + 200 , 6 @ @ <nl> + / / Forge Start <nl> + / / = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> + <nl> - + private static final boolean ENABLE _ SKIP = Boolean . parseBoolean ( System . getProperty ( " fml . skipFirstTextureLoad " , " true " ) ) ; <nl> - + private boolean skipFirst = false ; <nl> + private final java . util . Deque < ResourceLocation > loadingSprites = new java . util . ArrayDeque < > ( ) ; <nl> + private final java . util . Set < ResourceLocation > loadedSprites = new java . util . HashSet < > ( ) ; <nl> + <nl> diff - - git a / src / main / java / net / minecraftforge / client / model / ModelLoader . java b / src / main / java / net / minecraftforge / client / model / ModelLoader . java <nl> index e4dc068 . . a525ec1 100644 <nl> - - - a / src / main / java / net / minecraftforge / client / model / ModelLoader . java <nl> + + + b / src / main / java / net / minecraftforge / client / model / ModelLoader . java <nl> @ @ - 63 , 7 + 63 , 6 @ @ import net . minecraft . client . renderer . block . model . multipart . Multipart ; <nl> import net . minecraft . client . renderer . block . model . multipart . Selector ; <nl> import net . minecraft . client . renderer . block . statemap . BlockStateMapper ; <nl> import net . minecraft . client . renderer . block . statemap . IStateMapper ; <nl> - import net . minecraft . client . renderer . texture . ITextureMapPopulator ; <nl> import net . minecraft . client . renderer . texture . TextureAtlasSprite ; <nl> import net . minecraft . client . renderer . texture . TextureMap ; <nl> import net . minecraft . client . renderer . vertex . DefaultVertexFormats ; <nl> @ @ - 126 , 8 + 125 , 8 @ @ import javax . annotation . Nullable ; <nl> <nl> public final class ModelLoader extends ModelBakery <nl> { <nl> - private static boolean firstLoad = Boolean . parseBoolean ( System . getProperty ( " fml . skipFirstModelBake " , " true " ) ) ; <nl> private final Map < ModelResourceLocation , IModel > stateModels = Maps . newHashMap ( ) ; <nl> + / / TODO : nothing adds to missingVariants , remove it ? <nl> private final Set < ModelResourceLocation > missingVariants = Sets . newHashSet ( ) ; <nl> private final Map < ResourceLocation , Exception > loadingExceptions = Maps . newHashMap ( ) ; <nl> private IModel missingModel = null ; <nl> @ @ - 149 , 6 + 148 , 7 @ @ public final class ModelLoader extends ModelBakery <nl> ModelLoaderRegistry . clearModelCache ( manager ) ; <nl> } <nl> <nl> + @ Nonnull <nl> @ Override <nl> public IRegistry < ModelResourceLocation , IBakedModel > setupModelRegistry ( ) <nl> { <nl> @ @ - 172 , 16 + 172 , 6 @ @ public final class ModelLoader extends ModelBakery <nl> HashMultimap < IModel , ModelResourceLocation > models = HashMultimap . create ( ) ; <nl> Multimaps . invertFrom ( Multimaps . forMap ( stateModels ) , models ) ; <nl> <nl> - if ( firstLoad ) <nl> - { <nl> - firstLoad = false ; <nl> - for ( ModelResourceLocation mrl : stateModels . keySet ( ) ) <nl> - { <nl> - bakedRegistry . putObject ( mrl , missingBaked ) ; <nl> - } <nl> - return bakedRegistry ; <nl> - } <nl> - <nl> ProgressBar bakeBar = ProgressManager . push ( " ModelLoader : baking " , models . keySet ( ) . size ( ) ) ; <nl> <nl> for ( IModel model : models . keySet ( ) ) <nl> diff - - git a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> index 3917eec . . fb9d9c0 100644 <nl> - - - a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> + + + b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java <nl> @ @ - 361 , 8 + 361 , 14 @ @ public class FMLClientHandler implements IFMLSidedHandler <nl> return ; <nl> } <nl> <nl> - / / Reload resources <nl> - client . refreshResources ( ) ; <nl> + / / This call is being phased out for performance reasons in 1 . 12 , <nl> + / / but we are keeping an option here in case something needs it for a little longer . <nl> + / / See https : / / github . com / MinecraftForge / MinecraftForge / pull / 4032 <nl> + if ( Boolean . parseBoolean ( System . getProperty ( " fml . reloadResourcesOnStart " , " false " ) ) ) <nl> + { <nl> + client . refreshResources ( ) ; <nl> + } <nl> + <nl> RenderingRegistry . loadEntityRenderers ( Minecraft . getMinecraft ( ) . getRenderManager ( ) . entityRenderMap ) ; <nl> guiFactories = HashBiMap . create ( ) ; <nl> for ( ModContainer mc : Loader . instance ( ) . getActiveModList ( ) )
NEAREST DIFF (one line): diff - - git a / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> index c5e5abb . . 22438e2 100644 <nl> - - - a / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> + + + b / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> @ @ - 85 , 15 + 85 , 17 @ @ <nl> this . func _ 71361 _ d ( " Startup " ) ; <nl> + bar . step ( " Render Global instance " ) ; <nl> this . field _ 71438 _ f = new RenderGlobal ( this ) ; <nl> + - this . field _ 147128 _ au = new TextureMap ( 0 , " textures / blocks " ) ; <nl> + bar . step ( " Building Blocks Texture " ) ; <nl> - this . field _ 147128 _ au = new TextureMap ( 0 , " textures / blocks " ) ; <nl> + + this . field _ 147128 _ au = new TextureMap ( 0 , " textures / blocks " , true ) ; <nl> + bar . step ( " Anisotropy and Mipmaps " ) ; <nl> this . field _ 147128 _ au . func _ 147632 _ b ( this . field _ 71474 _ y . field _ 151443 _ J ) ; <nl> this . field _ 147128 _ au . func _ 147633 _ a ( this . field _ 71474 _ y . field _ 151442 _ I ) ; <nl> + bar . step ( " Loading Blocks Texture " ) ; <nl> this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110575 _ b , this . field _ 147128 _ au ) ; <nl> + - this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110576 _ c , new TextureMap ( 1 , " textures / items " ) ) ; <nl> + bar . step ( " Loading Items Texture " ) ; <nl> - this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110576 _ c , new TextureMap ( 1 , " textures / items " ) ) ; <nl> + + this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110576 _ c , new TextureMap ( 1 , " textures / items " , true ) ) ; <nl> + bar . step ( " Viewport " ) ; <nl> GL11 . glViewport ( 0 , 0 , this . field _ 71443 _ c , this . field _ 71440 _ d ) ; <nl> this . field _ 71452 _ i = new EffectRenderer ( this . field _ 71441 _ e , this . field _ 71446 _ o ) ; <nl> diff - - git a / fml / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch b / fml / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> index 44bf7be . . 45412d2 100644 <nl> - - - a / fml / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> + + + b / fml / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> @ @ - 1 , 14 + 1 , 44 @ @ <nl> - - - . . / src - base / minecraft / net / minecraft / client / renderer / texture / TextureMap . java <nl> + + + . . / src - work / minecraft / net / minecraft / client / renderer / texture / TextureMap . java <nl> - @ @ - 96 , 6 + 96 , 7 @ @ <nl> + @ @ - 35 , 6 + 35 , 7 @ @ <nl> + @ SideOnly ( Side . CLIENT ) <nl> + public class TextureMap extends AbstractTexture implements ITickableTextureObject , IIconRegister <nl> + { <nl> + + private static final boolean ENABLE _ SKIP = Boolean . parseBoolean ( System . getProperty ( " fml . skipFirstTextureLoad " , " true " ) ) ; <nl> + private static final Logger field _ 147635 _ d = LogManager . getLogger ( ) ; <nl> + public static final ResourceLocation field _ 110575 _ b = new ResourceLocation ( " textures / atlas / blocks . png " ) ; <nl> + public static final ResourceLocation field _ 110576 _ c = new ResourceLocation ( " textures / atlas / items . png " ) ; <nl> + @ @ - 47 , 12 + 48 , 18 @ @ <nl> + private int field _ 147637 _ k = 1 ; <nl> + private final TextureAtlasSprite field _ 94249 _ f = new TextureAtlasSprite ( " missingno " ) ; <nl> + private static final String _ _ OBFID = " CL _ 00001058 " ; <nl> + + private boolean skipFirst = false ; <nl> + <nl> + public TextureMap ( int p _ i1281 _ 1 _ , String p _ i1281 _ 2 _ ) <nl> + { <nl> + + this ( p _ i1281 _ 1 _ , p _ i1281 _ 2 _ , false ) ; <nl> + + } <nl> + + public TextureMap ( int p _ i1281 _ 1 _ , String p _ i1281 _ 2 _ , boolean skipFirst ) <nl> + + { <nl> + this . field _ 94255 _ a = p _ i1281 _ 1 _ ; <nl> + this . field _ 94254 _ c = p _ i1281 _ 2 _ ; <nl> + this . func _ 110573 _ f ( ) ; <nl> + + this . skipFirst = skipFirst & & ENABLE _ SKIP ; <nl> + } <nl> + <nl> + private void func _ 110569 _ e ( ) <nl> + @ @ - 96 , 15 + 103 , 17 @ @ <nl> this . field _ 94252 _ e . clear ( ) ; <nl> this . field _ 94258 _ i . clear ( ) ; <nl> int j = Integer . MAX _ VALUE ; <nl> - + cpw . mods . fml . common . ProgressManager . ProgressBar bar = cpw . mods . fml . common . ProgressManager . push ( " Texture stitching " , this . field _ 110574 _ e . size ( ) ) ; <nl> + + cpw . mods . fml . common . ProgressManager . ProgressBar bar = cpw . mods . fml . common . ProgressManager . push ( " Texture Loading " , skipFirst ? 0 : this . field _ 110574 _ e . size ( ) ) ; <nl> Iterator iterator = this . field _ 110574 _ e . entrySet ( ) . iterator ( ) ; <nl> TextureAtlasSprite textureatlassprite ; <nl> <nl> - @ @ - 105 , 6 + 106 , 7 @ @ <nl> + - while ( iterator . hasNext ( ) ) <nl> + + while ( ! skipFirst & & iterator . hasNext ( ) ) <nl> + { <nl> + Entry entry = ( Entry ) iterator . next ( ) ; <nl> ResourceLocation resourcelocation = new ResourceLocation ( ( String ) entry . getKey ( ) ) ; <nl> textureatlassprite = ( TextureAtlasSprite ) entry . getValue ( ) ; <nl> ResourceLocation resourcelocation1 = this . func _ 147634 _ a ( resourcelocation , 0 ) ; <nl> @ @ - 16 , 7 + 46 , 7 @ @ <nl> <nl> try <nl> { <nl> - @ @ - 156 , 12 + 158 , 14 @ @ <nl> + @ @ - 156 , 12 + 165 , 14 @ @ <nl> } <nl> catch ( RuntimeException runtimeexception ) <nl> { <nl> @ @ - 33 , 7 + 63 , 7 @ @ <nl> continue ; <nl> } <nl> <nl> - @ @ - 169 , 6 + 173 , 7 @ @ <nl> + @ @ - 169 , 6 + 180 , 7 @ @ <nl> stitcher . func _ 110934 _ a ( textureatlassprite ) ; <nl> } <nl> <nl> @ @ - 41 , 24 + 71 , 26 @ @ <nl> int i1 = MathHelper . func _ 151239 _ c ( j ) ; <nl> <nl> if ( i1 < this . field _ 147636 _ j ) <nl> - @ @ - 178 , 10 + 183 , 12 @ @ <nl> + @ @ - 178 , 10 + 190 , 12 @ @ <nl> } <nl> <nl> Iterator iterator1 = this . field _ 110574 _ e . values ( ) . iterator ( ) ; <nl> - + bar = cpw . mods . fml . common . ProgressManager . push ( " Mipmap generation " , this . field _ 110574 _ e . size ( ) ) ; <nl> + + bar = cpw . mods . fml . common . ProgressManager . push ( " Mipmap generation " , skipFirst ? 0 : this . field _ 110574 _ e . size ( ) ) ; <nl> <nl> - while ( iterator1 . hasNext ( ) ) <nl> + - while ( iterator1 . hasNext ( ) ) <nl> + + while ( ! skipFirst & & iterator1 . hasNext ( ) ) <nl> { <nl> final TextureAtlasSprite textureatlassprite1 = ( TextureAtlasSprite ) iterator1 . next ( ) ; <nl> + bar . step ( textureatlassprite1 . func _ 94215 _ i ( ) ) ; <nl> <nl> try <nl> { <nl> - @ @ - 222 , 9 + 229 , 12 @ @ <nl> + @ @ - 222 , 9 + 236 , 13 @ @ <nl> <nl> this . field _ 94249 _ f . func _ 147963 _ d ( this . field _ 147636 _ j ) ; <nl> stitcher . func _ 110934 _ a ( this . field _ 94249 _ f ) ; <nl> + cpw . mods . fml . common . ProgressManager . pop ( bar ) ; <nl> + + skipFirst = false ; <nl> + bar = cpw . mods . fml . common . ProgressManager . push ( " Texture creation " , 3 ) ; <nl> <nl> try <nl> @ @ - 67 , 7 + 99 , 7 @ @ <nl> stitcher . func _ 94305 _ f ( ) ; <nl> } <nl> catch ( StitcherException stitcherexception ) <nl> - @ @ - 233 , 10 + 243 , 12 @ @ <nl> + @ @ - 233 , 10 + 251 , 12 @ @ <nl> } <nl> <nl> field _ 147635 _ d . info ( " Created : { } x { } { } - atlas " , new Object [ ] { Integer . valueOf ( stitcher . func _ 110935 _ a ( ) ) , Integer . valueOf ( stitcher . func _ 110936 _ b ( ) ) , this . field _ 94254 _ c } ) ; <nl> @ @ - 80 , 7 + 112 , 7 @ @ <nl> while ( iterator2 . hasNext ( ) ) <nl> { <nl> textureatlassprite = ( TextureAtlasSprite ) iterator2 . next ( ) ; <nl> - @ @ - 274 , 6 + 286 , 7 @ @ <nl> + @ @ - 274 , 6 + 294 , 7 @ @ <nl> textureatlassprite = ( TextureAtlasSprite ) iterator2 . next ( ) ; <nl> textureatlassprite . func _ 94217 _ a ( this . field _ 94249 _ f ) ; <nl> } <nl> diff - - git a / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> index 248ff1a . . abbd9f7 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / Minecraft . java . patch <nl> @ @ - 56 , 7 + 56 , 7 @ @ <nl> if ( p _ 147108 _ 1 _ instanceof GuiMainMenu ) <nl> { <nl> this . field _ 71474 _ y . field _ 74330 _ P = false ; <nl> - @ @ - 1352 , 7 + 1357 , 7 @ @ <nl> + @ @ - 1353 , 7 + 1358 , 7 @ @ <nl> <nl> if ( this . field _ 71439 _ g . func _ 82246 _ f ( i , j , k ) ) <nl> { <nl> @ @ - 65 , 7 + 65 , 7 @ @ <nl> this . field _ 71439 _ g . func _ 71038 _ i ( ) ; <nl> } <nl> } <nl> - @ @ - 1433 , 11 + 1438 , 12 @ @ <nl> + @ @ - 1434 , 11 + 1439 , 12 @ @ <nl> int j = this . field _ 71476 _ x . field _ 72312 _ c ; <nl> int k = this . field _ 71476 _ x . field _ 72309 _ d ; <nl> <nl> @ @ - 80 , 7 + 80 , 7 @ @ <nl> { <nl> flag = false ; <nl> this . field _ 71439 _ g . func _ 71038 _ i ( ) ; <nl> - @ @ - 1464 , 7 + 1470 , 8 @ @ <nl> + @ @ - 1465 , 7 + 1471 , 8 @ @ <nl> { <nl> ItemStack itemstack1 = this . field _ 71439 _ g . field _ 71071 _ by . func _ 70448 _ g ( ) ; <nl> <nl> @ @ - 90 , 7 + 90 , 7 @ @ <nl> { <nl> this . field _ 71460 _ t . field _ 78516 _ c . func _ 78445 _ c ( ) ; <nl> } <nl> - @ @ - 1676 , 6 + 1683 , 8 @ @ <nl> + @ @ - 1677 , 6 + 1684 , 8 @ @ <nl> <nl> while ( Mouse . next ( ) ) <nl> { <nl> @ @ - 99 , 7 + 99 , 7 @ @ <nl> j = Mouse . getEventButton ( ) ; <nl> KeyBinding . func _ 74510 _ a ( j - 100 , Mouse . getEventButtonState ( ) ) ; <nl> <nl> - @ @ - 2138 , 6 + 2147 , 11 @ @ <nl> + @ @ - 2139 , 6 + 2148 , 11 @ @ <nl> <nl> public void func _ 71353 _ a ( WorldClient p _ 71353 _ 1 _ , String p _ 71353 _ 2 _ ) <nl> { <nl> @ @ - 111 , 7 + 111 , 7 @ @ <nl> if ( p _ 71353 _ 1 _ = = null ) <nl> { <nl> NetHandlerPlayClient nethandlerplayclient = this . func _ 147114 _ u ( ) ; <nl> - @ @ - 2150 , 6 + 2164 , 18 @ @ <nl> + @ @ - 2151 , 6 + 2165 , 18 @ @ <nl> if ( this . field _ 71437 _ Z ! = null ) <nl> { <nl> this . field _ 71437 _ Z . func _ 71263 _ m ( ) ; <nl> @ @ - 130 , 7 + 130 , 7 @ @ <nl> } <nl> <nl> this . field _ 71437 _ Z = null ; <nl> - @ @ - 2298 , 113 + 2324 , 10 @ @ <nl> + @ @ - 2299 , 113 + 2325 , 10 @ @ <nl> if ( this . field _ 71476 _ x ! = null ) <nl> { <nl> boolean flag = this . field _ 71439 _ g . field _ 71075 _ bZ . field _ 75098 _ d ; <nl> @ @ - 246 , 7 + 246 , 7 @ @ <nl> if ( flag ) <nl> { <nl> j = this . field _ 71439 _ g . field _ 71069 _ bz . field _ 75151 _ b . size ( ) - 9 + this . field _ 71439 _ g . field _ 71071 _ by . field _ 70461 _ c ; <nl> - @ @ - 2670 , 8 + 2593 , 15 @ @ <nl> + @ @ - 2671 , 8 + 2594 , 15 @ @ <nl> p _ 70001 _ 1 _ . func _ 152767 _ b ( " gl _ max _ texture _ size " , Integer . valueOf ( func _ 71369 _ N ( ) ) ) ; <nl> } <nl> <nl> @ @ - 262 , 7 + 262 , 7 @ @ <nl> for ( int i = 16384 ; i > 0 ; i > > = 1 ) <nl> { <nl> GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; <nl> - @ @ - 2679 , 6 + 2609 , 7 @ @ <nl> + @ @ - 2680 , 6 + 2610 , 7 @ @ <nl> <nl> if ( j ! = 0 ) <nl> { <nl> diff - - git a / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch b / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> index ee49796 . . 75ee568 100644 <nl> - - - a / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> + + + b / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch <nl> @ @ - 8 , 7 + 8 , 7 @ @ <nl> import org . apache . logging . log4j . LogManager ; <nl> import org . apache . logging . log4j . Logger ; <nl> <nl> - @ @ - 91 , 11 + 92 , 14 @ @ <nl> + @ @ - 98 , 11 + 99 , 14 @ @ <nl> <nl> public void func _ 110571 _ b ( IResourceManager p _ 110571 _ 1 _ ) <nl> { <nl> @ @ - 20 , 10 + 20 , 10 @ @ <nl> this . field _ 94258 _ i . clear ( ) ; <nl> int j = Integer . MAX _ VALUE ; <nl> + ForgeHooksClient . onTextureStitchedPre ( this ) ; <nl> - cpw . mods . fml . common . ProgressManager . ProgressBar bar = cpw . mods . fml . common . ProgressManager . push ( " Texture stitching " , this . field _ 110574 _ e . size ( ) ) ; <nl> + cpw . mods . fml . common . ProgressManager . ProgressBar bar = cpw . mods . fml . common . ProgressManager . push ( " Texture Loading " , skipFirst ? 0 : this . field _ 110574 _ e . size ( ) ) ; <nl> Iterator iterator = this . field _ 110574 _ e . entrySet ( ) . iterator ( ) ; <nl> TextureAtlasSprite textureatlassprite ; <nl> - @ @ - 108 , 6 + 112 , 16 @ @ <nl> + @ @ - 115 , 6 + 119 , 16 @ @ <nl> ResourceLocation resourcelocation1 = this . func _ 147634 _ a ( resourcelocation , 0 ) ; <nl> bar . step ( resourcelocation1 . func _ 110623 _ a ( ) ) ; <nl> <nl> @ @ - 40 , 7 + 40 , 7 @ @ <nl> try <nl> { <nl> IResource iresource = p _ 110571 _ 1 _ . func _ 110536 _ a ( resourcelocation1 ) ; <nl> - @ @ - 286 , 6 + 300 , 7 @ @ <nl> + @ @ - 294 , 6 + 308 , 7 @ @ <nl> textureatlassprite = ( TextureAtlasSprite ) iterator2 . next ( ) ; <nl> textureatlassprite . func _ 94217 _ a ( this . field _ 94249 _ f ) ; <nl> } <nl> @ @ - 48 , 7 + 48 , 7 @ @ <nl> cpw . mods . fml . common . ProgressManager . pop ( bar ) ; <nl> } <nl> <nl> - @ @ - 360 , 7 + 375 , 7 @ @ <nl> + @ @ - 368 , 7 + 383 , 7 @ @ <nl> { <nl> throw new IllegalArgumentException ( " Name cannot be null ! " ) ; <nl> } <nl> @ @ - 57 , 7 + 57 , 7 @ @ <nl> { <nl> Object object = ( TextureAtlasSprite ) this . field _ 110574 _ e . get ( p _ 94245 _ 1 _ ) ; <nl> <nl> - @ @ - 416 , 4 + 431 , 37 @ @ <nl> + @ @ - 424 , 4 + 439 , 37 @ @ <nl> { <nl> this . field _ 147637 _ k = p _ 147632 _ 1 _ ; <nl> }

TEST DIFF:
diff - - git a / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 index 99421c7 . . 5adf1a1 100644 
 - - - a / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 @ @ - 34 , 9 + 34 , 8 @ @ 
 GlStateManager . func _ 179096 _ D ( ) ; 
 GlStateManager . func _ 179128 _ n ( 5888 ) ; 
 this . func _ 71361 _ d ( " Startup " ) ; 
 - - this . field _ 147128 _ au = new TextureMap ( " textures " ) ; 
 + bar . step ( " Loading Texture Map " ) ; 
 - + this . field _ 147128 _ au = new TextureMap ( " textures " , true ) ; 
 + this . field _ 147128 _ au = new TextureMap ( " textures " ) ; 
 this . field _ 147128 _ au . func _ 147633 _ a ( this . field _ 71474 _ y . field _ 151442 _ I ) ; 
 this . field _ 71446 _ o . func _ 110580 _ a ( TextureMap . field _ 110575 _ b , this . field _ 147128 _ au ) ; 
 this . field _ 71446 _ o . func _ 110577 _ a ( TextureMap . field _ 110575 _ b ) ; 
 @ @ - 87 , 15 + 86 , 6 @ @ 
 if ( this . field _ 71474 _ y . field _ 74353 _ u & & ! this . field _ 71431 _ Q ) 
 { 
 this . func _ 71352 _ k ( ) ; 
 - @ @ - 581 , 7 + 591 , 7 @ @ 
 - { 
 - return ( List ) p _ 193990 _ 0 _ . func _ 192711 _ b ( ) . stream ( ) . flatMap ( ( p _ 193993 _ 0 _ ) - > { 
 - return p _ 193993 _ 0 _ . func _ 77571 _ b ( ) . func _ 82840 _ a ( ( EntityPlayer ) null , ITooltipFlag . TooltipFlags . NORMAL ) . stream ( ) ; 
 - - } ) . map ( TextFormatting : : func _ 110646 _ a ) . map ( String : : trim ) . filter ( ( p _ 193994 _ 0 _ ) - > { 
 - + } ) . map ( TextFormatting : : getTextWithoutFormattingCodes ) . map ( String : : trim ) . filter ( ( p _ 193994 _ 0 _ ) - > { 
 - return ! p _ 193994 _ 0 _ . isEmpty ( ) ; 
 - } ) . collect ( Collectors . toList ( ) ) ; 
 - } , ( p _ 193991 _ 0 _ ) - > 
 @ @ - 748 , 21 + 758 , 23 @ @ 
 File file2 = new File ( file1 , " crash - " + ( new SimpleDateFormat ( " yyyy - MM - dd _ HH . mm . ss " ) ) . format ( new Date ( ) ) + " - client . txt " ) ; 
 Bootstrap . func _ 179870 _ a ( p _ 71377 _ 1 _ . func _ 71502 _ e ( ) ) ; 
 diff - - git a / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch b / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 index c21d8c9 . . d58b4ea 100644 
 - - - a / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / renderer / texture / TextureMap . java 
 + + + . . / src - work / minecraft / net / minecraft / client / renderer / texture / TextureMap . java 
 - @ @ - 45 , 12 + 45 , 23 @ @ 
 + @ @ - 45 , 6 + 45 , 16 @ @ 
 
 public TextureMap ( String p _ i46100 _ 1 _ , @ Nullable ITextureMapPopulator p _ i46100 _ 2 _ ) 
 { 
 @ @ - 17 , 14 + 17 , 7 @ @ 
 this . field _ 94258 _ i = Lists . < TextureAtlasSprite > newArrayList ( ) ; 
 this . field _ 110574 _ e = Maps . < String , TextureAtlasSprite > newHashMap ( ) ; 
 this . field _ 94252 _ e = Maps . < String , TextureAtlasSprite > newHashMap ( ) ; 
 - this . field _ 94249 _ f = new TextureAtlasSprite ( " missingno " ) ; 
 - this . field _ 94254 _ c = p _ i46100 _ 1 _ ; 
 - this . field _ 174946 _ m = p _ i46100 _ 2 _ ; 
 - + this . skipFirst = skipFirst & & ENABLE _ SKIP ; 
 - } 
 - 
 - private void func _ 110569 _ e ( ) 
 - @ @ - 74 , 6 + 85 , 7 @ @ 
 + @ @ - 74 , 6 + 84 , 7 @ @ 
 public void func _ 174943 _ a ( IResourceManager p _ 174943 _ 1 _ , ITextureMapPopulator p _ 174943 _ 2 _ ) 
 { 
 this . field _ 110574 _ e . clear ( ) ; 
 @ @ - 32 , 26 + 25 , 23 @ @ 
 p _ 174943 _ 2 _ . func _ 177059 _ a ( this ) ; 
 this . func _ 110569 _ e ( ) ; 
 this . func _ 147631 _ c ( ) ; 
 - @ @ - 88 , 13 + 100 , 58 @ @ 
 + @ @ - 88 , 13 + 99 , 55 @ @ 
 this . field _ 94258 _ i . clear ( ) ; 
 int j = Integer . MAX _ VALUE ; 
 int k = 1 < < this . field _ 147636 _ j ; 
 + net . minecraftforge . fml . common . FMLLog . log . info ( " Max texture size : { } " , i ) ; 
 - + net . minecraftforge . fml . common . ProgressManager . ProgressBar bar = net . minecraftforge . fml . common . ProgressManager . push ( " Texture stitching " , skipFirst ? 0 : this . field _ 110574 _ e . size ( ) ) ; 
 + + net . minecraftforge . fml . common . ProgressManager . ProgressBar bar = net . minecraftforge . fml . common . ProgressManager . push ( " Texture stitching " , this . field _ 110574 _ e . size ( ) ) ; 
 + loadedSprites . clear ( ) ; 
 
 - for ( Entry < String , TextureAtlasSprite > entry : this . field _ 110574 _ e . entrySet ( ) ) 
 - + if ( ! skipFirst ) 
 + + for ( Entry < String , TextureAtlasSprite > entry : Maps . newHashMap ( this . field _ 110574 _ e ) . entrySet ( ) ) 
 { 
 - TextureAtlasSprite textureatlassprite = entry . getValue ( ) ; 
 - ResourceLocation resourcelocation = this . func _ 184396 _ a ( textureatlassprite ) ; 
 - IResource iresource = null ; 
 - + for ( Entry < String , TextureAtlasSprite > entry : Maps . newHashMap ( this . field _ 110574 _ e ) . entrySet ( ) ) 
 - + { 
 - + final ResourceLocation location = new ResourceLocation ( entry . getKey ( ) ) ; 
 - + bar . step ( location . toString ( ) ) ; 
 - + j = loadTexture ( stitcher , p _ 110571 _ 1 _ , location , entry . getValue ( ) , bar , j , k ) ; 
 - + } 
 + + final ResourceLocation location = new ResourceLocation ( entry . getKey ( ) ) ; 
 + + bar . step ( location . toString ( ) ) ; 
 + + j = loadTexture ( stitcher , p _ 110571 _ 1 _ , location , entry . getValue ( ) , bar , j , k ) ; 
 + } 
 + finishLoading ( stitcher , bar , j , k ) ; 
 + } 
 @ @ - 95 , 7 + 85 , 7 @ @ 
 try 
 { 
 PngSizeInfo pngsizeinfo = PngSizeInfo . func _ 188532 _ a ( p _ 110571 _ 1 _ . func _ 110536 _ a ( resourcelocation ) ) ; 
 - @ @ - 104 , 13 + 161 , 13 @ @ 
 + @ @ - 104 , 13 + 157 , 13 @ @ 
 } 
 catch ( RuntimeException runtimeexception ) 
 { 
 @ @ - 113 , 7 + 103 , 7 @ @ 
 } 
 finally 
 { 
 - @ @ - 122 , 16 + 179 , 28 @ @ 
 + @ @ - 122 , 16 + 175 , 28 @ @ 
 
 if ( j1 < k ) 
 { 
 @ @ - 144 , 11 + 134 , 10 @ @ 
 if ( i1 < this . field _ 147636 _ j ) 
 { 
 field _ 147635 _ d . warn ( " { } : dropping miplevel from { } to { } , because of minimum power of two : { } " , this . field _ 94254 _ c , Integer . valueOf ( this . field _ 147636 _ j ) , Integer . valueOf ( i1 ) , Integer . valueOf ( l ) ) ; 
 - @ @ - 140 , 9 + 209 , 12 @ @ 
 + @ @ - 140 , 9 + 205 , 11 @ @ 
 
 this . field _ 94249 _ f . func _ 147963 _ d ( this . field _ 147636 _ j ) ; 
 stitcher . func _ 110934 _ a ( this . field _ 94249 _ f ) ; 
 - + skipFirst = false ; 
 + bar = net . minecraftforge . fml . common . ProgressManager . push ( " Texture creation " , 2 ) ; 
 
 try 
 @ @ - 157 , 7 + 146 , 7 @ @ 
 stitcher . func _ 94305 _ f ( ) ; 
 } 
 catch ( StitcherException stitcherexception ) 
 - @ @ - 151 , 12 + 223 , 16 @ @ 
 + @ @ - 151 , 12 + 218 , 16 @ @ 
 } 
 
 field _ 147635 _ d . info ( " Created : { } x { } { } - atlas " , Integer . valueOf ( stitcher . func _ 110935 _ a ( ) ) , Integer . valueOf ( stitcher . func _ 110936 _ b ( ) ) , this . field _ 94254 _ c ) ; 
 @ @ - 175 , 21 + 164 , 16 @ @ 
 { 
 String s = textureatlassprite1 . func _ 94215 _ i ( ) ; 
 map . remove ( s ) ; 
 - @ @ - 186 , 6 + 262 , 13 @ @ 
 + @ @ - 186 , 6 + 257 , 8 @ @ 
 { 
 textureatlassprite2 . func _ 94217 _ a ( this . field _ 94249 _ f ) ; 
 } 
 - + 
 + net . minecraftforge . client . ForgeHooksClient . onTextureStitchedPost ( this ) ; 
 - + 
 - + / / TextureUtil . saveGlTexture is gone , FIXME 
 - + / / if ( ! net . minecraftforge . common . ForgeModContainer . disableStitchedFileSaving ) 
 - + / / TextureUtil . saveGlTexture ( this . basePath . replaceAll ( " / " , " _ " ) , this . getGlTextureId ( ) , this . mipmapLevels , stitcher . getCurrentWidth ( ) , stitcher . getCurrentHeight ( ) ) ; 
 + net . minecraftforge . fml . common . ProgressManager . pop ( bar ) ; 
 } 
 
 private boolean func _ 184397 _ a ( IResourceManager p _ 184397 _ 1 _ , final TextureAtlasSprite p _ 184397 _ 2 _ ) 
 - @ @ - 195 , 7 + 278 , 7 @ @ 
 + @ @ - 195 , 7 + 268 , 7 @ @ 
 label62 : 
 { 
 boolean flag ; 
 @ @ - 198 , 7 + 182 , 7 @ @ 
 try 
 { 
 iresource = p _ 184397 _ 1 _ . func _ 110536 _ a ( resourcelocation ) ; 
 - @ @ - 292 , 7 + 375 , 7 @ @ 
 + @ @ - 292 , 7 + 365 , 7 @ @ 
 } 
 else 
 { 
 @ @ - 207 , 7 + 191 , 7 @ @ 
 
 if ( textureatlassprite = = null ) 
 { 
 - @ @ - 318 , 4 + 401 , 54 @ @ 
 + @ @ - 318 , 4 + 391 , 52 @ @ 
 { 
 return this . field _ 94249 _ f ; 
 } 
 @ @ - 216 , 8 + 200 , 6 @ @ 
 + / / Forge Start 
 + / / = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 + 
 - + private static final boolean ENABLE _ SKIP = Boolean . parseBoolean ( System . getProperty ( " fml . skipFirstTextureLoad " , " true " ) ) ; 
 - + private boolean skipFirst = false ; 
 + private final java . util . Deque < ResourceLocation > loadingSprites = new java . util . ArrayDeque < > ( ) ; 
 + private final java . util . Set < ResourceLocation > loadedSprites = new java . util . HashSet < > ( ) ; 
 + 
 diff - - git a / src / main / java / net / minecraftforge / client / model / ModelLoader . java b / src / main / java / net / minecraftforge / client / model / ModelLoader . java 
 index e4dc068 . . a525ec1 100644 
 - - - a / src / main / java / net / minecraftforge / client / model / ModelLoader . java 
 + + + b / src / main / java / net / minecraftforge / client / model / ModelLoader . java 
 @ @ - 63 , 7 + 63 , 6 @ @ import net . minecraft . client . renderer . block . model . multipart . Multipart ; 
 import net . minecraft . client . renderer . block . model . multipart . Selector ; 
 import net . minecraft . client . renderer . block . statemap . BlockStateMapper ; 
 import net . minecraft . client . renderer . block . statemap . IStateMapper ; 
 - import net . minecraft . client . renderer . texture . ITextureMapPopulator ; 
 import net . minecraft . client . renderer . texture . TextureAtlasSprite ; 
 import net . minecraft . client . renderer . texture . TextureMap ; 
 import net . minecraft . client . renderer . vertex . DefaultVertexFormats ; 
 @ @ - 126 , 8 + 125 , 8 @ @ import javax . annotation . Nullable ; 
 
 public final class ModelLoader extends ModelBakery 
 { 
 - private static boolean firstLoad = Boolean . parseBoolean ( System . getProperty ( " fml . skipFirstModelBake " , " true " ) ) ; 
 private final Map < ModelResourceLocation , IModel > stateModels = Maps . newHashMap ( ) ; 
 + / / TODO : nothing adds to missingVariants , remove it ? 
 private final Set < ModelResourceLocation > missingVariants = Sets . newHashSet ( ) ; 
 private final Map < ResourceLocation , Exception > loadingExceptions = Maps . newHashMap ( ) ; 
 private IModel missingModel = null ; 
 @ @ - 149 , 6 + 148 , 7 @ @ public final class ModelLoader extends ModelBakery 
 ModelLoaderRegistry . clearModelCache ( manager ) ; 
 } 
 
 + @ Nonnull 
 @ Override 
 public IRegistry < ModelResourceLocation , IBakedModel > setupModelRegistry ( ) 
 { 
 @ @ - 172 , 16 + 172 , 6 @ @ public final class ModelLoader extends ModelBakery 
 HashMultimap < IModel , ModelResourceLocation > models = HashMultimap . create ( ) ; 
 Multimaps . invertFrom ( Multimaps . forMap ( stateModels ) , models ) ; 
 
 - if ( firstLoad ) 
 - { 
 - firstLoad = false ; 
 - for ( ModelResourceLocation mrl : stateModels . keySet ( ) ) 
 - { 
 - bakedRegistry . putObject ( mrl , missingBaked ) ; 
 - } 
 - return bakedRegistry ; 
 - } 
 - 
 ProgressBar bakeBar = ProgressManager . push ( " ModelLoader : baking " , models . keySet ( ) . size ( ) ) ; 
 
 for ( IModel model : models . keySet ( ) ) 
 diff - - git a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 index 3917eec . . fb9d9c0 100644 
 - - - a / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 + + + b / src / main / java / net / minecraftforge / fml / client / FMLClientHandler . java 
 @ @ - 361 , 8 + 361 , 14 @ @ public class FMLClientHandler implements IFMLSidedHandler 
 return ; 
 } 
 
 - / / Reload resources 
 - client . refreshResources ( ) ; 
 + / / This call is being phased out for performance reasons in 1 . 12 , 
 + / / but we are keeping an option here in case something needs it for a little longer . 
 + / / See https : / / github . com / MinecraftForge / MinecraftForge / pull / 4032 
 + if ( Boolean . parseBoolean ( System . getProperty ( " fml . reloadResourcesOnStart " , " false " ) ) ) 
 + { 
 + client . refreshResources ( ) ; 
 + } 
 + 
 RenderingRegistry . loadEntityRenderers ( Minecraft . getMinecraft ( ) . getRenderManager ( ) . entityRenderMap ) ; 
 guiFactories = HashBiMap . create ( ) ; 
 for ( ModContainer mc : Loader . instance ( ) . getActiveModList ( ) )

NEAREST DIFF:
diff - - git a / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 index c5e5abb . . 22438e2 100644 
 - - - a / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 + + + b / fml / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 @ @ - 85 , 15 + 85 , 17 @ @ 
 this . func _ 71361 _ d ( " Startup " ) ; 
 + bar . step ( " Render Global instance " ) ; 
 this . field _ 71438 _ f = new RenderGlobal ( this ) ; 
 + - this . field _ 147128 _ au = new TextureMap ( 0 , " textures / blocks " ) ; 
 + bar . step ( " Building Blocks Texture " ) ; 
 - this . field _ 147128 _ au = new TextureMap ( 0 , " textures / blocks " ) ; 
 + + this . field _ 147128 _ au = new TextureMap ( 0 , " textures / blocks " , true ) ; 
 + bar . step ( " Anisotropy and Mipmaps " ) ; 
 this . field _ 147128 _ au . func _ 147632 _ b ( this . field _ 71474 _ y . field _ 151443 _ J ) ; 
 this . field _ 147128 _ au . func _ 147633 _ a ( this . field _ 71474 _ y . field _ 151442 _ I ) ; 
 + bar . step ( " Loading Blocks Texture " ) ; 
 this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110575 _ b , this . field _ 147128 _ au ) ; 
 + - this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110576 _ c , new TextureMap ( 1 , " textures / items " ) ) ; 
 + bar . step ( " Loading Items Texture " ) ; 
 - this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110576 _ c , new TextureMap ( 1 , " textures / items " ) ) ; 
 + + this . field _ 71446 _ o . func _ 130088 _ a ( TextureMap . field _ 110576 _ c , new TextureMap ( 1 , " textures / items " , true ) ) ; 
 + bar . step ( " Viewport " ) ; 
 GL11 . glViewport ( 0 , 0 , this . field _ 71443 _ c , this . field _ 71440 _ d ) ; 
 this . field _ 71452 _ i = new EffectRenderer ( this . field _ 71441 _ e , this . field _ 71446 _ o ) ; 
 diff - - git a / fml / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch b / fml / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 index 44bf7be . . 45412d2 100644 
 - - - a / fml / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 + + + b / fml / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 @ @ - 1 , 14 + 1 , 44 @ @ 
 - - - . . / src - base / minecraft / net / minecraft / client / renderer / texture / TextureMap . java 
 + + + . . / src - work / minecraft / net / minecraft / client / renderer / texture / TextureMap . java 
 - @ @ - 96 , 6 + 96 , 7 @ @ 
 + @ @ - 35 , 6 + 35 , 7 @ @ 
 + @ SideOnly ( Side . CLIENT ) 
 + public class TextureMap extends AbstractTexture implements ITickableTextureObject , IIconRegister 
 + { 
 + + private static final boolean ENABLE _ SKIP = Boolean . parseBoolean ( System . getProperty ( " fml . skipFirstTextureLoad " , " true " ) ) ; 
 + private static final Logger field _ 147635 _ d = LogManager . getLogger ( ) ; 
 + public static final ResourceLocation field _ 110575 _ b = new ResourceLocation ( " textures / atlas / blocks . png " ) ; 
 + public static final ResourceLocation field _ 110576 _ c = new ResourceLocation ( " textures / atlas / items . png " ) ; 
 + @ @ - 47 , 12 + 48 , 18 @ @ 
 + private int field _ 147637 _ k = 1 ; 
 + private final TextureAtlasSprite field _ 94249 _ f = new TextureAtlasSprite ( " missingno " ) ; 
 + private static final String _ _ OBFID = " CL _ 00001058 " ; 
 + + private boolean skipFirst = false ; 
 + 
 + public TextureMap ( int p _ i1281 _ 1 _ , String p _ i1281 _ 2 _ ) 
 + { 
 + + this ( p _ i1281 _ 1 _ , p _ i1281 _ 2 _ , false ) ; 
 + + } 
 + + public TextureMap ( int p _ i1281 _ 1 _ , String p _ i1281 _ 2 _ , boolean skipFirst ) 
 + + { 
 + this . field _ 94255 _ a = p _ i1281 _ 1 _ ; 
 + this . field _ 94254 _ c = p _ i1281 _ 2 _ ; 
 + this . func _ 110573 _ f ( ) ; 
 + + this . skipFirst = skipFirst & & ENABLE _ SKIP ; 
 + } 
 + 
 + private void func _ 110569 _ e ( ) 
 + @ @ - 96 , 15 + 103 , 17 @ @ 
 this . field _ 94252 _ e . clear ( ) ; 
 this . field _ 94258 _ i . clear ( ) ; 
 int j = Integer . MAX _ VALUE ; 
 - + cpw . mods . fml . common . ProgressManager . ProgressBar bar = cpw . mods . fml . common . ProgressManager . push ( " Texture stitching " , this . field _ 110574 _ e . size ( ) ) ; 
 + + cpw . mods . fml . common . ProgressManager . ProgressBar bar = cpw . mods . fml . common . ProgressManager . push ( " Texture Loading " , skipFirst ? 0 : this . field _ 110574 _ e . size ( ) ) ; 
 Iterator iterator = this . field _ 110574 _ e . entrySet ( ) . iterator ( ) ; 
 TextureAtlasSprite textureatlassprite ; 
 
 - @ @ - 105 , 6 + 106 , 7 @ @ 
 + - while ( iterator . hasNext ( ) ) 
 + + while ( ! skipFirst & & iterator . hasNext ( ) ) 
 + { 
 + Entry entry = ( Entry ) iterator . next ( ) ; 
 ResourceLocation resourcelocation = new ResourceLocation ( ( String ) entry . getKey ( ) ) ; 
 textureatlassprite = ( TextureAtlasSprite ) entry . getValue ( ) ; 
 ResourceLocation resourcelocation1 = this . func _ 147634 _ a ( resourcelocation , 0 ) ; 
 @ @ - 16 , 7 + 46 , 7 @ @ 
 
 try 
 { 
 - @ @ - 156 , 12 + 158 , 14 @ @ 
 + @ @ - 156 , 12 + 165 , 14 @ @ 
 } 
 catch ( RuntimeException runtimeexception ) 
 { 
 @ @ - 33 , 7 + 63 , 7 @ @ 
 continue ; 
 } 
 
 - @ @ - 169 , 6 + 173 , 7 @ @ 
 + @ @ - 169 , 6 + 180 , 7 @ @ 
 stitcher . func _ 110934 _ a ( textureatlassprite ) ; 
 } 
 
 @ @ - 41 , 24 + 71 , 26 @ @ 
 int i1 = MathHelper . func _ 151239 _ c ( j ) ; 
 
 if ( i1 < this . field _ 147636 _ j ) 
 - @ @ - 178 , 10 + 183 , 12 @ @ 
 + @ @ - 178 , 10 + 190 , 12 @ @ 
 } 
 
 Iterator iterator1 = this . field _ 110574 _ e . values ( ) . iterator ( ) ; 
 - + bar = cpw . mods . fml . common . ProgressManager . push ( " Mipmap generation " , this . field _ 110574 _ e . size ( ) ) ; 
 + + bar = cpw . mods . fml . common . ProgressManager . push ( " Mipmap generation " , skipFirst ? 0 : this . field _ 110574 _ e . size ( ) ) ; 
 
 - while ( iterator1 . hasNext ( ) ) 
 + - while ( iterator1 . hasNext ( ) ) 
 + + while ( ! skipFirst & & iterator1 . hasNext ( ) ) 
 { 
 final TextureAtlasSprite textureatlassprite1 = ( TextureAtlasSprite ) iterator1 . next ( ) ; 
 + bar . step ( textureatlassprite1 . func _ 94215 _ i ( ) ) ; 
 
 try 
 { 
 - @ @ - 222 , 9 + 229 , 12 @ @ 
 + @ @ - 222 , 9 + 236 , 13 @ @ 
 
 this . field _ 94249 _ f . func _ 147963 _ d ( this . field _ 147636 _ j ) ; 
 stitcher . func _ 110934 _ a ( this . field _ 94249 _ f ) ; 
 + cpw . mods . fml . common . ProgressManager . pop ( bar ) ; 
 + + skipFirst = false ; 
 + bar = cpw . mods . fml . common . ProgressManager . push ( " Texture creation " , 3 ) ; 
 
 try 
 @ @ - 67 , 7 + 99 , 7 @ @ 
 stitcher . func _ 94305 _ f ( ) ; 
 } 
 catch ( StitcherException stitcherexception ) 
 - @ @ - 233 , 10 + 243 , 12 @ @ 
 + @ @ - 233 , 10 + 251 , 12 @ @ 
 } 
 
 field _ 147635 _ d . info ( " Created : { } x { } { } - atlas " , new Object [ ] { Integer . valueOf ( stitcher . func _ 110935 _ a ( ) ) , Integer . valueOf ( stitcher . func _ 110936 _ b ( ) ) , this . field _ 94254 _ c } ) ; 
 @ @ - 80 , 7 + 112 , 7 @ @ 
 while ( iterator2 . hasNext ( ) ) 
 { 
 textureatlassprite = ( TextureAtlasSprite ) iterator2 . next ( ) ; 
 - @ @ - 274 , 6 + 286 , 7 @ @ 
 + @ @ - 274 , 6 + 294 , 7 @ @ 
 textureatlassprite = ( TextureAtlasSprite ) iterator2 . next ( ) ; 
 textureatlassprite . func _ 94217 _ a ( this . field _ 94249 _ f ) ; 
 } 
 diff - - git a / patches / minecraft / net / minecraft / client / Minecraft . java . patch b / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 index 248ff1a . . abbd9f7 100644 
 - - - a / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / Minecraft . java . patch 
 @ @ - 56 , 7 + 56 , 7 @ @ 
 if ( p _ 147108 _ 1 _ instanceof GuiMainMenu ) 
 { 
 this . field _ 71474 _ y . field _ 74330 _ P = false ; 
 - @ @ - 1352 , 7 + 1357 , 7 @ @ 
 + @ @ - 1353 , 7 + 1358 , 7 @ @ 
 
 if ( this . field _ 71439 _ g . func _ 82246 _ f ( i , j , k ) ) 
 { 
 @ @ - 65 , 7 + 65 , 7 @ @ 
 this . field _ 71439 _ g . func _ 71038 _ i ( ) ; 
 } 
 } 
 - @ @ - 1433 , 11 + 1438 , 12 @ @ 
 + @ @ - 1434 , 11 + 1439 , 12 @ @ 
 int j = this . field _ 71476 _ x . field _ 72312 _ c ; 
 int k = this . field _ 71476 _ x . field _ 72309 _ d ; 
 
 @ @ - 80 , 7 + 80 , 7 @ @ 
 { 
 flag = false ; 
 this . field _ 71439 _ g . func _ 71038 _ i ( ) ; 
 - @ @ - 1464 , 7 + 1470 , 8 @ @ 
 + @ @ - 1465 , 7 + 1471 , 8 @ @ 
 { 
 ItemStack itemstack1 = this . field _ 71439 _ g . field _ 71071 _ by . func _ 70448 _ g ( ) ; 
 
 @ @ - 90 , 7 + 90 , 7 @ @ 
 { 
 this . field _ 71460 _ t . field _ 78516 _ c . func _ 78445 _ c ( ) ; 
 } 
 - @ @ - 1676 , 6 + 1683 , 8 @ @ 
 + @ @ - 1677 , 6 + 1684 , 8 @ @ 
 
 while ( Mouse . next ( ) ) 
 { 
 @ @ - 99 , 7 + 99 , 7 @ @ 
 j = Mouse . getEventButton ( ) ; 
 KeyBinding . func _ 74510 _ a ( j - 100 , Mouse . getEventButtonState ( ) ) ; 
 
 - @ @ - 2138 , 6 + 2147 , 11 @ @ 
 + @ @ - 2139 , 6 + 2148 , 11 @ @ 
 
 public void func _ 71353 _ a ( WorldClient p _ 71353 _ 1 _ , String p _ 71353 _ 2 _ ) 
 { 
 @ @ - 111 , 7 + 111 , 7 @ @ 
 if ( p _ 71353 _ 1 _ = = null ) 
 { 
 NetHandlerPlayClient nethandlerplayclient = this . func _ 147114 _ u ( ) ; 
 - @ @ - 2150 , 6 + 2164 , 18 @ @ 
 + @ @ - 2151 , 6 + 2165 , 18 @ @ 
 if ( this . field _ 71437 _ Z ! = null ) 
 { 
 this . field _ 71437 _ Z . func _ 71263 _ m ( ) ; 
 @ @ - 130 , 7 + 130 , 7 @ @ 
 } 
 
 this . field _ 71437 _ Z = null ; 
 - @ @ - 2298 , 113 + 2324 , 10 @ @ 
 + @ @ - 2299 , 113 + 2325 , 10 @ @ 
 if ( this . field _ 71476 _ x ! = null ) 
 { 
 boolean flag = this . field _ 71439 _ g . field _ 71075 _ bZ . field _ 75098 _ d ; 
 @ @ - 246 , 7 + 246 , 7 @ @ 
 if ( flag ) 
 { 
 j = this . field _ 71439 _ g . field _ 71069 _ bz . field _ 75151 _ b . size ( ) - 9 + this . field _ 71439 _ g . field _ 71071 _ by . field _ 70461 _ c ; 
 - @ @ - 2670 , 8 + 2593 , 15 @ @ 
 + @ @ - 2671 , 8 + 2594 , 15 @ @ 
 p _ 70001 _ 1 _ . func _ 152767 _ b ( " gl _ max _ texture _ size " , Integer . valueOf ( func _ 71369 _ N ( ) ) ) ; 
 } 
 
 @ @ - 262 , 7 + 262 , 7 @ @ 
 for ( int i = 16384 ; i > 0 ; i > > = 1 ) 
 { 
 GL11 . glTexImage2D ( GL11 . GL _ PROXY _ TEXTURE _ 2D , 0 , GL11 . GL _ RGBA , i , i , 0 , GL11 . GL _ RGBA , GL11 . GL _ UNSIGNED _ BYTE , ( ByteBuffer ) null ) ; 
 - @ @ - 2679 , 6 + 2609 , 7 @ @ 
 + @ @ - 2680 , 6 + 2610 , 7 @ @ 
 
 if ( j ! = 0 ) 
 { 
 diff - - git a / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch b / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 index ee49796 . . 75ee568 100644 
 - - - a / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 + + + b / patches / minecraft / net / minecraft / client / renderer / texture / TextureMap . java . patch 
 @ @ - 8 , 7 + 8 , 7 @ @ 
 import org . apache . logging . log4j . LogManager ; 
 import org . apache . logging . log4j . Logger ; 
 
 - @ @ - 91 , 11 + 92 , 14 @ @ 
 + @ @ - 98 , 11 + 99 , 14 @ @ 
 
 public void func _ 110571 _ b ( IResourceManager p _ 110571 _ 1 _ ) 
 { 
 @ @ - 20 , 10 + 20 , 10 @ @ 
 this . field _ 94258 _ i . clear ( ) ; 
 int j = Integer . MAX _ VALUE ; 
 + ForgeHooksClient . onTextureStitchedPre ( this ) ; 
 - cpw . mods . fml . common . ProgressManager . ProgressBar bar = cpw . mods . fml . common . ProgressManager . push ( " Texture stitching " , this . field _ 110574 _ e . size ( ) ) ; 
 + cpw . mods . fml . common . ProgressManager . ProgressBar bar = cpw . mods . fml . common . ProgressManager . push ( " Texture Loading " , skipFirst ? 0 : this . field _ 110574 _ e . size ( ) ) ; 
 Iterator iterator = this . field _ 110574 _ e . entrySet ( ) . iterator ( ) ; 
 TextureAtlasSprite textureatlassprite ; 
 - @ @ - 108 , 6 + 112 , 16 @ @ 
 + @ @ - 115 , 6 + 119 , 16 @ @ 
 ResourceLocation resourcelocation1 = this . func _ 147634 _ a ( resourcelocation , 0 ) ; 
 bar . step ( resourcelocation1 . func _ 110623 _ a ( ) ) ; 
 
 @ @ - 40 , 7 + 40 , 7 @ @ 
 try 
 { 
 IResource iresource = p _ 110571 _ 1 _ . func _ 110536 _ a ( resourcelocation1 ) ; 
 - @ @ - 286 , 6 + 300 , 7 @ @ 
 + @ @ - 294 , 6 + 308 , 7 @ @ 
 textureatlassprite = ( TextureAtlasSprite ) iterator2 . next ( ) ; 
 textureatlassprite . func _ 94217 _ a ( this . field _ 94249 _ f ) ; 
 } 
 @ @ - 48 , 7 + 48 , 7 @ @ 
 cpw . mods . fml . common . ProgressManager . pop ( bar ) ; 
 } 
 
 - @ @ - 360 , 7 + 375 , 7 @ @ 
 + @ @ - 368 , 7 + 383 , 7 @ @ 
 { 
 throw new IllegalArgumentException ( " Name cannot be null ! " ) ; 
 } 
 @ @ - 57 , 7 + 57 , 7 @ @ 
 { 
 Object object = ( TextureAtlasSprite ) this . field _ 110574 _ e . get ( p _ 94245 _ 1 _ ) ; 
 
 - @ @ - 416 , 4 + 431 , 37 @ @ 
 + @ @ - 424 , 4 + 439 , 37 @ @ 
 { 
 this . field _ 147637 _ k = p _ 147632 _ 1 _ ; 
 }
