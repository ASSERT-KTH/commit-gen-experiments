BLEU SCORE: 0.02383853510228548

TEST MSG: Persist local metadata in SystemKeyspace earlier in initialization sequence
GENERATED MSG: Add ' nodetool statusgossip '

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 9752d16 . . ce48994 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 2 . 7 <nl> + * Persist local metadata earlier in startup sequence ( CASSANDRA - 11742 ) <nl> * Run CommitLog tests with different compression settings ( CASSANDRA - 9039 ) <nl> * cqlsh : fix tab completion for case - sensitive identifiers ( CASSANDRA - 11664 ) <nl> * Avoid showing estimated key as - 1 in tablestats ( CASSANDRA - 11587 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / SystemKeyspace . java b / src / java / org / apache / cassandra / db / SystemKeyspace . java <nl> index 1ce599d . . 74a3c7b 100644 <nl> - - - a / src / java / org / apache / cassandra / db / SystemKeyspace . java <nl> + + + b / src / java / org / apache / cassandra / db / SystemKeyspace . java <nl> @ @ - 294 , 11 + 294 , 10 @ @ public final class SystemKeyspace <nl> <nl> public static void finishStartup ( ) <nl> { <nl> - persistLocalMetadata ( ) ; <nl> LegacySchemaTables . saveSystemKeyspaceSchema ( ) ; <nl> } <nl> <nl> - private static void persistLocalMetadata ( ) <nl> + public static void persistLocalMetadata ( ) <nl> { <nl> String req = " INSERT INTO system . % s ( " + <nl> " key , " + <nl> diff - - git a / src / java / org / apache / cassandra / service / CassandraDaemon . java b / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> index 1e9378b . . 6129928 100644 <nl> - - - a / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> + + + b / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> @ @ - 177 , 6 + 177 , 10 @ @ public class CassandraDaemon <nl> exitOrFail ( 3 , e . getMessage ( ) , e . getCause ( ) ) ; <nl> } <nl> <nl> + / / We need to persist this as soon as possible after startup checks . <nl> + / / This should be the first write to SystemKeyspace ( CASSANDRA - 11742 ) <nl> + SystemKeyspace . persistLocalMetadata ( ) ; <nl> + <nl> maybeInitJmx ( ) ; <nl> <nl> Thread . setDefaultUncaughtExceptionHandler ( new Thread . UncaughtExceptionHandler ( )
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 9752d16 . . ce48994 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 2 . 7 
 + * Persist local metadata earlier in startup sequence ( CASSANDRA - 11742 ) 
 * Run CommitLog tests with different compression settings ( CASSANDRA - 9039 ) 
 * cqlsh : fix tab completion for case - sensitive identifiers ( CASSANDRA - 11664 ) 
 * Avoid showing estimated key as - 1 in tablestats ( CASSANDRA - 11587 ) 
 diff - - git a / src / java / org / apache / cassandra / db / SystemKeyspace . java b / src / java / org / apache / cassandra / db / SystemKeyspace . java 
 index 1ce599d . . 74a3c7b 100644 
 - - - a / src / java / org / apache / cassandra / db / SystemKeyspace . java 
 + + + b / src / java / org / apache / cassandra / db / SystemKeyspace . java 
 @ @ - 294 , 11 + 294 , 10 @ @ public final class SystemKeyspace 
 
 public static void finishStartup ( ) 
 { 
 - persistLocalMetadata ( ) ; 
 LegacySchemaTables . saveSystemKeyspaceSchema ( ) ; 
 } 
 
 - private static void persistLocalMetadata ( ) 
 + public static void persistLocalMetadata ( ) 
 { 
 String req = " INSERT INTO system . % s ( " + 
 " key , " + 
 diff - - git a / src / java / org / apache / cassandra / service / CassandraDaemon . java b / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 index 1e9378b . . 6129928 100644 
 - - - a / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 + + + b / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 @ @ - 177 , 6 + 177 , 10 @ @ public class CassandraDaemon 
 exitOrFail ( 3 , e . getMessage ( ) , e . getCause ( ) ) ; 
 } 
 
 + / / We need to persist this as soon as possible after startup checks . 
 + / / This should be the first write to SystemKeyspace ( CASSANDRA - 11742 ) 
 + SystemKeyspace . persistLocalMetadata ( ) ; 
 + 
 maybeInitJmx ( ) ; 
 
 Thread . setDefaultUncaughtExceptionHandler ( new Thread . UncaughtExceptionHandler ( )

NEAREST DIFF:
ELIMINATEDSENTENCE
