BLEU SCORE: 0.040583489434387374

TEST MSG: remove non essential @ Inline calls
GENERATED MSG: merge from 1 . 1

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / AbstractNativeCell . java b / src / java / org / apache / cassandra / db / AbstractNativeCell . java <nl> index 7e85af3 . . e01d860 100644 <nl> - - - a / src / java / org / apache / cassandra / db / AbstractNativeCell . java <nl> + + + b / src / java / org / apache / cassandra / db / AbstractNativeCell . java <nl> @ @ - 291 , 7 + 291 , 6 @ @ public abstract class AbstractNativeCell extends AbstractCell implements CellNam <nl> return get ( i , null ) ; <nl> } <nl> <nl> - @ Inline <nl> private ByteBuffer get ( int i , AbstractAllocator copy ) <nl> { <nl> / / remember to take dense / sparse into account , and only return EOC when not dense <nl> @ @ - 660 , 6 + 659 , 7 @ @ public abstract class AbstractNativeCell extends AbstractCell implements CellNam <nl> } <nl> <nl> / / requires isByteOrderComparable to be true . Compares the name components only ; ; may need to compare EOC etc still <nl> + @ Inline <nl> public final int compareTo ( final Composite that ) <nl> { <nl> if ( isStatic ( ) ! = that . isStatic ( ) ) <nl> diff - - git a / src / java / org / apache / cassandra / db / ArrayBackedSortedColumns . java b / src / java / org / apache / cassandra / db / ArrayBackedSortedColumns . java <nl> index e92d5a3 . . c0fae24 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ArrayBackedSortedColumns . java <nl> + + + b / src / java / org / apache / cassandra / db / ArrayBackedSortedColumns . java <nl> @ @ - 123 , 7 + 123 , 6 @ @ public class ArrayBackedSortedColumns extends ColumnFamily <nl> / * * <nl> * synchronized so that concurrent ( read - only ) accessors don ' t mess the internal state . <nl> * / <nl> - @ Inline <nl> private synchronized void sortCells ( ) <nl> { <nl> if ( isSorted ) <nl> diff - - git a / src / java / org / apache / cassandra / db / CollationController . java b / src / java / org / apache / cassandra / db / CollationController . java <nl> index c9cbf69 . . 1bc421d 100644 <nl> - - - a / src / java / org / apache / cassandra / db / CollationController . java <nl> + + + b / src / java / org / apache / cassandra / db / CollationController . java <nl> @ @ - 68 , 7 + 68 , 6 @ @ public class CollationController <nl> * Once we have data for all requests columns that is newer than the newest remaining maxtimestamp , <nl> * we stop . <nl> * / <nl> - @ Inline <nl> private ColumnFamily collectTimeOrderedData ( boolean copyOnHeap ) <nl> { <nl> final ColumnFamily container = ArrayBackedSortedColumns . factory . create ( cfs . metadata , filter . filter . isReversed ( ) ) ; <nl> diff - - git a / src / java / org / apache / cassandra / db / ConsistencyLevel . java b / src / java / org / apache / cassandra / db / ConsistencyLevel . java <nl> index 986a2aa . . 113de72 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ConsistencyLevel . java <nl> + + + b / src / java / org / apache / cassandra / db / ConsistencyLevel . java <nl> @ @ - 245 , 7 + 245 , 6 @ @ public enum ConsistencyLevel <nl> } <nl> } <nl> <nl> - @ Inline <nl> public void assureSufficientLiveNodes ( Keyspace keyspace , Iterable < InetAddress > liveEndpoints ) throws UnavailableException <nl> { <nl> int blockFor = blockFor ( keyspace ) ; <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageProxy . java b / src / java / org / apache / cassandra / service / StorageProxy . java <nl> index ff6d89c . . 615335b 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageProxy . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageProxy . java <nl> @ @ - 1109 , 7 + 1109 , 6 @ @ public class StorageProxy implements StorageProxyMBean <nl> * Performs the actual reading of a row out of the StorageService , fetching <nl> * a specific set of column names from a given column family . <nl> * / <nl> - @ Inline <nl> public static List < Row > read ( List < ReadCommand > commands , ConsistencyLevel consistency _ level ) <nl> throws UnavailableException , IsBootstrappingException , ReadTimeoutException , InvalidRequestException <nl> { <nl> @ @ - 1188 , 7 + 1187 , 6 @ @ public class StorageProxy implements StorageProxyMBean <nl> * 4 . If the digests ( if any ) match the data return the data <nl> * 5 . else carry out read repair by getting data from all the nodes . <nl> * / <nl> - @ Inline <nl> private static List < Row > fetchRows ( List < ReadCommand > initialCommands , ConsistencyLevel consistencyLevel ) <nl> throws UnavailableException , ReadTimeoutException <nl> { <nl> diff - - git a / src / java / org / apache / cassandra / utils / FastByteOperations . java b / src / java / org / apache / cassandra / utils / FastByteOperations . java <nl> index 1431fd3 . . 1b58b66 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / FastByteOperations . java <nl> + + + b / src / java / org / apache / cassandra / utils / FastByteOperations . java <nl> @ @ - 40 , 37 + 40 , 31 @ @ public class FastByteOperations <nl> / * * <nl> * Lexicographically compare two byte arrays . <nl> * / <nl> - @ Inline <nl> public static int compareUnsigned ( byte [ ] b1 , int s1 , int l1 , byte [ ] b2 , int s2 , int l2 ) <nl> { <nl> return BestHolder . BEST . compare ( b1 , s1 , l1 , b2 , s2 , l2 ) ; <nl> } <nl> <nl> - @ Inline <nl> public static int compareUnsigned ( ByteBuffer b1 , byte [ ] b2 , int s2 , int l2 ) <nl> { <nl> return BestHolder . BEST . compare ( b1 , b2 , s2 , l2 ) ; <nl> } <nl> <nl> - @ Inline <nl> public static int compareUnsigned ( byte [ ] b1 , int s1 , int l1 , ByteBuffer b2 ) <nl> { <nl> return - BestHolder . BEST . compare ( b2 , b1 , s1 , l1 ) ; <nl> } <nl> <nl> - @ Inline <nl> public static int compareUnsigned ( ByteBuffer b1 , ByteBuffer b2 ) <nl> { <nl> return BestHolder . BEST . compare ( b1 , b2 ) ; <nl> } <nl> <nl> - @ Inline <nl> public static void copy ( ByteBuffer src , int srcPosition , byte [ ] trg , int trgPosition , int length ) <nl> { <nl> BestHolder . BEST . copy ( src , srcPosition , trg , trgPosition , length ) ; <nl> } <nl> <nl> - @ Inline <nl> public static void copy ( ByteBuffer src , int srcPosition , ByteBuffer trg , int trgPosition , int length ) <nl> { <nl> BestHolder . BEST . copy ( src , srcPosition , trg , trgPosition , length ) ; <nl> @ @ - 246 , 7 + 240 , 6 @ @ public class FastByteOperations <nl> copy ( src , srcOffset + srcPosition , trgBuf , trgPosition , length ) ; <nl> } <nl> <nl> - @ Inline <nl> public static void copy ( Object src , long srcOffset , ByteBuffer trgBuf , int trgPosition , int length ) <nl> { <nl> if ( trgBuf . hasArray ( ) ) <nl> @ @ - 255 , 7 + 248 , 6 @ @ public class FastByteOperations <nl> copy ( src , srcOffset , null , trgPosition + theUnsafe . getLong ( trgBuf , DIRECT _ BUFFER _ ADDRESS _ OFFSET ) , length ) ; <nl> } <nl> <nl> - @ Inline <nl> public static void copy ( Object src , long srcOffset , byte [ ] trg , int trgPosition , int length ) <nl> { <nl> if ( length < = MIN _ COPY _ THRESHOLD ) <nl> @ @ - 273 , 7 + 265 , 6 @ @ public class FastByteOperations <nl> private static final long UNSAFE _ COPY _ THRESHOLD = 1 < < 20 ; <nl> private static final long MIN _ COPY _ THRESHOLD = 6 ; <nl> <nl> - @ Inline <nl> public static void copy ( Object src , long srcOffset , Object dst , long dstOffset , long length ) <nl> { <nl> while ( length > 0 ) { <nl> diff - - git a / src / java / org / apache / cassandra / utils / MurmurHash . java b / src / java / org / apache / cassandra / utils / MurmurHash . java <nl> index bf83681 . . 8d17ea9 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / MurmurHash . java <nl> + + + b / src / java / org / apache / cassandra / utils / MurmurHash . java <nl> @ @ - 172 , 7 + 172 , 6 @ @ public class MurmurHash <nl> return k ; <nl> } <nl> <nl> - @ Inline <nl> public static void hash3 _ x64 _ 128 ( ByteBuffer key , int offset , int length , long seed , long [ ] result ) <nl> { <nl> final int nblocks = length > > 4 ; / / Process as 128 - bit blocks .
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / HintedHandOffManager . java b / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> index a83fbab . . e2dc046 100644 <nl> - - - a / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> + + + b / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> @ @ - 391 , 7 + 391 , 9 @ @ public class HintedHandOffManager implements HintedHandOffManagerMBean <nl> { <nl> Token < ? > token = StorageService . getPartitioner ( ) . getTokenFactory ( ) . fromByteArray ( row . key . key ) ; <nl> InetAddress target = StorageService . instance . getTokenMetadata ( ) . getEndpoint ( token ) ; <nl> - scheduleHintDelivery ( target ) ; <nl> + / / token may have since been removed ( in which case we have just read back a tombstone ) <nl> + if ( target ! = null ) <nl> + scheduleHintDelivery ( target ) ; <nl> } <nl> <nl> if ( logger _ . isDebugEnabled ( ) )

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / AbstractNativeCell . java b / src / java / org / apache / cassandra / db / AbstractNativeCell . java 
 index 7e85af3 . . e01d860 100644 
 - - - a / src / java / org / apache / cassandra / db / AbstractNativeCell . java 
 + + + b / src / java / org / apache / cassandra / db / AbstractNativeCell . java 
 @ @ - 291 , 7 + 291 , 6 @ @ public abstract class AbstractNativeCell extends AbstractCell implements CellNam 
 return get ( i , null ) ; 
 } 
 
 - @ Inline 
 private ByteBuffer get ( int i , AbstractAllocator copy ) 
 { 
 / / remember to take dense / sparse into account , and only return EOC when not dense 
 @ @ - 660 , 6 + 659 , 7 @ @ public abstract class AbstractNativeCell extends AbstractCell implements CellNam 
 } 
 
 / / requires isByteOrderComparable to be true . Compares the name components only ; ; may need to compare EOC etc still 
 + @ Inline 
 public final int compareTo ( final Composite that ) 
 { 
 if ( isStatic ( ) ! = that . isStatic ( ) ) 
 diff - - git a / src / java / org / apache / cassandra / db / ArrayBackedSortedColumns . java b / src / java / org / apache / cassandra / db / ArrayBackedSortedColumns . java 
 index e92d5a3 . . c0fae24 100644 
 - - - a / src / java / org / apache / cassandra / db / ArrayBackedSortedColumns . java 
 + + + b / src / java / org / apache / cassandra / db / ArrayBackedSortedColumns . java 
 @ @ - 123 , 7 + 123 , 6 @ @ public class ArrayBackedSortedColumns extends ColumnFamily 
 / * * 
 * synchronized so that concurrent ( read - only ) accessors don ' t mess the internal state . 
 * / 
 - @ Inline 
 private synchronized void sortCells ( ) 
 { 
 if ( isSorted ) 
 diff - - git a / src / java / org / apache / cassandra / db / CollationController . java b / src / java / org / apache / cassandra / db / CollationController . java 
 index c9cbf69 . . 1bc421d 100644 
 - - - a / src / java / org / apache / cassandra / db / CollationController . java 
 + + + b / src / java / org / apache / cassandra / db / CollationController . java 
 @ @ - 68 , 7 + 68 , 6 @ @ public class CollationController 
 * Once we have data for all requests columns that is newer than the newest remaining maxtimestamp , 
 * we stop . 
 * / 
 - @ Inline 
 private ColumnFamily collectTimeOrderedData ( boolean copyOnHeap ) 
 { 
 final ColumnFamily container = ArrayBackedSortedColumns . factory . create ( cfs . metadata , filter . filter . isReversed ( ) ) ; 
 diff - - git a / src / java / org / apache / cassandra / db / ConsistencyLevel . java b / src / java / org / apache / cassandra / db / ConsistencyLevel . java 
 index 986a2aa . . 113de72 100644 
 - - - a / src / java / org / apache / cassandra / db / ConsistencyLevel . java 
 + + + b / src / java / org / apache / cassandra / db / ConsistencyLevel . java 
 @ @ - 245 , 7 + 245 , 6 @ @ public enum ConsistencyLevel 
 } 
 } 
 
 - @ Inline 
 public void assureSufficientLiveNodes ( Keyspace keyspace , Iterable < InetAddress > liveEndpoints ) throws UnavailableException 
 { 
 int blockFor = blockFor ( keyspace ) ; 
 diff - - git a / src / java / org / apache / cassandra / service / StorageProxy . java b / src / java / org / apache / cassandra / service / StorageProxy . java 
 index ff6d89c . . 615335b 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageProxy . java 
 + + + b / src / java / org / apache / cassandra / service / StorageProxy . java 
 @ @ - 1109 , 7 + 1109 , 6 @ @ public class StorageProxy implements StorageProxyMBean 
 * Performs the actual reading of a row out of the StorageService , fetching 
 * a specific set of column names from a given column family . 
 * / 
 - @ Inline 
 public static List < Row > read ( List < ReadCommand > commands , ConsistencyLevel consistency _ level ) 
 throws UnavailableException , IsBootstrappingException , ReadTimeoutException , InvalidRequestException 
 { 
 @ @ - 1188 , 7 + 1187 , 6 @ @ public class StorageProxy implements StorageProxyMBean 
 * 4 . If the digests ( if any ) match the data return the data 
 * 5 . else carry out read repair by getting data from all the nodes . 
 * / 
 - @ Inline 
 private static List < Row > fetchRows ( List < ReadCommand > initialCommands , ConsistencyLevel consistencyLevel ) 
 throws UnavailableException , ReadTimeoutException 
 { 
 diff - - git a / src / java / org / apache / cassandra / utils / FastByteOperations . java b / src / java / org / apache / cassandra / utils / FastByteOperations . java 
 index 1431fd3 . . 1b58b66 100644 
 - - - a / src / java / org / apache / cassandra / utils / FastByteOperations . java 
 + + + b / src / java / org / apache / cassandra / utils / FastByteOperations . java 
 @ @ - 40 , 37 + 40 , 31 @ @ public class FastByteOperations 
 / * * 
 * Lexicographically compare two byte arrays . 
 * / 
 - @ Inline 
 public static int compareUnsigned ( byte [ ] b1 , int s1 , int l1 , byte [ ] b2 , int s2 , int l2 ) 
 { 
 return BestHolder . BEST . compare ( b1 , s1 , l1 , b2 , s2 , l2 ) ; 
 } 
 
 - @ Inline 
 public static int compareUnsigned ( ByteBuffer b1 , byte [ ] b2 , int s2 , int l2 ) 
 { 
 return BestHolder . BEST . compare ( b1 , b2 , s2 , l2 ) ; 
 } 
 
 - @ Inline 
 public static int compareUnsigned ( byte [ ] b1 , int s1 , int l1 , ByteBuffer b2 ) 
 { 
 return - BestHolder . BEST . compare ( b2 , b1 , s1 , l1 ) ; 
 } 
 
 - @ Inline 
 public static int compareUnsigned ( ByteBuffer b1 , ByteBuffer b2 ) 
 { 
 return BestHolder . BEST . compare ( b1 , b2 ) ; 
 } 
 
 - @ Inline 
 public static void copy ( ByteBuffer src , int srcPosition , byte [ ] trg , int trgPosition , int length ) 
 { 
 BestHolder . BEST . copy ( src , srcPosition , trg , trgPosition , length ) ; 
 } 
 
 - @ Inline 
 public static void copy ( ByteBuffer src , int srcPosition , ByteBuffer trg , int trgPosition , int length ) 
 { 
 BestHolder . BEST . copy ( src , srcPosition , trg , trgPosition , length ) ; 
 @ @ - 246 , 7 + 240 , 6 @ @ public class FastByteOperations 
 copy ( src , srcOffset + srcPosition , trgBuf , trgPosition , length ) ; 
 } 
 
 - @ Inline 
 public static void copy ( Object src , long srcOffset , ByteBuffer trgBuf , int trgPosition , int length ) 
 { 
 if ( trgBuf . hasArray ( ) ) 
 @ @ - 255 , 7 + 248 , 6 @ @ public class FastByteOperations 
 copy ( src , srcOffset , null , trgPosition + theUnsafe . getLong ( trgBuf , DIRECT _ BUFFER _ ADDRESS _ OFFSET ) , length ) ; 
 } 
 
 - @ Inline 
 public static void copy ( Object src , long srcOffset , byte [ ] trg , int trgPosition , int length ) 
 { 
 if ( length < = MIN _ COPY _ THRESHOLD ) 
 @ @ - 273 , 7 + 265 , 6 @ @ public class FastByteOperations 
 private static final long UNSAFE _ COPY _ THRESHOLD = 1 < < 20 ; 
 private static final long MIN _ COPY _ THRESHOLD = 6 ; 
 
 - @ Inline 
 public static void copy ( Object src , long srcOffset , Object dst , long dstOffset , long length ) 
 { 
 while ( length > 0 ) { 
 diff - - git a / src / java / org / apache / cassandra / utils / MurmurHash . java b / src / java / org / apache / cassandra / utils / MurmurHash . java 
 index bf83681 . . 8d17ea9 100644 
 - - - a / src / java / org / apache / cassandra / utils / MurmurHash . java 
 + + + b / src / java / org / apache / cassandra / utils / MurmurHash . java 
 @ @ - 172 , 7 + 172 , 6 @ @ public class MurmurHash 
 return k ; 
 } 
 
 - @ Inline 
 public static void hash3 _ x64 _ 128 ( ByteBuffer key , int offset , int length , long seed , long [ ] result ) 
 { 
 final int nblocks = length > > 4 ; / / Process as 128 - bit blocks .

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / HintedHandOffManager . java b / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 index a83fbab . . e2dc046 100644 
 - - - a / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 + + + b / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 @ @ - 391 , 7 + 391 , 9 @ @ public class HintedHandOffManager implements HintedHandOffManagerMBean 
 { 
 Token < ? > token = StorageService . getPartitioner ( ) . getTokenFactory ( ) . fromByteArray ( row . key . key ) ; 
 InetAddress target = StorageService . instance . getTokenMetadata ( ) . getEndpoint ( token ) ; 
 - scheduleHintDelivery ( target ) ; 
 + / / token may have since been removed ( in which case we have just read back a tombstone ) 
 + if ( target ! = null ) 
 + scheduleHintDelivery ( target ) ; 
 } 
 
 if ( logger _ . isDebugEnabled ( ) )
