BLEU SCORE: 0.017386863385674488

TEST MSG: allow full double range ( 0 - 1 ) of rate limiting
GENERATED MSG: close temporary logWriters to avoid leaking FD . patch by Brandon Williams ; reviewed by jbellis for CASSANDRA - 313

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java <nl> index 5c6fd3f . . fe4b2af 100644 <nl> - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java <nl> + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java <nl> @ @ - 155 , 7 + 155 , 7 @ @ public class CommitLogSegmentManagerCDC extends AbstractCommitLogSegmentManager <nl> * / <nl> private class CDCSizeTracker extends DirectorySizeCalculator <nl> { <nl> - private final RateLimiter rateLimiter = RateLimiter . create ( 1000 / DatabaseDescriptor . getCDCDiskCheckInterval ( ) ) ; <nl> + private final RateLimiter rateLimiter = RateLimiter . create ( 1000 . 0 / DatabaseDescriptor . getCDCDiskCheckInterval ( ) ) ; <nl> private ExecutorService cdcSizeCalculationExecutor ; <nl> private CommitLogSegmentManagerCDC segmentManager ; <nl> private AtomicLong unflushedCDCSize = new AtomicLong ( 0 ) ;
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / CommitLog . java b / src / java / org / apache / cassandra / db / CommitLog . java <nl> index cc57d9b . . 1128baa 100644 <nl> - - - a / src / java / org / apache / cassandra / db / CommitLog . java <nl> + + + b / src / java / org / apache / cassandra / db / CommitLog . java <nl> @ @ - 215 , 6 + 215 , 7 @ @ public class CommitLog <nl> { <nl> IFileWriter logWriter = CommitLog . createWriter ( commitLogFileName ) ; <nl> writeCommitLogHeader ( logWriter , bytes ) ; <nl> + logWriter . close ( ) ; <nl> } <nl> <nl> / *

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java 
 index 5c6fd3f . . fe4b2af 100644 
 - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java 
 + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java 
 @ @ - 155 , 7 + 155 , 7 @ @ public class CommitLogSegmentManagerCDC extends AbstractCommitLogSegmentManager 
 * / 
 private class CDCSizeTracker extends DirectorySizeCalculator 
 { 
 - private final RateLimiter rateLimiter = RateLimiter . create ( 1000 / DatabaseDescriptor . getCDCDiskCheckInterval ( ) ) ; 
 + private final RateLimiter rateLimiter = RateLimiter . create ( 1000 . 0 / DatabaseDescriptor . getCDCDiskCheckInterval ( ) ) ; 
 private ExecutorService cdcSizeCalculationExecutor ; 
 private CommitLogSegmentManagerCDC segmentManager ; 
 private AtomicLong unflushedCDCSize = new AtomicLong ( 0 ) ;

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / CommitLog . java b / src / java / org / apache / cassandra / db / CommitLog . java 
 index cc57d9b . . 1128baa 100644 
 - - - a / src / java / org / apache / cassandra / db / CommitLog . java 
 + + + b / src / java / org / apache / cassandra / db / CommitLog . java 
 @ @ - 215 , 6 + 215 , 7 @ @ public class CommitLog 
 { 
 IFileWriter logWriter = CommitLog . createWriter ( commitLogFileName ) ; 
 writeCommitLogHeader ( logWriter , bytes ) ; 
 + logWriter . close ( ) ; 
 } 
 
 / *
