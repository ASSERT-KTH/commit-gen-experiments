BLEU SCORE: 0.02399905349559606

TEST MSG: merge from 2 . 0
GENERATED MSG: cancel latency - sampling task when CF is dropped

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 7df396d . . 041c1e1 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 16 , 6 + 16 , 8 @ @ <nl> * Improve JBOD disk utilization ( CASSANDRA - 7386 ) <nl> * Log failed host when preparing incremental repair ( CASSANDRA - 8228 ) <nl> Merged from 2 . 0 : <nl> + * cancel latency - sampling task when CF is dropped ( CASSANDRA - 8401 ) <nl> + * don ' t block SocketThread for MessagingService ( CASSANDRA - 8188 ) <nl> * Increase quarantine delay on replacement ( CASSANDRA - 8260 ) <nl> * Expose off - heap memory usage stats ( CASSANDRA - 7897 ) <nl> * Ignore Paxos commits for truncated tables ( CASSANDRA - 7538 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> index 1bd5f2a . . 0507973 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> @ @ - 135 , 6 + 135 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> <nl> public final ColumnFamilyMetrics metric ; <nl> public volatile long sampleLatencyNanos ; <nl> + private final ScheduledFuture < ? > latencyCalculator ; <nl> <nl> public static void shutdownPostFlushExecutor ( ) throws InterruptedException <nl> { <nl> @ @ - 318 , 7 + 319 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> throw new RuntimeException ( e ) ; <nl> } <nl> logger . debug ( " retryPolicy for { } is { } " , name , this . metadata . getSpeculativeRetry ( ) ) ; <nl> - ScheduledExecutors . optionalTasks . scheduleWithFixedDelay ( new Runnable ( ) <nl> + latencyCalculator = ScheduledExecutors . optionalTasks . scheduleWithFixedDelay ( new Runnable ( ) <nl> { <nl> public void run ( ) <nl> { <nl> @ @ - 358 , 8 + 359 , 8 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> logger . warn ( " Failed unregistering mbean : { } " , mbeanName , e ) ; <nl> } <nl> <nl> + latencyCalculator . cancel ( false ) ; <nl> compactionStrategyWrapper . shutdown ( ) ; <nl> - <nl> SystemKeyspace . removeTruncationRecord ( metadata . cfId ) ; <nl> data . unreferenceSSTables ( ) ; <nl> indexManager . invalidate ( ) ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 7df396d . . 041c1e1 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 16 , 6 + 16 , 8 @ @ 
 * Improve JBOD disk utilization ( CASSANDRA - 7386 ) 
 * Log failed host when preparing incremental repair ( CASSANDRA - 8228 ) 
 Merged from 2 . 0 : 
 + * cancel latency - sampling task when CF is dropped ( CASSANDRA - 8401 ) 
 + * don ' t block SocketThread for MessagingService ( CASSANDRA - 8188 ) 
 * Increase quarantine delay on replacement ( CASSANDRA - 8260 ) 
 * Expose off - heap memory usage stats ( CASSANDRA - 7897 ) 
 * Ignore Paxos commits for truncated tables ( CASSANDRA - 7538 ) 
 diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 index 1bd5f2a . . 0507973 100644 
 - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 @ @ - 135 , 6 + 135 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 
 public final ColumnFamilyMetrics metric ; 
 public volatile long sampleLatencyNanos ; 
 + private final ScheduledFuture < ? > latencyCalculator ; 
 
 public static void shutdownPostFlushExecutor ( ) throws InterruptedException 
 { 
 @ @ - 318 , 7 + 319 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 throw new RuntimeException ( e ) ; 
 } 
 logger . debug ( " retryPolicy for { } is { } " , name , this . metadata . getSpeculativeRetry ( ) ) ; 
 - ScheduledExecutors . optionalTasks . scheduleWithFixedDelay ( new Runnable ( ) 
 + latencyCalculator = ScheduledExecutors . optionalTasks . scheduleWithFixedDelay ( new Runnable ( ) 
 { 
 public void run ( ) 
 { 
 @ @ - 358 , 8 + 359 , 8 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 logger . warn ( " Failed unregistering mbean : { } " , mbeanName , e ) ; 
 } 
 
 + latencyCalculator . cancel ( false ) ; 
 compactionStrategyWrapper . shutdown ( ) ; 
 - 
 SystemKeyspace . removeTruncationRecord ( metadata . cfId ) ; 
 data . unreferenceSSTables ( ) ; 
 indexManager . invalidate ( ) ;

NEAREST DIFF:
ELIMINATEDSENTENCE
