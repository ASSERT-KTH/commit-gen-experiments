BLEU SCORE: 1.0

TEST MSG: Fix SSTableSimpleUnsortedWriter ConcurrentModificationException
GENERATED MSG: Fix SSTableSimpleUnsortedWriter ConcurrentModificationException

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 792f8c1 . . 7fa5f63 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 0 . 13 : <nl> + * Fix SSTableSimpleUnsortedWriter ConcurrentModificationException ( CASSANDRA - 8619 ) <nl> * Round up time deltas lower than 1ms in BulkLoader ( CASSANDRA - 8645 ) <nl> * Add batch remove iterator to ABSC ( CASSANDRA - 8414 , 8666 ) <nl> <nl> diff - - git a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> index 93d3dcf . . d58b28f 100644 <nl> - - - a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> + + + b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> @ @ - 534 , 6 + 534 , 11 @ @ public class CQLSSTableWriter implements Closeable <nl> } ; <nl> } <nl> <nl> + protected void addColumn ( Cell cell ) throws IOException <nl> + { <nl> + throw new UnsupportedOperationException ( ) ; <nl> + } <nl> + <nl> static class SyncException extends RuntimeException <nl> { <nl> SyncException ( IOException ioe ) <nl> diff - - git a / src / java / org / apache / cassandra / io / sstable / SSTableSimpleUnsortedWriter . java b / src / java / org / apache / cassandra / io / sstable / SSTableSimpleUnsortedWriter . java <nl> index 39ec71d . . b58e574 100644 <nl> - - - a / src / java / org / apache / cassandra / io / sstable / SSTableSimpleUnsortedWriter . java <nl> + + + b / src / java / org / apache / cassandra / io / sstable / SSTableSimpleUnsortedWriter . java <nl> @ @ - 167 , 6 + 167 , 7 @ @ public class SSTableSimpleUnsortedWriter extends AbstractSSTableSimpleWriter <nl> <nl> checkForWriterException ( ) ; <nl> <nl> + columnFamily = null ; <nl> try <nl> { <nl> writeQueue . put ( buffer ) ; <nl> @ @ - 178 , 6 + 179 , 7 @ @ public class SSTableSimpleUnsortedWriter extends AbstractSSTableSimpleWriter <nl> } <nl> buffer = new Buffer ( ) ; <nl> currentSize = 0 ; <nl> + columnFamily = getColumnFamily ( ) ; <nl> } <nl> <nl> private void checkForWriterException ( ) throws IOException
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 792f8c1 . . 7fa5f63 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 0 . 13 : 
 + * Fix SSTableSimpleUnsortedWriter ConcurrentModificationException ( CASSANDRA - 8619 ) 
 * Round up time deltas lower than 1ms in BulkLoader ( CASSANDRA - 8645 ) 
 * Add batch remove iterator to ABSC ( CASSANDRA - 8414 , 8666 ) 
 
 diff - - git a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 index 93d3dcf . . d58b28f 100644 
 - - - a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 + + + b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 @ @ - 534 , 6 + 534 , 11 @ @ public class CQLSSTableWriter implements Closeable 
 } ; 
 } 
 
 + protected void addColumn ( Cell cell ) throws IOException 
 + { 
 + throw new UnsupportedOperationException ( ) ; 
 + } 
 + 
 static class SyncException extends RuntimeException 
 { 
 SyncException ( IOException ioe ) 
 diff - - git a / src / java / org / apache / cassandra / io / sstable / SSTableSimpleUnsortedWriter . java b / src / java / org / apache / cassandra / io / sstable / SSTableSimpleUnsortedWriter . java 
 index 39ec71d . . b58e574 100644 
 - - - a / src / java / org / apache / cassandra / io / sstable / SSTableSimpleUnsortedWriter . java 
 + + + b / src / java / org / apache / cassandra / io / sstable / SSTableSimpleUnsortedWriter . java 
 @ @ - 167 , 6 + 167 , 7 @ @ public class SSTableSimpleUnsortedWriter extends AbstractSSTableSimpleWriter 
 
 checkForWriterException ( ) ; 
 
 + columnFamily = null ; 
 try 
 { 
 writeQueue . put ( buffer ) ; 
 @ @ - 178 , 6 + 179 , 7 @ @ public class SSTableSimpleUnsortedWriter extends AbstractSSTableSimpleWriter 
 } 
 buffer = new Buffer ( ) ; 
 currentSize = 0 ; 
 + columnFamily = getColumnFamily ( ) ; 
 } 
 
 private void checkForWriterException ( ) throws IOException

NEAREST DIFF:
ELIMINATEDSENTENCE
