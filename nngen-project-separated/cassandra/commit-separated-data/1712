BLEU SCORE: 0.016932492841722675

TEST MSG: Fix failed bootstrap / replace attempts being persisted in system . peers
GENERATED MSG: merge

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 772afd6 . . 36d4b47 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 0 . 15 : <nl> + * Fix failed bootstrap / replace attempts being persisted in system . peers ( CASSANDRA - 9180 ) <nl> * Flush system . IndexInfo after marking index built ( CASSANDRA - 9128 ) <nl> * Fix updates to min / max _ compaction _ threshold through cassandra - cli <nl> ( CASSANDRA - 8102 ) <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index cfd8fe1 . . e906f03 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 1366 , 27 + 1366 , 30 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> return ; <nl> } <nl> <nl> - switch ( state ) <nl> + if ( getTokenMetadata ( ) . isMember ( endpoint ) ) <nl> { <nl> - case RELEASE _ VERSION : <nl> - SystemKeyspace . updatePeerInfo ( endpoint , " release _ version " , quote ( value . value ) ) ; <nl> - break ; <nl> - case DC : <nl> - SystemKeyspace . updatePeerInfo ( endpoint , " data _ center " , quote ( value . value ) ) ; <nl> - break ; <nl> - case RACK : <nl> - SystemKeyspace . updatePeerInfo ( endpoint , " rack " , quote ( value . value ) ) ; <nl> - break ; <nl> - case RPC _ ADDRESS : <nl> - SystemKeyspace . updatePeerInfo ( endpoint , " rpc _ address " , quote ( value . value ) ) ; <nl> - break ; <nl> - case SCHEMA : <nl> - SystemKeyspace . updatePeerInfo ( endpoint , " schema _ version " , value . value ) ; <nl> - MigrationManager . instance . scheduleSchemaPull ( endpoint , epState ) ; <nl> - break ; <nl> - case HOST _ ID : <nl> - SystemKeyspace . updatePeerInfo ( endpoint , " host _ id " , value . value ) ; <nl> - break ; <nl> + switch ( state ) <nl> + { <nl> + case RELEASE _ VERSION : <nl> + SystemKeyspace . updatePeerInfo ( endpoint , " release _ version " , quote ( value . value ) ) ; <nl> + break ; <nl> + case DC : <nl> + SystemKeyspace . updatePeerInfo ( endpoint , " data _ center " , quote ( value . value ) ) ; <nl> + break ; <nl> + case RACK : <nl> + SystemKeyspace . updatePeerInfo ( endpoint , " rack " , quote ( value . value ) ) ; <nl> + break ; <nl> + case RPC _ ADDRESS : <nl> + SystemKeyspace . updatePeerInfo ( endpoint , " rpc _ address " , quote ( value . value ) ) ; <nl> + break ; <nl> + case SCHEMA : <nl> + SystemKeyspace . updatePeerInfo ( endpoint , " schema _ version " , value . value ) ; <nl> + MigrationManager . instance . scheduleSchemaPull ( endpoint , epState ) ; <nl> + break ; <nl> + case HOST _ ID : <nl> + SystemKeyspace . updatePeerInfo ( endpoint , " host _ id " , value . value ) ; <nl> + break ; <nl> + } <nl> } <nl> } <nl> }
NEAREST DIFF (one line): diff - - git a / tools / bin / stress b / tools / bin / stress <nl> old mode 100644 <nl> new mode 100755 <nl> diff - - git a / tools / bin / stress . bat b / tools / bin / stress . bat <nl> old mode 100644 <nl> new mode 100755 <nl> diff - - git a / tools / bin / stressd b / tools / bin / stressd <nl> old mode 100644 <nl> new mode 100755

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 772afd6 . . 36d4b47 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 0 . 15 : 
 + * Fix failed bootstrap / replace attempts being persisted in system . peers ( CASSANDRA - 9180 ) 
 * Flush system . IndexInfo after marking index built ( CASSANDRA - 9128 ) 
 * Fix updates to min / max _ compaction _ threshold through cassandra - cli 
 ( CASSANDRA - 8102 ) 
 diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index cfd8fe1 . . e906f03 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 1366 , 27 + 1366 , 30 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 return ; 
 } 
 
 - switch ( state ) 
 + if ( getTokenMetadata ( ) . isMember ( endpoint ) ) 
 { 
 - case RELEASE _ VERSION : 
 - SystemKeyspace . updatePeerInfo ( endpoint , " release _ version " , quote ( value . value ) ) ; 
 - break ; 
 - case DC : 
 - SystemKeyspace . updatePeerInfo ( endpoint , " data _ center " , quote ( value . value ) ) ; 
 - break ; 
 - case RACK : 
 - SystemKeyspace . updatePeerInfo ( endpoint , " rack " , quote ( value . value ) ) ; 
 - break ; 
 - case RPC _ ADDRESS : 
 - SystemKeyspace . updatePeerInfo ( endpoint , " rpc _ address " , quote ( value . value ) ) ; 
 - break ; 
 - case SCHEMA : 
 - SystemKeyspace . updatePeerInfo ( endpoint , " schema _ version " , value . value ) ; 
 - MigrationManager . instance . scheduleSchemaPull ( endpoint , epState ) ; 
 - break ; 
 - case HOST _ ID : 
 - SystemKeyspace . updatePeerInfo ( endpoint , " host _ id " , value . value ) ; 
 - break ; 
 + switch ( state ) 
 + { 
 + case RELEASE _ VERSION : 
 + SystemKeyspace . updatePeerInfo ( endpoint , " release _ version " , quote ( value . value ) ) ; 
 + break ; 
 + case DC : 
 + SystemKeyspace . updatePeerInfo ( endpoint , " data _ center " , quote ( value . value ) ) ; 
 + break ; 
 + case RACK : 
 + SystemKeyspace . updatePeerInfo ( endpoint , " rack " , quote ( value . value ) ) ; 
 + break ; 
 + case RPC _ ADDRESS : 
 + SystemKeyspace . updatePeerInfo ( endpoint , " rpc _ address " , quote ( value . value ) ) ; 
 + break ; 
 + case SCHEMA : 
 + SystemKeyspace . updatePeerInfo ( endpoint , " schema _ version " , value . value ) ; 
 + MigrationManager . instance . scheduleSchemaPull ( endpoint , epState ) ; 
 + break ; 
 + case HOST _ ID : 
 + SystemKeyspace . updatePeerInfo ( endpoint , " host _ id " , value . value ) ; 
 + break ; 
 + } 
 } 
 } 
 }

NEAREST DIFF:
diff - - git a / tools / bin / stress b / tools / bin / stress 
 old mode 100644 
 new mode 100755 
 diff - - git a / tools / bin / stress . bat b / tools / bin / stress . bat 
 old mode 100644 
 new mode 100755 
 diff - - git a / tools / bin / stressd b / tools / bin / stressd 
 old mode 100644 
 new mode 100755
