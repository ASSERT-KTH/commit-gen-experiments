BLEU SCORE: 0.02383853510228548

TEST MSG: Move skip _ stop _ words filter before stemming
GENERATED MSG: show index options in CLI

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index eec4d66 . . d40cab4 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 8 <nl> + * Move skip _ stop _ words filter before stemming ( CASSANDRA - 12078 ) <nl> * Support seek ( ) in EncryptedFileSegmentInputStream ( CASSANDRA - 11957 ) <nl> * SSTable tools mishandling LocalPartitioner ( CASSANDRA - 12002 ) <nl> * When SEPWorker assigned work , set thread name to match pool ( CASSANDRA - 11966 ) <nl> diff - - git a / src / java / org / apache / cassandra / index / sasi / analyzer / StandardAnalyzer . java b / src / java / org / apache / cassandra / index / sasi / analyzer / StandardAnalyzer . java <nl> index 5e09b9f . . 069164c 100644 <nl> - - - a / src / java / org / apache / cassandra / index / sasi / analyzer / StandardAnalyzer . java <nl> + + + b / src / java / org / apache / cassandra / index / sasi / analyzer / StandardAnalyzer . java <nl> @ @ - 128 , 10 + 128 , 10 @ @ public class StandardAnalyzer extends AbstractAnalyzer <nl> builder = builder . add ( " to _ lower " , new BasicResultFilters . LowerCase ( ) ) ; <nl> if ( ! options . isCaseSensitive ( ) & & options . shouldUpperCaseTerms ( ) ) <nl> builder = builder . add ( " to _ upper " , new BasicResultFilters . UpperCase ( ) ) ; <nl> - if ( options . shouldStemTerms ( ) ) <nl> - builder = builder . add ( " term _ stemming " , new StemmingFilters . DefaultStemmingFilter ( options . getLocale ( ) ) ) ; <nl> if ( options . shouldIgnoreStopTerms ( ) ) <nl> builder = builder . add ( " skip _ stop _ words " , new StopWordFilters . DefaultStopWordFilter ( options . getLocale ( ) ) ) ; <nl> + if ( options . shouldStemTerms ( ) ) <nl> + builder = builder . add ( " term _ stemming " , new StemmingFilters . DefaultStemmingFilter ( options . getLocale ( ) ) ) ; <nl> return builder . build ( ) ; <nl> } <nl>
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / cql / CreateColumnFamilyStatement . java b / src / java / org / apache / cassandra / cql / CreateColumnFamilyStatement . java <nl> index c0568b9 . . 1095a72 100644 <nl> - - - a / src / java / org / apache / cassandra / cql / CreateColumnFamilyStatement . java <nl> + + + b / src / java / org / apache / cassandra / cql / CreateColumnFamilyStatement . java <nl> @ @ - 37 , 7 + 37 , 6 @ @ import org . apache . cassandra . config . CFMetaData ; <nl> import org . apache . cassandra . config . ColumnDefinition ; <nl> import org . apache . cassandra . config . ConfigurationException ; <nl> import org . apache . cassandra . db . ColumnFamilyType ; <nl> - import org . apache . cassandra . db . compaction . AbstractCompactionStrategy ; <nl> import org . apache . cassandra . db . marshal . AbstractType ; <nl> import org . apache . cassandra . db . marshal . TypeParser ; <nl> import org . apache . cassandra . thrift . InvalidRequestException ; <nl> @ @ - 115 , 7 + 114 , 6 @ @ public class CreateColumnFamilyStatement <nl> private final Map < String , String > properties = new HashMap < String , String > ( ) ; <nl> private List < String > keyValidator = new ArrayList < String > ( ) ; <nl> private ByteBuffer keyAlias = null ; <nl> - private Class < ? extends AbstractCompactionStrategy > compactionStrategyClass ; <nl> private final Map < String , String > compactionStrategyOptions = new HashMap < String , String > ( ) ; <nl> private final Map < String , String > compressionParameters = new HashMap < String , String > ( ) ; <nl> <nl> @ @ - 127 , 17 + 125 , 6 @ @ public class CreateColumnFamilyStatement <nl> / * * Perform validation of parsed params * / <nl> private void validate ( ) throws InvalidRequestException <nl> { <nl> - String compStrategy = getPropertyString ( KW _ COMPACTION _ STRATEGY _ CLASS , CFMetaData . DEFAULT _ COMPACTION _ STRATEGY _ CLASS ) ; <nl> - <nl> - try <nl> - { <nl> - compactionStrategyClass = CFMetaData . createCompactionStrategy ( compStrategy ) ; <nl> - } <nl> - catch ( ConfigurationException e ) <nl> - { <nl> - throw new InvalidRequestException ( e . getMessage ( ) ) ; <nl> - } <nl> - <nl> / / we need to remove parent : key = value pairs from the main properties <nl> Set < String > propsToRemove = new HashSet < String > ( ) ; <nl> <nl> @ @ - 351 , 7 + 338 , 6 @ @ public class CreateColumnFamilyStatement <nl> . keyValidator ( TypeParser . parse ( comparators . get ( getKeyType ( ) ) ) ) <nl> . rowCacheProvider ( FBUtilities . newCacheProvider ( getPropertyString ( KW _ ROW _ CACHE _ PROVIDER , CFMetaData . DEFAULT _ ROW _ CACHE _ PROVIDER . getClass ( ) . getName ( ) ) ) ) <nl> . keyAlias ( keyAlias ) <nl> - . compactionStrategyClass ( compactionStrategyClass ) <nl> . compactionStrategyOptions ( compactionStrategyOptions ) <nl> . compressionParameters ( CompressionParameters . create ( compressionParameters ) ) <nl> . validate ( ) ;

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index eec4d66 . . d40cab4 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 8 
 + * Move skip _ stop _ words filter before stemming ( CASSANDRA - 12078 ) 
 * Support seek ( ) in EncryptedFileSegmentInputStream ( CASSANDRA - 11957 ) 
 * SSTable tools mishandling LocalPartitioner ( CASSANDRA - 12002 ) 
 * When SEPWorker assigned work , set thread name to match pool ( CASSANDRA - 11966 ) 
 diff - - git a / src / java / org / apache / cassandra / index / sasi / analyzer / StandardAnalyzer . java b / src / java / org / apache / cassandra / index / sasi / analyzer / StandardAnalyzer . java 
 index 5e09b9f . . 069164c 100644 
 - - - a / src / java / org / apache / cassandra / index / sasi / analyzer / StandardAnalyzer . java 
 + + + b / src / java / org / apache / cassandra / index / sasi / analyzer / StandardAnalyzer . java 
 @ @ - 128 , 10 + 128 , 10 @ @ public class StandardAnalyzer extends AbstractAnalyzer 
 builder = builder . add ( " to _ lower " , new BasicResultFilters . LowerCase ( ) ) ; 
 if ( ! options . isCaseSensitive ( ) & & options . shouldUpperCaseTerms ( ) ) 
 builder = builder . add ( " to _ upper " , new BasicResultFilters . UpperCase ( ) ) ; 
 - if ( options . shouldStemTerms ( ) ) 
 - builder = builder . add ( " term _ stemming " , new StemmingFilters . DefaultStemmingFilter ( options . getLocale ( ) ) ) ; 
 if ( options . shouldIgnoreStopTerms ( ) ) 
 builder = builder . add ( " skip _ stop _ words " , new StopWordFilters . DefaultStopWordFilter ( options . getLocale ( ) ) ) ; 
 + if ( options . shouldStemTerms ( ) ) 
 + builder = builder . add ( " term _ stemming " , new StemmingFilters . DefaultStemmingFilter ( options . getLocale ( ) ) ) ; 
 return builder . build ( ) ; 
 } 


NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / cql / CreateColumnFamilyStatement . java b / src / java / org / apache / cassandra / cql / CreateColumnFamilyStatement . java 
 index c0568b9 . . 1095a72 100644 
 - - - a / src / java / org / apache / cassandra / cql / CreateColumnFamilyStatement . java 
 + + + b / src / java / org / apache / cassandra / cql / CreateColumnFamilyStatement . java 
 @ @ - 37 , 7 + 37 , 6 @ @ import org . apache . cassandra . config . CFMetaData ; 
 import org . apache . cassandra . config . ColumnDefinition ; 
 import org . apache . cassandra . config . ConfigurationException ; 
 import org . apache . cassandra . db . ColumnFamilyType ; 
 - import org . apache . cassandra . db . compaction . AbstractCompactionStrategy ; 
 import org . apache . cassandra . db . marshal . AbstractType ; 
 import org . apache . cassandra . db . marshal . TypeParser ; 
 import org . apache . cassandra . thrift . InvalidRequestException ; 
 @ @ - 115 , 7 + 114 , 6 @ @ public class CreateColumnFamilyStatement 
 private final Map < String , String > properties = new HashMap < String , String > ( ) ; 
 private List < String > keyValidator = new ArrayList < String > ( ) ; 
 private ByteBuffer keyAlias = null ; 
 - private Class < ? extends AbstractCompactionStrategy > compactionStrategyClass ; 
 private final Map < String , String > compactionStrategyOptions = new HashMap < String , String > ( ) ; 
 private final Map < String , String > compressionParameters = new HashMap < String , String > ( ) ; 
 
 @ @ - 127 , 17 + 125 , 6 @ @ public class CreateColumnFamilyStatement 
 / * * Perform validation of parsed params * / 
 private void validate ( ) throws InvalidRequestException 
 { 
 - String compStrategy = getPropertyString ( KW _ COMPACTION _ STRATEGY _ CLASS , CFMetaData . DEFAULT _ COMPACTION _ STRATEGY _ CLASS ) ; 
 - 
 - try 
 - { 
 - compactionStrategyClass = CFMetaData . createCompactionStrategy ( compStrategy ) ; 
 - } 
 - catch ( ConfigurationException e ) 
 - { 
 - throw new InvalidRequestException ( e . getMessage ( ) ) ; 
 - } 
 - 
 / / we need to remove parent : key = value pairs from the main properties 
 Set < String > propsToRemove = new HashSet < String > ( ) ; 
 
 @ @ - 351 , 7 + 338 , 6 @ @ public class CreateColumnFamilyStatement 
 . keyValidator ( TypeParser . parse ( comparators . get ( getKeyType ( ) ) ) ) 
 . rowCacheProvider ( FBUtilities . newCacheProvider ( getPropertyString ( KW _ ROW _ CACHE _ PROVIDER , CFMetaData . DEFAULT _ ROW _ CACHE _ PROVIDER . getClass ( ) . getName ( ) ) ) ) 
 . keyAlias ( keyAlias ) 
 - . compactionStrategyClass ( compactionStrategyClass ) 
 . compactionStrategyOptions ( compactionStrategyOptions ) 
 . compressionParameters ( CompressionParameters . create ( compressionParameters ) ) 
 . validate ( ) ;
