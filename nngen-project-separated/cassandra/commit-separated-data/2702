BLEU SCORE: 0.020980574531482755

TEST MSG: correct more uses of isMinimum ( CASSANDRA - 6734 )
GENERATED MSG: Fix paging with reversed slices

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> index f25f934 . . 2604375 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> @ @ - 1478 , 7 + 1478 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> * / <nl> public ViewFragment markReferenced ( final DecoratedKey key ) <nl> { <nl> - assert ! key . isMinimum ( ) ; <nl> + assert ! key . isMinimum ( partitioner ) ; <nl> return markReferenced ( new Function < DataTracker . View , List < SSTableReader > > ( ) <nl> { <nl> public List < SSTableReader > apply ( DataTracker . View view ) <nl> @ @ - 1579 , 7 + 1579 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> * / <nl> private AbstractScanIterator getSequentialIterator ( final DataRange range , long now ) <nl> { <nl> - assert ! ( range . keyRange ( ) instanceof Range ) | | ! ( ( Range ) range . keyRange ( ) ) . isWrapAround ( ) | | range . keyRange ( ) . right . isMinimum ( ) : range . keyRange ( ) ; <nl> + assert ! ( range . keyRange ( ) instanceof Range ) | | ! ( ( Range ) range . keyRange ( ) ) . isWrapAround ( ) | | range . keyRange ( ) . right . isMinimum ( partitioner ) : range . keyRange ( ) ; <nl> <nl> final ViewFragment view = markReferenced ( range . keyRange ( ) ) ; <nl> Tracing . trace ( " Executing seq scan across { } sstables for { } " , view . sstables . size ( ) , range . keyRange ( ) . getString ( metadata . getKeyValidator ( ) ) ) ; <nl> @ @ - 1600 , 7 + 1600 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> Row current = iterator . next ( ) ; <nl> DecoratedKey key = current . key ; <nl> <nl> - if ( ! range . stopKey ( ) . isMinimum ( ) & & range . stopKey ( ) . compareTo ( key ) < 0 ) <nl> + if ( ! range . stopKey ( ) . isMinimum ( partitioner ) & & range . stopKey ( ) . compareTo ( key ) < 0 ) <nl> return endOfData ( ) ; <nl> <nl> / / skipping outside of assigned range
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 159e8de . . 6a07720 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 21 , 6 + 21 , 7 @ @ <nl> * Fix CQL3 table validation in Thrift ( CASSANDRA - 6140 ) <nl> * Fix bug missing results with IN clauses ( CASSANDRA - 6327 ) <nl> * Fix paging with reversed slices ( CASSANDRA - 6343 ) <nl> + * Set minTimestamp correctly to be able to drop expired sstables ( CASSANDRA - 6337 ) <nl> Merged from 1 . 2 : <nl> * add non - jamm path for cached statements ( CASSANDRA - 6293 ) <nl> * ( Hadoop ) Require CFRR batchSize to be at least 2 ( CASSANDRA - 6114 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / compaction / CompactionController . java b / src / java / org / apache / cassandra / db / compaction / CompactionController . java <nl> index 65515d6 . . 3ab2202 100644 <nl> - - - a / src / java / org / apache / cassandra / db / compaction / CompactionController . java <nl> + + + b / src / java / org / apache / cassandra / db / compaction / CompactionController . java <nl> @ @ - 106 , 7 + 106 , 7 @ @ public class CompactionController <nl> <nl> List < SSTableReader > candidates = new ArrayList < SSTableReader > ( ) ; <nl> <nl> - long minTimestamp = Integer . MAX _ VALUE ; <nl> + long minTimestamp = Long . MAX _ VALUE ; <nl> <nl> for ( SSTableReader sstable : overlapping ) <nl> minTimestamp = Math . min ( minTimestamp , sstable . getMinTimestamp ( ) ) ;

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 index f25f934 . . 2604375 100644 
 - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 @ @ - 1478 , 7 + 1478 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 * / 
 public ViewFragment markReferenced ( final DecoratedKey key ) 
 { 
 - assert ! key . isMinimum ( ) ; 
 + assert ! key . isMinimum ( partitioner ) ; 
 return markReferenced ( new Function < DataTracker . View , List < SSTableReader > > ( ) 
 { 
 public List < SSTableReader > apply ( DataTracker . View view ) 
 @ @ - 1579 , 7 + 1579 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 * / 
 private AbstractScanIterator getSequentialIterator ( final DataRange range , long now ) 
 { 
 - assert ! ( range . keyRange ( ) instanceof Range ) | | ! ( ( Range ) range . keyRange ( ) ) . isWrapAround ( ) | | range . keyRange ( ) . right . isMinimum ( ) : range . keyRange ( ) ; 
 + assert ! ( range . keyRange ( ) instanceof Range ) | | ! ( ( Range ) range . keyRange ( ) ) . isWrapAround ( ) | | range . keyRange ( ) . right . isMinimum ( partitioner ) : range . keyRange ( ) ; 
 
 final ViewFragment view = markReferenced ( range . keyRange ( ) ) ; 
 Tracing . trace ( " Executing seq scan across { } sstables for { } " , view . sstables . size ( ) , range . keyRange ( ) . getString ( metadata . getKeyValidator ( ) ) ) ; 
 @ @ - 1600 , 7 + 1600 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 Row current = iterator . next ( ) ; 
 DecoratedKey key = current . key ; 
 
 - if ( ! range . stopKey ( ) . isMinimum ( ) & & range . stopKey ( ) . compareTo ( key ) < 0 ) 
 + if ( ! range . stopKey ( ) . isMinimum ( partitioner ) & & range . stopKey ( ) . compareTo ( key ) < 0 ) 
 return endOfData ( ) ; 
 
 / / skipping outside of assigned range

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 159e8de . . 6a07720 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 21 , 6 + 21 , 7 @ @ 
 * Fix CQL3 table validation in Thrift ( CASSANDRA - 6140 ) 
 * Fix bug missing results with IN clauses ( CASSANDRA - 6327 ) 
 * Fix paging with reversed slices ( CASSANDRA - 6343 ) 
 + * Set minTimestamp correctly to be able to drop expired sstables ( CASSANDRA - 6337 ) 
 Merged from 1 . 2 : 
 * add non - jamm path for cached statements ( CASSANDRA - 6293 ) 
 * ( Hadoop ) Require CFRR batchSize to be at least 2 ( CASSANDRA - 6114 ) 
 diff - - git a / src / java / org / apache / cassandra / db / compaction / CompactionController . java b / src / java / org / apache / cassandra / db / compaction / CompactionController . java 
 index 65515d6 . . 3ab2202 100644 
 - - - a / src / java / org / apache / cassandra / db / compaction / CompactionController . java 
 + + + b / src / java / org / apache / cassandra / db / compaction / CompactionController . java 
 @ @ - 106 , 7 + 106 , 7 @ @ public class CompactionController 
 
 List < SSTableReader > candidates = new ArrayList < SSTableReader > ( ) ; 
 
 - long minTimestamp = Integer . MAX _ VALUE ; 
 + long minTimestamp = Long . MAX _ VALUE ; 
 
 for ( SSTableReader sstable : overlapping ) 
 minTimestamp = Math . min ( minTimestamp , sstable . getMinTimestamp ( ) ) ;
