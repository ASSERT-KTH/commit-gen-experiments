BLEU SCORE: 0.04844232281716619

TEST MSG: Prevent AssertionError from SizeEstimatesRecorder
GENERATED MSG: Re - enable CASSANDRA - 7688

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index dba397c . . 3f5571e 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 1 . 4 <nl> + * Prevent AssertionError from SizeEstimatesRecorder ( CASSANDRA - 9034 ) <nl> * Avoid overwriting index summaries for sstables with an older format that <nl> does not support downsampling ; rebuild summaries on startup when this <nl> is detected ( CASSANDRA - 8993 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / SizeEstimatesRecorder . java b / src / java / org / apache / cassandra / db / SizeEstimatesRecorder . java <nl> index 1472c11 . . 13d9c60 100644 <nl> - - - a / src / java / org / apache / cassandra / db / SizeEstimatesRecorder . java <nl> + + + b / src / java / org / apache / cassandra / db / SizeEstimatesRecorder . java <nl> @ @ - 55 , 6 + 55 , 12 @ @ public class SizeEstimatesRecorder extends MigrationListener implements Runnable <nl> <nl> public void run ( ) <nl> { <nl> + if ( StorageService . instance . isStarting ( ) ) <nl> + { <nl> + logger . debug ( " Node has not yet joined ; not recording size estimates " ) ; <nl> + return ; <nl> + } <nl> + <nl> logger . debug ( " Recording size estimates " ) ; <nl> <nl> / / find primary token ranges for the local node .
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index dba397c . . 3f5571e 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 1 . 4 
 + * Prevent AssertionError from SizeEstimatesRecorder ( CASSANDRA - 9034 ) 
 * Avoid overwriting index summaries for sstables with an older format that 
 does not support downsampling ; rebuild summaries on startup when this 
 is detected ( CASSANDRA - 8993 ) 
 diff - - git a / src / java / org / apache / cassandra / db / SizeEstimatesRecorder . java b / src / java / org / apache / cassandra / db / SizeEstimatesRecorder . java 
 index 1472c11 . . 13d9c60 100644 
 - - - a / src / java / org / apache / cassandra / db / SizeEstimatesRecorder . java 
 + + + b / src / java / org / apache / cassandra / db / SizeEstimatesRecorder . java 
 @ @ - 55 , 6 + 55 , 12 @ @ public class SizeEstimatesRecorder extends MigrationListener implements Runnable 
 
 public void run ( ) 
 { 
 + if ( StorageService . instance . isStarting ( ) ) 
 + { 
 + logger . debug ( " Node has not yet joined ; not recording size estimates " ) ; 
 + return ; 
 + } 
 + 
 logger . debug ( " Recording size estimates " ) ; 
 
 / / find primary token ranges for the local node .

NEAREST DIFF:
ELIMINATEDSENTENCE
