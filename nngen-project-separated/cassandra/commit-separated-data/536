BLEU SCORE: 0.04278179264606696

TEST MSG: Fix deserialization of 2 . x DeletedCells
GENERATED MSG: Support multiple addComplexDeletion ( ) call in BTreeRow . Builder

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index a40dabd . . 5eeeeae 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 0 . 11 <nl> + * Fix deserialization of 2 . x DeletedCells ( CASSANDRA - 12620 ) <nl> * Add parent repair session id to anticompaction log message ( CASSANDRA - 12186 ) <nl> * Improve contention handling on failure to acquire MV lock for streaming and hints ( CASSANDRA - 12905 ) <nl> * Fix DELETE and UPDATE queries with empty IN restrictions ( CASSANDRA - 12829 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / LegacyLayout . java b / src / java / org / apache / cassandra / db / LegacyLayout . java <nl> index c8e7536 . . 3f69671 100644 <nl> - - - a / src / java / org / apache / cassandra / db / LegacyLayout . java <nl> + + + b / src / java / org / apache / cassandra / db / LegacyLayout . java <nl> @ @ - 1194 , 7 + 1194 , 10 @ @ public abstract class LegacyLayout <nl> { <nl> / / It ' s the row marker <nl> assert ! cell . value . hasRemaining ( ) ; <nl> - builder . addPrimaryKeyLivenessInfo ( LivenessInfo . create ( cell . timestamp , cell . ttl , cell . localDeletionTime ) ) ; <nl> + / / In 2 . 1 , the row marker expired cell might have been converted into a deleted one by compaction . So , <nl> + / / we need to set the primary key liveness info only if the cell is not a deleted one . <nl> + if ( ! cell . isTombstone ( ) ) <nl> + builder . addPrimaryKeyLivenessInfo ( LivenessInfo . create ( cell . timestamp , cell . ttl , cell . localDeletionTime ) ) ; <nl> } <nl> else <nl> {
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index a40dabd . . 5eeeeae 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 0 . 11 
 + * Fix deserialization of 2 . x DeletedCells ( CASSANDRA - 12620 ) 
 * Add parent repair session id to anticompaction log message ( CASSANDRA - 12186 ) 
 * Improve contention handling on failure to acquire MV lock for streaming and hints ( CASSANDRA - 12905 ) 
 * Fix DELETE and UPDATE queries with empty IN restrictions ( CASSANDRA - 12829 ) 
 diff - - git a / src / java / org / apache / cassandra / db / LegacyLayout . java b / src / java / org / apache / cassandra / db / LegacyLayout . java 
 index c8e7536 . . 3f69671 100644 
 - - - a / src / java / org / apache / cassandra / db / LegacyLayout . java 
 + + + b / src / java / org / apache / cassandra / db / LegacyLayout . java 
 @ @ - 1194 , 7 + 1194 , 10 @ @ public abstract class LegacyLayout 
 { 
 / / It ' s the row marker 
 assert ! cell . value . hasRemaining ( ) ; 
 - builder . addPrimaryKeyLivenessInfo ( LivenessInfo . create ( cell . timestamp , cell . ttl , cell . localDeletionTime ) ) ; 
 + / / In 2 . 1 , the row marker expired cell might have been converted into a deleted one by compaction . So , 
 + / / we need to set the primary key liveness info only if the cell is not a deleted one . 
 + if ( ! cell . isTombstone ( ) ) 
 + builder . addPrimaryKeyLivenessInfo ( LivenessInfo . create ( cell . timestamp , cell . ttl , cell . localDeletionTime ) ) ; 
 } 
 else 
 {

NEAREST DIFF:
ELIMINATEDSENTENCE
