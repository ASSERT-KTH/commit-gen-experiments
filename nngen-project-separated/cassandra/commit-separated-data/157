BLEU SCORE: 0.018738883683389617

TEST MSG: Avoid deadlock when running nodetool refresh before node is fully up
GENERATED MSG: Fix setting ' durable _ writes ' in ALTER KEYSPACE

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 94b2276 . . 9012f8c 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 0 . 17 <nl> + * Avoid deadlock when running nodetool refresh before node is fully up ( CASSANDRA - 14310 ) <nl> * Handle all exceptions when opening sstables ( CASSANDRA - 14202 ) <nl> * Handle incompletely written hint descriptors during startup ( CASSANDRA - 14080 ) <nl> * Handle repeat open bound from SRP in read repair ( CASSANDRA - 14330 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> index 14e06b0 . . 4c7bc46 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> @ @ - 653 , 7 + 653 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> * @ param ksName The keyspace name <nl> * @ param cfName The columnFamily name <nl> * / <nl> - public static synchronized void loadNewSSTables ( String ksName , String cfName ) <nl> + public static void loadNewSSTables ( String ksName , String cfName ) <nl> { <nl> / * * ks / cf existence checks will be done by open and getCFS methods for us * / <nl> Keyspace keyspace = Keyspace . open ( ksName ) ; <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index cf8e257 . . 77fcb81 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 4597 , 6 + 4597 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> * / <nl> public void loadNewSSTables ( String ksName , String cfName ) <nl> { <nl> + if ( ! isInitialized ( ) ) <nl> + throw new RuntimeException ( " Not yet initialized , can ' t load new sstables " ) ; <nl> ColumnFamilyStore . loadNewSSTables ( ksName , cfName ) ; <nl> } <nl>
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 94b2276 . . 9012f8c 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 0 . 17 
 + * Avoid deadlock when running nodetool refresh before node is fully up ( CASSANDRA - 14310 ) 
 * Handle all exceptions when opening sstables ( CASSANDRA - 14202 ) 
 * Handle incompletely written hint descriptors during startup ( CASSANDRA - 14080 ) 
 * Handle repeat open bound from SRP in read repair ( CASSANDRA - 14330 ) 
 diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 index 14e06b0 . . 4c7bc46 100644 
 - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 @ @ - 653 , 7 + 653 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 * @ param ksName The keyspace name 
 * @ param cfName The columnFamily name 
 * / 
 - public static synchronized void loadNewSSTables ( String ksName , String cfName ) 
 + public static void loadNewSSTables ( String ksName , String cfName ) 
 { 
 / * * ks / cf existence checks will be done by open and getCFS methods for us * / 
 Keyspace keyspace = Keyspace . open ( ksName ) ; 
 diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index cf8e257 . . 77fcb81 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 4597 , 6 + 4597 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 * / 
 public void loadNewSSTables ( String ksName , String cfName ) 
 { 
 + if ( ! isInitialized ( ) ) 
 + throw new RuntimeException ( " Not yet initialized , can ' t load new sstables " ) ; 
 ColumnFamilyStore . loadNewSSTables ( ksName , cfName ) ; 
 } 


NEAREST DIFF:
ELIMINATEDSENTENCE
