BLEU SCORE: 0.04923026124015933

TEST MSG: Obfuscate password in stress - graphs
GENERATED MSG: Make stress . java insert operation to use microseconds

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index df91d43 . . a69cbe3 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 11 . 0 <nl> + * Obfuscate password in stress - graphs ( CASSANDRA - 12233 ) <nl> * Move to FastThreadLocalThread and FastThreadLocal ( CASSANDRA - 13034 ) <nl> * nodetool stopdaemon errors out ( CASSANDRA - 13030 ) <nl> * Tables in system _ distributed should not use gcgs of 0 ( CASSANDRA - 12954 ) <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressGraph . java b / tools / stress / src / org / apache / cassandra / stress / StressGraph . java <nl> index 17b718d . . 663bde6 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / StressGraph . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / StressGraph . java <nl> @ @ - 213 , 7 + 213 , 8 @ @ public class StressGraph <nl> json . put ( " revision " , stressSettings . graph . revision ) ; <nl> else <nl> json . put ( " revision " , String . format ( " % s - % s threads " , stressSettings . graph . revision , currentThreadCount ) ) ; <nl> - json . put ( " command " , StringUtils . join ( stressArguments , " " ) ) ; <nl> + String command = StringUtils . join ( stressArguments , " " ) . replaceAll ( " password = . * ? " , " password = * * * * * * * " ) ; <nl> + json . put ( " command " , command ) ; <nl> json . put ( " intervals " , intervals ) ; <nl> stats . add ( json ) ; <nl>
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java <nl> index 9ff110e . . 99037a1 100644 <nl> - - - a / src / java / org / apache / cassandra / net / MessagingService . java <nl> + + + b / src / java / org / apache / cassandra / net / MessagingService . java <nl> @ @ - 482 , 7 + 482 , 21 @ @ public final class MessagingService implements MessagingServiceMBean <nl> logger _ . info ( " Waiting for messaging service to quiesce " ) ; <nl> / / We may need to schedule hints on the mutation stage , so it ' s erroneous to shut down the mutation stage first <nl> assert ! StageManager . getStage ( Stage . MUTATION ) . isShutdown ( ) ; <nl> + <nl> + / / the important part <nl> callbacks . shutdown ( ) ; <nl> + <nl> + / / attempt to humor tests that try to stop and restart MS <nl> + try <nl> + { <nl> + for ( SocketThread th : socketThreads ) <nl> + th . close ( ) ; <nl> + } <nl> + catch ( IOException e ) <nl> + { <nl> + throw new IOError ( e ) ; <nl> + } <nl> + <nl> } <nl> <nl> public void receive ( Message message , String id )

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index df91d43 . . a69cbe3 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 11 . 0 
 + * Obfuscate password in stress - graphs ( CASSANDRA - 12233 ) 
 * Move to FastThreadLocalThread and FastThreadLocal ( CASSANDRA - 13034 ) 
 * nodetool stopdaemon errors out ( CASSANDRA - 13030 ) 
 * Tables in system _ distributed should not use gcgs of 0 ( CASSANDRA - 12954 ) 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressGraph . java b / tools / stress / src / org / apache / cassandra / stress / StressGraph . java 
 index 17b718d . . 663bde6 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / StressGraph . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / StressGraph . java 
 @ @ - 213 , 7 + 213 , 8 @ @ public class StressGraph 
 json . put ( " revision " , stressSettings . graph . revision ) ; 
 else 
 json . put ( " revision " , String . format ( " % s - % s threads " , stressSettings . graph . revision , currentThreadCount ) ) ; 
 - json . put ( " command " , StringUtils . join ( stressArguments , " " ) ) ; 
 + String command = StringUtils . join ( stressArguments , " " ) . replaceAll ( " password = . * ? " , " password = * * * * * * * " ) ; 
 + json . put ( " command " , command ) ; 
 json . put ( " intervals " , intervals ) ; 
 stats . add ( json ) ; 


NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java 
 index 9ff110e . . 99037a1 100644 
 - - - a / src / java / org / apache / cassandra / net / MessagingService . java 
 + + + b / src / java / org / apache / cassandra / net / MessagingService . java 
 @ @ - 482 , 7 + 482 , 21 @ @ public final class MessagingService implements MessagingServiceMBean 
 logger _ . info ( " Waiting for messaging service to quiesce " ) ; 
 / / We may need to schedule hints on the mutation stage , so it ' s erroneous to shut down the mutation stage first 
 assert ! StageManager . getStage ( Stage . MUTATION ) . isShutdown ( ) ; 
 + 
 + / / the important part 
 callbacks . shutdown ( ) ; 
 + 
 + / / attempt to humor tests that try to stop and restart MS 
 + try 
 + { 
 + for ( SocketThread th : socketThreads ) 
 + th . close ( ) ; 
 + } 
 + catch ( IOException e ) 
 + { 
 + throw new IOError ( e ) ; 
 + } 
 + 
 } 
 
 public void receive ( Message message , String id )
