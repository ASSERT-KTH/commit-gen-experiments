BLEU SCORE: 0.0114347838903095

TEST MSG: IOException ( No such file or directory ) closing MessagingService ' s server socket ( locally )
GENERATED MSG: JDK bug from CASSANDRA - 8220 makes drain die early also

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java <nl> index c784b15 . . 31ea09e 100644 <nl> - - - a / src / java / org / apache / cassandra / net / MessagingService . java <nl> + + + b / src / java / org / apache / cassandra / net / MessagingService . java <nl> @ @ - 812 , 7 + 812 , 7 @ @ public final class MessagingService implements MessagingServiceMBean <nl> catch ( IOException e ) <nl> { <nl> / / see https : / / issues . apache . org / jira / browse / CASSANDRA - 10545 <nl> - handleIOException ( e ) ; <nl> + handleIOExceptionOnClose ( e ) ; <nl> } <nl> } <nl> catch ( IOException e ) <nl> @ @ - 1102 , 7 + 1102 , 8 @ @ public final class MessagingService implements MessagingServiceMBean <nl> catch ( IOException e ) <nl> { <nl> / / see https : / / issues . apache . org / jira / browse / CASSANDRA - 8220 <nl> - handleIOException ( e ) ; <nl> + / / see https : / / issues . apache . org / jira / browse / CASSANDRA - 12513 <nl> + handleIOExceptionOnClose ( e ) ; <nl> } <nl> for ( Closeable connection : connections ) <nl> { <nl> @ @ - 1116 , 12 + 1117 , 22 @ @ public final class MessagingService implements MessagingServiceMBean <nl> } <nl> } <nl> <nl> - private static void handleIOException ( IOException e ) throws IOException <nl> + private static void handleIOExceptionOnClose ( IOException e ) throws IOException <nl> { <nl> / / dirty hack for clean shutdown on OSX w / Java > = 1 . 8 . 0 _ 20 <nl> - / / see https : / / bugs . openjdk . java . net / browse / JDK - 8050499 <nl> - if ( ! " Unknown error : 316 " . equals ( e . getMessage ( ) ) | | ! " Mac OS X " . equals ( System . getProperty ( " os . name " ) ) ) <nl> - throw e ; <nl> + / / see https : / / bugs . openjdk . java . net / browse / JDK - 8050499 ; <nl> + / / also CASSANDRA - 12513 <nl> + if ( " Mac OS X " . equals ( System . getProperty ( " os . name " ) ) ) <nl> + { <nl> + switch ( e . getMessage ( ) ) <nl> + { <nl> + case " Unknown error : 316 " : <nl> + case " No such file or directory " : <nl> + return ; <nl> + } <nl> + } <nl> + <nl> + throw e ; <nl> } <nl> <nl> public Map < String , Integer > getLargeMessagePendingTasks ( )
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java 
 index c784b15 . . 31ea09e 100644 
 - - - a / src / java / org / apache / cassandra / net / MessagingService . java 
 + + + b / src / java / org / apache / cassandra / net / MessagingService . java 
 @ @ - 812 , 7 + 812 , 7 @ @ public final class MessagingService implements MessagingServiceMBean 
 catch ( IOException e ) 
 { 
 / / see https : / / issues . apache . org / jira / browse / CASSANDRA - 10545 
 - handleIOException ( e ) ; 
 + handleIOExceptionOnClose ( e ) ; 
 } 
 } 
 catch ( IOException e ) 
 @ @ - 1102 , 7 + 1102 , 8 @ @ public final class MessagingService implements MessagingServiceMBean 
 catch ( IOException e ) 
 { 
 / / see https : / / issues . apache . org / jira / browse / CASSANDRA - 8220 
 - handleIOException ( e ) ; 
 + / / see https : / / issues . apache . org / jira / browse / CASSANDRA - 12513 
 + handleIOExceptionOnClose ( e ) ; 
 } 
 for ( Closeable connection : connections ) 
 { 
 @ @ - 1116 , 12 + 1117 , 22 @ @ public final class MessagingService implements MessagingServiceMBean 
 } 
 } 
 
 - private static void handleIOException ( IOException e ) throws IOException 
 + private static void handleIOExceptionOnClose ( IOException e ) throws IOException 
 { 
 / / dirty hack for clean shutdown on OSX w / Java > = 1 . 8 . 0 _ 20 
 - / / see https : / / bugs . openjdk . java . net / browse / JDK - 8050499 
 - if ( ! " Unknown error : 316 " . equals ( e . getMessage ( ) ) | | ! " Mac OS X " . equals ( System . getProperty ( " os . name " ) ) ) 
 - throw e ; 
 + / / see https : / / bugs . openjdk . java . net / browse / JDK - 8050499 ; 
 + / / also CASSANDRA - 12513 
 + if ( " Mac OS X " . equals ( System . getProperty ( " os . name " ) ) ) 
 + { 
 + switch ( e . getMessage ( ) ) 
 + { 
 + case " Unknown error : 316 " : 
 + case " No such file or directory " : 
 + return ; 
 + } 
 + } 
 + 
 + throw e ; 
 } 
 
 public Map < String , Integer > getLargeMessagePendingTasks ( )

NEAREST DIFF:
ELIMINATEDSENTENCE
