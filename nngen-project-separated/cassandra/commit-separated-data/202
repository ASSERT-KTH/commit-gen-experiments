BLEU SCORE: 0.0241596535992123

TEST MSG: Revert ProtocolVersion changes from CASSANDRA - 7544
GENERATED MSG: Revert " Reject invalid DC names as option while creating or altering NetworkTopologyStrategy "

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 91b3ed8 . . 38cf696 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 4 . 0 <nl> + * Revert ProtocolVersion changes from CASSANDRA - 7544 ( CASSANDRA - 14211 ) <nl> * Non - disruptive seed node list reload ( CASSANDRA - 14190 ) <nl> * Nodetool tablehistograms to print statics for all the tables ( CASSANDRA - 14185 ) <nl> * Migrate dtests to use pytest and python3 ( CASSANDRA - 14134 ) <nl> diff - - git a / build . xml b / build . xml <nl> index 5796868 . . e04ce18 100644 <nl> - - - a / build . xml <nl> + + + b / build . xml <nl> @ @ - 437 , 7 + 437 , 7 @ @ <nl> < dependency groupId = " com . google . code . findbugs " artifactId = " jsr305 " version = " 2 . 0 . 2 " / > <nl> < dependency groupId = " com . clearspring . analytics " artifactId = " stream " version = " 2 . 5 . 2 " / > <nl> 	 < ! - - UPDATE AND UNCOMMENT ON THE DRIVER RELEASE , BEFORE 4 . 0 RELEASE <nl> - < dependency groupId = " com . datastax . cassandra " artifactId = " cassandra - driver - core " version = " 4 . 0 . 0 - SNAPSHOT " classifier = " shaded " > <nl> + < dependency groupId = " com . datastax . cassandra " artifactId = " cassandra - driver - core " version = " 3 . 4 . 0 - SNAPSHOT " classifier = " shaded " > <nl> < exclusion groupId = " io . netty " artifactId = " netty - buffer " / > <nl> < exclusion groupId = " io . netty " artifactId = " netty - codec " / > <nl> < exclusion groupId = " io . netty " artifactId = " netty - handler " / > <nl> diff - - git a / conf / cassandra . yaml b / conf / cassandra . yaml <nl> index 3bed3a6 . . 9acc6d6 100644 <nl> - - - a / conf / cassandra . yaml <nl> + + + b / conf / cassandra . yaml <nl> @ @ - 945 , 13 + 945 , 6 @ @ dynamic _ snitch _ badness _ threshold : 0 . 1 <nl> # the keystore and truststore . For instructions on generating these files , see : <nl> # http : / / download . oracle . com / javase / 8 / docs / technotes / guides / security / jsse / JSSERefGuide . html # CreateKeystore <nl> # <nl> - # If you are taking advantage of StartTLS outbound connections will have the issue that they can ' t know <nl> - # what encrypted port to connect to in a foolproof way . outgoing _ encrypted _ port _ source deals with this confusion <nl> - # by allowing you to specify how you want a node to pick an outgoing port for intra - cluster connections . <nl> - # Valid values are " gossip " and " yaml " . Gossip will always connect to the storage port for a node that is <nl> - # published via a gossip which is always going to be the plain storage port . " yaml " will always select <nl> - # the port configured as ssl _ storage _ port on THIS node . If you want to use SSL and have different storage <nl> - # ports across the cluster you must select " gossip " and use StartTLS on storage _ port . <nl> server _ encryption _ options : <nl> # set to true for allowing secure incoming connections <nl> enabled : false <nl> diff - - git a / lib / cassandra - driver - core - 3 . 4 . 0 - SNAPSHOT - shaded . jar b / lib / cassandra - driver - core - 3 . 4 . 0 - SNAPSHOT - shaded . jar <nl> new file mode 100644 <nl> index 0000000 . . 1290dc3 <nl> Binary files / dev / null and b / lib / cassandra - driver - core - 3 . 4 . 0 - SNAPSHOT - shaded . jar differ <nl> diff - - git a / lib / cassandra - driver - core - 4 . 0 . 0 - SNAPSHOT - shaded . jar b / lib / cassandra - driver - core - 4 . 0 . 0 - SNAPSHOT - shaded . jar <nl> deleted file mode 100644 <nl> index 609c393 . . 0000000 <nl> Binary files a / lib / cassandra - driver - core - 4 . 0 . 0 - SNAPSHOT - shaded . jar and / dev / null differ <nl> diff - - git a / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 00f6f77e . zip b / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 00f6f77e . zip <nl> new file mode 100644 <nl> index 0000000 . . e44da16 <nl> Binary files / dev / null and b / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 00f6f77e . zip differ <nl> diff - - git a / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 9ee88ded . zip b / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 9ee88ded . zip <nl> deleted file mode 100644 <nl> index 4aa91b7 . . 0000000 <nl> Binary files a / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 9ee88ded . zip and / dev / null differ <nl> diff - - git a / src / java / org / apache / cassandra / cql3 / functions / ScriptBasedUDFunction . java b / src / java / org / apache / cassandra / cql3 / functions / ScriptBasedUDFunction . java <nl> index c568972 . . 96a8b0d 100644 <nl> - - - a / src / java / org / apache / cassandra / cql3 / functions / ScriptBasedUDFunction . java <nl> + + + b / src / java / org / apache / cassandra / cql3 / functions / ScriptBasedUDFunction . java <nl> @ @ - 80 , 7 + 80 , 9 @ @ final class ScriptBasedUDFunction extends UDFunction <nl> " com . google . common . reflect " , <nl> / / following required by UDF <nl> " com . datastax . driver . core " , <nl> - " com . datastax . driver . core . utils " <nl> + " com . datastax . driver . core . utils " , <nl> + / / Driver Metadata class requires hashmap from this <nl> + " com . datastax . shaded . netty . util . collection " <nl> } ; <nl> <nl> / / use a JVM standard ExecutorService as DebuggableThreadPoolExecutor references internal <nl> diff - - git a / src / java / org / apache / cassandra / transport / ProtocolVersion . java b / src / java / org / apache / cassandra / transport / ProtocolVersion . java <nl> index 838176a . . cd73c86 100644 <nl> - - - a / src / java / org / apache / cassandra / transport / ProtocolVersion . java <nl> + + + b / src / java / org / apache / cassandra / transport / ProtocolVersion . java <nl> @ @ - 43 , 8 + 43 , 7 @ @ public enum ProtocolVersion implements Comparable < ProtocolVersion > <nl> V2 ( 2 , " v2 " , false ) , / / no longer supported <nl> V3 ( 3 , " v3 " , false ) , <nl> V4 ( 4 , " v4 " , false ) , <nl> - V5 ( 5 , " v5 " , false ) , <nl> - V6 ( 6 , " v6 - beta " , true ) ; <nl> + V5 ( 5 , " v5 - beta " , true ) ; <nl> <nl> / * * The version number * / <nl> private final int num ; <nl> @ @ - 63 , 7 + 62 , 7 @ @ public enum ProtocolVersion implements Comparable < ProtocolVersion > <nl> } <nl> <nl> / * * The supported versions stored as an array , these should be private and are required for fast decoding * / <nl> - private final static ProtocolVersion [ ] SUPPORTED _ VERSIONS = new ProtocolVersion [ ] { V3 , V4 , V5 , V6 } ; <nl> + private final static ProtocolVersion [ ] SUPPORTED _ VERSIONS = new ProtocolVersion [ ] { V3 , V4 , V5 } ; <nl> final static ProtocolVersion MIN _ SUPPORTED _ VERSION = SUPPORTED _ VERSIONS [ 0 ] ; <nl> final static ProtocolVersion MAX _ SUPPORTED _ VERSION = SUPPORTED _ VERSIONS [ SUPPORTED _ VERSIONS . length - 1 ] ; <nl> <nl> @ @ - 74 , 8 + 73 , 8 @ @ public enum ProtocolVersion implements Comparable < ProtocolVersion > <nl> public final static EnumSet < ProtocolVersion > UNSUPPORTED = EnumSet . complementOf ( SUPPORTED ) ; <nl> <nl> / * * The preferred versions * / <nl> - public final static ProtocolVersion CURRENT = V5 ; <nl> - public final static Optional < ProtocolVersion > BETA = Optional . of ( V6 ) ; <nl> + public final static ProtocolVersion CURRENT = V4 ; <nl> + public final static Optional < ProtocolVersion > BETA = Optional . of ( V5 ) ; <nl> <nl> public static List < String > supportedVersions ( ) <nl> { <nl> diff - - git a / test / unit / org / apache / cassandra / cql3 / PreparedStatementsTest . java b / test / unit / org / apache / cassandra / cql3 / PreparedStatementsTest . java <nl> index ce5de62 . . 0a314da 100644 <nl> - - - a / test / unit / org / apache / cassandra / cql3 / PreparedStatementsTest . java <nl> + + + b / test / unit / org / apache / cassandra / cql3 / PreparedStatementsTest . java <nl> @ @ - 223 , 6 + 223 , 7 @ @ public class PreparedStatementsTest extends CQLTester <nl> . withClusterName ( " Test Cluster " ) <nl> . withPort ( nativePort ) <nl> . withoutJMXReporting ( ) <nl> + . allowBetaProtocolVersion ( ) <nl> . build ( ) ) <nl> { <nl> try ( Session newSession = newCluster . connect ( ) ) <nl> diff - - git a / test / unit / org / apache / cassandra / service / ProtocolBetaVersionTest . java b / test / unit / org / apache / cassandra / service / ProtocolBetaVersionTest . java <nl> index a7551f4 . . 4ade4ad 100644 <nl> - - - a / test / unit / org / apache / cassandra / service / ProtocolBetaVersionTest . java <nl> + + + b / test / unit / org / apache / cassandra / service / ProtocolBetaVersionTest . java <nl> @ @ - 110 , 7 + 110 , 7 @ @ public class ProtocolBetaVersionTest extends CQLTester <nl> } <nl> catch ( Exception e ) <nl> { <nl> - assertEquals ( " Beta version of server used ( 6 / v6 - beta ) , but USE _ BETA flag is not set " , <nl> + assertEquals ( " Beta version of server used ( 5 / v5 - beta ) , but USE _ BETA flag is not set " , <nl> e . getMessage ( ) ) ; <nl> } <nl> } <nl> diff - - git a / test / unit / org / apache / cassandra / transport / ProtocolVersionTest . java b / test / unit / org / apache / cassandra / transport / ProtocolVersionTest . java <nl> index 6b95c67 . . 0669699 100644 <nl> - - - a / test / unit / org / apache / cassandra / transport / ProtocolVersionTest . java <nl> + + + b / test / unit / org / apache / cassandra / transport / ProtocolVersionTest . java <nl> @ @ - 62 , 8 + 62 , 7 @ @ public class ProtocolVersionTest <nl> Assert . assertNotNull ( ProtocolVersion . CURRENT ) ; <nl> <nl> Assert . assertFalse ( ProtocolVersion . V4 . isBeta ( ) ) ; <nl> - Assert . assertFalse ( ProtocolVersion . V5 . isBeta ( ) ) ; <nl> - Assert . assertTrue ( ProtocolVersion . V6 . isBeta ( ) ) ; <nl> + Assert . assertTrue ( ProtocolVersion . V5 . isBeta ( ) ) ; <nl> } <nl> <nl> @ Test
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 91b3ed8 . . 38cf696 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 4 . 0 
 + * Revert ProtocolVersion changes from CASSANDRA - 7544 ( CASSANDRA - 14211 ) 
 * Non - disruptive seed node list reload ( CASSANDRA - 14190 ) 
 * Nodetool tablehistograms to print statics for all the tables ( CASSANDRA - 14185 ) 
 * Migrate dtests to use pytest and python3 ( CASSANDRA - 14134 ) 
 diff - - git a / build . xml b / build . xml 
 index 5796868 . . e04ce18 100644 
 - - - a / build . xml 
 + + + b / build . xml 
 @ @ - 437 , 7 + 437 , 7 @ @ 
 < dependency groupId = " com . google . code . findbugs " artifactId = " jsr305 " version = " 2 . 0 . 2 " / > 
 < dependency groupId = " com . clearspring . analytics " artifactId = " stream " version = " 2 . 5 . 2 " / > 
 	 < ! - - UPDATE AND UNCOMMENT ON THE DRIVER RELEASE , BEFORE 4 . 0 RELEASE 
 - < dependency groupId = " com . datastax . cassandra " artifactId = " cassandra - driver - core " version = " 4 . 0 . 0 - SNAPSHOT " classifier = " shaded " > 
 + < dependency groupId = " com . datastax . cassandra " artifactId = " cassandra - driver - core " version = " 3 . 4 . 0 - SNAPSHOT " classifier = " shaded " > 
 < exclusion groupId = " io . netty " artifactId = " netty - buffer " / > 
 < exclusion groupId = " io . netty " artifactId = " netty - codec " / > 
 < exclusion groupId = " io . netty " artifactId = " netty - handler " / > 
 diff - - git a / conf / cassandra . yaml b / conf / cassandra . yaml 
 index 3bed3a6 . . 9acc6d6 100644 
 - - - a / conf / cassandra . yaml 
 + + + b / conf / cassandra . yaml 
 @ @ - 945 , 13 + 945 , 6 @ @ dynamic _ snitch _ badness _ threshold : 0 . 1 
 # the keystore and truststore . For instructions on generating these files , see : 
 # http : / / download . oracle . com / javase / 8 / docs / technotes / guides / security / jsse / JSSERefGuide . html # CreateKeystore 
 # 
 - # If you are taking advantage of StartTLS outbound connections will have the issue that they can ' t know 
 - # what encrypted port to connect to in a foolproof way . outgoing _ encrypted _ port _ source deals with this confusion 
 - # by allowing you to specify how you want a node to pick an outgoing port for intra - cluster connections . 
 - # Valid values are " gossip " and " yaml " . Gossip will always connect to the storage port for a node that is 
 - # published via a gossip which is always going to be the plain storage port . " yaml " will always select 
 - # the port configured as ssl _ storage _ port on THIS node . If you want to use SSL and have different storage 
 - # ports across the cluster you must select " gossip " and use StartTLS on storage _ port . 
 server _ encryption _ options : 
 # set to true for allowing secure incoming connections 
 enabled : false 
 diff - - git a / lib / cassandra - driver - core - 3 . 4 . 0 - SNAPSHOT - shaded . jar b / lib / cassandra - driver - core - 3 . 4 . 0 - SNAPSHOT - shaded . jar 
 new file mode 100644 
 index 0000000 . . 1290dc3 
 Binary files / dev / null and b / lib / cassandra - driver - core - 3 . 4 . 0 - SNAPSHOT - shaded . jar differ 
 diff - - git a / lib / cassandra - driver - core - 4 . 0 . 0 - SNAPSHOT - shaded . jar b / lib / cassandra - driver - core - 4 . 0 . 0 - SNAPSHOT - shaded . jar 
 deleted file mode 100644 
 index 609c393 . . 0000000 
 Binary files a / lib / cassandra - driver - core - 4 . 0 . 0 - SNAPSHOT - shaded . jar and / dev / null differ 
 diff - - git a / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 00f6f77e . zip b / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 00f6f77e . zip 
 new file mode 100644 
 index 0000000 . . e44da16 
 Binary files / dev / null and b / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 00f6f77e . zip differ 
 diff - - git a / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 9ee88ded . zip b / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 9ee88ded . zip 
 deleted file mode 100644 
 index 4aa91b7 . . 0000000 
 Binary files a / lib / cassandra - driver - internal - only - 3 . 12 . 0 . post0 - 9ee88ded . zip and / dev / null differ 
 diff - - git a / src / java / org / apache / cassandra / cql3 / functions / ScriptBasedUDFunction . java b / src / java / org / apache / cassandra / cql3 / functions / ScriptBasedUDFunction . java 
 index c568972 . . 96a8b0d 100644 
 - - - a / src / java / org / apache / cassandra / cql3 / functions / ScriptBasedUDFunction . java 
 + + + b / src / java / org / apache / cassandra / cql3 / functions / ScriptBasedUDFunction . java 
 @ @ - 80 , 7 + 80 , 9 @ @ final class ScriptBasedUDFunction extends UDFunction 
 " com . google . common . reflect " , 
 / / following required by UDF 
 " com . datastax . driver . core " , 
 - " com . datastax . driver . core . utils " 
 + " com . datastax . driver . core . utils " , 
 + / / Driver Metadata class requires hashmap from this 
 + " com . datastax . shaded . netty . util . collection " 
 } ; 
 
 / / use a JVM standard ExecutorService as DebuggableThreadPoolExecutor references internal 
 diff - - git a / src / java / org / apache / cassandra / transport / ProtocolVersion . java b / src / java / org / apache / cassandra / transport / ProtocolVersion . java 
 index 838176a . . cd73c86 100644 
 - - - a / src / java / org / apache / cassandra / transport / ProtocolVersion . java 
 + + + b / src / java / org / apache / cassandra / transport / ProtocolVersion . java 
 @ @ - 43 , 8 + 43 , 7 @ @ public enum ProtocolVersion implements Comparable < ProtocolVersion > 
 V2 ( 2 , " v2 " , false ) , / / no longer supported 
 V3 ( 3 , " v3 " , false ) , 
 V4 ( 4 , " v4 " , false ) , 
 - V5 ( 5 , " v5 " , false ) , 
 - V6 ( 6 , " v6 - beta " , true ) ; 
 + V5 ( 5 , " v5 - beta " , true ) ; 
 
 / * * The version number * / 
 private final int num ; 
 @ @ - 63 , 7 + 62 , 7 @ @ public enum ProtocolVersion implements Comparable < ProtocolVersion > 
 } 
 
 / * * The supported versions stored as an array , these should be private and are required for fast decoding * / 
 - private final static ProtocolVersion [ ] SUPPORTED _ VERSIONS = new ProtocolVersion [ ] { V3 , V4 , V5 , V6 } ; 
 + private final static ProtocolVersion [ ] SUPPORTED _ VERSIONS = new ProtocolVersion [ ] { V3 , V4 , V5 } ; 
 final static ProtocolVersion MIN _ SUPPORTED _ VERSION = SUPPORTED _ VERSIONS [ 0 ] ; 
 final static ProtocolVersion MAX _ SUPPORTED _ VERSION = SUPPORTED _ VERSIONS [ SUPPORTED _ VERSIONS . length - 1 ] ; 
 
 @ @ - 74 , 8 + 73 , 8 @ @ public enum ProtocolVersion implements Comparable < ProtocolVersion > 
 public final static EnumSet < ProtocolVersion > UNSUPPORTED = EnumSet . complementOf ( SUPPORTED ) ; 
 
 / * * The preferred versions * / 
 - public final static ProtocolVersion CURRENT = V5 ; 
 - public final static Optional < ProtocolVersion > BETA = Optional . of ( V6 ) ; 
 + public final static ProtocolVersion CURRENT = V4 ; 
 + public final static Optional < ProtocolVersion > BETA = Optional . of ( V5 ) ; 
 
 public static List < String > supportedVersions ( ) 
 { 
 diff - - git a / test / unit / org / apache / cassandra / cql3 / PreparedStatementsTest . java b / test / unit / org / apache / cassandra / cql3 / PreparedStatementsTest . java 
 index ce5de62 . . 0a314da 100644 
 - - - a / test / unit / org / apache / cassandra / cql3 / PreparedStatementsTest . java 
 + + + b / test / unit / org / apache / cassandra / cql3 / PreparedStatementsTest . java 
 @ @ - 223 , 6 + 223 , 7 @ @ public class PreparedStatementsTest extends CQLTester 
 . withClusterName ( " Test Cluster " ) 
 . withPort ( nativePort ) 
 . withoutJMXReporting ( ) 
 + . allowBetaProtocolVersion ( ) 
 . build ( ) ) 
 { 
 try ( Session newSession = newCluster . connect ( ) ) 
 diff - - git a / test / unit / org / apache / cassandra / service / ProtocolBetaVersionTest . java b / test / unit / org / apache / cassandra / service / ProtocolBetaVersionTest . java 
 index a7551f4 . . 4ade4ad 100644 
 - - - a / test / unit / org / apache / cassandra / service / ProtocolBetaVersionTest . java 
 + + + b / test / unit / org / apache / cassandra / service / ProtocolBetaVersionTest . java 
 @ @ - 110 , 7 + 110 , 7 @ @ public class ProtocolBetaVersionTest extends CQLTester 
 } 
 catch ( Exception e ) 
 { 
 - assertEquals ( " Beta version of server used ( 6 / v6 - beta ) , but USE _ BETA flag is not set " , 
 + assertEquals ( " Beta version of server used ( 5 / v5 - beta ) , but USE _ BETA flag is not set " , 
 e . getMessage ( ) ) ; 
 } 
 } 
 diff - - git a / test / unit / org / apache / cassandra / transport / ProtocolVersionTest . java b / test / unit / org / apache / cassandra / transport / ProtocolVersionTest . java 
 index 6b95c67 . . 0669699 100644 
 - - - a / test / unit / org / apache / cassandra / transport / ProtocolVersionTest . java 
 + + + b / test / unit / org / apache / cassandra / transport / ProtocolVersionTest . java 
 @ @ - 62 , 8 + 62 , 7 @ @ public class ProtocolVersionTest 
 Assert . assertNotNull ( ProtocolVersion . CURRENT ) ; 
 
 Assert . assertFalse ( ProtocolVersion . V4 . isBeta ( ) ) ; 
 - Assert . assertFalse ( ProtocolVersion . V5 . isBeta ( ) ) ; 
 - Assert . assertTrue ( ProtocolVersion . V6 . isBeta ( ) ) ; 
 + Assert . assertTrue ( ProtocolVersion . V5 . isBeta ( ) ) ; 
 } 
 
 @ Test

NEAREST DIFF:
ELIMINATEDSENTENCE
