BLEU SCORE: 0.040583489434387374

TEST MSG: Fix LeveledCompactionStrategyTest . testGrouperLevels with compression
GENERATED MSG: fix infinite loop in LCS test

TEST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java b / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java <nl> index 85880a5 . . c7935fe 100644 <nl> - - - a / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java <nl> + + + b / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java <nl> @ @ - 104 , 6 + 104 , 9 @ @ public class LeveledCompactionStrategyTest <nl> public void testGrouperLevels ( ) throws Exception { <nl> ByteBuffer value = ByteBuffer . wrap ( new byte [ 100 * 1024 ] ) ; / / 100 KB value , make it easy to have multiple files <nl> <nl> + / / Need entropy to prevent compression so size is predictable with compression enabled / disabled <nl> + new Random ( ) . nextBytes ( value . array ( ) ) ; <nl> + <nl> / / Enough data to have a level 1 and 2 <nl> int rows = 20 ; <nl> int columns = 10 ;
NEAREST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java b / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java <nl> index 56f12de . . 9392195 100644 <nl> - - - a / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java <nl> + + + b / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java <nl> @ @ - 69 , 7 + 69 , 7 @ @ public class LeveledCompactionStrategyTest extends SchemaLoader <nl> <nl> LeveledCompactionStrategy strat = ( LeveledCompactionStrategy ) store . getCompactionStrategy ( ) ; <nl> <nl> - while ( strat . getLevelSize ( 0 ) > 0 ) <nl> + while ( strat . getLevelSize ( 0 ) > 1 ) <nl> { <nl> store . forceMajorCompaction ( ) ; <nl> Thread . sleep ( 200 ) ;

TEST DIFF:
diff - - git a / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java b / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java 
 index 85880a5 . . c7935fe 100644 
 - - - a / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java 
 + + + b / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java 
 @ @ - 104 , 6 + 104 , 9 @ @ public class LeveledCompactionStrategyTest 
 public void testGrouperLevels ( ) throws Exception { 
 ByteBuffer value = ByteBuffer . wrap ( new byte [ 100 * 1024 ] ) ; / / 100 KB value , make it easy to have multiple files 
 
 + / / Need entropy to prevent compression so size is predictable with compression enabled / disabled 
 + new Random ( ) . nextBytes ( value . array ( ) ) ; 
 + 
 / / Enough data to have a level 1 and 2 
 int rows = 20 ; 
 int columns = 10 ;

NEAREST DIFF:
diff - - git a / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java b / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java 
 index 56f12de . . 9392195 100644 
 - - - a / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java 
 + + + b / test / unit / org / apache / cassandra / db / compaction / LeveledCompactionStrategyTest . java 
 @ @ - 69 , 7 + 69 , 7 @ @ public class LeveledCompactionStrategyTest extends SchemaLoader 
 
 LeveledCompactionStrategy strat = ( LeveledCompactionStrategy ) store . getCompactionStrategy ( ) ; 
 
 - while ( strat . getLevelSize ( 0 ) > 0 ) 
 + while ( strat . getLevelSize ( 0 ) > 1 ) 
 { 
 store . forceMajorCompaction ( ) ; 
 Thread . sleep ( 200 ) ;
