BLEU SCORE: 0.057079690340587526

TEST MSG: Handle KeyboardInterrupt properly in cqlsh
GENERATED MSG: cqlsh : ninja - fix indentation in Shell constructor

TEST DIFF (one line): diff - - git a / bin / cqlsh b / bin / cqlsh <nl> index bb0ffdf . . d2a503d 100755 <nl> - - - a / bin / cqlsh <nl> + + + b / bin / cqlsh <nl> @ @ - 504 , 15 + 504 , 9 @ @ class Shell ( cmd . Cmd ) : <nl> self . conn = use _ conn <nl> else : <nl> transport = transport _ factory ( hostname , port , os . environ , CONFIG _ FILE ) <nl> - self . conn = cql . connect ( hostname , port , user = username , password = password , <nl> - cql _ version = cqlver , transport = transport ) <nl> + self . conn = cql . connect ( hostname , port , keyspace = keyspace , user = username , <nl> + password = password , cql _ version = cqlver , transport = transport ) <nl> self . set _ expanded _ cql _ version ( cqlver ) <nl> - # we could set the keyspace through cql . connect ( ) , but as of 1 . 0 . 10 , <nl> - # it doesn ' t quote the keyspace for USE : ( <nl> - if keyspace is not None : <nl> - tempcurs = self . conn . cursor ( ) <nl> - tempcurs . execute ( ' USE % s ; ' % self . cql _ protect _ name ( keyspace ) ) <nl> - tempcurs . close ( ) <nl> self . cursor = self . conn . cursor ( ) <nl> self . get _ connection _ versions ( ) <nl> <nl> @ @ - 1056 , 6 + 1050 , 16 @ @ class Shell ( cmd . Cmd ) : <nl> except CQL _ ERRORS , err : <nl> self . printerr ( str ( err ) ) <nl> return False <nl> + except KeyboardInterrupt : <nl> + self . cursor . close ( ) <nl> + self . conn . terminate _ connection ( ) <nl> + transport = self . transport _ factory ( self . hostname , self . port , <nl> + os . environ , CONFIG _ FILE ) <nl> + self . conn = cql . connect ( self . hostname , self . port , keyspace = self . keyspace , <nl> + user = self . username , password = self . password , <nl> + cql _ version = self . cql _ version , transport = transport ) <nl> + self . cursor = self . conn . cursor ( ) <nl> + return False <nl> except Exception , err : <nl> import traceback <nl> self . printerr ( traceback . format _ exc ( ) )
NEAREST DIFF (one line): diff - - git a / conf / cassandra - env . sh b / conf / cassandra - env . sh <nl> index daae043 . . 527dba0 100644 <nl> - - - a / conf / cassandra - env . sh <nl> + + + b / conf / cassandra - env . sh <nl> @ @ - 202 , 8 + 202 , 7 @ @ JVM _ OPTS = " $ JVM _ OPTS - XX : SurvivorRatio = 8 " <nl> JVM _ OPTS = " $ JVM _ OPTS - XX : MaxTenuringThreshold = 1 " <nl> JVM _ OPTS = " $ JVM _ OPTS - XX : CMSInitiatingOccupancyFraction = 75 " <nl> JVM _ OPTS = " $ JVM _ OPTS - XX : + UseCMSInitiatingOccupancyOnly " <nl> - if [ " $ java _ version " = " 1 . 7 " ] <nl> - then <nl> + if [ " $ JVM _ VERSION " \ > " 1 . 6 . 0 " ] ; then <nl> JVM _ OPTS = " $ JVM _ OPTS - XX : + UseCondCardMark " <nl> fi <nl>

TEST DIFF:
diff - - git a / bin / cqlsh b / bin / cqlsh 
 index bb0ffdf . . d2a503d 100755 
 - - - a / bin / cqlsh 
 + + + b / bin / cqlsh 
 @ @ - 504 , 15 + 504 , 9 @ @ class Shell ( cmd . Cmd ) : 
 self . conn = use _ conn 
 else : 
 transport = transport _ factory ( hostname , port , os . environ , CONFIG _ FILE ) 
 - self . conn = cql . connect ( hostname , port , user = username , password = password , 
 - cql _ version = cqlver , transport = transport ) 
 + self . conn = cql . connect ( hostname , port , keyspace = keyspace , user = username , 
 + password = password , cql _ version = cqlver , transport = transport ) 
 self . set _ expanded _ cql _ version ( cqlver ) 
 - # we could set the keyspace through cql . connect ( ) , but as of 1 . 0 . 10 , 
 - # it doesn ' t quote the keyspace for USE : ( 
 - if keyspace is not None : 
 - tempcurs = self . conn . cursor ( ) 
 - tempcurs . execute ( ' USE % s ; ' % self . cql _ protect _ name ( keyspace ) ) 
 - tempcurs . close ( ) 
 self . cursor = self . conn . cursor ( ) 
 self . get _ connection _ versions ( ) 
 
 @ @ - 1056 , 6 + 1050 , 16 @ @ class Shell ( cmd . Cmd ) : 
 except CQL _ ERRORS , err : 
 self . printerr ( str ( err ) ) 
 return False 
 + except KeyboardInterrupt : 
 + self . cursor . close ( ) 
 + self . conn . terminate _ connection ( ) 
 + transport = self . transport _ factory ( self . hostname , self . port , 
 + os . environ , CONFIG _ FILE ) 
 + self . conn = cql . connect ( self . hostname , self . port , keyspace = self . keyspace , 
 + user = self . username , password = self . password , 
 + cql _ version = self . cql _ version , transport = transport ) 
 + self . cursor = self . conn . cursor ( ) 
 + return False 
 except Exception , err : 
 import traceback 
 self . printerr ( traceback . format _ exc ( ) )

NEAREST DIFF:
diff - - git a / conf / cassandra - env . sh b / conf / cassandra - env . sh 
 index daae043 . . 527dba0 100644 
 - - - a / conf / cassandra - env . sh 
 + + + b / conf / cassandra - env . sh 
 @ @ - 202 , 8 + 202 , 7 @ @ JVM _ OPTS = " $ JVM _ OPTS - XX : SurvivorRatio = 8 " 
 JVM _ OPTS = " $ JVM _ OPTS - XX : MaxTenuringThreshold = 1 " 
 JVM _ OPTS = " $ JVM _ OPTS - XX : CMSInitiatingOccupancyFraction = 75 " 
 JVM _ OPTS = " $ JVM _ OPTS - XX : + UseCMSInitiatingOccupancyOnly " 
 - if [ " $ java _ version " = " 1 . 7 " ] 
 - then 
 + if [ " $ JVM _ VERSION " \ > " 1 . 6 . 0 " ] ; then 
 JVM _ OPTS = " $ JVM _ OPTS - XX : + UseCondCardMark " 
 fi 

