BLEU SCORE: 0.12440234748126781

TEST MSG: nodetool stopdaemon errors out
GENERATED MSG: Add ' nodetool statusgossip '

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index dc7bcab . . a962994 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 0 . 10 <nl> + * nodetool stopdaemon errors out ( CASSANDRA - 12646 ) <nl> * Split materialized view mutations on build to prevent OOM ( CASSANDRA - 12268 ) <nl> * mx4j does not work in 3 . 0 . 8 ( CASSANDRA - 12274 ) <nl> * Abort cqlsh copy - from in case of no answer after prolonged period of time ( CASSANDRA - 12740 ) <nl> diff - - git a / src / java / org / apache / cassandra / tools / NodeProbe . java b / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> index 6a95e99 . . 394ce6e 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> + + + b / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> @ @ - 25 , 6 + 25 , 7 @ @ import java . lang . management . MemoryUsage ; <nl> import java . lang . management . RuntimeMXBean ; <nl> import java . net . InetAddress ; <nl> import java . net . UnknownHostException ; <nl> + import java . rmi . ConnectException ; <nl> import java . rmi . server . RMIClientSocketFactory ; <nl> import java . rmi . server . RMISocketFactory ; <nl> import java . util . AbstractMap ; <nl> @ @ - 224 , 7 + 225 , 7 @ @ public class NodeProbe implements AutoCloseable <nl> mbeanServerConn , ManagementFactory . RUNTIME _ MXBEAN _ NAME , RuntimeMXBean . class ) ; <nl> } <nl> <nl> - private RMIClientSocketFactory getRMIClientSocketFactory ( ) throws IOException <nl> + private RMIClientSocketFactory getRMIClientSocketFactory ( ) <nl> { <nl> if ( Boolean . parseBoolean ( System . getProperty ( " ssl . enable " ) ) ) <nl> return new SslRMIClientSocketFactory ( ) ; <nl> @ @ - 234 , 7 + 235 , 15 @ @ public class NodeProbe implements AutoCloseable <nl> <nl> public void close ( ) throws IOException <nl> { <nl> - jmxc . close ( ) ; <nl> + try <nl> + { <nl> + jmxc . close ( ) ; <nl> + } <nl> + catch ( ConnectException e ) <nl> + { <nl> + / / result of ' stopdaemon ' command - i . e . if close ( ) call fails , the daemon is shutdown <nl> + System . out . println ( " Cassandra has shutdown . " ) ; <nl> + } <nl> } <nl> <nl> public int forceKeyspaceCleanup ( int jobs , String keyspaceName , String . . . tables ) throws IOException , ExecutionException , InterruptedException <nl> diff - - git a / src / java / org / apache / cassandra / tools / nodetool / StopDaemon . java b / src / java / org / apache / cassandra / tools / nodetool / StopDaemon . java <nl> index a0af89f . . 79a499a 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / nodetool / StopDaemon . java <nl> + + + b / src / java / org / apache / cassandra / tools / nodetool / StopDaemon . java <nl> @ @ - 37 , 6 + 37 , 5 @ @ public class StopDaemon extends NodeToolCmd <nl> JVMStabilityInspector . inspectThrowable ( e ) ; <nl> / / ignored <nl> } <nl> - System . out . println ( " Cassandra has shutdown . " ) ; <nl> } <nl> - } <nl> \ No newline at end of file <nl> + }
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index dc7bcab . . a962994 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 0 . 10 
 + * nodetool stopdaemon errors out ( CASSANDRA - 12646 ) 
 * Split materialized view mutations on build to prevent OOM ( CASSANDRA - 12268 ) 
 * mx4j does not work in 3 . 0 . 8 ( CASSANDRA - 12274 ) 
 * Abort cqlsh copy - from in case of no answer after prolonged period of time ( CASSANDRA - 12740 ) 
 diff - - git a / src / java / org / apache / cassandra / tools / NodeProbe . java b / src / java / org / apache / cassandra / tools / NodeProbe . java 
 index 6a95e99 . . 394ce6e 100644 
 - - - a / src / java / org / apache / cassandra / tools / NodeProbe . java 
 + + + b / src / java / org / apache / cassandra / tools / NodeProbe . java 
 @ @ - 25 , 6 + 25 , 7 @ @ import java . lang . management . MemoryUsage ; 
 import java . lang . management . RuntimeMXBean ; 
 import java . net . InetAddress ; 
 import java . net . UnknownHostException ; 
 + import java . rmi . ConnectException ; 
 import java . rmi . server . RMIClientSocketFactory ; 
 import java . rmi . server . RMISocketFactory ; 
 import java . util . AbstractMap ; 
 @ @ - 224 , 7 + 225 , 7 @ @ public class NodeProbe implements AutoCloseable 
 mbeanServerConn , ManagementFactory . RUNTIME _ MXBEAN _ NAME , RuntimeMXBean . class ) ; 
 } 
 
 - private RMIClientSocketFactory getRMIClientSocketFactory ( ) throws IOException 
 + private RMIClientSocketFactory getRMIClientSocketFactory ( ) 
 { 
 if ( Boolean . parseBoolean ( System . getProperty ( " ssl . enable " ) ) ) 
 return new SslRMIClientSocketFactory ( ) ; 
 @ @ - 234 , 7 + 235 , 15 @ @ public class NodeProbe implements AutoCloseable 
 
 public void close ( ) throws IOException 
 { 
 - jmxc . close ( ) ; 
 + try 
 + { 
 + jmxc . close ( ) ; 
 + } 
 + catch ( ConnectException e ) 
 + { 
 + / / result of ' stopdaemon ' command - i . e . if close ( ) call fails , the daemon is shutdown 
 + System . out . println ( " Cassandra has shutdown . " ) ; 
 + } 
 } 
 
 public int forceKeyspaceCleanup ( int jobs , String keyspaceName , String . . . tables ) throws IOException , ExecutionException , InterruptedException 
 diff - - git a / src / java / org / apache / cassandra / tools / nodetool / StopDaemon . java b / src / java / org / apache / cassandra / tools / nodetool / StopDaemon . java 
 index a0af89f . . 79a499a 100644 
 - - - a / src / java / org / apache / cassandra / tools / nodetool / StopDaemon . java 
 + + + b / src / java / org / apache / cassandra / tools / nodetool / StopDaemon . java 
 @ @ - 37 , 6 + 37 , 5 @ @ public class StopDaemon extends NodeToolCmd 
 JVMStabilityInspector . inspectThrowable ( e ) ; 
 / / ignored 
 } 
 - System . out . println ( " Cassandra has shutdown . " ) ; 
 } 
 - } 
 \ No newline at end of file 
 + }

NEAREST DIFF:
ELIMINATEDSENTENCE
