BLEU SCORE: 0.01222796968620182

TEST MSG: Change token validation of Murmur3Partitioner to display a helpful error message if the token is invalid
GENERATED MSG: Hex - encode non - String keys in OPP

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 5c6bdb5 . . f30210a 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 6 <nl> + * More user friendly error when providing an invalid token to nodetool ( CASSANDRA - 9348 ) <nl> * Add static column support to SASI index ( CASSANDRA - 11183 ) <nl> * Support EQ / PREFIX queries in SASI CONTAINS mode without tokenization ( CASSANDRA - 11434 ) <nl> * Support LIKE operator in prepared statements ( CASSANDRA - 11456 ) <nl> diff - - git a / src / java / org / apache / cassandra / dht / Murmur3Partitioner . java b / src / java / org / apache / cassandra / dht / Murmur3Partitioner . java <nl> index f9f6113 . . 9ed0cca 100644 <nl> - - - a / src / java / org / apache / cassandra / dht / Murmur3Partitioner . java <nl> + + + b / src / java / org / apache / cassandra / dht / Murmur3Partitioner . java <nl> @ @ - 278 , 7 + 278 , 7 @ @ public class Murmur3Partitioner implements IPartitioner <nl> { <nl> try <nl> { <nl> - Long . valueOf ( token ) ; <nl> + fromString ( token ) ; <nl> } <nl> catch ( NumberFormatException e ) <nl> {
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index a9cb47c . . 30b70a7 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 11 , 6 + 11 , 7 @ @ Merged from 1 . 2 : <nl> * ( Hadoop ) fix quoting in CqlPagingRecordReader and CqlRecordWriter <nl> ( CASSANDRA - 5824 ) <nl> * update default LCS sstable size to 160MB ( CASSANDRA - 5727 ) <nl> + * Hex - encode non - String keys in OPP ( CASSANDRA - 5793 ) <nl> * Fix reading DeletionTime from 1 . 1 - format sstables ( CASSANDRA - 5814 ) <nl> * cqlsh : add collections support to COPY ( CASSANDRA - 5698 ) <nl> * retry important messages for any IOException ( CASSANDRA - 5804 ) <nl> diff - - git a / src / java / org / apache / cassandra / dht / OrderPreservingPartitioner . java b / src / java / org / apache / cassandra / dht / OrderPreservingPartitioner . java <nl> index b37c924 . . 4c5a7d4 100644 <nl> - - - a / src / java / org / apache / cassandra / dht / OrderPreservingPartitioner . java <nl> + + + b / src / java / org / apache / cassandra / dht / OrderPreservingPartitioner . java <nl> @ @ - 164 , 7 + 164 , 7 @ @ public class OrderPreservingPartitioner extends AbstractPartitioner < StringToken > <nl> } <nl> catch ( CharacterCodingException e ) <nl> { <nl> - throw new RuntimeException ( " The provided key was not UTF8 encoded . " , e ) ; <nl> + skey = ByteBufferUtil . bytesToHex ( key ) ; <nl> } <nl> return new StringToken ( skey ) ; <nl> }

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 5c6bdb5 . . f30210a 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 6 
 + * More user friendly error when providing an invalid token to nodetool ( CASSANDRA - 9348 ) 
 * Add static column support to SASI index ( CASSANDRA - 11183 ) 
 * Support EQ / PREFIX queries in SASI CONTAINS mode without tokenization ( CASSANDRA - 11434 ) 
 * Support LIKE operator in prepared statements ( CASSANDRA - 11456 ) 
 diff - - git a / src / java / org / apache / cassandra / dht / Murmur3Partitioner . java b / src / java / org / apache / cassandra / dht / Murmur3Partitioner . java 
 index f9f6113 . . 9ed0cca 100644 
 - - - a / src / java / org / apache / cassandra / dht / Murmur3Partitioner . java 
 + + + b / src / java / org / apache / cassandra / dht / Murmur3Partitioner . java 
 @ @ - 278 , 7 + 278 , 7 @ @ public class Murmur3Partitioner implements IPartitioner 
 { 
 try 
 { 
 - Long . valueOf ( token ) ; 
 + fromString ( token ) ; 
 } 
 catch ( NumberFormatException e ) 
 {

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index a9cb47c . . 30b70a7 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 11 , 6 + 11 , 7 @ @ Merged from 1 . 2 : 
 * ( Hadoop ) fix quoting in CqlPagingRecordReader and CqlRecordWriter 
 ( CASSANDRA - 5824 ) 
 * update default LCS sstable size to 160MB ( CASSANDRA - 5727 ) 
 + * Hex - encode non - String keys in OPP ( CASSANDRA - 5793 ) 
 * Fix reading DeletionTime from 1 . 1 - format sstables ( CASSANDRA - 5814 ) 
 * cqlsh : add collections support to COPY ( CASSANDRA - 5698 ) 
 * retry important messages for any IOException ( CASSANDRA - 5804 ) 
 diff - - git a / src / java / org / apache / cassandra / dht / OrderPreservingPartitioner . java b / src / java / org / apache / cassandra / dht / OrderPreservingPartitioner . java 
 index b37c924 . . 4c5a7d4 100644 
 - - - a / src / java / org / apache / cassandra / dht / OrderPreservingPartitioner . java 
 + + + b / src / java / org / apache / cassandra / dht / OrderPreservingPartitioner . java 
 @ @ - 164 , 7 + 164 , 7 @ @ public class OrderPreservingPartitioner extends AbstractPartitioner < StringToken > 
 } 
 catch ( CharacterCodingException e ) 
 { 
 - throw new RuntimeException ( " The provided key was not UTF8 encoded . " , e ) ; 
 + skey = ByteBufferUtil . bytesToHex ( key ) ; 
 } 
 return new StringToken ( skey ) ; 
 }
