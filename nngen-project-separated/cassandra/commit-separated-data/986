BLEU SCORE: 0.06567274736060397

TEST MSG: Fix sstableloader fail when using materialized view
GENERATED MSG: Fix CFMetata . getMergeShardChance returning readRepairChance

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 0c721e8 . . 520e66e 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 0 . 5 <nl> + * Fix sstableloader fail when using materialized view ( CASSANDRA - 11275 ) <nl> Merged from 2 . 2 : <nl> * Only log yaml config once , at startup ( CASSANDRA - 11217 ) <nl> * Reference leak with parallel repairs on the same table ( CASSANDRA - 11215 ) <nl> diff - - git a / src / java / org / apache / cassandra / utils / NativeSSTableLoaderClient . java b / src / java / org / apache / cassandra / utils / NativeSSTableLoaderClient . java <nl> index 225e453 . . 5bcbcf7 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / NativeSSTableLoaderClient . java <nl> + + + b / src / java / org / apache / cassandra / utils / NativeSSTableLoaderClient . java <nl> @ @ - 169 , 12 + 169 , 12 @ @ public class NativeSSTableLoaderClient extends SSTableLoader . Client <nl> Types types ) <nl> { <nl> UUID id = row . getUUID ( " id " ) ; <nl> - Set < CFMetaData . Flag > flags = CFMetaData . flagsFromStrings ( row . getSet ( " flags " , String . class ) ) ; <nl> + Set < CFMetaData . Flag > flags = isView ? Collections . emptySet ( ) : CFMetaData . flagsFromStrings ( row . getSet ( " flags " , String . class ) ) ; <nl> <nl> boolean isSuper = flags . contains ( CFMetaData . Flag . SUPER ) ; <nl> boolean isCounter = flags . contains ( CFMetaData . Flag . COUNTER ) ; <nl> boolean isDense = flags . contains ( CFMetaData . Flag . DENSE ) ; <nl> - boolean isCompound = flags . contains ( CFMetaData . Flag . COMPOUND ) ; <nl> + boolean isCompound = isView | | flags . contains ( CFMetaData . Flag . COMPOUND ) ; <nl> <nl> String columnsQuery = String . format ( " SELECT * FROM % s . % s WHERE keyspace _ name = ? AND table _ name = ? " , <nl> SchemaKeyspace . NAME ,
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 59b99e0 . . 63f2f58 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 83 , 6 + 83 , 7 @ @ <nl> * CustomTThreadPoolServer to log TTransportException at DEBUG level <nl> ( CASSANDRA - 3142 ) <nl> * Randomize choice of first replica for counter increment ( CASSANDRA - 2890 ) <nl> + * Fix using read _ repair _ chance instead of merge _ shard _ change ( CASSANDRA - 3202 ) <nl> <nl> <nl> 0 . 8 . 5 <nl> diff - - git a / src / java / org / apache / cassandra / config / CFMetaData . java b / src / java / org / apache / cassandra / config / CFMetaData . java <nl> index abc57db . . 3d2cd5d 100644 <nl> - - - a / src / java / org / apache / cassandra / config / CFMetaData . java <nl> + + + b / src / java / org / apache / cassandra / config / CFMetaData . java <nl> @ @ - 444 , 7 + 444 , 7 @ @ public final class CFMetaData <nl> <nl> public double getMergeShardsChance ( ) <nl> { <nl> - return readRepairChance ; <nl> + return mergeShardsChance ; <nl> } <nl> <nl> public boolean getReplicateOnWrite ( )

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 0c721e8 . . 520e66e 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 0 . 5 
 + * Fix sstableloader fail when using materialized view ( CASSANDRA - 11275 ) 
 Merged from 2 . 2 : 
 * Only log yaml config once , at startup ( CASSANDRA - 11217 ) 
 * Reference leak with parallel repairs on the same table ( CASSANDRA - 11215 ) 
 diff - - git a / src / java / org / apache / cassandra / utils / NativeSSTableLoaderClient . java b / src / java / org / apache / cassandra / utils / NativeSSTableLoaderClient . java 
 index 225e453 . . 5bcbcf7 100644 
 - - - a / src / java / org / apache / cassandra / utils / NativeSSTableLoaderClient . java 
 + + + b / src / java / org / apache / cassandra / utils / NativeSSTableLoaderClient . java 
 @ @ - 169 , 12 + 169 , 12 @ @ public class NativeSSTableLoaderClient extends SSTableLoader . Client 
 Types types ) 
 { 
 UUID id = row . getUUID ( " id " ) ; 
 - Set < CFMetaData . Flag > flags = CFMetaData . flagsFromStrings ( row . getSet ( " flags " , String . class ) ) ; 
 + Set < CFMetaData . Flag > flags = isView ? Collections . emptySet ( ) : CFMetaData . flagsFromStrings ( row . getSet ( " flags " , String . class ) ) ; 
 
 boolean isSuper = flags . contains ( CFMetaData . Flag . SUPER ) ; 
 boolean isCounter = flags . contains ( CFMetaData . Flag . COUNTER ) ; 
 boolean isDense = flags . contains ( CFMetaData . Flag . DENSE ) ; 
 - boolean isCompound = flags . contains ( CFMetaData . Flag . COMPOUND ) ; 
 + boolean isCompound = isView | | flags . contains ( CFMetaData . Flag . COMPOUND ) ; 
 
 String columnsQuery = String . format ( " SELECT * FROM % s . % s WHERE keyspace _ name = ? AND table _ name = ? " , 
 SchemaKeyspace . NAME ,

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 59b99e0 . . 63f2f58 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 83 , 6 + 83 , 7 @ @ 
 * CustomTThreadPoolServer to log TTransportException at DEBUG level 
 ( CASSANDRA - 3142 ) 
 * Randomize choice of first replica for counter increment ( CASSANDRA - 2890 ) 
 + * Fix using read _ repair _ chance instead of merge _ shard _ change ( CASSANDRA - 3202 ) 
 
 
 0 . 8 . 5 
 diff - - git a / src / java / org / apache / cassandra / config / CFMetaData . java b / src / java / org / apache / cassandra / config / CFMetaData . java 
 index abc57db . . 3d2cd5d 100644 
 - - - a / src / java / org / apache / cassandra / config / CFMetaData . java 
 + + + b / src / java / org / apache / cassandra / config / CFMetaData . java 
 @ @ - 444 , 7 + 444 , 7 @ @ public final class CFMetaData 
 
 public double getMergeShardsChance ( ) 
 { 
 - return readRepairChance ; 
 + return mergeShardsChance ; 
 } 
 
 public boolean getReplicateOnWrite ( )
