BLEU SCORE: 0.02931251013275449

TEST MSG: Fix ClassCastException processing expired messages
GENERATED MSG: Don ' t resubmit counter mutation runnables internally

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 9fd3b85 . . aa20d84 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 1 . 0 <nl> + * Fix ClassCastException processing expired messages ( CASSANDRA - 7496 ) <nl> * Fix prepared marker for collections inside UDT ( CASSANDRA - 7472 ) <nl> * Remove left - over populate _ io _ cache _ on _ flush and replicate _ on _ write <nl> uses ( CASSANDRA - 7493 ) <nl> diff - - git a / conf / README . txt b / conf / README . txt <nl> index 8e9e95a . . e44d4a3 100644 <nl> - - - a / conf / README . txt <nl> + + + b / conf / README . txt <nl> @ @ - 9 , 3 + 9 , 5 @ @ Optional configuration files <nl> = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> <nl> cassandra - topology . properties : used by PropertyFileSnitch <nl> + <nl> + <nl> diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java <nl> index 9b356ae . . 9da247d 100644 <nl> - - - a / src / java / org / apache / cassandra / net / MessagingService . java <nl> + + + b / src / java / org / apache / cassandra / net / MessagingService . java <nl> @ @ - 349 , 19 + 349 , 19 @ @ public final class MessagingService implements MessagingServiceMBean <nl> } ) ; <nl> } <nl> <nl> - Mutation mutation = ( Mutation ) ( ( WriteCallbackInfo ) expiredCallbackInfo ) . sentMessage . payload ; <nl> - <nl> - try <nl> + if ( expiredCallbackInfo . shouldHint ( ) ) <nl> { <nl> - if ( expiredCallbackInfo . shouldHint ( ) ) <nl> + Mutation mutation = ( Mutation ) ( ( WriteCallbackInfo ) expiredCallbackInfo ) . sentMessage . payload ; <nl> + <nl> + try <nl> { <nl> return StorageProxy . submitHint ( mutation , expiredCallbackInfo . target , null ) ; <nl> } <nl> - } <nl> - finally <nl> - { <nl> - / / We serialized a hint so we don ' t need this mutation anymore <nl> - mutation . release ( ) ; <nl> + finally <nl> + { <nl> + / / We serialized a hint so we don ' t need this mutation anymore <nl> + mutation . release ( ) ; <nl> + } <nl> } <nl> <nl> return null ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 9fd3b85 . . aa20d84 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 1 . 0 
 + * Fix ClassCastException processing expired messages ( CASSANDRA - 7496 ) 
 * Fix prepared marker for collections inside UDT ( CASSANDRA - 7472 ) 
 * Remove left - over populate _ io _ cache _ on _ flush and replicate _ on _ write 
 uses ( CASSANDRA - 7493 ) 
 diff - - git a / conf / README . txt b / conf / README . txt 
 index 8e9e95a . . e44d4a3 100644 
 - - - a / conf / README . txt 
 + + + b / conf / README . txt 
 @ @ - 9 , 3 + 9 , 5 @ @ Optional configuration files 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 cassandra - topology . properties : used by PropertyFileSnitch 
 + 
 + 
 diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java 
 index 9b356ae . . 9da247d 100644 
 - - - a / src / java / org / apache / cassandra / net / MessagingService . java 
 + + + b / src / java / org / apache / cassandra / net / MessagingService . java 
 @ @ - 349 , 19 + 349 , 19 @ @ public final class MessagingService implements MessagingServiceMBean 
 } ) ; 
 } 
 
 - Mutation mutation = ( Mutation ) ( ( WriteCallbackInfo ) expiredCallbackInfo ) . sentMessage . payload ; 
 - 
 - try 
 + if ( expiredCallbackInfo . shouldHint ( ) ) 
 { 
 - if ( expiredCallbackInfo . shouldHint ( ) ) 
 + Mutation mutation = ( Mutation ) ( ( WriteCallbackInfo ) expiredCallbackInfo ) . sentMessage . payload ; 
 + 
 + try 
 { 
 return StorageProxy . submitHint ( mutation , expiredCallbackInfo . target , null ) ; 
 } 
 - } 
 - finally 
 - { 
 - / / We serialized a hint so we don ' t need this mutation anymore 
 - mutation . release ( ) ; 
 + finally 
 + { 
 + / / We serialized a hint so we don ' t need this mutation anymore 
 + mutation . release ( ) ; 
 + } 
 } 
 
 return null ;

NEAREST DIFF:
ELIMINATEDSENTENCE
