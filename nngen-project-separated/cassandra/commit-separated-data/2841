BLEU SCORE: 0.026279617104084448

TEST MSG: Verify that the keyspace exists in describeRing and print nicer error message in BulkLoader .
GENERATED MSG: Allow specifying custom secondary index options in CQL3

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index cca7b00 . . 102e0d8 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 1178 , 6 + 1178 , 9 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> <nl> private List < TokenRange > describeRing ( String keyspace , boolean includeOnlyLocalDC ) throws InvalidRequestException <nl> { <nl> + if ( ! Schema . instance . getKeyspaces ( ) . contains ( keyspace ) ) <nl> + throw new InvalidRequestException ( " No such keyspace : " + keyspace ) ; <nl> + <nl> if ( keyspace = = null | | Keyspace . open ( keyspace ) . getReplicationStrategy ( ) instanceof LocalStrategy ) <nl> throw new InvalidRequestException ( " There is no ring for the keyspace : " + keyspace ) ; <nl> <nl> diff - - git a / src / java / org / apache / cassandra / tools / BulkLoader . java b / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> index 15c8df8 . . 4756bd3 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> + + + b / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> @ @ - 76 , 7 + 76 , 22 @ @ public class BulkLoader <nl> OutputHandler handler = new OutputHandler . SystemOutput ( options . verbose , options . debug ) ; <nl> SSTableLoader loader = new SSTableLoader ( options . directory , new ExternalClient ( options . hosts , options . rpcPort , options . user , options . passwd , options . transportFactory ) , handler ) ; <nl> DatabaseDescriptor . setStreamThroughputOutboundMegabitsPerSec ( options . throttle ) ; <nl> - StreamResultFuture future = loader . stream ( options . ignores ) ; <nl> + StreamResultFuture future = null ; <nl> + try <nl> + { <nl> + future = loader . stream ( options . ignores ) ; <nl> + } <nl> + catch ( Exception e ) <nl> + { <nl> + System . err . println ( e . getMessage ( ) ) ; <nl> + if ( e . getCause ( ) ! = null ) <nl> + System . err . println ( e . getCause ( ) ) ; <nl> + if ( options . debug ) <nl> + e . printStackTrace ( System . err ) ; <nl> + else <nl> + System . err . println ( " Run with - - debug to get full stack trace or - - help to get help . " ) ; <nl> + System . exit ( 1 ) ; <nl> + } <nl> future . addEventListener ( new ProgressIndicator ( ) ) ; <nl> try <nl> {
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index cca7b00 . . 102e0d8 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 1178 , 6 + 1178 , 9 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 
 private List < TokenRange > describeRing ( String keyspace , boolean includeOnlyLocalDC ) throws InvalidRequestException 
 { 
 + if ( ! Schema . instance . getKeyspaces ( ) . contains ( keyspace ) ) 
 + throw new InvalidRequestException ( " No such keyspace : " + keyspace ) ; 
 + 
 if ( keyspace = = null | | Keyspace . open ( keyspace ) . getReplicationStrategy ( ) instanceof LocalStrategy ) 
 throw new InvalidRequestException ( " There is no ring for the keyspace : " + keyspace ) ; 
 
 diff - - git a / src / java / org / apache / cassandra / tools / BulkLoader . java b / src / java / org / apache / cassandra / tools / BulkLoader . java 
 index 15c8df8 . . 4756bd3 100644 
 - - - a / src / java / org / apache / cassandra / tools / BulkLoader . java 
 + + + b / src / java / org / apache / cassandra / tools / BulkLoader . java 
 @ @ - 76 , 7 + 76 , 22 @ @ public class BulkLoader 
 OutputHandler handler = new OutputHandler . SystemOutput ( options . verbose , options . debug ) ; 
 SSTableLoader loader = new SSTableLoader ( options . directory , new ExternalClient ( options . hosts , options . rpcPort , options . user , options . passwd , options . transportFactory ) , handler ) ; 
 DatabaseDescriptor . setStreamThroughputOutboundMegabitsPerSec ( options . throttle ) ; 
 - StreamResultFuture future = loader . stream ( options . ignores ) ; 
 + StreamResultFuture future = null ; 
 + try 
 + { 
 + future = loader . stream ( options . ignores ) ; 
 + } 
 + catch ( Exception e ) 
 + { 
 + System . err . println ( e . getMessage ( ) ) ; 
 + if ( e . getCause ( ) ! = null ) 
 + System . err . println ( e . getCause ( ) ) ; 
 + if ( options . debug ) 
 + e . printStackTrace ( System . err ) ; 
 + else 
 + System . err . println ( " Run with - - debug to get full stack trace or - - help to get help . " ) ; 
 + System . exit ( 1 ) ; 
 + } 
 future . addEventListener ( new ProgressIndicator ( ) ) ; 
 try 
 {

NEAREST DIFF:
ELIMINATEDSENTENCE
