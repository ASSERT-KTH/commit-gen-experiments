BLEU SCORE: 0.03283637368030199

TEST MSG: Make CQLMetricsTest tests independent of each other
GENERATED MSG: Metrics for prepared stmt usage and eviction

TEST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / metrics / CQLMetricsTest . java b / test / unit / org / apache / cassandra / metrics / CQLMetricsTest . java <nl> index 2864b6e . . 099a530 100644 <nl> - - - a / test / unit / org / apache / cassandra / metrics / CQLMetricsTest . java <nl> + + + b / test / unit / org / apache / cassandra / metrics / CQLMetricsTest . java <nl> @ @ - 44 , 7 + 44 , 6 @ @ public class CQLMetricsTest extends SchemaLoader <nl> <nl> private static Cluster cluster ; <nl> private static Session session ; <nl> - private static PreparedStatement metricsStatement ; <nl> <nl> @ BeforeClass ( ) <nl> public static void setup ( ) throws ConfigurationException , IOException <nl> @ @ - 64 , 15 + 63 , 16 @ @ public class CQLMetricsTest extends SchemaLoader <nl> @ Test <nl> public void testPreparedStatementsCount ( ) <nl> { <nl> - assertEquals ( 0 , ( int ) QueryProcessor . metrics . preparedStatementsCount . getValue ( ) ) ; <nl> - metricsStatement = session . prepare ( " INSERT INTO junit . metricstest ( id , val ) VALUES ( ? , ? ) " ) ; <nl> - assertEquals ( 1 , ( int ) QueryProcessor . metrics . preparedStatementsCount . getValue ( ) ) ; <nl> + int n = ( int ) QueryProcessor . metrics . preparedStatementsCount . getValue ( ) ; <nl> + session . prepare ( " SELECT * FROM junit . metricstest WHERE id = ? " ) ; <nl> + assertEquals ( n + 1 , ( int ) QueryProcessor . metrics . preparedStatementsCount . getValue ( ) ) ; <nl> } <nl> <nl> @ Test <nl> public void testRegularStatementsExecuted ( ) <nl> { <nl> clearMetrics ( ) ; <nl> + PreparedStatement metricsStatement = session . prepare ( " INSERT INTO junit . metricstest ( id , val ) VALUES ( ? , ? ) " ) ; <nl> <nl> assertEquals ( 0 , QueryProcessor . metrics . preparedStatementsExecuted . getCount ( ) ) ; <nl> assertEquals ( 0 , QueryProcessor . metrics . regularStatementsExecuted . getCount ( ) ) ; <nl> @ @ - 88 , 6 + 88 , 7 @ @ public class CQLMetricsTest extends SchemaLoader <nl> public void testPreparedStatementsExecuted ( ) <nl> { <nl> clearMetrics ( ) ; <nl> + PreparedStatement metricsStatement = session . prepare ( " INSERT INTO junit . metricstest ( id , val ) VALUES ( ? , ? ) " ) ; <nl> <nl> assertEquals ( 0 , QueryProcessor . metrics . preparedStatementsExecuted . getCount ( ) ) ; <nl> assertEquals ( 0 , QueryProcessor . metrics . regularStatementsExecuted . getCount ( ) ) ; <nl> @ @ - 103 , 6 + 104 , 7 @ @ public class CQLMetricsTest extends SchemaLoader <nl> public void testPreparedStatementsRatio ( ) <nl> { <nl> clearMetrics ( ) ; <nl> + PreparedStatement metricsStatement = session . prepare ( " INSERT INTO junit . metricstest ( id , val ) VALUES ( ? , ? ) " ) ; <nl> <nl> assertEquals ( Double . NaN , QueryProcessor . metrics . preparedStatementsRatio . getValue ( ) ) ; <nl>
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / test / unit / org / apache / cassandra / metrics / CQLMetricsTest . java b / test / unit / org / apache / cassandra / metrics / CQLMetricsTest . java 
 index 2864b6e . . 099a530 100644 
 - - - a / test / unit / org / apache / cassandra / metrics / CQLMetricsTest . java 
 + + + b / test / unit / org / apache / cassandra / metrics / CQLMetricsTest . java 
 @ @ - 44 , 7 + 44 , 6 @ @ public class CQLMetricsTest extends SchemaLoader 
 
 private static Cluster cluster ; 
 private static Session session ; 
 - private static PreparedStatement metricsStatement ; 
 
 @ BeforeClass ( ) 
 public static void setup ( ) throws ConfigurationException , IOException 
 @ @ - 64 , 15 + 63 , 16 @ @ public class CQLMetricsTest extends SchemaLoader 
 @ Test 
 public void testPreparedStatementsCount ( ) 
 { 
 - assertEquals ( 0 , ( int ) QueryProcessor . metrics . preparedStatementsCount . getValue ( ) ) ; 
 - metricsStatement = session . prepare ( " INSERT INTO junit . metricstest ( id , val ) VALUES ( ? , ? ) " ) ; 
 - assertEquals ( 1 , ( int ) QueryProcessor . metrics . preparedStatementsCount . getValue ( ) ) ; 
 + int n = ( int ) QueryProcessor . metrics . preparedStatementsCount . getValue ( ) ; 
 + session . prepare ( " SELECT * FROM junit . metricstest WHERE id = ? " ) ; 
 + assertEquals ( n + 1 , ( int ) QueryProcessor . metrics . preparedStatementsCount . getValue ( ) ) ; 
 } 
 
 @ Test 
 public void testRegularStatementsExecuted ( ) 
 { 
 clearMetrics ( ) ; 
 + PreparedStatement metricsStatement = session . prepare ( " INSERT INTO junit . metricstest ( id , val ) VALUES ( ? , ? ) " ) ; 
 
 assertEquals ( 0 , QueryProcessor . metrics . preparedStatementsExecuted . getCount ( ) ) ; 
 assertEquals ( 0 , QueryProcessor . metrics . regularStatementsExecuted . getCount ( ) ) ; 
 @ @ - 88 , 6 + 88 , 7 @ @ public class CQLMetricsTest extends SchemaLoader 
 public void testPreparedStatementsExecuted ( ) 
 { 
 clearMetrics ( ) ; 
 + PreparedStatement metricsStatement = session . prepare ( " INSERT INTO junit . metricstest ( id , val ) VALUES ( ? , ? ) " ) ; 
 
 assertEquals ( 0 , QueryProcessor . metrics . preparedStatementsExecuted . getCount ( ) ) ; 
 assertEquals ( 0 , QueryProcessor . metrics . regularStatementsExecuted . getCount ( ) ) ; 
 @ @ - 103 , 6 + 104 , 7 @ @ public class CQLMetricsTest extends SchemaLoader 
 public void testPreparedStatementsRatio ( ) 
 { 
 clearMetrics ( ) ; 
 + PreparedStatement metricsStatement = session . prepare ( " INSERT INTO junit . metricstest ( id , val ) VALUES ( ? , ? ) " ) ; 
 
 assertEquals ( Double . NaN , QueryProcessor . metrics . preparedStatementsRatio . getValue ( ) ) ; 


NEAREST DIFF:
ELIMINATEDSENTENCE
