BLEU SCORE: 0.004773955310936996

TEST MSG: Add storage ports options to sstableloader
GENERATED MSG: Delete processed sstables in sstablesplit / sstableupgrade . Adds option to keep originals in sstableupgrade . Removes unused verbose option in sstablesplit .

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 31d5800 . . 84aba99 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 0 . 14 <nl> + * Add storage port options to sstableloader ( CASSANDRA - 13518 ) <nl> * Properly handle quoted index names in cqlsh DESCRIBE output ( CASSANDRA - 12847 ) <nl> * Avoid reading static row twice from old format sstables ( CASSANDRA - 13236 ) <nl> * Fix NPE in StorageService . excise ( ) ( CASSANDRA - 13163 ) <nl> diff - - git a / src / java / org / apache / cassandra / tools / BulkLoader . java b / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> index 9dba1b2 . . c1849f8 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> + + + b / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> @ @ - 53 , 6 + 53 , 8 @ @ public class BulkLoader <nl> private static final String IGNORE _ NODES _ OPTION = " ignore " ; <nl> private static final String INITIAL _ HOST _ ADDRESS _ OPTION = " nodes " ; <nl> private static final String NATIVE _ PORT _ OPTION = " port " ; <nl> + private static final String STORAGE _ PORT _ OPTION = " storage - port " ; <nl> + private static final String SSL _ STORAGE _ PORT _ OPTION = " ssl - storage - port " ; <nl> private static final String USER _ OPTION = " username " ; <nl> private static final String PASSWD _ OPTION = " password " ; <nl> private static final String AUTH _ PROVIDER _ OPTION = " auth - provider " ; <nl> @ @ - 313 , 7 + 315 , 7 @ @ public class BulkLoader <nl> public boolean debug ; <nl> public boolean verbose ; <nl> public boolean noProgress ; <nl> - public int nativePort = 9042 ; <nl> + public int nativePort ; <nl> public String user ; <nl> public String passwd ; <nl> public String authProviderName ; <nl> @ @ - 377 , 9 + 379 , 6 @ @ public class BulkLoader <nl> opts . verbose = cmd . hasOption ( VERBOSE _ OPTION ) ; <nl> opts . noProgress = cmd . hasOption ( NOPROGRESS _ OPTION ) ; <nl> <nl> - if ( cmd . hasOption ( NATIVE _ PORT _ OPTION ) ) <nl> - opts . nativePort = Integer . parseInt ( cmd . getOptionValue ( NATIVE _ PORT _ OPTION ) ) ; <nl> - <nl> if ( cmd . hasOption ( USER _ OPTION ) ) <nl> opts . user = cmd . getOptionValue ( USER _ OPTION ) ; <nl> <nl> @ @ - 450 , 8 + 449 , 19 @ @ public class BulkLoader <nl> config . stream _ throughput _ outbound _ megabits _ per _ sec = 0 ; <nl> config . inter _ dc _ stream _ throughput _ outbound _ megabits _ per _ sec = 0 ; <nl> } <nl> - opts . storagePort = config . storage _ port ; <nl> - opts . sslStoragePort = config . ssl _ storage _ port ; <nl> + <nl> + if ( cmd . hasOption ( NATIVE _ PORT _ OPTION ) ) <nl> + opts . nativePort = Integer . parseInt ( cmd . getOptionValue ( NATIVE _ PORT _ OPTION ) ) ; <nl> + else <nl> + opts . nativePort = config . native _ transport _ port ; <nl> + if ( cmd . hasOption ( STORAGE _ PORT _ OPTION ) ) <nl> + opts . storagePort = Integer . parseInt ( cmd . getOptionValue ( STORAGE _ PORT _ OPTION ) ) ; <nl> + else <nl> + opts . storagePort = config . storage _ port ; <nl> + if ( cmd . hasOption ( SSL _ STORAGE _ PORT _ OPTION ) ) <nl> + opts . sslStoragePort = Integer . parseInt ( cmd . getOptionValue ( SSL _ STORAGE _ PORT _ OPTION ) ) ; <nl> + else <nl> + opts . sslStoragePort = config . ssl _ storage _ port ; <nl> opts . throttle = config . stream _ throughput _ outbound _ megabits _ per _ sec ; <nl> opts . interDcThrottle = config . inter _ dc _ stream _ throughput _ outbound _ megabits _ per _ sec ; <nl> opts . clientEncOptions = config . client _ encryption _ options ; <nl> @ @ - 597 , 7 + 607 , 9 @ @ public class BulkLoader <nl> options . addOption ( null , NOPROGRESS _ OPTION , " don ' t display progress " ) ; <nl> options . addOption ( " i " , IGNORE _ NODES _ OPTION , " NODES " , " don ' t stream to this ( comma separated ) list of nodes " ) ; <nl> options . addOption ( " d " , INITIAL _ HOST _ ADDRESS _ OPTION , " initial hosts " , " Required . try to connect to these hosts ( comma separated ) initially for ring information " ) ; <nl> - options . addOption ( " p " , NATIVE _ PORT _ OPTION , " rpc port " , " port used for native connection ( default 9042 ) " ) ; <nl> + options . addOption ( " p " , NATIVE _ PORT _ OPTION , " native transport port " , " port used for native connection ( default 9042 ) " ) ; <nl> + options . addOption ( " sp " , STORAGE _ PORT _ OPTION , " storage port " , " port used for internode communication ( default 7000 ) " ) ; <nl> + options . addOption ( " ssp " , SSL _ STORAGE _ PORT _ OPTION , " ssl storage port " , " port used for TLS internode communication ( default 7001 ) " ) ; <nl> options . addOption ( " t " , THROTTLE _ MBITS , " throttle " , " throttle speed in Mbits ( default unlimited ) " ) ; <nl> options . addOption ( " idct " , INTER _ DC _ THROTTLE _ MBITS , " inter - dc - throttle " , " inter - datacenter throttle speed in Mbits ( default unlimited ) " ) ; <nl> options . addOption ( " u " , USER _ OPTION , " username " , " username for cassandra authentication " ) ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 31d5800 . . 84aba99 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 0 . 14 
 + * Add storage port options to sstableloader ( CASSANDRA - 13518 ) 
 * Properly handle quoted index names in cqlsh DESCRIBE output ( CASSANDRA - 12847 ) 
 * Avoid reading static row twice from old format sstables ( CASSANDRA - 13236 ) 
 * Fix NPE in StorageService . excise ( ) ( CASSANDRA - 13163 ) 
 diff - - git a / src / java / org / apache / cassandra / tools / BulkLoader . java b / src / java / org / apache / cassandra / tools / BulkLoader . java 
 index 9dba1b2 . . c1849f8 100644 
 - - - a / src / java / org / apache / cassandra / tools / BulkLoader . java 
 + + + b / src / java / org / apache / cassandra / tools / BulkLoader . java 
 @ @ - 53 , 6 + 53 , 8 @ @ public class BulkLoader 
 private static final String IGNORE _ NODES _ OPTION = " ignore " ; 
 private static final String INITIAL _ HOST _ ADDRESS _ OPTION = " nodes " ; 
 private static final String NATIVE _ PORT _ OPTION = " port " ; 
 + private static final String STORAGE _ PORT _ OPTION = " storage - port " ; 
 + private static final String SSL _ STORAGE _ PORT _ OPTION = " ssl - storage - port " ; 
 private static final String USER _ OPTION = " username " ; 
 private static final String PASSWD _ OPTION = " password " ; 
 private static final String AUTH _ PROVIDER _ OPTION = " auth - provider " ; 
 @ @ - 313 , 7 + 315 , 7 @ @ public class BulkLoader 
 public boolean debug ; 
 public boolean verbose ; 
 public boolean noProgress ; 
 - public int nativePort = 9042 ; 
 + public int nativePort ; 
 public String user ; 
 public String passwd ; 
 public String authProviderName ; 
 @ @ - 377 , 9 + 379 , 6 @ @ public class BulkLoader 
 opts . verbose = cmd . hasOption ( VERBOSE _ OPTION ) ; 
 opts . noProgress = cmd . hasOption ( NOPROGRESS _ OPTION ) ; 
 
 - if ( cmd . hasOption ( NATIVE _ PORT _ OPTION ) ) 
 - opts . nativePort = Integer . parseInt ( cmd . getOptionValue ( NATIVE _ PORT _ OPTION ) ) ; 
 - 
 if ( cmd . hasOption ( USER _ OPTION ) ) 
 opts . user = cmd . getOptionValue ( USER _ OPTION ) ; 
 
 @ @ - 450 , 8 + 449 , 19 @ @ public class BulkLoader 
 config . stream _ throughput _ outbound _ megabits _ per _ sec = 0 ; 
 config . inter _ dc _ stream _ throughput _ outbound _ megabits _ per _ sec = 0 ; 
 } 
 - opts . storagePort = config . storage _ port ; 
 - opts . sslStoragePort = config . ssl _ storage _ port ; 
 + 
 + if ( cmd . hasOption ( NATIVE _ PORT _ OPTION ) ) 
 + opts . nativePort = Integer . parseInt ( cmd . getOptionValue ( NATIVE _ PORT _ OPTION ) ) ; 
 + else 
 + opts . nativePort = config . native _ transport _ port ; 
 + if ( cmd . hasOption ( STORAGE _ PORT _ OPTION ) ) 
 + opts . storagePort = Integer . parseInt ( cmd . getOptionValue ( STORAGE _ PORT _ OPTION ) ) ; 
 + else 
 + opts . storagePort = config . storage _ port ; 
 + if ( cmd . hasOption ( SSL _ STORAGE _ PORT _ OPTION ) ) 
 + opts . sslStoragePort = Integer . parseInt ( cmd . getOptionValue ( SSL _ STORAGE _ PORT _ OPTION ) ) ; 
 + else 
 + opts . sslStoragePort = config . ssl _ storage _ port ; 
 opts . throttle = config . stream _ throughput _ outbound _ megabits _ per _ sec ; 
 opts . interDcThrottle = config . inter _ dc _ stream _ throughput _ outbound _ megabits _ per _ sec ; 
 opts . clientEncOptions = config . client _ encryption _ options ; 
 @ @ - 597 , 7 + 607 , 9 @ @ public class BulkLoader 
 options . addOption ( null , NOPROGRESS _ OPTION , " don ' t display progress " ) ; 
 options . addOption ( " i " , IGNORE _ NODES _ OPTION , " NODES " , " don ' t stream to this ( comma separated ) list of nodes " ) ; 
 options . addOption ( " d " , INITIAL _ HOST _ ADDRESS _ OPTION , " initial hosts " , " Required . try to connect to these hosts ( comma separated ) initially for ring information " ) ; 
 - options . addOption ( " p " , NATIVE _ PORT _ OPTION , " rpc port " , " port used for native connection ( default 9042 ) " ) ; 
 + options . addOption ( " p " , NATIVE _ PORT _ OPTION , " native transport port " , " port used for native connection ( default 9042 ) " ) ; 
 + options . addOption ( " sp " , STORAGE _ PORT _ OPTION , " storage port " , " port used for internode communication ( default 7000 ) " ) ; 
 + options . addOption ( " ssp " , SSL _ STORAGE _ PORT _ OPTION , " ssl storage port " , " port used for TLS internode communication ( default 7001 ) " ) ; 
 options . addOption ( " t " , THROTTLE _ MBITS , " throttle " , " throttle speed in Mbits ( default unlimited ) " ) ; 
 options . addOption ( " idct " , INTER _ DC _ THROTTLE _ MBITS , " inter - dc - throttle " , " inter - datacenter throttle speed in Mbits ( default unlimited ) " ) ; 
 options . addOption ( " u " , USER _ OPTION , " username " , " username for cassandra authentication " ) ;

NEAREST DIFF:
ELIMINATEDSENTENCE
