BLEU SCORE: 0.040583489434387374

TEST MSG: cassandra - stress support for varint
GENERATED MSG: Support pluggable internode authentication

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 52f33b3 . . 137c0f1 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 29 , 6 + 29 , 7 @ @ <nl> each IndexSummary opened from it ( CASSANDRA - 8757 ) <nl> * markCompacting only succeeds if the exact SSTableReader instances being <nl> marked are in the live set ( CASSANDRA - 8689 ) <nl> + * cassandra - stress support for varint ( CASSANDRA - 8882 ) <nl> Merged from 2 . 0 : <nl> * Add offline tool to relevel sstables ( CASSANDRA - 8301 ) <nl> * Preserve stream ID for more protocol errors ( CASSANDRA - 8848 ) <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressProfile . java b / tools / stress / src / org / apache / cassandra / stress / StressProfile . java <nl> index 1517fcb . . 687b3ae 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / StressProfile . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / StressProfile . java <nl> @ @ - 481 , 8 + 481 , 9 @ @ public class StressProfile implements Serializable <nl> case INET : <nl> return new Inets ( name , config ) ; <nl> case INT : <nl> - case VARINT : <nl> return new Integers ( name , config ) ; <nl> + case VARINT : <nl> + return new BigIntegers ( name , config ) ; <nl> case TIMESTAMP : <nl> return new Dates ( name , config ) ; <nl> case UUID : <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / generate / values / BigIntegers . java b / tools / stress / src / org / apache / cassandra / stress / generate / values / BigIntegers . java <nl> new file mode 100644 <nl> index 0000000 . . 84a4c8f <nl> - - - / dev / null <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / generate / values / BigIntegers . java <nl> @ @ - 0 , 0 + 1 , 39 @ @ <nl> + / * <nl> + * <nl> + * Licensed to the Apache Software Foundation ( ASF ) under one <nl> + * or more contributor license agreements . See the NOTICE file <nl> + * distributed with this work for additional information <nl> + * regarding copyright ownership . The ASF licenses this file <nl> + * to you under the Apache License , Version 2 . 0 ( the <nl> + * " License " ) ; you may not use this file except in compliance <nl> + * with the License . You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , <nl> + * software distributed under the License is distributed on an <nl> + * " AS IS " BASIS , WITHOUT WARRANTIES OR CONDITIONS OF ANY <nl> + * KIND , either express or implied . See the License for the <nl> + * specific language governing permissions and limitations <nl> + * under the License . <nl> + * <nl> + * / <nl> + package org . apache . cassandra . stress . generate . values ; <nl> + <nl> + import org . apache . cassandra . db . marshal . IntegerType ; <nl> + <nl> + import java . math . BigInteger ; <nl> + <nl> + public class BigIntegers extends Generator < BigInteger > <nl> + { <nl> + public BigIntegers ( String name , GeneratorConfig config ) <nl> + { <nl> + super ( IntegerType . instance , config , name , BigInteger . class ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public BigInteger generate ( ) <nl> + { <nl> + return BigInteger . valueOf ( identityDistribution . next ( ) ) ; <nl> + } <nl> + }
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / tools / NodeCmd . java b / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> index 4f3e1e1 . . ed82e32 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> + + + b / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> @ @ - 145 , 6 + 145 , 7 @ @ public class NodeCmd <nl> SETTRACEPROBABILITY , <nl> SNAPSHOT , <nl> STATUS , <nl> + STATUSBINARY , <nl> STATUSTHRIFT , <nl> STOP , <nl> TPSTATS , <nl> @ @ - 912 , 6 + 913 , 11 @ @ public class NodeCmd <nl> } <nl> } <nl> <nl> + private void printIsNativeTransportRunning ( PrintStream outs ) <nl> + { <nl> + outs . println ( probe . isNativeTransportRunning ( ) ? " running " : " not running " ) ; <nl> + } <nl> + <nl> private void printIsThriftServerRunning ( PrintStream outs ) <nl> { <nl> outs . println ( probe . isThriftServerRunning ( ) ? " running " : " not running " ) ; <nl> @ @ - 1052 , 6 + 1058 , 7 @ @ public class NodeCmd <nl> case COMPACTIONSTATS : nodeCmd . printCompactionStats ( System . out ) ; break ; <nl> case DISABLEBINARY : probe . stopNativeTransport ( ) ; break ; <nl> case ENABLEBINARY : probe . startNativeTransport ( ) ; break ; <nl> + case STATUSBINARY : nodeCmd . printIsNativeTransportRunning ( System . out ) ; break ; <nl> case DISABLEGOSSIP : probe . stopGossiping ( ) ; break ; <nl> case ENABLEGOSSIP : probe . startGossiping ( ) ; break ; <nl> case DISABLEHANDOFF : probe . disableHintedHandoff ( ) ; break ; <nl> diff - - git a / src / java / org / apache / cassandra / tools / NodeProbe . java b / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> index 43d99d2 . . e6eca7b 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> + + + b / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> @ @ - 710 , 6 + 710 , 11 @ @ public class NodeProbe <nl> ssProxy . startNativeTransport ( ) ; <nl> } <nl> <nl> + public boolean isNativeTransportRunning ( ) <nl> + { <nl> + return ssProxy . isNativeTransportRunning ( ) ; <nl> + } <nl> + <nl> public void stopGossiping ( ) <nl> { <nl> ssProxy . stopGossiping ( ) ; <nl> diff - - git a / src / resources / org / apache / cassandra / tools / NodeToolHelp . yaml b / src / resources / org / apache / cassandra / tools / NodeToolHelp . yaml <nl> index 6551b07 . . f3cd88e 100644 <nl> - - - a / src / resources / org / apache / cassandra / tools / NodeToolHelp . yaml <nl> + + + b / src / resources / org / apache / cassandra / tools / NodeToolHelp . yaml <nl> @ @ - 55 , 6 + 55 , 9 @ @ commands : <nl> - name : enablebinary <nl> help : | <nl> Reenable native transport ( binary protocol ) <nl> + - name : statusbinary <nl> + help : | <nl> + Status of native transport ( binary protocol ) <nl> - name : disablehandoff <nl> help : | <nl> Disable the future hints storing on the current node

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 52f33b3 . . 137c0f1 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 29 , 6 + 29 , 7 @ @ 
 each IndexSummary opened from it ( CASSANDRA - 8757 ) 
 * markCompacting only succeeds if the exact SSTableReader instances being 
 marked are in the live set ( CASSANDRA - 8689 ) 
 + * cassandra - stress support for varint ( CASSANDRA - 8882 ) 
 Merged from 2 . 0 : 
 * Add offline tool to relevel sstables ( CASSANDRA - 8301 ) 
 * Preserve stream ID for more protocol errors ( CASSANDRA - 8848 ) 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressProfile . java b / tools / stress / src / org / apache / cassandra / stress / StressProfile . java 
 index 1517fcb . . 687b3ae 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / StressProfile . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / StressProfile . java 
 @ @ - 481 , 8 + 481 , 9 @ @ public class StressProfile implements Serializable 
 case INET : 
 return new Inets ( name , config ) ; 
 case INT : 
 - case VARINT : 
 return new Integers ( name , config ) ; 
 + case VARINT : 
 + return new BigIntegers ( name , config ) ; 
 case TIMESTAMP : 
 return new Dates ( name , config ) ; 
 case UUID : 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / generate / values / BigIntegers . java b / tools / stress / src / org / apache / cassandra / stress / generate / values / BigIntegers . java 
 new file mode 100644 
 index 0000000 . . 84a4c8f 
 - - - / dev / null 
 + + + b / tools / stress / src / org / apache / cassandra / stress / generate / values / BigIntegers . java 
 @ @ - 0 , 0 + 1 , 39 @ @ 
 + / * 
 + * 
 + * Licensed to the Apache Software Foundation ( ASF ) under one 
 + * or more contributor license agreements . See the NOTICE file 
 + * distributed with this work for additional information 
 + * regarding copyright ownership . The ASF licenses this file 
 + * to you under the Apache License , Version 2 . 0 ( the 
 + * " License " ) ; you may not use this file except in compliance 
 + * with the License . You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , 
 + * software distributed under the License is distributed on an 
 + * " AS IS " BASIS , WITHOUT WARRANTIES OR CONDITIONS OF ANY 
 + * KIND , either express or implied . See the License for the 
 + * specific language governing permissions and limitations 
 + * under the License . 
 + * 
 + * / 
 + package org . apache . cassandra . stress . generate . values ; 
 + 
 + import org . apache . cassandra . db . marshal . IntegerType ; 
 + 
 + import java . math . BigInteger ; 
 + 
 + public class BigIntegers extends Generator < BigInteger > 
 + { 
 + public BigIntegers ( String name , GeneratorConfig config ) 
 + { 
 + super ( IntegerType . instance , config , name , BigInteger . class ) ; 
 + } 
 + 
 + @ Override 
 + public BigInteger generate ( ) 
 + { 
 + return BigInteger . valueOf ( identityDistribution . next ( ) ) ; 
 + } 
 + }

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / tools / NodeCmd . java b / src / java / org / apache / cassandra / tools / NodeCmd . java 
 index 4f3e1e1 . . ed82e32 100644 
 - - - a / src / java / org / apache / cassandra / tools / NodeCmd . java 
 + + + b / src / java / org / apache / cassandra / tools / NodeCmd . java 
 @ @ - 145 , 6 + 145 , 7 @ @ public class NodeCmd 
 SETTRACEPROBABILITY , 
 SNAPSHOT , 
 STATUS , 
 + STATUSBINARY , 
 STATUSTHRIFT , 
 STOP , 
 TPSTATS , 
 @ @ - 912 , 6 + 913 , 11 @ @ public class NodeCmd 
 } 
 } 
 
 + private void printIsNativeTransportRunning ( PrintStream outs ) 
 + { 
 + outs . println ( probe . isNativeTransportRunning ( ) ? " running " : " not running " ) ; 
 + } 
 + 
 private void printIsThriftServerRunning ( PrintStream outs ) 
 { 
 outs . println ( probe . isThriftServerRunning ( ) ? " running " : " not running " ) ; 
 @ @ - 1052 , 6 + 1058 , 7 @ @ public class NodeCmd 
 case COMPACTIONSTATS : nodeCmd . printCompactionStats ( System . out ) ; break ; 
 case DISABLEBINARY : probe . stopNativeTransport ( ) ; break ; 
 case ENABLEBINARY : probe . startNativeTransport ( ) ; break ; 
 + case STATUSBINARY : nodeCmd . printIsNativeTransportRunning ( System . out ) ; break ; 
 case DISABLEGOSSIP : probe . stopGossiping ( ) ; break ; 
 case ENABLEGOSSIP : probe . startGossiping ( ) ; break ; 
 case DISABLEHANDOFF : probe . disableHintedHandoff ( ) ; break ; 
 diff - - git a / src / java / org / apache / cassandra / tools / NodeProbe . java b / src / java / org / apache / cassandra / tools / NodeProbe . java 
 index 43d99d2 . . e6eca7b 100644 
 - - - a / src / java / org / apache / cassandra / tools / NodeProbe . java 
 + + + b / src / java / org / apache / cassandra / tools / NodeProbe . java 
 @ @ - 710 , 6 + 710 , 11 @ @ public class NodeProbe 
 ssProxy . startNativeTransport ( ) ; 
 } 
 
 + public boolean isNativeTransportRunning ( ) 
 + { 
 + return ssProxy . isNativeTransportRunning ( ) ; 
 + } 
 + 
 public void stopGossiping ( ) 
 { 
 ssProxy . stopGossiping ( ) ; 
 diff - - git a / src / resources / org / apache / cassandra / tools / NodeToolHelp . yaml b / src / resources / org / apache / cassandra / tools / NodeToolHelp . yaml 
 index 6551b07 . . f3cd88e 100644 
 - - - a / src / resources / org / apache / cassandra / tools / NodeToolHelp . yaml 
 + + + b / src / resources / org / apache / cassandra / tools / NodeToolHelp . yaml 
 @ @ - 55 , 6 + 55 , 9 @ @ commands : 
 - name : enablebinary 
 help : | 
 Reenable native transport ( binary protocol ) 
 + - name : statusbinary 
 + help : | 
 + Status of native transport ( binary protocol ) 
 - name : disablehandoff 
 help : | 
 Disable the future hints storing on the current node
