BLEU SCORE: 0.6431870218238024

TEST MSG: Additional test for CASSANDRA - 11102
GENERATED MSG: Add regression test for CASSANDRA - 11102

TEST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / cql3 / validation / operations / DeleteTest . java b / test / unit / org / apache / cassandra / cql3 / validation / operations / DeleteTest . java <nl> index be858e7 . . da0bc33 100644 <nl> - - - a / test / unit / org / apache / cassandra / cql3 / validation / operations / DeleteTest . java <nl> + + + b / test / unit / org / apache / cassandra / cql3 / validation / operations / DeleteTest . java <nl> @ @ - 1037 , 6 + 1037 , 27 @ @ public class DeleteTest extends CQLTester <nl> assertRows ( execute ( " SELECT * FROM % s " ) , row ( 1 , 2 ) ) ; <nl> } <nl> <nl> + @ Test <nl> + public void testDeleteColumnNoClustering ( ) throws Throwable <nl> + { <nl> + / / This is a regression test for CASSANDRA - 11068 ( and ultimately another test for CASSANDRA - 11102 ) <nl> + / / Creates a table without clustering , insert a row ( with a column ) and only remove the column . <nl> + / / We should still have a row ( with a null column value ) even post - compaction . <nl> + <nl> + createTable ( " CREATE TABLE % s ( k int PRIMARY KEY , v int ) WITH gc _ grace _ seconds = 0 " ) ; <nl> + <nl> + execute ( " INSERT INTO % s ( k , v ) VALUES ( ? , ? ) " , 0 , 0 ) ; <nl> + execute ( " DELETE v FROM % s WHERE k = ? " , 0 ) ; <nl> + <nl> + assertRows ( execute ( " SELECT * FROM % s " ) , row ( 0 , null ) ) ; <nl> + <nl> + flush ( ) ; <nl> + assertRows ( execute ( " SELECT * FROM % s " ) , row ( 0 , null ) ) ; <nl> + <nl> + compact ( ) ; <nl> + assertRows ( execute ( " SELECT * FROM % s " ) , row ( 0 , null ) ) ; <nl> + } <nl> + <nl> private void flush ( boolean forceFlush ) <nl> { <nl> if ( forceFlush )
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / test / unit / org / apache / cassandra / cql3 / validation / operations / DeleteTest . java b / test / unit / org / apache / cassandra / cql3 / validation / operations / DeleteTest . java 
 index be858e7 . . da0bc33 100644 
 - - - a / test / unit / org / apache / cassandra / cql3 / validation / operations / DeleteTest . java 
 + + + b / test / unit / org / apache / cassandra / cql3 / validation / operations / DeleteTest . java 
 @ @ - 1037 , 6 + 1037 , 27 @ @ public class DeleteTest extends CQLTester 
 assertRows ( execute ( " SELECT * FROM % s " ) , row ( 1 , 2 ) ) ; 
 } 
 
 + @ Test 
 + public void testDeleteColumnNoClustering ( ) throws Throwable 
 + { 
 + / / This is a regression test for CASSANDRA - 11068 ( and ultimately another test for CASSANDRA - 11102 ) 
 + / / Creates a table without clustering , insert a row ( with a column ) and only remove the column . 
 + / / We should still have a row ( with a null column value ) even post - compaction . 
 + 
 + createTable ( " CREATE TABLE % s ( k int PRIMARY KEY , v int ) WITH gc _ grace _ seconds = 0 " ) ; 
 + 
 + execute ( " INSERT INTO % s ( k , v ) VALUES ( ? , ? ) " , 0 , 0 ) ; 
 + execute ( " DELETE v FROM % s WHERE k = ? " , 0 ) ; 
 + 
 + assertRows ( execute ( " SELECT * FROM % s " ) , row ( 0 , null ) ) ; 
 + 
 + flush ( ) ; 
 + assertRows ( execute ( " SELECT * FROM % s " ) , row ( 0 , null ) ) ; 
 + 
 + compact ( ) ; 
 + assertRows ( execute ( " SELECT * FROM % s " ) , row ( 0 , null ) ) ; 
 + } 
 + 
 private void flush ( boolean forceFlush ) 
 { 
 if ( forceFlush )

NEAREST DIFF:
ELIMINATEDSENTENCE
