BLEU SCORE: 0.0208362582256928

TEST MSG: Fix version check on CommitLogArchiver restore
GENERATED MSG: CommitLogReplayer should calculate checksums differently for < 2 . 0

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogArchiver . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogArchiver . java <nl> index 6cba603 . . 26468d4 100644 <nl> - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogArchiver . java <nl> + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogArchiver . java <nl> @ @ - 211 , 7 + 211 , 7 @ @ public class CommitLogArchiver <nl> descriptor = fromHeader ; <nl> else descriptor = fromName ; <nl> <nl> - if ( descriptor . version > CommitLogDescriptor . VERSION _ 21 ) <nl> + if ( descriptor . version > CommitLogDescriptor . VERSION _ 30 ) <nl> throw new IllegalStateException ( " Unsupported commit log version : " + descriptor . version ) ; <nl> <nl> File toFile = new File ( DatabaseDescriptor . getCommitLogLocation ( ) , descriptor . fileName ( ) ) ;
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / cql / QueryProcessor . java b / src / java / org / apache / cassandra / cql / QueryProcessor . java <nl> index f5477ef . . ef804c2 100644 <nl> - - - a / src / java / org / apache / cassandra / cql / QueryProcessor . java <nl> + + + b / src / java / org / apache / cassandra / cql / QueryProcessor . java <nl> @ @ - 19 , 7 + 19 , 6 @ @ package org . apache . cassandra . cql ; <nl> <nl> import java . io . IOException ; <nl> import java . nio . ByteBuffer ; <nl> - import java . nio . charset . CharacterCodingException ; <nl> import java . util . * ; <nl> import java . util . concurrent . TimeoutException ; <nl> <nl> @ @ - 865 , 16 + 864 , 4 @ @ public class QueryProcessor <nl> <nl> throw new InvalidRequestException ( " Only COUNT ( * ) and COUNT ( 1 ) operations are currently supported . " ) ; <nl> } <nl> - <nl> - private static String bufferToString ( ByteBuffer string ) <nl> - { <nl> - try <nl> - { <nl> - return ByteBufferUtil . string ( string ) ; <nl> - } <nl> - catch ( CharacterCodingException e ) <nl> - { <nl> - throw new RuntimeException ( e . getMessage ( ) , e ) ; <nl> - } <nl> - } <nl> }

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogArchiver . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogArchiver . java 
 index 6cba603 . . 26468d4 100644 
 - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogArchiver . java 
 + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogArchiver . java 
 @ @ - 211 , 7 + 211 , 7 @ @ public class CommitLogArchiver 
 descriptor = fromHeader ; 
 else descriptor = fromName ; 
 
 - if ( descriptor . version > CommitLogDescriptor . VERSION _ 21 ) 
 + if ( descriptor . version > CommitLogDescriptor . VERSION _ 30 ) 
 throw new IllegalStateException ( " Unsupported commit log version : " + descriptor . version ) ; 
 
 File toFile = new File ( DatabaseDescriptor . getCommitLogLocation ( ) , descriptor . fileName ( ) ) ;

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / cql / QueryProcessor . java b / src / java / org / apache / cassandra / cql / QueryProcessor . java 
 index f5477ef . . ef804c2 100644 
 - - - a / src / java / org / apache / cassandra / cql / QueryProcessor . java 
 + + + b / src / java / org / apache / cassandra / cql / QueryProcessor . java 
 @ @ - 19 , 7 + 19 , 6 @ @ package org . apache . cassandra . cql ; 
 
 import java . io . IOException ; 
 import java . nio . ByteBuffer ; 
 - import java . nio . charset . CharacterCodingException ; 
 import java . util . * ; 
 import java . util . concurrent . TimeoutException ; 
 
 @ @ - 865 , 16 + 864 , 4 @ @ public class QueryProcessor 
 
 throw new InvalidRequestException ( " Only COUNT ( * ) and COUNT ( 1 ) operations are currently supported . " ) ; 
 } 
 - 
 - private static String bufferToString ( ByteBuffer string ) 
 - { 
 - try 
 - { 
 - return ByteBufferUtil . string ( string ) ; 
 - } 
 - catch ( CharacterCodingException e ) 
 - { 
 - throw new RuntimeException ( e . getMessage ( ) , e ) ; 
 - } 
 - } 
 }
