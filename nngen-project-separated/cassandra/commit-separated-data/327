BLEU SCORE: 0.006488477985797793

TEST MSG: Enable ppc64le runtime as unsupported architecture
GENERATED MSG: Backport from 2 . 0 - Expose whether jna is enabled and memory is locked via JMX

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 53caaba . . 849848f 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 4 . 0 <nl> + * Enable ppc64le runtime as unsupported architecture ( CASSANDRA - 13615 ) <nl> * Improve sstablemetadata output ( CASSANDRA - 11483 ) <nl> * Support for migrating legacy users to roles has been dropped ( CASSANDRA - 13371 ) <nl> * Introduce error metrics for repair ( CASSANDRA - 13387 ) <nl> diff - - git a / lib / sigar - bin / libsigar - ppc64le - linux . so b / lib / sigar - bin / libsigar - ppc64le - linux . so <nl> new file mode 100644 <nl> index 0000000 . . 62303bf <nl> Binary files / dev / null and b / lib / sigar - bin / libsigar - ppc64le - linux . so differ <nl> diff - - git a / src / java / org / apache / cassandra / utils / Architecture . java b / src / java / org / apache / cassandra / utils / Architecture . java <nl> index 2b87de0 . . 3e9f579 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / Architecture . java <nl> + + + b / src / java / org / apache / cassandra / utils / Architecture . java <nl> @ @ - 26 , 15 + 26 , 16 @ @ import com . google . common . collect . Sets ; <nl> <nl> public final class Architecture <nl> { <nl> - / / Note that s390x & aarch64 architecture are not officially supported and adding it here is only done out of convenience <nl> - / / for those that want to run C * on this architecture at their own risk ( see # 11214 & # 13326 ) <nl> + / / Note that s390x , aarch64 , & ppc64le architectures are not officially supported and adding them here is only done out <nl> + / / of convenience for those that want to run C * on these architectures at their own risk ( see # 11214 , # 13326 , & # 13615 ) <nl> private static final Set < String > UNALIGNED _ ARCH = Collections . unmodifiableSet ( Sets . newHashSet ( <nl> " i386 " , <nl> " x86 " , <nl> " amd64 " , <nl> " x86 _ 64 " , <nl> " s390x " , <nl> - " aarch64 " <nl> + " aarch64 " , <nl> + " ppc64le " <nl> ) ) ; <nl> <nl> public static final boolean IS _ UNALIGNED = UNALIGNED _ ARCH . contains ( System . getProperty ( " os . arch " ) ) ;
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / BatchlogManager . java b / src / java / org / apache / cassandra / db / BatchlogManager . java <nl> index 48d86e3 . . 9d46739 100644 <nl> - - - a / src / java / org / apache / cassandra / db / BatchlogManager . java <nl> + + + b / src / java / org / apache / cassandra / db / BatchlogManager . java <nl> @ @ - 203 , 7 + 203 , 7 @ @ public class BatchlogManager implements BatchlogManagerMBean <nl> * We try to deliver the mutations to the replicas ourselves if they are alive and only resort to writing hints <nl> * when a replica is down or a write request times out . <nl> * / <nl> - private void replaySerializedMutation ( RowMutation mutation , long writtenAt ) throws IOException <nl> + private void replaySerializedMutation ( RowMutation mutation , long writtenAt ) <nl> { <nl> int ttl = calculateHintTTL ( mutation , writtenAt ) ; <nl> if ( ttl < = 0 ) <nl> @ @ - 211 , 7 + 211 , 7 @ @ public class BatchlogManager implements BatchlogManagerMBean <nl> <nl> Set < InetAddress > liveEndpoints = new HashSet < InetAddress > ( ) ; <nl> String ks = mutation . getTable ( ) ; <nl> - Token tk = StorageService . getPartitioner ( ) . getToken ( mutation . key ( ) ) ; <nl> + Token < ? > tk = StorageService . getPartitioner ( ) . getToken ( mutation . key ( ) ) ; <nl> for ( InetAddress endpoint : Iterables . concat ( StorageService . instance . getNaturalEndpoints ( ks , tk ) , <nl> StorageService . instance . getTokenMetadata ( ) . pendingEndpointsFor ( tk , ks ) ) ) <nl> { <nl> @ @ - 227 , 7 + 227 , 7 @ @ public class BatchlogManager implements BatchlogManagerMBean <nl> attemptDirectDelivery ( mutation , writtenAt , liveEndpoints ) ; <nl> } <nl> <nl> - private void attemptDirectDelivery ( RowMutation mutation , long writtenAt , Set < InetAddress > endpoints ) throws IOException <nl> + private void attemptDirectDelivery ( RowMutation mutation , long writtenAt , Set < InetAddress > endpoints ) <nl> { <nl> List < WriteResponseHandler > handlers = Lists . newArrayList ( ) ; <nl> final CopyOnWriteArraySet < InetAddress > undelivered = new CopyOnWriteArraySet < InetAddress > ( endpoints ) ;

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 53caaba . . 849848f 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 4 . 0 
 + * Enable ppc64le runtime as unsupported architecture ( CASSANDRA - 13615 ) 
 * Improve sstablemetadata output ( CASSANDRA - 11483 ) 
 * Support for migrating legacy users to roles has been dropped ( CASSANDRA - 13371 ) 
 * Introduce error metrics for repair ( CASSANDRA - 13387 ) 
 diff - - git a / lib / sigar - bin / libsigar - ppc64le - linux . so b / lib / sigar - bin / libsigar - ppc64le - linux . so 
 new file mode 100644 
 index 0000000 . . 62303bf 
 Binary files / dev / null and b / lib / sigar - bin / libsigar - ppc64le - linux . so differ 
 diff - - git a / src / java / org / apache / cassandra / utils / Architecture . java b / src / java / org / apache / cassandra / utils / Architecture . java 
 index 2b87de0 . . 3e9f579 100644 
 - - - a / src / java / org / apache / cassandra / utils / Architecture . java 
 + + + b / src / java / org / apache / cassandra / utils / Architecture . java 
 @ @ - 26 , 15 + 26 , 16 @ @ import com . google . common . collect . Sets ; 
 
 public final class Architecture 
 { 
 - / / Note that s390x & aarch64 architecture are not officially supported and adding it here is only done out of convenience 
 - / / for those that want to run C * on this architecture at their own risk ( see # 11214 & # 13326 ) 
 + / / Note that s390x , aarch64 , & ppc64le architectures are not officially supported and adding them here is only done out 
 + / / of convenience for those that want to run C * on these architectures at their own risk ( see # 11214 , # 13326 , & # 13615 ) 
 private static final Set < String > UNALIGNED _ ARCH = Collections . unmodifiableSet ( Sets . newHashSet ( 
 " i386 " , 
 " x86 " , 
 " amd64 " , 
 " x86 _ 64 " , 
 " s390x " , 
 - " aarch64 " 
 + " aarch64 " , 
 + " ppc64le " 
 ) ) ; 
 
 public static final boolean IS _ UNALIGNED = UNALIGNED _ ARCH . contains ( System . getProperty ( " os . arch " ) ) ;

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / BatchlogManager . java b / src / java / org / apache / cassandra / db / BatchlogManager . java 
 index 48d86e3 . . 9d46739 100644 
 - - - a / src / java / org / apache / cassandra / db / BatchlogManager . java 
 + + + b / src / java / org / apache / cassandra / db / BatchlogManager . java 
 @ @ - 203 , 7 + 203 , 7 @ @ public class BatchlogManager implements BatchlogManagerMBean 
 * We try to deliver the mutations to the replicas ourselves if they are alive and only resort to writing hints 
 * when a replica is down or a write request times out . 
 * / 
 - private void replaySerializedMutation ( RowMutation mutation , long writtenAt ) throws IOException 
 + private void replaySerializedMutation ( RowMutation mutation , long writtenAt ) 
 { 
 int ttl = calculateHintTTL ( mutation , writtenAt ) ; 
 if ( ttl < = 0 ) 
 @ @ - 211 , 7 + 211 , 7 @ @ public class BatchlogManager implements BatchlogManagerMBean 
 
 Set < InetAddress > liveEndpoints = new HashSet < InetAddress > ( ) ; 
 String ks = mutation . getTable ( ) ; 
 - Token tk = StorageService . getPartitioner ( ) . getToken ( mutation . key ( ) ) ; 
 + Token < ? > tk = StorageService . getPartitioner ( ) . getToken ( mutation . key ( ) ) ; 
 for ( InetAddress endpoint : Iterables . concat ( StorageService . instance . getNaturalEndpoints ( ks , tk ) , 
 StorageService . instance . getTokenMetadata ( ) . pendingEndpointsFor ( tk , ks ) ) ) 
 { 
 @ @ - 227 , 7 + 227 , 7 @ @ public class BatchlogManager implements BatchlogManagerMBean 
 attemptDirectDelivery ( mutation , writtenAt , liveEndpoints ) ; 
 } 
 
 - private void attemptDirectDelivery ( RowMutation mutation , long writtenAt , Set < InetAddress > endpoints ) throws IOException 
 + private void attemptDirectDelivery ( RowMutation mutation , long writtenAt , Set < InetAddress > endpoints ) 
 { 
 List < WriteResponseHandler > handlers = Lists . newArrayList ( ) ; 
 final CopyOnWriteArraySet < InetAddress > undelivered = new CopyOnWriteArraySet < InetAddress > ( endpoints ) ;
