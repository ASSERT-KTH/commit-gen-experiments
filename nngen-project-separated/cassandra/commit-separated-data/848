BLEU SCORE: 1.0

TEST MSG: Pass the proper Op . Order when index partitions
GENERATED MSG: Pass the proper Op . Order when index partitions

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index a2b472a . . b549c8e 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 6 <nl> + * Fix sstables not being protected from removal during index build ( CASSANDRA - 11905 ) <nl> * Correctly migrate schema for frozen UDTs during 2 . x - > 3 . x upgrades <nl> ( does not affect any released versions ) ( CASSANDRA - 11613 ) <nl> * Allow server startup if JMX is configured directly ( CASSANDRA - 11725 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / Keyspace . java b / src / java / org / apache / cassandra / db / Keyspace . java <nl> index 77277ba . . 5d2c571 100644 <nl> - - - a / src / java / org / apache / cassandra / db / Keyspace . java <nl> + + + b / src / java / org / apache / cassandra / db / Keyspace . java <nl> @ @ - 564 , 10 + 564 , 11 @ @ public class Keyspace <nl> FBUtilities . nowInSeconds ( ) , <nl> key ) ; <nl> <nl> - try ( OpOrder . Group opGroup = cfs . keyspace . writeOrder . start ( ) ; <nl> - UnfilteredRowIterator partition = cmd . queryMemtableAndDisk ( cfs , opGroup ) ) <nl> + try ( OpOrder . Group writeGroup = cfs . keyspace . writeOrder . start ( ) ; <nl> + OpOrder . Group readGroup = cfs . readOrdering . start ( ) ; <nl> + UnfilteredRowIterator partition = cmd . queryMemtableAndDisk ( cfs , readGroup ) ) <nl> { <nl> - cfs . indexManager . indexPartition ( partition , opGroup , indexes , cmd . nowInSec ( ) ) ; <nl> + cfs . indexManager . indexPartition ( partition , writeGroup , indexes , cmd . nowInSec ( ) ) ; <nl> } <nl> } <nl>
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index a2b472a . . b549c8e 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 6 
 + * Fix sstables not being protected from removal during index build ( CASSANDRA - 11905 ) 
 * Correctly migrate schema for frozen UDTs during 2 . x - > 3 . x upgrades 
 ( does not affect any released versions ) ( CASSANDRA - 11613 ) 
 * Allow server startup if JMX is configured directly ( CASSANDRA - 11725 ) 
 diff - - git a / src / java / org / apache / cassandra / db / Keyspace . java b / src / java / org / apache / cassandra / db / Keyspace . java 
 index 77277ba . . 5d2c571 100644 
 - - - a / src / java / org / apache / cassandra / db / Keyspace . java 
 + + + b / src / java / org / apache / cassandra / db / Keyspace . java 
 @ @ - 564 , 10 + 564 , 11 @ @ public class Keyspace 
 FBUtilities . nowInSeconds ( ) , 
 key ) ; 
 
 - try ( OpOrder . Group opGroup = cfs . keyspace . writeOrder . start ( ) ; 
 - UnfilteredRowIterator partition = cmd . queryMemtableAndDisk ( cfs , opGroup ) ) 
 + try ( OpOrder . Group writeGroup = cfs . keyspace . writeOrder . start ( ) ; 
 + OpOrder . Group readGroup = cfs . readOrdering . start ( ) ; 
 + UnfilteredRowIterator partition = cmd . queryMemtableAndDisk ( cfs , readGroup ) ) 
 { 
 - cfs . indexManager . indexPartition ( partition , opGroup , indexes , cmd . nowInSec ( ) ) ; 
 + cfs . indexManager . indexPartition ( partition , writeGroup , indexes , cmd . nowInSec ( ) ) ; 
 } 
 } 


NEAREST DIFF:
ELIMINATEDSENTENCE
