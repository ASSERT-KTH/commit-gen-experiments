BLEU SCORE: 0.02383853510228548

TEST MSG: Correct log message for statistics of offheap memtable flush
GENERATED MSG: fix SecondaryIndex LelevedManifest save upon snapshot

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index d5419c6 . . bd186a1 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 18 , 6 + 18 , 7 @ @ <nl> * Extend ColumnIdentifier . internedInstances key to include the type that generated the byte buffer ( CASSANDRA - 12516 ) <nl> * Backport CASSANDRA - 10756 ( race condition in NativeTransportService shutdown ) ( CASSANDRA - 12472 ) <nl> * If CF has no clustering columns , any row cache is full partition cache ( CASSANDRA - 12499 ) <nl> + * Correct log message for statistics of offheap memtable flush ( CASSANDRA - 12776 ) <nl> Merged from 2 . 2 : <nl> * Clean up permissions when a UDA is dropped ( CASSANDRA - 12720 ) <nl> * Limit colUpdateTimeDelta histogram updates to reasonable deltas ( CASSANDRA - 11117 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> index adfd1af . . d2a51a9 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> @ @ - 1149 , 7 + 1149 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> float flushingOnHeap = Memtable . MEMORY _ POOL . onHeap . reclaimingRatio ( ) ; <nl> float flushingOffHeap = Memtable . MEMORY _ POOL . offHeap . reclaimingRatio ( ) ; <nl> float thisOnHeap = largest . getAllocator ( ) . onHeap ( ) . ownershipRatio ( ) ; <nl> - float thisOffHeap = largest . getAllocator ( ) . onHeap ( ) . ownershipRatio ( ) ; <nl> + float thisOffHeap = largest . getAllocator ( ) . offHeap ( ) . ownershipRatio ( ) ; <nl> logger . debug ( " Flushing largest { } to free up room . Used total : { } , live : { } , flushing : { } , this : { } " , <nl> largest . cfs , ratio ( usedOnHeap , usedOffHeap ) , ratio ( liveOnHeap , liveOffHeap ) , <nl> ratio ( flushingOnHeap , flushingOffHeap ) , ratio ( thisOnHeap , thisOffHeap ) ) ;
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 32e75c5 . . 0d2ee5f 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 53 , 6 + 53 , 7 @ @ <nl> * ( cql3 ) Fix drop index ( CASSANDRA - 4192 ) <nl> * ( cql3 ) Don ' t return range ghosts anymore ( CASSANDRA - 3982 ) <nl> * fix the problem re - creating Keyspace / ColumnFamily ( CASSANDRA - 4219 ) <nl> + * fix SecondaryIndex LelevedManifest save upon snapshot ( CASSANDRA - 4230 ) <nl> Merged from 1 . 0 : <nl> * Fix super columns bug where cache is not updated ( CASSANDRA - 4190 ) <nl> * fix maxTimestamp to include row tombstones ( CASSANDRA - 4116 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> index 05eaa83 . . 5621816 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java <nl> @ @ - 1454 , 8 + 1454 , 8 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean <nl> " created in " + snapshotDirectory ) ; <nl> } <nl> <nl> - if ( compactionStrategy instanceof LeveledCompactionStrategy ) <nl> - directories . snapshotLeveledManifest ( snapshotName ) ; <nl> + if ( cfs . compactionStrategy instanceof LeveledCompactionStrategy ) <nl> + cfs . directories . snapshotLeveledManifest ( snapshotName ) ; <nl> } <nl> catch ( IOException e ) <nl> {

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index d5419c6 . . bd186a1 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 18 , 6 + 18 , 7 @ @ 
 * Extend ColumnIdentifier . internedInstances key to include the type that generated the byte buffer ( CASSANDRA - 12516 ) 
 * Backport CASSANDRA - 10756 ( race condition in NativeTransportService shutdown ) ( CASSANDRA - 12472 ) 
 * If CF has no clustering columns , any row cache is full partition cache ( CASSANDRA - 12499 ) 
 + * Correct log message for statistics of offheap memtable flush ( CASSANDRA - 12776 ) 
 Merged from 2 . 2 : 
 * Clean up permissions when a UDA is dropped ( CASSANDRA - 12720 ) 
 * Limit colUpdateTimeDelta histogram updates to reasonable deltas ( CASSANDRA - 11117 ) 
 diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 index adfd1af . . d2a51a9 100644 
 - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 @ @ - 1149 , 7 + 1149 , 7 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 float flushingOnHeap = Memtable . MEMORY _ POOL . onHeap . reclaimingRatio ( ) ; 
 float flushingOffHeap = Memtable . MEMORY _ POOL . offHeap . reclaimingRatio ( ) ; 
 float thisOnHeap = largest . getAllocator ( ) . onHeap ( ) . ownershipRatio ( ) ; 
 - float thisOffHeap = largest . getAllocator ( ) . onHeap ( ) . ownershipRatio ( ) ; 
 + float thisOffHeap = largest . getAllocator ( ) . offHeap ( ) . ownershipRatio ( ) ; 
 logger . debug ( " Flushing largest { } to free up room . Used total : { } , live : { } , flushing : { } , this : { } " , 
 largest . cfs , ratio ( usedOnHeap , usedOffHeap ) , ratio ( liveOnHeap , liveOffHeap ) , 
 ratio ( flushingOnHeap , flushingOffHeap ) , ratio ( thisOnHeap , thisOffHeap ) ) ;

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 32e75c5 . . 0d2ee5f 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 53 , 6 + 53 , 7 @ @ 
 * ( cql3 ) Fix drop index ( CASSANDRA - 4192 ) 
 * ( cql3 ) Don ' t return range ghosts anymore ( CASSANDRA - 3982 ) 
 * fix the problem re - creating Keyspace / ColumnFamily ( CASSANDRA - 4219 ) 
 + * fix SecondaryIndex LelevedManifest save upon snapshot ( CASSANDRA - 4230 ) 
 Merged from 1 . 0 : 
 * Fix super columns bug where cache is not updated ( CASSANDRA - 4190 ) 
 * fix maxTimestamp to include row tombstones ( CASSANDRA - 4116 ) 
 diff - - git a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 index 05eaa83 . . 5621816 100644 
 - - - a / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 + + + b / src / java / org / apache / cassandra / db / ColumnFamilyStore . java 
 @ @ - 1454 , 8 + 1454 , 8 @ @ public class ColumnFamilyStore implements ColumnFamilyStoreMBean 
 " created in " + snapshotDirectory ) ; 
 } 
 
 - if ( compactionStrategy instanceof LeveledCompactionStrategy ) 
 - directories . snapshotLeveledManifest ( snapshotName ) ; 
 + if ( cfs . compactionStrategy instanceof LeveledCompactionStrategy ) 
 + cfs . directories . snapshotLeveledManifest ( snapshotName ) ; 
 } 
 catch ( IOException e ) 
 {
