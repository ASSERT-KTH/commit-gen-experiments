BLEU SCORE: 1.0

TEST MSG: merge from 1 . 2
GENERATED MSG: merge from 1 . 2

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 57b0183 . . b270f85 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 11 , 6 + 11 , 7 @ @ <nl> * Fix UDT field selection with empty fields ( CASSANDRA - 7670 ) <nl> * Bogus deserialization of static cells from sstable ( CASSANDRA - 7684 ) <nl> Merged from 2 . 0 : <nl> + * Remove duplicates from StorageService . getJoiningNodes ( CASSANDRA - 7478 ) <nl> * Clone token map outside of hot gossip loops ( CASSANDRA - 7758 ) <nl> * Fix MS expiring map timeout for Paxos messages ( CASSANDRA - 7752 ) <nl> * Do not flush on truncate if durable _ writes is false ( CASSANDRA - 7750 ) <nl> @ @ - 140 , 6 + 141 , 7 @ @ Merged from 2 . 0 : <nl> * Track max / min timestamps for range tombstones ( CASSANDRA - 7647 ) <nl> * Fix NPE when listing saved caches dir ( CASSANDRA - 7632 ) <nl> Merged from 1 . 2 : <nl> + * Clone token map outside of hot gossip loops ( CASSANDRA - 7758 ) <nl> * Add stop method to EmbeddedCassandraService ( CASSANDRA - 7595 ) <nl> * Support connecting to ipv6 jmx with nodetool ( CASSANDRA - 7669 ) <nl> * Set gc _ grace _ seconds to seven days for system schema tables ( CASSANDRA - 7668 ) <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index a482d97 . . b4aa5ba 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 2110 , 7 + 2110 , 7 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> <nl> public List < String > getJoiningNodes ( ) <nl> { <nl> - return stringify ( tokenMetadata . getBootstrapTokens ( ) . values ( ) ) ; <nl> + return stringify ( tokenMetadata . getBootstrapTokens ( ) . valueSet ( ) ) ; <nl> } <nl> <nl> public List < String > getLiveNodes ( ) <nl> diff - - git a / src / java / org / apache / cassandra / utils / BiMultiValMap . java b / src / java / org / apache / cassandra / utils / BiMultiValMap . java <nl> index d827d3f . . 7a87217 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / BiMultiValMap . java <nl> + + + b / src / java / org / apache / cassandra / utils / BiMultiValMap . java <nl> @ @ - 138 , 4 + 138 , 9 @ @ public class BiMultiValMap < K , V > implements Map < K , V > <nl> { <nl> return reverseMap . keys ( ) ; <nl> } <nl> + <nl> + public Collection < V > valueSet ( ) <nl> + { <nl> + return reverseMap . keySet ( ) ; <nl> + } <nl> }
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index b935425 . . 7f5a487 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 1 . 2 - rc1 <nl> + * fix cqlsh rendering of blob fields ( CASSANDRA - 4970 ) <nl> * fix cqlsh DESCRIBE command ( CASSANDRA - 4913 ) <nl> * save truncation position in system table ( CASSANDRA - 4906 ) <nl> * Move CompressionMetadata off - heap ( CASSANDRA - 4937 ) <nl> diff - - git a / pylib / cqlshlib / formatting . py b / pylib / cqlshlib / formatting . py <nl> index d15c083 . . bab3506 100644 <nl> - - - a / pylib / cqlshlib / formatting . py <nl> + + + b / pylib / cqlshlib / formatting . py <nl> @ @ - 88 , 8 + 88 , 8 @ @ def formatter _ for ( typname ) : <nl> return f <nl> return registrator <nl> <nl> - @ formatter _ for ( ' bytes ' ) <nl> - def format _ value _ bytes ( val , colormap , * * _ ) : <nl> + @ formatter _ for ( ' blob ' ) <nl> + def format _ value _ blob ( val , colormap , * * _ ) : <nl> bval = ' ' . join ( ' % 02x ' % ord ( c ) for c in val ) <nl> return colorme ( bval , colormap , ' hex ' ) <nl>

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 57b0183 . . b270f85 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 11 , 6 + 11 , 7 @ @ 
 * Fix UDT field selection with empty fields ( CASSANDRA - 7670 ) 
 * Bogus deserialization of static cells from sstable ( CASSANDRA - 7684 ) 
 Merged from 2 . 0 : 
 + * Remove duplicates from StorageService . getJoiningNodes ( CASSANDRA - 7478 ) 
 * Clone token map outside of hot gossip loops ( CASSANDRA - 7758 ) 
 * Fix MS expiring map timeout for Paxos messages ( CASSANDRA - 7752 ) 
 * Do not flush on truncate if durable _ writes is false ( CASSANDRA - 7750 ) 
 @ @ - 140 , 6 + 141 , 7 @ @ Merged from 2 . 0 : 
 * Track max / min timestamps for range tombstones ( CASSANDRA - 7647 ) 
 * Fix NPE when listing saved caches dir ( CASSANDRA - 7632 ) 
 Merged from 1 . 2 : 
 + * Clone token map outside of hot gossip loops ( CASSANDRA - 7758 ) 
 * Add stop method to EmbeddedCassandraService ( CASSANDRA - 7595 ) 
 * Support connecting to ipv6 jmx with nodetool ( CASSANDRA - 7669 ) 
 * Set gc _ grace _ seconds to seven days for system schema tables ( CASSANDRA - 7668 ) 
 diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index a482d97 . . b4aa5ba 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 2110 , 7 + 2110 , 7 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 
 public List < String > getJoiningNodes ( ) 
 { 
 - return stringify ( tokenMetadata . getBootstrapTokens ( ) . values ( ) ) ; 
 + return stringify ( tokenMetadata . getBootstrapTokens ( ) . valueSet ( ) ) ; 
 } 
 
 public List < String > getLiveNodes ( ) 
 diff - - git a / src / java / org / apache / cassandra / utils / BiMultiValMap . java b / src / java / org / apache / cassandra / utils / BiMultiValMap . java 
 index d827d3f . . 7a87217 100644 
 - - - a / src / java / org / apache / cassandra / utils / BiMultiValMap . java 
 + + + b / src / java / org / apache / cassandra / utils / BiMultiValMap . java 
 @ @ - 138 , 4 + 138 , 9 @ @ public class BiMultiValMap < K , V > implements Map < K , V > 
 { 
 return reverseMap . keys ( ) ; 
 } 
 + 
 + public Collection < V > valueSet ( ) 
 + { 
 + return reverseMap . keySet ( ) ; 
 + } 
 }

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index b935425 . . 7f5a487 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 1 . 2 - rc1 
 + * fix cqlsh rendering of blob fields ( CASSANDRA - 4970 ) 
 * fix cqlsh DESCRIBE command ( CASSANDRA - 4913 ) 
 * save truncation position in system table ( CASSANDRA - 4906 ) 
 * Move CompressionMetadata off - heap ( CASSANDRA - 4937 ) 
 diff - - git a / pylib / cqlshlib / formatting . py b / pylib / cqlshlib / formatting . py 
 index d15c083 . . bab3506 100644 
 - - - a / pylib / cqlshlib / formatting . py 
 + + + b / pylib / cqlshlib / formatting . py 
 @ @ - 88 , 8 + 88 , 8 @ @ def formatter _ for ( typname ) : 
 return f 
 return registrator 
 
 - @ formatter _ for ( ' bytes ' ) 
 - def format _ value _ bytes ( val , colormap , * * _ ) : 
 + @ formatter _ for ( ' blob ' ) 
 + def format _ value _ blob ( val , colormap , * * _ ) : 
 bval = ' ' . join ( ' % 02x ' % ord ( c ) for c in val ) 
 return colorme ( bval , colormap , ' hex ' ) 

