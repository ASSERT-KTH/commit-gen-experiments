BLEU SCORE: 0.043008477182523305

TEST MSG: Add missing consistency levels to cassandra - stress
GENERATED MSG: fix stress tool that hangs forever on timeout or error

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 964de54 . . 6c0f2da 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 1 . 3 <nl> + * Add missing ConsistencyLevels to cassandra - stress ( CASSANDRA - 8253 ) <nl> * Add auth support to cassandra - stress ( CASSANDRA - 7985 ) <nl> * Fix ArrayIndexOutOfBoundsException when generating error message <nl> for some CQL syntax errors ( CASSANDRA - 8455 ) <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / settings / SettingsCommand . java b / tools / stress / src / org / apache / cassandra / stress / settings / SettingsCommand . java <nl> index 8751dbf . . e8b45ec 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / settings / SettingsCommand . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / settings / SettingsCommand . java <nl> @ @ - 107 , 7 + 107 , 7 @ @ public abstract class SettingsCommand implements Serializable <nl> static abstract class Options extends GroupedOptions <nl> { <nl> final OptionSimple noWarmup = new OptionSimple ( " no - warmup " , " " , null , " Do not warmup the process " , false ) ; <nl> - final OptionSimple consistencyLevel = new OptionSimple ( " cl = " , " ONE | QUORUM | LOCAL _ QUORUM | EACH _ QUORUM | ALL | ANY " , " ONE " , " Consistency level to use " , false ) ; <nl> + final OptionSimple consistencyLevel = new OptionSimple ( " cl = " , " ONE | QUORUM | LOCAL _ QUORUM | EACH _ QUORUM | ALL | ANY | TWO | THREE | SERIAL | LOCAL _ SERIAL | LOCAL _ ONE " , " ONE " , " Consistency level to use " , false ) ; <nl> } <nl> <nl> static class Count extends Options <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / util / JavaDriverClient . java b / tools / stress / src / org / apache / cassandra / stress / util / JavaDriverClient . java <nl> index 7aa7257 . . 43d9ddc 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / util / JavaDriverClient . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / util / JavaDriverClient . java <nl> @ @ - 178 , 6 + 178 , 12 @ @ public class JavaDriverClient <nl> return com . datastax . driver . core . ConsistencyLevel . LOCAL _ QUORUM ; <nl> case EACH _ QUORUM : <nl> return com . datastax . driver . core . ConsistencyLevel . EACH _ QUORUM ; <nl> + case SERIAL : <nl> + return com . datastax . driver . core . ConsistencyLevel . SERIAL ; <nl> + case LOCAL _ SERIAL : <nl> + return com . datastax . driver . core . ConsistencyLevel . LOCAL _ SERIAL ; <nl> + case LOCAL _ ONE : <nl> + return com . datastax . driver . core . ConsistencyLevel . LOCAL _ ONE ; <nl> } <nl> throw new AssertionError ( ) ; <nl> }
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 5a491be . . 9392d3d 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 23 , 6 + 23 , 7 @ @ <nl> * average a reduced liveRatio estimate with the previous one ( CASSANDRA - 4065 ) <nl> * Allow KS and CF names up to 48 characters ( CASSANDRA - 4157 ) <nl> * Add support for CL . TWO and CL . THREE in CQL ( CASSANDRA - 4156 ) <nl> + * Fix type in CQL3 ALTER TABLE preventing update ( CASSANDRA - 4170 ) <nl> Merged from 1 . 0 : <nl> * avoid streaming empty files with bulk loader if sstablewriter errors out <nl> ( CASSANDRA - 3946 ) <nl> diff - - git a / src / java / org / apache / cassandra / cql3 / statements / AlterTableStatement . java b / src / java / org / apache / cassandra / cql3 / statements / AlterTableStatement . java <nl> index 37db2fd . . bb2c7e8 100644 <nl> - - - a / src / java / org / apache / cassandra / cql3 / statements / AlterTableStatement . java <nl> + + + b / src / java / org / apache / cassandra / cql3 / statements / AlterTableStatement . java <nl> @ @ - 98 , 7 + 98 , 7 @ @ public class AlterTableStatement extends SchemaAlteringStatement <nl> cfm . defaultValidator ( CFPropDefs . parseType ( validator ) ) ; <nl> break ; <nl> case COLUMN _ METADATA : <nl> - ColumnDefinition column = meta . getColumnDefinition ( columnName . key ) ; <nl> + ColumnDefinition column = cfm . getColumnDefinition ( columnName . key ) ; <nl> column . setValidator ( CFPropDefs . parseType ( validator ) ) ; <nl> cfm . addColumnDefinition ( column ) ; <nl> break ;

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 964de54 . . 6c0f2da 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 1 . 3 
 + * Add missing ConsistencyLevels to cassandra - stress ( CASSANDRA - 8253 ) 
 * Add auth support to cassandra - stress ( CASSANDRA - 7985 ) 
 * Fix ArrayIndexOutOfBoundsException when generating error message 
 for some CQL syntax errors ( CASSANDRA - 8455 ) 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / settings / SettingsCommand . java b / tools / stress / src / org / apache / cassandra / stress / settings / SettingsCommand . java 
 index 8751dbf . . e8b45ec 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / settings / SettingsCommand . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / settings / SettingsCommand . java 
 @ @ - 107 , 7 + 107 , 7 @ @ public abstract class SettingsCommand implements Serializable 
 static abstract class Options extends GroupedOptions 
 { 
 final OptionSimple noWarmup = new OptionSimple ( " no - warmup " , " " , null , " Do not warmup the process " , false ) ; 
 - final OptionSimple consistencyLevel = new OptionSimple ( " cl = " , " ONE | QUORUM | LOCAL _ QUORUM | EACH _ QUORUM | ALL | ANY " , " ONE " , " Consistency level to use " , false ) ; 
 + final OptionSimple consistencyLevel = new OptionSimple ( " cl = " , " ONE | QUORUM | LOCAL _ QUORUM | EACH _ QUORUM | ALL | ANY | TWO | THREE | SERIAL | LOCAL _ SERIAL | LOCAL _ ONE " , " ONE " , " Consistency level to use " , false ) ; 
 } 
 
 static class Count extends Options 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / util / JavaDriverClient . java b / tools / stress / src / org / apache / cassandra / stress / util / JavaDriverClient . java 
 index 7aa7257 . . 43d9ddc 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / util / JavaDriverClient . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / util / JavaDriverClient . java 
 @ @ - 178 , 6 + 178 , 12 @ @ public class JavaDriverClient 
 return com . datastax . driver . core . ConsistencyLevel . LOCAL _ QUORUM ; 
 case EACH _ QUORUM : 
 return com . datastax . driver . core . ConsistencyLevel . EACH _ QUORUM ; 
 + case SERIAL : 
 + return com . datastax . driver . core . ConsistencyLevel . SERIAL ; 
 + case LOCAL _ SERIAL : 
 + return com . datastax . driver . core . ConsistencyLevel . LOCAL _ SERIAL ; 
 + case LOCAL _ ONE : 
 + return com . datastax . driver . core . ConsistencyLevel . LOCAL _ ONE ; 
 } 
 throw new AssertionError ( ) ; 
 }

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 5a491be . . 9392d3d 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 23 , 6 + 23 , 7 @ @ 
 * average a reduced liveRatio estimate with the previous one ( CASSANDRA - 4065 ) 
 * Allow KS and CF names up to 48 characters ( CASSANDRA - 4157 ) 
 * Add support for CL . TWO and CL . THREE in CQL ( CASSANDRA - 4156 ) 
 + * Fix type in CQL3 ALTER TABLE preventing update ( CASSANDRA - 4170 ) 
 Merged from 1 . 0 : 
 * avoid streaming empty files with bulk loader if sstablewriter errors out 
 ( CASSANDRA - 3946 ) 
 diff - - git a / src / java / org / apache / cassandra / cql3 / statements / AlterTableStatement . java b / src / java / org / apache / cassandra / cql3 / statements / AlterTableStatement . java 
 index 37db2fd . . bb2c7e8 100644 
 - - - a / src / java / org / apache / cassandra / cql3 / statements / AlterTableStatement . java 
 + + + b / src / java / org / apache / cassandra / cql3 / statements / AlterTableStatement . java 
 @ @ - 98 , 7 + 98 , 7 @ @ public class AlterTableStatement extends SchemaAlteringStatement 
 cfm . defaultValidator ( CFPropDefs . parseType ( validator ) ) ; 
 break ; 
 case COLUMN _ METADATA : 
 - ColumnDefinition column = meta . getColumnDefinition ( columnName . key ) ; 
 + ColumnDefinition column = cfm . getColumnDefinition ( columnName . key ) ; 
 column . setValidator ( CFPropDefs . parseType ( validator ) ) ; 
 cfm . addColumnDefinition ( column ) ; 
 break ;
