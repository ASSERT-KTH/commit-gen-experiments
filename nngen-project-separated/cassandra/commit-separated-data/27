BLEU SCORE: 0.01908840668714524

TEST MSG: Fix generating javadoc with Java11 ; cleanup unused imports
GENERATED MSG: Return InvalidRequest when using a keyspace that doesn ' t exist

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 706a3ed . . ec59fa6 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 4 . 0 <nl> + * Fix generating javadoc with Java11 ( CASSANDRA - 14988 ) <nl> * Only cancel conflicting compactions when starting anticompactions and sub range compactions ( CASSANDRA - 14935 ) <nl> * Use a stub IndexRegistry for non - daemon use cases ( CASSANDRA - 14938 ) <nl> * Don ' t enable client transports when bootstrap is pending ( CASSANDRA - 14525 ) <nl> diff - - git a / src / java / org / apache / cassandra / hints / HintsBufferPool . java b / src / java / org / apache / cassandra / hints / HintsBufferPool . java <nl> index f705de1 . . 7f66efd 100644 <nl> - - - a / src / java / org / apache / cassandra / hints / HintsBufferPool . java <nl> + + + b / src / java / org / apache / cassandra / hints / HintsBufferPool . java <nl> @ @ - 18 , 14 + 18 , 12 @ @ <nl> package org . apache . cassandra . hints ; <nl> <nl> import java . io . Closeable ; <nl> - import java . io . IOException ; <nl> import java . util . UUID ; <nl> import java . util . concurrent . BlockingQueue ; <nl> import java . util . concurrent . LinkedBlockingQueue ; <nl> <nl> import org . apache . cassandra . config . Config ; <nl> import org . apache . cassandra . net . MessagingService ; <nl> - import sun . nio . ch . DirectBuffer ; <nl> <nl> / * * <nl> * A primitive pool of { @ link HintsBuffer } buffers . Under normal conditions should only hold two buffers - the currently
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index c7a228f . . 06ac8a0 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 54 , 6 + 54 , 8 @ @ <nl> <nl> <nl> 1 . 0 . 8 <nl> + * Return InvalidRequest when using a keyspace that doesn ' t exist <nl> + ( CASSANDRA - 3764 ) <nl> * disallow user modification of System keyspace ( CASSANDRA - 3738 ) <nl> * allow using sstable2json on secondary index data ( CASSANDRA - 3738 ) <nl> * ( cqlsh ) add DESCRIBE COLUMNFAMILIES ( CASSANDRA - 3586 ) <nl> diff - - git a / src / java / org / apache / cassandra / service / ClientState . java b / src / java / org / apache / cassandra / service / ClientState . java <nl> index 0ea7272 . . d2df8a9 100644 <nl> - - - a / src / java / org / apache / cassandra / service / ClientState . java <nl> + + + b / src / java / org / apache / cassandra / service / ClientState . java <nl> @ @ - 18 , 12 + 18 , 7 @ @ <nl> <nl> package org . apache . cassandra . service ; <nl> <nl> - import java . util . ArrayList ; <nl> - import java . util . HashMap ; <nl> - import java . util . LinkedHashMap ; <nl> - import java . util . List ; <nl> - import java . util . Map ; <nl> - import java . util . Set ; <nl> + import java . util . * ; <nl> <nl> import org . slf4j . Logger ; <nl> import org . slf4j . LoggerFactory ; <nl> @ @ - 32 , 6 + 27 , 7 @ @ import org . apache . cassandra . auth . AuthenticatedUser ; <nl> import org . apache . cassandra . auth . Permission ; <nl> import org . apache . cassandra . auth . Resources ; <nl> import org . apache . cassandra . config . DatabaseDescriptor ; <nl> + import org . apache . cassandra . config . Schema ; <nl> import org . apache . cassandra . cql . CQLStatement ; <nl> import org . apache . cassandra . db . Table ; <nl> import org . apache . cassandra . thrift . AuthenticationException ; <nl> @ @ - 86 , 8 + 82 , 10 @ @ public class ClientState <nl> return keyspace ; <nl> } <nl> <nl> - public void setKeyspace ( String ks ) <nl> + public void setKeyspace ( String ks ) throws InvalidRequestException <nl> { <nl> + if ( Schema . instance . getKSMetaData ( ks ) = = null ) <nl> + throw new InvalidRequestException ( " Keyspace ' " + ks + " ' does not exist " ) ; <nl> keyspace = ks ; <nl> } <nl>

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 706a3ed . . ec59fa6 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 4 . 0 
 + * Fix generating javadoc with Java11 ( CASSANDRA - 14988 ) 
 * Only cancel conflicting compactions when starting anticompactions and sub range compactions ( CASSANDRA - 14935 ) 
 * Use a stub IndexRegistry for non - daemon use cases ( CASSANDRA - 14938 ) 
 * Don ' t enable client transports when bootstrap is pending ( CASSANDRA - 14525 ) 
 diff - - git a / src / java / org / apache / cassandra / hints / HintsBufferPool . java b / src / java / org / apache / cassandra / hints / HintsBufferPool . java 
 index f705de1 . . 7f66efd 100644 
 - - - a / src / java / org / apache / cassandra / hints / HintsBufferPool . java 
 + + + b / src / java / org / apache / cassandra / hints / HintsBufferPool . java 
 @ @ - 18 , 14 + 18 , 12 @ @ 
 package org . apache . cassandra . hints ; 
 
 import java . io . Closeable ; 
 - import java . io . IOException ; 
 import java . util . UUID ; 
 import java . util . concurrent . BlockingQueue ; 
 import java . util . concurrent . LinkedBlockingQueue ; 
 
 import org . apache . cassandra . config . Config ; 
 import org . apache . cassandra . net . MessagingService ; 
 - import sun . nio . ch . DirectBuffer ; 
 
 / * * 
 * A primitive pool of { @ link HintsBuffer } buffers . Under normal conditions should only hold two buffers - the currently

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index c7a228f . . 06ac8a0 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 54 , 6 + 54 , 8 @ @ 
 
 
 1 . 0 . 8 
 + * Return InvalidRequest when using a keyspace that doesn ' t exist 
 + ( CASSANDRA - 3764 ) 
 * disallow user modification of System keyspace ( CASSANDRA - 3738 ) 
 * allow using sstable2json on secondary index data ( CASSANDRA - 3738 ) 
 * ( cqlsh ) add DESCRIBE COLUMNFAMILIES ( CASSANDRA - 3586 ) 
 diff - - git a / src / java / org / apache / cassandra / service / ClientState . java b / src / java / org / apache / cassandra / service / ClientState . java 
 index 0ea7272 . . d2df8a9 100644 
 - - - a / src / java / org / apache / cassandra / service / ClientState . java 
 + + + b / src / java / org / apache / cassandra / service / ClientState . java 
 @ @ - 18 , 12 + 18 , 7 @ @ 
 
 package org . apache . cassandra . service ; 
 
 - import java . util . ArrayList ; 
 - import java . util . HashMap ; 
 - import java . util . LinkedHashMap ; 
 - import java . util . List ; 
 - import java . util . Map ; 
 - import java . util . Set ; 
 + import java . util . * ; 
 
 import org . slf4j . Logger ; 
 import org . slf4j . LoggerFactory ; 
 @ @ - 32 , 6 + 27 , 7 @ @ import org . apache . cassandra . auth . AuthenticatedUser ; 
 import org . apache . cassandra . auth . Permission ; 
 import org . apache . cassandra . auth . Resources ; 
 import org . apache . cassandra . config . DatabaseDescriptor ; 
 + import org . apache . cassandra . config . Schema ; 
 import org . apache . cassandra . cql . CQLStatement ; 
 import org . apache . cassandra . db . Table ; 
 import org . apache . cassandra . thrift . AuthenticationException ; 
 @ @ - 86 , 8 + 82 , 10 @ @ public class ClientState 
 return keyspace ; 
 } 
 
 - public void setKeyspace ( String ks ) 
 + public void setKeyspace ( String ks ) throws InvalidRequestException 
 { 
 + if ( Schema . instance . getKSMetaData ( ks ) = = null ) 
 + throw new InvalidRequestException ( " Keyspace ' " + ks + " ' does not exist " ) ; 
 keyspace = ks ; 
 } 

