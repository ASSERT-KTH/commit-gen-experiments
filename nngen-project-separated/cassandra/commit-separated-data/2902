BLEU SCORE: 0.04372912656590315

TEST MSG: cqlsh : hanlde symlinks properly
GENERATED MSG: Add ALLOW FILTERING to CQL3 documentation

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 12469f2 . . 4e77faa 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 4 , 6 + 4 , 7 @ @ <nl> * Fix setting last compacted key in the wrong level for LCS ( CASSANDRA - 6284 ) <nl> * Add sub - ms precision formats to the timestamp parser ( CASSANDRA - 6395 ) <nl> * Expose a total memtable size metric for a CF ( CASSANDRA - 6391 ) <nl> + * cqlsh : hanlde symlinks properly ( CASSANDRA - 6425 ) <nl> Merged from 1 . 2 : <nl> * Fix thundering herd on endpoint cache invalidation ( CASSANDRA - 6345 ) <nl> * cqlsh : quote single quotes in strings inside collections ( CASSANDRA - 6172 ) <nl> diff - - git a / bin / cqlsh b / bin / cqlsh <nl> index acfb1f6 . . 094aa84 100755 <nl> - - - a / bin / cqlsh <nl> + + + b / bin / cqlsh <nl> @ @ - 66 , 9 + 66 , 11 @ @ except ImportError : <nl> CQL _ LIB _ PREFIX = ' cql - internal - only - ' <nl> THRIFT _ LIB _ PREFIX = ' thrift - python - internal - only - ' <nl> <nl> + CASSANDRA _ PATH = os . path . join ( os . path . dirname ( os . path . realpath ( _ _ file _ _ ) ) , ' . . ' ) <nl> + <nl> # use bundled libs for python - cql and thrift , if available . if there <nl> # is a . . / lib dir , use bundled libs there preferentially . <nl> - ZIPLIB _ DIRS = [ os . path . join ( os . path . dirname ( _ _ file _ _ ) , ' . . ' , ' lib ' ) ] <nl> + ZIPLIB _ DIRS = [ os . path . join ( CASSANDRA _ PATH , ' lib ' ) ] <nl> myplatform = platform . system ( ) <nl> if myplatform = = ' Linux ' : <nl> ZIPLIB _ DIRS . append ( ' / usr / share / cassandra / lib ' ) <nl> @ @ - 106 , 7 + 108 , 7 @ @ from cql . cqltypes import ( cql _ types , cql _ typename , lookup _ casstype , lookup _ cqlty <nl> <nl> # cqlsh should run correctly when run out of a Cassandra source tree , <nl> # out of an unpacked Cassandra tarball , and after a proper package install . <nl> - cqlshlibdir = os . path . join ( os . path . dirname ( os . path . realpath ( _ _ file _ _ ) ) , ' . . ' , ' pylib ' ) <nl> + cqlshlibdir = os . path . join ( CASSANDRA _ PATH , ' pylib ' ) <nl> if os . path . isdir ( cqlshlibdir ) : <nl> sys . path . insert ( 0 , cqlshlibdir ) <nl>
NEAREST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / db / KeyCollisionTest . java b / test / unit / org / apache / cassandra / db / KeyCollisionTest . java <nl> index e9b8ef3 . . 4d86bb7 100644 <nl> - - - a / test / unit / org / apache / cassandra / db / KeyCollisionTest . java <nl> + + + b / test / unit / org / apache / cassandra / db / KeyCollisionTest . java <nl> @ @ - 28 , 6 + 28 , 8 @ @ import org . junit . Test ; <nl> import org . apache . cassandra . SchemaLoader ; <nl> import org . apache . cassandra . db . columniterator . IdentityQueryFilter ; <nl> import org . apache . cassandra . db . filter . QueryPath ; <nl> + import org . apache . cassandra . db . marshal . AbstractType ; <nl> + import org . apache . cassandra . db . marshal . IntegerType ; <nl> import org . apache . cassandra . dht . * ; <nl> import org . apache . cassandra . config . * ; <nl> import org . apache . cassandra . service . StorageService ; <nl> @ @ - 206 , 5 + 208 , 10 @ @ public class KeyCollisionTest extends SchemaLoader <nl> <nl> return allTokens ; <nl> } <nl> + <nl> + public AbstractType < ? > getTokenValidator ( ) <nl> + { <nl> + return IntegerType . instance ; <nl> + } <nl> } <nl> }

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 12469f2 . . 4e77faa 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 4 , 6 + 4 , 7 @ @ 
 * Fix setting last compacted key in the wrong level for LCS ( CASSANDRA - 6284 ) 
 * Add sub - ms precision formats to the timestamp parser ( CASSANDRA - 6395 ) 
 * Expose a total memtable size metric for a CF ( CASSANDRA - 6391 ) 
 + * cqlsh : hanlde symlinks properly ( CASSANDRA - 6425 ) 
 Merged from 1 . 2 : 
 * Fix thundering herd on endpoint cache invalidation ( CASSANDRA - 6345 ) 
 * cqlsh : quote single quotes in strings inside collections ( CASSANDRA - 6172 ) 
 diff - - git a / bin / cqlsh b / bin / cqlsh 
 index acfb1f6 . . 094aa84 100755 
 - - - a / bin / cqlsh 
 + + + b / bin / cqlsh 
 @ @ - 66 , 9 + 66 , 11 @ @ except ImportError : 
 CQL _ LIB _ PREFIX = ' cql - internal - only - ' 
 THRIFT _ LIB _ PREFIX = ' thrift - python - internal - only - ' 
 
 + CASSANDRA _ PATH = os . path . join ( os . path . dirname ( os . path . realpath ( _ _ file _ _ ) ) , ' . . ' ) 
 + 
 # use bundled libs for python - cql and thrift , if available . if there 
 # is a . . / lib dir , use bundled libs there preferentially . 
 - ZIPLIB _ DIRS = [ os . path . join ( os . path . dirname ( _ _ file _ _ ) , ' . . ' , ' lib ' ) ] 
 + ZIPLIB _ DIRS = [ os . path . join ( CASSANDRA _ PATH , ' lib ' ) ] 
 myplatform = platform . system ( ) 
 if myplatform = = ' Linux ' : 
 ZIPLIB _ DIRS . append ( ' / usr / share / cassandra / lib ' ) 
 @ @ - 106 , 7 + 108 , 7 @ @ from cql . cqltypes import ( cql _ types , cql _ typename , lookup _ casstype , lookup _ cqlty 
 
 # cqlsh should run correctly when run out of a Cassandra source tree , 
 # out of an unpacked Cassandra tarball , and after a proper package install . 
 - cqlshlibdir = os . path . join ( os . path . dirname ( os . path . realpath ( _ _ file _ _ ) ) , ' . . ' , ' pylib ' ) 
 + cqlshlibdir = os . path . join ( CASSANDRA _ PATH , ' pylib ' ) 
 if os . path . isdir ( cqlshlibdir ) : 
 sys . path . insert ( 0 , cqlshlibdir ) 


NEAREST DIFF:
diff - - git a / test / unit / org / apache / cassandra / db / KeyCollisionTest . java b / test / unit / org / apache / cassandra / db / KeyCollisionTest . java 
 index e9b8ef3 . . 4d86bb7 100644 
 - - - a / test / unit / org / apache / cassandra / db / KeyCollisionTest . java 
 + + + b / test / unit / org / apache / cassandra / db / KeyCollisionTest . java 
 @ @ - 28 , 6 + 28 , 8 @ @ import org . junit . Test ; 
 import org . apache . cassandra . SchemaLoader ; 
 import org . apache . cassandra . db . columniterator . IdentityQueryFilter ; 
 import org . apache . cassandra . db . filter . QueryPath ; 
 + import org . apache . cassandra . db . marshal . AbstractType ; 
 + import org . apache . cassandra . db . marshal . IntegerType ; 
 import org . apache . cassandra . dht . * ; 
 import org . apache . cassandra . config . * ; 
 import org . apache . cassandra . service . StorageService ; 
 @ @ - 206 , 5 + 208 , 10 @ @ public class KeyCollisionTest extends SchemaLoader 
 
 return allTokens ; 
 } 
 + 
 + public AbstractType < ? > getTokenValidator ( ) 
 + { 
 + return IntegerType . instance ; 
 + } 
 } 
 }
