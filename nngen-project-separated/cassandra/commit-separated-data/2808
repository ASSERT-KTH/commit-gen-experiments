BLEU SCORE: 0.013878957858167952

TEST MSG: add SnapshotDetailsTabularData . java
GENERATED MSG: update memtable _ total _ space _ in _ mb comments

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / SnapshotDetailsTabularData . java b / src / java / org / apache / cassandra / db / SnapshotDetailsTabularData . java <nl> new file mode 100644 <nl> index 0000000 . . 97caea1 <nl> - - - / dev / null <nl> + + + b / src / java / org / apache / cassandra / db / SnapshotDetailsTabularData . java <nl> @ @ - 0 , 0 + 1 , 86 @ @ <nl> + / * <nl> + * Licensed to the Apache Software Foundation ( ASF ) under one <nl> + * or more contributor license agreements . See the NOTICE file <nl> + * distributed with this work for additional information <nl> + * regarding copyright ownership . The ASF licenses this file <nl> + * to you under the Apache License , Version 2 . 0 ( the <nl> + * " License " ) ; you may not use this file except in compliance <nl> + * with the License . You may obtain a copy of the License at <nl> + * <nl> + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 <nl> + * <nl> + * Unless required by applicable law or agreed to in writing , software <nl> + * distributed under the License is distributed on an " AS IS " BASIS , <nl> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . <nl> + * See the License for the specific language governing permissions and <nl> + * limitations under the License . <nl> + * / <nl> + package org . apache . cassandra . db ; <nl> + <nl> + import java . util . Map ; <nl> + import javax . management . openmbean . * ; <nl> + <nl> + import com . google . common . base . Throwables ; <nl> + import org . apache . cassandra . io . util . FileUtils ; <nl> + import org . apache . cassandra . utils . Pair ; <nl> + <nl> + <nl> + <nl> + <nl> + public class SnapshotDetailsTabularData <nl> + { <nl> + <nl> + private static final String [ ] ITEM _ NAMES = new String [ ] { " Snapshot name " , <nl> + " Keyspace name " , <nl> + " Column family name " , <nl> + " True size " , <nl> + " Size on disk " } ; <nl> + <nl> + private static final String [ ] ITEM _ DESCS = new String [ ] { " snapshot _ name " , <nl> + " keyspace _ name " , <nl> + " columnfamily _ name " , <nl> + " TrueDiskSpaceUsed " , <nl> + " TotalDiskSpaceUsed " } ; <nl> + <nl> + private static final String TYPE _ NAME = " SnapshotDetails " ; <nl> + <nl> + private static final String ROW _ DESC = " SnapshotDetails " ; <nl> + <nl> + private static final OpenType < ? > [ ] ITEM _ TYPES ; <nl> + <nl> + private static final CompositeType COMPOSITE _ TYPE ; <nl> + <nl> + public static final TabularType TABULAR _ TYPE ; <nl> + <nl> + static <nl> + { <nl> + try <nl> + { <nl> + ITEM _ TYPES = new OpenType [ ] { SimpleType . STRING , SimpleType . STRING , SimpleType . STRING , SimpleType . STRING , SimpleType . STRING } ; <nl> + <nl> + COMPOSITE _ TYPE = new CompositeType ( TYPE _ NAME , ROW _ DESC , ITEM _ NAMES , ITEM _ DESCS , ITEM _ TYPES ) ; <nl> + <nl> + TABULAR _ TYPE = new TabularType ( TYPE _ NAME , ROW _ DESC , COMPOSITE _ TYPE , ITEM _ NAMES ) ; <nl> + } <nl> + catch ( OpenDataException e ) <nl> + { <nl> + throw Throwables . propagate ( e ) ; <nl> + } <nl> + } <nl> + <nl> + <nl> + public static void from ( final String snapshot , final String ks , final String cf , Map . Entry < String , Pair < Long , Long > > snapshotDetail , TabularDataSupport result ) <nl> + { <nl> + try <nl> + { <nl> + final String totalSize = FileUtils . stringifyFileSize ( snapshotDetail . getValue ( ) . left ) ; <nl> + final String liveSize = FileUtils . stringifyFileSize ( snapshotDetail . getValue ( ) . right ) ; <nl> + result . put ( new CompositeDataSupport ( COMPOSITE _ TYPE , ITEM _ NAMES , <nl> + new Object [ ] { snapshot , ks , cf , liveSize , totalSize } ) ) ; <nl> + } <nl> + catch ( OpenDataException e ) <nl> + { <nl> + throw new RuntimeException ( e ) ; <nl> + } <nl> + } <nl> + }
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 248094d . . dd22b68 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 3 , 6 + 3 , 7 @ @ <nl> * Allow using quotes in " USE < keyspace > ; " CLI command ( CASSANDRA - 3208 ) <nl> * Log message when a full repair operation completes ( CASSANDRA - 3207 ) <nl> * Don ' t allow any cache loading exceptions to halt startup ( CASSANDRA - 3218 ) <nl> + * Fix sstableloader - - ignores option ( CASSANDRA - 3247 ) <nl> <nl> <nl> 0 . 8 . 6 <nl> diff - - git a / src / java / org / apache / cassandra / tools / BulkLoader . java b / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> index 65240cc . . f57ebfe 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> + + + b / src / java / org / apache / cassandra / tools / BulkLoader . java <nl> @ @ - 314 , 12 + 314 , 12 @ @ public class BulkLoader <nl> { <nl> for ( String node : nodes ) <nl> { <nl> - opts . ignores . add ( InetAddress . getByName ( node ) ) ; <nl> + opts . ignores . add ( InetAddress . getByName ( node . trim ( ) ) ) ; <nl> } <nl> } <nl> catch ( UnknownHostException e ) <nl> { <nl> - errorMsg ( e . getMessage ( ) , options ) ; <nl> + errorMsg ( " Unknown host : " + e . getMessage ( ) , options ) ; <nl> } <nl> } <nl> <nl> @ @ - 357 , 7 + 357 , 7 @ @ public class BulkLoader <nl> options . addOption ( " v " , VERBOSE _ OPTION , " verbose output " ) ; <nl> options . addOption ( " h " , HELP _ OPTION , " display this help message " ) ; <nl> options . addOption ( null , NOPROGRESS _ OPTION , " don ' t display progress " ) ; <nl> - options . addOption ( " i " , IGNORE _ NODES _ OPTION , " don ' t stream to this ( comma separated ) list of nodes " ) ; <nl> + options . addOption ( " i " , IGNORE _ NODES _ OPTION , " NODES " , " don ' t stream to this ( comma separated ) list of nodes " ) ; <nl> return options ; <nl> } <nl>

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / SnapshotDetailsTabularData . java b / src / java / org / apache / cassandra / db / SnapshotDetailsTabularData . java 
 new file mode 100644 
 index 0000000 . . 97caea1 
 - - - / dev / null 
 + + + b / src / java / org / apache / cassandra / db / SnapshotDetailsTabularData . java 
 @ @ - 0 , 0 + 1 , 86 @ @ 
 + / * 
 + * Licensed to the Apache Software Foundation ( ASF ) under one 
 + * or more contributor license agreements . See the NOTICE file 
 + * distributed with this work for additional information 
 + * regarding copyright ownership . The ASF licenses this file 
 + * to you under the Apache License , Version 2 . 0 ( the 
 + * " License " ) ; you may not use this file except in compliance 
 + * with the License . You may obtain a copy of the License at 
 + * 
 + * http : / / www . apache . org / licenses / LICENSE - 2 . 0 
 + * 
 + * Unless required by applicable law or agreed to in writing , software 
 + * distributed under the License is distributed on an " AS IS " BASIS , 
 + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND , either express or implied . 
 + * See the License for the specific language governing permissions and 
 + * limitations under the License . 
 + * / 
 + package org . apache . cassandra . db ; 
 + 
 + import java . util . Map ; 
 + import javax . management . openmbean . * ; 
 + 
 + import com . google . common . base . Throwables ; 
 + import org . apache . cassandra . io . util . FileUtils ; 
 + import org . apache . cassandra . utils . Pair ; 
 + 
 + 
 + 
 + 
 + public class SnapshotDetailsTabularData 
 + { 
 + 
 + private static final String [ ] ITEM _ NAMES = new String [ ] { " Snapshot name " , 
 + " Keyspace name " , 
 + " Column family name " , 
 + " True size " , 
 + " Size on disk " } ; 
 + 
 + private static final String [ ] ITEM _ DESCS = new String [ ] { " snapshot _ name " , 
 + " keyspace _ name " , 
 + " columnfamily _ name " , 
 + " TrueDiskSpaceUsed " , 
 + " TotalDiskSpaceUsed " } ; 
 + 
 + private static final String TYPE _ NAME = " SnapshotDetails " ; 
 + 
 + private static final String ROW _ DESC = " SnapshotDetails " ; 
 + 
 + private static final OpenType < ? > [ ] ITEM _ TYPES ; 
 + 
 + private static final CompositeType COMPOSITE _ TYPE ; 
 + 
 + public static final TabularType TABULAR _ TYPE ; 
 + 
 + static 
 + { 
 + try 
 + { 
 + ITEM _ TYPES = new OpenType [ ] { SimpleType . STRING , SimpleType . STRING , SimpleType . STRING , SimpleType . STRING , SimpleType . STRING } ; 
 + 
 + COMPOSITE _ TYPE = new CompositeType ( TYPE _ NAME , ROW _ DESC , ITEM _ NAMES , ITEM _ DESCS , ITEM _ TYPES ) ; 
 + 
 + TABULAR _ TYPE = new TabularType ( TYPE _ NAME , ROW _ DESC , COMPOSITE _ TYPE , ITEM _ NAMES ) ; 
 + } 
 + catch ( OpenDataException e ) 
 + { 
 + throw Throwables . propagate ( e ) ; 
 + } 
 + } 
 + 
 + 
 + public static void from ( final String snapshot , final String ks , final String cf , Map . Entry < String , Pair < Long , Long > > snapshotDetail , TabularDataSupport result ) 
 + { 
 + try 
 + { 
 + final String totalSize = FileUtils . stringifyFileSize ( snapshotDetail . getValue ( ) . left ) ; 
 + final String liveSize = FileUtils . stringifyFileSize ( snapshotDetail . getValue ( ) . right ) ; 
 + result . put ( new CompositeDataSupport ( COMPOSITE _ TYPE , ITEM _ NAMES , 
 + new Object [ ] { snapshot , ks , cf , liveSize , totalSize } ) ) ; 
 + } 
 + catch ( OpenDataException e ) 
 + { 
 + throw new RuntimeException ( e ) ; 
 + } 
 + } 
 + }

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 248094d . . dd22b68 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 3 , 6 + 3 , 7 @ @ 
 * Allow using quotes in " USE < keyspace > ; " CLI command ( CASSANDRA - 3208 ) 
 * Log message when a full repair operation completes ( CASSANDRA - 3207 ) 
 * Don ' t allow any cache loading exceptions to halt startup ( CASSANDRA - 3218 ) 
 + * Fix sstableloader - - ignores option ( CASSANDRA - 3247 ) 
 
 
 0 . 8 . 6 
 diff - - git a / src / java / org / apache / cassandra / tools / BulkLoader . java b / src / java / org / apache / cassandra / tools / BulkLoader . java 
 index 65240cc . . f57ebfe 100644 
 - - - a / src / java / org / apache / cassandra / tools / BulkLoader . java 
 + + + b / src / java / org / apache / cassandra / tools / BulkLoader . java 
 @ @ - 314 , 12 + 314 , 12 @ @ public class BulkLoader 
 { 
 for ( String node : nodes ) 
 { 
 - opts . ignores . add ( InetAddress . getByName ( node ) ) ; 
 + opts . ignores . add ( InetAddress . getByName ( node . trim ( ) ) ) ; 
 } 
 } 
 catch ( UnknownHostException e ) 
 { 
 - errorMsg ( e . getMessage ( ) , options ) ; 
 + errorMsg ( " Unknown host : " + e . getMessage ( ) , options ) ; 
 } 
 } 
 
 @ @ - 357 , 7 + 357 , 7 @ @ public class BulkLoader 
 options . addOption ( " v " , VERBOSE _ OPTION , " verbose output " ) ; 
 options . addOption ( " h " , HELP _ OPTION , " display this help message " ) ; 
 options . addOption ( null , NOPROGRESS _ OPTION , " don ' t display progress " ) ; 
 - options . addOption ( " i " , IGNORE _ NODES _ OPTION , " don ' t stream to this ( comma separated ) list of nodes " ) ; 
 + options . addOption ( " i " , IGNORE _ NODES _ OPTION , " NODES " , " don ' t stream to this ( comma separated ) list of nodes " ) ; 
 return options ; 
 } 

