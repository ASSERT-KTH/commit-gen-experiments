BLEU SCORE: 0.02139089632303349

TEST MSG: Hint streaming can cause decommission to fail
GENERATED MSG: Sleep for RING _ DELAY before replacing with same IP

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index ba3a675 . . ef5f72a 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 26 , 6 + 26 , 7 @ @ <nl> * exit CQLSH with error status code if script fails ( CASSANDRA - 6344 ) <nl> * Fix bug with some IN queries missig results ( CASSANDRA - 7105 ) <nl> * Fix availability validation for LOCAL _ ONE CL ( CASSANDRA - 7319 ) <nl> + * Hint streaming can cause decommission to fail ( CASSANDRA - 7219 ) <nl> <nl> <nl> 1 . 2 . 16 <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index 8e7c073 . . 494da33 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 2966 , 7 + 2966 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> <nl> private CountDownLatch streamHints ( ) <nl> { <nl> - if ( HintedHandOffManager . instance . listEndpointsPendingHints ( ) . size ( ) = = 0 ) <nl> + ColumnFamilyStore hintsCF = Table . open ( Table . SYSTEM _ KS ) . getColumnFamilyStore ( SystemTable . HINTS _ CF ) ; <nl> + if ( hintsCF . getMemtableColumnsCount ( ) = = 0 & & hintsCF . estimateKeys ( ) = = 0 ) <nl> return new CountDownLatch ( 0 ) ; <nl> <nl> / / gather all live nodes in the cluster that aren ' t also leaving
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index ba3a675 . . ef5f72a 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 26 , 6 + 26 , 7 @ @ 
 * exit CQLSH with error status code if script fails ( CASSANDRA - 6344 ) 
 * Fix bug with some IN queries missig results ( CASSANDRA - 7105 ) 
 * Fix availability validation for LOCAL _ ONE CL ( CASSANDRA - 7319 ) 
 + * Hint streaming can cause decommission to fail ( CASSANDRA - 7219 ) 
 
 
 1 . 2 . 16 
 diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index 8e7c073 . . 494da33 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 2966 , 7 + 2966 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 
 private CountDownLatch streamHints ( ) 
 { 
 - if ( HintedHandOffManager . instance . listEndpointsPendingHints ( ) . size ( ) = = 0 ) 
 + ColumnFamilyStore hintsCF = Table . open ( Table . SYSTEM _ KS ) . getColumnFamilyStore ( SystemTable . HINTS _ CF ) ; 
 + if ( hintsCF . getMemtableColumnsCount ( ) = = 0 & & hintsCF . estimateKeys ( ) = = 0 ) 
 return new CountDownLatch ( 0 ) ; 
 
 / / gather all live nodes in the cluster that aren ' t also leaving

NEAREST DIFF:
ELIMINATEDSENTENCE
