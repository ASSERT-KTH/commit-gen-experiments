BLEU SCORE: 0.04767707020457096

TEST MSG: Allow extra schema definitions in cassandra - stress yaml
GENERATED MSG: Better error checking of stress profile

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 1828476 . . 2a3aecd 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 0 <nl> + * Allow extra schema definitions in cassandra - stress yaml ( CASSANDRA - 9850 ) <nl> * Metrics should use up to date nomenclature ( CASSANDRA - 9448 ) <nl> * Change CREATE / ALTER TABLE syntax for compression ( CASSANDRA - 8384 ) <nl> * Cleanup crc and adler code for java 8 ( CASSANDRA - 9650 ) <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressProfile . java b / tools / stress / src / org / apache / cassandra / stress / StressProfile . java <nl> index e2b9575 . . 82f274e 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / StressProfile . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / StressProfile . java <nl> @ @ - 59 , 6 + 59 , 7 @ @ public class StressProfile implements Serializable <nl> { <nl> private String keyspaceCql ; <nl> private String tableCql ; <nl> + private List < String > extraSchemaDefinitions ; <nl> private String seedStr ; <nl> <nl> public String keyspaceName ; <nl> @ @ - 93 , 6 + 94 , 8 @ @ public class StressProfile implements Serializable <nl> queries = yaml . queries ; <nl> insert = yaml . insert ; <nl> <nl> + extraSchemaDefinitions = yaml . extra _ definitions ; <nl> + <nl> assert keyspaceName ! = null : " keyspace name is required in yaml file " ; <nl> assert tableName ! = null : " table name is required in yaml file " ; <nl> assert queries ! = null : " queries map is required in yaml file " ; <nl> @ @ - 185 , 6 + 188 , 24 @ @ public class StressProfile implements Serializable <nl> Uninterruptibles . sleepUninterruptibly ( settings . node . nodes . size ( ) , TimeUnit . SECONDS ) ; <nl> } <nl> <nl> + if ( extraSchemaDefinitions ! = null ) <nl> + { <nl> + for ( String extraCql : extraSchemaDefinitions ) <nl> + { <nl> + <nl> + try <nl> + { <nl> + client . execute ( extraCql , org . apache . cassandra . db . ConsistencyLevel . ONE ) ; <nl> + } <nl> + catch ( AlreadyExistsException e ) <nl> + { <nl> + } <nl> + } <nl> + <nl> + System . out . println ( String . format ( " Created extra schema . Sleeping % ss for propagation . " , settings . node . nodes . size ( ) ) ) ; <nl> + Uninterruptibles . sleepUninterruptibly ( settings . node . nodes . size ( ) , TimeUnit . SECONDS ) ; <nl> + } <nl> + <nl> maybeLoadSchemaInfo ( settings ) ; <nl> } <nl> <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressYaml . java b / tools / stress / src / org / apache / cassandra / stress / StressYaml . java <nl> index b6efc5e . . 90797b4 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / StressYaml . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / StressYaml . java <nl> @ @ - 30 , 6 + 30 , 8 @ @ public class StressYaml <nl> public String table ; <nl> public String table _ definition ; <nl> <nl> + public List < String > extra _ definitions ; <nl> + <nl> public List < Map < String , Object > > columnspec ; <nl> public Map < String , QueryDef > queries ; <nl> public Map < String , String > insert ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 1828476 . . 2a3aecd 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 0 
 + * Allow extra schema definitions in cassandra - stress yaml ( CASSANDRA - 9850 ) 
 * Metrics should use up to date nomenclature ( CASSANDRA - 9448 ) 
 * Change CREATE / ALTER TABLE syntax for compression ( CASSANDRA - 8384 ) 
 * Cleanup crc and adler code for java 8 ( CASSANDRA - 9650 ) 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressProfile . java b / tools / stress / src / org / apache / cassandra / stress / StressProfile . java 
 index e2b9575 . . 82f274e 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / StressProfile . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / StressProfile . java 
 @ @ - 59 , 6 + 59 , 7 @ @ public class StressProfile implements Serializable 
 { 
 private String keyspaceCql ; 
 private String tableCql ; 
 + private List < String > extraSchemaDefinitions ; 
 private String seedStr ; 
 
 public String keyspaceName ; 
 @ @ - 93 , 6 + 94 , 8 @ @ public class StressProfile implements Serializable 
 queries = yaml . queries ; 
 insert = yaml . insert ; 
 
 + extraSchemaDefinitions = yaml . extra _ definitions ; 
 + 
 assert keyspaceName ! = null : " keyspace name is required in yaml file " ; 
 assert tableName ! = null : " table name is required in yaml file " ; 
 assert queries ! = null : " queries map is required in yaml file " ; 
 @ @ - 185 , 6 + 188 , 24 @ @ public class StressProfile implements Serializable 
 Uninterruptibles . sleepUninterruptibly ( settings . node . nodes . size ( ) , TimeUnit . SECONDS ) ; 
 } 
 
 + if ( extraSchemaDefinitions ! = null ) 
 + { 
 + for ( String extraCql : extraSchemaDefinitions ) 
 + { 
 + 
 + try 
 + { 
 + client . execute ( extraCql , org . apache . cassandra . db . ConsistencyLevel . ONE ) ; 
 + } 
 + catch ( AlreadyExistsException e ) 
 + { 
 + } 
 + } 
 + 
 + System . out . println ( String . format ( " Created extra schema . Sleeping % ss for propagation . " , settings . node . nodes . size ( ) ) ) ; 
 + Uninterruptibles . sleepUninterruptibly ( settings . node . nodes . size ( ) , TimeUnit . SECONDS ) ; 
 + } 
 + 
 maybeLoadSchemaInfo ( settings ) ; 
 } 
 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressYaml . java b / tools / stress / src / org / apache / cassandra / stress / StressYaml . java 
 index b6efc5e . . 90797b4 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / StressYaml . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / StressYaml . java 
 @ @ - 30 , 6 + 30 , 8 @ @ public class StressYaml 
 public String table ; 
 public String table _ definition ; 
 
 + public List < String > extra _ definitions ; 
 + 
 public List < Map < String , Object > > columnspec ; 
 public Map < String , QueryDef > queries ; 
 public Map < String , String > insert ;

NEAREST DIFF:
ELIMINATEDSENTENCE
