BLEU SCORE: 0.034015426186864386

TEST MSG: ninja - fix an assert in CipherFactory , and added tests for it
GENERATED MSG: Follow - up # 2 for 9104 . Fix SchemaLoader + EmbeddedCassandraServer recover case

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / security / CipherFactory . java b / src / java / org / apache / cassandra / security / CipherFactory . java <nl> index 0ff9867 . . 7c1495a 100644 <nl> - - - a / src / java / org / apache / cassandra / security / CipherFactory . java <nl> + + + b / src / java / org / apache / cassandra / security / CipherFactory . java <nl> @ @ - 109 , 7 + 109 , 7 @ @ public class CipherFactory <nl> <nl> public Cipher getDecryptor ( String transformation , String keyAlias , byte [ ] iv ) throws IOException <nl> { <nl> - assert iv ! = null | | iv . length > 0 : " trying to decrypt , but the initialization vector is empty " ; <nl> + assert iv ! = null & & iv . length > 0 : " trying to decrypt , but the initialization vector is empty " ; <nl> return buildCipher ( transformation , keyAlias , iv , Cipher . DECRYPT _ MODE ) ; <nl> } <nl> <nl> diff - - git a / test / unit / org / apache / cassandra / security / CipherFactoryTest . java b / test / unit / org / apache / cassandra / security / CipherFactoryTest . java <nl> index 4239973 . . bb6f7ce 100644 <nl> - - - a / test / unit / org / apache / cassandra / security / CipherFactoryTest . java <nl> + + + b / test / unit / org / apache / cassandra / security / CipherFactoryTest . java <nl> @ @ - 84 , 4 + 84 , 16 @ @ public class CipherFactoryTest <nl> Cipher c2 = cipherFactory . buildCipher ( encryptionOptions . cipher , EncryptionContextGenerator . KEY _ ALIAS _ 2 , nextIV ( ) , Cipher . DECRYPT _ MODE ) ; <nl> Assert . assertFalse ( c1 = = c2 ) ; <nl> } <nl> + <nl> + @ Test ( expected = AssertionError . class ) <nl> + public void getDecryptor _ NullIv ( ) throws IOException <nl> + { <nl> + cipherFactory . getDecryptor ( encryptionOptions . cipher , encryptionOptions . key _ alias , null ) ; <nl> + } <nl> + <nl> + @ Test ( expected = AssertionError . class ) <nl> + public void getDecryptor _ EmptyIv ( ) throws IOException <nl> + { <nl> + cipherFactory . getDecryptor ( encryptionOptions . cipher , encryptionOptions . key _ alias , new byte [ 0 ] ) ; <nl> + } <nl> }
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / security / CipherFactory . java b / src / java / org / apache / cassandra / security / CipherFactory . java 
 index 0ff9867 . . 7c1495a 100644 
 - - - a / src / java / org / apache / cassandra / security / CipherFactory . java 
 + + + b / src / java / org / apache / cassandra / security / CipherFactory . java 
 @ @ - 109 , 7 + 109 , 7 @ @ public class CipherFactory 
 
 public Cipher getDecryptor ( String transformation , String keyAlias , byte [ ] iv ) throws IOException 
 { 
 - assert iv ! = null | | iv . length > 0 : " trying to decrypt , but the initialization vector is empty " ; 
 + assert iv ! = null & & iv . length > 0 : " trying to decrypt , but the initialization vector is empty " ; 
 return buildCipher ( transformation , keyAlias , iv , Cipher . DECRYPT _ MODE ) ; 
 } 
 
 diff - - git a / test / unit / org / apache / cassandra / security / CipherFactoryTest . java b / test / unit / org / apache / cassandra / security / CipherFactoryTest . java 
 index 4239973 . . bb6f7ce 100644 
 - - - a / test / unit / org / apache / cassandra / security / CipherFactoryTest . java 
 + + + b / test / unit / org / apache / cassandra / security / CipherFactoryTest . java 
 @ @ - 84 , 4 + 84 , 16 @ @ public class CipherFactoryTest 
 Cipher c2 = cipherFactory . buildCipher ( encryptionOptions . cipher , EncryptionContextGenerator . KEY _ ALIAS _ 2 , nextIV ( ) , Cipher . DECRYPT _ MODE ) ; 
 Assert . assertFalse ( c1 = = c2 ) ; 
 } 
 + 
 + @ Test ( expected = AssertionError . class ) 
 + public void getDecryptor _ NullIv ( ) throws IOException 
 + { 
 + cipherFactory . getDecryptor ( encryptionOptions . cipher , encryptionOptions . key _ alias , null ) ; 
 + } 
 + 
 + @ Test ( expected = AssertionError . class ) 
 + public void getDecryptor _ EmptyIv ( ) throws IOException 
 + { 
 + cipherFactory . getDecryptor ( encryptionOptions . cipher , encryptionOptions . key _ alias , new byte [ 0 ] ) ; 
 + } 
 }

NEAREST DIFF:
ELIMINATEDSENTENCE
