BLEU SCORE: 0.03089055318156698

TEST MSG: Update java driver to 2 . 0 . 4 ( for hadoop )
GENERATED MSG: merge from 1 . 1

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 3471bcc . . 20330f8 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 0 . 10 <nl> + * Update java driver ( for hadoop ) ( CASSANDRA - 7618 ) <nl> * Fix truncate to always flush ( CASSANDRA - 7511 ) <nl> * Remove shuffle and taketoken ( CASSANDRA - 7601 ) <nl> * Switch liveRatio - related log messages to DEBUG ( CASSANDRA - 7467 ) <nl> diff - - git a / build . xml b / build . xml <nl> index 68907df . . 4b64570 100644 <nl> - - - a / build . xml <nl> + + + b / build . xml <nl> @ @ - 387 , 7 + 387 , 7 @ @ <nl> < dependency groupId = " edu . stanford . ppl " artifactId = " snaptree " version = " 0 . 1 " / > <nl> < dependency groupId = " org . mindrot " artifactId = " jbcrypt " version = " 0 . 3m " / > <nl> < dependency groupId = " io . netty " artifactId = " netty " version = " 3 . 6 . 6 . Final " / > <nl> - < dependency groupId = " com . datastax . cassandra " artifactId = " cassandra - driver - core " version = " 2 . 0 . 1 " / > <nl> + < dependency groupId = " com . datastax . cassandra " artifactId = " cassandra - driver - core " version = " 2 . 0 . 4 " / > <nl> < dependency groupId = " net . sf . supercsv " artifactId = " super - csv " version = " 2 . 1 . 0 " / > <nl> < / dependencyManagement > <nl> < developer id = " alakshman " name = " Avinash Lakshman " / > <nl> diff - - git a / src / java / org / apache / cassandra / hadoop / cql3 / CqlConfigHelper . java b / src / java / org / apache / cassandra / hadoop / cql3 / CqlConfigHelper . java <nl> index b375ce2 . . 741f599 100644 <nl> - - - a / src / java / org / apache / cassandra / hadoop / cql3 / CqlConfigHelper . java <nl> + + + b / src / java / org / apache / cassandra / hadoop / cql3 / CqlConfigHelper . java <nl> @ @ - 422 , 15 + 422 , 15 @ @ public class CqlConfigHelper <nl> poolingOptions . setCoreConnectionsPerHost ( HostDistance . LOCAL , coreConnections . get ( ) ) ; <nl> if ( maxConnections . isPresent ( ) ) <nl> poolingOptions . setMaxConnectionsPerHost ( HostDistance . LOCAL , maxConnections . get ( ) ) ; <nl> - if ( maxSimultaneousRequests . isPresent ( ) ) <nl> - poolingOptions . setMaxSimultaneousRequestsPerConnectionThreshold ( HostDistance . LOCAL , maxSimultaneousRequests . get ( ) ) ; <nl> if ( minSimultaneousRequests . isPresent ( ) ) <nl> poolingOptions . setMinSimultaneousRequestsPerConnectionThreshold ( HostDistance . LOCAL , minSimultaneousRequests . get ( ) ) ; <nl> + if ( maxSimultaneousRequests . isPresent ( ) ) <nl> + poolingOptions . setMaxSimultaneousRequestsPerConnectionThreshold ( HostDistance . LOCAL , maxSimultaneousRequests . get ( ) ) ; <nl> <nl> poolingOptions . setCoreConnectionsPerHost ( HostDistance . REMOTE , 0 ) <nl> . setMaxConnectionsPerHost ( HostDistance . REMOTE , 0 ) <nl> - . setMaxSimultaneousRequestsPerConnectionThreshold ( HostDistance . REMOTE , 0 ) <nl> - . setMinSimultaneousRequestsPerConnectionThreshold ( HostDistance . REMOTE , 0 ) ; <nl> + . setMinSimultaneousRequestsPerConnectionThreshold ( HostDistance . REMOTE , 0 ) <nl> + . setMaxSimultaneousRequestsPerConnectionThreshold ( HostDistance . REMOTE , 0 ) ; <nl> <nl> return poolingOptions ; <nl> }
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / HintedHandOffManager . java b / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> index a83fbab . . e2dc046 100644 <nl> - - - a / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> + + + b / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> @ @ - 391 , 7 + 391 , 9 @ @ public class HintedHandOffManager implements HintedHandOffManagerMBean <nl> { <nl> Token < ? > token = StorageService . getPartitioner ( ) . getTokenFactory ( ) . fromByteArray ( row . key . key ) ; <nl> InetAddress target = StorageService . instance . getTokenMetadata ( ) . getEndpoint ( token ) ; <nl> - scheduleHintDelivery ( target ) ; <nl> + / / token may have since been removed ( in which case we have just read back a tombstone ) <nl> + if ( target ! = null ) <nl> + scheduleHintDelivery ( target ) ; <nl> } <nl> <nl> if ( logger _ . isDebugEnabled ( ) )

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 3471bcc . . 20330f8 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 0 . 10 
 + * Update java driver ( for hadoop ) ( CASSANDRA - 7618 ) 
 * Fix truncate to always flush ( CASSANDRA - 7511 ) 
 * Remove shuffle and taketoken ( CASSANDRA - 7601 ) 
 * Switch liveRatio - related log messages to DEBUG ( CASSANDRA - 7467 ) 
 diff - - git a / build . xml b / build . xml 
 index 68907df . . 4b64570 100644 
 - - - a / build . xml 
 + + + b / build . xml 
 @ @ - 387 , 7 + 387 , 7 @ @ 
 < dependency groupId = " edu . stanford . ppl " artifactId = " snaptree " version = " 0 . 1 " / > 
 < dependency groupId = " org . mindrot " artifactId = " jbcrypt " version = " 0 . 3m " / > 
 < dependency groupId = " io . netty " artifactId = " netty " version = " 3 . 6 . 6 . Final " / > 
 - < dependency groupId = " com . datastax . cassandra " artifactId = " cassandra - driver - core " version = " 2 . 0 . 1 " / > 
 + < dependency groupId = " com . datastax . cassandra " artifactId = " cassandra - driver - core " version = " 2 . 0 . 4 " / > 
 < dependency groupId = " net . sf . supercsv " artifactId = " super - csv " version = " 2 . 1 . 0 " / > 
 < / dependencyManagement > 
 < developer id = " alakshman " name = " Avinash Lakshman " / > 
 diff - - git a / src / java / org / apache / cassandra / hadoop / cql3 / CqlConfigHelper . java b / src / java / org / apache / cassandra / hadoop / cql3 / CqlConfigHelper . java 
 index b375ce2 . . 741f599 100644 
 - - - a / src / java / org / apache / cassandra / hadoop / cql3 / CqlConfigHelper . java 
 + + + b / src / java / org / apache / cassandra / hadoop / cql3 / CqlConfigHelper . java 
 @ @ - 422 , 15 + 422 , 15 @ @ public class CqlConfigHelper 
 poolingOptions . setCoreConnectionsPerHost ( HostDistance . LOCAL , coreConnections . get ( ) ) ; 
 if ( maxConnections . isPresent ( ) ) 
 poolingOptions . setMaxConnectionsPerHost ( HostDistance . LOCAL , maxConnections . get ( ) ) ; 
 - if ( maxSimultaneousRequests . isPresent ( ) ) 
 - poolingOptions . setMaxSimultaneousRequestsPerConnectionThreshold ( HostDistance . LOCAL , maxSimultaneousRequests . get ( ) ) ; 
 if ( minSimultaneousRequests . isPresent ( ) ) 
 poolingOptions . setMinSimultaneousRequestsPerConnectionThreshold ( HostDistance . LOCAL , minSimultaneousRequests . get ( ) ) ; 
 + if ( maxSimultaneousRequests . isPresent ( ) ) 
 + poolingOptions . setMaxSimultaneousRequestsPerConnectionThreshold ( HostDistance . LOCAL , maxSimultaneousRequests . get ( ) ) ; 
 
 poolingOptions . setCoreConnectionsPerHost ( HostDistance . REMOTE , 0 ) 
 . setMaxConnectionsPerHost ( HostDistance . REMOTE , 0 ) 
 - . setMaxSimultaneousRequestsPerConnectionThreshold ( HostDistance . REMOTE , 0 ) 
 - . setMinSimultaneousRequestsPerConnectionThreshold ( HostDistance . REMOTE , 0 ) ; 
 + . setMinSimultaneousRequestsPerConnectionThreshold ( HostDistance . REMOTE , 0 ) 
 + . setMaxSimultaneousRequestsPerConnectionThreshold ( HostDistance . REMOTE , 0 ) ; 
 
 return poolingOptions ; 
 }

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / HintedHandOffManager . java b / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 index a83fbab . . e2dc046 100644 
 - - - a / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 + + + b / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 @ @ - 391 , 7 + 391 , 9 @ @ public class HintedHandOffManager implements HintedHandOffManagerMBean 
 { 
 Token < ? > token = StorageService . getPartitioner ( ) . getTokenFactory ( ) . fromByteArray ( row . key . key ) ; 
 InetAddress target = StorageService . instance . getTokenMetadata ( ) . getEndpoint ( token ) ; 
 - scheduleHintDelivery ( target ) ; 
 + / / token may have since been removed ( in which case we have just read back a tombstone ) 
 + if ( target ! = null ) 
 + scheduleHintDelivery ( target ) ; 
 } 
 
 if ( logger _ . isDebugEnabled ( ) )
