BLEU SCORE: 1.3768224674873579E-5

TEST MSG: ninja suppresswarnings
GENERATED MSG: assert that we ' re not using the size of a freed memory region ( a sign of reference - counting bugs )

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / io / util / RandomAccessReader . java b / src / java / org / apache / cassandra / io / util / RandomAccessReader . java <nl> index fef206e . . c4be8e9 100644 <nl> - - - a / src / java / org / apache / cassandra / io / util / RandomAccessReader . java <nl> + + + b / src / java / org / apache / cassandra / io / util / RandomAccessReader . java <nl> @ @ - 76 , 6 + 76 , 7 @ @ public class RandomAccessReader extends AbstractDataInput implements FileDataInp <nl> / / not have a shared channel . <nl> private static class RandomAccessReaderWithChannel extends RandomAccessReader <nl> { <nl> + @ SuppressWarnings ( " resource " ) <nl> RandomAccessReaderWithChannel ( File file ) <nl> { <nl> super ( new ChannelProxy ( file ) , DEFAULT _ BUFFER _ SIZE , - 1L , BufferType . OFF _ HEAP ) ;
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 87be6fa . . 70bb919 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 3 + 1 , 7 @ @ <nl> + 1 . 2 . 12 <nl> + * ( Hadoop ) Require CFRR batchSize to be at least 2 ( CASSANDRA - 6114 ) <nl> + <nl> + <nl> 1 . 2 . 11 <nl> * Add a warning for small LCS sstable size ( CASSANDRA - 6191 ) <nl> * Add ability to list specific KS / CF combinations in nodetool cfstats ( CASSANDRA - 4191 ) <nl> diff - - git a / src / java / org / apache / cassandra / hadoop / ColumnFamilyRecordReader . java b / src / java / org / apache / cassandra / hadoop / ColumnFamilyRecordReader . java <nl> index 701260a . . 6846356 100644 <nl> - - - a / src / java / org / apache / cassandra / hadoop / ColumnFamilyRecordReader . java <nl> + + + b / src / java / org / apache / cassandra / hadoop / ColumnFamilyRecordReader . java <nl> @ @ - 144 , 6 + 144 , 9 @ @ public class ColumnFamilyRecordReader extends RecordReader < ByteBuffer , SortedMap <nl> cfName = ConfigHelper . getInputColumnFamily ( conf ) ; <nl> consistencyLevel = ConsistencyLevel . valueOf ( ConfigHelper . getReadConsistencyLevel ( conf ) ) ; <nl> keyspace = ConfigHelper . getInputKeyspace ( conf ) ; <nl> + <nl> + if ( batchSize < 2 ) <nl> + throw new IllegalArgumentException ( " Minimum batchSize is 2 . Suggested batchSize is 100 or more " ) ; <nl> <nl> try <nl> {

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / io / util / RandomAccessReader . java b / src / java / org / apache / cassandra / io / util / RandomAccessReader . java 
 index fef206e . . c4be8e9 100644 
 - - - a / src / java / org / apache / cassandra / io / util / RandomAccessReader . java 
 + + + b / src / java / org / apache / cassandra / io / util / RandomAccessReader . java 
 @ @ - 76 , 6 + 76 , 7 @ @ public class RandomAccessReader extends AbstractDataInput implements FileDataInp 
 / / not have a shared channel . 
 private static class RandomAccessReaderWithChannel extends RandomAccessReader 
 { 
 + @ SuppressWarnings ( " resource " ) 
 RandomAccessReaderWithChannel ( File file ) 
 { 
 super ( new ChannelProxy ( file ) , DEFAULT _ BUFFER _ SIZE , - 1L , BufferType . OFF _ HEAP ) ;

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 87be6fa . . 70bb919 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 3 + 1 , 7 @ @ 
 + 1 . 2 . 12 
 + * ( Hadoop ) Require CFRR batchSize to be at least 2 ( CASSANDRA - 6114 ) 
 + 
 + 
 1 . 2 . 11 
 * Add a warning for small LCS sstable size ( CASSANDRA - 6191 ) 
 * Add ability to list specific KS / CF combinations in nodetool cfstats ( CASSANDRA - 4191 ) 
 diff - - git a / src / java / org / apache / cassandra / hadoop / ColumnFamilyRecordReader . java b / src / java / org / apache / cassandra / hadoop / ColumnFamilyRecordReader . java 
 index 701260a . . 6846356 100644 
 - - - a / src / java / org / apache / cassandra / hadoop / ColumnFamilyRecordReader . java 
 + + + b / src / java / org / apache / cassandra / hadoop / ColumnFamilyRecordReader . java 
 @ @ - 144 , 6 + 144 , 9 @ @ public class ColumnFamilyRecordReader extends RecordReader < ByteBuffer , SortedMap 
 cfName = ConfigHelper . getInputColumnFamily ( conf ) ; 
 consistencyLevel = ConsistencyLevel . valueOf ( ConfigHelper . getReadConsistencyLevel ( conf ) ) ; 
 keyspace = ConfigHelper . getInputKeyspace ( conf ) ; 
 + 
 + if ( batchSize < 2 ) 
 + throw new IllegalArgumentException ( " Minimum batchSize is 2 . Suggested batchSize is 100 or more " ) ; 
 
 try 
 {
