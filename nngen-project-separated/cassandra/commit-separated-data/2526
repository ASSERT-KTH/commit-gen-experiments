BLEU SCORE: 0.014199193612838947

TEST MSG: fix equals to compare this to the parm , rather than this to this
GENERATED MSG: LazilyCompactedRow and QueryFilter incorrectly claimed their trivial reduce case was trivial

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / NativeCounterCell . java b / src / java / org / apache / cassandra / db / NativeCounterCell . java <nl> index abcf598 . . 2828e13 100644 <nl> - - - a / src / java / org / apache / cassandra / db / NativeCounterCell . java <nl> + + + b / src / java / org / apache / cassandra / db / NativeCounterCell . java <nl> @ @ - 180 , 7 + 180 , 7 @ @ public class NativeCounterCell extends NativeCell implements CounterCell <nl> <nl> public boolean equals ( Cell cell ) <nl> { <nl> - return cell instanceof CounterCell & & equals ( ( CounterCell ) this ) ; <nl> + return cell instanceof CounterCell & & equals ( ( CounterCell ) cell ) ; <nl> } <nl> <nl> public boolean equals ( CounterCell cell ) <nl> diff - - git a / src / java / org / apache / cassandra / db / NativeExpiringCell . java b / src / java / org / apache / cassandra / db / NativeExpiringCell . java <nl> index 5ac0e81 . . 0822fbd 100644 <nl> - - - a / src / java / org / apache / cassandra / db / NativeExpiringCell . java <nl> + + + b / src / java / org / apache / cassandra / db / NativeExpiringCell . java <nl> @ @ - 130 , 7 + 130 , 7 @ @ public class NativeExpiringCell extends NativeCell implements ExpiringCell <nl> <nl> public boolean equals ( Cell cell ) <nl> { <nl> - return cell instanceof ExpiringCell & & equals ( ( ExpiringCell ) this ) ; <nl> + return cell instanceof ExpiringCell & & equals ( ( ExpiringCell ) cell ) ; <nl> } <nl> <nl> protected boolean equals ( ExpiringCell cell )
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / RowIteratorFactory . java b / src / java / org / apache / cassandra / db / RowIteratorFactory . java <nl> index eb457c0 . . a835a21 100644 <nl> - - - a / src / java / org / apache / cassandra / db / RowIteratorFactory . java <nl> + + + b / src / java / org / apache / cassandra / db / RowIteratorFactory . java <nl> @ @ - 100 , 11 + 100 , 6 @ @ public class RowIteratorFactory <nl> private DecoratedKey key ; <nl> private ColumnFamily returnCF ; <nl> <nl> - public boolean trivialReduceIsTrivial ( ) <nl> - { <nl> - return false ; <nl> - } <nl> - <nl> @ Override <nl> protected void onKeyChange ( ) <nl> { <nl> diff - - git a / src / java / org / apache / cassandra / db / compaction / CompactionIterable . java b / src / java / org / apache / cassandra / db / compaction / CompactionIterable . java <nl> index 4d1f6ab . . bb8d2bd 100644 <nl> - - - a / src / java / org / apache / cassandra / db / compaction / CompactionIterable . java <nl> + + + b / src / java / org / apache / cassandra / db / compaction / CompactionIterable . java <nl> @ @ - 88 , 11 + 88 , 6 @ @ public class CompactionIterable extends AbstractCompactionIterable <nl> { <nl> protected final List < SSTableIdentityIterator > rows = new ArrayList < SSTableIdentityIterator > ( ) ; <nl> <nl> - public boolean trivialReduceIsTrivial ( ) <nl> - { <nl> - return false ; <nl> - } <nl> - <nl> public void reduce ( IColumnIterator current ) <nl> { <nl> rows . add ( ( SSTableIdentityIterator ) current ) ; <nl> diff - - git a / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java b / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java <nl> index 5eea926 . . 4b0f56f 100644 <nl> - - - a / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java <nl> + + + b / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java <nl> @ @ - 215 , 11 + 215 , 6 @ @ public class LazilyCompactedRow extends AbstractCompactedRow implements IIterabl <nl> int size = 0 ; <nl> long maxTimestampSeen = Long . MIN _ VALUE ; <nl> <nl> - public boolean trivialReduceIsTrivial ( ) <nl> - { <nl> - return true ; <nl> - } <nl> - <nl> public void reduce ( IColumn current ) <nl> { <nl> container . addColumn ( current ) ; <nl> diff - - git a / src / java / org / apache / cassandra / db / compaction / ParallelCompactionIterable . java b / src / java / org / apache / cassandra / db / compaction / ParallelCompactionIterable . java <nl> index c6000b0 . . e9bf574 100644 <nl> - - - a / src / java / org / apache / cassandra / db / compaction / ParallelCompactionIterable . java <nl> + + + b / src / java / org / apache / cassandra / db / compaction / ParallelCompactionIterable . java <nl> @ @ - 148 , 11 + 148 , 6 @ @ public class ParallelCompactionIterable extends AbstractCompactionIterable <nl> private final ThreadPoolExecutor executor ; <nl> private int row = 0 ; <nl> <nl> - public boolean trivialReduceIsTrivial ( ) <nl> - { <nl> - return false ; <nl> - } <nl> - <nl> private Reducer ( ) <nl> { <nl> super ( ) ; <nl> diff - - git a / src / java / org / apache / cassandra / db / filter / QueryFilter . java b / src / java / org / apache / cassandra / db / filter / QueryFilter . java <nl> index cdf7b0f . . c27d636 100644 <nl> - - - a / src / java / org / apache / cassandra / db / filter / QueryFilter . java <nl> + + + b / src / java / org / apache / cassandra / db / filter / QueryFilter . java <nl> @ @ - 97 , 11 + 97 , 6 @ @ public class QueryFilter <nl> { <nl> ColumnFamily curCF = returnCF . cloneMeShallow ( ) ; <nl> <nl> - public boolean trivialReduceIsTrivial ( ) <nl> - { <nl> - return true ; <nl> - } <nl> - <nl> protected boolean isEqual ( IColumn o1 , IColumn o2 ) <nl> { <nl> return o1 . name ( ) . equals ( o2 . name ( ) ) ; <nl> diff - - git a / src / java / org / apache / cassandra / io / sstable / ReducingKeyIterator . java b / src / java / org / apache / cassandra / io / sstable / ReducingKeyIterator . java <nl> index cdcd875 . . af5922b 100644 <nl> - - - a / src / java / org / apache / cassandra / io / sstable / ReducingKeyIterator . java <nl> + + + b / src / java / org / apache / cassandra / io / sstable / ReducingKeyIterator . java <nl> @ @ - 43 , 6 + 43 , 7 @ @ public class ReducingKeyIterator implements CloseableIterator < DecoratedKey > <nl> { <nl> DecoratedKey < ? > reduced = null ; <nl> <nl> + @ Override <nl> public boolean trivialReduceIsTrivial ( ) <nl> { <nl> return true ; <nl> diff - - git a / src / java / org / apache / cassandra / service / RangeSliceResponseResolver . java b / src / java / org / apache / cassandra / service / RangeSliceResponseResolver . java <nl> index 618f55e . . 3be61d1 100644 <nl> - - - a / src / java / org / apache / cassandra / service / RangeSliceResponseResolver . java <nl> + + + b / src / java / org / apache / cassandra / service / RangeSliceResponseResolver . java <nl> @ @ - 141 , 11 + 141 , 6 @ @ public class RangeSliceResponseResolver implements IResponseResolver < Iterable < Ro <nl> List < InetAddress > versionSources = new ArrayList < InetAddress > ( sources . size ( ) ) ; <nl> DecoratedKey key ; <nl> <nl> - public boolean trivialReduceIsTrivial ( ) <nl> - { <nl> - return false ; <nl> - } <nl> - <nl> public void reduce ( Pair < Row , InetAddress > current ) <nl> { <nl> key = current . left . key ; <nl> diff - - git a / src / java / org / apache / cassandra / utils / MergeIterator . java b / src / java / org / apache / cassandra / utils / MergeIterator . java <nl> index ecfc725 . . fbba415 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / MergeIterator . java <nl> + + + b / src / java / org / apache / cassandra / utils / MergeIterator . java <nl> @ @ - 161 , 7 + 161 , 10 @ @ public abstract class MergeIterator < In , Out > extends AbstractIterator < Out > implem <nl> / * * <nl> * @ return true if Out is the same as In for the case of a single source iterator <nl> * / <nl> - public abstract boolean trivialReduceIsTrivial ( ) ; <nl> + public boolean trivialReduceIsTrivial ( ) <nl> + { <nl> + return false ; <nl> + } <nl> <nl> / * * <nl> * combine this object with the previous ones . <nl> diff - - git a / test / unit / org / apache / cassandra / utils / MergeIteratorTest . java b / test / unit / org / apache / cassandra / utils / MergeIteratorTest . java <nl> index 2ff4fd9 . . 01e8c97 100644 <nl> - - - a / test / unit / org / apache / cassandra / utils / MergeIteratorTest . java <nl> + + + b / test / unit / org / apache / cassandra / utils / MergeIteratorTest . java <nl> @ @ - 51 , 11 + 51 , 6 @ @ public class MergeIteratorTest <nl> { <nl> String concatted = " " ; <nl> <nl> - public boolean trivialReduceIsTrivial ( ) <nl> - { <nl> - return false ; / / technically true , but let ' s not optimize anything away here . . . <nl> - } <nl> - <nl> public void reduce ( String value ) <nl> { <nl> concatted + = value ;

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / NativeCounterCell . java b / src / java / org / apache / cassandra / db / NativeCounterCell . java 
 index abcf598 . . 2828e13 100644 
 - - - a / src / java / org / apache / cassandra / db / NativeCounterCell . java 
 + + + b / src / java / org / apache / cassandra / db / NativeCounterCell . java 
 @ @ - 180 , 7 + 180 , 7 @ @ public class NativeCounterCell extends NativeCell implements CounterCell 
 
 public boolean equals ( Cell cell ) 
 { 
 - return cell instanceof CounterCell & & equals ( ( CounterCell ) this ) ; 
 + return cell instanceof CounterCell & & equals ( ( CounterCell ) cell ) ; 
 } 
 
 public boolean equals ( CounterCell cell ) 
 diff - - git a / src / java / org / apache / cassandra / db / NativeExpiringCell . java b / src / java / org / apache / cassandra / db / NativeExpiringCell . java 
 index 5ac0e81 . . 0822fbd 100644 
 - - - a / src / java / org / apache / cassandra / db / NativeExpiringCell . java 
 + + + b / src / java / org / apache / cassandra / db / NativeExpiringCell . java 
 @ @ - 130 , 7 + 130 , 7 @ @ public class NativeExpiringCell extends NativeCell implements ExpiringCell 
 
 public boolean equals ( Cell cell ) 
 { 
 - return cell instanceof ExpiringCell & & equals ( ( ExpiringCell ) this ) ; 
 + return cell instanceof ExpiringCell & & equals ( ( ExpiringCell ) cell ) ; 
 } 
 
 protected boolean equals ( ExpiringCell cell )

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / RowIteratorFactory . java b / src / java / org / apache / cassandra / db / RowIteratorFactory . java 
 index eb457c0 . . a835a21 100644 
 - - - a / src / java / org / apache / cassandra / db / RowIteratorFactory . java 
 + + + b / src / java / org / apache / cassandra / db / RowIteratorFactory . java 
 @ @ - 100 , 11 + 100 , 6 @ @ public class RowIteratorFactory 
 private DecoratedKey key ; 
 private ColumnFamily returnCF ; 
 
 - public boolean trivialReduceIsTrivial ( ) 
 - { 
 - return false ; 
 - } 
 - 
 @ Override 
 protected void onKeyChange ( ) 
 { 
 diff - - git a / src / java / org / apache / cassandra / db / compaction / CompactionIterable . java b / src / java / org / apache / cassandra / db / compaction / CompactionIterable . java 
 index 4d1f6ab . . bb8d2bd 100644 
 - - - a / src / java / org / apache / cassandra / db / compaction / CompactionIterable . java 
 + + + b / src / java / org / apache / cassandra / db / compaction / CompactionIterable . java 
 @ @ - 88 , 11 + 88 , 6 @ @ public class CompactionIterable extends AbstractCompactionIterable 
 { 
 protected final List < SSTableIdentityIterator > rows = new ArrayList < SSTableIdentityIterator > ( ) ; 
 
 - public boolean trivialReduceIsTrivial ( ) 
 - { 
 - return false ; 
 - } 
 - 
 public void reduce ( IColumnIterator current ) 
 { 
 rows . add ( ( SSTableIdentityIterator ) current ) ; 
 diff - - git a / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java b / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java 
 index 5eea926 . . 4b0f56f 100644 
 - - - a / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java 
 + + + b / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java 
 @ @ - 215 , 11 + 215 , 6 @ @ public class LazilyCompactedRow extends AbstractCompactedRow implements IIterabl 
 int size = 0 ; 
 long maxTimestampSeen = Long . MIN _ VALUE ; 
 
 - public boolean trivialReduceIsTrivial ( ) 
 - { 
 - return true ; 
 - } 
 - 
 public void reduce ( IColumn current ) 
 { 
 container . addColumn ( current ) ; 
 diff - - git a / src / java / org / apache / cassandra / db / compaction / ParallelCompactionIterable . java b / src / java / org / apache / cassandra / db / compaction / ParallelCompactionIterable . java 
 index c6000b0 . . e9bf574 100644 
 - - - a / src / java / org / apache / cassandra / db / compaction / ParallelCompactionIterable . java 
 + + + b / src / java / org / apache / cassandra / db / compaction / ParallelCompactionIterable . java 
 @ @ - 148 , 11 + 148 , 6 @ @ public class ParallelCompactionIterable extends AbstractCompactionIterable 
 private final ThreadPoolExecutor executor ; 
 private int row = 0 ; 
 
 - public boolean trivialReduceIsTrivial ( ) 
 - { 
 - return false ; 
 - } 
 - 
 private Reducer ( ) 
 { 
 super ( ) ; 
 diff - - git a / src / java / org / apache / cassandra / db / filter / QueryFilter . java b / src / java / org / apache / cassandra / db / filter / QueryFilter . java 
 index cdf7b0f . . c27d636 100644 
 - - - a / src / java / org / apache / cassandra / db / filter / QueryFilter . java 
 + + + b / src / java / org / apache / cassandra / db / filter / QueryFilter . java 
 @ @ - 97 , 11 + 97 , 6 @ @ public class QueryFilter 
 { 
 ColumnFamily curCF = returnCF . cloneMeShallow ( ) ; 
 
 - public boolean trivialReduceIsTrivial ( ) 
 - { 
 - return true ; 
 - } 
 - 
 protected boolean isEqual ( IColumn o1 , IColumn o2 ) 
 { 
 return o1 . name ( ) . equals ( o2 . name ( ) ) ; 
 diff - - git a / src / java / org / apache / cassandra / io / sstable / ReducingKeyIterator . java b / src / java / org / apache / cassandra / io / sstable / ReducingKeyIterator . java 
 index cdcd875 . . af5922b 100644 
 - - - a / src / java / org / apache / cassandra / io / sstable / ReducingKeyIterator . java 
 + + + b / src / java / org / apache / cassandra / io / sstable / ReducingKeyIterator . java 
 @ @ - 43 , 6 + 43 , 7 @ @ public class ReducingKeyIterator implements CloseableIterator < DecoratedKey > 
 { 
 DecoratedKey < ? > reduced = null ; 
 
 + @ Override 
 public boolean trivialReduceIsTrivial ( ) 
 { 
 return true ; 
 diff - - git a / src / java / org / apache / cassandra / service / RangeSliceResponseResolver . java b / src / java / org / apache / cassandra / service / RangeSliceResponseResolver . java 
 index 618f55e . . 3be61d1 100644 
 - - - a / src / java / org / apache / cassandra / service / RangeSliceResponseResolver . java 
 + + + b / src / java / org / apache / cassandra / service / RangeSliceResponseResolver . java 
 @ @ - 141 , 11 + 141 , 6 @ @ public class RangeSliceResponseResolver implements IResponseResolver < Iterable < Ro 
 List < InetAddress > versionSources = new ArrayList < InetAddress > ( sources . size ( ) ) ; 
 DecoratedKey key ; 
 
 - public boolean trivialReduceIsTrivial ( ) 
 - { 
 - return false ; 
 - } 
 - 
 public void reduce ( Pair < Row , InetAddress > current ) 
 { 
 key = current . left . key ; 
 diff - - git a / src / java / org / apache / cassandra / utils / MergeIterator . java b / src / java / org / apache / cassandra / utils / MergeIterator . java 
 index ecfc725 . . fbba415 100644 
 - - - a / src / java / org / apache / cassandra / utils / MergeIterator . java 
 + + + b / src / java / org / apache / cassandra / utils / MergeIterator . java 
 @ @ - 161 , 7 + 161 , 10 @ @ public abstract class MergeIterator < In , Out > extends AbstractIterator < Out > implem 
 / * * 
 * @ return true if Out is the same as In for the case of a single source iterator 
 * / 
 - public abstract boolean trivialReduceIsTrivial ( ) ; 
 + public boolean trivialReduceIsTrivial ( ) 
 + { 
 + return false ; 
 + } 
 
 / * * 
 * combine this object with the previous ones . 
 diff - - git a / test / unit / org / apache / cassandra / utils / MergeIteratorTest . java b / test / unit / org / apache / cassandra / utils / MergeIteratorTest . java 
 index 2ff4fd9 . . 01e8c97 100644 
 - - - a / test / unit / org / apache / cassandra / utils / MergeIteratorTest . java 
 + + + b / test / unit / org / apache / cassandra / utils / MergeIteratorTest . java 
 @ @ - 51 , 11 + 51 , 6 @ @ public class MergeIteratorTest 
 { 
 String concatted = " " ; 
 
 - public boolean trivialReduceIsTrivial ( ) 
 - { 
 - return false ; / / technically true , but let ' s not optimize anything away here . . . 
 - } 
 - 
 public void reduce ( String value ) 
 { 
 concatted + = value ;
