BLEU SCORE: 0.03416211359799979

TEST MSG: cqlsh copyutil should get host metadata by connected address
GENERATED MSG: cqlsh : allow COPY FROM to be interrupted with ctrl - c

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index cf09719 . . ebebbdc 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 2 . 8 <nl> + * cqlsh copyutil should get host metadata by connected address ( CASSANDRA - 11979 ) <nl> * Fixed cqlshlib . test . remove _ test _ db ( CASSANDRA - 12214 ) <nl> * Synchronize ThriftServer : : stop ( ) ( CASSANDRA - 12105 ) <nl> * Use dedicated thread for JMX notifications ( CASSANDRA - 12146 ) <nl> diff - - git a / pylib / cqlshlib / copyutil . py b / pylib / cqlshlib / copyutil . py <nl> index c7a0e30 . . 14172ef 100644 <nl> - - - a / pylib / cqlshlib / copyutil . py <nl> + + + b / pylib / cqlshlib / copyutil . py <nl> @ @ - 205 , 7 + 205 , 7 @ @ class CopyTask ( object ) : <nl> self . ks = ks <nl> self . table = table <nl> self . table _ meta = self . shell . get _ table _ meta ( self . ks , self . table ) <nl> - self . local _ dc = shell . conn . metadata . get _ host ( shell . hostname ) . datacenter <nl> + self . host = shell . conn . get _ control _ connection _ host ( ) <nl> self . fname = safe _ normpath ( fname ) <nl> self . protocol _ version = protocol _ version <nl> self . config _ file = config _ file <nl> @ @ - 435 , 11 + 435 , 11 @ @ class CopyTask ( object ) : <nl> <nl> return dict ( ks = self . ks , <nl> table = self . table , <nl> - local _ dc = self . local _ dc , <nl> + local _ dc = self . host . datacenter , <nl> columns = self . columns , <nl> options = self . options , <nl> connect _ timeout = shell . conn . connect _ timeout , <nl> - hostname = shell . hostname , <nl> + hostname = self . host . address , <nl> port = shell . port , <nl> ssl = shell . ssl , <nl> auth _ provider = shell . auth _ provider , <nl> @ @ - 634 , 8 + 634 , 8 @ @ class ExportTask ( CopyTask ) : <nl> we use the cqlsh session host . <nl> " " " <nl> shell = self . shell <nl> - hostname = shell . hostname <nl> - local _ dc = self . local _ dc <nl> + hostname = self . host . address <nl> + local _ dc = self . host . datacenter <nl> ranges = dict ( ) <nl> min _ token = self . get _ min _ token ( ) <nl> begin _ token = self . begin _ token
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index cf09719 . . ebebbdc 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 2 . 8 
 + * cqlsh copyutil should get host metadata by connected address ( CASSANDRA - 11979 ) 
 * Fixed cqlshlib . test . remove _ test _ db ( CASSANDRA - 12214 ) 
 * Synchronize ThriftServer : : stop ( ) ( CASSANDRA - 12105 ) 
 * Use dedicated thread for JMX notifications ( CASSANDRA - 12146 ) 
 diff - - git a / pylib / cqlshlib / copyutil . py b / pylib / cqlshlib / copyutil . py 
 index c7a0e30 . . 14172ef 100644 
 - - - a / pylib / cqlshlib / copyutil . py 
 + + + b / pylib / cqlshlib / copyutil . py 
 @ @ - 205 , 7 + 205 , 7 @ @ class CopyTask ( object ) : 
 self . ks = ks 
 self . table = table 
 self . table _ meta = self . shell . get _ table _ meta ( self . ks , self . table ) 
 - self . local _ dc = shell . conn . metadata . get _ host ( shell . hostname ) . datacenter 
 + self . host = shell . conn . get _ control _ connection _ host ( ) 
 self . fname = safe _ normpath ( fname ) 
 self . protocol _ version = protocol _ version 
 self . config _ file = config _ file 
 @ @ - 435 , 11 + 435 , 11 @ @ class CopyTask ( object ) : 
 
 return dict ( ks = self . ks , 
 table = self . table , 
 - local _ dc = self . local _ dc , 
 + local _ dc = self . host . datacenter , 
 columns = self . columns , 
 options = self . options , 
 connect _ timeout = shell . conn . connect _ timeout , 
 - hostname = shell . hostname , 
 + hostname = self . host . address , 
 port = shell . port , 
 ssl = shell . ssl , 
 auth _ provider = shell . auth _ provider , 
 @ @ - 634 , 8 + 634 , 8 @ @ class ExportTask ( CopyTask ) : 
 we use the cqlsh session host . 
 " " " 
 shell = self . shell 
 - hostname = shell . hostname 
 - local _ dc = self . local _ dc 
 + hostname = self . host . address 
 + local _ dc = self . host . datacenter 
 ranges = dict ( ) 
 min _ token = self . get _ min _ token ( ) 
 begin _ token = self . begin _ token

NEAREST DIFF:
ELIMINATEDSENTENCE
