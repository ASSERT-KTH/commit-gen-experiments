BLEU SCORE: 0.04635551866221845

TEST MSG: Delete untracked CDC segment links on replay
GENERATED MSG: Delete untracked non - CDC hard link log files in cdc _ raw after replaying

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java <nl> index 4d31aad . . bdd4f74 100644 <nl> - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java <nl> + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java <nl> @ @ - 153 , 6 + 153 , 26 @ @ public class CommitLogSegmentManagerCDC extends AbstractCommitLogSegmentManager <nl> } <nl> <nl> / * * <nl> + * Delete untracked segment files after replay <nl> + * <nl> + * @ param file segment file that is no longer in use . <nl> + * / <nl> + @ Override <nl> + void handleReplayedSegment ( final File file ) <nl> + { <nl> + super . handleReplayedSegment ( file ) ; <nl> + <nl> + / / delete untracked cdc segment hard link files if their index files do not exist <nl> + File cdcFile = new File ( DatabaseDescriptor . getCDCLogLocation ( ) , file . getName ( ) ) ; <nl> + File cdcIndexFile = new File ( DatabaseDescriptor . getCDCLogLocation ( ) , CommitLogDescriptor . fromFileName ( file . getName ( ) ) . cdcIndexFileName ( ) ) ; <nl> + if ( cdcFile . exists ( ) & & ! cdcIndexFile . exists ( ) ) <nl> + { <nl> + logger . trace ( " ( Unopened ) CDC segment { } is no longer needed and will be deleted now " , cdcFile ) ; <nl> + FileUtils . deleteWithConfirm ( cdcFile ) ; <nl> + } <nl> + } <nl> + <nl> + / * * <nl> * For use after replay when replayer hard - links / adds tracking of replayed segments <nl> * / <nl> public void addCDCSize ( long size )
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java 
 index 4d31aad . . bdd4f74 100644 
 - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java 
 + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogSegmentManagerCDC . java 
 @ @ - 153 , 6 + 153 , 26 @ @ public class CommitLogSegmentManagerCDC extends AbstractCommitLogSegmentManager 
 } 
 
 / * * 
 + * Delete untracked segment files after replay 
 + * 
 + * @ param file segment file that is no longer in use . 
 + * / 
 + @ Override 
 + void handleReplayedSegment ( final File file ) 
 + { 
 + super . handleReplayedSegment ( file ) ; 
 + 
 + / / delete untracked cdc segment hard link files if their index files do not exist 
 + File cdcFile = new File ( DatabaseDescriptor . getCDCLogLocation ( ) , file . getName ( ) ) ; 
 + File cdcIndexFile = new File ( DatabaseDescriptor . getCDCLogLocation ( ) , CommitLogDescriptor . fromFileName ( file . getName ( ) ) . cdcIndexFileName ( ) ) ; 
 + if ( cdcFile . exists ( ) & & ! cdcIndexFile . exists ( ) ) 
 + { 
 + logger . trace ( " ( Unopened ) CDC segment { } is no longer needed and will be deleted now " , cdcFile ) ; 
 + FileUtils . deleteWithConfirm ( cdcFile ) ; 
 + } 
 + } 
 + 
 + / * * 
 * For use after replay when replayer hard - links / adds tracking of replayed segments 
 * / 
 public void addCDCSize ( long size )

NEAREST DIFF:
ELIMINATEDSENTENCE
