BLEU SCORE: 0.014064939156282435

TEST MSG: ninja edit naming in LegacyLayoutTest . testStaticRangeTombstoneRoundTripDroppedColumn
GENERATED MSG: Collection Deletions for Dropped Columns in 2 . 1 / 3 . 0 mixed - mode can delete rows

TEST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / db / LegacyLayoutTest . java b / test / unit / org / apache / cassandra / db / LegacyLayoutTest . java <nl> index 2bed35e . . e34f58e 100644 <nl> - - - a / test / unit / org / apache / cassandra / db / LegacyLayoutTest . java <nl> + + + b / test / unit / org / apache / cassandra / db / LegacyLayoutTest . java <nl> @ @ - 253 , 12 + 253 , 12 @ @ public class LegacyLayoutTest <nl> } <nl> <nl> @ Test <nl> - public void testStaticRangeTombstoneRoundTripDroppedColumn ( ) throws Throwable <nl> + public void testCollectionDeletionRoundTripForDroppedColumn ( ) throws Throwable <nl> { <nl> / / this variant of the bug deletes a row with the same clustering key value as the name of the static collection <nl> - QueryProcessor . executeInternal ( String . format ( " CREATE TABLE \ " % s \ " . legacy _ static _ rt _ rt _ dc ( pk int , ck1 text , v int , s set < text > , primary key ( pk , ck1 ) ) " , KEYSPACE ) ) ; <nl> + QueryProcessor . executeInternal ( String . format ( " CREATE TABLE \ " % s \ " . legacy _ rt _ rt _ dc ( pk int , ck1 text , v int , s set < text > , primary key ( pk , ck1 ) ) " , KEYSPACE ) ) ; <nl> Keyspace keyspace = Keyspace . open ( KEYSPACE ) ; <nl> - CFMetaData table = keyspace . getColumnFamilyStore ( " legacy _ static _ rt _ rt _ dc " ) . metadata ; <nl> + CFMetaData table = keyspace . getColumnFamilyStore ( " legacy _ rt _ rt _ dc " ) . metadata ; <nl> ColumnDefinition v = table . getColumnDefinition ( new ColumnIdentifier ( " v " , false ) ) ; <nl> ColumnDefinition bug = table . getColumnDefinition ( new ColumnIdentifier ( " s " , false ) ) ; <nl> <nl> @ @ - 277 , 7 + 277 , 7 @ @ public class LegacyLayoutTest <nl> DataOutputBuffer serialized21 = new DataOutputBuffer ( ) ) <nl> { <nl> LegacyLayout . serializeAsLegacyPartition ( null , upd . unfilteredIterator ( ) , serialized21 , MessagingService . VERSION _ 21 ) ; <nl> - QueryProcessor . executeInternal ( String . format ( " ALTER TABLE \ " % s \ " . legacy _ static _ rt _ rt _ dc DROP s " , KEYSPACE ) ) ; <nl> + QueryProcessor . executeInternal ( String . format ( " ALTER TABLE \ " % s \ " . legacy _ rt _ rt _ dc DROP s " , KEYSPACE ) ) ; <nl> try ( DataInputBuffer in = new DataInputBuffer ( serialized21 . buffer ( ) , false ) ) <nl> { <nl> try ( UnfilteredRowIterator deser21 = LegacyLayout . deserializeLegacyPartition ( in , MessagingService . VERSION _ 21 , SerializationHelper . Flag . LOCAL , upd . partitionKey ( ) . getKey ( ) ) ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / test / unit / org / apache / cassandra / db / LegacyLayoutTest . java b / test / unit / org / apache / cassandra / db / LegacyLayoutTest . java 
 index 2bed35e . . e34f58e 100644 
 - - - a / test / unit / org / apache / cassandra / db / LegacyLayoutTest . java 
 + + + b / test / unit / org / apache / cassandra / db / LegacyLayoutTest . java 
 @ @ - 253 , 12 + 253 , 12 @ @ public class LegacyLayoutTest 
 } 
 
 @ Test 
 - public void testStaticRangeTombstoneRoundTripDroppedColumn ( ) throws Throwable 
 + public void testCollectionDeletionRoundTripForDroppedColumn ( ) throws Throwable 
 { 
 / / this variant of the bug deletes a row with the same clustering key value as the name of the static collection 
 - QueryProcessor . executeInternal ( String . format ( " CREATE TABLE \ " % s \ " . legacy _ static _ rt _ rt _ dc ( pk int , ck1 text , v int , s set < text > , primary key ( pk , ck1 ) ) " , KEYSPACE ) ) ; 
 + QueryProcessor . executeInternal ( String . format ( " CREATE TABLE \ " % s \ " . legacy _ rt _ rt _ dc ( pk int , ck1 text , v int , s set < text > , primary key ( pk , ck1 ) ) " , KEYSPACE ) ) ; 
 Keyspace keyspace = Keyspace . open ( KEYSPACE ) ; 
 - CFMetaData table = keyspace . getColumnFamilyStore ( " legacy _ static _ rt _ rt _ dc " ) . metadata ; 
 + CFMetaData table = keyspace . getColumnFamilyStore ( " legacy _ rt _ rt _ dc " ) . metadata ; 
 ColumnDefinition v = table . getColumnDefinition ( new ColumnIdentifier ( " v " , false ) ) ; 
 ColumnDefinition bug = table . getColumnDefinition ( new ColumnIdentifier ( " s " , false ) ) ; 
 
 @ @ - 277 , 7 + 277 , 7 @ @ public class LegacyLayoutTest 
 DataOutputBuffer serialized21 = new DataOutputBuffer ( ) ) 
 { 
 LegacyLayout . serializeAsLegacyPartition ( null , upd . unfilteredIterator ( ) , serialized21 , MessagingService . VERSION _ 21 ) ; 
 - QueryProcessor . executeInternal ( String . format ( " ALTER TABLE \ " % s \ " . legacy _ static _ rt _ rt _ dc DROP s " , KEYSPACE ) ) ; 
 + QueryProcessor . executeInternal ( String . format ( " ALTER TABLE \ " % s \ " . legacy _ rt _ rt _ dc DROP s " , KEYSPACE ) ) ; 
 try ( DataInputBuffer in = new DataInputBuffer ( serialized21 . buffer ( ) , false ) ) 
 { 
 try ( UnfilteredRowIterator deser21 = LegacyLayout . deserializeLegacyPartition ( in , MessagingService . VERSION _ 21 , SerializationHelper . Flag . LOCAL , upd . partitionKey ( ) . getKey ( ) ) ;

NEAREST DIFF:
ELIMINATEDSENTENCE
