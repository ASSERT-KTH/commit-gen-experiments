BLEU SCORE: 0.05341087579952926

TEST MSG: merge from 2 . 0
GENERATED MSG: Avoid logging CompactionInterrupted at ERROR

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 1043016 . . dfeca21 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 4 , 6 + 4 , 7 @ @ <nl> * Fix UDT field selection with empty fields ( CASSANDRA - 7670 ) <nl> * Bogus deserialization of static cells from sstable ( CASSANDRA - 7684 ) <nl> Merged from 2 . 0 : <nl> + * Avoid logging CompactionInterrupted at ERROR ( CASSANDRA - 7694 ) <nl> * Minor leak in sstable2jon ( CASSANDRA - 7709 ) <nl> * Add cassandra . auto _ bootstrap system property ( CASSANDRA - 7650 ) <nl> * Update java driver ( for hadoop ) ( CASSANDRA - 7618 ) <nl> diff - - git a / src / java / org / apache / cassandra / concurrent / DebuggableThreadPoolExecutor . java b / src / java / org / apache / cassandra / concurrent / DebuggableThreadPoolExecutor . java <nl> index cd9e9e4 . . ea04af3 100644 <nl> - - - a / src / java / org / apache / cassandra / concurrent / DebuggableThreadPoolExecutor . java <nl> + + + b / src / java / org / apache / cassandra / concurrent / DebuggableThreadPoolExecutor . java <nl> @ @ - 177 , 6 + 177 , 12 @ @ public class DebuggableThreadPoolExecutor extends ThreadPoolExecutor implements <nl> { <nl> super . afterExecute ( r , t ) ; <nl> <nl> + maybeResetTraceSessionWrapper ( r ) ; <nl> + logExceptionsAfterExecute ( r , t ) ; <nl> + } <nl> + <nl> + protected static void maybeResetTraceSessionWrapper ( Runnable r ) <nl> + { <nl> if ( r instanceof TraceSessionWrapper ) <nl> { <nl> TraceSessionWrapper tsw = ( TraceSessionWrapper ) r ; <nl> @ @ - 184 , 8 + 190 , 6 @ @ public class DebuggableThreadPoolExecutor extends ThreadPoolExecutor implements <nl> / / and if left this thread might start tracing unrelated tasks <nl> tsw . reset ( ) ; <nl> } <nl> - <nl> - logExceptionsAfterExecute ( r , t ) ; <nl> } <nl> <nl> @ Override <nl> diff - - git a / src / java / org / apache / cassandra / db / compaction / CompactionManager . java b / src / java / org / apache / cassandra / db / compaction / CompactionManager . java <nl> index 66accf0 . . cde60de 100644 <nl> - - - a / src / java / org / apache / cassandra / db / compaction / CompactionManager . java <nl> + + + b / src / java / org / apache / cassandra / db / compaction / CompactionManager . java <nl> @ @ - 1147 , 8 + 1147 , 8 @ @ public class CompactionManager implements CompactionManagerMBean <nl> @ Override <nl> public void afterExecute ( Runnable r , Throwable t ) <nl> { <nl> - super . afterExecute ( r , t ) ; <nl> - <nl> + DebuggableThreadPoolExecutor . maybeResetTraceSessionWrapper ( r ) ; <nl> + <nl> if ( t = = null ) <nl> t = DebuggableThreadPoolExecutor . extractThrowable ( r ) ; <nl>
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 1043016 . . dfeca21 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 4 , 6 + 4 , 7 @ @ 
 * Fix UDT field selection with empty fields ( CASSANDRA - 7670 ) 
 * Bogus deserialization of static cells from sstable ( CASSANDRA - 7684 ) 
 Merged from 2 . 0 : 
 + * Avoid logging CompactionInterrupted at ERROR ( CASSANDRA - 7694 ) 
 * Minor leak in sstable2jon ( CASSANDRA - 7709 ) 
 * Add cassandra . auto _ bootstrap system property ( CASSANDRA - 7650 ) 
 * Update java driver ( for hadoop ) ( CASSANDRA - 7618 ) 
 diff - - git a / src / java / org / apache / cassandra / concurrent / DebuggableThreadPoolExecutor . java b / src / java / org / apache / cassandra / concurrent / DebuggableThreadPoolExecutor . java 
 index cd9e9e4 . . ea04af3 100644 
 - - - a / src / java / org / apache / cassandra / concurrent / DebuggableThreadPoolExecutor . java 
 + + + b / src / java / org / apache / cassandra / concurrent / DebuggableThreadPoolExecutor . java 
 @ @ - 177 , 6 + 177 , 12 @ @ public class DebuggableThreadPoolExecutor extends ThreadPoolExecutor implements 
 { 
 super . afterExecute ( r , t ) ; 
 
 + maybeResetTraceSessionWrapper ( r ) ; 
 + logExceptionsAfterExecute ( r , t ) ; 
 + } 
 + 
 + protected static void maybeResetTraceSessionWrapper ( Runnable r ) 
 + { 
 if ( r instanceof TraceSessionWrapper ) 
 { 
 TraceSessionWrapper tsw = ( TraceSessionWrapper ) r ; 
 @ @ - 184 , 8 + 190 , 6 @ @ public class DebuggableThreadPoolExecutor extends ThreadPoolExecutor implements 
 / / and if left this thread might start tracing unrelated tasks 
 tsw . reset ( ) ; 
 } 
 - 
 - logExceptionsAfterExecute ( r , t ) ; 
 } 
 
 @ Override 
 diff - - git a / src / java / org / apache / cassandra / db / compaction / CompactionManager . java b / src / java / org / apache / cassandra / db / compaction / CompactionManager . java 
 index 66accf0 . . cde60de 100644 
 - - - a / src / java / org / apache / cassandra / db / compaction / CompactionManager . java 
 + + + b / src / java / org / apache / cassandra / db / compaction / CompactionManager . java 
 @ @ - 1147 , 8 + 1147 , 8 @ @ public class CompactionManager implements CompactionManagerMBean 
 @ Override 
 public void afterExecute ( Runnable r , Throwable t ) 
 { 
 - super . afterExecute ( r , t ) ; 
 - 
 + DebuggableThreadPoolExecutor . maybeResetTraceSessionWrapper ( r ) ; 
 + 
 if ( t = = null ) 
 t = DebuggableThreadPoolExecutor . extractThrowable ( r ) ; 


NEAREST DIFF:
ELIMINATEDSENTENCE
