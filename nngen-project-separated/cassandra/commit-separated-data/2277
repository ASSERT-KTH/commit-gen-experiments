BLEU SCORE: 0.08125165710854508

TEST MSG: Track min / max timestamps for range tombstones .
GENERATED MSG: Account for range and row tombstones in tombstone drop time histogram .

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 4f08764 . . a6fc837 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 21 , 6 + 21 , 7 @ @ <nl> * Add option to disable STCS in L0 ( CASSANDRA - 6621 ) <nl> * Fix error when doing reversed queries with static columns ( CASSANDRA - 7490 ) <nl> * Backport CASSANDRA - 6747 ( CASSANDRA - 7560 ) <nl> + * Track max / min timestamps for range tombstones ( CASSANDRA - 7647 ) <nl> Merged from 1 . 2 : <nl> * Set correct stream ID on responses when non - Exception Throwables <nl> are thrown while handling native protocol messages ( CASSANDRA - 7470 ) <nl> diff - - git a / src / java / org / apache / cassandra / db / ColumnFamily . java b / src / java / org / apache / cassandra / db / ColumnFamily . java <nl> index 638eacc . . 95e5645 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ColumnFamily . java <nl> + + + b / src / java / org / apache / cassandra / db / ColumnFamily . java <nl> @ @ - 426 , 7 + 426 , 8 @ @ public abstract class ColumnFamily implements Iterable < Column > , IRowCacheEntry <nl> { <nl> RangeTombstone rangeTombstone = it . next ( ) ; <nl> tombstones . update ( rangeTombstone . getLocalDeletionTime ( ) ) ; <nl> - <nl> + minTimestampSeen = Math . min ( minTimestampSeen , rangeTombstone . minTimestamp ( ) ) ; <nl> + maxTimestampSeen = Math . max ( maxTimestampSeen , rangeTombstone . maxTimestamp ( ) ) ; <nl> minColumnNamesSeen = ColumnNameHelper . minComponents ( minColumnNamesSeen , rangeTombstone . min , metadata . comparator ) ; <nl> maxColumnNamesSeen = ColumnNameHelper . maxComponents ( maxColumnNamesSeen , rangeTombstone . max , metadata . comparator ) ; <nl> } <nl> diff - - git a / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java b / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java <nl> index 7cd0842 . . 1da1757 100644 <nl> - - - a / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java <nl> + + + b / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java <nl> @ @ - 253 , 7 + 253 , 8 @ @ public class LazilyCompactedRow extends AbstractCompactedRow implements Iterable <nl> else <nl> { <nl> tombstones . update ( t . getLocalDeletionTime ( ) ) ; <nl> - <nl> + minTimestampSeen = Math . min ( minTimestampSeen , t . minTimestamp ( ) ) ; <nl> + maxTimestampSeen = Math . max ( maxTimestampSeen , t . maxTimestamp ( ) ) ; <nl> minColumnNameSeen = ColumnNameHelper . minComponents ( minColumnNameSeen , t . min , controller . cfs . metadata . comparator ) ; <nl> maxColumnNameSeen = ColumnNameHelper . maxComponents ( maxColumnNameSeen , t . max , controller . cfs . metadata . comparator ) ; <nl> <nl> diff - - git a / src / java / org / apache / cassandra / io / sstable / SSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / SSTableWriter . java <nl> index 3a2dca0 . . 8a9bb18 100644 <nl> - - - a / src / java / org / apache / cassandra / io / sstable / SSTableWriter . java <nl> + + + b / src / java / org / apache / cassandra / io / sstable / SSTableWriter . java <nl> @ @ - 243 , 6 + 243 , 8 @ @ public class SSTableWriter extends SSTable <nl> { <nl> RangeTombstone rangeTombstone = rangeTombstoneIterator . next ( ) ; <nl> tombstones . update ( rangeTombstone . getLocalDeletionTime ( ) ) ; <nl> + minTimestamp = Math . min ( minTimestamp , rangeTombstone . minTimestamp ( ) ) ; <nl> + maxTimestamp = Math . max ( maxTimestamp , rangeTombstone . maxTimestamp ( ) ) ; <nl> <nl> minColumnNames = ColumnNameHelper . minComponents ( minColumnNames , rangeTombstone . min , metadata . comparator ) ; <nl> maxColumnNames = ColumnNameHelper . maxComponents ( maxColumnNames , rangeTombstone . max , metadata . comparator ) ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 4f08764 . . a6fc837 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 21 , 6 + 21 , 7 @ @ 
 * Add option to disable STCS in L0 ( CASSANDRA - 6621 ) 
 * Fix error when doing reversed queries with static columns ( CASSANDRA - 7490 ) 
 * Backport CASSANDRA - 6747 ( CASSANDRA - 7560 ) 
 + * Track max / min timestamps for range tombstones ( CASSANDRA - 7647 ) 
 Merged from 1 . 2 : 
 * Set correct stream ID on responses when non - Exception Throwables 
 are thrown while handling native protocol messages ( CASSANDRA - 7470 ) 
 diff - - git a / src / java / org / apache / cassandra / db / ColumnFamily . java b / src / java / org / apache / cassandra / db / ColumnFamily . java 
 index 638eacc . . 95e5645 100644 
 - - - a / src / java / org / apache / cassandra / db / ColumnFamily . java 
 + + + b / src / java / org / apache / cassandra / db / ColumnFamily . java 
 @ @ - 426 , 7 + 426 , 8 @ @ public abstract class ColumnFamily implements Iterable < Column > , IRowCacheEntry 
 { 
 RangeTombstone rangeTombstone = it . next ( ) ; 
 tombstones . update ( rangeTombstone . getLocalDeletionTime ( ) ) ; 
 - 
 + minTimestampSeen = Math . min ( minTimestampSeen , rangeTombstone . minTimestamp ( ) ) ; 
 + maxTimestampSeen = Math . max ( maxTimestampSeen , rangeTombstone . maxTimestamp ( ) ) ; 
 minColumnNamesSeen = ColumnNameHelper . minComponents ( minColumnNamesSeen , rangeTombstone . min , metadata . comparator ) ; 
 maxColumnNamesSeen = ColumnNameHelper . maxComponents ( maxColumnNamesSeen , rangeTombstone . max , metadata . comparator ) ; 
 } 
 diff - - git a / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java b / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java 
 index 7cd0842 . . 1da1757 100644 
 - - - a / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java 
 + + + b / src / java / org / apache / cassandra / db / compaction / LazilyCompactedRow . java 
 @ @ - 253 , 7 + 253 , 8 @ @ public class LazilyCompactedRow extends AbstractCompactedRow implements Iterable 
 else 
 { 
 tombstones . update ( t . getLocalDeletionTime ( ) ) ; 
 - 
 + minTimestampSeen = Math . min ( minTimestampSeen , t . minTimestamp ( ) ) ; 
 + maxTimestampSeen = Math . max ( maxTimestampSeen , t . maxTimestamp ( ) ) ; 
 minColumnNameSeen = ColumnNameHelper . minComponents ( minColumnNameSeen , t . min , controller . cfs . metadata . comparator ) ; 
 maxColumnNameSeen = ColumnNameHelper . maxComponents ( maxColumnNameSeen , t . max , controller . cfs . metadata . comparator ) ; 
 
 diff - - git a / src / java / org / apache / cassandra / io / sstable / SSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / SSTableWriter . java 
 index 3a2dca0 . . 8a9bb18 100644 
 - - - a / src / java / org / apache / cassandra / io / sstable / SSTableWriter . java 
 + + + b / src / java / org / apache / cassandra / io / sstable / SSTableWriter . java 
 @ @ - 243 , 6 + 243 , 8 @ @ public class SSTableWriter extends SSTable 
 { 
 RangeTombstone rangeTombstone = rangeTombstoneIterator . next ( ) ; 
 tombstones . update ( rangeTombstone . getLocalDeletionTime ( ) ) ; 
 + minTimestamp = Math . min ( minTimestamp , rangeTombstone . minTimestamp ( ) ) ; 
 + maxTimestamp = Math . max ( maxTimestamp , rangeTombstone . maxTimestamp ( ) ) ; 
 
 minColumnNames = ColumnNameHelper . minComponents ( minColumnNames , rangeTombstone . min , metadata . comparator ) ; 
 maxColumnNames = ColumnNameHelper . maxComponents ( maxColumnNames , rangeTombstone . max , metadata . comparator ) ;

NEAREST DIFF:
ELIMINATEDSENTENCE
