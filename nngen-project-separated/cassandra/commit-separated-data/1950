BLEU SCORE: 0.006283769629833745

TEST MSG: Remove linux - centric references from windows launch scripts
GENERATED MSG: add XX : CMSInitiatingOccupancyFraction = 80 to default GC options ; add comments to thread priority options . patch by jbellis

TEST DIFF (one line): diff - - git a / conf / cassandra - env . ps1 b / conf / cassandra - env . ps1 <nl> index 5450ac8 . . 9c6b6f4 100644 <nl> - - - a / conf / cassandra - env . ps1 <nl> + + + b / conf / cassandra - env . ps1 <nl> @ @ - 134 , 14 + 134 , 14 @ @ Function CalculateHeapSizes <nl> } <nl> if ( ( $ env : MAX _ HEAP _ SIZE - and ! $ env : HEAP _ NEWSIZE ) - or ( ! $ env : MAX _ HEAP _ SIZE - and $ env : HEAP _ NEWSIZE ) ) <nl> { <nl> - echo " please set or unset MAX _ HEAP _ SIZE and HEAP _ NEWSIZE in pairs " <nl> + echo " Please set or unset MAX _ HEAP _ SIZE and HEAP _ NEWSIZE in pairs . Aborting startup . " <nl> exit 1 <nl> } <nl> <nl> $ memObject = Get - WMIObject - class win32 _ physicalmemory <nl> if ( $ memObject - eq $ null ) <nl> { <nl> - echo " WARNING ! Could not determine system memory . Defaulting to 2G heap , 512M newgen . Manually override in conf / cassandra - env . ps1 for different heap values . " <nl> + echo " WARNING ! Could not determine system memory . Defaulting to 2G heap , 512M newgen . Manually override in conf \ cassandra - env . ps1 for different heap values . " <nl> $ env : MAX _ HEAP _ SIZE = " 2048M " <nl> $ env : HEAP _ NEWSIZE = " 512M " <nl> return <nl> @ @ - 323 , 14 + 323 , 13 @ @ Function SetCassandraEnvironment <nl> # enable thread priorities , primarily so we can give periodic tasks <nl> # a lower priority to avoid interfering with client workload <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : + UseThreadPriorities " <nl> - # allows lowering thread priority without being root . see <nl> - # http : / / tech . stolsvik . com / 2010 / 01 / linux - java - thread - priorities - workar <nl> + # allows lowering thread priority without being root on linux - probably <nl> + # not necessary on Windows but doesn ' t harm anything . <nl> + # see http : / / tech . stolsvik . com / 2010 / 01 / linux - java - thread - priorities - workar <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : ThreadPriorityPolicy = 42 " <nl> <nl> # min and max heap sizes should be set to the same value to avoid <nl> - # stop - the - world GC pauses during resize , and so that we can lock the <nl> - # heap in memory on startup to prevent any of it from being swapped <nl> - # out . <nl> + # stop - the - world GC pauses during resize . <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xms $ env : MAX _ HEAP _ SIZE " <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xmx $ env : MAX _ HEAP _ SIZE " <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xmn $ env : HEAP _ NEWSIZE " <nl> @ @ - 369 , 17 + 368 , 18 @ @ Function SetCassandraEnvironment <nl> # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : + PrintGCApplicationStoppedTime " <nl> # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : + PrintPromotionFailure " <nl> # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : PrintFLSStatistics = 1 " <nl> - # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xloggc : / var / log / cassandra / gc - ` date + % s ` . log " <nl> + # $ currentDate = ( Get - Date ) . ToString ( ' yyyy . MM . dd ' ) <nl> + # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xloggc : $ env : CASSANDRA _ HOME / logs / gc - $ currentDate . log " <nl> <nl> # If you are using JDK 6u34 7u2 or later you can enable GC log rotation <nl> # don ' t stick the date in the log name if rotation is on . <nl> - # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xloggc : / var / log / cassandra / gc . log " <nl> + # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xloggc : $ env : CASSANDRA _ HOME / logs / gc . log " <nl> # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : + UseGCLogFileRotation " <nl> # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : NumberOfGCLogFiles = 10 " <nl> # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : GCLogFileSize = 10M " <nl> <nl> # Configure the following for JEMallocAllocator and if jemalloc is not available in the system <nl> - # library path ( Example : / usr / local / lib / ) . Usually " make install " will do the right thing . <nl> + # library path . <nl> # set LD _ LIBRARY _ PATH = < JEMALLOC _ HOME > / lib / <nl> # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Djava . library . path = < JEMALLOC _ HOME > / lib / " <nl> <nl> @ @ - 403 , 10 + 403 , 8 @ @ Function SetCassandraEnvironment <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . port = $ JMX _ PORT " <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . ssl = false " <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . authenticate = false " <nl> - # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . password . file = / etc / cassandra / jmxremote . password " <nl> + # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . password . file = C : / jmxremote . password " <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS $ JVM _ EXTRA _ OPTS " <nl> <nl> $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dlog4j . configuration = log4j - server . properties " <nl> } <nl> - <nl> -
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index f0bcbd5 . . a2e02bc 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 31 , 6 + 31 , 7 @ @ dev <nl> * remove keyspace argument from multiget _ count ( CASSANDRA - 1422 ) <nl> * allow specifying cassandra . yaml location as ( local or remote ) URL <nl> ( CASSANDRA - 1126 ) <nl> + * added CMSInitiatingOccupancyFraction = 80 to default GC options <nl> <nl> <nl> 0 . 7 - beta1 <nl> diff - - git a / conf / cassandra - env . sh b / conf / cassandra - env . sh <nl> index efa0131 . . da179d3 100644 <nl> - - - a / conf / cassandra - env . sh <nl> + + + b / conf / cassandra - env . sh <nl> @ @ - 31 , 12 + 31 , 20 @ @ JMX _ PORT = " 8080 " <nl> # performance benefit ( around 5 % ) . <nl> JVM _ OPTS = " $ JVM _ OPTS - ea " <nl> <nl> + # enable thread priorities , primarily so we can give periodic tasks <nl> + # a lower priority to avoid interfering with client workload <nl> + JVM _ OPTS = " $ JVM _ OPTS - XX : + UseThreadPriorities " <nl> + # allows lowering thread priority without being root . see <nl> + # http : / / tech . stolsvik . com / 2010 / 01 / linux - java - thread - priorities - workaround . html <nl> + JVM _ OPTS = " $ JVM _ OPTS - XX : ThreadPriorityPolicy = 42 " <nl> + <nl> # min and max heap sizes should be set to the same value to avoid <nl> # stop - the - world GC pauses during resize , and so that we can lock the <nl> # heap in memory on startup to prevent any of it from being swapped <nl> # out . <nl> JVM _ OPTS = " $ JVM _ OPTS - Xms $ MAX _ HEAP _ SIZE " <nl> JVM _ OPTS = " $ JVM _ OPTS - Xmx $ MAX _ HEAP _ SIZE " <nl> + JVM _ OPTS = " $ JVM _ OPTS - XX : + HeapDumpOnOutOfMemoryError " <nl> <nl> # reduce the per - thread stack size to minimize the impact of Thrift <nl> # thread - per - client . ( Best practice is for client connections to <nl> @ @ - 48 , 11 + 56 , 10 @ @ JVM _ OPTS = " $ JVM _ OPTS - XX : + UseParNewGC " <nl> JVM _ OPTS = " $ JVM _ OPTS - XX : + UseConcMarkSweepGC " <nl> JVM _ OPTS = " $ JVM _ OPTS - XX : + CMSParallelRemarkEnabled " <nl> JVM _ OPTS = " $ JVM _ OPTS - XX : SurvivorRatio = 8 " <nl> - JVM _ OPTS = " $ JVM _ OPTS - XX : MaxTenuringThreshold = 1 " <nl> - JVM _ OPTS = " $ JVM _ OPTS - XX : + HeapDumpOnOutOfMemoryError " <nl> - JVM _ OPTS = " $ JVM _ OPTS - XX : + UseThreadPriorities " <nl> - JVM _ OPTS = " $ JVM _ OPTS - XX : ThreadPriorityPolicy = 42 " <nl> + JVM _ OPTS = " $ JVM _ OPTS - XX : MaxTenuringThreshold = 1 " <nl> + JVM _ OPTS = " $ JVM _ OPTS - XX : CMSInitiatingOccupancyFraction = 80 " <nl> <nl> + # jmx <nl> JVM _ OPTS = " $ JVM _ OPTS - Dcom . sun . management . jmxremote . port = $ JMX _ PORT " <nl> JVM _ OPTS = " $ JVM _ OPTS - Dcom . sun . management . jmxremote . ssl = false " <nl> JVM _ OPTS = " $ JVM _ OPTS - Dcom . sun . management . jmxremote . authenticate = false "

TEST DIFF:
diff - - git a / conf / cassandra - env . ps1 b / conf / cassandra - env . ps1 
 index 5450ac8 . . 9c6b6f4 100644 
 - - - a / conf / cassandra - env . ps1 
 + + + b / conf / cassandra - env . ps1 
 @ @ - 134 , 14 + 134 , 14 @ @ Function CalculateHeapSizes 
 } 
 if ( ( $ env : MAX _ HEAP _ SIZE - and ! $ env : HEAP _ NEWSIZE ) - or ( ! $ env : MAX _ HEAP _ SIZE - and $ env : HEAP _ NEWSIZE ) ) 
 { 
 - echo " please set or unset MAX _ HEAP _ SIZE and HEAP _ NEWSIZE in pairs " 
 + echo " Please set or unset MAX _ HEAP _ SIZE and HEAP _ NEWSIZE in pairs . Aborting startup . " 
 exit 1 
 } 
 
 $ memObject = Get - WMIObject - class win32 _ physicalmemory 
 if ( $ memObject - eq $ null ) 
 { 
 - echo " WARNING ! Could not determine system memory . Defaulting to 2G heap , 512M newgen . Manually override in conf / cassandra - env . ps1 for different heap values . " 
 + echo " WARNING ! Could not determine system memory . Defaulting to 2G heap , 512M newgen . Manually override in conf \ cassandra - env . ps1 for different heap values . " 
 $ env : MAX _ HEAP _ SIZE = " 2048M " 
 $ env : HEAP _ NEWSIZE = " 512M " 
 return 
 @ @ - 323 , 14 + 323 , 13 @ @ Function SetCassandraEnvironment 
 # enable thread priorities , primarily so we can give periodic tasks 
 # a lower priority to avoid interfering with client workload 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : + UseThreadPriorities " 
 - # allows lowering thread priority without being root . see 
 - # http : / / tech . stolsvik . com / 2010 / 01 / linux - java - thread - priorities - workar 
 + # allows lowering thread priority without being root on linux - probably 
 + # not necessary on Windows but doesn ' t harm anything . 
 + # see http : / / tech . stolsvik . com / 2010 / 01 / linux - java - thread - priorities - workar 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : ThreadPriorityPolicy = 42 " 
 
 # min and max heap sizes should be set to the same value to avoid 
 - # stop - the - world GC pauses during resize , and so that we can lock the 
 - # heap in memory on startup to prevent any of it from being swapped 
 - # out . 
 + # stop - the - world GC pauses during resize . 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xms $ env : MAX _ HEAP _ SIZE " 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xmx $ env : MAX _ HEAP _ SIZE " 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xmn $ env : HEAP _ NEWSIZE " 
 @ @ - 369 , 17 + 368 , 18 @ @ Function SetCassandraEnvironment 
 # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : + PrintGCApplicationStoppedTime " 
 # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : + PrintPromotionFailure " 
 # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : PrintFLSStatistics = 1 " 
 - # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xloggc : / var / log / cassandra / gc - ` date + % s ` . log " 
 + # $ currentDate = ( Get - Date ) . ToString ( ' yyyy . MM . dd ' ) 
 + # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xloggc : $ env : CASSANDRA _ HOME / logs / gc - $ currentDate . log " 
 
 # If you are using JDK 6u34 7u2 or later you can enable GC log rotation 
 # don ' t stick the date in the log name if rotation is on . 
 - # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xloggc : / var / log / cassandra / gc . log " 
 + # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Xloggc : $ env : CASSANDRA _ HOME / logs / gc . log " 
 # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : + UseGCLogFileRotation " 
 # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : NumberOfGCLogFiles = 10 " 
 # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - XX : GCLogFileSize = 10M " 
 
 # Configure the following for JEMallocAllocator and if jemalloc is not available in the system 
 - # library path ( Example : / usr / local / lib / ) . Usually " make install " will do the right thing . 
 + # library path . 
 # set LD _ LIBRARY _ PATH = < JEMALLOC _ HOME > / lib / 
 # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Djava . library . path = < JEMALLOC _ HOME > / lib / " 
 
 @ @ - 403 , 10 + 403 , 8 @ @ Function SetCassandraEnvironment 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . port = $ JMX _ PORT " 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . ssl = false " 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . authenticate = false " 
 - # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . password . file = / etc / cassandra / jmxremote . password " 
 + # $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dcom . sun . management . jmxremote . password . file = C : / jmxremote . password " 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS $ JVM _ EXTRA _ OPTS " 
 
 $ env : JVM _ OPTS = " $ env : JVM _ OPTS - Dlog4j . configuration = log4j - server . properties " 
 } 
 - 
 -

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index f0bcbd5 . . a2e02bc 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 31 , 6 + 31 , 7 @ @ dev 
 * remove keyspace argument from multiget _ count ( CASSANDRA - 1422 ) 
 * allow specifying cassandra . yaml location as ( local or remote ) URL 
 ( CASSANDRA - 1126 ) 
 + * added CMSInitiatingOccupancyFraction = 80 to default GC options 
 
 
 0 . 7 - beta1 
 diff - - git a / conf / cassandra - env . sh b / conf / cassandra - env . sh 
 index efa0131 . . da179d3 100644 
 - - - a / conf / cassandra - env . sh 
 + + + b / conf / cassandra - env . sh 
 @ @ - 31 , 12 + 31 , 20 @ @ JMX _ PORT = " 8080 " 
 # performance benefit ( around 5 % ) . 
 JVM _ OPTS = " $ JVM _ OPTS - ea " 
 
 + # enable thread priorities , primarily so we can give periodic tasks 
 + # a lower priority to avoid interfering with client workload 
 + JVM _ OPTS = " $ JVM _ OPTS - XX : + UseThreadPriorities " 
 + # allows lowering thread priority without being root . see 
 + # http : / / tech . stolsvik . com / 2010 / 01 / linux - java - thread - priorities - workaround . html 
 + JVM _ OPTS = " $ JVM _ OPTS - XX : ThreadPriorityPolicy = 42 " 
 + 
 # min and max heap sizes should be set to the same value to avoid 
 # stop - the - world GC pauses during resize , and so that we can lock the 
 # heap in memory on startup to prevent any of it from being swapped 
 # out . 
 JVM _ OPTS = " $ JVM _ OPTS - Xms $ MAX _ HEAP _ SIZE " 
 JVM _ OPTS = " $ JVM _ OPTS - Xmx $ MAX _ HEAP _ SIZE " 
 + JVM _ OPTS = " $ JVM _ OPTS - XX : + HeapDumpOnOutOfMemoryError " 
 
 # reduce the per - thread stack size to minimize the impact of Thrift 
 # thread - per - client . ( Best practice is for client connections to 
 @ @ - 48 , 11 + 56 , 10 @ @ JVM _ OPTS = " $ JVM _ OPTS - XX : + UseParNewGC " 
 JVM _ OPTS = " $ JVM _ OPTS - XX : + UseConcMarkSweepGC " 
 JVM _ OPTS = " $ JVM _ OPTS - XX : + CMSParallelRemarkEnabled " 
 JVM _ OPTS = " $ JVM _ OPTS - XX : SurvivorRatio = 8 " 
 - JVM _ OPTS = " $ JVM _ OPTS - XX : MaxTenuringThreshold = 1 " 
 - JVM _ OPTS = " $ JVM _ OPTS - XX : + HeapDumpOnOutOfMemoryError " 
 - JVM _ OPTS = " $ JVM _ OPTS - XX : + UseThreadPriorities " 
 - JVM _ OPTS = " $ JVM _ OPTS - XX : ThreadPriorityPolicy = 42 " 
 + JVM _ OPTS = " $ JVM _ OPTS - XX : MaxTenuringThreshold = 1 " 
 + JVM _ OPTS = " $ JVM _ OPTS - XX : CMSInitiatingOccupancyFraction = 80 " 
 
 + # jmx 
 JVM _ OPTS = " $ JVM _ OPTS - Dcom . sun . management . jmxremote . port = $ JMX _ PORT " 
 JVM _ OPTS = " $ JVM _ OPTS - Dcom . sun . management . jmxremote . ssl = false " 
 JVM _ OPTS = " $ JVM _ OPTS - Dcom . sun . management . jmxremote . authenticate = false "
