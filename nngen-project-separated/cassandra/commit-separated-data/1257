BLEU SCORE: 0.02649033711035787

TEST MSG: ninja - fix handling of unfinished serialized boundaries ( bug from CASSANDRA - 10357 )
GENERATED MSG: r / m unused write ( DataInput in , int length ) method from DataOutputBuffer . patch by jbellis

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / io / util / MmappedSegmentedFile . java b / src / java / org / apache / cassandra / io / util / MmappedSegmentedFile . java <nl> index 623f65a . . 1109d37 100644 <nl> - - - a / src / java / org / apache / cassandra / io / util / MmappedSegmentedFile . java <nl> + + + b / src / java / org / apache / cassandra / io / util / MmappedSegmentedFile . java <nl> @ @ - 269 , 7 + 269 , 7 @ @ public class MmappedSegmentedFile extends SegmentedFile <nl> private static long [ ] ensureCapacity ( long [ ] boundaries , int fixedCount ) <nl> { <nl> if ( fixedCount + 1 > = boundaries . length ) <nl> - return Arrays . copyOf ( boundaries , boundaries . length * 2 ) ; <nl> + return Arrays . copyOf ( boundaries , Math . max ( fixedCount + 2 , boundaries . length * 2 ) ) ; <nl> return boundaries ; <nl> } <nl>
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / io / util / DataOutputBuffer . java b / src / java / org / apache / cassandra / io / util / DataOutputBuffer . java <nl> index 2bd0d9a . . d4c8324 100644 <nl> - - - a / src / java / org / apache / cassandra / io / util / DataOutputBuffer . java <nl> + + + b / src / java / org / apache / cassandra / io / util / DataOutputBuffer . java <nl> @ @ - 97 , 10 + 97 , 4 @ @ public class DataOutputBuffer extends DataOutputStream <nl> buffer . reset ( ) ; <nl> return this ; <nl> } <nl> - <nl> - / * * Writes bytes from a DataInput directly into the buffer . * / <nl> - public void write ( DataInput in , int length ) throws IOException <nl> - { <nl> - buffer . write ( in , length ) ; <nl> - } <nl> }

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / io / util / MmappedSegmentedFile . java b / src / java / org / apache / cassandra / io / util / MmappedSegmentedFile . java 
 index 623f65a . . 1109d37 100644 
 - - - a / src / java / org / apache / cassandra / io / util / MmappedSegmentedFile . java 
 + + + b / src / java / org / apache / cassandra / io / util / MmappedSegmentedFile . java 
 @ @ - 269 , 7 + 269 , 7 @ @ public class MmappedSegmentedFile extends SegmentedFile 
 private static long [ ] ensureCapacity ( long [ ] boundaries , int fixedCount ) 
 { 
 if ( fixedCount + 1 > = boundaries . length ) 
 - return Arrays . copyOf ( boundaries , boundaries . length * 2 ) ; 
 + return Arrays . copyOf ( boundaries , Math . max ( fixedCount + 2 , boundaries . length * 2 ) ) ; 
 return boundaries ; 
 } 


NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / io / util / DataOutputBuffer . java b / src / java / org / apache / cassandra / io / util / DataOutputBuffer . java 
 index 2bd0d9a . . d4c8324 100644 
 - - - a / src / java / org / apache / cassandra / io / util / DataOutputBuffer . java 
 + + + b / src / java / org / apache / cassandra / io / util / DataOutputBuffer . java 
 @ @ - 97 , 10 + 97 , 4 @ @ public class DataOutputBuffer extends DataOutputStream 
 buffer . reset ( ) ; 
 return this ; 
 } 
 - 
 - / * * Writes bytes from a DataInput directly into the buffer . * / 
 - public void write ( DataInput in , int length ) throws IOException 
 - { 
 - buffer . write ( in , length ) ; 
 - } 
 }
