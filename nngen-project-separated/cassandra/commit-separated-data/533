BLEU SCORE: 0.018160849415439315

TEST MSG: ninja # 12905 : reinstate Keyspace . apply ( mutation , writeCommitlog , updateIndexes , isClReplay , isDeferrable ) for compatibility
GENERATED MSG: Mutations do not block for completion under view lock contention

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / Keyspace . java b / src / java / org / apache / cassandra / db / Keyspace . java <nl> index 3715995 . . 217cf54 100644 <nl> - - - a / src / java / org / apache / cassandra / db / Keyspace . java <nl> + + + b / src / java / org / apache / cassandra / db / Keyspace . java <nl> @ @ - 381 , 7 + 381 , 13 @ @ public class Keyspace <nl> <nl> public CompletableFuture < ? > applyFuture ( Mutation mutation , boolean writeCommitLog , boolean updateIndexes ) <nl> { <nl> - return apply ( mutation , writeCommitLog , updateIndexes , true , true , null ) ; <nl> + return applyInternal ( mutation , writeCommitLog , updateIndexes , true , true , null ) ; <nl> + } <nl> + <nl> + public CompletableFuture < ? > applyFuture ( Mutation mutation , boolean writeCommitLog , boolean updateIndexes , boolean isDroppable , <nl> + boolean isDeferrable ) <nl> + { <nl> + return applyInternal ( mutation , writeCommitLog , updateIndexes , isDroppable , isDeferrable , null ) ; <nl> } <nl> <nl> public void apply ( Mutation mutation , boolean writeCommitLog , boolean updateIndexes ) <nl> @ @ - 412 , 7 + 418 , 22 @ @ public class Keyspace <nl> boolean updateIndexes , <nl> boolean isDroppable ) <nl> { <nl> - apply ( mutation , writeCommitLog , updateIndexes , isDroppable , false , null ) ; <nl> + applyInternal ( mutation , writeCommitLog , updateIndexes , isDroppable , false , null ) ; <nl> + } <nl> + <nl> + / * * <nl> + * Compatibility method that keeps < bold > isClReplay < / bold > flag . <nl> + * @ deprecated Use { @ link this # applyFuture ( Mutation , boolean , boolean , boolean , boolean ) } instead <nl> + * / <nl> + @ Deprecated <nl> + public CompletableFuture < ? > apply ( final Mutation mutation , <nl> + final boolean writeCommitLog , <nl> + boolean updateIndexes , <nl> + boolean isClReplay , <nl> + boolean isDeferrable , <nl> + CompletableFuture < ? > future ) <nl> + { <nl> + return applyInternal ( mutation , writeCommitLog , updateIndexes , ! isClReplay , isDeferrable , future ) ; <nl> } <nl> <nl> / * * <nl> @ @ - 425 , 12 + 446 , 12 @ @ public class Keyspace <nl> * @ param isDroppable true if this should throw WriteTimeoutException if it does not acquire lock within write _ request _ timeout _ in _ ms <nl> * @ param isDeferrable true if caller is not waiting for future to complete , so that future may be deferred <nl> * / <nl> - private CompletableFuture < ? > apply ( final Mutation mutation , <nl> - final boolean writeCommitLog , <nl> - boolean updateIndexes , <nl> - boolean isDroppable , <nl> - boolean isDeferrable , <nl> - CompletableFuture < ? > future ) <nl> + private CompletableFuture < ? > applyInternal ( final Mutation mutation , <nl> + final boolean writeCommitLog , <nl> + boolean updateIndexes , <nl> + boolean isDroppable , <nl> + boolean isDeferrable , <nl> + CompletableFuture < ? > future ) <nl> { <nl> if ( TEST _ FAIL _ WRITES & & metadata . name . equals ( TEST _ FAIL _ WRITES _ KS ) ) <nl> throw new RuntimeException ( " Testing write failures " ) ; <nl> @ @ - 476 , 7 + 497 , 7 @ @ public class Keyspace <nl> / / we will re - apply ourself to the queue and try again later <nl> final CompletableFuture < ? > mark = future ; <nl> StageManager . getStage ( Stage . MUTATION ) . execute ( ( ) - > <nl> - apply ( mutation , writeCommitLog , true , isDroppable , true , mark ) <nl> + applyInternal ( mutation , writeCommitLog , true , isDroppable , true , mark ) <nl> ) ; <nl> <nl> return future ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / Keyspace . java b / src / java / org / apache / cassandra / db / Keyspace . java 
 index 3715995 . . 217cf54 100644 
 - - - a / src / java / org / apache / cassandra / db / Keyspace . java 
 + + + b / src / java / org / apache / cassandra / db / Keyspace . java 
 @ @ - 381 , 7 + 381 , 13 @ @ public class Keyspace 
 
 public CompletableFuture < ? > applyFuture ( Mutation mutation , boolean writeCommitLog , boolean updateIndexes ) 
 { 
 - return apply ( mutation , writeCommitLog , updateIndexes , true , true , null ) ; 
 + return applyInternal ( mutation , writeCommitLog , updateIndexes , true , true , null ) ; 
 + } 
 + 
 + public CompletableFuture < ? > applyFuture ( Mutation mutation , boolean writeCommitLog , boolean updateIndexes , boolean isDroppable , 
 + boolean isDeferrable ) 
 + { 
 + return applyInternal ( mutation , writeCommitLog , updateIndexes , isDroppable , isDeferrable , null ) ; 
 } 
 
 public void apply ( Mutation mutation , boolean writeCommitLog , boolean updateIndexes ) 
 @ @ - 412 , 7 + 418 , 22 @ @ public class Keyspace 
 boolean updateIndexes , 
 boolean isDroppable ) 
 { 
 - apply ( mutation , writeCommitLog , updateIndexes , isDroppable , false , null ) ; 
 + applyInternal ( mutation , writeCommitLog , updateIndexes , isDroppable , false , null ) ; 
 + } 
 + 
 + / * * 
 + * Compatibility method that keeps < bold > isClReplay < / bold > flag . 
 + * @ deprecated Use { @ link this # applyFuture ( Mutation , boolean , boolean , boolean , boolean ) } instead 
 + * / 
 + @ Deprecated 
 + public CompletableFuture < ? > apply ( final Mutation mutation , 
 + final boolean writeCommitLog , 
 + boolean updateIndexes , 
 + boolean isClReplay , 
 + boolean isDeferrable , 
 + CompletableFuture < ? > future ) 
 + { 
 + return applyInternal ( mutation , writeCommitLog , updateIndexes , ! isClReplay , isDeferrable , future ) ; 
 } 
 
 / * * 
 @ @ - 425 , 12 + 446 , 12 @ @ public class Keyspace 
 * @ param isDroppable true if this should throw WriteTimeoutException if it does not acquire lock within write _ request _ timeout _ in _ ms 
 * @ param isDeferrable true if caller is not waiting for future to complete , so that future may be deferred 
 * / 
 - private CompletableFuture < ? > apply ( final Mutation mutation , 
 - final boolean writeCommitLog , 
 - boolean updateIndexes , 
 - boolean isDroppable , 
 - boolean isDeferrable , 
 - CompletableFuture < ? > future ) 
 + private CompletableFuture < ? > applyInternal ( final Mutation mutation , 
 + final boolean writeCommitLog , 
 + boolean updateIndexes , 
 + boolean isDroppable , 
 + boolean isDeferrable , 
 + CompletableFuture < ? > future ) 
 { 
 if ( TEST _ FAIL _ WRITES & & metadata . name . equals ( TEST _ FAIL _ WRITES _ KS ) ) 
 throw new RuntimeException ( " Testing write failures " ) ; 
 @ @ - 476 , 7 + 497 , 7 @ @ public class Keyspace 
 / / we will re - apply ourself to the queue and try again later 
 final CompletableFuture < ? > mark = future ; 
 StageManager . getStage ( Stage . MUTATION ) . execute ( ( ) - > 
 - apply ( mutation , writeCommitLog , true , isDroppable , true , mark ) 
 + applyInternal ( mutation , writeCommitLog , true , isDroppable , true , mark ) 
 ) ; 
 
 return future ;

NEAREST DIFF:
ELIMINATEDSENTENCE
