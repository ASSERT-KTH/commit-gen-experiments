BLEU SCORE: 0.02133165846478451

TEST MSG: Fix isJoined return true only after becoming cluster member
GENERATED MSG: Can ' t transition from write survey to normal mode

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 4bff88c . . e3e53d8 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 1 . 13 <nl> + * Fix isJoined return true only after becoming cluster member ( CASANDRA - 11007 ) <nl> * Fix bad gossip generation seen in long - running clusters ( CASSANDRA - 10969 ) <nl> * Avoid NPE when incremental repair fails ( CASSANDRA - 10909 ) <nl> * Unmark sstables compacting once they are done in cleanup / scrub / upgradesstables ( CASSANDRA - 10829 ) <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index 606670c . . d8b1869 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 1038 , 7 + 1038 , 7 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> <nl> public boolean isJoined ( ) <nl> { <nl> - return joined & & ! isSurveyMode ; <nl> + return tokenMetadata . isMember ( FBUtilities . getBroadcastAddress ( ) ) ; <nl> } <nl> <nl> public void rebuild ( String sourceDc )
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 4bff88c . . e3e53d8 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 1 . 13 
 + * Fix isJoined return true only after becoming cluster member ( CASANDRA - 11007 ) 
 * Fix bad gossip generation seen in long - running clusters ( CASSANDRA - 10969 ) 
 * Avoid NPE when incremental repair fails ( CASSANDRA - 10909 ) 
 * Unmark sstables compacting once they are done in cleanup / scrub / upgradesstables ( CASSANDRA - 10829 ) 
 diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index 606670c . . d8b1869 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 1038 , 7 + 1038 , 7 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 
 public boolean isJoined ( ) 
 { 
 - return joined & & ! isSurveyMode ; 
 + return tokenMetadata . isMember ( FBUtilities . getBroadcastAddress ( ) ) ; 
 } 
 
 public void rebuild ( String sourceDc )

NEAREST DIFF:
ELIMINATEDSENTENCE
