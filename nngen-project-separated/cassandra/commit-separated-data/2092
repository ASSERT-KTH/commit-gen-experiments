BLEU SCORE: 0.02383853510228548

TEST MSG: Fix error in sstableloader with - cph > 1
GENERATED MSG: Make sure we clear out repair sessions from netstats

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index dcfc6c5 . . 9881a94 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 48 , 6 + 48 , 7 @ @ <nl> * Configurable client timeout for cqlsh ( CASSANDRA - 7516 ) <nl> * Include snippet of CQL query near syntax error in messages ( CASSANDRA - 7111 ) <nl> * Make repair - pr work with - local ( CASSANDRA - 7450 ) <nl> + * Fix error in sstableloader with - cph > 1 ( CASSANDRA - 8007 ) <nl> Merged from 2 . 0 : <nl> * CrcCheckChance should adjust based on live CFMetadata not <nl> sstable metadata ( CASSANDRA - 7978 ) <nl> diff - - git a / src / java / org / apache / cassandra / streaming / StreamCoordinator . java b / src / java / org / apache / cassandra / streaming / StreamCoordinator . java <nl> index c8c0f14 . . 48192b4 100644 <nl> - - - a / src / java / org / apache / cassandra / streaming / StreamCoordinator . java <nl> + + + b / src / java / org / apache / cassandra / streaming / StreamCoordinator . java <nl> @ @ - 157 , 8 + 157 , 11 @ @ public class StreamCoordinator <nl> <nl> List < List < StreamSession . SSTableStreamingSections > > result = new ArrayList < > ( ) ; <nl> List < StreamSession . SSTableStreamingSections > slice = null ; <nl> - for ( StreamSession . SSTableStreamingSections streamSession : sstableDetails ) <nl> + Iterator < StreamSession . SSTableStreamingSections > iter = sstableDetails . iterator ( ) ; <nl> + while ( iter . hasNext ( ) ) <nl> { <nl> + StreamSession . SSTableStreamingSections streamSession = iter . next ( ) ; <nl> + <nl> if ( index % step = = 0 ) <nl> { <nl> slice = new ArrayList < > ( ) ; <nl> @ @ - 166 , 6 + 169 , 7 @ @ public class StreamCoordinator <nl> } <nl> slice . add ( streamSession ) ; <nl> + + index ; <nl> + iter . remove ( ) ; <nl> } <nl> <nl> return result ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index dcfc6c5 . . 9881a94 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 48 , 6 + 48 , 7 @ @ 
 * Configurable client timeout for cqlsh ( CASSANDRA - 7516 ) 
 * Include snippet of CQL query near syntax error in messages ( CASSANDRA - 7111 ) 
 * Make repair - pr work with - local ( CASSANDRA - 7450 ) 
 + * Fix error in sstableloader with - cph > 1 ( CASSANDRA - 8007 ) 
 Merged from 2 . 0 : 
 * CrcCheckChance should adjust based on live CFMetadata not 
 sstable metadata ( CASSANDRA - 7978 ) 
 diff - - git a / src / java / org / apache / cassandra / streaming / StreamCoordinator . java b / src / java / org / apache / cassandra / streaming / StreamCoordinator . java 
 index c8c0f14 . . 48192b4 100644 
 - - - a / src / java / org / apache / cassandra / streaming / StreamCoordinator . java 
 + + + b / src / java / org / apache / cassandra / streaming / StreamCoordinator . java 
 @ @ - 157 , 8 + 157 , 11 @ @ public class StreamCoordinator 
 
 List < List < StreamSession . SSTableStreamingSections > > result = new ArrayList < > ( ) ; 
 List < StreamSession . SSTableStreamingSections > slice = null ; 
 - for ( StreamSession . SSTableStreamingSections streamSession : sstableDetails ) 
 + Iterator < StreamSession . SSTableStreamingSections > iter = sstableDetails . iterator ( ) ; 
 + while ( iter . hasNext ( ) ) 
 { 
 + StreamSession . SSTableStreamingSections streamSession = iter . next ( ) ; 
 + 
 if ( index % step = = 0 ) 
 { 
 slice = new ArrayList < > ( ) ; 
 @ @ - 166 , 6 + 169 , 7 @ @ public class StreamCoordinator 
 } 
 slice . add ( streamSession ) ; 
 + + index ; 
 + iter . remove ( ) ; 
 } 
 
 return result ;

NEAREST DIFF:
ELIMINATEDSENTENCE
