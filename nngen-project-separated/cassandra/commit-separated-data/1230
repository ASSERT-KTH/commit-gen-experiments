BLEU SCORE: 0.016932492841722675

TEST MSG: RolesCache should not be created for any authenticator that does not requireAuthentication
GENERATED MSG: Add method to invalidate permission cache via JMX

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index bc7c001 . . f737a2b 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 0 <nl> + * RolesCache should not be created for any authenticator that does not requireAuthentication ( CASSANDRA - 10562 ) <nl> * Fix LogTransaction checking only a single directory for files ( CASSANDRA - 10421 ) <nl> * Support encrypted and plain traffic on the same port ( CASSANDRA - 10559 ) <nl> * Fix handling of range tombstones when reading old format sstables ( CASSANDRA - 10360 ) <nl> diff - - git a / src / java / org / apache / cassandra / auth / RolesCache . java b / src / java / org / apache / cassandra / auth / RolesCache . java <nl> index 554df9e . . 2694173 100644 <nl> - - - a / src / java / org / apache / cassandra / auth / RolesCache . java <nl> + + + b / src / java / org / apache / cassandra / auth / RolesCache . java <nl> @ @ - 105 , 7 + 105 , 7 @ @ public class RolesCache implements RolesCacheMBean <nl> <nl> private LoadingCache < RoleResource , Set < RoleResource > > initCache ( LoadingCache < RoleResource , Set < RoleResource > > existing ) <nl> { <nl> - if ( DatabaseDescriptor . getAuthenticator ( ) instanceof AllowAllAuthenticator ) <nl> + if ( ! DatabaseDescriptor . getAuthenticator ( ) . requireAuthentication ( ) ) <nl> return null ; <nl> <nl> if ( DatabaseDescriptor . getRolesValidity ( ) < = 0 )
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index bc7c001 . . f737a2b 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 0 
 + * RolesCache should not be created for any authenticator that does not requireAuthentication ( CASSANDRA - 10562 ) 
 * Fix LogTransaction checking only a single directory for files ( CASSANDRA - 10421 ) 
 * Support encrypted and plain traffic on the same port ( CASSANDRA - 10559 ) 
 * Fix handling of range tombstones when reading old format sstables ( CASSANDRA - 10360 ) 
 diff - - git a / src / java / org / apache / cassandra / auth / RolesCache . java b / src / java / org / apache / cassandra / auth / RolesCache . java 
 index 554df9e . . 2694173 100644 
 - - - a / src / java / org / apache / cassandra / auth / RolesCache . java 
 + + + b / src / java / org / apache / cassandra / auth / RolesCache . java 
 @ @ - 105 , 7 + 105 , 7 @ @ public class RolesCache implements RolesCacheMBean 
 
 private LoadingCache < RoleResource , Set < RoleResource > > initCache ( LoadingCache < RoleResource , Set < RoleResource > > existing ) 
 { 
 - if ( DatabaseDescriptor . getAuthenticator ( ) instanceof AllowAllAuthenticator ) 
 + if ( ! DatabaseDescriptor . getAuthenticator ( ) . requireAuthentication ( ) ) 
 return null ; 
 
 if ( DatabaseDescriptor . getRolesValidity ( ) < = 0 )

NEAREST DIFF:
ELIMINATEDSENTENCE
