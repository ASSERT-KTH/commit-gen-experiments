BLEU SCORE: 0.02648568136290957

TEST MSG: allow num _ tokens to be unspecified , as described in the yaml
GENERATED MSG: Throw an error when listen _ address is 0 . 0 . 0 . 0

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> index 6417524 . . a368cdb 100644 <nl> - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> @ @ - 439 , 7 + 439 , 9 @ @ public class DatabaseDescriptor <nl> for ( String token : tokensFromString ( conf . initial _ token ) ) <nl> partitioner . getTokenFactory ( ) . validate ( token ) ; <nl> <nl> - if ( conf . num _ tokens > MAX _ NUM _ TOKENS ) <nl> + if ( conf . num _ tokens = = null ) <nl> + 	 conf . num _ tokens = 1 ; <nl> + else if ( conf . num _ tokens > MAX _ NUM _ TOKENS ) <nl> throw new ConfigurationException ( String . format ( " A maximum number of % d tokens per node is supported " , MAX _ NUM _ TOKENS ) ) ; <nl> <nl> try
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 6341e29 . . 27ebc9b 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 7 , 6 + 7 , 7 @ @ <nl> * Do not open non - ssl storage port if encryption option is all ( CASSANDRA - 3916 ) <nl> * Move batchlog replay to its own executor ( CASSANDRA - 6079 ) <nl> * Add tombstone debug threshold and histogram ( CASSANDRA - 6042 , 6057 ) <nl> + * Fix fat client schema pull NPE ( CASSANDRA - 6089 ) <nl> <nl> <nl> 1 . 2 . 10 <nl> diff - - git a / src / java / org / apache / cassandra / service / MigrationManager . java b / src / java / org / apache / cassandra / service / MigrationManager . java <nl> index 9aa6f22 . . e901b61 100644 <nl> - - - a / src / java / org / apache / cassandra / service / MigrationManager . java <nl> + + + b / src / java / org / apache / cassandra / service / MigrationManager . java <nl> @ @ - 110 , 7 + 110 , 7 @ @ public class MigrationManager implements IEndpointStateChangeSubscriber <nl> * / <nl> private static void maybeScheduleSchemaPull ( final UUID theirVersion , final InetAddress endpoint ) <nl> { <nl> - if ( Schema . instance . getVersion ( ) . equals ( theirVersion ) | | ! shouldPullSchemaFrom ( endpoint ) ) <nl> + if ( ( Schema . instance . getVersion ( ) ! = null & & Schema . instance . getVersion ( ) . equals ( theirVersion ) ) | | ! shouldPullSchemaFrom ( endpoint ) ) <nl> return ; <nl> <nl> if ( Schema . emptyVersion . equals ( Schema . instance . getVersion ( ) ) | | runtimeMXBean . getUptime ( ) < MIGRATION _ DELAY _ IN _ MS )

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 index 6417524 . . a368cdb 100644 
 - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 @ @ - 439 , 7 + 439 , 9 @ @ public class DatabaseDescriptor 
 for ( String token : tokensFromString ( conf . initial _ token ) ) 
 partitioner . getTokenFactory ( ) . validate ( token ) ; 
 
 - if ( conf . num _ tokens > MAX _ NUM _ TOKENS ) 
 + if ( conf . num _ tokens = = null ) 
 + 	 conf . num _ tokens = 1 ; 
 + else if ( conf . num _ tokens > MAX _ NUM _ TOKENS ) 
 throw new ConfigurationException ( String . format ( " A maximum number of % d tokens per node is supported " , MAX _ NUM _ TOKENS ) ) ; 
 
 try

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 6341e29 . . 27ebc9b 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 7 , 6 + 7 , 7 @ @ 
 * Do not open non - ssl storage port if encryption option is all ( CASSANDRA - 3916 ) 
 * Move batchlog replay to its own executor ( CASSANDRA - 6079 ) 
 * Add tombstone debug threshold and histogram ( CASSANDRA - 6042 , 6057 ) 
 + * Fix fat client schema pull NPE ( CASSANDRA - 6089 ) 
 
 
 1 . 2 . 10 
 diff - - git a / src / java / org / apache / cassandra / service / MigrationManager . java b / src / java / org / apache / cassandra / service / MigrationManager . java 
 index 9aa6f22 . . e901b61 100644 
 - - - a / src / java / org / apache / cassandra / service / MigrationManager . java 
 + + + b / src / java / org / apache / cassandra / service / MigrationManager . java 
 @ @ - 110 , 7 + 110 , 7 @ @ public class MigrationManager implements IEndpointStateChangeSubscriber 
 * / 
 private static void maybeScheduleSchemaPull ( final UUID theirVersion , final InetAddress endpoint ) 
 { 
 - if ( Schema . instance . getVersion ( ) . equals ( theirVersion ) | | ! shouldPullSchemaFrom ( endpoint ) ) 
 + if ( ( Schema . instance . getVersion ( ) ! = null & & Schema . instance . getVersion ( ) . equals ( theirVersion ) ) | | ! shouldPullSchemaFrom ( endpoint ) ) 
 return ; 
 
 if ( Schema . emptyVersion . equals ( Schema . instance . getVersion ( ) ) | | runtimeMXBean . getUptime ( ) < MIGRATION _ DELAY _ IN _ MS )
