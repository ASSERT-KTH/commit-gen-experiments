BLEU SCORE: 0.018110197178625272

TEST MSG: Add the missing Native - Transport - Requests in tpstats back
GENERATED MSG: fix ColumnFamilyStoreMBeanIterator to use new type name . patch by jbellis ; reviewed by gdusbabek for CASSANDRA - 1433

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 91f4577 . . 6f69f03 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 1 . 12 <nl> + * Add Native - Transport - Requests back to tpstats ( CASSANDRA - 10044 ) <nl> * Make paging logic consistent between searcher impls ( CASSANDRA - 10683 ) <nl> * Fix CompressedInputStream for proper cleanup ( CASSANDRA - 10012 ) <nl> * ( cqlsh ) Support counters in COPY commands ( CASSANDRA - 9043 ) <nl> diff - - git a / src / java / org / apache / cassandra / tools / NodeProbe . java b / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> index 49c493d . . 5ba5a32 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> + + + b / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> @ @ - 1380 , 7 + 1380 , 8 @ @ class ThreadPoolProxyMBeanIterator implements Iterator < Map . Entry < String , JMXEnab <nl> { <nl> Set < ObjectName > requests = mbeanServerConn . queryNames ( new ObjectName ( " org . apache . cassandra . request : type = * " ) , null ) ; <nl> Set < ObjectName > internal = mbeanServerConn . queryNames ( new ObjectName ( " org . apache . cassandra . internal : type = * " ) , null ) ; <nl> - resIter = Iterables . concat ( requests , internal ) . iterator ( ) ; <nl> + Set < ObjectName > transport = mbeanServerConn . queryNames ( new ObjectName ( " org . apache . cassandra . transport : type = * " ) , null ) ; <nl> + resIter = Iterables . concat ( requests , internal , transport ) . iterator ( ) ; <nl> this . mbeanServerConn = mbeanServerConn ; <nl> } <nl>
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index b768f40 . . 72edeef 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 40 , 6 + 40 , 7 @ @ dev <nl> * handle zero - length ( or missing ) rows during HH paging ( CASSANDRA - 1432 ) <nl> * include secondary indexes during schema migrations ( CASSANDRA - 1406 ) <nl> * fix commitlog header race during schema change ( CASSANDRA - 1435 ) <nl> + * fix ColumnFamilyStoreMBeanIterator to use new type name ( CASSANDRA - 1433 ) <nl> <nl> <nl> 0 . 7 - beta1 <nl> diff - - git a / src / java / org / apache / cassandra / tools / NodeCmd . java b / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> index 2c5c099 . . b293612 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> + + + b / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> @ @ - 248 , 9 + 248 , 9 @ @ public class NodeCmd { <nl> / / get a list of column family stores <nl> Iterator < Map . Entry < String , ColumnFamilyStoreMBean > > cfamilies = probe . getColumnFamilyStoreMBeanProxies ( ) ; <nl> <nl> - for ( ; cfamilies . hasNext ( ) ; ) <nl> + while ( cfamilies . hasNext ( ) ) <nl> { <nl> - Map . Entry < String , ColumnFamilyStoreMBean > entry = cfamilies . next ( ) ; <nl> + Entry < String , ColumnFamilyStoreMBean > entry = cfamilies . next ( ) ; <nl> String tableName = entry . getKey ( ) ; <nl> ColumnFamilyStoreMBean cfsProxy = entry . getValue ( ) ; <nl> <nl> diff - - git a / src / java / org / apache / cassandra / tools / NodeProbe . java b / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> index 3550a6b . . fea8095 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> + + + b / src / java / org / apache / cassandra / tools / NodeProbe . java <nl> @ @ - 425 , 7 + 425 , 7 @ @ class ColumnFamilyStoreMBeanIterator implements Iterator < Map . Entry < String , Colum <nl> public ColumnFamilyStoreMBeanIterator ( MBeanServerConnection mbeanServerConn ) <nl> throws MalformedObjectNameException , NullPointerException , IOException <nl> { <nl> - ObjectName query = new ObjectName ( " org . apache . cassandra . db : type = ColumnFamilyStores , * " ) ; <nl> + ObjectName query = new ObjectName ( " org . apache . cassandra . db : type = ColumnFamilies , * " ) ; <nl> resIter = mbeanServerConn . queryNames ( query , null ) . iterator ( ) ; <nl> this . mbeanServerConn = mbeanServerConn ; <nl> }

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 91f4577 . . 6f69f03 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 1 . 12 
 + * Add Native - Transport - Requests back to tpstats ( CASSANDRA - 10044 ) 
 * Make paging logic consistent between searcher impls ( CASSANDRA - 10683 ) 
 * Fix CompressedInputStream for proper cleanup ( CASSANDRA - 10012 ) 
 * ( cqlsh ) Support counters in COPY commands ( CASSANDRA - 9043 ) 
 diff - - git a / src / java / org / apache / cassandra / tools / NodeProbe . java b / src / java / org / apache / cassandra / tools / NodeProbe . java 
 index 49c493d . . 5ba5a32 100644 
 - - - a / src / java / org / apache / cassandra / tools / NodeProbe . java 
 + + + b / src / java / org / apache / cassandra / tools / NodeProbe . java 
 @ @ - 1380 , 7 + 1380 , 8 @ @ class ThreadPoolProxyMBeanIterator implements Iterator < Map . Entry < String , JMXEnab 
 { 
 Set < ObjectName > requests = mbeanServerConn . queryNames ( new ObjectName ( " org . apache . cassandra . request : type = * " ) , null ) ; 
 Set < ObjectName > internal = mbeanServerConn . queryNames ( new ObjectName ( " org . apache . cassandra . internal : type = * " ) , null ) ; 
 - resIter = Iterables . concat ( requests , internal ) . iterator ( ) ; 
 + Set < ObjectName > transport = mbeanServerConn . queryNames ( new ObjectName ( " org . apache . cassandra . transport : type = * " ) , null ) ; 
 + resIter = Iterables . concat ( requests , internal , transport ) . iterator ( ) ; 
 this . mbeanServerConn = mbeanServerConn ; 
 } 


NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index b768f40 . . 72edeef 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 40 , 6 + 40 , 7 @ @ dev 
 * handle zero - length ( or missing ) rows during HH paging ( CASSANDRA - 1432 ) 
 * include secondary indexes during schema migrations ( CASSANDRA - 1406 ) 
 * fix commitlog header race during schema change ( CASSANDRA - 1435 ) 
 + * fix ColumnFamilyStoreMBeanIterator to use new type name ( CASSANDRA - 1433 ) 
 
 
 0 . 7 - beta1 
 diff - - git a / src / java / org / apache / cassandra / tools / NodeCmd . java b / src / java / org / apache / cassandra / tools / NodeCmd . java 
 index 2c5c099 . . b293612 100644 
 - - - a / src / java / org / apache / cassandra / tools / NodeCmd . java 
 + + + b / src / java / org / apache / cassandra / tools / NodeCmd . java 
 @ @ - 248 , 9 + 248 , 9 @ @ public class NodeCmd { 
 / / get a list of column family stores 
 Iterator < Map . Entry < String , ColumnFamilyStoreMBean > > cfamilies = probe . getColumnFamilyStoreMBeanProxies ( ) ; 
 
 - for ( ; cfamilies . hasNext ( ) ; ) 
 + while ( cfamilies . hasNext ( ) ) 
 { 
 - Map . Entry < String , ColumnFamilyStoreMBean > entry = cfamilies . next ( ) ; 
 + Entry < String , ColumnFamilyStoreMBean > entry = cfamilies . next ( ) ; 
 String tableName = entry . getKey ( ) ; 
 ColumnFamilyStoreMBean cfsProxy = entry . getValue ( ) ; 
 
 diff - - git a / src / java / org / apache / cassandra / tools / NodeProbe . java b / src / java / org / apache / cassandra / tools / NodeProbe . java 
 index 3550a6b . . fea8095 100644 
 - - - a / src / java / org / apache / cassandra / tools / NodeProbe . java 
 + + + b / src / java / org / apache / cassandra / tools / NodeProbe . java 
 @ @ - 425 , 7 + 425 , 7 @ @ class ColumnFamilyStoreMBeanIterator implements Iterator < Map . Entry < String , Colum 
 public ColumnFamilyStoreMBeanIterator ( MBeanServerConnection mbeanServerConn ) 
 throws MalformedObjectNameException , NullPointerException , IOException 
 { 
 - ObjectName query = new ObjectName ( " org . apache . cassandra . db : type = ColumnFamilyStores , * " ) ; 
 + ObjectName query = new ObjectName ( " org . apache . cassandra . db : type = ColumnFamilies , * " ) ; 
 resIter = mbeanServerConn . queryNames ( query , null ) . iterator ( ) ; 
 this . mbeanServerConn = mbeanServerConn ; 
 }
