BLEU SCORE: 0.020980574531482755

TEST MSG: CASSANDRA - 13159 : Coalescing strategy can enter infinite loop
GENERATED MSG: Fix exception during move when localhost is the only source

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 0c7d129 . . 5c86687 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 2 . 1 . 17 <nl> + * Coalescing strategy can enter infinite loop ( CASSANDRA - 13159 ) <nl> * Upgrade netty version to fix memory leak with client encryption ( CASSANDRA - 13114 ) <nl> * Fix paging for DISTINCT queries on partition keys and static columns ( CASSANDRA - 13017 ) <nl> * Fix race causing infinite loop if Thrift server is stopped before it starts listening ( CASSANDRA - 12856 ) <nl> diff - - git a / src / java / org / apache / cassandra / utils / CoalescingStrategies . java b / src / java / org / apache / cassandra / utils / CoalescingStrategies . java <nl> index ca1399b . . 6b69066 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / CoalescingStrategies . java <nl> + + + b / src / java / org / apache / cassandra / utils / CoalescingStrategies . java <nl> @ @ - 96 , 7 + 96 , 7 @ @ public class CoalescingStrategies <nl> { <nl> / / only sleep if we can expect to double the number of messages we ' re sending in the time interval <nl> long sleep = messages * averageGap ; <nl> - if ( sleep > maxCoalesceWindow ) <nl> + if ( sleep < = 0 | | sleep > maxCoalesceWindow ) <nl> return false ; <nl> <nl> / / assume we receive as many messages as we expect ; apply the same logic to the future batch :
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / cql3 / Cql . g b / src / java / org / apache / cassandra / cql3 / Cql . g <nl> index ba01f85 . . bcfac8a 100644 <nl> - - - a / src / java / org / apache / cassandra / cql3 / Cql . g <nl> + + + b / src / java / org / apache / cassandra / cql3 / Cql . g <nl> @ @ - 533 , 6 + 533 , 7 @ @ native _ type returns [ String str ] <nl> unreserved _ keyword returns [ String str ] <nl> : k = ( K _ KEY <nl> | K _ CONSISTENCY <nl> + | K _ CLUSTERING <nl> | K _ LEVEL <nl> | K _ COUNT <nl> | K _ TTL

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 0c7d129 . . 5c86687 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 2 . 1 . 17 
 + * Coalescing strategy can enter infinite loop ( CASSANDRA - 13159 ) 
 * Upgrade netty version to fix memory leak with client encryption ( CASSANDRA - 13114 ) 
 * Fix paging for DISTINCT queries on partition keys and static columns ( CASSANDRA - 13017 ) 
 * Fix race causing infinite loop if Thrift server is stopped before it starts listening ( CASSANDRA - 12856 ) 
 diff - - git a / src / java / org / apache / cassandra / utils / CoalescingStrategies . java b / src / java / org / apache / cassandra / utils / CoalescingStrategies . java 
 index ca1399b . . 6b69066 100644 
 - - - a / src / java / org / apache / cassandra / utils / CoalescingStrategies . java 
 + + + b / src / java / org / apache / cassandra / utils / CoalescingStrategies . java 
 @ @ - 96 , 7 + 96 , 7 @ @ public class CoalescingStrategies 
 { 
 / / only sleep if we can expect to double the number of messages we ' re sending in the time interval 
 long sleep = messages * averageGap ; 
 - if ( sleep > maxCoalesceWindow ) 
 + if ( sleep < = 0 | | sleep > maxCoalesceWindow ) 
 return false ; 
 
 / / assume we receive as many messages as we expect ; apply the same logic to the future batch :

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / cql3 / Cql . g b / src / java / org / apache / cassandra / cql3 / Cql . g 
 index ba01f85 . . bcfac8a 100644 
 - - - a / src / java / org / apache / cassandra / cql3 / Cql . g 
 + + + b / src / java / org / apache / cassandra / cql3 / Cql . g 
 @ @ - 533 , 6 + 533 , 7 @ @ native _ type returns [ String str ] 
 unreserved _ keyword returns [ String str ] 
 : k = ( K _ KEY 
 | K _ CONSISTENCY 
 + | K _ CLUSTERING 
 | K _ LEVEL 
 | K _ COUNT 
 | K _ TTL
