BLEU SCORE: 0.050243511979240846

TEST MSG: fix errors in cassandra - stress print settings output
GENERATED MSG: fix terminination of the stress . java when errors were encountered

TEST DIFF (one line): diff - - git a / tools / stress / src / org / apache / cassandra / stress / settings / OptionDistribution . java b / tools / stress / src / org / apache / cassandra / stress / settings / OptionDistribution . java <nl> index f613985 . . 8784158 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / settings / OptionDistribution . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / settings / OptionDistribution . java <nl> @ @ - 482 , 7 + 482 , 7 @ @ public class OptionDistribution extends Option <nl> } <nl> <nl> @ Override <nl> - public String getConfigAsString ( ) { return String . format ( " Gaussian : min = % d , max = % d , mean = % f , stdev = % f " , min , max , stdev , mean ) ; } <nl> + public String getConfigAsString ( ) { return String . format ( " Gaussian : min = % d , max = % d , mean = % f , stdev = % f " , min , max , mean , stdev ) ; } <nl> <nl> } <nl> <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / settings / OptionRatioDistribution . java b / tools / stress / src / org / apache / cassandra / stress / settings / OptionRatioDistribution . java <nl> index 4d78b7a . . 1a8aa83 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / settings / OptionRatioDistribution . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / settings / OptionRatioDistribution . java <nl> @ @ - 160 , 7 + 160 , 7 @ @ public class OptionRatioDistribution extends Option <nl> } <nl> <nl> @ Override <nl> - public String getConfigAsString ( ) { return String . format ( " Ration : divisor = % f ; delegate = % s " , divisor , delegate . getConfigAsString ( ) ) ; } ; <nl> + public String getConfigAsString ( ) { return String . format ( " Ratio : divisor = % f ; delegate = % s " , divisor , delegate . getConfigAsString ( ) ) ; } ; <nl> <nl> } <nl> <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / settings / SettingsLog . java b / tools / stress / src / org / apache / cassandra / stress / settings / SettingsLog . java <nl> index 5a120fa . . dcc220f 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / settings / SettingsLog . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / settings / SettingsLog . java <nl> @ @ - 101 , 7 + 101 , 7 @ @ public class SettingsLog implements Serializable <nl> public void printSettings ( MultiPrintStream out ) <nl> { <nl> out . printf ( " No Summary : % b % n " , noSummary ) ; <nl> - out . printf ( " Print Setting : % b % n " , noSettings ) ; <nl> + out . printf ( " No Settings : % b % n " , noSettings ) ; <nl> out . printf ( " File : % s % n " , file ) ; <nl> out . printf ( " Interval Millis : % d % n " , intervalMillis ) ; <nl> out . printf ( " Level : % s % n " , level ) ;
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 14dca80 . . 827a4ec 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 19 , 6 + 19 , 8 @ @ <nl> ( CASSANDRA - 4088 ) <nl> * relax path length requirement for sstable files when upgrading on <nl> non - Windows platforms ( CASSANDRA - 4110 ) <nl> + * fix terminination of the stress . java when errors were encountered <nl> + ( CASSANDRA - 4128 ) <nl> <nl> <nl> 1 . 1 - beta2 <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / Stress . java b / tools / stress / src / org / apache / cassandra / stress / Stress . java <nl> index 36f0410 . . c5e65f8 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / Stress . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / Stress . java <nl> @ @ - 88 , 7 + 88 , 7 @ @ public final class Stress <nl> } <nl> else <nl> { <nl> - new StressAction ( session , outStream ) . run ( ) ; <nl> + new StressAction ( session , outStream ) . start ( ) ; <nl> } <nl> } <nl> <nl> diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressAction . java b / tools / stress / src / org / apache / cassandra / stress / StressAction . java <nl> index 8d6a0f5 . . d175170 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / stress / StressAction . java <nl> + + + b / tools / stress / src / org / apache / cassandra / stress / StressAction . java <nl> @ @ - 137 , 6 + 137 , 9 @ @ public class StressAction extends Thread <nl> } <nl> } <nl> <nl> + if ( producer . isAlive ( ) ) <nl> + producer . interrupt ( ) ; / / if producer is still alive it means that we had errors in the consumers <nl> + <nl> / / marking an end of the output to the client <nl> output . println ( " END " ) ; <nl> } <nl> @ @ - 161 , 7 + 164 , 8 @ @ public class StressAction extends Thread <nl> } <nl> catch ( InterruptedException e ) <nl> { <nl> - System . err . println ( " Producer error - " + e . getMessage ( ) ) ; <nl> + if ( e . getMessage ( ) ! = null ) <nl> + System . err . println ( " Producer error - " + e . getMessage ( ) ) ; <nl> return ; <nl> } <nl> }

TEST DIFF:
diff - - git a / tools / stress / src / org / apache / cassandra / stress / settings / OptionDistribution . java b / tools / stress / src / org / apache / cassandra / stress / settings / OptionDistribution . java 
 index f613985 . . 8784158 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / settings / OptionDistribution . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / settings / OptionDistribution . java 
 @ @ - 482 , 7 + 482 , 7 @ @ public class OptionDistribution extends Option 
 } 
 
 @ Override 
 - public String getConfigAsString ( ) { return String . format ( " Gaussian : min = % d , max = % d , mean = % f , stdev = % f " , min , max , stdev , mean ) ; } 
 + public String getConfigAsString ( ) { return String . format ( " Gaussian : min = % d , max = % d , mean = % f , stdev = % f " , min , max , mean , stdev ) ; } 
 
 } 
 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / settings / OptionRatioDistribution . java b / tools / stress / src / org / apache / cassandra / stress / settings / OptionRatioDistribution . java 
 index 4d78b7a . . 1a8aa83 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / settings / OptionRatioDistribution . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / settings / OptionRatioDistribution . java 
 @ @ - 160 , 7 + 160 , 7 @ @ public class OptionRatioDistribution extends Option 
 } 
 
 @ Override 
 - public String getConfigAsString ( ) { return String . format ( " Ration : divisor = % f ; delegate = % s " , divisor , delegate . getConfigAsString ( ) ) ; } ; 
 + public String getConfigAsString ( ) { return String . format ( " Ratio : divisor = % f ; delegate = % s " , divisor , delegate . getConfigAsString ( ) ) ; } ; 
 
 } 
 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / settings / SettingsLog . java b / tools / stress / src / org / apache / cassandra / stress / settings / SettingsLog . java 
 index 5a120fa . . dcc220f 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / settings / SettingsLog . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / settings / SettingsLog . java 
 @ @ - 101 , 7 + 101 , 7 @ @ public class SettingsLog implements Serializable 
 public void printSettings ( MultiPrintStream out ) 
 { 
 out . printf ( " No Summary : % b % n " , noSummary ) ; 
 - out . printf ( " Print Setting : % b % n " , noSettings ) ; 
 + out . printf ( " No Settings : % b % n " , noSettings ) ; 
 out . printf ( " File : % s % n " , file ) ; 
 out . printf ( " Interval Millis : % d % n " , intervalMillis ) ; 
 out . printf ( " Level : % s % n " , level ) ;

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 14dca80 . . 827a4ec 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 19 , 6 + 19 , 8 @ @ 
 ( CASSANDRA - 4088 ) 
 * relax path length requirement for sstable files when upgrading on 
 non - Windows platforms ( CASSANDRA - 4110 ) 
 + * fix terminination of the stress . java when errors were encountered 
 + ( CASSANDRA - 4128 ) 
 
 
 1 . 1 - beta2 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / Stress . java b / tools / stress / src / org / apache / cassandra / stress / Stress . java 
 index 36f0410 . . c5e65f8 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / Stress . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / Stress . java 
 @ @ - 88 , 7 + 88 , 7 @ @ public final class Stress 
 } 
 else 
 { 
 - new StressAction ( session , outStream ) . run ( ) ; 
 + new StressAction ( session , outStream ) . start ( ) ; 
 } 
 } 
 
 diff - - git a / tools / stress / src / org / apache / cassandra / stress / StressAction . java b / tools / stress / src / org / apache / cassandra / stress / StressAction . java 
 index 8d6a0f5 . . d175170 100644 
 - - - a / tools / stress / src / org / apache / cassandra / stress / StressAction . java 
 + + + b / tools / stress / src / org / apache / cassandra / stress / StressAction . java 
 @ @ - 137 , 6 + 137 , 9 @ @ public class StressAction extends Thread 
 } 
 } 
 
 + if ( producer . isAlive ( ) ) 
 + producer . interrupt ( ) ; / / if producer is still alive it means that we had errors in the consumers 
 + 
 / / marking an end of the output to the client 
 output . println ( " END " ) ; 
 } 
 @ @ - 161 , 7 + 164 , 8 @ @ public class StressAction extends Thread 
 } 
 catch ( InterruptedException e ) 
 { 
 - System . err . println ( " Producer error - " + e . getMessage ( ) ) ; 
 + if ( e . getMessage ( ) ! = null ) 
 + System . err . println ( " Producer error - " + e . getMessage ( ) ) ; 
 return ; 
 } 
 }
