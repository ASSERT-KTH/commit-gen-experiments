BLEU SCORE: 0.034353182138500235

TEST MSG: Force config client mode in CQLSSTableWriter
GENERATED MSG: merge from 2 . 0 . 0

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 4586137 . . bdfa397 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 36 , 6 + 36 , 7 @ @ <nl> * Fix incremental repair not remove parent session on remote ( CASSANDRA - 8291 ) <nl> * Improve JBOD disk utilization ( CASSANDRA - 7386 ) <nl> * Log failed host when preparing incremental repair ( CASSANDRA - 8228 ) <nl> + * Force config client mode in CQLSSTableWriter ( CASSANDRA - 8281 ) <nl> Merged from 2 . 0 : <nl> * Fix MOVED _ NODE topology event never being emitted when a node <nl> moves its token ( CASSANDRA - 8373 ) <nl> diff - - git a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> index f302599 . . a42c480 100644 <nl> - - - a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> + + + b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> @ @ - 76 , 6 + 76 , 12 @ @ import org . apache . cassandra . utils . Pair ; <nl> * / <nl> public class CQLSSTableWriter implements Closeable <nl> { <nl> + static <nl> + { <nl> + / / The CQLSSTableWriter must always be used in client mode . <nl> + Config . setClientMode ( true ) ; <nl> + } <nl> + <nl> private final AbstractSSTableSimpleWriter writer ; <nl> private final UpdateStatement insert ; <nl> private final List < ColumnSpecification > boundNames ;
NEAREST DIFF (one line): diff - - git a / pylib / cqlshlib / cql3handling . py b / pylib / cqlshlib / cql3handling . py <nl> index c83c94d . . ca95766 100644 <nl> - - - a / pylib / cqlshlib / cql3handling . py <nl> + + + b / pylib / cqlshlib / cql3handling . py <nl> @ @ - 503 , 10 + 503 , 6 @ @ def cf _ new _ prop _ val _ completer ( ctxt , cass ) : <nl> if this _ opt in ( ' min _ compaction _ threshold ' , ' max _ compaction _ threshold ' , <nl> ' gc _ grace _ seconds ' ) : <nl> return [ Hint ( ' < integer > ' ) ] <nl> - if this _ opt = = ' default _ read _ consistency ' : <nl> - return [ cl for cl in CqlRuleSet . consistency _ levels if cl ! = ' ANY ' ] <nl> - if this _ opt = = ' default _ write _ consistency ' : <nl> - return CqlRuleSet . consistency _ levels <nl> return [ Hint ( ' < option _ value > ' ) ] <nl> <nl> def cf _ new _ prop _ val _ mapkey _ completer ( ctxt , cass ) : <nl> diff - - git a / src / java / org / apache / cassandra / config / CFMetaData . java b / src / java / org / apache / cassandra / config / CFMetaData . java <nl> index f3b235d . . 33e3f00 100644 <nl> - - - a / src / java / org / apache / cassandra / config / CFMetaData . java <nl> + + + b / src / java / org / apache / cassandra / config / CFMetaData . java <nl> @ @ - 136 , 8 + 136 , 6 @ @ public final class CFMetaData <nl> + " value _ alias text , " <nl> + " column _ aliases text , " <nl> + " compaction _ strategy _ options text , " <nl> - + " default _ read _ consistency text , " <nl> - + " default _ write _ consistency text , " <nl> + " PRIMARY KEY ( keyspace _ name , columnfamily _ name ) " <nl> + " ) WITH COMMENT = ' ColumnFamily definitions ' AND gc _ grace _ seconds = 8640 " ) ; <nl>

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 4586137 . . bdfa397 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 36 , 6 + 36 , 7 @ @ 
 * Fix incremental repair not remove parent session on remote ( CASSANDRA - 8291 ) 
 * Improve JBOD disk utilization ( CASSANDRA - 7386 ) 
 * Log failed host when preparing incremental repair ( CASSANDRA - 8228 ) 
 + * Force config client mode in CQLSSTableWriter ( CASSANDRA - 8281 ) 
 Merged from 2 . 0 : 
 * Fix MOVED _ NODE topology event never being emitted when a node 
 moves its token ( CASSANDRA - 8373 ) 
 diff - - git a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 index f302599 . . a42c480 100644 
 - - - a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 + + + b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 @ @ - 76 , 6 + 76 , 12 @ @ import org . apache . cassandra . utils . Pair ; 
 * / 
 public class CQLSSTableWriter implements Closeable 
 { 
 + static 
 + { 
 + / / The CQLSSTableWriter must always be used in client mode . 
 + Config . setClientMode ( true ) ; 
 + } 
 + 
 private final AbstractSSTableSimpleWriter writer ; 
 private final UpdateStatement insert ; 
 private final List < ColumnSpecification > boundNames ;

NEAREST DIFF:
diff - - git a / pylib / cqlshlib / cql3handling . py b / pylib / cqlshlib / cql3handling . py 
 index c83c94d . . ca95766 100644 
 - - - a / pylib / cqlshlib / cql3handling . py 
 + + + b / pylib / cqlshlib / cql3handling . py 
 @ @ - 503 , 10 + 503 , 6 @ @ def cf _ new _ prop _ val _ completer ( ctxt , cass ) : 
 if this _ opt in ( ' min _ compaction _ threshold ' , ' max _ compaction _ threshold ' , 
 ' gc _ grace _ seconds ' ) : 
 return [ Hint ( ' < integer > ' ) ] 
 - if this _ opt = = ' default _ read _ consistency ' : 
 - return [ cl for cl in CqlRuleSet . consistency _ levels if cl ! = ' ANY ' ] 
 - if this _ opt = = ' default _ write _ consistency ' : 
 - return CqlRuleSet . consistency _ levels 
 return [ Hint ( ' < option _ value > ' ) ] 
 
 def cf _ new _ prop _ val _ mapkey _ completer ( ctxt , cass ) : 
 diff - - git a / src / java / org / apache / cassandra / config / CFMetaData . java b / src / java / org / apache / cassandra / config / CFMetaData . java 
 index f3b235d . . 33e3f00 100644 
 - - - a / src / java / org / apache / cassandra / config / CFMetaData . java 
 + + + b / src / java / org / apache / cassandra / config / CFMetaData . java 
 @ @ - 136 , 8 + 136 , 6 @ @ public final class CFMetaData 
 + " value _ alias text , " 
 + " column _ aliases text , " 
 + " compaction _ strategy _ options text , " 
 - + " default _ read _ consistency text , " 
 - + " default _ write _ consistency text , " 
 + " PRIMARY KEY ( keyspace _ name , columnfamily _ name ) " 
 + " ) WITH COMMENT = ' ColumnFamily definitions ' AND gc _ grace _ seconds = 8640 " ) ; 

