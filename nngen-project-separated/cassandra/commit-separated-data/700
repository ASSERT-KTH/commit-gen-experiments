BLEU SCORE: 0.024615130620079664

TEST MSG: Fix potential resource leak in RMIServerSocketFactoryImpl
GENERATED MSG: JMX RMI server sockets have SO _ REUSEADDR enabled

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 3db2c77 . . 0a1d406 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 0 . 9 <nl> + * Fix potential resource leak in RMIServerSocketFactoryImpl ( CASSANDRA - 12331 ) <nl> * Backport CASSANDRA - 12002 ( CASSANDRA - 12177 ) <nl> * Make sure compaction stats are updated when compaction is interrupted ( CASSANDRA - 12100 ) <nl> * Fix potential bad messaging service message for paged range reads <nl> diff - - git a / src / java / org / apache / cassandra / utils / RMIServerSocketFactoryImpl . java b / src / java / org / apache / cassandra / utils / RMIServerSocketFactoryImpl . java <nl> index 6d4ff72 . . 6444a65 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / RMIServerSocketFactoryImpl . java <nl> + + + b / src / java / org / apache / cassandra / utils / RMIServerSocketFactoryImpl . java <nl> @ @ - 23 , 6 + 23 , 7 @ @ package org . apache . cassandra . utils ; <nl> import java . io . IOException ; <nl> import java . net . InetAddress ; <nl> import java . net . ServerSocket ; <nl> + import java . net . SocketException ; <nl> import java . rmi . server . RMIServerSocketFactory ; <nl> import javax . net . ServerSocketFactory ; <nl> <nl> @ @ - 34 , 8 + 35 , 16 @ @ public class RMIServerSocketFactoryImpl implements RMIServerSocketFactory <nl> { <nl> ServerSocket socket = ServerSocketFactory . getDefault ( ) <nl> . createServerSocket ( pPort , 0 , InetAddress . getLoopbackAddress ( ) ) ; <nl> - socket . setReuseAddress ( true ) ; <nl> - return socket ; <nl> + try <nl> + { <nl> + socket . setReuseAddress ( true ) ; <nl> + return socket ; <nl> + } <nl> + catch ( SocketException e ) <nl> + { <nl> + socket . close ( ) ; <nl> + throw e ; <nl> + } <nl> } <nl> <nl> public boolean equals ( Object obj )
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 3db2c77 . . 0a1d406 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 0 . 9 
 + * Fix potential resource leak in RMIServerSocketFactoryImpl ( CASSANDRA - 12331 ) 
 * Backport CASSANDRA - 12002 ( CASSANDRA - 12177 ) 
 * Make sure compaction stats are updated when compaction is interrupted ( CASSANDRA - 12100 ) 
 * Fix potential bad messaging service message for paged range reads 
 diff - - git a / src / java / org / apache / cassandra / utils / RMIServerSocketFactoryImpl . java b / src / java / org / apache / cassandra / utils / RMIServerSocketFactoryImpl . java 
 index 6d4ff72 . . 6444a65 100644 
 - - - a / src / java / org / apache / cassandra / utils / RMIServerSocketFactoryImpl . java 
 + + + b / src / java / org / apache / cassandra / utils / RMIServerSocketFactoryImpl . java 
 @ @ - 23 , 6 + 23 , 7 @ @ package org . apache . cassandra . utils ; 
 import java . io . IOException ; 
 import java . net . InetAddress ; 
 import java . net . ServerSocket ; 
 + import java . net . SocketException ; 
 import java . rmi . server . RMIServerSocketFactory ; 
 import javax . net . ServerSocketFactory ; 
 
 @ @ - 34 , 8 + 35 , 16 @ @ public class RMIServerSocketFactoryImpl implements RMIServerSocketFactory 
 { 
 ServerSocket socket = ServerSocketFactory . getDefault ( ) 
 . createServerSocket ( pPort , 0 , InetAddress . getLoopbackAddress ( ) ) ; 
 - socket . setReuseAddress ( true ) ; 
 - return socket ; 
 + try 
 + { 
 + socket . setReuseAddress ( true ) ; 
 + return socket ; 
 + } 
 + catch ( SocketException e ) 
 + { 
 + socket . close ( ) ; 
 + throw e ; 
 + } 
 } 
 
 public boolean equals ( Object obj )

NEAREST DIFF:
ELIMINATEDSENTENCE
