BLEU SCORE: 0.08116697886877475

TEST MSG: Make SASI timeouts easier to debug
GENERATED MSG: Fix primary index calculation for SASI

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 86db73a . . fbd08e5 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 4 . 0 <nl> + * Add extra information to SASI timeout exception ( CASSANDRA - 13677 ) <nl> * Add incremental repair support for - - hosts , - - force , and subrange repair ( CASSANDRA - 13818 ) <nl> * Rework CompactionStrategyManager . getScanners synchronization ( CASSANDRA - 13786 ) <nl> * Add additional unit tests for batch behavior , TTLs , Timestamps ( CASSANDRA - 13846 ) <nl> diff - - git a / src / java / org / apache / cassandra / index / sasi / exceptions / TimeQuotaExceededException . java b / src / java / org / apache / cassandra / index / sasi / exceptions / TimeQuotaExceededException . java <nl> index af577dc . . e237614 100644 <nl> - - - a / src / java / org / apache / cassandra / index / sasi / exceptions / TimeQuotaExceededException . java <nl> + + + b / src / java / org / apache / cassandra / index / sasi / exceptions / TimeQuotaExceededException . java <nl> @ @ - 18 , 4 + 18 , 8 @ @ <nl> package org . apache . cassandra . index . sasi . exceptions ; <nl> <nl> public class TimeQuotaExceededException extends RuntimeException <nl> - { } <nl> + { <nl> + public TimeQuotaExceededException ( String message ) { <nl> + 	 super ( message ) ; <nl> + } <nl> + } <nl> diff - - git a / src / java / org / apache / cassandra / index / sasi / plan / QueryController . java b / src / java / org / apache / cassandra / index / sasi / plan / QueryController . java <nl> index 4ed4fff . . c6aa7ee 100644 <nl> - - - a / src / java / org / apache / cassandra / index / sasi / plan / QueryController . java <nl> + + + b / src / java / org / apache / cassandra / index / sasi / plan / QueryController . java <nl> @ @ - 153 , 8 + 153 , 13 @ @ public class QueryController <nl> <nl> public void checkpoint ( ) <nl> { <nl> - if ( ( System . nanoTime ( ) - executionStart ) > = executionQuota ) <nl> - throw new TimeQuotaExceededException ( ) ; <nl> + 	 long executionTime = ( System . nanoTime ( ) - executionStart ) ; <nl> + <nl> + if ( executionTime > = executionQuota ) <nl> + throw new TimeQuotaExceededException ( <nl> + 	 " Command ' " + command + " ' took too long " + <nl> + " ( " + TimeUnit . NANOSECONDS . toMillis ( executionTime ) + <nl> + " > = " + TimeUnit . NANOSECONDS . toMillis ( executionQuota ) + " ms ) . " ) ; <nl> } <nl> <nl> public void releaseIndexes ( Operation operation )
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 86db73a . . fbd08e5 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 4 . 0 
 + * Add extra information to SASI timeout exception ( CASSANDRA - 13677 ) 
 * Add incremental repair support for - - hosts , - - force , and subrange repair ( CASSANDRA - 13818 ) 
 * Rework CompactionStrategyManager . getScanners synchronization ( CASSANDRA - 13786 ) 
 * Add additional unit tests for batch behavior , TTLs , Timestamps ( CASSANDRA - 13846 ) 
 diff - - git a / src / java / org / apache / cassandra / index / sasi / exceptions / TimeQuotaExceededException . java b / src / java / org / apache / cassandra / index / sasi / exceptions / TimeQuotaExceededException . java 
 index af577dc . . e237614 100644 
 - - - a / src / java / org / apache / cassandra / index / sasi / exceptions / TimeQuotaExceededException . java 
 + + + b / src / java / org / apache / cassandra / index / sasi / exceptions / TimeQuotaExceededException . java 
 @ @ - 18 , 4 + 18 , 8 @ @ 
 package org . apache . cassandra . index . sasi . exceptions ; 
 
 public class TimeQuotaExceededException extends RuntimeException 
 - { } 
 + { 
 + public TimeQuotaExceededException ( String message ) { 
 + 	 super ( message ) ; 
 + } 
 + } 
 diff - - git a / src / java / org / apache / cassandra / index / sasi / plan / QueryController . java b / src / java / org / apache / cassandra / index / sasi / plan / QueryController . java 
 index 4ed4fff . . c6aa7ee 100644 
 - - - a / src / java / org / apache / cassandra / index / sasi / plan / QueryController . java 
 + + + b / src / java / org / apache / cassandra / index / sasi / plan / QueryController . java 
 @ @ - 153 , 8 + 153 , 13 @ @ public class QueryController 
 
 public void checkpoint ( ) 
 { 
 - if ( ( System . nanoTime ( ) - executionStart ) > = executionQuota ) 
 - throw new TimeQuotaExceededException ( ) ; 
 + 	 long executionTime = ( System . nanoTime ( ) - executionStart ) ; 
 + 
 + if ( executionTime > = executionQuota ) 
 + throw new TimeQuotaExceededException ( 
 + 	 " Command ' " + command + " ' took too long " + 
 + " ( " + TimeUnit . NANOSECONDS . toMillis ( executionTime ) + 
 + " > = " + TimeUnit . NANOSECONDS . toMillis ( executionQuota ) + " ms ) . " ) ; 
 } 
 
 public void releaseIndexes ( Operation operation )

NEAREST DIFF:
ELIMINATEDSENTENCE
