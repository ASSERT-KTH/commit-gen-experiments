BLEU SCORE: 0.005554498269121153

TEST MSG: Fix DatabaseDescriptorRefTest
GENERATED MSG: DatabaseDescriptor should set some defaults to prevent NPE ' s .

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> index 880cb1e . . 36def79 100644 <nl> - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> @ @ - 44 , 7 + 44 , 6 @ @ import org . apache . cassandra . auth . IRoleManager ; <nl> import org . apache . cassandra . config . Config . CommitLogSync ; <nl> import org . apache . cassandra . config . Config . RequestSchedulerId ; <nl> import org . apache . cassandra . dht . IPartitioner ; <nl> - import org . apache . cassandra . dht . Murmur3Partitioner ; <nl> import org . apache . cassandra . exceptions . ConfigurationException ; <nl> import org . apache . cassandra . io . FSWriteError ; <nl> import org . apache . cassandra . io . util . DiskOptimizationStrategy ; <nl> @ @ - 220 , 7 + 219 , 6 @ @ public class DatabaseDescriptor <nl> Config . setClientMode ( true ) ; <nl> conf = new Config ( ) ; <nl> diskOptimizationStrategy = new SpinningDiskOptimizationStrategy ( ) ; <nl> - partitioner = Murmur3Partitioner . instance ; <nl> } <nl> <nl> public static boolean isClientInitialized ( ) <nl> diff - - git a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> index dd9eb59 . . 8a9d01d 100644 <nl> - - - a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> + + + b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> @ @ - 53 , 7 + 53 , 6 @ @ import org . apache . cassandra . exceptions . InvalidRequestException ; <nl> import org . apache . cassandra . exceptions . RequestValidationException ; <nl> import org . apache . cassandra . exceptions . SyntaxException ; <nl> import org . apache . cassandra . io . sstable . format . SSTableFormat ; <nl> - import org . apache . cassandra . io . util . SpinningDiskOptimizationStrategy ; <nl> import org . apache . cassandra . schema . KeyspaceMetadata ; <nl> import org . apache . cassandra . schema . KeyspaceParams ; <nl> import org . apache . cassandra . schema . Types ; <nl> @ @ - 106 , 6 + 105 , 9 @ @ public class CQLSSTableWriter implements Closeable <nl> static <nl> { <nl> DatabaseDescriptor . clientInitialization ( false ) ; <nl> + / / Partitioner is not set in client mode . <nl> + if ( DatabaseDescriptor . getPartitioner ( ) = = null ) <nl> + DatabaseDescriptor . setPartitionerUnsafe ( Murmur3Partitioner . instance ) ; <nl> } <nl> <nl> private final AbstractSSTableSimpleWriter writer ; <nl> diff - - git a / test / microbench / org / apache / cassandra / test / microbench / MutationBench . java b / test / microbench / org / apache / cassandra / test / microbench / MutationBench . java <nl> index 20d8ff5 . . 8c177cf 100644 <nl> - - - a / test / microbench / org / apache / cassandra / test / microbench / MutationBench . java <nl> + + + b / test / microbench / org / apache / cassandra / test / microbench / MutationBench . java <nl> @ @ - 65 , 6 + 65 , 9 @ @ public class MutationBench <nl> static <nl> { <nl> DatabaseDescriptor . clientInitialization ( false ) ; <nl> + / / Partitioner is not set in client mode . <nl> + if ( DatabaseDescriptor . getPartitioner ( ) = = null ) <nl> + DatabaseDescriptor . setPartitionerUnsafe ( Murmur3Partitioner . instance ) ; <nl> } <nl> <nl> static String keyspace = " keyspace1 " ; <nl> diff - - git a / test / unit / org / apache / cassandra / config / DatabaseDescriptorRefTest . java b / test / unit / org / apache / cassandra / config / DatabaseDescriptorRefTest . java <nl> index 2dcfbd1 . . 421142f 100644 <nl> - - - a / test / unit / org / apache / cassandra / config / DatabaseDescriptorRefTest . java <nl> + + + b / test / unit / org / apache / cassandra / config / DatabaseDescriptorRefTest . java <nl> @ @ - 99 , 6 + 99 , 7 @ @ public class DatabaseDescriptorRefTest <nl> " org . apache . cassandra . io . util . DataOutputStreamPlus " , <nl> " org . apache . cassandra . io . util . DataOutputPlus " , <nl> " org . apache . cassandra . io . util . DiskOptimizationStrategy " , <nl> + " org . apache . cassandra . io . util . SpinningDiskOptimizationStrategy " , <nl> " org . apache . cassandra . locator . SimpleSeedProvider " , <nl> " org . apache . cassandra . locator . SeedProvider " , <nl> " org . apache . cassandra . net . BackPressureStrategy " , <nl> diff - - git a / tools / stress / src / org / apache / cassandra / io / sstable / StressCQLSSTableWriter . java b / tools / stress / src / org / apache / cassandra / io / sstable / StressCQLSSTableWriter . java <nl> index d9bf669 . . 4fe05a8 100644 <nl> - - - a / tools / stress / src / org / apache / cassandra / io / sstable / StressCQLSSTableWriter . java <nl> + + + b / tools / stress / src / org / apache / cassandra / io / sstable / StressCQLSSTableWriter . java <nl> @ @ - 99 , 6 + 99 , 9 @ @ public class StressCQLSSTableWriter implements Closeable <nl> static <nl> { <nl> DatabaseDescriptor . clientInitialization ( false ) ; <nl> + / / Partitioner is not set in client mode . <nl> + if ( DatabaseDescriptor . getPartitioner ( ) = = null ) <nl> + DatabaseDescriptor . setPartitionerUnsafe ( Murmur3Partitioner . instance ) ; <nl> } <nl> <nl> private final AbstractSSTableSimpleWriter writer ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 index 880cb1e . . 36def79 100644 
 - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 @ @ - 44 , 7 + 44 , 6 @ @ import org . apache . cassandra . auth . IRoleManager ; 
 import org . apache . cassandra . config . Config . CommitLogSync ; 
 import org . apache . cassandra . config . Config . RequestSchedulerId ; 
 import org . apache . cassandra . dht . IPartitioner ; 
 - import org . apache . cassandra . dht . Murmur3Partitioner ; 
 import org . apache . cassandra . exceptions . ConfigurationException ; 
 import org . apache . cassandra . io . FSWriteError ; 
 import org . apache . cassandra . io . util . DiskOptimizationStrategy ; 
 @ @ - 220 , 7 + 219 , 6 @ @ public class DatabaseDescriptor 
 Config . setClientMode ( true ) ; 
 conf = new Config ( ) ; 
 diskOptimizationStrategy = new SpinningDiskOptimizationStrategy ( ) ; 
 - partitioner = Murmur3Partitioner . instance ; 
 } 
 
 public static boolean isClientInitialized ( ) 
 diff - - git a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 index dd9eb59 . . 8a9d01d 100644 
 - - - a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 + + + b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 @ @ - 53 , 7 + 53 , 6 @ @ import org . apache . cassandra . exceptions . InvalidRequestException ; 
 import org . apache . cassandra . exceptions . RequestValidationException ; 
 import org . apache . cassandra . exceptions . SyntaxException ; 
 import org . apache . cassandra . io . sstable . format . SSTableFormat ; 
 - import org . apache . cassandra . io . util . SpinningDiskOptimizationStrategy ; 
 import org . apache . cassandra . schema . KeyspaceMetadata ; 
 import org . apache . cassandra . schema . KeyspaceParams ; 
 import org . apache . cassandra . schema . Types ; 
 @ @ - 106 , 6 + 105 , 9 @ @ public class CQLSSTableWriter implements Closeable 
 static 
 { 
 DatabaseDescriptor . clientInitialization ( false ) ; 
 + / / Partitioner is not set in client mode . 
 + if ( DatabaseDescriptor . getPartitioner ( ) = = null ) 
 + DatabaseDescriptor . setPartitionerUnsafe ( Murmur3Partitioner . instance ) ; 
 } 
 
 private final AbstractSSTableSimpleWriter writer ; 
 diff - - git a / test / microbench / org / apache / cassandra / test / microbench / MutationBench . java b / test / microbench / org / apache / cassandra / test / microbench / MutationBench . java 
 index 20d8ff5 . . 8c177cf 100644 
 - - - a / test / microbench / org / apache / cassandra / test / microbench / MutationBench . java 
 + + + b / test / microbench / org / apache / cassandra / test / microbench / MutationBench . java 
 @ @ - 65 , 6 + 65 , 9 @ @ public class MutationBench 
 static 
 { 
 DatabaseDescriptor . clientInitialization ( false ) ; 
 + / / Partitioner is not set in client mode . 
 + if ( DatabaseDescriptor . getPartitioner ( ) = = null ) 
 + DatabaseDescriptor . setPartitionerUnsafe ( Murmur3Partitioner . instance ) ; 
 } 
 
 static String keyspace = " keyspace1 " ; 
 diff - - git a / test / unit / org / apache / cassandra / config / DatabaseDescriptorRefTest . java b / test / unit / org / apache / cassandra / config / DatabaseDescriptorRefTest . java 
 index 2dcfbd1 . . 421142f 100644 
 - - - a / test / unit / org / apache / cassandra / config / DatabaseDescriptorRefTest . java 
 + + + b / test / unit / org / apache / cassandra / config / DatabaseDescriptorRefTest . java 
 @ @ - 99 , 6 + 99 , 7 @ @ public class DatabaseDescriptorRefTest 
 " org . apache . cassandra . io . util . DataOutputStreamPlus " , 
 " org . apache . cassandra . io . util . DataOutputPlus " , 
 " org . apache . cassandra . io . util . DiskOptimizationStrategy " , 
 + " org . apache . cassandra . io . util . SpinningDiskOptimizationStrategy " , 
 " org . apache . cassandra . locator . SimpleSeedProvider " , 
 " org . apache . cassandra . locator . SeedProvider " , 
 " org . apache . cassandra . net . BackPressureStrategy " , 
 diff - - git a / tools / stress / src / org / apache / cassandra / io / sstable / StressCQLSSTableWriter . java b / tools / stress / src / org / apache / cassandra / io / sstable / StressCQLSSTableWriter . java 
 index d9bf669 . . 4fe05a8 100644 
 - - - a / tools / stress / src / org / apache / cassandra / io / sstable / StressCQLSSTableWriter . java 
 + + + b / tools / stress / src / org / apache / cassandra / io / sstable / StressCQLSSTableWriter . java 
 @ @ - 99 , 6 + 99 , 9 @ @ public class StressCQLSSTableWriter implements Closeable 
 static 
 { 
 DatabaseDescriptor . clientInitialization ( false ) ; 
 + / / Partitioner is not set in client mode . 
 + if ( DatabaseDescriptor . getPartitioner ( ) = = null ) 
 + DatabaseDescriptor . setPartitionerUnsafe ( Murmur3Partitioner . instance ) ; 
 } 
 
 private final AbstractSSTableSimpleWriter writer ;

NEAREST DIFF:
ELIMINATEDSENTENCE
