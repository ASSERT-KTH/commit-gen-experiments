BLEU SCORE: 0.11044795567078944

TEST MSG: Upgrade slf4j to 1 . 7 . 25
GENERATED MSG: merge from 0 . 7

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 80d82dd . . 7632337 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 4 . 0 <nl> + * Upgrade SLF4J from 1 . 7 . 7 to 1 . 7 . 25 <nl> * Default for start _ native _ transport now true if not set in config ( CASSANDRA - 13656 ) <nl> * Don ' t add localhost to the graph when calculating where to stream from ( CASSANDRA - 13583 ) <nl> * Allow skipping equality - restricted clustering columns in ORDER BY clause ( CASSANDRA - 10271 ) <nl> diff - - git a / build . xml b / build . xml <nl> index ec2466d . . 7421329 100644 <nl> - - - a / build . xml <nl> + + + b / build . xml <nl> @ @ - 372 , 9 + 372 , 9 @ @ <nl> < dependency groupId = " org . antlr " artifactId = " antlr - runtime " version = " 3 . 5 . 2 " > <nl> < exclusion groupId = " org . antlr " artifactId = " stringtemplate " / > <nl> < / dependency > <nl> - < dependency groupId = " org . slf4j " artifactId = " slf4j - api " version = " 1 . 7 . 7 " / > <nl> - < dependency groupId = " org . slf4j " artifactId = " log4j - over - slf4j " version = " 1 . 7 . 7 " / > <nl> - < dependency groupId = " org . slf4j " artifactId = " jcl - over - slf4j " version = " 1 . 7 . 7 " / > <nl> + < dependency groupId = " org . slf4j " artifactId = " slf4j - api " version = " 1 . 7 . 25 " / > <nl> + < dependency groupId = " org . slf4j " artifactId = " log4j - over - slf4j " version = " 1 . 7 . 25 " / > <nl> + < dependency groupId = " org . slf4j " artifactId = " jcl - over - slf4j " version = " 1 . 7 . 25 " / > <nl> < dependency groupId = " ch . qos . logback " artifactId = " logback - core " version = " 1 . 1 . 3 " / > <nl> < dependency groupId = " ch . qos . logback " artifactId = " logback - classic " version = " 1 . 1 . 3 " / > <nl> < dependency groupId = " org . codehaus . jackson " artifactId = " jackson - core - asl " version = " 1 . 9 . 2 " / > <nl> diff - - git a / lib / jcl - over - slf4j - 1 . 7 . 25 . jar b / lib / jcl - over - slf4j - 1 . 7 . 25 . jar <nl> new file mode 100644 <nl> index 0000000 . . 8e7fec8 <nl> Binary files / dev / null and b / lib / jcl - over - slf4j - 1 . 7 . 25 . jar differ <nl> diff - - git a / lib / jcl - over - slf4j - 1 . 7 . 7 . jar b / lib / jcl - over - slf4j - 1 . 7 . 7 . jar <nl> deleted file mode 100644 <nl> index ed8d4dd . . 0000000 <nl> Binary files a / lib / jcl - over - slf4j - 1 . 7 . 7 . jar and / dev / null differ <nl> diff - - git a / lib / licenses / jcl - over - slf4j - 1 . 7 . 25 . txt b / lib / licenses / jcl - over - slf4j - 1 . 7 . 25 . txt <nl> new file mode 100644 <nl> index 0000000 . . 315bd49 <nl> - - - / dev / null <nl> + + + b / lib / licenses / jcl - over - slf4j - 1 . 7 . 25 . txt <nl> @ @ - 0 , 0 + 1 , 24 @ @ <nl> + Copyright ( c ) 2004 - 2017 QOS . ch <nl> + All rights reserved . <nl> + <nl> + Permission is hereby granted , free of charge , to any person obtaining <nl> + a copy of this software and associated documentation files ( the <nl> + " Software " ) , to deal in the Software without restriction , including <nl> + without limitation the rights to use , copy , modify , merge , publish , <nl> + distribute , sublicense , and / or sell copies of the Software , and to <nl> + permit persons to whom the Software is furnished to do so , subject to <nl> + the following conditions : <nl> + <nl> + The above copyright notice and this permission notice shall be <nl> + included in all copies or substantial portions of the Software . <nl> + <nl> + THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , <nl> + EXPRESS OR IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF <nl> + MERCHANTABILITY , FITNESS FOR A PARTICULAR PURPOSE AND <nl> + NONINFRINGEMENT . IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE <nl> + LIABLE FOR ANY CLAIM , DAMAGES OR OTHER LIABILITY , WHETHER IN AN ACTION <nl> + OF CONTRACT , TORT OR OTHERWISE , ARISING FROM , OUT OF OR IN CONNECTION <nl> + WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE . <nl> + <nl> + <nl> + <nl> diff - - git a / lib / licenses / jcl - over - slf4j - 1 . 7 . 7 . txt b / lib / licenses / jcl - over - slf4j - 1 . 7 . 7 . txt <nl> deleted file mode 100644 <nl> index dbfc769 . . 0000000 <nl> - - - a / lib / licenses / jcl - over - slf4j - 1 . 7 . 7 . txt <nl> + + + / dev / null <nl> @ @ - 1 , 20 + 0 , 0 @ @ <nl> - Copyright ( c ) 2004 - 2008 QOS . ch <nl> - All rights reserved . <nl> - <nl> - Permission is hereby granted , free of charge , to any person obtaining a <nl> - copy of this software and associated documentation files ( the " Software " ) , <nl> - to deal in the Software without restriction , including without limitation <nl> - the rights to use , copy , modify , merge , publish , distribute , sublicense , <nl> - and / or sell copies of the Software , and to permit persons to whom the <nl> - Software is furnished to do so , subject to the following conditions : <nl> - <nl> - The above copyright notice and this permission notice shall be included in <nl> - all copies or substantial portions of the Software . <nl> - <nl> - THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR <nl> - IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , <nl> - FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL <nl> - THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM , DAMAGES OR OTHER <nl> - LIABILITY , WHETHER IN AN ACTION OF CONTRACT , TORT OR OTHERWISE , ARISING <nl> - FROM , OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER <nl> - DEALINGS IN THE SOFTWARE . <nl> diff - - git a / lib / licenses / log4j - over - slf4j - 1 . 7 . 25 . txt b / lib / licenses / log4j - over - slf4j - 1 . 7 . 25 . txt <nl> new file mode 100644 <nl> index 0000000 . . 315bd49 <nl> - - - / dev / null <nl> + + + b / lib / licenses / log4j - over - slf4j - 1 . 7 . 25 . txt <nl> @ @ - 0 , 0 + 1 , 24 @ @ <nl> + Copyright ( c ) 2004 - 2017 QOS . ch <nl> + All rights reserved . <nl> + <nl> + Permission is hereby granted , free of charge , to any person obtaining <nl> + a copy of this software and associated documentation files ( the <nl> + " Software " ) , to deal in the Software without restriction , including <nl> + without limitation the rights to use , copy , modify , merge , publish , <nl> + distribute , sublicense , and / or sell copies of the Software , and to <nl> + permit persons to whom the Software is furnished to do so , subject to <nl> + the following conditions : <nl> + <nl> + The above copyright notice and this permission notice shall be <nl> + included in all copies or substantial portions of the Software . <nl> + <nl> + THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , <nl> + EXPRESS OR IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF <nl> + MERCHANTABILITY , FITNESS FOR A PARTICULAR PURPOSE AND <nl> + NONINFRINGEMENT . IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE <nl> + LIABLE FOR ANY CLAIM , DAMAGES OR OTHER LIABILITY , WHETHER IN AN ACTION <nl> + OF CONTRACT , TORT OR OTHERWISE , ARISING FROM , OUT OF OR IN CONNECTION <nl> + WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE . <nl> + <nl> + <nl> + <nl> diff - - git a / lib / licenses / log4j - over - slf4j - 1 . 7 . 7 . txt b / lib / licenses / log4j - over - slf4j - 1 . 7 . 7 . txt <nl> deleted file mode 100644 <nl> index dbfc769 . . 0000000 <nl> - - - a / lib / licenses / log4j - over - slf4j - 1 . 7 . 7 . txt <nl> + + + / dev / null <nl> @ @ - 1 , 20 + 0 , 0 @ @ <nl> - Copyright ( c ) 2004 - 2008 QOS . ch <nl> - All rights reserved . <nl> - <nl> - Permission is hereby granted , free of charge , to any person obtaining a <nl> - copy of this software and associated documentation files ( the " Software " ) , <nl> - to deal in the Software without restriction , including without limitation <nl> - the rights to use , copy , modify , merge , publish , distribute , sublicense , <nl> - and / or sell copies of the Software , and to permit persons to whom the <nl> - Software is furnished to do so , subject to the following conditions : <nl> - <nl> - The above copyright notice and this permission notice shall be included in <nl> - all copies or substantial portions of the Software . <nl> - <nl> - THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR <nl> - IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , <nl> - FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL <nl> - THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM , DAMAGES OR OTHER <nl> - LIABILITY , WHETHER IN AN ACTION OF CONTRACT , TORT OR OTHERWISE , ARISING <nl> - FROM , OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER <nl> - DEALINGS IN THE SOFTWARE . <nl> diff - - git a / lib / licenses / slf4j - api - 1 . 7 . 25 . txt b / lib / licenses / slf4j - api - 1 . 7 . 25 . txt <nl> new file mode 100644 <nl> index 0000000 . . 315bd49 <nl> - - - / dev / null <nl> + + + b / lib / licenses / slf4j - api - 1 . 7 . 25 . txt <nl> @ @ - 0 , 0 + 1 , 24 @ @ <nl> + Copyright ( c ) 2004 - 2017 QOS . ch <nl> + All rights reserved . <nl> + <nl> + Permission is hereby granted , free of charge , to any person obtaining <nl> + a copy of this software and associated documentation files ( the <nl> + " Software " ) , to deal in the Software without restriction , including <nl> + without limitation the rights to use , copy , modify , merge , publish , <nl> + distribute , sublicense , and / or sell copies of the Software , and to <nl> + permit persons to whom the Software is furnished to do so , subject to <nl> + the following conditions : <nl> + <nl> + The above copyright notice and this permission notice shall be <nl> + included in all copies or substantial portions of the Software . <nl> + <nl> + THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , <nl> + EXPRESS OR IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF <nl> + MERCHANTABILITY , FITNESS FOR A PARTICULAR PURPOSE AND <nl> + NONINFRINGEMENT . IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE <nl> + LIABLE FOR ANY CLAIM , DAMAGES OR OTHER LIABILITY , WHETHER IN AN ACTION <nl> + OF CONTRACT , TORT OR OTHERWISE , ARISING FROM , OUT OF OR IN CONNECTION <nl> + WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE . <nl> + <nl> + <nl> + <nl> diff - - git a / lib / licenses / slf4j - api - 1 . 7 . 7 . txt b / lib / licenses / slf4j - api - 1 . 7 . 7 . txt <nl> deleted file mode 100644 <nl> index dbfc769 . . 0000000 <nl> - - - a / lib / licenses / slf4j - api - 1 . 7 . 7 . txt <nl> + + + / dev / null <nl> @ @ - 1 , 20 + 0 , 0 @ @ <nl> - Copyright ( c ) 2004 - 2008 QOS . ch <nl> - All rights reserved . <nl> - <nl> - Permission is hereby granted , free of charge , to any person obtaining a <nl> - copy of this software and associated documentation files ( the " Software " ) , <nl> - to deal in the Software without restriction , including without limitation <nl> - the rights to use , copy , modify , merge , publish , distribute , sublicense , <nl> - and / or sell copies of the Software , and to permit persons to whom the <nl> - Software is furnished to do so , subject to the following conditions : <nl> - <nl> - The above copyright notice and this permission notice shall be included in <nl> - all copies or substantial portions of the Software . <nl> - <nl> - THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR <nl> - IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , <nl> - FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL <nl> - THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM , DAMAGES OR OTHER <nl> - LIABILITY , WHETHER IN AN ACTION OF CONTRACT , TORT OR OTHERWISE , ARISING <nl> - FROM , OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER <nl> - DEALINGS IN THE SOFTWARE . <nl> diff - - git a / lib / log4j - over - slf4j - 1 . 7 . 25 . jar b / lib / log4j - over - slf4j - 1 . 7 . 25 . jar <nl> new file mode 100644 <nl> index 0000000 . . ba241a4 <nl> Binary files / dev / null and b / lib / log4j - over - slf4j - 1 . 7 . 25 . jar differ <nl> diff - - git a / lib / log4j - over - slf4j - 1 . 7 . 7 . jar b / lib / log4j - over - slf4j - 1 . 7 . 7 . jar <nl> deleted file mode 100644 <nl> index d2a102e . . 0000000 <nl> Binary files a / lib / log4j - over - slf4j - 1 . 7 . 7 . jar and / dev / null differ <nl> diff - - git a / lib / slf4j - api - 1 . 7 . 25 . jar b / lib / slf4j - api - 1 . 7 . 25 . jar <nl> new file mode 100644 <nl> index 0000000 . . 0143c09 <nl> Binary files / dev / null and b / lib / slf4j - api - 1 . 7 . 25 . jar differ <nl> diff - - git a / lib / slf4j - api - 1 . 7 . 7 . jar b / lib / slf4j - api - 1 . 7 . 7 . jar <nl> deleted file mode 100644 <nl> index bebabd9 . . 0000000 <nl> Binary files a / lib / slf4j - api - 1 . 7 . 7 . jar and / dev / null differ <nl> diff - - git a / test / unit / org / apache / cassandra / utils / NoSpamLoggerTest . java b / test / unit / org / apache / cassandra / utils / NoSpamLoggerTest . java <nl> index 702fa98 . . fe5d58e 100644 <nl> - - - a / test / unit / org / apache / cassandra / utils / NoSpamLoggerTest . java <nl> + + + b / test / unit / org / apache / cassandra / utils / NoSpamLoggerTest . java <nl> @ @ - 39 , 7 + 39 , 7 @ @ public class NoSpamLoggerTest <nl> { <nl> Map < Level , Queue < Pair < String , Object [ ] > > > logged = new HashMap < > ( ) ; <nl> <nl> - Logger mock = new SubstituteLogger ( null ) <nl> + Logger mock = new SubstituteLogger ( null , null , true ) <nl> { <nl> <nl> @ Override
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index eec904a . . 982454c 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 59 , 6 + 59 , 8 @ @ <nl> the old ones ( CASSANDRA - 1644 ) <nl> * upgrade to Thrift 0 . 5 ( CASSANDRA - 1367 ) <nl> * renamed CL . DCQUORUM to LOCAL _ QUORUM and DCQUORUMSYNC to EACH _ QUORUM <nl> + * cli truncate support ( CASSANDRA - 1653 ) <nl> + * update GC settings in cassandra . bat ( CASSANDRA - 1636 ) <nl> <nl> <nl> 0 . 7 - beta2 <nl> diff - - git a / src / java / org / apache / cassandra / cli / Cli . g b / src / java / org / apache / cassandra / cli / Cli . g <nl> index e59c608 . . a9229ee 100644 <nl> - - - a / src / java / org / apache / cassandra / cli / Cli . g <nl> + + + b / src / java / org / apache / cassandra / cli / Cli . g <nl> @ @ - 55 , 6 + 55 , 7 @ @ tokens { <nl> NODE _ UPDATE _ KEYSPACE ; <nl> NODE _ UPDATE _ COLUMN _ FAMILY ; <nl> NODE _ LIST ; <nl> + NODE _ TRUNCATE ; <nl> <nl> / / Internal Nodes . <nl> NODE _ COLUMN _ ACCESS ; <nl> @ @ - 123 , 6 + 124 , 7 @ @ statement <nl> | setStatement <nl> | showStatement <nl> | listStatement <nl> + | truncateStatement <nl> | - > ^ ( NODE _ NO _ OP ) <nl> ; <nl> <nl> @ @ - 174 , 6 + 176 , 8 @ @ helpStatement <nl> - > ^ ( NODE _ HELP NODE _ THRIFT _ COUNT ) <nl> | K _ HELP K _ LIST <nl> - > ^ ( NODE _ HELP NODE _ LIST ) <nl> + | K _ HELP K _ TRUNCATE <nl> + - > ^ ( NODE _ HELP NODE _ TRUNCATE ) <nl> | K _ HELP <nl> - > ^ ( NODE _ HELP ) <nl> | ' ? ' <nl> @ @ - 231 , 6 + 235 , 11 @ @ listStatement <nl> - > ^ ( NODE _ LIST columnFamily keyRangeExpr ? ^ ( NODE _ LIMIT $ limit ) ? ) <nl> ; <nl> <nl> + truncateStatement <nl> + : K _ TRUNCATE columnFamily <nl> + - > ^ ( NODE _ TRUNCATE columnFamily ) <nl> + ; <nl> + <nl> showClusterName <nl> : K _ SHOW K _ CLUSTER K _ NAME <nl> - > ^ ( NODE _ SHOW _ CLUSTER _ NAME ) <nl> @ @ - 430 , 6 + 439 , 7 @ @ K _ AND : ' AND ' ; <nl> K _ UPDATE : ' UPDATE ' ; <nl> K _ LIST : ' LIST ' ; <nl> K _ LIMIT : ' LIMIT ' ; <nl> + K _ TRUNCATE : ' TRUNCATE ' ; <nl> <nl> / / private syntactic rules <nl> fragment <nl> diff - - git a / src / java / org / apache / cassandra / cli / CliClient . java b / src / java / org / apache / cassandra / cli / CliClient . java <nl> index b6ace98 . . b63105a 100644 <nl> - - - a / src / java / org / apache / cassandra / cli / CliClient . java <nl> + + + b / src / java / org / apache / cassandra / cli / CliClient . java <nl> @ @ - 171 , 6 + 171 , 9 @ @ public class CliClient extends CliUserHelp <nl> case CliParser . NODE _ LIST : <nl> executeList ( tree ) ; <nl> break ; <nl> + case CliParser . NODE _ TRUNCATE : <nl> + executeTruncate ( tree . getChild ( 0 ) . getText ( ) ) ; <nl> + break ; <nl> case CliParser . NODE _ NO _ OP : <nl> / / comment lines come here ; they are treated as no ops . <nl> break ; <nl> @ @ - 943 , 6 + 946 , 30 @ @ public class CliClient extends CliUserHelp <nl> printSliceList ( columnFamilyDef , keySlices ) ; <nl> } <nl> <nl> + / / TRUNCATE < columnFamily > <nl> + private void executeTruncate ( String columnFamily ) <nl> + { <nl> + if ( ! CliMain . isConnected ( ) | | ! hasKeySpace ( ) ) <nl> + return ; <nl> + <nl> + / / getting CfDef , it will fail if there is no such column family in current keySpace . <nl> + CfDef cfDef = getCfDef ( columnFamily ) ; <nl> + <nl> + try <nl> + { <nl> + thriftClient . truncate ( cfDef . getName ( ) ) ; <nl> + sessionState . out . println ( columnFamily + " truncated . " ) ; <nl> + } <nl> + catch ( InvalidRequestException e ) <nl> + { <nl> + throw new RuntimeException ( e . getWhy ( ) ) ; <nl> + } <nl> + catch ( Exception e ) <nl> + { <nl> + throw new RuntimeException ( e . getMessage ( ) ) ; <nl> + } <nl> + } <nl> + <nl> / / SHOW API VERSION <nl> private void executeShowVersion ( ) throws TException <nl> { <nl> diff - - git a / src / java / org / apache / cassandra / cli / CliCompleter . java b / src / java / org / apache / cassandra / cli / CliCompleter . java <nl> index f541fe5 . . b033d8f 100644 <nl> - - - a / src / java / org / apache / cassandra / cli / CliCompleter . java <nl> + + + b / src / java / org / apache / cassandra / cli / CliCompleter . java <nl> @ @ - 55 , 12 + 55 , 16 @ @ public class CliCompleter extends SimpleCompletor <nl> " help set " , <nl> " help del " , <nl> " help count " , <nl> + " help list " , <nl> + " help truncate " <nl> } ; <nl> private static String [ ] keyspaceCommands = { <nl> " get " , <nl> " set " , <nl> " count " , <nl> - " del " <nl> + " del " , <nl> + " list " , <nl> + " truncate " <nl> } ; <nl> <nl> public CliCompleter ( ) <nl> diff - - git a / src / java / org / apache / cassandra / cli / CliUserHelp . java b / src / java / org / apache / cassandra / cli / CliUserHelp . java <nl> index 7c512e2 . . db6a779 100644 <nl> - - - a / src / java / org / apache / cassandra / cli / CliUserHelp . java <nl> + + + b / src / java / org / apache / cassandra / cli / CliUserHelp . java <nl> @ @ - 281 , 6 + 281 , 13 @ @ public class CliUserHelp { <nl> state . out . println ( " list Users [ j : ] limit 40 " ) ; <nl> break ; <nl> <nl> + case CliParser . NODE _ TRUNCATE : <nl> + state . out . println ( " truncate < column _ family > " ) ; <nl> + state . out . println ( " Truncate specified column family . \ n " ) ; <nl> + state . out . println ( " example : " ) ; <nl> + state . out . println ( " truncate Category " ) ; <nl> + break ; <nl> + <nl> default : <nl> state . out . println ( " ? " ) ; <nl> break ; <nl> @ @ - 324 , 7 + 331 , 8 @ @ public class CliUserHelp { <nl> state . out . println ( " del < cf > [ ' < key > ' ] [ ' < super > ' ] [ ' < col > ' ] Delete sub column . " ) ; <nl> state . out . println ( " count < cf > [ ' < key > ' ] Count columns in record . " ) ; <nl> state . out . println ( " count < cf > [ ' < key > ' ] [ ' < super > ' ] Count columns in a super column . " ) ; <nl> - state . out . println ( " list < cf > List all rows in the column family . " ) ; <nl> + state . out . println ( " truncate < column _ family > Truncate specified column family . " ) ; <nl> + state . out . println ( " list < cf > List all rows in the column family . " ) ; <nl> state . out . println ( " list < cf > [ < startKey > : ] " ) ; <nl> state . out . println ( " List rows in the column family beginning with < startKey > . " ) ; <nl> state . out . println ( " list < cf > [ < startKey > : < endKey > ] " ) ; <nl> diff - - git a / test / unit / org / apache / cassandra / cli / CliTest . java b / test / unit / org / apache / cassandra / cli / CliTest . java <nl> index 24a3de0 . . eddcafd 100644 <nl> - - - a / test / unit / org / apache / cassandra / cli / CliTest . java <nl> + + + b / test / unit / org / apache / cassandra / cli / CliTest . java <nl> @ @ - 52 , 6 + 52 , 7 @ @ public class CliTest extends TestCase <nl> " list CF3 [ h : ] " , <nl> " list CF3 limit 10 " , <nl> " list CF3 [ h : g ] limit 10 " , <nl> + " truncate CF1 " , <nl> " update keyspace TestKeySpace with placement _ strategy = ' org . apache . cassandra . locator . LocalStrategy ' " , <nl> " update keyspace TestKeySpace with replication _ factor = 1 and strategy _ options = [ { DC1 : 3 , DC2 : 4 , DC5 : 1 } ] " <nl> } ; <nl> @ @ - 101 , 6 + 102 , 10 @ @ public class CliTest extends TestCase <nl> assertTrue ( result . startsWith ( " = > ( column = " ) ) ; <nl> } <nl> } <nl> + else if ( statement . startsWith ( " truncate " ) ) <nl> + { <nl> + assertTrue ( result . contains ( " truncated . " ) ) ; <nl> + } <nl> <nl> outStream . reset ( ) ; / / reset stream so we have only output from next statement all the time <nl> errStream . reset ( ) ; / / no errors to the end user .

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 80d82dd . . 7632337 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 4 . 0 
 + * Upgrade SLF4J from 1 . 7 . 7 to 1 . 7 . 25 
 * Default for start _ native _ transport now true if not set in config ( CASSANDRA - 13656 ) 
 * Don ' t add localhost to the graph when calculating where to stream from ( CASSANDRA - 13583 ) 
 * Allow skipping equality - restricted clustering columns in ORDER BY clause ( CASSANDRA - 10271 ) 
 diff - - git a / build . xml b / build . xml 
 index ec2466d . . 7421329 100644 
 - - - a / build . xml 
 + + + b / build . xml 
 @ @ - 372 , 9 + 372 , 9 @ @ 
 < dependency groupId = " org . antlr " artifactId = " antlr - runtime " version = " 3 . 5 . 2 " > 
 < exclusion groupId = " org . antlr " artifactId = " stringtemplate " / > 
 < / dependency > 
 - < dependency groupId = " org . slf4j " artifactId = " slf4j - api " version = " 1 . 7 . 7 " / > 
 - < dependency groupId = " org . slf4j " artifactId = " log4j - over - slf4j " version = " 1 . 7 . 7 " / > 
 - < dependency groupId = " org . slf4j " artifactId = " jcl - over - slf4j " version = " 1 . 7 . 7 " / > 
 + < dependency groupId = " org . slf4j " artifactId = " slf4j - api " version = " 1 . 7 . 25 " / > 
 + < dependency groupId = " org . slf4j " artifactId = " log4j - over - slf4j " version = " 1 . 7 . 25 " / > 
 + < dependency groupId = " org . slf4j " artifactId = " jcl - over - slf4j " version = " 1 . 7 . 25 " / > 
 < dependency groupId = " ch . qos . logback " artifactId = " logback - core " version = " 1 . 1 . 3 " / > 
 < dependency groupId = " ch . qos . logback " artifactId = " logback - classic " version = " 1 . 1 . 3 " / > 
 < dependency groupId = " org . codehaus . jackson " artifactId = " jackson - core - asl " version = " 1 . 9 . 2 " / > 
 diff - - git a / lib / jcl - over - slf4j - 1 . 7 . 25 . jar b / lib / jcl - over - slf4j - 1 . 7 . 25 . jar 
 new file mode 100644 
 index 0000000 . . 8e7fec8 
 Binary files / dev / null and b / lib / jcl - over - slf4j - 1 . 7 . 25 . jar differ 
 diff - - git a / lib / jcl - over - slf4j - 1 . 7 . 7 . jar b / lib / jcl - over - slf4j - 1 . 7 . 7 . jar 
 deleted file mode 100644 
 index ed8d4dd . . 0000000 
 Binary files a / lib / jcl - over - slf4j - 1 . 7 . 7 . jar and / dev / null differ 
 diff - - git a / lib / licenses / jcl - over - slf4j - 1 . 7 . 25 . txt b / lib / licenses / jcl - over - slf4j - 1 . 7 . 25 . txt 
 new file mode 100644 
 index 0000000 . . 315bd49 
 - - - / dev / null 
 + + + b / lib / licenses / jcl - over - slf4j - 1 . 7 . 25 . txt 
 @ @ - 0 , 0 + 1 , 24 @ @ 
 + Copyright ( c ) 2004 - 2017 QOS . ch 
 + All rights reserved . 
 + 
 + Permission is hereby granted , free of charge , to any person obtaining 
 + a copy of this software and associated documentation files ( the 
 + " Software " ) , to deal in the Software without restriction , including 
 + without limitation the rights to use , copy , modify , merge , publish , 
 + distribute , sublicense , and / or sell copies of the Software , and to 
 + permit persons to whom the Software is furnished to do so , subject to 
 + the following conditions : 
 + 
 + The above copyright notice and this permission notice shall be 
 + included in all copies or substantial portions of the Software . 
 + 
 + THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , 
 + EXPRESS OR IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 + MERCHANTABILITY , FITNESS FOR A PARTICULAR PURPOSE AND 
 + NONINFRINGEMENT . IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE 
 + LIABLE FOR ANY CLAIM , DAMAGES OR OTHER LIABILITY , WHETHER IN AN ACTION 
 + OF CONTRACT , TORT OR OTHERWISE , ARISING FROM , OUT OF OR IN CONNECTION 
 + WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE . 
 + 
 + 
 + 
 diff - - git a / lib / licenses / jcl - over - slf4j - 1 . 7 . 7 . txt b / lib / licenses / jcl - over - slf4j - 1 . 7 . 7 . txt 
 deleted file mode 100644 
 index dbfc769 . . 0000000 
 - - - a / lib / licenses / jcl - over - slf4j - 1 . 7 . 7 . txt 
 + + + / dev / null 
 @ @ - 1 , 20 + 0 , 0 @ @ 
 - Copyright ( c ) 2004 - 2008 QOS . ch 
 - All rights reserved . 
 - 
 - Permission is hereby granted , free of charge , to any person obtaining a 
 - copy of this software and associated documentation files ( the " Software " ) , 
 - to deal in the Software without restriction , including without limitation 
 - the rights to use , copy , modify , merge , publish , distribute , sublicense , 
 - and / or sell copies of the Software , and to permit persons to whom the 
 - Software is furnished to do so , subject to the following conditions : 
 - 
 - The above copyright notice and this permission notice shall be included in 
 - all copies or substantial portions of the Software . 
 - 
 - THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR 
 - IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , 
 - FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL 
 - THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM , DAMAGES OR OTHER 
 - LIABILITY , WHETHER IN AN ACTION OF CONTRACT , TORT OR OTHERWISE , ARISING 
 - FROM , OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 - DEALINGS IN THE SOFTWARE . 
 diff - - git a / lib / licenses / log4j - over - slf4j - 1 . 7 . 25 . txt b / lib / licenses / log4j - over - slf4j - 1 . 7 . 25 . txt 
 new file mode 100644 
 index 0000000 . . 315bd49 
 - - - / dev / null 
 + + + b / lib / licenses / log4j - over - slf4j - 1 . 7 . 25 . txt 
 @ @ - 0 , 0 + 1 , 24 @ @ 
 + Copyright ( c ) 2004 - 2017 QOS . ch 
 + All rights reserved . 
 + 
 + Permission is hereby granted , free of charge , to any person obtaining 
 + a copy of this software and associated documentation files ( the 
 + " Software " ) , to deal in the Software without restriction , including 
 + without limitation the rights to use , copy , modify , merge , publish , 
 + distribute , sublicense , and / or sell copies of the Software , and to 
 + permit persons to whom the Software is furnished to do so , subject to 
 + the following conditions : 
 + 
 + The above copyright notice and this permission notice shall be 
 + included in all copies or substantial portions of the Software . 
 + 
 + THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , 
 + EXPRESS OR IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 + MERCHANTABILITY , FITNESS FOR A PARTICULAR PURPOSE AND 
 + NONINFRINGEMENT . IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE 
 + LIABLE FOR ANY CLAIM , DAMAGES OR OTHER LIABILITY , WHETHER IN AN ACTION 
 + OF CONTRACT , TORT OR OTHERWISE , ARISING FROM , OUT OF OR IN CONNECTION 
 + WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE . 
 + 
 + 
 + 
 diff - - git a / lib / licenses / log4j - over - slf4j - 1 . 7 . 7 . txt b / lib / licenses / log4j - over - slf4j - 1 . 7 . 7 . txt 
 deleted file mode 100644 
 index dbfc769 . . 0000000 
 - - - a / lib / licenses / log4j - over - slf4j - 1 . 7 . 7 . txt 
 + + + / dev / null 
 @ @ - 1 , 20 + 0 , 0 @ @ 
 - Copyright ( c ) 2004 - 2008 QOS . ch 
 - All rights reserved . 
 - 
 - Permission is hereby granted , free of charge , to any person obtaining a 
 - copy of this software and associated documentation files ( the " Software " ) , 
 - to deal in the Software without restriction , including without limitation 
 - the rights to use , copy , modify , merge , publish , distribute , sublicense , 
 - and / or sell copies of the Software , and to permit persons to whom the 
 - Software is furnished to do so , subject to the following conditions : 
 - 
 - The above copyright notice and this permission notice shall be included in 
 - all copies or substantial portions of the Software . 
 - 
 - THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR 
 - IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , 
 - FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL 
 - THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM , DAMAGES OR OTHER 
 - LIABILITY , WHETHER IN AN ACTION OF CONTRACT , TORT OR OTHERWISE , ARISING 
 - FROM , OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 - DEALINGS IN THE SOFTWARE . 
 diff - - git a / lib / licenses / slf4j - api - 1 . 7 . 25 . txt b / lib / licenses / slf4j - api - 1 . 7 . 25 . txt 
 new file mode 100644 
 index 0000000 . . 315bd49 
 - - - / dev / null 
 + + + b / lib / licenses / slf4j - api - 1 . 7 . 25 . txt 
 @ @ - 0 , 0 + 1 , 24 @ @ 
 + Copyright ( c ) 2004 - 2017 QOS . ch 
 + All rights reserved . 
 + 
 + Permission is hereby granted , free of charge , to any person obtaining 
 + a copy of this software and associated documentation files ( the 
 + " Software " ) , to deal in the Software without restriction , including 
 + without limitation the rights to use , copy , modify , merge , publish , 
 + distribute , sublicense , and / or sell copies of the Software , and to 
 + permit persons to whom the Software is furnished to do so , subject to 
 + the following conditions : 
 + 
 + The above copyright notice and this permission notice shall be 
 + included in all copies or substantial portions of the Software . 
 + 
 + THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , 
 + EXPRESS OR IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 + MERCHANTABILITY , FITNESS FOR A PARTICULAR PURPOSE AND 
 + NONINFRINGEMENT . IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE 
 + LIABLE FOR ANY CLAIM , DAMAGES OR OTHER LIABILITY , WHETHER IN AN ACTION 
 + OF CONTRACT , TORT OR OTHERWISE , ARISING FROM , OUT OF OR IN CONNECTION 
 + WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE . 
 + 
 + 
 + 
 diff - - git a / lib / licenses / slf4j - api - 1 . 7 . 7 . txt b / lib / licenses / slf4j - api - 1 . 7 . 7 . txt 
 deleted file mode 100644 
 index dbfc769 . . 0000000 
 - - - a / lib / licenses / slf4j - api - 1 . 7 . 7 . txt 
 + + + / dev / null 
 @ @ - 1 , 20 + 0 , 0 @ @ 
 - Copyright ( c ) 2004 - 2008 QOS . ch 
 - All rights reserved . 
 - 
 - Permission is hereby granted , free of charge , to any person obtaining a 
 - copy of this software and associated documentation files ( the " Software " ) , 
 - to deal in the Software without restriction , including without limitation 
 - the rights to use , copy , modify , merge , publish , distribute , sublicense , 
 - and / or sell copies of the Software , and to permit persons to whom the 
 - Software is furnished to do so , subject to the following conditions : 
 - 
 - The above copyright notice and this permission notice shall be included in 
 - all copies or substantial portions of the Software . 
 - 
 - THE SOFTWARE IS PROVIDED " AS IS " , WITHOUT WARRANTY OF ANY KIND , EXPRESS OR 
 - IMPLIED , INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY , 
 - FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT . IN NO EVENT SHALL 
 - THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM , DAMAGES OR OTHER 
 - LIABILITY , WHETHER IN AN ACTION OF CONTRACT , TORT OR OTHERWISE , ARISING 
 - FROM , OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 - DEALINGS IN THE SOFTWARE . 
 diff - - git a / lib / log4j - over - slf4j - 1 . 7 . 25 . jar b / lib / log4j - over - slf4j - 1 . 7 . 25 . jar 
 new file mode 100644 
 index 0000000 . . ba241a4 
 Binary files / dev / null and b / lib / log4j - over - slf4j - 1 . 7 . 25 . jar differ 
 diff - - git a / lib / log4j - over - slf4j - 1 . 7 . 7 . jar b / lib / log4j - over - slf4j - 1 . 7 . 7 . jar 
 deleted file mode 100644 
 index d2a102e . . 0000000 
 Binary files a / lib / log4j - over - slf4j - 1 . 7 . 7 . jar and / dev / null differ 
 diff - - git a / lib / slf4j - api - 1 . 7 . 25 . jar b / lib / slf4j - api - 1 . 7 . 25 . jar 
 new file mode 100644 
 index 0000000 . . 0143c09 
 Binary files / dev / null and b / lib / slf4j - api - 1 . 7 . 25 . jar differ 
 diff - - git a / lib / slf4j - api - 1 . 7 . 7 . jar b / lib / slf4j - api - 1 . 7 . 7 . jar 
 deleted file mode 100644 
 index bebabd9 . . 0000000 
 Binary files a / lib / slf4j - api - 1 . 7 . 7 . jar and / dev / null differ 
 diff - - git a / test / unit / org / apache / cassandra / utils / NoSpamLoggerTest . java b / test / unit / org / apache / cassandra / utils / NoSpamLoggerTest . java 
 index 702fa98 . . fe5d58e 100644 
 - - - a / test / unit / org / apache / cassandra / utils / NoSpamLoggerTest . java 
 + + + b / test / unit / org / apache / cassandra / utils / NoSpamLoggerTest . java 
 @ @ - 39 , 7 + 39 , 7 @ @ public class NoSpamLoggerTest 
 { 
 Map < Level , Queue < Pair < String , Object [ ] > > > logged = new HashMap < > ( ) ; 
 
 - Logger mock = new SubstituteLogger ( null ) 
 + Logger mock = new SubstituteLogger ( null , null , true ) 
 { 
 
 @ Override

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index eec904a . . 982454c 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 59 , 6 + 59 , 8 @ @ 
 the old ones ( CASSANDRA - 1644 ) 
 * upgrade to Thrift 0 . 5 ( CASSANDRA - 1367 ) 
 * renamed CL . DCQUORUM to LOCAL _ QUORUM and DCQUORUMSYNC to EACH _ QUORUM 
 + * cli truncate support ( CASSANDRA - 1653 ) 
 + * update GC settings in cassandra . bat ( CASSANDRA - 1636 ) 
 
 
 0 . 7 - beta2 
 diff - - git a / src / java / org / apache / cassandra / cli / Cli . g b / src / java / org / apache / cassandra / cli / Cli . g 
 index e59c608 . . a9229ee 100644 
 - - - a / src / java / org / apache / cassandra / cli / Cli . g 
 + + + b / src / java / org / apache / cassandra / cli / Cli . g 
 @ @ - 55 , 6 + 55 , 7 @ @ tokens { 
 NODE _ UPDATE _ KEYSPACE ; 
 NODE _ UPDATE _ COLUMN _ FAMILY ; 
 NODE _ LIST ; 
 + NODE _ TRUNCATE ; 
 
 / / Internal Nodes . 
 NODE _ COLUMN _ ACCESS ; 
 @ @ - 123 , 6 + 124 , 7 @ @ statement 
 | setStatement 
 | showStatement 
 | listStatement 
 + | truncateStatement 
 | - > ^ ( NODE _ NO _ OP ) 
 ; 
 
 @ @ - 174 , 6 + 176 , 8 @ @ helpStatement 
 - > ^ ( NODE _ HELP NODE _ THRIFT _ COUNT ) 
 | K _ HELP K _ LIST 
 - > ^ ( NODE _ HELP NODE _ LIST ) 
 + | K _ HELP K _ TRUNCATE 
 + - > ^ ( NODE _ HELP NODE _ TRUNCATE ) 
 | K _ HELP 
 - > ^ ( NODE _ HELP ) 
 | ' ? ' 
 @ @ - 231 , 6 + 235 , 11 @ @ listStatement 
 - > ^ ( NODE _ LIST columnFamily keyRangeExpr ? ^ ( NODE _ LIMIT $ limit ) ? ) 
 ; 
 
 + truncateStatement 
 + : K _ TRUNCATE columnFamily 
 + - > ^ ( NODE _ TRUNCATE columnFamily ) 
 + ; 
 + 
 showClusterName 
 : K _ SHOW K _ CLUSTER K _ NAME 
 - > ^ ( NODE _ SHOW _ CLUSTER _ NAME ) 
 @ @ - 430 , 6 + 439 , 7 @ @ K _ AND : ' AND ' ; 
 K _ UPDATE : ' UPDATE ' ; 
 K _ LIST : ' LIST ' ; 
 K _ LIMIT : ' LIMIT ' ; 
 + K _ TRUNCATE : ' TRUNCATE ' ; 
 
 / / private syntactic rules 
 fragment 
 diff - - git a / src / java / org / apache / cassandra / cli / CliClient . java b / src / java / org / apache / cassandra / cli / CliClient . java 
 index b6ace98 . . b63105a 100644 
 - - - a / src / java / org / apache / cassandra / cli / CliClient . java 
 + + + b / src / java / org / apache / cassandra / cli / CliClient . java 
 @ @ - 171 , 6 + 171 , 9 @ @ public class CliClient extends CliUserHelp 
 case CliParser . NODE _ LIST : 
 executeList ( tree ) ; 
 break ; 
 + case CliParser . NODE _ TRUNCATE : 
 + executeTruncate ( tree . getChild ( 0 ) . getText ( ) ) ; 
 + break ; 
 case CliParser . NODE _ NO _ OP : 
 / / comment lines come here ; they are treated as no ops . 
 break ; 
 @ @ - 943 , 6 + 946 , 30 @ @ public class CliClient extends CliUserHelp 
 printSliceList ( columnFamilyDef , keySlices ) ; 
 } 
 
 + / / TRUNCATE < columnFamily > 
 + private void executeTruncate ( String columnFamily ) 
 + { 
 + if ( ! CliMain . isConnected ( ) | | ! hasKeySpace ( ) ) 
 + return ; 
 + 
 + / / getting CfDef , it will fail if there is no such column family in current keySpace . 
 + CfDef cfDef = getCfDef ( columnFamily ) ; 
 + 
 + try 
 + { 
 + thriftClient . truncate ( cfDef . getName ( ) ) ; 
 + sessionState . out . println ( columnFamily + " truncated . " ) ; 
 + } 
 + catch ( InvalidRequestException e ) 
 + { 
 + throw new RuntimeException ( e . getWhy ( ) ) ; 
 + } 
 + catch ( Exception e ) 
 + { 
 + throw new RuntimeException ( e . getMessage ( ) ) ; 
 + } 
 + } 
 + 
 / / SHOW API VERSION 
 private void executeShowVersion ( ) throws TException 
 { 
 diff - - git a / src / java / org / apache / cassandra / cli / CliCompleter . java b / src / java / org / apache / cassandra / cli / CliCompleter . java 
 index f541fe5 . . b033d8f 100644 
 - - - a / src / java / org / apache / cassandra / cli / CliCompleter . java 
 + + + b / src / java / org / apache / cassandra / cli / CliCompleter . java 
 @ @ - 55 , 12 + 55 , 16 @ @ public class CliCompleter extends SimpleCompletor 
 " help set " , 
 " help del " , 
 " help count " , 
 + " help list " , 
 + " help truncate " 
 } ; 
 private static String [ ] keyspaceCommands = { 
 " get " , 
 " set " , 
 " count " , 
 - " del " 
 + " del " , 
 + " list " , 
 + " truncate " 
 } ; 
 
 public CliCompleter ( ) 
 diff - - git a / src / java / org / apache / cassandra / cli / CliUserHelp . java b / src / java / org / apache / cassandra / cli / CliUserHelp . java 
 index 7c512e2 . . db6a779 100644 
 - - - a / src / java / org / apache / cassandra / cli / CliUserHelp . java 
 + + + b / src / java / org / apache / cassandra / cli / CliUserHelp . java 
 @ @ - 281 , 6 + 281 , 13 @ @ public class CliUserHelp { 
 state . out . println ( " list Users [ j : ] limit 40 " ) ; 
 break ; 
 
 + case CliParser . NODE _ TRUNCATE : 
 + state . out . println ( " truncate < column _ family > " ) ; 
 + state . out . println ( " Truncate specified column family . \ n " ) ; 
 + state . out . println ( " example : " ) ; 
 + state . out . println ( " truncate Category " ) ; 
 + break ; 
 + 
 default : 
 state . out . println ( " ? " ) ; 
 break ; 
 @ @ - 324 , 7 + 331 , 8 @ @ public class CliUserHelp { 
 state . out . println ( " del < cf > [ ' < key > ' ] [ ' < super > ' ] [ ' < col > ' ] Delete sub column . " ) ; 
 state . out . println ( " count < cf > [ ' < key > ' ] Count columns in record . " ) ; 
 state . out . println ( " count < cf > [ ' < key > ' ] [ ' < super > ' ] Count columns in a super column . " ) ; 
 - state . out . println ( " list < cf > List all rows in the column family . " ) ; 
 + state . out . println ( " truncate < column _ family > Truncate specified column family . " ) ; 
 + state . out . println ( " list < cf > List all rows in the column family . " ) ; 
 state . out . println ( " list < cf > [ < startKey > : ] " ) ; 
 state . out . println ( " List rows in the column family beginning with < startKey > . " ) ; 
 state . out . println ( " list < cf > [ < startKey > : < endKey > ] " ) ; 
 diff - - git a / test / unit / org / apache / cassandra / cli / CliTest . java b / test / unit / org / apache / cassandra / cli / CliTest . java 
 index 24a3de0 . . eddcafd 100644 
 - - - a / test / unit / org / apache / cassandra / cli / CliTest . java 
 + + + b / test / unit / org / apache / cassandra / cli / CliTest . java 
 @ @ - 52 , 6 + 52 , 7 @ @ public class CliTest extends TestCase 
 " list CF3 [ h : ] " , 
 " list CF3 limit 10 " , 
 " list CF3 [ h : g ] limit 10 " , 
 + " truncate CF1 " , 
 " update keyspace TestKeySpace with placement _ strategy = ' org . apache . cassandra . locator . LocalStrategy ' " , 
 " update keyspace TestKeySpace with replication _ factor = 1 and strategy _ options = [ { DC1 : 3 , DC2 : 4 , DC5 : 1 } ] " 
 } ; 
 @ @ - 101 , 6 + 102 , 10 @ @ public class CliTest extends TestCase 
 assertTrue ( result . startsWith ( " = > ( column = " ) ) ; 
 } 
 } 
 + else if ( statement . startsWith ( " truncate " ) ) 
 + { 
 + assertTrue ( result . contains ( " truncated . " ) ) ; 
 + } 
 
 outStream . reset ( ) ; / / reset stream so we have only output from next statement all the time 
 errStream . reset ( ) ; / / no errors to the end user .
