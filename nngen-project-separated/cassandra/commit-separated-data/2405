BLEU SCORE: 0.033864985683445356

TEST MSG: Use $ CASSANDRA _ HOME for default paths instead of / var
GENERATED MSG: merging w / 0 . 5 branch

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 3cea1e7 . . fd593e7 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 6 , 6 + 6 , 7 @ @ <nl> * Reduce run time for CQL tests ( CASSANDRA - 7327 ) <nl> * Fix heap size calculation on Windows ( CASSANDRA - 7352 ) <nl> * RefCount native frames from netty ( CASSANDRA - 7245 ) <nl> + * Use tarball dir instead of / var for default paths ( CASSANDRA - 7136 ) <nl> Merged from 2 . 0 : <nl> * Add per - CF range read request latency metrics ( CASSANDRA - 7338 ) <nl> * Fix NPE in StreamTransferTask . createMessageForRetry ( ) ( CASSANDRA - 7323 ) <nl> diff - - git a / NEWS . txt b / NEWS . txt <nl> index c1b2b44 . . 4eed9de 100644 <nl> - - - a / NEWS . txt <nl> + + + b / NEWS . txt <nl> @ @ - 18 , 6 + 18 , 16 @ @ using the provided ' sstableupgrade ' tool . <nl> <nl> New features <nl> - - - - - - - - - - - - <nl> + - Default data and log locations have changed . If not set in <nl> + cassandra . yaml , the data file directory , commitlog directory , <nl> + and saved caches directory will default to $ CASSANDRA _ HOME / data / data , <nl> + $ CASSANDRA _ HOME / data / commitlog , and $ CASSANDRA _ HOME / data / saved _ caches , <nl> + respectively . The log directory now defaults to $ CASSANDRA _ HOME / logs . <nl> + If not set , $ CASSANDRA _ HOME , defaults to the top - level directory of <nl> + the installation . <nl> + Note that this should only affect source checkouts and tarballs . <nl> + Deb and RPM packages will continue to use / var / lib / cassandra and <nl> + / var / log / cassandra in cassandra . yaml . <nl> - SSTable data directory name is slightly changed . Each directory will <nl> have hex string appended after CF name , e . g . <nl> ks / cf - 5be396077b811e3a3ab9dc4b9ac088d / <nl> diff - - git a / bin / cassandra b / bin / cassandra <nl> index f34ca8c . . 797d36b 100755 <nl> - - - a / bin / cassandra <nl> + + + b / bin / cassandra <nl> @ @ - 134 , 6 + 134 , 7 @ @ launch _ service ( ) <nl> props = " $ 3 " <nl> class = " $ 4 " <nl> cassandra _ parms = " - Dlogback . configurationFile = logback . xml " <nl> + cassandra _ parms = " $ cassandra _ parms - Dcassandra . logdir = $ CASSANDRA _ HOME / logs - Dcassandra . storagedir = $ CASSANDRA _ HOME / data " <nl> <nl> if [ " x $ pidpath " ! = " x " ] ; then <nl> cassandra _ parms = " $ cassandra _ parms - Dcassandra - pidfile = $ pidpath " <nl> diff - - git a / bin / cassandra . bat b / bin / cassandra . bat <nl> index 172ca8e . . 629e58b 100644 <nl> - - - a / bin / cassandra . bat <nl> + + + b / bin / cassandra . bat <nl> @ @ - 86 , 6 + 86 , 7 @ @ goto : eof <nl> REM Include the build \ classes \ main directory so it works in development <nl> set CASSANDRA _ CLASSPATH = % CLASSPATH % ; " % CASSANDRA _ HOME % \ build \ classes \ main " ; " % CASSANDRA _ HOME % \ build \ classes \ thrift " <nl> set CASSANDRA _ PARAMS = - Dcassandra - Dcassandra - foreground = yes <nl> + set CASSANDRA _ PARAMS = % CASSANDRA _ PARAMS % " - Dcassandra . logdir = % CASSANDRA _ HOME % \ logs " " - Dcassandra . storagedir = % CASSANDRA _ HOME % \ data " <nl> if / i " % ARG % " = = " INSTALL " goto doInstallOperation <nl> if / i " % ARG % " = = " UNINSTALL " goto doInstallOperation <nl> goto runDaemon <nl> diff - - git a / bin / cassandra . ps1 b / bin / cassandra . ps1 <nl> index 19d831a . . ac8d89c 100644 <nl> - - - a / bin / cassandra . ps1 <nl> + + + b / bin / cassandra . ps1 <nl> @ @ - 77 , 6 + 77 , 10 @ @ Function Main <nl> SetCassandraEnvironment <nl> $ pidfile = " $ env : CASSANDRA _ HOME / $ pidfile " <nl> <nl> + $ logdir = " $ env : CASSANDRA _ HOME / logs " <nl> + $ storagedir = " $ env : CASSANDRA _ HOME / data " <nl> + $ env : CASSANDRA _ PARAMS = $ env : CASSANDRA _ PARAMS + " - Dcassandra . logdir = $ logdir - Dcassandra . storagedir = $ storagedir " <nl> + <nl> # Other command line params <nl> if ( $ H ) <nl> { <nl> diff - - git a / conf / cassandra . yaml b / conf / cassandra . yaml <nl> index 561c7ff . . e6c34e0 100644 <nl> - - - a / conf / cassandra . yaml <nl> + + + b / conf / cassandra . yaml <nl> @ @ - 93 , 12 + 93 , 14 @ @ partitioner : org . apache . cassandra . dht . Murmur3Partitioner <nl> # Directories where Cassandra should store data on disk . Cassandra <nl> # will spread data evenly across them , subject to the granularity of <nl> # the configured compaction strategy . <nl> - data _ file _ directories : <nl> - - / var / lib / cassandra / data <nl> + # If not set , the default directory is $ CASSANDRA _ HOME / data / data . <nl> + # data _ file _ directories : <nl> + # - / var / lib / cassandra / data <nl> <nl> # commit log . when running on magnetic HDD , this should be a <nl> # separate spindle than the data directories . <nl> - commitlog _ directory : / var / lib / cassandra / commitlog <nl> + # If not set , the default directory is $ CASSANDRA _ HOME / data / commitlog . <nl> + # commitlog _ directory : / var / lib / cassandra / commitlog <nl> <nl> # policy for data disk failures : <nl> # stop _ paranoid : shut down gossip and Thrift even for single - sstable errors . <nl> @ @ - 200 , 7 + 202 , 8 @ @ counter _ cache _ save _ period : 7200 <nl> # memory _ allocator : NativeAllocator <nl> <nl> # saved caches <nl> - saved _ caches _ directory : / var / lib / cassandra / saved _ caches <nl> + # If not set , the default directory is $ CASSANDRA _ HOME / data / saved _ caches . <nl> + # saved _ caches _ directory : / var / lib / cassandra / saved _ caches <nl> <nl> # commitlog _ sync may be either " periodic " or " batch . " <nl> # When in batch mode , Cassandra won ' t ack writes until the commit log <nl> diff - - git a / conf / logback . xml b / conf / logback . xml <nl> index 61e5a13 . . e170d41 100644 <nl> - - - a / conf / logback . xml <nl> + + + b / conf / logback . xml <nl> @ @ - 20 , 9 + 20 , 9 @ @ <nl> < configuration scan = " true " > <nl> < jmxConfigurator / > <nl> < appender name = " FILE " class = " ch . qos . logback . core . rolling . RollingFileAppender " > <nl> - < file > / var / log / cassandra / system . log < / file > <nl> + < file > $ { cassandra . logdir } / system . log < / file > <nl> < rollingPolicy class = " ch . qos . logback . core . rolling . FixedWindowRollingPolicy " > <nl> - < fileNamePattern > / var / log / cassandra / system . log . % i . zip < / fileNamePattern > <nl> + < fileNamePattern > $ { cassandra . logdir } / system . log . % i . zip < / fileNamePattern > <nl> < minIndex > 1 < / minIndex > <nl> < maxIndex > 20 < / maxIndex > <nl> < / rollingPolicy > <nl> diff - - git a / debian / control b / debian / control <nl> index cc0c49b . . f1167c3 100644 <nl> - - - a / debian / control <nl> + + + b / debian / control <nl> @ @ - 3 , 7 + 3 , 7 @ @ Section : misc <nl> Priority : extra <nl> Maintainer : Eric Evans < eevans @ apache . org > <nl> Uploaders : Sylvain Lebresne < slebresne @ apache . org > <nl> - Build - Depends : debhelper ( > = 5 ) , openjdk - 7 - jdk | java7 - jdk , ant ( > = 1 . 7 ) , ant - optional ( > = 1 . 7 ) , python - support <nl> + Build - Depends : debhelper ( > = 5 ) , openjdk - 7 - jdk | java7 - jdk , ant ( > = 1 . 7 ) , ant - optional ( > = 1 . 7 ) , python - support , dpatch <nl> Homepage : http : / / cassandra . apache . org <nl> Vcs - Git : http : / / git - wip - us . apache . org / repos / asf / cassandra . git <nl> Vcs - Browser : https : / / git - wip - us . apache . org / repos / asf ? p = cassandra . git <nl> diff - - git a / debian / patches / 001cassandra _ yaml _ dirs . dpatch b / debian / patches / 001cassandra _ yaml _ dirs . dpatch <nl> new file mode 100644 <nl> index 0000000 . . 3d545e5 <nl> - - - / dev / null <nl> + + + b / debian / patches / 001cassandra _ yaml _ dirs . dpatch <nl> @ @ - 0 , 0 + 1 , 36 @ @ <nl> + # ! / bin / sh / usr / share / dpatch / dpatch - run <nl> + # # 001cassandra _ yaml _ dirs . dpatch by Tyler Hobbs < tyler @ datastax . com > <nl> + # # <nl> + # # All lines beginning with ` # # DP : ' are a description of the patch . <nl> + # # DP : No description . <nl> + <nl> + @ DPATCH @ <nl> + diff - urNad ' - - exclude = CVS ' ' - - exclude = . svn ' ' - - exclude = . git ' ' - - exclude = . arch ' ' - - exclude = . hg ' ' - - exclude = _ darcs ' ' - - exclude = . bzr ' cassandra ~ / conf / cassandra . yaml cassandra / conf / cassandra . yaml <nl> + - - - cassandra ~ / conf / cassandra . yaml 	 2014 - 06 - 05 13 : 36 : 22 . 000000000 - 0500 <nl> + + + + cassandra / conf / cassandra . yaml 	 2014 - 06 - 05 13 : 39 : 20 . 569034040 - 0500 <nl> + @ @ - 94 , 13 + 94 , 13 @ @ <nl> + # will spread data evenly across them , subject to the granularity of <nl> + # the configured compaction strategy . <nl> + # If not set , the default directory is $ CASSANDRA _ HOME / data / data . <nl> + - # data _ file _ directories : <nl> + - # - / var / lib / cassandra / data <nl> + + data _ file _ directories : <nl> + + - / var / lib / cassandra / data <nl> + <nl> + # commit log . when running on magnetic HDD , this should be a <nl> + # separate spindle than the data directories . <nl> + # If not set , the default directory is $ CASSANDRA _ HOME / data / commitlog . <nl> + - # commitlog _ directory : / var / lib / cassandra / commitlog <nl> + + commitlog _ directory : / var / lib / cassandra / commitlog <nl> + <nl> + # policy for data disk failures : <nl> + # stop _ paranoid : shut down gossip and Thrift even for single - sstable errors . <nl> + @ @ - 203 , 7 + 203 , 7 @ @ <nl> + <nl> + # saved caches <nl> + # If not set , the default directory is $ CASSANDRA _ HOME / data / saved _ caches . <nl> + - # saved _ caches _ directory : / var / lib / cassandra / saved _ caches <nl> + + saved _ caches _ directory : / var / lib / cassandra / saved _ caches <nl> + <nl> + # commitlog _ sync may be either " periodic " or " batch . " <nl> + # When in batch mode , Cassandra won ' t ack writes until the commit log <nl> diff - - git a / debian / patches / 00list b / debian / patches / 00list <nl> new file mode 100644 <nl> index 0000000 . . 508c180 <nl> - - - / dev / null <nl> + + + b / debian / patches / 00list <nl> @ @ - 0 , 0 + 1 @ @ <nl> + 001cassandra _ yaml _ dirs . dpatch <nl> diff - - git a / debian / rules b / debian / rules <nl> index 717bbf2 . . 602cfde 100755 <nl> - - - a / debian / rules <nl> + + + b / debian / rules <nl> @ @ - 3 , 6 + 3 , 8 @ @ <nl> # Uncomment to enable verbose mode . <nl> # export DH _ VERBOSE = 1 <nl> <nl> + include / usr / share / dpatch / dpatch . make <nl> + <nl> ANT = / usr / bin / ant <nl> VERSION = $ ( shell dpkg - parsechangelog | sed - ne ' s / ^ Version : \ ( . * \ ) / \ 1 / p ' ) <nl> <nl> @ @ - 10 , 7 + 12 , 7 @ @ test : <nl> 	 dh _ testdir <nl> 	 $ ( ANT ) test <nl> <nl> - clean : <nl> + clean : unpatch <nl> 	 dh _ testdir <nl> 	 dh _ testroot <nl> 	 $ ( ANT ) realclean <nl> @ @ - 22 , 7 + 24 , 7 @ @ clean : <nl> 	 dh _ clean <nl> <nl> build : build - stamp <nl> - build - stamp : <nl> + build - stamp : patch - stamp <nl> 	 dh _ testdir <nl> 	 printf " version = % s " $ ( VERSION ) > build . properties <nl> <nl> diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> index 5b227ae . . 3cc53de 100644 <nl> - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> @ @ - 452 , 35 + 452 , 47 @ @ public class DatabaseDescriptor <nl> throw new ConfigurationException ( " in _ memory _ compaction _ limit _ in _ mb must be a positive integer " ) ; <nl> } <nl> <nl> - if ( conf . concurrent _ compactors = = null ) <nl> - conf . concurrent _ compactors = Math . min ( 8 , Math . max ( 2 , Math . min ( FBUtilities . getAvailableProcessors ( ) , conf . data _ file _ directories . length ) ) ) ; <nl> - <nl> - if ( conf . concurrent _ compactors < = 0 ) <nl> - throw new ConfigurationException ( " concurrent _ compactors should be strictly greater than 0 " ) ; <nl> - <nl> - / * data file and commit log directories . they get created later , when they ' re needed . * / <nl> - if ( conf . commitlog _ directory ! = null & & conf . data _ file _ directories ! = null & & conf . saved _ caches _ directory ! = null ) <nl> + / / if data dirs , commitlog dir , or saved caches dir are set in cassandra . yaml , use that . Otherwise , <nl> + / / use - Dcassandra . storagedir ( set in cassandra - env . sh ) as the parent dir for data / , commitlog / , and saved _ caches / <nl> + if ( conf . commitlog _ directory = = null ) <nl> { <nl> - for ( String datadir : conf . data _ file _ directories ) <nl> - { <nl> - if ( datadir . equals ( conf . commitlog _ directory ) ) <nl> - throw new ConfigurationException ( " commitlog _ directory must not be the same as any data _ file _ directories " ) ; <nl> - if ( datadir . equals ( conf . saved _ caches _ directory ) ) <nl> - throw new ConfigurationException ( " saved _ caches _ directory must not be the same as any data _ file _ directories " ) ; <nl> - } <nl> - <nl> - if ( conf . commitlog _ directory . equals ( conf . saved _ caches _ directory ) ) <nl> - throw new ConfigurationException ( " saved _ caches _ directory must not be the same as the commitlog _ directory " ) ; <nl> + conf . commitlog _ directory = System . getProperty ( " cassandra . storagedir " , null ) ; <nl> + if ( conf . commitlog _ directory = = null ) <nl> + throw new ConfigurationException ( " commitlog _ directory is missing and - Dcassandra . storagedir is not set " ) ; <nl> + conf . commitlog _ directory + = File . separator + " commitlog " ; <nl> } <nl> - else <nl> + if ( conf . saved _ caches _ directory = = null ) <nl> { <nl> - if ( conf . commitlog _ directory = = null ) <nl> - throw new ConfigurationException ( " commitlog _ directory missing " ) ; <nl> - if ( conf . data _ file _ directories = = null ) <nl> - throw new ConfigurationException ( " data _ file _ directories missing ; at least one data directory must be specified " ) ; <nl> + conf . saved _ caches _ directory = System . getProperty ( " cassandra . storagedir " , null ) ; <nl> if ( conf . saved _ caches _ directory = = null ) <nl> - throw new ConfigurationException ( " saved _ caches _ directory missing " ) ; <nl> + throw new ConfigurationException ( " saved _ caches _ directory is missing and - Dcassandra . storagedir is not set " ) ; <nl> + conf . saved _ caches _ directory + = File . separator + " saved _ caches " ; <nl> } <nl> + if ( conf . data _ file _ directories = = null ) <nl> + { <nl> + String defaultDataDir = System . getProperty ( " cassandra . storagedir " , null ) ; <nl> + if ( defaultDataDir = = null ) <nl> + throw new ConfigurationException ( " data _ file _ directories is not missing and - Dcassandra . storagedir is not set " ) ; <nl> + conf . data _ file _ directories = new String [ ] { defaultDataDir + File . separator + " data " } ; <nl> + } <nl> + <nl> + / * data file and commit log directories . they get created later , when they ' re needed . * / <nl> + for ( String datadir : conf . data _ file _ directories ) <nl> + { <nl> + if ( datadir . equals ( conf . commitlog _ directory ) ) <nl> + throw new ConfigurationException ( " commitlog _ directory must not be the same as any data _ file _ directories " ) ; <nl> + if ( datadir . equals ( conf . saved _ caches _ directory ) ) <nl> + throw new ConfigurationException ( " saved _ caches _ directory must not be the same as any data _ file _ directories " ) ; <nl> + } <nl> + <nl> + if ( conf . commitlog _ directory . equals ( conf . saved _ caches _ directory ) ) <nl> + throw new ConfigurationException ( " saved _ caches _ directory must not be the same as the commitlog _ directory " ) ; <nl> + <nl> + if ( conf . concurrent _ compactors = = null ) <nl> + conf . concurrent _ compactors = Math . min ( 8 , Math . max ( 2 , Math . min ( FBUtilities . getAvailableProcessors ( ) , conf . data _ file _ directories . length ) ) ) ; <nl> + <nl> + if ( conf . concurrent _ compactors < = 0 ) <nl> + throw new ConfigurationException ( " concurrent _ compactors should be strictly greater than 0 " ) ; <nl> <nl> if ( conf . initial _ token ! = null ) <nl> for ( String token : tokensFromString ( conf . initial _ token ) )
NEAREST DIFF (one line): diff - - git a / debian / README . Debian b / debian / README . Debian <nl> new file mode 100644 <nl> index 0000000 . . 9d7ea40 <nl> - - - / dev / null <nl> + + + b / debian / README . Debian <nl> @ @ - 0 , 0 + 1 , 8 @ @ <nl> + Cassandra for Debian <nl> + = = = = = = = = = = = = = = = = = = = = <nl> + <nl> + This package is not a part of Debian , ( and there are no immediate plans <nl> + to have it added ) . Bugs should be sent to eevans @ apache . org , * not * filed <nl> + in the Debian BTS . <nl> + <nl> + - - Eric Evans < eevans @ apache . org > Sun , 26 Jul 2009 14 : 35 : 11 - 0500 <nl> diff - - git a / debian / TODO b / debian / TODO <nl> new file mode 100644 <nl> index 0000000 . . 45f4e49 <nl> - - - / dev / null <nl> + + + b / debian / TODO <nl> @ @ - 0 , 0 + 1 , 4 @ @ <nl> + <nl> + * run as non - privileged user <nl> + * cassandra - cli requires root for access to log files ( and shouldn ' t ) <nl> + * don ' t embed jars for which debian packages exist <nl> diff - - git a / debian / cassandra . default b / debian / cassandra . default <nl> new file mode 100644 <nl> index 0000000 . . d12c716 <nl> - - - / dev / null <nl> + + + b / debian / cassandra . default <nl> @ @ - 0 , 0 + 1 , 16 @ @ <nl> + <nl> + # Override JAVA _ HOME if you are not using the openjdk - 6 - jre package . <nl> + # JAVA _ HOME = " / usr / lib / jvm / java - 6 - openjdk / jre " <nl> + <nl> + # Specifies the max size ( in bytes ) of memory allocation . Must be a <nl> + # multiple of 1024 . You can append the letter K , M , or G to indicate <nl> + # kilobytes , megabytes , or gigabytes respectively . <nl> + JVM _ MAX _ MEM = " 1G " <nl> + <nl> + # Specifies the initial size ( in bytes ) of memory allocation . Must be <nl> + # a multiple of 1024 greater than 1MB . You can append the letters K or <nl> + # M to indicate kilobytes or megabytes respectively . <nl> + JVM _ START _ MEM = " 128M " <nl> + <nl> + # Specifies any additional arguments to the JVM . <nl> + JVM _ EXTRA _ OPTS = " - Xdebug - Xrunjdwp : transport = dt _ socket , server = y , address = 8888 , suspend = n - XX : SurvivorRatio = 8 - XX : TargetSurvivorRatio = 90 - XX : + AggressiveOpts - XX : + UseParNewGC - XX : + UseConcMarkSweepGC - XX : CMSInitiatingOccupancyFraction = 1 - XX : + CMSParallelRemarkEnabled - XX : + HeapDumpOnOutOfMemoryError " <nl> diff - - git a / debian / cassandra . in . sh b / debian / cassandra . in . sh <nl> new file mode 100644 <nl> index 0000000 . . 5a1329f <nl> - - - / dev / null <nl> + + + b / debian / cassandra . in . sh <nl> @ @ - 0 , 0 + 1 , 27 @ @ <nl> + <nl> + # The directory where Cassandra ' s configs live ( required ) <nl> + CASSANDRA _ CONF = / etc / cassandra <nl> + <nl> + # The java classpath ( required ) <nl> + CLASSPATH = $ CASSANDRA _ CONF <nl> + <nl> + for jar in / usr / share / cassandra / * . jar ; do <nl> + CLASSPATH = $ CLASSPATH : $ jar <nl> + done <nl> + <nl> + # Arguments to pass to the JVM <nl> + JVM _ OPTS = " \ <nl> + - Xdebug \ <nl> + - Xms128M \ <nl> + - Xmx1G \ <nl> + - XX : SurvivorRatio = 8 \ <nl> + - XX : TargetSurvivorRatio = 90 \ <nl> + - XX : + AggressiveOpts \ <nl> + - XX : + UseParNewGC \ <nl> + - XX : + UseConcMarkSweepGC \ <nl> + - XX : CMSInitiatingOccupancyFraction = 1 \ <nl> + - XX : + CMSParallelRemarkEnabled \ <nl> + - XX : + HeapDumpOnOutOfMemoryError \ <nl> + - Dcom . sun . management . jmxremote . port = 8080 \ <nl> + - Dcom . sun . management . jmxremote . ssl = false \ <nl> + - Dcom . sun . management . jmxremote . authenticate = false " <nl> diff - - git a / debian / cassandra . install b / debian / cassandra . install <nl> new file mode 100644 <nl> index 0000000 . . e8bb4ce <nl> - - - / dev / null <nl> + + + b / debian / cassandra . install <nl> @ @ - 0 , 0 + 1 , 20 @ @ <nl> + conf / log4j . properties etc / cassandra <nl> + conf / storage - conf . xml etc / cassandra <nl> + debian / cassandra . in . sh usr / share / cassandra <nl> + bin / cassandra usr / sbin <nl> + bin / cassandra - cli usr / bin <nl> + bin / nodeprobe usr / bin <nl> + lib / antlr - 3 . 1 . 3 . jar usr / share / cassandra <nl> + lib / clhm - production . jar usr / share / cassandra <nl> + lib / commons - cli - 1 . 1 . jar usr / share / cassandra <nl> + lib / commons - collections - 3 . 2 . 1 . jar usr / share / cassandra <nl> + lib / commons - lang - 2 . 4 . jar usr / share / cassandra <nl> + lib / flexjson - 1 . 7 . jar usr / share / cassandra <nl> + lib / google - collect - 1 . 0 - rc1 . jar usr / share / cassandra <nl> + lib / high - scale - lib . jar usr / share / cassandra <nl> + lib / jline - 0 . 9 . 94 . jar usr / share / cassandra <nl> + lib / json _ simple - 1 . 1 . jar usr / share / cassandra <nl> + lib / libthrift - r820831 . jar usr / share / cassandra <nl> + lib / log4j - 1 . 2 . 15 . jar usr / share / cassandra <nl> + lib / slf4j - api - 1 . 5 . 8 . jar usr / share / cassandra <nl> + lib / slf4j - log4j12 - 1 . 5 . 8 . jar usr / share / cassandra <nl> diff - - git a / debian / changelog b / debian / changelog <nl> new file mode 100644 <nl> index 0000000 . . c54a5e9 <nl> - - - / dev / null <nl> + + + b / debian / changelog <nl> @ @ - 0 , 0 + 1 , 5 @ @ <nl> + cassandra ( 0 . 5 . 0 - 1 ) unstable ; urgency = low <nl> + <nl> + * New stable release . <nl> + <nl> + - - Eric Evans < eevans @ apache . org > Tue , 26 Jan 2010 11 : 21 : 11 - 0600 <nl> diff - - git a / debian / compat b / debian / compat <nl> new file mode 100644 <nl> index 0000000 . . 7ed6ff8 <nl> - - - / dev / null <nl> + + + b / debian / compat <nl> @ @ - 0 , 0 + 1 @ @ <nl> + 5 <nl> diff - - git a / debian / control b / debian / control <nl> new file mode 100644 <nl> index 0000000 . . c9d2b1e <nl> - - - / dev / null <nl> + + + b / debian / control <nl> @ @ - 0 , 0 + 1 , 16 @ @ <nl> + Source : cassandra <nl> + Section : misc <nl> + Priority : extra <nl> + Maintainer : Eric Evans < eevans @ apache . org > <nl> + Build - Depends : debhelper ( > = 5 ) , openjdk - 6 - jdk ( > = 6b11 ) | java6 - sdk , ant ( > = 1 . 7 ) <nl> + Homepage : http : / / incubator . apache . org / cassandra / <nl> + Vcs - Git : git : / / github . com / eevans / cassandra - debian . git <nl> + Vcs - Browser : http : / / github . com / eevans / cassandra - debian / tree <nl> + Standards - Version : 3 . 8 . 3 <nl> + <nl> + Package : cassandra <nl> + Architecture : all <nl> + Depends : openjdk - 6 - jre - headless ( > = 6b11 ) | java6 - runtime , jsvc ( > = 1 . 0 ) , libcommons - daemon - java ( > = 1 . 0 ) <nl> + Description : distributed storage system for structured data <nl> + Cassandra is a distributed ( peer - to - peer ) system for the management <nl> + and storage of structured data . <nl> diff - - git a / debian / copyright b / debian / copyright <nl> new file mode 100644 <nl> index 0000000 . . f8b42d0 <nl> - - - / dev / null <nl> + + + b / debian / copyright <nl> @ @ - 0 , 0 + 1 , 10 @ @ <nl> + This package was debianized by Eric Evans < eevans @ apache . org > on <nl> + Sun , 26 Jul 2009 15 : 12 : 10 + 0000 <nl> + <nl> + Upstream Author : Cassandra Developers < cassandra - dev @ incubator . apache . org > <nl> + <nl> + Copyright ( c ) 2009 , The Apache Software Foundation . <nl> + <nl> + This software is licensed under the Apache License 2 . 0 . On Debian <nl> + GNU / Linux systems you can find the complete text of the Apache - 2 . 0 <nl> + license in ` / usr / share / common - licenses / Apache - 2 . 0 ' . <nl> diff - - git a / debian / dirs b / debian / dirs <nl> new file mode 100644 <nl> index 0000000 . . 68b939d <nl> - - - / dev / null <nl> + + + b / debian / dirs <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + usr / share / cassandra <nl> + usr / sbin <nl> + usr / bin <nl> + etc / cassandra <nl> + var / lib / cassandra <nl> + var / log / cassandra <nl> diff - - git a / debian / init b / debian / init <nl> new file mode 100644 <nl> index 0000000 . . dba0e48 <nl> - - - / dev / null <nl> + + + b / debian / init <nl> @ @ - 0 , 0 + 1 , 154 @ @ <nl> + # ! / bin / sh <nl> + # # # BEGIN INIT INFO <nl> + # Provides : cassandra <nl> + # Required - Start : $ remote _ fs <nl> + # Required - Stop : $ remote _ fs <nl> + # Default - Start : 2 3 4 5 <nl> + # Default - Stop : 0 1 6 <nl> + # Short - Description : distributed storage system for structured data <nl> + # Description : Cassandra is a distributed ( peer - to - peer ) system for <nl> + # the management and storage of structured data . <nl> + # # # END INIT INFO <nl> + <nl> + # Author : Eric Evans < eevans @ racklabs . com > <nl> + <nl> + DESC = " Cassandra " <nl> + NAME = cassandra <nl> + PIDFILE = / var / run / $ NAME . pid <nl> + SCRIPTNAME = / etc / init . d / $ NAME <nl> + CONFDIR = / etc / cassandra <nl> + JAVA _ HOME = " / usr / lib / jvm / java - 6 - openjdk / jre " <nl> + JSVC = / usr / bin / jsvc <nl> + JVM _ MAX _ MEM = " 1G " <nl> + JVM _ START _ MEM = " 128M " <nl> + <nl> + [ - e / usr / share / cassandra / apache - cassandra - incubating . jar ] | | exit 0 <nl> + [ - e / etc / cassandra / storage - conf . xml ] | | exit 0 <nl> + <nl> + # Read configuration variable file if it is present <nl> + [ - r / etc / default / $ NAME ] & & . / etc / default / $ NAME <nl> + <nl> + # Load the VERBOSE setting and other rcS variables <nl> + . / lib / init / vars . sh <nl> + <nl> + # Define LSB log _ * functions . <nl> + # Depend on lsb - base ( > = 3 . 0 - 6 ) to ensure that this file is present . <nl> + . / lib / lsb / init - functions <nl> + <nl> + # <nl> + # Function that returns the applications classpath <nl> + # <nl> + classpath ( ) <nl> + { <nl> + cp = <nl> + for j in / usr / share / $ NAME / * . jar ; do <nl> + [ " x $ cp " = " x " ] & & cp = $ j | | cp = $ cp : $ j <nl> + done <nl> + <nl> + # Include the conf directory for purposes of log4j . properties , and <nl> + # commons - daemon in support of the daemonization class . <nl> + printf " $ cp : $ CONFDIR : / usr / share / java / commons - daemon . jar " <nl> + } <nl> + <nl> + # <nl> + # Function that returns 0 if process is running , 1 if not <nl> + # <nl> + is _ running ( ) <nl> + { <nl> + if [ - f $ PIDFILE ] ; then <nl> + if ps - p ` cat $ PIDFILE ` & > / dev / null ; then <nl> + return 0 <nl> + fi <nl> + fi <nl> + return 1 <nl> + } <nl> + <nl> + # <nl> + # Function that starts the daemon / service <nl> + # <nl> + do _ start ( ) <nl> + { <nl> + # Return <nl> + # 0 if daemon has been started <nl> + # 1 if daemon was already running <nl> + # 2 if daemon could not be started <nl> + is _ running & & return 1 <nl> + <nl> + $ JSVC \ <nl> + - home $ JAVA _ HOME \ <nl> + - pidfile $ PIDFILE \ <nl> + - errfile " & 1 " \ <nl> + - outfile / var / log / $ NAME / output . log \ <nl> + - cp ` classpath ` \ <nl> + - Xmx $ JVM _ MAX _ MEM \ <nl> + - Xms $ JVM _ START _ MEM \ <nl> + - Dcassandra \ <nl> + - Dstorage - config = $ CONFDIR \ <nl> + - Dcom . sun . management . jmxremote . port = 8080 \ <nl> + - Dcom . sun . management . jmxremote . ssl = false \ <nl> + - Dcom . sun . management . jmxremote . authenticate = false \ <nl> + org . apache . cassandra . service . CassandraDaemon <nl> + <nl> + if ! is _ running ; then return 2 ; fi <nl> + } <nl> + <nl> + # <nl> + # Function that stops the daemon / service <nl> + # <nl> + do _ stop ( ) <nl> + { <nl> + 	 # Return <nl> + 	 # 0 if daemon has been stopped <nl> + 	 # 1 if daemon was already stopped <nl> + 	 # 2 if daemon could not be stopped <nl> + 	 # other if a failure occurred <nl> + is _ running | | return 1 <nl> + $ JSVC - stop - home $ JAVA _ HOME - pidfile $ PIDFILE \ <nl> + org . apache . cassandra . service . CassandraJsvcDaemon <nl> + is _ running & & return 2 | | return 0 <nl> + } <nl> + <nl> + case " $ 1 " in <nl> + start ) <nl> + 	 [ " $ VERBOSE " ! = no ] & & log _ daemon _ msg " Starting $ DESC " " $ NAME " <nl> + 	 do _ start <nl> + 	 case " $ ? " in <nl> + 	 	 0 | 1 ) [ " $ VERBOSE " ! = no ] & & log _ end _ msg 0 ; ; <nl> + 	 	 2 ) [ " $ VERBOSE " ! = no ] & & log _ end _ msg 1 ; ; <nl> + 	 esac <nl> + 	 ; ; <nl> + stop ) <nl> + 	 [ " $ VERBOSE " ! = no ] & & log _ daemon _ msg " Stopping $ DESC " " $ NAME " <nl> + 	 do _ stop <nl> + 	 case " $ ? " in <nl> + 	 	 0 | 1 ) [ " $ VERBOSE " ! = no ] & & log _ end _ msg 0 ; ; <nl> + 	 	 2 ) [ " $ VERBOSE " ! = no ] & & log _ end _ msg 1 ; ; <nl> + 	 esac <nl> + 	 ; ; <nl> + restart | force - reload ) <nl> + 	 log _ daemon _ msg " Restarting $ DESC " " $ NAME " <nl> + 	 do _ stop <nl> + 	 case " $ ? " in <nl> + 	 0 | 1 ) <nl> + 	 	 do _ start <nl> + 	 	 case " $ ? " in <nl> + 	 	 	 0 ) log _ end _ msg 0 ; ; <nl> + 	 	 	 1 ) log _ end _ msg 1 ; ; # Old process is still running <nl> + 	 	 	 * ) log _ end _ msg 1 ; ; # Failed to start <nl> + 	 	 esac <nl> + 	 	 ; ; <nl> + 	 * ) <nl> + 	 	 # Failed to stop <nl> + 	 	 log _ end _ msg 1 <nl> + 	 	 ; ; <nl> + 	 esac <nl> + 	 ; ; <nl> + * ) <nl> + 	 echo " Usage : $ SCRIPTNAME { start | stop | restart | force - reload } " > & 2 <nl> + 	 exit 3 <nl> + 	 ; ; <nl> + esac <nl> + <nl> + : <nl> + <nl> + # vi : ai sw = 4 ts = 4 tw = 0 et <nl> diff - - git a / debian / rules b / debian / rules <nl> new file mode 100755 <nl> index 0000000 . . 903b090 <nl> - - - / dev / null <nl> + + + b / debian / rules <nl> @ @ - 0 , 0 + 1 , 63 @ @ <nl> + # ! / usr / bin / make - f <nl> + <nl> + # Uncomment to enable verbose mode . <nl> + # export DH _ VERBOSE = 1 <nl> + <nl> + ANT = / usr / bin / ant <nl> + VERSION = $ ( shell dpkg - parsechangelog | sed - ne ' s / ^ Version : \ ( . * \ ) - . * / \ 1 / p ' ) <nl> + <nl> + test : <nl> + 	 dh _ testdir <nl> + 	 $ ( ANT ) test <nl> + <nl> + clean : <nl> + 	 dh _ testdir <nl> + 	 dh _ testroot <nl> + 	 $ ( ANT ) clean <nl> + 	 rm - f build - stamp build . properties <nl> + 	 rm - rf bin / java <nl> + 	 find - name " * . pyc " - exec rm ' { } ' ' ; ' <nl> + 	 find - name " * py . class " - exec rm ' { } ' ' ; ' <nl> + 	 dh _ clean <nl> + <nl> + build : build - stamp <nl> + build - stamp : <nl> + 	 dh _ testdir <nl> + 	 printf " version = % s " $ ( VERSION ) > build . properties <nl> + <nl> + 	 $ ( ANT ) jar <nl> + <nl> + 	 touch build - stamp <nl> + <nl> + install : build <nl> + 	 dh _ testdir <nl> + 	 dh _ testroot <nl> + 	 dh _ installdirs <nl> + 	 dh _ install <nl> + <nl> + 	 # Copy in the jar and symlink to something stable <nl> + 	 dh _ install build / apache - cassandra - incubating - $ ( VERSION ) . jar \ <nl> + 	 	 usr / share / cassandra <nl> + 	 dh _ link usr / share / cassandra / apache - cassandra - incubating - $ ( VERSION ) . jar \ <nl> + 	 	 usr / share / cassandra / apache - cassandra - incubating . jar <nl> + <nl> + # Build architecture - independent files here . <nl> + binary - indep : build install <nl> + 	 dh _ testdir <nl> + 	 dh _ testroot <nl> + 	 dh _ installchangelogs <nl> + 	 dh _ installinit <nl> + 	 dh _ installdocs README . txt DISCLAIMER . txt CHANGES . txt NEWS . txt <nl> + 	 dh _ compress <nl> + 	 dh _ fixperms <nl> + 	 dh _ installdeb <nl> + 	 dh _ gencontrol <nl> + 	 dh _ md5sums <nl> + 	 dh _ builddeb <nl> + <nl> + # Build architecture - dependent files here . <nl> + binary - arch : build install <nl> + # We have nothing to do by default . <nl> + <nl> + binary : binary - indep binary - arch <nl> + . PHONY : build clean binary - indep binary - arch binary install

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 3cea1e7 . . fd593e7 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 6 , 6 + 6 , 7 @ @ 
 * Reduce run time for CQL tests ( CASSANDRA - 7327 ) 
 * Fix heap size calculation on Windows ( CASSANDRA - 7352 ) 
 * RefCount native frames from netty ( CASSANDRA - 7245 ) 
 + * Use tarball dir instead of / var for default paths ( CASSANDRA - 7136 ) 
 Merged from 2 . 0 : 
 * Add per - CF range read request latency metrics ( CASSANDRA - 7338 ) 
 * Fix NPE in StreamTransferTask . createMessageForRetry ( ) ( CASSANDRA - 7323 ) 
 diff - - git a / NEWS . txt b / NEWS . txt 
 index c1b2b44 . . 4eed9de 100644 
 - - - a / NEWS . txt 
 + + + b / NEWS . txt 
 @ @ - 18 , 6 + 18 , 16 @ @ using the provided ' sstableupgrade ' tool . 
 
 New features 
 - - - - - - - - - - - - 
 + - Default data and log locations have changed . If not set in 
 + cassandra . yaml , the data file directory , commitlog directory , 
 + and saved caches directory will default to $ CASSANDRA _ HOME / data / data , 
 + $ CASSANDRA _ HOME / data / commitlog , and $ CASSANDRA _ HOME / data / saved _ caches , 
 + respectively . The log directory now defaults to $ CASSANDRA _ HOME / logs . 
 + If not set , $ CASSANDRA _ HOME , defaults to the top - level directory of 
 + the installation . 
 + Note that this should only affect source checkouts and tarballs . 
 + Deb and RPM packages will continue to use / var / lib / cassandra and 
 + / var / log / cassandra in cassandra . yaml . 
 - SSTable data directory name is slightly changed . Each directory will 
 have hex string appended after CF name , e . g . 
 ks / cf - 5be396077b811e3a3ab9dc4b9ac088d / 
 diff - - git a / bin / cassandra b / bin / cassandra 
 index f34ca8c . . 797d36b 100755 
 - - - a / bin / cassandra 
 + + + b / bin / cassandra 
 @ @ - 134 , 6 + 134 , 7 @ @ launch _ service ( ) 
 props = " $ 3 " 
 class = " $ 4 " 
 cassandra _ parms = " - Dlogback . configurationFile = logback . xml " 
 + cassandra _ parms = " $ cassandra _ parms - Dcassandra . logdir = $ CASSANDRA _ HOME / logs - Dcassandra . storagedir = $ CASSANDRA _ HOME / data " 
 
 if [ " x $ pidpath " ! = " x " ] ; then 
 cassandra _ parms = " $ cassandra _ parms - Dcassandra - pidfile = $ pidpath " 
 diff - - git a / bin / cassandra . bat b / bin / cassandra . bat 
 index 172ca8e . . 629e58b 100644 
 - - - a / bin / cassandra . bat 
 + + + b / bin / cassandra . bat 
 @ @ - 86 , 6 + 86 , 7 @ @ goto : eof 
 REM Include the build \ classes \ main directory so it works in development 
 set CASSANDRA _ CLASSPATH = % CLASSPATH % ; " % CASSANDRA _ HOME % \ build \ classes \ main " ; " % CASSANDRA _ HOME % \ build \ classes \ thrift " 
 set CASSANDRA _ PARAMS = - Dcassandra - Dcassandra - foreground = yes 
 + set CASSANDRA _ PARAMS = % CASSANDRA _ PARAMS % " - Dcassandra . logdir = % CASSANDRA _ HOME % \ logs " " - Dcassandra . storagedir = % CASSANDRA _ HOME % \ data " 
 if / i " % ARG % " = = " INSTALL " goto doInstallOperation 
 if / i " % ARG % " = = " UNINSTALL " goto doInstallOperation 
 goto runDaemon 
 diff - - git a / bin / cassandra . ps1 b / bin / cassandra . ps1 
 index 19d831a . . ac8d89c 100644 
 - - - a / bin / cassandra . ps1 
 + + + b / bin / cassandra . ps1 
 @ @ - 77 , 6 + 77 , 10 @ @ Function Main 
 SetCassandraEnvironment 
 $ pidfile = " $ env : CASSANDRA _ HOME / $ pidfile " 
 
 + $ logdir = " $ env : CASSANDRA _ HOME / logs " 
 + $ storagedir = " $ env : CASSANDRA _ HOME / data " 
 + $ env : CASSANDRA _ PARAMS = $ env : CASSANDRA _ PARAMS + " - Dcassandra . logdir = $ logdir - Dcassandra . storagedir = $ storagedir " 
 + 
 # Other command line params 
 if ( $ H ) 
 { 
 diff - - git a / conf / cassandra . yaml b / conf / cassandra . yaml 
 index 561c7ff . . e6c34e0 100644 
 - - - a / conf / cassandra . yaml 
 + + + b / conf / cassandra . yaml 
 @ @ - 93 , 12 + 93 , 14 @ @ partitioner : org . apache . cassandra . dht . Murmur3Partitioner 
 # Directories where Cassandra should store data on disk . Cassandra 
 # will spread data evenly across them , subject to the granularity of 
 # the configured compaction strategy . 
 - data _ file _ directories : 
 - - / var / lib / cassandra / data 
 + # If not set , the default directory is $ CASSANDRA _ HOME / data / data . 
 + # data _ file _ directories : 
 + # - / var / lib / cassandra / data 
 
 # commit log . when running on magnetic HDD , this should be a 
 # separate spindle than the data directories . 
 - commitlog _ directory : / var / lib / cassandra / commitlog 
 + # If not set , the default directory is $ CASSANDRA _ HOME / data / commitlog . 
 + # commitlog _ directory : / var / lib / cassandra / commitlog 
 
 # policy for data disk failures : 
 # stop _ paranoid : shut down gossip and Thrift even for single - sstable errors . 
 @ @ - 200 , 7 + 202 , 8 @ @ counter _ cache _ save _ period : 7200 
 # memory _ allocator : NativeAllocator 
 
 # saved caches 
 - saved _ caches _ directory : / var / lib / cassandra / saved _ caches 
 + # If not set , the default directory is $ CASSANDRA _ HOME / data / saved _ caches . 
 + # saved _ caches _ directory : / var / lib / cassandra / saved _ caches 
 
 # commitlog _ sync may be either " periodic " or " batch . " 
 # When in batch mode , Cassandra won ' t ack writes until the commit log 
 diff - - git a / conf / logback . xml b / conf / logback . xml 
 index 61e5a13 . . e170d41 100644 
 - - - a / conf / logback . xml 
 + + + b / conf / logback . xml 
 @ @ - 20 , 9 + 20 , 9 @ @ 
 < configuration scan = " true " > 
 < jmxConfigurator / > 
 < appender name = " FILE " class = " ch . qos . logback . core . rolling . RollingFileAppender " > 
 - < file > / var / log / cassandra / system . log < / file > 
 + < file > $ { cassandra . logdir } / system . log < / file > 
 < rollingPolicy class = " ch . qos . logback . core . rolling . FixedWindowRollingPolicy " > 
 - < fileNamePattern > / var / log / cassandra / system . log . % i . zip < / fileNamePattern > 
 + < fileNamePattern > $ { cassandra . logdir } / system . log . % i . zip < / fileNamePattern > 
 < minIndex > 1 < / minIndex > 
 < maxIndex > 20 < / maxIndex > 
 < / rollingPolicy > 
 diff - - git a / debian / control b / debian / control 
 index cc0c49b . . f1167c3 100644 
 - - - a / debian / control 
 + + + b / debian / control 
 @ @ - 3 , 7 + 3 , 7 @ @ Section : misc 
 Priority : extra 
 Maintainer : Eric Evans < eevans @ apache . org > 
 Uploaders : Sylvain Lebresne < slebresne @ apache . org > 
 - Build - Depends : debhelper ( > = 5 ) , openjdk - 7 - jdk | java7 - jdk , ant ( > = 1 . 7 ) , ant - optional ( > = 1 . 7 ) , python - support 
 + Build - Depends : debhelper ( > = 5 ) , openjdk - 7 - jdk | java7 - jdk , ant ( > = 1 . 7 ) , ant - optional ( > = 1 . 7 ) , python - support , dpatch 
 Homepage : http : / / cassandra . apache . org 
 Vcs - Git : http : / / git - wip - us . apache . org / repos / asf / cassandra . git 
 Vcs - Browser : https : / / git - wip - us . apache . org / repos / asf ? p = cassandra . git 
 diff - - git a / debian / patches / 001cassandra _ yaml _ dirs . dpatch b / debian / patches / 001cassandra _ yaml _ dirs . dpatch 
 new file mode 100644 
 index 0000000 . . 3d545e5 
 - - - / dev / null 
 + + + b / debian / patches / 001cassandra _ yaml _ dirs . dpatch 
 @ @ - 0 , 0 + 1 , 36 @ @ 
 + # ! / bin / sh / usr / share / dpatch / dpatch - run 
 + # # 001cassandra _ yaml _ dirs . dpatch by Tyler Hobbs < tyler @ datastax . com > 
 + # # 
 + # # All lines beginning with ` # # DP : ' are a description of the patch . 
 + # # DP : No description . 
 + 
 + @ DPATCH @ 
 + diff - urNad ' - - exclude = CVS ' ' - - exclude = . svn ' ' - - exclude = . git ' ' - - exclude = . arch ' ' - - exclude = . hg ' ' - - exclude = _ darcs ' ' - - exclude = . bzr ' cassandra ~ / conf / cassandra . yaml cassandra / conf / cassandra . yaml 
 + - - - cassandra ~ / conf / cassandra . yaml 	 2014 - 06 - 05 13 : 36 : 22 . 000000000 - 0500 
 + + + + cassandra / conf / cassandra . yaml 	 2014 - 06 - 05 13 : 39 : 20 . 569034040 - 0500 
 + @ @ - 94 , 13 + 94 , 13 @ @ 
 + # will spread data evenly across them , subject to the granularity of 
 + # the configured compaction strategy . 
 + # If not set , the default directory is $ CASSANDRA _ HOME / data / data . 
 + - # data _ file _ directories : 
 + - # - / var / lib / cassandra / data 
 + + data _ file _ directories : 
 + + - / var / lib / cassandra / data 
 + 
 + # commit log . when running on magnetic HDD , this should be a 
 + # separate spindle than the data directories . 
 + # If not set , the default directory is $ CASSANDRA _ HOME / data / commitlog . 
 + - # commitlog _ directory : / var / lib / cassandra / commitlog 
 + + commitlog _ directory : / var / lib / cassandra / commitlog 
 + 
 + # policy for data disk failures : 
 + # stop _ paranoid : shut down gossip and Thrift even for single - sstable errors . 
 + @ @ - 203 , 7 + 203 , 7 @ @ 
 + 
 + # saved caches 
 + # If not set , the default directory is $ CASSANDRA _ HOME / data / saved _ caches . 
 + - # saved _ caches _ directory : / var / lib / cassandra / saved _ caches 
 + + saved _ caches _ directory : / var / lib / cassandra / saved _ caches 
 + 
 + # commitlog _ sync may be either " periodic " or " batch . " 
 + # When in batch mode , Cassandra won ' t ack writes until the commit log 
 diff - - git a / debian / patches / 00list b / debian / patches / 00list 
 new file mode 100644 
 index 0000000 . . 508c180 
 - - - / dev / null 
 + + + b / debian / patches / 00list 
 @ @ - 0 , 0 + 1 @ @ 
 + 001cassandra _ yaml _ dirs . dpatch 
 diff - - git a / debian / rules b / debian / rules 
 index 717bbf2 . . 602cfde 100755 
 - - - a / debian / rules 
 + + + b / debian / rules 
 @ @ - 3 , 6 + 3 , 8 @ @ 
 # Uncomment to enable verbose mode . 
 # export DH _ VERBOSE = 1 
 
 + include / usr / share / dpatch / dpatch . make 
 + 
 ANT = / usr / bin / ant 
 VERSION = $ ( shell dpkg - parsechangelog | sed - ne ' s / ^ Version : \ ( . * \ ) / \ 1 / p ' ) 
 
 @ @ - 10 , 7 + 12 , 7 @ @ test : 
 	 dh _ testdir 
 	 $ ( ANT ) test 
 
 - clean : 
 + clean : unpatch 
 	 dh _ testdir 
 	 dh _ testroot 
 	 $ ( ANT ) realclean 
 @ @ - 22 , 7 + 24 , 7 @ @ clean : 
 	 dh _ clean 
 
 build : build - stamp 
 - build - stamp : 
 + build - stamp : patch - stamp 
 	 dh _ testdir 
 	 printf " version = % s " $ ( VERSION ) > build . properties 
 
 diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 index 5b227ae . . 3cc53de 100644 
 - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 @ @ - 452 , 35 + 452 , 47 @ @ public class DatabaseDescriptor 
 throw new ConfigurationException ( " in _ memory _ compaction _ limit _ in _ mb must be a positive integer " ) ; 
 } 
 
 - if ( conf . concurrent _ compactors = = null ) 
 - conf . concurrent _ compactors = Math . min ( 8 , Math . max ( 2 , Math . min ( FBUtilities . getAvailableProcessors ( ) , conf . data _ file _ directories . length ) ) ) ; 
 - 
 - if ( conf . concurrent _ compactors < = 0 ) 
 - throw new ConfigurationException ( " concurrent _ compactors should be strictly greater than 0 " ) ; 
 - 
 - / * data file and commit log directories . they get created later , when they ' re needed . * / 
 - if ( conf . commitlog _ directory ! = null & & conf . data _ file _ directories ! = null & & conf . saved _ caches _ directory ! = null ) 
 + / / if data dirs , commitlog dir , or saved caches dir are set in cassandra . yaml , use that . Otherwise , 
 + / / use - Dcassandra . storagedir ( set in cassandra - env . sh ) as the parent dir for data / , commitlog / , and saved _ caches / 
 + if ( conf . commitlog _ directory = = null ) 
 { 
 - for ( String datadir : conf . data _ file _ directories ) 
 - { 
 - if ( datadir . equals ( conf . commitlog _ directory ) ) 
 - throw new ConfigurationException ( " commitlog _ directory must not be the same as any data _ file _ directories " ) ; 
 - if ( datadir . equals ( conf . saved _ caches _ directory ) ) 
 - throw new ConfigurationException ( " saved _ caches _ directory must not be the same as any data _ file _ directories " ) ; 
 - } 
 - 
 - if ( conf . commitlog _ directory . equals ( conf . saved _ caches _ directory ) ) 
 - throw new ConfigurationException ( " saved _ caches _ directory must not be the same as the commitlog _ directory " ) ; 
 + conf . commitlog _ directory = System . getProperty ( " cassandra . storagedir " , null ) ; 
 + if ( conf . commitlog _ directory = = null ) 
 + throw new ConfigurationException ( " commitlog _ directory is missing and - Dcassandra . storagedir is not set " ) ; 
 + conf . commitlog _ directory + = File . separator + " commitlog " ; 
 } 
 - else 
 + if ( conf . saved _ caches _ directory = = null ) 
 { 
 - if ( conf . commitlog _ directory = = null ) 
 - throw new ConfigurationException ( " commitlog _ directory missing " ) ; 
 - if ( conf . data _ file _ directories = = null ) 
 - throw new ConfigurationException ( " data _ file _ directories missing ; at least one data directory must be specified " ) ; 
 + conf . saved _ caches _ directory = System . getProperty ( " cassandra . storagedir " , null ) ; 
 if ( conf . saved _ caches _ directory = = null ) 
 - throw new ConfigurationException ( " saved _ caches _ directory missing " ) ; 
 + throw new ConfigurationException ( " saved _ caches _ directory is missing and - Dcassandra . storagedir is not set " ) ; 
 + conf . saved _ caches _ directory + = File . separator + " saved _ caches " ; 
 } 
 + if ( conf . data _ file _ directories = = null ) 
 + { 
 + String defaultDataDir = System . getProperty ( " cassandra . storagedir " , null ) ; 
 + if ( defaultDataDir = = null ) 
 + throw new ConfigurationException ( " data _ file _ directories is not missing and - Dcassandra . storagedir is not set " ) ; 
 + conf . data _ file _ directories = new String [ ] { defaultDataDir + File . separator + " data " } ; 
 + } 
 + 
 + / * data file and commit log directories . they get created later , when they ' re needed . * / 
 + for ( String datadir : conf . data _ file _ directories ) 
 + { 
 + if ( datadir . equals ( conf . commitlog _ directory ) ) 
 + throw new ConfigurationException ( " commitlog _ directory must not be the same as any data _ file _ directories " ) ; 
 + if ( datadir . equals ( conf . saved _ caches _ directory ) ) 
 + throw new ConfigurationException ( " saved _ caches _ directory must not be the same as any data _ file _ directories " ) ; 
 + } 
 + 
 + if ( conf . commitlog _ directory . equals ( conf . saved _ caches _ directory ) ) 
 + throw new ConfigurationException ( " saved _ caches _ directory must not be the same as the commitlog _ directory " ) ; 
 + 
 + if ( conf . concurrent _ compactors = = null ) 
 + conf . concurrent _ compactors = Math . min ( 8 , Math . max ( 2 , Math . min ( FBUtilities . getAvailableProcessors ( ) , conf . data _ file _ directories . length ) ) ) ; 
 + 
 + if ( conf . concurrent _ compactors < = 0 ) 
 + throw new ConfigurationException ( " concurrent _ compactors should be strictly greater than 0 " ) ; 
 
 if ( conf . initial _ token ! = null ) 
 for ( String token : tokensFromString ( conf . initial _ token ) )

NEAREST DIFF:
diff - - git a / debian / README . Debian b / debian / README . Debian 
 new file mode 100644 
 index 0000000 . . 9d7ea40 
 - - - / dev / null 
 + + + b / debian / README . Debian 
 @ @ - 0 , 0 + 1 , 8 @ @ 
 + Cassandra for Debian 
 + = = = = = = = = = = = = = = = = = = = = 
 + 
 + This package is not a part of Debian , ( and there are no immediate plans 
 + to have it added ) . Bugs should be sent to eevans @ apache . org , * not * filed 
 + in the Debian BTS . 
 + 
 + - - Eric Evans < eevans @ apache . org > Sun , 26 Jul 2009 14 : 35 : 11 - 0500 
 diff - - git a / debian / TODO b / debian / TODO 
 new file mode 100644 
 index 0000000 . . 45f4e49 
 - - - / dev / null 
 + + + b / debian / TODO 
 @ @ - 0 , 0 + 1 , 4 @ @ 
 + 
 + * run as non - privileged user 
 + * cassandra - cli requires root for access to log files ( and shouldn ' t ) 
 + * don ' t embed jars for which debian packages exist 
 diff - - git a / debian / cassandra . default b / debian / cassandra . default 
 new file mode 100644 
 index 0000000 . . d12c716 
 - - - / dev / null 
 + + + b / debian / cassandra . default 
 @ @ - 0 , 0 + 1 , 16 @ @ 
 + 
 + # Override JAVA _ HOME if you are not using the openjdk - 6 - jre package . 
 + # JAVA _ HOME = " / usr / lib / jvm / java - 6 - openjdk / jre " 
 + 
 + # Specifies the max size ( in bytes ) of memory allocation . Must be a 
 + # multiple of 1024 . You can append the letter K , M , or G to indicate 
 + # kilobytes , megabytes , or gigabytes respectively . 
 + JVM _ MAX _ MEM = " 1G " 
 + 
 + # Specifies the initial size ( in bytes ) of memory allocation . Must be 
 + # a multiple of 1024 greater than 1MB . You can append the letters K or 
 + # M to indicate kilobytes or megabytes respectively . 
 + JVM _ START _ MEM = " 128M " 
 + 
 + # Specifies any additional arguments to the JVM . 
 + JVM _ EXTRA _ OPTS = " - Xdebug - Xrunjdwp : transport = dt _ socket , server = y , address = 8888 , suspend = n - XX : SurvivorRatio = 8 - XX : TargetSurvivorRatio = 90 - XX : + AggressiveOpts - XX : + UseParNewGC - XX : + UseConcMarkSweepGC - XX : CMSInitiatingOccupancyFraction = 1 - XX : + CMSParallelRemarkEnabled - XX : + HeapDumpOnOutOfMemoryError " 
 diff - - git a / debian / cassandra . in . sh b / debian / cassandra . in . sh 
 new file mode 100644 
 index 0000000 . . 5a1329f 
 - - - / dev / null 
 + + + b / debian / cassandra . in . sh 
 @ @ - 0 , 0 + 1 , 27 @ @ 
 + 
 + # The directory where Cassandra ' s configs live ( required ) 
 + CASSANDRA _ CONF = / etc / cassandra 
 + 
 + # The java classpath ( required ) 
 + CLASSPATH = $ CASSANDRA _ CONF 
 + 
 + for jar in / usr / share / cassandra / * . jar ; do 
 + CLASSPATH = $ CLASSPATH : $ jar 
 + done 
 + 
 + # Arguments to pass to the JVM 
 + JVM _ OPTS = " \ 
 + - Xdebug \ 
 + - Xms128M \ 
 + - Xmx1G \ 
 + - XX : SurvivorRatio = 8 \ 
 + - XX : TargetSurvivorRatio = 90 \ 
 + - XX : + AggressiveOpts \ 
 + - XX : + UseParNewGC \ 
 + - XX : + UseConcMarkSweepGC \ 
 + - XX : CMSInitiatingOccupancyFraction = 1 \ 
 + - XX : + CMSParallelRemarkEnabled \ 
 + - XX : + HeapDumpOnOutOfMemoryError \ 
 + - Dcom . sun . management . jmxremote . port = 8080 \ 
 + - Dcom . sun . management . jmxremote . ssl = false \ 
 + - Dcom . sun . management . jmxremote . authenticate = false " 
 diff - - git a / debian / cassandra . install b / debian / cassandra . install 
 new file mode 100644 
 index 0000000 . . e8bb4ce 
 - - - / dev / null 
 + + + b / debian / cassandra . install 
 @ @ - 0 , 0 + 1 , 20 @ @ 
 + conf / log4j . properties etc / cassandra 
 + conf / storage - conf . xml etc / cassandra 
 + debian / cassandra . in . sh usr / share / cassandra 
 + bin / cassandra usr / sbin 
 + bin / cassandra - cli usr / bin 
 + bin / nodeprobe usr / bin 
 + lib / antlr - 3 . 1 . 3 . jar usr / share / cassandra 
 + lib / clhm - production . jar usr / share / cassandra 
 + lib / commons - cli - 1 . 1 . jar usr / share / cassandra 
 + lib / commons - collections - 3 . 2 . 1 . jar usr / share / cassandra 
 + lib / commons - lang - 2 . 4 . jar usr / share / cassandra 
 + lib / flexjson - 1 . 7 . jar usr / share / cassandra 
 + lib / google - collect - 1 . 0 - rc1 . jar usr / share / cassandra 
 + lib / high - scale - lib . jar usr / share / cassandra 
 + lib / jline - 0 . 9 . 94 . jar usr / share / cassandra 
 + lib / json _ simple - 1 . 1 . jar usr / share / cassandra 
 + lib / libthrift - r820831 . jar usr / share / cassandra 
 + lib / log4j - 1 . 2 . 15 . jar usr / share / cassandra 
 + lib / slf4j - api - 1 . 5 . 8 . jar usr / share / cassandra 
 + lib / slf4j - log4j12 - 1 . 5 . 8 . jar usr / share / cassandra 
 diff - - git a / debian / changelog b / debian / changelog 
 new file mode 100644 
 index 0000000 . . c54a5e9 
 - - - / dev / null 
 + + + b / debian / changelog 
 @ @ - 0 , 0 + 1 , 5 @ @ 
 + cassandra ( 0 . 5 . 0 - 1 ) unstable ; urgency = low 
 + 
 + * New stable release . 
 + 
 + - - Eric Evans < eevans @ apache . org > Tue , 26 Jan 2010 11 : 21 : 11 - 0600 
 diff - - git a / debian / compat b / debian / compat 
 new file mode 100644 
 index 0000000 . . 7ed6ff8 
 - - - / dev / null 
 + + + b / debian / compat 
 @ @ - 0 , 0 + 1 @ @ 
 + 5 
 diff - - git a / debian / control b / debian / control 
 new file mode 100644 
 index 0000000 . . c9d2b1e 
 - - - / dev / null 
 + + + b / debian / control 
 @ @ - 0 , 0 + 1 , 16 @ @ 
 + Source : cassandra 
 + Section : misc 
 + Priority : extra 
 + Maintainer : Eric Evans < eevans @ apache . org > 
 + Build - Depends : debhelper ( > = 5 ) , openjdk - 6 - jdk ( > = 6b11 ) | java6 - sdk , ant ( > = 1 . 7 ) 
 + Homepage : http : / / incubator . apache . org / cassandra / 
 + Vcs - Git : git : / / github . com / eevans / cassandra - debian . git 
 + Vcs - Browser : http : / / github . com / eevans / cassandra - debian / tree 
 + Standards - Version : 3 . 8 . 3 
 + 
 + Package : cassandra 
 + Architecture : all 
 + Depends : openjdk - 6 - jre - headless ( > = 6b11 ) | java6 - runtime , jsvc ( > = 1 . 0 ) , libcommons - daemon - java ( > = 1 . 0 ) 
 + Description : distributed storage system for structured data 
 + Cassandra is a distributed ( peer - to - peer ) system for the management 
 + and storage of structured data . 
 diff - - git a / debian / copyright b / debian / copyright 
 new file mode 100644 
 index 0000000 . . f8b42d0 
 - - - / dev / null 
 + + + b / debian / copyright 
 @ @ - 0 , 0 + 1 , 10 @ @ 
 + This package was debianized by Eric Evans < eevans @ apache . org > on 
 + Sun , 26 Jul 2009 15 : 12 : 10 + 0000 
 + 
 + Upstream Author : Cassandra Developers < cassandra - dev @ incubator . apache . org > 
 + 
 + Copyright ( c ) 2009 , The Apache Software Foundation . 
 + 
 + This software is licensed under the Apache License 2 . 0 . On Debian 
 + GNU / Linux systems you can find the complete text of the Apache - 2 . 0 
 + license in ` / usr / share / common - licenses / Apache - 2 . 0 ' . 
 diff - - git a / debian / dirs b / debian / dirs 
 new file mode 100644 
 index 0000000 . . 68b939d 
 - - - / dev / null 
 + + + b / debian / dirs 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + usr / share / cassandra 
 + usr / sbin 
 + usr / bin 
 + etc / cassandra 
 + var / lib / cassandra 
 + var / log / cassandra 
 diff - - git a / debian / init b / debian / init 
 new file mode 100644 
 index 0000000 . . dba0e48 
 - - - / dev / null 
 + + + b / debian / init 
 @ @ - 0 , 0 + 1 , 154 @ @ 
 + # ! / bin / sh 
 + # # # BEGIN INIT INFO 
 + # Provides : cassandra 
 + # Required - Start : $ remote _ fs 
 + # Required - Stop : $ remote _ fs 
 + # Default - Start : 2 3 4 5 
 + # Default - Stop : 0 1 6 
 + # Short - Description : distributed storage system for structured data 
 + # Description : Cassandra is a distributed ( peer - to - peer ) system for 
 + # the management and storage of structured data . 
 + # # # END INIT INFO 
 + 
 + # Author : Eric Evans < eevans @ racklabs . com > 
 + 
 + DESC = " Cassandra " 
 + NAME = cassandra 
 + PIDFILE = / var / run / $ NAME . pid 
 + SCRIPTNAME = / etc / init . d / $ NAME 
 + CONFDIR = / etc / cassandra 
 + JAVA _ HOME = " / usr / lib / jvm / java - 6 - openjdk / jre " 
 + JSVC = / usr / bin / jsvc 
 + JVM _ MAX _ MEM = " 1G " 
 + JVM _ START _ MEM = " 128M " 
 + 
 + [ - e / usr / share / cassandra / apache - cassandra - incubating . jar ] | | exit 0 
 + [ - e / etc / cassandra / storage - conf . xml ] | | exit 0 
 + 
 + # Read configuration variable file if it is present 
 + [ - r / etc / default / $ NAME ] & & . / etc / default / $ NAME 
 + 
 + # Load the VERBOSE setting and other rcS variables 
 + . / lib / init / vars . sh 
 + 
 + # Define LSB log _ * functions . 
 + # Depend on lsb - base ( > = 3 . 0 - 6 ) to ensure that this file is present . 
 + . / lib / lsb / init - functions 
 + 
 + # 
 + # Function that returns the applications classpath 
 + # 
 + classpath ( ) 
 + { 
 + cp = 
 + for j in / usr / share / $ NAME / * . jar ; do 
 + [ " x $ cp " = " x " ] & & cp = $ j | | cp = $ cp : $ j 
 + done 
 + 
 + # Include the conf directory for purposes of log4j . properties , and 
 + # commons - daemon in support of the daemonization class . 
 + printf " $ cp : $ CONFDIR : / usr / share / java / commons - daemon . jar " 
 + } 
 + 
 + # 
 + # Function that returns 0 if process is running , 1 if not 
 + # 
 + is _ running ( ) 
 + { 
 + if [ - f $ PIDFILE ] ; then 
 + if ps - p ` cat $ PIDFILE ` & > / dev / null ; then 
 + return 0 
 + fi 
 + fi 
 + return 1 
 + } 
 + 
 + # 
 + # Function that starts the daemon / service 
 + # 
 + do _ start ( ) 
 + { 
 + # Return 
 + # 0 if daemon has been started 
 + # 1 if daemon was already running 
 + # 2 if daemon could not be started 
 + is _ running & & return 1 
 + 
 + $ JSVC \ 
 + - home $ JAVA _ HOME \ 
 + - pidfile $ PIDFILE \ 
 + - errfile " & 1 " \ 
 + - outfile / var / log / $ NAME / output . log \ 
 + - cp ` classpath ` \ 
 + - Xmx $ JVM _ MAX _ MEM \ 
 + - Xms $ JVM _ START _ MEM \ 
 + - Dcassandra \ 
 + - Dstorage - config = $ CONFDIR \ 
 + - Dcom . sun . management . jmxremote . port = 8080 \ 
 + - Dcom . sun . management . jmxremote . ssl = false \ 
 + - Dcom . sun . management . jmxremote . authenticate = false \ 
 + org . apache . cassandra . service . CassandraDaemon 
 + 
 + if ! is _ running ; then return 2 ; fi 
 + } 
 + 
 + # 
 + # Function that stops the daemon / service 
 + # 
 + do _ stop ( ) 
 + { 
 + 	 # Return 
 + 	 # 0 if daemon has been stopped 
 + 	 # 1 if daemon was already stopped 
 + 	 # 2 if daemon could not be stopped 
 + 	 # other if a failure occurred 
 + is _ running | | return 1 
 + $ JSVC - stop - home $ JAVA _ HOME - pidfile $ PIDFILE \ 
 + org . apache . cassandra . service . CassandraJsvcDaemon 
 + is _ running & & return 2 | | return 0 
 + } 
 + 
 + case " $ 1 " in 
 + start ) 
 + 	 [ " $ VERBOSE " ! = no ] & & log _ daemon _ msg " Starting $ DESC " " $ NAME " 
 + 	 do _ start 
 + 	 case " $ ? " in 
 + 	 	 0 | 1 ) [ " $ VERBOSE " ! = no ] & & log _ end _ msg 0 ; ; 
 + 	 	 2 ) [ " $ VERBOSE " ! = no ] & & log _ end _ msg 1 ; ; 
 + 	 esac 
 + 	 ; ; 
 + stop ) 
 + 	 [ " $ VERBOSE " ! = no ] & & log _ daemon _ msg " Stopping $ DESC " " $ NAME " 
 + 	 do _ stop 
 + 	 case " $ ? " in 
 + 	 	 0 | 1 ) [ " $ VERBOSE " ! = no ] & & log _ end _ msg 0 ; ; 
 + 	 	 2 ) [ " $ VERBOSE " ! = no ] & & log _ end _ msg 1 ; ; 
 + 	 esac 
 + 	 ; ; 
 + restart | force - reload ) 
 + 	 log _ daemon _ msg " Restarting $ DESC " " $ NAME " 
 + 	 do _ stop 
 + 	 case " $ ? " in 
 + 	 0 | 1 ) 
 + 	 	 do _ start 
 + 	 	 case " $ ? " in 
 + 	 	 	 0 ) log _ end _ msg 0 ; ; 
 + 	 	 	 1 ) log _ end _ msg 1 ; ; # Old process is still running 
 + 	 	 	 * ) log _ end _ msg 1 ; ; # Failed to start 
 + 	 	 esac 
 + 	 	 ; ; 
 + 	 * ) 
 + 	 	 # Failed to stop 
 + 	 	 log _ end _ msg 1 
 + 	 	 ; ; 
 + 	 esac 
 + 	 ; ; 
 + * ) 
 + 	 echo " Usage : $ SCRIPTNAME { start | stop | restart | force - reload } " > & 2 
 + 	 exit 3 
 + 	 ; ; 
 + esac 
 + 
 + : 
 + 
 + # vi : ai sw = 4 ts = 4 tw = 0 et 
 diff - - git a / debian / rules b / debian / rules 
 new file mode 100755 
 index 0000000 . . 903b090 
 - - - / dev / null 
 + + + b / debian / rules 
 @ @ - 0 , 0 + 1 , 63 @ @ 
 + # ! / usr / bin / make - f 
 + 
 + # Uncomment to enable verbose mode . 
 + # export DH _ VERBOSE = 1 
 + 
 + ANT = / usr / bin / ant 
 + VERSION = $ ( shell dpkg - parsechangelog | sed - ne ' s / ^ Version : \ ( . * \ ) - . * / \ 1 / p ' ) 
 + 
 + test : 
 + 	 dh _ testdir 
 + 	 $ ( ANT ) test 
 + 
 + clean : 
 + 	 dh _ testdir 
 + 	 dh _ testroot 
 + 	 $ ( ANT ) clean 
 + 	 rm - f build - stamp build . properties 
 + 	 rm - rf bin / java 
 + 	 find - name " * . pyc " - exec rm ' { } ' ' ; ' 
 + 	 find - name " * py . class " - exec rm ' { } ' ' ; ' 
 + 	 dh _ clean 
 + 
 + build : build - stamp 
 + build - stamp : 
 + 	 dh _ testdir 
 + 	 printf " version = % s " $ ( VERSION ) > build . properties 
 + 
 + 	 $ ( ANT ) jar 
 + 
 + 	 touch build - stamp 
 + 
 + install : build 
 + 	 dh _ testdir 
 + 	 dh _ testroot 
 + 	 dh _ installdirs 
 + 	 dh _ install 
 + 
 + 	 # Copy in the jar and symlink to something stable 
 + 	 dh _ install build / apache - cassandra - incubating - $ ( VERSION ) . jar \ 
 + 	 	 usr / share / cassandra 
 + 	 dh _ link usr / share / cassandra / apache - cassandra - incubating - $ ( VERSION ) . jar \ 
 + 	 	 usr / share / cassandra / apache - cassandra - incubating . jar 
 + 
 + # Build architecture - independent files here . 
 + binary - indep : build install 
 + 	 dh _ testdir 
 + 	 dh _ testroot 
 + 	 dh _ installchangelogs 
 + 	 dh _ installinit 
 + 	 dh _ installdocs README . txt DISCLAIMER . txt CHANGES . txt NEWS . txt 
 + 	 dh _ compress 
 + 	 dh _ fixperms 
 + 	 dh _ installdeb 
 + 	 dh _ gencontrol 
 + 	 dh _ md5sums 
 + 	 dh _ builddeb 
 + 
 + # Build architecture - dependent files here . 
 + binary - arch : build install 
 + # We have nothing to do by default . 
 + 
 + binary : binary - indep binary - arch 
 + . PHONY : build clean binary - indep binary - arch binary install
