BLEU SCORE: 0.037477767366779206

TEST MSG: Avoid special casing received / expected counts in CAS timeout exceptions
GENERATED MSG: getValidColumnFamilies adds 2I if requested and no ks / cf specified

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 2bbf809 . . ac8c428 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 5 , 6 + 5 , 7 @ @ <nl> * Allow specifying custom secondary index options in CQL3 ( CASSANDRA - 6480 ) <nl> * Improve replica pinning for cache efficiency in DES ( CASSANDRA - 6485 ) <nl> * Fix LOCAL _ SERIAL from thrift ( CASSANDRA - 6584 ) <nl> + * Don ' t special case received counts in CAS timeout exceptions ( CASSANDRA - 6595 ) <nl> Merged from 1 . 2 : <nl> * fsync compression metadata ( CASSANDRA - 6531 ) <nl> * Validate CF existence on execution for prepared statement ( CASSANDRA - 6535 ) <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageProxy . java b / src / java / org / apache / cassandra / service / StorageProxy . java <nl> index c8ee297 . . 5671655 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageProxy . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageProxy . java <nl> @ @ - 271 , 7 + 271 , 7 @ @ public class StorageProxy implements StorageProxyMBean <nl> / / continue to retry <nl> } <nl> <nl> - throw new WriteTimeoutException ( WriteType . CAS , consistencyForPaxos , - 1 , - 1 ) ; <nl> + throw new WriteTimeoutException ( WriteType . CAS , consistencyForPaxos , 0 , consistencyForPaxos . blockFor ( Keyspace . open ( keyspaceName ) ) ) ; <nl> } <nl> <nl> private static boolean hasLiveColumns ( ColumnFamily cf , long now ) <nl> @ @ - 413 , 7 + 413 , 7 @ @ public class StorageProxy implements StorageProxyMBean <nl> return ballot ; <nl> } <nl> <nl> - throw new WriteTimeoutException ( WriteType . CAS , consistencyForPaxos , - 1 , - 1 ) ; <nl> + throw new WriteTimeoutException ( WriteType . CAS , consistencyForPaxos , 0 , consistencyForPaxos . blockFor ( Keyspace . open ( metadata . ksName ) ) ) ; <nl> } <nl> <nl> / * * <nl> @ @ - 1179 , 7 + 1179 , 7 @ @ public class StorageProxy implements StorageProxyMBean <nl> } <nl> catch ( WriteTimeoutException e ) <nl> { <nl> - throw new ReadTimeoutException ( consistency _ level , - 1 , - 1 , false ) ; <nl> + throw new ReadTimeoutException ( consistency _ level , 0 , consistency _ level . blockFor ( Keyspace . open ( command . ksName ) ) , false ) ; <nl> } <nl> <nl> rows = fetchRows ( commands , ConsistencyLevel . QUORUM ) ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 2bbf809 . . ac8c428 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 5 , 6 + 5 , 7 @ @ 
 * Allow specifying custom secondary index options in CQL3 ( CASSANDRA - 6480 ) 
 * Improve replica pinning for cache efficiency in DES ( CASSANDRA - 6485 ) 
 * Fix LOCAL _ SERIAL from thrift ( CASSANDRA - 6584 ) 
 + * Don ' t special case received counts in CAS timeout exceptions ( CASSANDRA - 6595 ) 
 Merged from 1 . 2 : 
 * fsync compression metadata ( CASSANDRA - 6531 ) 
 * Validate CF existence on execution for prepared statement ( CASSANDRA - 6535 ) 
 diff - - git a / src / java / org / apache / cassandra / service / StorageProxy . java b / src / java / org / apache / cassandra / service / StorageProxy . java 
 index c8ee297 . . 5671655 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageProxy . java 
 + + + b / src / java / org / apache / cassandra / service / StorageProxy . java 
 @ @ - 271 , 7 + 271 , 7 @ @ public class StorageProxy implements StorageProxyMBean 
 / / continue to retry 
 } 
 
 - throw new WriteTimeoutException ( WriteType . CAS , consistencyForPaxos , - 1 , - 1 ) ; 
 + throw new WriteTimeoutException ( WriteType . CAS , consistencyForPaxos , 0 , consistencyForPaxos . blockFor ( Keyspace . open ( keyspaceName ) ) ) ; 
 } 
 
 private static boolean hasLiveColumns ( ColumnFamily cf , long now ) 
 @ @ - 413 , 7 + 413 , 7 @ @ public class StorageProxy implements StorageProxyMBean 
 return ballot ; 
 } 
 
 - throw new WriteTimeoutException ( WriteType . CAS , consistencyForPaxos , - 1 , - 1 ) ; 
 + throw new WriteTimeoutException ( WriteType . CAS , consistencyForPaxos , 0 , consistencyForPaxos . blockFor ( Keyspace . open ( metadata . ksName ) ) ) ; 
 } 
 
 / * * 
 @ @ - 1179 , 7 + 1179 , 7 @ @ public class StorageProxy implements StorageProxyMBean 
 } 
 catch ( WriteTimeoutException e ) 
 { 
 - throw new ReadTimeoutException ( consistency _ level , - 1 , - 1 , false ) ; 
 + throw new ReadTimeoutException ( consistency _ level , 0 , consistency _ level . blockFor ( Keyspace . open ( command . ksName ) ) , false ) ; 
 } 
 
 rows = fetchRows ( commands , ConsistencyLevel . QUORUM ) ;

NEAREST DIFF:
ELIMINATEDSENTENCE
