BLEU SCORE: 0.02383853510228548

TEST MSG: Document the lack of thread - safety in CQLSSTableWriter
GENERATED MSG: Fix build

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> index ae8a392 . . 838ea48 100644 <nl> - - - a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> + + + b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java <nl> @ @ - 74 , 6 + 74 , 10 @ @ import org . apache . cassandra . utils . Pair ; <nl> * / / Close the writer , finalizing the sstable <nl> * writer . close ( ) ; <nl> * < / pre > <nl> + * <nl> + * Please note that { @ code CQLSSTableWriter } is < b > not < / b > thread - safe ( multiple threads cannot access the <nl> + * same instance ) . It is however safe to use multiple instances in parallel ( even if those instance write <nl> + * sstables for the same table ) . <nl> * / <nl> public class CQLSSTableWriter implements Closeable <nl> {
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index cc8831e . . def5d31 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 23 , 6 + 23 , 7 @ @ <nl> ( CASSANDRA - 3170 ) <nl> * fix changing durable _ writes keyspace option during CF creation <nl> ( CASSANDRA - 3292 ) <nl> + * correct dropped messages logging ( CASSANDRA - 3377 ) <nl> <nl> <nl> 0 . 8 . 7 <nl> diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java <nl> index f70690b . . 55abe9d 100644 <nl> - - - a / src / java / org / apache / cassandra / net / MessagingService . java <nl> + + + b / src / java / org / apache / cassandra / net / MessagingService . java <nl> @ @ - 609 , 7 + 609 , 8 @ @ public final class MessagingService implements MessagingServiceMBean <nl> if ( recent > 0 ) <nl> { <nl> logTpstats = true ; <nl> - logger _ . info ( " { } { } messages dropped in server lifetime " , recent , verb ) ; <nl> + logger _ . info ( " { } { } messages dropped in last { } ms " , <nl> + new Object [ ] { recent , verb , LOG _ DROPPED _ INTERVAL _ IN _ MS } ) ; <nl> lastDroppedInternal . put ( verb , dropped . get ( ) ) ; <nl> } <nl> }

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 index ae8a392 . . 838ea48 100644 
 - - - a / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 + + + b / src / java / org / apache / cassandra / io / sstable / CQLSSTableWriter . java 
 @ @ - 74 , 6 + 74 , 10 @ @ import org . apache . cassandra . utils . Pair ; 
 * / / Close the writer , finalizing the sstable 
 * writer . close ( ) ; 
 * < / pre > 
 + * 
 + * Please note that { @ code CQLSSTableWriter } is < b > not < / b > thread - safe ( multiple threads cannot access the 
 + * same instance ) . It is however safe to use multiple instances in parallel ( even if those instance write 
 + * sstables for the same table ) . 
 * / 
 public class CQLSSTableWriter implements Closeable 
 {

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index cc8831e . . def5d31 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 23 , 6 + 23 , 7 @ @ 
 ( CASSANDRA - 3170 ) 
 * fix changing durable _ writes keyspace option during CF creation 
 ( CASSANDRA - 3292 ) 
 + * correct dropped messages logging ( CASSANDRA - 3377 ) 
 
 
 0 . 8 . 7 
 diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java 
 index f70690b . . 55abe9d 100644 
 - - - a / src / java / org / apache / cassandra / net / MessagingService . java 
 + + + b / src / java / org / apache / cassandra / net / MessagingService . java 
 @ @ - 609 , 7 + 609 , 8 @ @ public final class MessagingService implements MessagingServiceMBean 
 if ( recent > 0 ) 
 { 
 logTpstats = true ; 
 - logger _ . info ( " { } { } messages dropped in server lifetime " , recent , verb ) ; 
 + logger _ . info ( " { } { } messages dropped in last { } ms " , 
 + new Object [ ] { recent , verb , LOG _ DROPPED _ INTERVAL _ IN _ MS } ) ; 
 lastDroppedInternal . put ( verb , dropped . get ( ) ) ; 
 } 
 }
