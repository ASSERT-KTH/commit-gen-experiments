BLEU SCORE: 1.0

TEST MSG: nodetool no longer shows node joining
GENERATED MSG: nodetool no longer shows node joining

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / tools / NodeCmd . java b / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> index e14ba1a . . 75af915 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> + + + b / src / java / org / apache / cassandra / tools / NodeCmd . java <nl> @ @ - 328 , 42 + 328 , 49 @ @ public class NodeCmd <nl> else <nl> outs . println ( ) ; <nl> <nl> - for ( Map . Entry < InetAddress , Float > entry : filteredOwnerships . entrySet ( ) ) <nl> + for ( Map . Entry < String , String > entry : endpointsToTokens . entries ( ) ) <nl> { <nl> - String endpoint = entry . getKey ( ) . getHostAddress ( ) ; <nl> - for ( String token : endpointsToTokens . get ( endpoint ) ) <nl> + String endpoint = entry . getKey ( ) ; <nl> + String rack ; <nl> + try <nl> { <nl> - String rack ; <nl> - try <nl> - { <nl> - rack = probe . getEndpointSnitchInfoProxy ( ) . getRack ( endpoint ) ; <nl> - } <nl> - catch ( UnknownHostException e ) <nl> - { <nl> - rack = " Unknown " ; <nl> - } <nl> + rack = probe . getEndpointSnitchInfoProxy ( ) . getRack ( endpoint ) ; <nl> + } <nl> + catch ( UnknownHostException e ) <nl> + { <nl> + rack = " Unknown " ; <nl> + } <nl> <nl> - String status = liveNodes . contains ( endpoint ) <nl> - ? " Up " <nl> - : deadNodes . contains ( endpoint ) <nl> - ? " Down " <nl> - : " ? " ; <nl> - <nl> - String state = " Normal " ; <nl> - <nl> - if ( joiningNodes . contains ( endpoint ) ) <nl> - state = " Joining " ; <nl> - else if ( leavingNodes . contains ( endpoint ) ) <nl> - state = " Leaving " ; <nl> - else if ( movingNodes . contains ( endpoint ) ) <nl> - state = " Moving " ; <nl> - <nl> - String load = loadMap . containsKey ( endpoint ) <nl> - ? loadMap . get ( endpoint ) <nl> - : " ? " ; <nl> - String owns = new DecimalFormat ( " # # 0 . 00 % " ) . format ( entry . getValue ( ) ) ; <nl> - outs . printf ( format , endpoint , rack , status , state , load , owns , token ) ; <nl> + String status = liveNodes . contains ( endpoint ) <nl> + ? " Up " <nl> + : deadNodes . contains ( endpoint ) <nl> + ? " Down " <nl> + : " ? " ; <nl> + <nl> + String state = " Normal " ; <nl> + <nl> + if ( joiningNodes . contains ( endpoint ) ) <nl> + state = " Joining " ; <nl> + else if ( leavingNodes . contains ( endpoint ) ) <nl> + state = " Leaving " ; <nl> + else if ( movingNodes . contains ( endpoint ) ) <nl> + state = " Moving " ; <nl> + <nl> + String load = loadMap . containsKey ( endpoint ) <nl> + ? loadMap . get ( endpoint ) <nl> + : " ? " ; <nl> + String owns ; <nl> + try <nl> + { <nl> + InetAddress ep = InetAddress . getByName ( endpoint ) ; <nl> + Float percent = filteredOwnerships . get ( ep ) ; <nl> + owns = ( percent ! = null ) ? new DecimalFormat ( " # # 0 . 00 % " ) . format ( percent ) : " ? " ; <nl> + } <nl> + catch ( UnknownHostException e ) <nl> + { <nl> + throw new RuntimeException ( e ) ; <nl> } <nl> + outs . printf ( format , endpoint , rack , status , state , load , owns , entry . getValue ( ) ) ; <nl> } <nl> outs . println ( ) ; <nl> }
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / tools / NodeCmd . java b / src / java / org / apache / cassandra / tools / NodeCmd . java 
 index e14ba1a . . 75af915 100644 
 - - - a / src / java / org / apache / cassandra / tools / NodeCmd . java 
 + + + b / src / java / org / apache / cassandra / tools / NodeCmd . java 
 @ @ - 328 , 42 + 328 , 49 @ @ public class NodeCmd 
 else 
 outs . println ( ) ; 
 
 - for ( Map . Entry < InetAddress , Float > entry : filteredOwnerships . entrySet ( ) ) 
 + for ( Map . Entry < String , String > entry : endpointsToTokens . entries ( ) ) 
 { 
 - String endpoint = entry . getKey ( ) . getHostAddress ( ) ; 
 - for ( String token : endpointsToTokens . get ( endpoint ) ) 
 + String endpoint = entry . getKey ( ) ; 
 + String rack ; 
 + try 
 { 
 - String rack ; 
 - try 
 - { 
 - rack = probe . getEndpointSnitchInfoProxy ( ) . getRack ( endpoint ) ; 
 - } 
 - catch ( UnknownHostException e ) 
 - { 
 - rack = " Unknown " ; 
 - } 
 + rack = probe . getEndpointSnitchInfoProxy ( ) . getRack ( endpoint ) ; 
 + } 
 + catch ( UnknownHostException e ) 
 + { 
 + rack = " Unknown " ; 
 + } 
 
 - String status = liveNodes . contains ( endpoint ) 
 - ? " Up " 
 - : deadNodes . contains ( endpoint ) 
 - ? " Down " 
 - : " ? " ; 
 - 
 - String state = " Normal " ; 
 - 
 - if ( joiningNodes . contains ( endpoint ) ) 
 - state = " Joining " ; 
 - else if ( leavingNodes . contains ( endpoint ) ) 
 - state = " Leaving " ; 
 - else if ( movingNodes . contains ( endpoint ) ) 
 - state = " Moving " ; 
 - 
 - String load = loadMap . containsKey ( endpoint ) 
 - ? loadMap . get ( endpoint ) 
 - : " ? " ; 
 - String owns = new DecimalFormat ( " # # 0 . 00 % " ) . format ( entry . getValue ( ) ) ; 
 - outs . printf ( format , endpoint , rack , status , state , load , owns , token ) ; 
 + String status = liveNodes . contains ( endpoint ) 
 + ? " Up " 
 + : deadNodes . contains ( endpoint ) 
 + ? " Down " 
 + : " ? " ; 
 + 
 + String state = " Normal " ; 
 + 
 + if ( joiningNodes . contains ( endpoint ) ) 
 + state = " Joining " ; 
 + else if ( leavingNodes . contains ( endpoint ) ) 
 + state = " Leaving " ; 
 + else if ( movingNodes . contains ( endpoint ) ) 
 + state = " Moving " ; 
 + 
 + String load = loadMap . containsKey ( endpoint ) 
 + ? loadMap . get ( endpoint ) 
 + : " ? " ; 
 + String owns ; 
 + try 
 + { 
 + InetAddress ep = InetAddress . getByName ( endpoint ) ; 
 + Float percent = filteredOwnerships . get ( ep ) ; 
 + owns = ( percent ! = null ) ? new DecimalFormat ( " # # 0 . 00 % " ) . format ( percent ) : " ? " ; 
 + } 
 + catch ( UnknownHostException e ) 
 + { 
 + throw new RuntimeException ( e ) ; 
 } 
 + outs . printf ( format , endpoint , rack , status , state , load , owns , entry . getValue ( ) ) ; 
 } 
 outs . println ( ) ; 
 }

NEAREST DIFF:
ELIMINATEDSENTENCE
