BLEU SCORE: 0.01025270094846709

TEST MSG: Fix RecoveryManagerTruncateTest failing in test - compression
GENERATED MSG: close temporary logWriters to avoid leaking FD . patch by Brandon Williams ; reviewed by jbellis for CASSANDRA - 313

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLog . java b / src / java / org / apache / cassandra / db / commitlog / CommitLog . java <nl> index 40b90ff . . 4e20a39 100644 <nl> - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLog . java <nl> + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLog . java <nl> @ @ - 370 , 6 + 370 , 7 @ @ public class CommitLog implements CommitLogMBean <nl> * / <nl> public void resetUnsafe ( ) <nl> { <nl> + sync ( true ) ; <nl> allocator . resetUnsafe ( ) ; <nl> } <nl>
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / CommitLog . java b / src / java / org / apache / cassandra / db / CommitLog . java <nl> index cc57d9b . . 1128baa 100644 <nl> - - - a / src / java / org / apache / cassandra / db / CommitLog . java <nl> + + + b / src / java / org / apache / cassandra / db / CommitLog . java <nl> @ @ - 215 , 6 + 215 , 7 @ @ public class CommitLog <nl> { <nl> IFileWriter logWriter = CommitLog . createWriter ( commitLogFileName ) ; <nl> writeCommitLogHeader ( logWriter , bytes ) ; <nl> + logWriter . close ( ) ; <nl> } <nl> <nl> / *

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLog . java b / src / java / org / apache / cassandra / db / commitlog / CommitLog . java 
 index 40b90ff . . 4e20a39 100644 
 - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLog . java 
 + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLog . java 
 @ @ - 370 , 6 + 370 , 7 @ @ public class CommitLog implements CommitLogMBean 
 * / 
 public void resetUnsafe ( ) 
 { 
 + sync ( true ) ; 
 allocator . resetUnsafe ( ) ; 
 } 


NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / CommitLog . java b / src / java / org / apache / cassandra / db / CommitLog . java 
 index cc57d9b . . 1128baa 100644 
 - - - a / src / java / org / apache / cassandra / db / CommitLog . java 
 + + + b / src / java / org / apache / cassandra / db / CommitLog . java 
 @ @ - 215 , 6 + 215 , 7 @ @ public class CommitLog 
 { 
 IFileWriter logWriter = CommitLog . createWriter ( commitLogFileName ) ; 
 writeCommitLogHeader ( logWriter , bytes ) ; 
 + logWriter . close ( ) ; 
 } 
 
 / *
