BLEU SCORE: 0.040583489434387374

TEST MSG: Undo CASSANDRA - 6707 from trunk
GENERATED MSG: Update NOTICE files

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / cql3 / statements / SelectStatement . java b / src / java / org / apache / cassandra / cql3 / statements / SelectStatement . java <nl> index 6b61ea5 . . e08b960 100644 <nl> - - - a / src / java / org / apache / cassandra / cql3 / statements / SelectStatement . java <nl> + + + b / src / java / org / apache / cassandra / cql3 / statements / SelectStatement . java <nl> @ @ - 166 , 7 + 166 , 7 @ @ public class SelectStatement implements CQLStatement , MeasurableForPreparedCache <nl> / / A count query will never be paged for the user , but we always page it internally to avoid OOM . <nl> / / If we user provided a pageSize we ' ll use that to page internally ( because why not ) , otherwise we use our default <nl> / / Note that if there are some nodes in the cluster with a version less than 2 . 0 , we can ' t use paging ( CASSANDRA - 6707 ) . <nl> - if ( parameters . isCount & & pageSize < = 0 & & MessagingService . instance ( ) . allNodesAtLeast20 ) <nl> + if ( parameters . isCount & & pageSize < = 0 ) <nl> pageSize = DEFAULT _ COUNT _ PAGE _ SIZE ; <nl> <nl> if ( pageSize < = 0 | | command = = null | | ! QueryPagers . mayNeedPaging ( command , pageSize ) ) <nl> diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java <nl> index 22bdbe8 . . 9713576 100644 <nl> - - - a / src / java / org / apache / cassandra / net / MessagingService . java <nl> + + + b / src / java / org / apache / cassandra / net / MessagingService . java <nl> @ @ - 74 , 8 + 74 , 6 @ @ public final class MessagingService implements MessagingServiceMBean <nl> public static final int VERSION _ 21 = 8 ; <nl> public static final int current _ version = VERSION _ 21 ; <nl> <nl> - public boolean allNodesAtLeast20 = true ; <nl> - <nl> / * * <nl> * we preface every message with this number so the recipient can validate the sender is sane <nl> * / <nl> @ @ - 745 , 36 + 743 , 14 @ @ public final class MessagingService implements MessagingServiceMBean <nl> public int setVersion ( InetAddress endpoint , int version ) <nl> { <nl> logger . debug ( " Setting version { } for { } " , version , endpoint ) ; <nl> - if ( version < VERSION _ 20 ) <nl> - allNodesAtLeast20 = false ; <nl> Integer v = versions . put ( endpoint , version ) ; <nl> - <nl> - / / if the version was increased to 2 . 0 or later , see if all nodes are > = 2 . 0 now <nl> - if ( v ! = null & & v < VERSION _ 20 & & version > = VERSION _ 20 ) <nl> - refreshAllNodesAtLeast20 ( ) ; <nl> - <nl> return v = = null ? version : v ; <nl> } <nl> <nl> public void resetVersion ( InetAddress endpoint ) <nl> { <nl> logger . debug ( " Reseting version for { } " , endpoint ) ; <nl> - Integer removed = versions . remove ( endpoint ) ; <nl> - if ( removed ! = null & & removed < = VERSION _ 20 ) <nl> - refreshAllNodesAtLeast20 ( ) ; <nl> - } <nl> - <nl> - private void refreshAllNodesAtLeast20 ( ) <nl> - { <nl> - for ( Integer version : versions . values ( ) ) <nl> - { <nl> - if ( version < VERSION _ 20 ) <nl> - { <nl> - allNodesAtLeast20 = false ; <nl> - return ; <nl> - } <nl> - } <nl> - allNodesAtLeast20 = true ; <nl> + versions . remove ( endpoint ) ; <nl> } <nl> <nl> public int getVersion ( InetAddress endpoint )
NEAREST DIFF (one line): diff - - git a / build . xml b / build . xml <nl> index 3eaca6b . . e9c7aac 100644 <nl> - - - a / build . xml <nl> + + + b / build . xml <nl> @ @ - 25 , 7 + 25 , 7 @ @ <nl> < property name = " debuglevel " value = " source , lines , vars " / > <nl> <nl> < ! - - default version and SCM information ( we need the default SCM info as people may checkout with git - svn ) - - > <nl> - < property name = " base . version " value = " 0 . 8 . 5 " / > <nl> + < property name = " base . version " value = " 0 . 8 . 6 " / > <nl> < property name = " scm . default . path " value = " cassandra / branches / cassandra - 0 . 8 " / > <nl> < property name = " scm . default . connection " value = " scm : svn : http : / / svn . apache . org / repos / asf / $ { scm . default . path } " / > <nl> < property name = " scm . default . developerConnection " value = " scm : svn : https : / / svn . apache . org / repos / asf / $ { scm . default . path } " / > <nl> diff - - git a / debian / changelog b / debian / changelog <nl> index ebdac2d . . 22fc73f 100644 <nl> - - - a / debian / changelog <nl> + + + b / debian / changelog <nl> @ @ - 1 , 3 + 1 , 9 @ @ <nl> + cassandra ( 0 . 8 . 6 ) unstable ; urgency = low <nl> + <nl> + * New release <nl> + <nl> + - - Sylvain Lebresne < slebresne @ apache . org > Wed , 14 Sep 2011 12 : 25 : 49 + 0200 <nl> + <nl> cassandra ( 0 . 8 . 5 ) unstable ; urgency = low <nl> <nl> * New release

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / cql3 / statements / SelectStatement . java b / src / java / org / apache / cassandra / cql3 / statements / SelectStatement . java 
 index 6b61ea5 . . e08b960 100644 
 - - - a / src / java / org / apache / cassandra / cql3 / statements / SelectStatement . java 
 + + + b / src / java / org / apache / cassandra / cql3 / statements / SelectStatement . java 
 @ @ - 166 , 7 + 166 , 7 @ @ public class SelectStatement implements CQLStatement , MeasurableForPreparedCache 
 / / A count query will never be paged for the user , but we always page it internally to avoid OOM . 
 / / If we user provided a pageSize we ' ll use that to page internally ( because why not ) , otherwise we use our default 
 / / Note that if there are some nodes in the cluster with a version less than 2 . 0 , we can ' t use paging ( CASSANDRA - 6707 ) . 
 - if ( parameters . isCount & & pageSize < = 0 & & MessagingService . instance ( ) . allNodesAtLeast20 ) 
 + if ( parameters . isCount & & pageSize < = 0 ) 
 pageSize = DEFAULT _ COUNT _ PAGE _ SIZE ; 
 
 if ( pageSize < = 0 | | command = = null | | ! QueryPagers . mayNeedPaging ( command , pageSize ) ) 
 diff - - git a / src / java / org / apache / cassandra / net / MessagingService . java b / src / java / org / apache / cassandra / net / MessagingService . java 
 index 22bdbe8 . . 9713576 100644 
 - - - a / src / java / org / apache / cassandra / net / MessagingService . java 
 + + + b / src / java / org / apache / cassandra / net / MessagingService . java 
 @ @ - 74 , 8 + 74 , 6 @ @ public final class MessagingService implements MessagingServiceMBean 
 public static final int VERSION _ 21 = 8 ; 
 public static final int current _ version = VERSION _ 21 ; 
 
 - public boolean allNodesAtLeast20 = true ; 
 - 
 / * * 
 * we preface every message with this number so the recipient can validate the sender is sane 
 * / 
 @ @ - 745 , 36 + 743 , 14 @ @ public final class MessagingService implements MessagingServiceMBean 
 public int setVersion ( InetAddress endpoint , int version ) 
 { 
 logger . debug ( " Setting version { } for { } " , version , endpoint ) ; 
 - if ( version < VERSION _ 20 ) 
 - allNodesAtLeast20 = false ; 
 Integer v = versions . put ( endpoint , version ) ; 
 - 
 - / / if the version was increased to 2 . 0 or later , see if all nodes are > = 2 . 0 now 
 - if ( v ! = null & & v < VERSION _ 20 & & version > = VERSION _ 20 ) 
 - refreshAllNodesAtLeast20 ( ) ; 
 - 
 return v = = null ? version : v ; 
 } 
 
 public void resetVersion ( InetAddress endpoint ) 
 { 
 logger . debug ( " Reseting version for { } " , endpoint ) ; 
 - Integer removed = versions . remove ( endpoint ) ; 
 - if ( removed ! = null & & removed < = VERSION _ 20 ) 
 - refreshAllNodesAtLeast20 ( ) ; 
 - } 
 - 
 - private void refreshAllNodesAtLeast20 ( ) 
 - { 
 - for ( Integer version : versions . values ( ) ) 
 - { 
 - if ( version < VERSION _ 20 ) 
 - { 
 - allNodesAtLeast20 = false ; 
 - return ; 
 - } 
 - } 
 - allNodesAtLeast20 = true ; 
 + versions . remove ( endpoint ) ; 
 } 
 
 public int getVersion ( InetAddress endpoint )

NEAREST DIFF:
diff - - git a / build . xml b / build . xml 
 index 3eaca6b . . e9c7aac 100644 
 - - - a / build . xml 
 + + + b / build . xml 
 @ @ - 25 , 7 + 25 , 7 @ @ 
 < property name = " debuglevel " value = " source , lines , vars " / > 
 
 < ! - - default version and SCM information ( we need the default SCM info as people may checkout with git - svn ) - - > 
 - < property name = " base . version " value = " 0 . 8 . 5 " / > 
 + < property name = " base . version " value = " 0 . 8 . 6 " / > 
 < property name = " scm . default . path " value = " cassandra / branches / cassandra - 0 . 8 " / > 
 < property name = " scm . default . connection " value = " scm : svn : http : / / svn . apache . org / repos / asf / $ { scm . default . path } " / > 
 < property name = " scm . default . developerConnection " value = " scm : svn : https : / / svn . apache . org / repos / asf / $ { scm . default . path } " / > 
 diff - - git a / debian / changelog b / debian / changelog 
 index ebdac2d . . 22fc73f 100644 
 - - - a / debian / changelog 
 + + + b / debian / changelog 
 @ @ - 1 , 3 + 1 , 9 @ @ 
 + cassandra ( 0 . 8 . 6 ) unstable ; urgency = low 
 + 
 + * New release 
 + 
 + - - Sylvain Lebresne < slebresne @ apache . org > Wed , 14 Sep 2011 12 : 25 : 49 + 0200 
 + 
 cassandra ( 0 . 8 . 5 ) unstable ; urgency = low 
 
 * New release
