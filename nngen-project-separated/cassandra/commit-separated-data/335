BLEU SCORE: 0.01222796968620182

TEST MSG: Allow to set batch _ size _ warn _ threshold _ in _ kb via JMX
GENERATED MSG: CASSANDRA - 7635 , rebase for 2 . 1

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index b4880fb . . 7189cb4 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 7 + 1 , 8 @ @ <nl> 4 . 0 <nl> + * batch _ size _ warn _ threshold _ in _ kb can now be set at runtime ( CASSANDRA - 13699 ) <nl> * Avoid always rebuilding secondary indexes at startup ( CASSANDRA - 13725 ) <nl> - * Upgrade JMH from 1 . 13 to 1 . 19 <nl> - * Upgrade SLF4J from 1 . 7 . 7 to 1 . 7 . 25 <nl> + * Upgrade JMH from 1 . 13 to 1 . 19 ( CASSANDRA - 13727 ) <nl> + * Upgrade SLF4J from 1 . 7 . 7 to 1 . 7 . 25 ( CASSANDRA - 12996 ) <nl> * Default for start _ native _ transport now true if not set in config ( CASSANDRA - 13656 ) <nl> * Don ' t add localhost to the graph when calculating where to stream from ( CASSANDRA - 13583 ) <nl> * Allow skipping equality - restricted clustering columns in ORDER BY clause ( CASSANDRA - 10271 ) <nl> diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> index e369982 . . 208605d 100644 <nl> - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> @ @ - 1157 , 6 + 1157 , 11 @ @ public class DatabaseDescriptor <nl> return conf . batch _ size _ warn _ threshold _ in _ kb * 1024 ; <nl> } <nl> <nl> + public static int getBatchSizeWarnThresholdInKB ( ) <nl> + { <nl> + return conf . batch _ size _ warn _ threshold _ in _ kb ; <nl> + } <nl> + <nl> public static long getBatchSizeFailThreshold ( ) <nl> { <nl> return conf . batch _ size _ fail _ threshold _ in _ kb * 1024L ; <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index a3d3791 . . 9070e89 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 4982 , 6 + 4982 , 18 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> public void setBatchSizeFailureThreshold ( int threshold ) <nl> { <nl> DatabaseDescriptor . setBatchSizeFailThresholdInKB ( threshold ) ; <nl> + logger . info ( " Updated batch _ size _ fail _ threshold _ in _ kb to { } " , threshold ) ; <nl> + } <nl> + <nl> + public int getBatchSizeWarnThreshold ( ) <nl> + { <nl> + return DatabaseDescriptor . getBatchSizeWarnThresholdInKB ( ) ; <nl> + } <nl> + <nl> + public void setBatchSizeWarnThreshold ( int threshold ) <nl> + { <nl> + DatabaseDescriptor . setBatchSizeWarnThresholdInKB ( threshold ) ; <nl> + logger . info ( " Updated batch _ size _ warn _ threshold _ in _ kb to { } " , threshold ) ; <nl> } <nl> <nl> public void setHintedHandoffThrottleInKB ( int throttleInKB ) <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageServiceMBean . java b / src / java / org / apache / cassandra / service / StorageServiceMBean . java <nl> index bd8aca6 . . 36c43fd 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageServiceMBean . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageServiceMBean . java <nl> @ @ - 620 , 6 + 620 , 11 @ @ public interface StorageServiceMBean extends NotificationEmitter <nl> / * * Sets the threshold for rejecting queries due to a large batch size * / <nl> public void setBatchSizeFailureThreshold ( int batchSizeDebugThreshold ) ; <nl> <nl> + / * * Returns the threshold for warning queries due to a large batch size * / <nl> + public int getBatchSizeWarnThreshold ( ) ; <nl> + / * * Sets the threshold for warning queries due to a large batch size * / <nl> + public void setBatchSizeWarnThreshold ( int batchSizeDebugThreshold ) ; <nl> + <nl> / * * Sets the hinted handoff throttle in kb per second , per delivery thread . * / <nl> public void setHintedHandoffThrottleInKB ( int throttleInKB ) ; <nl>
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index b4880fb . . 7189cb4 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 7 + 1 , 8 @ @ 
 4 . 0 
 + * batch _ size _ warn _ threshold _ in _ kb can now be set at runtime ( CASSANDRA - 13699 ) 
 * Avoid always rebuilding secondary indexes at startup ( CASSANDRA - 13725 ) 
 - * Upgrade JMH from 1 . 13 to 1 . 19 
 - * Upgrade SLF4J from 1 . 7 . 7 to 1 . 7 . 25 
 + * Upgrade JMH from 1 . 13 to 1 . 19 ( CASSANDRA - 13727 ) 
 + * Upgrade SLF4J from 1 . 7 . 7 to 1 . 7 . 25 ( CASSANDRA - 12996 ) 
 * Default for start _ native _ transport now true if not set in config ( CASSANDRA - 13656 ) 
 * Don ' t add localhost to the graph when calculating where to stream from ( CASSANDRA - 13583 ) 
 * Allow skipping equality - restricted clustering columns in ORDER BY clause ( CASSANDRA - 10271 ) 
 diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 index e369982 . . 208605d 100644 
 - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 @ @ - 1157 , 6 + 1157 , 11 @ @ public class DatabaseDescriptor 
 return conf . batch _ size _ warn _ threshold _ in _ kb * 1024 ; 
 } 
 
 + public static int getBatchSizeWarnThresholdInKB ( ) 
 + { 
 + return conf . batch _ size _ warn _ threshold _ in _ kb ; 
 + } 
 + 
 public static long getBatchSizeFailThreshold ( ) 
 { 
 return conf . batch _ size _ fail _ threshold _ in _ kb * 1024L ; 
 diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index a3d3791 . . 9070e89 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 4982 , 6 + 4982 , 18 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 public void setBatchSizeFailureThreshold ( int threshold ) 
 { 
 DatabaseDescriptor . setBatchSizeFailThresholdInKB ( threshold ) ; 
 + logger . info ( " Updated batch _ size _ fail _ threshold _ in _ kb to { } " , threshold ) ; 
 + } 
 + 
 + public int getBatchSizeWarnThreshold ( ) 
 + { 
 + return DatabaseDescriptor . getBatchSizeWarnThresholdInKB ( ) ; 
 + } 
 + 
 + public void setBatchSizeWarnThreshold ( int threshold ) 
 + { 
 + DatabaseDescriptor . setBatchSizeWarnThresholdInKB ( threshold ) ; 
 + logger . info ( " Updated batch _ size _ warn _ threshold _ in _ kb to { } " , threshold ) ; 
 } 
 
 public void setHintedHandoffThrottleInKB ( int throttleInKB ) 
 diff - - git a / src / java / org / apache / cassandra / service / StorageServiceMBean . java b / src / java / org / apache / cassandra / service / StorageServiceMBean . java 
 index bd8aca6 . . 36c43fd 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageServiceMBean . java 
 + + + b / src / java / org / apache / cassandra / service / StorageServiceMBean . java 
 @ @ - 620 , 6 + 620 , 11 @ @ public interface StorageServiceMBean extends NotificationEmitter 
 / * * Sets the threshold for rejecting queries due to a large batch size * / 
 public void setBatchSizeFailureThreshold ( int batchSizeDebugThreshold ) ; 
 
 + / * * Returns the threshold for warning queries due to a large batch size * / 
 + public int getBatchSizeWarnThreshold ( ) ; 
 + / * * Sets the threshold for warning queries due to a large batch size * / 
 + public void setBatchSizeWarnThreshold ( int batchSizeDebugThreshold ) ; 
 + 
 / * * Sets the hinted handoff throttle in kb per second , per delivery thread . * / 
 public void setHintedHandoffThrottleInKB ( int throttleInKB ) ; 


NEAREST DIFF:
ELIMINATEDSENTENCE
