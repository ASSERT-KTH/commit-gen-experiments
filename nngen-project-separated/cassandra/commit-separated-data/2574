BLEU SCORE: 0.08116697886877475

TEST MSG: getRecentLatency returns zero instead of infinity
GENERATED MSG: Fix LatencyMetrics returning infinity .

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / metrics / LatencyMetrics . java b / src / java / org / apache / cassandra / metrics / LatencyMetrics . java <nl> index b53449c . . b456e2a 100644 <nl> - - - a / src / java / org / apache / cassandra / metrics / LatencyMetrics . java <nl> + + + b / src / java / org / apache / cassandra / metrics / LatencyMetrics . java <nl> @ @ - 98 , 10 + 98 , 12 @ @ public class LatencyMetrics <nl> } <nl> <nl> @ Deprecated <nl> - public double getRecentLatency ( ) <nl> + public synchronized double getRecentLatency ( ) <nl> { <nl> long ops = latency . count ( ) ; <nl> long n = totalLatency . count ( ) ; <nl> + if ( ops = = lastOpCount ) <nl> + return 0 ; <nl> try <nl> { <nl> return ( ( double ) n - lastLatency ) / ( ops - lastOpCount ) ;
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / metrics / LatencyMetrics . java b / src / java / org / apache / cassandra / metrics / LatencyMetrics . java 
 index b53449c . . b456e2a 100644 
 - - - a / src / java / org / apache / cassandra / metrics / LatencyMetrics . java 
 + + + b / src / java / org / apache / cassandra / metrics / LatencyMetrics . java 
 @ @ - 98 , 10 + 98 , 12 @ @ public class LatencyMetrics 
 } 
 
 @ Deprecated 
 - public double getRecentLatency ( ) 
 + public synchronized double getRecentLatency ( ) 
 { 
 long ops = latency . count ( ) ; 
 long n = totalLatency . count ( ) ; 
 + if ( ops = = lastOpCount ) 
 + return 0 ; 
 try 
 { 
 return ( ( double ) n - lastLatency ) / ( ops - lastOpCount ) ;

NEAREST DIFF:
ELIMINATEDSENTENCE
