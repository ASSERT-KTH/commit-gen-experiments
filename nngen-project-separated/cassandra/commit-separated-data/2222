BLEU SCORE: 0.027611988917697356

TEST MSG: Prompt on missing dependency in cqlsh on Windows
GENERATED MSG: s / bash / sh /

TEST DIFF (one line): diff - - git a / bin / cqlsh b / bin / cqlsh <nl> index a4ad6d0 . . 5b63696 100755 <nl> - - - a / bin / cqlsh <nl> + + + b / bin / cqlsh <nl> @ @ - 728 , 6 + 728 , 8 @ @ class Shell ( cmd . Cmd ) : <nl> try : <nl> import readline <nl> except ImportError : <nl> + if platform . system ( ) = = ' Windows ' : <nl> + print " WARNING : pyreadline dependency missing . Install to enable tab completion . " <nl> pass <nl> else : <nl> old _ completer = readline . get _ completer ( )
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index d0e485b . . b622947 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 5 , 6 + 5 , 7 @ @ <nl> * Support TimeUUIDType column names in Stress . java tool ( CASSANDRA - 3541 ) <nl> * ( CQL ) INSERT / UPDATE / DELETE / TRUNCATE commands should allow CF names to <nl> be qualified by keyspace ( CASSANDRA - 3419 ) <nl> + * always remove endpoints from delevery queue in HH ( CASSANDRA - 3546 ) <nl> <nl> <nl> 1 . 0 . 5 <nl> diff - - git a / src / java / org / apache / cassandra / db / HintedHandOffManager . java b / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> index e9f8c8c . . 89c1862 100644 <nl> - - - a / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> + + + b / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> @ @ - 230 , 11 + 230 , 11 @ @ public class HintedHandOffManager implements HintedHandOffManagerMBean <nl> private void deliverHintsToEndpoint ( InetAddress endpoint ) throws IOException , DigestMismatchException , InvalidRequestException , TimeoutException , InterruptedException <nl> { <nl> ColumnFamilyStore hintStore = Table . open ( Table . SYSTEM _ TABLE ) . getColumnFamilyStore ( HINTS _ CF ) ; <nl> - if ( hintStore . isEmpty ( ) ) <nl> - return ; / / nothing to do , don ' t confuse users by logging a no - op handoff <nl> - <nl> try <nl> { <nl> + if ( hintStore . isEmpty ( ) ) <nl> + return ; / / nothing to do , don ' t confuse users by logging a no - op handoff <nl> + <nl> logger _ . debug ( " Checking remote ( { } ) schema before delivering hints " , endpoint ) ; <nl> int waited = waitForSchemaAgreement ( endpoint ) ; <nl> / / sleep a random amount to stagger handoff delivery from different replicas .

TEST DIFF:
diff - - git a / bin / cqlsh b / bin / cqlsh 
 index a4ad6d0 . . 5b63696 100755 
 - - - a / bin / cqlsh 
 + + + b / bin / cqlsh 
 @ @ - 728 , 6 + 728 , 8 @ @ class Shell ( cmd . Cmd ) : 
 try : 
 import readline 
 except ImportError : 
 + if platform . system ( ) = = ' Windows ' : 
 + print " WARNING : pyreadline dependency missing . Install to enable tab completion . " 
 pass 
 else : 
 old _ completer = readline . get _ completer ( )

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index d0e485b . . b622947 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 5 , 6 + 5 , 7 @ @ 
 * Support TimeUUIDType column names in Stress . java tool ( CASSANDRA - 3541 ) 
 * ( CQL ) INSERT / UPDATE / DELETE / TRUNCATE commands should allow CF names to 
 be qualified by keyspace ( CASSANDRA - 3419 ) 
 + * always remove endpoints from delevery queue in HH ( CASSANDRA - 3546 ) 
 
 
 1 . 0 . 5 
 diff - - git a / src / java / org / apache / cassandra / db / HintedHandOffManager . java b / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 index e9f8c8c . . 89c1862 100644 
 - - - a / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 + + + b / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 @ @ - 230 , 11 + 230 , 11 @ @ public class HintedHandOffManager implements HintedHandOffManagerMBean 
 private void deliverHintsToEndpoint ( InetAddress endpoint ) throws IOException , DigestMismatchException , InvalidRequestException , TimeoutException , InterruptedException 
 { 
 ColumnFamilyStore hintStore = Table . open ( Table . SYSTEM _ TABLE ) . getColumnFamilyStore ( HINTS _ CF ) ; 
 - if ( hintStore . isEmpty ( ) ) 
 - return ; / / nothing to do , don ' t confuse users by logging a no - op handoff 
 - 
 try 
 { 
 + if ( hintStore . isEmpty ( ) ) 
 + return ; / / nothing to do , don ' t confuse users by logging a no - op handoff 
 + 
 logger _ . debug ( " Checking remote ( { } ) schema before delivering hints " , endpoint ) ; 
 int waited = waitForSchemaAgreement ( endpoint ) ; 
 / / sleep a random amount to stagger handoff delivery from different replicas .
