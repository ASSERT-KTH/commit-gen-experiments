BLEU SCORE: 0.034089919964838566

TEST MSG: Better bootstrap failure message when blocked by ( potential ) range movement
GENERATED MSG: Don ' t allow simultaneous bootstrap when cassandra . consistent . rangemovement is true

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index 5403812 . . 4ede932 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 11 . 1 <nl> + * Better bootstrap failure message when blocked by ( potential ) range movement ( CASSANDRA - 13744 ) <nl> * " ignore " option is ignored in sstableloader ( CASSANDRA - 13721 ) <nl> * Deadlock in AbstractCommitLogSegmentManager ( CASSANDRA - 13652 ) <nl> * Duplicate the buffer before passing it to analyser in SASI operation ( CASSANDRA - 13512 ) <nl> diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index 29619c4 . . cbf69b4 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 899 , 7 + 899 , 10 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> tokenMetadata . getMovingEndpoints ( ) . size ( ) > 0 <nl> ) ) <nl> { <nl> - throw new UnsupportedOperationException ( " Other bootstrapping / leaving / moving nodes detected , cannot bootstrap while cassandra . consistent . rangemovement is true " ) ; <nl> + String bootstrapTokens = StringUtils . join ( tokenMetadata . getBootstrapTokens ( ) . valueSet ( ) , ' , ' ) ; <nl> + String leavingTokens = StringUtils . join ( tokenMetadata . getLeavingEndpoints ( ) , ' , ' ) ; <nl> + String movingTokens = StringUtils . join ( tokenMetadata . getMovingEndpoints ( ) . stream ( ) . map ( e - > e . right ) . toArray ( ) , ' , ' ) ; <nl> + throw new UnsupportedOperationException ( String . format ( " Other bootstrapping / leaving / moving nodes detected , cannot bootstrap while cassandra . consistent . rangemovement is true . Nodes detected , bootstrapping : % s ; leaving : % s ; moving : % s ; " , bootstrapTokens , leavingTokens , movingTokens ) ) ; <nl> } <nl> <nl> / / get bootstrap tokens
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index 5403812 . . 4ede932 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 11 . 1 
 + * Better bootstrap failure message when blocked by ( potential ) range movement ( CASSANDRA - 13744 ) 
 * " ignore " option is ignored in sstableloader ( CASSANDRA - 13721 ) 
 * Deadlock in AbstractCommitLogSegmentManager ( CASSANDRA - 13652 ) 
 * Duplicate the buffer before passing it to analyser in SASI operation ( CASSANDRA - 13512 ) 
 diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index 29619c4 . . cbf69b4 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 899 , 7 + 899 , 10 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 tokenMetadata . getMovingEndpoints ( ) . size ( ) > 0 
 ) ) 
 { 
 - throw new UnsupportedOperationException ( " Other bootstrapping / leaving / moving nodes detected , cannot bootstrap while cassandra . consistent . rangemovement is true " ) ; 
 + String bootstrapTokens = StringUtils . join ( tokenMetadata . getBootstrapTokens ( ) . valueSet ( ) , ' , ' ) ; 
 + String leavingTokens = StringUtils . join ( tokenMetadata . getLeavingEndpoints ( ) , ' , ' ) ; 
 + String movingTokens = StringUtils . join ( tokenMetadata . getMovingEndpoints ( ) . stream ( ) . map ( e - > e . right ) . toArray ( ) , ' , ' ) ; 
 + throw new UnsupportedOperationException ( String . format ( " Other bootstrapping / leaving / moving nodes detected , cannot bootstrap while cassandra . consistent . rangemovement is true . Nodes detected , bootstrapping : % s ; leaving : % s ; moving : % s ; " , bootstrapTokens , leavingTokens , movingTokens ) ) ; 
 } 
 
 / / get bootstrap tokens

NEAREST DIFF:
ELIMINATEDSENTENCE
