BLEU SCORE: 0.03214954573057458

TEST MSG: Send ACK for non - local hints
GENERATED MSG: store hints in the coordinator node instead of in the closest replica

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index b8250ab . . c7e4114 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 3 . 10 <nl> + * Fix TestHintedHandoff . hintedhandoff _ decom _ test ( CASSANDRA - 13058 ) <nl> * Fixed query monitoring for range queries ( CASSANDRA - 13050 ) <nl> * Remove outboundBindAny configuration property ( CASSANDRA - 12673 ) <nl> * Use correct bounds for all - data range when filtering ( CASSANDRA - 12666 ) <nl> diff - - git a / src / java / org / apache / cassandra / hints / HintVerbHandler . java b / src / java / org / apache / cassandra / hints / HintVerbHandler . java <nl> index 2344715 . . 84abc90 100644 <nl> - - - a / src / java / org / apache / cassandra / hints / HintVerbHandler . java <nl> + + + b / src / java / org / apache / cassandra / hints / HintVerbHandler . java <nl> @ @ - 78 , 12 + 78 , 14 @ @ public final class HintVerbHandler implements IVerbHandler < HintMessage > <nl> / / the node is not the final destination of the hint ( must have gotten it from a decommissioning node ) , <nl> / / so just store it locally , to be delivered later . <nl> HintsService . instance . write ( hostId , hint ) ; <nl> + reply ( id , message . from ) ; <nl> } <nl> else if ( ! StorageProxy . instance . appliesLocally ( hint . mutation ) ) <nl> { <nl> / / the topology has changed , and we are no longer a replica of the mutation - since we don ' t know which node ( s ) <nl> / / it has been handed over to , re - address the hint to all replicas ; see CASSANDRA - 5902 . <nl> HintsService . instance . writeForAllReplicas ( hint ) ; <nl> + reply ( id , message . from ) ; <nl> } <nl> else <nl> {
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / net / IncomingTcpConnection . java b / src / java / org / apache / cassandra / net / IncomingTcpConnection . java <nl> index c99b74d . . 42588fd 100644 <nl> - - - a / src / java / org / apache / cassandra / net / IncomingTcpConnection . java <nl> + + + b / src / java / org / apache / cassandra / net / IncomingTcpConnection . java <nl> @ @ - 75 , 8 + 75 , 9 @ @ public class IncomingTcpConnection extends Thread <nl> } <nl> catch ( IOException e ) <nl> { <nl> + logger . debug ( " Incoming IOException " , e ) ; <nl> close ( ) ; <nl> - throw new IOError ( e ) ; <nl> + return ; <nl> } <nl> <nl> if ( version > MessagingService . version _ )

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index b8250ab . . c7e4114 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 3 . 10 
 + * Fix TestHintedHandoff . hintedhandoff _ decom _ test ( CASSANDRA - 13058 ) 
 * Fixed query monitoring for range queries ( CASSANDRA - 13050 ) 
 * Remove outboundBindAny configuration property ( CASSANDRA - 12673 ) 
 * Use correct bounds for all - data range when filtering ( CASSANDRA - 12666 ) 
 diff - - git a / src / java / org / apache / cassandra / hints / HintVerbHandler . java b / src / java / org / apache / cassandra / hints / HintVerbHandler . java 
 index 2344715 . . 84abc90 100644 
 - - - a / src / java / org / apache / cassandra / hints / HintVerbHandler . java 
 + + + b / src / java / org / apache / cassandra / hints / HintVerbHandler . java 
 @ @ - 78 , 12 + 78 , 14 @ @ public final class HintVerbHandler implements IVerbHandler < HintMessage > 
 / / the node is not the final destination of the hint ( must have gotten it from a decommissioning node ) , 
 / / so just store it locally , to be delivered later . 
 HintsService . instance . write ( hostId , hint ) ; 
 + reply ( id , message . from ) ; 
 } 
 else if ( ! StorageProxy . instance . appliesLocally ( hint . mutation ) ) 
 { 
 / / the topology has changed , and we are no longer a replica of the mutation - since we don ' t know which node ( s ) 
 / / it has been handed over to , re - address the hint to all replicas ; see CASSANDRA - 5902 . 
 HintsService . instance . writeForAllReplicas ( hint ) ; 
 + reply ( id , message . from ) ; 
 } 
 else 
 {

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / net / IncomingTcpConnection . java b / src / java / org / apache / cassandra / net / IncomingTcpConnection . java 
 index c99b74d . . 42588fd 100644 
 - - - a / src / java / org / apache / cassandra / net / IncomingTcpConnection . java 
 + + + b / src / java / org / apache / cassandra / net / IncomingTcpConnection . java 
 @ @ - 75 , 8 + 75 , 9 @ @ public class IncomingTcpConnection extends Thread 
 } 
 catch ( IOException e ) 
 { 
 + logger . debug ( " Incoming IOException " , e ) ; 
 close ( ) ; 
 - throw new IOError ( e ) ; 
 + return ; 
 } 
 
 if ( version > MessagingService . version _ )
