BLEU SCORE: 0.02139089632303349

TEST MSG: Fix broken JSON object comparison in test
GENERATED MSG: fix SSTableExportTest to work on Windows . patch by jbellis

TEST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / tools / SSTableExportTest . java b / test / unit / org / apache / cassandra / tools / SSTableExportTest . java <nl> index 023b5f3 . . 794d224 100644 <nl> - - - a / test / unit / org / apache / cassandra / tools / SSTableExportTest . java <nl> + + + b / test / unit / org / apache / cassandra / tools / SSTableExportTest . java <nl> @ @ - 91 , 7 + 91 , 7 @ @ public class SSTableExportTest <nl> { <nl> return bytesToHex ( ByteBufferUtil . bytes ( str ) ) ; <nl> } <nl> - <nl> + <nl> @ Test <nl> public void testEnumeratekeys ( ) throws IOException <nl> { <nl> @ @ - 123 , 7 + 123 , 7 @ @ public class SSTableExportTest <nl> char [ ] buf = new char [ ( int ) temp . length ( ) ] ; <nl> file . read ( buf ) ; <nl> String output = new String ( buf ) ; <nl> - <nl> + <nl> String sep = System . getProperty ( " line . separator " ) ; <nl> assert output . equals ( asHex ( " rowA " ) + sep + asHex ( " rowB " ) + sep ) : output ; <nl> } <nl> @ @ - 328 , 8 + 328 , 8 @ @ public class SSTableExportTest <nl> <nl> assertEquals ( <nl> " unexpected serialization format for topLevelDeletion " , <nl> - " { \ " markedForDeleteAt \ " : 0 , \ " localDeletionTime \ " : 0 } " , <nl> - serializedDeletionInfo . toJSONString ( ) ) ; <nl> + JSONValue . parse ( " { \ " markedForDeleteAt \ " : 0 , \ " localDeletionTime \ " : 0 } " ) , <nl> + serializedDeletionInfo ) ; <nl> <nl> / / check the colums are what we put in <nl> JSONArray cols = ( JSONArray ) row . get ( " cells " ) ;
NEAREST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / tools / SSTableExportTest . java b / test / unit / org / apache / cassandra / tools / SSTableExportTest . java <nl> index 07945c1 . . 6f52b7a 100644 <nl> - - - a / test / unit / org / apache / cassandra / tools / SSTableExportTest . java <nl> + + + b / test / unit / org / apache / cassandra / tools / SSTableExportTest . java <nl> @ @ - 78 , 8 + 78 , 9 @ @ public class SSTableExportTest <nl> char [ ] buf = new char [ ( int ) temp . length ( ) ] ; <nl> file . read ( buf ) ; <nl> String output = new String ( buf ) ; <nl> - <nl> - assert output . equals ( " rowA \ nrowB \ n " ) ; <nl> + <nl> + String sep = System . getProperty ( " line . separator " ) ; <nl> + assert output . equals ( " rowA " + sep + " rowB " + sep ) : output ; <nl> } <nl> <nl> @ Test

TEST DIFF:
diff - - git a / test / unit / org / apache / cassandra / tools / SSTableExportTest . java b / test / unit / org / apache / cassandra / tools / SSTableExportTest . java 
 index 023b5f3 . . 794d224 100644 
 - - - a / test / unit / org / apache / cassandra / tools / SSTableExportTest . java 
 + + + b / test / unit / org / apache / cassandra / tools / SSTableExportTest . java 
 @ @ - 91 , 7 + 91 , 7 @ @ public class SSTableExportTest 
 { 
 return bytesToHex ( ByteBufferUtil . bytes ( str ) ) ; 
 } 
 - 
 + 
 @ Test 
 public void testEnumeratekeys ( ) throws IOException 
 { 
 @ @ - 123 , 7 + 123 , 7 @ @ public class SSTableExportTest 
 char [ ] buf = new char [ ( int ) temp . length ( ) ] ; 
 file . read ( buf ) ; 
 String output = new String ( buf ) ; 
 - 
 + 
 String sep = System . getProperty ( " line . separator " ) ; 
 assert output . equals ( asHex ( " rowA " ) + sep + asHex ( " rowB " ) + sep ) : output ; 
 } 
 @ @ - 328 , 8 + 328 , 8 @ @ public class SSTableExportTest 
 
 assertEquals ( 
 " unexpected serialization format for topLevelDeletion " , 
 - " { \ " markedForDeleteAt \ " : 0 , \ " localDeletionTime \ " : 0 } " , 
 - serializedDeletionInfo . toJSONString ( ) ) ; 
 + JSONValue . parse ( " { \ " markedForDeleteAt \ " : 0 , \ " localDeletionTime \ " : 0 } " ) , 
 + serializedDeletionInfo ) ; 
 
 / / check the colums are what we put in 
 JSONArray cols = ( JSONArray ) row . get ( " cells " ) ;

NEAREST DIFF:
diff - - git a / test / unit / org / apache / cassandra / tools / SSTableExportTest . java b / test / unit / org / apache / cassandra / tools / SSTableExportTest . java 
 index 07945c1 . . 6f52b7a 100644 
 - - - a / test / unit / org / apache / cassandra / tools / SSTableExportTest . java 
 + + + b / test / unit / org / apache / cassandra / tools / SSTableExportTest . java 
 @ @ - 78 , 8 + 78 , 9 @ @ public class SSTableExportTest 
 char [ ] buf = new char [ ( int ) temp . length ( ) ] ; 
 file . read ( buf ) ; 
 String output = new String ( buf ) ; 
 - 
 - assert output . equals ( " rowA \ nrowB \ n " ) ; 
 + 
 + String sep = System . getProperty ( " line . separator " ) ; 
 + assert output . equals ( " rowA " + sep + " rowB " + sep ) : output ; 
 } 
 
 @ Test
