BLEU SCORE: 0.018738883683389617

TEST MSG: Avoid wrapping results with ThriftResultsMerger if command is not for thrift
GENERATED MSG: Apply Thrift ordering to legacy remote response where needed

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / ReadResponse . java b / src / java / org / apache / cassandra / db / ReadResponse . java <nl> index 12a200f . . 2304cb4 100644 <nl> - - - a / src / java / org / apache / cassandra / db / ReadResponse . java <nl> + + + b / src / java / org / apache / cassandra / db / ReadResponse . java <nl> @ @ - 282 , 12 + 282 , 17 @ @ public abstract class ReadResponse <nl> <nl> / / Pre - 3 . 0 , we didn ' t have a way to express exclusivity for non - composite comparators , so all slices were <nl> / / inclusive on both ends . If we have exclusive slice ends , we need to filter the results here . <nl> + UnfilteredRowIterator iterator ; <nl> if ( ! command . metadata ( ) . isCompound ( ) ) <nl> - return ThriftResultsMerger . maybeWrap ( <nl> - filter . filter ( partition . sliceableUnfilteredIterator ( command . columnFilter ( ) , filter . isReversed ( ) ) ) , command . nowInSec ( ) ) ; <nl> - <nl> - return ThriftResultsMerger . maybeWrap ( <nl> - partition . unfilteredIterator ( command . columnFilter ( ) , Slices . ALL , filter . isReversed ( ) ) , command . nowInSec ( ) ) ; <nl> + iterator = filter . filter ( partition . sliceableUnfilteredIterator ( command . columnFilter ( ) , filter . isReversed ( ) ) ) ; <nl> + else <nl> + iterator = partition . unfilteredIterator ( command . columnFilter ( ) , Slices . ALL , filter . isReversed ( ) ) ; <nl> + <nl> + / / Wrap results with a ThriftResultMerger only if they ' re intended for the thrift command . <nl> + if ( command . isForThrift ( ) ) <nl> + return ThriftResultsMerger . maybeWrap ( iterator , command . nowInSec ( ) ) ; <nl> + else <nl> + return iterator ; <nl> } <nl> } ; <nl> }
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / ReadResponse . java b / src / java / org / apache / cassandra / db / ReadResponse . java 
 index 12a200f . . 2304cb4 100644 
 - - - a / src / java / org / apache / cassandra / db / ReadResponse . java 
 + + + b / src / java / org / apache / cassandra / db / ReadResponse . java 
 @ @ - 282 , 12 + 282 , 17 @ @ public abstract class ReadResponse 
 
 / / Pre - 3 . 0 , we didn ' t have a way to express exclusivity for non - composite comparators , so all slices were 
 / / inclusive on both ends . If we have exclusive slice ends , we need to filter the results here . 
 + UnfilteredRowIterator iterator ; 
 if ( ! command . metadata ( ) . isCompound ( ) ) 
 - return ThriftResultsMerger . maybeWrap ( 
 - filter . filter ( partition . sliceableUnfilteredIterator ( command . columnFilter ( ) , filter . isReversed ( ) ) ) , command . nowInSec ( ) ) ; 
 - 
 - return ThriftResultsMerger . maybeWrap ( 
 - partition . unfilteredIterator ( command . columnFilter ( ) , Slices . ALL , filter . isReversed ( ) ) , command . nowInSec ( ) ) ; 
 + iterator = filter . filter ( partition . sliceableUnfilteredIterator ( command . columnFilter ( ) , filter . isReversed ( ) ) ) ; 
 + else 
 + iterator = partition . unfilteredIterator ( command . columnFilter ( ) , Slices . ALL , filter . isReversed ( ) ) ; 
 + 
 + / / Wrap results with a ThriftResultMerger only if they ' re intended for the thrift command . 
 + if ( command . isForThrift ( ) ) 
 + return ThriftResultsMerger . maybeWrap ( iterator , command . nowInSec ( ) ) ; 
 + else 
 + return iterator ; 
 } 
 } ; 
 }

NEAREST DIFF:
ELIMINATEDSENTENCE
