BLEU SCORE: 0.08116697886877475

TEST MSG: example / triggers build fail .
GENERATED MSG: merge from 1 . 2

TEST DIFF (one line): diff - - git a / examples / triggers / src / org / apache / cassandra / triggers / AuditTrigger . java b / examples / triggers / src / org / apache / cassandra / triggers / AuditTrigger . java <nl> index 7739450 . . 1efbf13 100644 <nl> - - - a / examples / triggers / src / org / apache / cassandra / triggers / AuditTrigger . java <nl> + + + b / examples / triggers / src / org / apache / cassandra / triggers / AuditTrigger . java <nl> @ @ - 22 , 10 + 22 , 11 @ @ import java . util . Collection ; <nl> import java . util . Collections ; <nl> import java . util . Properties ; <nl> <nl> + import org . apache . cassandra . config . CFMetaData ; <nl> import org . apache . cassandra . config . Schema ; <nl> import org . apache . cassandra . db . Mutation ; <nl> - import org . apache . cassandra . db . RowUpdateBuilder ; <nl> import org . apache . cassandra . db . partitions . Partition ; <nl> + import org . apache . cassandra . db . partitions . PartitionUpdate ; <nl> import org . apache . cassandra . io . util . FileUtils ; <nl> import org . apache . cassandra . utils . FBUtilities ; <nl> import org . apache . cassandra . utils . UUIDGen ; <nl> @ @ - 39 , 15 + 40 , 15 @ @ public class AuditTrigger implements ITrigger <nl> String auditKeyspace = properties . getProperty ( " keyspace " ) ; <nl> String auditTable = properties . getProperty ( " table " ) ; <nl> <nl> - RowUpdateBuilder audit = new RowUpdateBuilder ( Schema . instance . getCFMetaData ( auditKeyspace , auditTable ) , <nl> - FBUtilities . timestampMicros ( ) , <nl> - UUIDGen . getTimeUUID ( ) ) ; <nl> + CFMetaData metadata = Schema . instance . getCFMetaData ( auditKeyspace , auditTable ) ; <nl> + PartitionUpdate . SimpleBuilder audit = PartitionUpdate . simpleBuilder ( metadata , UUIDGen . getTimeUUID ( ) ) ; <nl> <nl> - audit . add ( " keyspace _ name " , update . metadata ( ) . ksName ) ; <nl> - audit . add ( " table _ name " , update . metadata ( ) . cfName ) ; <nl> - audit . add ( " primary _ key " , update . metadata ( ) . getKeyValidator ( ) . getString ( update . partitionKey ( ) . getKey ( ) ) ) ; <nl> + audit . row ( ) <nl> + . add ( " keyspace _ name " , update . metadata ( ) . ksName ) <nl> + . add ( " table _ name " , update . metadata ( ) . cfName ) <nl> + . add ( " primary _ key " , update . metadata ( ) . getKeyValidator ( ) . getString ( update . partitionKey ( ) . getKey ( ) ) ) ; <nl> <nl> - return Collections . singletonList ( audit . build ( ) ) ; <nl> + return Collections . singletonList ( audit . buildAsMutation ( ) ) ; <nl> } <nl> <nl> private static Properties loadProperties ( )
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index b935425 . . 7f5a487 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 1 . 2 - rc1 <nl> + * fix cqlsh rendering of blob fields ( CASSANDRA - 4970 ) <nl> * fix cqlsh DESCRIBE command ( CASSANDRA - 4913 ) <nl> * save truncation position in system table ( CASSANDRA - 4906 ) <nl> * Move CompressionMetadata off - heap ( CASSANDRA - 4937 ) <nl> diff - - git a / pylib / cqlshlib / formatting . py b / pylib / cqlshlib / formatting . py <nl> index d15c083 . . bab3506 100644 <nl> - - - a / pylib / cqlshlib / formatting . py <nl> + + + b / pylib / cqlshlib / formatting . py <nl> @ @ - 88 , 8 + 88 , 8 @ @ def formatter _ for ( typname ) : <nl> return f <nl> return registrator <nl> <nl> - @ formatter _ for ( ' bytes ' ) <nl> - def format _ value _ bytes ( val , colormap , * * _ ) : <nl> + @ formatter _ for ( ' blob ' ) <nl> + def format _ value _ blob ( val , colormap , * * _ ) : <nl> bval = ' ' . join ( ' % 02x ' % ord ( c ) for c in val ) <nl> return colorme ( bval , colormap , ' hex ' ) <nl>

TEST DIFF:
diff - - git a / examples / triggers / src / org / apache / cassandra / triggers / AuditTrigger . java b / examples / triggers / src / org / apache / cassandra / triggers / AuditTrigger . java 
 index 7739450 . . 1efbf13 100644 
 - - - a / examples / triggers / src / org / apache / cassandra / triggers / AuditTrigger . java 
 + + + b / examples / triggers / src / org / apache / cassandra / triggers / AuditTrigger . java 
 @ @ - 22 , 10 + 22 , 11 @ @ import java . util . Collection ; 
 import java . util . Collections ; 
 import java . util . Properties ; 
 
 + import org . apache . cassandra . config . CFMetaData ; 
 import org . apache . cassandra . config . Schema ; 
 import org . apache . cassandra . db . Mutation ; 
 - import org . apache . cassandra . db . RowUpdateBuilder ; 
 import org . apache . cassandra . db . partitions . Partition ; 
 + import org . apache . cassandra . db . partitions . PartitionUpdate ; 
 import org . apache . cassandra . io . util . FileUtils ; 
 import org . apache . cassandra . utils . FBUtilities ; 
 import org . apache . cassandra . utils . UUIDGen ; 
 @ @ - 39 , 15 + 40 , 15 @ @ public class AuditTrigger implements ITrigger 
 String auditKeyspace = properties . getProperty ( " keyspace " ) ; 
 String auditTable = properties . getProperty ( " table " ) ; 
 
 - RowUpdateBuilder audit = new RowUpdateBuilder ( Schema . instance . getCFMetaData ( auditKeyspace , auditTable ) , 
 - FBUtilities . timestampMicros ( ) , 
 - UUIDGen . getTimeUUID ( ) ) ; 
 + CFMetaData metadata = Schema . instance . getCFMetaData ( auditKeyspace , auditTable ) ; 
 + PartitionUpdate . SimpleBuilder audit = PartitionUpdate . simpleBuilder ( metadata , UUIDGen . getTimeUUID ( ) ) ; 
 
 - audit . add ( " keyspace _ name " , update . metadata ( ) . ksName ) ; 
 - audit . add ( " table _ name " , update . metadata ( ) . cfName ) ; 
 - audit . add ( " primary _ key " , update . metadata ( ) . getKeyValidator ( ) . getString ( update . partitionKey ( ) . getKey ( ) ) ) ; 
 + audit . row ( ) 
 + . add ( " keyspace _ name " , update . metadata ( ) . ksName ) 
 + . add ( " table _ name " , update . metadata ( ) . cfName ) 
 + . add ( " primary _ key " , update . metadata ( ) . getKeyValidator ( ) . getString ( update . partitionKey ( ) . getKey ( ) ) ) ; 
 
 - return Collections . singletonList ( audit . build ( ) ) ; 
 + return Collections . singletonList ( audit . buildAsMutation ( ) ) ; 
 } 
 
 private static Properties loadProperties ( )

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index b935425 . . 7f5a487 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 1 . 2 - rc1 
 + * fix cqlsh rendering of blob fields ( CASSANDRA - 4970 ) 
 * fix cqlsh DESCRIBE command ( CASSANDRA - 4913 ) 
 * save truncation position in system table ( CASSANDRA - 4906 ) 
 * Move CompressionMetadata off - heap ( CASSANDRA - 4937 ) 
 diff - - git a / pylib / cqlshlib / formatting . py b / pylib / cqlshlib / formatting . py 
 index d15c083 . . bab3506 100644 
 - - - a / pylib / cqlshlib / formatting . py 
 + + + b / pylib / cqlshlib / formatting . py 
 @ @ - 88 , 8 + 88 , 8 @ @ def formatter _ for ( typname ) : 
 return f 
 return registrator 
 
 - @ formatter _ for ( ' bytes ' ) 
 - def format _ value _ bytes ( val , colormap , * * _ ) : 
 + @ formatter _ for ( ' blob ' ) 
 + def format _ value _ blob ( val , colormap , * * _ ) : 
 bval = ' ' . join ( ' % 02x ' % ord ( c ) for c in val ) 
 return colorme ( bval , colormap , ' hex ' ) 

