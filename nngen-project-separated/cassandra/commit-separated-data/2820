BLEU SCORE: 0.035802380724744266

TEST MSG: Refuse snapshots during bootstrap .
GENERATED MSG: Increase CQL2 and CQL3 internals ' visibility

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index 043a1eb . . 7c8a257 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 2172 , 6 + 2172 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> * / <nl> public void takeSnapshot ( String tag , String . . . tableNames ) throws IOException <nl> { <nl> + if ( operationMode . equals ( Mode . JOINING ) ) <nl> + throw new IOException ( " Cannot snapshot until bootstrap completes " ) ; <nl> if ( tag = = null | | tag . equals ( " " ) ) <nl> throw new IOException ( " You must supply a snapshot name . " ) ; <nl> <nl> @ @ - 2207 , 6 + 2209 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> * / <nl> public void takeColumnFamilySnapshot ( String tableName , String columnFamilyName , String tag ) throws IOException <nl> { <nl> + if ( operationMode . equals ( Mode . JOINING ) ) <nl> + throw new IOException ( " Cannot snapshot until bootstrap completes " ) ; <nl> if ( tableName = = null ) <nl> throw new IOException ( " You must supply a table name " ) ; <nl>
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / service / CassandraDaemon . java b / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> index 448bb0a . . 5169d00 100644 <nl> - - - a / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> + + + b / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> @ @ - 108 , 7 + 108 , 7 @ @ public class CassandraDaemon <nl> File configFile = new File ( configFileName ) ; <nl> / / then try alternative approach which works for all hierarchical URLs with or without spaces <nl> if ( ! configFile . exists ( ) ) <nl> - configFileName = new File ( configLocation . toURI ( ) ) . getCanonicalPath ( ) ; <nl> + configFileName = new File ( configLocation . toURI ( ) ) . getPath ( ) ; <nl> } <nl> catch ( Exception e ) <nl> {

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index 043a1eb . . 7c8a257 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 2172 , 6 + 2172 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 * / 
 public void takeSnapshot ( String tag , String . . . tableNames ) throws IOException 
 { 
 + if ( operationMode . equals ( Mode . JOINING ) ) 
 + throw new IOException ( " Cannot snapshot until bootstrap completes " ) ; 
 if ( tag = = null | | tag . equals ( " " ) ) 
 throw new IOException ( " You must supply a snapshot name . " ) ; 
 
 @ @ - 2207 , 6 + 2209 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 * / 
 public void takeColumnFamilySnapshot ( String tableName , String columnFamilyName , String tag ) throws IOException 
 { 
 + if ( operationMode . equals ( Mode . JOINING ) ) 
 + throw new IOException ( " Cannot snapshot until bootstrap completes " ) ; 
 if ( tableName = = null ) 
 throw new IOException ( " You must supply a table name " ) ; 


NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / service / CassandraDaemon . java b / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 index 448bb0a . . 5169d00 100644 
 - - - a / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 + + + b / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 @ @ - 108 , 7 + 108 , 7 @ @ public class CassandraDaemon 
 File configFile = new File ( configFileName ) ; 
 / / then try alternative approach which works for all hierarchical URLs with or without spaces 
 if ( ! configFile . exists ( ) ) 
 - configFileName = new File ( configLocation . toURI ( ) ) . getCanonicalPath ( ) ; 
 + configFileName = new File ( configLocation . toURI ( ) ) . getPath ( ) ; 
 } 
 catch ( Exception e ) 
 {
