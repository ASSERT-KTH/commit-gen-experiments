BLEU SCORE: 0.035802380724744266

TEST MSG: Revert " fix tests "
GENERATED MSG: catch Throwable on startup rather than Exception

TEST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / service / LeaveAndBootstrapTest . java b / test / unit / org / apache / cassandra / service / LeaveAndBootstrapTest . java <nl> index 4c1421a . . a9d8057 100644 <nl> - - - a / test / unit / org / apache / cassandra / service / LeaveAndBootstrapTest . java <nl> + + + b / test / unit / org / apache / cassandra / service / LeaveAndBootstrapTest . java <nl> @ @ - 24 , 7 + 24 , 7 @ @ import java . net . InetAddress ; <nl> import java . net . UnknownHostException ; <nl> import java . util . * ; <nl> <nl> - import org . apache . cassandra . db . SystemTable ; <nl> + import org . apache . cassandra . db . SystemKeyspace ; <nl> import org . apache . cassandra . exceptions . ConfigurationException ; <nl> import org . apache . cassandra . config . Schema ; <nl> import org . junit . Test ; <nl> @ @ - 661 , 14 + 661 , 14 @ @ public class LeaveAndBootstrapTest <nl> VersionedValue . VersionedValueFactory valueFactory = new VersionedValue . VersionedValueFactory ( partitioner ) ; <nl> <nl> / / create a ring of 2 nodes <nl> - ArrayList < Token > endpointTokens = new ArrayList < Token > ( ) ; <nl> - List < InetAddress > hosts = new ArrayList < InetAddress > ( ) ; <nl> + ArrayList < Token > endpointTokens = new ArrayList < > ( ) ; <nl> + List < InetAddress > hosts = new ArrayList < > ( ) ; <nl> Util . createInitialRing ( ss , partitioner , endpointTokens , new ArrayList < Token > ( ) , hosts , new ArrayList < UUID > ( ) , 2 ) ; <nl> <nl> InetAddress toRemove = hosts . get ( 1 ) ; <nl> - SystemTable . updatePeerInfo ( toRemove , " data _ center " , " ' dc42 ' " ) ; <nl> - SystemTable . updatePeerInfo ( toRemove , " rack " , " ' rack42 ' " ) ; <nl> - assertEquals ( " rack42 " , SystemTable . loadDcRackInfo ( ) . get ( toRemove ) . get ( " rack " ) ) ; <nl> + SystemKeyspace . updatePeerInfo ( toRemove , " data _ center " , " ' dc42 ' " ) ; <nl> + SystemKeyspace . updatePeerInfo ( toRemove , " rack " , " ' rack42 ' " ) ; <nl> + assertEquals ( " rack42 " , SystemKeyspace . loadDcRackInfo ( ) . get ( toRemove ) . get ( " rack " ) ) ; <nl> <nl> / / mark the node as removed <nl> Gossiper . instance . injectApplicationState ( toRemove , ApplicationState . STATUS , <nl> @ @ - 678 , 7 + 678 , 7 @ @ public class LeaveAndBootstrapTest <nl> / / state changes made after the endpoint has left should be ignored <nl> ss . onChange ( hosts . get ( 1 ) , ApplicationState . RACK , <nl> valueFactory . rack ( " rack9999 " ) ) ; <nl> - assertEquals ( " rack42 " , SystemTable . loadDcRackInfo ( ) . get ( toRemove ) . get ( " rack " ) ) ; <nl> + assertEquals ( " rack42 " , SystemKeyspace . loadDcRackInfo ( ) . get ( toRemove ) . get ( " rack " ) ) ; <nl> } <nl> <nl> private static Collection < InetAddress > makeAddrs ( String . . . hosts ) throws UnknownHostException
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / service / CassandraDaemon . java b / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> index 748e117 . . 5468a9f 100644 <nl> - - - a / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> + + + b / src / java / org / apache / cassandra / service / CassandraDaemon . java <nl> @ @ - 178 , 7 + 178 , 7 @ @ public class CassandraDaemon <nl> <nl> daemon . start ( ) ; <nl> } <nl> - catch ( Exception e ) <nl> + catch ( Throwable e ) <nl> { <nl> String msg = " Exception encountered during startup . " ; <nl> logger . error ( msg , e ) ;

TEST DIFF:
diff - - git a / test / unit / org / apache / cassandra / service / LeaveAndBootstrapTest . java b / test / unit / org / apache / cassandra / service / LeaveAndBootstrapTest . java 
 index 4c1421a . . a9d8057 100644 
 - - - a / test / unit / org / apache / cassandra / service / LeaveAndBootstrapTest . java 
 + + + b / test / unit / org / apache / cassandra / service / LeaveAndBootstrapTest . java 
 @ @ - 24 , 7 + 24 , 7 @ @ import java . net . InetAddress ; 
 import java . net . UnknownHostException ; 
 import java . util . * ; 
 
 - import org . apache . cassandra . db . SystemTable ; 
 + import org . apache . cassandra . db . SystemKeyspace ; 
 import org . apache . cassandra . exceptions . ConfigurationException ; 
 import org . apache . cassandra . config . Schema ; 
 import org . junit . Test ; 
 @ @ - 661 , 14 + 661 , 14 @ @ public class LeaveAndBootstrapTest 
 VersionedValue . VersionedValueFactory valueFactory = new VersionedValue . VersionedValueFactory ( partitioner ) ; 
 
 / / create a ring of 2 nodes 
 - ArrayList < Token > endpointTokens = new ArrayList < Token > ( ) ; 
 - List < InetAddress > hosts = new ArrayList < InetAddress > ( ) ; 
 + ArrayList < Token > endpointTokens = new ArrayList < > ( ) ; 
 + List < InetAddress > hosts = new ArrayList < > ( ) ; 
 Util . createInitialRing ( ss , partitioner , endpointTokens , new ArrayList < Token > ( ) , hosts , new ArrayList < UUID > ( ) , 2 ) ; 
 
 InetAddress toRemove = hosts . get ( 1 ) ; 
 - SystemTable . updatePeerInfo ( toRemove , " data _ center " , " ' dc42 ' " ) ; 
 - SystemTable . updatePeerInfo ( toRemove , " rack " , " ' rack42 ' " ) ; 
 - assertEquals ( " rack42 " , SystemTable . loadDcRackInfo ( ) . get ( toRemove ) . get ( " rack " ) ) ; 
 + SystemKeyspace . updatePeerInfo ( toRemove , " data _ center " , " ' dc42 ' " ) ; 
 + SystemKeyspace . updatePeerInfo ( toRemove , " rack " , " ' rack42 ' " ) ; 
 + assertEquals ( " rack42 " , SystemKeyspace . loadDcRackInfo ( ) . get ( toRemove ) . get ( " rack " ) ) ; 
 
 / / mark the node as removed 
 Gossiper . instance . injectApplicationState ( toRemove , ApplicationState . STATUS , 
 @ @ - 678 , 7 + 678 , 7 @ @ public class LeaveAndBootstrapTest 
 / / state changes made after the endpoint has left should be ignored 
 ss . onChange ( hosts . get ( 1 ) , ApplicationState . RACK , 
 valueFactory . rack ( " rack9999 " ) ) ; 
 - assertEquals ( " rack42 " , SystemTable . loadDcRackInfo ( ) . get ( toRemove ) . get ( " rack " ) ) ; 
 + assertEquals ( " rack42 " , SystemKeyspace . loadDcRackInfo ( ) . get ( toRemove ) . get ( " rack " ) ) ; 
 } 
 
 private static Collection < InetAddress > makeAddrs ( String . . . hosts ) throws UnknownHostException

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / service / CassandraDaemon . java b / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 index 748e117 . . 5468a9f 100644 
 - - - a / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 + + + b / src / java / org / apache / cassandra / service / CassandraDaemon . java 
 @ @ - 178 , 7 + 178 , 7 @ @ public class CassandraDaemon 
 
 daemon . start ( ) ; 
 } 
 - catch ( Exception e ) 
 + catch ( Throwable e ) 
 { 
 String msg = " Exception encountered during startup . " ; 
 logger . error ( msg , e ) ;
