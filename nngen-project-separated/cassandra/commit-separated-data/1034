BLEU SCORE: 0.0208362582256928

TEST MSG: Use Throwables . propagate on ExecutionException
GENERATED MSG: Mutations do not block for completion under view lock contention

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / Mutation . java b / src / java / org / apache / cassandra / db / Mutation . java <nl> index 1ba3740 . . 9a26456 100644 <nl> - - - a / src / java / org / apache / cassandra / db / Mutation . java <nl> + + + b / src / java / org / apache / cassandra / db / Mutation . java <nl> @ @ - 24 , 6 + 24 , 7 @ @ import java . util . concurrent . CompletableFuture ; <nl> import java . util . concurrent . ExecutionException ; <nl> import java . util . concurrent . atomic . AtomicLong ; <nl> <nl> + import com . google . common . base . Throwables ; <nl> import com . google . common . util . concurrent . Uninterruptibles ; <nl> import org . apache . commons . lang3 . StringUtils ; <nl> import org . apache . cassandra . config . CFMetaData ; <nl> @ @ - 217 , 7 + 218 , 7 @ @ public class Mutation implements IMutation <nl> } <nl> catch ( ExecutionException e ) <nl> { <nl> - throw new RuntimeException ( e . getCause ( ) ) ; <nl> + Throwables . propagate ( e . getCause ( ) ) ; <nl> } <nl> } <nl> <nl> diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogReplayer . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogReplayer . java <nl> index b4472ed . . 33750f8 100644 <nl> - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogReplayer . java <nl> + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogReplayer . java <nl> @ @ - 31 , 6 + 31 , 7 @ @ import java . util . concurrent . atomic . AtomicInteger ; <nl> import java . util . zip . CRC32 ; <nl> <nl> import com . google . common . base . Predicate ; <nl> + import com . google . common . base . Throwables ; <nl> import com . google . common . collect . HashMultimap ; <nl> import com . google . common . collect . Iterables ; <nl> import com . google . common . collect . Multimap ; <nl> @ @ - 568 , 7 + 569 , 7 @ @ public class CommitLogReplayer <nl> <nl> Runnable runnable = new WrappedRunnable ( ) <nl> { <nl> - public void runMayThrow ( ) throws ExecutionException <nl> + public void runMayThrow ( ) <nl> { <nl> if ( Schema . instance . getKSMetaData ( mutation . getKeyspaceName ( ) ) = = null ) <nl> return ; <nl> @ @ - 603 , 7 + 604 , 16 @ @ public class CommitLogReplayer <nl> if ( newMutation ! = null ) <nl> { <nl> assert ! newMutation . isEmpty ( ) ; <nl> - Uninterruptibles . getUninterruptibly ( Keyspace . open ( newMutation . getKeyspaceName ( ) ) . applyFromCommitLog ( newMutation ) ) ; <nl> + <nl> + try <nl> + { <nl> + Uninterruptibles . getUninterruptibly ( Keyspace . open ( newMutation . getKeyspaceName ( ) ) . applyFromCommitLog ( newMutation ) ) ; <nl> + } <nl> + catch ( ExecutionException e ) <nl> + { <nl> + Throwables . propagate ( e . getCause ( ) ) ; <nl> + } <nl> + <nl> keyspacesRecovered . add ( keyspace ) ; <nl> } <nl> } <nl> diff - - git a / src / java / org / apache / cassandra / service / paxos / PaxosState . java b / src / java / org / apache / cassandra / service / paxos / PaxosState . java <nl> index 3ecac99 . . d4fed51 100644 <nl> - - - a / src / java / org / apache / cassandra / service / paxos / PaxosState . java <nl> + + + b / src / java / org / apache / cassandra / service / paxos / PaxosState . java <nl> @ @ - 23 , 6 + 23 , 7 @ @ package org . apache . cassandra . service . paxos ; <nl> import java . util . concurrent . ExecutionException ; <nl> import java . util . concurrent . locks . Lock ; <nl> <nl> + import com . google . common . base . Throwables ; <nl> import com . google . common . util . concurrent . Striped ; <nl> import com . google . common . util . concurrent . Uninterruptibles ; <nl> <nl> @ @ - 145 , 7 + 146 , 7 @ @ public class PaxosState <nl> } <nl> catch ( ExecutionException e ) <nl> { <nl> - throw new RuntimeException ( e . getCause ( ) ) ; <nl> + Throwables . propagate ( e . getCause ( ) ) ; <nl> } <nl> } <nl> else
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / Mutation . java b / src / java / org / apache / cassandra / db / Mutation . java 
 index 1ba3740 . . 9a26456 100644 
 - - - a / src / java / org / apache / cassandra / db / Mutation . java 
 + + + b / src / java / org / apache / cassandra / db / Mutation . java 
 @ @ - 24 , 6 + 24 , 7 @ @ import java . util . concurrent . CompletableFuture ; 
 import java . util . concurrent . ExecutionException ; 
 import java . util . concurrent . atomic . AtomicLong ; 
 
 + import com . google . common . base . Throwables ; 
 import com . google . common . util . concurrent . Uninterruptibles ; 
 import org . apache . commons . lang3 . StringUtils ; 
 import org . apache . cassandra . config . CFMetaData ; 
 @ @ - 217 , 7 + 218 , 7 @ @ public class Mutation implements IMutation 
 } 
 catch ( ExecutionException e ) 
 { 
 - throw new RuntimeException ( e . getCause ( ) ) ; 
 + Throwables . propagate ( e . getCause ( ) ) ; 
 } 
 } 
 
 diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogReplayer . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogReplayer . java 
 index b4472ed . . 33750f8 100644 
 - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogReplayer . java 
 + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogReplayer . java 
 @ @ - 31 , 6 + 31 , 7 @ @ import java . util . concurrent . atomic . AtomicInteger ; 
 import java . util . zip . CRC32 ; 
 
 import com . google . common . base . Predicate ; 
 + import com . google . common . base . Throwables ; 
 import com . google . common . collect . HashMultimap ; 
 import com . google . common . collect . Iterables ; 
 import com . google . common . collect . Multimap ; 
 @ @ - 568 , 7 + 569 , 7 @ @ public class CommitLogReplayer 
 
 Runnable runnable = new WrappedRunnable ( ) 
 { 
 - public void runMayThrow ( ) throws ExecutionException 
 + public void runMayThrow ( ) 
 { 
 if ( Schema . instance . getKSMetaData ( mutation . getKeyspaceName ( ) ) = = null ) 
 return ; 
 @ @ - 603 , 7 + 604 , 16 @ @ public class CommitLogReplayer 
 if ( newMutation ! = null ) 
 { 
 assert ! newMutation . isEmpty ( ) ; 
 - Uninterruptibles . getUninterruptibly ( Keyspace . open ( newMutation . getKeyspaceName ( ) ) . applyFromCommitLog ( newMutation ) ) ; 
 + 
 + try 
 + { 
 + Uninterruptibles . getUninterruptibly ( Keyspace . open ( newMutation . getKeyspaceName ( ) ) . applyFromCommitLog ( newMutation ) ) ; 
 + } 
 + catch ( ExecutionException e ) 
 + { 
 + Throwables . propagate ( e . getCause ( ) ) ; 
 + } 
 + 
 keyspacesRecovered . add ( keyspace ) ; 
 } 
 } 
 diff - - git a / src / java / org / apache / cassandra / service / paxos / PaxosState . java b / src / java / org / apache / cassandra / service / paxos / PaxosState . java 
 index 3ecac99 . . d4fed51 100644 
 - - - a / src / java / org / apache / cassandra / service / paxos / PaxosState . java 
 + + + b / src / java / org / apache / cassandra / service / paxos / PaxosState . java 
 @ @ - 23 , 6 + 23 , 7 @ @ package org . apache . cassandra . service . paxos ; 
 import java . util . concurrent . ExecutionException ; 
 import java . util . concurrent . locks . Lock ; 
 
 + import com . google . common . base . Throwables ; 
 import com . google . common . util . concurrent . Striped ; 
 import com . google . common . util . concurrent . Uninterruptibles ; 
 
 @ @ - 145 , 7 + 146 , 7 @ @ public class PaxosState 
 } 
 catch ( ExecutionException e ) 
 { 
 - throw new RuntimeException ( e . getCause ( ) ) ; 
 + Throwables . propagate ( e . getCause ( ) ) ; 
 } 
 } 
 else

NEAREST DIFF:
ELIMINATEDSENTENCE
