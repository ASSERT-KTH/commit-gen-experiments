BLEU SCORE: 0.09782375748961449

TEST MSG: Don ' t try to shutdown client servers if they don ' t exist .
GENERATED MSG: Don ' t NPE when shutting down non - existent thrift server

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index 12d6420 . . 7f92034 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 565 , 7 + 565 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> if ( mutationStage . isShutdown ( ) ) <nl> return ; / / drained already <nl> <nl> - shutdownClientServers ( ) ; <nl> + if ( daemon ! = null ) <nl> + 	 shutdownClientServers ( ) ; <nl> optionalTasks . shutdown ( ) ; <nl> Gossiper . instance . stop ( ) ; <nl>
NEAREST DIFF (one line): diff - - git a / debian / cassandra . postinst b / debian / cassandra . postinst <nl> index 9591459 . . 752ff1f 100644 <nl> - - - a / debian / cassandra . postinst <nl> + + + b / debian / cassandra . postinst <nl> @ @ - 45 , 7 + 45 , 7 @ @ case " $ 1 " in <nl> echo " vm . max _ map _ count to 1048575 in the host . " > & 2 <nl> echo > & 2 <nl> echo " Deleting the local sysctl . d / cassandra . conf . " > & 2 <nl> - rm - v / etc / sysctl . d / cassandra . conf <nl> + rm - vf / etc / sysctl . d / cassandra . conf <nl> fi <nl> ; ; <nl>

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index 12d6420 . . 7f92034 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 565 , 7 + 565 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 if ( mutationStage . isShutdown ( ) ) 
 return ; / / drained already 
 
 - shutdownClientServers ( ) ; 
 + if ( daemon ! = null ) 
 + 	 shutdownClientServers ( ) ; 
 optionalTasks . shutdown ( ) ; 
 Gossiper . instance . stop ( ) ; 


NEAREST DIFF:
diff - - git a / debian / cassandra . postinst b / debian / cassandra . postinst 
 index 9591459 . . 752ff1f 100644 
 - - - a / debian / cassandra . postinst 
 + + + b / debian / cassandra . postinst 
 @ @ - 45 , 7 + 45 , 7 @ @ case " $ 1 " in 
 echo " vm . max _ map _ count to 1048575 in the host . " > & 2 
 echo > & 2 
 echo " Deleting the local sysctl . d / cassandra . conf . " > & 2 
 - rm - v / etc / sysctl . d / cassandra . conf 
 + rm - vf / etc / sysctl . d / cassandra . conf 
 fi 
 ; ; 

