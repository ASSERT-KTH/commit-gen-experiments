BLEU SCORE: 0.01639595539372607

TEST MSG: fix Exception message generation by adding String . format markers needed
GENERATED MSG: BufferedRandomAccessFile . read doesn ' t always do full reads ; patched by junrao , reviewed by jbellis for CASSANDRA - 565

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogReader . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogReader . java <nl> index 73d70f3 . . 6c4bb60 100644 <nl> - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogReader . java <nl> + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogReader . java <nl> @ @ - 315 , 7 + 315 , 7 @ @ public class CommitLogReader <nl> catch ( EOFException eof ) <nl> { <nl> if ( handler . shouldSkipSegmentOnError ( new CommitLogReadException ( <nl> - String . format ( " Unexpected end of segment " , mutationStart , statusTracker . errorContext ) , <nl> + String . format ( " Unexpected end of segment at % d in % s " , mutationStart , statusTracker . errorContext ) , <nl> CommitLogReadErrorReason . EOF , <nl> statusTracker . tolerateErrorsInSection ) ) ) <nl> {
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / CommitLog . java b / src / java / org / apache / cassandra / db / CommitLog . java <nl> index 057d19b . . 5f97207 100644 <nl> - - - a / src / java / org / apache / cassandra / db / CommitLog . java <nl> + + + b / src / java / org / apache / cassandra / db / CommitLog . java <nl> @ @ - 315 , 10 + 315 , 7 @ @ public class CommitLog <nl> try <nl> { <nl> bytes = new byte [ ( int ) reader . readLong ( ) ] ; / / readlong can throw EOFException too <nl> - if ( reader . read ( bytes ) < bytes . length ) <nl> - { <nl> - throw new EOFException ( ) ; <nl> - } <nl> + reader . readFully ( bytes ) ; <nl> } <nl> catch ( EOFException e ) <nl> {

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / commitlog / CommitLogReader . java b / src / java / org / apache / cassandra / db / commitlog / CommitLogReader . java 
 index 73d70f3 . . 6c4bb60 100644 
 - - - a / src / java / org / apache / cassandra / db / commitlog / CommitLogReader . java 
 + + + b / src / java / org / apache / cassandra / db / commitlog / CommitLogReader . java 
 @ @ - 315 , 7 + 315 , 7 @ @ public class CommitLogReader 
 catch ( EOFException eof ) 
 { 
 if ( handler . shouldSkipSegmentOnError ( new CommitLogReadException ( 
 - String . format ( " Unexpected end of segment " , mutationStart , statusTracker . errorContext ) , 
 + String . format ( " Unexpected end of segment at % d in % s " , mutationStart , statusTracker . errorContext ) , 
 CommitLogReadErrorReason . EOF , 
 statusTracker . tolerateErrorsInSection ) ) ) 
 {

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / CommitLog . java b / src / java / org / apache / cassandra / db / CommitLog . java 
 index 057d19b . . 5f97207 100644 
 - - - a / src / java / org / apache / cassandra / db / CommitLog . java 
 + + + b / src / java / org / apache / cassandra / db / CommitLog . java 
 @ @ - 315 , 10 + 315 , 7 @ @ public class CommitLog 
 try 
 { 
 bytes = new byte [ ( int ) reader . readLong ( ) ] ; / / readlong can throw EOFException too 
 - if ( reader . read ( bytes ) < bytes . length ) 
 - { 
 - throw new EOFException ( ) ; 
 - } 
 + reader . readFully ( bytes ) ; 
 } 
 catch ( EOFException e ) 
 {
