BLEU SCORE: 0.11598118436136108

TEST MSG: fix bad merge
GENERATED MSG: Make loadNewSSTable preserve sstable version

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / io / util / DataIntegrityMetadata . java b / src / java / org / apache / cassandra / io / util / DataIntegrityMetadata . java <nl> index 4cf3517 . . 2f9550e 100644 <nl> - - - a / src / java / org / apache / cassandra / io / util / DataIntegrityMetadata . java <nl> + + + b / src / java / org / apache / cassandra / io / util / DataIntegrityMetadata . java <nl> @ @ - 104 , 7 + 104 , 7 @ @ public class DataIntegrityMetadata <nl> public FileDigestValidator ( Descriptor descriptor ) throws IOException <nl> { <nl> this . descriptor = descriptor ; <nl> - checksum = descriptor . version . hasAllAdlerChecksums ( ) ? new Adler32 ( ) : new PureJavaCrc32 ( ) ; <nl> + checksum = descriptor . version . hasAllAdlerChecksums ( ) ? new Adler32 ( ) : CRC32Factory . instance . create ( ) ; <nl> digestReader = RandomAccessReader . open ( new File ( descriptor . filenameFor ( Component . DIGEST ) ) ) ; <nl> dataReader = RandomAccessReader . open ( new File ( descriptor . filenameFor ( Component . DATA ) ) ) ; <nl> try
NEAREST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index bf1a34f . . e81f2bb 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 17 , 6 + 17 , 7 @ @ <nl> * allow custom types in CLI ' s assume command ( CASSANDRA - 4081 ) <nl> * fix totalBytes count for parallel compactions ( CASSANDRA - 3758 ) <nl> * fix intermittent NPE in get _ slice ( CASSANDRA - 4095 ) <nl> + * remove unnecessary asserts in native code interfaces ( CASSANDRA - 4096 ) <nl> <nl> <nl> 1 . 0 . 8 <nl> diff - - git a / src / java / org / apache / cassandra / utils / CLibrary . java b / src / java / org / apache / cassandra / utils / CLibrary . java <nl> index 090a355 . . 6270d8c 100644 <nl> - - - a / src / java / org / apache / cassandra / utils / CLibrary . java <nl> + + + b / src / java / org / apache / cassandra / utils / CLibrary . java <nl> @ @ - 105 , 8 + 105 , 7 @ @ public final class CLibrary <nl> { <nl> try <nl> { <nl> - int result = mlockall ( MCL _ CURRENT ) ; <nl> - assert result = = 0 ; / / mlockall should always be zero on success <nl> + mlockall ( MCL _ CURRENT ) ; <nl> logger . info ( " JNA mlockall successful " ) ; <nl> } <nl> catch ( UnsatisfiedLinkError e ) <nl> @ @ - 143 , 8 + 142 , 7 @ @ public final class CLibrary <nl> { <nl> try <nl> { <nl> - int result = link ( sourceFile . getAbsolutePath ( ) , destinationFile . getAbsolutePath ( ) ) ; <nl> - assert result = = 0 ; / / success is always zero <nl> + link ( sourceFile . getAbsolutePath ( ) , destinationFile . getAbsolutePath ( ) ) ; <nl> } <nl> catch ( UnsatisfiedLinkError e ) <nl> { <nl> @ @ - 242 , 12 + 240 , 12 @ @ public final class CLibrary <nl> <nl> public static int tryFcntl ( int fd , int command , int flags ) <nl> { <nl> + / / fcntl return value may or may not be useful , depending on the command <nl> int result = - 1 ; <nl> <nl> try <nl> { <nl> result = CLibrary . fcntl ( fd , command , flags ) ; <nl> - assert result > = 0 ; / / on error a value of - 1 is returned and errno is set to indicate the error . <nl> } <nl> catch ( RuntimeException e ) <nl> {

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / io / util / DataIntegrityMetadata . java b / src / java / org / apache / cassandra / io / util / DataIntegrityMetadata . java 
 index 4cf3517 . . 2f9550e 100644 
 - - - a / src / java / org / apache / cassandra / io / util / DataIntegrityMetadata . java 
 + + + b / src / java / org / apache / cassandra / io / util / DataIntegrityMetadata . java 
 @ @ - 104 , 7 + 104 , 7 @ @ public class DataIntegrityMetadata 
 public FileDigestValidator ( Descriptor descriptor ) throws IOException 
 { 
 this . descriptor = descriptor ; 
 - checksum = descriptor . version . hasAllAdlerChecksums ( ) ? new Adler32 ( ) : new PureJavaCrc32 ( ) ; 
 + checksum = descriptor . version . hasAllAdlerChecksums ( ) ? new Adler32 ( ) : CRC32Factory . instance . create ( ) ; 
 digestReader = RandomAccessReader . open ( new File ( descriptor . filenameFor ( Component . DIGEST ) ) ) ; 
 dataReader = RandomAccessReader . open ( new File ( descriptor . filenameFor ( Component . DATA ) ) ) ; 
 try

NEAREST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index bf1a34f . . e81f2bb 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 17 , 6 + 17 , 7 @ @ 
 * allow custom types in CLI ' s assume command ( CASSANDRA - 4081 ) 
 * fix totalBytes count for parallel compactions ( CASSANDRA - 3758 ) 
 * fix intermittent NPE in get _ slice ( CASSANDRA - 4095 ) 
 + * remove unnecessary asserts in native code interfaces ( CASSANDRA - 4096 ) 
 
 
 1 . 0 . 8 
 diff - - git a / src / java / org / apache / cassandra / utils / CLibrary . java b / src / java / org / apache / cassandra / utils / CLibrary . java 
 index 090a355 . . 6270d8c 100644 
 - - - a / src / java / org / apache / cassandra / utils / CLibrary . java 
 + + + b / src / java / org / apache / cassandra / utils / CLibrary . java 
 @ @ - 105 , 8 + 105 , 7 @ @ public final class CLibrary 
 { 
 try 
 { 
 - int result = mlockall ( MCL _ CURRENT ) ; 
 - assert result = = 0 ; / / mlockall should always be zero on success 
 + mlockall ( MCL _ CURRENT ) ; 
 logger . info ( " JNA mlockall successful " ) ; 
 } 
 catch ( UnsatisfiedLinkError e ) 
 @ @ - 143 , 8 + 142 , 7 @ @ public final class CLibrary 
 { 
 try 
 { 
 - int result = link ( sourceFile . getAbsolutePath ( ) , destinationFile . getAbsolutePath ( ) ) ; 
 - assert result = = 0 ; / / success is always zero 
 + link ( sourceFile . getAbsolutePath ( ) , destinationFile . getAbsolutePath ( ) ) ; 
 } 
 catch ( UnsatisfiedLinkError e ) 
 { 
 @ @ - 242 , 12 + 240 , 12 @ @ public final class CLibrary 
 
 public static int tryFcntl ( int fd , int command , int flags ) 
 { 
 + / / fcntl return value may or may not be useful , depending on the command 
 int result = - 1 ; 
 
 try 
 { 
 result = CLibrary . fcntl ( fd , command , flags ) ; 
 - assert result > = 0 ; / / on error a value of - 1 is returned and errno is set to indicate the error . 
 } 
 catch ( RuntimeException e ) 
 {
