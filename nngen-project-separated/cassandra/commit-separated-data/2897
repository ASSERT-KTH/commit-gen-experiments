BLEU SCORE: 0.0033689734995427335

TEST MSG: fix MoveTest
GENERATED MSG: include cf / keyspace name in sstable2json NPEs . patch by jbellis

TEST DIFF (one line): diff - - git a / test / unit / org / apache / cassandra / service / MoveTest . java b / test / unit / org / apache / cassandra / service / MoveTest . java <nl> index e30bbde . . 07a9590 100644 <nl> - - - a / test / unit / org / apache / cassandra / service / MoveTest . java <nl> + + + b / test / unit / org / apache / cassandra / service / MoveTest . java <nl> @ @ - 109 , 6 + 109 , 7 @ @ public class MoveTest <nl> <nl> / / Third node leaves <nl> ss . onChange ( hosts . get ( MOVING _ NODE ) , ApplicationState . STATUS , valueFactory . moving ( newToken ) ) ; <nl> + PendingRangeCalculatorService . instance . blockUntilFinished ( ) ; <nl> <nl> assertTrue ( tmd . isMoving ( hosts . get ( MOVING _ NODE ) ) ) ; <nl> <nl> @ @ - 197 , 6 + 198 , 7 @ @ public class MoveTest <nl> ss . onChange ( boot2 , <nl> ApplicationState . STATUS , <nl> valueFactory . bootstrapping ( Collections . < Token > singleton ( keyTokens . get ( 7 ) ) ) ) ; <nl> + PendingRangeCalculatorService . instance . blockUntilFinished ( ) ; <nl> <nl> / / don ' t require test update every time a new keyspace is added to test / conf / cassandra . yaml <nl> Map < String , AbstractReplicationStrategy > tableStrategyMap = new HashMap < String , AbstractReplicationStrategy > ( ) ;
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> index 4d4a711 . . 2d524a9 100644 <nl> - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java <nl> @ @ - 939 , 7 + 939 , 10 @ @ public class DatabaseDescriptor <nl> public static AbstractType getComparator ( String tableName , String cfName ) <nl> { <nl> assert tableName ! = null ; <nl> - return getCFMetaData ( tableName , cfName ) . comparator ; <nl> + CFMetaData cfmd = getCFMetaData ( tableName , cfName ) ; <nl> + if ( cfmd = = null ) <nl> + throw new NullPointerException ( " Unknown ColumnFamily " + cfName + " in keyspace " + tableName ) ; <nl> + return cfmd . comparator ; <nl> } <nl> <nl> public static AbstractType getSubComparator ( String tableName , String cfName )

TEST DIFF:
diff - - git a / test / unit / org / apache / cassandra / service / MoveTest . java b / test / unit / org / apache / cassandra / service / MoveTest . java 
 index e30bbde . . 07a9590 100644 
 - - - a / test / unit / org / apache / cassandra / service / MoveTest . java 
 + + + b / test / unit / org / apache / cassandra / service / MoveTest . java 
 @ @ - 109 , 6 + 109 , 7 @ @ public class MoveTest 
 
 / / Third node leaves 
 ss . onChange ( hosts . get ( MOVING _ NODE ) , ApplicationState . STATUS , valueFactory . moving ( newToken ) ) ; 
 + PendingRangeCalculatorService . instance . blockUntilFinished ( ) ; 
 
 assertTrue ( tmd . isMoving ( hosts . get ( MOVING _ NODE ) ) ) ; 
 
 @ @ - 197 , 6 + 198 , 7 @ @ public class MoveTest 
 ss . onChange ( boot2 , 
 ApplicationState . STATUS , 
 valueFactory . bootstrapping ( Collections . < Token > singleton ( keyTokens . get ( 7 ) ) ) ) ; 
 + PendingRangeCalculatorService . instance . blockUntilFinished ( ) ; 
 
 / / don ' t require test update every time a new keyspace is added to test / conf / cassandra . yaml 
 Map < String , AbstractReplicationStrategy > tableStrategyMap = new HashMap < String , AbstractReplicationStrategy > ( ) ;

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 index 4d4a711 . . 2d524a9 100644 
 - - - a / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 + + + b / src / java / org / apache / cassandra / config / DatabaseDescriptor . java 
 @ @ - 939 , 7 + 939 , 10 @ @ public class DatabaseDescriptor 
 public static AbstractType getComparator ( String tableName , String cfName ) 
 { 
 assert tableName ! = null ; 
 - return getCFMetaData ( tableName , cfName ) . comparator ; 
 + CFMetaData cfmd = getCFMetaData ( tableName , cfName ) ; 
 + if ( cfmd = = null ) 
 + throw new NullPointerException ( " Unknown ColumnFamily " + cfName + " in keyspace " + tableName ) ; 
 + return cfmd . comparator ; 
 } 
 
 public static AbstractType getSubComparator ( String tableName , String cfName )
