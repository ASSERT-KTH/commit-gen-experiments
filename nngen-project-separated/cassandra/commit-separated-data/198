BLEU SCORE: 0.027611988917697356

TEST MSG: node map does not handle InetAddressAndPort correctly .
GENERATED MSG: Increase quarantine on replacement

TEST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java <nl> index cda575a . . 16b6a81 100644 <nl> - - - a / src / java / org / apache / cassandra / service / StorageService . java <nl> + + + b / src / java / org / apache / cassandra / service / StorageService . java <nl> @ @ - 4766 , 8 + 4766 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> { <nl> InetAddressAndPort endpoint = tokenMetadata . getEndpoint ( entry . getKey ( ) ) ; <nl> Float tokenOwnership = entry . getValue ( ) ; <nl> - if ( nodeMap . containsKey ( endpoint ) ) <nl> - nodeMap . put ( endpoint . address , nodeMap . get ( endpoint ) + tokenOwnership ) ; <nl> + if ( nodeMap . containsKey ( endpoint . address ) ) <nl> + nodeMap . put ( endpoint . address , nodeMap . get ( endpoint . address ) + tokenOwnership ) ; <nl> else <nl> nodeMap . put ( endpoint . address , tokenOwnership ) ; <nl> } <nl> @ @ - 4784 , 8 + 4784 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE <nl> { <nl> InetAddressAndPort endpoint = tokenMetadata . getEndpoint ( entry . getKey ( ) ) ; <nl> Float tokenOwnership = entry . getValue ( ) ; <nl> - if ( nodeMap . containsKey ( endpoint ) ) <nl> - nodeMap . put ( endpoint . toString ( ) , nodeMap . get ( endpoint ) + tokenOwnership ) ; <nl> + if ( nodeMap . containsKey ( endpoint . toString ( ) ) ) <nl> + nodeMap . put ( endpoint . toString ( ) , nodeMap . get ( endpoint . toString ( ) ) + tokenOwnership ) ; <nl> else <nl> nodeMap . put ( endpoint . toString ( ) , tokenOwnership ) ; <nl> } <nl> diff - - git a / src / java / org / apache / cassandra / tools / nodetool / SetHostStatWithPort . java b / src / java / org / apache / cassandra / tools / nodetool / SetHostStatWithPort . java <nl> index 67cd464 . . 6ac0258 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / nodetool / SetHostStatWithPort . java <nl> + + + b / src / java / org / apache / cassandra / tools / nodetool / SetHostStatWithPort . java <nl> @ @ - 50 , 7 + 50 , 7 @ @ public class SetHostStatWithPort implements Iterable < HostStatWithPort > <nl> public void add ( String token , String host , Map < String , Float > ownerships ) throws UnknownHostException <nl> { <nl> InetAddressAndPort endpoint = InetAddressAndPort . getByName ( host ) ; <nl> - Float owns = ownerships . get ( endpoint ) ; <nl> + Float owns = ownerships . get ( endpoint . toString ( ) ) ; <nl> hostStats . add ( new HostStatWithPort ( token , endpoint , resolveIp , owns ) ) ; <nl> } <nl> } <nl> diff - - git a / src / java / org / apache / cassandra / tools / nodetool / Status . java b / src / java / org / apache / cassandra / tools / nodetool / Status . java <nl> index 49724a5 . . 10c7fdf 100644 <nl> - - - a / src / java / org / apache / cassandra / tools / nodetool / Status . java <nl> + + + b / src / java / org / apache / cassandra / tools / nodetool / Status . java <nl> @ @ - 116 , 7 + 116 , 7 @ @ public class Status extends NodeToolCmd <nl> <nl> for ( InetAddressAndPort endpoint : hostToTokens . keySet ( ) ) <nl> { <nl> - Float owns = ownerships . get ( endpoint ) ; <nl> + Float owns = ownerships . get ( endpoint . toString ( ) ) ; <nl> List < HostStatWithPort > tokens = hostToTokens . get ( endpoint ) ; <nl> printNodeWithPort ( endpoint . toString ( ) , owns , tokens , hasEffectiveOwns , isTokenPerNode ) ; <nl> }
NEAREST DIFF (one line): ELIMINATEDSENTENCE

TEST DIFF:
diff - - git a / src / java / org / apache / cassandra / service / StorageService . java b / src / java / org / apache / cassandra / service / StorageService . java 
 index cda575a . . 16b6a81 100644 
 - - - a / src / java / org / apache / cassandra / service / StorageService . java 
 + + + b / src / java / org / apache / cassandra / service / StorageService . java 
 @ @ - 4766 , 8 + 4766 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 { 
 InetAddressAndPort endpoint = tokenMetadata . getEndpoint ( entry . getKey ( ) ) ; 
 Float tokenOwnership = entry . getValue ( ) ; 
 - if ( nodeMap . containsKey ( endpoint ) ) 
 - nodeMap . put ( endpoint . address , nodeMap . get ( endpoint ) + tokenOwnership ) ; 
 + if ( nodeMap . containsKey ( endpoint . address ) ) 
 + nodeMap . put ( endpoint . address , nodeMap . get ( endpoint . address ) + tokenOwnership ) ; 
 else 
 nodeMap . put ( endpoint . address , tokenOwnership ) ; 
 } 
 @ @ - 4784 , 8 + 4784 , 8 @ @ public class StorageService extends NotificationBroadcasterSupport implements IE 
 { 
 InetAddressAndPort endpoint = tokenMetadata . getEndpoint ( entry . getKey ( ) ) ; 
 Float tokenOwnership = entry . getValue ( ) ; 
 - if ( nodeMap . containsKey ( endpoint ) ) 
 - nodeMap . put ( endpoint . toString ( ) , nodeMap . get ( endpoint ) + tokenOwnership ) ; 
 + if ( nodeMap . containsKey ( endpoint . toString ( ) ) ) 
 + nodeMap . put ( endpoint . toString ( ) , nodeMap . get ( endpoint . toString ( ) ) + tokenOwnership ) ; 
 else 
 nodeMap . put ( endpoint . toString ( ) , tokenOwnership ) ; 
 } 
 diff - - git a / src / java / org / apache / cassandra / tools / nodetool / SetHostStatWithPort . java b / src / java / org / apache / cassandra / tools / nodetool / SetHostStatWithPort . java 
 index 67cd464 . . 6ac0258 100644 
 - - - a / src / java / org / apache / cassandra / tools / nodetool / SetHostStatWithPort . java 
 + + + b / src / java / org / apache / cassandra / tools / nodetool / SetHostStatWithPort . java 
 @ @ - 50 , 7 + 50 , 7 @ @ public class SetHostStatWithPort implements Iterable < HostStatWithPort > 
 public void add ( String token , String host , Map < String , Float > ownerships ) throws UnknownHostException 
 { 
 InetAddressAndPort endpoint = InetAddressAndPort . getByName ( host ) ; 
 - Float owns = ownerships . get ( endpoint ) ; 
 + Float owns = ownerships . get ( endpoint . toString ( ) ) ; 
 hostStats . add ( new HostStatWithPort ( token , endpoint , resolveIp , owns ) ) ; 
 } 
 } 
 diff - - git a / src / java / org / apache / cassandra / tools / nodetool / Status . java b / src / java / org / apache / cassandra / tools / nodetool / Status . java 
 index 49724a5 . . 10c7fdf 100644 
 - - - a / src / java / org / apache / cassandra / tools / nodetool / Status . java 
 + + + b / src / java / org / apache / cassandra / tools / nodetool / Status . java 
 @ @ - 116 , 7 + 116 , 7 @ @ public class Status extends NodeToolCmd 
 
 for ( InetAddressAndPort endpoint : hostToTokens . keySet ( ) ) 
 { 
 - Float owns = ownerships . get ( endpoint ) ; 
 + Float owns = ownerships . get ( endpoint . toString ( ) ) ; 
 List < HostStatWithPort > tokens = hostToTokens . get ( endpoint ) ; 
 printNodeWithPort ( endpoint . toString ( ) , owns , tokens , hasEffectiveOwns , isTokenPerNode ) ; 
 }

NEAREST DIFF:
ELIMINATEDSENTENCE
