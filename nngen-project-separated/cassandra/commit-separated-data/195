BLEU SCORE: 0.040583489434387374

TEST MSG: Fix sstablemetadata date string for minLocalDeletionTime
GENERATED MSG: merge from 1 . 1

TEST DIFF (one line): diff - - git a / CHANGES . txt b / CHANGES . txt <nl> index c7c1b6f . . e860265 100644 <nl> - - - a / CHANGES . txt <nl> + + + b / CHANGES . txt <nl> @ @ - 1 , 4 + 1 , 5 @ @ <nl> 4 . 0 <nl> + * Fix sstablemetadata date string for minLocalDeletionTime ( CASSANDRA - 14132 ) <nl> * Make it possible to change neverPurgeTombstones during runtime ( CASSANDRA - 14214 ) <nl> * Remove GossipDigestSynVerbHandler # doSort ( ) ( CASSANDRA - 14174 ) <nl> * Add nodetool clientlist ( CASSANDRA - 13665 ) <nl> diff - - git a / src / java / org / apache / cassandra / tools / SSTableMetadataViewer . java b / src / java / org / apache / cassandra / tools / SSTableMetadataViewer . java <nl> index 5a8a0bc . . 8ff964f 100755 <nl> - - - a / src / java / org / apache / cassandra / tools / SSTableMetadataViewer . java <nl> + + + b / src / java / org / apache / cassandra / tools / SSTableMetadataViewer . java <nl> @ @ - 425 , 7 + 425 , 7 @ @ public class SSTableMetadataViewer <nl> field ( " EncodingStats minTTL " , encodingStats . minTTL , <nl> toDurationString ( encodingStats . minTTL , TimeUnit . SECONDS ) ) ; <nl> field ( " EncodingStats minLocalDeletionTime " , encodingStats . minLocalDeletionTime , <nl> - toDateString ( encodingStats . minLocalDeletionTime , TimeUnit . MILLISECONDS ) ) ; <nl> + toDateString ( encodingStats . minLocalDeletionTime , TimeUnit . SECONDS ) ) ; <nl> field ( " EncodingStats minTimestamp " , encodingStats . minTimestamp , <nl> toDateString ( encodingStats . minTimestamp , tsUnit ) ) ; <nl> field ( " KeyType " , keyType . toString ( ) ) ;
NEAREST DIFF (one line): diff - - git a / src / java / org / apache / cassandra / db / HintedHandOffManager . java b / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> index a83fbab . . e2dc046 100644 <nl> - - - a / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> + + + b / src / java / org / apache / cassandra / db / HintedHandOffManager . java <nl> @ @ - 391 , 7 + 391 , 9 @ @ public class HintedHandOffManager implements HintedHandOffManagerMBean <nl> { <nl> Token < ? > token = StorageService . getPartitioner ( ) . getTokenFactory ( ) . fromByteArray ( row . key . key ) ; <nl> InetAddress target = StorageService . instance . getTokenMetadata ( ) . getEndpoint ( token ) ; <nl> - scheduleHintDelivery ( target ) ; <nl> + / / token may have since been removed ( in which case we have just read back a tombstone ) <nl> + if ( target ! = null ) <nl> + scheduleHintDelivery ( target ) ; <nl> } <nl> <nl> if ( logger _ . isDebugEnabled ( ) )

TEST DIFF:
diff - - git a / CHANGES . txt b / CHANGES . txt 
 index c7c1b6f . . e860265 100644 
 - - - a / CHANGES . txt 
 + + + b / CHANGES . txt 
 @ @ - 1 , 4 + 1 , 5 @ @ 
 4 . 0 
 + * Fix sstablemetadata date string for minLocalDeletionTime ( CASSANDRA - 14132 ) 
 * Make it possible to change neverPurgeTombstones during runtime ( CASSANDRA - 14214 ) 
 * Remove GossipDigestSynVerbHandler # doSort ( ) ( CASSANDRA - 14174 ) 
 * Add nodetool clientlist ( CASSANDRA - 13665 ) 
 diff - - git a / src / java / org / apache / cassandra / tools / SSTableMetadataViewer . java b / src / java / org / apache / cassandra / tools / SSTableMetadataViewer . java 
 index 5a8a0bc . . 8ff964f 100755 
 - - - a / src / java / org / apache / cassandra / tools / SSTableMetadataViewer . java 
 + + + b / src / java / org / apache / cassandra / tools / SSTableMetadataViewer . java 
 @ @ - 425 , 7 + 425 , 7 @ @ public class SSTableMetadataViewer 
 field ( " EncodingStats minTTL " , encodingStats . minTTL , 
 toDurationString ( encodingStats . minTTL , TimeUnit . SECONDS ) ) ; 
 field ( " EncodingStats minLocalDeletionTime " , encodingStats . minLocalDeletionTime , 
 - toDateString ( encodingStats . minLocalDeletionTime , TimeUnit . MILLISECONDS ) ) ; 
 + toDateString ( encodingStats . minLocalDeletionTime , TimeUnit . SECONDS ) ) ; 
 field ( " EncodingStats minTimestamp " , encodingStats . minTimestamp , 
 toDateString ( encodingStats . minTimestamp , tsUnit ) ) ; 
 field ( " KeyType " , keyType . toString ( ) ) ;

NEAREST DIFF:
diff - - git a / src / java / org / apache / cassandra / db / HintedHandOffManager . java b / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 index a83fbab . . e2dc046 100644 
 - - - a / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 + + + b / src / java / org / apache / cassandra / db / HintedHandOffManager . java 
 @ @ - 391 , 7 + 391 , 9 @ @ public class HintedHandOffManager implements HintedHandOffManagerMBean 
 { 
 Token < ? > token = StorageService . getPartitioner ( ) . getTokenFactory ( ) . fromByteArray ( row . key . key ) ; 
 InetAddress target = StorageService . instance . getTokenMetadata ( ) . getEndpoint ( token ) ; 
 - scheduleHintDelivery ( target ) ; 
 + / / token may have since been removed ( in which case we have just read back a tombstone ) 
 + if ( target ! = null ) 
 + scheduleHintDelivery ( target ) ; 
 } 
 
 if ( logger _ . isDebugEnabled ( ) )
