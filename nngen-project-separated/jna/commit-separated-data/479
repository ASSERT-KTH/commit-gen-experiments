BLEU SCORE: 0.049900497019368314

TEST MSG: clean up platform test runner , run on all platforms
GENERATED MSG: fix contrib test runs on win64

TEST DIFF (one line): diff - - git a / build . xml b / build . xml <nl> index 3a1f756 . . 846cbd9 100644 <nl> - - - a / build . xml <nl> + + + b / build . xml <nl> @ @ - 856 , 7 + 856 , 7 @ @ osname = macosx ; processor = x86 ; processor = x86 - 64 ; processor = ppc <nl> < / target > <nl> <nl> < target name = " contrib - test " depends = " contrib - jars , compile - tests " > <nl> - < subant target = " test " failonerror = " true " > <nl> + < subant target = " test " failonerror = " true " inheritall = " true " inheritrefs = " true " > <nl> < property name = " file . reference . jna . build " location = " $ { build } " / > <nl> < property name = " file . reference . jna . jar " location = " $ { build } / $ { jar } " / > <nl> < property name = " libs . junit . classpath " location = " lib / junit . jar " / > <nl> diff - - git a / contrib / platform / build . xml b / contrib / platform / build . xml <nl> index 7bddddc . . b7a2161 100644 <nl> - - - a / contrib / platform / build . xml <nl> + + + b / contrib / platform / build . xml <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> < ? xml version = " 1 . 0 " encoding = " UTF - 8 " ? > <nl> < project name = " platform " default = " default " basedir = " . " > <nl> - < description > Builds , tests , and runs the project platform . < / description > <nl> + < description > Builds and tests platform - specific code . < / description > <nl> < import file = " nbproject / build - impl . xml " / > <nl> < ! - - <nl> <nl> @ @ - 63 , 46 + 63 , 77 @ @ <nl> nbproject / build - impl . xml file . <nl> <nl> - - > <nl> - < condition property = " tests . platform " value = " test - win32 " > <nl> - < os family = " windows " / > <nl> - < / condition > <nl> - < condition property = " tests . platform " value = " test - osx " > <nl> - < os family = " mac " / > <nl> - < / condition > <nl> - < condition property = " tests . platform " value = " test - linux " > <nl> - < os family = " unix " / > <nl> - < / condition > <nl> - < target name = " test " depends = " init , compile - test " description = " Run unit tests . " if = " tests . platform " > <nl> - 	 < antcall target = " $ { tests . platform } " / > <nl> - < / target > <nl> - < target name = " test - report " > <nl> + < target name = " test " depends = " init , compile - test , - pre - test - run " description = " Run platform unit tests . " > <nl> + < property name = " test . fork " value = " yes " / > <nl> + < property name = " build . test . results . dir . abs " location = " $ { build . test . results . dir } " / > <nl> + < mkdir dir = " $ { build . test . results . dir . abs } " / > <nl> + < echo > Saving test results in $ { build . test . results . dir . abs } < / echo > <nl> + < condition property = " tests . platform " value = " * * / mac / * * " > <nl> + < os family = " mac " / > <nl> + < / condition > <nl> + < condition property = " tests . platform " value = " * * / win32 / * * " > <nl> + < os family = " windows " / > <nl> + < / condition > <nl> + < condition property = " tests . platform " value = " * * / unix / * * " > <nl> + < os family = " unix " / > <nl> + < / condition > <nl> + < property name = " tests . platform " value = " " / > <nl> + < property name = " tests . exclude " value = " " / > <nl> + < property name = " tests . exclude - patterns " value = " " / > <nl> + < condition property = " java . awt . headless " value = " true " > <nl> + < isset property = " headless " / > <nl> + < / condition > <nl> + < condition property = " vmopt . arch " value = " - d64 " else = " - Dignore " > <nl> + < and > <nl> + < ! - - Sun 64 - bit VM for windows doesn ' t support the - d64 switch - - > <nl> + < not > < os family = " windows " / > < / not > <nl> + < equals arg1 = " $ { vm . arch } " arg2 = " - d64 " trim = " true " / > <nl> + < / and > <nl> + < / condition > <nl> + < propertyset id = " headless " > <nl> + < propertyref prefix = " java . awt . headless " / > <nl> + < / propertyset > <nl> + < echo > tests . platform = $ { tests . platform } < / echo > <nl> + < junit fork = " $ { test . fork } " failureproperty = " testfailure " tempdir = " $ { build . dir } " > <nl> + < ! - - optionally run headless - - > <nl> + < syspropertyset refid = " headless " / > <nl> + < ! - - avoid VM conflicts with JNA protected mode - - > <nl> + < env key = " $ { ld . preload . name } " file = " $ { libjsig } " / > <nl> + < ! - - Ignore any system install of JNA - - > <nl> + < sysproperty key = " jna . nosys " value = " true " / > <nl> + < ! - - Avoid VM crashes , if possible - - > <nl> + < sysproperty key = " jna . protected " value = " true " / > <nl> + < sysproperty key = " jna . builddir " file = " $ { file . reference . jna . build } " / > <nl> + < jvmarg value = " $ { vmopt . arch } " / > <nl> + < classpath > < path path = " $ { run . test . classpath } " / > < / classpath > <nl> + < formatter type = " brief " usefile = " false " / > <nl> + < formatter type = " xml " / > <nl> + < batchtest todir = " $ { build . test . results . dir } " > <nl> + < fileset dir = " $ { test . src . dir } " excludes = " $ { tests . exclude - patterns } " > <nl> + < ! - - Until StructureFieldOrderTest gets fixed up a little - - > <nl> + < exclude name = " * * / StructureFieldOrderTest . java " / > <nl> + < include name = " com / sun / jna / platform / * Test . java " / > <nl> + < include name = " $ { tests . platform } " / > <nl> + < exclude name = " $ { tests . exclude } " / > <nl> + < / fileset > <nl> + < / batchtest > <nl> + < / junit > <nl> < junitreport todir = " $ { build . test . results . dir } " > <nl> 	 < fileset dir = " $ { build . test . results . dir } " > <nl> 	 < include name = " TEST - * . xml " / > <nl> 	 < / fileset > <nl> 	 < report todir = " $ { build . test . results . dir } " / > <nl> < / junitreport > <nl> - < property name = " build . test . results . dir . abs " location = " $ { build . test . results . dir } " / > <nl> < echo message = " View test report in file : / / $ { build . test . results . dir . abs } / index . html " / > <nl> + < fail if = " testfailure " > One or more tests failed < / fail > <nl> < / target > <nl> - < target name = " test - osx " > <nl> - < echo > No platform tests yet for OSX < / echo > <nl> - < / target > <nl> - < target name = " test - win32 " depends = " - pre - test - run , - do - test - run , test - report , - post - test - run , - test - browse " / > <nl> <nl> - < target name = " test - linux " depends = " - pre - test - run - single " > <nl> + < ! - - One - off test to check field order definitions - - > <nl> + < target name = " test - field - order " depends = " - pre - test - run - single " > <nl> < ! - - @ todo How to ensure sys prop : jna . nosys = true is seen in tests ? - - > <nl> < ! - - < property name = " test . includes " value = " com / sun / jna / platform / * * / * . java " / > - - > <nl> < property name = " test . includes " value = " com / sun / jna / platform / StructureFieldOrderTest . java " / > <nl> - <nl> < property name = " javac . includes " value = " * * / * " / > <nl> - <nl> < antcall target = " test - single " / > <nl> - <nl> - < ! - - <nl> - < antcall target = " test - report " / > <nl> - < antcall target = " - post - test - run " / > <nl> - < antcall target = " - test - browse " / > <nl> - - - > <nl> < / target > <nl> < / project >
NEAREST DIFF (one line): diff - - git a / dist / sunos - amd64 . jar b / dist / sunos - amd64 . jar <nl> index 7b70877 . . 0b23b3a 100644 <nl> Binary files a / dist / sunos - amd64 . jar and b / dist / sunos - amd64 . jar differ <nl> diff - - git a / dist / sunos - x86 . jar b / dist / sunos - x86 . jar <nl> index adb2e8a . . f4e2e48 100644 <nl> Binary files a / dist / sunos - x86 . jar and b / dist / sunos - x86 . jar differ

TEST DIFF:
diff - - git a / build . xml b / build . xml 
 index 3a1f756 . . 846cbd9 100644 
 - - - a / build . xml 
 + + + b / build . xml 
 @ @ - 856 , 7 + 856 , 7 @ @ osname = macosx ; processor = x86 ; processor = x86 - 64 ; processor = ppc 
 < / target > 
 
 < target name = " contrib - test " depends = " contrib - jars , compile - tests " > 
 - < subant target = " test " failonerror = " true " > 
 + < subant target = " test " failonerror = " true " inheritall = " true " inheritrefs = " true " > 
 < property name = " file . reference . jna . build " location = " $ { build } " / > 
 < property name = " file . reference . jna . jar " location = " $ { build } / $ { jar } " / > 
 < property name = " libs . junit . classpath " location = " lib / junit . jar " / > 
 diff - - git a / contrib / platform / build . xml b / contrib / platform / build . xml 
 index 7bddddc . . b7a2161 100644 
 - - - a / contrib / platform / build . xml 
 + + + b / contrib / platform / build . xml 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 < ? xml version = " 1 . 0 " encoding = " UTF - 8 " ? > 
 < project name = " platform " default = " default " basedir = " . " > 
 - < description > Builds , tests , and runs the project platform . < / description > 
 + < description > Builds and tests platform - specific code . < / description > 
 < import file = " nbproject / build - impl . xml " / > 
 < ! - - 
 
 @ @ - 63 , 46 + 63 , 77 @ @ 
 nbproject / build - impl . xml file . 
 
 - - > 
 - < condition property = " tests . platform " value = " test - win32 " > 
 - < os family = " windows " / > 
 - < / condition > 
 - < condition property = " tests . platform " value = " test - osx " > 
 - < os family = " mac " / > 
 - < / condition > 
 - < condition property = " tests . platform " value = " test - linux " > 
 - < os family = " unix " / > 
 - < / condition > 
 - < target name = " test " depends = " init , compile - test " description = " Run unit tests . " if = " tests . platform " > 
 - 	 < antcall target = " $ { tests . platform } " / > 
 - < / target > 
 - < target name = " test - report " > 
 + < target name = " test " depends = " init , compile - test , - pre - test - run " description = " Run platform unit tests . " > 
 + < property name = " test . fork " value = " yes " / > 
 + < property name = " build . test . results . dir . abs " location = " $ { build . test . results . dir } " / > 
 + < mkdir dir = " $ { build . test . results . dir . abs } " / > 
 + < echo > Saving test results in $ { build . test . results . dir . abs } < / echo > 
 + < condition property = " tests . platform " value = " * * / mac / * * " > 
 + < os family = " mac " / > 
 + < / condition > 
 + < condition property = " tests . platform " value = " * * / win32 / * * " > 
 + < os family = " windows " / > 
 + < / condition > 
 + < condition property = " tests . platform " value = " * * / unix / * * " > 
 + < os family = " unix " / > 
 + < / condition > 
 + < property name = " tests . platform " value = " " / > 
 + < property name = " tests . exclude " value = " " / > 
 + < property name = " tests . exclude - patterns " value = " " / > 
 + < condition property = " java . awt . headless " value = " true " > 
 + < isset property = " headless " / > 
 + < / condition > 
 + < condition property = " vmopt . arch " value = " - d64 " else = " - Dignore " > 
 + < and > 
 + < ! - - Sun 64 - bit VM for windows doesn ' t support the - d64 switch - - > 
 + < not > < os family = " windows " / > < / not > 
 + < equals arg1 = " $ { vm . arch } " arg2 = " - d64 " trim = " true " / > 
 + < / and > 
 + < / condition > 
 + < propertyset id = " headless " > 
 + < propertyref prefix = " java . awt . headless " / > 
 + < / propertyset > 
 + < echo > tests . platform = $ { tests . platform } < / echo > 
 + < junit fork = " $ { test . fork } " failureproperty = " testfailure " tempdir = " $ { build . dir } " > 
 + < ! - - optionally run headless - - > 
 + < syspropertyset refid = " headless " / > 
 + < ! - - avoid VM conflicts with JNA protected mode - - > 
 + < env key = " $ { ld . preload . name } " file = " $ { libjsig } " / > 
 + < ! - - Ignore any system install of JNA - - > 
 + < sysproperty key = " jna . nosys " value = " true " / > 
 + < ! - - Avoid VM crashes , if possible - - > 
 + < sysproperty key = " jna . protected " value = " true " / > 
 + < sysproperty key = " jna . builddir " file = " $ { file . reference . jna . build } " / > 
 + < jvmarg value = " $ { vmopt . arch } " / > 
 + < classpath > < path path = " $ { run . test . classpath } " / > < / classpath > 
 + < formatter type = " brief " usefile = " false " / > 
 + < formatter type = " xml " / > 
 + < batchtest todir = " $ { build . test . results . dir } " > 
 + < fileset dir = " $ { test . src . dir } " excludes = " $ { tests . exclude - patterns } " > 
 + < ! - - Until StructureFieldOrderTest gets fixed up a little - - > 
 + < exclude name = " * * / StructureFieldOrderTest . java " / > 
 + < include name = " com / sun / jna / platform / * Test . java " / > 
 + < include name = " $ { tests . platform } " / > 
 + < exclude name = " $ { tests . exclude } " / > 
 + < / fileset > 
 + < / batchtest > 
 + < / junit > 
 < junitreport todir = " $ { build . test . results . dir } " > 
 	 < fileset dir = " $ { build . test . results . dir } " > 
 	 < include name = " TEST - * . xml " / > 
 	 < / fileset > 
 	 < report todir = " $ { build . test . results . dir } " / > 
 < / junitreport > 
 - < property name = " build . test . results . dir . abs " location = " $ { build . test . results . dir } " / > 
 < echo message = " View test report in file : / / $ { build . test . results . dir . abs } / index . html " / > 
 + < fail if = " testfailure " > One or more tests failed < / fail > 
 < / target > 
 - < target name = " test - osx " > 
 - < echo > No platform tests yet for OSX < / echo > 
 - < / target > 
 - < target name = " test - win32 " depends = " - pre - test - run , - do - test - run , test - report , - post - test - run , - test - browse " / > 
 
 - < target name = " test - linux " depends = " - pre - test - run - single " > 
 + < ! - - One - off test to check field order definitions - - > 
 + < target name = " test - field - order " depends = " - pre - test - run - single " > 
 < ! - - @ todo How to ensure sys prop : jna . nosys = true is seen in tests ? - - > 
 < ! - - < property name = " test . includes " value = " com / sun / jna / platform / * * / * . java " / > - - > 
 < property name = " test . includes " value = " com / sun / jna / platform / StructureFieldOrderTest . java " / > 
 - 
 < property name = " javac . includes " value = " * * / * " / > 
 - 
 < antcall target = " test - single " / > 
 - 
 - < ! - - 
 - < antcall target = " test - report " / > 
 - < antcall target = " - post - test - run " / > 
 - < antcall target = " - test - browse " / > 
 - - - > 
 < / target > 
 < / project >

NEAREST DIFF:
diff - - git a / dist / sunos - amd64 . jar b / dist / sunos - amd64 . jar 
 index 7b70877 . . 0b23b3a 100644 
 Binary files a / dist / sunos - amd64 . jar and b / dist / sunos - amd64 . jar differ 
 diff - - git a / dist / sunos - x86 . jar b / dist / sunos - x86 . jar 
 index adb2e8a . . f4e2e48 100644 
 Binary files a / dist / sunos - x86 . jar and b / dist / sunos - x86 . jar differ
