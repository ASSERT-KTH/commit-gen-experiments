BLEU SCORE: 0.03057230827292727

TEST MSG: Test for CreateRemoteThread
GENERATED MSG: Fixed testReadFile , not always null - terminated .

TEST DIFF (one line): diff - - git a / contrib / platform / test / com / sun / jna / platform / win32 / Kernel32Test . java b / contrib / platform / test / com / sun / jna / platform / win32 / Kernel32Test . java <nl> index 72784cf . . 699795c 100644 <nl> - - - a / contrib / platform / test / com / sun / jna / platform / win32 / Kernel32Test . java <nl> + + + b / contrib / platform / test / com / sun / jna / platform / win32 / Kernel32Test . java <nl> @ @ - 615 , 18 + 615 , 10 @ @ public class Kernel32Test extends TestCase { <nl> reader . close ( ) ; <nl> } <nl> <nl> - private int getNonexistantPID ( ) { <nl> - 	 int dwPID ; <nl> - 	 HANDLE hProc ; <nl> - 	 Random r = new Random ( 11111111 ) ; <nl> - 	 do { <nl> - 	 final int dwDesiredAccess = 0x1 ; / / PROCESS _ TERMINATE <nl> - 	 final boolean bInheritHandle = false ; <nl> - 	 dwPID = r . nextInt ( ) & 65535 ; <nl> - 	 	 hProc = Kernel32 . INSTANCE . OpenProcess ( dwDesiredAccess , bInheritHandle , dwPID ) ; <nl> - 	 } while ( ( hProc ! = null ) | | ( Kernel32 . INSTANCE . GetLastError ( ) ! = WinError . ERROR _ INVALID _ PARAMETER ) ) ; <nl> - 	 <nl> - 	 return dwPID ; <nl> + public final void testCreateRemoteThread ( ) throws IOException { <nl> + 	 HANDLE hThrd = Kernel32 . INSTANCE . CreateRemoteThread ( null , null , 0 , null , null , null , null ) ; <nl> + 	 assertNull ( hThrd ) ; <nl> + 	 assertEquals ( Kernel32 . INSTANCE . GetLastError ( ) , WinError . ERROR _ INVALID _ HANDLE ) ; <nl> } <nl> <nl> public void testWriteProcessMemory ( ) {
NEAREST DIFF (one line): diff - - git a / contrib / platform / src / com / sun / jna / platform / win32 / DsGetDC . java b / contrib / platform / src / com / sun / jna / platform / win32 / DsGetDC . java <nl> index e069b2a . . f218eda 100644 <nl> - - - a / contrib / platform / src / com / sun / jna / platform / win32 / DsGetDC . java <nl> + + + b / contrib / platform / src / com / sun / jna / platform / win32 / DsGetDC . java <nl> @ @ - 209 , 7 + 209 , 14 @ @ public interface DsGetDC extends StdCallLibrary { <nl> } <nl> 	 	 <nl> public DS _ DOMAIN _ TRUSTS . ByReference t ; <nl> - 	 	 <nl> + <nl> + public PDS _ DOMAIN _ TRUSTS ( ) { <nl> + } <nl> + <nl> + public PDS _ DOMAIN _ TRUSTS ( Pointer p ) { <nl> + super ( p ) ; <nl> + } <nl> + <nl> / * * <nl> * Returns domain trusts . <nl> * @ param count <nl> diff - - git a / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32 . java b / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32 . java <nl> index 2860e19 . . 67c90c9 100644 <nl> - - - a / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32 . java <nl> + + + b / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32 . java <nl> @ @ - 388 , 7 + 388 , 7 @ @ public interface Netapi32 extends StdCallLibrary { <nl> 	 * @ param Flags <nl> 	 * Contains a set of flags that determines which domain trusts to enumerate . <nl> 	 * @ param Domains <nl> - 	 * Pointer to a PDS _ DOMAIN _ TRUSTS value that receives an array of DS _ DOMAIN _ TRUSTS structures . <nl> + 	 * Receives a pointer which points to an array of DS _ DOMAIN _ TRUSTS structures . <nl> 	 * Each structure in this array contains trust data about a domain . The caller must free this <nl> 	 * memory when it is no longer required by calling NetApiBufferFree . <nl> 	 * @ param DomainCount <nl> @ @ - 397 , 7 + 397 , 7 @ @ public interface Netapi32 extends StdCallLibrary { <nl> 	 * Returns ERROR _ SUCCESS if successful or a Win32 error code otherwise . <nl> 	 * / <nl> 	 public int DsEnumerateDomainTrusts ( String serverName , int Flags , <nl> - 	 	 	 PDS _ DOMAIN _ TRUSTS . ByReference Domains , IntByReference DomainCount ) ; <nl> + 	 	 	 PointerByReference Domains , IntByReference DomainCount ) ; <nl> 	 <nl> 	 / * * <nl> 	 * The NetUserGetInfo function retrieves information about a particular user account on a server . <nl> diff - - git a / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32Util . java b / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32Util . java <nl> index b33c566 . . 253dfa8 100644 <nl> - - - a / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32Util . java <nl> + + + b / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32Util . java <nl> @ @ - 618 , 13 + 618 , 14 @ @ public abstract class Netapi32Util { <nl> * / <nl> public static DomainTrust [ ] getDomainTrusts ( String serverName ) { <nl> 	 IntByReference domainCount = new IntByReference ( ) ; <nl> - 	 PDS _ DOMAIN _ TRUSTS . ByReference domains = new PDS _ DOMAIN _ TRUSTS . ByReference ( ) ; <nl> - 	 int rc = Netapi32 . INSTANCE . DsEnumerateDomainTrusts ( serverName , <nl> - 	 	 	 DsGetDC . DS _ DOMAIN _ VALID _ FLAGS , domains , domainCount ) ; <nl> + PointerByReference domainsPointerRef = new PointerByReference ( ) ; <nl> + int rc = Netapi32 . INSTANCE . DsEnumerateDomainTrusts ( serverName , <nl> + DsGetDC . DS _ DOMAIN _ VALID _ FLAGS , domainsPointerRef , domainCount ) ; <nl> 	 if ( W32Errors . NO _ ERROR ! = rc ) { <nl> throw new Win32Exception ( rc ) ; <nl> 	 } <nl> 	 try { <nl> + PDS _ DOMAIN _ TRUSTS domains = new PDS _ DOMAIN _ TRUSTS ( domainsPointerRef . getValue ( ) ) ; <nl> int domainCountValue = domainCount . getValue ( ) ; <nl> ArrayList < DomainTrust > trusts = new ArrayList < DomainTrust > ( domainCountValue ) ; <nl> for ( DS _ DOMAIN _ TRUSTS trust : domains . getTrusts ( domainCountValue ) ) { <nl> @ @ - 648 , 7 + 649 , 7 @ @ public abstract class Netapi32Util { <nl> } <nl> return trusts . toArray ( new DomainTrust [ 0 ] ) ; <nl> 	 } finally { <nl> - rc = Netapi32 . INSTANCE . NetApiBufferFree ( domains . getPointer ( ) . getPointer ( 0 ) ) ; 	 	 <nl> + rc = Netapi32 . INSTANCE . NetApiBufferFree ( domainsPointerRef . getValue ( ) ) ; <nl> if ( W32Errors . NO _ ERROR ! = rc ) { <nl> throw new Win32Exception ( rc ) ; <nl> }

TEST DIFF:
diff - - git a / contrib / platform / test / com / sun / jna / platform / win32 / Kernel32Test . java b / contrib / platform / test / com / sun / jna / platform / win32 / Kernel32Test . java 
 index 72784cf . . 699795c 100644 
 - - - a / contrib / platform / test / com / sun / jna / platform / win32 / Kernel32Test . java 
 + + + b / contrib / platform / test / com / sun / jna / platform / win32 / Kernel32Test . java 
 @ @ - 615 , 18 + 615 , 10 @ @ public class Kernel32Test extends TestCase { 
 reader . close ( ) ; 
 } 
 
 - private int getNonexistantPID ( ) { 
 - 	 int dwPID ; 
 - 	 HANDLE hProc ; 
 - 	 Random r = new Random ( 11111111 ) ; 
 - 	 do { 
 - 	 final int dwDesiredAccess = 0x1 ; / / PROCESS _ TERMINATE 
 - 	 final boolean bInheritHandle = false ; 
 - 	 dwPID = r . nextInt ( ) & 65535 ; 
 - 	 	 hProc = Kernel32 . INSTANCE . OpenProcess ( dwDesiredAccess , bInheritHandle , dwPID ) ; 
 - 	 } while ( ( hProc ! = null ) | | ( Kernel32 . INSTANCE . GetLastError ( ) ! = WinError . ERROR _ INVALID _ PARAMETER ) ) ; 
 - 	 
 - 	 return dwPID ; 
 + public final void testCreateRemoteThread ( ) throws IOException { 
 + 	 HANDLE hThrd = Kernel32 . INSTANCE . CreateRemoteThread ( null , null , 0 , null , null , null , null ) ; 
 + 	 assertNull ( hThrd ) ; 
 + 	 assertEquals ( Kernel32 . INSTANCE . GetLastError ( ) , WinError . ERROR _ INVALID _ HANDLE ) ; 
 } 
 
 public void testWriteProcessMemory ( ) {

NEAREST DIFF:
diff - - git a / contrib / platform / src / com / sun / jna / platform / win32 / DsGetDC . java b / contrib / platform / src / com / sun / jna / platform / win32 / DsGetDC . java 
 index e069b2a . . f218eda 100644 
 - - - a / contrib / platform / src / com / sun / jna / platform / win32 / DsGetDC . java 
 + + + b / contrib / platform / src / com / sun / jna / platform / win32 / DsGetDC . java 
 @ @ - 209 , 7 + 209 , 14 @ @ public interface DsGetDC extends StdCallLibrary { 
 } 
 	 	 
 public DS _ DOMAIN _ TRUSTS . ByReference t ; 
 - 	 	 
 + 
 + public PDS _ DOMAIN _ TRUSTS ( ) { 
 + } 
 + 
 + public PDS _ DOMAIN _ TRUSTS ( Pointer p ) { 
 + super ( p ) ; 
 + } 
 + 
 / * * 
 * Returns domain trusts . 
 * @ param count 
 diff - - git a / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32 . java b / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32 . java 
 index 2860e19 . . 67c90c9 100644 
 - - - a / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32 . java 
 + + + b / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32 . java 
 @ @ - 388 , 7 + 388 , 7 @ @ public interface Netapi32 extends StdCallLibrary { 
 	 * @ param Flags 
 	 * Contains a set of flags that determines which domain trusts to enumerate . 
 	 * @ param Domains 
 - 	 * Pointer to a PDS _ DOMAIN _ TRUSTS value that receives an array of DS _ DOMAIN _ TRUSTS structures . 
 + 	 * Receives a pointer which points to an array of DS _ DOMAIN _ TRUSTS structures . 
 	 * Each structure in this array contains trust data about a domain . The caller must free this 
 	 * memory when it is no longer required by calling NetApiBufferFree . 
 	 * @ param DomainCount 
 @ @ - 397 , 7 + 397 , 7 @ @ public interface Netapi32 extends StdCallLibrary { 
 	 * Returns ERROR _ SUCCESS if successful or a Win32 error code otherwise . 
 	 * / 
 	 public int DsEnumerateDomainTrusts ( String serverName , int Flags , 
 - 	 	 	 PDS _ DOMAIN _ TRUSTS . ByReference Domains , IntByReference DomainCount ) ; 
 + 	 	 	 PointerByReference Domains , IntByReference DomainCount ) ; 
 	 
 	 / * * 
 	 * The NetUserGetInfo function retrieves information about a particular user account on a server . 
 diff - - git a / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32Util . java b / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32Util . java 
 index b33c566 . . 253dfa8 100644 
 - - - a / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32Util . java 
 + + + b / contrib / platform / src / com / sun / jna / platform / win32 / Netapi32Util . java 
 @ @ - 618 , 13 + 618 , 14 @ @ public abstract class Netapi32Util { 
 * / 
 public static DomainTrust [ ] getDomainTrusts ( String serverName ) { 
 	 IntByReference domainCount = new IntByReference ( ) ; 
 - 	 PDS _ DOMAIN _ TRUSTS . ByReference domains = new PDS _ DOMAIN _ TRUSTS . ByReference ( ) ; 
 - 	 int rc = Netapi32 . INSTANCE . DsEnumerateDomainTrusts ( serverName , 
 - 	 	 	 DsGetDC . DS _ DOMAIN _ VALID _ FLAGS , domains , domainCount ) ; 
 + PointerByReference domainsPointerRef = new PointerByReference ( ) ; 
 + int rc = Netapi32 . INSTANCE . DsEnumerateDomainTrusts ( serverName , 
 + DsGetDC . DS _ DOMAIN _ VALID _ FLAGS , domainsPointerRef , domainCount ) ; 
 	 if ( W32Errors . NO _ ERROR ! = rc ) { 
 throw new Win32Exception ( rc ) ; 
 	 } 
 	 try { 
 + PDS _ DOMAIN _ TRUSTS domains = new PDS _ DOMAIN _ TRUSTS ( domainsPointerRef . getValue ( ) ) ; 
 int domainCountValue = domainCount . getValue ( ) ; 
 ArrayList < DomainTrust > trusts = new ArrayList < DomainTrust > ( domainCountValue ) ; 
 for ( DS _ DOMAIN _ TRUSTS trust : domains . getTrusts ( domainCountValue ) ) { 
 @ @ - 648 , 7 + 649 , 7 @ @ public abstract class Netapi32Util { 
 } 
 return trusts . toArray ( new DomainTrust [ 0 ] ) ; 
 	 } finally { 
 - rc = Netapi32 . INSTANCE . NetApiBufferFree ( domains . getPointer ( ) . getPointer ( 0 ) ) ; 	 	 
 + rc = Netapi32 . INSTANCE . NetApiBufferFree ( domainsPointerRef . getValue ( ) ) ; 
 if ( W32Errors . NO _ ERROR ! = rc ) { 
 throw new Win32Exception ( rc ) ; 
 }
