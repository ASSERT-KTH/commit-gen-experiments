BLEU SCORE: 0.028531838788864484

TEST MSG: Add moxie support . Release 3 . 0 . 12 .
GENERATED MSG: 2008 - 02 - 21 Anthony Green < green @ redhat . com >

TEST DIFF (one line): diff - - git a / ChangeLog b / ChangeLog <nl> index 74d529e . . 92c1a15 100644 <nl> - - - a / ChangeLog <nl> + + + b / ChangeLog <nl> @ @ - 1 , 3 + 1 , 27 @ @ <nl> + 2013 - 02 - 11 Anthony Green < green @ moxielogic . com > <nl> + <nl> + 	 * configure . ac : Update release number to 3 . 0 . 12 . <nl> + 	 * configure : Rebuilt . <nl> + 	 * README : Update release info . <nl> + <nl> + 2013 - 02 - 10 Anthony Green < green @ moxielogic . com > <nl> + <nl> + 	 * README : Add Moxie . <nl> + 	 * src / moxie / ffi . c : Created . <nl> + 	 * src / moxie / eabi . S : Created . <nl> + 	 * src / moxie / ffitarget . h : Created . <nl> + 	 * Makefile . am ( nodist _ libffi _ la _ SOURCES ) : Add Moxie . <nl> + 	 * Makefile . in : Rebuilt . <nl> + 	 * configure . ac : Add Moxie . <nl> + 	 * configure : Rebuilt . <nl> + 	 * testsuite / libffi . call / huge _ struct . c : Disable format string <nl> + 	 warnings for moxie * - * - elf tests . <nl> + <nl> + 2013 - 02 - 10 Anthony Green < green @ moxielogic . com > <nl> + <nl> + 	 * Makefile . am ( LTLDFLAGS ) : Fix reference . <nl> + 	 * Makefile . in : Rebuilt . <nl> + <nl> 2013 - 02 - 10 Anthony Green < green @ moxielogic . com > <nl> <nl> 	 * README : Update supported platforms . Update test results link . <nl> diff - - git a / Makefile . am b / Makefile . am <nl> index 5787f9e . . 8f1362a 100644 <nl> - - - a / Makefile . am <nl> + + + b / Makefile . am <nl> @ @ - 148 , 6 + 148 , 9 @ @ endif <nl> if M68K <nl> nodist _ libffi _ la _ SOURCES + = src / m68k / ffi . c src / m68k / sysv . S <nl> endif <nl> + if MOXIE <nl> + nodist _ libffi _ la _ SOURCES + = src / moxie / ffi . c src / moxie / eabi . S <nl> + endif <nl> if MICROBLAZE <nl> nodist _ libffi _ la _ SOURCES + = src / microblaze / ffi . c src / microblaze / sysv . S <nl> endif <nl> @ @ - 209 , 7 + 212 , 7 @ @ endif <nl> libffi _ convenience _ la _ SOURCES = $ ( libffi _ la _ SOURCES ) <nl> nodist _ libffi _ convenience _ la _ SOURCES = $ ( nodist _ libffi _ la _ SOURCES ) <nl> <nl> - LTLDFLAGS = $ ( shell $ ( SHELL ) $ ( top _ srcdir ) / . . / libtool - ldflags $ ( LDFLAGS ) ) <nl> + LTLDFLAGS = $ ( shell $ ( SHELL ) $ ( top _ srcdir ) / libtool - ldflags $ ( LDFLAGS ) ) <nl> <nl> libffi _ la _ LDFLAGS = - no - undefined - version - info ` grep - v ' ^ \ # ' $ ( srcdir ) / libtool - version ` $ ( LTLDFLAGS ) $ ( AM _ LTLDFLAGS ) <nl> <nl> diff - - git a / Makefile . in b / Makefile . in <nl> index 7317ec1 . . fc5e80e 100644 <nl> - - - a / Makefile . in <nl> + + + b / Makefile . in <nl> @ @ - 65 , 25 + 65 , 26 @ @ target _ triplet = @ target @ <nl> @ IA64 _ TRUE @ am _ _ append _ 11 = src / ia64 / ffi . c src / ia64 / unix . S <nl> @ M32R _ TRUE @ am _ _ append _ 12 = src / m32r / sysv . S src / m32r / ffi . c <nl> @ M68K _ TRUE @ am _ _ append _ 13 = src / m68k / ffi . c src / m68k / sysv . S <nl> - @ MICROBLAZE _ TRUE @ am _ _ append _ 14 = src / microblaze / ffi . c src / microblaze / sysv . S <nl> - @ POWERPC _ TRUE @ am _ _ append _ 15 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S src / powerpc / linux64 . S src / powerpc / linux64 _ closure . S <nl> - @ POWERPC _ AIX _ TRUE @ am _ _ append _ 16 = src / powerpc / ffi _ darwin . c src / powerpc / aix . S src / powerpc / aix _ closure . S <nl> - @ POWERPC _ DARWIN _ TRUE @ am _ _ append _ 17 = src / powerpc / ffi _ darwin . c src / powerpc / darwin . S src / powerpc / darwin _ closure . S <nl> - @ POWERPC _ FREEBSD _ TRUE @ am _ _ append _ 18 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S <nl> - @ AARCH64 _ TRUE @ am _ _ append _ 19 = src / aarch64 / sysv . S src / aarch64 / ffi . c <nl> - @ ARM _ TRUE @ am _ _ append _ 20 = src / arm / sysv . S src / arm / ffi . c <nl> - @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ append _ 21 = src / arm / trampoline . S <nl> - @ AVR32 _ TRUE @ am _ _ append _ 22 = src / avr32 / sysv . S src / avr32 / ffi . c <nl> - @ LIBFFI _ CRIS _ TRUE @ am _ _ append _ 23 = src / cris / sysv . S src / cris / ffi . c <nl> - @ FRV _ TRUE @ am _ _ append _ 24 = src / frv / eabi . S src / frv / ffi . c <nl> - @ S390 _ TRUE @ am _ _ append _ 25 = src / s390 / sysv . S src / s390 / ffi . c <nl> - @ X86 _ 64 _ TRUE @ am _ _ append _ 26 = src / x86 / ffi64 . c src / x86 / unix64 . S src / x86 / ffi . c src / x86 / sysv . S <nl> - @ SH _ TRUE @ am _ _ append _ 27 = src / sh / sysv . S src / sh / ffi . c <nl> - @ SH64 _ TRUE @ am _ _ append _ 28 = src / sh64 / sysv . S src / sh64 / ffi . c <nl> - @ PA _ LINUX _ TRUE @ am _ _ append _ 29 = src / pa / linux . S src / pa / ffi . c <nl> - @ PA _ HPUX _ TRUE @ am _ _ append _ 30 = src / pa / hpux32 . S src / pa / ffi . c <nl> - @ TILE _ TRUE @ am _ _ append _ 31 = src / tile / tile . S src / tile / ffi . c <nl> - @ XTENSA _ TRUE @ am _ _ append _ 32 = src / xtensa / sysv . S src / xtensa / ffi . c <nl> + @ MOXIE _ TRUE @ am _ _ append _ 14 = src / moxie / ffi . c src / moxie / eabi . S <nl> + @ MICROBLAZE _ TRUE @ am _ _ append _ 15 = src / microblaze / ffi . c src / microblaze / sysv . S <nl> + @ POWERPC _ TRUE @ am _ _ append _ 16 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S src / powerpc / linux64 . S src / powerpc / linux64 _ closure . S <nl> + @ POWERPC _ AIX _ TRUE @ am _ _ append _ 17 = src / powerpc / ffi _ darwin . c src / powerpc / aix . S src / powerpc / aix _ closure . S <nl> + @ POWERPC _ DARWIN _ TRUE @ am _ _ append _ 18 = src / powerpc / ffi _ darwin . c src / powerpc / darwin . S src / powerpc / darwin _ closure . S <nl> + @ POWERPC _ FREEBSD _ TRUE @ am _ _ append _ 19 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S <nl> + @ AARCH64 _ TRUE @ am _ _ append _ 20 = src / aarch64 / sysv . S src / aarch64 / ffi . c <nl> + @ ARM _ TRUE @ am _ _ append _ 21 = src / arm / sysv . S src / arm / ffi . c <nl> + @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ append _ 22 = src / arm / trampoline . S <nl> + @ AVR32 _ TRUE @ am _ _ append _ 23 = src / avr32 / sysv . S src / avr32 / ffi . c <nl> + @ LIBFFI _ CRIS _ TRUE @ am _ _ append _ 24 = src / cris / sysv . S src / cris / ffi . c <nl> + @ FRV _ TRUE @ am _ _ append _ 25 = src / frv / eabi . S src / frv / ffi . c <nl> + @ S390 _ TRUE @ am _ _ append _ 26 = src / s390 / sysv . S src / s390 / ffi . c <nl> + @ X86 _ 64 _ TRUE @ am _ _ append _ 27 = src / x86 / ffi64 . c src / x86 / unix64 . S src / x86 / ffi . c src / x86 / sysv . S <nl> + @ SH _ TRUE @ am _ _ append _ 28 = src / sh / sysv . S src / sh / ffi . c <nl> + @ SH64 _ TRUE @ am _ _ append _ 29 = src / sh64 / sysv . S src / sh64 / ffi . c <nl> + @ PA _ LINUX _ TRUE @ am _ _ append _ 30 = src / pa / linux . S src / pa / ffi . c <nl> + @ PA _ HPUX _ TRUE @ am _ _ append _ 31 = src / pa / hpux32 . S src / pa / ffi . c <nl> + @ TILE _ TRUE @ am _ _ append _ 32 = src / tile / tile . S src / tile / ffi . c <nl> + @ XTENSA _ TRUE @ am _ _ append _ 33 = src / xtensa / sysv . S src / xtensa / ffi . c <nl> subdir = . <nl> DIST _ COMMON = README $ ( am _ _ configure _ deps ) $ ( srcdir ) / Makefile . am \ <nl> 	 $ ( srcdir ) / Makefile . in $ ( srcdir ) / doc / stamp - vti \ <nl> @ @ - 164 , 36 + 165 , 37 @ @ am _ libffi _ la _ OBJECTS = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ <nl> @ IA64 _ TRUE @ am _ _ objects _ 11 = src / ia64 / ffi . lo src / ia64 / unix . lo <nl> @ M32R _ TRUE @ am _ _ objects _ 12 = src / m32r / sysv . lo src / m32r / ffi . lo <nl> @ M68K _ TRUE @ am _ _ objects _ 13 = src / m68k / ffi . lo src / m68k / sysv . lo <nl> - @ MICROBLAZE _ TRUE @ am _ _ objects _ 14 = src / microblaze / ffi . lo \ <nl> + @ MOXIE _ TRUE @ am _ _ objects _ 14 = src / moxie / ffi . lo src / moxie / eabi . lo <nl> + @ MICROBLAZE _ TRUE @ am _ _ objects _ 15 = src / microblaze / ffi . lo \ <nl> @ MICROBLAZE _ TRUE @ 	 src / microblaze / sysv . lo <nl> - @ POWERPC _ TRUE @ am _ _ objects _ 15 = src / powerpc / ffi . lo src / powerpc / sysv . lo \ <nl> + @ POWERPC _ TRUE @ am _ _ objects _ 16 = src / powerpc / ffi . lo src / powerpc / sysv . lo \ <nl> @ POWERPC _ TRUE @ 	 src / powerpc / ppc _ closure . lo \ <nl> @ POWERPC _ TRUE @ 	 src / powerpc / linux64 . lo \ <nl> @ POWERPC _ TRUE @ 	 src / powerpc / linux64 _ closure . lo <nl> - @ POWERPC _ AIX _ TRUE @ am _ _ objects _ 16 = src / powerpc / ffi _ darwin . lo \ <nl> + @ POWERPC _ AIX _ TRUE @ am _ _ objects _ 17 = src / powerpc / ffi _ darwin . lo \ <nl> @ POWERPC _ AIX _ TRUE @ 	 src / powerpc / aix . lo \ <nl> @ POWERPC _ AIX _ TRUE @ 	 src / powerpc / aix _ closure . lo <nl> - @ POWERPC _ DARWIN _ TRUE @ am _ _ objects _ 17 = src / powerpc / ffi _ darwin . lo \ <nl> + @ POWERPC _ DARWIN _ TRUE @ am _ _ objects _ 18 = src / powerpc / ffi _ darwin . lo \ <nl> @ POWERPC _ DARWIN _ TRUE @ 	 src / powerpc / darwin . lo \ <nl> @ POWERPC _ DARWIN _ TRUE @ 	 src / powerpc / darwin _ closure . lo <nl> - @ POWERPC _ FREEBSD _ TRUE @ am _ _ objects _ 18 = src / powerpc / ffi . lo \ <nl> + @ POWERPC _ FREEBSD _ TRUE @ am _ _ objects _ 19 = src / powerpc / ffi . lo \ <nl> @ POWERPC _ FREEBSD _ TRUE @ 	 src / powerpc / sysv . lo \ <nl> @ POWERPC _ FREEBSD _ TRUE @ 	 src / powerpc / ppc _ closure . lo <nl> - @ AARCH64 _ TRUE @ am _ _ objects _ 19 = src / aarch64 / sysv . lo src / aarch64 / ffi . lo <nl> - @ ARM _ TRUE @ am _ _ objects _ 20 = src / arm / sysv . lo src / arm / ffi . lo <nl> - @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ objects _ 21 = src / arm / trampoline . lo <nl> - @ AVR32 _ TRUE @ am _ _ objects _ 22 = src / avr32 / sysv . lo src / avr32 / ffi . lo <nl> - @ LIBFFI _ CRIS _ TRUE @ am _ _ objects _ 23 = src / cris / sysv . lo src / cris / ffi . lo <nl> - @ FRV _ TRUE @ am _ _ objects _ 24 = src / frv / eabi . lo src / frv / ffi . lo <nl> - @ S390 _ TRUE @ am _ _ objects _ 25 = src / s390 / sysv . lo src / s390 / ffi . lo <nl> - @ X86 _ 64 _ TRUE @ am _ _ objects _ 26 = src / x86 / ffi64 . lo src / x86 / unix64 . lo \ <nl> + @ AARCH64 _ TRUE @ am _ _ objects _ 20 = src / aarch64 / sysv . lo src / aarch64 / ffi . lo <nl> + @ ARM _ TRUE @ am _ _ objects _ 21 = src / arm / sysv . lo src / arm / ffi . lo <nl> + @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ objects _ 22 = src / arm / trampoline . lo <nl> + @ AVR32 _ TRUE @ am _ _ objects _ 23 = src / avr32 / sysv . lo src / avr32 / ffi . lo <nl> + @ LIBFFI _ CRIS _ TRUE @ am _ _ objects _ 24 = src / cris / sysv . lo src / cris / ffi . lo <nl> + @ FRV _ TRUE @ am _ _ objects _ 25 = src / frv / eabi . lo src / frv / ffi . lo <nl> + @ S390 _ TRUE @ am _ _ objects _ 26 = src / s390 / sysv . lo src / s390 / ffi . lo <nl> + @ X86 _ 64 _ TRUE @ am _ _ objects _ 27 = src / x86 / ffi64 . lo src / x86 / unix64 . lo \ <nl> @ X86 _ 64 _ TRUE @ 	 src / x86 / ffi . lo src / x86 / sysv . lo <nl> - @ SH _ TRUE @ am _ _ objects _ 27 = src / sh / sysv . lo src / sh / ffi . lo <nl> - @ SH64 _ TRUE @ am _ _ objects _ 28 = src / sh64 / sysv . lo src / sh64 / ffi . lo <nl> - @ PA _ LINUX _ TRUE @ am _ _ objects _ 29 = src / pa / linux . lo src / pa / ffi . lo <nl> - @ PA _ HPUX _ TRUE @ am _ _ objects _ 30 = src / pa / hpux32 . lo src / pa / ffi . lo <nl> - @ TILE _ TRUE @ am _ _ objects _ 31 = src / tile / tile . lo src / tile / ffi . lo <nl> - @ XTENSA _ TRUE @ am _ _ objects _ 32 = src / xtensa / sysv . lo src / xtensa / ffi . lo <nl> + @ SH _ TRUE @ am _ _ objects _ 28 = src / sh / sysv . lo src / sh / ffi . lo <nl> + @ SH64 _ TRUE @ am _ _ objects _ 29 = src / sh64 / sysv . lo src / sh64 / ffi . lo <nl> + @ PA _ LINUX _ TRUE @ am _ _ objects _ 30 = src / pa / linux . lo src / pa / ffi . lo <nl> + @ PA _ HPUX _ TRUE @ am _ _ objects _ 31 = src / pa / hpux32 . lo src / pa / ffi . lo <nl> + @ TILE _ TRUE @ am _ _ objects _ 32 = src / tile / tile . lo src / tile / ffi . lo <nl> + @ XTENSA _ TRUE @ am _ _ objects _ 33 = src / xtensa / sysv . lo src / xtensa / ffi . lo <nl> nodist _ libffi _ la _ OBJECTS = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) \ <nl> 	 $ ( am _ _ objects _ 3 ) $ ( am _ _ objects _ 4 ) $ ( am _ _ objects _ 5 ) \ <nl> 	 $ ( am _ _ objects _ 6 ) $ ( am _ _ objects _ 7 ) $ ( am _ _ objects _ 8 ) \ <nl> @ @ - 204 , 17 + 206 , 18 @ @ nodist _ libffi _ la _ OBJECTS = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) \ <nl> 	 $ ( am _ _ objects _ 21 ) $ ( am _ _ objects _ 22 ) $ ( am _ _ objects _ 23 ) \ <nl> 	 $ ( am _ _ objects _ 24 ) $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) \ <nl> 	 $ ( am _ _ objects _ 27 ) $ ( am _ _ objects _ 28 ) $ ( am _ _ objects _ 29 ) \ <nl> - 	 $ ( am _ _ objects _ 30 ) $ ( am _ _ objects _ 31 ) $ ( am _ _ objects _ 32 ) <nl> + 	 $ ( am _ _ objects _ 30 ) $ ( am _ _ objects _ 31 ) $ ( am _ _ objects _ 32 ) \ <nl> + 	 $ ( am _ _ objects _ 33 ) <nl> libffi _ la _ OBJECTS = $ ( am _ libffi _ la _ OBJECTS ) \ <nl> 	 $ ( nodist _ libffi _ la _ OBJECTS ) <nl> libffi _ la _ LINK = $ ( LIBTOOL ) - - tag = CC $ ( AM _ LIBTOOLFLAGS ) \ <nl> 	 $ ( LIBTOOLFLAGS ) - - mode = link $ ( CCLD ) $ ( AM _ CFLAGS ) $ ( CFLAGS ) \ <nl> 	 $ ( libffi _ la _ LDFLAGS ) $ ( LDFLAGS ) - o $ @ <nl> libffi _ convenience _ la _ LIBADD = <nl> - am _ _ objects _ 33 = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ <nl> + am _ _ objects _ 34 = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ <nl> 	 src / java _ raw _ api . lo src / closures . lo <nl> - am _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 33 ) <nl> - am _ _ objects _ 34 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ <nl> + am _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 34 ) <nl> + am _ _ objects _ 35 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ <nl> 	 $ ( am _ _ objects _ 4 ) $ ( am _ _ objects _ 5 ) $ ( am _ _ objects _ 6 ) \ <nl> 	 $ ( am _ _ objects _ 7 ) $ ( am _ _ objects _ 8 ) $ ( am _ _ objects _ 9 ) \ <nl> 	 $ ( am _ _ objects _ 10 ) $ ( am _ _ objects _ 11 ) $ ( am _ _ objects _ 12 ) \ <nl> @ @ - 224 , 8 + 227 , 8 @ @ am _ _ objects _ 34 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ <nl> 	 $ ( am _ _ objects _ 22 ) $ ( am _ _ objects _ 23 ) $ ( am _ _ objects _ 24 ) \ <nl> 	 $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) $ ( am _ _ objects _ 27 ) \ <nl> 	 $ ( am _ _ objects _ 28 ) $ ( am _ _ objects _ 29 ) $ ( am _ _ objects _ 30 ) \ <nl> - 	 $ ( am _ _ objects _ 31 ) $ ( am _ _ objects _ 32 ) <nl> - nodist _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 34 ) <nl> + 	 $ ( am _ _ objects _ 31 ) $ ( am _ _ objects _ 32 ) $ ( am _ _ objects _ 33 ) <nl> + nodist _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 35 ) <nl> libffi _ convenience _ la _ OBJECTS = $ ( am _ libffi _ convenience _ la _ OBJECTS ) \ <nl> 	 $ ( nodist _ libffi _ convenience _ la _ OBJECTS ) <nl> DEFAULT _ INCLUDES = - I . @ am _ _ isrc @ <nl> @ @ - 563 , 10 + 566 , 11 @ @ nodist _ libffi _ la _ SOURCES = $ ( am _ _ append _ 1 ) $ ( am _ _ append _ 2 ) \ <nl> 	 $ ( am _ _ append _ 21 ) $ ( am _ _ append _ 22 ) $ ( am _ _ append _ 23 ) \ <nl> 	 $ ( am _ _ append _ 24 ) $ ( am _ _ append _ 25 ) $ ( am _ _ append _ 26 ) \ <nl> 	 $ ( am _ _ append _ 27 ) $ ( am _ _ append _ 28 ) $ ( am _ _ append _ 29 ) \ <nl> - 	 $ ( am _ _ append _ 30 ) $ ( am _ _ append _ 31 ) $ ( am _ _ append _ 32 ) <nl> + 	 $ ( am _ _ append _ 30 ) $ ( am _ _ append _ 31 ) $ ( am _ _ append _ 32 ) \ <nl> + 	 $ ( am _ _ append _ 33 ) <nl> libffi _ convenience _ la _ SOURCES = $ ( libffi _ la _ SOURCES ) <nl> nodist _ libffi _ convenience _ la _ SOURCES = $ ( nodist _ libffi _ la _ SOURCES ) <nl> - LTLDFLAGS = $ ( shell $ ( SHELL ) $ ( top _ srcdir ) / . . / libtool - ldflags $ ( LDFLAGS ) ) <nl> + LTLDFLAGS = $ ( shell $ ( SHELL ) $ ( top _ srcdir ) / libtool - ldflags $ ( LDFLAGS ) ) <nl> libffi _ la _ LDFLAGS = - no - undefined - version - info ` grep - v ' ^ \ # ' $ ( srcdir ) / libtool - version ` $ ( LTLDFLAGS ) $ ( AM _ LTLDFLAGS ) <nl> AM _ CPPFLAGS = - I . - I $ ( top _ srcdir ) / include - Iinclude - I $ ( top _ srcdir ) / src <nl> AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) <nl> @ @ - 779 , 6 + 783 , 16 @ @ src / m68k / ffi . lo : src / m68k / $ ( am _ _ dirstamp ) \ <nl> 	 src / m68k / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> src / m68k / sysv . lo : src / m68k / $ ( am _ _ dirstamp ) \ <nl> 	 src / m68k / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> + src / moxie / $ ( am _ _ dirstamp ) : <nl> + 	 @ $ ( MKDIR _ P ) src / moxie <nl> + 	 @ : > src / moxie / $ ( am _ _ dirstamp ) <nl> + src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) : <nl> + 	 @ $ ( MKDIR _ P ) src / moxie / $ ( DEPDIR ) <nl> + 	 @ : > src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> + src / moxie / ffi . lo : src / moxie / $ ( am _ _ dirstamp ) \ <nl> + 	 src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> + src / moxie / eabi . lo : src / moxie / $ ( am _ _ dirstamp ) \ <nl> + 	 src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> src / microblaze / $ ( am _ _ dirstamp ) : <nl> 	 @ $ ( MKDIR _ P ) src / microblaze <nl> 	 @ : > src / microblaze / $ ( am _ _ dirstamp ) <nl> @ @ - 962 , 6 + 976 , 8 @ @ mostlyclean - compile : <nl> 	 - rm - f src / microblaze / * . lo <nl> 	 - rm - f src / mips / * . $ ( OBJEXT ) <nl> 	 - rm - f src / mips / * . lo <nl> + 	 - rm - f src / moxie / * . $ ( OBJEXT ) <nl> + 	 - rm - f src / moxie / * . lo <nl> 	 - rm - f src / pa / * . $ ( OBJEXT ) <nl> 	 - rm - f src / pa / * . lo <nl> 	 - rm - f src / powerpc / * . $ ( OBJEXT ) <nl> @ @ - 1016 , 6 + 1032 , 8 @ @ distclean - compile : <nl> @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / mips / $ ( DEPDIR ) / ffi . Plo @ am _ _ quote @ <nl> @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / mips / $ ( DEPDIR ) / n32 . Plo @ am _ _ quote @ <nl> @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / mips / $ ( DEPDIR ) / o32 . Plo @ am _ _ quote @ <nl> + @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / moxie / $ ( DEPDIR ) / eabi . Plo @ am _ _ quote @ <nl> + @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / moxie / $ ( DEPDIR ) / ffi . Plo @ am _ _ quote @ <nl> @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / pa / $ ( DEPDIR ) / ffi . Plo @ am _ _ quote @ <nl> @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / pa / $ ( DEPDIR ) / hpux32 . Plo @ am _ _ quote @ <nl> @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / pa / $ ( DEPDIR ) / linux . Plo @ am _ _ quote @ <nl> @ @ - 1118 , 6 + 1136 , 7 @ @ clean - libtool : <nl> 	 - rm - rf src / m68k / . libs src / m68k / _ libs <nl> 	 - rm - rf src / microblaze / . libs src / microblaze / _ libs <nl> 	 - rm - rf src / mips / . libs src / mips / _ libs <nl> + 	 - rm - rf src / moxie / . libs src / moxie / _ libs <nl> 	 - rm - rf src / pa / . libs src / pa / _ libs <nl> 	 - rm - rf src / powerpc / . libs src / powerpc / _ libs <nl> 	 - rm - rf src / s390 / . libs src / s390 / _ libs <nl> @ @ - 1696 , 6 + 1715 , 8 @ @ distclean - generic : <nl> 	 - rm - f src / microblaze / $ ( am _ _ dirstamp ) <nl> 	 - rm - f src / mips / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> 	 - rm - f src / mips / $ ( am _ _ dirstamp ) <nl> + 	 - rm - f src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> + 	 - rm - f src / moxie / $ ( am _ _ dirstamp ) <nl> 	 - rm - f src / pa / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> 	 - rm - f src / pa / $ ( am _ _ dirstamp ) <nl> 	 - rm - f src / powerpc / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> @ @ - 1726 , 7 + 1747 , 7 @ @ clean - am : clean - aminfo clean - generic clean - libtool \ <nl> <nl> distclean : distclean - recursive <nl> 	 - rm - f $ ( am _ _ CONFIG _ DISTCLEAN _ FILES ) <nl> - 	 - rm - rf src / $ ( DEPDIR ) src / aarch64 / $ ( DEPDIR ) src / alpha / $ ( DEPDIR ) src / arm / $ ( DEPDIR ) src / avr32 / $ ( DEPDIR ) src / bfin / $ ( DEPDIR ) src / cris / $ ( DEPDIR ) src / frv / $ ( DEPDIR ) src / ia64 / $ ( DEPDIR ) src / m32r / $ ( DEPDIR ) src / m68k / $ ( DEPDIR ) src / microblaze / $ ( DEPDIR ) src / mips / $ ( DEPDIR ) src / pa / $ ( DEPDIR ) src / powerpc / $ ( DEPDIR ) src / s390 / $ ( DEPDIR ) src / sh / $ ( DEPDIR ) src / sh64 / $ ( DEPDIR ) src / sparc / $ ( DEPDIR ) src / tile / $ ( DEPDIR ) src / x86 / $ ( DEPDIR ) src / xtensa / $ ( DEPDIR ) <nl> + 	 - rm - rf src / $ ( DEPDIR ) src / aarch64 / $ ( DEPDIR ) src / alpha / $ ( DEPDIR ) src / arm / $ ( DEPDIR ) src / avr32 / $ ( DEPDIR ) src / bfin / $ ( DEPDIR ) src / cris / $ ( DEPDIR ) src / frv / $ ( DEPDIR ) src / ia64 / $ ( DEPDIR ) src / m32r / $ ( DEPDIR ) src / m68k / $ ( DEPDIR ) src / microblaze / $ ( DEPDIR ) src / mips / $ ( DEPDIR ) src / moxie / $ ( DEPDIR ) src / pa / $ ( DEPDIR ) src / powerpc / $ ( DEPDIR ) src / s390 / $ ( DEPDIR ) src / sh / $ ( DEPDIR ) src / sh64 / $ ( DEPDIR ) src / sparc / $ ( DEPDIR ) src / tile / $ ( DEPDIR ) src / x86 / $ ( DEPDIR ) src / xtensa / $ ( DEPDIR ) <nl> 	 - rm - f Makefile <nl> distclean - am : clean - am distclean - compile distclean - generic \ <nl> 	 distclean - hdr distclean - libtool distclean - tags <nl> @ @ - 1865 , 7 + 1886 , 7 @ @ installcheck - am : <nl> maintainer - clean : maintainer - clean - recursive <nl> 	 - rm - f $ ( am _ _ CONFIG _ DISTCLEAN _ FILES ) <nl> 	 - rm - rf $ ( top _ srcdir ) / autom4te . cache <nl> - 	 - rm - rf src / $ ( DEPDIR ) src / aarch64 / $ ( DEPDIR ) src / alpha / $ ( DEPDIR ) src / arm / $ ( DEPDIR ) src / avr32 / $ ( DEPDIR ) src / bfin / $ ( DEPDIR ) src / cris / $ ( DEPDIR ) src / frv / $ ( DEPDIR ) src / ia64 / $ ( DEPDIR ) src / m32r / $ ( DEPDIR ) src / m68k / $ ( DEPDIR ) src / microblaze / $ ( DEPDIR ) src / mips / $ ( DEPDIR ) src / pa / $ ( DEPDIR ) src / powerpc / $ ( DEPDIR ) src / s390 / $ ( DEPDIR ) src / sh / $ ( DEPDIR ) src / sh64 / $ ( DEPDIR ) src / sparc / $ ( DEPDIR ) src / tile / $ ( DEPDIR ) src / x86 / $ ( DEPDIR ) src / xtensa / $ ( DEPDIR ) <nl> + 	 - rm - rf src / $ ( DEPDIR ) src / aarch64 / $ ( DEPDIR ) src / alpha / $ ( DEPDIR ) src / arm / $ ( DEPDIR ) src / avr32 / $ ( DEPDIR ) src / bfin / $ ( DEPDIR ) src / cris / $ ( DEPDIR ) src / frv / $ ( DEPDIR ) src / ia64 / $ ( DEPDIR ) src / m32r / $ ( DEPDIR ) src / m68k / $ ( DEPDIR ) src / microblaze / $ ( DEPDIR ) src / mips / $ ( DEPDIR ) src / moxie / $ ( DEPDIR ) src / pa / $ ( DEPDIR ) src / powerpc / $ ( DEPDIR ) src / s390 / $ ( DEPDIR ) src / sh / $ ( DEPDIR ) src / sh64 / $ ( DEPDIR ) src / sparc / $ ( DEPDIR ) src / tile / $ ( DEPDIR ) src / x86 / $ ( DEPDIR ) src / xtensa / $ ( DEPDIR ) <nl> 	 - rm - f Makefile <nl> maintainer - clean - am : distclean - am maintainer - clean - aminfo \ <nl> 	 maintainer - clean - generic maintainer - clean - vti <nl> diff - - git a / README b / README <nl> index f5abd43 . . 82b2104 100644 <nl> - - - a / README <nl> + + + b / README <nl> @ @ - 1 , 8 + 1 , 8 @ @ <nl> Status <nl> = = = = = = <nl> <nl> - libffi - 3 . 0 . 12 was released on XXXXXXX . Check the libffi web page for <nl> - updates : < URL : http : / / sourceware . org / libffi / > . <nl> + libffi - 3 . 0 . 12 was released on February 11 , 2013 . Check the libffi web <nl> + page for updates : < URL : http : / / sourceware . org / libffi / > . <nl> <nl> <nl> What is libffi ? <nl> @ @ - 68 , 6 + 68 , 7 @ @ tested : <nl> | MIPS | Linux | GCC | <nl> | MIPS | RTEMS | GCC | <nl> | MIPS64 | Linux | GCC | <nl> + | Moxie 	 	 | Bare metal 	 | GCC <nl> | PowerPC 32 - bit | AIX | IBM XL C | <nl> | PowerPC 64 - bit | AIX | IBM XL C | <nl> | PowerPC | AMIGA | GCC | <nl> @ @ - 161 , 11 + 162 , 12 @ @ History <nl> <nl> See the ChangeLog files for details . <nl> <nl> - 3 . 0 . 12 XXX - XX - XX <nl> + 3 . 0 . 12 Feb - 11 - 13 <nl> + Add Moxie support . <nl> 	 Add AArch64 support . <nl> 	 Add Blackfin support . <nl> 	 Add TILE - Gx / TILEPro support . <nl> - 	 Add Microblaze support . <nl> + 	 Add MicroBlaze support . <nl> 	 Add Xtensa support . <nl> 	 Add support for PaX enabled kernels with MPROTECT . <nl> 	 Add support for native vendor compilers on <nl> @ @ - 353 , 6 + 355 , 7 @ @ m68k 	 	 Andreas Schwab <nl> microblaze 	 Nathan Rossi <nl> mips 	 	 Anthony Green , Casey Marshall <nl> mips64 	 	 David Daney <nl> + moxie 	 	 Anthony Green <nl> pa 	 	 Randolph Chung , Dave Anglin , Andreas Tobler <nl> powerpc 	 	 Geoffrey Keating , Andreas Tobler , <nl> 	 	 	 David Edelsohn , John Hornkvist <nl> diff - - git a / configure b / configure <nl> index 771398a . . a3a2a82 100755 <nl> - - - a / configure <nl> + + + b / configure <nl> @ @ - 1 , 6 + 1 , 6 @ @ <nl> # ! / bin / sh <nl> # Guess values for system - dependent variables and create Makefiles . <nl> - # Generated by GNU Autoconf 2 . 69 for libffi 3 . 0 . 12 - rc3 . <nl> + # Generated by GNU Autoconf 2 . 69 for libffi 3 . 0 . 12 . <nl> # <nl> # Report bugs to < http : / / github . com / atgreen / libffi / issues > . <nl> # <nl> @ @ - 590 , 8 + 590 , 8 @ @ MAKEFLAGS = <nl> # Identity of this package . <nl> PACKAGE _ NAME = ' libffi ' <nl> PACKAGE _ TARNAME = ' libffi ' <nl> - PACKAGE _ VERSION = ' 3 . 0 . 12 - rc3 ' <nl> - PACKAGE _ STRING = ' libffi 3 . 0 . 12 - rc3 ' <nl> + PACKAGE _ VERSION = ' 3 . 0 . 12 ' <nl> + PACKAGE _ STRING = ' libffi 3 . 0 . 12 ' <nl> PACKAGE _ BUGREPORT = ' http : / / github . com / atgreen / libffi / issues ' <nl> PACKAGE _ URL = ' ' <nl> <nl> @ @ - 1405 , 7 + 1405 , 7 @ @ if test " $ ac _ init _ help " = " long " ; then <nl> # Omit some internal or obsolete options to make the list less imposing . <nl> # This message is too long to be a string in the A / UX 3 . 1 sh . <nl> cat < < _ ACEOF <nl> - \ ` configure ' configures libffi 3 . 0 . 12 - rc3 to adapt to many kinds of systems . <nl> + \ ` configure ' configures libffi 3 . 0 . 12 to adapt to many kinds of systems . <nl> <nl> Usage : $ 0 [ OPTION ] . . . [ VAR = VALUE ] . . . <nl> <nl> @ @ - 1476 , 7 + 1476 , 7 @ @ fi <nl> <nl> if test - n " $ ac _ init _ help " ; then <nl> case $ ac _ init _ help in <nl> - short | recursive ) echo " Configuration of libffi 3 . 0 . 12 - rc3 : " ; ; <nl> + short | recursive ) echo " Configuration of libffi 3 . 0 . 12 : " ; ; <nl> esac <nl> cat < < \ _ ACEOF <nl> <nl> @ @ - 1596 , 7 + 1596 , 7 @ @ fi <nl> test - n " $ ac _ init _ help " & & exit $ ac _ status <nl> if $ ac _ init _ version ; then <nl> cat < < \ _ ACEOF <nl> - libffi configure 3 . 0 . 12 - rc3 <nl> + libffi configure 3 . 0 . 12 <nl> generated by GNU Autoconf 2 . 69 <nl> <nl> Copyright ( C ) 2012 Free Software Foundation , Inc . <nl> @ @ - 2202 , 7 + 2202 , 7 @ @ cat > config . log < < _ ACEOF <nl> This file contains any messages produced by compilers while <nl> running configure , to aid debugging if configure makes a mistake . <nl> <nl> - It was created by libffi $ as _ me 3 . 0 . 12 - rc3 , which was <nl> + It was created by libffi $ as _ me 3 . 0 . 12 , which was <nl> generated by GNU Autoconf 2 . 69 . Invocation command line was <nl> <nl> $ $ 0 $ @ <nl> @ @ - 3245 , 7 + 3245 , 7 @ @ fi <nl> <nl> # Define the identity of the package . <nl> PACKAGE = ' libffi ' <nl> - VERSION = ' 3 . 0 . 12 - rc3 ' <nl> + VERSION = ' 3 . 0 . 12 ' <nl> <nl> <nl> cat > > confdefs . h < < _ ACEOF <nl> @ @ - 13415 , 6 + 13415 , 10 @ @ case " $ host " in <nl> 	 TARGET = MICROBLAZE ; TARGETDIR = microblaze <nl> 	 ; ; <nl> <nl> + moxie - * - * ) <nl> + 	 TARGET = MOXIE ; TARGETDIR = moxie <nl> + 	 ; ; <nl> + <nl> mips - sgi - irix5 . * | mips - sgi - irix6 . * | mips * - * - rtems * ) <nl> 	 TARGET = MIPS ; TARGETDIR = mips <nl> 	 ; ; <nl> @ @ - 15527 , 7 + 15531 , 7 @ @ cat > > $ CONFIG _ STATUS < < \ _ ACEOF | | ac _ write _ fail = 1 <nl> # report actual input values of CONFIG _ FILES etc . instead of their <nl> # values after options handling . <nl> ac _ log = " <nl> - This file was extended by libffi $ as _ me 3 . 0 . 12 - rc3 , which was <nl> + This file was extended by libffi $ as _ me 3 . 0 . 12 , which was <nl> generated by GNU Autoconf 2 . 69 . Invocation command line was <nl> <nl> CONFIG _ FILES = $ CONFIG _ FILES <nl> @ @ - 15597 , 7 + 15601 , 7 @ @ _ ACEOF <nl> cat > > $ CONFIG _ STATUS < < _ ACEOF | | ac _ write _ fail = 1 <nl> ac _ cs _ config = " ` $ as _ echo " $ ac _ configure _ args " | sed ' s / ^ / / ; s / [ \ \ " " \ ` \ $ ] / \ \ \ \ & / g ' ` " <nl> ac _ cs _ version = " \ \ <nl> - libffi config . status 3 . 0 . 12 - rc3 <nl> + libffi config . status 3 . 0 . 12 <nl> configured by $ 0 , generated by GNU Autoconf 2 . 69 , <nl> with options \ \ " \ $ ac _ cs _ config \ \ " <nl> <nl> diff - - git a / configure . ac b / configure . ac <nl> index c3cd132 . . 428d938 100644 <nl> - - - a / configure . ac <nl> + + + b / configure . ac <nl> @ @ - 2 , 7 + 2 , 7 @ @ dnl Process this with autoconf to create configure <nl> <nl> AC _ PREREQ ( 2 . 68 ) <nl> <nl> - AC _ INIT ( [ libffi ] , [ 3 . 0 . 12 - rc3 ] , [ http : / / github . com / atgreen / libffi / issues ] ) <nl> + AC _ INIT ( [ libffi ] , [ 3 . 0 . 12 ] , [ http : / / github . com / atgreen / libffi / issues ] ) <nl> AC _ CONFIG _ HEADERS ( [ fficonfig . h ] ) <nl> <nl> AC _ CANONICAL _ SYSTEM <nl> @ @ - 195 , 6 + 195 , 10 @ @ case " $ host " in <nl> 	 TARGET = MICROBLAZE ; TARGETDIR = microblaze <nl> 	 ; ; <nl> <nl> + moxie - * - * ) <nl> + 	 TARGET = MOXIE ; TARGETDIR = moxie <nl> + 	 ; ; <nl> + <nl> mips - sgi - irix5 . * | mips - sgi - irix6 . * | mips * - * - rtems * ) <nl> 	 TARGET = MIPS ; TARGETDIR = mips <nl> 	 ; ; <nl> diff - - git a / doc / stamp - vti b / doc / stamp - vti <nl> index 883a8ff . . 766fbac 100644 <nl> - - - a / doc / stamp - vti <nl> + + + b / doc / stamp - vti <nl> @ @ - 1 , 4 + 1 , 4 @ @ <nl> @ set UPDATED 6 February 2013 <nl> @ set UPDATED - MONTH February 2013 <nl> - @ set EDITION 3 . 0 . 12 - rc3 <nl> - @ set VERSION 3 . 0 . 12 - rc3 <nl> + @ set EDITION 3 . 0 . 12 <nl> + @ set VERSION 3 . 0 . 12 <nl> diff - - git a / doc / version . texi b / doc / version . texi <nl> index 883a8ff . . 766fbac 100644 <nl> - - - a / doc / version . texi <nl> + + + b / doc / version . texi <nl> @ @ - 1 , 4 + 1 , 4 @ @ <nl> @ set UPDATED 6 February 2013 <nl> @ set UPDATED - MONTH February 2013 <nl> - @ set EDITION 3 . 0 . 12 - rc3 <nl> - @ set VERSION 3 . 0 . 12 - rc3 <nl> + @ set EDITION 3 . 0 . 12 <nl> + @ set VERSION 3 . 0 . 12 <nl> diff - - git a / src / moxie / eabi . S b / src / moxie / eabi . S <nl> index 7e2143b . . ac7aceb 100644 <nl> - - - a / src / moxie / eabi . S <nl> + + + b / src / moxie / eabi . S <nl> @ @ - 1 , 5 + 1 , 5 @ @ <nl> / * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <nl> - eabi . S - Copyright ( c ) 2012 Anthony Green <nl> + eabi . S - Copyright ( c ) 2012 , 2013 Anthony Green <nl> <nl> Moxie Assembly glue . <nl> <nl> @ @ - 41 , 24 + 41 , 61 @ @ <nl> 	 # $ r4 : ecif . rvalue <nl> 	 # $ r5 : fn <nl> 	 <nl> - ffi _ call _ EABI : 	 <nl> + ffi _ call _ EABI : <nl> + 	 push 	 $ sp , $ r6 <nl> + 	 push 	 $ sp , $ r7 <nl> + 	 push 	 $ sp , $ r8 <nl> 	 dec 	 $ sp , 24 <nl> <nl> 	 / * Store incoming args on stack . * / <nl> - 	 sto . l 	 0 ( $ sp ) , $ r0 <nl> - 	 sto . l 	 4 ( $ sp ) , $ r1 <nl> - 	 sto . l 	 8 ( $ sp ) , $ r2 <nl> - 	 sto . l 	 12 ( $ sp ) , $ r3 <nl> - 	 sto . l 	 16 ( $ sp ) , $ r4 <nl> - 	 sto . l 	 20 ( $ sp ) , $ r5 <nl> + 	 sto . l 	 0 ( $ sp ) , $ r0 / * ffi _ prep _ args * / <nl> + 	 sto . l 	 4 ( $ sp ) , $ r1 / * ecif * / <nl> + 	 sto . l 	 8 ( $ sp ) , $ r2 / * bytes * / <nl> + 	 sto . l 	 12 ( $ sp ) , $ r3 / * flags * / <nl> + 	 sto . l 	 16 ( $ sp ) , $ r4 / * & rvalue * / <nl> + 	 sto . l 	 20 ( $ sp ) , $ r5 / * fn * / <nl> 	 <nl> 	 / * Call ffi _ prep _ args . * / <nl> - 	 jsr 	 $ r0 <nl> + 	 mov 	 $ r6 , $ r4 / * Save result buffer * / <nl> + 	 mov 	 $ r7 , $ r5 / * Save the target fn * / <nl> + 	 mov 	 $ r8 , $ r3 / * Save the flags * / <nl> + 	 sub . l 	 $ sp , $ r2 / * Allocate stack space * / <nl> + 	 mov 	 $ r0 , $ sp / * We can stomp over $ r0 * / <nl> + 	 / * $ r1 is already set up * / <nl> + 	 jsra 	 ffi _ prep _ args <nl> <nl> + 	 / * Load register arguments . * / <nl> + 	 ldo . l 	 $ r0 , 0 ( $ sp ) <nl> + 	 ldo . l 	 $ r1 , 4 ( $ sp ) <nl> + 	 ldo . l 	 $ r2 , 8 ( $ sp ) <nl> + 	 ldo . l 	 $ r3 , 12 ( $ sp ) <nl> + 	 ldo . l 	 $ r4 , 16 ( $ sp ) <nl> + 	 ldo . l 	 $ r5 , 20 ( $ sp ) <nl> + 	 <nl> 	 / * Call the target function . * / <nl> - 	 jsr 	 $ r5 <nl> + 	 jsr 	 $ r7 <nl> + <nl> + 	 ldi . l 	 $ r7 , 0xffffffff <nl> + 	 cmp 	 $ r8 , $ r7 <nl> + 	 beq 	 retstruct <nl> + <nl> + 	 ldi . l 	 $ r7 , 4 <nl> + 	 cmp 	 $ r8 , $ r7 <nl> + 	 bgt 	 ret2reg <nl> + <nl> + 	 st . l 	 ( $ r6 ) , $ r0 <nl> + 	 jmpa 	 retdone <nl> + <nl> + ret2reg : 	 <nl> + 	 st . l 	 ( $ r6 ) , $ r0 <nl> + 	 sto . l 	 4 ( $ r6 ) , $ r1 <nl> <nl> + retstruct : <nl> + retdone : 	 <nl> 	 / * Return . * / <nl> + 	 ldo . l 	 $ r6 , - 4 ( $ fp ) <nl> + 	 ldo . l 	 $ r7 , - 8 ( $ fp ) <nl> + 	 ldo . l 	 $ r8 , - 12 ( $ fp ) <nl> 	 ret <nl> 	 . size ffi _ call _ EABI , . - ffi _ call _ EABI <nl> 	 <nl> diff - - git a / src / moxie / ffi . c b / src / moxie / ffi . c <nl> index 11abb00 . . 540a042 100644 <nl> - - - a / src / moxie / ffi . c <nl> + + + b / src / moxie / ffi . c <nl> @ @ - 1 , 5 + 1 , 5 @ @ <nl> / * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <nl> - ffi . c - Copyright ( C ) 2012 Anthony Green <nl> + ffi . c - Copyright ( C ) 2012 , 2013 Anthony Green <nl> <nl> Moxie Foreign Function Interface <nl> <nl> @ @ - 43 , 6 + 43 , 12 @ @ void * ffi _ prep _ args ( char * stack , extended _ cif * ecif ) <nl> p _ argv = ecif - > avalue ; <nl> argp = stack ; <nl> <nl> + if ( ecif - > cif - > rtype - > type = = FFI _ TYPE _ STRUCT ) <nl> + { <nl> + * ( void * * ) argp = ecif - > rvalue ; <nl> + argp + = 4 ; <nl> + } <nl> + <nl> for ( i = ecif - > cif - > nargs , p _ arg = ecif - > cif - > arg _ types ; <nl> ( i ! = 0 ) ; <nl> i - - , p _ arg + + ) <nl> @ @ - 136 , 8 + 142 , 7 @ @ void ffi _ call ( ffi _ cif * cif , <nl> } <nl> else <nl> ecif . rvalue = rvalue ; <nl> - <nl> - <nl> + <nl> switch ( cif - > abi ) <nl> { <nl> case FFI _ EABI : <nl> @ @ - 154 , 19 + 159 , 25 @ @ void ffi _ closure _ eabi ( unsigned arg1 , unsigned arg2 , unsigned arg3 , <nl> 	 	 unsigned arg4 , unsigned arg5 , unsigned arg6 ) <nl> { <nl> / * This function is called by a trampoline . The trampoline stows a <nl> - pointer to the ffi _ closure object in gr7 . We must save this <nl> + pointer to the ffi _ closure object in $ r7 . We must save this <nl> pointer in a place that will persist while we do our work . * / <nl> - register ffi _ closure * creg _ _ asm _ _ ( " $ r7 " ) ; <nl> + register ffi _ closure * creg _ _ asm _ _ ( " $ r12 " ) ; <nl> ffi _ closure * closure = creg ; <nl> <nl> / * Arguments that don ' t fit in registers are found on the stack <nl> at a fixed offset above the current frame pointer . * / <nl> register char * frame _ pointer _ _ asm _ _ ( " $ fp " ) ; <nl> - char * stack _ args = frame _ pointer + 16 ; <nl> + <nl> + / * Pointer to a struct return value . * / <nl> + void * struct _ rvalue = ( void * ) arg1 ; <nl> + <nl> + / * 6 words reserved for register args + 3 words from jsr * / <nl> + char * stack _ args = frame _ pointer + 9 * 4 ; <nl> <nl> / * Lay the register arguments down in a continuous chunk of memory . * / <nl> unsigned register _ args [ 6 ] = <nl> { arg1 , arg2 , arg3 , arg4 , arg5 , arg6 } ; <nl> + char * register _ args _ ptr = ( char * ) register _ args ; <nl> <nl> ffi _ cif * cif = closure - > cif ; <nl> ffi _ type * * arg _ types = cif - > arg _ types ; <nl> @ @ - 174 , 6 + 185 , 12 @ @ void ffi _ closure _ eabi ( unsigned arg1 , unsigned arg2 , unsigned arg3 , <nl> char * ptr = ( char * ) register _ args ; <nl> int i ; <nl> <nl> + / * preserve struct type return pointer passing * / <nl> + if ( ( cif - > rtype ! = NULL ) & & ( cif - > rtype - > type = = FFI _ TYPE _ STRUCT ) ) { <nl> + ptr + = 4 ; <nl> + register _ args _ ptr = ( char * ) & register _ args [ 1 ] ; <nl> + } <nl> + <nl> / * Find the address of each argument . * / <nl> for ( i = 0 ; i < cif - > nargs ; i + + ) <nl> { <nl> @ @ - 190 , 6 + 207 , 7 @ @ void ffi _ closure _ eabi ( unsigned arg1 , unsigned arg2 , unsigned arg3 , <nl> 	 case FFI _ TYPE _ SINT32 : <nl> 	 case FFI _ TYPE _ UINT32 : <nl> 	 case FFI _ TYPE _ FLOAT : <nl> + 	 case FFI _ TYPE _ POINTER : <nl> 	 avalue [ i ] = ptr ; <nl> 	 break ; <nl> 	 case FFI _ TYPE _ STRUCT : <nl> @ @ - 205 , 30 + 223 , 21 @ @ void ffi _ closure _ eabi ( unsigned arg1 , unsigned arg2 , unsigned arg3 , <nl> <nl> / * If we ' ve handled more arguments than fit in registers , <nl> 	 start looking at the those passed on the stack . * / <nl> - if ( ptr = = ( ( char * ) register _ args + ( 6 * 4 ) ) ) <nl> + if ( ptr = = & register _ args [ 6 ] ) <nl> 	 ptr = stack _ args ; <nl> } <nl> <nl> / * Invoke the closure . * / <nl> - if ( cif - > rtype - > type = = FFI _ TYPE _ STRUCT ) <nl> + if ( cif - > rtype & & ( cif - > rtype - > type = = FFI _ TYPE _ STRUCT ) ) <nl> { <nl> - / * The caller allocates space for the return structure , and <nl> - passes a pointer to this space in gr3 . Use this value directly <nl> - as the return value . * / <nl> - register void * return _ struct _ ptr _ _ asm _ _ ( " $ r0 " ) ; <nl> - ( closure - > fun ) ( cif , return _ struct _ ptr , avalue , closure - > user _ data ) ; <nl> + ( closure - > fun ) ( cif , struct _ rvalue , avalue , closure - > user _ data ) ; <nl> } <nl> else <nl> { <nl> / * Allocate space for the return value and call the function . * / <nl> long long rvalue ; <nl> ( closure - > fun ) ( cif , & rvalue , avalue , closure - > user _ data ) ; <nl> - <nl> - / * Functions return 4 - byte or smaller results in gr8 . 8 - byte <nl> - 	 values also use gr9 . We fill the both , even for small return <nl> - 	 values , just to avoid a branch . * / / * <nl> - asm ( " ldi @ ( % 0 , # 0 ) , gr8 " : : " r " ( & rvalue ) ) ; <nl> - asm ( " ldi @ ( % 0 , # 0 ) , gr9 " : : " r " ( & ( ( int * ) & rvalue ) [ 1 ] ) ) ; * / <nl> + asm ( " mov $ r12 , % 0 \ n ld . l $ r0 , ( $ r12 ) \ n ldo . l $ r1 , 4 ( $ r12 ) " : : " r " ( & rvalue ) ) ; <nl> } <nl> } <nl> <nl> @ @ - 239 , 18 + 248 , 21 @ @ ffi _ prep _ closure _ loc ( ffi _ closure * closure , <nl> 	 	 void * user _ data , <nl> 	 	 void * codeloc ) <nl> { <nl> - unsigned int * tramp = ( unsigned int * ) & closure - > tramp [ 0 ] ; <nl> + unsigned short * tramp = ( unsigned short * ) & closure - > tramp [ 0 ] ; <nl> unsigned long fn = ( long ) ffi _ closure _ eabi ; <nl> unsigned long cls = ( long ) codeloc ; <nl> - int i ; <nl> + <nl> + if ( cif - > abi ! = FFI _ EABI ) <nl> + return FFI _ BAD _ ABI ; <nl> <nl> fn = ( unsigned long ) ffi _ closure _ eabi ; <nl> <nl> - tramp [ 0 ] = 0x8cfc0000 + ( fn & 0xffff ) ; / * setlos lo ( fn ) , gr6 * / <nl> - tramp [ 1 ] = 0x8efc0000 + ( cls & 0xffff ) ; / * setlos lo ( cls ) , gr7 * / <nl> - tramp [ 2 ] = 0x8cf80000 + ( fn > > 16 ) ; 	 / * sethi hi ( fn ) , gr6 * / <nl> - tramp [ 3 ] = 0x8ef80000 + ( cls > > 16 ) ; / * sethi hi ( cls ) , gr7 * / <nl> - tramp [ 4 ] = 0x80300006 ; / * jmpl @ ( gr0 , gr6 ) * / <nl> + tramp [ 0 ] = 0x01e0 ; / * ldi . l $ r7 , . . . . * / <nl> + tramp [ 1 ] = cls > > 16 ; <nl> + tramp [ 2 ] = cls & 0xffff ; <nl> + tramp [ 3 ] = 0x1a00 ; / * jmpa . . . . * / <nl> + tramp [ 4 ] = fn > > 16 ; <nl> + tramp [ 5 ] = fn & 0xffff ; <nl> <nl> closure - > cif = cif ; <nl> closure - > fun = fun ; <nl> diff - - git a / src / moxie / ffitarget . h b / src / moxie / ffitarget . h <nl> index 93fae39 . . 623e3ec 100644 <nl> - - - a / src / moxie / ffitarget . h <nl> + + + b / src / moxie / ffitarget . h <nl> @ @ - 1 , 5 + 1 , 5 @ @ <nl> / * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - * - C - * - <nl> - ffitarget . h - Copyright ( c ) 2012 Anthony Green <nl> + ffitarget . h - Copyright ( c ) 2012 , 2013 Anthony Green <nl> Target configuration macros for Moxie <nl> <nl> Permission is hereby granted , free of charge , to any person obtaining <nl> @ @ - 35 , 12 + 35 , 8 @ @ typedef signed long ffi _ sarg ; <nl> <nl> typedef enum ffi _ abi { <nl> FFI _ FIRST _ ABI = 0 , <nl> - <nl> - # ifdef MOXIE <nl> FFI _ EABI , <nl> FFI _ DEFAULT _ ABI = FFI _ EABI , <nl> - # endif <nl> - <nl> FFI _ LAST _ ABI = FFI _ DEFAULT _ ABI + 1 <nl> } ffi _ abi ; <nl> # endif <nl> @ @ - 50 , 7 + 46 , 7 @ @ typedef enum ffi _ abi { <nl> # define FFI _ CLOSURES 1 <nl> # define FFI _ NATIVE _ RAW _ API 0 <nl> <nl> - / * Trampolines are 5 4 - byte instructions long . * / <nl> - # define FFI _ TRAMPOLINE _ SIZE ( 5 * 4 ) <nl> + / * Trampolines are 12 - bytes long . See ffi _ prep _ closure _ loc . * / <nl> + # define FFI _ TRAMPOLINE _ SIZE ( 12 ) <nl> <nl> # endif <nl> diff - - git a / testsuite / libffi . call / huge _ struct . c b / testsuite / libffi . call / huge _ struct . c <nl> index 365ed95 . . 657fe54 100644 <nl> - - - a / testsuite / libffi . call / huge _ struct . c <nl> + + + b / testsuite / libffi . call / huge _ struct . c <nl> @ @ - 8 , 6 + 8 , 7 @ @ <nl> / * { dg - excess - errors " " { target x86 _ 64 - * - mingw * x86 _ 64 - * - cygwin * } } * / <nl> / * { dg - do run { xfail strongarm * - * - * xscale * - * - * } } * / <nl> / * { dg - options - mlong - double - 128 { target powerpc64 * - * - linux * } } * / <nl> + / * { dg - options - Wformat = 0 { target moxie * - * - elf } } * / <nl> / * { dg - output " " { xfail x86 _ 64 - * - mingw * x86 _ 64 - * - cygwin * } } * / <nl> <nl> # include " ffitest . h " <nl> diff - - git a / testsuite / libffi . call / return _ dbl . c b / testsuite / libffi . call / return _ dbl . c <nl> index 1aab403 . . fd07e50 100644 <nl> - - - a / testsuite / libffi . call / return _ dbl . c <nl> + + + b / testsuite / libffi . call / return _ dbl . c <nl> @ @ - 9 , 6 + 9 , 7 @ @ <nl> <nl> static double return _ dbl ( double dbl ) <nl> { <nl> + printf ( " % f \ n " , dbl ) ; <nl> return 2 * dbl ; <nl> } <nl> int main ( void ) <nl> diff - - git a / testsuite / libffi . special / unwindtest . cc b / testsuite / libffi . special / unwindtest . cc <nl> index d7ffd4a . . a78f4e7 100644 <nl> - - - a / testsuite / libffi . special / unwindtest . cc <nl> + + + b / testsuite / libffi . special / unwindtest . cc <nl> @ @ - 5 , 6 + 5 , 7 @ @ <nl> Originator : 	 Jeff Sturm < jsturm @ one - point . com > * / <nl> <nl> / * { dg - do run } * / <nl> + <nl> # include " ffitestcxx . h " <nl> <nl> # if defined HAVE _ STDINT _ H <nl> diff - - git a / testsuite / libffi . special / unwindtest _ ffi _ call . cc b / testsuite / libffi . special / unwindtest _ ffi _ call . cc <nl> index 29739cd . . 57191f2 100644 <nl> - - - a / testsuite / libffi . special / unwindtest _ ffi _ call . cc <nl> + + + b / testsuite / libffi . special / unwindtest _ ffi _ call . cc <nl> @ @ - 5 , 6 + 5 , 7 @ @ <nl> Originator : 	 Andreas Tobler < andreast @ gcc . gnu . org > 20061213 * / <nl> <nl> / * { dg - do run } * / <nl> + <nl> # include " ffitestcxx . h " <nl> <nl> static int checking ( int a _ _ UNUSED _ _ , short b _ _ UNUSED _ _ ,
NEAREST DIFF (one line): diff - - git a / htdocs / ChangeLog b / htdocs / ChangeLog <nl> index d48cd8d . . e8cf502 100644 <nl> - - - a / htdocs / ChangeLog <nl> + + + b / htdocs / ChangeLog <nl> @ @ - 1 , 3 + 1 , 7 @ @ <nl> + 2008 - 02 - 21 Anthony Green < green @ redhat . com > <nl> + <nl> + 	 * index . html : 3 . 0 . 2 <nl> + <nl> 2008 - 02 - 15 Anthony Green < green @ redhat . com > <nl> <nl> 	 * index . html : 3 . 0 . 1 <nl> diff - - git a / htdocs / index . html b / htdocs / index . html <nl> index df45528 . . 7e1f4d2 100644 <nl> - - - a / htdocs / index . html <nl> + + + b / htdocs / index . html <nl> @ @ - 8 , 9 + 8 , 9 @ @ libffi <nl> <nl> < h1 > libffi - a portable foreign function interface library < / h1 > <nl> <nl> - < b > libffi - 3 . 0 . 1 < / b > was released on February 15 , 2008 . You can ftp it <nl> + < b > libffi - 3 . 0 . 2 < / b > was released on February 21 , 2008 . You can ftp it <nl> from < a <nl> - href = " ftp : / / sourceware . org : / pub / libffi / libffi - 3 . 0 . 1 . tar . gz " > sourceware . org : / pub / libffi / libffi - 3 . 0 . 1 . tar . gz < / a > . <nl> + href = " ftp : / / sourceware . org : / pub / libffi / libffi - 3 . 0 . 2 . tar . gz " > sourceware . org : / pub / libffi / libffi - 3 . 0 . 2 . tar . gz < / a > . <nl> <nl> < p > <nl> <nl> @ @ - 69 , 6 + 69 , 7 @ @ release was only tested on : <nl> < li > sparc64 solaris <nl> < li > x86 cygwin <nl> < li > x86 darwin <nl> + < li > x86 freebsd <nl> < li > x86 linux <nl> < li > x86 - 64 darwin <nl> < li > x86 - 64 linux

TEST DIFF:
diff - - git a / ChangeLog b / ChangeLog 
 index 74d529e . . 92c1a15 100644 
 - - - a / ChangeLog 
 + + + b / ChangeLog 
 @ @ - 1 , 3 + 1 , 27 @ @ 
 + 2013 - 02 - 11 Anthony Green < green @ moxielogic . com > 
 + 
 + 	 * configure . ac : Update release number to 3 . 0 . 12 . 
 + 	 * configure : Rebuilt . 
 + 	 * README : Update release info . 
 + 
 + 2013 - 02 - 10 Anthony Green < green @ moxielogic . com > 
 + 
 + 	 * README : Add Moxie . 
 + 	 * src / moxie / ffi . c : Created . 
 + 	 * src / moxie / eabi . S : Created . 
 + 	 * src / moxie / ffitarget . h : Created . 
 + 	 * Makefile . am ( nodist _ libffi _ la _ SOURCES ) : Add Moxie . 
 + 	 * Makefile . in : Rebuilt . 
 + 	 * configure . ac : Add Moxie . 
 + 	 * configure : Rebuilt . 
 + 	 * testsuite / libffi . call / huge _ struct . c : Disable format string 
 + 	 warnings for moxie * - * - elf tests . 
 + 
 + 2013 - 02 - 10 Anthony Green < green @ moxielogic . com > 
 + 
 + 	 * Makefile . am ( LTLDFLAGS ) : Fix reference . 
 + 	 * Makefile . in : Rebuilt . 
 + 
 2013 - 02 - 10 Anthony Green < green @ moxielogic . com > 
 
 	 * README : Update supported platforms . Update test results link . 
 diff - - git a / Makefile . am b / Makefile . am 
 index 5787f9e . . 8f1362a 100644 
 - - - a / Makefile . am 
 + + + b / Makefile . am 
 @ @ - 148 , 6 + 148 , 9 @ @ endif 
 if M68K 
 nodist _ libffi _ la _ SOURCES + = src / m68k / ffi . c src / m68k / sysv . S 
 endif 
 + if MOXIE 
 + nodist _ libffi _ la _ SOURCES + = src / moxie / ffi . c src / moxie / eabi . S 
 + endif 
 if MICROBLAZE 
 nodist _ libffi _ la _ SOURCES + = src / microblaze / ffi . c src / microblaze / sysv . S 
 endif 
 @ @ - 209 , 7 + 212 , 7 @ @ endif 
 libffi _ convenience _ la _ SOURCES = $ ( libffi _ la _ SOURCES ) 
 nodist _ libffi _ convenience _ la _ SOURCES = $ ( nodist _ libffi _ la _ SOURCES ) 
 
 - LTLDFLAGS = $ ( shell $ ( SHELL ) $ ( top _ srcdir ) / . . / libtool - ldflags $ ( LDFLAGS ) ) 
 + LTLDFLAGS = $ ( shell $ ( SHELL ) $ ( top _ srcdir ) / libtool - ldflags $ ( LDFLAGS ) ) 
 
 libffi _ la _ LDFLAGS = - no - undefined - version - info ` grep - v ' ^ \ # ' $ ( srcdir ) / libtool - version ` $ ( LTLDFLAGS ) $ ( AM _ LTLDFLAGS ) 
 
 diff - - git a / Makefile . in b / Makefile . in 
 index 7317ec1 . . fc5e80e 100644 
 - - - a / Makefile . in 
 + + + b / Makefile . in 
 @ @ - 65 , 25 + 65 , 26 @ @ target _ triplet = @ target @ 
 @ IA64 _ TRUE @ am _ _ append _ 11 = src / ia64 / ffi . c src / ia64 / unix . S 
 @ M32R _ TRUE @ am _ _ append _ 12 = src / m32r / sysv . S src / m32r / ffi . c 
 @ M68K _ TRUE @ am _ _ append _ 13 = src / m68k / ffi . c src / m68k / sysv . S 
 - @ MICROBLAZE _ TRUE @ am _ _ append _ 14 = src / microblaze / ffi . c src / microblaze / sysv . S 
 - @ POWERPC _ TRUE @ am _ _ append _ 15 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S src / powerpc / linux64 . S src / powerpc / linux64 _ closure . S 
 - @ POWERPC _ AIX _ TRUE @ am _ _ append _ 16 = src / powerpc / ffi _ darwin . c src / powerpc / aix . S src / powerpc / aix _ closure . S 
 - @ POWERPC _ DARWIN _ TRUE @ am _ _ append _ 17 = src / powerpc / ffi _ darwin . c src / powerpc / darwin . S src / powerpc / darwin _ closure . S 
 - @ POWERPC _ FREEBSD _ TRUE @ am _ _ append _ 18 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S 
 - @ AARCH64 _ TRUE @ am _ _ append _ 19 = src / aarch64 / sysv . S src / aarch64 / ffi . c 
 - @ ARM _ TRUE @ am _ _ append _ 20 = src / arm / sysv . S src / arm / ffi . c 
 - @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ append _ 21 = src / arm / trampoline . S 
 - @ AVR32 _ TRUE @ am _ _ append _ 22 = src / avr32 / sysv . S src / avr32 / ffi . c 
 - @ LIBFFI _ CRIS _ TRUE @ am _ _ append _ 23 = src / cris / sysv . S src / cris / ffi . c 
 - @ FRV _ TRUE @ am _ _ append _ 24 = src / frv / eabi . S src / frv / ffi . c 
 - @ S390 _ TRUE @ am _ _ append _ 25 = src / s390 / sysv . S src / s390 / ffi . c 
 - @ X86 _ 64 _ TRUE @ am _ _ append _ 26 = src / x86 / ffi64 . c src / x86 / unix64 . S src / x86 / ffi . c src / x86 / sysv . S 
 - @ SH _ TRUE @ am _ _ append _ 27 = src / sh / sysv . S src / sh / ffi . c 
 - @ SH64 _ TRUE @ am _ _ append _ 28 = src / sh64 / sysv . S src / sh64 / ffi . c 
 - @ PA _ LINUX _ TRUE @ am _ _ append _ 29 = src / pa / linux . S src / pa / ffi . c 
 - @ PA _ HPUX _ TRUE @ am _ _ append _ 30 = src / pa / hpux32 . S src / pa / ffi . c 
 - @ TILE _ TRUE @ am _ _ append _ 31 = src / tile / tile . S src / tile / ffi . c 
 - @ XTENSA _ TRUE @ am _ _ append _ 32 = src / xtensa / sysv . S src / xtensa / ffi . c 
 + @ MOXIE _ TRUE @ am _ _ append _ 14 = src / moxie / ffi . c src / moxie / eabi . S 
 + @ MICROBLAZE _ TRUE @ am _ _ append _ 15 = src / microblaze / ffi . c src / microblaze / sysv . S 
 + @ POWERPC _ TRUE @ am _ _ append _ 16 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S src / powerpc / linux64 . S src / powerpc / linux64 _ closure . S 
 + @ POWERPC _ AIX _ TRUE @ am _ _ append _ 17 = src / powerpc / ffi _ darwin . c src / powerpc / aix . S src / powerpc / aix _ closure . S 
 + @ POWERPC _ DARWIN _ TRUE @ am _ _ append _ 18 = src / powerpc / ffi _ darwin . c src / powerpc / darwin . S src / powerpc / darwin _ closure . S 
 + @ POWERPC _ FREEBSD _ TRUE @ am _ _ append _ 19 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S 
 + @ AARCH64 _ TRUE @ am _ _ append _ 20 = src / aarch64 / sysv . S src / aarch64 / ffi . c 
 + @ ARM _ TRUE @ am _ _ append _ 21 = src / arm / sysv . S src / arm / ffi . c 
 + @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ append _ 22 = src / arm / trampoline . S 
 + @ AVR32 _ TRUE @ am _ _ append _ 23 = src / avr32 / sysv . S src / avr32 / ffi . c 
 + @ LIBFFI _ CRIS _ TRUE @ am _ _ append _ 24 = src / cris / sysv . S src / cris / ffi . c 
 + @ FRV _ TRUE @ am _ _ append _ 25 = src / frv / eabi . S src / frv / ffi . c 
 + @ S390 _ TRUE @ am _ _ append _ 26 = src / s390 / sysv . S src / s390 / ffi . c 
 + @ X86 _ 64 _ TRUE @ am _ _ append _ 27 = src / x86 / ffi64 . c src / x86 / unix64 . S src / x86 / ffi . c src / x86 / sysv . S 
 + @ SH _ TRUE @ am _ _ append _ 28 = src / sh / sysv . S src / sh / ffi . c 
 + @ SH64 _ TRUE @ am _ _ append _ 29 = src / sh64 / sysv . S src / sh64 / ffi . c 
 + @ PA _ LINUX _ TRUE @ am _ _ append _ 30 = src / pa / linux . S src / pa / ffi . c 
 + @ PA _ HPUX _ TRUE @ am _ _ append _ 31 = src / pa / hpux32 . S src / pa / ffi . c 
 + @ TILE _ TRUE @ am _ _ append _ 32 = src / tile / tile . S src / tile / ffi . c 
 + @ XTENSA _ TRUE @ am _ _ append _ 33 = src / xtensa / sysv . S src / xtensa / ffi . c 
 subdir = . 
 DIST _ COMMON = README $ ( am _ _ configure _ deps ) $ ( srcdir ) / Makefile . am \ 
 	 $ ( srcdir ) / Makefile . in $ ( srcdir ) / doc / stamp - vti \ 
 @ @ - 164 , 36 + 165 , 37 @ @ am _ libffi _ la _ OBJECTS = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ 
 @ IA64 _ TRUE @ am _ _ objects _ 11 = src / ia64 / ffi . lo src / ia64 / unix . lo 
 @ M32R _ TRUE @ am _ _ objects _ 12 = src / m32r / sysv . lo src / m32r / ffi . lo 
 @ M68K _ TRUE @ am _ _ objects _ 13 = src / m68k / ffi . lo src / m68k / sysv . lo 
 - @ MICROBLAZE _ TRUE @ am _ _ objects _ 14 = src / microblaze / ffi . lo \ 
 + @ MOXIE _ TRUE @ am _ _ objects _ 14 = src / moxie / ffi . lo src / moxie / eabi . lo 
 + @ MICROBLAZE _ TRUE @ am _ _ objects _ 15 = src / microblaze / ffi . lo \ 
 @ MICROBLAZE _ TRUE @ 	 src / microblaze / sysv . lo 
 - @ POWERPC _ TRUE @ am _ _ objects _ 15 = src / powerpc / ffi . lo src / powerpc / sysv . lo \ 
 + @ POWERPC _ TRUE @ am _ _ objects _ 16 = src / powerpc / ffi . lo src / powerpc / sysv . lo \ 
 @ POWERPC _ TRUE @ 	 src / powerpc / ppc _ closure . lo \ 
 @ POWERPC _ TRUE @ 	 src / powerpc / linux64 . lo \ 
 @ POWERPC _ TRUE @ 	 src / powerpc / linux64 _ closure . lo 
 - @ POWERPC _ AIX _ TRUE @ am _ _ objects _ 16 = src / powerpc / ffi _ darwin . lo \ 
 + @ POWERPC _ AIX _ TRUE @ am _ _ objects _ 17 = src / powerpc / ffi _ darwin . lo \ 
 @ POWERPC _ AIX _ TRUE @ 	 src / powerpc / aix . lo \ 
 @ POWERPC _ AIX _ TRUE @ 	 src / powerpc / aix _ closure . lo 
 - @ POWERPC _ DARWIN _ TRUE @ am _ _ objects _ 17 = src / powerpc / ffi _ darwin . lo \ 
 + @ POWERPC _ DARWIN _ TRUE @ am _ _ objects _ 18 = src / powerpc / ffi _ darwin . lo \ 
 @ POWERPC _ DARWIN _ TRUE @ 	 src / powerpc / darwin . lo \ 
 @ POWERPC _ DARWIN _ TRUE @ 	 src / powerpc / darwin _ closure . lo 
 - @ POWERPC _ FREEBSD _ TRUE @ am _ _ objects _ 18 = src / powerpc / ffi . lo \ 
 + @ POWERPC _ FREEBSD _ TRUE @ am _ _ objects _ 19 = src / powerpc / ffi . lo \ 
 @ POWERPC _ FREEBSD _ TRUE @ 	 src / powerpc / sysv . lo \ 
 @ POWERPC _ FREEBSD _ TRUE @ 	 src / powerpc / ppc _ closure . lo 
 - @ AARCH64 _ TRUE @ am _ _ objects _ 19 = src / aarch64 / sysv . lo src / aarch64 / ffi . lo 
 - @ ARM _ TRUE @ am _ _ objects _ 20 = src / arm / sysv . lo src / arm / ffi . lo 
 - @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ objects _ 21 = src / arm / trampoline . lo 
 - @ AVR32 _ TRUE @ am _ _ objects _ 22 = src / avr32 / sysv . lo src / avr32 / ffi . lo 
 - @ LIBFFI _ CRIS _ TRUE @ am _ _ objects _ 23 = src / cris / sysv . lo src / cris / ffi . lo 
 - @ FRV _ TRUE @ am _ _ objects _ 24 = src / frv / eabi . lo src / frv / ffi . lo 
 - @ S390 _ TRUE @ am _ _ objects _ 25 = src / s390 / sysv . lo src / s390 / ffi . lo 
 - @ X86 _ 64 _ TRUE @ am _ _ objects _ 26 = src / x86 / ffi64 . lo src / x86 / unix64 . lo \ 
 + @ AARCH64 _ TRUE @ am _ _ objects _ 20 = src / aarch64 / sysv . lo src / aarch64 / ffi . lo 
 + @ ARM _ TRUE @ am _ _ objects _ 21 = src / arm / sysv . lo src / arm / ffi . lo 
 + @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ objects _ 22 = src / arm / trampoline . lo 
 + @ AVR32 _ TRUE @ am _ _ objects _ 23 = src / avr32 / sysv . lo src / avr32 / ffi . lo 
 + @ LIBFFI _ CRIS _ TRUE @ am _ _ objects _ 24 = src / cris / sysv . lo src / cris / ffi . lo 
 + @ FRV _ TRUE @ am _ _ objects _ 25 = src / frv / eabi . lo src / frv / ffi . lo 
 + @ S390 _ TRUE @ am _ _ objects _ 26 = src / s390 / sysv . lo src / s390 / ffi . lo 
 + @ X86 _ 64 _ TRUE @ am _ _ objects _ 27 = src / x86 / ffi64 . lo src / x86 / unix64 . lo \ 
 @ X86 _ 64 _ TRUE @ 	 src / x86 / ffi . lo src / x86 / sysv . lo 
 - @ SH _ TRUE @ am _ _ objects _ 27 = src / sh / sysv . lo src / sh / ffi . lo 
 - @ SH64 _ TRUE @ am _ _ objects _ 28 = src / sh64 / sysv . lo src / sh64 / ffi . lo 
 - @ PA _ LINUX _ TRUE @ am _ _ objects _ 29 = src / pa / linux . lo src / pa / ffi . lo 
 - @ PA _ HPUX _ TRUE @ am _ _ objects _ 30 = src / pa / hpux32 . lo src / pa / ffi . lo 
 - @ TILE _ TRUE @ am _ _ objects _ 31 = src / tile / tile . lo src / tile / ffi . lo 
 - @ XTENSA _ TRUE @ am _ _ objects _ 32 = src / xtensa / sysv . lo src / xtensa / ffi . lo 
 + @ SH _ TRUE @ am _ _ objects _ 28 = src / sh / sysv . lo src / sh / ffi . lo 
 + @ SH64 _ TRUE @ am _ _ objects _ 29 = src / sh64 / sysv . lo src / sh64 / ffi . lo 
 + @ PA _ LINUX _ TRUE @ am _ _ objects _ 30 = src / pa / linux . lo src / pa / ffi . lo 
 + @ PA _ HPUX _ TRUE @ am _ _ objects _ 31 = src / pa / hpux32 . lo src / pa / ffi . lo 
 + @ TILE _ TRUE @ am _ _ objects _ 32 = src / tile / tile . lo src / tile / ffi . lo 
 + @ XTENSA _ TRUE @ am _ _ objects _ 33 = src / xtensa / sysv . lo src / xtensa / ffi . lo 
 nodist _ libffi _ la _ OBJECTS = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) \ 
 	 $ ( am _ _ objects _ 3 ) $ ( am _ _ objects _ 4 ) $ ( am _ _ objects _ 5 ) \ 
 	 $ ( am _ _ objects _ 6 ) $ ( am _ _ objects _ 7 ) $ ( am _ _ objects _ 8 ) \ 
 @ @ - 204 , 17 + 206 , 18 @ @ nodist _ libffi _ la _ OBJECTS = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) \ 
 	 $ ( am _ _ objects _ 21 ) $ ( am _ _ objects _ 22 ) $ ( am _ _ objects _ 23 ) \ 
 	 $ ( am _ _ objects _ 24 ) $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) \ 
 	 $ ( am _ _ objects _ 27 ) $ ( am _ _ objects _ 28 ) $ ( am _ _ objects _ 29 ) \ 
 - 	 $ ( am _ _ objects _ 30 ) $ ( am _ _ objects _ 31 ) $ ( am _ _ objects _ 32 ) 
 + 	 $ ( am _ _ objects _ 30 ) $ ( am _ _ objects _ 31 ) $ ( am _ _ objects _ 32 ) \ 
 + 	 $ ( am _ _ objects _ 33 ) 
 libffi _ la _ OBJECTS = $ ( am _ libffi _ la _ OBJECTS ) \ 
 	 $ ( nodist _ libffi _ la _ OBJECTS ) 
 libffi _ la _ LINK = $ ( LIBTOOL ) - - tag = CC $ ( AM _ LIBTOOLFLAGS ) \ 
 	 $ ( LIBTOOLFLAGS ) - - mode = link $ ( CCLD ) $ ( AM _ CFLAGS ) $ ( CFLAGS ) \ 
 	 $ ( libffi _ la _ LDFLAGS ) $ ( LDFLAGS ) - o $ @ 
 libffi _ convenience _ la _ LIBADD = 
 - am _ _ objects _ 33 = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ 
 + am _ _ objects _ 34 = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ 
 	 src / java _ raw _ api . lo src / closures . lo 
 - am _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 33 ) 
 - am _ _ objects _ 34 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ 
 + am _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 34 ) 
 + am _ _ objects _ 35 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ 
 	 $ ( am _ _ objects _ 4 ) $ ( am _ _ objects _ 5 ) $ ( am _ _ objects _ 6 ) \ 
 	 $ ( am _ _ objects _ 7 ) $ ( am _ _ objects _ 8 ) $ ( am _ _ objects _ 9 ) \ 
 	 $ ( am _ _ objects _ 10 ) $ ( am _ _ objects _ 11 ) $ ( am _ _ objects _ 12 ) \ 
 @ @ - 224 , 8 + 227 , 8 @ @ am _ _ objects _ 34 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ 
 	 $ ( am _ _ objects _ 22 ) $ ( am _ _ objects _ 23 ) $ ( am _ _ objects _ 24 ) \ 
 	 $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) $ ( am _ _ objects _ 27 ) \ 
 	 $ ( am _ _ objects _ 28 ) $ ( am _ _ objects _ 29 ) $ ( am _ _ objects _ 30 ) \ 
 - 	 $ ( am _ _ objects _ 31 ) $ ( am _ _ objects _ 32 ) 
 - nodist _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 34 ) 
 + 	 $ ( am _ _ objects _ 31 ) $ ( am _ _ objects _ 32 ) $ ( am _ _ objects _ 33 ) 
 + nodist _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 35 ) 
 libffi _ convenience _ la _ OBJECTS = $ ( am _ libffi _ convenience _ la _ OBJECTS ) \ 
 	 $ ( nodist _ libffi _ convenience _ la _ OBJECTS ) 
 DEFAULT _ INCLUDES = - I . @ am _ _ isrc @ 
 @ @ - 563 , 10 + 566 , 11 @ @ nodist _ libffi _ la _ SOURCES = $ ( am _ _ append _ 1 ) $ ( am _ _ append _ 2 ) \ 
 	 $ ( am _ _ append _ 21 ) $ ( am _ _ append _ 22 ) $ ( am _ _ append _ 23 ) \ 
 	 $ ( am _ _ append _ 24 ) $ ( am _ _ append _ 25 ) $ ( am _ _ append _ 26 ) \ 
 	 $ ( am _ _ append _ 27 ) $ ( am _ _ append _ 28 ) $ ( am _ _ append _ 29 ) \ 
 - 	 $ ( am _ _ append _ 30 ) $ ( am _ _ append _ 31 ) $ ( am _ _ append _ 32 ) 
 + 	 $ ( am _ _ append _ 30 ) $ ( am _ _ append _ 31 ) $ ( am _ _ append _ 32 ) \ 
 + 	 $ ( am _ _ append _ 33 ) 
 libffi _ convenience _ la _ SOURCES = $ ( libffi _ la _ SOURCES ) 
 nodist _ libffi _ convenience _ la _ SOURCES = $ ( nodist _ libffi _ la _ SOURCES ) 
 - LTLDFLAGS = $ ( shell $ ( SHELL ) $ ( top _ srcdir ) / . . / libtool - ldflags $ ( LDFLAGS ) ) 
 + LTLDFLAGS = $ ( shell $ ( SHELL ) $ ( top _ srcdir ) / libtool - ldflags $ ( LDFLAGS ) ) 
 libffi _ la _ LDFLAGS = - no - undefined - version - info ` grep - v ' ^ \ # ' $ ( srcdir ) / libtool - version ` $ ( LTLDFLAGS ) $ ( AM _ LTLDFLAGS ) 
 AM _ CPPFLAGS = - I . - I $ ( top _ srcdir ) / include - Iinclude - I $ ( top _ srcdir ) / src 
 AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) 
 @ @ - 779 , 6 + 783 , 16 @ @ src / m68k / ffi . lo : src / m68k / $ ( am _ _ dirstamp ) \ 
 	 src / m68k / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 src / m68k / sysv . lo : src / m68k / $ ( am _ _ dirstamp ) \ 
 	 src / m68k / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 + src / moxie / $ ( am _ _ dirstamp ) : 
 + 	 @ $ ( MKDIR _ P ) src / moxie 
 + 	 @ : > src / moxie / $ ( am _ _ dirstamp ) 
 + src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) : 
 + 	 @ $ ( MKDIR _ P ) src / moxie / $ ( DEPDIR ) 
 + 	 @ : > src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 + src / moxie / ffi . lo : src / moxie / $ ( am _ _ dirstamp ) \ 
 + 	 src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 + src / moxie / eabi . lo : src / moxie / $ ( am _ _ dirstamp ) \ 
 + 	 src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 src / microblaze / $ ( am _ _ dirstamp ) : 
 	 @ $ ( MKDIR _ P ) src / microblaze 
 	 @ : > src / microblaze / $ ( am _ _ dirstamp ) 
 @ @ - 962 , 6 + 976 , 8 @ @ mostlyclean - compile : 
 	 - rm - f src / microblaze / * . lo 
 	 - rm - f src / mips / * . $ ( OBJEXT ) 
 	 - rm - f src / mips / * . lo 
 + 	 - rm - f src / moxie / * . $ ( OBJEXT ) 
 + 	 - rm - f src / moxie / * . lo 
 	 - rm - f src / pa / * . $ ( OBJEXT ) 
 	 - rm - f src / pa / * . lo 
 	 - rm - f src / powerpc / * . $ ( OBJEXT ) 
 @ @ - 1016 , 6 + 1032 , 8 @ @ distclean - compile : 
 @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / mips / $ ( DEPDIR ) / ffi . Plo @ am _ _ quote @ 
 @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / mips / $ ( DEPDIR ) / n32 . Plo @ am _ _ quote @ 
 @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / mips / $ ( DEPDIR ) / o32 . Plo @ am _ _ quote @ 
 + @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / moxie / $ ( DEPDIR ) / eabi . Plo @ am _ _ quote @ 
 + @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / moxie / $ ( DEPDIR ) / ffi . Plo @ am _ _ quote @ 
 @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / pa / $ ( DEPDIR ) / ffi . Plo @ am _ _ quote @ 
 @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / pa / $ ( DEPDIR ) / hpux32 . Plo @ am _ _ quote @ 
 @ AMDEP _ TRUE @ @ am _ _ include @ @ am _ _ quote @ src / pa / $ ( DEPDIR ) / linux . Plo @ am _ _ quote @ 
 @ @ - 1118 , 6 + 1136 , 7 @ @ clean - libtool : 
 	 - rm - rf src / m68k / . libs src / m68k / _ libs 
 	 - rm - rf src / microblaze / . libs src / microblaze / _ libs 
 	 - rm - rf src / mips / . libs src / mips / _ libs 
 + 	 - rm - rf src / moxie / . libs src / moxie / _ libs 
 	 - rm - rf src / pa / . libs src / pa / _ libs 
 	 - rm - rf src / powerpc / . libs src / powerpc / _ libs 
 	 - rm - rf src / s390 / . libs src / s390 / _ libs 
 @ @ - 1696 , 6 + 1715 , 8 @ @ distclean - generic : 
 	 - rm - f src / microblaze / $ ( am _ _ dirstamp ) 
 	 - rm - f src / mips / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 	 - rm - f src / mips / $ ( am _ _ dirstamp ) 
 + 	 - rm - f src / moxie / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 + 	 - rm - f src / moxie / $ ( am _ _ dirstamp ) 
 	 - rm - f src / pa / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 	 - rm - f src / pa / $ ( am _ _ dirstamp ) 
 	 - rm - f src / powerpc / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 @ @ - 1726 , 7 + 1747 , 7 @ @ clean - am : clean - aminfo clean - generic clean - libtool \ 
 
 distclean : distclean - recursive 
 	 - rm - f $ ( am _ _ CONFIG _ DISTCLEAN _ FILES ) 
 - 	 - rm - rf src / $ ( DEPDIR ) src / aarch64 / $ ( DEPDIR ) src / alpha / $ ( DEPDIR ) src / arm / $ ( DEPDIR ) src / avr32 / $ ( DEPDIR ) src / bfin / $ ( DEPDIR ) src / cris / $ ( DEPDIR ) src / frv / $ ( DEPDIR ) src / ia64 / $ ( DEPDIR ) src / m32r / $ ( DEPDIR ) src / m68k / $ ( DEPDIR ) src / microblaze / $ ( DEPDIR ) src / mips / $ ( DEPDIR ) src / pa / $ ( DEPDIR ) src / powerpc / $ ( DEPDIR ) src / s390 / $ ( DEPDIR ) src / sh / $ ( DEPDIR ) src / sh64 / $ ( DEPDIR ) src / sparc / $ ( DEPDIR ) src / tile / $ ( DEPDIR ) src / x86 / $ ( DEPDIR ) src / xtensa / $ ( DEPDIR ) 
 + 	 - rm - rf src / $ ( DEPDIR ) src / aarch64 / $ ( DEPDIR ) src / alpha / $ ( DEPDIR ) src / arm / $ ( DEPDIR ) src / avr32 / $ ( DEPDIR ) src / bfin / $ ( DEPDIR ) src / cris / $ ( DEPDIR ) src / frv / $ ( DEPDIR ) src / ia64 / $ ( DEPDIR ) src / m32r / $ ( DEPDIR ) src / m68k / $ ( DEPDIR ) src / microblaze / $ ( DEPDIR ) src / mips / $ ( DEPDIR ) src / moxie / $ ( DEPDIR ) src / pa / $ ( DEPDIR ) src / powerpc / $ ( DEPDIR ) src / s390 / $ ( DEPDIR ) src / sh / $ ( DEPDIR ) src / sh64 / $ ( DEPDIR ) src / sparc / $ ( DEPDIR ) src / tile / $ ( DEPDIR ) src / x86 / $ ( DEPDIR ) src / xtensa / $ ( DEPDIR ) 
 	 - rm - f Makefile 
 distclean - am : clean - am distclean - compile distclean - generic \ 
 	 distclean - hdr distclean - libtool distclean - tags 
 @ @ - 1865 , 7 + 1886 , 7 @ @ installcheck - am : 
 maintainer - clean : maintainer - clean - recursive 
 	 - rm - f $ ( am _ _ CONFIG _ DISTCLEAN _ FILES ) 
 	 - rm - rf $ ( top _ srcdir ) / autom4te . cache 
 - 	 - rm - rf src / $ ( DEPDIR ) src / aarch64 / $ ( DEPDIR ) src / alpha / $ ( DEPDIR ) src / arm / $ ( DEPDIR ) src / avr32 / $ ( DEPDIR ) src / bfin / $ ( DEPDIR ) src / cris / $ ( DEPDIR ) src / frv / $ ( DEPDIR ) src / ia64 / $ ( DEPDIR ) src / m32r / $ ( DEPDIR ) src / m68k / $ ( DEPDIR ) src / microblaze / $ ( DEPDIR ) src / mips / $ ( DEPDIR ) src / pa / $ ( DEPDIR ) src / powerpc / $ ( DEPDIR ) src / s390 / $ ( DEPDIR ) src / sh / $ ( DEPDIR ) src / sh64 / $ ( DEPDIR ) src / sparc / $ ( DEPDIR ) src / tile / $ ( DEPDIR ) src / x86 / $ ( DEPDIR ) src / xtensa / $ ( DEPDIR ) 
 + 	 - rm - rf src / $ ( DEPDIR ) src / aarch64 / $ ( DEPDIR ) src / alpha / $ ( DEPDIR ) src / arm / $ ( DEPDIR ) src / avr32 / $ ( DEPDIR ) src / bfin / $ ( DEPDIR ) src / cris / $ ( DEPDIR ) src / frv / $ ( DEPDIR ) src / ia64 / $ ( DEPDIR ) src / m32r / $ ( DEPDIR ) src / m68k / $ ( DEPDIR ) src / microblaze / $ ( DEPDIR ) src / mips / $ ( DEPDIR ) src / moxie / $ ( DEPDIR ) src / pa / $ ( DEPDIR ) src / powerpc / $ ( DEPDIR ) src / s390 / $ ( DEPDIR ) src / sh / $ ( DEPDIR ) src / sh64 / $ ( DEPDIR ) src / sparc / $ ( DEPDIR ) src / tile / $ ( DEPDIR ) src / x86 / $ ( DEPDIR ) src / xtensa / $ ( DEPDIR ) 
 	 - rm - f Makefile 
 maintainer - clean - am : distclean - am maintainer - clean - aminfo \ 
 	 maintainer - clean - generic maintainer - clean - vti 
 diff - - git a / README b / README 
 index f5abd43 . . 82b2104 100644 
 - - - a / README 
 + + + b / README 
 @ @ - 1 , 8 + 1 , 8 @ @ 
 Status 
 = = = = = = 
 
 - libffi - 3 . 0 . 12 was released on XXXXXXX . Check the libffi web page for 
 - updates : < URL : http : / / sourceware . org / libffi / > . 
 + libffi - 3 . 0 . 12 was released on February 11 , 2013 . Check the libffi web 
 + page for updates : < URL : http : / / sourceware . org / libffi / > . 
 
 
 What is libffi ? 
 @ @ - 68 , 6 + 68 , 7 @ @ tested : 
 | MIPS | Linux | GCC | 
 | MIPS | RTEMS | GCC | 
 | MIPS64 | Linux | GCC | 
 + | Moxie 	 	 | Bare metal 	 | GCC 
 | PowerPC 32 - bit | AIX | IBM XL C | 
 | PowerPC 64 - bit | AIX | IBM XL C | 
 | PowerPC | AMIGA | GCC | 
 @ @ - 161 , 11 + 162 , 12 @ @ History 
 
 See the ChangeLog files for details . 
 
 - 3 . 0 . 12 XXX - XX - XX 
 + 3 . 0 . 12 Feb - 11 - 13 
 + Add Moxie support . 
 	 Add AArch64 support . 
 	 Add Blackfin support . 
 	 Add TILE - Gx / TILEPro support . 
 - 	 Add Microblaze support . 
 + 	 Add MicroBlaze support . 
 	 Add Xtensa support . 
 	 Add support for PaX enabled kernels with MPROTECT . 
 	 Add support for native vendor compilers on 
 @ @ - 353 , 6 + 355 , 7 @ @ m68k 	 	 Andreas Schwab 
 microblaze 	 Nathan Rossi 
 mips 	 	 Anthony Green , Casey Marshall 
 mips64 	 	 David Daney 
 + moxie 	 	 Anthony Green 
 pa 	 	 Randolph Chung , Dave Anglin , Andreas Tobler 
 powerpc 	 	 Geoffrey Keating , Andreas Tobler , 
 	 	 	 David Edelsohn , John Hornkvist 
 diff - - git a / configure b / configure 
 index 771398a . . a3a2a82 100755 
 - - - a / configure 
 + + + b / configure 
 @ @ - 1 , 6 + 1 , 6 @ @ 
 # ! / bin / sh 
 # Guess values for system - dependent variables and create Makefiles . 
 - # Generated by GNU Autoconf 2 . 69 for libffi 3 . 0 . 12 - rc3 . 
 + # Generated by GNU Autoconf 2 . 69 for libffi 3 . 0 . 12 . 
 # 
 # Report bugs to < http : / / github . com / atgreen / libffi / issues > . 
 # 
 @ @ - 590 , 8 + 590 , 8 @ @ MAKEFLAGS = 
 # Identity of this package . 
 PACKAGE _ NAME = ' libffi ' 
 PACKAGE _ TARNAME = ' libffi ' 
 - PACKAGE _ VERSION = ' 3 . 0 . 12 - rc3 ' 
 - PACKAGE _ STRING = ' libffi 3 . 0 . 12 - rc3 ' 
 + PACKAGE _ VERSION = ' 3 . 0 . 12 ' 
 + PACKAGE _ STRING = ' libffi 3 . 0 . 12 ' 
 PACKAGE _ BUGREPORT = ' http : / / github . com / atgreen / libffi / issues ' 
 PACKAGE _ URL = ' ' 
 
 @ @ - 1405 , 7 + 1405 , 7 @ @ if test " $ ac _ init _ help " = " long " ; then 
 # Omit some internal or obsolete options to make the list less imposing . 
 # This message is too long to be a string in the A / UX 3 . 1 sh . 
 cat < < _ ACEOF 
 - \ ` configure ' configures libffi 3 . 0 . 12 - rc3 to adapt to many kinds of systems . 
 + \ ` configure ' configures libffi 3 . 0 . 12 to adapt to many kinds of systems . 
 
 Usage : $ 0 [ OPTION ] . . . [ VAR = VALUE ] . . . 
 
 @ @ - 1476 , 7 + 1476 , 7 @ @ fi 
 
 if test - n " $ ac _ init _ help " ; then 
 case $ ac _ init _ help in 
 - short | recursive ) echo " Configuration of libffi 3 . 0 . 12 - rc3 : " ; ; 
 + short | recursive ) echo " Configuration of libffi 3 . 0 . 12 : " ; ; 
 esac 
 cat < < \ _ ACEOF 
 
 @ @ - 1596 , 7 + 1596 , 7 @ @ fi 
 test - n " $ ac _ init _ help " & & exit $ ac _ status 
 if $ ac _ init _ version ; then 
 cat < < \ _ ACEOF 
 - libffi configure 3 . 0 . 12 - rc3 
 + libffi configure 3 . 0 . 12 
 generated by GNU Autoconf 2 . 69 
 
 Copyright ( C ) 2012 Free Software Foundation , Inc . 
 @ @ - 2202 , 7 + 2202 , 7 @ @ cat > config . log < < _ ACEOF 
 This file contains any messages produced by compilers while 
 running configure , to aid debugging if configure makes a mistake . 
 
 - It was created by libffi $ as _ me 3 . 0 . 12 - rc3 , which was 
 + It was created by libffi $ as _ me 3 . 0 . 12 , which was 
 generated by GNU Autoconf 2 . 69 . Invocation command line was 
 
 $ $ 0 $ @ 
 @ @ - 3245 , 7 + 3245 , 7 @ @ fi 
 
 # Define the identity of the package . 
 PACKAGE = ' libffi ' 
 - VERSION = ' 3 . 0 . 12 - rc3 ' 
 + VERSION = ' 3 . 0 . 12 ' 
 
 
 cat > > confdefs . h < < _ ACEOF 
 @ @ - 13415 , 6 + 13415 , 10 @ @ case " $ host " in 
 	 TARGET = MICROBLAZE ; TARGETDIR = microblaze 
 	 ; ; 
 
 + moxie - * - * ) 
 + 	 TARGET = MOXIE ; TARGETDIR = moxie 
 + 	 ; ; 
 + 
 mips - sgi - irix5 . * | mips - sgi - irix6 . * | mips * - * - rtems * ) 
 	 TARGET = MIPS ; TARGETDIR = mips 
 	 ; ; 
 @ @ - 15527 , 7 + 15531 , 7 @ @ cat > > $ CONFIG _ STATUS < < \ _ ACEOF | | ac _ write _ fail = 1 
 # report actual input values of CONFIG _ FILES etc . instead of their 
 # values after options handling . 
 ac _ log = " 
 - This file was extended by libffi $ as _ me 3 . 0 . 12 - rc3 , which was 
 + This file was extended by libffi $ as _ me 3 . 0 . 12 , which was 
 generated by GNU Autoconf 2 . 69 . Invocation command line was 
 
 CONFIG _ FILES = $ CONFIG _ FILES 
 @ @ - 15597 , 7 + 15601 , 7 @ @ _ ACEOF 
 cat > > $ CONFIG _ STATUS < < _ ACEOF | | ac _ write _ fail = 1 
 ac _ cs _ config = " ` $ as _ echo " $ ac _ configure _ args " | sed ' s / ^ / / ; s / [ \ \ " " \ ` \ $ ] / \ \ \ \ & / g ' ` " 
 ac _ cs _ version = " \ \ 
 - libffi config . status 3 . 0 . 12 - rc3 
 + libffi config . status 3 . 0 . 12 
 configured by $ 0 , generated by GNU Autoconf 2 . 69 , 
 with options \ \ " \ $ ac _ cs _ config \ \ " 
 
 diff - - git a / configure . ac b / configure . ac 
 index c3cd132 . . 428d938 100644 
 - - - a / configure . ac 
 + + + b / configure . ac 
 @ @ - 2 , 7 + 2 , 7 @ @ dnl Process this with autoconf to create configure 
 
 AC _ PREREQ ( 2 . 68 ) 
 
 - AC _ INIT ( [ libffi ] , [ 3 . 0 . 12 - rc3 ] , [ http : / / github . com / atgreen / libffi / issues ] ) 
 + AC _ INIT ( [ libffi ] , [ 3 . 0 . 12 ] , [ http : / / github . com / atgreen / libffi / issues ] ) 
 AC _ CONFIG _ HEADERS ( [ fficonfig . h ] ) 
 
 AC _ CANONICAL _ SYSTEM 
 @ @ - 195 , 6 + 195 , 10 @ @ case " $ host " in 
 	 TARGET = MICROBLAZE ; TARGETDIR = microblaze 
 	 ; ; 
 
 + moxie - * - * ) 
 + 	 TARGET = MOXIE ; TARGETDIR = moxie 
 + 	 ; ; 
 + 
 mips - sgi - irix5 . * | mips - sgi - irix6 . * | mips * - * - rtems * ) 
 	 TARGET = MIPS ; TARGETDIR = mips 
 	 ; ; 
 diff - - git a / doc / stamp - vti b / doc / stamp - vti 
 index 883a8ff . . 766fbac 100644 
 - - - a / doc / stamp - vti 
 + + + b / doc / stamp - vti 
 @ @ - 1 , 4 + 1 , 4 @ @ 
 @ set UPDATED 6 February 2013 
 @ set UPDATED - MONTH February 2013 
 - @ set EDITION 3 . 0 . 12 - rc3 
 - @ set VERSION 3 . 0 . 12 - rc3 
 + @ set EDITION 3 . 0 . 12 
 + @ set VERSION 3 . 0 . 12 
 diff - - git a / doc / version . texi b / doc / version . texi 
 index 883a8ff . . 766fbac 100644 
 - - - a / doc / version . texi 
 + + + b / doc / version . texi 
 @ @ - 1 , 4 + 1 , 4 @ @ 
 @ set UPDATED 6 February 2013 
 @ set UPDATED - MONTH February 2013 
 - @ set EDITION 3 . 0 . 12 - rc3 
 - @ set VERSION 3 . 0 . 12 - rc3 
 + @ set EDITION 3 . 0 . 12 
 + @ set VERSION 3 . 0 . 12 
 diff - - git a / src / moxie / eabi . S b / src / moxie / eabi . S 
 index 7e2143b . . ac7aceb 100644 
 - - - a / src / moxie / eabi . S 
 + + + b / src / moxie / eabi . S 
 @ @ - 1 , 5 + 1 , 5 @ @ 
 / * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
 - eabi . S - Copyright ( c ) 2012 Anthony Green 
 + eabi . S - Copyright ( c ) 2012 , 2013 Anthony Green 
 
 Moxie Assembly glue . 
 
 @ @ - 41 , 24 + 41 , 61 @ @ 
 	 # $ r4 : ecif . rvalue 
 	 # $ r5 : fn 
 	 
 - ffi _ call _ EABI : 	 
 + ffi _ call _ EABI : 
 + 	 push 	 $ sp , $ r6 
 + 	 push 	 $ sp , $ r7 
 + 	 push 	 $ sp , $ r8 
 	 dec 	 $ sp , 24 
 
 	 / * Store incoming args on stack . * / 
 - 	 sto . l 	 0 ( $ sp ) , $ r0 
 - 	 sto . l 	 4 ( $ sp ) , $ r1 
 - 	 sto . l 	 8 ( $ sp ) , $ r2 
 - 	 sto . l 	 12 ( $ sp ) , $ r3 
 - 	 sto . l 	 16 ( $ sp ) , $ r4 
 - 	 sto . l 	 20 ( $ sp ) , $ r5 
 + 	 sto . l 	 0 ( $ sp ) , $ r0 / * ffi _ prep _ args * / 
 + 	 sto . l 	 4 ( $ sp ) , $ r1 / * ecif * / 
 + 	 sto . l 	 8 ( $ sp ) , $ r2 / * bytes * / 
 + 	 sto . l 	 12 ( $ sp ) , $ r3 / * flags * / 
 + 	 sto . l 	 16 ( $ sp ) , $ r4 / * & rvalue * / 
 + 	 sto . l 	 20 ( $ sp ) , $ r5 / * fn * / 
 	 
 	 / * Call ffi _ prep _ args . * / 
 - 	 jsr 	 $ r0 
 + 	 mov 	 $ r6 , $ r4 / * Save result buffer * / 
 + 	 mov 	 $ r7 , $ r5 / * Save the target fn * / 
 + 	 mov 	 $ r8 , $ r3 / * Save the flags * / 
 + 	 sub . l 	 $ sp , $ r2 / * Allocate stack space * / 
 + 	 mov 	 $ r0 , $ sp / * We can stomp over $ r0 * / 
 + 	 / * $ r1 is already set up * / 
 + 	 jsra 	 ffi _ prep _ args 
 
 + 	 / * Load register arguments . * / 
 + 	 ldo . l 	 $ r0 , 0 ( $ sp ) 
 + 	 ldo . l 	 $ r1 , 4 ( $ sp ) 
 + 	 ldo . l 	 $ r2 , 8 ( $ sp ) 
 + 	 ldo . l 	 $ r3 , 12 ( $ sp ) 
 + 	 ldo . l 	 $ r4 , 16 ( $ sp ) 
 + 	 ldo . l 	 $ r5 , 20 ( $ sp ) 
 + 	 
 	 / * Call the target function . * / 
 - 	 jsr 	 $ r5 
 + 	 jsr 	 $ r7 
 + 
 + 	 ldi . l 	 $ r7 , 0xffffffff 
 + 	 cmp 	 $ r8 , $ r7 
 + 	 beq 	 retstruct 
 + 
 + 	 ldi . l 	 $ r7 , 4 
 + 	 cmp 	 $ r8 , $ r7 
 + 	 bgt 	 ret2reg 
 + 
 + 	 st . l 	 ( $ r6 ) , $ r0 
 + 	 jmpa 	 retdone 
 + 
 + ret2reg : 	 
 + 	 st . l 	 ( $ r6 ) , $ r0 
 + 	 sto . l 	 4 ( $ r6 ) , $ r1 
 
 + retstruct : 
 + retdone : 	 
 	 / * Return . * / 
 + 	 ldo . l 	 $ r6 , - 4 ( $ fp ) 
 + 	 ldo . l 	 $ r7 , - 8 ( $ fp ) 
 + 	 ldo . l 	 $ r8 , - 12 ( $ fp ) 
 	 ret 
 	 . size ffi _ call _ EABI , . - ffi _ call _ EABI 
 	 
 diff - - git a / src / moxie / ffi . c b / src / moxie / ffi . c 
 index 11abb00 . . 540a042 100644 
 - - - a / src / moxie / ffi . c 
 + + + b / src / moxie / ffi . c 
 @ @ - 1 , 5 + 1 , 5 @ @ 
 / * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
 - ffi . c - Copyright ( C ) 2012 Anthony Green 
 + ffi . c - Copyright ( C ) 2012 , 2013 Anthony Green 
 
 Moxie Foreign Function Interface 
 
 @ @ - 43 , 6 + 43 , 12 @ @ void * ffi _ prep _ args ( char * stack , extended _ cif * ecif ) 
 p _ argv = ecif - > avalue ; 
 argp = stack ; 
 
 + if ( ecif - > cif - > rtype - > type = = FFI _ TYPE _ STRUCT ) 
 + { 
 + * ( void * * ) argp = ecif - > rvalue ; 
 + argp + = 4 ; 
 + } 
 + 
 for ( i = ecif - > cif - > nargs , p _ arg = ecif - > cif - > arg _ types ; 
 ( i ! = 0 ) ; 
 i - - , p _ arg + + ) 
 @ @ - 136 , 8 + 142 , 7 @ @ void ffi _ call ( ffi _ cif * cif , 
 } 
 else 
 ecif . rvalue = rvalue ; 
 - 
 - 
 + 
 switch ( cif - > abi ) 
 { 
 case FFI _ EABI : 
 @ @ - 154 , 19 + 159 , 25 @ @ void ffi _ closure _ eabi ( unsigned arg1 , unsigned arg2 , unsigned arg3 , 
 	 	 unsigned arg4 , unsigned arg5 , unsigned arg6 ) 
 { 
 / * This function is called by a trampoline . The trampoline stows a 
 - pointer to the ffi _ closure object in gr7 . We must save this 
 + pointer to the ffi _ closure object in $ r7 . We must save this 
 pointer in a place that will persist while we do our work . * / 
 - register ffi _ closure * creg _ _ asm _ _ ( " $ r7 " ) ; 
 + register ffi _ closure * creg _ _ asm _ _ ( " $ r12 " ) ; 
 ffi _ closure * closure = creg ; 
 
 / * Arguments that don ' t fit in registers are found on the stack 
 at a fixed offset above the current frame pointer . * / 
 register char * frame _ pointer _ _ asm _ _ ( " $ fp " ) ; 
 - char * stack _ args = frame _ pointer + 16 ; 
 + 
 + / * Pointer to a struct return value . * / 
 + void * struct _ rvalue = ( void * ) arg1 ; 
 + 
 + / * 6 words reserved for register args + 3 words from jsr * / 
 + char * stack _ args = frame _ pointer + 9 * 4 ; 
 
 / * Lay the register arguments down in a continuous chunk of memory . * / 
 unsigned register _ args [ 6 ] = 
 { arg1 , arg2 , arg3 , arg4 , arg5 , arg6 } ; 
 + char * register _ args _ ptr = ( char * ) register _ args ; 
 
 ffi _ cif * cif = closure - > cif ; 
 ffi _ type * * arg _ types = cif - > arg _ types ; 
 @ @ - 174 , 6 + 185 , 12 @ @ void ffi _ closure _ eabi ( unsigned arg1 , unsigned arg2 , unsigned arg3 , 
 char * ptr = ( char * ) register _ args ; 
 int i ; 
 
 + / * preserve struct type return pointer passing * / 
 + if ( ( cif - > rtype ! = NULL ) & & ( cif - > rtype - > type = = FFI _ TYPE _ STRUCT ) ) { 
 + ptr + = 4 ; 
 + register _ args _ ptr = ( char * ) & register _ args [ 1 ] ; 
 + } 
 + 
 / * Find the address of each argument . * / 
 for ( i = 0 ; i < cif - > nargs ; i + + ) 
 { 
 @ @ - 190 , 6 + 207 , 7 @ @ void ffi _ closure _ eabi ( unsigned arg1 , unsigned arg2 , unsigned arg3 , 
 	 case FFI _ TYPE _ SINT32 : 
 	 case FFI _ TYPE _ UINT32 : 
 	 case FFI _ TYPE _ FLOAT : 
 + 	 case FFI _ TYPE _ POINTER : 
 	 avalue [ i ] = ptr ; 
 	 break ; 
 	 case FFI _ TYPE _ STRUCT : 
 @ @ - 205 , 30 + 223 , 21 @ @ void ffi _ closure _ eabi ( unsigned arg1 , unsigned arg2 , unsigned arg3 , 
 
 / * If we ' ve handled more arguments than fit in registers , 
 	 start looking at the those passed on the stack . * / 
 - if ( ptr = = ( ( char * ) register _ args + ( 6 * 4 ) ) ) 
 + if ( ptr = = & register _ args [ 6 ] ) 
 	 ptr = stack _ args ; 
 } 
 
 / * Invoke the closure . * / 
 - if ( cif - > rtype - > type = = FFI _ TYPE _ STRUCT ) 
 + if ( cif - > rtype & & ( cif - > rtype - > type = = FFI _ TYPE _ STRUCT ) ) 
 { 
 - / * The caller allocates space for the return structure , and 
 - passes a pointer to this space in gr3 . Use this value directly 
 - as the return value . * / 
 - register void * return _ struct _ ptr _ _ asm _ _ ( " $ r0 " ) ; 
 - ( closure - > fun ) ( cif , return _ struct _ ptr , avalue , closure - > user _ data ) ; 
 + ( closure - > fun ) ( cif , struct _ rvalue , avalue , closure - > user _ data ) ; 
 } 
 else 
 { 
 / * Allocate space for the return value and call the function . * / 
 long long rvalue ; 
 ( closure - > fun ) ( cif , & rvalue , avalue , closure - > user _ data ) ; 
 - 
 - / * Functions return 4 - byte or smaller results in gr8 . 8 - byte 
 - 	 values also use gr9 . We fill the both , even for small return 
 - 	 values , just to avoid a branch . * / / * 
 - asm ( " ldi @ ( % 0 , # 0 ) , gr8 " : : " r " ( & rvalue ) ) ; 
 - asm ( " ldi @ ( % 0 , # 0 ) , gr9 " : : " r " ( & ( ( int * ) & rvalue ) [ 1 ] ) ) ; * / 
 + asm ( " mov $ r12 , % 0 \ n ld . l $ r0 , ( $ r12 ) \ n ldo . l $ r1 , 4 ( $ r12 ) " : : " r " ( & rvalue ) ) ; 
 } 
 } 
 
 @ @ - 239 , 18 + 248 , 21 @ @ ffi _ prep _ closure _ loc ( ffi _ closure * closure , 
 	 	 void * user _ data , 
 	 	 void * codeloc ) 
 { 
 - unsigned int * tramp = ( unsigned int * ) & closure - > tramp [ 0 ] ; 
 + unsigned short * tramp = ( unsigned short * ) & closure - > tramp [ 0 ] ; 
 unsigned long fn = ( long ) ffi _ closure _ eabi ; 
 unsigned long cls = ( long ) codeloc ; 
 - int i ; 
 + 
 + if ( cif - > abi ! = FFI _ EABI ) 
 + return FFI _ BAD _ ABI ; 
 
 fn = ( unsigned long ) ffi _ closure _ eabi ; 
 
 - tramp [ 0 ] = 0x8cfc0000 + ( fn & 0xffff ) ; / * setlos lo ( fn ) , gr6 * / 
 - tramp [ 1 ] = 0x8efc0000 + ( cls & 0xffff ) ; / * setlos lo ( cls ) , gr7 * / 
 - tramp [ 2 ] = 0x8cf80000 + ( fn > > 16 ) ; 	 / * sethi hi ( fn ) , gr6 * / 
 - tramp [ 3 ] = 0x8ef80000 + ( cls > > 16 ) ; / * sethi hi ( cls ) , gr7 * / 
 - tramp [ 4 ] = 0x80300006 ; / * jmpl @ ( gr0 , gr6 ) * / 
 + tramp [ 0 ] = 0x01e0 ; / * ldi . l $ r7 , . . . . * / 
 + tramp [ 1 ] = cls > > 16 ; 
 + tramp [ 2 ] = cls & 0xffff ; 
 + tramp [ 3 ] = 0x1a00 ; / * jmpa . . . . * / 
 + tramp [ 4 ] = fn > > 16 ; 
 + tramp [ 5 ] = fn & 0xffff ; 
 
 closure - > cif = cif ; 
 closure - > fun = fun ; 
 diff - - git a / src / moxie / ffitarget . h b / src / moxie / ffitarget . h 
 index 93fae39 . . 623e3ec 100644 
 - - - a / src / moxie / ffitarget . h 
 + + + b / src / moxie / ffitarget . h 
 @ @ - 1 , 5 + 1 , 5 @ @ 
 / * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - * - C - * - 
 - ffitarget . h - Copyright ( c ) 2012 Anthony Green 
 + ffitarget . h - Copyright ( c ) 2012 , 2013 Anthony Green 
 Target configuration macros for Moxie 
 
 Permission is hereby granted , free of charge , to any person obtaining 
 @ @ - 35 , 12 + 35 , 8 @ @ typedef signed long ffi _ sarg ; 
 
 typedef enum ffi _ abi { 
 FFI _ FIRST _ ABI = 0 , 
 - 
 - # ifdef MOXIE 
 FFI _ EABI , 
 FFI _ DEFAULT _ ABI = FFI _ EABI , 
 - # endif 
 - 
 FFI _ LAST _ ABI = FFI _ DEFAULT _ ABI + 1 
 } ffi _ abi ; 
 # endif 
 @ @ - 50 , 7 + 46 , 7 @ @ typedef enum ffi _ abi { 
 # define FFI _ CLOSURES 1 
 # define FFI _ NATIVE _ RAW _ API 0 
 
 - / * Trampolines are 5 4 - byte instructions long . * / 
 - # define FFI _ TRAMPOLINE _ SIZE ( 5 * 4 ) 
 + / * Trampolines are 12 - bytes long . See ffi _ prep _ closure _ loc . * / 
 + # define FFI _ TRAMPOLINE _ SIZE ( 12 ) 
 
 # endif 
 diff - - git a / testsuite / libffi . call / huge _ struct . c b / testsuite / libffi . call / huge _ struct . c 
 index 365ed95 . . 657fe54 100644 
 - - - a / testsuite / libffi . call / huge _ struct . c 
 + + + b / testsuite / libffi . call / huge _ struct . c 
 @ @ - 8 , 6 + 8 , 7 @ @ 
 / * { dg - excess - errors " " { target x86 _ 64 - * - mingw * x86 _ 64 - * - cygwin * } } * / 
 / * { dg - do run { xfail strongarm * - * - * xscale * - * - * } } * / 
 / * { dg - options - mlong - double - 128 { target powerpc64 * - * - linux * } } * / 
 + / * { dg - options - Wformat = 0 { target moxie * - * - elf } } * / 
 / * { dg - output " " { xfail x86 _ 64 - * - mingw * x86 _ 64 - * - cygwin * } } * / 
 
 # include " ffitest . h " 
 diff - - git a / testsuite / libffi . call / return _ dbl . c b / testsuite / libffi . call / return _ dbl . c 
 index 1aab403 . . fd07e50 100644 
 - - - a / testsuite / libffi . call / return _ dbl . c 
 + + + b / testsuite / libffi . call / return _ dbl . c 
 @ @ - 9 , 6 + 9 , 7 @ @ 
 
 static double return _ dbl ( double dbl ) 
 { 
 + printf ( " % f \ n " , dbl ) ; 
 return 2 * dbl ; 
 } 
 int main ( void ) 
 diff - - git a / testsuite / libffi . special / unwindtest . cc b / testsuite / libffi . special / unwindtest . cc 
 index d7ffd4a . . a78f4e7 100644 
 - - - a / testsuite / libffi . special / unwindtest . cc 
 + + + b / testsuite / libffi . special / unwindtest . cc 
 @ @ - 5 , 6 + 5 , 7 @ @ 
 Originator : 	 Jeff Sturm < jsturm @ one - point . com > * / 
 
 / * { dg - do run } * / 
 + 
 # include " ffitestcxx . h " 
 
 # if defined HAVE _ STDINT _ H 
 diff - - git a / testsuite / libffi . special / unwindtest _ ffi _ call . cc b / testsuite / libffi . special / unwindtest _ ffi _ call . cc 
 index 29739cd . . 57191f2 100644 
 - - - a / testsuite / libffi . special / unwindtest _ ffi _ call . cc 
 + + + b / testsuite / libffi . special / unwindtest _ ffi _ call . cc 
 @ @ - 5 , 6 + 5 , 7 @ @ 
 Originator : 	 Andreas Tobler < andreast @ gcc . gnu . org > 20061213 * / 
 
 / * { dg - do run } * / 
 + 
 # include " ffitestcxx . h " 
 
 static int checking ( int a _ _ UNUSED _ _ , short b _ _ UNUSED _ _ ,

NEAREST DIFF:
diff - - git a / htdocs / ChangeLog b / htdocs / ChangeLog 
 index d48cd8d . . e8cf502 100644 
 - - - a / htdocs / ChangeLog 
 + + + b / htdocs / ChangeLog 
 @ @ - 1 , 3 + 1 , 7 @ @ 
 + 2008 - 02 - 21 Anthony Green < green @ redhat . com > 
 + 
 + 	 * index . html : 3 . 0 . 2 
 + 
 2008 - 02 - 15 Anthony Green < green @ redhat . com > 
 
 	 * index . html : 3 . 0 . 1 
 diff - - git a / htdocs / index . html b / htdocs / index . html 
 index df45528 . . 7e1f4d2 100644 
 - - - a / htdocs / index . html 
 + + + b / htdocs / index . html 
 @ @ - 8 , 9 + 8 , 9 @ @ libffi 
 
 < h1 > libffi - a portable foreign function interface library < / h1 > 
 
 - < b > libffi - 3 . 0 . 1 < / b > was released on February 15 , 2008 . You can ftp it 
 + < b > libffi - 3 . 0 . 2 < / b > was released on February 21 , 2008 . You can ftp it 
 from < a 
 - href = " ftp : / / sourceware . org : / pub / libffi / libffi - 3 . 0 . 1 . tar . gz " > sourceware . org : / pub / libffi / libffi - 3 . 0 . 1 . tar . gz < / a > . 
 + href = " ftp : / / sourceware . org : / pub / libffi / libffi - 3 . 0 . 2 . tar . gz " > sourceware . org : / pub / libffi / libffi - 3 . 0 . 2 . tar . gz < / a > . 
 
 < p > 
 
 @ @ - 69 , 6 + 69 , 7 @ @ release was only tested on : 
 < li > sparc64 solaris 
 < li > x86 cygwin 
 < li > x86 darwin 
 + < li > x86 freebsd 
 < li > x86 linux 
 < li > x86 - 64 darwin 
 < li > x86 - 64 linux
