BLEU SCORE: 0.02399905349559606

TEST MSG: test for issue # 520
GENERATED MSG: fix bug with aliasing buffers in Memory ByteBuffer tracking

TEST DIFF (one line): diff - - git a / contrib / platform / test / com / sun / jna / platform / win32 / COM / ShellApplicationWindowsTest . java b / contrib / platform / test / com / sun / jna / platform / win32 / COM / ShellApplicationWindowsTest . java <nl> new file mode 100644 <nl> index 0000000 . . c2b2947 <nl> - - - / dev / null <nl> + + + b / contrib / platform / test / com / sun / jna / platform / win32 / COM / ShellApplicationWindowsTest . java <nl> @ @ - 0 , 0 + 1 , 232 @ @ <nl> + package com . sun . jna . platform . win32 . COM ; <nl> + <nl> + import java . util . Iterator ; <nl> + import java . util . NoSuchElementException ; <nl> + <nl> + import com . sun . jna . Native ; <nl> + import com . sun . jna . NativeLibrary ; <nl> + import com . sun . jna . platform . win32 . OleAuto ; <nl> + import com . sun . jna . platform . win32 . Variant ; <nl> + import com . sun . jna . platform . win32 . Variant . VARIANT ; <nl> + import com . sun . jna . platform . win32 . WinDef . LONG ; <nl> + import com . sun . jna . platform . win32 . WinDef . LONGLONG ; <nl> + <nl> + import junit . framework . TestCase ; <nl> + <nl> + public class ShellApplicationWindowsTest extends TestCase { <nl> + <nl> + 	 @ Override <nl> + 	 protected void setUp ( ) throws Exception { <nl> + 	 	 String [ ] commands = { " cmd " , " / c " , " start " , " iexplore . exe " , " - nohome " , " \ " http : / / www . srh . noaa . gov / jax \ " " } ; <nl> + 	 	 Runtime . getRuntime ( ) . exec ( commands ) ; <nl> + 	 	 Thread . sleep ( 30000 ) ; <nl> + 	 } <nl> + <nl> + 	 public void testWindowsCount ( ) { <nl> + System . out . println ( " java . vendor : " + System . getProperty ( " java . vendor " ) ) ; <nl> + System . out . println ( " java . version : " + System . getProperty ( " java . version " ) ) ; <nl> + System . out . println ( " os . version : " + System . getProperty ( " os . version " ) ) ; <nl> + System . out . println ( " os . arch : " + System . getProperty ( " os . arch " ) ) ; <nl> + System . out . println ( " os . name : " + System . getProperty ( " os . name " ) ) ; <nl> + <nl> + ShellApplication sa = new ShellApplication ( ) ; <nl> + System . out . println ( " Shell . Application . Windows found : " + sa . Windows ( ) . Count ( ) ) ; <nl> + assertTrue ( sa . Windows ( ) . Count ( ) > 0 ) ; <nl> + for ( InternetExplorer ie : sa . Windows ( ) ) <nl> + { <nl> + System . out . println ( ) ; <nl> + System . out . println ( " = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = " ) ; <nl> + if ( ie ! = null ) <nl> + { <nl> + System . out . println ( " Title : " + ie . getTitle ( ) ) ; <nl> + System . out . println ( " URL : " + ie . getURL ( ) ) ; <nl> + System . out . println ( " App Name : " + ie . getName ( ) ) ; <nl> + System . out . println ( " Window Handle : " + ie . getWindowHandle ( ) ) ; <nl> + } <nl> + else <nl> + { <nl> + System . out . println ( " Null encountered . " ) ; <nl> + } <nl> + System . out . println ( " = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = " ) ; <nl> + System . out . println ( ) ; <nl> + } <nl> + 	 } <nl> + 	 <nl> + 	 @ Override <nl> + 	 protected void tearDown ( ) throws Exception { <nl> + 	 	 Runtime . getRuntime ( ) . exec ( " taskkill . exe / f / im iexplore . exe " ) ; <nl> + 	 } <nl> + <nl> + 	 <nl> + 	 <nl> + / * * <nl> + * A COM representation of the Windows shell . <nl> + * / <nl> + private static class ShellApplication extends COMLateBindingObject <nl> + { <nl> + public ShellApplication ( ) throws COMException <nl> + { <nl> + super ( " Shell . Application " , false ) ; <nl> + } <nl> + <nl> + / * * <nl> + * @ return Creates and returns a ShellWindows object . < br > <nl> + * This object represents a collection of all of the open windows that belong to the Shell . <nl> + * / <nl> + public ShellWindows Windows ( ) <nl> + { <nl> + return new ShellWindows ( ( IDispatch ) invoke ( " Windows " ) . getValue ( ) ) ; <nl> + } <nl> + <nl> + / * * <nl> + * Represents a collection of the open windows that belong to the Shell . < br > <nl> + * Methods associated with this objects can control and execute commands within the Shell , and obtain other Shell - related objects . <nl> + * / <nl> + public static class ShellWindows extends COMLateBindingObject implements Iterable < InternetExplorer > <nl> + { <nl> + <nl> + private static class ShellWindowsIterator implements Iterator < InternetExplorer > <nl> + { <nl> + <nl> + private ShellWindows source ; <nl> + <nl> + private int count ; <nl> + <nl> + private int max ; <nl> + <nl> + public ShellWindowsIterator ( ShellWindows collection ) <nl> + { <nl> + source = collection ; <nl> + max = source . Count ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public boolean hasNext ( ) <nl> + { <nl> + return count < max ; <nl> + } <nl> + <nl> + @ Override <nl> + public InternetExplorer next ( ) <nl> + { <nl> + if ( ! hasNext ( ) ) <nl> + { <nl> + throw new NoSuchElementException ( ) ; <nl> + } <nl> + return source . Item ( count + + ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void remove ( ) <nl> + { <nl> + throw new UnsupportedOperationException ( ) ; <nl> + } <nl> + <nl> + } <nl> + <nl> + public ShellWindows ( IDispatch iDispatch ) <nl> + { <nl> + super ( iDispatch ) ; <nl> + } <nl> + <nl> + / * * <nl> + * Retrieves an InternetExplorer object that represents the Shell window . <nl> + * <nl> + * @ param idx <nl> + * The zero - based index of the item to retrieve . < br > <nl> + * This value must be less than the value of the Count property . <nl> + * @ return an InternetExplorer object that represents the Shell window . <nl> + * / <nl> + public InternetExplorer Item ( int idx ) <nl> + { <nl> + VARIANT arg = new VARIANT ( ) ; <nl> + arg . setValue ( Variant . VT _ I4 , new LONG ( idx ) ) ; <nl> + IDispatch result = ( IDispatch ) invoke ( " Item " , arg ) . getValue ( ) ; <nl> + if ( result = = null ) <nl> + { <nl> + return null ; <nl> + } <nl> + return new InternetExplorer ( result ) ; <nl> + } <nl> + <nl> + / * * <nl> + * @ return the number of items in the collection . <nl> + * / <nl> + public int Count ( ) <nl> + { <nl> + return getIntProperty ( " Count " ) ; <nl> + } <nl> + <nl> + @ SuppressWarnings ( { " unchecked " , " rawtypes " } ) <nl> + @ Override <nl> + public Iterator iterator ( ) <nl> + { <nl> + return new ShellWindowsIterator ( this ) ; <nl> + } <nl> + } <nl> + <nl> + } <nl> + <nl> + / * * <nl> + * InternetExplorer / IWebBrowser2 - see http : / / msdn . microsoft . com / en - us / library / aa752127 ( v = vs . 85 ) . aspx <nl> + * / <nl> + private static class InternetExplorer extends COMLateBindingObject <nl> + { <nl> + <nl> + public InternetExplorer ( IDispatch iDispatch ) <nl> + { <nl> + super ( iDispatch ) ; <nl> + } <nl> + <nl> + / * * <nl> + * @ return the title of the browser window . This may not always be the title of the main document <nl> + * / <nl> + public String getTitle ( ) <nl> + { <nl> + return getStringProperty ( " LocationName " ) ; <nl> + } <nl> + <nl> + / * * <nl> + * IWebBrowser2 : : get _ LocationURL < br > <nl> + * Read - only COM property . < br > <nl> + * <nl> + * @ return the URL of the resource that is currently displayed . <nl> + * / <nl> + public String getURL ( ) <nl> + { <nl> + return getStringProperty ( " LocationURL " ) ; <nl> + } <nl> + <nl> + / * * <nl> + * IWebBrowser2 : : get _ Name < br > <nl> + * Read - only COM property . < br > <nl> + * <nl> + * @ return the frame name or application name of the object . <nl> + * / <nl> + public String getName ( ) <nl> + { <nl> + return getStringProperty ( " Name " ) ; <nl> + } <nl> + <nl> + / * * <nl> + * IWebBrowser2 : : HWND < br > <nl> + * Read - only COM property . < br > <nl> + * <nl> + * @ return the handle of the Internet Explorer main window . <nl> + * / <nl> + public long getWindowHandle ( ) <nl> + { <nl> + VARIANT . ByReference result = new VARIANT . ByReference ( ) ; <nl> + this . oleMethod ( OleAuto . DISPATCH _ PROPERTYGET , result , this . getIDispatch ( ) , " HWND " ) ; <nl> + <nl> + if ( result . getVarType ( ) . intValue ( ) = = Variant . VT _ I8 ) <nl> + { <nl> + return ( ( LONGLONG ) result . getValue ( ) ) . longValue ( ) ; <nl> + } <nl> + return ( ( LONG ) result . getValue ( ) ) . longValue ( ) ; <nl> + <nl> + } <nl> + } <nl> + <nl> + 	 <nl> + }
NEAREST DIFF (one line): diff - - git a / ChangeLog b / ChangeLog <nl> index 8a83fb7 . . f965aec 100644 <nl> - - - a / ChangeLog <nl> + + + b / ChangeLog <nl> @ @ - 1 , 22 + 1 , 7 @ @ <nl> - 2011 - 11 - 12 Anthony Green < green @ moxielogic . com > <nl> + 2011 - 11 - 12 Kimura Wataru < kimuraw @ i . nifty . jp > <nl> <nl> - 	 * Makefile . am ( AM _ CCASFLAGS ) : Add - g option to build assembly <nl> - 	 files with debug info . <nl> - 	 * Makefile . in : Rebuilt . <nl> - <nl> - 2011 - 11 - 12 Jasper Lievisse Adriaanse < jasper @ openbsd . org > <nl> - <nl> - 	 * README : Update list of supported OpenBSD systems . <nl> - <nl> - 2011 - 11 - 12 Anthony Green < green @ moxielogic . com > <nl> - <nl> - 	 * libtool - version : Update . <nl> - 	 * Makefile . am ( nodist _ libffi _ la _ SOURCES ) : Add src / debug . c if <nl> - 	 FFI _ DEBUG . <nl> - 	 ( libffi _ la _ SOURCES ) : Remove src / debug . c <nl> - 	 ( EXTRA _ DIST ) : Add src / debug . c <nl> - 	 * Makefile . in : Rebuilt . <nl> - 	 * README : Update for 3 . 0 . 11 . <nl> + 	 * m4 / ax _ enable _ builddir : Change from string comparison to numeric <nl> + 	 comparison for wc output . <nl> <nl> 2011 - 11 - 10 Richard Henderson < rth @ redhat . com > <nl> <nl> diff - - git a / Makefile . am b / Makefile . am <nl> index 2c2444e . . 36db3f2 100644 <nl> - - - a / Makefile . am <nl> + + + b / Makefile . am <nl> @ @ - 88 , 7 + 88 , 7 @ @ ACLOCAL _ AMFLAGS = $ ( ACLOCAL _ AMFLAGS ) - I m4 <nl> lib _ LTLIBRARIES = libffi . la <nl> noinst _ LTLIBRARIES = libffi _ convenience . la <nl> <nl> - libffi _ la _ SOURCES = src / prep _ cif . c src / types . c \ <nl> + libffi _ la _ SOURCES = src / debug . c src / prep _ cif . c src / types . c \ <nl> 	 	 src / raw _ api . c src / java _ raw _ api . c src / closures . c <nl> <nl> pkgconfigdir = $ ( libdir ) / pkgconfig <nl> @ @ - 96 , 10 + 96 , 6 @ @ pkgconfig _ DATA = libffi . pc <nl> <nl> nodist _ libffi _ la _ SOURCES = <nl> <nl> - if FFI _ DEBUG <nl> - nodist _ libffi _ la _ SOURCES + = src / debug . c <nl> - endif <nl> - <nl> if MIPS <nl> nodist _ libffi _ la _ SOURCES + = src / mips / ffi . c src / mips / o32 . S src / mips / n32 . S <nl> endif <nl> @ @ - 195 , 7 + 191 , 7 @ @ endif <nl> libffi _ la _ LDFLAGS = - version - info ` grep - v ' ^ \ # ' $ ( srcdir ) / libtool - version ` $ ( LTLDFLAGS ) $ ( AM _ LTLDFLAGS ) <nl> <nl> AM _ CPPFLAGS = - I . - I $ ( top _ srcdir ) / include - Iinclude - I $ ( top _ srcdir ) / src <nl> - AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) - g <nl> + AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) <nl> <nl> # No install - html or install - pdf support in automake yet <nl> . PHONY : install - html install - pdf <nl> diff - - git a / Makefile . in b / Makefile . in <nl> index 4dc1103 . . b3a2706 100644 <nl> - - - a / Makefile . in <nl> + + + b / Makefile . in <nl> @ @ - 36 , 37 + 36 , 36 @ @ POST _ UNINSTALL = : <nl> build _ triplet = @ build @ <nl> host _ triplet = @ host @ <nl> target _ triplet = @ target @ <nl> - @ FFI _ DEBUG _ TRUE @ am _ _ append _ 1 = src / debug . c <nl> - @ MIPS _ TRUE @ am _ _ append _ 2 = src / mips / ffi . c src / mips / o32 . S src / mips / n32 . S <nl> - @ X86 _ TRUE @ am _ _ append _ 3 = src / x86 / ffi . c src / x86 / sysv . S <nl> - @ X86 _ FREEBSD _ TRUE @ am _ _ append _ 4 = src / x86 / ffi . c src / x86 / freebsd . S <nl> - @ X86 _ WIN32 _ TRUE @ am _ _ append _ 5 = src / x86 / ffi . c src / x86 / win32 . S <nl> - @ X86 _ WIN64 _ TRUE @ am _ _ append _ 6 = src / x86 / ffi . c src / x86 / win64 . S <nl> - @ X86 _ DARWIN _ TRUE @ am _ _ append _ 7 = src / x86 / ffi . c src / x86 / darwin . S src / x86 / ffi64 . c src / x86 / darwin64 . S <nl> - @ SPARC _ TRUE @ am _ _ append _ 8 = src / sparc / ffi . c src / sparc / v8 . S src / sparc / v9 . S <nl> - @ ALPHA _ TRUE @ am _ _ append _ 9 = src / alpha / ffi . c src / alpha / osf . S <nl> - @ IA64 _ TRUE @ am _ _ append _ 10 = src / ia64 / ffi . c src / ia64 / unix . S <nl> - @ M32R _ TRUE @ am _ _ append _ 11 = src / m32r / sysv . S src / m32r / ffi . c <nl> - @ M68K _ TRUE @ am _ _ append _ 12 = src / m68k / ffi . c src / m68k / sysv . S <nl> - @ POWERPC _ TRUE @ am _ _ append _ 13 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S src / powerpc / linux64 . S src / powerpc / linux64 _ closure . S <nl> - @ POWERPC _ AIX _ TRUE @ am _ _ append _ 14 = src / powerpc / ffi _ darwin . c src / powerpc / aix . S src / powerpc / aix _ closure . S <nl> - @ POWERPC _ DARWIN _ TRUE @ am _ _ append _ 15 = src / powerpc / ffi _ darwin . c src / powerpc / darwin . S src / powerpc / darwin _ closure . S <nl> - @ POWERPC _ FREEBSD _ TRUE @ am _ _ append _ 16 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S <nl> - @ ARM _ TRUE @ am _ _ append _ 17 = src / arm / sysv . S src / arm / ffi . c <nl> - @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ append _ 18 = src / arm / trampoline . S <nl> - @ AVR32 _ TRUE @ am _ _ append _ 19 = src / avr32 / sysv . S src / avr32 / ffi . c <nl> - @ LIBFFI _ CRIS _ TRUE @ am _ _ append _ 20 = src / cris / sysv . S src / cris / ffi . c <nl> - @ FRV _ TRUE @ am _ _ append _ 21 = src / frv / eabi . S src / frv / ffi . c <nl> - @ MOXIE _ TRUE @ am _ _ append _ 22 = src / moxie / eabi . S src / moxie / ffi . c <nl> - @ S390 _ TRUE @ am _ _ append _ 23 = src / s390 / sysv . S src / s390 / ffi . c <nl> - @ X86 _ 64 _ TRUE @ am _ _ append _ 24 = src / x86 / ffi64 . c src / x86 / unix64 . S src / x86 / ffi . c src / x86 / sysv . S <nl> - @ SH _ TRUE @ am _ _ append _ 25 = src / sh / sysv . S src / sh / ffi . c <nl> - @ SH64 _ TRUE @ am _ _ append _ 26 = src / sh64 / sysv . S src / sh64 / ffi . c <nl> - @ PA _ LINUX _ TRUE @ am _ _ append _ 27 = src / pa / linux . S src / pa / ffi . c <nl> - @ PA _ HPUX _ TRUE @ am _ _ append _ 28 = src / pa / hpux32 . S src / pa / ffi . c <nl> + @ MIPS _ TRUE @ am _ _ append _ 1 = src / mips / ffi . c src / mips / o32 . S src / mips / n32 . S <nl> + @ X86 _ TRUE @ am _ _ append _ 2 = src / x86 / ffi . c src / x86 / sysv . S <nl> + @ X86 _ FREEBSD _ TRUE @ am _ _ append _ 3 = src / x86 / ffi . c src / x86 / freebsd . S <nl> + @ X86 _ WIN32 _ TRUE @ am _ _ append _ 4 = src / x86 / ffi . c src / x86 / win32 . S <nl> + @ X86 _ WIN64 _ TRUE @ am _ _ append _ 5 = src / x86 / ffi . c src / x86 / win64 . S <nl> + @ X86 _ DARWIN _ TRUE @ am _ _ append _ 6 = src / x86 / ffi . c src / x86 / darwin . S src / x86 / ffi64 . c src / x86 / darwin64 . S <nl> + @ SPARC _ TRUE @ am _ _ append _ 7 = src / sparc / ffi . c src / sparc / v8 . S src / sparc / v9 . S <nl> + @ ALPHA _ TRUE @ am _ _ append _ 8 = src / alpha / ffi . c src / alpha / osf . S <nl> + @ IA64 _ TRUE @ am _ _ append _ 9 = src / ia64 / ffi . c src / ia64 / unix . S <nl> + @ M32R _ TRUE @ am _ _ append _ 10 = src / m32r / sysv . S src / m32r / ffi . c <nl> + @ M68K _ TRUE @ am _ _ append _ 11 = src / m68k / ffi . c src / m68k / sysv . S <nl> + @ POWERPC _ TRUE @ am _ _ append _ 12 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S src / powerpc / linux64 . S src / powerpc / linux64 _ closure . S <nl> + @ POWERPC _ AIX _ TRUE @ am _ _ append _ 13 = src / powerpc / ffi _ darwin . c src / powerpc / aix . S src / powerpc / aix _ closure . S <nl> + @ POWERPC _ DARWIN _ TRUE @ am _ _ append _ 14 = src / powerpc / ffi _ darwin . c src / powerpc / darwin . S src / powerpc / darwin _ closure . S <nl> + @ POWERPC _ FREEBSD _ TRUE @ am _ _ append _ 15 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S <nl> + @ ARM _ TRUE @ am _ _ append _ 16 = src / arm / sysv . S src / arm / ffi . c <nl> + @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ append _ 17 = src / arm / trampoline . S <nl> + @ AVR32 _ TRUE @ am _ _ append _ 18 = src / avr32 / sysv . S src / avr32 / ffi . c <nl> + @ LIBFFI _ CRIS _ TRUE @ am _ _ append _ 19 = src / cris / sysv . S src / cris / ffi . c <nl> + @ FRV _ TRUE @ am _ _ append _ 20 = src / frv / eabi . S src / frv / ffi . c <nl> + @ MOXIE _ TRUE @ am _ _ append _ 21 = src / moxie / eabi . S src / moxie / ffi . c <nl> + @ S390 _ TRUE @ am _ _ append _ 22 = src / s390 / sysv . S src / s390 / ffi . c <nl> + @ X86 _ 64 _ TRUE @ am _ _ append _ 23 = src / x86 / ffi64 . c src / x86 / unix64 . S src / x86 / ffi . c src / x86 / sysv . S <nl> + @ SH _ TRUE @ am _ _ append _ 24 = src / sh / sysv . S src / sh / ffi . c <nl> + @ SH64 _ TRUE @ am _ _ append _ 25 = src / sh64 / sysv . S src / sh64 / ffi . c <nl> + @ PA _ LINUX _ TRUE @ am _ _ append _ 26 = src / pa / linux . S src / pa / ffi . c <nl> + @ PA _ HPUX _ TRUE @ am _ _ append _ 27 = src / pa / hpux32 . S src / pa / ffi . c <nl> # Build debug . Define FFI _ DEBUG on the commandline so that , when building with <nl> # MSVC , it can link against the debug CRT . <nl> - @ FFI _ DEBUG _ TRUE @ am _ _ append _ 29 = - DFFI _ DEBUG <nl> + @ FFI _ DEBUG _ TRUE @ am _ _ append _ 28 = - DFFI _ DEBUG <nl> subdir = . <nl> DIST _ COMMON = README $ ( am _ _ configure _ deps ) $ ( srcdir ) / Makefile . am \ <nl> 	 $ ( srcdir ) / Makefile . in $ ( srcdir ) / doc / stamp - vti \ <nl> @ @ - 122 , 49 + 121 , 48 @ @ am _ _ installdirs = " $ ( DESTDIR ) $ ( libdir ) " " $ ( DESTDIR ) $ ( infodir ) " \ <nl> LTLIBRARIES = $ ( lib _ LTLIBRARIES ) $ ( noinst _ LTLIBRARIES ) <nl> libffi _ la _ LIBADD = <nl> am _ _ dirstamp = $ ( am _ _ leading _ dot ) dirstamp <nl> - am _ libffi _ la _ OBJECTS = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ <nl> - 	 src / java _ raw _ api . lo src / closures . lo <nl> - @ FFI _ DEBUG _ TRUE @ am _ _ objects _ 1 = src / debug . lo <nl> - @ MIPS _ TRUE @ am _ _ objects _ 2 = src / mips / ffi . lo src / mips / o32 . lo \ <nl> + am _ libffi _ la _ OBJECTS = src / debug . lo src / prep _ cif . lo src / types . lo \ <nl> + 	 src / raw _ api . lo src / java _ raw _ api . lo src / closures . lo <nl> + @ MIPS _ TRUE @ am _ _ objects _ 1 = src / mips / ffi . lo src / mips / o32 . lo \ <nl> @ MIPS _ TRUE @ 	 src / mips / n32 . lo <nl> - @ X86 _ TRUE @ am _ _ objects _ 3 = src / x86 / ffi . lo src / x86 / sysv . lo <nl> - @ X86 _ FREEBSD _ TRUE @ am _ _ objects _ 4 = src / x86 / ffi . lo src / x86 / freebsd . lo <nl> - @ X86 _ WIN32 _ TRUE @ am _ _ objects _ 5 = src / x86 / ffi . lo src / x86 / win32 . lo <nl> - @ X86 _ WIN64 _ TRUE @ am _ _ objects _ 6 = src / x86 / ffi . lo src / x86 / win64 . lo <nl> - @ X86 _ DARWIN _ TRUE @ am _ _ objects _ 7 = src / x86 / ffi . lo src / x86 / darwin . lo \ <nl> + @ X86 _ TRUE @ am _ _ objects _ 2 = src / x86 / ffi . lo src / x86 / sysv . lo <nl> + @ X86 _ FREEBSD _ TRUE @ am _ _ objects _ 3 = src / x86 / ffi . lo src / x86 / freebsd . lo <nl> + @ X86 _ WIN32 _ TRUE @ am _ _ objects _ 4 = src / x86 / ffi . lo src / x86 / win32 . lo <nl> + @ X86 _ WIN64 _ TRUE @ am _ _ objects _ 5 = src / x86 / ffi . lo src / x86 / win64 . lo <nl> + @ X86 _ DARWIN _ TRUE @ am _ _ objects _ 6 = src / x86 / ffi . lo src / x86 / darwin . lo \ <nl> @ X86 _ DARWIN _ TRUE @ 	 src / x86 / ffi64 . lo src / x86 / darwin64 . lo <nl> - @ SPARC _ TRUE @ am _ _ objects _ 8 = src / sparc / ffi . lo src / sparc / v8 . lo \ <nl> + @ SPARC _ TRUE @ am _ _ objects _ 7 = src / sparc / ffi . lo src / sparc / v8 . lo \ <nl> @ SPARC _ TRUE @ 	 src / sparc / v9 . lo <nl> - @ ALPHA _ TRUE @ am _ _ objects _ 9 = src / alpha / ffi . lo src / alpha / osf . lo <nl> - @ IA64 _ TRUE @ am _ _ objects _ 10 = src / ia64 / ffi . lo src / ia64 / unix . lo <nl> - @ M32R _ TRUE @ am _ _ objects _ 11 = src / m32r / sysv . lo src / m32r / ffi . lo <nl> - @ M68K _ TRUE @ am _ _ objects _ 12 = src / m68k / ffi . lo src / m68k / sysv . lo <nl> - @ POWERPC _ TRUE @ am _ _ objects _ 13 = src / powerpc / ffi . lo src / powerpc / sysv . lo \ <nl> + @ ALPHA _ TRUE @ am _ _ objects _ 8 = src / alpha / ffi . lo src / alpha / osf . lo <nl> + @ IA64 _ TRUE @ am _ _ objects _ 9 = src / ia64 / ffi . lo src / ia64 / unix . lo <nl> + @ M32R _ TRUE @ am _ _ objects _ 10 = src / m32r / sysv . lo src / m32r / ffi . lo <nl> + @ M68K _ TRUE @ am _ _ objects _ 11 = src / m68k / ffi . lo src / m68k / sysv . lo <nl> + @ POWERPC _ TRUE @ am _ _ objects _ 12 = src / powerpc / ffi . lo src / powerpc / sysv . lo \ <nl> @ POWERPC _ TRUE @ 	 src / powerpc / ppc _ closure . lo \ <nl> @ POWERPC _ TRUE @ 	 src / powerpc / linux64 . lo \ <nl> @ POWERPC _ TRUE @ 	 src / powerpc / linux64 _ closure . lo <nl> - @ POWERPC _ AIX _ TRUE @ am _ _ objects _ 14 = src / powerpc / ffi _ darwin . lo \ <nl> + @ POWERPC _ AIX _ TRUE @ am _ _ objects _ 13 = src / powerpc / ffi _ darwin . lo \ <nl> @ POWERPC _ AIX _ TRUE @ 	 src / powerpc / aix . lo \ <nl> @ POWERPC _ AIX _ TRUE @ 	 src / powerpc / aix _ closure . lo <nl> - @ POWERPC _ DARWIN _ TRUE @ am _ _ objects _ 15 = src / powerpc / ffi _ darwin . lo \ <nl> + @ POWERPC _ DARWIN _ TRUE @ am _ _ objects _ 14 = src / powerpc / ffi _ darwin . lo \ <nl> @ POWERPC _ DARWIN _ TRUE @ 	 src / powerpc / darwin . lo \ <nl> @ POWERPC _ DARWIN _ TRUE @ 	 src / powerpc / darwin _ closure . lo <nl> - @ POWERPC _ FREEBSD _ TRUE @ am _ _ objects _ 16 = src / powerpc / ffi . lo \ <nl> + @ POWERPC _ FREEBSD _ TRUE @ am _ _ objects _ 15 = src / powerpc / ffi . lo \ <nl> @ POWERPC _ FREEBSD _ TRUE @ 	 src / powerpc / sysv . lo \ <nl> @ POWERPC _ FREEBSD _ TRUE @ 	 src / powerpc / ppc _ closure . lo <nl> - @ ARM _ TRUE @ am _ _ objects _ 17 = src / arm / sysv . lo src / arm / ffi . lo <nl> - @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ objects _ 18 = src / arm / trampoline . lo <nl> - @ AVR32 _ TRUE @ am _ _ objects _ 19 = src / avr32 / sysv . lo src / avr32 / ffi . lo <nl> - @ LIBFFI _ CRIS _ TRUE @ am _ _ objects _ 20 = src / cris / sysv . lo src / cris / ffi . lo <nl> - @ FRV _ TRUE @ am _ _ objects _ 21 = src / frv / eabi . lo src / frv / ffi . lo <nl> - @ MOXIE _ TRUE @ am _ _ objects _ 22 = src / moxie / eabi . lo src / moxie / ffi . lo <nl> - @ S390 _ TRUE @ am _ _ objects _ 23 = src / s390 / sysv . lo src / s390 / ffi . lo <nl> - @ X86 _ 64 _ TRUE @ am _ _ objects _ 24 = src / x86 / ffi64 . lo src / x86 / unix64 . lo \ <nl> + @ ARM _ TRUE @ am _ _ objects _ 16 = src / arm / sysv . lo src / arm / ffi . lo <nl> + @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ objects _ 17 = src / arm / trampoline . lo <nl> + @ AVR32 _ TRUE @ am _ _ objects _ 18 = src / avr32 / sysv . lo src / avr32 / ffi . lo <nl> + @ LIBFFI _ CRIS _ TRUE @ am _ _ objects _ 19 = src / cris / sysv . lo src / cris / ffi . lo <nl> + @ FRV _ TRUE @ am _ _ objects _ 20 = src / frv / eabi . lo src / frv / ffi . lo <nl> + @ MOXIE _ TRUE @ am _ _ objects _ 21 = src / moxie / eabi . lo src / moxie / ffi . lo <nl> + @ S390 _ TRUE @ am _ _ objects _ 22 = src / s390 / sysv . lo src / s390 / ffi . lo <nl> + @ X86 _ 64 _ TRUE @ am _ _ objects _ 23 = src / x86 / ffi64 . lo src / x86 / unix64 . lo \ <nl> @ X86 _ 64 _ TRUE @ 	 src / x86 / ffi . lo src / x86 / sysv . lo <nl> - @ SH _ TRUE @ am _ _ objects _ 25 = src / sh / sysv . lo src / sh / ffi . lo <nl> - @ SH64 _ TRUE @ am _ _ objects _ 26 = src / sh64 / sysv . lo src / sh64 / ffi . lo <nl> - @ PA _ LINUX _ TRUE @ am _ _ objects _ 27 = src / pa / linux . lo src / pa / ffi . lo <nl> - @ PA _ HPUX _ TRUE @ am _ _ objects _ 28 = src / pa / hpux32 . lo src / pa / ffi . lo <nl> + @ SH _ TRUE @ am _ _ objects _ 24 = src / sh / sysv . lo src / sh / ffi . lo <nl> + @ SH64 _ TRUE @ am _ _ objects _ 25 = src / sh64 / sysv . lo src / sh64 / ffi . lo <nl> + @ PA _ LINUX _ TRUE @ am _ _ objects _ 26 = src / pa / linux . lo src / pa / ffi . lo <nl> + @ PA _ HPUX _ TRUE @ am _ _ objects _ 27 = src / pa / hpux32 . lo src / pa / ffi . lo <nl> nodist _ libffi _ la _ OBJECTS = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) \ <nl> 	 $ ( am _ _ objects _ 3 ) $ ( am _ _ objects _ 4 ) $ ( am _ _ objects _ 5 ) \ <nl> 	 $ ( am _ _ objects _ 6 ) $ ( am _ _ objects _ 7 ) $ ( am _ _ objects _ 8 ) \ <nl> @ @ - 174 , 17 + 172 , 17 @ @ nodist _ libffi _ la _ OBJECTS = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) \ <nl> 	 $ ( am _ _ objects _ 18 ) $ ( am _ _ objects _ 19 ) $ ( am _ _ objects _ 20 ) \ <nl> 	 $ ( am _ _ objects _ 21 ) $ ( am _ _ objects _ 22 ) $ ( am _ _ objects _ 23 ) \ <nl> 	 $ ( am _ _ objects _ 24 ) $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) \ <nl> - 	 $ ( am _ _ objects _ 27 ) $ ( am _ _ objects _ 28 ) <nl> + 	 $ ( am _ _ objects _ 27 ) <nl> libffi _ la _ OBJECTS = $ ( am _ libffi _ la _ OBJECTS ) \ <nl> 	 $ ( nodist _ libffi _ la _ OBJECTS ) <nl> libffi _ la _ LINK = $ ( LIBTOOL ) - - tag = CC $ ( AM _ LIBTOOLFLAGS ) \ <nl> 	 $ ( LIBTOOLFLAGS ) - - mode = link $ ( CCLD ) $ ( AM _ CFLAGS ) $ ( CFLAGS ) \ <nl> 	 $ ( libffi _ la _ LDFLAGS ) $ ( LDFLAGS ) - o $ @ <nl> libffi _ convenience _ la _ LIBADD = <nl> - am _ _ objects _ 29 = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ <nl> - 	 src / java _ raw _ api . lo src / closures . lo <nl> - am _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 29 ) <nl> - am _ _ objects _ 30 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ <nl> + am _ _ objects _ 28 = src / debug . lo src / prep _ cif . lo src / types . lo \ <nl> + 	 src / raw _ api . lo src / java _ raw _ api . lo src / closures . lo <nl> + am _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 28 ) <nl> + am _ _ objects _ 29 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ <nl> 	 $ ( am _ _ objects _ 4 ) $ ( am _ _ objects _ 5 ) $ ( am _ _ objects _ 6 ) \ <nl> 	 $ ( am _ _ objects _ 7 ) $ ( am _ _ objects _ 8 ) $ ( am _ _ objects _ 9 ) \ <nl> 	 $ ( am _ _ objects _ 10 ) $ ( am _ _ objects _ 11 ) $ ( am _ _ objects _ 12 ) \ <nl> @ @ - 192 , 9 + 190 , 8 @ @ am _ _ objects _ 30 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ <nl> 	 $ ( am _ _ objects _ 16 ) $ ( am _ _ objects _ 17 ) $ ( am _ _ objects _ 18 ) \ <nl> 	 $ ( am _ _ objects _ 19 ) $ ( am _ _ objects _ 20 ) $ ( am _ _ objects _ 21 ) \ <nl> 	 $ ( am _ _ objects _ 22 ) $ ( am _ _ objects _ 23 ) $ ( am _ _ objects _ 24 ) \ <nl> - 	 $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) $ ( am _ _ objects _ 27 ) \ <nl> - 	 $ ( am _ _ objects _ 28 ) <nl> - nodist _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 30 ) <nl> + 	 $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) $ ( am _ _ objects _ 27 ) <nl> + nodist _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 29 ) <nl> libffi _ convenience _ la _ OBJECTS = $ ( am _ libffi _ convenience _ la _ OBJECTS ) \ <nl> 	 $ ( nodist _ libffi _ convenience _ la _ OBJECTS ) <nl> DEFAULT _ INCLUDES = - I . @ am _ _ isrc @ <nl> @ @ - 492 , 7 + 489 , 7 @ @ MAKEOVERRIDES = <nl> ACLOCAL _ AMFLAGS = $ ( ACLOCAL _ AMFLAGS ) - I m4 <nl> lib _ LTLIBRARIES = libffi . la <nl> noinst _ LTLIBRARIES = libffi _ convenience . la <nl> - libffi _ la _ SOURCES = src / prep _ cif . c src / types . c \ <nl> + libffi _ la _ SOURCES = src / debug . c src / prep _ cif . c src / types . c \ <nl> 	 	 src / raw _ api . c src / java _ raw _ api . c src / closures . c <nl> <nl> pkgconfigdir = $ ( libdir ) / pkgconfig <nl> @ @ - 506 , 13 + 503 , 13 @ @ nodist _ libffi _ la _ SOURCES = $ ( am _ _ append _ 1 ) $ ( am _ _ append _ 2 ) \ <nl> 	 $ ( am _ _ append _ 18 ) $ ( am _ _ append _ 19 ) $ ( am _ _ append _ 20 ) \ <nl> 	 $ ( am _ _ append _ 21 ) $ ( am _ _ append _ 22 ) $ ( am _ _ append _ 23 ) \ <nl> 	 $ ( am _ _ append _ 24 ) $ ( am _ _ append _ 25 ) $ ( am _ _ append _ 26 ) \ <nl> - 	 $ ( am _ _ append _ 27 ) $ ( am _ _ append _ 28 ) <nl> + 	 $ ( am _ _ append _ 27 ) <nl> libffi _ convenience _ la _ SOURCES = $ ( libffi _ la _ SOURCES ) <nl> nodist _ libffi _ convenience _ la _ SOURCES = $ ( nodist _ libffi _ la _ SOURCES ) <nl> - AM _ CFLAGS = - g $ ( am _ _ append _ 29 ) <nl> + AM _ CFLAGS = - g $ ( am _ _ append _ 28 ) <nl> libffi _ la _ LDFLAGS = - version - info ` grep - v ' ^ \ # ' $ ( srcdir ) / libtool - version ` $ ( LTLDFLAGS ) $ ( AM _ LTLDFLAGS ) <nl> AM _ CPPFLAGS = - I . - I $ ( top _ srcdir ) / include - Iinclude - I $ ( top _ srcdir ) / src <nl> - AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) - g <nl> + AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) <nl> all : fficonfig . h <nl> 	 $ ( MAKE ) $ ( AM _ MAKEFLAGS ) all - recursive <nl> <nl> @ @ - 617 , 12 + 614 , 12 @ @ src / $ ( am _ _ dirstamp ) : <nl> src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) : <nl> 	 @ $ ( MKDIR _ P ) src / $ ( DEPDIR ) <nl> 	 @ : > src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> + src / debug . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> src / prep _ cif . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> src / types . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> src / raw _ api . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> src / java _ raw _ api . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> src / closures . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> - src / debug . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) <nl> src / mips / $ ( am _ _ dirstamp ) : <nl> 	 @ $ ( MKDIR _ P ) src / mips <nl> 	 @ : > src / mips / $ ( am _ _ dirstamp ) <nl> diff - - git a / configure b / configure <nl> index bbd9ecc . . 4ce690f 100755 <nl> - - - a / configure <nl> + + + b / configure <nl> @ @ - 12240 , 6 + 12240 , 45 @ @ $ as _ echo " $ icc _ archflag " > & 6 ; } <nl> # default optimization flags for gcc on all systems <nl> CFLAGS = " - O3 - fomit - frame - pointer " <nl> <nl> + # - malign - double for x86 systems <nl> + { $ as _ echo " $ as _ me : $ { as _ lineno - $ LINENO } : checking whether C compiler accepts - malign - double " > & 5 <nl> + $ as _ echo _ n " checking whether C compiler accepts - malign - double . . . " > & 6 ; } <nl> + if $ { ax _ cv _ c _ flags _ _ malign _ double + : } false ; then : <nl> + $ as _ echo _ n " ( cached ) " > & 6 <nl> + else <nl> + <nl> + ax _ save _ FLAGS = $ CFLAGS <nl> + CFLAGS = " - malign - double " <nl> + cat confdefs . h - < < _ ACEOF > conftest . $ ac _ ext <nl> + / * end confdefs . h . * / <nl> + <nl> + int <nl> + main ( ) <nl> + { <nl> + <nl> + ; <nl> + return 0 ; <nl> + } <nl> + _ ACEOF <nl> + if ac _ fn _ c _ try _ compile " $ LINENO " ; then : <nl> + ax _ cv _ c _ flags _ _ malign _ double = yes <nl> + else <nl> + ax _ cv _ c _ flags _ _ malign _ double = no <nl> + fi <nl> + rm - f core conftest . err conftest . $ ac _ objext conftest . $ ac _ ext <nl> + CFLAGS = $ ax _ save _ FLAGS <nl> + fi <nl> + <nl> + eval ax _ check _ compiler _ flags = $ ax _ cv _ c _ flags _ _ malign _ double <nl> + { $ as _ echo " $ as _ me : $ { as _ lineno - $ LINENO } : result : $ ax _ check _ compiler _ flags " > & 5 <nl> + $ as _ echo " $ ax _ check _ compiler _ flags " > & 6 ; } <nl> + if test " x $ ax _ check _ compiler _ flags " = xyes ; then <nl> + 	 CFLAGS = " $ CFLAGS - malign - double " <nl> + else <nl> + 	 : <nl> + fi <nl> + <nl> + <nl> # - fstrict - aliasing for gcc - 2 . 95 + <nl> { $ as _ echo " $ as _ me : $ { as _ lineno - $ LINENO } : checking whether C compiler accepts - fstrict - aliasing " > & 5 <nl> $ as _ echo _ n " checking whether C compiler accepts - fstrict - aliasing . . . " > & 6 ; } <nl> @ @ - 12279 , 6 + 12318 , 7 @ @ else <nl> fi <nl> <nl> <nl> + # note that we enable " unsafe " fp optimization with other compilers , too <nl> { $ as _ echo " $ as _ me : $ { as _ lineno - $ LINENO } : checking whether C compiler accepts - ffast - math " > & 5 <nl> $ as _ echo _ n " checking whether C compiler accepts - ffast - math . . . " > & 6 ; } <nl> if $ { ax _ cv _ c _ flags _ _ ffast _ math + : } false ; then : <nl> @ @ - 13065 , 7 + 13105 , 7 @ @ case " $ host " in <nl> 	 TARGET = FRV ; TARGETDIR = frv <nl> 	 ; ; <nl> <nl> - hppa * - * - linux * | parisc * - * - linux * | hppa * - * - openbsd * ) <nl> + hppa * - * - linux * | parisc * - * - linux * ) <nl> 	 TARGET = PA _ LINUX ; TARGETDIR = pa <nl> 	 ; ; <nl> hppa * 64 - * - hpux * ) <nl> @ @ - 13115 , 7 + 13155 , 7 @ @ case " $ host " in <nl> mips - sgi - irix5 . * | mips - sgi - irix6 . * | mips * - * - rtems * ) <nl> 	 TARGET = MIPS ; TARGETDIR = mips <nl> 	 ; ; <nl> - mips * - * - linux * | mips * - * - openbsd * ) <nl> + mips * - * - linux * ) <nl> 	 # Support 128 - bit long double for NewABI . <nl> 	 HAVE _ LONG _ DOUBLE = ' defined ( _ _ mips64 ) ' <nl> 	 TARGET = MIPS ; TARGETDIR = mips <nl> @ @ - 13137 , 7 + 13177 , 7 @ @ case " $ host " in <nl> powerpc - * - aix * | rs6000 - * - aix * ) <nl> 	 TARGET = POWERPC _ AIX ; TARGETDIR = powerpc <nl> 	 ; ; <nl> - powerpc - * - freebsd * | powerpc - * - openbsd * ) <nl> + powerpc - * - freebsd * ) <nl> 	 TARGET = POWERPC _ FREEBSD ; TARGETDIR = powerpc <nl> 	 ; ; <nl> powerpc64 - * - freebsd * ) <nl> @ @ - 16344 , 7 + 16384 , 7 @ @ a \ \ <nl> 	 ; test " . \ $ \ $ HOST " = " . " & & HOST = $ x sh $ ax _ enable _ builddir _ auxdir / config . guess $ x \ \ \ \ \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; use = $ x basename " \ $ \ @ " - all $ x ; n = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> - 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " = " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " - eq " 0 " ; then : \ \ \ \ \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x ; fi \ \ \ \ \ \ <nl> 	 ; test " . \ $ \ $ BUILD " = " . " & & BUILD = " . " \ \ \ \ \ \ <nl> 	 ; test " \ $ \ $ use " = " \ $ \ @ " & & BUILD = $ x echo " \ $ \ $ BUILD " | tail - 1 $ x \ \ \ \ \ \ <nl> @ @ - 16356 , 7 + 16396 , 7 @ @ a \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * " \ \ \ \ \ \ <nl> - 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ <nl> 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * \ \ \ \ \ \ <nl> @ @ - 16367 , 7 + 16407 , 7 @ @ a \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . * " \ \ \ \ \ \ <nl> - 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ <nl> 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . * \ \ \ \ \ \ <nl> diff - - git a / libtool - version b / libtool - version <nl> index 95f48c5 . . b8b80e0 100644 <nl> - - - a / libtool - version <nl> + + + b / libtool - version <nl> @ @ - 26 , 4 + 26 , 4 @ @ <nl> # release , then set age to 0 . <nl> # <nl> # CURRENT : REVISION : AGE <nl> - 6 : 0 : 0 <nl> + 5 : 10 : 0 <nl> diff - - git a / m4 / ax _ enable _ builddir . m4 b / m4 / ax _ enable _ builddir . m4 <nl> index 959dec3 . . 98ea911 100644 <nl> - - - a / m4 / ax _ enable _ builddir . m4 <nl> + + + b / m4 / ax _ enable _ builddir . m4 <nl> @ @ - 204 , 7 + 204 , 7 @ @ a \ \ <nl> 	 ; test " . \ $ \ $ HOST " = " . " & & HOST = $ x sh $ AUX / config . guess $ x \ \ \ \ \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; use = $ x basename " \ $ \ @ " _ ALL $ x ; n = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> - 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " = " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " - eq " 0 " ; then : \ \ \ \ \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x ; fi \ \ \ \ \ \ <nl> 	 ; test " . \ $ \ $ BUILD " = " . " & & BUILD = " . " \ \ \ \ \ \ <nl> 	 ; test " \ $ \ $ use " = " \ $ \ @ " & & BUILD = $ x echo " \ $ \ $ BUILD " | tail - 1 $ x \ \ \ \ \ \ <nl> @ @ - 217 , 7 + 217 , 7 @ @ dnl special rule add - on : " dist " copies the tarball to $ ( PUB ) . ( source tree ) <nl> 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * " \ \ \ \ \ \ <nl> - 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ <nl> 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * \ \ \ \ \ \ <nl> @ @ - 229 , 7 + 229 , 7 @ @ dnl special rule add - on : " dist - foo " copies all the archives to $ ( PUB ) . ( source t <nl> 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . * " \ \ \ \ \ \ <nl> - 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ <nl> 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ <nl> 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . * \ \ \ \ \ \ <nl> diff - - git a / patches / bad - abi - fix b / patches / bad - abi - fix <nl> index f190183 . . d30babb 100644 <nl> - - - a / patches / bad - abi - fix <nl> + + + b / patches / bad - abi - fix <nl> @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog <nl> = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> - - - libffi . orig / ChangeLog <nl> + + + libffi / ChangeLog <nl> - @ @ - 50 , 6 + 50 , 23 @ @ <nl> + @ @ - 55 , 6 + 55 , 23 @ @ <nl> <nl> 	 * configure : Regenerate . <nl> <nl> diff - - git a / patches / darwin - EH - fix b / patches / darwin - EH - fix <nl> index 7fee260 . . 661bad5 100644 <nl> - - - a / patches / darwin - EH - fix <nl> + + + b / patches / darwin - EH - fix <nl> @ @ - 28 , 7 + 28 , 7 @ @ Index : libffi / ChangeLog <nl> = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> - - - libffi . orig / ChangeLog <nl> + + + libffi / ChangeLog <nl> - @ @ - 46 , 6 + 46 , 11 @ @ <nl> + @ @ - 51 , 6 + 51 , 11 @ @ <nl> 	 Use them to handle ELF vs . ECOFF differences . <nl> 	 [ _ _ osf _ _ ] ( _ GLOBAL _ _ F _ ffi _ call _ osf ) : Define . <nl> <nl> diff - - git a / patches / fix - ppc32 b / patches / fix - ppc32 <nl> index a1973b7 . . ea44c30 100644 <nl> - - - a / patches / fix - ppc32 <nl> + + + b / patches / fix - ppc32 <nl> @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog <nl> = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> - - - libffi . orig / ChangeLog <nl> + + + libffi / ChangeLog <nl> - @ @ - 46 , 6 + 46 , 11 @ @ <nl> + @ @ - 51 , 6 + 51 , 11 @ @ <nl> 	 Use them to handle ELF vs . ECOFF differences . <nl> 	 [ _ _ osf _ _ ] ( _ GLOBAL _ _ F _ ffi _ call _ osf ) : Define . <nl> <nl> diff - - git a / patches / fix _ maxopt b / patches / fix _ maxopt <nl> index 3d4faf2 . . d8d8a9e 100644 <nl> - - - a / patches / fix _ maxopt <nl> + + + b / patches / fix _ maxopt <nl> @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog <nl> = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> - - - libffi . orig / ChangeLog <nl> + + + libffi / ChangeLog <nl> - @ @ - 46 , 6 + 46 , 11 @ @ <nl> + @ @ - 51 , 6 + 51 , 11 @ @ <nl> 	 Use them to handle ELF vs . ECOFF differences . <nl> 	 [ _ _ osf _ _ ] ( _ GLOBAL _ _ F _ ffi _ call _ osf ) : Define . <nl> <nl> diff - - git a / patches / ios - fixes b / patches / ios - fixes <nl> index 083f16f . . be4166f 100644 <nl> - - - a / patches / ios - fixes <nl> + + + b / patches / ios - fixes <nl> @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog <nl> = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> - - - libffi . orig / ChangeLog <nl> + + + libffi / ChangeLog <nl> - @ @ - 87 , 7 + 87 , 7 @ @ <nl> + @ @ - 92 , 7 + 92 , 7 @ @ <nl> 	 * src / prep _ cif . c ( UNLIKELY , LIKELY ) : Define . <nl> 	 ( initialize _ aggregate ) : Check for bad types . <nl> <nl> diff - - git a / patches / more - openbsd b / patches / more - openbsd <nl> index 104d03e . . f898f67 100644 <nl> - - - a / patches / more - openbsd <nl> + + + b / patches / more - openbsd <nl> @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog <nl> = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> - - - libffi . orig / ChangeLog <nl> + + + libffi / ChangeLog <nl> - @ @ - 789 , 6 + 789 , 11 @ @ <nl> + @ @ - 794 , 6 + 794 , 11 @ @ <nl> 	 * man / Makefile . in : Regenerate . <nl> 	 * testsuite / Makefile . in : Regenerate . <nl> <nl> diff - - git a / patches / msvcc b / patches / msvcc <nl> index 34f80cd . . 65f8e9c 100644 <nl> - - - a / patches / msvcc <nl> + + + b / patches / msvcc <nl> @ @ - 19 , 7 + 19 , 7 @ @ Index : libffi / Makefile . in <nl> = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = <nl> - - - libffi . orig / Makefile . in <nl> + + + libffi / Makefile . in <nl> - @ @ - 428 , 7 + 428 , 9 @ @ EXTRA _ DIST = LICENSE ChangeLog . v1 Change <nl> + @ @ - 441 , 7 + 441 , 9 @ @ EXTRA _ DIST = LICENSE ChangeLog . v1 Change <nl> 	 src / frv / eabi . S src / frv / ffitarget . h src / dlmalloc . c \ <nl> 	 src / moxie / ffi . c src / moxie / eabi . S libtool - version \ <nl> 	 ChangeLog . libffi m4 / libtool . m4 m4 / lt ~ obsolete . m4 \ <nl> @ @ - 30 , 7 + 30 , 7 @ @ Index : libffi / Makefile . in <nl> <nl> info _ TEXINFOS = doc / libffi . texi <nl> <nl> - @ @ - 1818 , 7 + 1820 , 6 @ @ uninstall - am : uninstall - dvi - am uninstall <nl> + @ @ - 1831 , 7 + 1833 , 6 @ @ uninstall - am : uninstall - dvi - am uninstall <nl> 	 uninstall - info - am uninstall - libLTLIBRARIES uninstall - pdf - am \ <nl> 	 uninstall - pkgconfigDATA uninstall - ps - am <nl> <nl> diff - - git a / patches / ungccify b / patches / ungccify <nl> index cfd7eb4 . . 453f1d1 100644 <nl> - - - a / patches / ungccify <nl> + + + b / patches / ungccify <nl> @ @ - 31 , 12 + 31 , 13 @ @ Index : libffi / Makefile . in <nl> subdir = . <nl> DIST _ COMMON = README $ ( am _ _ configure _ deps ) $ ( srcdir ) / Makefile . am \ <nl> 	 $ ( srcdir ) / Makefile . in $ ( srcdir ) / doc / stamp - vti \ <nl> - @ @ - 76 , 7 + 74 , 17 @ @ DIST _ COMMON = README $ ( am _ _ configure _ dep <nl> + @ @ - 76 , 7 + 74 , 18 @ @ DIST _ COMMON = README $ ( am _ _ configure _ dep <nl> 	 compile config . guess config . sub depcomp install - sh ltmain . sh \ <nl> 	 mdate - sh missing texinfo . tex <nl> ACLOCAL _ M4 = $ ( top _ srcdir ) / aclocal . m4 <nl> - am _ _ aclocal _ m4 _ deps = $ ( top _ srcdir ) / acinclude . m4 \ <nl> - + am _ _ aclocal _ m4 _ deps = $ ( top _ srcdir ) / m4 / ax _ cc _ maxopt . m4 \ <nl> + + am _ _ aclocal _ m4 _ deps = $ ( top _ srcdir ) / m4 / asmcfi . m4 \ <nl> + + 	 $ ( top _ srcdir ) / m4 / ax _ cc _ maxopt . m4 \ <nl> + 	 $ ( top _ srcdir ) / m4 / ax _ cflags _ warn _ all . m4 \ <nl> + 	 $ ( top _ srcdir ) / m4 / ax _ check _ compiler _ flags . m4 \ <nl> + 	 $ ( top _ srcdir ) / m4 / ax _ compiler _ vendor . m4 \ <nl> @ @ - 50 , 7 + 51 , 7 @ @ Index : libffi / Makefile . in <nl> 	 $ ( top _ srcdir ) / configure . ac <nl> am _ _ configure _ deps = $ ( am _ _ aclocal _ m4 _ deps ) $ ( CONFIGURE _ DEPENDENCIES ) \ <nl> 	 $ ( ACLOCAL _ M4 ) <nl> - @ @ - 335 , 6 + 343 , 7 @ @ PACKAGE _ TARNAME = @ PACKAGE _ TARNAME @ <nl> + @ @ - 335 , 6 + 344 , 7 @ @ PACKAGE _ TARNAME = @ PACKAGE _ TARNAME @ <nl> PACKAGE _ URL = @ PACKAGE _ URL @ <nl> PACKAGE _ VERSION = @ PACKAGE _ VERSION @ <nl> PATH _ SEPARATOR = @ PATH _ SEPARATOR @ <nl> @ @ - 58 , 7 + 59 , 7 @ @ Index : libffi / Makefile . in <nl> RANLIB = @ RANLIB @ <nl> SED = @ SED @ <nl> SET _ MAKE = @ SET _ MAKE @ <nl> - @ @ - 355 , 6 + 364 , 7 @ @ am _ _ leading _ dot = @ am _ _ leading _ dot @ <nl> + @ @ - 355 , 6 + 365 , 7 @ @ am _ _ leading _ dot = @ am _ _ leading _ dot @ <nl> am _ _ quote = @ am _ _ quote @ <nl> am _ _ tar = @ am _ _ tar @ <nl> am _ _ untar = @ am _ _ untar @ <nl> @ @ - 66 , 7 + 67 , 7 @ @ Index : libffi / Makefile . in <nl> bindir = @ bindir @ <nl> build = @ build @ <nl> build _ alias = @ build _ alias @ <nl> - @ @ - 493 , 7 + 503 , 7 @ @ nodist _ libffi _ la _ SOURCES = $ ( am _ _ append _ <nl> + @ @ - 493 , 7 + 504 , 7 @ @ nodist _ libffi _ la _ SOURCES = $ ( am _ _ append _ <nl> 	 $ ( am _ _ append _ 27 ) <nl> libffi _ convenience _ la _ SOURCES = $ ( libffi _ la _ SOURCES ) <nl> nodist _ libffi _ convenience _ la _ SOURCES = $ ( nodist _ libffi _ la _ SOURCES ) <nl> @ @ - 921 , 7 + 922 , 7 @ @ Index : libffi / m4 / ax _ enable _ builddir . m4 <nl> + 	 ; test " . \ $ \ $ HOST " = " . " & & HOST = $ x sh $ AUX / config . guess $ x \ \ \ \ \ \ <nl> + 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> + 	 ; use = $ x basename " \ $ \ @ " _ ALL $ x ; n = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> - + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " = " 0 " ; then : \ \ \ \ \ \ <nl> + + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " - eq " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x ; fi \ \ \ \ \ \ <nl> + 	 ; test " . \ $ \ $ BUILD " = " . " & & BUILD = " . " \ \ \ \ \ \ <nl> + 	 ; test " \ $ \ $ use " = " \ $ \ @ " & & BUILD = $ x echo " \ $ \ $ BUILD " | tail - 1 $ x \ \ \ \ \ \ <nl> @ @ - 934 , 7 + 935 , 7 @ @ Index : libffi / m4 / ax _ enable _ builddir . m4 <nl> + 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> + 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * " \ \ \ \ \ \ <nl> - + 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ <nl> + + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> + 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ <nl> + 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * \ \ \ \ \ \ <nl> @ @ - 946 , 7 + 947 , 7 @ @ Index : libffi / m4 / ax _ enable _ builddir . m4 <nl> + 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> + 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ <nl> + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . * " \ \ \ \ \ \ <nl> - + 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ <nl> + + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ <nl> + 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ <nl> + 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ <nl> + 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . * \ \ \ \ \ \ <nl> diff - - git a / src / closures . c b / src / closures . c <nl> index 1b37827 . . b8392c8 100644 <nl> - - - a / src / closures . c <nl> + + + b / src / closures . c <nl> @ @ - 172 , 7 + 172 , 7 @ @ selinux _ enabled _ check ( void ) <nl> <nl> # endif / * ! FFI _ MMAP _ EXEC _ SELINUX * / <nl> <nl> - # elif defined ( _ _ CYGWIN _ _ ) | | defined ( _ _ INTERIX ) <nl> + # elif defined ( _ _ CYGWIN _ _ ) <nl> <nl> # include < sys / mman . h > <nl>

TEST DIFF:
diff - - git a / contrib / platform / test / com / sun / jna / platform / win32 / COM / ShellApplicationWindowsTest . java b / contrib / platform / test / com / sun / jna / platform / win32 / COM / ShellApplicationWindowsTest . java 
 new file mode 100644 
 index 0000000 . . c2b2947 
 - - - / dev / null 
 + + + b / contrib / platform / test / com / sun / jna / platform / win32 / COM / ShellApplicationWindowsTest . java 
 @ @ - 0 , 0 + 1 , 232 @ @ 
 + package com . sun . jna . platform . win32 . COM ; 
 + 
 + import java . util . Iterator ; 
 + import java . util . NoSuchElementException ; 
 + 
 + import com . sun . jna . Native ; 
 + import com . sun . jna . NativeLibrary ; 
 + import com . sun . jna . platform . win32 . OleAuto ; 
 + import com . sun . jna . platform . win32 . Variant ; 
 + import com . sun . jna . platform . win32 . Variant . VARIANT ; 
 + import com . sun . jna . platform . win32 . WinDef . LONG ; 
 + import com . sun . jna . platform . win32 . WinDef . LONGLONG ; 
 + 
 + import junit . framework . TestCase ; 
 + 
 + public class ShellApplicationWindowsTest extends TestCase { 
 + 
 + 	 @ Override 
 + 	 protected void setUp ( ) throws Exception { 
 + 	 	 String [ ] commands = { " cmd " , " / c " , " start " , " iexplore . exe " , " - nohome " , " \ " http : / / www . srh . noaa . gov / jax \ " " } ; 
 + 	 	 Runtime . getRuntime ( ) . exec ( commands ) ; 
 + 	 	 Thread . sleep ( 30000 ) ; 
 + 	 } 
 + 
 + 	 public void testWindowsCount ( ) { 
 + System . out . println ( " java . vendor : " + System . getProperty ( " java . vendor " ) ) ; 
 + System . out . println ( " java . version : " + System . getProperty ( " java . version " ) ) ; 
 + System . out . println ( " os . version : " + System . getProperty ( " os . version " ) ) ; 
 + System . out . println ( " os . arch : " + System . getProperty ( " os . arch " ) ) ; 
 + System . out . println ( " os . name : " + System . getProperty ( " os . name " ) ) ; 
 + 
 + ShellApplication sa = new ShellApplication ( ) ; 
 + System . out . println ( " Shell . Application . Windows found : " + sa . Windows ( ) . Count ( ) ) ; 
 + assertTrue ( sa . Windows ( ) . Count ( ) > 0 ) ; 
 + for ( InternetExplorer ie : sa . Windows ( ) ) 
 + { 
 + System . out . println ( ) ; 
 + System . out . println ( " = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = " ) ; 
 + if ( ie ! = null ) 
 + { 
 + System . out . println ( " Title : " + ie . getTitle ( ) ) ; 
 + System . out . println ( " URL : " + ie . getURL ( ) ) ; 
 + System . out . println ( " App Name : " + ie . getName ( ) ) ; 
 + System . out . println ( " Window Handle : " + ie . getWindowHandle ( ) ) ; 
 + } 
 + else 
 + { 
 + System . out . println ( " Null encountered . " ) ; 
 + } 
 + System . out . println ( " = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = " ) ; 
 + System . out . println ( ) ; 
 + } 
 + 	 } 
 + 	 
 + 	 @ Override 
 + 	 protected void tearDown ( ) throws Exception { 
 + 	 	 Runtime . getRuntime ( ) . exec ( " taskkill . exe / f / im iexplore . exe " ) ; 
 + 	 } 
 + 
 + 	 
 + 	 
 + / * * 
 + * A COM representation of the Windows shell . 
 + * / 
 + private static class ShellApplication extends COMLateBindingObject 
 + { 
 + public ShellApplication ( ) throws COMException 
 + { 
 + super ( " Shell . Application " , false ) ; 
 + } 
 + 
 + / * * 
 + * @ return Creates and returns a ShellWindows object . < br > 
 + * This object represents a collection of all of the open windows that belong to the Shell . 
 + * / 
 + public ShellWindows Windows ( ) 
 + { 
 + return new ShellWindows ( ( IDispatch ) invoke ( " Windows " ) . getValue ( ) ) ; 
 + } 
 + 
 + / * * 
 + * Represents a collection of the open windows that belong to the Shell . < br > 
 + * Methods associated with this objects can control and execute commands within the Shell , and obtain other Shell - related objects . 
 + * / 
 + public static class ShellWindows extends COMLateBindingObject implements Iterable < InternetExplorer > 
 + { 
 + 
 + private static class ShellWindowsIterator implements Iterator < InternetExplorer > 
 + { 
 + 
 + private ShellWindows source ; 
 + 
 + private int count ; 
 + 
 + private int max ; 
 + 
 + public ShellWindowsIterator ( ShellWindows collection ) 
 + { 
 + source = collection ; 
 + max = source . Count ( ) ; 
 + } 
 + 
 + @ Override 
 + public boolean hasNext ( ) 
 + { 
 + return count < max ; 
 + } 
 + 
 + @ Override 
 + public InternetExplorer next ( ) 
 + { 
 + if ( ! hasNext ( ) ) 
 + { 
 + throw new NoSuchElementException ( ) ; 
 + } 
 + return source . Item ( count + + ) ; 
 + } 
 + 
 + @ Override 
 + public void remove ( ) 
 + { 
 + throw new UnsupportedOperationException ( ) ; 
 + } 
 + 
 + } 
 + 
 + public ShellWindows ( IDispatch iDispatch ) 
 + { 
 + super ( iDispatch ) ; 
 + } 
 + 
 + / * * 
 + * Retrieves an InternetExplorer object that represents the Shell window . 
 + * 
 + * @ param idx 
 + * The zero - based index of the item to retrieve . < br > 
 + * This value must be less than the value of the Count property . 
 + * @ return an InternetExplorer object that represents the Shell window . 
 + * / 
 + public InternetExplorer Item ( int idx ) 
 + { 
 + VARIANT arg = new VARIANT ( ) ; 
 + arg . setValue ( Variant . VT _ I4 , new LONG ( idx ) ) ; 
 + IDispatch result = ( IDispatch ) invoke ( " Item " , arg ) . getValue ( ) ; 
 + if ( result = = null ) 
 + { 
 + return null ; 
 + } 
 + return new InternetExplorer ( result ) ; 
 + } 
 + 
 + / * * 
 + * @ return the number of items in the collection . 
 + * / 
 + public int Count ( ) 
 + { 
 + return getIntProperty ( " Count " ) ; 
 + } 
 + 
 + @ SuppressWarnings ( { " unchecked " , " rawtypes " } ) 
 + @ Override 
 + public Iterator iterator ( ) 
 + { 
 + return new ShellWindowsIterator ( this ) ; 
 + } 
 + } 
 + 
 + } 
 + 
 + / * * 
 + * InternetExplorer / IWebBrowser2 - see http : / / msdn . microsoft . com / en - us / library / aa752127 ( v = vs . 85 ) . aspx 
 + * / 
 + private static class InternetExplorer extends COMLateBindingObject 
 + { 
 + 
 + public InternetExplorer ( IDispatch iDispatch ) 
 + { 
 + super ( iDispatch ) ; 
 + } 
 + 
 + / * * 
 + * @ return the title of the browser window . This may not always be the title of the main document 
 + * / 
 + public String getTitle ( ) 
 + { 
 + return getStringProperty ( " LocationName " ) ; 
 + } 
 + 
 + / * * 
 + * IWebBrowser2 : : get _ LocationURL < br > 
 + * Read - only COM property . < br > 
 + * 
 + * @ return the URL of the resource that is currently displayed . 
 + * / 
 + public String getURL ( ) 
 + { 
 + return getStringProperty ( " LocationURL " ) ; 
 + } 
 + 
 + / * * 
 + * IWebBrowser2 : : get _ Name < br > 
 + * Read - only COM property . < br > 
 + * 
 + * @ return the frame name or application name of the object . 
 + * / 
 + public String getName ( ) 
 + { 
 + return getStringProperty ( " Name " ) ; 
 + } 
 + 
 + / * * 
 + * IWebBrowser2 : : HWND < br > 
 + * Read - only COM property . < br > 
 + * 
 + * @ return the handle of the Internet Explorer main window . 
 + * / 
 + public long getWindowHandle ( ) 
 + { 
 + VARIANT . ByReference result = new VARIANT . ByReference ( ) ; 
 + this . oleMethod ( OleAuto . DISPATCH _ PROPERTYGET , result , this . getIDispatch ( ) , " HWND " ) ; 
 + 
 + if ( result . getVarType ( ) . intValue ( ) = = Variant . VT _ I8 ) 
 + { 
 + return ( ( LONGLONG ) result . getValue ( ) ) . longValue ( ) ; 
 + } 
 + return ( ( LONG ) result . getValue ( ) ) . longValue ( ) ; 
 + 
 + } 
 + } 
 + 
 + 	 
 + }

NEAREST DIFF:
diff - - git a / ChangeLog b / ChangeLog 
 index 8a83fb7 . . f965aec 100644 
 - - - a / ChangeLog 
 + + + b / ChangeLog 
 @ @ - 1 , 22 + 1 , 7 @ @ 
 - 2011 - 11 - 12 Anthony Green < green @ moxielogic . com > 
 + 2011 - 11 - 12 Kimura Wataru < kimuraw @ i . nifty . jp > 
 
 - 	 * Makefile . am ( AM _ CCASFLAGS ) : Add - g option to build assembly 
 - 	 files with debug info . 
 - 	 * Makefile . in : Rebuilt . 
 - 
 - 2011 - 11 - 12 Jasper Lievisse Adriaanse < jasper @ openbsd . org > 
 - 
 - 	 * README : Update list of supported OpenBSD systems . 
 - 
 - 2011 - 11 - 12 Anthony Green < green @ moxielogic . com > 
 - 
 - 	 * libtool - version : Update . 
 - 	 * Makefile . am ( nodist _ libffi _ la _ SOURCES ) : Add src / debug . c if 
 - 	 FFI _ DEBUG . 
 - 	 ( libffi _ la _ SOURCES ) : Remove src / debug . c 
 - 	 ( EXTRA _ DIST ) : Add src / debug . c 
 - 	 * Makefile . in : Rebuilt . 
 - 	 * README : Update for 3 . 0 . 11 . 
 + 	 * m4 / ax _ enable _ builddir : Change from string comparison to numeric 
 + 	 comparison for wc output . 
 
 2011 - 11 - 10 Richard Henderson < rth @ redhat . com > 
 
 diff - - git a / Makefile . am b / Makefile . am 
 index 2c2444e . . 36db3f2 100644 
 - - - a / Makefile . am 
 + + + b / Makefile . am 
 @ @ - 88 , 7 + 88 , 7 @ @ ACLOCAL _ AMFLAGS = $ ( ACLOCAL _ AMFLAGS ) - I m4 
 lib _ LTLIBRARIES = libffi . la 
 noinst _ LTLIBRARIES = libffi _ convenience . la 
 
 - libffi _ la _ SOURCES = src / prep _ cif . c src / types . c \ 
 + libffi _ la _ SOURCES = src / debug . c src / prep _ cif . c src / types . c \ 
 	 	 src / raw _ api . c src / java _ raw _ api . c src / closures . c 
 
 pkgconfigdir = $ ( libdir ) / pkgconfig 
 @ @ - 96 , 10 + 96 , 6 @ @ pkgconfig _ DATA = libffi . pc 
 
 nodist _ libffi _ la _ SOURCES = 
 
 - if FFI _ DEBUG 
 - nodist _ libffi _ la _ SOURCES + = src / debug . c 
 - endif 
 - 
 if MIPS 
 nodist _ libffi _ la _ SOURCES + = src / mips / ffi . c src / mips / o32 . S src / mips / n32 . S 
 endif 
 @ @ - 195 , 7 + 191 , 7 @ @ endif 
 libffi _ la _ LDFLAGS = - version - info ` grep - v ' ^ \ # ' $ ( srcdir ) / libtool - version ` $ ( LTLDFLAGS ) $ ( AM _ LTLDFLAGS ) 
 
 AM _ CPPFLAGS = - I . - I $ ( top _ srcdir ) / include - Iinclude - I $ ( top _ srcdir ) / src 
 - AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) - g 
 + AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) 
 
 # No install - html or install - pdf support in automake yet 
 . PHONY : install - html install - pdf 
 diff - - git a / Makefile . in b / Makefile . in 
 index 4dc1103 . . b3a2706 100644 
 - - - a / Makefile . in 
 + + + b / Makefile . in 
 @ @ - 36 , 37 + 36 , 36 @ @ POST _ UNINSTALL = : 
 build _ triplet = @ build @ 
 host _ triplet = @ host @ 
 target _ triplet = @ target @ 
 - @ FFI _ DEBUG _ TRUE @ am _ _ append _ 1 = src / debug . c 
 - @ MIPS _ TRUE @ am _ _ append _ 2 = src / mips / ffi . c src / mips / o32 . S src / mips / n32 . S 
 - @ X86 _ TRUE @ am _ _ append _ 3 = src / x86 / ffi . c src / x86 / sysv . S 
 - @ X86 _ FREEBSD _ TRUE @ am _ _ append _ 4 = src / x86 / ffi . c src / x86 / freebsd . S 
 - @ X86 _ WIN32 _ TRUE @ am _ _ append _ 5 = src / x86 / ffi . c src / x86 / win32 . S 
 - @ X86 _ WIN64 _ TRUE @ am _ _ append _ 6 = src / x86 / ffi . c src / x86 / win64 . S 
 - @ X86 _ DARWIN _ TRUE @ am _ _ append _ 7 = src / x86 / ffi . c src / x86 / darwin . S src / x86 / ffi64 . c src / x86 / darwin64 . S 
 - @ SPARC _ TRUE @ am _ _ append _ 8 = src / sparc / ffi . c src / sparc / v8 . S src / sparc / v9 . S 
 - @ ALPHA _ TRUE @ am _ _ append _ 9 = src / alpha / ffi . c src / alpha / osf . S 
 - @ IA64 _ TRUE @ am _ _ append _ 10 = src / ia64 / ffi . c src / ia64 / unix . S 
 - @ M32R _ TRUE @ am _ _ append _ 11 = src / m32r / sysv . S src / m32r / ffi . c 
 - @ M68K _ TRUE @ am _ _ append _ 12 = src / m68k / ffi . c src / m68k / sysv . S 
 - @ POWERPC _ TRUE @ am _ _ append _ 13 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S src / powerpc / linux64 . S src / powerpc / linux64 _ closure . S 
 - @ POWERPC _ AIX _ TRUE @ am _ _ append _ 14 = src / powerpc / ffi _ darwin . c src / powerpc / aix . S src / powerpc / aix _ closure . S 
 - @ POWERPC _ DARWIN _ TRUE @ am _ _ append _ 15 = src / powerpc / ffi _ darwin . c src / powerpc / darwin . S src / powerpc / darwin _ closure . S 
 - @ POWERPC _ FREEBSD _ TRUE @ am _ _ append _ 16 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S 
 - @ ARM _ TRUE @ am _ _ append _ 17 = src / arm / sysv . S src / arm / ffi . c 
 - @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ append _ 18 = src / arm / trampoline . S 
 - @ AVR32 _ TRUE @ am _ _ append _ 19 = src / avr32 / sysv . S src / avr32 / ffi . c 
 - @ LIBFFI _ CRIS _ TRUE @ am _ _ append _ 20 = src / cris / sysv . S src / cris / ffi . c 
 - @ FRV _ TRUE @ am _ _ append _ 21 = src / frv / eabi . S src / frv / ffi . c 
 - @ MOXIE _ TRUE @ am _ _ append _ 22 = src / moxie / eabi . S src / moxie / ffi . c 
 - @ S390 _ TRUE @ am _ _ append _ 23 = src / s390 / sysv . S src / s390 / ffi . c 
 - @ X86 _ 64 _ TRUE @ am _ _ append _ 24 = src / x86 / ffi64 . c src / x86 / unix64 . S src / x86 / ffi . c src / x86 / sysv . S 
 - @ SH _ TRUE @ am _ _ append _ 25 = src / sh / sysv . S src / sh / ffi . c 
 - @ SH64 _ TRUE @ am _ _ append _ 26 = src / sh64 / sysv . S src / sh64 / ffi . c 
 - @ PA _ LINUX _ TRUE @ am _ _ append _ 27 = src / pa / linux . S src / pa / ffi . c 
 - @ PA _ HPUX _ TRUE @ am _ _ append _ 28 = src / pa / hpux32 . S src / pa / ffi . c 
 + @ MIPS _ TRUE @ am _ _ append _ 1 = src / mips / ffi . c src / mips / o32 . S src / mips / n32 . S 
 + @ X86 _ TRUE @ am _ _ append _ 2 = src / x86 / ffi . c src / x86 / sysv . S 
 + @ X86 _ FREEBSD _ TRUE @ am _ _ append _ 3 = src / x86 / ffi . c src / x86 / freebsd . S 
 + @ X86 _ WIN32 _ TRUE @ am _ _ append _ 4 = src / x86 / ffi . c src / x86 / win32 . S 
 + @ X86 _ WIN64 _ TRUE @ am _ _ append _ 5 = src / x86 / ffi . c src / x86 / win64 . S 
 + @ X86 _ DARWIN _ TRUE @ am _ _ append _ 6 = src / x86 / ffi . c src / x86 / darwin . S src / x86 / ffi64 . c src / x86 / darwin64 . S 
 + @ SPARC _ TRUE @ am _ _ append _ 7 = src / sparc / ffi . c src / sparc / v8 . S src / sparc / v9 . S 
 + @ ALPHA _ TRUE @ am _ _ append _ 8 = src / alpha / ffi . c src / alpha / osf . S 
 + @ IA64 _ TRUE @ am _ _ append _ 9 = src / ia64 / ffi . c src / ia64 / unix . S 
 + @ M32R _ TRUE @ am _ _ append _ 10 = src / m32r / sysv . S src / m32r / ffi . c 
 + @ M68K _ TRUE @ am _ _ append _ 11 = src / m68k / ffi . c src / m68k / sysv . S 
 + @ POWERPC _ TRUE @ am _ _ append _ 12 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S src / powerpc / linux64 . S src / powerpc / linux64 _ closure . S 
 + @ POWERPC _ AIX _ TRUE @ am _ _ append _ 13 = src / powerpc / ffi _ darwin . c src / powerpc / aix . S src / powerpc / aix _ closure . S 
 + @ POWERPC _ DARWIN _ TRUE @ am _ _ append _ 14 = src / powerpc / ffi _ darwin . c src / powerpc / darwin . S src / powerpc / darwin _ closure . S 
 + @ POWERPC _ FREEBSD _ TRUE @ am _ _ append _ 15 = src / powerpc / ffi . c src / powerpc / sysv . S src / powerpc / ppc _ closure . S 
 + @ ARM _ TRUE @ am _ _ append _ 16 = src / arm / sysv . S src / arm / ffi . c 
 + @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ append _ 17 = src / arm / trampoline . S 
 + @ AVR32 _ TRUE @ am _ _ append _ 18 = src / avr32 / sysv . S src / avr32 / ffi . c 
 + @ LIBFFI _ CRIS _ TRUE @ am _ _ append _ 19 = src / cris / sysv . S src / cris / ffi . c 
 + @ FRV _ TRUE @ am _ _ append _ 20 = src / frv / eabi . S src / frv / ffi . c 
 + @ MOXIE _ TRUE @ am _ _ append _ 21 = src / moxie / eabi . S src / moxie / ffi . c 
 + @ S390 _ TRUE @ am _ _ append _ 22 = src / s390 / sysv . S src / s390 / ffi . c 
 + @ X86 _ 64 _ TRUE @ am _ _ append _ 23 = src / x86 / ffi64 . c src / x86 / unix64 . S src / x86 / ffi . c src / x86 / sysv . S 
 + @ SH _ TRUE @ am _ _ append _ 24 = src / sh / sysv . S src / sh / ffi . c 
 + @ SH64 _ TRUE @ am _ _ append _ 25 = src / sh64 / sysv . S src / sh64 / ffi . c 
 + @ PA _ LINUX _ TRUE @ am _ _ append _ 26 = src / pa / linux . S src / pa / ffi . c 
 + @ PA _ HPUX _ TRUE @ am _ _ append _ 27 = src / pa / hpux32 . S src / pa / ffi . c 
 # Build debug . Define FFI _ DEBUG on the commandline so that , when building with 
 # MSVC , it can link against the debug CRT . 
 - @ FFI _ DEBUG _ TRUE @ am _ _ append _ 29 = - DFFI _ DEBUG 
 + @ FFI _ DEBUG _ TRUE @ am _ _ append _ 28 = - DFFI _ DEBUG 
 subdir = . 
 DIST _ COMMON = README $ ( am _ _ configure _ deps ) $ ( srcdir ) / Makefile . am \ 
 	 $ ( srcdir ) / Makefile . in $ ( srcdir ) / doc / stamp - vti \ 
 @ @ - 122 , 49 + 121 , 48 @ @ am _ _ installdirs = " $ ( DESTDIR ) $ ( libdir ) " " $ ( DESTDIR ) $ ( infodir ) " \ 
 LTLIBRARIES = $ ( lib _ LTLIBRARIES ) $ ( noinst _ LTLIBRARIES ) 
 libffi _ la _ LIBADD = 
 am _ _ dirstamp = $ ( am _ _ leading _ dot ) dirstamp 
 - am _ libffi _ la _ OBJECTS = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ 
 - 	 src / java _ raw _ api . lo src / closures . lo 
 - @ FFI _ DEBUG _ TRUE @ am _ _ objects _ 1 = src / debug . lo 
 - @ MIPS _ TRUE @ am _ _ objects _ 2 = src / mips / ffi . lo src / mips / o32 . lo \ 
 + am _ libffi _ la _ OBJECTS = src / debug . lo src / prep _ cif . lo src / types . lo \ 
 + 	 src / raw _ api . lo src / java _ raw _ api . lo src / closures . lo 
 + @ MIPS _ TRUE @ am _ _ objects _ 1 = src / mips / ffi . lo src / mips / o32 . lo \ 
 @ MIPS _ TRUE @ 	 src / mips / n32 . lo 
 - @ X86 _ TRUE @ am _ _ objects _ 3 = src / x86 / ffi . lo src / x86 / sysv . lo 
 - @ X86 _ FREEBSD _ TRUE @ am _ _ objects _ 4 = src / x86 / ffi . lo src / x86 / freebsd . lo 
 - @ X86 _ WIN32 _ TRUE @ am _ _ objects _ 5 = src / x86 / ffi . lo src / x86 / win32 . lo 
 - @ X86 _ WIN64 _ TRUE @ am _ _ objects _ 6 = src / x86 / ffi . lo src / x86 / win64 . lo 
 - @ X86 _ DARWIN _ TRUE @ am _ _ objects _ 7 = src / x86 / ffi . lo src / x86 / darwin . lo \ 
 + @ X86 _ TRUE @ am _ _ objects _ 2 = src / x86 / ffi . lo src / x86 / sysv . lo 
 + @ X86 _ FREEBSD _ TRUE @ am _ _ objects _ 3 = src / x86 / ffi . lo src / x86 / freebsd . lo 
 + @ X86 _ WIN32 _ TRUE @ am _ _ objects _ 4 = src / x86 / ffi . lo src / x86 / win32 . lo 
 + @ X86 _ WIN64 _ TRUE @ am _ _ objects _ 5 = src / x86 / ffi . lo src / x86 / win64 . lo 
 + @ X86 _ DARWIN _ TRUE @ am _ _ objects _ 6 = src / x86 / ffi . lo src / x86 / darwin . lo \ 
 @ X86 _ DARWIN _ TRUE @ 	 src / x86 / ffi64 . lo src / x86 / darwin64 . lo 
 - @ SPARC _ TRUE @ am _ _ objects _ 8 = src / sparc / ffi . lo src / sparc / v8 . lo \ 
 + @ SPARC _ TRUE @ am _ _ objects _ 7 = src / sparc / ffi . lo src / sparc / v8 . lo \ 
 @ SPARC _ TRUE @ 	 src / sparc / v9 . lo 
 - @ ALPHA _ TRUE @ am _ _ objects _ 9 = src / alpha / ffi . lo src / alpha / osf . lo 
 - @ IA64 _ TRUE @ am _ _ objects _ 10 = src / ia64 / ffi . lo src / ia64 / unix . lo 
 - @ M32R _ TRUE @ am _ _ objects _ 11 = src / m32r / sysv . lo src / m32r / ffi . lo 
 - @ M68K _ TRUE @ am _ _ objects _ 12 = src / m68k / ffi . lo src / m68k / sysv . lo 
 - @ POWERPC _ TRUE @ am _ _ objects _ 13 = src / powerpc / ffi . lo src / powerpc / sysv . lo \ 
 + @ ALPHA _ TRUE @ am _ _ objects _ 8 = src / alpha / ffi . lo src / alpha / osf . lo 
 + @ IA64 _ TRUE @ am _ _ objects _ 9 = src / ia64 / ffi . lo src / ia64 / unix . lo 
 + @ M32R _ TRUE @ am _ _ objects _ 10 = src / m32r / sysv . lo src / m32r / ffi . lo 
 + @ M68K _ TRUE @ am _ _ objects _ 11 = src / m68k / ffi . lo src / m68k / sysv . lo 
 + @ POWERPC _ TRUE @ am _ _ objects _ 12 = src / powerpc / ffi . lo src / powerpc / sysv . lo \ 
 @ POWERPC _ TRUE @ 	 src / powerpc / ppc _ closure . lo \ 
 @ POWERPC _ TRUE @ 	 src / powerpc / linux64 . lo \ 
 @ POWERPC _ TRUE @ 	 src / powerpc / linux64 _ closure . lo 
 - @ POWERPC _ AIX _ TRUE @ am _ _ objects _ 14 = src / powerpc / ffi _ darwin . lo \ 
 + @ POWERPC _ AIX _ TRUE @ am _ _ objects _ 13 = src / powerpc / ffi _ darwin . lo \ 
 @ POWERPC _ AIX _ TRUE @ 	 src / powerpc / aix . lo \ 
 @ POWERPC _ AIX _ TRUE @ 	 src / powerpc / aix _ closure . lo 
 - @ POWERPC _ DARWIN _ TRUE @ am _ _ objects _ 15 = src / powerpc / ffi _ darwin . lo \ 
 + @ POWERPC _ DARWIN _ TRUE @ am _ _ objects _ 14 = src / powerpc / ffi _ darwin . lo \ 
 @ POWERPC _ DARWIN _ TRUE @ 	 src / powerpc / darwin . lo \ 
 @ POWERPC _ DARWIN _ TRUE @ 	 src / powerpc / darwin _ closure . lo 
 - @ POWERPC _ FREEBSD _ TRUE @ am _ _ objects _ 16 = src / powerpc / ffi . lo \ 
 + @ POWERPC _ FREEBSD _ TRUE @ am _ _ objects _ 15 = src / powerpc / ffi . lo \ 
 @ POWERPC _ FREEBSD _ TRUE @ 	 src / powerpc / sysv . lo \ 
 @ POWERPC _ FREEBSD _ TRUE @ 	 src / powerpc / ppc _ closure . lo 
 - @ ARM _ TRUE @ am _ _ objects _ 17 = src / arm / sysv . lo src / arm / ffi . lo 
 - @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ objects _ 18 = src / arm / trampoline . lo 
 - @ AVR32 _ TRUE @ am _ _ objects _ 19 = src / avr32 / sysv . lo src / avr32 / ffi . lo 
 - @ LIBFFI _ CRIS _ TRUE @ am _ _ objects _ 20 = src / cris / sysv . lo src / cris / ffi . lo 
 - @ FRV _ TRUE @ am _ _ objects _ 21 = src / frv / eabi . lo src / frv / ffi . lo 
 - @ MOXIE _ TRUE @ am _ _ objects _ 22 = src / moxie / eabi . lo src / moxie / ffi . lo 
 - @ S390 _ TRUE @ am _ _ objects _ 23 = src / s390 / sysv . lo src / s390 / ffi . lo 
 - @ X86 _ 64 _ TRUE @ am _ _ objects _ 24 = src / x86 / ffi64 . lo src / x86 / unix64 . lo \ 
 + @ ARM _ TRUE @ am _ _ objects _ 16 = src / arm / sysv . lo src / arm / ffi . lo 
 + @ ARM _ TRUE @ @ FFI _ EXEC _ TRAMPOLINE _ TABLE _ TRUE @ am _ _ objects _ 17 = src / arm / trampoline . lo 
 + @ AVR32 _ TRUE @ am _ _ objects _ 18 = src / avr32 / sysv . lo src / avr32 / ffi . lo 
 + @ LIBFFI _ CRIS _ TRUE @ am _ _ objects _ 19 = src / cris / sysv . lo src / cris / ffi . lo 
 + @ FRV _ TRUE @ am _ _ objects _ 20 = src / frv / eabi . lo src / frv / ffi . lo 
 + @ MOXIE _ TRUE @ am _ _ objects _ 21 = src / moxie / eabi . lo src / moxie / ffi . lo 
 + @ S390 _ TRUE @ am _ _ objects _ 22 = src / s390 / sysv . lo src / s390 / ffi . lo 
 + @ X86 _ 64 _ TRUE @ am _ _ objects _ 23 = src / x86 / ffi64 . lo src / x86 / unix64 . lo \ 
 @ X86 _ 64 _ TRUE @ 	 src / x86 / ffi . lo src / x86 / sysv . lo 
 - @ SH _ TRUE @ am _ _ objects _ 25 = src / sh / sysv . lo src / sh / ffi . lo 
 - @ SH64 _ TRUE @ am _ _ objects _ 26 = src / sh64 / sysv . lo src / sh64 / ffi . lo 
 - @ PA _ LINUX _ TRUE @ am _ _ objects _ 27 = src / pa / linux . lo src / pa / ffi . lo 
 - @ PA _ HPUX _ TRUE @ am _ _ objects _ 28 = src / pa / hpux32 . lo src / pa / ffi . lo 
 + @ SH _ TRUE @ am _ _ objects _ 24 = src / sh / sysv . lo src / sh / ffi . lo 
 + @ SH64 _ TRUE @ am _ _ objects _ 25 = src / sh64 / sysv . lo src / sh64 / ffi . lo 
 + @ PA _ LINUX _ TRUE @ am _ _ objects _ 26 = src / pa / linux . lo src / pa / ffi . lo 
 + @ PA _ HPUX _ TRUE @ am _ _ objects _ 27 = src / pa / hpux32 . lo src / pa / ffi . lo 
 nodist _ libffi _ la _ OBJECTS = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) \ 
 	 $ ( am _ _ objects _ 3 ) $ ( am _ _ objects _ 4 ) $ ( am _ _ objects _ 5 ) \ 
 	 $ ( am _ _ objects _ 6 ) $ ( am _ _ objects _ 7 ) $ ( am _ _ objects _ 8 ) \ 
 @ @ - 174 , 17 + 172 , 17 @ @ nodist _ libffi _ la _ OBJECTS = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) \ 
 	 $ ( am _ _ objects _ 18 ) $ ( am _ _ objects _ 19 ) $ ( am _ _ objects _ 20 ) \ 
 	 $ ( am _ _ objects _ 21 ) $ ( am _ _ objects _ 22 ) $ ( am _ _ objects _ 23 ) \ 
 	 $ ( am _ _ objects _ 24 ) $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) \ 
 - 	 $ ( am _ _ objects _ 27 ) $ ( am _ _ objects _ 28 ) 
 + 	 $ ( am _ _ objects _ 27 ) 
 libffi _ la _ OBJECTS = $ ( am _ libffi _ la _ OBJECTS ) \ 
 	 $ ( nodist _ libffi _ la _ OBJECTS ) 
 libffi _ la _ LINK = $ ( LIBTOOL ) - - tag = CC $ ( AM _ LIBTOOLFLAGS ) \ 
 	 $ ( LIBTOOLFLAGS ) - - mode = link $ ( CCLD ) $ ( AM _ CFLAGS ) $ ( CFLAGS ) \ 
 	 $ ( libffi _ la _ LDFLAGS ) $ ( LDFLAGS ) - o $ @ 
 libffi _ convenience _ la _ LIBADD = 
 - am _ _ objects _ 29 = src / prep _ cif . lo src / types . lo src / raw _ api . lo \ 
 - 	 src / java _ raw _ api . lo src / closures . lo 
 - am _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 29 ) 
 - am _ _ objects _ 30 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ 
 + am _ _ objects _ 28 = src / debug . lo src / prep _ cif . lo src / types . lo \ 
 + 	 src / raw _ api . lo src / java _ raw _ api . lo src / closures . lo 
 + am _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 28 ) 
 + am _ _ objects _ 29 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ 
 	 $ ( am _ _ objects _ 4 ) $ ( am _ _ objects _ 5 ) $ ( am _ _ objects _ 6 ) \ 
 	 $ ( am _ _ objects _ 7 ) $ ( am _ _ objects _ 8 ) $ ( am _ _ objects _ 9 ) \ 
 	 $ ( am _ _ objects _ 10 ) $ ( am _ _ objects _ 11 ) $ ( am _ _ objects _ 12 ) \ 
 @ @ - 192 , 9 + 190 , 8 @ @ am _ _ objects _ 30 = $ ( am _ _ objects _ 1 ) $ ( am _ _ objects _ 2 ) $ ( am _ _ objects _ 3 ) \ 
 	 $ ( am _ _ objects _ 16 ) $ ( am _ _ objects _ 17 ) $ ( am _ _ objects _ 18 ) \ 
 	 $ ( am _ _ objects _ 19 ) $ ( am _ _ objects _ 20 ) $ ( am _ _ objects _ 21 ) \ 
 	 $ ( am _ _ objects _ 22 ) $ ( am _ _ objects _ 23 ) $ ( am _ _ objects _ 24 ) \ 
 - 	 $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) $ ( am _ _ objects _ 27 ) \ 
 - 	 $ ( am _ _ objects _ 28 ) 
 - nodist _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 30 ) 
 + 	 $ ( am _ _ objects _ 25 ) $ ( am _ _ objects _ 26 ) $ ( am _ _ objects _ 27 ) 
 + nodist _ libffi _ convenience _ la _ OBJECTS = $ ( am _ _ objects _ 29 ) 
 libffi _ convenience _ la _ OBJECTS = $ ( am _ libffi _ convenience _ la _ OBJECTS ) \ 
 	 $ ( nodist _ libffi _ convenience _ la _ OBJECTS ) 
 DEFAULT _ INCLUDES = - I . @ am _ _ isrc @ 
 @ @ - 492 , 7 + 489 , 7 @ @ MAKEOVERRIDES = 
 ACLOCAL _ AMFLAGS = $ ( ACLOCAL _ AMFLAGS ) - I m4 
 lib _ LTLIBRARIES = libffi . la 
 noinst _ LTLIBRARIES = libffi _ convenience . la 
 - libffi _ la _ SOURCES = src / prep _ cif . c src / types . c \ 
 + libffi _ la _ SOURCES = src / debug . c src / prep _ cif . c src / types . c \ 
 	 	 src / raw _ api . c src / java _ raw _ api . c src / closures . c 
 
 pkgconfigdir = $ ( libdir ) / pkgconfig 
 @ @ - 506 , 13 + 503 , 13 @ @ nodist _ libffi _ la _ SOURCES = $ ( am _ _ append _ 1 ) $ ( am _ _ append _ 2 ) \ 
 	 $ ( am _ _ append _ 18 ) $ ( am _ _ append _ 19 ) $ ( am _ _ append _ 20 ) \ 
 	 $ ( am _ _ append _ 21 ) $ ( am _ _ append _ 22 ) $ ( am _ _ append _ 23 ) \ 
 	 $ ( am _ _ append _ 24 ) $ ( am _ _ append _ 25 ) $ ( am _ _ append _ 26 ) \ 
 - 	 $ ( am _ _ append _ 27 ) $ ( am _ _ append _ 28 ) 
 + 	 $ ( am _ _ append _ 27 ) 
 libffi _ convenience _ la _ SOURCES = $ ( libffi _ la _ SOURCES ) 
 nodist _ libffi _ convenience _ la _ SOURCES = $ ( nodist _ libffi _ la _ SOURCES ) 
 - AM _ CFLAGS = - g $ ( am _ _ append _ 29 ) 
 + AM _ CFLAGS = - g $ ( am _ _ append _ 28 ) 
 libffi _ la _ LDFLAGS = - version - info ` grep - v ' ^ \ # ' $ ( srcdir ) / libtool - version ` $ ( LTLDFLAGS ) $ ( AM _ LTLDFLAGS ) 
 AM _ CPPFLAGS = - I . - I $ ( top _ srcdir ) / include - Iinclude - I $ ( top _ srcdir ) / src 
 - AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) - g 
 + AM _ CCASFLAGS = $ ( AM _ CPPFLAGS ) 
 all : fficonfig . h 
 	 $ ( MAKE ) $ ( AM _ MAKEFLAGS ) all - recursive 
 
 @ @ - 617 , 12 + 614 , 12 @ @ src / $ ( am _ _ dirstamp ) : 
 src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) : 
 	 @ $ ( MKDIR _ P ) src / $ ( DEPDIR ) 
 	 @ : > src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 + src / debug . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 src / prep _ cif . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 src / types . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 src / raw _ api . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 src / java _ raw _ api . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 src / closures . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 - src / debug . lo : src / $ ( am _ _ dirstamp ) src / $ ( DEPDIR ) / $ ( am _ _ dirstamp ) 
 src / mips / $ ( am _ _ dirstamp ) : 
 	 @ $ ( MKDIR _ P ) src / mips 
 	 @ : > src / mips / $ ( am _ _ dirstamp ) 
 diff - - git a / configure b / configure 
 index bbd9ecc . . 4ce690f 100755 
 - - - a / configure 
 + + + b / configure 
 @ @ - 12240 , 6 + 12240 , 45 @ @ $ as _ echo " $ icc _ archflag " > & 6 ; } 
 # default optimization flags for gcc on all systems 
 CFLAGS = " - O3 - fomit - frame - pointer " 
 
 + # - malign - double for x86 systems 
 + { $ as _ echo " $ as _ me : $ { as _ lineno - $ LINENO } : checking whether C compiler accepts - malign - double " > & 5 
 + $ as _ echo _ n " checking whether C compiler accepts - malign - double . . . " > & 6 ; } 
 + if $ { ax _ cv _ c _ flags _ _ malign _ double + : } false ; then : 
 + $ as _ echo _ n " ( cached ) " > & 6 
 + else 
 + 
 + ax _ save _ FLAGS = $ CFLAGS 
 + CFLAGS = " - malign - double " 
 + cat confdefs . h - < < _ ACEOF > conftest . $ ac _ ext 
 + / * end confdefs . h . * / 
 + 
 + int 
 + main ( ) 
 + { 
 + 
 + ; 
 + return 0 ; 
 + } 
 + _ ACEOF 
 + if ac _ fn _ c _ try _ compile " $ LINENO " ; then : 
 + ax _ cv _ c _ flags _ _ malign _ double = yes 
 + else 
 + ax _ cv _ c _ flags _ _ malign _ double = no 
 + fi 
 + rm - f core conftest . err conftest . $ ac _ objext conftest . $ ac _ ext 
 + CFLAGS = $ ax _ save _ FLAGS 
 + fi 
 + 
 + eval ax _ check _ compiler _ flags = $ ax _ cv _ c _ flags _ _ malign _ double 
 + { $ as _ echo " $ as _ me : $ { as _ lineno - $ LINENO } : result : $ ax _ check _ compiler _ flags " > & 5 
 + $ as _ echo " $ ax _ check _ compiler _ flags " > & 6 ; } 
 + if test " x $ ax _ check _ compiler _ flags " = xyes ; then 
 + 	 CFLAGS = " $ CFLAGS - malign - double " 
 + else 
 + 	 : 
 + fi 
 + 
 + 
 # - fstrict - aliasing for gcc - 2 . 95 + 
 { $ as _ echo " $ as _ me : $ { as _ lineno - $ LINENO } : checking whether C compiler accepts - fstrict - aliasing " > & 5 
 $ as _ echo _ n " checking whether C compiler accepts - fstrict - aliasing . . . " > & 6 ; } 
 @ @ - 12279 , 6 + 12318 , 7 @ @ else 
 fi 
 
 
 + # note that we enable " unsafe " fp optimization with other compilers , too 
 { $ as _ echo " $ as _ me : $ { as _ lineno - $ LINENO } : checking whether C compiler accepts - ffast - math " > & 5 
 $ as _ echo _ n " checking whether C compiler accepts - ffast - math . . . " > & 6 ; } 
 if $ { ax _ cv _ c _ flags _ _ ffast _ math + : } false ; then : 
 @ @ - 13065 , 7 + 13105 , 7 @ @ case " $ host " in 
 	 TARGET = FRV ; TARGETDIR = frv 
 	 ; ; 
 
 - hppa * - * - linux * | parisc * - * - linux * | hppa * - * - openbsd * ) 
 + hppa * - * - linux * | parisc * - * - linux * ) 
 	 TARGET = PA _ LINUX ; TARGETDIR = pa 
 	 ; ; 
 hppa * 64 - * - hpux * ) 
 @ @ - 13115 , 7 + 13155 , 7 @ @ case " $ host " in 
 mips - sgi - irix5 . * | mips - sgi - irix6 . * | mips * - * - rtems * ) 
 	 TARGET = MIPS ; TARGETDIR = mips 
 	 ; ; 
 - mips * - * - linux * | mips * - * - openbsd * ) 
 + mips * - * - linux * ) 
 	 # Support 128 - bit long double for NewABI . 
 	 HAVE _ LONG _ DOUBLE = ' defined ( _ _ mips64 ) ' 
 	 TARGET = MIPS ; TARGETDIR = mips 
 @ @ - 13137 , 7 + 13177 , 7 @ @ case " $ host " in 
 powerpc - * - aix * | rs6000 - * - aix * ) 
 	 TARGET = POWERPC _ AIX ; TARGETDIR = powerpc 
 	 ; ; 
 - powerpc - * - freebsd * | powerpc - * - openbsd * ) 
 + powerpc - * - freebsd * ) 
 	 TARGET = POWERPC _ FREEBSD ; TARGETDIR = powerpc 
 	 ; ; 
 powerpc64 - * - freebsd * ) 
 @ @ - 16344 , 7 + 16384 , 7 @ @ a \ \ 
 	 ; test " . \ $ \ $ HOST " = " . " & & HOST = $ x sh $ ax _ enable _ builddir _ auxdir / config . guess $ x \ \ \ \ \ \ 
 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; use = $ x basename " \ $ \ @ " - all $ x ; n = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 - 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " = " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " - eq " 0 " ; then : \ \ \ \ \ \ 
 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x ; fi \ \ \ \ \ \ 
 	 ; test " . \ $ \ $ BUILD " = " . " & & BUILD = " . " \ \ \ \ \ \ 
 	 ; test " \ $ \ $ use " = " \ $ \ @ " & & BUILD = $ x echo " \ $ \ $ BUILD " | tail - 1 $ x \ \ \ \ \ \ 
 @ @ - 16356 , 7 + 16396 , 7 @ @ a \ \ 
 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * " \ \ \ \ \ \ 
 - 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ 
 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ 
 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * \ \ \ \ \ \ 
 @ @ - 16367 , 7 + 16407 , 7 @ @ a \ \ 
 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . * " \ \ \ \ \ \ 
 - 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ 
 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ 
 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . * \ \ \ \ \ \ 
 diff - - git a / libtool - version b / libtool - version 
 index 95f48c5 . . b8b80e0 100644 
 - - - a / libtool - version 
 + + + b / libtool - version 
 @ @ - 26 , 4 + 26 , 4 @ @ 
 # release , then set age to 0 . 
 # 
 # CURRENT : REVISION : AGE 
 - 6 : 0 : 0 
 + 5 : 10 : 0 
 diff - - git a / m4 / ax _ enable _ builddir . m4 b / m4 / ax _ enable _ builddir . m4 
 index 959dec3 . . 98ea911 100644 
 - - - a / m4 / ax _ enable _ builddir . m4 
 + + + b / m4 / ax _ enable _ builddir . m4 
 @ @ - 204 , 7 + 204 , 7 @ @ a \ \ 
 	 ; test " . \ $ \ $ HOST " = " . " & & HOST = $ x sh $ AUX / config . guess $ x \ \ \ \ \ \ 
 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; use = $ x basename " \ $ \ @ " _ ALL $ x ; n = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 - 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " = " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " - eq " 0 " ; then : \ \ \ \ \ \ 
 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x ; fi \ \ \ \ \ \ 
 	 ; test " . \ $ \ $ BUILD " = " . " & & BUILD = " . " \ \ \ \ \ \ 
 	 ; test " \ $ \ $ use " = " \ $ \ @ " & & BUILD = $ x echo " \ $ \ $ BUILD " | tail - 1 $ x \ \ \ \ \ \ 
 @ @ - 217 , 7 + 217 , 7 @ @ dnl special rule add - on : " dist " copies the tarball to $ ( PUB ) . ( source tree ) 
 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * " \ \ \ \ \ \ 
 - 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ 
 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ 
 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * \ \ \ \ \ \ 
 @ @ - 229 , 7 + 229 , 7 @ @ dnl special rule add - on : " dist - foo " copies all the archives to $ ( PUB ) . ( source t 
 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . * " \ \ \ \ \ \ 
 - 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ 
 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ 
 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . * \ \ \ \ \ \ 
 diff - - git a / patches / bad - abi - fix b / patches / bad - abi - fix 
 index f190183 . . d30babb 100644 
 - - - a / patches / bad - abi - fix 
 + + + b / patches / bad - abi - fix 
 @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 - - - libffi . orig / ChangeLog 
 + + + libffi / ChangeLog 
 - @ @ - 50 , 6 + 50 , 23 @ @ 
 + @ @ - 55 , 6 + 55 , 23 @ @ 
 
 	 * configure : Regenerate . 
 
 diff - - git a / patches / darwin - EH - fix b / patches / darwin - EH - fix 
 index 7fee260 . . 661bad5 100644 
 - - - a / patches / darwin - EH - fix 
 + + + b / patches / darwin - EH - fix 
 @ @ - 28 , 7 + 28 , 7 @ @ Index : libffi / ChangeLog 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 - - - libffi . orig / ChangeLog 
 + + + libffi / ChangeLog 
 - @ @ - 46 , 6 + 46 , 11 @ @ 
 + @ @ - 51 , 6 + 51 , 11 @ @ 
 	 Use them to handle ELF vs . ECOFF differences . 
 	 [ _ _ osf _ _ ] ( _ GLOBAL _ _ F _ ffi _ call _ osf ) : Define . 
 
 diff - - git a / patches / fix - ppc32 b / patches / fix - ppc32 
 index a1973b7 . . ea44c30 100644 
 - - - a / patches / fix - ppc32 
 + + + b / patches / fix - ppc32 
 @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 - - - libffi . orig / ChangeLog 
 + + + libffi / ChangeLog 
 - @ @ - 46 , 6 + 46 , 11 @ @ 
 + @ @ - 51 , 6 + 51 , 11 @ @ 
 	 Use them to handle ELF vs . ECOFF differences . 
 	 [ _ _ osf _ _ ] ( _ GLOBAL _ _ F _ ffi _ call _ osf ) : Define . 
 
 diff - - git a / patches / fix _ maxopt b / patches / fix _ maxopt 
 index 3d4faf2 . . d8d8a9e 100644 
 - - - a / patches / fix _ maxopt 
 + + + b / patches / fix _ maxopt 
 @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 - - - libffi . orig / ChangeLog 
 + + + libffi / ChangeLog 
 - @ @ - 46 , 6 + 46 , 11 @ @ 
 + @ @ - 51 , 6 + 51 , 11 @ @ 
 	 Use them to handle ELF vs . ECOFF differences . 
 	 [ _ _ osf _ _ ] ( _ GLOBAL _ _ F _ ffi _ call _ osf ) : Define . 
 
 diff - - git a / patches / ios - fixes b / patches / ios - fixes 
 index 083f16f . . be4166f 100644 
 - - - a / patches / ios - fixes 
 + + + b / patches / ios - fixes 
 @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 - - - libffi . orig / ChangeLog 
 + + + libffi / ChangeLog 
 - @ @ - 87 , 7 + 87 , 7 @ @ 
 + @ @ - 92 , 7 + 92 , 7 @ @ 
 	 * src / prep _ cif . c ( UNLIKELY , LIKELY ) : Define . 
 	 ( initialize _ aggregate ) : Check for bad types . 
 
 diff - - git a / patches / more - openbsd b / patches / more - openbsd 
 index 104d03e . . f898f67 100644 
 - - - a / patches / more - openbsd 
 + + + b / patches / more - openbsd 
 @ @ - 2 , 7 + 2 , 7 @ @ Index : libffi / ChangeLog 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 - - - libffi . orig / ChangeLog 
 + + + libffi / ChangeLog 
 - @ @ - 789 , 6 + 789 , 11 @ @ 
 + @ @ - 794 , 6 + 794 , 11 @ @ 
 	 * man / Makefile . in : Regenerate . 
 	 * testsuite / Makefile . in : Regenerate . 
 
 diff - - git a / patches / msvcc b / patches / msvcc 
 index 34f80cd . . 65f8e9c 100644 
 - - - a / patches / msvcc 
 + + + b / patches / msvcc 
 @ @ - 19 , 7 + 19 , 7 @ @ Index : libffi / Makefile . in 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 - - - libffi . orig / Makefile . in 
 + + + libffi / Makefile . in 
 - @ @ - 428 , 7 + 428 , 9 @ @ EXTRA _ DIST = LICENSE ChangeLog . v1 Change 
 + @ @ - 441 , 7 + 441 , 9 @ @ EXTRA _ DIST = LICENSE ChangeLog . v1 Change 
 	 src / frv / eabi . S src / frv / ffitarget . h src / dlmalloc . c \ 
 	 src / moxie / ffi . c src / moxie / eabi . S libtool - version \ 
 	 ChangeLog . libffi m4 / libtool . m4 m4 / lt ~ obsolete . m4 \ 
 @ @ - 30 , 7 + 30 , 7 @ @ Index : libffi / Makefile . in 
 
 info _ TEXINFOS = doc / libffi . texi 
 
 - @ @ - 1818 , 7 + 1820 , 6 @ @ uninstall - am : uninstall - dvi - am uninstall 
 + @ @ - 1831 , 7 + 1833 , 6 @ @ uninstall - am : uninstall - dvi - am uninstall 
 	 uninstall - info - am uninstall - libLTLIBRARIES uninstall - pdf - am \ 
 	 uninstall - pkgconfigDATA uninstall - ps - am 
 
 diff - - git a / patches / ungccify b / patches / ungccify 
 index cfd7eb4 . . 453f1d1 100644 
 - - - a / patches / ungccify 
 + + + b / patches / ungccify 
 @ @ - 31 , 12 + 31 , 13 @ @ Index : libffi / Makefile . in 
 subdir = . 
 DIST _ COMMON = README $ ( am _ _ configure _ deps ) $ ( srcdir ) / Makefile . am \ 
 	 $ ( srcdir ) / Makefile . in $ ( srcdir ) / doc / stamp - vti \ 
 - @ @ - 76 , 7 + 74 , 17 @ @ DIST _ COMMON = README $ ( am _ _ configure _ dep 
 + @ @ - 76 , 7 + 74 , 18 @ @ DIST _ COMMON = README $ ( am _ _ configure _ dep 
 	 compile config . guess config . sub depcomp install - sh ltmain . sh \ 
 	 mdate - sh missing texinfo . tex 
 ACLOCAL _ M4 = $ ( top _ srcdir ) / aclocal . m4 
 - am _ _ aclocal _ m4 _ deps = $ ( top _ srcdir ) / acinclude . m4 \ 
 - + am _ _ aclocal _ m4 _ deps = $ ( top _ srcdir ) / m4 / ax _ cc _ maxopt . m4 \ 
 + + am _ _ aclocal _ m4 _ deps = $ ( top _ srcdir ) / m4 / asmcfi . m4 \ 
 + + 	 $ ( top _ srcdir ) / m4 / ax _ cc _ maxopt . m4 \ 
 + 	 $ ( top _ srcdir ) / m4 / ax _ cflags _ warn _ all . m4 \ 
 + 	 $ ( top _ srcdir ) / m4 / ax _ check _ compiler _ flags . m4 \ 
 + 	 $ ( top _ srcdir ) / m4 / ax _ compiler _ vendor . m4 \ 
 @ @ - 50 , 7 + 51 , 7 @ @ Index : libffi / Makefile . in 
 	 $ ( top _ srcdir ) / configure . ac 
 am _ _ configure _ deps = $ ( am _ _ aclocal _ m4 _ deps ) $ ( CONFIGURE _ DEPENDENCIES ) \ 
 	 $ ( ACLOCAL _ M4 ) 
 - @ @ - 335 , 6 + 343 , 7 @ @ PACKAGE _ TARNAME = @ PACKAGE _ TARNAME @ 
 + @ @ - 335 , 6 + 344 , 7 @ @ PACKAGE _ TARNAME = @ PACKAGE _ TARNAME @ 
 PACKAGE _ URL = @ PACKAGE _ URL @ 
 PACKAGE _ VERSION = @ PACKAGE _ VERSION @ 
 PATH _ SEPARATOR = @ PATH _ SEPARATOR @ 
 @ @ - 58 , 7 + 59 , 7 @ @ Index : libffi / Makefile . in 
 RANLIB = @ RANLIB @ 
 SED = @ SED @ 
 SET _ MAKE = @ SET _ MAKE @ 
 - @ @ - 355 , 6 + 364 , 7 @ @ am _ _ leading _ dot = @ am _ _ leading _ dot @ 
 + @ @ - 355 , 6 + 365 , 7 @ @ am _ _ leading _ dot = @ am _ _ leading _ dot @ 
 am _ _ quote = @ am _ _ quote @ 
 am _ _ tar = @ am _ _ tar @ 
 am _ _ untar = @ am _ _ untar @ 
 @ @ - 66 , 7 + 67 , 7 @ @ Index : libffi / Makefile . in 
 bindir = @ bindir @ 
 build = @ build @ 
 build _ alias = @ build _ alias @ 
 - @ @ - 493 , 7 + 503 , 7 @ @ nodist _ libffi _ la _ SOURCES = $ ( am _ _ append _ 
 + @ @ - 493 , 7 + 504 , 7 @ @ nodist _ libffi _ la _ SOURCES = $ ( am _ _ append _ 
 	 $ ( am _ _ append _ 27 ) 
 libffi _ convenience _ la _ SOURCES = $ ( libffi _ la _ SOURCES ) 
 nodist _ libffi _ convenience _ la _ SOURCES = $ ( nodist _ libffi _ la _ SOURCES ) 
 @ @ - 921 , 7 + 922 , 7 @ @ Index : libffi / m4 / ax _ enable _ builddir . m4 
 + 	 ; test " . \ $ \ $ HOST " = " . " & & HOST = $ x sh $ AUX / config . guess $ x \ \ \ \ \ \ 
 + 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 + 	 ; use = $ x basename " \ $ \ @ " _ ALL $ x ; n = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 - + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " = " 0 " ; then : \ \ \ \ \ \ 
 + + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ n * \ $ \ @ " ; if test " \ $ \ $ n " - eq " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x ; fi \ \ \ \ \ \ 
 + 	 ; test " . \ $ \ $ BUILD " = " . " & & BUILD = " . " \ \ \ \ \ \ 
 + 	 ; test " \ $ \ $ use " = " \ $ \ @ " & & BUILD = $ x echo " \ $ \ $ BUILD " | tail - 1 $ x \ \ \ \ \ \ 
 @ @ - 934 , 7 + 935 , 7 @ @ Index : libffi / m4 / ax _ enable _ builddir . m4 
 + 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 + 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * " \ \ \ \ \ \ 
 - + 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ 
 + + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 + 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ 
 + 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . tar . * \ \ \ \ \ \ 
 @ @ - 946 , 7 + 947 , 7 @ @ Index : libffi / m4 / ax _ enable _ builddir . m4 
 + 	 ; BUILD = $ x grep " ^ # # # # \ $ \ $ HOST " Makefile | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 + 	 ; found = $ x echo \ $ \ $ BUILD | wc - w $ x \ \ \ \ \ \ 
 + 	 ; echo " MAKE \ $ \ $ HOST : \ $ \ $ found \ $ ( PACKAGE ) - \ $ ( VERSION ) . * " \ \ \ \ \ \ 
 - + 	 ; if test " \ $ \ $ found " = " 0 " ; then : \ \ \ \ \ \ 
 + + 	 ; if test " \ $ \ $ found " - eq " 0 " ; then : \ \ \ \ \ \ 
 + 	 ; BUILD = $ x grep " ^ # # # # . * | " Makefile | tail - 1 | sed - e ' s / . * | / / ' $ x \ \ \ \ \ \ 
 + 	 ; fi ; for i in \ $ \ $ BUILD ; do test " . \ $ \ $ i " = " . " & & continue \ \ \ \ \ \ 
 + 	 ; for f in \ $ \ $ i / \ $ ( PACKAGE ) - \ $ ( VERSION ) . * \ \ \ \ \ \ 
 diff - - git a / src / closures . c b / src / closures . c 
 index 1b37827 . . b8392c8 100644 
 - - - a / src / closures . c 
 + + + b / src / closures . c 
 @ @ - 172 , 7 + 172 , 7 @ @ selinux _ enabled _ check ( void ) 
 
 # endif / * ! FFI _ MMAP _ EXEC _ SELINUX * / 
 
 - # elif defined ( _ _ CYGWIN _ _ ) | | defined ( _ _ INTERIX ) 
 + # elif defined ( _ _ CYGWIN _ _ ) 
 
 # include < sys / mman . h > 

