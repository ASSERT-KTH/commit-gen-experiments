BLEU SCORE: 0.049900497019368314

TEST MSG: windows won ' t load libraries w / truncated name
GENERATED MSG: Allow lookup of OSX framework libraries by name

TEST DIFF (one line): diff - - git a / native / Makefile b / native / Makefile <nl> index aecfa04 . . da6f303 100644 <nl> - - - a / native / Makefile <nl> + + + b / native / Makefile <nl> @ @ - 147 , 6 + 147 , 7 @ @ HOST _ CONFIG = - - host = arm - mingw32ce <nl> FFI _ ENV + = LD = arm - mingw32ce - ld CPP = cpp CFLAGS = " $ ( CDEFINES ) " <nl> PHONEME = . . / phoneme / cdc / src <nl> JAVA _ INCLUDES = - I $ ( PHONEME ) / share / javavm / export - I $ ( PHONEME ) / share - I $ ( PHONEME ) / win32 - I $ ( PHONEME ) / win32 - arm <nl> + TESTLIB _ TRUNC = $ ( BUILD ) / testlib - truncated . dll <nl> endif <nl> <nl> ifeq ( $ ( OS ) , win32 ) <nl> @ @ - 158 , 6 + 159 , 7 @ @ EXTRAOBJS = $ ( RSRC ) <nl> STRIP = @ echo <nl> LIBPFX = <nl> LIBSFX = . dll <nl> + TESTLIB _ TRUNC = $ ( BUILD ) / testlib - truncated . dll <nl> <nl> ifneq ( $ ( ARCH ) , amd64 ) <nl> ifeq ( $ ( CC ) , gcc ) <nl> diff - - git a / src / com / sun / jna / NativeLibrary . java b / src / com / sun / jna / NativeLibrary . java <nl> index 789d61e . . 22b277d 100644 <nl> - - - a / src / com / sun / jna / NativeLibrary . java <nl> + + + b / src / com / sun / jna / NativeLibrary . java <nl> @ @ - 119 , 6 + 119 , 7 @ @ public class NativeLibrary { <nl> } <nl> <nl> private static NativeLibrary loadLibrary ( String libraryName , Map options ) { <nl> + boolean isAbsolutePath = new File ( libraryName ) . isAbsolute ( ) ; <nl> List searchPath = new LinkedList ( ) ; <nl> int openFlags = openFlags ( options ) ; <nl> <nl> @ @ - 187 , 7 + 188 , 9 @ @ public class NativeLibrary { <nl> } <nl> } <nl> / / Search framework libraries on OS X <nl> - else if ( Platform . isMac ( ) & & ! libraryName . endsWith ( " . dylib " ) ) { <nl> + else if ( Platform . isMac ( ) <nl> + & & ! libraryName . endsWith ( " . dylib " ) <nl> + & & ! isAbsolutePath ) { <nl> libraryPath = matchFramework ( libraryName ) ; <nl> if ( libraryPath ! = null ) { <nl> try { <nl> @ @ - 197 , 7 + 200 , 7 @ @ public class NativeLibrary { <nl> } <nl> } <nl> / / Try the same library with a " lib " prefix <nl> - else if ( Platform . isWindows ( ) ) { <nl> + else if ( Platform . isWindows ( ) & & ! isAbsolutePath ) { <nl> libraryPath = findLibraryPath ( " lib " + libraryName , searchPath ) ; <nl> try { handle = Native . open ( libraryPath , openFlags ) ; } <nl> catch ( UnsatisfiedLinkError e2 ) { e = e2 ; } <nl> diff - - git a / test / com / sun / jna / LibraryLoadTest . java b / test / com / sun / jna / LibraryLoadTest . java <nl> index da61afe . . 98e4071 100644 <nl> - - - a / test / com / sun / jna / LibraryLoadTest . java <nl> + + + b / test / com / sun / jna / LibraryLoadTest . java <nl> @ @ - 82 , 7 + 82 , 9 @ @ public class LibraryLoadTest extends TestCase implements Paths { <nl> } <nl> <nl> public void testLoadExplicitAbsolutePath ( ) throws MalformedURLException { <nl> - NativeLibrary . getInstance ( new File ( TESTPATH , " testlib - truncated " ) . getAbsolutePath ( ) ) ; <nl> + / / windows requires " . dll " suffix <nl> + String name = " testlib - truncated " + ( Platform . isWindows ( ) ? " . dll " : " " ) ; <nl> + NativeLibrary . getInstance ( new File ( TESTPATH , name ) . getAbsolutePath ( ) ) ; <nl> } <nl> <nl> public static interface CLibrary extends Library {
NEAREST DIFF (one line): diff - - git a / www / index . html b / www / index . html <nl> index 7cc8fe8 . . 912a017 100644 <nl> - - - a / www / index . html <nl> + + + b / www / index . html <nl> @ @ - 3 , 7 + 3 , 7 @ @ <nl> < meta name = " author " content = " Timothy Wall " > <nl> < meta name = " keywords " content = " java , jna , jni , c / c + + , native , method , function , call , ctypes , ffi , foreign function interface , jdirect , jinvoke , pinvoke , platform invoke , native library access , native access , call native from java , java c library , easy jni , call c code from java , avoid jni " > <nl> < meta name = " description " content = " Java Native Access ( JNA ) : access native libraries with pure Java code . " > <nl> - < meta name = " date " content = " 2007 - 09 - 22 " > <nl> + < meta name = " date " content = " 2007 - 09 - 30 " > <nl> < title > Java Native Access ( JNA ) : Pure Java access to native libraries < / title > <nl> < meta http - equiv = " Content - Type " content = " text / html ; charset = iso - 8859 - 1 " > <nl> < / head > <nl> @ @ - 269 , 15 + 269 , 16 @ @ the JNA library ( and are pretty nifty utilities in and of themselves ) . <nl> < / ul > <nl> < h3 > Projects Using JNA < / h3 > <nl> < ul > <nl> - < li > < a href = " http : / / jruby . codehaus . org " > JRuby < / a > ( Charles Nutter ) <nl> < li > < a href = " http : / / glossitope . org " > Glossitope ( AKA ab5k ) < / a > ( Josh Marinacci ) <nl> < li > < a href = " http : / / code . google . com / p / gstreamer - java " > gstreamer for Java < / a > ( Wayne Meissner ) <nl> < li > < a href = " http : / / fmj . sf . net " > Freedom for Media in Java ( FMJ ) < / a > ( Ken Larson / Dieter Krachtus ) <nl> < li > < a href = " http : / / ochafik . free . fr / blog / ? p = 98 " > Detect User Inactivity < / a > ( Olivier Chafik ) <nl> < li > < a href = " http : / / sellmic . com / blog / 2007 / 05 / 22 / javafx - clock - update - now - with - transparency " > A JavaFX Clock < / a > ( Augusto Sellhorn ) <nl> + < li > < a href = " http : / / jruby . codehaus . org " > JRuby < / a > ( Charles Nutter ) <nl> < li > < a href = " https : / / jna . dev . java . net / source / browse / jna / trunk / jnalib / contrib " > Miscellaneous contributed mappings and utilities ( including Windows NT Service , Registry , and User Account libraries ) . < / a > <nl> + < li > < a href = " http : / / jetbrains . com " > IntelliJ < / a > ( JetBrains ) <nl> < / ul > <nl> - Contact twalljava AT dev DOT java DOT net to include your project in this list , or if you ' d likely to contribute a library mapping you ' ve written . <nl> + Post to users AT jna DOT dev DOT java DOT net to include your project in this list , or if you ' d likely to contribute a library mapping you ' ve written . <nl> <nl> < h3 > Development Tasks < / h3 > <nl> < p > The library works fairly well now , but there are a number of tasks with which we ' d appreciate help : < / p > <nl> @ @ - 339 , 7 + 340 , 7 @ @ _ uacct = " UA - 1166339 - 4 " ; <nl> urchinTracker ( ) ; <nl> < / script > <nl> < div name = " meta - info " style = " visibility : hidden ; " > <nl> - java , jna , jni , c / c + + , native , method , function , call , ctypes , ffi , foreign function interface , jdirect , jinvoke , pinvoke , platform invoke , native library access , native access , call native from java , java c library , easy jni , call c code from java , avoid jni > <nl> + java , jna , jni , c / c + + , native , method , function , call , ctypes , ffi , foreign function interface , jdirect , jinvoke , pinvoke , platform invoke , native library access , native access , call native from java , java c library , easy jni , call c code from java , avoid jni , jni alternative > <nl> < / div > <nl> < / body > <nl> < / html >

TEST DIFF:
diff - - git a / native / Makefile b / native / Makefile 
 index aecfa04 . . da6f303 100644 
 - - - a / native / Makefile 
 + + + b / native / Makefile 
 @ @ - 147 , 6 + 147 , 7 @ @ HOST _ CONFIG = - - host = arm - mingw32ce 
 FFI _ ENV + = LD = arm - mingw32ce - ld CPP = cpp CFLAGS = " $ ( CDEFINES ) " 
 PHONEME = . . / phoneme / cdc / src 
 JAVA _ INCLUDES = - I $ ( PHONEME ) / share / javavm / export - I $ ( PHONEME ) / share - I $ ( PHONEME ) / win32 - I $ ( PHONEME ) / win32 - arm 
 + TESTLIB _ TRUNC = $ ( BUILD ) / testlib - truncated . dll 
 endif 
 
 ifeq ( $ ( OS ) , win32 ) 
 @ @ - 158 , 6 + 159 , 7 @ @ EXTRAOBJS = $ ( RSRC ) 
 STRIP = @ echo 
 LIBPFX = 
 LIBSFX = . dll 
 + TESTLIB _ TRUNC = $ ( BUILD ) / testlib - truncated . dll 
 
 ifneq ( $ ( ARCH ) , amd64 ) 
 ifeq ( $ ( CC ) , gcc ) 
 diff - - git a / src / com / sun / jna / NativeLibrary . java b / src / com / sun / jna / NativeLibrary . java 
 index 789d61e . . 22b277d 100644 
 - - - a / src / com / sun / jna / NativeLibrary . java 
 + + + b / src / com / sun / jna / NativeLibrary . java 
 @ @ - 119 , 6 + 119 , 7 @ @ public class NativeLibrary { 
 } 
 
 private static NativeLibrary loadLibrary ( String libraryName , Map options ) { 
 + boolean isAbsolutePath = new File ( libraryName ) . isAbsolute ( ) ; 
 List searchPath = new LinkedList ( ) ; 
 int openFlags = openFlags ( options ) ; 
 
 @ @ - 187 , 7 + 188 , 9 @ @ public class NativeLibrary { 
 } 
 } 
 / / Search framework libraries on OS X 
 - else if ( Platform . isMac ( ) & & ! libraryName . endsWith ( " . dylib " ) ) { 
 + else if ( Platform . isMac ( ) 
 + & & ! libraryName . endsWith ( " . dylib " ) 
 + & & ! isAbsolutePath ) { 
 libraryPath = matchFramework ( libraryName ) ; 
 if ( libraryPath ! = null ) { 
 try { 
 @ @ - 197 , 7 + 200 , 7 @ @ public class NativeLibrary { 
 } 
 } 
 / / Try the same library with a " lib " prefix 
 - else if ( Platform . isWindows ( ) ) { 
 + else if ( Platform . isWindows ( ) & & ! isAbsolutePath ) { 
 libraryPath = findLibraryPath ( " lib " + libraryName , searchPath ) ; 
 try { handle = Native . open ( libraryPath , openFlags ) ; } 
 catch ( UnsatisfiedLinkError e2 ) { e = e2 ; } 
 diff - - git a / test / com / sun / jna / LibraryLoadTest . java b / test / com / sun / jna / LibraryLoadTest . java 
 index da61afe . . 98e4071 100644 
 - - - a / test / com / sun / jna / LibraryLoadTest . java 
 + + + b / test / com / sun / jna / LibraryLoadTest . java 
 @ @ - 82 , 7 + 82 , 9 @ @ public class LibraryLoadTest extends TestCase implements Paths { 
 } 
 
 public void testLoadExplicitAbsolutePath ( ) throws MalformedURLException { 
 - NativeLibrary . getInstance ( new File ( TESTPATH , " testlib - truncated " ) . getAbsolutePath ( ) ) ; 
 + / / windows requires " . dll " suffix 
 + String name = " testlib - truncated " + ( Platform . isWindows ( ) ? " . dll " : " " ) ; 
 + NativeLibrary . getInstance ( new File ( TESTPATH , name ) . getAbsolutePath ( ) ) ; 
 } 
 
 public static interface CLibrary extends Library {

NEAREST DIFF:
diff - - git a / www / index . html b / www / index . html 
 index 7cc8fe8 . . 912a017 100644 
 - - - a / www / index . html 
 + + + b / www / index . html 
 @ @ - 3 , 7 + 3 , 7 @ @ 
 < meta name = " author " content = " Timothy Wall " > 
 < meta name = " keywords " content = " java , jna , jni , c / c + + , native , method , function , call , ctypes , ffi , foreign function interface , jdirect , jinvoke , pinvoke , platform invoke , native library access , native access , call native from java , java c library , easy jni , call c code from java , avoid jni " > 
 < meta name = " description " content = " Java Native Access ( JNA ) : access native libraries with pure Java code . " > 
 - < meta name = " date " content = " 2007 - 09 - 22 " > 
 + < meta name = " date " content = " 2007 - 09 - 30 " > 
 < title > Java Native Access ( JNA ) : Pure Java access to native libraries < / title > 
 < meta http - equiv = " Content - Type " content = " text / html ; charset = iso - 8859 - 1 " > 
 < / head > 
 @ @ - 269 , 15 + 269 , 16 @ @ the JNA library ( and are pretty nifty utilities in and of themselves ) . 
 < / ul > 
 < h3 > Projects Using JNA < / h3 > 
 < ul > 
 - < li > < a href = " http : / / jruby . codehaus . org " > JRuby < / a > ( Charles Nutter ) 
 < li > < a href = " http : / / glossitope . org " > Glossitope ( AKA ab5k ) < / a > ( Josh Marinacci ) 
 < li > < a href = " http : / / code . google . com / p / gstreamer - java " > gstreamer for Java < / a > ( Wayne Meissner ) 
 < li > < a href = " http : / / fmj . sf . net " > Freedom for Media in Java ( FMJ ) < / a > ( Ken Larson / Dieter Krachtus ) 
 < li > < a href = " http : / / ochafik . free . fr / blog / ? p = 98 " > Detect User Inactivity < / a > ( Olivier Chafik ) 
 < li > < a href = " http : / / sellmic . com / blog / 2007 / 05 / 22 / javafx - clock - update - now - with - transparency " > A JavaFX Clock < / a > ( Augusto Sellhorn ) 
 + < li > < a href = " http : / / jruby . codehaus . org " > JRuby < / a > ( Charles Nutter ) 
 < li > < a href = " https : / / jna . dev . java . net / source / browse / jna / trunk / jnalib / contrib " > Miscellaneous contributed mappings and utilities ( including Windows NT Service , Registry , and User Account libraries ) . < / a > 
 + < li > < a href = " http : / / jetbrains . com " > IntelliJ < / a > ( JetBrains ) 
 < / ul > 
 - Contact twalljava AT dev DOT java DOT net to include your project in this list , or if you ' d likely to contribute a library mapping you ' ve written . 
 + Post to users AT jna DOT dev DOT java DOT net to include your project in this list , or if you ' d likely to contribute a library mapping you ' ve written . 
 
 < h3 > Development Tasks < / h3 > 
 < p > The library works fairly well now , but there are a number of tasks with which we ' d appreciate help : < / p > 
 @ @ - 339 , 7 + 340 , 7 @ @ _ uacct = " UA - 1166339 - 4 " ; 
 urchinTracker ( ) ; 
 < / script > 
 < div name = " meta - info " style = " visibility : hidden ; " > 
 - java , jna , jni , c / c + + , native , method , function , call , ctypes , ffi , foreign function interface , jdirect , jinvoke , pinvoke , platform invoke , native library access , native access , call native from java , java c library , easy jni , call c code from java , avoid jni > 
 + java , jna , jni , c / c + + , native , method , function , call , ctypes , ffi , foreign function interface , jdirect , jinvoke , pinvoke , platform invoke , native library access , native access , call native from java , java c library , easy jni , call c code from java , avoid jni , jni alternative > 
 < / div > 
 < / body > 
 < / html >
