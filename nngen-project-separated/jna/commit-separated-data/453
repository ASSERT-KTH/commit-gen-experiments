BLEU SCORE: 0.026279617104084448

TEST MSG: use a single build directory , multiple build / native - ( prefix ) directories
GENERATED MSG: android doesn ' t support shlib jar unpack ; place in a convenient location instead

TEST DIFF (one line): diff - - git a / build . xml b / build . xml <nl> index e1370e5 . . 0841482 100644 <nl> - - - a / build . xml <nl> + + + b / build . xml <nl> @ @ - 160 , 11 + 160 , 14 @ @ <nl> < condition property = " cross - compile " value = " true " > <nl> < isset property = " os . prefix " / > <nl> < / condition > <nl> - < ! - - Keep cross - compiled natives separate from normal builds - - > <nl> - < condition property = " native . subdir " value = " native - $ { os . prefix } " else = " native " > <nl> - < isset property = " cross - compile " / > <nl> + < ! - - Sun 1 . 6 VM for windows doesn ' t support - d32 / - d64 switch - - > <nl> + < condition property = " vm . 64 " value = " - d64 " else = " - Ddummy " > <nl> + < not > < os family = " windows " / > < / not > <nl> < / condition > <nl> - < condition property = " vm . arch " value = " - d64 " else = " " > <nl> + < condition property = " vm . 32 " value = " - d32 " else = " - Ddummy " > <nl> + < not > < os family = " windows " / > < / not > <nl> + < / condition > <nl> + < condition property = " vm . arch " value = " $ { vm . 64 } " else = " $ { vm . 32 } " > <nl> < and > <nl> < not > < equals arg1 = " $ { os . prefix } " arg2 = " android - arm " trim = " true " / > < / not > <nl> < or > <nl> @ @ - 182 , 10 + 185 , 10 @ @ <nl> < condition property = " ld . preload " value = " LD _ PRELOAD _ 64 " else = " LD _ PRELOAD " > <nl> < and > <nl> < os name = " SunOS " / > <nl> - < equals arg1 = " $ { vm . arch } " arg2 = " - d64 " / > <nl> + < equals arg1 = " $ { vm . arch } " arg2 = " $ { vm . 64 } " / > <nl> < / and > <nl> < / condition > <nl> - < property name = " build " value = " build $ { vm . arch } " / > <nl> + < property name = " build " value = " build " / > <nl> < property name = " classes " location = " $ { build } / classes " / > <nl> < property name = " eclipse . classes " location = " build . eclipse / classes " / > <nl> < property name = " test . classes " location = " $ { build } / test - classes " / > <nl> @ @ - 229 , 6 + 232 , 8 @ @ <nl> < / or > <nl> < / condition > <nl> < fail unless = " os . prefix " message = " OS / arch not supported ( $ { os . name } / $ { jre . arch } ) , edit build . xml and native / Makefile to add it . " / > <nl> + < ! - - Keep all natives separate - - > <nl> + < property name = " native . subdir " value = " native - $ { os . prefix } " / > <nl> < condition property = " jdk . home " value = " $ { java . home } " > <nl> < available file = " $ { java . home } / include " / > <nl> < / condition > <nl> @ @ - 619 , 7 + 624 , 7 @ @ osname = macosx ; processor = x86 ; processor = x86 - 64 ; processor = ppc <nl> < equals arg1 = " $ { os . prefix } " arg2 = " aix - ppc64 " / > <nl> < / condition > <nl> < ! - - ensure ARCH is set properly for 64 - bit capable platforms - - > <nl> - < ! - - use ANT _ OPTS = - d64 to build 64 - bit if not the platform default - - > <nl> + < ! - - use ANT _ OPTS = - d64 / - d32 to build 64 - bit / 32 - bit if not the platform default - - > <nl> < property name = " ARCH " value = " $ { os . arch } " / > <nl> < condition property = " make . CC " value = " CC = $ { CC } " else = " IGNORE = " > <nl> < isset property = " CC " / > <nl> @ @ - 817 , 13 + 822 , 7 @ @ osname = macosx ; processor = x86 ; processor = x86 - 64 ; processor = ppc <nl> < not > < os family = " mac " / > < / not > <nl> < / and > <nl> < / condition > <nl> - < condition property = " vmopt . arch " value = " - d64 " else = " - Dignore " > <nl> - < and > <nl> - < ! - - Sun 64 - bit VM for windows doesn ' t support the - d64 switch - - > <nl> - < not > < os family = " windows " / > < / not > <nl> - < equals arg1 = " $ { vm . arch } " arg2 = " - d64 " trim = " true " / > <nl> - < / and > <nl> - < / condition > <nl> + < property name = " vmopt . arch " value = " $ { vm . 64 } " else = " $ { vm . 32 } " / > <nl> < property name = " tests . platform " value = " " / > <nl> < property name = " tests . exclude " value = " " / > <nl> < property name = " tests . exclude - patterns " value = " " / > <nl> @ @ - 844 , 6 + 843 , 7 @ @ osname = macosx ; processor = x86 ; processor = x86 - 64 ; processor = ppc <nl> < ! - - Avoid VM crashes , if possible - - > <nl> < sysproperty key = " jna . protected " value = " true " / > <nl> < sysproperty key = " jna . builddir " file = " $ { build } " / > <nl> + < sysproperty key = " jna . nativedir " file = " $ { build . native } " / > <nl> < jvmarg value = " $ { vmopt . arch } " / > <nl> < classpath > < path refid = " test . runpath " / > < / classpath > <nl> < formatter type = " brief " usefile = " false " / > <nl> diff - - git a / test / com / sun / jna / Paths . java b / test / com / sun / jna / Paths . java <nl> index c7f8592 . . b63e33f 100644 <nl> - - - a / test / com / sun / jna / Paths . java <nl> + + + b / test / com / sun / jna / Paths . java <nl> @ @ - 31 , 11 + 31 , 13 @ @ public interface Paths { <nl> ? " / Storage Card " <nl> : System . getProperty ( " jna . builddir " , <nl> USING _ CLOVER <nl> - ? " build . clover " <nl> - : " build " + ( Platform . is64Bit ( ) ? " - d64 " : " " ) ) ; <nl> + ? " build . clover " : " build " ) ; <nl> String CLASSES = BUILDDIR + ( Platform . isWindowsCE ( ) ? " " : " / classes " ) ; <nl> String JNAJAR = BUILDDIR + " / jna . jar " ; <nl> <nl> - String TESTPATH = Platform . isWindowsCE ( ) ? " / Storage Card / " : BUILDDIR + " / native / " ; <nl> + String TESTPATH = Platform . isWindowsCE ( ) <nl> + ? " / Storage Card / " <nl> + : System . getProperty ( " jna . nativedir " , <nl> + BUILDDIR + " / native - " + Platform . RESOURCE _ PREFIX + " / " ) ; <nl> String TESTJAR = BUILDDIR + " / jna - test . jar " ; <nl> }
NEAREST DIFF (one line): diff - - git a / build . xml b / build . xml <nl> index d4d8197 . . c87f14c 100644 <nl> - - - a / build . xml <nl> + + + b / build . xml <nl> @ @ - 78 , 7 + 78 , 7 @ @ <nl> < equals arg1 = " $ { os . prefix } " arg2 = " w32ce - arm " / > <nl> < / condition > <nl> < property name = " test . compatibility " value = " 1 . 5 " / > <nl> - < property name = " dist - jar " value = " $ { dist } / jna . jar " / > <nl> + < property name = " dist - jar " value = " $ { dist } / $ { jar } " / > <nl> <nl> < ! - - Maven - - > <nl> < ! - - define Maven coordinates - - > <nl> @ @ - 697 , 7 + 697 , 7 @ @ osname = macos <nl> < fileset dir = " $ { build . native } " includes = " * jnidispatch . * " / > <nl> < / jar > <nl> < signjar alias = " jna " keystore = " jna . keystore " storepass = " jnadev " lazy = " true " > <nl> - < fileset dir = " $ { build } / jws " includes = " jna . jar , jna - test . jar , junit . jar , jnidispatch . jar , clover . jar " / > <nl> + < fileset dir = " $ { build } / jws " includes = " $ { jar } , $ { testjar } , junit . jar , jnidispatch . jar , clover . jar " / > <nl> < / signjar > <nl> < / target > <nl> <nl> @ @ - 715 , 10 + 715 , 10 @ @ osname = macos <nl> < property name = " shared " value = " shared " / > <nl> < ! - - w32ce arm testing - - > <nl> < jar jarfile = " $ { shared } / test . jar " > <nl> - < zipfileset src = " $ { build } / jna . jar " / > <nl> - < zipfileset src = " $ { build } / jna - test . jar " / > <nl> + < zipfileset src = " $ { build } / $ { jar } " / > <nl> + < zipfileset src = " $ { build } / $ { testjar } " / > <nl> < / jar > <nl> - < copy todir = " $ { shared } " file = " $ { build } / jna . jar " / > <nl> + < copy todir = " $ { shared } " file = " $ { build } / $ { jar } " / > <nl> < copy todir = " $ { shared } " file = " $ { build . native } / jnidispatch . dll " / > <nl> < copy todir = " $ { shared } " file = " $ { build . native } / testlib . dll " / > <nl> < copy todir = " $ { shared } " file = " $ { build . native } / testlib2 . dll " / > <nl> @ @ - 884 , 6 + 884 , 7 @ @ osname = macos <nl> < fileset dir = " $ { contrib } / platform / dist " includes = " platform . jar " / > <nl> < fileset dir = " $ { lib . native } " > <nl> < include name = " * . jar " / > <nl> + < exclude name = " out - of - date . jar " / > <nl> < / fileset > <nl> < / copy > <nl> < copy todir = " $ { dist } / jnacontrib " flatten = " true " >

TEST DIFF:
diff - - git a / build . xml b / build . xml 
 index e1370e5 . . 0841482 100644 
 - - - a / build . xml 
 + + + b / build . xml 
 @ @ - 160 , 11 + 160 , 14 @ @ 
 < condition property = " cross - compile " value = " true " > 
 < isset property = " os . prefix " / > 
 < / condition > 
 - < ! - - Keep cross - compiled natives separate from normal builds - - > 
 - < condition property = " native . subdir " value = " native - $ { os . prefix } " else = " native " > 
 - < isset property = " cross - compile " / > 
 + < ! - - Sun 1 . 6 VM for windows doesn ' t support - d32 / - d64 switch - - > 
 + < condition property = " vm . 64 " value = " - d64 " else = " - Ddummy " > 
 + < not > < os family = " windows " / > < / not > 
 < / condition > 
 - < condition property = " vm . arch " value = " - d64 " else = " " > 
 + < condition property = " vm . 32 " value = " - d32 " else = " - Ddummy " > 
 + < not > < os family = " windows " / > < / not > 
 + < / condition > 
 + < condition property = " vm . arch " value = " $ { vm . 64 } " else = " $ { vm . 32 } " > 
 < and > 
 < not > < equals arg1 = " $ { os . prefix } " arg2 = " android - arm " trim = " true " / > < / not > 
 < or > 
 @ @ - 182 , 10 + 185 , 10 @ @ 
 < condition property = " ld . preload " value = " LD _ PRELOAD _ 64 " else = " LD _ PRELOAD " > 
 < and > 
 < os name = " SunOS " / > 
 - < equals arg1 = " $ { vm . arch } " arg2 = " - d64 " / > 
 + < equals arg1 = " $ { vm . arch } " arg2 = " $ { vm . 64 } " / > 
 < / and > 
 < / condition > 
 - < property name = " build " value = " build $ { vm . arch } " / > 
 + < property name = " build " value = " build " / > 
 < property name = " classes " location = " $ { build } / classes " / > 
 < property name = " eclipse . classes " location = " build . eclipse / classes " / > 
 < property name = " test . classes " location = " $ { build } / test - classes " / > 
 @ @ - 229 , 6 + 232 , 8 @ @ 
 < / or > 
 < / condition > 
 < fail unless = " os . prefix " message = " OS / arch not supported ( $ { os . name } / $ { jre . arch } ) , edit build . xml and native / Makefile to add it . " / > 
 + < ! - - Keep all natives separate - - > 
 + < property name = " native . subdir " value = " native - $ { os . prefix } " / > 
 < condition property = " jdk . home " value = " $ { java . home } " > 
 < available file = " $ { java . home } / include " / > 
 < / condition > 
 @ @ - 619 , 7 + 624 , 7 @ @ osname = macosx ; processor = x86 ; processor = x86 - 64 ; processor = ppc 
 < equals arg1 = " $ { os . prefix } " arg2 = " aix - ppc64 " / > 
 < / condition > 
 < ! - - ensure ARCH is set properly for 64 - bit capable platforms - - > 
 - < ! - - use ANT _ OPTS = - d64 to build 64 - bit if not the platform default - - > 
 + < ! - - use ANT _ OPTS = - d64 / - d32 to build 64 - bit / 32 - bit if not the platform default - - > 
 < property name = " ARCH " value = " $ { os . arch } " / > 
 < condition property = " make . CC " value = " CC = $ { CC } " else = " IGNORE = " > 
 < isset property = " CC " / > 
 @ @ - 817 , 13 + 822 , 7 @ @ osname = macosx ; processor = x86 ; processor = x86 - 64 ; processor = ppc 
 < not > < os family = " mac " / > < / not > 
 < / and > 
 < / condition > 
 - < condition property = " vmopt . arch " value = " - d64 " else = " - Dignore " > 
 - < and > 
 - < ! - - Sun 64 - bit VM for windows doesn ' t support the - d64 switch - - > 
 - < not > < os family = " windows " / > < / not > 
 - < equals arg1 = " $ { vm . arch } " arg2 = " - d64 " trim = " true " / > 
 - < / and > 
 - < / condition > 
 + < property name = " vmopt . arch " value = " $ { vm . 64 } " else = " $ { vm . 32 } " / > 
 < property name = " tests . platform " value = " " / > 
 < property name = " tests . exclude " value = " " / > 
 < property name = " tests . exclude - patterns " value = " " / > 
 @ @ - 844 , 6 + 843 , 7 @ @ osname = macosx ; processor = x86 ; processor = x86 - 64 ; processor = ppc 
 < ! - - Avoid VM crashes , if possible - - > 
 < sysproperty key = " jna . protected " value = " true " / > 
 < sysproperty key = " jna . builddir " file = " $ { build } " / > 
 + < sysproperty key = " jna . nativedir " file = " $ { build . native } " / > 
 < jvmarg value = " $ { vmopt . arch } " / > 
 < classpath > < path refid = " test . runpath " / > < / classpath > 
 < formatter type = " brief " usefile = " false " / > 
 diff - - git a / test / com / sun / jna / Paths . java b / test / com / sun / jna / Paths . java 
 index c7f8592 . . b63e33f 100644 
 - - - a / test / com / sun / jna / Paths . java 
 + + + b / test / com / sun / jna / Paths . java 
 @ @ - 31 , 11 + 31 , 13 @ @ public interface Paths { 
 ? " / Storage Card " 
 : System . getProperty ( " jna . builddir " , 
 USING _ CLOVER 
 - ? " build . clover " 
 - : " build " + ( Platform . is64Bit ( ) ? " - d64 " : " " ) ) ; 
 + ? " build . clover " : " build " ) ; 
 String CLASSES = BUILDDIR + ( Platform . isWindowsCE ( ) ? " " : " / classes " ) ; 
 String JNAJAR = BUILDDIR + " / jna . jar " ; 
 
 - String TESTPATH = Platform . isWindowsCE ( ) ? " / Storage Card / " : BUILDDIR + " / native / " ; 
 + String TESTPATH = Platform . isWindowsCE ( ) 
 + ? " / Storage Card / " 
 + : System . getProperty ( " jna . nativedir " , 
 + BUILDDIR + " / native - " + Platform . RESOURCE _ PREFIX + " / " ) ; 
 String TESTJAR = BUILDDIR + " / jna - test . jar " ; 
 }

NEAREST DIFF:
diff - - git a / build . xml b / build . xml 
 index d4d8197 . . c87f14c 100644 
 - - - a / build . xml 
 + + + b / build . xml 
 @ @ - 78 , 7 + 78 , 7 @ @ 
 < equals arg1 = " $ { os . prefix } " arg2 = " w32ce - arm " / > 
 < / condition > 
 < property name = " test . compatibility " value = " 1 . 5 " / > 
 - < property name = " dist - jar " value = " $ { dist } / jna . jar " / > 
 + < property name = " dist - jar " value = " $ { dist } / $ { jar } " / > 
 
 < ! - - Maven - - > 
 < ! - - define Maven coordinates - - > 
 @ @ - 697 , 7 + 697 , 7 @ @ osname = macos 
 < fileset dir = " $ { build . native } " includes = " * jnidispatch . * " / > 
 < / jar > 
 < signjar alias = " jna " keystore = " jna . keystore " storepass = " jnadev " lazy = " true " > 
 - < fileset dir = " $ { build } / jws " includes = " jna . jar , jna - test . jar , junit . jar , jnidispatch . jar , clover . jar " / > 
 + < fileset dir = " $ { build } / jws " includes = " $ { jar } , $ { testjar } , junit . jar , jnidispatch . jar , clover . jar " / > 
 < / signjar > 
 < / target > 
 
 @ @ - 715 , 10 + 715 , 10 @ @ osname = macos 
 < property name = " shared " value = " shared " / > 
 < ! - - w32ce arm testing - - > 
 < jar jarfile = " $ { shared } / test . jar " > 
 - < zipfileset src = " $ { build } / jna . jar " / > 
 - < zipfileset src = " $ { build } / jna - test . jar " / > 
 + < zipfileset src = " $ { build } / $ { jar } " / > 
 + < zipfileset src = " $ { build } / $ { testjar } " / > 
 < / jar > 
 - < copy todir = " $ { shared } " file = " $ { build } / jna . jar " / > 
 + < copy todir = " $ { shared } " file = " $ { build } / $ { jar } " / > 
 < copy todir = " $ { shared } " file = " $ { build . native } / jnidispatch . dll " / > 
 < copy todir = " $ { shared } " file = " $ { build . native } / testlib . dll " / > 
 < copy todir = " $ { shared } " file = " $ { build . native } / testlib2 . dll " / > 
 @ @ - 884 , 6 + 884 , 7 @ @ osname = macos 
 < fileset dir = " $ { contrib } / platform / dist " includes = " platform . jar " / > 
 < fileset dir = " $ { lib . native } " > 
 < include name = " * . jar " / > 
 + < exclude name = " out - of - date . jar " / > 
 < / fileset > 
 < / copy > 
 < copy todir = " $ { dist } / jnacontrib " flatten = " true " >
