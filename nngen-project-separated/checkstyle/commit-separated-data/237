BLEU SCORE: 0.05816635421147513

TEST MSG: Issue # 5916 : move inputs with wrong package on purpose to resources - noncompilable
GENERATED MSG: Issue # 2161 : unify test input locations

TEST DIFF (one line): diff - - git a / . ci / jsoref - spellchecker / whitelist . words b / . ci / jsoref - spellchecker / whitelist . words <nl> index 9ac64b5 . . fbdfab8 100644 <nl> - - - a / . ci / jsoref - spellchecker / whitelist . words <nl> + + + b / . ci / jsoref - spellchecker / whitelist . words <nl> @ @ - 897 , 6 + 897 , 8 @ @ Overriden <nl> OVERRIDERS <nl> packageannotation <nl> packagedeclaration <nl> + packagediffdirectory <nl> + packageinfo <nl> packagename <nl> packagenamesloader <nl> packageobjectfactory <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / coding / PackageDeclarationCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / coding / PackageDeclarationCheckTest . java <nl> index a729bab . . 80827df 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / coding / PackageDeclarationCheckTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / coding / PackageDeclarationCheckTest . java <nl> @ @ - 76 , 7 + 76 , 8 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { <nl> " 1 : " + getCheckMessage ( MSG _ KEY _ MISMATCH ) , <nl> } ; <nl> <nl> - verify ( checkConfig , getPath ( " InputPackageDeclarationDiffDirectory . java " ) , expected ) ; <nl> + verify ( checkConfig , <nl> + getNonCompilablePath ( " InputPackageDeclarationDiffDirectory . java " ) , expected ) ; <nl> } <nl> <nl> @ Test <nl> @ @ - 87 , 7 + 88 , 9 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { <nl> " 1 : " + getCheckMessage ( MSG _ KEY _ MISMATCH ) , <nl> } ; <nl> <nl> - verify ( checkConfig , getPath ( " InputPackageDeclarationDiffDirectoryAtParent . java " ) , expected ) ; <nl> + verify ( checkConfig , <nl> + getNonCompilablePath ( " InputPackageDeclarationDiffDirectoryAtParent . java " ) , <nl> + expected ) ; <nl> } <nl> <nl> @ Test <nl> @ @ - 99 , 7 + 102 , 8 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { <nl> } ; <nl> <nl> verify ( checkConfig , <nl> - getPath ( " InputPackageDeclarationDiffDirectoryAtSubpackage . java " ) , expected ) ; <nl> + getNonCompilablePath ( " InputPackageDeclarationDiffDirectoryAtSubpackage . java " ) , <nl> + expected ) ; <nl> } <nl> <nl> @ Test <nl> @ @ - 108 , 7 + 112 , 8 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { <nl> checkConfig . addAttribute ( " matchDirectoryStructure " , " false " ) ; <nl> final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; <nl> <nl> - verify ( checkConfig , getPath ( " InputPackageDeclarationDiffDirectory . java " ) , expected ) ; <nl> + verify ( checkConfig , getNonCompilablePath ( " InputPackageDeclarationDiffDirectory . java " ) , <nl> + expected ) ; <nl> } <nl> <nl> @ Test <nl> @ @ - 117 , 7 + 122 , 9 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { <nl> checkConfig . addAttribute ( " matchDirectoryStructure " , " false " ) ; <nl> final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; <nl> <nl> - verify ( checkConfig , getPath ( " InputPackageDeclarationDiffDirectoryAtParent . java " ) , expected ) ; <nl> + verify ( checkConfig , <nl> + getNonCompilablePath ( " InputPackageDeclarationDiffDirectoryAtParent . java " ) , <nl> + expected ) ; <nl> } <nl> <nl> @ Test <nl> @ @ - 127 , 7 + 134 , 8 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { <nl> final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; <nl> <nl> verify ( checkConfig , <nl> - getPath ( " InputPackageDeclarationDiffDirectoryAtSubpackage . java " ) , expected ) ; <nl> + getNonCompilablePath ( " InputPackageDeclarationDiffDirectoryAtSubpackage . java " ) , <nl> + expected ) ; <nl> } <nl> <nl> @ Test <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / whitespace / EmptyLineSeparatorCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / whitespace / EmptyLineSeparatorCheckTest . java <nl> index 1255127 . . 5892e3b 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / whitespace / EmptyLineSeparatorCheckTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / whitespace / EmptyLineSeparatorCheckTest . java <nl> @ @ - 221 , 7 + 221 , 7 @ @ public class EmptyLineSeparatorCheckTest <nl> final DefaultConfiguration checkConfig = createModuleConfig ( EmptyLineSeparatorCheck . class ) ; <nl> final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; <nl> verify ( checkConfig , <nl> - getPath ( " package - info / test1 / package - info . java " ) , <nl> + getPath ( " packageinfo / test1 / package - info . java " ) , <nl> expected ) ; <nl> } <nl> <nl> @ @ - 230 , 7 + 230 , 7 @ @ public class EmptyLineSeparatorCheckTest <nl> final DefaultConfiguration checkConfig = createModuleConfig ( EmptyLineSeparatorCheck . class ) ; <nl> final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; <nl> verify ( checkConfig , <nl> - getPath ( " package - info / test2 / package - info . java " ) , <nl> + getPath ( " packageinfo / test2 / package - info . java " ) , <nl> expected ) ; <nl> } <nl> <nl> @ @ - 241 , 7 + 241 , 7 @ @ public class EmptyLineSeparatorCheckTest <nl> " 3 : " + getCheckMessage ( MSG _ SHOULD _ BE _ SEPARATED , " package " ) , <nl> } ; <nl> verify ( checkConfig , <nl> - getPath ( " package - info / test3 / package - info . java " ) , <nl> + getPath ( " packageinfo / test3 / package - info . java " ) , <nl> expected ) ; <nl> } <nl> <nl> @ @ - 252 , 7 + 252 , 7 @ @ public class EmptyLineSeparatorCheckTest <nl> " 3 : " + getCheckMessage ( MSG _ SHOULD _ BE _ SEPARATED , " package " ) , <nl> } ; <nl> verify ( checkConfig , <nl> - getPath ( " package - info / test4 / package - info . java " ) , <nl> + getPath ( " packageinfo / test4 / package - info . java " ) , <nl> expected ) ; <nl> } <nl> <nl> diff - - git a / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java <nl> new file mode 100644 <nl> index 0000000 . . 2c1c799 <nl> - - - / dev / null <nl> + + + b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java <nl> @ @ - 0 , 0 + 1 , 8 @ @ <nl> + package com . testing . packagediffdirectory ; <nl> + <nl> + public class InputPackageDeclarationDiffDirectory { <nl> + public String value ; <nl> + <nl> + private void get ( ) { <nl> + } <nl> + } <nl> diff - - git a / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java <nl> new file mode 100644 <nl> index 0000000 . . d24baeb <nl> - - - / dev / null <nl> + + + b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java <nl> @ @ - 0 , 0 + 1 , 8 @ @ <nl> + package com . puppycrawl . tools . checkstyle . checks . coding ; <nl> + <nl> + public class InputPackageDeclarationDiffDirectoryAtParent { <nl> + public String value ; <nl> + <nl> + private void get ( ) { <nl> + } <nl> + } <nl> diff - - git a / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java <nl> new file mode 100644 <nl> index 0000000 . . f89307f <nl> - - - / dev / null <nl> + + + b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java <nl> @ @ - 0 , 0 + 1 , 8 @ @ <nl> + package com . puppycrawl . tools . checkstyle . checks . coding . packagedeclaration . subpackage ; <nl> + <nl> + public class InputPackageDeclarationDiffDirectoryAtSubpackage { <nl> + public String value ; <nl> + <nl> + private void get ( ) { <nl> + } <nl> + } <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java <nl> deleted file mode 100644 <nl> index 2c1c799 . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java <nl> + + + / dev / null <nl> @ @ - 1 , 8 + 0 , 0 @ @ <nl> - package com . testing . packagediffdirectory ; <nl> - <nl> - public class InputPackageDeclarationDiffDirectory { <nl> - public String value ; <nl> - <nl> - private void get ( ) { <nl> - } <nl> - } <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java <nl> deleted file mode 100644 <nl> index d24baeb . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java <nl> + + + / dev / null <nl> @ @ - 1 , 8 + 0 , 0 @ @ <nl> - package com . puppycrawl . tools . checkstyle . checks . coding ; <nl> - <nl> - public class InputPackageDeclarationDiffDirectoryAtParent { <nl> - public String value ; <nl> - <nl> - private void get ( ) { <nl> - } <nl> - } <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java <nl> deleted file mode 100644 <nl> index f89307f . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java <nl> + + + / dev / null <nl> @ @ - 1 , 8 + 0 , 0 @ @ <nl> - package com . puppycrawl . tools . checkstyle . checks . coding . packagedeclaration . subpackage ; <nl> - <nl> - public class InputPackageDeclarationDiffDirectoryAtSubpackage { <nl> - public String value ; <nl> - <nl> - private void get ( ) { <nl> - } <nl> - } <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test1 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test1 / package - info . java <nl> deleted file mode 100644 <nl> index 35b79ba . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test1 / package - info . java <nl> + + + / dev / null <nl> @ @ - 1 , 5 + 0 , 0 @ @ <nl> - / * OK : for test allowing to place annotation before PACKAGE _ DEF . * / <nl> - @ Deprecated <nl> - package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test1 ; <nl> - <nl> - import java . lang . Deprecated ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test2 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test2 / package - info . java <nl> deleted file mode 100644 <nl> index a45fe8e . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test2 / package - info . java <nl> + + + / dev / null <nl> @ @ - 1 , 6 + 0 , 0 @ @ <nl> - / * * OK : for test allowing to place javadoc before PACKAGE _ DEF . * / <nl> - package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test2 ; <nl> - <nl> - / / that import is for doing check of PACKAGE _ DEF , <nl> - / / because EmptyLineSeparatorCheck doesn ' t check last token <nl> - import java . lang . System ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test3 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test3 / package - info . java <nl> deleted file mode 100644 <nl> index 8e6001b . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test3 / package - info . java <nl> + + + / dev / null <nl> @ @ - 1 , 7 + 0 , 0 @ @ <nl> - / * violation : for test that there ' s warning when block comment isn ' t <nl> - separated from PACKAGE _ DEF by line . * / <nl> - package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test3 ; <nl> - <nl> - / / that import is for doing check of PACKAGE _ DEF , <nl> - / / because EmptyLineSeparatorCheck doesn ' t check last token <nl> - import java . lang . System ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test4 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test4 / package - info . java <nl> deleted file mode 100644 <nl> index 00e28d4 . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test4 / package - info . java <nl> + + + / dev / null <nl> @ @ - 1 , 7 + 0 , 0 @ @ <nl> - / / for test there ' s warning when single line comment isn ' t separated from PACKAGE _ DEF by line <nl> - / / violation is expected after this line <nl> - package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test4 ; <nl> - <nl> - / / that import is for doing check of PACKAGE _ DEF , <nl> - / / because EmptyLineSeparatorCheck doesn ' t check last token <nl> - import java . lang . System ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test1 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test1 / package - info . java <nl> new file mode 100644 <nl> index 0000000 . . 35b79ba <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test1 / package - info . java <nl> @ @ - 0 , 0 + 1 , 5 @ @ <nl> + / * OK : for test allowing to place annotation before PACKAGE _ DEF . * / <nl> + @ Deprecated <nl> + package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test1 ; <nl> + <nl> + import java . lang . Deprecated ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test2 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test2 / package - info . java <nl> new file mode 100644 <nl> index 0000000 . . a45fe8e <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test2 / package - info . java <nl> @ @ - 0 , 0 + 1 , 6 @ @ <nl> + / * * OK : for test allowing to place javadoc before PACKAGE _ DEF . * / <nl> + package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test2 ; <nl> + <nl> + / / that import is for doing check of PACKAGE _ DEF , <nl> + / / because EmptyLineSeparatorCheck doesn ' t check last token <nl> + import java . lang . System ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test3 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test3 / package - info . java <nl> new file mode 100644 <nl> index 0000000 . . 8e6001b <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test3 / package - info . java <nl> @ @ - 0 , 0 + 1 , 7 @ @ <nl> + / * violation : for test that there ' s warning when block comment isn ' t <nl> + separated from PACKAGE _ DEF by line . * / <nl> + package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test3 ; <nl> + <nl> + / / that import is for doing check of PACKAGE _ DEF , <nl> + / / because EmptyLineSeparatorCheck doesn ' t check last token <nl> + import java . lang . System ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test4 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test4 / package - info . java <nl> new file mode 100644 <nl> index 0000000 . . 00e28d4 <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test4 / package - info . java <nl> @ @ - 0 , 0 + 1 , 7 @ @ <nl> + / / for test there ' s warning when single line comment isn ' t separated from PACKAGE _ DEF by line <nl> + / / violation is expected after this line <nl> + package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test4 ; <nl> + <nl> + / / that import is for doing check of PACKAGE _ DEF , <nl> + / / because EmptyLineSeparatorCheck doesn ' t check last token <nl> + import java . lang . System ;
NEAREST DIFF (one line): diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / CommitValidationTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / CommitValidationTest . java <nl> index 9af22a9 . . 2cdac81 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / CommitValidationTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / CommitValidationTest . java <nl> @ @ - 137 , 17 + 137 , 17 @ @ public class CommitValidationTest { <nl> } <nl> <nl> private static List < RevCommit > getCommitsToCheck ( ) throws Exception { <nl> - Repository repo = new FileRepositoryBuilder ( ) . findGitDir ( ) . build ( ) ; <nl> - <nl> - RevCommitsPair revCommitsPair = resolveRevCommitsPair ( repo ) ; <nl> List < RevCommit > commits ; <nl> - if ( COMMITS _ RESOLUTION _ MODE = = CommitsResolutionMode . BY _ COUNTER ) { <nl> - commits = getCommitsByCounter ( revCommitsPair . getFirst ( ) ) ; <nl> - commits . addAll ( getCommitsByCounter ( revCommitsPair . getSecond ( ) ) ) ; <nl> - } <nl> - else { <nl> - commits = getCommitsByLastCommitAuthor ( revCommitsPair . getFirst ( ) ) ; <nl> - commits . addAll ( getCommitsByLastCommitAuthor ( revCommitsPair . getSecond ( ) ) ) ; <nl> + try ( Repository repo = new FileRepositoryBuilder ( ) . findGitDir ( ) . build ( ) ) { <nl> + RevCommitsPair revCommitsPair = resolveRevCommitsPair ( repo ) ; <nl> + if ( COMMITS _ RESOLUTION _ MODE = = CommitsResolutionMode . BY _ COUNTER ) { <nl> + commits = getCommitsByCounter ( revCommitsPair . getFirst ( ) ) ; <nl> + commits . addAll ( getCommitsByCounter ( revCommitsPair . getSecond ( ) ) ) ; <nl> + } <nl> + else { <nl> + commits = getCommitsByLastCommitAuthor ( revCommitsPair . getFirst ( ) ) ; <nl> + commits . addAll ( getCommitsByLastCommitAuthor ( revCommitsPair . getSecond ( ) ) ) ; <nl> + } <nl> } <nl> return commits ; <nl> } <nl> @ @ - 165 , 12 + 165 , 10 @ @ public class CommitValidationTest { <nl> <nl> private static RevCommitsPair resolveRevCommitsPair ( Repository repo ) { <nl> RevCommitsPair revCommitIteratorPair ; <nl> - try { <nl> + <nl> + try ( RevWalk revWalk = new RevWalk ( repo ) ) { <nl> Iterator < RevCommit > first ; <nl> Iterator < RevCommit > second ; <nl> - <nl> - RevWalk revWalk = new RevWalk ( repo ) ; <nl> - <nl> ObjectId headId = repo . resolve ( Constants . HEAD ) ; <nl> RevCommit headCommit = revWalk . parseCommit ( headId ) ; <nl> <nl> @ @ - 178 , 11 + 176 , 15 @ @ public class CommitValidationTest { <nl> RevCommit firstParent = headCommit . getParent ( 0 ) ; <nl> RevCommit secondParent = headCommit . getParent ( 1 ) ; <nl> <nl> - first = new Git ( repo ) . log ( ) . add ( firstParent ) . call ( ) . iterator ( ) ; <nl> - second = new Git ( repo ) . log ( ) . add ( secondParent ) . call ( ) . iterator ( ) ; <nl> + try ( Git git = new Git ( repo ) ) { <nl> + first = git . log ( ) . add ( firstParent ) . call ( ) . iterator ( ) ; <nl> + second = git . log ( ) . add ( secondParent ) . call ( ) . iterator ( ) ; <nl> + } <nl> } <nl> else { <nl> - first = new Git ( repo ) . log ( ) . call ( ) . iterator ( ) ; <nl> + try ( Git git = new Git ( repo ) ) { <nl> + first = git . log ( ) . call ( ) . iterator ( ) ; <nl> + } <nl> second = Collections . emptyIterator ( ) ; <nl> } <nl>

TEST DIFF:
diff - - git a / . ci / jsoref - spellchecker / whitelist . words b / . ci / jsoref - spellchecker / whitelist . words 
 index 9ac64b5 . . fbdfab8 100644 
 - - - a / . ci / jsoref - spellchecker / whitelist . words 
 + + + b / . ci / jsoref - spellchecker / whitelist . words 
 @ @ - 897 , 6 + 897 , 8 @ @ Overriden 
 OVERRIDERS 
 packageannotation 
 packagedeclaration 
 + packagediffdirectory 
 + packageinfo 
 packagename 
 packagenamesloader 
 packageobjectfactory 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / coding / PackageDeclarationCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / coding / PackageDeclarationCheckTest . java 
 index a729bab . . 80827df 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / coding / PackageDeclarationCheckTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / coding / PackageDeclarationCheckTest . java 
 @ @ - 76 , 7 + 76 , 8 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { 
 " 1 : " + getCheckMessage ( MSG _ KEY _ MISMATCH ) , 
 } ; 
 
 - verify ( checkConfig , getPath ( " InputPackageDeclarationDiffDirectory . java " ) , expected ) ; 
 + verify ( checkConfig , 
 + getNonCompilablePath ( " InputPackageDeclarationDiffDirectory . java " ) , expected ) ; 
 } 
 
 @ Test 
 @ @ - 87 , 7 + 88 , 9 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { 
 " 1 : " + getCheckMessage ( MSG _ KEY _ MISMATCH ) , 
 } ; 
 
 - verify ( checkConfig , getPath ( " InputPackageDeclarationDiffDirectoryAtParent . java " ) , expected ) ; 
 + verify ( checkConfig , 
 + getNonCompilablePath ( " InputPackageDeclarationDiffDirectoryAtParent . java " ) , 
 + expected ) ; 
 } 
 
 @ Test 
 @ @ - 99 , 7 + 102 , 8 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { 
 } ; 
 
 verify ( checkConfig , 
 - getPath ( " InputPackageDeclarationDiffDirectoryAtSubpackage . java " ) , expected ) ; 
 + getNonCompilablePath ( " InputPackageDeclarationDiffDirectoryAtSubpackage . java " ) , 
 + expected ) ; 
 } 
 
 @ Test 
 @ @ - 108 , 7 + 112 , 8 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { 
 checkConfig . addAttribute ( " matchDirectoryStructure " , " false " ) ; 
 final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; 
 
 - verify ( checkConfig , getPath ( " InputPackageDeclarationDiffDirectory . java " ) , expected ) ; 
 + verify ( checkConfig , getNonCompilablePath ( " InputPackageDeclarationDiffDirectory . java " ) , 
 + expected ) ; 
 } 
 
 @ Test 
 @ @ - 117 , 7 + 122 , 9 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { 
 checkConfig . addAttribute ( " matchDirectoryStructure " , " false " ) ; 
 final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; 
 
 - verify ( checkConfig , getPath ( " InputPackageDeclarationDiffDirectoryAtParent . java " ) , expected ) ; 
 + verify ( checkConfig , 
 + getNonCompilablePath ( " InputPackageDeclarationDiffDirectoryAtParent . java " ) , 
 + expected ) ; 
 } 
 
 @ Test 
 @ @ - 127 , 7 + 134 , 8 @ @ public class PackageDeclarationCheckTest extends AbstractModuleTestSupport { 
 final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; 
 
 verify ( checkConfig , 
 - getPath ( " InputPackageDeclarationDiffDirectoryAtSubpackage . java " ) , expected ) ; 
 + getNonCompilablePath ( " InputPackageDeclarationDiffDirectoryAtSubpackage . java " ) , 
 + expected ) ; 
 } 
 
 @ Test 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / whitespace / EmptyLineSeparatorCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / whitespace / EmptyLineSeparatorCheckTest . java 
 index 1255127 . . 5892e3b 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / whitespace / EmptyLineSeparatorCheckTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / whitespace / EmptyLineSeparatorCheckTest . java 
 @ @ - 221 , 7 + 221 , 7 @ @ public class EmptyLineSeparatorCheckTest 
 final DefaultConfiguration checkConfig = createModuleConfig ( EmptyLineSeparatorCheck . class ) ; 
 final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; 
 verify ( checkConfig , 
 - getPath ( " package - info / test1 / package - info . java " ) , 
 + getPath ( " packageinfo / test1 / package - info . java " ) , 
 expected ) ; 
 } 
 
 @ @ - 230 , 7 + 230 , 7 @ @ public class EmptyLineSeparatorCheckTest 
 final DefaultConfiguration checkConfig = createModuleConfig ( EmptyLineSeparatorCheck . class ) ; 
 final String [ ] expected = CommonUtil . EMPTY _ STRING _ ARRAY ; 
 verify ( checkConfig , 
 - getPath ( " package - info / test2 / package - info . java " ) , 
 + getPath ( " packageinfo / test2 / package - info . java " ) , 
 expected ) ; 
 } 
 
 @ @ - 241 , 7 + 241 , 7 @ @ public class EmptyLineSeparatorCheckTest 
 " 3 : " + getCheckMessage ( MSG _ SHOULD _ BE _ SEPARATED , " package " ) , 
 } ; 
 verify ( checkConfig , 
 - getPath ( " package - info / test3 / package - info . java " ) , 
 + getPath ( " packageinfo / test3 / package - info . java " ) , 
 expected ) ; 
 } 
 
 @ @ - 252 , 7 + 252 , 7 @ @ public class EmptyLineSeparatorCheckTest 
 " 3 : " + getCheckMessage ( MSG _ SHOULD _ BE _ SEPARATED , " package " ) , 
 } ; 
 verify ( checkConfig , 
 - getPath ( " package - info / test4 / package - info . java " ) , 
 + getPath ( " packageinfo / test4 / package - info . java " ) , 
 expected ) ; 
 } 
 
 diff - - git a / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java 
 new file mode 100644 
 index 0000000 . . 2c1c799 
 - - - / dev / null 
 + + + b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java 
 @ @ - 0 , 0 + 1 , 8 @ @ 
 + package com . testing . packagediffdirectory ; 
 + 
 + public class InputPackageDeclarationDiffDirectory { 
 + public String value ; 
 + 
 + private void get ( ) { 
 + } 
 + } 
 diff - - git a / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java 
 new file mode 100644 
 index 0000000 . . d24baeb 
 - - - / dev / null 
 + + + b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java 
 @ @ - 0 , 0 + 1 , 8 @ @ 
 + package com . puppycrawl . tools . checkstyle . checks . coding ; 
 + 
 + public class InputPackageDeclarationDiffDirectoryAtParent { 
 + public String value ; 
 + 
 + private void get ( ) { 
 + } 
 + } 
 diff - - git a / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java 
 new file mode 100644 
 index 0000000 . . f89307f 
 - - - / dev / null 
 + + + b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java 
 @ @ - 0 , 0 + 1 , 8 @ @ 
 + package com . puppycrawl . tools . checkstyle . checks . coding . packagedeclaration . subpackage ; 
 + 
 + public class InputPackageDeclarationDiffDirectoryAtSubpackage { 
 + public String value ; 
 + 
 + private void get ( ) { 
 + } 
 + } 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java 
 deleted file mode 100644 
 index 2c1c799 . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectory . java 
 + + + / dev / null 
 @ @ - 1 , 8 + 0 , 0 @ @ 
 - package com . testing . packagediffdirectory ; 
 - 
 - public class InputPackageDeclarationDiffDirectory { 
 - public String value ; 
 - 
 - private void get ( ) { 
 - } 
 - } 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java 
 deleted file mode 100644 
 index d24baeb . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtParent . java 
 + + + / dev / null 
 @ @ - 1 , 8 + 0 , 0 @ @ 
 - package com . puppycrawl . tools . checkstyle . checks . coding ; 
 - 
 - public class InputPackageDeclarationDiffDirectoryAtParent { 
 - public String value ; 
 - 
 - private void get ( ) { 
 - } 
 - } 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java 
 deleted file mode 100644 
 index f89307f . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / coding / packagedeclaration / InputPackageDeclarationDiffDirectoryAtSubpackage . java 
 + + + / dev / null 
 @ @ - 1 , 8 + 0 , 0 @ @ 
 - package com . puppycrawl . tools . checkstyle . checks . coding . packagedeclaration . subpackage ; 
 - 
 - public class InputPackageDeclarationDiffDirectoryAtSubpackage { 
 - public String value ; 
 - 
 - private void get ( ) { 
 - } 
 - } 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test1 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test1 / package - info . java 
 deleted file mode 100644 
 index 35b79ba . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test1 / package - info . java 
 + + + / dev / null 
 @ @ - 1 , 5 + 0 , 0 @ @ 
 - / * OK : for test allowing to place annotation before PACKAGE _ DEF . * / 
 - @ Deprecated 
 - package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test1 ; 
 - 
 - import java . lang . Deprecated ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test2 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test2 / package - info . java 
 deleted file mode 100644 
 index a45fe8e . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test2 / package - info . java 
 + + + / dev / null 
 @ @ - 1 , 6 + 0 , 0 @ @ 
 - / * * OK : for test allowing to place javadoc before PACKAGE _ DEF . * / 
 - package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test2 ; 
 - 
 - / / that import is for doing check of PACKAGE _ DEF , 
 - / / because EmptyLineSeparatorCheck doesn ' t check last token 
 - import java . lang . System ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test3 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test3 / package - info . java 
 deleted file mode 100644 
 index 8e6001b . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test3 / package - info . java 
 + + + / dev / null 
 @ @ - 1 , 7 + 0 , 0 @ @ 
 - / * violation : for test that there ' s warning when block comment isn ' t 
 - separated from PACKAGE _ DEF by line . * / 
 - package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test3 ; 
 - 
 - / / that import is for doing check of PACKAGE _ DEF , 
 - / / because EmptyLineSeparatorCheck doesn ' t check last token 
 - import java . lang . System ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test4 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test4 / package - info . java 
 deleted file mode 100644 
 index 00e28d4 . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / package - info / test4 / package - info . java 
 + + + / dev / null 
 @ @ - 1 , 7 + 0 , 0 @ @ 
 - / / for test there ' s warning when single line comment isn ' t separated from PACKAGE _ DEF by line 
 - / / violation is expected after this line 
 - package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test4 ; 
 - 
 - / / that import is for doing check of PACKAGE _ DEF , 
 - / / because EmptyLineSeparatorCheck doesn ' t check last token 
 - import java . lang . System ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test1 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test1 / package - info . java 
 new file mode 100644 
 index 0000000 . . 35b79ba 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test1 / package - info . java 
 @ @ - 0 , 0 + 1 , 5 @ @ 
 + / * OK : for test allowing to place annotation before PACKAGE _ DEF . * / 
 + @ Deprecated 
 + package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test1 ; 
 + 
 + import java . lang . Deprecated ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test2 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test2 / package - info . java 
 new file mode 100644 
 index 0000000 . . a45fe8e 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test2 / package - info . java 
 @ @ - 0 , 0 + 1 , 6 @ @ 
 + / * * OK : for test allowing to place javadoc before PACKAGE _ DEF . * / 
 + package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test2 ; 
 + 
 + / / that import is for doing check of PACKAGE _ DEF , 
 + / / because EmptyLineSeparatorCheck doesn ' t check last token 
 + import java . lang . System ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test3 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test3 / package - info . java 
 new file mode 100644 
 index 0000000 . . 8e6001b 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test3 / package - info . java 
 @ @ - 0 , 0 + 1 , 7 @ @ 
 + / * violation : for test that there ' s warning when block comment isn ' t 
 + separated from PACKAGE _ DEF by line . * / 
 + package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test3 ; 
 + 
 + / / that import is for doing check of PACKAGE _ DEF , 
 + / / because EmptyLineSeparatorCheck doesn ' t check last token 
 + import java . lang . System ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test4 / package - info . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test4 / package - info . java 
 new file mode 100644 
 index 0000000 . . 00e28d4 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / whitespace / emptylineseparator / packageinfo / test4 / package - info . java 
 @ @ - 0 , 0 + 1 , 7 @ @ 
 + / / for test there ' s warning when single line comment isn ' t separated from PACKAGE _ DEF by line 
 + / / violation is expected after this line 
 + package com . puppycrawl . tools . checkstyle . checks . whitespace . emptylineseparator . packageinfo . test4 ; 
 + 
 + / / that import is for doing check of PACKAGE _ DEF , 
 + / / because EmptyLineSeparatorCheck doesn ' t check last token 
 + import java . lang . System ;

NEAREST DIFF:
diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / CommitValidationTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / CommitValidationTest . java 
 index 9af22a9 . . 2cdac81 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / CommitValidationTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / CommitValidationTest . java 
 @ @ - 137 , 17 + 137 , 17 @ @ public class CommitValidationTest { 
 } 
 
 private static List < RevCommit > getCommitsToCheck ( ) throws Exception { 
 - Repository repo = new FileRepositoryBuilder ( ) . findGitDir ( ) . build ( ) ; 
 - 
 - RevCommitsPair revCommitsPair = resolveRevCommitsPair ( repo ) ; 
 List < RevCommit > commits ; 
 - if ( COMMITS _ RESOLUTION _ MODE = = CommitsResolutionMode . BY _ COUNTER ) { 
 - commits = getCommitsByCounter ( revCommitsPair . getFirst ( ) ) ; 
 - commits . addAll ( getCommitsByCounter ( revCommitsPair . getSecond ( ) ) ) ; 
 - } 
 - else { 
 - commits = getCommitsByLastCommitAuthor ( revCommitsPair . getFirst ( ) ) ; 
 - commits . addAll ( getCommitsByLastCommitAuthor ( revCommitsPair . getSecond ( ) ) ) ; 
 + try ( Repository repo = new FileRepositoryBuilder ( ) . findGitDir ( ) . build ( ) ) { 
 + RevCommitsPair revCommitsPair = resolveRevCommitsPair ( repo ) ; 
 + if ( COMMITS _ RESOLUTION _ MODE = = CommitsResolutionMode . BY _ COUNTER ) { 
 + commits = getCommitsByCounter ( revCommitsPair . getFirst ( ) ) ; 
 + commits . addAll ( getCommitsByCounter ( revCommitsPair . getSecond ( ) ) ) ; 
 + } 
 + else { 
 + commits = getCommitsByLastCommitAuthor ( revCommitsPair . getFirst ( ) ) ; 
 + commits . addAll ( getCommitsByLastCommitAuthor ( revCommitsPair . getSecond ( ) ) ) ; 
 + } 
 } 
 return commits ; 
 } 
 @ @ - 165 , 12 + 165 , 10 @ @ public class CommitValidationTest { 
 
 private static RevCommitsPair resolveRevCommitsPair ( Repository repo ) { 
 RevCommitsPair revCommitIteratorPair ; 
 - try { 
 + 
 + try ( RevWalk revWalk = new RevWalk ( repo ) ) { 
 Iterator < RevCommit > first ; 
 Iterator < RevCommit > second ; 
 - 
 - RevWalk revWalk = new RevWalk ( repo ) ; 
 - 
 ObjectId headId = repo . resolve ( Constants . HEAD ) ; 
 RevCommit headCommit = revWalk . parseCommit ( headId ) ; 
 
 @ @ - 178 , 11 + 176 , 15 @ @ public class CommitValidationTest { 
 RevCommit firstParent = headCommit . getParent ( 0 ) ; 
 RevCommit secondParent = headCommit . getParent ( 1 ) ; 
 
 - first = new Git ( repo ) . log ( ) . add ( firstParent ) . call ( ) . iterator ( ) ; 
 - second = new Git ( repo ) . log ( ) . add ( secondParent ) . call ( ) . iterator ( ) ; 
 + try ( Git git = new Git ( repo ) ) { 
 + first = git . log ( ) . add ( firstParent ) . call ( ) . iterator ( ) ; 
 + second = git . log ( ) . add ( secondParent ) . call ( ) . iterator ( ) ; 
 + } 
 } 
 else { 
 - first = new Git ( repo ) . log ( ) . call ( ) . iterator ( ) ; 
 + try ( Git git = new Git ( repo ) ) { 
 + first = git . log ( ) . call ( ) . iterator ( ) ; 
 + } 
 second = Collections . emptyIterator ( ) ; 
 } 

