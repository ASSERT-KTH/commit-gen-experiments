BLEU SCORE: 0.026279617104084448

TEST MSG: Issue # 2661 : skip plugin execution from build phases that do not need this
GENERATED MSG: minor : formatting in traivis config

TEST DIFF (one line): diff - - git a / . travis . yml b / . travis . yml <nl> index 2726d36 . . 853bb9b 100644 <nl> - - - a / . travis . yml <nl> + + + b / . travis . yml <nl> @ @ - 14 , 7 + 14 , 7 @ @ matrix : <nl> # checkstyle ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> env : <nl> - - DESC = " checkstyle " <nl> + - DESC = " checkstyle and sevntu - checkstyle " <nl> - CMD = " mvn clean verify - DskipTests - DskipITs - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true " <nl> - COVERAGE _ CMD = " " <nl> <nl> @ @ - 36 , 8 + 36 , 9 @ @ matrix : <nl> env : <nl> - DESC = " site " <nl> - CMD1 = " mvn clean site - Dlinkcheck . skip = true - DskipTests - DskipITs " <nl> - - CMD2 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD = $ CMD1 $ CMD2 <nl> + - CMD2 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true " <nl> + - CMD3 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 <nl> - COVERAGE _ CMD = " " <nl> # assembly ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> @ @ - 67 , 13 + 68 , 14 @ @ matrix : <nl> env : <nl> - DESC = " NoErrorTest - Orekit " <nl> - CMD1 = " mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD2 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD3 = " & & git clone https : / / github . com / checkstyle / Orekit . git & & cd Orekit " <nl> - - CMD4 = " & & sed - i ' s / < orekit \ . checkstyle \ . version > 6 \ . 6 < / < orekit . checkstyle . version > " <nl> - - CMD5 = " $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) < / " <nl> - - CMD6 = " ' pom . xml " <nl> - - CMD7 = " & & mvn compile checkstyle : check " <nl> - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 <nl> + - CMD2 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD3 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD4 = " & & git clone https : / / github . com / checkstyle / Orekit . git & & cd Orekit " <nl> + - CMD5 = " & & sed - i ' s / < orekit \ . checkstyle \ . version > 6 \ . 6 < / < orekit . checkstyle . version > " <nl> + - CMD6 = " $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) < / " <nl> + - CMD7 = " ' pom . xml " <nl> + - CMD8 = " & & mvn compile checkstyle : check " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 <nl> - COVERAGE _ CMD = " " <nl> <nl> # NoExceptiontest - Checkstyle , sevntu - checkstyle ( oraclejdk8 ) <nl> @ @ - 86 , 10 + 88 , 11 @ @ matrix : <nl> - CMD4 = " & & sed - i ' s / # sevntu - checkstyle / sevntu - checkstyle / ' projects - for - travis . properties " <nl> - CMD5 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " <nl> - CMD6 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD7 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD8 = " & & cd contribution / checkstyle - tester " <nl> - - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 <nl> + - CMD7 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD8 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD9 = " & & cd contribution / checkstyle - tester " <nl> + - CMD10 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 $ CMD10 <nl> - COVERAGE _ CMD = " " <nl> # NoExceptiontest - Guava ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> @ @ - 100 , 10 + 103 , 11 @ @ matrix : <nl> - CMD3 = " & & sed - i ' s / # guava / guava / ' projects - for - travis . properties " <nl> - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " <nl> - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD7 = " & & cd contribution / checkstyle - tester " <nl> - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 <nl> + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD8 = " & & cd contribution / checkstyle - tester " <nl> + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 <nl> - COVERAGE _ CMD = " " <nl> # NoExceptionTest - Hibernate ORM ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> @ @ - 114 , 10 + 118 , 11 @ @ matrix : <nl> - CMD3 = " & & sed - i ' s / # hibernate - orm / hibernate - orm / ' projects - for - travis . properties " <nl> - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " <nl> - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD7 = " & & cd contribution / checkstyle - tester " <nl> - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 <nl> + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD8 = " & & cd contribution / checkstyle - tester " <nl> + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 <nl> - COVERAGE _ CMD = " " <nl> # NoExceptionTest - FindBugs ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> @ @ - 128 , 10 + 133 , 11 @ @ matrix : <nl> - CMD3 = " & & sed - i ' s / # findbugs / findbugs / ' projects - for - travis . properties " <nl> - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " <nl> - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD7 = " & & cd contribution / checkstyle - tester " <nl> - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 <nl> + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD8 = " & & cd contribution / checkstyle - tester " <nl> + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 <nl> - COVERAGE _ CMD = " " <nl> # NoExceptionTest - Pmd , elasticsearch , lombok - ast ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> @ @ - 144 , 10 + 150 , 11 @ @ matrix : <nl> - CMD5 = " & & sed - i ' s / # lombok - ast / lombok - ast / ' projects - for - travis . properties " <nl> - CMD6 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " <nl> - CMD7 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD8 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD9 = " & & cd contribution / checkstyle - tester " <nl> - - CMD10 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 $ CMD10 <nl> + - CMD8 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD9 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD10 = " & & cd contribution / checkstyle - tester " <nl> + - CMD11 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 $ CMD10 $ CMD11 <nl> - COVERAGE _ CMD = " " <nl> # NoExceptionTest - RxJava , java - design - patterns , MaterialDesignLibrary , apache - ant , apache - jsecurity , android - launcher ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> @ @ - 163 , 10 + 170 , 11 @ @ matrix : <nl> - CMD08 = " & & sed - i ' s / # android - launcher / android - launcher / ' projects - for - travis . properties " <nl> - CMD09 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " <nl> - CMD10 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD11 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD12 = " & & cd contribution / checkstyle - tester " <nl> - - CMD13 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> - - CMD = $ CMD01 $ CMD02 $ CMD03 $ CMD04 $ CMD05 $ CMD06 $ CMD07 $ CMD08 $ CMD09 $ CMD10 $ CMD11 $ CMD12 $ CMD13 <nl> + - CMD11 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD12 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD13 = " & & cd contribution / checkstyle - tester " <nl> + - CMD14 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> + - CMD = $ CMD01 $ CMD02 $ CMD03 $ CMD04 $ CMD05 $ CMD06 $ CMD07 $ CMD08 $ CMD09 $ CMD10 $ CMD11 $ CMD12 $ CMD13 $ CMD14 <nl> - COVERAGE _ CMD = " " <nl> # NoExceptionTest - Spring ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> @ @ - 177 , 10 + 185 , 11 @ @ matrix : <nl> - CMD3 = " & & sed - i ' s / # spring - framework / spring - framework / ' projects - for - travis . properties " <nl> - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " <nl> - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD7 = " & & cd contribution / checkstyle - tester " <nl> - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 <nl> + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD8 = " & & cd contribution / checkstyle - tester " <nl> + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 <nl> - COVERAGE _ CMD = " " <nl> # NoExceptionTest - Hbase ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> @ @ - 191 , 18 + 200 , 19 @ @ matrix : <nl> - CMD3 = " & & sed - i ' s / # Hbase / Hbase / ' projects - for - travis . properties " <nl> - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " <nl> - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " <nl> - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " <nl> - - CMD7 = " & & cd contribution / checkstyle - tester " <nl> - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 <nl> + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " <nl> + - CMD8 = " & & cd contribution / checkstyle - tester " <nl> + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " <nl> + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 <nl> - COVERAGE _ CMD = " " <nl> # release dry run ( oraclejdk8 ) <nl> - jdk : oraclejdk8 <nl> env : <nl> - DESC = " release dry run " <nl> - CMD1 = " mvn release : prepare - DdryRun = true - - batch - mode - Darguments = ' - DskipTests - DskipITs " <nl> - - CMD2 = " - Dcobertura . skip = true - Dpmd . skip = true - Dfindbugs . skip = true " <nl> - - CMD3 = " - Dcheckstyle . ant . skip = true - Dgpg . skip = true ' " <nl> + - CMD2 = " - Dcobertura . skip = true - Dpmd . skip = true - Dfindbugs . skip = true " <nl> + - CMD3 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true - Dgpg . skip = true ' " <nl> - CMD = $ CMD1 $ CMD2 $ CMD3 <nl> - COVERAGE _ CMD = " " <nl> # unit tests in German locale ( oraclejdk8 ) <nl> @ @ - 216 , 19 + 226 , 19 @ @ matrix : <nl> # checkstyle ( openjdk7 , oraclejdk7 ) <nl> - jdk : openjdk7 <nl> env : <nl> - - DESC = " checkstyle " <nl> + - DESC = " checkstyle and sevntu - checkstyle " <nl> - CMD = " mvn clean verify - DskipTests - DskipITs - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true " <nl> - COVERAGE _ CMD = " " <nl> - jdk : oraclejdk7 <nl> env : <nl> - - DESC = " checkstyle " <nl> + - DESC = " checkstyle and sevntu - checkstyle " <nl> - CMD = " mvn clean verify - DskipTests - DskipITs - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true " <nl> - COVERAGE _ CMD = " " <nl> <nl> - # MacOS verify <nl> + # MacOS verify ( till cache is not working , we can not do verify ) <nl> - os : osx <nl> env : <nl> - - DESC = " MacOS verify " <nl> + - DESC = " MacOS tests only " <nl> - CMD = " export JAVA _ HOME = $ ( / usr / libexec / java _ home ) & & mvn clean integration - test failsafe : verify " <nl> - COVERAGE _ CMD = " " <nl> <nl> @ @ - 262 , 7 + 272 , 7 @ @ after _ success : <nl> then <nl> mvn - s config / deploy - settings . xml deploy \ <nl> - DskipTests - DskipITs - Dpmd . skip = true - Dfindbugs . skip = true \ <nl> - - Dcobertura . skip = true - Dcheckstyle . ant . skip = true ; <nl> + - Dcobertura . skip = true - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true ; <nl> fi <nl> <nl> cache : <nl> diff - - git a / pom . xml b / pom . xml <nl> index edc60d6 . . 5abd5c8 100644 <nl> - - - a / pom . xml <nl> + + + b / pom . xml <nl> @ @ - 1213 , 6 + 1213 , 7 @ @ <nl> < skipTests > true < / skipTests > <nl> < linkcheck . skip > true < / linkcheck . skip > <nl> < maven . javadoc . skip > true < / maven . javadoc . skip > <nl> + < checkstyle . skip > true < / checkstyle . skip > <nl> < pmd . skip > true < / pmd . skip > <nl> < findbugs . skip > true < / findbugs . skip > <nl> < checkstyle . ant . skip > true < / checkstyle . ant . skip >
NEAREST DIFF (one line): diff - - git a / pom . xml b / pom . xml <nl> index ad0fa0a . . 3bbdba7 100644 <nl> - - - a / pom . xml <nl> + + + b / pom . xml <nl> @ @ - 1162 , 7 + 1162 , 6 @ @ <nl> < regex > < pattern > . * . checks . indentation . ImportHandler < / pattern > < branchRate > 50 < / branchRate > < lineRate > 87 < / lineRate > < / regex > <nl> < regex > < pattern > . * . checks . indentation . IndentationCheck < / pattern > < branchRate > 100 < / branchRate > < lineRate > 93 < / lineRate > < / regex > <nl> < regex > < pattern > . * . checks . indentation . LineWrappingHandler < / pattern > < branchRate > 87 < / branchRate > < lineRate > 95 < / lineRate > < / regex > <nl> - < regex > < pattern > . * . checks . indentation . MethodCallHandler < / pattern > < branchRate > 63 < / branchRate > < lineRate > 87 < / lineRate > < / regex > <nl> < regex > < pattern > . * . checks . indentation . MethodCallLineWrapHandler < / pattern > < branchRate > 0 < / branchRate > < lineRate > 0 < / lineRate > < / regex > <nl> < regex > < pattern > . * . checks . indentation . MethodDefHandler < / pattern > < branchRate > 87 < / branchRate > < lineRate > 100 < / lineRate > < / regex > <nl> < regex > < pattern > . * . checks . indentation . NewHandler < / pattern > < branchRate > 83 < / branchRate > < lineRate > 77 < / lineRate > < / regex > <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / MethodCallHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / MethodCallHandler . java <nl> index a368e2a . . 5dfce2d 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / MethodCallHandler . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / MethodCallHandler . java <nl> @ @ - 38 , 11 + 38 , 7 @ @ public class MethodCallHandler extends AbstractExpressionHandler { <nl> * / <nl> public MethodCallHandler ( IndentationCheck indentCheck , <nl> DetailAST ast , AbstractExpressionHandler parent ) { <nl> - super ( indentCheck , <nl> - ast . getType ( ) = = TokenTypes . METHOD _ CALL <nl> - ? " method call " : " ctor call " , <nl> - ast , <nl> - parent ) ; <nl> + super ( indentCheck , " method call " , ast , parent ) ; <nl> } <nl> <nl> @ Override <nl> @ @ - 52 , 30 + 48 , 17 @ @ public class MethodCallHandler extends AbstractExpressionHandler { <nl> if ( getParent ( ) instanceof MethodCallHandler ) { <nl> final MethodCallHandler container = <nl> ( MethodCallHandler ) getParent ( ) ; <nl> - if ( container ! = null ) { <nl> - if ( areOnSameLine ( container . getMainAst ( ) , getMainAst ( ) ) ) { <nl> - return container . getLevel ( ) ; <nl> - } <nl> - <nl> - / / we should increase indentation only if this is the first <nl> - / / chained method call which was moved to the next line <nl> - if ( isChainedMethodCallWrapped ( ) ) { <nl> - return container . getLevel ( ) ; <nl> - } <nl> - else { <nl> - return new IndentLevel ( container . getLevel ( ) , getBasicOffset ( ) ) ; <nl> - } <nl> + if ( areOnSameLine ( container . getMainAst ( ) , getMainAst ( ) ) ) { <nl> + return container . getLevel ( ) ; <nl> } <nl> - <nl> - / / if we get here , we are the child of the left hand side ( name <nl> - / / side ) of a method call with no " containing " call , use <nl> - / / the first non - method call parent <nl> - <nl> - AbstractExpressionHandler p = getParent ( ) ; <nl> - while ( p instanceof MethodCallHandler ) { <nl> - p = p . getParent ( ) ; <nl> + / / we should increase indentation only if this is the first <nl> + / / chained method call which was moved to the next line <nl> + if ( isChainedMethodCallWrapped ( ) ) { <nl> + return container . getLevel ( ) ; <nl> + } <nl> + else { <nl> + return new IndentLevel ( container . getLevel ( ) , getBasicOffset ( ) ) ; <nl> } <nl> - return p . suggestedChildLevel ( this ) ; <nl> } <nl> <nl> / / if our expression isn ' t first on the line , just use the start <nl> @ @ - 100 , 15 + 83 , 12 @ @ public class MethodCallHandler extends AbstractExpressionHandler { <nl> final DetailAST dot = main . getFirstChild ( ) ; <nl> final DetailAST target = dot . getFirstChild ( ) ; <nl> <nl> - if ( dot . getType ( ) = = TokenTypes . DOT <nl> - & & target . getType ( ) = = TokenTypes . METHOD _ CALL ) { <nl> - final DetailAST dot1 = target . getFirstChild ( ) ; <nl> - final DetailAST target1 = dot1 . getFirstChild ( ) ; <nl> + final DetailAST dot1 = target . getFirstChild ( ) ; <nl> + final DetailAST target1 = dot1 . getFirstChild ( ) ; <nl> <nl> - if ( dot1 . getType ( ) = = TokenTypes . DOT <nl> - & & target1 . getType ( ) = = TokenTypes . METHOD _ CALL ) { <nl> - result = true ; <nl> - } <nl> + if ( dot1 . getType ( ) = = TokenTypes . DOT <nl> + & & target1 . getType ( ) = = TokenTypes . METHOD _ CALL ) { <nl> + result = true ; <nl> } <nl> return result ; <nl> } <nl> @ @ - 126 , 14 + 106 , 9 @ @ public class MethodCallHandler extends AbstractExpressionHandler { <nl> / / call name <nl> <nl> DetailAST astNode = ast . getFirstChild ( ) ; <nl> - while ( astNode ! = null & & astNode . getType ( ) = = TokenTypes . DOT ) { <nl> + while ( astNode . getType ( ) = = TokenTypes . DOT ) { <nl> astNode = astNode . getFirstChild ( ) ; <nl> } <nl> - <nl> - if ( astNode = = null ) { <nl> - astNode = ast ; <nl> - } <nl> - <nl> return astNode ; <nl> } <nl> <nl> @ @ - 157 , 8 + 132 , 7 @ @ public class MethodCallHandler extends AbstractExpressionHandler { <nl> @ Override <nl> public void checkIndentation ( ) { <nl> final DetailAST exprNode = getMainAst ( ) . getParent ( ) ; <nl> - if ( exprNode . getParent ( ) . getType ( ) ! = TokenTypes . LCURLY <nl> - & & exprNode . getParent ( ) . getType ( ) ! = TokenTypes . SLIST ) { <nl> + if ( exprNode . getParent ( ) . getType ( ) ! = TokenTypes . SLIST ) { <nl> return ; <nl> } <nl> final DetailAST methodName = getMainAst ( ) . getFirstChild ( ) ; <nl> @ @ - 197 , 13 + 171 , 6 @ @ public class MethodCallHandler extends AbstractExpressionHandler { <nl> * method calls are chained returns right paren for last call . <nl> * / <nl> private static DetailAST getMethodCallLastNode ( DetailAST firstNode ) { <nl> - DetailAST lastNode ; <nl> - if ( firstNode . getNextSibling ( ) = = null ) { <nl> - lastNode = firstNode . getLastChild ( ) ; <nl> - } <nl> - else { <nl> - lastNode = firstNode . getNextSibling ( ) ; <nl> - } <nl> - return lastNode ; <nl> + return firstNode . getLastChild ( ) ; <nl> } <nl> } <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java <nl> index 6e81f0c . . 0cb3285 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java <nl> @ @ - 1471 , 6 + 1471 , 27 @ @ public class IndentationCheckTest extends BaseCheckTestSupport { <nl> } <nl> <nl> @ Test <nl> + public void testAnonymousClassInMethod ( ) throws Exception { <nl> + final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; <nl> + checkConfig . addAttribute ( " tabWidth " , " 8 " ) ; <nl> + checkConfig . addAttribute ( " basicOffset " , " 2 " ) ; <nl> + checkConfig . addAttribute ( " braceAdjustment " , " 0 " ) ; <nl> + checkConfig . addAttribute ( " caseIndent " , " 2 " ) ; <nl> + checkConfig . addAttribute ( " lineWrappingIndentation " , " 4 " ) ; <nl> + checkConfig . addAttribute ( " throwsIndent " , " 4 " ) ; <nl> + checkConfig . addAttribute ( " arrayInitIndent " , " 2 " ) ; <nl> + final String [ ] expected = { <nl> + " 19 : " + getCheckMessage ( MSG _ ERROR , " method def modifier " , 8 , 2 ) , <nl> + " 20 : " + getCheckMessage ( MSG _ CHILD _ ERROR , " method def " , 16 , 4 ) , <nl> + " 21 : " + getCheckMessage ( MSG _ ERROR _ MULTI , " method def modifier " , 24 , " 18 , 20 , 22 " ) , <nl> + " 23 : " + getCheckMessage ( MSG _ CHILD _ ERROR _ MULTI , " method def " , 32 , " 20 , 22 , 24 " ) , <nl> + " 24 : " + getCheckMessage ( MSG _ ERROR _ MULTI , " method def rcurly " , 24 , " 18 , 20 , 22 " ) , <nl> + " 26 : " + getCheckMessage ( MSG _ ERROR , " method def rcurly " , 8 , 2 ) , <nl> + } ; <nl> + verifyWarns ( checkConfig , getPath ( " indentation / InputAnonymousClassInMethod . java " ) , expected ) ; <nl> + } <nl> + <nl> + @ Test <nl> public void testAnnotationDefinition ( ) throws Exception { <nl> final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; <nl> checkConfig . addAttribute ( " tabWidth " , " 4 " ) ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputAnonymousClassInMethod . java b / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputAnonymousClassInMethod . java <nl> new file mode 100644 <nl> index 0000000 . . 44514f1 <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputAnonymousClassInMethod . java <nl> @ @ - 0 , 0 + 1 , 27 @ @ <nl> + package com . puppycrawl . tools . checkstyle . indentation ; / / indent : 0 exp : 0 <nl> + <nl> + import java . io . File ; / / indent : 0 exp : 0 <nl> + import java . io . FileFilter ; / / indent : 0 exp : 0 <nl> + <nl> + / * * / / indent : 0 exp : 0 <nl> + * This test - input is intended to be checked using following configuration : / / indent : 1 exp : 1 <nl> + * / / indent : 1 exp : 1 <nl> + * arrayInitIndent = 2 / / indent : 1 exp : 1 <nl> + * basicOffset = 2 / / indent : 1 exp : 1 <nl> + * braceAdjustment = 0 / / indent : 1 exp : 1 <nl> + * caseIndent = 2 / / indent : 1 exp : 1 <nl> + * forceStrictCondition = false / / indent : 1 exp : 1 <nl> + * lineWrappingIndentation = 4 / / indent : 1 exp : 1 <nl> + * tabWidth = 8 / / indent : 1 exp : 1 <nl> + * throwsIndent = 4 / / indent : 1 exp : 1 <nl> + * / / / indent : 1 exp : 1 <nl> + public class InputAnonymousClassInMethod { / / indent : 0 exp : 0 <nl> + 	 private void walkDir ( File dir , FileFilter fileFilter ) { / / indent : 8 exp : 2 warn <nl> + 	 	 walkDir ( dir , new FileFilter ( ) { / / indent : 16 exp : 4 warn <nl> + 	 	 	 @ Override / / indent : 24 exp : 8 warn <nl> + 	 	 	 public boolean accept ( File path ) { / / indent : 24 exp : 24 <nl> + 	 	 	 	 return ( path . isDirectory ( ) ) ; / / indent : 32 exp : 12 warn <nl> + 	 	 	 } / / indent : 24 exp : 8 warn <nl> + 	 	 } ) ; / / indent : 16 exp : 16 <nl> + 	 } / / indent : 8 exp : 2 warn <nl> + } / / indent : 0 exp : 0 <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputMethodCallLineWrap . java b / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputMethodCallLineWrap . java <nl> index d9f64e7 . . 12ba8f8 100644 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputMethodCallLineWrap . java <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputMethodCallLineWrap . java <nl> @ @ - 52 , 4 + 52 , 14 @ @ public class InputMethodCallLineWrap { / / indent : 0 exp : 0 <nl> ) ; / / indent : 14 exp : 16 warn <nl> } / / indent : 8 exp : 8 <nl> } ; / / indent : 4 exp : 4 <nl> + <nl> + void chaining ( ) { / / indent : 4 exp : 4 <nl> + toString ( ) / / indent : 8 exp : 8 <nl> + . getClass ( ) ; / / indent : 16 exp : 16 <nl> + toString ( ) . contains ( / / indent : 8 exp : 8 <nl> + new String ( / / indent : 12 exp : 12 <nl> + " a " / / indent : 20 exp : 20 <nl> + ) / / indent : 12 exp : 12 <nl> + ) ; / / indent : 8 exp : 8 <nl> + } / / indent : 4 exp : 4 <nl> } / / indent : 0 exp : 0

TEST DIFF:
diff - - git a / . travis . yml b / . travis . yml 
 index 2726d36 . . 853bb9b 100644 
 - - - a / . travis . yml 
 + + + b / . travis . yml 
 @ @ - 14 , 7 + 14 , 7 @ @ matrix : 
 # checkstyle ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 env : 
 - - DESC = " checkstyle " 
 + - DESC = " checkstyle and sevntu - checkstyle " 
 - CMD = " mvn clean verify - DskipTests - DskipITs - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true " 
 - COVERAGE _ CMD = " " 
 
 @ @ - 36 , 8 + 36 , 9 @ @ matrix : 
 env : 
 - DESC = " site " 
 - CMD1 = " mvn clean site - Dlinkcheck . skip = true - DskipTests - DskipITs " 
 - - CMD2 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD = $ CMD1 $ CMD2 
 + - CMD2 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true " 
 + - CMD3 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 
 - COVERAGE _ CMD = " " 
 # assembly ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 @ @ - 67 , 13 + 68 , 14 @ @ matrix : 
 env : 
 - DESC = " NoErrorTest - Orekit " 
 - CMD1 = " mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD2 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD3 = " & & git clone https : / / github . com / checkstyle / Orekit . git & & cd Orekit " 
 - - CMD4 = " & & sed - i ' s / < orekit \ . checkstyle \ . version > 6 \ . 6 < / < orekit . checkstyle . version > " 
 - - CMD5 = " $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) < / " 
 - - CMD6 = " ' pom . xml " 
 - - CMD7 = " & & mvn compile checkstyle : check " 
 - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 
 + - CMD2 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD3 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD4 = " & & git clone https : / / github . com / checkstyle / Orekit . git & & cd Orekit " 
 + - CMD5 = " & & sed - i ' s / < orekit \ . checkstyle \ . version > 6 \ . 6 < / < orekit . checkstyle . version > " 
 + - CMD6 = " $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) < / " 
 + - CMD7 = " ' pom . xml " 
 + - CMD8 = " & & mvn compile checkstyle : check " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 
 - COVERAGE _ CMD = " " 
 
 # NoExceptiontest - Checkstyle , sevntu - checkstyle ( oraclejdk8 ) 
 @ @ - 86 , 10 + 88 , 11 @ @ matrix : 
 - CMD4 = " & & sed - i ' s / # sevntu - checkstyle / sevntu - checkstyle / ' projects - for - travis . properties " 
 - CMD5 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " 
 - CMD6 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD7 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD8 = " & & cd contribution / checkstyle - tester " 
 - - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 
 + - CMD7 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD8 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD9 = " & & cd contribution / checkstyle - tester " 
 + - CMD10 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 $ CMD10 
 - COVERAGE _ CMD = " " 
 # NoExceptiontest - Guava ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 @ @ - 100 , 10 + 103 , 11 @ @ matrix : 
 - CMD3 = " & & sed - i ' s / # guava / guava / ' projects - for - travis . properties " 
 - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " 
 - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD7 = " & & cd contribution / checkstyle - tester " 
 - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 
 + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD8 = " & & cd contribution / checkstyle - tester " 
 + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 
 - COVERAGE _ CMD = " " 
 # NoExceptionTest - Hibernate ORM ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 @ @ - 114 , 10 + 118 , 11 @ @ matrix : 
 - CMD3 = " & & sed - i ' s / # hibernate - orm / hibernate - orm / ' projects - for - travis . properties " 
 - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " 
 - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD7 = " & & cd contribution / checkstyle - tester " 
 - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 
 + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD8 = " & & cd contribution / checkstyle - tester " 
 + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 
 - COVERAGE _ CMD = " " 
 # NoExceptionTest - FindBugs ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 @ @ - 128 , 10 + 133 , 11 @ @ matrix : 
 - CMD3 = " & & sed - i ' s / # findbugs / findbugs / ' projects - for - travis . properties " 
 - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " 
 - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD7 = " & & cd contribution / checkstyle - tester " 
 - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 
 + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD8 = " & & cd contribution / checkstyle - tester " 
 + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 
 - COVERAGE _ CMD = " " 
 # NoExceptionTest - Pmd , elasticsearch , lombok - ast ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 @ @ - 144 , 10 + 150 , 11 @ @ matrix : 
 - CMD5 = " & & sed - i ' s / # lombok - ast / lombok - ast / ' projects - for - travis . properties " 
 - CMD6 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " 
 - CMD7 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD8 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD9 = " & & cd contribution / checkstyle - tester " 
 - - CMD10 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 $ CMD10 
 + - CMD8 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD9 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD10 = " & & cd contribution / checkstyle - tester " 
 + - CMD11 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 $ CMD10 $ CMD11 
 - COVERAGE _ CMD = " " 
 # NoExceptionTest - RxJava , java - design - patterns , MaterialDesignLibrary , apache - ant , apache - jsecurity , android - launcher ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 @ @ - 163 , 10 + 170 , 11 @ @ matrix : 
 - CMD08 = " & & sed - i ' s / # android - launcher / android - launcher / ' projects - for - travis . properties " 
 - CMD09 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " 
 - CMD10 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD11 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD12 = " & & cd contribution / checkstyle - tester " 
 - - CMD13 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 - - CMD = $ CMD01 $ CMD02 $ CMD03 $ CMD04 $ CMD05 $ CMD06 $ CMD07 $ CMD08 $ CMD09 $ CMD10 $ CMD11 $ CMD12 $ CMD13 
 + - CMD11 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD12 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD13 = " & & cd contribution / checkstyle - tester " 
 + - CMD14 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 + - CMD = $ CMD01 $ CMD02 $ CMD03 $ CMD04 $ CMD05 $ CMD06 $ CMD07 $ CMD08 $ CMD09 $ CMD10 $ CMD11 $ CMD12 $ CMD13 $ CMD14 
 - COVERAGE _ CMD = " " 
 # NoExceptionTest - Spring ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 @ @ - 177 , 10 + 185 , 11 @ @ matrix : 
 - CMD3 = " & & sed - i ' s / # spring - framework / spring - framework / ' projects - for - travis . properties " 
 - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " 
 - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD7 = " & & cd contribution / checkstyle - tester " 
 - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 
 + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD8 = " & & cd contribution / checkstyle - tester " 
 + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 
 - COVERAGE _ CMD = " " 
 # NoExceptionTest - Hbase ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 @ @ - 191 , 18 + 200 , 19 @ @ matrix : 
 - CMD3 = " & & sed - i ' s / # Hbase / Hbase / ' projects - for - travis . properties " 
 - CMD4 = " & & sed - i ' s / projects - to - test - on . properties / projects - for - travis . properties / ' launch . sh " 
 - CMD5 = " & & cd . . / . . / & & mvn clean install - DskipTests - DskipITs - Dcobertura . skip = true " 
 - - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true - Dcheckstyle . ant . skip = true " 
 - - CMD7 = " & & cd contribution / checkstyle - tester " 
 - - CMD8 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 - - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 
 + - CMD6 = " - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD7 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true " 
 + - CMD8 = " & & cd contribution / checkstyle - tester " 
 + - CMD9 = " & & . / launch . sh - Dcheckstyle . config . location = checks - nonjavadoc - error . xml " 
 + - CMD = $ CMD1 $ CMD2 $ CMD3 $ CMD4 $ CMD5 $ CMD6 $ CMD7 $ CMD8 $ CMD9 
 - COVERAGE _ CMD = " " 
 # release dry run ( oraclejdk8 ) 
 - jdk : oraclejdk8 
 env : 
 - DESC = " release dry run " 
 - CMD1 = " mvn release : prepare - DdryRun = true - - batch - mode - Darguments = ' - DskipTests - DskipITs " 
 - - CMD2 = " - Dcobertura . skip = true - Dpmd . skip = true - Dfindbugs . skip = true " 
 - - CMD3 = " - Dcheckstyle . ant . skip = true - Dgpg . skip = true ' " 
 + - CMD2 = " - Dcobertura . skip = true - Dpmd . skip = true - Dfindbugs . skip = true " 
 + - CMD3 = " - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true - Dgpg . skip = true ' " 
 - CMD = $ CMD1 $ CMD2 $ CMD3 
 - COVERAGE _ CMD = " " 
 # unit tests in German locale ( oraclejdk8 ) 
 @ @ - 216 , 19 + 226 , 19 @ @ matrix : 
 # checkstyle ( openjdk7 , oraclejdk7 ) 
 - jdk : openjdk7 
 env : 
 - - DESC = " checkstyle " 
 + - DESC = " checkstyle and sevntu - checkstyle " 
 - CMD = " mvn clean verify - DskipTests - DskipITs - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true " 
 - COVERAGE _ CMD = " " 
 - jdk : oraclejdk7 
 env : 
 - - DESC = " checkstyle " 
 + - DESC = " checkstyle and sevntu - checkstyle " 
 - CMD = " mvn clean verify - DskipTests - DskipITs - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true " 
 - COVERAGE _ CMD = " " 
 
 - # MacOS verify 
 + # MacOS verify ( till cache is not working , we can not do verify ) 
 - os : osx 
 env : 
 - - DESC = " MacOS verify " 
 + - DESC = " MacOS tests only " 
 - CMD = " export JAVA _ HOME = $ ( / usr / libexec / java _ home ) & & mvn clean integration - test failsafe : verify " 
 - COVERAGE _ CMD = " " 
 
 @ @ - 262 , 7 + 272 , 7 @ @ after _ success : 
 then 
 mvn - s config / deploy - settings . xml deploy \ 
 - DskipTests - DskipITs - Dpmd . skip = true - Dfindbugs . skip = true \ 
 - - Dcobertura . skip = true - Dcheckstyle . ant . skip = true ; 
 + - Dcobertura . skip = true - Dcheckstyle . ant . skip = true - Dcheckstyle . skip = true ; 
 fi 
 
 cache : 
 diff - - git a / pom . xml b / pom . xml 
 index edc60d6 . . 5abd5c8 100644 
 - - - a / pom . xml 
 + + + b / pom . xml 
 @ @ - 1213 , 6 + 1213 , 7 @ @ 
 < skipTests > true < / skipTests > 
 < linkcheck . skip > true < / linkcheck . skip > 
 < maven . javadoc . skip > true < / maven . javadoc . skip > 
 + < checkstyle . skip > true < / checkstyle . skip > 
 < pmd . skip > true < / pmd . skip > 
 < findbugs . skip > true < / findbugs . skip > 
 < checkstyle . ant . skip > true < / checkstyle . ant . skip >

NEAREST DIFF:
diff - - git a / pom . xml b / pom . xml 
 index ad0fa0a . . 3bbdba7 100644 
 - - - a / pom . xml 
 + + + b / pom . xml 
 @ @ - 1162 , 7 + 1162 , 6 @ @ 
 < regex > < pattern > . * . checks . indentation . ImportHandler < / pattern > < branchRate > 50 < / branchRate > < lineRate > 87 < / lineRate > < / regex > 
 < regex > < pattern > . * . checks . indentation . IndentationCheck < / pattern > < branchRate > 100 < / branchRate > < lineRate > 93 < / lineRate > < / regex > 
 < regex > < pattern > . * . checks . indentation . LineWrappingHandler < / pattern > < branchRate > 87 < / branchRate > < lineRate > 95 < / lineRate > < / regex > 
 - < regex > < pattern > . * . checks . indentation . MethodCallHandler < / pattern > < branchRate > 63 < / branchRate > < lineRate > 87 < / lineRate > < / regex > 
 < regex > < pattern > . * . checks . indentation . MethodCallLineWrapHandler < / pattern > < branchRate > 0 < / branchRate > < lineRate > 0 < / lineRate > < / regex > 
 < regex > < pattern > . * . checks . indentation . MethodDefHandler < / pattern > < branchRate > 87 < / branchRate > < lineRate > 100 < / lineRate > < / regex > 
 < regex > < pattern > . * . checks . indentation . NewHandler < / pattern > < branchRate > 83 < / branchRate > < lineRate > 77 < / lineRate > < / regex > 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / MethodCallHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / MethodCallHandler . java 
 index a368e2a . . 5dfce2d 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / MethodCallHandler . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / MethodCallHandler . java 
 @ @ - 38 , 11 + 38 , 7 @ @ public class MethodCallHandler extends AbstractExpressionHandler { 
 * / 
 public MethodCallHandler ( IndentationCheck indentCheck , 
 DetailAST ast , AbstractExpressionHandler parent ) { 
 - super ( indentCheck , 
 - ast . getType ( ) = = TokenTypes . METHOD _ CALL 
 - ? " method call " : " ctor call " , 
 - ast , 
 - parent ) ; 
 + super ( indentCheck , " method call " , ast , parent ) ; 
 } 
 
 @ Override 
 @ @ - 52 , 30 + 48 , 17 @ @ public class MethodCallHandler extends AbstractExpressionHandler { 
 if ( getParent ( ) instanceof MethodCallHandler ) { 
 final MethodCallHandler container = 
 ( MethodCallHandler ) getParent ( ) ; 
 - if ( container ! = null ) { 
 - if ( areOnSameLine ( container . getMainAst ( ) , getMainAst ( ) ) ) { 
 - return container . getLevel ( ) ; 
 - } 
 - 
 - / / we should increase indentation only if this is the first 
 - / / chained method call which was moved to the next line 
 - if ( isChainedMethodCallWrapped ( ) ) { 
 - return container . getLevel ( ) ; 
 - } 
 - else { 
 - return new IndentLevel ( container . getLevel ( ) , getBasicOffset ( ) ) ; 
 - } 
 + if ( areOnSameLine ( container . getMainAst ( ) , getMainAst ( ) ) ) { 
 + return container . getLevel ( ) ; 
 } 
 - 
 - / / if we get here , we are the child of the left hand side ( name 
 - / / side ) of a method call with no " containing " call , use 
 - / / the first non - method call parent 
 - 
 - AbstractExpressionHandler p = getParent ( ) ; 
 - while ( p instanceof MethodCallHandler ) { 
 - p = p . getParent ( ) ; 
 + / / we should increase indentation only if this is the first 
 + / / chained method call which was moved to the next line 
 + if ( isChainedMethodCallWrapped ( ) ) { 
 + return container . getLevel ( ) ; 
 + } 
 + else { 
 + return new IndentLevel ( container . getLevel ( ) , getBasicOffset ( ) ) ; 
 } 
 - return p . suggestedChildLevel ( this ) ; 
 } 
 
 / / if our expression isn ' t first on the line , just use the start 
 @ @ - 100 , 15 + 83 , 12 @ @ public class MethodCallHandler extends AbstractExpressionHandler { 
 final DetailAST dot = main . getFirstChild ( ) ; 
 final DetailAST target = dot . getFirstChild ( ) ; 
 
 - if ( dot . getType ( ) = = TokenTypes . DOT 
 - & & target . getType ( ) = = TokenTypes . METHOD _ CALL ) { 
 - final DetailAST dot1 = target . getFirstChild ( ) ; 
 - final DetailAST target1 = dot1 . getFirstChild ( ) ; 
 + final DetailAST dot1 = target . getFirstChild ( ) ; 
 + final DetailAST target1 = dot1 . getFirstChild ( ) ; 
 
 - if ( dot1 . getType ( ) = = TokenTypes . DOT 
 - & & target1 . getType ( ) = = TokenTypes . METHOD _ CALL ) { 
 - result = true ; 
 - } 
 + if ( dot1 . getType ( ) = = TokenTypes . DOT 
 + & & target1 . getType ( ) = = TokenTypes . METHOD _ CALL ) { 
 + result = true ; 
 } 
 return result ; 
 } 
 @ @ - 126 , 14 + 106 , 9 @ @ public class MethodCallHandler extends AbstractExpressionHandler { 
 / / call name 
 
 DetailAST astNode = ast . getFirstChild ( ) ; 
 - while ( astNode ! = null & & astNode . getType ( ) = = TokenTypes . DOT ) { 
 + while ( astNode . getType ( ) = = TokenTypes . DOT ) { 
 astNode = astNode . getFirstChild ( ) ; 
 } 
 - 
 - if ( astNode = = null ) { 
 - astNode = ast ; 
 - } 
 - 
 return astNode ; 
 } 
 
 @ @ - 157 , 8 + 132 , 7 @ @ public class MethodCallHandler extends AbstractExpressionHandler { 
 @ Override 
 public void checkIndentation ( ) { 
 final DetailAST exprNode = getMainAst ( ) . getParent ( ) ; 
 - if ( exprNode . getParent ( ) . getType ( ) ! = TokenTypes . LCURLY 
 - & & exprNode . getParent ( ) . getType ( ) ! = TokenTypes . SLIST ) { 
 + if ( exprNode . getParent ( ) . getType ( ) ! = TokenTypes . SLIST ) { 
 return ; 
 } 
 final DetailAST methodName = getMainAst ( ) . getFirstChild ( ) ; 
 @ @ - 197 , 13 + 171 , 6 @ @ public class MethodCallHandler extends AbstractExpressionHandler { 
 * method calls are chained returns right paren for last call . 
 * / 
 private static DetailAST getMethodCallLastNode ( DetailAST firstNode ) { 
 - DetailAST lastNode ; 
 - if ( firstNode . getNextSibling ( ) = = null ) { 
 - lastNode = firstNode . getLastChild ( ) ; 
 - } 
 - else { 
 - lastNode = firstNode . getNextSibling ( ) ; 
 - } 
 - return lastNode ; 
 + return firstNode . getLastChild ( ) ; 
 } 
 } 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java 
 index 6e81f0c . . 0cb3285 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java 
 @ @ - 1471 , 6 + 1471 , 27 @ @ public class IndentationCheckTest extends BaseCheckTestSupport { 
 } 
 
 @ Test 
 + public void testAnonymousClassInMethod ( ) throws Exception { 
 + final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; 
 + checkConfig . addAttribute ( " tabWidth " , " 8 " ) ; 
 + checkConfig . addAttribute ( " basicOffset " , " 2 " ) ; 
 + checkConfig . addAttribute ( " braceAdjustment " , " 0 " ) ; 
 + checkConfig . addAttribute ( " caseIndent " , " 2 " ) ; 
 + checkConfig . addAttribute ( " lineWrappingIndentation " , " 4 " ) ; 
 + checkConfig . addAttribute ( " throwsIndent " , " 4 " ) ; 
 + checkConfig . addAttribute ( " arrayInitIndent " , " 2 " ) ; 
 + final String [ ] expected = { 
 + " 19 : " + getCheckMessage ( MSG _ ERROR , " method def modifier " , 8 , 2 ) , 
 + " 20 : " + getCheckMessage ( MSG _ CHILD _ ERROR , " method def " , 16 , 4 ) , 
 + " 21 : " + getCheckMessage ( MSG _ ERROR _ MULTI , " method def modifier " , 24 , " 18 , 20 , 22 " ) , 
 + " 23 : " + getCheckMessage ( MSG _ CHILD _ ERROR _ MULTI , " method def " , 32 , " 20 , 22 , 24 " ) , 
 + " 24 : " + getCheckMessage ( MSG _ ERROR _ MULTI , " method def rcurly " , 24 , " 18 , 20 , 22 " ) , 
 + " 26 : " + getCheckMessage ( MSG _ ERROR , " method def rcurly " , 8 , 2 ) , 
 + } ; 
 + verifyWarns ( checkConfig , getPath ( " indentation / InputAnonymousClassInMethod . java " ) , expected ) ; 
 + } 
 + 
 + @ Test 
 public void testAnnotationDefinition ( ) throws Exception { 
 final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; 
 checkConfig . addAttribute ( " tabWidth " , " 4 " ) ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputAnonymousClassInMethod . java b / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputAnonymousClassInMethod . java 
 new file mode 100644 
 index 0000000 . . 44514f1 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputAnonymousClassInMethod . java 
 @ @ - 0 , 0 + 1 , 27 @ @ 
 + package com . puppycrawl . tools . checkstyle . indentation ; / / indent : 0 exp : 0 
 + 
 + import java . io . File ; / / indent : 0 exp : 0 
 + import java . io . FileFilter ; / / indent : 0 exp : 0 
 + 
 + / * * / / indent : 0 exp : 0 
 + * This test - input is intended to be checked using following configuration : / / indent : 1 exp : 1 
 + * / / indent : 1 exp : 1 
 + * arrayInitIndent = 2 / / indent : 1 exp : 1 
 + * basicOffset = 2 / / indent : 1 exp : 1 
 + * braceAdjustment = 0 / / indent : 1 exp : 1 
 + * caseIndent = 2 / / indent : 1 exp : 1 
 + * forceStrictCondition = false / / indent : 1 exp : 1 
 + * lineWrappingIndentation = 4 / / indent : 1 exp : 1 
 + * tabWidth = 8 / / indent : 1 exp : 1 
 + * throwsIndent = 4 / / indent : 1 exp : 1 
 + * / / / indent : 1 exp : 1 
 + public class InputAnonymousClassInMethod { / / indent : 0 exp : 0 
 + 	 private void walkDir ( File dir , FileFilter fileFilter ) { / / indent : 8 exp : 2 warn 
 + 	 	 walkDir ( dir , new FileFilter ( ) { / / indent : 16 exp : 4 warn 
 + 	 	 	 @ Override / / indent : 24 exp : 8 warn 
 + 	 	 	 public boolean accept ( File path ) { / / indent : 24 exp : 24 
 + 	 	 	 	 return ( path . isDirectory ( ) ) ; / / indent : 32 exp : 12 warn 
 + 	 	 	 } / / indent : 24 exp : 8 warn 
 + 	 	 } ) ; / / indent : 16 exp : 16 
 + 	 } / / indent : 8 exp : 2 warn 
 + } / / indent : 0 exp : 0 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputMethodCallLineWrap . java b / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputMethodCallLineWrap . java 
 index d9f64e7 . . 12ba8f8 100644 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputMethodCallLineWrap . java 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / indentation / InputMethodCallLineWrap . java 
 @ @ - 52 , 4 + 52 , 14 @ @ public class InputMethodCallLineWrap { / / indent : 0 exp : 0 
 ) ; / / indent : 14 exp : 16 warn 
 } / / indent : 8 exp : 8 
 } ; / / indent : 4 exp : 4 
 + 
 + void chaining ( ) { / / indent : 4 exp : 4 
 + toString ( ) / / indent : 8 exp : 8 
 + . getClass ( ) ; / / indent : 16 exp : 16 
 + toString ( ) . contains ( / / indent : 8 exp : 8 
 + new String ( / / indent : 12 exp : 12 
 + " a " / / indent : 20 exp : 20 
 + ) / / indent : 12 exp : 12 
 + ) ; / / indent : 8 exp : 8 
 + } / / indent : 4 exp : 4 
 } / / indent : 0 exp : 0
