BLEU SCORE: 0.037477767366779206

TEST MSG: Issue # 4870 : Mark TranslationCheck and JavadocPackageCheck with GlobalStatefulCheck annotation
GENERATED MSG: Do not allocate arrays of zero length . # 1555

TEST DIFF (one line): diff - - git a / config / import - control . xml b / config / import - control . xml <nl> index c3e8f30 . . 1dd9da6 100644 <nl> - - - a / config / import - control . xml <nl> + + + b / config / import - control . xml <nl> @ @ - 39 , 8 + 39 , 6 @ @ <nl> < allow class = " java . lang . annotation . RetentionPolicy " local - only = " true " / > <nl> < allow class = " java . lang . annotation . Target " local - only = " true " / > <nl> < allow class = " com . puppycrawl . tools . checkstyle . xpath . XpathQueryGenerator " local - only = " true " / > <nl> - < allow class = " com . puppycrawl . tools . checkstyle . FileStatefulCheck " / > <nl> - < allow class = " com . puppycrawl . tools . checkstyle . StatelessCheck " / > <nl> <nl> < ! - - allowed till https : / / github . com / checkstyle / checkstyle / issues / 3455 - - > <nl> < allow class = " com . google . common . base . CaseFormat " local - only = " true " / > <nl> @ @ - 104 , 6 + 102 , 10 @ @ <nl> < allow class = " java . nio . file . NoSuchFileException " local - only = " true " / > <nl> < allow class = " com . puppycrawl . tools . checkstyle . Definitions " local - only = " true " / > <nl> <nl> + < allow class = " com . puppycrawl . tools . checkstyle . StatelessCheck " / > <nl> + < allow class = " com . puppycrawl . tools . checkstyle . FileStatefulCheck " / > <nl> + < allow class = " com . puppycrawl . tools . checkstyle . GlobalStatefulCheck " / > <nl> + <nl> < subpackage name = " imports " > <nl> < allow class = " com . puppycrawl . tools . checkstyle . XmlLoader " local - only = " true " / > <nl> < / subpackage > <nl> diff - - git a / config / pmd . xml b / config / pmd . xml <nl> index b19c8d9 . . 7d67ec9 100644 <nl> - - - a / config / pmd . xml <nl> + + + b / config / pmd . xml <nl> @ @ - 332 , 10 + 332 , 12 @ @ <nl> < rule ref = " category / java / design . xml / ExcessiveImports " > <nl> < properties > <nl> < ! - - Main actively uses Checkstyle , logging and command line parsing API . <nl> + Checker collects external resource locations and sets up the configuration . <nl> CheckstyleAntTask integrates Checkstyle with Ant . <nl> - Checker collects external resource locations and sets up the configuration . - - > <nl> + TranslationCheck just get one extra import by annotation usage . <nl> + - - > <nl> < property name = " violationSuppressXPath " value = " / / ClassOrInterfaceDeclaration [ @ Image = ' Main ' <nl> - or @ Image = ' Checker ' or @ Image = ' CheckstyleAntTask ' ] " / > <nl> + or @ Image = ' Checker ' or @ Image = ' CheckstyleAntTask ' or @ Image = ' TranslationCheck ' ] " / > <nl> < / properties > <nl> < / rule > <nl> <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / GlobalStatefulCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / GlobalStatefulCheck . java <nl> index ca853d8 . . 513c063 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / GlobalStatefulCheck . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / GlobalStatefulCheck . java <nl> @ @ - 37 , 7 + 37 , 7 @ @ import java . lang . annotation . Target ; <nl> * Checker guarantees that there will be exactly one check instance <nl> * This is similar to multi - file validation , which checkstyle does not support fully yet . <nl> * Please refer to https : / / github . com / checkstyle / checkstyle / issues / 3540 for details . <nl> - * @ noinspection AnnotationClass , ClassIndependentOfModule , unused <nl> + * @ noinspection AnnotationClass , ClassIndependentOfModule , unused , ClassOnlyUsedInOnePackage <nl> * / <nl> @ Retention ( RetentionPolicy . RUNTIME ) <nl> @ Target ( ElementType . TYPE ) <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / TranslationCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / TranslationCheck . java <nl> index 541ca07 . . 6c72486 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / TranslationCheck . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / TranslationCheck . java <nl> @ @ - 36 , 6 + 36 , 7 @ @ import java . util . Properties ; <nl> import java . util . Set ; <nl> import java . util . SortedSet ; <nl> import java . util . TreeSet ; <nl> + import java . util . concurrent . ConcurrentHashMap ; <nl> import java . util . regex . Matcher ; <nl> import java . util . regex . Pattern ; <nl> import java . util . stream . Collectors ; <nl> @ @ - 44 , 6 + 45 , 7 @ @ import org . apache . commons . logging . Log ; <nl> import org . apache . commons . logging . LogFactory ; <nl> <nl> import com . puppycrawl . tools . checkstyle . Definitions ; <nl> + import com . puppycrawl . tools . checkstyle . GlobalStatefulCheck ; <nl> import com . puppycrawl . tools . checkstyle . api . AbstractFileSetCheck ; <nl> import com . puppycrawl . tools . checkstyle . api . FileText ; <nl> import com . puppycrawl . tools . checkstyle . api . LocalizedMessage ; <nl> @ @ - 98 , 6 + 100 , 7 @ @ import com . puppycrawl . tools . checkstyle . utils . CommonUtil ; <nl> * < br > <nl> * <nl> * / <nl> + @ GlobalStatefulCheck <nl> public class TranslationCheck extends AbstractFileSetCheck { <nl> <nl> / * * <nl> @ @ - 163 , 7 + 166 , 7 @ @ public class TranslationCheck extends AbstractFileSetCheck { <nl> private final Log log ; <nl> <nl> / * * The files to process . * / <nl> - private final Set < File > filesToProcess = new HashSet < > ( ) ; <nl> + private final Set < File > filesToProcess = ConcurrentHashMap . newKeySet ( ) ; <nl> <nl> / * * The base name regexp pattern . * / <nl> private Pattern baseName ; <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / javadoc / JavadocPackageCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / javadoc / JavadocPackageCheck . java <nl> index 1cfdd54 . . 709c689 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / javadoc / JavadocPackageCheck . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / javadoc / JavadocPackageCheck . java <nl> @ @ - 24 , 6 + 24 , 7 @ @ import java . io . IOException ; <nl> import java . util . Set ; <nl> import java . util . concurrent . ConcurrentHashMap ; <nl> <nl> + import com . puppycrawl . tools . checkstyle . GlobalStatefulCheck ; <nl> import com . puppycrawl . tools . checkstyle . api . AbstractFileSetCheck ; <nl> import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; <nl> import com . puppycrawl . tools . checkstyle . api . FileText ; <nl> @ @ - 32 , 6 + 33 , 7 @ @ import com . puppycrawl . tools . checkstyle . api . FileText ; <nl> * Checks that all packages have a package documentation . See the documentation <nl> * for more information . <nl> * / <nl> + @ GlobalStatefulCheck <nl> public class JavadocPackageCheck extends AbstractFileSetCheck { <nl> <nl> / * *
NEAREST DIFF (one line): diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / TreeWalker . java b / src / main / java / com / puppycrawl / tools / checkstyle / TreeWalker . java <nl> index cbe74ce . . 1bf78af 100755 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / TreeWalker . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / TreeWalker . java <nl> @ @ - 579 , 12 + 579 , 7 @ @ public final class TreeWalker <nl> if ( ast1 . getLineNo ( ) < ast2 . getLineNo ( ) ) { <nl> return false ; <nl> } <nl> - else { <nl> - if ( ast1 . getColumnNo ( ) > ast2 . getColumnNo ( ) ) { <nl> - return true ; <nl> - } <nl> - } <nl> - return false ; <nl> + return ast1 . getColumnNo ( ) > ast2 . getColumnNo ( ) ; <nl> } <nl> <nl> / * *

TEST DIFF:
diff - - git a / config / import - control . xml b / config / import - control . xml 
 index c3e8f30 . . 1dd9da6 100644 
 - - - a / config / import - control . xml 
 + + + b / config / import - control . xml 
 @ @ - 39 , 8 + 39 , 6 @ @ 
 < allow class = " java . lang . annotation . RetentionPolicy " local - only = " true " / > 
 < allow class = " java . lang . annotation . Target " local - only = " true " / > 
 < allow class = " com . puppycrawl . tools . checkstyle . xpath . XpathQueryGenerator " local - only = " true " / > 
 - < allow class = " com . puppycrawl . tools . checkstyle . FileStatefulCheck " / > 
 - < allow class = " com . puppycrawl . tools . checkstyle . StatelessCheck " / > 
 
 < ! - - allowed till https : / / github . com / checkstyle / checkstyle / issues / 3455 - - > 
 < allow class = " com . google . common . base . CaseFormat " local - only = " true " / > 
 @ @ - 104 , 6 + 102 , 10 @ @ 
 < allow class = " java . nio . file . NoSuchFileException " local - only = " true " / > 
 < allow class = " com . puppycrawl . tools . checkstyle . Definitions " local - only = " true " / > 
 
 + < allow class = " com . puppycrawl . tools . checkstyle . StatelessCheck " / > 
 + < allow class = " com . puppycrawl . tools . checkstyle . FileStatefulCheck " / > 
 + < allow class = " com . puppycrawl . tools . checkstyle . GlobalStatefulCheck " / > 
 + 
 < subpackage name = " imports " > 
 < allow class = " com . puppycrawl . tools . checkstyle . XmlLoader " local - only = " true " / > 
 < / subpackage > 
 diff - - git a / config / pmd . xml b / config / pmd . xml 
 index b19c8d9 . . 7d67ec9 100644 
 - - - a / config / pmd . xml 
 + + + b / config / pmd . xml 
 @ @ - 332 , 10 + 332 , 12 @ @ 
 < rule ref = " category / java / design . xml / ExcessiveImports " > 
 < properties > 
 < ! - - Main actively uses Checkstyle , logging and command line parsing API . 
 + Checker collects external resource locations and sets up the configuration . 
 CheckstyleAntTask integrates Checkstyle with Ant . 
 - Checker collects external resource locations and sets up the configuration . - - > 
 + TranslationCheck just get one extra import by annotation usage . 
 + - - > 
 < property name = " violationSuppressXPath " value = " / / ClassOrInterfaceDeclaration [ @ Image = ' Main ' 
 - or @ Image = ' Checker ' or @ Image = ' CheckstyleAntTask ' ] " / > 
 + or @ Image = ' Checker ' or @ Image = ' CheckstyleAntTask ' or @ Image = ' TranslationCheck ' ] " / > 
 < / properties > 
 < / rule > 
 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / GlobalStatefulCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / GlobalStatefulCheck . java 
 index ca853d8 . . 513c063 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / GlobalStatefulCheck . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / GlobalStatefulCheck . java 
 @ @ - 37 , 7 + 37 , 7 @ @ import java . lang . annotation . Target ; 
 * Checker guarantees that there will be exactly one check instance 
 * This is similar to multi - file validation , which checkstyle does not support fully yet . 
 * Please refer to https : / / github . com / checkstyle / checkstyle / issues / 3540 for details . 
 - * @ noinspection AnnotationClass , ClassIndependentOfModule , unused 
 + * @ noinspection AnnotationClass , ClassIndependentOfModule , unused , ClassOnlyUsedInOnePackage 
 * / 
 @ Retention ( RetentionPolicy . RUNTIME ) 
 @ Target ( ElementType . TYPE ) 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / TranslationCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / TranslationCheck . java 
 index 541ca07 . . 6c72486 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / TranslationCheck . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / TranslationCheck . java 
 @ @ - 36 , 6 + 36 , 7 @ @ import java . util . Properties ; 
 import java . util . Set ; 
 import java . util . SortedSet ; 
 import java . util . TreeSet ; 
 + import java . util . concurrent . ConcurrentHashMap ; 
 import java . util . regex . Matcher ; 
 import java . util . regex . Pattern ; 
 import java . util . stream . Collectors ; 
 @ @ - 44 , 6 + 45 , 7 @ @ import org . apache . commons . logging . Log ; 
 import org . apache . commons . logging . LogFactory ; 
 
 import com . puppycrawl . tools . checkstyle . Definitions ; 
 + import com . puppycrawl . tools . checkstyle . GlobalStatefulCheck ; 
 import com . puppycrawl . tools . checkstyle . api . AbstractFileSetCheck ; 
 import com . puppycrawl . tools . checkstyle . api . FileText ; 
 import com . puppycrawl . tools . checkstyle . api . LocalizedMessage ; 
 @ @ - 98 , 6 + 100 , 7 @ @ import com . puppycrawl . tools . checkstyle . utils . CommonUtil ; 
 * < br > 
 * 
 * / 
 + @ GlobalStatefulCheck 
 public class TranslationCheck extends AbstractFileSetCheck { 
 
 / * * 
 @ @ - 163 , 7 + 166 , 7 @ @ public class TranslationCheck extends AbstractFileSetCheck { 
 private final Log log ; 
 
 / * * The files to process . * / 
 - private final Set < File > filesToProcess = new HashSet < > ( ) ; 
 + private final Set < File > filesToProcess = ConcurrentHashMap . newKeySet ( ) ; 
 
 / * * The base name regexp pattern . * / 
 private Pattern baseName ; 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / javadoc / JavadocPackageCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / javadoc / JavadocPackageCheck . java 
 index 1cfdd54 . . 709c689 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / javadoc / JavadocPackageCheck . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / javadoc / JavadocPackageCheck . java 
 @ @ - 24 , 6 + 24 , 7 @ @ import java . io . IOException ; 
 import java . util . Set ; 
 import java . util . concurrent . ConcurrentHashMap ; 
 
 + import com . puppycrawl . tools . checkstyle . GlobalStatefulCheck ; 
 import com . puppycrawl . tools . checkstyle . api . AbstractFileSetCheck ; 
 import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; 
 import com . puppycrawl . tools . checkstyle . api . FileText ; 
 @ @ - 32 , 6 + 33 , 7 @ @ import com . puppycrawl . tools . checkstyle . api . FileText ; 
 * Checks that all packages have a package documentation . See the documentation 
 * for more information . 
 * / 
 + @ GlobalStatefulCheck 
 public class JavadocPackageCheck extends AbstractFileSetCheck { 
 
 / * *

NEAREST DIFF:
diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / TreeWalker . java b / src / main / java / com / puppycrawl / tools / checkstyle / TreeWalker . java 
 index cbe74ce . . 1bf78af 100755 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / TreeWalker . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / TreeWalker . java 
 @ @ - 579 , 12 + 579 , 7 @ @ public final class TreeWalker 
 if ( ast1 . getLineNo ( ) < ast2 . getLineNo ( ) ) { 
 return false ; 
 } 
 - else { 
 - if ( ast1 . getColumnNo ( ) > ast2 . getColumnNo ( ) ) { 
 - return true ; 
 - } 
 - } 
 - return false ; 
 + return ast1 . getColumnNo ( ) > ast2 . getColumnNo ( ) ; 
 } 
 
 / * *
