BLEU SCORE: 0.04573913556123801

TEST MSG: Issue # 877 : enable test checks for pmd , create separate configs and suppress all violations
GENERATED MSG: activation of some PMD controvercial rules . Issue # 744

TEST DIFF (one line): diff - - git a / config / pmd - main . xml b / config / pmd - main . xml <nl> new file mode 100644 <nl> index 0000000 . . c936bda <nl> - - - / dev / null <nl> + + + b / config / pmd - main . xml <nl> @ @ - 0 , 0 + 1 , 12 @ @ <nl> + < ? xml version = " 1 . 0 " ? > <nl> + < ruleset name = " PMD ruleset for Checkstyle " <nl> + xmlns = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 " <nl> + xmlns : xsi = " http : / / www . w3 . org / 2001 / XMLSchema - instance " <nl> + xsi : schemaLocation = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 <nl> + http : / / pmd . sourceforge . net / ruleset _ 2 _ 0 _ 0 . xsd " > <nl> + < description > <nl> + PMD ruleset for Checkstyle main code <nl> + < / description > <nl> + < exclude - pattern > . * / src / test / . * < / exclude - pattern > <nl> + < rule ref = " config / pmd . xml " / > <nl> + < / ruleset > <nl> diff - - git a / config / pmd - test . xml b / config / pmd - test . xml <nl> new file mode 100644 <nl> index 0000000 . . 14454e6 <nl> - - - / dev / null <nl> + + + b / config / pmd - test . xml <nl> @ @ - 0 , 0 + 1 , 92 @ @ <nl> + < ? xml version = " 1 . 0 " ? > <nl> + < ruleset name = " PMD ruleset for Checkstyle " <nl> + xmlns = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 " <nl> + xmlns : xsi = " http : / / www . w3 . org / 2001 / XMLSchema - instance " <nl> + xsi : schemaLocation = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 <nl> + http : / / pmd . sourceforge . net / ruleset _ 2 _ 0 _ 0 . xsd " > <nl> + < description > <nl> + PMD ruleset for Checkstyle tests <nl> + < / description > <nl> + < exclude - pattern > . * / src / main / . * < / exclude - pattern > <nl> + < rule ref = " config / pmd . xml " > <nl> + < ! - - We do throws Exception , as any exception that in not caught in test should fail a test that is expected behavior and we like it as it follow fail - fast and helps to avoid extra catch blocks - - > <nl> + < exclude name = " SignatureDeclareThrowsException " / > <nl> + < ! - - it madness to move all string values to common variables , it will be hard to read test code - - > <nl> + < exclude name = " AvoidDuplicateLiterals " / > <nl> + < ! - - we do not need javadoc on test code - - > <nl> + < exclude name = " CommentRequired " / > <nl> + < ! - - we like static imports in UTs as them minimize the code and we know that most of such methods are from UT + moks frameworks - - > <nl> + < exclude name = " TooManyStaticImports " / > <nl> + < ! - - we try to keep all testing for class in one place / class / file to ease navigation between target class and it ' s test - - > <nl> + < exclude name = " TooManyMethods " / > <nl> + < ! - - we have too much UTs for each main class , it is better to keep all tests in one file to ease navigation and search for tes - - > <nl> + < exclude name = " CouplingBetweenObjects " / > <nl> + < ! - - we have too much UTs for each main class , it is better to keep all tests in one file to ease navigation and search for test - - > <nl> + < exclude name = " ExcessiveImports " / > <nl> + < ! - - test should be named as their main class - - > <nl> + < exclude name = " AbstractNaming " / > <nl> + < ! - - checkstyle do not use IP in configuration , so all values in tests are ok to use , they just another test string data - - > <nl> + < exclude name = " AvoidUsingHardCodedIP " / > <nl> + < ! - - UTests are required to be public by design - - > <nl> + < exclude name = " ExcessivePublicCount " / > <nl> + < ! - - we have too much UTs for each main class , it is better to keep all tests in one file to ease navigation and search for test - - > <nl> + < exclude name = " ExcessiveClassLength " / > <nl> + < ! - - till # 4495 - - > <nl> + < exclude name = " UncommentedEmptyMethodBody " / > <nl> + < ! - - till # 4492 - - > <nl> + < exclude name = " CommentDefaultAccessModifier " / > <nl> + < ! - - till # 4491 - - > <nl> + < exclude name = " InsufficientStringBufferDeclaration " / > <nl> + < ! - - till # 4493 - - > <nl> + < exclude name = " ConfusingTernary " / > <nl> + < ! - - till # 4494 - - > <nl> + < exclude name = " AppendCharacterWithChar " / > <nl> + < ! - - till # 4490 - - > <nl> + < exclude name = " LoggerIsNotStaticFinal " / > <nl> + < ! - - till # 4489 - - > <nl> + < exclude name = " JUnit4TestShouldUseTestAnnotation " / > <nl> + < ! - - till # 4498 - - > <nl> + < exclude name = " CheckstyleCustomShortVariable " / > <nl> + < ! - - till # 4496 - - > <nl> + < exclude name = " NcssMethodCount " / > <nl> + < ! - - till # 4488 - - > <nl> + < exclude name = " UselessOverridingMethod " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " JUnitUseExpected " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " UncommentedEmptyConstructor " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " ShortClassName " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " DefaultPackage " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " AccessorClassGeneration " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " AddEmptyString " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " ExcessiveMethodLength " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " NPathComplexity " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " NcssTypeCount " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " JUnit4TestShouldUseBeforeAnnotation " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " ShortMethodName " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " AvoidCatchingGenericException " / > <nl> + < / rule > <nl> + <nl> + < rule ref = " rulesets / java / junit . xml " > <nl> + < ! - - tentative - - > <nl> + < exclude name = " JUnitTestsShouldIncludeAssert " / > <nl> + < ! - - tentative - - > <nl> + < exclude name = " JUnitAssertionsShouldIncludeMessage " / > <nl> + < / rule > <nl> + <nl> + < rule ref = " rulesets / java / junit . xml / JUnitTestContainsTooManyAsserts " > <nl> + < properties > <nl> + < property name = " maximumAsserts " value = " 11 " / > <nl> + < / properties > <nl> + < / rule > <nl> + < / ruleset > <nl> diff - - git a / config / pmd . xml b / config / pmd . xml <nl> index aa886f7 . . 1cfb1d2 100644 <nl> - - - a / config / pmd . xml <nl> + + + b / config / pmd . xml <nl> @ @ - 5 , 7 + 5 , 7 @ @ <nl> xsi : schemaLocation = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 <nl> http : / / pmd . sourceforge . net / ruleset _ 2 _ 0 _ 0 . xsd " > <nl> < description > <nl> - PMD ruleset for Checkstyle <nl> + PMD common ruleset for Checkstyle main / test sourcesets <nl> < / description > <nl> < rule ref = " rulesets / java / basic . xml " / > <nl> < rule ref = " rulesets / java / braces . xml " / > <nl> @ @ - 208 , 7 + 208 , 6 @ @ <nl> < ! - - too many false - positives - - > <nl> < exclude name = " BeanMembersShouldSerialize " / > <nl> < / rule > <nl> - < rule ref = " rulesets / java / junit . xml " / > <nl> < rule ref = " rulesets / java / logging - jakarta - commons . xml " / > <nl> <nl> < rule ref = " rulesets / java / logging - java . xml " / > <nl> diff - - git a / pom . xml b / pom . xml <nl> index f80641b . . 8fe91af 100644 <nl> - - - a / pom . xml <nl> + + + b / pom . xml <nl> @ @ - 350 , 11 + 350 , 14 @ @ <nl> < skipEmptyReport > false < / skipEmptyReport > <nl> < failOnViolation > true < / failOnViolation > <nl> < printFailingErrors > true < / printFailingErrors > <nl> - < ! - - < includeTests > true < / includeTests > - - > <nl> + < includeTests > true < / includeTests > <nl> < rulesets > <nl> - < ruleset > config / pmd . xml < / ruleset > <nl> + < ruleset > config / pmd - main . xml < / ruleset > <nl> + < ruleset > config / pmd - test . xml < / ruleset > <nl> < / rulesets > <nl> < excludeRoots > <nl> + < excludeRoot > src / it < / excludeRoot > <nl> + < excludeRoot > src / test / resources < / excludeRoot > <nl> < excludeRoot > target / generated - sources / antlr < / excludeRoot > <nl> < excludeRoot > target / generated - sources / antlr / com / puppycrawl / tools / checkstyle / grammars / javadoc < / excludeRoot > <nl> < / excludeRoots >
NEAREST DIFF (one line): diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / DeclarationCollector . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / DeclarationCollector . java <nl> index 7f9d69a . . df16452 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / DeclarationCollector . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / DeclarationCollector . java <nl> @ @ - 138 , 7 + 138 , 7 @ @ public abstract class DeclarationCollector extends Check <nl> case TokenTypes . SLIST : <nl> frameStack . addFirst ( new BlockFrame ( frame ) ) ; <nl> break ; <nl> - case TokenTypes . METHOD _ DEF : { <nl> + case TokenTypes . METHOD _ DEF : <nl> final String name = ast . findFirstToken ( TokenTypes . IDENT ) . getText ( ) ; <nl> if ( frame instanceof ClassFrame ) { <nl> final DetailAST mods = <nl> @ @ - 150 , 7 + 150 , 8 @ @ public abstract class DeclarationCollector extends Check <nl> ( ( ClassFrame ) frame ) . addInstanceMethod ( name ) ; <nl> } <nl> } <nl> - } <nl> + frameStack . addFirst ( new MethodFrame ( frame ) ) ; <nl> + break ; <nl> case TokenTypes . CTOR _ DEF : <nl> frameStack . addFirst ( new MethodFrame ( frame ) ) ; <nl> break ;

TEST DIFF:
diff - - git a / config / pmd - main . xml b / config / pmd - main . xml 
 new file mode 100644 
 index 0000000 . . c936bda 
 - - - / dev / null 
 + + + b / config / pmd - main . xml 
 @ @ - 0 , 0 + 1 , 12 @ @ 
 + < ? xml version = " 1 . 0 " ? > 
 + < ruleset name = " PMD ruleset for Checkstyle " 
 + xmlns = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 " 
 + xmlns : xsi = " http : / / www . w3 . org / 2001 / XMLSchema - instance " 
 + xsi : schemaLocation = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 
 + http : / / pmd . sourceforge . net / ruleset _ 2 _ 0 _ 0 . xsd " > 
 + < description > 
 + PMD ruleset for Checkstyle main code 
 + < / description > 
 + < exclude - pattern > . * / src / test / . * < / exclude - pattern > 
 + < rule ref = " config / pmd . xml " / > 
 + < / ruleset > 
 diff - - git a / config / pmd - test . xml b / config / pmd - test . xml 
 new file mode 100644 
 index 0000000 . . 14454e6 
 - - - / dev / null 
 + + + b / config / pmd - test . xml 
 @ @ - 0 , 0 + 1 , 92 @ @ 
 + < ? xml version = " 1 . 0 " ? > 
 + < ruleset name = " PMD ruleset for Checkstyle " 
 + xmlns = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 " 
 + xmlns : xsi = " http : / / www . w3 . org / 2001 / XMLSchema - instance " 
 + xsi : schemaLocation = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 
 + http : / / pmd . sourceforge . net / ruleset _ 2 _ 0 _ 0 . xsd " > 
 + < description > 
 + PMD ruleset for Checkstyle tests 
 + < / description > 
 + < exclude - pattern > . * / src / main / . * < / exclude - pattern > 
 + < rule ref = " config / pmd . xml " > 
 + < ! - - We do throws Exception , as any exception that in not caught in test should fail a test that is expected behavior and we like it as it follow fail - fast and helps to avoid extra catch blocks - - > 
 + < exclude name = " SignatureDeclareThrowsException " / > 
 + < ! - - it madness to move all string values to common variables , it will be hard to read test code - - > 
 + < exclude name = " AvoidDuplicateLiterals " / > 
 + < ! - - we do not need javadoc on test code - - > 
 + < exclude name = " CommentRequired " / > 
 + < ! - - we like static imports in UTs as them minimize the code and we know that most of such methods are from UT + moks frameworks - - > 
 + < exclude name = " TooManyStaticImports " / > 
 + < ! - - we try to keep all testing for class in one place / class / file to ease navigation between target class and it ' s test - - > 
 + < exclude name = " TooManyMethods " / > 
 + < ! - - we have too much UTs for each main class , it is better to keep all tests in one file to ease navigation and search for tes - - > 
 + < exclude name = " CouplingBetweenObjects " / > 
 + < ! - - we have too much UTs for each main class , it is better to keep all tests in one file to ease navigation and search for test - - > 
 + < exclude name = " ExcessiveImports " / > 
 + < ! - - test should be named as their main class - - > 
 + < exclude name = " AbstractNaming " / > 
 + < ! - - checkstyle do not use IP in configuration , so all values in tests are ok to use , they just another test string data - - > 
 + < exclude name = " AvoidUsingHardCodedIP " / > 
 + < ! - - UTests are required to be public by design - - > 
 + < exclude name = " ExcessivePublicCount " / > 
 + < ! - - we have too much UTs for each main class , it is better to keep all tests in one file to ease navigation and search for test - - > 
 + < exclude name = " ExcessiveClassLength " / > 
 + < ! - - till # 4495 - - > 
 + < exclude name = " UncommentedEmptyMethodBody " / > 
 + < ! - - till # 4492 - - > 
 + < exclude name = " CommentDefaultAccessModifier " / > 
 + < ! - - till # 4491 - - > 
 + < exclude name = " InsufficientStringBufferDeclaration " / > 
 + < ! - - till # 4493 - - > 
 + < exclude name = " ConfusingTernary " / > 
 + < ! - - till # 4494 - - > 
 + < exclude name = " AppendCharacterWithChar " / > 
 + < ! - - till # 4490 - - > 
 + < exclude name = " LoggerIsNotStaticFinal " / > 
 + < ! - - till # 4489 - - > 
 + < exclude name = " JUnit4TestShouldUseTestAnnotation " / > 
 + < ! - - till # 4498 - - > 
 + < exclude name = " CheckstyleCustomShortVariable " / > 
 + < ! - - till # 4496 - - > 
 + < exclude name = " NcssMethodCount " / > 
 + < ! - - till # 4488 - - > 
 + < exclude name = " UselessOverridingMethod " / > 
 + < ! - - tentative - - > 
 + < exclude name = " JUnitUseExpected " / > 
 + < ! - - tentative - - > 
 + < exclude name = " UncommentedEmptyConstructor " / > 
 + < ! - - tentative - - > 
 + < exclude name = " ShortClassName " / > 
 + < ! - - tentative - - > 
 + < exclude name = " DefaultPackage " / > 
 + < ! - - tentative - - > 
 + < exclude name = " AccessorClassGeneration " / > 
 + < ! - - tentative - - > 
 + < exclude name = " AddEmptyString " / > 
 + < ! - - tentative - - > 
 + < exclude name = " ExcessiveMethodLength " / > 
 + < ! - - tentative - - > 
 + < exclude name = " NPathComplexity " / > 
 + < ! - - tentative - - > 
 + < exclude name = " NcssTypeCount " / > 
 + < ! - - tentative - - > 
 + < exclude name = " JUnit4TestShouldUseBeforeAnnotation " / > 
 + < ! - - tentative - - > 
 + < exclude name = " ShortMethodName " / > 
 + < ! - - tentative - - > 
 + < exclude name = " AvoidCatchingGenericException " / > 
 + < / rule > 
 + 
 + < rule ref = " rulesets / java / junit . xml " > 
 + < ! - - tentative - - > 
 + < exclude name = " JUnitTestsShouldIncludeAssert " / > 
 + < ! - - tentative - - > 
 + < exclude name = " JUnitAssertionsShouldIncludeMessage " / > 
 + < / rule > 
 + 
 + < rule ref = " rulesets / java / junit . xml / JUnitTestContainsTooManyAsserts " > 
 + < properties > 
 + < property name = " maximumAsserts " value = " 11 " / > 
 + < / properties > 
 + < / rule > 
 + < / ruleset > 
 diff - - git a / config / pmd . xml b / config / pmd . xml 
 index aa886f7 . . 1cfb1d2 100644 
 - - - a / config / pmd . xml 
 + + + b / config / pmd . xml 
 @ @ - 5 , 7 + 5 , 7 @ @ 
 xsi : schemaLocation = " http : / / pmd . sourceforge . net / ruleset / 2 . 0 . 0 
 http : / / pmd . sourceforge . net / ruleset _ 2 _ 0 _ 0 . xsd " > 
 < description > 
 - PMD ruleset for Checkstyle 
 + PMD common ruleset for Checkstyle main / test sourcesets 
 < / description > 
 < rule ref = " rulesets / java / basic . xml " / > 
 < rule ref = " rulesets / java / braces . xml " / > 
 @ @ - 208 , 7 + 208 , 6 @ @ 
 < ! - - too many false - positives - - > 
 < exclude name = " BeanMembersShouldSerialize " / > 
 < / rule > 
 - < rule ref = " rulesets / java / junit . xml " / > 
 < rule ref = " rulesets / java / logging - jakarta - commons . xml " / > 
 
 < rule ref = " rulesets / java / logging - java . xml " / > 
 diff - - git a / pom . xml b / pom . xml 
 index f80641b . . 8fe91af 100644 
 - - - a / pom . xml 
 + + + b / pom . xml 
 @ @ - 350 , 11 + 350 , 14 @ @ 
 < skipEmptyReport > false < / skipEmptyReport > 
 < failOnViolation > true < / failOnViolation > 
 < printFailingErrors > true < / printFailingErrors > 
 - < ! - - < includeTests > true < / includeTests > - - > 
 + < includeTests > true < / includeTests > 
 < rulesets > 
 - < ruleset > config / pmd . xml < / ruleset > 
 + < ruleset > config / pmd - main . xml < / ruleset > 
 + < ruleset > config / pmd - test . xml < / ruleset > 
 < / rulesets > 
 < excludeRoots > 
 + < excludeRoot > src / it < / excludeRoot > 
 + < excludeRoot > src / test / resources < / excludeRoot > 
 < excludeRoot > target / generated - sources / antlr < / excludeRoot > 
 < excludeRoot > target / generated - sources / antlr / com / puppycrawl / tools / checkstyle / grammars / javadoc < / excludeRoot > 
 < / excludeRoots >

NEAREST DIFF:
diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / DeclarationCollector . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / DeclarationCollector . java 
 index 7f9d69a . . df16452 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / DeclarationCollector . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / DeclarationCollector . java 
 @ @ - 138 , 7 + 138 , 7 @ @ public abstract class DeclarationCollector extends Check 
 case TokenTypes . SLIST : 
 frameStack . addFirst ( new BlockFrame ( frame ) ) ; 
 break ; 
 - case TokenTypes . METHOD _ DEF : { 
 + case TokenTypes . METHOD _ DEF : 
 final String name = ast . findFirstToken ( TokenTypes . IDENT ) . getText ( ) ; 
 if ( frame instanceof ClassFrame ) { 
 final DetailAST mods = 
 @ @ - 150 , 7 + 150 , 8 @ @ public abstract class DeclarationCollector extends Check 
 ( ( ClassFrame ) frame ) . addInstanceMethod ( name ) ; 
 } 
 } 
 - } 
 + frameStack . addFirst ( new MethodFrame ( frame ) ) ; 
 + break ; 
 case TokenTypes . CTOR _ DEF : 
 frameStack . addFirst ( new MethodFrame ( frame ) ) ; 
 break ;
