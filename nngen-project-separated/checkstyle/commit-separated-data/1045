BLEU SCORE: 0.037477767366779206

TEST MSG: Issue # 2992 : ThreadLocal usage in single - threaded checkstyle
GENERATED MSG: issue969 : Fix upper / lower case conversation , enhance tests

TEST DIFF (one line): diff - - git a / config / findbugs - exclude . xml b / config / findbugs - exclude . xml <nl> index d9407e5 . . 33b278b 100644 <nl> - - - a / config / findbugs - exclude . xml <nl> + + + b / config / findbugs - exclude . xml <nl> @ @ - 112 , 4 + 112 , 10 @ @ <nl> < Method name = " makeCodeSelection " / > <nl> < Bug pattern = " RV _ RETURN _ VALUE _ IGNORED _ NO _ SIDE _ EFFECT " / > <nl> < / Match > <nl> + < Match > <nl> + < ! - - Until https : / / github . com / checkstyle / checkstyle / issues / 3573 - - > <nl> + < Class name = " com . puppycrawl . tools . checkstyle . checks . FileContentsHolder " / > <nl> + < Method name = " beginTree " / > <nl> + < Bug pattern = " ST _ WRITE _ TO _ STATIC _ FROM _ INSTANCE _ METHOD " / > <nl> + < / Match > <nl> < / FindBugsFilter > <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolder . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolder . java <nl> index 1a7c804 . . c086ecf 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolder . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolder . java <nl> @ @ - 31 , 21 + 31 , 29 @ @ import com . puppycrawl . tools . checkstyle . utils . CommonUtils ; <nl> * @ author Mike McMahon <nl> * @ author Rick Giles <nl> * / <nl> - public class FileContentsHolder <nl> - extends AbstractCheck { <nl> + public class FileContentsHolder extends AbstractCheck { <nl> / * * The current file contents . * / <nl> - private static final ThreadLocal < FileContents > FILE _ CONTENTS = new ThreadLocal < > ( ) ; <nl> + private static FileContents currentFileContents ; <nl> <nl> / * * <nl> * @ return the current file contents . <nl> * / <nl> + public static FileContents getCurrentFileContents ( ) { <nl> + return currentFileContents ; <nl> + } <nl> + <nl> + / * * <nl> + * @ return the current file contents . <nl> + * @ deprecated use getCurrentFileContents ( ) instead . <nl> + * / <nl> + @ Deprecated <nl> public static FileContents getContents ( ) { <nl> - return FILE _ CONTENTS . get ( ) ; <nl> + return getCurrentFileContents ( ) ; <nl> } <nl> <nl> @ Override <nl> public int [ ] getDefaultTokens ( ) { <nl> - return getAcceptableTokens ( ) ; <nl> + return CommonUtils . EMPTY _ INT _ ARRAY ; <nl> } <nl> <nl> @ Override <nl> @ @ - 60 , 14 + 68 , 6 @ @ public class FileContentsHolder <nl> <nl> @ Override <nl> public void beginTree ( DetailAST rootAST ) { <nl> - FILE _ CONTENTS . set ( getFileContents ( ) ) ; <nl> - } <nl> - <nl> - @ Override <nl> - public void destroy ( ) { <nl> - / / This needs to be called in destroy , rather than finishTree ( ) <nl> - / / as finishTree ( ) is called before the messages are passed to the <nl> - / / filters . Without calling remove , there is a memory leak . <nl> - FILE _ CONTENTS . remove ( ) ; <nl> + currentFileContents = getFileContents ( ) ; <nl> } <nl> } <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilter . java b / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilter . java <nl> index 1ddd3e5 . . 1c62654 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilter . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilter . java <nl> @ @ - 191 , 16 + 191 , 14 @ @ public class SuppressWithNearbyCommentFilter <nl> if ( event . getLocalizedMessage ( ) ! = null ) { <nl> / / Lazy update . If the first event for the current file , update file <nl> / / contents and tag suppressions <nl> - final FileContents currentContents = FileContentsHolder . getContents ( ) ; <nl> + final FileContents currentContents = FileContentsHolder . getCurrentFileContents ( ) ; <nl> <nl> - if ( currentContents ! = null ) { <nl> - if ( getFileContents ( ) ! = currentContents ) { <nl> - setFileContents ( currentContents ) ; <nl> - tagSuppressions ( ) ; <nl> - } <nl> - if ( matchesTag ( event ) ) { <nl> - accepted = false ; <nl> - } <nl> + if ( getFileContents ( ) ! = currentContents ) { <nl> + setFileContents ( currentContents ) ; <nl> + tagSuppressions ( ) ; <nl> + } <nl> + if ( matchesTag ( event ) ) { <nl> + accepted = false ; <nl> } <nl> } <nl> return accepted ; <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilter . java b / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilter . java <nl> index d3bca92 . . b9812de 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilter . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilter . java <nl> @ @ - 179 , 16 + 179 , 14 @ @ public class SuppressionCommentFilter <nl> if ( event . getLocalizedMessage ( ) ! = null ) { <nl> / / Lazy update . If the first event for the current file , update file <nl> / / contents and tag suppressions <nl> - final FileContents currentContents = FileContentsHolder . getContents ( ) ; <nl> + final FileContents currentContents = FileContentsHolder . getCurrentFileContents ( ) ; <nl> <nl> - if ( currentContents ! = null ) { <nl> - if ( getFileContents ( ) ! = currentContents ) { <nl> - setFileContents ( currentContents ) ; <nl> - tagSuppressions ( ) ; <nl> - } <nl> - final Tag matchTag = findNearestMatch ( event ) ; <nl> - accepted = matchTag = = null | | matchTag . isReportingOn ( ) ; <nl> + if ( getFileContents ( ) ! = currentContents ) { <nl> + setFileContents ( currentContents ) ; <nl> + tagSuppressions ( ) ; <nl> } <nl> + final Tag matchTag = findNearestMatch ( event ) ; <nl> + accepted = matchTag = = null | | matchTag . isReportingOn ( ) ; <nl> } <nl> return accepted ; <nl> } <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolderTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolderTest . java <nl> new file mode 100644 <nl> index 0000000 . . 9aaf78b <nl> - - - / dev / null <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolderTest . java <nl> @ @ - 0 , 0 + 1 , 34 @ @ <nl> + / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / <nl> + / / checkstyle : Checks Java source code for adherence to a set of rules . <nl> + / / Copyright ( C ) 2001 - 2016 the original author or authors . <nl> + / / <nl> + / / This library is free software ; you can redistribute it and / or <nl> + / / modify it under the terms of the GNU Lesser General Public <nl> + / / License as published by the Free Software Foundation ; either <nl> + / / version 2 . 1 of the License , or ( at your option ) any later version . <nl> + / / <nl> + / / This library is distributed in the hope that it will be useful , <nl> + / / but WITHOUT ANY WARRANTY ; without even the implied warranty of <nl> + / / MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE . See the GNU <nl> + / / Lesser General Public License for more details . <nl> + / / <nl> + / / You should have received a copy of the GNU Lesser General Public <nl> + / / License along with this library ; if not , write to the Free Software <nl> + / / Foundation , Inc . , 59 Temple Place , Suite 330 , Boston , MA 02111 - 1307 USA <nl> + / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / <nl> + <nl> + package com . puppycrawl . tools . checkstyle . checks ; <nl> + <nl> + import static org . junit . Assert . assertSame ; <nl> + <nl> + import org . junit . Test ; <nl> + <nl> + public class FileContentsHolderTest { <nl> + <nl> + @ Test <nl> + @ SuppressWarnings ( " deprecation " ) <nl> + public void testGetContents ( ) { <nl> + assertSame ( FileContentsHolder . getCurrentFileContents ( ) , <nl> + FileContentsHolder . getContents ( ) ) ; <nl> + } <nl> + } <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileSetCheckLifecycleTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileSetCheckLifecycleTest . java <nl> index c4cd084 . . 0ae2654 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileSetCheckLifecycleTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileSetCheckLifecycleTest . java <nl> @ @ - 121 , 7 + 121 , 7 @ @ public class FileSetCheckLifecycleTest <nl> <nl> @ Override <nl> public void finishProcessing ( ) { <nl> - fileContentAvailable = FileContentsHolder . getContents ( ) ! = null ; <nl> + fileContentAvailable = FileContentsHolder . getCurrentFileContents ( ) ! = null ; <nl> } <nl> } <nl> } <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilterTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilterTest . java <nl> index 1ee0d78 . . b73927f 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilterTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilterTest . java <nl> @ @ - 40 , 8 + 40 , 6 @ @ import com . puppycrawl . tools . checkstyle . TreeWalker ; <nl> import com . puppycrawl . tools . checkstyle . api . AuditEvent ; <nl> import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; <nl> import com . puppycrawl . tools . checkstyle . api . Configuration ; <nl> - import com . puppycrawl . tools . checkstyle . api . LocalizedMessage ; <nl> - import com . puppycrawl . tools . checkstyle . api . SeverityLevel ; <nl> import com . puppycrawl . tools . checkstyle . checks . FileContentsHolder ; <nl> import com . puppycrawl . tools . checkstyle . checks . coding . IllegalCatchCheck ; <nl> import com . puppycrawl . tools . checkstyle . checks . naming . ConstantNameCheck ; <nl> @ @ - 288 , 16 + 286 , 6 @ @ public class SuppressWithNearbyCommentFilterTest <nl> } <nl> <nl> @ Test <nl> - public void testAcceptNullFileContents ( ) { <nl> - final LocalizedMessage message = <nl> - new LocalizedMessage ( 1 , 1 , " messages . properties " , " key " , null , SeverityLevel . ERROR , <nl> - null , getClass ( ) , null ) ; <nl> - final AuditEvent auditEvent = new AuditEvent ( this , " Test . java " , message ) ; <nl> - final SuppressWithNearbyCommentFilter filter = new SuppressWithNearbyCommentFilter ( ) ; <nl> - Assert . assertTrue ( filter . accept ( auditEvent ) ) ; <nl> - } <nl> - <nl> - @ Test <nl> public void testToStringOfTagClass ( ) { <nl> final SuppressWithNearbyCommentFilter . Tag tag = new SuppressWithNearbyCommentFilter . Tag ( <nl> " text " , 7 , new SuppressWithNearbyCommentFilter ( ) <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilterTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilterTest . java <nl> index e8ee8b3 . . 91573fc 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilterTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilterTest . java <nl> @ @ - 40 , 8 + 40 , 6 @ @ import com . puppycrawl . tools . checkstyle . TreeWalker ; <nl> import com . puppycrawl . tools . checkstyle . api . AuditEvent ; <nl> import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; <nl> import com . puppycrawl . tools . checkstyle . api . Configuration ; <nl> - import com . puppycrawl . tools . checkstyle . api . LocalizedMessage ; <nl> - import com . puppycrawl . tools . checkstyle . api . SeverityLevel ; <nl> import com . puppycrawl . tools . checkstyle . checks . FileContentsHolder ; <nl> import com . puppycrawl . tools . checkstyle . checks . coding . IllegalCatchCheck ; <nl> import com . puppycrawl . tools . checkstyle . checks . naming . ConstantNameCheck ; <nl> @ @ - 302 , 17 + 300 , 6 @ @ public class SuppressionCommentFilterTest <nl> } <nl> <nl> @ Test <nl> - public void testAcceptNullFileContents ( ) { <nl> - final LocalizedMessage message = <nl> - new LocalizedMessage ( 1 , 1 , <nl> - " messages . properties " , " key " , null , SeverityLevel . ERROR , null , <nl> - getClass ( ) , null ) ; <nl> - final AuditEvent auditEvent = new AuditEvent ( this , " Test . java " , message ) ; <nl> - final SuppressionCommentFilter filter = new SuppressionCommentFilter ( ) ; <nl> - Assert . assertTrue ( filter . accept ( auditEvent ) ) ; <nl> - } <nl> - <nl> - @ Test <nl> public void testSuppressById ( ) throws Exception { <nl> final DefaultConfiguration filterConfig = <nl> createFilterConfig ( SuppressionCommentFilter . class ) ;
NEAREST DIFF (one line): diff - - git a / pom . xml b / pom . xml <nl> index 62ec752 . . c1fa102 100644 <nl> - - - a / pom . xml <nl> + + + b / pom . xml <nl> @ @ - 230 , 7 + 230 , 7 @ @ <nl> < ! - - < includeTests > true < / includeTests > - - > <nl> < rulesets > <nl> < ruleset > rulesets / java / basic . xml < / ruleset > <nl> - < ! - - < ruleset > rulesets / java / braces . xml < / ruleset > - - > <nl> + < ruleset > rulesets / java / braces . xml < / ruleset > <nl> < ruleset > rulesets / java / clone . xml < / ruleset > <nl> < ! - - < ruleset > rulesets / java / codesize . xml < / ruleset > - - > <nl> < ! - - < ruleset > rulesets / java / comments . xml < / ruleset > - - > <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / gui / FileDrop . java b / src / main / java / com / puppycrawl / tools / checkstyle / gui / FileDrop . java <nl> index 86c7227 . . d41db3c 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / gui / FileDrop . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / gui / FileDrop . java <nl> @ @ - 164 , 8 + 164 , 9 @ @ class FileDrop <nl> if ( recursive & & c instanceof Container ) { <nl> final Container cont = ( Container ) c ; <nl> final Component [ ] comps = cont . getComponents ( ) ; <nl> - for ( Component element : comps ) <nl> + for ( Component element : comps ) { <nl> makeDropTarget ( element , recursive ) ; <nl> + } <nl> } <nl> } <nl> <nl> @ @ - 179 , 8 + 180 , 9 @ @ class FileDrop <nl> / / See if any of the flavors are a file list <nl> int i = 0 ; <nl> while ( ! ok & & i < flavors . length ) { / / Is the flavor a file list ? <nl> - if ( flavors [ i ] . equals ( DataFlavor . javaFileListFlavor ) ) <nl> + if ( flavors [ i ] . equals ( DataFlavor . javaFileListFlavor ) ) { <nl> ok = true ; <nl> + } <nl> i + + ; <nl> } <nl>

TEST DIFF:
diff - - git a / config / findbugs - exclude . xml b / config / findbugs - exclude . xml 
 index d9407e5 . . 33b278b 100644 
 - - - a / config / findbugs - exclude . xml 
 + + + b / config / findbugs - exclude . xml 
 @ @ - 112 , 4 + 112 , 10 @ @ 
 < Method name = " makeCodeSelection " / > 
 < Bug pattern = " RV _ RETURN _ VALUE _ IGNORED _ NO _ SIDE _ EFFECT " / > 
 < / Match > 
 + < Match > 
 + < ! - - Until https : / / github . com / checkstyle / checkstyle / issues / 3573 - - > 
 + < Class name = " com . puppycrawl . tools . checkstyle . checks . FileContentsHolder " / > 
 + < Method name = " beginTree " / > 
 + < Bug pattern = " ST _ WRITE _ TO _ STATIC _ FROM _ INSTANCE _ METHOD " / > 
 + < / Match > 
 < / FindBugsFilter > 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolder . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolder . java 
 index 1a7c804 . . c086ecf 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolder . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolder . java 
 @ @ - 31 , 21 + 31 , 29 @ @ import com . puppycrawl . tools . checkstyle . utils . CommonUtils ; 
 * @ author Mike McMahon 
 * @ author Rick Giles 
 * / 
 - public class FileContentsHolder 
 - extends AbstractCheck { 
 + public class FileContentsHolder extends AbstractCheck { 
 / * * The current file contents . * / 
 - private static final ThreadLocal < FileContents > FILE _ CONTENTS = new ThreadLocal < > ( ) ; 
 + private static FileContents currentFileContents ; 
 
 / * * 
 * @ return the current file contents . 
 * / 
 + public static FileContents getCurrentFileContents ( ) { 
 + return currentFileContents ; 
 + } 
 + 
 + / * * 
 + * @ return the current file contents . 
 + * @ deprecated use getCurrentFileContents ( ) instead . 
 + * / 
 + @ Deprecated 
 public static FileContents getContents ( ) { 
 - return FILE _ CONTENTS . get ( ) ; 
 + return getCurrentFileContents ( ) ; 
 } 
 
 @ Override 
 public int [ ] getDefaultTokens ( ) { 
 - return getAcceptableTokens ( ) ; 
 + return CommonUtils . EMPTY _ INT _ ARRAY ; 
 } 
 
 @ Override 
 @ @ - 60 , 14 + 68 , 6 @ @ public class FileContentsHolder 
 
 @ Override 
 public void beginTree ( DetailAST rootAST ) { 
 - FILE _ CONTENTS . set ( getFileContents ( ) ) ; 
 - } 
 - 
 - @ Override 
 - public void destroy ( ) { 
 - / / This needs to be called in destroy , rather than finishTree ( ) 
 - / / as finishTree ( ) is called before the messages are passed to the 
 - / / filters . Without calling remove , there is a memory leak . 
 - FILE _ CONTENTS . remove ( ) ; 
 + currentFileContents = getFileContents ( ) ; 
 } 
 } 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilter . java b / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilter . java 
 index 1ddd3e5 . . 1c62654 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilter . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilter . java 
 @ @ - 191 , 16 + 191 , 14 @ @ public class SuppressWithNearbyCommentFilter 
 if ( event . getLocalizedMessage ( ) ! = null ) { 
 / / Lazy update . If the first event for the current file , update file 
 / / contents and tag suppressions 
 - final FileContents currentContents = FileContentsHolder . getContents ( ) ; 
 + final FileContents currentContents = FileContentsHolder . getCurrentFileContents ( ) ; 
 
 - if ( currentContents ! = null ) { 
 - if ( getFileContents ( ) ! = currentContents ) { 
 - setFileContents ( currentContents ) ; 
 - tagSuppressions ( ) ; 
 - } 
 - if ( matchesTag ( event ) ) { 
 - accepted = false ; 
 - } 
 + if ( getFileContents ( ) ! = currentContents ) { 
 + setFileContents ( currentContents ) ; 
 + tagSuppressions ( ) ; 
 + } 
 + if ( matchesTag ( event ) ) { 
 + accepted = false ; 
 } 
 } 
 return accepted ; 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilter . java b / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilter . java 
 index d3bca92 . . b9812de 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilter . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilter . java 
 @ @ - 179 , 16 + 179 , 14 @ @ public class SuppressionCommentFilter 
 if ( event . getLocalizedMessage ( ) ! = null ) { 
 / / Lazy update . If the first event for the current file , update file 
 / / contents and tag suppressions 
 - final FileContents currentContents = FileContentsHolder . getContents ( ) ; 
 + final FileContents currentContents = FileContentsHolder . getCurrentFileContents ( ) ; 
 
 - if ( currentContents ! = null ) { 
 - if ( getFileContents ( ) ! = currentContents ) { 
 - setFileContents ( currentContents ) ; 
 - tagSuppressions ( ) ; 
 - } 
 - final Tag matchTag = findNearestMatch ( event ) ; 
 - accepted = matchTag = = null | | matchTag . isReportingOn ( ) ; 
 + if ( getFileContents ( ) ! = currentContents ) { 
 + setFileContents ( currentContents ) ; 
 + tagSuppressions ( ) ; 
 } 
 + final Tag matchTag = findNearestMatch ( event ) ; 
 + accepted = matchTag = = null | | matchTag . isReportingOn ( ) ; 
 } 
 return accepted ; 
 } 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolderTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolderTest . java 
 new file mode 100644 
 index 0000000 . . 9aaf78b 
 - - - / dev / null 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileContentsHolderTest . java 
 @ @ - 0 , 0 + 1 , 34 @ @ 
 + / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
 + / / checkstyle : Checks Java source code for adherence to a set of rules . 
 + / / Copyright ( C ) 2001 - 2016 the original author or authors . 
 + / / 
 + / / This library is free software ; you can redistribute it and / or 
 + / / modify it under the terms of the GNU Lesser General Public 
 + / / License as published by the Free Software Foundation ; either 
 + / / version 2 . 1 of the License , or ( at your option ) any later version . 
 + / / 
 + / / This library is distributed in the hope that it will be useful , 
 + / / but WITHOUT ANY WARRANTY ; without even the implied warranty of 
 + / / MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE . See the GNU 
 + / / Lesser General Public License for more details . 
 + / / 
 + / / You should have received a copy of the GNU Lesser General Public 
 + / / License along with this library ; if not , write to the Free Software 
 + / / Foundation , Inc . , 59 Temple Place , Suite 330 , Boston , MA 02111 - 1307 USA 
 + / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / / 
 + 
 + package com . puppycrawl . tools . checkstyle . checks ; 
 + 
 + import static org . junit . Assert . assertSame ; 
 + 
 + import org . junit . Test ; 
 + 
 + public class FileContentsHolderTest { 
 + 
 + @ Test 
 + @ SuppressWarnings ( " deprecation " ) 
 + public void testGetContents ( ) { 
 + assertSame ( FileContentsHolder . getCurrentFileContents ( ) , 
 + FileContentsHolder . getContents ( ) ) ; 
 + } 
 + } 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileSetCheckLifecycleTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileSetCheckLifecycleTest . java 
 index c4cd084 . . 0ae2654 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileSetCheckLifecycleTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / FileSetCheckLifecycleTest . java 
 @ @ - 121 , 7 + 121 , 7 @ @ public class FileSetCheckLifecycleTest 
 
 @ Override 
 public void finishProcessing ( ) { 
 - fileContentAvailable = FileContentsHolder . getContents ( ) ! = null ; 
 + fileContentAvailable = FileContentsHolder . getCurrentFileContents ( ) ! = null ; 
 } 
 } 
 } 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilterTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilterTest . java 
 index 1ee0d78 . . b73927f 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilterTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressWithNearbyCommentFilterTest . java 
 @ @ - 40 , 8 + 40 , 6 @ @ import com . puppycrawl . tools . checkstyle . TreeWalker ; 
 import com . puppycrawl . tools . checkstyle . api . AuditEvent ; 
 import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; 
 import com . puppycrawl . tools . checkstyle . api . Configuration ; 
 - import com . puppycrawl . tools . checkstyle . api . LocalizedMessage ; 
 - import com . puppycrawl . tools . checkstyle . api . SeverityLevel ; 
 import com . puppycrawl . tools . checkstyle . checks . FileContentsHolder ; 
 import com . puppycrawl . tools . checkstyle . checks . coding . IllegalCatchCheck ; 
 import com . puppycrawl . tools . checkstyle . checks . naming . ConstantNameCheck ; 
 @ @ - 288 , 16 + 286 , 6 @ @ public class SuppressWithNearbyCommentFilterTest 
 } 
 
 @ Test 
 - public void testAcceptNullFileContents ( ) { 
 - final LocalizedMessage message = 
 - new LocalizedMessage ( 1 , 1 , " messages . properties " , " key " , null , SeverityLevel . ERROR , 
 - null , getClass ( ) , null ) ; 
 - final AuditEvent auditEvent = new AuditEvent ( this , " Test . java " , message ) ; 
 - final SuppressWithNearbyCommentFilter filter = new SuppressWithNearbyCommentFilter ( ) ; 
 - Assert . assertTrue ( filter . accept ( auditEvent ) ) ; 
 - } 
 - 
 - @ Test 
 public void testToStringOfTagClass ( ) { 
 final SuppressWithNearbyCommentFilter . Tag tag = new SuppressWithNearbyCommentFilter . Tag ( 
 " text " , 7 , new SuppressWithNearbyCommentFilter ( ) 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilterTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilterTest . java 
 index e8ee8b3 . . 91573fc 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilterTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / filters / SuppressionCommentFilterTest . java 
 @ @ - 40 , 8 + 40 , 6 @ @ import com . puppycrawl . tools . checkstyle . TreeWalker ; 
 import com . puppycrawl . tools . checkstyle . api . AuditEvent ; 
 import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; 
 import com . puppycrawl . tools . checkstyle . api . Configuration ; 
 - import com . puppycrawl . tools . checkstyle . api . LocalizedMessage ; 
 - import com . puppycrawl . tools . checkstyle . api . SeverityLevel ; 
 import com . puppycrawl . tools . checkstyle . checks . FileContentsHolder ; 
 import com . puppycrawl . tools . checkstyle . checks . coding . IllegalCatchCheck ; 
 import com . puppycrawl . tools . checkstyle . checks . naming . ConstantNameCheck ; 
 @ @ - 302 , 17 + 300 , 6 @ @ public class SuppressionCommentFilterTest 
 } 
 
 @ Test 
 - public void testAcceptNullFileContents ( ) { 
 - final LocalizedMessage message = 
 - new LocalizedMessage ( 1 , 1 , 
 - " messages . properties " , " key " , null , SeverityLevel . ERROR , null , 
 - getClass ( ) , null ) ; 
 - final AuditEvent auditEvent = new AuditEvent ( this , " Test . java " , message ) ; 
 - final SuppressionCommentFilter filter = new SuppressionCommentFilter ( ) ; 
 - Assert . assertTrue ( filter . accept ( auditEvent ) ) ; 
 - } 
 - 
 - @ Test 
 public void testSuppressById ( ) throws Exception { 
 final DefaultConfiguration filterConfig = 
 createFilterConfig ( SuppressionCommentFilter . class ) ;

NEAREST DIFF:
diff - - git a / pom . xml b / pom . xml 
 index 62ec752 . . c1fa102 100644 
 - - - a / pom . xml 
 + + + b / pom . xml 
 @ @ - 230 , 7 + 230 , 7 @ @ 
 < ! - - < includeTests > true < / includeTests > - - > 
 < rulesets > 
 < ruleset > rulesets / java / basic . xml < / ruleset > 
 - < ! - - < ruleset > rulesets / java / braces . xml < / ruleset > - - > 
 + < ruleset > rulesets / java / braces . xml < / ruleset > 
 < ruleset > rulesets / java / clone . xml < / ruleset > 
 < ! - - < ruleset > rulesets / java / codesize . xml < / ruleset > - - > 
 < ! - - < ruleset > rulesets / java / comments . xml < / ruleset > - - > 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / gui / FileDrop . java b / src / main / java / com / puppycrawl / tools / checkstyle / gui / FileDrop . java 
 index 86c7227 . . d41db3c 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / gui / FileDrop . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / gui / FileDrop . java 
 @ @ - 164 , 8 + 164 , 9 @ @ class FileDrop 
 if ( recursive & & c instanceof Container ) { 
 final Container cont = ( Container ) c ; 
 final Component [ ] comps = cont . getComponents ( ) ; 
 - for ( Component element : comps ) 
 + for ( Component element : comps ) { 
 makeDropTarget ( element , recursive ) ; 
 + } 
 } 
 } 
 
 @ @ - 179 , 8 + 180 , 9 @ @ class FileDrop 
 / / See if any of the flavors are a file list 
 int i = 0 ; 
 while ( ! ok & & i < flavors . length ) { / / Is the flavor a file list ? 
 - if ( flavors [ i ] . equals ( DataFlavor . javaFileListFlavor ) ) 
 + if ( flavors [ i ] . equals ( DataFlavor . javaFileListFlavor ) ) { 
 ok = true ; 
 + } 
 i + + ; 
 } 

