BLEU SCORE: 0.02286956778061902

TEST MSG: Issue # 4437 : Modified ImportControlLoaderTest . java and moved its input files to the importcontrolloader subdirectory
GENERATED MSG: UT coverage 100 % for ImportControlCheck # 1128

TEST DIFF (one line): diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / ImportControlLoaderTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / ImportControlLoaderTest . java <nl> index cea6558 . . fe32454 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / ImportControlLoaderTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / ImportControlLoaderTest . java <nl> @ @ - 53 , 20 + 53 , 23 @ @ import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; <nl> @ PrepareForTest ( { ImportControlLoader . class , URI . class } ) <nl> public class ImportControlLoaderTest { <nl> private static String getPath ( String filename ) { <nl> - return " src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / " + filename ; <nl> + return " src / test / resources / com / puppycrawl / tools / " <nl> + + " checkstyle / checks / imports / importcontrolloader / " + filename ; <nl> } <nl> <nl> @ Test <nl> public void testLoad ( ) throws CheckstyleException { <nl> final ImportControl root = <nl> - ImportControlLoader . load ( new File ( getPath ( " import - control _ complete . xml " ) ) . toURI ( ) ) ; <nl> + ImportControlLoader . load ( <nl> + new File ( getPath ( " InputImportControlLoaderComplete . xml " ) ) . toURI ( ) ) ; <nl> assertNotNull ( root ) ; <nl> } <nl> <nl> @ Test <nl> public void testWrongFormatUri ( ) throws Exception { <nl> try { <nl> - ImportControlLoader . load ( new URI ( " aaa : / / " + getPath ( " import - control _ complete . xml " ) ) ) ; <nl> + ImportControlLoader . load ( new URI ( " aaa : / / " <nl> + + getPath ( " InputImportControlLoaderComplete . xml " ) ) ) ; <nl> fail ( " exception expected " ) ; <nl> } <nl> catch ( CheckstyleException ex ) { <nl> @ @ - 79 , 7 + 82 , 7 @ @ public class ImportControlLoaderTest { <nl> public void testExtraElementInConfig ( ) throws Exception { <nl> final ImportControl root = <nl> ImportControlLoader . load ( <nl> - new File ( getPath ( " import - control _ WithNewElement . xml " ) ) . toURI ( ) ) ; <nl> + new File ( getPath ( " InputImportControlLoaderWithNewElement . xml " ) ) . toURI ( ) ) ; <nl> assertNotNull ( root ) ; <nl> } <nl> <nl> @ @ - 118 , 7 + 121 , 7 @ @ public class ImportControlLoaderTest { <nl> URI . class ) ; <nl> privateMethod . setAccessible ( true ) ; <nl> privateMethod . invoke ( null , source , <nl> - new File ( getPath ( " import - control _ complete . xml " ) ) . toURI ( ) ) ; <nl> + new File ( getPath ( " InputImportControlLoaderComplete . xml " ) ) . toURI ( ) ) ; <nl> fail ( " exception expected " ) ; <nl> } <nl> catch ( InvocationTargetException ex ) { <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ MODIFIED _ FOR _ UT . dtd b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ MODIFIED _ FOR _ UT . dtd <nl> deleted file mode 100644 <nl> index 4a92338 . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ MODIFIED _ FOR _ UT . dtd <nl> + + + / dev / null <nl> @ @ - 1 , 83 + 0 , 0 @ @ <nl> - < ? xml version = " 1 . 0 " encoding = " UTF - 8 " ? > <nl> - <nl> - < ! - - Add the following to any file that is to be validated against this DTD : <nl> - <nl> - < ! DOCTYPE module PUBLIC <nl> - " - / / Puppy Crawl / / DTD Import Control 1 . 1 / / EN " <nl> - " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 1 . dtd " > <nl> - - - > <nl> - <nl> - < ! - - <nl> - The root element of the configuration file . <nl> - - - > <nl> - < ! ELEMENT import - control ( ( allow | disallow | new - test - element - for - UT ) * , subpackage * ) > <nl> - <nl> - < ! - - <nl> - pkg - The root package to be checked . For example " com . puppycrawl " . <nl> - - - > <nl> - < ! ATTLIST import - control <nl> - pkg NMTOKEN # REQUIRED > <nl> - <nl> - < ! - - <nl> - Represents a subpackage of the parent element . <nl> - - - > <nl> - < ! ELEMENT subpackage ( ( allow | disallow ) * , subpackage * ) > <nl> - <nl> - < ! - - <nl> - name - The name of the subpackage . For example if the name is " tools " <nl> - and the pa the parent is " com . puppycrawl " , then it corresponds to the <nl> - package " com . puppycrawl . tools " . <nl> - - - > <nl> - < ! ATTLIST subpackage <nl> - name NMTOKEN # REQUIRED > <nl> - <nl> - < ! - - <nl> - Represents attributes for a guard which can either allow or disallow <nl> - access . <nl> - <nl> - pkg - The fully qualified name of the package to guard . Cannot be <nl> - specified in conjunction with " class " . <nl> - <nl> - class - The fully qualified name of the class to guard . Cannot be <nl> - specified in conjunction with " pkg " . <nl> - <nl> - exact - match - Only valid with " pkg " . Specifies whether the package <nl> - name matching should be exact . For example , the pkg <nl> - " com . puppycrawl . tools " will match the import <nl> - " com . puppycrawl . tools . checkstyle . api . * " when the option is not set , <nl> - but will not match is the option is set . <nl> - <nl> - local - only - Indicates that the guard is to apply only to the current <nl> - package and not to subpackages . <nl> - <nl> - regex - Indicates that the class or package name has to be interpreted as <nl> - regular expression . <nl> - - - > <nl> - < ! ENTITY % attlist . guard " <nl> - pkg CDATA # IMPLIED <nl> - exact - match ( true ) # IMPLIED <nl> - class CDATA # IMPLIED <nl> - local - only ( true ) # IMPLIED <nl> - regex ( true ) # IMPLIED " > <nl> - <nl> - < ! - - <nl> - Represents a guard that will allow access . <nl> - - - > <nl> - < ! ELEMENT allow EMPTY > <nl> - < ! ATTLIST allow <nl> - % attlist . guard ; > <nl> - <nl> - < ! - - <nl> - Represents a guard that will disallow access . <nl> - - - > <nl> - < ! ELEMENT disallow EMPTY > <nl> - < ! ATTLIST disallow <nl> - % attlist . guard ; > <nl> - <nl> - < ! - - <nl> - Represents a guard that will disallow access . <nl> - - - > <nl> - < ! ELEMENT new - test - element - for - UT EMPTY > <nl> - < ! ATTLIST new - test - element - for - UT <nl> - % attlist . guard ; > <nl> - <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ WithNewElement . xml b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ WithNewElement . xml <nl> deleted file mode 100644 <nl> index d024a08 . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ WithNewElement . xml <nl> + + + / dev / null <nl> @ @ - 1 , 17 + 0 , 0 @ @ <nl> - < ? xml version = " 1 . 0 " ? > <nl> - < ! DOCTYPE import - control PUBLIC <nl> - " - / / Puppy Crawl / / DTD Import Control 1 . UT / / EN " <nl> - " src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ MODIFIED _ FOR _ UT . dtd " > <nl> - <nl> - < import - control pkg = " com " > <nl> - < allow class = " some . class " / > <nl> - < new - test - element - for - UT pkg = " some . pkg " / > <nl> - < disallow class = " another . class " local - only = " true " / > <nl> - < allow pkg = " some . pkg " / > <nl> - < disallow pkg = " another . pkg " local - only = " true " / > <nl> - < disallow pkg = " and . another . pkg " exact - match = " true " / > <nl> - < subpackage name = " puppycrawl " > <nl> - < disallow pkg = " some . pkg " / > <nl> - < disallow class = " some . class " / > <nl> - < / subpackage > <nl> - < / import - control > <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ complete . xml b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ complete . xml <nl> deleted file mode 100644 <nl> index 4ac674e . . 0000000 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ complete . xml <nl> + + + / dev / null <nl> @ @ - 1 , 16 + 0 , 0 @ @ <nl> - < ? xml version = " 1 . 0 " ? > <nl> - < ! DOCTYPE import - control PUBLIC <nl> - " - / / Puppy Crawl / / DTD Import Control 1 . 0 / / EN " <nl> - " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 0 . dtd " > <nl> - <nl> - < import - control pkg = " com " > <nl> - < allow class = " some . class " / > <nl> - < disallow class = " another . class " local - only = " true " / > <nl> - < allow pkg = " some . pkg " / > <nl> - < disallow pkg = " another . pkg " local - only = " true " / > <nl> - < disallow pkg = " and . another . pkg " exact - match = " true " / > <nl> - < subpackage name = " puppycrawl " > <nl> - < disallow pkg = " some . pkg " / > <nl> - < disallow class = " some . class " / > <nl> - < / subpackage > <nl> - < / import - control > <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderComplete . xml b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderComplete . xml <nl> new file mode 100644 <nl> index 0000000 . . 4ac674e <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderComplete . xml <nl> @ @ - 0 , 0 + 1 , 16 @ @ <nl> + < ? xml version = " 1 . 0 " ? > <nl> + < ! DOCTYPE import - control PUBLIC <nl> + " - / / Puppy Crawl / / DTD Import Control 1 . 0 / / EN " <nl> + " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 0 . dtd " > <nl> + <nl> + < import - control pkg = " com " > <nl> + < allow class = " some . class " / > <nl> + < disallow class = " another . class " local - only = " true " / > <nl> + < allow pkg = " some . pkg " / > <nl> + < disallow pkg = " another . pkg " local - only = " true " / > <nl> + < disallow pkg = " and . another . pkg " exact - match = " true " / > <nl> + < subpackage name = " puppycrawl " > <nl> + < disallow pkg = " some . pkg " / > <nl> + < disallow class = " some . class " / > <nl> + < / subpackage > <nl> + < / import - control > <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderWithNewElement . xml b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderWithNewElement . xml <nl> new file mode 100644 <nl> index 0000000 . . 76b80bf <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderWithNewElement . xml <nl> @ @ - 0 , 0 + 1 , 17 @ @ <nl> + < ? xml version = " 1 . 0 " ? > <nl> + < ! DOCTYPE import - control PUBLIC <nl> + " - / / Puppy Crawl / / DTD Import Control 1 . UT / / EN " <nl> + " src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / import - control _ MODIFIED _ FOR _ UT . dtd " > <nl> + <nl> + < import - control pkg = " com " > <nl> + < allow class = " some . class " / > <nl> + < new - test - element - for - UT pkg = " some . pkg " / > <nl> + < disallow class = " another . class " local - only = " true " / > <nl> + < allow pkg = " some . pkg " / > <nl> + < disallow pkg = " another . pkg " local - only = " true " / > <nl> + < disallow pkg = " and . another . pkg " exact - match = " true " / > <nl> + < subpackage name = " puppycrawl " > <nl> + < disallow pkg = " some . pkg " / > <nl> + < disallow class = " some . class " / > <nl> + < / subpackage > <nl> + < / import - control > <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / import - control _ MODIFIED _ FOR _ UT . dtd b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / import - control _ MODIFIED _ FOR _ UT . dtd <nl> new file mode 100644 <nl> index 0000000 . . 4a92338 <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / import - control _ MODIFIED _ FOR _ UT . dtd <nl> @ @ - 0 , 0 + 1 , 83 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " UTF - 8 " ? > <nl> + <nl> + < ! - - Add the following to any file that is to be validated against this DTD : <nl> + <nl> + < ! DOCTYPE module PUBLIC <nl> + " - / / Puppy Crawl / / DTD Import Control 1 . 1 / / EN " <nl> + " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 1 . dtd " > <nl> + - - > <nl> + <nl> + < ! - - <nl> + The root element of the configuration file . <nl> + - - > <nl> + < ! ELEMENT import - control ( ( allow | disallow | new - test - element - for - UT ) * , subpackage * ) > <nl> + <nl> + < ! - - <nl> + pkg - The root package to be checked . For example " com . puppycrawl " . <nl> + - - > <nl> + < ! ATTLIST import - control <nl> + pkg NMTOKEN # REQUIRED > <nl> + <nl> + < ! - - <nl> + Represents a subpackage of the parent element . <nl> + - - > <nl> + < ! ELEMENT subpackage ( ( allow | disallow ) * , subpackage * ) > <nl> + <nl> + < ! - - <nl> + name - The name of the subpackage . For example if the name is " tools " <nl> + and the pa the parent is " com . puppycrawl " , then it corresponds to the <nl> + package " com . puppycrawl . tools " . <nl> + - - > <nl> + < ! ATTLIST subpackage <nl> + name NMTOKEN # REQUIRED > <nl> + <nl> + < ! - - <nl> + Represents attributes for a guard which can either allow or disallow <nl> + access . <nl> + <nl> + pkg - The fully qualified name of the package to guard . Cannot be <nl> + specified in conjunction with " class " . <nl> + <nl> + class - The fully qualified name of the class to guard . Cannot be <nl> + specified in conjunction with " pkg " . <nl> + <nl> + exact - match - Only valid with " pkg " . Specifies whether the package <nl> + name matching should be exact . For example , the pkg <nl> + " com . puppycrawl . tools " will match the import <nl> + " com . puppycrawl . tools . checkstyle . api . * " when the option is not set , <nl> + but will not match is the option is set . <nl> + <nl> + local - only - Indicates that the guard is to apply only to the current <nl> + package and not to subpackages . <nl> + <nl> + regex - Indicates that the class or package name has to be interpreted as <nl> + regular expression . <nl> + - - > <nl> + < ! ENTITY % attlist . guard " <nl> + pkg CDATA # IMPLIED <nl> + exact - match ( true ) # IMPLIED <nl> + class CDATA # IMPLIED <nl> + local - only ( true ) # IMPLIED <nl> + regex ( true ) # IMPLIED " > <nl> + <nl> + < ! - - <nl> + Represents a guard that will allow access . <nl> + - - > <nl> + < ! ELEMENT allow EMPTY > <nl> + < ! ATTLIST allow <nl> + % attlist . guard ; > <nl> + <nl> + < ! - - <nl> + Represents a guard that will disallow access . <nl> + - - > <nl> + < ! ELEMENT disallow EMPTY > <nl> + < ! ATTLIST disallow <nl> + % attlist . guard ; > <nl> + <nl> + < ! - - <nl> + Represents a guard that will disallow access . <nl> + - - > <nl> + < ! ELEMENT new - test - element - for - UT EMPTY > <nl> + < ! ATTLIST new - test - element - for - UT <nl> + % attlist . guard ; > <nl> +
NEAREST DIFF (one line): diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheck . java <nl> index d83fe06 . . 36dd3f1 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheck . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheck . java <nl> @ @ - 646 , 6 + 646 , 10 @ @ public class CustomImportOrderCheck extends Check { <nl> catch ( NumberFormatException e ) { <nl> samePackageDomainsRegExp = rule ; <nl> } <nl> + if ( samePackageMatchingDepth < = 0 ) { <nl> + throw new IllegalArgumentException ( <nl> + " SAME _ PACKAGE rule parameter should be positive integer : " + ruleStr ) ; <nl> + } <nl> customImportOrderRules . add ( SAME _ PACKAGE _ RULE _ GROUP ) ; <nl> <nl> } <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheckTest . java <nl> index 251c349 . . 68dfc0a 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheckTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheckTest . java <nl> @ @ - 21 , 9 + 21 , 11 @ @ package com . puppycrawl . tools . checkstyle . checks . imports ; <nl> <nl> import com . puppycrawl . tools . checkstyle . BaseCheckTestSupport ; <nl> import com . puppycrawl . tools . checkstyle . DefaultConfiguration ; <nl> + import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; <nl> import com . puppycrawl . tools . checkstyle . api . TokenTypes ; <nl> <nl> import java . io . File ; <nl> + <nl> import org . junit . Test ; <nl> <nl> import static com . puppycrawl . tools . checkstyle . checks . imports . CustomImportOrderCheck . MSG _ LEX ; <nl> @ @ - 323 , 4 + 325 , 35 @ @ public class CustomImportOrderCheckTest extends BaseCheckTestSupport { <nl> <nl> assertArrayEquals ( expected , actual ) ; <nl> } <nl> + <nl> + @ Test ( expected = CheckstyleException . class ) <nl> + public void testSamePackageDepthNegative ( ) throws Exception { <nl> + final DefaultConfiguration checkConfig = <nl> + createCheckConfig ( CustomImportOrderCheck . class ) ; <nl> + checkConfig . addAttribute ( " sortImportsInGroupAlphabetically " , " false " ) ; <nl> + checkConfig . addAttribute ( " separateLineBetweenGroups " , " false " ) ; <nl> + checkConfig . addAttribute ( " customImportOrderRules " , <nl> + " SAME _ PACKAGE ( - 1 ) " ) ; <nl> + final String [ ] expected = { } ; <nl> + <nl> + verify ( checkConfig , new File ( " src / test / resources - noncompilable / com / puppycrawl / tools / " <nl> + + " checkstyle / imports / " <nl> + + " InputCustomImportOrderSamePackageDepth2 - 5 . java " ) . getCanonicalPath ( ) , expected ) ; <nl> + } <nl> + <nl> + @ Test ( expected = CheckstyleException . class ) <nl> + public void testSamePackageDepthZero ( ) throws Exception { <nl> + final DefaultConfiguration checkConfig = <nl> + createCheckConfig ( CustomImportOrderCheck . class ) ; <nl> + checkConfig . addAttribute ( " sortImportsInGroupAlphabetically " , " false " ) ; <nl> + checkConfig . addAttribute ( " separateLineBetweenGroups " , " false " ) ; <nl> + checkConfig . addAttribute ( " customImportOrderRules " , <nl> + " SAME _ PACKAGE ( 0 ) " ) ; <nl> + final String [ ] expected = { } ; <nl> + <nl> + verify ( checkConfig , new File ( " src / test / resources - noncompilable / com / puppycrawl / tools / " <nl> + + " checkstyle / imports / " <nl> + + " InputCustomImportOrderSamePackageDepth2 - 5 . java " ) . getCanonicalPath ( ) , expected ) ; <nl> + } <nl> + <nl> }

TEST DIFF:
diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / ImportControlLoaderTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / ImportControlLoaderTest . java 
 index cea6558 . . fe32454 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / ImportControlLoaderTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / ImportControlLoaderTest . java 
 @ @ - 53 , 20 + 53 , 23 @ @ import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; 
 @ PrepareForTest ( { ImportControlLoader . class , URI . class } ) 
 public class ImportControlLoaderTest { 
 private static String getPath ( String filename ) { 
 - return " src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / " + filename ; 
 + return " src / test / resources / com / puppycrawl / tools / " 
 + + " checkstyle / checks / imports / importcontrolloader / " + filename ; 
 } 
 
 @ Test 
 public void testLoad ( ) throws CheckstyleException { 
 final ImportControl root = 
 - ImportControlLoader . load ( new File ( getPath ( " import - control _ complete . xml " ) ) . toURI ( ) ) ; 
 + ImportControlLoader . load ( 
 + new File ( getPath ( " InputImportControlLoaderComplete . xml " ) ) . toURI ( ) ) ; 
 assertNotNull ( root ) ; 
 } 
 
 @ Test 
 public void testWrongFormatUri ( ) throws Exception { 
 try { 
 - ImportControlLoader . load ( new URI ( " aaa : / / " + getPath ( " import - control _ complete . xml " ) ) ) ; 
 + ImportControlLoader . load ( new URI ( " aaa : / / " 
 + + getPath ( " InputImportControlLoaderComplete . xml " ) ) ) ; 
 fail ( " exception expected " ) ; 
 } 
 catch ( CheckstyleException ex ) { 
 @ @ - 79 , 7 + 82 , 7 @ @ public class ImportControlLoaderTest { 
 public void testExtraElementInConfig ( ) throws Exception { 
 final ImportControl root = 
 ImportControlLoader . load ( 
 - new File ( getPath ( " import - control _ WithNewElement . xml " ) ) . toURI ( ) ) ; 
 + new File ( getPath ( " InputImportControlLoaderWithNewElement . xml " ) ) . toURI ( ) ) ; 
 assertNotNull ( root ) ; 
 } 
 
 @ @ - 118 , 7 + 121 , 7 @ @ public class ImportControlLoaderTest { 
 URI . class ) ; 
 privateMethod . setAccessible ( true ) ; 
 privateMethod . invoke ( null , source , 
 - new File ( getPath ( " import - control _ complete . xml " ) ) . toURI ( ) ) ; 
 + new File ( getPath ( " InputImportControlLoaderComplete . xml " ) ) . toURI ( ) ) ; 
 fail ( " exception expected " ) ; 
 } 
 catch ( InvocationTargetException ex ) { 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ MODIFIED _ FOR _ UT . dtd b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ MODIFIED _ FOR _ UT . dtd 
 deleted file mode 100644 
 index 4a92338 . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ MODIFIED _ FOR _ UT . dtd 
 + + + / dev / null 
 @ @ - 1 , 83 + 0 , 0 @ @ 
 - < ? xml version = " 1 . 0 " encoding = " UTF - 8 " ? > 
 - 
 - < ! - - Add the following to any file that is to be validated against this DTD : 
 - 
 - < ! DOCTYPE module PUBLIC 
 - " - / / Puppy Crawl / / DTD Import Control 1 . 1 / / EN " 
 - " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 1 . dtd " > 
 - - - > 
 - 
 - < ! - - 
 - The root element of the configuration file . 
 - - - > 
 - < ! ELEMENT import - control ( ( allow | disallow | new - test - element - for - UT ) * , subpackage * ) > 
 - 
 - < ! - - 
 - pkg - The root package to be checked . For example " com . puppycrawl " . 
 - - - > 
 - < ! ATTLIST import - control 
 - pkg NMTOKEN # REQUIRED > 
 - 
 - < ! - - 
 - Represents a subpackage of the parent element . 
 - - - > 
 - < ! ELEMENT subpackage ( ( allow | disallow ) * , subpackage * ) > 
 - 
 - < ! - - 
 - name - The name of the subpackage . For example if the name is " tools " 
 - and the pa the parent is " com . puppycrawl " , then it corresponds to the 
 - package " com . puppycrawl . tools " . 
 - - - > 
 - < ! ATTLIST subpackage 
 - name NMTOKEN # REQUIRED > 
 - 
 - < ! - - 
 - Represents attributes for a guard which can either allow or disallow 
 - access . 
 - 
 - pkg - The fully qualified name of the package to guard . Cannot be 
 - specified in conjunction with " class " . 
 - 
 - class - The fully qualified name of the class to guard . Cannot be 
 - specified in conjunction with " pkg " . 
 - 
 - exact - match - Only valid with " pkg " . Specifies whether the package 
 - name matching should be exact . For example , the pkg 
 - " com . puppycrawl . tools " will match the import 
 - " com . puppycrawl . tools . checkstyle . api . * " when the option is not set , 
 - but will not match is the option is set . 
 - 
 - local - only - Indicates that the guard is to apply only to the current 
 - package and not to subpackages . 
 - 
 - regex - Indicates that the class or package name has to be interpreted as 
 - regular expression . 
 - - - > 
 - < ! ENTITY % attlist . guard " 
 - pkg CDATA # IMPLIED 
 - exact - match ( true ) # IMPLIED 
 - class CDATA # IMPLIED 
 - local - only ( true ) # IMPLIED 
 - regex ( true ) # IMPLIED " > 
 - 
 - < ! - - 
 - Represents a guard that will allow access . 
 - - - > 
 - < ! ELEMENT allow EMPTY > 
 - < ! ATTLIST allow 
 - % attlist . guard ; > 
 - 
 - < ! - - 
 - Represents a guard that will disallow access . 
 - - - > 
 - < ! ELEMENT disallow EMPTY > 
 - < ! ATTLIST disallow 
 - % attlist . guard ; > 
 - 
 - < ! - - 
 - Represents a guard that will disallow access . 
 - - - > 
 - < ! ELEMENT new - test - element - for - UT EMPTY > 
 - < ! ATTLIST new - test - element - for - UT 
 - % attlist . guard ; > 
 - 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ WithNewElement . xml b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ WithNewElement . xml 
 deleted file mode 100644 
 index d024a08 . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ WithNewElement . xml 
 + + + / dev / null 
 @ @ - 1 , 17 + 0 , 0 @ @ 
 - < ? xml version = " 1 . 0 " ? > 
 - < ! DOCTYPE import - control PUBLIC 
 - " - / / Puppy Crawl / / DTD Import Control 1 . UT / / EN " 
 - " src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ MODIFIED _ FOR _ UT . dtd " > 
 - 
 - < import - control pkg = " com " > 
 - < allow class = " some . class " / > 
 - < new - test - element - for - UT pkg = " some . pkg " / > 
 - < disallow class = " another . class " local - only = " true " / > 
 - < allow pkg = " some . pkg " / > 
 - < disallow pkg = " another . pkg " local - only = " true " / > 
 - < disallow pkg = " and . another . pkg " exact - match = " true " / > 
 - < subpackage name = " puppycrawl " > 
 - < disallow pkg = " some . pkg " / > 
 - < disallow class = " some . class " / > 
 - < / subpackage > 
 - < / import - control > 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ complete . xml b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ complete . xml 
 deleted file mode 100644 
 index 4ac674e . . 0000000 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / import - control _ complete . xml 
 + + + / dev / null 
 @ @ - 1 , 16 + 0 , 0 @ @ 
 - < ? xml version = " 1 . 0 " ? > 
 - < ! DOCTYPE import - control PUBLIC 
 - " - / / Puppy Crawl / / DTD Import Control 1 . 0 / / EN " 
 - " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 0 . dtd " > 
 - 
 - < import - control pkg = " com " > 
 - < allow class = " some . class " / > 
 - < disallow class = " another . class " local - only = " true " / > 
 - < allow pkg = " some . pkg " / > 
 - < disallow pkg = " another . pkg " local - only = " true " / > 
 - < disallow pkg = " and . another . pkg " exact - match = " true " / > 
 - < subpackage name = " puppycrawl " > 
 - < disallow pkg = " some . pkg " / > 
 - < disallow class = " some . class " / > 
 - < / subpackage > 
 - < / import - control > 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderComplete . xml b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderComplete . xml 
 new file mode 100644 
 index 0000000 . . 4ac674e 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderComplete . xml 
 @ @ - 0 , 0 + 1 , 16 @ @ 
 + < ? xml version = " 1 . 0 " ? > 
 + < ! DOCTYPE import - control PUBLIC 
 + " - / / Puppy Crawl / / DTD Import Control 1 . 0 / / EN " 
 + " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 0 . dtd " > 
 + 
 + < import - control pkg = " com " > 
 + < allow class = " some . class " / > 
 + < disallow class = " another . class " local - only = " true " / > 
 + < allow pkg = " some . pkg " / > 
 + < disallow pkg = " another . pkg " local - only = " true " / > 
 + < disallow pkg = " and . another . pkg " exact - match = " true " / > 
 + < subpackage name = " puppycrawl " > 
 + < disallow pkg = " some . pkg " / > 
 + < disallow class = " some . class " / > 
 + < / subpackage > 
 + < / import - control > 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderWithNewElement . xml b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderWithNewElement . xml 
 new file mode 100644 
 index 0000000 . . 76b80bf 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / InputImportControlLoaderWithNewElement . xml 
 @ @ - 0 , 0 + 1 , 17 @ @ 
 + < ? xml version = " 1 . 0 " ? > 
 + < ! DOCTYPE import - control PUBLIC 
 + " - / / Puppy Crawl / / DTD Import Control 1 . UT / / EN " 
 + " src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / import - control _ MODIFIED _ FOR _ UT . dtd " > 
 + 
 + < import - control pkg = " com " > 
 + < allow class = " some . class " / > 
 + < new - test - element - for - UT pkg = " some . pkg " / > 
 + < disallow class = " another . class " local - only = " true " / > 
 + < allow pkg = " some . pkg " / > 
 + < disallow pkg = " another . pkg " local - only = " true " / > 
 + < disallow pkg = " and . another . pkg " exact - match = " true " / > 
 + < subpackage name = " puppycrawl " > 
 + < disallow pkg = " some . pkg " / > 
 + < disallow class = " some . class " / > 
 + < / subpackage > 
 + < / import - control > 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / import - control _ MODIFIED _ FOR _ UT . dtd b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / import - control _ MODIFIED _ FOR _ UT . dtd 
 new file mode 100644 
 index 0000000 . . 4a92338 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / imports / importcontrolloader / import - control _ MODIFIED _ FOR _ UT . dtd 
 @ @ - 0 , 0 + 1 , 83 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " UTF - 8 " ? > 
 + 
 + < ! - - Add the following to any file that is to be validated against this DTD : 
 + 
 + < ! DOCTYPE module PUBLIC 
 + " - / / Puppy Crawl / / DTD Import Control 1 . 1 / / EN " 
 + " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 1 . dtd " > 
 + - - > 
 + 
 + < ! - - 
 + The root element of the configuration file . 
 + - - > 
 + < ! ELEMENT import - control ( ( allow | disallow | new - test - element - for - UT ) * , subpackage * ) > 
 + 
 + < ! - - 
 + pkg - The root package to be checked . For example " com . puppycrawl " . 
 + - - > 
 + < ! ATTLIST import - control 
 + pkg NMTOKEN # REQUIRED > 
 + 
 + < ! - - 
 + Represents a subpackage of the parent element . 
 + - - > 
 + < ! ELEMENT subpackage ( ( allow | disallow ) * , subpackage * ) > 
 + 
 + < ! - - 
 + name - The name of the subpackage . For example if the name is " tools " 
 + and the pa the parent is " com . puppycrawl " , then it corresponds to the 
 + package " com . puppycrawl . tools " . 
 + - - > 
 + < ! ATTLIST subpackage 
 + name NMTOKEN # REQUIRED > 
 + 
 + < ! - - 
 + Represents attributes for a guard which can either allow or disallow 
 + access . 
 + 
 + pkg - The fully qualified name of the package to guard . Cannot be 
 + specified in conjunction with " class " . 
 + 
 + class - The fully qualified name of the class to guard . Cannot be 
 + specified in conjunction with " pkg " . 
 + 
 + exact - match - Only valid with " pkg " . Specifies whether the package 
 + name matching should be exact . For example , the pkg 
 + " com . puppycrawl . tools " will match the import 
 + " com . puppycrawl . tools . checkstyle . api . * " when the option is not set , 
 + but will not match is the option is set . 
 + 
 + local - only - Indicates that the guard is to apply only to the current 
 + package and not to subpackages . 
 + 
 + regex - Indicates that the class or package name has to be interpreted as 
 + regular expression . 
 + - - > 
 + < ! ENTITY % attlist . guard " 
 + pkg CDATA # IMPLIED 
 + exact - match ( true ) # IMPLIED 
 + class CDATA # IMPLIED 
 + local - only ( true ) # IMPLIED 
 + regex ( true ) # IMPLIED " > 
 + 
 + < ! - - 
 + Represents a guard that will allow access . 
 + - - > 
 + < ! ELEMENT allow EMPTY > 
 + < ! ATTLIST allow 
 + % attlist . guard ; > 
 + 
 + < ! - - 
 + Represents a guard that will disallow access . 
 + - - > 
 + < ! ELEMENT disallow EMPTY > 
 + < ! ATTLIST disallow 
 + % attlist . guard ; > 
 + 
 + < ! - - 
 + Represents a guard that will disallow access . 
 + - - > 
 + < ! ELEMENT new - test - element - for - UT EMPTY > 
 + < ! ATTLIST new - test - element - for - UT 
 + % attlist . guard ; > 
 +

NEAREST DIFF:
diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheck . java 
 index d83fe06 . . 36dd3f1 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheck . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheck . java 
 @ @ - 646 , 6 + 646 , 10 @ @ public class CustomImportOrderCheck extends Check { 
 catch ( NumberFormatException e ) { 
 samePackageDomainsRegExp = rule ; 
 } 
 + if ( samePackageMatchingDepth < = 0 ) { 
 + throw new IllegalArgumentException ( 
 + " SAME _ PACKAGE rule parameter should be positive integer : " + ruleStr ) ; 
 + } 
 customImportOrderRules . add ( SAME _ PACKAGE _ RULE _ GROUP ) ; 
 
 } 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheckTest . java 
 index 251c349 . . 68dfc0a 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheckTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / imports / CustomImportOrderCheckTest . java 
 @ @ - 21 , 9 + 21 , 11 @ @ package com . puppycrawl . tools . checkstyle . checks . imports ; 
 
 import com . puppycrawl . tools . checkstyle . BaseCheckTestSupport ; 
 import com . puppycrawl . tools . checkstyle . DefaultConfiguration ; 
 + import com . puppycrawl . tools . checkstyle . api . CheckstyleException ; 
 import com . puppycrawl . tools . checkstyle . api . TokenTypes ; 
 
 import java . io . File ; 
 + 
 import org . junit . Test ; 
 
 import static com . puppycrawl . tools . checkstyle . checks . imports . CustomImportOrderCheck . MSG _ LEX ; 
 @ @ - 323 , 4 + 325 , 35 @ @ public class CustomImportOrderCheckTest extends BaseCheckTestSupport { 
 
 assertArrayEquals ( expected , actual ) ; 
 } 
 + 
 + @ Test ( expected = CheckstyleException . class ) 
 + public void testSamePackageDepthNegative ( ) throws Exception { 
 + final DefaultConfiguration checkConfig = 
 + createCheckConfig ( CustomImportOrderCheck . class ) ; 
 + checkConfig . addAttribute ( " sortImportsInGroupAlphabetically " , " false " ) ; 
 + checkConfig . addAttribute ( " separateLineBetweenGroups " , " false " ) ; 
 + checkConfig . addAttribute ( " customImportOrderRules " , 
 + " SAME _ PACKAGE ( - 1 ) " ) ; 
 + final String [ ] expected = { } ; 
 + 
 + verify ( checkConfig , new File ( " src / test / resources - noncompilable / com / puppycrawl / tools / " 
 + + " checkstyle / imports / " 
 + + " InputCustomImportOrderSamePackageDepth2 - 5 . java " ) . getCanonicalPath ( ) , expected ) ; 
 + } 
 + 
 + @ Test ( expected = CheckstyleException . class ) 
 + public void testSamePackageDepthZero ( ) throws Exception { 
 + final DefaultConfiguration checkConfig = 
 + createCheckConfig ( CustomImportOrderCheck . class ) ; 
 + checkConfig . addAttribute ( " sortImportsInGroupAlphabetically " , " false " ) ; 
 + checkConfig . addAttribute ( " separateLineBetweenGroups " , " false " ) ; 
 + checkConfig . addAttribute ( " customImportOrderRules " , 
 + " SAME _ PACKAGE ( 0 ) " ) ; 
 + final String [ ] expected = { } ; 
 + 
 + verify ( checkConfig , new File ( " src / test / resources - noncompilable / com / puppycrawl / tools / " 
 + + " checkstyle / imports / " 
 + + " InputCustomImportOrderSamePackageDepth2 - 5 . java " ) . getCanonicalPath ( ) , expected ) ; 
 + } 
 + 
 }
