BLEU SCORE: 0.015284801196484512

TEST MSG: Issue # 2451 : removed excess hierarchy from NestedForDepthCheck
GENERATED MSG: Added NestedForDepth that restricts nested < code > for < / code >

TEST DIFF (one line): diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / coding / NestedForDepthCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / coding / NestedForDepthCheck . java <nl> index 4479991 . . 4aa5c74 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / coding / NestedForDepthCheck . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / coding / NestedForDepthCheck . java <nl> @ @ - 19 , 15 + 19 , 16 @ @ <nl> <nl> package com . puppycrawl . tools . checkstyle . checks . coding ; <nl> <nl> + import com . puppycrawl . tools . checkstyle . api . Check ; <nl> import com . puppycrawl . tools . checkstyle . api . DetailAST ; <nl> import com . puppycrawl . tools . checkstyle . api . TokenTypes ; <nl> <nl> / * * <nl> * Check the number of nested { @ code for } - statements . The maximum <nl> - * number of nested layers can be configured . The default value is 1 . Most of <nl> - * the logic is implemented in the parent class . The code for the class is <nl> - * copied from the NestedIfDepthCheck - class . The only difference is the <nl> - * intercepted token ( for instead of if ) . Example : <nl> + * number of nested layers can be configured . The default value is 1 . <nl> + * The code for the class is copied from the NestedIfDepthCheck - class . <nl> + * The only difference is the intercepted token ( for instead of if ) . <nl> + * Example : <nl> * < pre > <nl> * & lt ; ! - - Restricts nested for blocks to a specified depth ( default = 1 ) . <nl> * - - & gt ; <nl> @ @ - 38 , 10 + 39 , 9 @ @ import com . puppycrawl . tools . checkstyle . api . TokenTypes ; <nl> * & lt ; / module & gt ; <nl> * < / pre > <nl> * @ author Alexander Jesse <nl> - * @ see AbstractNestedDepthCheck <nl> * @ see NestedIfDepthCheck <nl> * / <nl> - public final class NestedForDepthCheck extends AbstractNestedDepthCheck { <nl> + public final class NestedForDepthCheck extends Check { <nl> <nl> / * * <nl> * A key is pointing to the warning message text in " messages . properties " <nl> @ @ - 49 , 17 + 49 , 22 @ @ public final class NestedForDepthCheck extends AbstractNestedDepthCheck { <nl> * / <nl> public static final String MSG _ KEY = " nested . for . depth " ; <nl> <nl> - / * * Default allowed nesting depth . * / <nl> - private static final int DEFAULT _ MAX = 1 ; <nl> + / * * Maximum allowed nesting depth . * / <nl> + private int max = 1 ; <nl> + / * * Current nesting depth . * / <nl> + private int depth ; <nl> <nl> - / * * Creates new check instance with default allowed nesting depth . * / <nl> - public NestedForDepthCheck ( ) { <nl> - super ( DEFAULT _ MAX ) ; <nl> + / * * <nl> + * Setter for maximum allowed nesting depth . <nl> + * @ param max maximum allowed nesting depth . <nl> + * / <nl> + public void setMax ( int max ) { <nl> + this . max = max ; <nl> } <nl> <nl> @ Override <nl> public int [ ] getDefaultTokens ( ) { <nl> - return new int [ ] { TokenTypes . LITERAL _ FOR } ; <nl> + return getAcceptableTokens ( ) ; <nl> } <nl> <nl> @ Override <nl> @ @ - 68 , 12 + 73 , 25 @ @ public final class NestedForDepthCheck extends AbstractNestedDepthCheck { <nl> } <nl> <nl> @ Override <nl> + public int [ ] getRequiredTokens ( ) { <nl> + return getAcceptableTokens ( ) ; <nl> + } <nl> + <nl> + @ Override <nl> + public void beginTree ( DetailAST rootAST ) { <nl> + depth = 0 ; <nl> + } <nl> + <nl> + @ Override <nl> public void visitToken ( DetailAST ast ) { <nl> - nestIn ( ast , MSG _ KEY ) ; <nl> + if ( depth > max ) { <nl> + log ( ast , MSG _ KEY , depth , max ) ; <nl> + } <nl> + + + depth ; <nl> } <nl> <nl> @ Override <nl> public void leaveToken ( DetailAST ast ) { <nl> - nestOut ( ) ; <nl> + - - depth ; <nl> } <nl> }
NEAREST DIFF (one line): diff - - git a / build . xml b / build . xml <nl> index c0e6c1e . . 091f363 100644 <nl> - - - a / build . xml <nl> + + + b / build . xml <nl> @ @ - 7 , 7 + 7 , 7 @ @ <nl> < property file = " checkstyle . buildproperties " / > <nl> < property file = " $ { user . home } / checkstyle . buildproperties " / > <nl> <nl> - < property name = " version " value = " 5 . 1 " / > <nl> + < property name = " version " value = " 5 . 2 - SNAPSHOT " / > <nl> < property name = " ant . jar " value = " $ { ant . home } / lib / ant . jar " / > <nl> < property name = " antlr . jar " value = " lib / antlr . jar " / > <nl> < property name = " velocity . jar " value = " lib / velocity - dep - 1 . 4 . jar " / > <nl> diff - - git a / pom . xml b / pom . xml <nl> index 94c1e12 . . 9022f1f 100755 <nl> - - - a / pom . xml <nl> + + + b / pom . xml <nl> @ @ - 2 , 7 + 2 , 7 @ @ <nl> < modelVersion > 4 . 0 . 0 < / modelVersion > <nl> < groupId > checkstyle < / groupId > <nl> < artifactId > checkstyle < / artifactId > <nl> - < version > 5 . 1 < / version > <nl> + < version > 5 . 2 - SNAPSHOT < / version > <nl> < packaging > jar < / packaging > <nl> < name > Checkstyle < / name > <nl> < url > http : / / checkstyle . sourceforge . net / < / url >

TEST DIFF:
diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / coding / NestedForDepthCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / coding / NestedForDepthCheck . java 
 index 4479991 . . 4aa5c74 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / coding / NestedForDepthCheck . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / coding / NestedForDepthCheck . java 
 @ @ - 19 , 15 + 19 , 16 @ @ 
 
 package com . puppycrawl . tools . checkstyle . checks . coding ; 
 
 + import com . puppycrawl . tools . checkstyle . api . Check ; 
 import com . puppycrawl . tools . checkstyle . api . DetailAST ; 
 import com . puppycrawl . tools . checkstyle . api . TokenTypes ; 
 
 / * * 
 * Check the number of nested { @ code for } - statements . The maximum 
 - * number of nested layers can be configured . The default value is 1 . Most of 
 - * the logic is implemented in the parent class . The code for the class is 
 - * copied from the NestedIfDepthCheck - class . The only difference is the 
 - * intercepted token ( for instead of if ) . Example : 
 + * number of nested layers can be configured . The default value is 1 . 
 + * The code for the class is copied from the NestedIfDepthCheck - class . 
 + * The only difference is the intercepted token ( for instead of if ) . 
 + * Example : 
 * < pre > 
 * & lt ; ! - - Restricts nested for blocks to a specified depth ( default = 1 ) . 
 * - - & gt ; 
 @ @ - 38 , 10 + 39 , 9 @ @ import com . puppycrawl . tools . checkstyle . api . TokenTypes ; 
 * & lt ; / module & gt ; 
 * < / pre > 
 * @ author Alexander Jesse 
 - * @ see AbstractNestedDepthCheck 
 * @ see NestedIfDepthCheck 
 * / 
 - public final class NestedForDepthCheck extends AbstractNestedDepthCheck { 
 + public final class NestedForDepthCheck extends Check { 
 
 / * * 
 * A key is pointing to the warning message text in " messages . properties " 
 @ @ - 49 , 17 + 49 , 22 @ @ public final class NestedForDepthCheck extends AbstractNestedDepthCheck { 
 * / 
 public static final String MSG _ KEY = " nested . for . depth " ; 
 
 - / * * Default allowed nesting depth . * / 
 - private static final int DEFAULT _ MAX = 1 ; 
 + / * * Maximum allowed nesting depth . * / 
 + private int max = 1 ; 
 + / * * Current nesting depth . * / 
 + private int depth ; 
 
 - / * * Creates new check instance with default allowed nesting depth . * / 
 - public NestedForDepthCheck ( ) { 
 - super ( DEFAULT _ MAX ) ; 
 + / * * 
 + * Setter for maximum allowed nesting depth . 
 + * @ param max maximum allowed nesting depth . 
 + * / 
 + public void setMax ( int max ) { 
 + this . max = max ; 
 } 
 
 @ Override 
 public int [ ] getDefaultTokens ( ) { 
 - return new int [ ] { TokenTypes . LITERAL _ FOR } ; 
 + return getAcceptableTokens ( ) ; 
 } 
 
 @ Override 
 @ @ - 68 , 12 + 73 , 25 @ @ public final class NestedForDepthCheck extends AbstractNestedDepthCheck { 
 } 
 
 @ Override 
 + public int [ ] getRequiredTokens ( ) { 
 + return getAcceptableTokens ( ) ; 
 + } 
 + 
 + @ Override 
 + public void beginTree ( DetailAST rootAST ) { 
 + depth = 0 ; 
 + } 
 + 
 + @ Override 
 public void visitToken ( DetailAST ast ) { 
 - nestIn ( ast , MSG _ KEY ) ; 
 + if ( depth > max ) { 
 + log ( ast , MSG _ KEY , depth , max ) ; 
 + } 
 + + + depth ; 
 } 
 
 @ Override 
 public void leaveToken ( DetailAST ast ) { 
 - nestOut ( ) ; 
 + - - depth ; 
 } 
 }

NEAREST DIFF:
diff - - git a / build . xml b / build . xml 
 index c0e6c1e . . 091f363 100644 
 - - - a / build . xml 
 + + + b / build . xml 
 @ @ - 7 , 7 + 7 , 7 @ @ 
 < property file = " checkstyle . buildproperties " / > 
 < property file = " $ { user . home } / checkstyle . buildproperties " / > 
 
 - < property name = " version " value = " 5 . 1 " / > 
 + < property name = " version " value = " 5 . 2 - SNAPSHOT " / > 
 < property name = " ant . jar " value = " $ { ant . home } / lib / ant . jar " / > 
 < property name = " antlr . jar " value = " lib / antlr . jar " / > 
 < property name = " velocity . jar " value = " lib / velocity - dep - 1 . 4 . jar " / > 
 diff - - git a / pom . xml b / pom . xml 
 index 94c1e12 . . 9022f1f 100755 
 - - - a / pom . xml 
 + + + b / pom . xml 
 @ @ - 2 , 7 + 2 , 7 @ @ 
 < modelVersion > 4 . 0 . 0 < / modelVersion > 
 < groupId > checkstyle < / groupId > 
 < artifactId > checkstyle < / artifactId > 
 - < version > 5 . 1 < / version > 
 + < version > 5 . 2 - SNAPSHOT < / version > 
 < packaging > jar < / packaging > 
 < name > Checkstyle < / name > 
 < url > http : / / checkstyle . sourceforge . net / < / url >
