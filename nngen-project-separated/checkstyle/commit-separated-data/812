BLEU SCORE: 0.02200011591691211

TEST MSG: Issue # 1571 : Use catalog files as an alternative to SourceForge dtds location
GENERATED MSG: Solution to " Incorrect config file cause CLI finish with error but no output with details " solves # 1180

TEST DIFF (one line): diff - - git a / config / catalog . xml b / config / catalog . xml <nl> new file mode 100644 <nl> index 0000000 . . 6676ce8 <nl> - - - / dev / null <nl> + + + b / config / catalog . xml <nl> @ @ - 0 , 0 + 1 , 14 @ @ <nl> + < ? xml version = " 1 . 0 " encoding = " UTF - 8 " ? > <nl> + <nl> + < catalog xmlns = " urn : oasis : names : tc : entity : xmlns : xml : catalog " > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / configuration _ 1 _ 0 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 0 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / configuration _ 1 _ 1 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 1 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / configuration _ 1 _ 2 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 2 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / configuration _ 1 _ 3 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 3 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / packages _ 1 _ 0 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / packages _ 1 _ 0 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / suppressions _ 1 _ 0 . dtd " uri = " . / . . / src / main / resources / com / puppycrawl / tools / checkstyle / suppressions _ 1 _ 0 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / suppressions _ 1 _ 1 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / suppressions _ 1 _ 1 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 0 . dtd " uri = " . / . . / src / main / resources / com / puppycrawl / tools / checkstyle / checks / imports / import _ control _ 1 _ 0 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 1 . dtd " uri = " . / . . / src / main / resources / com / puppycrawl / tools / checkstyle / checks / imports / import _ control _ 1 _ 1 . dtd " / > <nl> + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 2 . dtd " uri = " . / . . / src / main / resources / com / puppycrawl / tools / checkstyle / checks / imports / import _ control _ 1 _ 2 . dtd " / > <nl> + < / catalog > <nl> diff - - git a / pom . xml b / pom . xml <nl> index 0b390ff . . 9ddcfa3 100644 <nl> - - - a / pom . xml <nl> + + + b / pom . xml <nl> @ @ - 957 , 6 + 957 , 9 @ @ <nl> < systemId > src / main / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 3 . dtd < / systemId > <nl> < / validationSet > <nl> < / validationSets > <nl> + < catalogs > <nl> + < catalog > config / catalog . xml < / catalog > <nl> + < / catalogs > <nl> < / configuration > <nl> < / plugin > <nl> < plugin >
NEAREST DIFF (one line): diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheck . java <nl> index afaa970 . . c4818f8 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheck . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheck . java <nl> @ @ - 26 , 6 + 26 , 8 @ @ import com . puppycrawl . tools . checkstyle . api . TokenTypes ; <nl> / * * <nl> * < p > <nl> * Restricts throws statements to a specified count ( default = 1 ) . <nl> + * Methods with " Override " or " java . lang . Override " annotation are skipped <nl> + * from validation as current class cannot change signature of these methods . <nl> * < / p > <nl> * < p > <nl> * Rationale : <nl> @ @ - 110 , 11 + 112 , 51 @ @ public final class ThrowsCountCheck extends Check { <nl> * @ param ast throws for check . <nl> * / <nl> private void visitLiteralThrows ( DetailAST ast ) { <nl> - / / Account for all the commas ! <nl> - final int count = ( ast . getChildCount ( ) + 1 ) / 2 ; <nl> - if ( count > getMax ( ) ) { <nl> - log ( ast . getLineNo ( ) , ast . getColumnNo ( ) , MSG _ KEY , <nl> - count , getMax ( ) ) ; <nl> + if ( ! isOverriding ( ast ) ) { <nl> + / / Account for all the commas ! <nl> + final int count = ( ast . getChildCount ( ) + 1 ) / 2 ; <nl> + if ( count > getMax ( ) ) { <nl> + log ( ast . getLineNo ( ) , ast . getColumnNo ( ) , MSG _ KEY , <nl> + count , getMax ( ) ) ; <nl> + } <nl> } <nl> } <nl> + <nl> + / * * <nl> + * Check if a method has annotation @ Override . <nl> + * @ param ast throws , which is being checked . <nl> + * @ return true , if a method has annotation @ Override . <nl> + * / <nl> + private static boolean isOverriding ( DetailAST ast ) { <nl> + final DetailAST modifiers = ast . getParent ( ) . findFirstToken ( TokenTypes . MODIFIERS ) ; <nl> + boolean isOverriding = false ; <nl> + if ( modifiers . branchContains ( TokenTypes . ANNOTATION ) ) { <nl> + DetailAST child = modifiers . getFirstChild ( ) ; <nl> + while ( child ! = null ) { <nl> + if ( child . getType ( ) = = TokenTypes . ANNOTATION <nl> + & & " Override " . equals ( getAnnotationName ( child ) ) ) { <nl> + isOverriding = true ; <nl> + } <nl> + child = child . getNextSibling ( ) ; <nl> + } <nl> + } <nl> + return isOverriding ; <nl> + } <nl> + <nl> + / * * <nl> + * Gets name of an annotation . <nl> + * @ param annotation to get name of . <nl> + * @ return name of an annotation . <nl> + * / <nl> + private static String getAnnotationName ( DetailAST annotation ) { <nl> + final DetailAST dotAst = annotation . findFirstToken ( TokenTypes . DOT ) ; <nl> + String name ; <nl> + if ( dotAst ! = null ) { <nl> + name = dotAst . findFirstToken ( TokenTypes . IDENT ) . getText ( ) ; <nl> + } <nl> + else { <nl> + name = annotation . findFirstToken ( TokenTypes . IDENT ) . getText ( ) ; <nl> + } <nl> + return name ; <nl> + } <nl> } <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheckTest . java <nl> index 685aac6 . . 96c494c 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheckTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheckTest . java <nl> @ @ - 45 , 6 + 45 , 7 @ @ public class ThrowsCountCheckTest extends BaseCheckTestSupport { <nl> " 14 : 20 : " + getCheckMessage ( MSG _ KEY , 2 , 1 ) , <nl> " 18 : 20 : " + getCheckMessage ( MSG _ KEY , 2 , 1 ) , <nl> " 22 : 20 : " + getCheckMessage ( MSG _ KEY , 3 , 1 ) , <nl> + " 45 : 43 : " + getCheckMessage ( MSG _ KEY , 2 , 1 ) , <nl> } ; <nl> <nl> verify ( checkConfig , getPath ( " design " + File . separator + " InputThrowsCount . java " ) , expected ) ; <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / design / InputThrowsCount . java b / src / test / resources / com / puppycrawl / tools / checkstyle / design / InputThrowsCount . java <nl> index c2caedc . . dfb57c1 100644 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / design / InputThrowsCount . java <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / design / InputThrowsCount . java <nl> @ @ - 26 , 3 + 26 , 26 @ @ public class InputThrowsCount { <nl> void method6 ( ) { <nl> } <nl> } <nl> + <nl> + class SubClass extends InputThrowsCount { <nl> + @ Override <nl> + void method1 ( ) { <nl> + } <nl> + <nl> + @ Deprecated <nl> + @ Override <nl> + void method4 ( ) throws Exception , java . awt . AWTException { <nl> + } <nl> + <nl> + @ Override <nl> + void method5 ( ) throws Exception , AWTException , Throwable { <nl> + } <nl> + <nl> + @ SuppressWarnings ( " deprecation " ) <nl> + final void method2 ( Object . . . objects ) throws Exception , AWTException { <nl> + } <nl> + <nl> + @ java . lang . Override <nl> + void method3 ( ) throws Exception { <nl> + } <nl> + } <nl> \ No newline at end of file <nl> diff - - git a / src / xdocs / config _ design . xml b / src / xdocs / config _ design . xml <nl> index f40dfe6 . . 51053a2 100644 <nl> - - - a / src / xdocs / config _ design . xml <nl> + + + b / src / xdocs / config _ design . xml <nl> @ @ - 578 , 6 + 578 , 8 @ @ public class StringUtils / / not final to allow subclassing <nl> < subsection name = " Description " > <nl> < p > <nl> Restricts throws statements to a specified count ( 1 by default ) . <nl> + Methods with " Override " or " java . lang . Override " annotation are skipped <nl> + from validation as current class cannot change signature of these methods . <nl> < / p > <nl> <nl> < p >

TEST DIFF:
diff - - git a / config / catalog . xml b / config / catalog . xml 
 new file mode 100644 
 index 0000000 . . 6676ce8 
 - - - / dev / null 
 + + + b / config / catalog . xml 
 @ @ - 0 , 0 + 1 , 14 @ @ 
 + < ? xml version = " 1 . 0 " encoding = " UTF - 8 " ? > 
 + 
 + < catalog xmlns = " urn : oasis : names : tc : entity : xmlns : xml : catalog " > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / configuration _ 1 _ 0 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 0 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / configuration _ 1 _ 1 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 1 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / configuration _ 1 _ 2 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 2 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / configuration _ 1 _ 3 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 3 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / packages _ 1 _ 0 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / packages _ 1 _ 0 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / suppressions _ 1 _ 0 . dtd " uri = " . / . . / src / main / resources / com / puppycrawl / tools / checkstyle / suppressions _ 1 _ 0 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / suppressions _ 1 _ 1 . dtd " uri = " . / . . / src / main / java / resources / com / puppycrawl / tools / checkstyle / suppressions _ 1 _ 1 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 0 . dtd " uri = " . / . . / src / main / resources / com / puppycrawl / tools / checkstyle / checks / imports / import _ control _ 1 _ 0 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 1 . dtd " uri = " . / . . / src / main / resources / com / puppycrawl / tools / checkstyle / checks / imports / import _ control _ 1 _ 1 . dtd " / > 
 + < system systemId = " http : / / checkstyle . sourceforge . net / dtds / import _ control _ 1 _ 2 . dtd " uri = " . / . . / src / main / resources / com / puppycrawl / tools / checkstyle / checks / imports / import _ control _ 1 _ 2 . dtd " / > 
 + < / catalog > 
 diff - - git a / pom . xml b / pom . xml 
 index 0b390ff . . 9ddcfa3 100644 
 - - - a / pom . xml 
 + + + b / pom . xml 
 @ @ - 957 , 6 + 957 , 9 @ @ 
 < systemId > src / main / resources / com / puppycrawl / tools / checkstyle / configuration _ 1 _ 3 . dtd < / systemId > 
 < / validationSet > 
 < / validationSets > 
 + < catalogs > 
 + < catalog > config / catalog . xml < / catalog > 
 + < / catalogs > 
 < / configuration > 
 < / plugin > 
 < plugin >

NEAREST DIFF:
diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheck . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheck . java 
 index afaa970 . . c4818f8 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheck . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheck . java 
 @ @ - 26 , 6 + 26 , 8 @ @ import com . puppycrawl . tools . checkstyle . api . TokenTypes ; 
 / * * 
 * < p > 
 * Restricts throws statements to a specified count ( default = 1 ) . 
 + * Methods with " Override " or " java . lang . Override " annotation are skipped 
 + * from validation as current class cannot change signature of these methods . 
 * < / p > 
 * < p > 
 * Rationale : 
 @ @ - 110 , 11 + 112 , 51 @ @ public final class ThrowsCountCheck extends Check { 
 * @ param ast throws for check . 
 * / 
 private void visitLiteralThrows ( DetailAST ast ) { 
 - / / Account for all the commas ! 
 - final int count = ( ast . getChildCount ( ) + 1 ) / 2 ; 
 - if ( count > getMax ( ) ) { 
 - log ( ast . getLineNo ( ) , ast . getColumnNo ( ) , MSG _ KEY , 
 - count , getMax ( ) ) ; 
 + if ( ! isOverriding ( ast ) ) { 
 + / / Account for all the commas ! 
 + final int count = ( ast . getChildCount ( ) + 1 ) / 2 ; 
 + if ( count > getMax ( ) ) { 
 + log ( ast . getLineNo ( ) , ast . getColumnNo ( ) , MSG _ KEY , 
 + count , getMax ( ) ) ; 
 + } 
 } 
 } 
 + 
 + / * * 
 + * Check if a method has annotation @ Override . 
 + * @ param ast throws , which is being checked . 
 + * @ return true , if a method has annotation @ Override . 
 + * / 
 + private static boolean isOverriding ( DetailAST ast ) { 
 + final DetailAST modifiers = ast . getParent ( ) . findFirstToken ( TokenTypes . MODIFIERS ) ; 
 + boolean isOverriding = false ; 
 + if ( modifiers . branchContains ( TokenTypes . ANNOTATION ) ) { 
 + DetailAST child = modifiers . getFirstChild ( ) ; 
 + while ( child ! = null ) { 
 + if ( child . getType ( ) = = TokenTypes . ANNOTATION 
 + & & " Override " . equals ( getAnnotationName ( child ) ) ) { 
 + isOverriding = true ; 
 + } 
 + child = child . getNextSibling ( ) ; 
 + } 
 + } 
 + return isOverriding ; 
 + } 
 + 
 + / * * 
 + * Gets name of an annotation . 
 + * @ param annotation to get name of . 
 + * @ return name of an annotation . 
 + * / 
 + private static String getAnnotationName ( DetailAST annotation ) { 
 + final DetailAST dotAst = annotation . findFirstToken ( TokenTypes . DOT ) ; 
 + String name ; 
 + if ( dotAst ! = null ) { 
 + name = dotAst . findFirstToken ( TokenTypes . IDENT ) . getText ( ) ; 
 + } 
 + else { 
 + name = annotation . findFirstToken ( TokenTypes . IDENT ) . getText ( ) ; 
 + } 
 + return name ; 
 + } 
 } 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheckTest . java 
 index 685aac6 . . 96c494c 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheckTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / design / ThrowsCountCheckTest . java 
 @ @ - 45 , 6 + 45 , 7 @ @ public class ThrowsCountCheckTest extends BaseCheckTestSupport { 
 " 14 : 20 : " + getCheckMessage ( MSG _ KEY , 2 , 1 ) , 
 " 18 : 20 : " + getCheckMessage ( MSG _ KEY , 2 , 1 ) , 
 " 22 : 20 : " + getCheckMessage ( MSG _ KEY , 3 , 1 ) , 
 + " 45 : 43 : " + getCheckMessage ( MSG _ KEY , 2 , 1 ) , 
 } ; 
 
 verify ( checkConfig , getPath ( " design " + File . separator + " InputThrowsCount . java " ) , expected ) ; 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / design / InputThrowsCount . java b / src / test / resources / com / puppycrawl / tools / checkstyle / design / InputThrowsCount . java 
 index c2caedc . . dfb57c1 100644 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / design / InputThrowsCount . java 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / design / InputThrowsCount . java 
 @ @ - 26 , 3 + 26 , 26 @ @ public class InputThrowsCount { 
 void method6 ( ) { 
 } 
 } 
 + 
 + class SubClass extends InputThrowsCount { 
 + @ Override 
 + void method1 ( ) { 
 + } 
 + 
 + @ Deprecated 
 + @ Override 
 + void method4 ( ) throws Exception , java . awt . AWTException { 
 + } 
 + 
 + @ Override 
 + void method5 ( ) throws Exception , AWTException , Throwable { 
 + } 
 + 
 + @ SuppressWarnings ( " deprecation " ) 
 + final void method2 ( Object . . . objects ) throws Exception , AWTException { 
 + } 
 + 
 + @ java . lang . Override 
 + void method3 ( ) throws Exception { 
 + } 
 + } 
 \ No newline at end of file 
 diff - - git a / src / xdocs / config _ design . xml b / src / xdocs / config _ design . xml 
 index f40dfe6 . . 51053a2 100644 
 - - - a / src / xdocs / config _ design . xml 
 + + + b / src / xdocs / config _ design . xml 
 @ @ - 578 , 6 + 578 , 8 @ @ public class StringUtils / / not final to allow subclassing 
 < subsection name = " Description " > 
 < p > 
 Restricts throws statements to a specified count ( 1 by default ) . 
 + Methods with " Override " or " java . lang . Override " annotation are skipped 
 + from validation as current class cannot change signature of these methods . 
 < / p > 
 
 < p >
