BLEU SCORE: 0.07030417713400726

TEST MSG: Issue # 605 : disabled failing wercker CI
GENERATED MSG: Issue # 3159 : Reduce the number of tasks performed by Travis CI

TEST DIFF (one line): diff - - git a / wercker . yml b / wercker . yml <nl> index 0141b8d . . 31bbdb5 100644 <nl> - - - a / wercker . yml <nl> + + + b / wercker . yml <nl> @ @ - 77 , 23 + 77 , 23 @ @ build : <nl> echo " build is skipped . . . " <nl> fi <nl> <nl> - # NoErrorTest - XWiki ( oraclejdk8 ) <nl> - - script : <nl> - name : NoErrorTest - XWiki <nl> - code : | <nl> - if [ [ $ SKIP _ CI = = ' false ' ] ] ; then <nl> - set - e <nl> - CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) <nl> - echo CS _ version : $ { CS _ POM _ VERSION } <nl> - for i in 1 2 3 4 5 ; do git clone https : / / github . com / xwiki / xwiki - commons / & & break | | sleep 15 ; done <nl> - cd xwiki - commons / xwiki - commons - core <nl> - git checkout xwiki - commons - 8 . 2 - milestone - 1 <nl> - mvn install - DskipTests - Dxwiki . clirr . skip = true checkstyle : check - Dcheckstyle . version = $ { CS _ POM _ VERSION } <nl> - cd . . / . . / <nl> - rm - rf xwiki - commons <nl> - else <nl> - echo " build is skipped . . . " <nl> - fi <nl> + # # NoErrorTest - XWiki ( oraclejdk8 ) <nl> + # - script : <nl> + # name : NoErrorTest - XWiki <nl> + # code : | <nl> + # if [ [ $ SKIP _ CI = = ' false ' ] ] ; then <nl> + # set - e <nl> + # CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) <nl> + # echo CS _ version : $ { CS _ POM _ VERSION } <nl> + # for i in 1 2 3 4 5 ; do git clone https : / / github . com / xwiki / xwiki - commons / & & break | | sleep 15 ; done <nl> + # cd xwiki - commons / xwiki - commons - core <nl> + # git checkout xwiki - commons - 8 . 2 - milestone - 1 <nl> + # mvn install - DskipTests - Dxwiki . clirr . skip = true checkstyle : check - Dcheckstyle . version = $ { CS _ POM _ VERSION } <nl> + # cd . . / . . / <nl> + # rm - rf xwiki - commons <nl> + # else <nl> + # echo " build is skipped . . . " <nl> + # fi <nl> <nl> # NoErrorTest - Apache Apex ( oraclejdk8 ) <nl> - script : <nl> @ @ - 112 , 24 + 112 , 24 @ @ build : <nl> echo " build is skipped . . . " <nl> fi <nl> <nl> - # NoErrorTest - Hibernate Search ( oraclejdk8 ) <nl> - - script : <nl> - name : NoErrorTest - Hibernate Search <nl> - code : | <nl> - if [ [ $ SKIP _ CI = = ' false ' ] ] ; then <nl> - set - e <nl> - CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) <nl> - echo CS _ version : $ { CS _ POM _ VERSION } <nl> - for i in 1 2 3 4 5 ; do git clone https : / / github . com / hibernate / hibernate - search . git & & break | | sleep 15 ; done <nl> - cd hibernate - search <nl> - git checkout 5 . 8 . 0 . Beta1 <nl> - mvn - s settings - example . xml clean install - DskipTests = true - DtestElasticsearchVersion = false <nl> - mvn - s settings - example . xml checkstyle : check - Dpuppycrawl . checkstyle . version = $ { CS _ POM _ VERSION } <nl> - cd . . / <nl> - rm - rf hibernate - search <nl> - else <nl> - echo " build is skipped . . . " <nl> - fi <nl> + # # NoErrorTest - Hibernate Search ( oraclejdk8 ) <nl> + # - script : <nl> + # name : NoErrorTest - Hibernate Search <nl> + # code : | <nl> + # if [ [ $ SKIP _ CI = = ' false ' ] ] ; then <nl> + # set - e <nl> + # CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) <nl> + # echo CS _ version : $ { CS _ POM _ VERSION } <nl> + # for i in 1 2 3 4 5 ; do git clone https : / / github . com / hibernate / hibernate - search . git & & break | | sleep 15 ; done <nl> + # cd hibernate - search <nl> + # git checkout 5 . 8 . 0 . Beta1 <nl> + # mvn - s settings - example . xml clean install - DskipTests = true - DtestElasticsearchVersion = false <nl> + # mvn - s settings - example . xml checkstyle : check - Dpuppycrawl . checkstyle . version = $ { CS _ POM _ VERSION } <nl> + # cd . . / <nl> + # rm - rf hibernate - search <nl> + # else <nl> + # echo " build is skipped . . . " <nl> + # fi <nl> <nl> # NoErrorTest - HtmlUnit ( oraclejdk8 ) <nl> - script : <nl> @ @ - 150 , 18 + 150 , 18 @ @ build : <nl> echo " build is skipped . . . " <nl> fi <nl> <nl> - # NoErrorTest - checkstyle ' s sevntu <nl> - - script : <nl> - name : NoErrorTest - checkstyle ' s sevntu <nl> - code : | <nl> - if [ [ $ SKIP _ CI = = ' false ' ] ] ; then <nl> - set - e <nl> - CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) <nl> - echo CS _ version : $ { CS _ POM _ VERSION } <nl> - mvn compile verify - Dmaven . sevntu - checkstyle - check . checkstyle . version = $ { CS _ POM _ VERSION } - Dmaven . test . skip = true - Dcheckstyle . ant . skip = true - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true - Dforbiddenapis . skip = true - Dxml . skip = true <nl> - else <nl> - echo " build is skipped . . . " <nl> - fi <nl> + # # NoErrorTest - checkstyle ' s sevntu <nl> + # - script : <nl> + # name : NoErrorTest - checkstyle ' s sevntu <nl> + # code : | <nl> + # if [ [ $ SKIP _ CI = = ' false ' ] ] ; then <nl> + # set - e <nl> + # CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) <nl> + # echo CS _ version : $ { CS _ POM _ VERSION } <nl> + # mvn compile verify - Dmaven . sevntu - checkstyle - check . checkstyle . version = $ { CS _ POM _ VERSION } - Dmaven . test . skip = true - Dcheckstyle . ant . skip = true - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true - Dforbiddenapis . skip = true - Dxml . skip = true <nl> + # else <nl> + # echo " build is skipped . . . " <nl> + # fi <nl> <nl> # NoExceptiontest - Apache Struts ( oraclejdk8 ) <nl> - script :
NEAREST DIFF (one line): diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / AbstractExpressionHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / AbstractExpressionHandler . java <nl> index 1a5fe91 . . 67fc54d 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / AbstractExpressionHandler . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / AbstractExpressionHandler . java <nl> @ @ - 236 , 9 + 236 , 9 @ @ public abstract class AbstractExpressionHandler { <nl> * <nl> * @ return the start of the specified line <nl> * / <nl> - protected final int getLineStart ( String line ) { <nl> + private int getLineStart ( String line ) { <nl> int index = 0 ; <nl> - while ( index < line . length ( ) & & Character . isWhitespace ( line . charAt ( index ) ) ) { <nl> + while ( Character . isWhitespace ( line . charAt ( index ) ) ) { <nl> index + + ; <nl> } <nl> return CommonUtils . lengthExpandedTabs ( <nl> @ @ - 256 , 27 + 256 , 6 @ @ public abstract class AbstractExpressionHandler { <nl> } <nl> <nl> / * * <nl> - * Check the indentation of consecutive lines for the expression we are <nl> - * handling . <nl> - * <nl> - * @ param startLine the first line to check <nl> - * @ param endLine the last line to check <nl> - * @ param indentLevel the required indent level <nl> - * / <nl> - protected final void checkLinesIndent ( int startLine , int endLine , <nl> - IndentLevel indentLevel ) { <nl> - / / check first line <nl> - checkLineIndent ( startLine , indentLevel ) ; <nl> - <nl> - / / check following lines <nl> - final IndentLevel offsetLevel = <nl> - new IndentLevel ( indentLevel , getBasicOffset ( ) ) ; <nl> - for ( int i = startLine + 1 ; i < = endLine ; i + + ) { <nl> - checkLineIndent ( i , offsetLevel ) ; <nl> - } <nl> - } <nl> - <nl> - / * * <nl> * Check the indentation for a set of lines . <nl> * <nl> * @ param lines the set of lines to check <nl> @ @ - 329 , 22 + 308 , 6 @ @ public abstract class AbstractExpressionHandler { <nl> } <nl> <nl> / * * <nl> - * Check the indent level for a single line . <nl> - * <nl> - * @ param lineNum the line number to check <nl> - * @ param indentLevel the required indent level <nl> - * / <nl> - private void checkLineIndent ( int lineNum , IndentLevel indentLevel ) { <nl> - final String line = indentCheck . getLine ( lineNum - 1 ) ; <nl> - if ( ! line . isEmpty ( ) ) { <nl> - final int start = getLineStart ( line ) ; <nl> - if ( indentLevel . isGreaterThan ( start ) ) { <nl> - logChildError ( lineNum , start , indentLevel ) ; <nl> - } <nl> - } <nl> - } <nl> - <nl> - / * * <nl> * Check the indentation for a single line . <nl> * <nl> * @ param lineNum the number of the line to check <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / ImportHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / ImportHandler . java <nl> index d1a93c3 . . 54fc104 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / ImportHandler . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / ImportHandler . java <nl> @ @ - 43 , 12 + 43 , 14 @ @ public class ImportHandler extends AbstractExpressionHandler { <nl> <nl> @ Override <nl> public void checkIndentation ( ) { <nl> - final int lineStart = getMainAst ( ) . getLineNo ( ) ; <nl> - final DetailAST semi = getMainAst ( ) . findFirstToken ( TokenTypes . SEMI ) ; <nl> - final int lineEnd = semi . getLineNo ( ) ; <nl> + final int columnNo = expandedTabsColumnNo ( getMainAst ( ) ) ; <nl> <nl> - if ( getMainAst ( ) . getLineNo ( ) ! = lineEnd ) { <nl> - checkLinesIndent ( lineStart , lineEnd , getIndent ( ) ) ; <nl> + if ( ! getIndent ( ) . isAcceptable ( columnNo ) & & isOnStartOfLine ( getMainAst ( ) ) ) { <nl> + logError ( getMainAst ( ) , " " , columnNo ) ; <nl> } <nl> + <nl> + final DetailAST semi = getMainAst ( ) . findFirstToken ( TokenTypes . SEMI ) ; <nl> + <nl> + checkWrappingIndentation ( getMainAst ( ) , semi ) ; <nl> } <nl> } <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / LineWrappingHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / LineWrappingHandler . java <nl> index 7e1ff94 . . 2127ba6 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / LineWrappingHandler . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / LineWrappingHandler . java <nl> @ @ - 201 , 7 + 201 , 8 @ @ public class LineWrappingHandler { <nl> & & node . equals ( lastAnnotationNode ) ; <nl> if ( isCurrentNodeCloseAnnotationAloneInLine <nl> | | node . getType ( ) = = TokenTypes . AT <nl> - & & parentNode . getParent ( ) . getType ( ) = = TokenTypes . MODIFIERS ) { <nl> + & & ( parentNode . getParent ( ) . getType ( ) = = TokenTypes . MODIFIERS <nl> + | | parentNode . getParent ( ) . getType ( ) = = TokenTypes . ANNOTATIONS ) ) { <nl> logWarningMessage ( node , firstNodeIndent ) ; <nl> } <nl> else { <nl> diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / PackageDefHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / PackageDefHandler . java <nl> index 6ab177d . . d113657 100644 <nl> - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / PackageDefHandler . java <nl> + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / PackageDefHandler . java <nl> @ @ - 44 , 12 + 44 , 13 @ @ public class PackageDefHandler extends AbstractExpressionHandler { <nl> @ Override <nl> public void checkIndentation ( ) { <nl> final int columnNo = expandedTabsColumnNo ( getMainAst ( ) ) ; <nl> - if ( ! getIndent ( ) . isAcceptable ( columnNo ) ) { <nl> + <nl> + if ( ! getIndent ( ) . isAcceptable ( columnNo ) & & isOnStartOfLine ( getMainAst ( ) ) ) { <nl> logError ( getMainAst ( ) , " " , columnNo ) ; <nl> } <nl> <nl> - checkLinesIndent ( getMainAst ( ) . getLineNo ( ) , <nl> - getMainAst ( ) . findFirstToken ( TokenTypes . SEMI ) . getLineNo ( ) , <nl> - getIndent ( ) ) ; <nl> + final DetailAST semi = getMainAst ( ) . findFirstToken ( TokenTypes . SEMI ) ; <nl> + <nl> + checkWrappingIndentation ( getMainAst ( ) , semi ) ; <nl> } <nl> } <nl> diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java <nl> index 4785834 . . 1bbed90 100644 <nl> - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java <nl> + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java <nl> @ @ - 1463 , 7 + 1463 , 8 @ @ public class IndentationCheckTest extends BaseCheckTestSupport { <nl> checkConfig . addAttribute ( " basicOffset " , " 8 " ) ; <nl> checkConfig . addAttribute ( " tabWidth " , " 4 " ) ; <nl> final String [ ] expected = { <nl> - " 4 : " + getCheckMessage ( MSG _ CHILD _ ERROR , " import " , 2 , 8 ) , <nl> + " 4 : " + getCheckMessage ( MSG _ ERROR , " . " , 2 , 4 ) , <nl> + " 5 : " + getCheckMessage ( MSG _ ERROR , " import " , 1 , 0 ) , <nl> } ; <nl> verifyWarns ( checkConfig , getPath ( " InputInvalidImportIndent . java " ) , expected ) ; <nl> } <nl> @ @ - 1604 , 6 + 1605 , 24 @ @ public class IndentationCheckTest extends BaseCheckTestSupport { <nl> } <nl> <nl> @ Test <nl> + public void testPackageDeclaration2 ( ) throws Exception { <nl> + final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; <nl> + checkConfig . addAttribute ( " tabWidth " , " 4 " ) ; <nl> + final String [ ] expected = { <nl> + " 2 : " + getCheckMessage ( MSG _ ERROR , " package def " , 1 , 0 ) , <nl> + } ; <nl> + verifyWarns ( checkConfig , getNonCompilablePath ( " InputPackageDeclaration2 . java " ) , expected ) ; <nl> + } <nl> + <nl> + @ Test <nl> + public void testPackageDeclaration3 ( ) throws Exception { <nl> + final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; <nl> + checkConfig . addAttribute ( " tabWidth " , " 4 " ) ; <nl> + final String [ ] expected = CommonUtils . EMPTY _ STRING _ ARRAY ; <nl> + verifyWarns ( checkConfig , getPath ( " InputPackageDeclaration3 . java " ) , expected ) ; <nl> + } <nl> + <nl> + @ Test <nl> public void testLambda1 ( ) throws Exception { <nl> final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; <nl> checkConfig . addAttribute ( " tabWidth " , " 2 " ) ; <nl> diff - - git a / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration2 . java b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration2 . java <nl> new file mode 100644 <nl> index 0000000 . . ac88911 <nl> - - - / dev / null <nl> + + + b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration2 . java <nl> @ @ - 0 , 0 + 1 , 4 @ @ <nl> + @ Deprecated / / indent : 1 exp : 1 <nl> + package com . puppycrawl . tools . checkstyle . checks . indentation ; / / indent : 1 exp : 0 warn <nl> + <nl> + public class InputPackageDeclaration2 { } / / indent : 0 exp : 0 <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputInvalidImportIndent . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputInvalidImportIndent . java <nl> index 2a3830b . . f08a917 100644 <nl> - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputInvalidImportIndent . java <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputInvalidImportIndent . java <nl> @ @ - 1 , 7 + 1 , 10 @ @ <nl> package com . puppycrawl . tools . checkstyle . checks . indentation ; / / indent : 0 exp : 0 <nl> <nl> import java . util / / indent : 0 exp : 0 <nl> - . RandomAccess ; / / indent : 2 exp : 8 warn <nl> + . RandomAccess ; import java . util . RandomAccess ; / / indent : 2 exp : 4 warn <nl> + import java . util . RandomAccess ; / / indent : 1 exp : 0 warn <nl> + import java . util / / indent : 0 exp : 0 <nl> + . RandomAccess ; / / indent : 19 exp : > = 8 <nl> <nl> / * * / / indent : 0 exp : 0 <nl> * This test - input is intended to be checked using following configuration : / / indent : 1 exp : 1 <nl> diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration3 . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration3 . java <nl> new file mode 100644 <nl> index 0000000 . . 6a7e108 <nl> - - - / dev / null <nl> + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration3 . java <nl> @ @ - 0 , 0 + 1 , 3 @ @ <nl> + / * * Comment * / package com . puppycrawl . tools . checkstyle . checks . indentation ; / / indent : 0 exp : > = 0 <nl> + <nl> + public class InputPackageDeclaration3 { } / / indent : 0 exp : 0

TEST DIFF:
diff - - git a / wercker . yml b / wercker . yml 
 index 0141b8d . . 31bbdb5 100644 
 - - - a / wercker . yml 
 + + + b / wercker . yml 
 @ @ - 77 , 23 + 77 , 23 @ @ build : 
 echo " build is skipped . . . " 
 fi 
 
 - # NoErrorTest - XWiki ( oraclejdk8 ) 
 - - script : 
 - name : NoErrorTest - XWiki 
 - code : | 
 - if [ [ $ SKIP _ CI = = ' false ' ] ] ; then 
 - set - e 
 - CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) 
 - echo CS _ version : $ { CS _ POM _ VERSION } 
 - for i in 1 2 3 4 5 ; do git clone https : / / github . com / xwiki / xwiki - commons / & & break | | sleep 15 ; done 
 - cd xwiki - commons / xwiki - commons - core 
 - git checkout xwiki - commons - 8 . 2 - milestone - 1 
 - mvn install - DskipTests - Dxwiki . clirr . skip = true checkstyle : check - Dcheckstyle . version = $ { CS _ POM _ VERSION } 
 - cd . . / . . / 
 - rm - rf xwiki - commons 
 - else 
 - echo " build is skipped . . . " 
 - fi 
 + # # NoErrorTest - XWiki ( oraclejdk8 ) 
 + # - script : 
 + # name : NoErrorTest - XWiki 
 + # code : | 
 + # if [ [ $ SKIP _ CI = = ' false ' ] ] ; then 
 + # set - e 
 + # CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) 
 + # echo CS _ version : $ { CS _ POM _ VERSION } 
 + # for i in 1 2 3 4 5 ; do git clone https : / / github . com / xwiki / xwiki - commons / & & break | | sleep 15 ; done 
 + # cd xwiki - commons / xwiki - commons - core 
 + # git checkout xwiki - commons - 8 . 2 - milestone - 1 
 + # mvn install - DskipTests - Dxwiki . clirr . skip = true checkstyle : check - Dcheckstyle . version = $ { CS _ POM _ VERSION } 
 + # cd . . / . . / 
 + # rm - rf xwiki - commons 
 + # else 
 + # echo " build is skipped . . . " 
 + # fi 
 
 # NoErrorTest - Apache Apex ( oraclejdk8 ) 
 - script : 
 @ @ - 112 , 24 + 112 , 24 @ @ build : 
 echo " build is skipped . . . " 
 fi 
 
 - # NoErrorTest - Hibernate Search ( oraclejdk8 ) 
 - - script : 
 - name : NoErrorTest - Hibernate Search 
 - code : | 
 - if [ [ $ SKIP _ CI = = ' false ' ] ] ; then 
 - set - e 
 - CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) 
 - echo CS _ version : $ { CS _ POM _ VERSION } 
 - for i in 1 2 3 4 5 ; do git clone https : / / github . com / hibernate / hibernate - search . git & & break | | sleep 15 ; done 
 - cd hibernate - search 
 - git checkout 5 . 8 . 0 . Beta1 
 - mvn - s settings - example . xml clean install - DskipTests = true - DtestElasticsearchVersion = false 
 - mvn - s settings - example . xml checkstyle : check - Dpuppycrawl . checkstyle . version = $ { CS _ POM _ VERSION } 
 - cd . . / 
 - rm - rf hibernate - search 
 - else 
 - echo " build is skipped . . . " 
 - fi 
 + # # NoErrorTest - Hibernate Search ( oraclejdk8 ) 
 + # - script : 
 + # name : NoErrorTest - Hibernate Search 
 + # code : | 
 + # if [ [ $ SKIP _ CI = = ' false ' ] ] ; then 
 + # set - e 
 + # CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) 
 + # echo CS _ version : $ { CS _ POM _ VERSION } 
 + # for i in 1 2 3 4 5 ; do git clone https : / / github . com / hibernate / hibernate - search . git & & break | | sleep 15 ; done 
 + # cd hibernate - search 
 + # git checkout 5 . 8 . 0 . Beta1 
 + # mvn - s settings - example . xml clean install - DskipTests = true - DtestElasticsearchVersion = false 
 + # mvn - s settings - example . xml checkstyle : check - Dpuppycrawl . checkstyle . version = $ { CS _ POM _ VERSION } 
 + # cd . . / 
 + # rm - rf hibernate - search 
 + # else 
 + # echo " build is skipped . . . " 
 + # fi 
 
 # NoErrorTest - HtmlUnit ( oraclejdk8 ) 
 - script : 
 @ @ - 150 , 18 + 150 , 18 @ @ build : 
 echo " build is skipped . . . " 
 fi 
 
 - # NoErrorTest - checkstyle ' s sevntu 
 - - script : 
 - name : NoErrorTest - checkstyle ' s sevntu 
 - code : | 
 - if [ [ $ SKIP _ CI = = ' false ' ] ] ; then 
 - set - e 
 - CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) 
 - echo CS _ version : $ { CS _ POM _ VERSION } 
 - mvn compile verify - Dmaven . sevntu - checkstyle - check . checkstyle . version = $ { CS _ POM _ VERSION } - Dmaven . test . skip = true - Dcheckstyle . ant . skip = true - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true - Dforbiddenapis . skip = true - Dxml . skip = true 
 - else 
 - echo " build is skipped . . . " 
 - fi 
 + # # NoErrorTest - checkstyle ' s sevntu 
 + # - script : 
 + # name : NoErrorTest - checkstyle ' s sevntu 
 + # code : | 
 + # if [ [ $ SKIP _ CI = = ' false ' ] ] ; then 
 + # set - e 
 + # CS _ POM _ VERSION = $ ( mvn - q - Dexec . executable = ' echo ' - Dexec . args = ' $ { project . version } ' - - non - recursive org . codehaus . mojo : exec - maven - plugin : 1 . 3 . 1 : exec ) 
 + # echo CS _ version : $ { CS _ POM _ VERSION } 
 + # mvn compile verify - Dmaven . sevntu - checkstyle - check . checkstyle . version = $ { CS _ POM _ VERSION } - Dmaven . test . skip = true - Dcheckstyle . ant . skip = true - Dpmd . skip = true - Dfindbugs . skip = true - Dcobertura . skip = true - Dforbiddenapis . skip = true - Dxml . skip = true 
 + # else 
 + # echo " build is skipped . . . " 
 + # fi 
 
 # NoExceptiontest - Apache Struts ( oraclejdk8 ) 
 - script :

NEAREST DIFF:
diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / AbstractExpressionHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / AbstractExpressionHandler . java 
 index 1a5fe91 . . 67fc54d 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / AbstractExpressionHandler . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / AbstractExpressionHandler . java 
 @ @ - 236 , 9 + 236 , 9 @ @ public abstract class AbstractExpressionHandler { 
 * 
 * @ return the start of the specified line 
 * / 
 - protected final int getLineStart ( String line ) { 
 + private int getLineStart ( String line ) { 
 int index = 0 ; 
 - while ( index < line . length ( ) & & Character . isWhitespace ( line . charAt ( index ) ) ) { 
 + while ( Character . isWhitespace ( line . charAt ( index ) ) ) { 
 index + + ; 
 } 
 return CommonUtils . lengthExpandedTabs ( 
 @ @ - 256 , 27 + 256 , 6 @ @ public abstract class AbstractExpressionHandler { 
 } 
 
 / * * 
 - * Check the indentation of consecutive lines for the expression we are 
 - * handling . 
 - * 
 - * @ param startLine the first line to check 
 - * @ param endLine the last line to check 
 - * @ param indentLevel the required indent level 
 - * / 
 - protected final void checkLinesIndent ( int startLine , int endLine , 
 - IndentLevel indentLevel ) { 
 - / / check first line 
 - checkLineIndent ( startLine , indentLevel ) ; 
 - 
 - / / check following lines 
 - final IndentLevel offsetLevel = 
 - new IndentLevel ( indentLevel , getBasicOffset ( ) ) ; 
 - for ( int i = startLine + 1 ; i < = endLine ; i + + ) { 
 - checkLineIndent ( i , offsetLevel ) ; 
 - } 
 - } 
 - 
 - / * * 
 * Check the indentation for a set of lines . 
 * 
 * @ param lines the set of lines to check 
 @ @ - 329 , 22 + 308 , 6 @ @ public abstract class AbstractExpressionHandler { 
 } 
 
 / * * 
 - * Check the indent level for a single line . 
 - * 
 - * @ param lineNum the line number to check 
 - * @ param indentLevel the required indent level 
 - * / 
 - private void checkLineIndent ( int lineNum , IndentLevel indentLevel ) { 
 - final String line = indentCheck . getLine ( lineNum - 1 ) ; 
 - if ( ! line . isEmpty ( ) ) { 
 - final int start = getLineStart ( line ) ; 
 - if ( indentLevel . isGreaterThan ( start ) ) { 
 - logChildError ( lineNum , start , indentLevel ) ; 
 - } 
 - } 
 - } 
 - 
 - / * * 
 * Check the indentation for a single line . 
 * 
 * @ param lineNum the number of the line to check 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / ImportHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / ImportHandler . java 
 index d1a93c3 . . 54fc104 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / ImportHandler . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / ImportHandler . java 
 @ @ - 43 , 12 + 43 , 14 @ @ public class ImportHandler extends AbstractExpressionHandler { 
 
 @ Override 
 public void checkIndentation ( ) { 
 - final int lineStart = getMainAst ( ) . getLineNo ( ) ; 
 - final DetailAST semi = getMainAst ( ) . findFirstToken ( TokenTypes . SEMI ) ; 
 - final int lineEnd = semi . getLineNo ( ) ; 
 + final int columnNo = expandedTabsColumnNo ( getMainAst ( ) ) ; 
 
 - if ( getMainAst ( ) . getLineNo ( ) ! = lineEnd ) { 
 - checkLinesIndent ( lineStart , lineEnd , getIndent ( ) ) ; 
 + if ( ! getIndent ( ) . isAcceptable ( columnNo ) & & isOnStartOfLine ( getMainAst ( ) ) ) { 
 + logError ( getMainAst ( ) , " " , columnNo ) ; 
 } 
 + 
 + final DetailAST semi = getMainAst ( ) . findFirstToken ( TokenTypes . SEMI ) ; 
 + 
 + checkWrappingIndentation ( getMainAst ( ) , semi ) ; 
 } 
 } 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / LineWrappingHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / LineWrappingHandler . java 
 index 7e1ff94 . . 2127ba6 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / LineWrappingHandler . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / LineWrappingHandler . java 
 @ @ - 201 , 7 + 201 , 8 @ @ public class LineWrappingHandler { 
 & & node . equals ( lastAnnotationNode ) ; 
 if ( isCurrentNodeCloseAnnotationAloneInLine 
 | | node . getType ( ) = = TokenTypes . AT 
 - & & parentNode . getParent ( ) . getType ( ) = = TokenTypes . MODIFIERS ) { 
 + & & ( parentNode . getParent ( ) . getType ( ) = = TokenTypes . MODIFIERS 
 + | | parentNode . getParent ( ) . getType ( ) = = TokenTypes . ANNOTATIONS ) ) { 
 logWarningMessage ( node , firstNodeIndent ) ; 
 } 
 else { 
 diff - - git a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / PackageDefHandler . java b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / PackageDefHandler . java 
 index 6ab177d . . d113657 100644 
 - - - a / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / PackageDefHandler . java 
 + + + b / src / main / java / com / puppycrawl / tools / checkstyle / checks / indentation / PackageDefHandler . java 
 @ @ - 44 , 12 + 44 , 13 @ @ public class PackageDefHandler extends AbstractExpressionHandler { 
 @ Override 
 public void checkIndentation ( ) { 
 final int columnNo = expandedTabsColumnNo ( getMainAst ( ) ) ; 
 - if ( ! getIndent ( ) . isAcceptable ( columnNo ) ) { 
 + 
 + if ( ! getIndent ( ) . isAcceptable ( columnNo ) & & isOnStartOfLine ( getMainAst ( ) ) ) { 
 logError ( getMainAst ( ) , " " , columnNo ) ; 
 } 
 
 - checkLinesIndent ( getMainAst ( ) . getLineNo ( ) , 
 - getMainAst ( ) . findFirstToken ( TokenTypes . SEMI ) . getLineNo ( ) , 
 - getIndent ( ) ) ; 
 + final DetailAST semi = getMainAst ( ) . findFirstToken ( TokenTypes . SEMI ) ; 
 + 
 + checkWrappingIndentation ( getMainAst ( ) , semi ) ; 
 } 
 } 
 diff - - git a / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java b / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java 
 index 4785834 . . 1bbed90 100644 
 - - - a / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java 
 + + + b / src / test / java / com / puppycrawl / tools / checkstyle / checks / indentation / IndentationCheckTest . java 
 @ @ - 1463 , 7 + 1463 , 8 @ @ public class IndentationCheckTest extends BaseCheckTestSupport { 
 checkConfig . addAttribute ( " basicOffset " , " 8 " ) ; 
 checkConfig . addAttribute ( " tabWidth " , " 4 " ) ; 
 final String [ ] expected = { 
 - " 4 : " + getCheckMessage ( MSG _ CHILD _ ERROR , " import " , 2 , 8 ) , 
 + " 4 : " + getCheckMessage ( MSG _ ERROR , " . " , 2 , 4 ) , 
 + " 5 : " + getCheckMessage ( MSG _ ERROR , " import " , 1 , 0 ) , 
 } ; 
 verifyWarns ( checkConfig , getPath ( " InputInvalidImportIndent . java " ) , expected ) ; 
 } 
 @ @ - 1604 , 6 + 1605 , 24 @ @ public class IndentationCheckTest extends BaseCheckTestSupport { 
 } 
 
 @ Test 
 + public void testPackageDeclaration2 ( ) throws Exception { 
 + final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; 
 + checkConfig . addAttribute ( " tabWidth " , " 4 " ) ; 
 + final String [ ] expected = { 
 + " 2 : " + getCheckMessage ( MSG _ ERROR , " package def " , 1 , 0 ) , 
 + } ; 
 + verifyWarns ( checkConfig , getNonCompilablePath ( " InputPackageDeclaration2 . java " ) , expected ) ; 
 + } 
 + 
 + @ Test 
 + public void testPackageDeclaration3 ( ) throws Exception { 
 + final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; 
 + checkConfig . addAttribute ( " tabWidth " , " 4 " ) ; 
 + final String [ ] expected = CommonUtils . EMPTY _ STRING _ ARRAY ; 
 + verifyWarns ( checkConfig , getPath ( " InputPackageDeclaration3 . java " ) , expected ) ; 
 + } 
 + 
 + @ Test 
 public void testLambda1 ( ) throws Exception { 
 final DefaultConfiguration checkConfig = createCheckConfig ( IndentationCheck . class ) ; 
 checkConfig . addAttribute ( " tabWidth " , " 2 " ) ; 
 diff - - git a / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration2 . java b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration2 . java 
 new file mode 100644 
 index 0000000 . . ac88911 
 - - - / dev / null 
 + + + b / src / test / resources - noncompilable / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration2 . java 
 @ @ - 0 , 0 + 1 , 4 @ @ 
 + @ Deprecated / / indent : 1 exp : 1 
 + package com . puppycrawl . tools . checkstyle . checks . indentation ; / / indent : 1 exp : 0 warn 
 + 
 + public class InputPackageDeclaration2 { } / / indent : 0 exp : 0 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputInvalidImportIndent . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputInvalidImportIndent . java 
 index 2a3830b . . f08a917 100644 
 - - - a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputInvalidImportIndent . java 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputInvalidImportIndent . java 
 @ @ - 1 , 7 + 1 , 10 @ @ 
 package com . puppycrawl . tools . checkstyle . checks . indentation ; / / indent : 0 exp : 0 
 
 import java . util / / indent : 0 exp : 0 
 - . RandomAccess ; / / indent : 2 exp : 8 warn 
 + . RandomAccess ; import java . util . RandomAccess ; / / indent : 2 exp : 4 warn 
 + import java . util . RandomAccess ; / / indent : 1 exp : 0 warn 
 + import java . util / / indent : 0 exp : 0 
 + . RandomAccess ; / / indent : 19 exp : > = 8 
 
 / * * / / indent : 0 exp : 0 
 * This test - input is intended to be checked using following configuration : / / indent : 1 exp : 1 
 diff - - git a / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration3 . java b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration3 . java 
 new file mode 100644 
 index 0000000 . . 6a7e108 
 - - - / dev / null 
 + + + b / src / test / resources / com / puppycrawl / tools / checkstyle / checks / indentation / InputPackageDeclaration3 . java 
 @ @ - 0 , 0 + 1 , 3 @ @ 
 + / * * Comment * / package com . puppycrawl . tools . checkstyle . checks . indentation ; / / indent : 0 exp : > = 0 
 + 
 + public class InputPackageDeclaration3 { } / / indent : 0 exp : 0
